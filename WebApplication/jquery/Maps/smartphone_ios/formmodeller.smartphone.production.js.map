{"version":3,"sources":["jquery/editor/component/renderingview/js/base/bizagi.hacks.rendering.element.js","jquery/editor/component/renderingview/js/smartphone/bizagi.hacks.rendering.smartphone.container.js","jquery/editor/component/renderingview/js/smartphone/bizagi.hacks.rendering.smartphone.form.js","jquery/editor/component/renderingview/js/smartphone/bizagi.hacks.rendering.smartphone.render.js","jquery/editor/component/renderingview/js/smartphone/bizagi.hacks.rendering.smartphone.group.js","jquery/editor/component/renderingview/js/smartphone/bizagi.hacks.rendering.smartphone.contentPanel.js","jquery/editor/component/renderingview/js/smartphone/bizagi.hacks.rendering.smartphone.tab.js","jquery/editor/component/renderingview/js/smartphone/bizagi.hacks.rendering.smartphone.tabitem.js","jquery/editor/component/renderingview/js/smartphone/bizagi.hacks.rendering.smartphone.search.js","jquery/editor/component/renderingview/js/smartphone/bizagi.hacks.rendering.smartphone.image.js","jquery/editor/component/renderingview/js/smartphone/bizagi.hacks.rendering.smartphone.collectionnavigator.js","jquery/editor/component/renderingview/js/smartphone/bizagi.hacks.rendering.smartphone.nestedform.js","jquery/editor/component/renderingview/js/smartphone/bizagi.hacks.rendering.smartphone.date.js","jquery/editor/component/renderingview/js/smartphone/bizagi.hacks.rendering.smartphone.widget.js"],"names":["bizagi","rendering","element","original","$","extend","prototype","isContainedInNestedForm","self","this","parent","properties","type","isContainedInCollectionNavigator","getFormContainer","isNavigationForm","isContainedInGrid","undefined","column","isReadOnlyForm","isReadOnly","findElement","guid","selectElement","unselectElement","smartphone","container","postRenderContainer","apply","arguments","getFormType","click","ev","onClickCanvas","hasClass","sortable","addClass","addDraggableClassToContainer","isContainerSortable","data","display","displayName","form","modeler","params","reviewMode","setTimeout","configureSortablePlugin","isClickEventAllowed","mousedown","onMouseDown","onClick","messageValidation","showValidationMessage","hasChildren","children","length","selectElementByGuid","guids","i","l","foundElement","IsOnClickEvent","disableSortablePlugin","position","offset","width","outerWidth","height","outerHeight","triggerGlobalHandler","removeClass","mainPanel","formModelerSelector","bind","args","onSortStart","onSortFinish","onScrollingForm","ui","currentDragSource","getDragSource","item","items","revert","connectWith","distance","cursorAt","top","left","placeholder","delay","cancel","getMode","containment","helper","event","$template","sortableHelper","$container","start","stop","beforeStop","window","x3","disableSelection","loadHelperTemplate","setConnectWith","classConnect","isContainerDraggable","$containerPanel","each","$child","append","mouseenter","mouseleave","normalizeType","isElementSortAllowed","mode","includes","sortableElement","helperTemplate","toLowerCase","id","caption","icon","mainContainer","tmpl","wrapperMainScroll","appendTo","css","zIndex","widthTotal","parseFloat","eq","when","templateService","getTemplate","concat","pipe","result","toolbar","xpathNavigator","layout","parents","first","changeVisibility","argument","visible","util","parseBoolean","index","sourceContainer","$mainPanel","sortContainerTimeout","finalPosition","not","targetContainer","initialPosition","source","stopImmediatePropagation","button","ctrlIsPressed","x","clientX","y","clientY","preventDefault","stopPropagation","replace","messages","message","split","setValidationMessage","getContainerMessage","containerMessage","next","uniqueId","$message","attr","text","$form","localization","getResource","removeAttr","allowButtons","remove","messageElement","createMessageValidationElement","prepend","resource","mainElement","boundingClient","getBoundingClientRect","clientTopY","clientButtonY","bottom","isInTop","Math","abs","factor","scrollTop","scrollHeight","offsetHeight","delta","render","postRenderElement","configureLayoutElement","setMouseDownEvent","renderSearch","labelElement","getLabelGrid","getLabel","onRenderClick","dblclick","onLabelDoubleClick","resetStyle","configureDroppablePlugin","configureDraggablePlugin","find","onRemoveElement","setDeleteLayoutItem","hoverElement","hoverRestoreElement","closest","hover","detach","draggable","opacity","droppable","hoverClass","tolerance","activeClass","greedy","drop","activate","show","deactivate","hide","on","onDrop","el","colorText","backgroundColor","options","isInternal","isColumn","e","document","activeElement","is","trigger","presenter","editor","component","editableLabel","label","value","subscribe","showElementLabelEditor","$sourceElement","$helperElement","helperData","xpathValue","utilities","buildComplexXpath","xpath","contextScope","isScopeAttribute","guidRelatedEntity","property","renderType","nodeSubtype","sourceGuid","isLayoutElement","columns","postRender","group","header","isInNestedform","lastElementInserted","contentPanel","$panel","$header","done","getElement","adjustEditLabel","background-color","border-radius","margin-left","right","tab","$tab","$addButton","$offsetLeft","$offsetRigth","wrap","before","after","info","currentTarget","updatePositions","updateErrorPositions","htmlTabELement","scrollLeft","tabItem","$tabHeader","setTabHeader","axis","sortStart","sortFinish","$htmlTabELement","get","scrollWidth","clientWidth","$currentTabItem","isEditableLabelActive","editDisplayName","redraw","tabHeader","editableLabelPresenter","measureString","dropRender","originalEvent","isObject","search","advancedSearch","image","control","getControl","containerType","thumbnail","widthWrapper","containerHeight","totalImagesInSameContainer","containerChildsSize","getChildreCount","containerChildsHeightSum","getChildrenSumHeight","countByRenderTypeWithParams","changeImageSize","imageWidth","imageHeight","executeTriggerHandler","widthValue","heightValue","slice","collectionnavigator","isRendered","canvas","navigationform","nestedForm","configureDesignView","title","formDisplayName","date","setDisplayValue","dateControl","getDateControl","inputPlaceholder","valueFormat","color","nameNewClass","fullNewClass","loadStyle","strikethru","underline","basicUserField","getEditableControl","$control","input","collectData","renderValues","getDisplayValue","getReadonlyControl"],"mappings":"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","sourcesContent":["\r\n/*\r\n*   @tittle: BizAgi FormModeler Editor Hacks Rendering Render\r\n*   @authors: Alexander Mejia\r\n\t@date: 06-mar-12\r\n*   @Comments:\r\n*   -   This script will define basic stuff for enable the rendering render\r\n*\t\tin the formModeler\r\n*/\r\n\r\nbizagi.rendering.element.original = $.extend( true, {}, bizagi.rendering.element.prototype );\r\n$.extend(bizagi.rendering.element.prototype, {\r\n        /*\r\n    *   Check if the current element is inside a nested form\r\n    */\r\n    isContainedInNestedForm: function () {\r\n        var self = this;\r\n\r\n        // If the element has no parent, we are in the root element\r\n        if (!self.parent) return false;\r\n\r\n        // If the parent is nested form, this element is contained in a nested form\r\n        if (self.parent.properties.type === \"nestedForm\") return true;\r\n\r\n        // If the parent is collectionnavigator, this element is contained in a collectionnavigator control\r\n        if (self.parent.properties.type === \"collectionnavigator\") return true;\r\n\r\n        // If the element has a parent, then check in parent recursively\r\n        return self.parent.isContainedInNestedForm();\r\n    },\r\n\r\n\r\n    /*\r\n    *   Check if the current element is inside a collection navigator\r\n    */\r\n    isContainedInCollectionNavigator: function () {\r\n        var self = this;\r\n\r\n        var form = self.getFormContainer();\r\n        var properties = form.properties;\r\n\r\n        return properties.isNavigationForm || false;\r\n    },\r\n\r\n    /*\r\n    * Returns true if the element is a column of a grid \r\n    */\r\n    isContainedInGrid: function () {\r\n        var self = this,\r\n            column = self.column;\r\n\r\n        return (column != undefined);\r\n\r\n    },\r\n\r\n\r\n    /*\r\n    * This method returns true if the current form is read only\r\n    */\r\n    isReadOnlyForm: function () {\r\n        var self = this;\r\n\r\n        var form = self.getFormContainer() || {};\r\n        var properties = form.properties || {};\r\n        if (properties.isReadOnly) {\r\n            return true;\r\n        }\r\n\r\n        return false;\r\n    },\r\n\r\n    /*\r\n    *   Finds an element by guid\r\n    */\r\n    findElement: function (guid) {\r\n        var self = this;\r\n        if (!guid) { return null; }\r\n\r\n        if (self.properties.guid === guid) {\r\n            // Element found\r\n            return this;\r\n        }\r\n\r\n        // Element not found\r\n        return null;\r\n    },\r\n\r\n    /*\r\n    *  Selects the current element\r\n    */\r\n    selectElement: function () { },\r\n\r\n    /*\r\n    *  Un-selects the current element\r\n    */\r\n    unselectElement: function () { }\r\n\r\n});","/*\r\n*   @tittle: BizAgi FormModeler Editor Hacks Rendering Container\r\n*   @authors: David Montoya\r\n\t@date: 02-mar-12\r\n*   @Comments:\r\n*   -   This script will define basic stuff for enable the rendering Container\r\n*\t\tin the formModeler\r\n*/\r\n\r\nbizagi.rendering.smartphone.container.original = $.extend( true, {}, bizagi.rendering.smartphone.container.prototype );\r\n$.extend(bizagi.rendering.smartphone.container.prototype, {\r\n    /*\r\n    *   Renders the current container\r\n    *   Also adds sortable behaviour\r\n    */\r\n    postRenderContainer: function (container) {\r\n        var self = this;\r\n\r\n        // Call original post-render\r\n        bizagi.rendering.smartphone.container.original.postRenderContainer.apply(this, arguments);\r\n\r\n        // If the current form is readonly return;\r\n        if (self.isReadOnlyForm()) {\r\n            return container;\r\n        }\r\n\r\n        if (self.getFormType() == 'template') {\r\n            if (self.properties.type == 'template') {\r\n                container.click(function (ev) {\r\n                    self.onClickCanvas(ev);\r\n                });\r\n            }\r\n\r\n            return container;\r\n        }\r\n\r\n        // Configure sortable\r\n        if (container.hasClass('ui-sortable')) { container.sortable('destroy'); }\r\n        container.addClass(\"ui-bizagi-itemfordrag\");\r\n        self.addDraggableClassToContainer();\r\n\r\n        if (self.isContainerSortable()) {\r\n\r\n            // Populate element data \r\n            container.data({\r\n                guid: self.properties.guid,\r\n                display: self.properties.displayName,\r\n                type: self.properties.type\r\n            });\r\n\r\n            if(!bizagi.form.modeler.params.reviewMode){\r\n                // Configure sortable plugin\r\n                setTimeout(function () {\r\n                    self.configureSortablePlugin(container);\r\n                }, 100);                \r\n            }\r\n        }\r\n\r\n        // Process clicks\r\n        if (self.isClickEventAllowed()) {\r\n            if (self.properties.type !== undefined &&\r\n                self.properties.type !== \"searchForm\" &&\r\n                self.properties.type !== \"form\" &&\r\n                self.properties.type !== \"queryForm\") {\r\n                container.mousedown(function (ev) { self.onMouseDown(ev); });\r\n                container.click(function (ev) {\r\n                    self.onClick(ev);\r\n                });\r\n            } else {\r\n                container.click(function (ev) {\r\n                    self.onClickCanvas(ev);\r\n                });\r\n            }\r\n        }\r\n      \r\n\r\n        if (self.properties.messageValidation) {\r\n            self.showValidationMessage(self.properties.messageValidation);\r\n        }\r\n        \r\n        return container;\r\n    },\r\n    \r\n    /*\r\n    * Return true if the container isn't empty\r\n    */\r\n    hasChildren: function() {\r\n        return this.children.length > 0;\r\n    },\r\n\r\n    /*\r\n    *   Selects an element in order to keep consistency between renderings\r\n    */\r\n    selectElementByGuid: function (guids) {\r\n        var self = this;\r\n\r\n        for (var i = 0, l = guids.length; i < l; i++) {\r\n            var guid = guids[i];\r\n            var foundElement = self.findElement(guid);\r\n            if (foundElement) {\r\n                // If the element has been found, then select that element\r\n                foundElement.selectElement({ IsOnClickEvent: false });\r\n            }\r\n        }\r\n    },\r\n\r\n    /*\r\n    *   Finds an element by guid\r\n    */\r\n    findElement: function (guid) {\r\n        var self = this;\r\n        if (!guid) { return null; }\r\n\r\n        if (self.properties.guid === guid) {\r\n            // Element found\r\n            return this;\r\n        } else {\r\n            // Find in children\r\n            for (var i = 0; i < self.children.length; i++) {\r\n                var foundElement = self.children[i].findElement(guid);\r\n                if (foundElement) return foundElement;\r\n            }\r\n        }\r\n\r\n        // Element not found\r\n        return null;\r\n    },\r\n\r\n    /*\r\n    *   Disable sortable plugin\r\n    */\r\n    disableSortablePlugin: function () {\r\n        var self = this;\r\n\r\n        if (self.container && self.container.hasClass('ui-sortable')) {\r\n            if (self.container.data()[\"ui-sortable\"]) {\r\n                self.container.sortable('destroy');\r\n            }\r\n        }\r\n\r\n        for (var i = 0, l = self.children.length; i < l; i = i + 1) {\r\n            if (self.children[i].container) {\r\n                self.children[i].disableSortablePlugin();\r\n            }\r\n        }\r\n    },\r\n\r\n    /*\r\n    *  Selects the current element\r\n    */\r\n    selectElement: function (params) {\r\n        var self = this;\r\n        var container = self.container;\r\n\r\n        // Add selected class\r\n        container.addClass(\"ui-bizagi-container-selected\");\r\n\r\n        // Get current element boundaries for select element event\r\n        var position = container.offset();\r\n        $.extend(position, {\r\n            width: container.outerWidth(),\r\n            height: container.outerHeight()\r\n        });\r\n\r\n        // Trigger select element handler\r\n        self.triggerGlobalHandler(\"selectelement\", $.extend(params, { position: position, guid: self.properties.guid, element: container, type: self.properties.type }));\r\n    },\r\n\r\n    /*\r\n    *  Un-selects the current element\r\n    */\r\n    unselectElement: function (params) {\r\n        var self = this;\r\n        var container = self.container;\r\n\r\n        container.removeClass(\"ui-bizagi-container-selected\");\r\n\r\n        if (params) {\r\n            $.extend(params, { guid: self.properties.guid });\r\n        }\r\n\r\n        // Trigger unselect element handler\r\n        self.triggerGlobalHandler(\"unselectelement\", params);\r\n    },\r\n\r\n    /*\r\n    *   \r\n    */\r\n    configureSortablePlugin: function (container) {\r\n        var self = this;\r\n        var mainPanel = self.triggerGlobalHandler(\"getMainPanel\", {});\r\n        var viewID = self.triggerGlobalHandler(\"getViewID\");\r\n\r\n        var formModelerSelector = 'form-modeler[id=\"' + viewID + '\"]'\r\n        \r\n        // Decorate with class to allow sortable connections\r\n        container.addClass(\"ui-bizagi-container-connectedSortable\");\r\n\r\n        // Define handlers\r\n        container.bind(\"sortstart\", function (ev, args) { self.onSortStart(args); });\r\n        container.bind(\"sortstop\", function (ev, args) { self.onSortFinish(args); });\r\n        container.bind( \"sort\", function(ev) { self.onScrollingForm(mainPanel, ev);});\r\n        container.bind(\"sortactivate\", function (ev, ui) {\r\n            self.currentDragSource = self.getDragSource(ui.item);\r\n        });\r\n\r\n        var items = \"> .ui-bizagi-draggable-item\";\r\n        \r\n        // Apply sortable plugin\r\n        container.sortable({\r\n            items: items,\r\n            revert: false,\r\n            connectWith: formModelerSelector + \" .ui-bizagi-container-connectedSortable:not(.ui-sortable-helper)\",\r\n            distance: 10,\r\n            cursorAt: { top: 0, left: 0 },\r\n            placeholder: \"ui-bizagi-placeholder\",\r\n            delay: 10,\r\n            cancel: (self.getMode() === \"layout\" ? \".bz-form-item, .ui-bizagi-input-editable\" : \".ui-bizagi-input-editable, .ui-bizagi-grid-cell\"),            \r\n            containment: mainPanel,\r\n\r\n            helper: function (event, ui) { \r\n                var $template = self.sortableHelper(ui);\r\n                var $container = $(this);\r\n                setTimeout(function() {\r\n                    $container.sortable(\"refreshPositions\");\r\n                }, 10);\r\n\r\n                return $template;\r\n            },\r\n            start: function () {\r\n                mainPanel && mainPanel.addClass('ui-start-drag');\r\n            },\r\n            stop: function () {\r\n                mainPanel && mainPanel.removeClass('ui-start-drag');\r\n            },\r\n            beforeStop: function () {\r\n                window.x3 = $('#mtool-container-helper');\r\n            }\r\n        }).disableSelection();\r\n\r\n        // Load helper template\r\n        self.loadHelperTemplate();\r\n    },\r\n\r\n    /*\r\n    *   Connects to another sortable container\r\n    */\r\n    setConnectWith: function (parent, guid) {\r\n        var self = this,\r\n                classConnect;\r\n\r\n        if (typeof parent === \"undefined\") {\r\n            return;\r\n        }\r\n\r\n        classConnect = \".ui-bizagi-container-connectedSortable\";\r\n        classConnect = classConnect + \"[id!= \" + guid + \"]\";\r\n        if (parent.container && parent.container.hasClass(\"ui-sortable\")) {\r\n            if (parent.container.data()[\"ui-sortable\"]) {\r\n                parent.container.sortable(\"option\", \"connectWith\", classConnect);\r\n            }\r\n        }\r\n\r\n\r\n        self.setConnectWith(parent.parent, guid);\r\n    },\r\n\r\n    /*\r\n    *   Add draggable class, and styles\r\n    */\r\n    addDraggableClassToContainer: function () {\r\n        var self = this;\r\n\r\n        // Check if the container is draggable or not\r\n        if (self.isContainerDraggable()) {\r\n            // Add container draggable styles\r\n            self.container.addClass(\"ui-bizagi-draggable-item\");\r\n            self.container.addClass('ui-dashed-layout');\r\n            var conteinerType = self.properties.type;\r\n            \r\n            if (conteinerType === \"horizontal\") { \r\n                var $containerPanel = $('> .bz-layout-col', self.container);\r\n\r\n                $.each($containerPanel, function() {\r\n                    var $child = $(this);                                \r\n                    if ($child.children().length === 0) {  $child.append('<div class=\"children\"></div>'); }\r\n                })            \r\n     \r\n             }\r\n            \r\n            if (self.container.hasClass('ui-dashed-layout')) {\r\n                self.container.data('display', 'Layout');\r\n                self.container.data('type', 'layout');\r\n            }\r\n\r\n\r\n                // Add hovering style\r\n            $('> .ui-bizagi-container-panel', self.container).mouseenter(function () { $(this).addClass('ui-col-hover'); }).mouseleave(function () { $(this).removeClass('ui-col-hover'); });\r\n        }\r\n    },\r\n\r\n    /*\r\n    *   Check if the container can be draggable or not\r\n    */\r\n    isContainerDraggable: function () {\r\n        var self = this;\r\n\r\n        // Don't allow draggable when the item is inside a nested form\r\n        if (self.isContainedInNestedForm() || self.isContainedInCollectionNavigator()) return false;\r\n\r\n        // Allow draggable in the following containers\r\n        var type = self.properties.type || \"form\";\r\n        type = self.normalizeType(type);\r\n\r\n        if (type == \"group\" || type == \"nestedForm\" || type == \"tab\" ||\r\n            type == \"horizontal\" || type == \"contentPanel\" || type == \"collectionnavigator\") {\r\n            return true;\r\n        }\r\n\r\n        return false;\r\n    },\r\n\r\n    /*\r\n    *   Check if the container can be sortable or not\r\n    */\r\n    isContainerSortable: function () {\r\n        var self = this;\r\n\r\n        // Don't allow sortable when the item is inside a nested form\r\n        if (self.isContainedInNestedForm() || self.isContainedInCollectionNavigator()) return false;\r\n\r\n        // Allow sortable in the following containers\r\n        var type = self.properties.type || \"form\";\r\n        type = self.normalizeType(type);\r\n        if (type == \"form\" || type == \"group\" || type == \"panel\" || type == \"tabItem\" || type == \"queryForm\" ||\r\n            type == \"searchForm\" || type == \"contentPanel\" || type == \"offlineForm\" || type == \"adhocForm\") { return true; }\r\n\r\n        return false;\r\n    },\r\n\r\n    /*\r\n    *   Filter sortable depending current execution mode\r\n    */\r\n    isElementSortAllowed: function (item) {\r\n        var self = this,\r\n            mode = self.getMode();\r\n\r\n        if (mode === \"design\") {\r\n            if (item.hasClass('ui-bizagi-container-horizontal')) { return false; }\r\n\r\n        } else if (mode === \"layout\") {\r\n            if (item.hasClass('bz-form-item')) { return false; }\r\n        }\r\n\r\n        return true;\r\n    },\r\n\r\n    /*\r\n    *   Check if this container can be clicked or not depending the execution mode\r\n    */\r\n    isClickEventAllowed: function () {\r\n        var self = this,\r\n                mode = self.getMode(),\r\n                result = true;\r\n\r\n        // Don't allow clicks when the item is inside a nested form\r\n        if (self.isContainedInNestedForm() || self.isContainedInCollectionNavigator()) return false;\r\n\r\n        var type = self.properties.type || \"form\";\r\n        type = self.normalizeType(type);\r\n        if (mode == \"design\") {\r\n            // Check in design mode\r\n            //if (type == \"form\" || type == \"horizontal\" || type == \"panel\" || type == \"searchForm\") { return false; }\r\n            if (type == \"panel\") { return false; }\r\n\r\n        } else if (mode === \"layout\") {\r\n            // Check in layout mode\r\n            if ([\"form\", \"group\", \"panel\", \"tab\", \"tabItem\", \"contentPanel\"].includes(type)) { return false; }\r\n        }\r\n\r\n        return result;\r\n    },\r\n\r\n    /*\r\n    *   Draws the sortable helper when draggin a container\r\n    */\r\n    sortableHelper: function (sortableElement) {\r\n        var self = this;\r\n\r\n        // Makes sure the helper template has been loaded\r\n        if (!self.helperTemplate) return null;\r\n\r\n        // Decorate current dragging element with a class\r\n        sortableElement.addClass('ui-dragging');\r\n\r\n        // Extract data from element\r\n        var data = sortableElement.data();\r\n        var type = data.type ? data.type.toLowerCase() : \"render\";\r\n        var id = data.guid;\r\n        var caption = data.display;\r\n\r\n        var icon = self.triggerGlobalHandler(\"getControlIcon\", { type: type, id: id });\r\n        var mainContainer = self.triggerGlobalHandler(\"getMainContainer\", {});\r\n\r\n\r\n        if (!caption || caption === '') {\r\n            caption = type;\r\n        }\r\n\r\n        // Draw the helper\r\n        var element = $.tmpl(self.helperTemplate, { id: type, caption: caption, icon: icon });\r\n        var wrapperMainScroll = $('.wrapper-main-scroll', mainContainer);\r\n        var sortableHelper = element.appendTo(wrapperMainScroll).css({ 'zIndex': 900 });\r\n\r\n        // Adjust size\r\n        var widthLabel = parseFloat($('label', sortableHelper).width());\r\n        var widthIcon = parseFloat($('.biz-ico', sortableHelper).eq(0).width());\r\n        var widthTotal = widthLabel + widthIcon + 40 + 'px';\r\n        sortableHelper.css('width', widthTotal);\r\n\r\n        return sortableHelper;\r\n    },\r\n\r\n    /*\r\n    *   Loads the helper template\r\n    */\r\n    loadHelperTemplate: function () {\r\n        var self = this;\r\n\r\n        // Load helper template and return deferred\r\n        return $.when(\r\n            bizagi.templateService.getTemplate(bizagi.getTemplate(\"bizagi.editor.component.renderingview\").concat(\"#bizagi-render-drag-helper\"))\r\n        ).pipe(function (tmpl) {\r\n            self.helperTemplate = tmpl;\r\n            return self.helperTemplate;\r\n        });\r\n    },\r\n\r\n    /*\r\n    *   Evaluates the drag source based on the item\r\n    */\r\n    getDragSource: function (item) {\r\n        var result = {\r\n            container: false,\r\n            toolbar: false,\r\n            xpathNavigator: false,\r\n            layout: false,\r\n            data: null\r\n        };\r\n\r\n        if ($(item).hasClass(\"bz-form-item\") || $(item).hasClass(\"bz-container\")) {\r\n            // Render source\r\n            result.container = true;\r\n            result.data = { guid: $(item).parents(\"bz-container\").first().data(\"guid\") };\r\n\r\n        } else if ($(item).hasClass(\"mtool-item\")) {\r\n            // Controls navigator source\r\n            result.toolbar = true;\r\n            result.data = $(item).data(\"render\");\r\n\r\n        } else if ($(item).hasClass(\"bizagi_editor_xpathnavigator_data\")) {\r\n            // Xpath navigator source\r\n            result.xpathNavigator = true;\r\n            result.data = $(item).data();\r\n\r\n        } else if ($(item).hasClass(\"bz-fm-layout-navigator-item\")) {\r\n            // layout navigator source\r\n            result.layout = true;\r\n            result.data = $(item).data(\"id\");\r\n        }\r\n\r\n        return result;\r\n    },\r\n\r\n    /* \r\n    *   Hides / Show container \r\n    */\r\n    changeVisibility: function (argument) {\r\n        var self = this;\r\n        var properties = self.properties;\r\n\r\n        // Store in properties\r\n        properties.visible = bizagi.util.parseBoolean(argument);\r\n\r\n        // Hide - show the render\r\n        if (properties.visible) {\r\n            $(self.container).removeClass(\"ui-state-disabled\");\r\n\r\n        } else {\r\n            $(self.container).addClass(\"ui-state-disabled\");\r\n        }\r\n    },\r\n\r\n    /*\r\n    *   EVENT HANDLERS\r\n    */\r\n\r\n    /*\r\n    *   Manages sort start event\r\n    */\r\n    onSortStart: function (ui) {\r\n        var self = this;\r\n\r\n        // Save drag position\r\n        var index = $(ui.item).parent().children(\".ui-bizagi-itemfordrag\").index(ui.item);\r\n        ui.item.data(\"start-position\", index);\r\n\r\n        // Save parent source        \r\n        var sourceContainer = $(ui.item).parents(\".bz-container\").first().data(\"guid\") ||\r\n                               self.triggerGlobalHandler(\"getparentid\", { guid: $(ui.item).data(\"guid\") });\r\n\r\n        ui.item.data(\"sourceContainer\", sourceContainer);\r\n\r\n        if (index >= 0) {\r\n            // Trigger event to callers\r\n            self.triggerGlobalHandler(\"sortstart\");\r\n        }\r\n    },\r\n\r\n    onScrollingForm:function($mainPanel, ev){\r\n\r\n    },\r\n\r\n    /*\r\n    *   Manages sort finish event\r\n    */\r\n    onSortFinish: function (ui) {\r\n        var self = this;\r\n\r\n\r\n        // Set a timer to avoid multiple drop bug at the same time\r\n        if (bizagi.sortContainerTimeout != null) {\r\n            return;\r\n        }\r\n        bizagi.sortContainerTimeout = setTimeout(function () {\r\n            bizagi.sortContainerTimeout = null;\r\n        }, 100);\r\n\r\n\r\n        var finalPosition = $(ui.item).parent().children(\".ui-bizagi-itemfordrag\").not(\".ui-sortable-placeholder\").index(ui.item),\r\n            targetContainer = $(ui.item).parents(\".bz-container\").first().data(\"guid\") || self.triggerGlobalHandler(\"getparentid\", { guid: $(ui.item).data(\"guid\") }),\r\n            initialPosition = ui.item.data(\"start-position\"),\r\n            sourceContainer = ui.item.data(\"sourceContainer\");\r\n\r\n        // Check if sort finish operation is available\r\n        if (self.isElementSortAllowed($(ui.item)) == false) {\r\n            self.container.sortable('cancel');\r\n            return false;\r\n        };\r\n\r\n        if (finalPosition >= 0) {\r\n            // Trigger sort finish event\r\n            self.triggerGlobalHandler(\"sortfinish\", {\r\n                source: self.currentDragSource,\r\n                initialPosition: initialPosition,\r\n                finalPosition: finalPosition,\r\n                sourceContainer: sourceContainer,\r\n                targetContainer: targetContainer\r\n            });\r\n        }\r\n\r\n        return true;\r\n    },\r\n\r\n    onClickCanvas: function (ev) {\r\n        var self = this;\r\n\r\n        // Cancel bubble\r\n        ev.stopImmediatePropagation();\r\n       \r\n\r\n        $(\".bz-form-item\").removeClass(\"ui-state-active\");\r\n        $(\".ui-bizagi-grid-cell\").removeClass(\"ui-state-active\");\r\n        $(\".bz-container\").removeClass(\"ui-bizagi-container-selected\");\r\n        self.unselectElement();\r\n\r\n        if (ev.button == 0 || ev.button == 1) {\r\n            self.triggerGlobalHandler(\"selectcontainerform\", {});\r\n        }\r\n    },\r\n\r\n\r\n    /*\r\n    *   Manages container click\r\n    */\r\n    onClick: function (ev) {\r\n        var self = this,\r\n            container = self.container;\r\n\r\n        // Cancel bubble\r\n        ev.stopImmediatePropagation();\r\n        \r\n        var isCtrlPressed = self.triggerGlobalHandler(\"checkCtrlKey\", {});\r\n        if (isCtrlPressed) {\r\n            // Toggle selection\r\n            if (container.hasClass(\"ui-bizagi-container-selected\")) {\r\n                self.unselectElement({ ctrlIsPressed: true });\r\n            } else {\r\n                self.selectElement({\r\n                    IsOnClickEvent: true,\r\n                    ctrlIsPressed: true\r\n                });\r\n            }\r\n        } else {\r\n            if (ev.button == 0 || ev.button == 1) {\r\n                // Remove selected style to any render\r\n                $(\".bz-form-item\").removeClass(\"ui-state-active\");\r\n                $(\".bz-container\").not(container).removeClass(\"ui-bizagi-container-selected\");\r\n\r\n                // Toggle selection\r\n                if (container.hasClass(\"ui-bizagi-container-selected\")) {\r\n                    self.unselectElement();\r\n                } else {\r\n                    self.selectElement({ IsOnClickEvent: true });\r\n                }\r\n            }\r\n        }\r\n    },\r\n\r\n    /*\r\n    *   Manages mouse down event \r\n    */\r\n    onMouseDown: function (ev) {\r\n        var self = this;\r\n\r\n\r\n        if (ev.button == 0 || ev.button == 1) {\r\n            self.setConnectWith(self.parent, self.container.data(\"guid\"));      \r\n\r\n        } else if (ev.button == 2) {\r\n            // Trigger element right click event\r\n            self.triggerGlobalHandler(\"elementrightclick\", { guid: self.properties.guid, position: { x: ev.clientX, y: ev.clientY} });\r\n\r\n            // Prevent default behaviour\r\n            ev.preventDefault();\r\n            ev.stopPropagation();\r\n            return false;\r\n        }\r\n\r\n    },\r\n\r\n    normalizeType: function(type){\r\n        return type\r\n                .replace(/smartphone/, '')\r\n                .replace(/tablet/, '')\r\n                .replace(/offline/, '');\r\n    },\r\n\r\n    /**\r\n     * Show validation messages\r\n     * @param messages\r\n     */\r\n    showValidationMessage: function (messages) {\r\n        var self = this;\r\n        var message = messages.split('</br>')[0];\r\n        if (message) { self.setValidationMessage(message); }\r\n    },\r\n\r\n    getContainerMessage: function () {\r\n        if (!this.containerMessage)\r\n            this.containerMessage = $(\".bz-container-message__text\", this.container.next(\"[data-parent=\" + this.properties.uniqueId + \"]\"));\r\n\r\n        return this.containerMessage;\r\n    },\r\n\r\n    setValidationMessage: function (message) {\r\n        var self = this;\r\n\r\n        if (typeof this.container !== \"undefined\") {\r\n            var $message = self.getContainerMessage();\r\n\r\n            if (message && message.length > 0) {\r\n                message = message.replace(/<\\w+>([^<]*)<\\/\\w+>/g, \"$1\");\r\n\r\n                $message.attr(\"data-error\", message);\r\n                $message.text(message);\r\n                this.container.addClass(\"bz-container--error\");\r\n            } else {\r\n                $message.text(\"\");\r\n                this.container.removeClass(\"bz-container--error\");\r\n            }\r\n        }\r\n    }\r\n\r\n});","\r\n/*\r\n*   @tittle: Bizagi FormModeler Editor Hacks Rendering Form\r\n*   @authors: UI Forms Team\r\n*   @Comments:\r\n*   -   This script will define basic stuff for enable the rendering Form\r\n*\t\tin the formModeler (delete div button container)\r\n*/\r\n\r\n\r\nbizagi.rendering.smartphone.form.original = $.extend( true, {}, bizagi.rendering.smartphone.form.prototype );\r\n$.extend(bizagi.rendering.smartphone.form.prototype, {\r\n    /*\r\n     *   Renders the current container\r\n     *   Removes buttons from original rendering\r\n     */\r\n    postRenderContainer: function (form) {\r\n        var self = this;\r\n        var $form = form;\r\n\r\n        (self.children.length === 0) ? $form.attr(\"drophere\", bizagi.localization.getResource(\"formmodeler-component-editor-layout-drophere-containers\"))\r\n                                     : $form.removeAttr(\"drophere\"); \r\n                                                     \r\n        // Call original rendering\r\n        bizagi.rendering.smartphone.form.original.postRenderContainer.apply(this, arguments);\r\n        \r\n                               \r\n        // Remove button container\r\n        var allowButtons = typeof (self.params.allowButtons) !== undefined ? self.params.allowButtons : false;\r\n        if (!allowButtons) {\r\n            $(\".ui-bizagi-button-container\", form).remove();\r\n        }\r\n\r\n        if (self.properties.messageValidation && self.properties.messageValidation.length > 0) {\r\n            var messageElement = self.createMessageValidationElement(self.properties.messageValidation);\r\n            form.prepend(messageElement);\r\n        }\r\n\r\n        return form;\r\n    },\r\n\r\n    createMessageValidationElement: function (message) {\r\n        var self = this;\r\n        var resource = bizagi.localization.getResource(\"formmodeler-validations-form\");\r\n\r\n        var messageElement = $('<div class=\"ui-message-validation\"/>');\r\n        $('<span>' + resource + '<i class=\"biz-ico bz-studio bz-warning-red_16x16_standard\" title=\"' + message + '\"></i></span>').appendTo(messageElement);\r\n        $(messageElement, \"div\").click(function () {\r\n            self.triggerGlobalHandler(\"showPropertiesForm\");\r\n        });\r\n\r\n        return messageElement;\r\n    },\r\n\r\n\r\n    /*\r\n    *   Manages scrolling  event\r\n    */   \r\n    onScrollingForm:function($mainPanel, ev){\r\n        var mainElement = $mainPanel[0];               \r\n        var boundingClient = mainElement.getBoundingClientRect();\r\n        var clientTopY = boundingClient.top;\r\n        var clientButtonY = boundingClient.bottom\r\n               \r\n        function isInTop(){\r\n            return Math.abs(ev.clientY - clientTopY) <= 20;\r\n        }\r\n        \r\n        function isInBottom(){\r\n            return Math.abs(clientButtonY - ev.clientY) <= 30;    \r\n        }\r\n\r\n        function move(){            \r\n            var factor = isInTop() ? -1 : 1;                        \r\n            var scrollTop = $mainPanel.scrollTop();\r\n            \r\n            if (factor === 1) {                                \r\n                if (scrollTop > (mainElement.scrollHeight - mainElement.offsetHeight)){\r\n                    return;\r\n                }\r\n            }\r\n            \r\n            var delta = scrollTop + (40 * factor)                \r\n            $mainPanel.scrollTop(delta);                                    \r\n        }      \r\n\r\n        // Top border\r\n        if (isInTop() || isInBottom()){                           \r\n            setTimeout(move, 100);   \r\n        }        \r\n    }\r\n    \r\n    \r\n    \r\n});\r\n   ","\r\n/*\r\n*   @tittle: BizAgi FormModeler Editor Hacks Rendering Render\r\n*   @authors: Alexander Mejia\r\n\t@date: 06-mar-12\r\n*   @Comments:\r\n*   -   This script will define basic stuff for enable the rendering render\r\n*\t\tin the formModeler\r\n*/\r\n\r\nbizagi.rendering.smartphone.render.original = $.extend( true, {}, bizagi.rendering.smartphone.render.prototype );\r\n$.extend(bizagi.rendering.smartphone.render.prototype, {\r\n\r\n    /*\r\n    *   Renders the current element\r\n    *   Also adds draggable behaviour, and selection handlers\r\n    */\r\n    postRenderElement: function (element) {\r\n        var self = this,\r\n            properties = self.properties;\r\n\r\n        // Call original method\r\n        bizagi.rendering.smartphone.render.original.postRenderElement.apply(this, arguments);\r\n\r\n        // If the current form is readonly return;\r\n        if (self.isReadOnlyForm()) {\r\n            return element;\r\n        }\r\n\r\n        // Add guid to DOM\r\n        element.attr(\"guid\", self.properties.guid);\r\n\r\n        if (self.getFormType() == 'template') {\r\n            return self.configureLayoutElement(element);\r\n        }\r\n                    \r\n        // If the render is inside a nested form don't allow any events\r\n        if (!self.isContainedInNestedForm() && !self.isContainedInCollectionNavigator()) {\r\n\r\n            // Add mouse down handler\r\n            self.setMouseDownEvent(element);\r\n\r\n            // Add dragabble class\r\n            if (!self.isContainedInGrid()) {\r\n                element.addClass(\"ui-bizagi-draggable-item\");\r\n                element.addClass(\"ui-bizagi-itemfordrag\");\r\n            }\r\n\r\n            var renderSearch = $('.ui-bizagi-render-search', element);\r\n            if (renderSearch.length > 0) {\r\n                renderSearch.parent().addClass('ui-bizagi-display-as-search');\r\n            }\r\n\r\n            if (self.isClickEventAllowed()) {\r\n                var labelElement;\r\n                var type = self.properties.type || \"\";\r\n                type = type.replace('smartphone', '');\r\n\r\n                if (self.getMode() == \"design\" && type == \"grid\") {\r\n                    labelElement = self.getLabelGrid();\r\n                } else {\r\n                    labelElement = self.getLabel();\r\n                }\r\n\r\n                // Add click handlers\r\n                element.click(function (ev) {\r\n                    self.onRenderClick(ev, element);\r\n                });\r\n                if(!bizagi.form.modeler.params.reviewMode){\r\n                    labelElement && labelElement.dblclick(function () {\r\n                        self.onLabelDoubleClick(labelElement);\r\n                    });\r\n                }\r\n            }\r\n        }\r\n\r\n        if (self.properties.messageValidation) {\r\n            self.showValidationMessage(self.properties.messageValidation);\r\n        }\r\n\r\n        element.data({\r\n            guid: self.properties.guid,\r\n            display: self.properties.displayName,\r\n            type: self.properties.type\r\n        });\r\n\r\n        return self.resetStyle(element);\r\n    },\r\n\r\n  \r\n    /*\r\n    * Set several options used in template mode\r\n    */\r\n    configureLayoutElement: function (element) {\r\n        var self = this;\r\n\r\n        self.configureDroppablePlugin(element);\r\n        self.configureDraggablePlugin(element);\r\n\r\n        // Add click handlers\r\n        element.click(function (ev) {\r\n            self.onRenderClick(ev, element);\r\n        });\r\n              \r\n        element.dblclick(function () {\r\n            self.onLabelDoubleClick(element);\r\n        });\r\n       \r\n        element\r\n            .find('.biz-template-editor-render-hide-control')\r\n            .click(function (ev) {\r\n                self.onRemoveElement(ev, element);\r\n            });\r\n\r\n        self.setDeleteLayoutItem(element);        \r\n        \r\n        return element;\r\n    },\r\n    \r\n    /*\r\n    * Enable handler to allow delete an repeteable item or o layout item\r\n    */\r\n    setDeleteLayoutItem: function(element){\r\n        var self = this,\r\n            type = self.properties.type,\r\n            hoverElement = $(\"<span class='biz-icon biz-tmpl-delete pull-right bz-studio bz-delete_16x16_standard'></span>\"),\r\n            hoverRestoreElement = $(\"<span class='biz-icon biz-tmpl-delete pull-right bz-studio bz-undo_16x16_black'></span>\"),\r\n            parent = element.closest('[id]');\r\n          \r\n\r\n        // Wait to template is rendered\r\n        setTimeout(function () {\r\n            // If the element \r\n            if (parent.length == 0 && self.triggerGlobalHandler(\"isDeleteOptionAllowed\", { guid: self.properties.guid })) {\r\n                element.addClass('hover-applied');\r\n               \r\n\r\n                element.hover(function () {\r\n                    $(this).append(hoverRestoreElement);\r\n                }, function () {\r\n                    $(this).find(\"span.biz-tmpl-delete\").detach();\r\n                });\r\n\r\n                (function() {\r\n                    hoverRestoreElement.click(function () {\r\n                        // Trigger element right click event\r\n                        self.triggerGlobalHandler(\"restoreItem\", { guid: self.properties.guid });\r\n                    });\r\n                })();\r\n            }\r\n                // if the elements is a repeater item\r\n            else {\r\n                if (parent.attr('id') == undefined) { return; }\r\n                if (parent.hasClass('hover-applied')) { return; }\r\n\r\n                parent.addClass('hover-applied');\r\n                parent.hover(function () {\r\n                    $(this).append(hoverElement);\r\n                }, function () {\r\n                    $(this).find(\"span.biz-tmpl-delete\").detach();\r\n                });\r\n\r\n                (function(parent) {\r\n                    hoverElement.click(function() {\r\n                        // Trigger element right click event\r\n                        self.triggerGlobalHandler(\"deleteRepeaterItem\", { guid: parent.attr('id') });\r\n                    });\r\n                })(parent);\r\n            }\r\n        }, 10);\r\n        \r\n    },\r\n    \r\n    /*\r\n    * Apply draggable plugin\r\n    */\r\n    configureDraggablePlugin: function (element) {\r\n        var self = this;\r\n\r\n        element.draggable({\r\n            helper: 'clone',\r\n            zIndex: 9999,\r\n            opacity: 0.75,\r\n            cursorAt: { left: 5 },\r\n            containment: 'document',\r\n            cancel: '.biz-template-editor-render-placeholder',            \r\n            start: function (event, ui) {\r\n                $(ui.helper).data('isLayoutElement', true);\r\n            }            \r\n        });\r\n    },\r\n\r\n\r\n    /*\r\n    * Apply droppable plugin\r\n    */\r\n    configureDroppablePlugin: function (element) {\r\n        var self = this;\r\n\r\n        element.droppable({\r\n            hoverClass: \"ui-state-highlight\",\r\n            tolerance: \"pointer\",\r\n            activeClass: 'ui-editor-highlight',\r\n            greedy: true,\r\n            drop: function (event, ui) {\r\n                $(this).addClass('ui-state-highlight');\r\n            },\r\n            activate: function () {                \r\n                self.getFormContainer()\r\n                        .container\r\n                        .find(\"[noShow='true']\")\r\n                        .show();\r\n            },\r\n            deactivate: function () {                \r\n                self.getFormContainer()\r\n                       .container\r\n                       .find(\"[noShow='true']\")\r\n                       .hide();\r\n            }\r\n        });\r\n\r\n        element.on(\"drop\", function (ev, ui) { self.onDrop(ui); });\r\n    },\r\n\r\n\r\n    getLabelGrid: function () {\r\n        return $(\".bz-mobile-grid__header-title\", this.element);\r\n    },\r\n\r\n    resetStyle: function (el) {\r\n        var element = el, self = this;\r\n        var colorText = element.css('color');\r\n        var backgroundColor = element.css('background-color');\r\n\r\n        if (colorText == 'black') { element.css('color', ''); }\r\n        if (backgroundColor == 'white') { element.css('background-color', ''); }\r\n\r\n        return element;\r\n    },\r\n\r\n    /*\r\n    *  Selects the current element\r\n    */\r\n    selectElement: function (params) {\r\n        var self = this, options;\r\n        var properties = self.properties;\r\n\r\n        if(self.element) {\r\n            // Add selected class\r\n            self.element.addClass(\"ui-state-active\");\r\n\r\n            // Get current element boundaries for select element event\r\n            var position = self.element.offset();\r\n            $.extend(position, {\r\n                width: self.element.outerWidth(),\r\n                height: self.element.outerHeight()\r\n            });\r\n\r\n            // Trigger select element handler\r\n            options = $.extend(params, {\r\n                position: position,\r\n                guid: self.properties.guid,\r\n                element: self.element,\r\n                type: self.properties.type,\r\n                isInternal: properties.isInternal\r\n            });\r\n            self.triggerGlobalHandler(\"selectelement\", options);\r\n        }\r\n    },\r\n\r\n    /*\r\n    *  Un-selects the current element\r\n    */\r\n    unselectElement: function (params) {\r\n        var self = this;\r\n\r\n        // Remove selected class\r\n        self.element.removeClass(\"ui-state-active\");\r\n\r\n        if (params) {\r\n            $.extend(params, { guid: self.properties.guid });\r\n        }\r\n\r\n        // Trigger unselect element handler\r\n        self.triggerGlobalHandler(\"unselectelement\", params);        \r\n    },\r\n\r\n\r\n    /*\r\n    *   Check if this container can be clicked or not depending the execution mode\r\n    */\r\n    isClickEventAllowed: function () {\r\n        var self = this;\r\n        var mode = self.getMode();\r\n\r\n        // If is design and not a column\r\n        if (mode === \"design\" && !(self.column || self.isColumn)) return true;\r\n        return false;\r\n    },\r\n\r\n\r\n\r\n    /*\r\n    *   Configure mouse down handler\r\n    */\r\n    setMouseDownEvent: function (element) {\r\n        var self = this;\r\n\r\n\r\n        if (self.isClickEventAllowed()) {\r\n\r\n            // Add mouse down handler\r\n            element.bind('mousedown.contextmenu', function (e) {\r\n                if (e.button == 2) {\r\n                    // Trigger element right click event\r\n                    self.triggerGlobalHandler(\"elementrightclick\", { guid: self.properties.guid, position: { x: e.clientX, y: e.clientY } });\r\n\r\n                    // Prevent default behaviour\r\n                    e.preventDefault();\r\n                    e.stopPropagation();\r\n                    return false;\r\n                }\r\n\r\n                return true;\r\n            });\r\n        }\r\n    },\r\n\r\n    /*\r\n    *   Overrides visibility change to avoid hiding the element when not visible\r\n    */\r\n    changeVisibility: function (argument) {\r\n        var self = this,\r\n            properties = self.properties;\r\n\r\n        if (bizagi.util.parseBoolean(argument) == true) {\r\n            $(self.element).removeClass(\"ui-state-disabled\");\r\n        } else {\r\n            $(self.element).addClass(\"ui-state-disabled\");\r\n        }\r\n\r\n        // Update properties\r\n        properties.visible = argument;\r\n    },\r\n\r\n    /*\r\n    *   Show validation messages\r\n    */\r\n    showValidationMessage: function (messages) {\r\n        var self = this;\r\n        var message = messages.split('</br>')[0];\r\n        if (message) { self.setValidationMessage(message); }                                   \r\n    },\r\n\r\n    /*\r\n    *   Manages render clicks\r\n    */\r\n    onRenderClick: function (ev, element) {\r\n        var self = this;\r\n\r\n        // Stop bubbling and default behaviour\r\n        ev.stopPropagation();\r\n        ev.preventDefault();\r\n           \r\n        // Enable / disable selected style\r\n        var isCtrlPressed = self.triggerGlobalHandler(\"checkCtrlKey\", {});\r\n        if (isCtrlPressed) {\r\n            // Toggle selection\r\n            if (element && element.hasClass(\"ui-state-active\")) {\r\n                self.unselectElement({ ctrlIsPressed: true });\r\n            } else {\r\n                // fix for SUITE-7498\r\n                if ($(document.activeElement).is(\"input\") && $(document.activeElement).closest(\".bizagi_editor_component_properties\").length > 0) {\r\n                    $(document.activeElement).trigger(\"blur\");\r\n                    $(\".bizagi_editor_component_properties\").hide();\r\n                }\r\n\r\n                self.selectElement({\r\n                    IsOnClickEvent: true,\r\n                    ctrlIsPressed: true\r\n                });\r\n            }\r\n        } else {\r\n            if (ev.button == 0 || ev.button == 1) {\r\n                // Remove all render selections\r\n                $(\".bz-form-item\").not(element).removeClass(\"ui-state-active\");\r\n                $(\".ui-bizagi-grid-cell\").not(element).removeClass(\"ui-state-active\");\r\n                $(\".ui-bizagi-button\").not(element).removeClass(\"bz-state-active\");\r\n                $(\".bz-container\").removeClass(\"ui-bizagi-container-selected\");\r\n                $(\".ui-bizagi-render-layout\").not(element).removeClass(\"ui-state-active\");\r\n            }\r\n\r\n            // Toggle selection\r\n            if (element && element.hasClass(\"ui-state-active\")) {\r\n                self.unselectElement();\r\n            } else {\r\n                // fix for SUITE-7498\r\n                if ($(document.activeElement).is(\"input\") && $(document.activeElement).closest(\".bizagi_editor_component_properties\").length > 0) {\r\n                    $(document.activeElement).trigger(\"blur\");\r\n                    $(\".bizagi_editor_component_properties\").hide();\r\n                }\r\n\r\n                self.selectElement({ IsOnClickEvent: true });\r\n            }\r\n        }\r\n    },\r\n\r\n    /*\r\n    *   Manages label double click event\r\n    */\r\n    onLabelDoubleClick: function (labelElement) {\r\n        var self = this;\r\n\r\n        // In template context there are some elements (ex image) that can't change the label\r\n        if (self.triggerGlobalHandler(\"canChangeLabel\", { guid: self.properties.guid })) {\r\n\r\n            // Publish label edition event\r\n            self.triggerGlobalHandler(\"startlabeledition\");\r\n\r\n            // Create editable label component\r\n            var presenter = new bizagi.editor.component.editableLabel.presenter({\r\n                label: labelElement,\r\n                value: self.properties.displayName\r\n            });\r\n\r\n            // Bind change event\r\n            presenter.subscribe(\"change\", function (ev, args) {\r\n                self.triggerGlobalHandler(\"changelabel\", { guid: self.properties.guid, value: args.value });\r\n            });\r\n\r\n            presenter.subscribe(\"finish\", function(){\r\n                self.triggerGlobalHandler(\"finishlabeledition\");\r\n            });\r\n\r\n            // Render label\r\n            presenter.render();\r\n        }\r\n    },\r\n\r\n    /*\r\n    *   Manages hide click event for layout elements\r\n    */\r\n    onRemoveElement: function (ev, element) {\r\n        var self = this;\r\n\r\n        self.triggerGlobalHandler(\"hideElement\", { guid: self.properties.guid });\r\n    },\r\n\r\n    /*\r\n    *   Show the label editor and update the element\r\n    */\r\n    showElementLabelEditor: function () {\r\n        var self = this;\r\n\r\n        if (!(self.element.find(\".ui-bizagi-container-input-editable > input.ui-bizagi-input-editable\").length > 0)) {\r\n            $('label', self.element).trigger('dblclick');\r\n        }\r\n    },\r\n\r\n    /*\r\n    *   Manages drop event\r\n    */\r\n    onDrop: function (ui) {\r\n        var self = this;\r\n\r\n        var $sourceElement = $(ui.draggable);\r\n        var $helperElement = $(ui.helper);\r\n        var data = $sourceElement.data();\r\n        var helperData = $helperElement.data();\r\n\r\n        var xpathValue = bizagi.editor.utilities.buildComplexXpath(data.xpath, data.contextScope, data.isScopeAttribute, data.guidRelatedEntity)\r\n\r\n        // Trigger sort finish event\r\n        self.triggerGlobalHandler(\"dropfinish\", {\r\n            guid: self.properties.guid,\r\n            property: 'xpath',\r\n            value: xpathValue,\r\n            renderType: data.nodeSubtype,\r\n            sourceGuid: (helperData && helperData.isLayoutElement) ? $helperElement.attr('guid') : false\r\n        });\r\n    }\r\n});\r\n\r\n\r\n\r\nbizagi.rendering.smartphone.columns.column.original = $.extend( true, {}, bizagi.rendering.smartphone.columns.column.prototype );\r\n$.extend(bizagi.rendering.smartphone.columns.column.prototype, {\r\n    \r\n    postRender: function (element) {    \r\n        // Call original method\r\n         bizagi.rendering.smartphone.columns.column.original.postRender.apply(this, arguments);\r\n    }\r\n});\r\n\r\n","/**\r\n *   Name: Bizagi Form Modeler Group Extension\r\n *   Author: Alexander Mejia\r\n *   Comments:\r\n *   -   This script will redefine the group class to adjust to form modeler\r\n */\r\n\r\nbizagi.rendering.smartphone.group.original = $.extend(true, {}, bizagi.rendering.smartphone.group.prototype);\r\n$.extend(bizagi.rendering.smartphone.group.prototype, {\r\n\r\n    /**\r\n     * Template method to implement in each device to customize each container after processed\r\n     * @param {} group\r\n     * @returns {}\r\n     */\r\n    postRenderContainer: function (group) {\r\n        var self = this;\r\n\r\n        // Call original method        \r\n        bizagi.rendering.smartphone.group.original.postRenderContainer.apply(this, arguments);\r\n\r\n        if (\r\n            !self.hasChildren() &&\r\n            !self.isContainedInNestedForm() &&\r\n            !self.isContainedInCollectionNavigator()\r\n        ) {\r\n            var $content = $('.bz-collapsible__content', group);\r\n            $content.append('<div class=\"children\"></div>');\r\n        }\r\n\r\n        // If the current form is readonly return;\r\n        if (self.isReadOnlyForm()) return;\r\n\r\n        // Bind header double click\r\n        var header = group.find(\".bz-collapsible__header\");\r\n\r\n        if (!self.isInNestedform()) {\r\n            header.dblclick(function () {\r\n                // Publish label edition event\r\n                self.triggerGlobalHandler(\"startlabeledition\");\r\n\r\n                // Create editable label component\r\n                var presenter =\r\n                    new bizagi.editor.component.editableLabel.presenter({\r\n                        label: header,\r\n                        value: self.properties.displayName\r\n                    });\r\n\r\n                // Bind change event\r\n                presenter.subscribe(\"change\", function (ev, args) {\r\n                    self.triggerGlobalHandler(\"changelabel\", {guid: self.properties.guid, value: args.value});\r\n                });\r\n\r\n                presenter.subscribe(\"finish\", function(){\r\n                    self.triggerGlobalHandler(\"finishlabeledition\");\r\n                });\r\n\r\n                // Render label\r\n                presenter.render();\r\n            });\r\n        }\r\n\r\n        var guid = self.properties.guid;\r\n        setTimeout(function () {\r\n            var lastElementInserted = self.triggerGlobalHandler(\"getLastInsertedElement\");\r\n\r\n            if (guid == lastElementInserted) {\r\n                self.showElementLabelEditor();\r\n                self.triggerGlobalHandler(\"setLastInsertedElement\", null);\r\n            }\r\n        }, 0);\r\n    },\r\n\r\n    /**\r\n     * Disable sortable plugin\r\n     * @returns {}\r\n     */\r\n    disableSortablePlugin: function () {\r\n        var self = this;\r\n        var container = self.container.find('> .bz-collapsible__content');\r\n\r\n        if (container && container.hasClass('ui-sortable')) {\r\n            if (container.data()[\"ui-sortable\"]) {\r\n                container.sortable('destroy');\r\n            }\r\n        }\r\n\r\n        for (var i = 0, l = self.children.length; i < l; i = i + 1) {\r\n            if (self.children[i].container) {\r\n                self.children[i].disableSortablePlugin();\r\n            }\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Configure  sortable plugin\r\n     * @param {} container\r\n     * @returns {}\r\n     */\r\n    configureSortablePlugin: function (container) {\r\n        container = container.find('> .bz-collapsible__content');\r\n\r\n        return bizagi.rendering.smartphone.group.original.configureSortablePlugin.apply(this, arguments);\r\n    },\r\n\r\n    /**\r\n     * Check is in Nestedform\r\n     * Fix for SUITE-6665\r\n     * @returns {}\r\n     */\r\n    isInNestedform: function () {\r\n        var self = this;\r\n        var parent = self.parent;\r\n        var properties = self.properties;\r\n        var result = false;\r\n\r\n        do {\r\n            if (properties.type === \"nestedForm\" || properties.type === \"collectionnavigator\") {\r\n                result = true;\r\n                break;\r\n            } else {\r\n                properties = parent.properties;\r\n                parent = parent.parent;\r\n            }\r\n        } while (parent !== undefined);\r\n\r\n        return result;\r\n    },\r\n\r\n    /**\r\n     * Show the label editor and update the element\r\n     * @returns {}\r\n     */\r\n    showElementLabelEditor: function () {\r\n        var self = this;\r\n        var $header = self.container.find(\".bz-collapsible__header\");        \r\n        $header.trigger('dblclick');        \r\n    }\r\n\r\n});","/*\r\n*   Name: Bizagi Form Modeler Panel Extension\r\n*   Author: UI Forms Team\r\n*   Comments:\r\n*   -   This script will redefine the panel class to adjust to form modeler\r\n*/\r\n\r\n\r\n\r\nbizagi.rendering.smartphone.contentPanel.original = $.extend( true, {}, bizagi.rendering.smartphone.contentPanel.prototype );\r\n$.extend(bizagi.rendering.smartphone.contentPanel.prototype, {\r\n\r\n    /**\r\n     * Template method to implement in each device to customize each container after processed     \r\n     */\r\n    postRenderContainer: function ($panel) {\r\n        var self = this;\r\n\r\n        // Call original post-render\r\n        bizagi.rendering.smartphone.contentPanel.original.postRenderContainer.apply(this, arguments);       \r\n\r\n        if (\r\n            !self.hasChildren() &&\r\n            !self.isContainedInNestedForm() &&\r\n            !self.isContainedInCollectionNavigator()\r\n        ) {            \r\n            $panel.append('<div class=\"children\"></div>');\r\n        }\r\n        \r\n        \r\n\r\n        // Add custom class just for form modeler\r\n        $panel.addClass(\"ui-bizagi-container-contentpanel-formmodeler\");\r\n\r\n        $panel.prepend('<div class=\"ui-bizagi-container-contentpanel-header-container\"><span class=\"ui-bizagi-container-contentpanel-header\">' + self.properties.displayName +'</span></div>');\r\n        //bind header double click\r\n        var $header = $panel.find(\".ui-bizagi-container-contentpanel-header\");\r\n\r\n        $header.dblclick(function () {\r\n\r\n            $header.hide();\r\n\r\n            // Publish label edition event\r\n            self.triggerGlobalHandler(\"startlabeledition\");\r\n\r\n            // Create editable label component\r\n            var presenter = new bizagi.editor.component.editableLabel.presenter({ label: $header, value: self.properties.displayName });\r\n\r\n            // Bind change event\r\n            presenter.subscribe(\"change\", function (ev, args) {\r\n                self.triggerGlobalHandler(\"changelabel\", { guid: self.properties.guid, value: args.value });\r\n            });\r\n            presenter.subscribe(\"finish\", function(){\r\n                self.triggerGlobalHandler(\"finishlabeledition\");\r\n            });\r\n\r\n            // Render label\r\n            $.when(presenter.render()).done(function () {\r\n                if (self.getElement().find(\".ui-bizagi-container-input-editable\").length == 0) {\r\n                    setTimeout(function () {\r\n                        $header.hide();\r\n                        self.adjustEditLabel();\r\n                    }, 100);\r\n                } else {\r\n                    self.adjustEditLabel();\r\n                }\r\n            });\r\n        });\r\n    },\r\n\r\n    /**\r\n     * Disable sortable plugin    \r\n     */\r\n    disableSortablePlugin: function () {\r\n        var self = this;\r\n        var container = self.container.find('.ui-bizagi-container-contentpanel-wrapper');\r\n\r\n        if (container && container.hasClass('ui-sortable')) {\r\n            if (container.data()[\"ui-sortable\"]) {\r\n                container.sortable('destroy');\r\n            }\r\n        }\r\n\r\n        for (var i = 0, l = self.children.length; i < l; i++) {\r\n            if (self.children[i].container) {\r\n                self.children[i].disableSortablePlugin();\r\n            }\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Adjust edit label     \r\n     */\r\n    adjustEditLabel: function () {\r\n        var self = this;\r\n\r\n        self.getElement().find(\".ui-bizagi-container-input-editable\").css({\r\n            \"width\": \"95%\",\r\n            \"background-color\": \"orange\",\r\n            \"top\": \"-18px\",\r\n            \"border-radius\": \"10px\"\r\n        });\r\n\r\n        self.getElement().find(\".ui-bizagi-container-input-editable input\").css({\r\n            \"margin-left\": \"5px\",\r\n            \"width\": \"90%\"\r\n        });\r\n\r\n        self.getElement().find(\".ui-bizagi-render-confirmation\").css({\r\n            \"right\": \"10px\",\r\n            \"top\": \"5px\"\r\n        });\r\n    },\r\n\r\n    /**\r\n     * Show label editor     \r\n     */\r\n    showElementLabelEditor: function () {\r\n        var self = this;\r\n\r\n        if (!(self.container.find(\".ui-bizagi-container-input-editable > input.ui-bizagi-input-editable\").length > 0)) {\r\n            self.container.find(\"span:first\").trigger('dblclick');\r\n        }\r\n    }\r\n});","/*\r\n*   Name: BizAgi Form Modeler Tab Extension\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will redefine the tab class to adjust to form modeler\r\n*/\r\n\r\nbizagi.rendering.smartphone.tab.original = $.extend(true, {}, bizagi.rendering.smartphone.tab.prototype);\r\n$.extend(bizagi.rendering.smartphone.tab.prototype, {\r\n    /* \r\n    *   Template method to implement in each device to customize each container after processed\r\n    */\r\n    postRenderContainer: function ($tab) {\r\n        var self = this;\r\n        var properties = self.properties;\r\n\r\n        // Call original method        \r\n        bizagi.rendering.smartphone.tab.original.postRenderContainer.apply(this, arguments);\r\n\r\n        // If the current form is readonly return;\r\n        if (self.isReadOnlyForm()) {\r\n            return;\r\n        }\r\n\r\n        var $addButton = $('<div class=\"bz-tab--add\"><svg class=\"ico_16x16\"><use xlink:href=\"#icon-plus\"></use></svg></div>');\r\n        var $offsetLeft = $('<div style=\"display: none;\"><svg class=\"ico_16x16 offset__left-indicator\"><use xlink:href=\"#icon-arrow-left\"></svg></div>');\r\n        var $offsetRigth = $('<div style=\"display: none;\"><svg class=\"ico_16x16 offset__right-indicator\"><use xlink:href=\"#icon-arrow-rigth\"></svg></div>');\r\n        var $tabContainer = $('.bz-tabs', $tab).first();\r\n\r\n        $tabContainer\r\n            .wrap('<div class=\"bz__tabs--container\"></div>')\r\n            .before($offsetLeft)\r\n            .after($addButton)\r\n            .after($offsetRigth)\r\n            .on('updatePositions', function (ev, info) {\r\n                setTimeout(function () {\r\n\r\n                    var $container = $(ev.currentTarget);\r\n\r\n                    self.updatePositions($offsetLeft, $offsetRigth);\r\n                    self.updateErrorPositions($container);\r\n                }, 100);\r\n            });\r\n\r\n        $offsetLeft.click(function (event) {\r\n            event.stopPropagation();\r\n            var htmlTabELement = $('.bz-tabs', self.container);\r\n            htmlTabELement.scrollLeft(htmlTabELement.scrollLeft() - 15);\r\n            self.updatePositions($offsetLeft, $offsetRigth);\r\n        });\r\n\r\n        $offsetRigth.click(function (event) {\r\n            event.stopPropagation();\r\n            var htmlTabELement = $('.bz-tabs', self.container);\r\n            htmlTabELement.scrollLeft(htmlTabELement.scrollLeft() + 15);\r\n            self.updatePositions($offsetLeft, $offsetRigth);\r\n        });\r\n\r\n        // Add handlers if the tab isn't contained in a nested form\r\n        if (!self.isContainedInNestedForm() && !self.isContainedInCollectionNavigator()) {\r\n\r\n            // Add handler\r\n            $addButton.click(function (ev) {\r\n                ev.stopImmediatePropagation();\r\n                // Publish addtab event to the view\r\n                self.triggerGlobalHandler(\"addtab\", {guid: properties.guid});\r\n                return false;\r\n            });\r\n\r\n            // Assign tab headers to children\r\n            $.each(self.children, function (i, tabItem) {\r\n                var $tabHeader = $(\"li[data-reference= #ui-bizagi-tab-\" + tabItem.properties.guid + \"]\", $tab);\r\n                tabItem.setTabHeader($tabHeader);\r\n            });\r\n\r\n            // Make headers sortable\r\n            var header = $(\".bz-tabs\", $tab);\r\n            header.sortable({\r\n                items: \"li[data-reference]\",\r\n                revert: true,\r\n                distance: 10,\r\n                axis: \"x\",\r\n                cursorAt: {top: -3, left: 0},\r\n                placeholder: \"bz-tab-placeholder\",\r\n                delay: 150,\r\n                start: function (e, ui) {\r\n                    self.sortStart(e, ui);\r\n                },\r\n                tolerance: \"pointer\",\r\n                stop: function (e, ui) {\r\n                    self.sortFinish(e, ui);\r\n                }\r\n            });\r\n        }\r\n\r\n        $tab.data({\r\n            guid: self.properties.guid,\r\n            display: self.properties.displayName,\r\n            type: self.properties.type\r\n        });\r\n\r\n        $tab.on(\"tabsload\", function (event, ui) {\r\n            self.triggerGlobalHandler(\"controlRefreshCanvas\", {});\r\n        }).on(\"tabsactivate\", function (event, ui) {\r\n            self.triggerGlobalHandler(\"controlRefreshCanvas\", {});\r\n        });\r\n\r\n        setTimeout(function () {\r\n            self.updatePositions($offsetLeft, $offsetRigth);\r\n        }, 100);\r\n\r\n        var item = (self.children || []).find(function (item) {\r\n            if (item.properties && item.properties.messageValidation) return item;\r\n        });\r\n\r\n        if (item && (item.properties && item.properties.messageValidation)) {\r\n            self.showValidationMessage(item.properties.messageValidation);\r\n        }\r\n\r\n    },\r\n\r\n    updatePositions: function ($offsetLeft, $offsetRigth) {\r\n        var $htmlTabELement = $('.bz-tabs', this.container).get(0);\r\n\r\n        $offsetLeft.css({display: \"none\"});\r\n        $offsetRigth.css({display: \"none\"});\r\n\r\n        if ($htmlTabELement.scrollLeft > 0) {\r\n            $offsetLeft.css({display: \"flex\"});\r\n        }\r\n\r\n        if ($htmlTabELement.scrollWidth > ($htmlTabELement.clientWidth + $htmlTabELement.scrollLeft + 30)) {\r\n            $offsetRigth.css({display: \"flex\"});\r\n        }\r\n    },\r\n\r\n    /*\r\n    *   Manages the drag start event when sorting the header tabs\r\n    */\r\n    sortStart: function (event, ui) {\r\n        var self = this;\r\n\r\n        var index = $(ui.item).parent().children(\"li[data-reference]\").not(\".bz-tab-placeholder\").index(ui.item);\r\n        ui.item.data(\"start-position\", index);\r\n        self.initialPosition = index;\r\n        return true;\r\n    },\r\n\r\n    /*\r\n    *   Manages the drag end event when sorting the header tabs\r\n    */\r\n    sortFinish: function (event, ui) {\r\n        var self = this;\r\n        var index = $(ui.item).parent().children(\"li[data-reference]\").not(\".bz-tab-placeholder\").index(ui.item);\r\n\r\n        // Trigger sort finish event\r\n        self.triggerGlobalHandler(\"sortfinish\", {\r\n            source: {},\r\n            initialPosition: ui.item.data(\"start-position\") || self.initialPosition,\r\n            finalPosition: index,\r\n            sourceContainer: self.properties.guid,\r\n            targetContainer: self.properties.guid\r\n        });\r\n\r\n        return true;\r\n    },\r\n\r\n    updateErrorPositions: function ($container) {\r\n        var $currentTabItem = $container.find(\"li.active\");\r\n\r\n        $(\".bz-indicator-bar\", $container).removeClass(\"bz-indicator-bar--error\");\r\n\r\n        if ($currentTabItem && $currentTabItem.hasClass(\"bz-tab--error\")) {\r\n            $(\".bz-indicator-bar\", $container).addClass(\"bz-indicator-bar--error\");\r\n        }\r\n    }\r\n\r\n});","/*\r\n*   Name: BizAgi Form Modeler Tab Item Extension\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will redefine the tab item class to adjust to form modeler\r\n*/\r\n\r\nbizagi.rendering.smartphone.tabItem.original = $.extend(true, {}, bizagi.rendering.smartphone.tabItem.prototype);\r\n$.extend(bizagi.rendering.smartphone.tabItem.prototype, {\r\n\r\n    /*\r\n   *   Renders the current container\r\n   *   Also adds sortable behaviour\r\n   */\r\n    postRenderContainer: function ($container) {\r\n        var self = this;\r\n\r\n        // Call original postrRenderContainer\r\n        bizagi.rendering.smartphone.tabItem.original.postRenderContainer.apply(this, arguments);\r\n\r\n        if (!self.hasChildren()) {\r\n            $container.append('<div class=\"children\"></div>');\r\n        }\r\n\r\n        $container.addClass('bz-tab-item');\r\n    },\r\n\r\n    /*\r\n    *   Set the tab header reference from the parent in order to attach edition handlers\r\n    */\r\n    setTabHeader: function ($tabHeader) {\r\n        var self = this,\r\n            properties = self.properties;\r\n\r\n        // Add handlers if the tabitem isn't contained in a nested form\r\n        if (!self.isContainedInNestedForm() && !self.isContainedInCollectionNavigator()) {\r\n\r\n            // Delete handler\r\n            $(\".tab--delete\", $tabHeader).click(function () {\r\n                // Publish deletetab event to the view\r\n                self.triggerGlobalHandler(\"deletetab\", {guid: properties.guid});\r\n                return false;\r\n            });\r\n\r\n            $tabHeader.dblclick(function () {\r\n                if (!self.isEditableLabelActive()) {\r\n                    self.editDisplayName($tabHeader);\r\n                }\r\n            }).click(function (ev) {\r\n                if (!self.isEditableLabelActive()) {\r\n                    self.triggerGlobalHandler(\"showProperties\", {guid: self.properties.guid, redraw: true});\r\n                }\r\n            }).mousedown(function (ev) {\r\n                if (ev.button === 2) {\r\n                    ev.stopImmediatePropagation();\r\n                    if (!self.isEditableLabelActive()) {\r\n                        self.triggerGlobalHandler(\"elementrightclick\", {\r\n                            guid: self.properties.guid,\r\n                            position: {x: ev.clientX, y: ev.clientY}\r\n                        });\r\n                    }\r\n                }\r\n            });\r\n\r\n            // Allow sortable connections between tabs\r\n            /* tabHeader.droppable({\r\n                accept: \".ui-bizagi-draggable-item\",\r\n                hoverClass: \"ui-bizagi-tab-drop-hover\",\r\n                tolerance: \"pointer\",\r\n                drop: function (event, ui) { self.dropRender(event, ui); },\r\n                activate: function (event, ui) {\r\n                    self.currentDragSource = self.getDragSource(ui.draggable);\r\n                }\r\n\r\n            }); */\r\n\r\n        }\r\n    },\r\n\r\n    /* \r\n    *   Change selected item \r\n    */\r\n    activate: function () {\r\n        var self = this;\r\n\r\n        // Call base        \r\n        bizagi.rendering.smartphone.tabItem.original.activate.apply(this, arguments);\r\n\r\n        // Publish activatetab event to the view\r\n        self.triggerGlobalHandler(\"activatetab\", {guid: self.properties.guid});\r\n    },\r\n\r\n    /*\r\n    * Edit the current display name\r\n    */\r\n    editDisplayName: function (tabHeader) {\r\n        var self = this;\r\n        var label = $(\"a\", tabHeader);\r\n\r\n        // Publish label edition event\r\n        self.triggerGlobalHandler(\"startlabeledition\");\r\n\r\n        // Create editable label component\r\n        var presenter = self.editableLabelPresenter = new bizagi.editor.component.editableLabel.presenter({\r\n            label: label,\r\n            value: self.properties.displayName\r\n        });\r\n\r\n        // Bind change event\r\n        presenter.subscribe(\"change\", function (ev, args) {\r\n            self.triggerGlobalHandler(\"changelabel\", {guid: self.properties.guid, value: args.value});\r\n        });\r\n\r\n        presenter.subscribe(\"finish\", function(){\r\n            self.triggerGlobalHandler(\"finishlabeledition\");\r\n        });\r\n\r\n        // Bind keyup event\r\n        presenter.subscribe(\"keyup\", function (ev, args) {\r\n            // Extend tab header\r\n            tabHeader.find(\".ui-bizagi-container-input-editable\").width(bizagi.measureString(args.value) + 100);\r\n        });\r\n\r\n        // Render label\r\n        presenter.render();\r\n\r\n    },\r\n\r\n    /*\r\n    * Returns true if the editable label component is active\r\n    */\r\n    isEditableLabelActive: function () {\r\n        var self = this;\r\n\r\n        if (self.editableLabelPresenter && self.editableLabelPresenter.editableLabel) {\r\n            return true;\r\n        }\r\n        return false;\r\n    },\r\n\r\n    /*\r\n    *   Handles renders drop finish operation\r\n    */\r\n    dropRender: function (e, ui) {\r\n        var self = this;\r\n\r\n        // If the original event isn't mouseup returns\r\n        if (e.originalEvent.type !== \"mouseup\") {\r\n            return;\r\n        }\r\n\r\n        var finalPosition = self.children.length;\r\n        var targetContainer = self.properties.guid;\r\n        var initialPosition = ui.draggable ? ui.draggable.data(\"start-position\") : null;\r\n        var sourceContainer = ui.draggable ? ui.draggable.data(\"sourceContainer\") : null;\r\n        var source = self.currentDragSource;\r\n\r\n        if (bizagi.editor.utilities.isObject(source)) {\r\n\r\n            // Set a timer to avoid multiple drop bug at the same time\r\n            if (bizagi.sortContainerTimeout != null) {\r\n                return;\r\n            }\r\n            bizagi.sortContainerTimeout = setTimeout(function () {\r\n                bizagi.sortContainerTimeout = null;\r\n            }, 100);\r\n\r\n            // Trigger sort finish event\r\n            self.triggerGlobalHandler(\"sortfinish\", {\r\n                source: source,\r\n                initialPosition: initialPosition,\r\n                finalPosition: finalPosition,\r\n                sourceContainer: sourceContainer,\r\n                targetContainer: targetContainer\r\n            });\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Show validation messages\r\n     * @param messages\r\n     */\r\n    showValidationMessage: function (messages) {\r\n        // Prevent propagation\r\n    }\r\n});\r\n     ","/*\r\n*   Name: BizAgi Form Modeler Tab Extension\r\n*   Author: Alexander Mejia\r\n*   Comments:\r\n*   -   This script will redefine the search class to adjust to form modeler\r\n*/\r\n\r\n\r\nbizagi.rendering.smartphone.search.original = $.extend( true, {}, bizagi.rendering.smartphone.search.prototype );\r\n$.extend(bizagi.rendering.smartphone.search.prototype, {\r\n    /*\r\n    *   Template method to implement in each device to customize each render after processed\r\n    */\r\n    postRender: function () {\r\n        var self = this;\r\n\r\n        // Call original method        \r\n        bizagi.rendering.smartphone.search.original.postRender.apply(this, arguments);\r\n\r\n        // If the current form is readonly return;\r\n        if (self.isReadOnlyForm()) {\r\n            return;\r\n        }\r\n\r\n        if (self.advancedSearch && !self.isContainedInNestedForm()) {\r\n            self.advancedSearch.click(function (ev) {\r\n                ev.stopPropagation();\r\n                // Publish showSearchForm event to the view\r\n                self.triggerGlobalHandler(\"showsearchform\", {\r\n                    guid: self.properties.guid\r\n                });\r\n            });\r\n        }\r\n    }\r\n});","/*\r\n*   Name: BizAgi Form Modeler Image Extension\r\n*   Author: Christian Collazos\r\n*   Comments:\r\n*   -   This script will redefine the image class to adjust to form modeler\r\n*/\r\n\r\nbizagi.rendering.smartphone.image.original = $.extend( true, {}, bizagi.rendering.smartphone.image.prototype );\r\n$.extend(bizagi.rendering.smartphone.image.prototype, {\r\n/*\r\n    * Extend original method\r\n    */\r\n    postRender: function () {\r\n        var self = this;\r\n        var control = self.getControl();\r\n        var width = self.properties.width;\r\n        var containerType = self.parent.properties.type;\r\n\r\n        // Call original method        \r\n        bizagi.rendering.smartphone.image.original.postRender.apply(this, arguments);\r\n\r\n        setTimeout(function () {\r\n            if (width === -1) {\r\n\r\n                var thumbnail = $(\".resizable_img\", control);\r\n                var widthWrapper = control.width();\r\n                var height = control.height();\r\n                var containerHeight = 0;\r\n                var totalImagesInSameContainer = 0;\r\n\r\n                if (containerType == \"grid\") {\r\n                    containerHeight = $(\".resizable_img\", control).closest(\"td\").height();\r\n                }\r\n                else {\r\n                    if (self.parent.properties.id == self.getFormContainer().properties.id) {\r\n                        containerHeight = 50;\r\n                    } else {\r\n                        var containerChildsSize = self.parent.getChildreCount();\r\n                        var containerChildsHeightSum = self.parent.getChildrenSumHeight(\"image\");\r\n                        containerHeight = $(\".resizable_img\", control).closest(\".ui-bizagi-container\").height() - 17;\r\n                        containerHeight = containerHeight < 50 ? 50 : containerHeight;\r\n                        totalImagesInSameContainer = self.parent.countByRenderTypeWithParams(\"image\", -1);\r\n\r\n                        if (containerChildsSize > 1) {\r\n                            containerHeight = containerHeight - (containerChildsHeightSum);\r\n                        }\r\n                    }\r\n                }\r\n\r\n                thumbnail.width(widthWrapper);\r\n\r\n                if (totalImagesInSameContainer > 1) {\r\n                    if (null != containerHeight && containerHeight > 0) {\r\n                        $(\".resizable_img\",self.parent.container).height(containerHeight / totalImagesInSameContainer + \"px\");\r\n                    } else {\r\n                        $(\".resizable_img\",control).height(height + \"px\");\r\n                    }\r\n                } else {\r\n                    if (null != containerHeight && containerHeight > 0) {\r\n                        thumbnail.height(containerHeight + \"px\");\r\n                    } else {\r\n                        thumbnail.height(height + \"px\");\r\n                    }\r\n                }\r\n            }\r\n\r\n            self.triggerGlobalHandler(\"controlRefreshCanvas\");\r\n\r\n        }, 160);\r\n\r\n    },\r\n\r\n    /*\r\n    * Get image width and height and send them to modeler \r\n    */\r\n    changeImageSize: function (imageWidth, imageHeight) {\r\n        var self = this;\r\n        var control = self.getControl();\r\n\r\n        self.executeTriggerHandler(control, imageWidth, imageHeight, \"string\");\r\n\r\n    },\r\n\r\n    /*\r\n    * Update control definition\r\n    */\r\n    executeTriggerHandler: function (control, imageWidth, imageHeight, type) {\r\n        var self = this;\r\n        var widthValue = \"\";\r\n        var heightValue = \"\";\r\n\r\n        if (type == \"string\") {\r\n            widthValue = imageWidth.slice(0, -2);\r\n            heightValue = imageHeight.slice(0, -2);\r\n        } else {\r\n            widthValue = imageWidth;\r\n            heightValue = imageHeight;\r\n        }\r\n        self.triggerGlobalHandler(\"resizeImage\", {\r\n            guid: self.properties.guid,\r\n            properties: [{\r\n                property: \"thumbnail.width\",\r\n                value: widthValue\r\n            },\r\n            {\r\n                property: \"thumbnail.height\",\r\n                value: heightValue\r\n            }]\r\n        });\r\n    }\r\n});","/*\r\n*   Name: BizAgi Form Modeler Collection Navigator Extension\r\n*   Author: Alexander Mejia\r\n*   Date: 02-12-213\r\n*   Comments:\r\n*   -   This script will redefine the collection navigator class to adjust to form modeler\r\n*/\r\n \r\n\r\nbizagi.rendering.smartphone.collectionnavigator.original = $.extend(true, {}, bizagi.rendering.smartphone.collectionnavigator.prototype);\r\n$.extend(bizagi.rendering.smartphone.collectionnavigator.prototype,  {\r\n\r\n    postRender: function () {\r\n        var self = this;\r\n     \r\n        // Call original method\r\n        bizagi.rendering.smartphone.collectionnavigator.original.postRender.apply(this, arguments);\r\n\r\n        $.when(self.isRendered())\r\n            .done(function () {\r\n                var properties = self.properties;\r\n                var control = self.getControl();\r\n                var canvas = control.find(\".bz-collectionnavigator-navigationform\");\r\n\r\n                if (properties.navigationform) {\r\n                    setTimeout(function () {\r\n                        self.triggerGlobalHandler(\"refreshControl\", {\r\n                            guid: properties.guid,\r\n                            canvas: canvas\r\n                        });\r\n                    }, 0);\r\n                }\r\n            });\r\n    }\r\n});\r\n","\r\n\r\nbizagi.rendering.smartphone.nestedForm.original = $.extend(true, {}, bizagi.rendering.smartphone.nestedForm.prototype);\r\n$.extend(bizagi.rendering.smartphone.nestedForm.prototype,  {\r\n    /*\r\n    *   Template method to implement in each device to customize the render's behaviour when rendering in design mode\r\n    */\r\n   configureDesignView: function () {\r\n        var self = this;\r\n        var properties = self.properties;\r\n        var $container = self.container;\r\n\r\n        $container.removeClass(\"ui-bizagi-container-panel\");\r\n        $container.addClass(\"ui-bizagi-container-nestedform\");\r\n        \r\n        var title = $(\"<span class= 'ui-bizagi-container-nestedform-title'/>\");\r\n        title.text(\"Nested Form: \" + properties.formDisplayName);\r\n        $container.prepend(title);        \r\n    }    \r\n});\r\n","/*\r\n*   Name: BizAgi Form Modeler Group Extension\r\n*   Author: Ivan Avila\r\n*   Comments:\r\n*   -   This script will redefine the group class to adjust to form modeler\r\n*/\r\n\r\nbizagi.rendering.smartphone.date.original = $.extend( true, {}, bizagi.rendering.smartphone.date.prototype );\r\n$.extend(bizagi.rendering.smartphone.date.prototype, {\r\n        /* \r\n    *   Template method to implement in each device to customize each container after processed\r\n    */\r\n   setDisplayValue: function (value) {\r\n        var self = this;\r\n        \r\n        // Call original method\r\n        bizagi.rendering.smartphone.date.original.setDisplayValue.apply(this, arguments);\r\n    \r\n        //Apply format\r\n        var properties = self.properties;\r\n        var dateControl = self.getDateControl().parent();\r\n        var inputPlaceholder = $(\".ui-bizagi-render-date\", dateControl);\r\n\r\n        if (properties.valueFormat.color && properties.valueFormat.color.length > 0) {\r\n            var nameNewClass = \"bz-\" + properties.valueFormat.color.replace('#', '') + \"-placeholder\";\r\n            var fullNewClass = \".\" + nameNewClass + \"::-webkit-input-placeholder{color:\" + properties.valueFormat.color + \"}\";\r\n            bizagi.util.loadStyle(fullNewClass, nameNewClass);\r\n            inputPlaceholder.addClass(nameNewClass);\r\n        }\r\n\r\n        if (properties.valueFormat.strikethru && properties.valueFormat.underline) {\r\n            inputPlaceholder.addClass(\"biz-modify-placeholder-through-underline\");\r\n        } else {\r\n            inputPlaceholder.removeClass(\"biz-modify-placeholder-through-underline\");\r\n\r\n            if (properties.valueFormat.strikethru) {\r\n                inputPlaceholder.addClass(\"biz-modify-placeholder-through\");\r\n            } else {\r\n                inputPlaceholder.removeClass(\"biz-modify-placeholder-through\");\r\n            }\r\n\r\n            if (properties.valueFormat.underline) {\r\n                inputPlaceholder.addClass(\"biz-modify-placeholder-underline\");\r\n            } else {\r\n                inputPlaceholder.removeClass(\"biz-modify-placeholder-underline\");\r\n            }\r\n        }\r\n    }\r\n});","/*\r\n*   Default implementation for user fields\r\n*/\r\nbizagi.rendering.smartphone.basicUserField.extend(\"bizagi.rendering.smartphone.designUserField\", {}, {\r\n\r\n    /*\r\n    *   Template method to implement in each device to customize each render after processed\r\n    */\r\n    getEditableControl: function () {\r\n        var self = this;\r\n        var $control = self.getControl();\r\n        var properties = self.properties;\r\n        var controlName = properties.control + ' Custom control';\r\n        var tmpl = '<div class=\"bz-input-icon bz-widget--fake\"><input class=\"bz-input-icon__input bz-space--inline-s\" placeholder=\"' + controlName + '\"/><svg class=\"bz-icn bz-space--inline-s\" width=\"32px\" height=\"32px\"><use xlink:href=\"#gear\" /></svg></div>';\r\n\r\n        $control.addClass(\"bz-widget__control--fake\");\r\n        \r\n        self.input = $(tmpl).appendTo($control);\r\n    },\r\n\r\n    /*\r\n\t*  Dont send the data to the server\r\n\t*/\r\n    collectData: function (renderValues) {\r\n    },\r\n\r\n    getDisplayValue: function () {\r\n        var self = this;\r\n        var properties = self.properties;\r\n        var controlName = properties.control;\r\n        return \"Userfield in design mode: \" + controlName ;\r\n    },\r\n\r\n    getReadonlyControl: function () {\r\n        var self = this;\r\n        var $control = self.getControl();\r\n        var properties = self.properties;\r\n        var controlName = properties.control + ' Custom control';\r\n        var tmpl = '<div class=\"bz-input-icon bz-widget--fake\"><input class=\"bz-input-icon__input bz-space--inline-s\" placeholder=\"' + controlName + '/><svg class=\"bz-icn bz-space--inline-s\" width=\"32px\" height=\"32px\"><use xlink:href=\"#gear\" /></svg></div>';\r\n\r\n        $control.addClass(\"bz-widget__control--fake\");\r\n        \r\n        var myControl = $(tmpl).appendTo($control);\r\n        return myControl;\r\n    }\r\n});"]}