{"version":3,"sources":["jquery/common/bizagi.ripple/js/jquery.ripple.js","jquery/common/bizagi.grid/js/bizagi.grid.js","jquery/common/bizagi.tabs/js/jquery.material.tab.js","jquery/common/bizagi.grid/js/tablet/bizagi.grid.tablet.js","jquery/common/bizagi.overflowMenu/js/mobile/bizagi.menuOverflow.js","jquery/common/jquery.ui/js/tablet/jquery.ui.js","jquery/rendering/js/plugins/common/jquery.mask.js","jquery/rendering/js/plugins/common/jquery.numeric.js","jquery/rendering/js/plugins/common/jquery.formatCurrency.js","jquery/rendering/js/plugins/tablet/jquery.slidecontent.js","jquery/rendering/js/plugins/common/jquery.mobiscroll.js","jquery/common/base/js/lib/mobile/jquery.tabs.js","jquery/rendering/js/services/bizagi.render.services.endPoints.js","jquery/rendering/js/services/bizagi.render.services.context.js","jquery/rendering/js/services/bizagi.render.services.service.js","jquery/rendering/js/services/bizagi.render.services.multiactionservice.js","jquery/rendering/js/services/bizagi.render.services.metadataMultiactionservice.js","jquery/offline/js/services/bizagi.render.services.service.offline.js","jquery/offline.old/js/services/bizagi.render.services.service.offline.js","jquery/rendering/js/base/command/bizagi.command.controllers.controller.js","jquery/rendering/js/base/command/bizagi.command.controllers.validation.js","jquery/rendering/js/base/command/bizagi.command.controllers.action.js","jquery/rendering/js/base/bizagi.rendering.element.js","jquery/rendering/js/base/container/bizagi.rendering.container.js","jquery/rendering/js/tablet/container/bizagi.rendering.tablet.container.js","jquery/rendering/js/base/render/bizagi.rendering.render.js","jquery/rendering/js/base/render/bizagi.rendering.render.base.js","jquery/rendering/js/tablet/render/bizagi.rendering.tablet.render.js","jquery/rendering/js/base/container/bizagi.rendering.form.js","jquery/rendering/js/base/container/bizagi.rendering.formTemplate.js","jquery/rendering/js/base/container/bizagi.rendering.layout.js","jquery/rendering/js/base/container/bizagi.rendering.mobileform.js","jquery/rendering/js/base/container/bizagi.rendering.accordion.js","jquery/rendering/js/base/container/bizagi.rendering.accordionItem.js","jquery/rendering/js/base/render/bizagi.rendering.collectionnavigator.js","jquery/rendering/js/base/container/bizagi.rendering.group.js","jquery/rendering/js/base/container/bizagi.rendering.mobilegroup.js","jquery/rendering/js/base/container/bizagi.rendering.horizontal.js","jquery/rendering/js/base/container/bizagi.rendering.panel.js","jquery/rendering/js/base/container/bizagi.rendering.contentPanel.js","jquery/rendering/js/base/container/bizagi.rendering.searchForm.js","jquery/rendering/js/base/container/bizagi.rendering.tab.js","jquery/rendering/js/base/container/bizagi.rendering.tabItem.js","jquery/rendering/js/base/container/bizagi.rendering.nestedForm.js","jquery/rendering/js/base/render/layout/bizagi.rendering.layout.render.js","jquery/rendering/js/base/render/layout/bizagi.rendering.layout.image.js","jquery/rendering/js/base/render/layout/bizagi.rendering.layout.link.js","jquery/rendering/js/base/render/layout/bizagi.rendering.layout.label.js","jquery/rendering/js/base/render/layout/bizagi.rendering.layout.text.js","jquery/rendering/js/base/render/layout/bizagi.rendering.layout.upload.js","jquery/rendering/js/base/render/layout/bizagi.rendering.layout.boolean.js","jquery/rendering/js/base/render/layout/bizagi.rendering.layout.dateTime.js","jquery/rendering/js/base/render/layout/bizagi.rendering.layout.number.js","jquery/rendering/js/base/render/layout/bizagi.rendering.layout.money.js","jquery/rendering/js/base/render/layout/bizagi.rendering.layout.placeholder.js","jquery/rendering/js/base/render/bizagi.rendering.combo.js","jquery/rendering/js/base/render/bizagi.rendering.check.js","jquery/rendering/js/base/render/bizagi.rendering.number.js","jquery/rendering/js/base/render/bizagi.rendering.numberScientificNotation.js","jquery/rendering/js/base/render/bizagi.rendering.date.js","jquery/rendering/js/base/render/bizagi.rendering.extendedText.js","jquery/rendering/js/base/render/bizagi.rendering.grid.js","jquery/rendering/js/base/render/bizagi.rendering.hidden.js","jquery/rendering/js/base/render/bizagi.rendering.label.js","jquery/rendering/js/base/render/bizagi.rendering.search.js","jquery/rendering/js/base/render/bizagi.rendering.text.js","jquery/rendering/js/base/render/bizagi.rendering.checkList.js","jquery/rendering/js/base/render/bizagi.rendering.range.js","jquery/rendering/js/base/render/bizagi.rendering.rangeDate.js","jquery/rendering/js/base/render/bizagi.rendering.rangeMoney.js","jquery/rendering/js/base/render/bizagi.rendering.rangeNumber.js","jquery/rendering/js/base/render/bizagi.rendering.actionLauncher.js","jquery/rendering/js/base/render/bizagi.rendering.entityTemplate.js","jquery/rendering/js/base/render/bizagi.rendering.polymorphicLauncher.js","jquery/rendering/js/base/render/bizagi.rendering.button.js","jquery/rendering/js/base/render/bizagi.rendering.fileprint.js","jquery/rendering/js/base/render/bizagi.rendering.link.js","jquery/rendering/js/base/render/bizagi.rendering.geolocation.js","jquery/rendering/js/base/render/bizagi.rendering.association.js","jquery/rendering/js/base/render/bizagi.rendering.upload.js","jquery/rendering/js/base/render/bizagi.rendering.ecm.js","jquery/rendering/js/base/render/bizagi.rendering.yesno.js","jquery/rendering/js/base/render/bizagi.rendering.letter.js","jquery/rendering/js/base/render/bizagi.rendering.formLink.js","jquery/rendering/js/base/render/bizagi.rendering.cascadingCombo.js","jquery/rendering/js/base/render/bizagi.rendering.list.js","jquery/rendering/js/base/render/bizagi.rendering.multiSelect.js","jquery/rendering/js/base/render/bizagi.rendering.searchList.js","jquery/rendering/js/base/render/bizagi.rendering.money.js","jquery/rendering/js/base/render/bizagi.rendering.radio.js","jquery/rendering/js/base/render/bizagi.rendering.image.js","jquery/rendering/js/base/render/bizagi.rendering.userfield.js","jquery/rendering/js/base/render/bizagi.rendering.document.js","jquery/rendering/js/base/render/column/bizagi.rendering.columns.column.js","jquery/rendering/js/base/render/column/bizagi.rendering.columns.readonly.js","jquery/rendering/js/base/render/column/bizagi.rendering.columns.combo.js","jquery/rendering/js/base/render/column/bizagi.rendering.columns.date.js","jquery/rendering/js/base/render/column/bizagi.rendering.columns.search.js","jquery/rendering/js/tablet/container/slide/bizagi.rendering.tablet.slide.view.js","jquery/rendering/js/tablet/container/slide/bizagi.rendering.tablet.slide.form.js","jquery/rendering/js/tablet/container/slide/bizagi.rendering.tablet.slide.grid.js","jquery/rendering/js/tablet/container/slide/bizagi.rendering.tablet.slide.adhocForm.js","jquery/rendering/js/tablet/container/slide/bizagi.rendering.tablet.slide.searchForm.js","jquery/rendering/js/tablet/container/slide/bizagi.rendering.tablet.slide.upload.js","jquery/rendering/js/tablet/container/slide/bizagi.rendering.tablet.slide.startForm.js","jquery/rendering/js/tablet/container/slide/bizagi.rendering.tablet.slide.ecm.js","jquery/rendering/js/tablet/container/bizagi.rendering.tablet.form.js","jquery/rendering/js/tablet/container/bizagi.rendering.tablet.panel.js","jquery/rendering/js/tablet/container/bizagi.rendering.tablet.contentPanel.js","jquery/rendering/js/tablet/container/bizagi.rendering.tablet.nestedForm.js","jquery/rendering/js/tablet/container/bizagi.rendering.tablet.tab.js","jquery/rendering/js/tablet/container/bizagi.rendering.tablet.tabItem.js","jquery/rendering/js/tablet/container/bizagi.rendering.tablet.horizontal.js","jquery/rendering/js/tablet/container/bizagi.rendering.tablet.layout.js","jquery/rendering/js/tablet/container/bizagi.rendering.tablet.accordion.js","jquery/rendering/js/tablet/container/bizagi.rendering.tablet.accordionItem.js","jquery/rendering/js/tablet/container/bizagi.rendering.tablet.group.js","jquery/rendering/js/tablet/container/bizagi.rendering.tablet.searchForm.js","jquery/rendering/js/tablet/render/bizagi.rendering.tablet.text.js","jquery/rendering/js/tablet/render/bizagi.rendering.tablet.extendedText.js","jquery/rendering/js/tablet/render/bizagi.rendering.tablet.label.js","jquery/rendering/js/tablet/render/bizagi.rendering.tablet.number.js","jquery/rendering/js/tablet/render/bizagi.rendering.tablet.money.js","jquery/rendering/js/tablet/render/bizagi.rendering.tablet.numberScientificNotation.js","jquery/rendering/js/tablet/render/bizagi.rendering.tablet.date.js","jquery/rendering/js/tablet/render/bizagi.rendering.tablet.yesno.js","jquery/rendering/js/tablet/render/bizagi.rendering.tablet.check.js","jquery/rendering/js/tablet/render/bizagi.rendering.tablet.combo.js","jquery/rendering/js/tablet/render/bizagi.rendering.tablet.upload.js","jquery/rendering/js/tablet/render/bizagi.rendering.tablet.upload.offline.js","jquery/rendering/js/tablet/render/bizagi.rendering.tablet.upload.offline.old.js","jquery/rendering/js/tablet/render/bizagi.rendering.tablet.grid.js","jquery/rendering/js/tablet/render/bizagi.rendering.tablet.grid.offline.js","jquery/rendering/js/tablet/render/bizagi.rendering.tablet.grid.offline.old.js","jquery/rendering/js/tablet/render/bizagi.rendering.tablet.grid.grouped.js","jquery/rendering/js/tablet/render/bizagi.rendering.tablet.collectionnavigator.js","jquery/rendering/js/tablet/render/bizagi.rendering.tablet.search.js","jquery/rendering/js/tablet/render/bizagi.rendering.tablet.letter.js","jquery/rendering/js/tablet/render/bizagi.rendering.tablet.button.js","jquery/rendering/js/tablet/render/bizagi.rendering.tablet.fileprint.js","jquery/rendering/js/tablet/render/bizagi.rendering.tablet.link.js","jquery/rendering/js/tablet/render/bizagi.rendering.tablet.formLink.js","jquery/rendering/js/tablet/render/bizagi.rendering.tablet.hidden.js","jquery/rendering/js/tablet/render/bizagi.rendering.tablet.radio.js","jquery/rendering/js/tablet/render/bizagi.rendering.tablet.cascadingCombo.js","jquery/rendering/js/tablet/render/bizagi.rendering.tablet.list.js","jquery/rendering/js/tablet/render/bizagi.rendering.tablet.multiSelect.js","jquery/rendering/js/tablet/render/bizagi.rendering.tablet.association.js","jquery/rendering/js/tablet/render/bizagi.rendering.tablet.ecm.js","jquery/rendering/js/tablet/render/bizagi.rendering.tablet.searchList.js","jquery/rendering/js/tablet/render/bizagi.rendering.tablet.userfield.js","jquery/rendering/js/tablet/render/bizagi.rendering.tablet.image.js","jquery/rendering/js/tablet/render/bizagi.rendering.tablet.image.old.js","jquery/rendering/js/tablet/render/bizagi.rendering.tablet.document.js","jquery/rendering/js/tablet/render/bizagi.rendering.tablet.geolocation.js","jquery/rendering/js/tablet/render/bizagi.rendering.tablet.actionLauncher.js","jquery/rendering/js/tablet/render/bizagi.rendering.tablet.entityTemplate.js","jquery/rendering/js/tablet/render/bizagi.rendering.tablet.polymorphicLauncher.js","jquery/rendering/js/tablet/render/bizagi.rendering.tablet.checkList.js","jquery/rendering/js/tablet/render/bizagi.rendering.tablet.activityCheckList.js","jquery/rendering/js/tablet/render/bizagi.rendering.tablet.range.js","jquery/rendering/js/tablet/render/bizagi.rendering.tablet.rangeDate.js","jquery/rendering/js/tablet/render/bizagi.rendering.tablet.rangeMoney.js","jquery/rendering/js/tablet/render/bizagi.rendering.tablet.rangeNumber.js","jquery/rendering/js/tablet/render/layout/bizagi.rendering.tablet.layout.render.js","jquery/rendering/js/tablet/render/layout/bizagi.rendering.tablet.layout.image.js","jquery/rendering/js/tablet/render/layout/bizagi.rendering.tablet.layout.placeholder.js","jquery/rendering/js/tablet/render/layout/bizagi.rendering.tablet.layout.boolean.js","jquery/rendering/js/tablet/render/layout/bizagi.rendering.tablet.layout.link.js","jquery/rendering/js/tablet/render/layout/bizagi.rendering.tablet.layout.label.js","jquery/rendering/js/tablet/render/layout/bizagi.rendering.tablet.layout.text.js","jquery/rendering/js/tablet/render/layout/bizagi.rendering.tablet.layout.dateTime.js","jquery/rendering/js/tablet/render/layout/bizagi.rendering.tablet.layout.number.js","jquery/rendering/js/tablet/render/layout/bizagi.rendering.tablet.layout.money.js","jquery/rendering/js/tablet/render/layout/bizagi.rendering.tablet.layout.upload.js","jquery/rendering/js/tablet/render/column/bizagi.rendering.tablet.columns.column.js","jquery/rendering/js/tablet/render/column/bizagi.rendering.tablet.columns.combo.js","jquery/rendering/js/tablet/render/column/bizagi.rendering.tablet.columns.document.js","jquery/rendering/js/tablet/render/column/bizagi.rendering.tablet.columns.date.js","jquery/rendering/js/tablet/render/column/bizagi.rendering.tablet.columns.text.js","jquery/rendering/js/tablet/render/column/bizagi.rendering.tablet.columns.number.js","jquery/rendering/js/tablet/render/column/bizagi.rendering.tablet.columns.numberScientificNotation.js","jquery/rendering/js/tablet/render/column/bizagi.rendering.tablet.columns.image.js","jquery/rendering/js/tablet/render/column/bizagi.rendering.tablet.columns.upload.js","jquery/rendering/js/tablet/render/column/bizagi.rendering.tablet.columns.link.js","jquery/rendering/js/tablet/render/column/bizagi.rendering.tablet.columns.uploadecm.js","jquery/rendering/js/tablet/render/column/bizagi.rendering.tablet.columns.button.js","jquery/rendering/js/tablet/render/column/bizagi.rendering.tablet.columns.radio.js","jquery/rendering/js/tablet/render/column/bizagi.rendering.tablet.columns.readonly.js","jquery/rendering/js/tablet/render/column/bizagi.rendering.tablet.columns.search.js","jquery/rendering/js/tablet/render/column/bizagi.rendering.tablet.columns.list.js","jquery/rendering/js/tablet/render/column/bizagi.rendering.tablet.columns.exclusiveCheck.js","jquery/rendering/js/base/bizagi.rendering.base.factory.js","jquery/rendering/js/tablet/bizagi.rendering.tablet.factory.js","jquery/rendering/js/bizagi.rendering.device.factory.js","jquery/rendering/js/tablet/container/bizagi.rendering.tablet.queryForm.js","jquery/rendering/js/tablet/container/bizagi.rendering.tablet.formTemplate.js","jquery/rendering/js/tablet/container/bizagi.rendering.tablet.usersForm.js","jquery/rendering/js/bizagi.rendering.facade.js"],"names":["$","transparent","$temp","appendTo","css","remove","fn","rippleEffect","options","opts","extend","defaults","this","each","on","e","eventPageX","eventPageY","inkX","inkY","maxDiameter","rippleColor","$inkSpan","$inkparent","$thisElement","eventType","type","getRippleColorFromTraverse","inkColor","$element","fallBackColor","backgroundOrInhreitedBackGround","hex","luma","returnLumintion","fallback","getBgColor","$elementToCheckForBg","is","parent","colorToHex","getLuminationValue","getColorLuminance","getInkColor","inkDefaultColor","appendInkTo","closest","find","inkClass","length","append","inkContainerClass","removeClass","height","width","Math","max","outerWidth","outerHeight","data","idToUse","background-color","pageX","pageY","touch","originalEvent","touches","changedTouches","offset","left","top","addClass","setTimeout","hexcolor","substring","rgb","parseInt","lum","String","replace","c","i","resultHex","substr","round","min","toString","color","match","slice","jQuery","widget","id","columns","sortBy","sortType","showSummary","collapse","collapseState","indexedData","maxColumns","buttonsPst","title","tableCssClass","headerStyles","floatingHeader","hasExclusiveCheck","template","grid","waiting","table","emptyTable","column","specialColumn","row","rowButtons","cell","specialCell","pager","buttons","dynamicPager","summary","summaryCell","actions","add","edit","details","allowMore","enableXlsExport","enablePdfExport","mode","_init","self","element","page","changes","totalRows","totalPages","selectedRow","components","asyncCells","scrollableArea","columnByIndex","columnByName","columnKeyIndex","key","label","name","tooltip","index","split","attr","calculateKeyIndex","startLoading","bUseTimeout","waitingFn","waitingTimeout","fasttmpl","endLoading","clearTimeout","empty","setData","refresh","getData","rows","j","getChanges","_cleanComponents","_cleanButtons","draw","refreshSummary","columnIndex","_getComponent","drawing","refreshSummaryCell","drawSummary","postRenderSummary","getCell","cells","children","html","drawSummaryCell","replaceWith","onCellReady","changeCellValue","value","deleteCellExclusiveValues","orientation","gridRtl","isDesign","drawTable","postRender","attachPaginator","attachHandlers","$tableContainer","$table","stickyTableHeaders","fixedOffset","zIndex","cacheHeaderHeight","bind","trigger","hide","_getButton","show","_replaceElement","drawHeader","drawBody","drawPager","drawButtons","drawGridExportOptions","drawRowButtons","drawDynamicPager","isExactMatch","exactMatch","drawColumn","_canShowButtons","drawSpecialColumn","columnProperties","bizAgiProperties","cssClass","cssclass","header","columntitlealign","isKey","sortActive","sortOrder","columnCssClass","headerLabelStyles","drawRow","rowData","isNewRow","newRow","rnd","floor","random","businessKey","drawCell","_canShowRowButtons","drawSpecialCell","cellAlign","columnAlign","hidden","summarizeBy","result","onDrawCell","calculateSummary","undefined","done","state","resolveResult","messageValidation","promise","drawGroupHeader","drawFooter","pages","total","push","number","active","records","tooltips","parameters","buttonsRtl","exportOptions","rtl","postRenderRow","_triggerHandler","asyncResult","when","selectDynamicPager","onDynamicPager","changePage","currentPage","Number","newPage","onPageRequested","isValid","indexOf","sortAttribute","sortColumn","onSortRequested","selectRow","onRowUnselected","selectedBusinessKey","onRowSelected","unselectRow","operation","defaultvalue","columnValues","map","columnValue","Array","processAction","action","params","onEditRow","onDeleteRow","onShowMore","onShowDetails","onAddRow","onShowExportGridOptions","_buildRefreshParameters","onCollapseGrid","onDrawControl","onDrawGroupHeader","replaceFirstWithoutPatterns","sortColumnIndex","callback","call","component","foundComponent","button","updateIndicatorState","tabs","active_tab","direction","tabs_meta","getTabsMetaInfo","tabs_info","tabsMetaInfo","tab_info","tabMetaInfo","tmp_left","scrollLeftNormalized","clientWidth","scrollWidth","scrollLeft","tabs_meta_info","r","getBoundingClientRect","a","n","window","document","body","createElement","appendChild","createTextNode","dir","style","fontSize","position","overflow","removeChild","getScrollType","NaN","getNormalizedScrollLeft","right","tab_meta_info","material_bizagi_tabs","base","$el","$active","$active_content","init","el","$ind","$tabs","$content_tabs","updatePositions","$indicator","info","get","scroll_info","scrollSelectedIntoView","active_index_tab","stopPropagation","prepend","reference","preventDefault","getActiveTab","tab","contantTab","moveToNextTab","click","refreshPositions","console","error","ui","bizagi_grid","_super","isOfflineForm","bizagi","util","parseBoolean","pageNumber","totalizer","evt","$context","target","parents","hasClass","onRemoveNewRow","_addColumnActions","totalData","prototype","apply","arguments","_showRowButtons","_hideRowButtons","xpath","pagination","renderPages","subType","getNewRowKeys","onSaveAddedRows","onCancelEdition","isNewRecord","addInlineRow","createAddRowData","ceil","inlineAdd","savedRows","detach","keys","newRowKeys","items","localization","getResource","overflowMenu","cancelNewRow","newRows","RegExp","nextId","_elements","menu","setAttribute","className","forEach","item","li","textContent","addEventListener","itemId","getAttribute","getZIndex","currentTarget","delegateTarget","x","clientX","y","clientY","client","W","offsetWidth","xx","H","offsetHeight","yy","focus","documentElement","clientHeight","$parent","parseFloat","test","orig","removeData","uuid","runiqueId","focusable","isTabIndexNotNaN","mapName","img","nodeName","toLowerCase","parentNode","href","visible","disabled","expr","filters","addBack","filter","version","keyCode","BACKSPACE","COMMA","DELETE","DOWN","END","ENTER","ESCAPE","HOME","LEFT","NUMPAD_ADD","NUMPAD_DECIMAL","NUMPAD_DIVIDE","NUMPAD_ENTER","NUMPAD_MULTIPLY","NUMPAD_SUBTRACT","PAGE_DOWN","PAGE_UP","PERIOD","RIGHT","SPACE","TAB","UP","delay","elem","scrollParent","ie","eq","isNaN","uniqueId","removeUniqueId","removeAttr","createPseudo","dataName","tabbable","tabIndex","isTabIndexNaN","jquery","side","innerWidth","innerHeight","reduce","size","border","margin","selector","prevObject","camelCase","exec","navigator","userAgent","support","selectstart","disableSelection","event","enableSelection","unbind","plugin","module","option","set","proto","plugins","instance","args","nodeType","hasScroll","has","scroll","_cleanData","cleanData","elems","triggerHandler","fullName","existingConstructor","constructor","basePrototype","proxiedPrototype","namespace","Widget","_createWidget","_proto","_childConstructors","prop","_superApply","isFunction","returnValue","__super","__superApply","widgetEventPrefix","widgetName","widgetFullName","child","childPrototype","bridge","input","inputIndex","inputLength","hasOwnProperty","isPlainObject","object","isMethodCall","concat","methodValue","charAt","pushStack","defaultElement","create","eventNamespace","_getCreateOptions","bindings","hoverable","_on","destroy","ownerDocument","defaultView","parentWindow","_create","_trigger","_getCreateEventData","noop","_destroy","parts","curOption","shift","pop","_setOptions","_setOption","toggleClass","enable","disable","suppressDisabledCheck","handlers","delegateElement","handler","handlerProxy","guid","eventName","delegate","_off","join","undelegate","_delay","_hoverable","mouseenter","mouseleave","_focusable","focusin","focusout","Event","isDefaultPrevented","method","defaultEffect","effect","hasOptions","effectName","duration","isEmptyObject","complete","effects","easing","queue","next","mouseHandled","mouseup","cancel","distance","_mouseInit","that","_mouseDown","stopImmediatePropagation","started","_mouseDestroy","_mouseMoveDelegate","_mouseUpDelegate","_mouseStarted","_mouseUp","_mouseDownEvent","btnIsLeft","which","elIsCancel","_mouseCapture","mouseDelayMet","_mouseDelayTimer","_mouseDistanceMet","_mouseDelayMet","_mouseStart","_mouseMove","documentMode","_mouseDrag","_mouseStop","abs","mouse","addClasses","axis","connectToSortable","containment","cursor","cursorAt","handle","helper","iframeFix","opacity","revert","revertDuration","scope","scrollSensitivity","scrollSpeed","snap","snapMode","snapTolerance","stack","drag","start","stop","o","_getHandle","_createHelper","_cacheHelperProportions","ddmanager","current","_cacheMargins","cssPosition","positionAbs","margins","_getParentOffset","relative","_getRelativeOffset","originalPosition","_generatePosition","originalPageX","originalPageY","_adjustOffsetFromHelper","_setContainment","_clear","dropBehaviour","prepareOffsets","dragStart","noPropagation","_convertPositionTo","_uiHash","elementInDom","dropped","drop","animate","dragStop","clone","obj","isArray","helperProportions","bottom","offsetParent","po","contains","scrollTop","tagName","p","over","ce","scrollHeight","relative_container","d","pos","mod","scrollIsRootNode","co","cancelHelperRemoval","inst","uiSortable","sortables","sortable","shouldRevert","isOver","_helper","currentItem","innermostIntersecting","thisSortable","_intersectsWith","containerCache","fromOutside","placeholder","t","_cursor","_opacity","overflowOffset","scrolled","snapElements","$t","$o","ts","bs","ls","rs","l","b","first","x1","x2","y1","y2","snapping","snapItem","release","group","makeArray","sort","_zIndex","isOverAxis","accept","activeClass","greedy","hoverClass","tolerance","activate","deactivate","out","isover","isout","proportions","droppables","splice","_activate","draggable","_deactivate","_over","_out","_drop","custom","childrenIntersection","not","intersect","droppable","toleranceMode","draggableLeft","absolute","clickOffset","default","m","list","droppablesLoop","parentsUntil","greedyChild","parentInstance","intersects","num","v","isNumber","alsoResize","animateDuration","animateEasing","aspectRatio","autoHide","ghost","handles","maxHeight","maxWidth","minHeight","minWidth","resize","_aspectRatio","originalElement","_proportionallyResizeElements","wrap","elementIsWrapper","marginLeft","marginTop","marginRight","marginBottom","originalResizeStyle","zoom","display","_proportionallyResize","s","w","se","sw","ne","nw","trim","_renderAxis","padPos","padWrapper","_handles","mouseover","resizing","wrapper","exp","insertAfter","capture","curleft","curtop","iniPos","_renderProxy","originalSize","sizeDiff","originalMousePosition","_propagate","props","smp","prevTop","prevLeft","prevWidth","prevHeight","dx","dy","_change","_updateVirtualBoundaries","shiftKey","_updateRatio","_respectSize","_updateCache","pr","ista","soffseth","soffsetw","forceAspectRatio","pMinWidth","pMaxWidth","pMinHeight","pMaxHeight","Infinity","_vBoundaries","cpos","csize","ismaxw","ismaxh","isminw","isminh","dw","dh","cw","ch","borders","paddings","prel","borderDif","elementOffset","cs","step","oc","containerElement","containerOffset","containerPosition","parentData","containerSize","woset","hoset","isParent","isOffsetRelative","cp","pRatio","cop","ho","h","_store","os","op","delta","_alsoResize","sum","gridX","gridY","ox","oy","newWidth","newHeight","isMaxWidth","isMaxHeight","isMinWidth","isMinHeight","autoRefresh","selected","selecting","unselected","unselecting","selectees","dragged","$this","startselected","opos","selectee","metaKey","ctrlKey","doSelect","tmp","hit","isFloating","ready","connectWith","dropOnEmpty","forcePlaceholderSize","forceHelperSize","beforeStop","change","receive","update","floating","overrideHandle","validHandle","reverting","_refreshItems","_removeCurrentsFromItems","noActivation","currentContainer","domPosition","prev","_createPlaceholder","storedCursor","storedStylesheet","_storedOpacity","_storedZIndex","_preserveHelperProportions","containers","dragging","itemElement","intersection","lastPositionAbs","_intersectsWithPointer","_intersectsWithSides","_rearrange","_contactContainers","cur","animation","_storedCSS","_noFinalSort","after","serialize","_getItemsAsjQuery","connected","str","res","attribute","expression","toArray","ret","dyClick","dxClick","isOverElement","forcePointerForContainers","isOverElementHeight","isOverElementWidth","verticalDirection","_getDragVerticalDirection","horizontalDirection","_getDragHorizontalDirection","isOverBottomHalf","isOverRightHalf","_connectWith","queries","grep","targetData","_queries","queriesLength","fast","toleranceElement","refreshContainers","container","dist","itemWithLeastDistance","posProperty","sizeProperty","nearBottom","innermostContainer","innermostIndex","hardRefresh","insertBefore","nextSibling","counter","delayedTriggers","before","_inst","sender","baseEasings","dataSpace","colors","rplusequals","stringParsers","re","parse","execResult","space","Color","green","blue","alpha","spaces","rgba","red","idx","hsla","hue","saturation","lightness","propTypes","byte","percent","degrees","supportElem","clamp","allowEmpty","def","stringParse","string","_rgba","parser","parsed","values","spaceName","cache","hue2rgb","q","cssText","backgroundColor","_default","to","inArray","from","compare","same","_","localCache","isCache","_space","used","transition","other","end","startColor","startValue","endValue","blend","opaque","toRgbaString","prefix","toHslaString","toHexString","includeAlpha","g","diff","arr","local","val","vtype","_hsla","hook","hooks","cssHooks","curElem","fx","colorInit","borderColor","expand","expanded","part","names","aqua","black","fuchsia","gray","lime","maroon","navy","olive","purple","silver","teal","white","yellow","classAnimationActions","shorthandStyles","borderBottom","borderLeft","borderRight","borderTop","borderWidth","padding","getElementStyles","len","getComputedStyle","currentStyle","styles","setAttr","animateClass","speed","applyClassChange","animated","baseClass","allAnimations","oldStyle","newStyle","styleDifference","styleInfo","dfd","Deferred","resolve","classNames","force","toggle","switchClass","_normalizeArguments","speeds","off","standardAnimationOption","save","restore","setMode","getBaseline","origin","original","createWrapper","float","background","activeElement","removeWrapper","setTransition","factor","unit","cssUnit","effectMethod","run","pow","Sine","cos","PI","Circ","sqrt","Elastic","sin","Back","Bounce","pow2","bounce","easeIn","uid","hideProps","showProps","paddingTop","paddingBottom","borderTopWidth","borderBottomWidth","collapsible","heightStyle","icons","activeHeader","beforeActivate","prevShow","prevHide","_processPanels","headers","_refresh","panel","content","_createIcons","prependTo","_destroyIcons","contents","removeAttribute","_setupEvents","_keydown","altKey","currentIndex","toFocus","_eventHandler","_panelKeyDown","accordionId","_findActive","headerId","panelId","aria-selected","aria-expanded","aria-hidden","siblings","events","keydown","clicked","clickedIsActive","collapsing","toShow","eventData","oldHeader","oldPanel","newHeader","newPanel","_toggle","toHide","_animate","_toggleComplete","adjust","down","now","requestIndex","autoFocus","minLength","my","at","collision","source","close","open","response","search","select","pending","suppressKeyPress","suppressKeyPressRepeat","suppressInput","isTextarea","isInput","isMultiLine","valueMethod","isNewMenu","_move","_keyEvent","_value","term","_searchTimeout","keypress","selectedItem","previous","blur","cancelBlur","searching","_initSource","_appendTo","role","mousedown","menuElement","one","menufocus","liveRegion","text","menuselect","aria-live","beforeunload","xhr","abort","array","url","request","autocomplete","ajax","dataType","success","_search","cancelSearch","_response","__response","_normalize","_suggest","_close","ul","_renderMenu","_resizeMenu","of","_renderItemData","_renderItem","isFirstItem","isLastItem","keyEvent","escapeRegex","matcher","messages","noResults","results","amount","message","lastActive","startXPos","startYPos","clickDragged","baseClasses","typeClasses","formResetHandler","radioGroup","radio","form","radios","primary","secondary","_determineButtonType","hasTitle","buttonElement","toggleButton","focusClass","keyup","_resetButton","ancestor","labelSelector","checked","last","isDisabled","buttonText","multipleIcons","buttonClasses","datepicker","instActive","PROP_NAME","dpuuid","Date","getTime","Datepicker","_curInst","_disabledInputs","_datepickerShowing","_inDialog","_mainDivId","_inlineClass","_appendClass","_triggerClass","_dialogClass","_disableClass","_unselectableClass","_currentClass","_dayOverClass","regional","closeText","prevText","nextText","currentText","monthNames","monthNamesShort","dayNames","dayNamesShort","dayNamesMin","weekHeader","dateFormat","firstDay","isRTL","showMonthAfterYear","yearSuffix","_defaults","showOn","showAnim","showOptions","defaultDate","appendText","buttonImage","buttonImageOnly","hideIfNoPrevNext","navigationAsDateFormat","gotoCurrent","changeMonth","changeYear","yearRange","showOtherMonths","selectOtherMonths","showWeek","calculateWeek","iso8601Week","shortYearCutoff","minDate","maxDate","beforeShowDay","beforeShow","onSelect","onChangeMonthYear","onClose","numberOfMonths","showCurrentAtPos","stepMonths","stepBigMonths","altField","altFormat","constrainInput","showButtonPanel","autoSize","dpDiv","bindHover","_isDisabledDatepicker","inline","extendRemove","markerClassName","maxRows","_widgetDatepicker","setDefaults","settings","_attachDatepicker","_newInst","_connectDatepicker","_inlineDatepicker","selectedDay","selectedMonth","selectedYear","drawMonth","drawYear","_attachments","_doKeyDown","_doKeyPress","_doKeyUp","_autoSize","_disableDatepicker","_get","_showDatepicker","src","alt","_lastInput","_hideDatepicker","findMax","maxI","date","setMonth","setDate","getDay","_formatDate","divSpan","_setDate","_getDefaultDate","_updateDatepicker","_updateAlternate","_dialogDatepicker","browserWidth","browserHeight","scrollX","scrollY","_dialogInst","_dialogInput","_pos","blockUI","_destroyDatepicker","$target","_enableDatepicker","_getInst","err","_optionDatepicker","_getDateDatepicker","_getMinMaxDate","_changeDatepicker","_refreshDatepicker","_setDateDatepicker","noDefault","_setDateFromField","_getDate","dateStr","sel","handled","_selectDay","_adjustDate","_clearDate","_gotoToday","chars","chr","_possibleChars","fromCharCode","charCode","lastVal","parseDate","_getFormatConfig","beforeShowSettings","isFixed","_findPos","_checkOffset","_generateHTML","_attachHandlers","origyearshtml","numMonths","_getNumberOfMonths","cols","yearshtml","_getBorders","convert","thin","medium","thick","dpWidth","dpHeight","inputWidth","inputHeight","viewWidth","viewHeight","postProcess","_tidyDialog","unblockUI","_checkExternalClick","period","_adjustInstDate","currentDay","currentMonth","currentYear","getDate","getMonth","getFullYear","_notifyChange","_selectMonthYear","selectedIndex","month","year","td","_selectDate","formatDate","noWeekends","day","time","checkDate","format","iFormat","dim","extra","iValue","shortYearCutoffTemp","doy","literal","lookAhead","matches","getNumber","isDoubled","digits","getName","shortNames","longNames","k","pair","checkLiteral","_ticksTo1970","_getDaysInMonth","_daylightSavingAdjust","ATOM","COOKIE","ISO_8601","RFC_822","RFC_850","RFC_1036","RFC_1123","RFC_2822","RSS","TICKS","TIMESTAMP","W3C","formatNumber","formatName","output","getYear","dates","_restrictMinMax","_determineDate","newDate","pattern","offsetString","setHours","setMinutes","setSeconds","setMilliseconds","getHours","noChange","clear","origMonth","origYear","today","selectDay","selectMonth","selectYear","maxDraw","gotoDate","controls","buttonPanel","dow","col","selectedDate","cornerClass","calender","thead","daysInMonth","leadDays","curRows","numRows","printDate","dRow","tbody","daySettings","otherMonth","unselectable","tempDate","isMultiMonth","currentDate","_canAdjustMonth","_isInRange","_generateMonthYearHeader","_getFirstDayOfMonth","inMinYear","inMaxYear","years","thisYear","determineYear","endYear","monthHtml","onChange","minMax","curYear","curMonth","yearSplit","minYear","maxYear","initialized","otherArgs","sizeRelatedOptions","resizableRelatedOptions","autoOpen","closeOnEscape","dialogClass","modal","using","topOffset","resizable","beforeClose","resizeStart","resizeStop","originalCss","originalTitle","_createWrapper","uiDialog","_createTitlebar","_createButtonPane","_makeDraggable","_makeResizable","_isOpen","_destroyOverlay","opener","_hide","isOpen","moveToTop","_moveToTop","silent","moved","nextAll","_focusTabbable","_size","_position","_createOverlay","_show","hasFocus","uiDialogButtonPane","uiDialogTitlebarClose","_keepFocus","checkFocus","tabbables","aria-describedby","uiDialogTitle","uiDialogTitlebar","_title","aria-labelledby","uiButtonSet","_createButtons","buttonOptions","showText","filteredUi","_blockFrames","_unblockFrames","resizeHandles","_minHeight","isVisible","resizableOptions","isDraggable","isResizable","nonContentHeight","minContentHeight","maxContentHeight","iframeBlocks","iframe","_allowInteraction","dialog","overlayInstances","overlay","_getMaxZindex","elm","maxZindex","zindex","uiBackCompat","myAt","offsetPosition","rvertical","rpositivemotion","blind","vertical","ref","ref2","motion","upAnim","downAnim","times","anims","queuelen","dequeue","clip","vert","explode","mx","pieces","childComplete","visibility","animComplete","fade","fold","horizFirst","widthFirst","animation1","animation2","highlight","backgroundImage","pulsate","showhide","animateTo","puff","scale","baseline","props0","props2","cProps","vProps","hProps","zero","c_original","toRef","shake","positiveMotion","slide","transfer","targetFixed","fixTop","fixLeft","endPosition","startPosition","submenu","menus","activeMenu","proxy","mousedown .ui-menu-item > a","click .ui-state-disabled > a","click .ui-menu-item:has(a)","timer","mouseenter .ui-menu-item","mouseleave .ui-menu","keepActiveItem","collapseAll","character","skip","regex","escape","previousPage","nextPage","previousFilter","filterTimer","icon","submenus","submenuCarat","_itemRole","listbox","nested","focused","_scrollIntoView","_startOpening","elementHeight","itemHeight","_hasScroll","fromFocus","_open","all","currentMenu","startMenu","newItem","prevAll","cachedScrollbarWidth","rhorizontal","roffset","rposition","rpercent","getOffsets","offsets","parseCss","property","scrollbarWidth","w1","w2","div","innerDiv","getScrollInfo","within","overflowX","isWindow","overflowY","hasOverflowX","getWithinInfo","withinElement","atOffset","targetWidth","targetHeight","targetOffset","basePosition","dimensions","raw","scrollInfo","horizontalOffset","verticalOffset","collisionPosition","elemWidth","elemHeight","collisionWidth","collisionHeight","myOffset","offsetFractions","feedback","horizontal","important","fit","newOverRight","withinOffset","collisionPosLeft","overLeft","overRight","newOverBottom","collisionPosTop","overTop","overBottom","flip","newOverLeft","offsetLeft","newOverTop","offsetTop","flipfit","testElement","testElementParent","testElementStyle","getElementsByTagName","firstChild","innerHTML","oldValue","_constrainedValue","aria-valuemin","valueDiv","_refreshValue","newValue","indeterminate","_percentage","percentage","toFixed","overlayDiv","aria-valuemax","aria-valuenow","range","_keySliding","_mouseSliding","_animateOff","_handleIndex","_detectOrientation","_createRange","_createHandles","handleCount","existingHandles","classes","_valueMin","elements","_handleEvents","normValue","closestHandle","mouseOverHandle","elementSize","_normValueFromMouse","_valueMax","thisDistance","_lastChangedValue","_start","_clickOffset","_slide","_stop","pixelTotal","pixelMouse","percentMouse","valueTotal","valueMouse","_trimAlignValue","uiHash","newVal","otherVal","newValues","allowed","vals","_values","valsLength","valModStep","alignValue","lastValPercent","valPercent","valueMin","valueMax","oRange","_set","curVal","modifier","culture","up","incremental","numberFormat","spin","_draw","_events","mousewheel","spinning","_spin","mousewheelTimer","mousedown .ui-spinner-button","_repeat","mouseup .ui-spinner-button","mouseenter .ui-spinner-button","mouseleave .ui-spinner-button","uiSpinner","_uiSpinnerHtml","_buttonHtml","steps","_adjustValue","_increment","_precision","precision","_precisionOf","decimal","aboveMin","prevValue","_parse","_format","Globalize","allowAny","stepUp","_stepUp","stepDown","_stepDown","pageUp","pageDown","tabId","rhash","isLocal","anchor","hash","decodeURIComponent","location","beforeLoad","load","running","_processTabs","_initialActive","unique","anchors","locationHash","_getPanelForTab","_tabKeydown","focusedTab","goingForward","_handlePageNav","activating","_focusNextTab","_panelKeydown","_findNextTab","lastTabIndex","_setupHeightStyle","_setupDisabled","_tabId","_sanitizeSelector","lis","tablist","panels","_getList","anchorId","originalAriaControls","_createPanel","aria-controls","oldTab","newTab","_getIndex","merge","_ajaxSettings","statusText","jqXHR","status","beforeSend","ajaxSettings","increments","tooltipClass","track","_disable","_updateContent","_enable","blurEvent","contentOption","delayedShow","describedby","positionOption","_find","_tooltip","mousemove","setInterval","clearInterval","interval","fakeEvent","_removeTooltip","closing","pasteEventName","isEventSupported","caret","begin","mask","_prepareBuffer","_bindEvents","_checkVal","allowPartials","buffer","tests","formatted","_setData","eventsBound","_escapeMask","defs","definitions","partialPosition","firstNonMaskPos","maskEscaped","ignore","focusText","_writeBuffer","SHIFT","_clearBuffer","_shiftL","_seekNext","_shiftR","completed","originalPos","allow","lastMatch","literals","replacements","temp","getter","#","*","setSelectionRange","createTextRange","moveEnd","moveStart","selectionStart","selectionEnd","selection","createRange","duplicate","numeric","charCodeAt","numericSN","getRegionOrCulture","region","regionInfo","formatCurrency","regions","generateRegex","symbol","decimalSymbol","positiveFormat","negativeFormat","digitGroupSymbol","groupDigits","destination","colorize","global","roundToDecimalPlace","eventOnDecimalsEntered","multiCeroPattern","numParts","isPositive","hasDecimals","decimals","originalDecimals","money","$destination","toNumber","asNumber","parseType","validateParseType","cssWrapContainer","cssButtonsContainer","_layout","buttonContainer","setContent","parentCurrentScroll","slideContent","showButtons","hideButtons","u","f","F","J","parseValue","setValue","z","validate","B","E","M","O","D","N","P","K","I","fadeIn","formatResult","headerText","theme","wheels","showLabel","setText","cancelText","onCancel","readonly","wheelDelta","detail","G","func","fadeOut","A","onShow","scroller","themes","presets","preset","C","methods","readOnly","showOnFocus","L","getInst","getValue","dateOrder","timeWheels","timeFormat","startYear","monthText","dayText","yearText","hourText","minuteText","secText","ampmText","stepHour","stepMinute","stepSecond","separator","getMinutes","getSeconds","ap","Q","0","1","invalid","daysOfWeek","daysOfMonth","datetime","inputClass","android","ios","jqm","jqmBody","jqmHeader","jqmWheel","jqmClickPick","jqmSet","jqmCancel","bztabs","activeTab","tabNumber","popUp","tabCountPopup","tabHeader","tabCountReal","widthRow","tabCurrent","widthTabSelected","updateTabSize","changeTab","dataRef","tempTabs","moveAtTheEnd","tabChildren","domIncluded","headerWidth","totalWidth","render","services","endPoints","getEndPoints","renderHandlerPathRest","renderUploadHandlerPathRest","renderFileHandlerPathRest","letterHandlerPathRest","multiActionHandlerPathRest","metadataHandlerPathRest","context","form-get-data","proxyPrefix","form-submit-data","form-submit-data-upload","render-property-refresh","render-multiaction","render-upload-cancel-image","render-upload-data-url","render-upload-add-url","render-upload-delete-url","render-ecm-upload-url","render-multiaction-metadata","render-grid-edit-url","render-grid-save-url","render-grid-add-url","render-grid-rollback-url","render-grid-commit-url","render-grid-checkpoint-url","render-save-entity","render-stakeholder-associated","render-search-default-image","render-search-form-get-data","render-search-advanced-url","render-letter-notEditable-url","render-letter-content-url","render-letter-save-url","render-letter-content-icons","render-userfield-definition","render-document-generate","render-document-generateAllDocuments","render-processes-startform","render-processes-getstartform","render-entity-layout-image64","render-entity-layout-imageByteArray","getXSRFToken","render-entity-layout-upload-files","case-handler-getCaseSummary","case-handler-getCaseSummaryByGuid","case-handler-getCaseAssignees","case-handler-getWorkItems","case-handler-getWorkItemsByGuid","admin-getUsersList","admin-getUsersList-FromPreferences","admin-getUsersList-ForStakeholders","admin-getUsersForAssignation","admin-users-config","admin-usersform","admin-GenerateDataToSendByEmail","admin-sendUserEmail","alert","sharepointProxyPrefix","Class","isEmpty","getUrl","service","setProxyPrefix","BA_ACTION_PARAMETER_PREFIX","BA_CONTEXT_PARAMETER_PREFIX","BA_PAGE_CACHE","serviceLocator","multiactionService","multiactionservice","override","enableECMMetadataMultiaction","multiactionMetadataService","metadatamultiactionservice","userfieldRequests","deviceType","isSmartphoneDevice","deviceEnum","smartphone","isTabletDevice","tablet","desktop","deviceCode","getDeviceCode","multiaction","metadataECMMultiaction","getFormData","idProcess","idForm","idEntity","surrogateKey","idRender","xpathContext","requestedForm","recordXPath","summaryForm","idCase","idWorkitem","idTask","idPageCache","contextType","guidEntity","isRefresh","isActionStartForm","additionalXpaths","idStartScope","readOnlyForm","printversion","recordXpath","downloadOfflineForm","editable","BA_ALL_PARAMETER_PREFIX","prepare","chrono","initAndStart","ajaxParams","serviceType","avoidLoader","pipe","stopAndLog","properties","transformGridDataToReadOnly","_data","allowAdd","allowDelete","allowEdit","allowGrouping","allowSearch","getSearchFormData","idSearchForm","processDataValues","submitData","resolveData","contexttype","transitions","surrogatekey","forcePlanCompletion","actionType","toUpperCase","debug","newName","getPropertyData","sessionId","guidentity","pxpath","prows","ppage","pfilter","psort","porder","pcaseId","pguidEntity","psurrogatedKey","pactionXpath","ptemplateGuid","pparameters","multiactionConnection","getSearchData","getCollapseData","getGridData","order","searchFilter","getGridDataExclusivesSelected","xpathfilter","getUploadCancelImage","pathToBase","getUploadFileUrl","fileId","verifyPathToBase","param","getUploadFileEntityUrl","isContextContainerWidgetRender","xpathActions","getUploadAddUrl","getUploadAddFileUrl","isUserPreferences","deleteImage","deleteUploadFile","getECMMetadata","idFileUpload","xPath","idAttrib","interceptor","intercept","checkOutFile","cancelCheckOut","deleteECMFile","updateECMFileContent","metaValues","updateECMMetadata","getFileProperties","uploadECMFile","fileUpload","fileName","getECMFileUrl","p_sessionId","isFileOnECM","idUpload","read","editGridRecord","addGridRecord","addGridRecordData","saveGridRecord","disableServerGridValidations","deleteGridRecord","getFlipAssociation","flipstate","parseJSON","rollbackGridAction","getSearchDefaultImage","processDataCriteria","criteria","submitSearch","JSON","encode","allowFullSearch","maxRecords","associateStakeholder","associatedUser","refreshAssociateStakeholder","getLetterNotEditableUrl","getLetterContent","getCanGenerateLetter","saveLetterContent","fullUrl","getLetterEditorIconsPath","executeButton","getFilePrintUrl","disposition","editLinkForm","saveLinkForm","rollbackLinkForm","commitLinkForm","commitGridAction","sendCheckpoint","sendCheckpointAction","getUserfieldDefinition","userfield","guidUserfield","device","refreshControl","refreshGridCell","typeRender","executeRule","rule","executeInterface","interface","executeSAPConnector","guidsap","executeConnector","guidConnector","generateDocumentTemplate","h_pageCacheId","contextXpath","xpathcontext","groupMappingId","groupMapping","xpathAttribute","controlId","getAllDocumentsDownloadUrl","idWorkItem","getCaseNumber","isMobile","getCaseAssignees","getWorkitems","onlyUserWorkItems","getGridExportUrl","exportType","sendEmail","subject","invalidatePageCache","getUsersList","getUsersListFromPreferences","getUsersListForStakeholders","getUsersForAssignation","getUsersForm","generateDataToSendByEmail","idUser","password","sendUserEmail","eMailTo","getConfiguration","getTemplate","forcePersonalizedColumns","templateType","templateGuid","isDefaultTemplate","detectDevice","hasStartForm","guidWFClass","getStartForm","guidprocess","surrogatedKey","mappingstakeholders","editActionForm","getActions","extendParams","ptags","pmaxitems","executeActions","pguidConstructor","pguidAction","getPolymorphicActions","serializePolymorphicActions","getParents","node","fillTree","displayName","hasConstructor","guidObject","guidConstructor","getEntityImage64","entity","getFilesDataForLayoutUploadControl","processUploadFile","verifyMobilePathToBase","formData","contentType","processData","isMashupContext","replaceAll","batch","batchTimer","circularDependencies","replicateServiceMethods","getService","eval","proxyMethod","makeCircularDependenciesError","messageTmpl","printf","dependencyFrom","dependencyTo","deferred","h_action","detectCircularDependencies","addNode","batchTimeout","tag","singleAction","resolveDependencies","multiactionError","reject","fire","execute","rejectDeferreds","responses","fail","errorMessage","finalResponse","responseText","database","isNativePluginSupported","bizagiapp","getFormDataFromNative","then","mergeForm","offlineType","isEdited","getTaskData","formPromise","getTaskForm","mergeDataDocument","complexData","mergedForm","getCase","idWfClass","getOfflineImage","fileType","getActivityImage","getStartDataImage","getOfflineActivityDataImage","fileFormat","getActivityDataImage","saveOfflineImage","image","operationType","saveActivityFormImage","saveActivityDataImage","saveStartDataImage","saveOfflineFile","file","mimeType","saveActivityFormFile","saveActivityDataFile","saveStartDataFile","getOfflineFile","getActivityFile","getStartDataFile","getOfflineActivityDataFile","getActivityDataFile","getNativeFormData","caseInfo","saveNativeFormInfo","saveTaskData","saveStartData","nativesaveStartData","doc","saveFormData","isOfflineFormsV2Supported","saveFormInfo","nativeSaveFormInfo","THROW_ERROR","buildConditions","conditions","bGridDetected","bCheckEditability","operator","expressions","buildConditionOperator","sJsCondition","simple","bGDetected","searchGridReferenceInCondition","buildSimpleCondition","complex","conditionsOperator","condition","sXpath","sArgument","ensureValueJs","ensureEditable","control","renderId","containerId","gridXpathInfo","processGridXpath","gridXpath","remainingXpath","detectedArgumentType","detectConditionArgumentType","argumentType","buildXpath","boolean","argument","buildArgument","getRender","getRenderById","Error","getColumn","renderType","normalizeType","isRelatedEntityRender","showTime","includes","dateFormatter","getDateFromInvariant","formatInvariant","stringify","isEditable","showRenderNotFoundError","isParentVisible","evalGridXpath","evalXpath","gridColumn","cellValue","getCellCurrentValue","isString","renderToEval","renders","getRenders","rendersToEval","bIsGrid","isFileUploaded","isValidEmail","isButtonPressed","pressed","isGridButtonPressed","arrGridXpath","isChanged","onDeletedGridRow","rowDeleted","idMatches","showContainerNotFoundError","getCurrentDate","searchForGridReference","commands","command","searchForGridReferenceInCommand","bGridReferenceFound","searchGridReferenceInXpath","getGridControl","getControlCell","controllers","controller","validations","mainForm","enableDebug","validationBox","bizagi_notifications","triggerGlobalHandler","itemIcon","minimized","clearEnabled","onNotificationClick","buildValidations","fnValidations","buildAllValidations","showErrorMessage","showErrorAlertDialog","showValidationMessage","showAlertMessage","showInfoMessage","itemAdditionalClass","performValidationFn","clearValidationMessages","lastActionButton","getLastActionButton","validating","performValidations","countValidationMessages","hideValidationMessages","setValidationMessage","isIE8","showValidationMessages","expandNotificationBox","autofocus","isExpandedNotificationBox","invalidElements","bRendersValid","validateRenders","bFormValid","sJSCode","enabled","buildValidation","validationCommand","logError","sStatement","evalValidation","sJsValidation","gridReference","tokens","sGridStatement","bValid","showValidationMessageById","log","globalDependencies","initialCallFunctions","funtionsToExecuteARefreshCommand","initialCallFunctionsDeferred","buildActions","internalSubmitActions","initialCallTimeout","initialCallIncrements","actionsHistory","processInternalSubmitAction","buildAction","isSummaryOrGlobalForm","typeForm","evalClientAction","serverCommand","elseCommands","isClientAction","dontExecute","hashes","displayAsReadOnly","executeOnlyClientActions","md5","hashC","unbindActions","refreshActions","newActions","dependencies","dependenciesId","dependencyAlreadyAdded","renderById","buildFunction","actionDependecies","commandDependencies","commandNames","hasDependency","hasRefreshCommand","actionDependeciesIntance","ev","changed","gridColumns","searchGridColumns","tryToExecuteFunction","enableExecuteRefreshAction","sJsAction","sJsElseAction","bAutomaticRestore","bCondition","queueAction","isServerCommand","buildCommand","buildRestoreCommand","elseCommand","commandType","isRecentAction","runAction","detectCommandArgumentType","commandGridDetected","controlType","ruleObj","guidRule","xpathContextRow","interfaceObj","guidInterface","connectorObj","restoreRender","originalProperties","textFormat","changeRenderBackground","changeRenderForeground","changeRenderVisibility","changeRenderEditability","changeRenderRequired","required","restoreContainer","getContainer","changeContainerBackground","changeContainerVisibility","toogleContainer","changeContainerEditability","isGridComponent","lenIndex","indexes","getIndexes","changeCellBackgroundColor","changeBackgroundColor","changeButtonBackground","getButton","setProperty","changeCellColor","changeColor","changeButtonForeground","changeCellVisibility","renderingDeferred","changeVisibility","changeButtonVisibility","isValidRender","changeCellEditability","changeEditability","changeButtonEditability","triggerClick","changeCellRequired","changeRequired","changeRenderValue","fromAction","asyncRenderDeferred","setDisplayValue","changeRenderMinValue","changeCellMinValue","changeMinValue","changeRenderMaxValue","changeCellMaxValue","changeMaxValue","executeCalculatedField","runFormula","bizagiQueue","refreshContainer","internalQueue","addParallel","refreshCell","submitFormData","submitRender","submitOnChange","cleanRenderData","cleanCellData","changeActiveItem","loadingDeferred","setAsActiveContainer","changeFormButtonVisibility","findIndex","navigation","getNavigation","setNavigationButtons","ELEMENT_TYPE_CONTAINER","ELEMENT_TYPE_RENDER","ELEMENT_TYPE_COLUMN","renderFactory","dataService","resources","observableElement","disposed","initializeData","subscribers","getXpathContext","getPageCache","getFormContainer","getElementType","layout","isScrolledIntoView","getRenderedElement","getMode","getParams","getFormType","isReadyToSave","getCustomHandlers","dispose","disposeTime","isDisposed","processFailMessage","errorType","validationController","code","beforeToRefresh","afterToRefresh","rendering","TYPE_QUERY_FORM","childrenHash","createRenderElement","createContainerElement","createFormElement","inlineEdit","retype","processDuplicateRender","registerRender","getElement","getElementsByType","clonedElement","isClone","cloneRender","internalRender","applyContainerDefaults","renderContainerHtml","postRenderContainer","renderContainer","isRendered","replaceTag","replaceSelector","replaceChildrenTag","replaceChildrenHtml","executeChildrenPostRender","configureHandlers","applyPlaceHolderPolyfill","configureDesignView","configureLayoutView","config","placeHolderConfig","forceApply","Placeholders","childrenElements","childElement","postRenderElement","renderChildrenHtml","renderElement","collectRenderValues","renderValues","canBeSent","collectData","hasChanged","collectRenderValuesQueryForm","canBeSentQueryForm","collectDataQueryForm","getRendersByXpath","hasValidGrids","childrenPromises","getFocus","getCustomHandler","customHandlers","unregisterChildren","removeActions","triggerChildrenActions","always","refreshDesignContainer","triggerRenderChange","registerActions","actionController","unregisterRender","replaceChild","getChildById","postRenderTimeout","maxRendersPerScreen","rendersExecuted","renderOptimization","startOptimization","stopOptimization","included","includedInResult","maxLength","helpText","valueFormat","isHidden","editabilityEnabled","labelAlign","valueAlign","originalValue","previousValue","calculateInitialLayoutProperties","displayType","getDefaultLabelAlign","getDefaultValueAlign","getRTLAlign","renderWidth","calculateRenderWidth","labelWidth","valueWidth","layoutType","renderTemplateName","renderTemplate","isFullRender","isExtendedText","isExtended","displayOptionClass","getDisplayOptionClass","labelAlignClass","getAlignClass","valueAlignClass","stringLabelWidth","stringValueWidth","printVersion","showFullRender","internalRenderControl","replaceControlHtml","renderControl","renderReadOnly","configureSubmitOnChange","isLabelFormat","executePostRender","_element","internalPostRender","getControl","emptyControlByAsyncRenderDeferred","processLayout","postRenderPrintVersion","postRenderReadOnly","performExecutionModeMethods","performDesignModeMethods","configureHandlersQueryForm","configureHandlersReadOnly","internalSetInitialValue","internalSetInitialValueFlag","hasValue","isQueryForm","messageData","isQuery","columnEditable","isNumeric","controlValueIsChanged","bold","changeFontBold","italic","changeFontItalic","underline","changeFontUnderline","strikethru","changeFontStrikethru","changeFontSize","triggerEvents","identicalObjects","checkRequired","changeRequiredLabel","triggerRenderValidate","validateInputRetype","enableCheck","displayValue","getDisplayValue","sanitizeHTML","getLabel","mustImplement","getControlFiller","validationMessage","readOnlyValue","isObject","decodedDisplayValue","changeDisplayOption","changeLabelAlign","alignType","changeValueAlign","customizeRenderWidth","getElementsToStylize","originalColor","getFormattingLabel","compareValue","baseValue","defaultValue","forceCollectData","compareValueObj","_findAction","targetObj","guidAction","objectValue","valuestrikethru","valueunderline","newFontSize","emptyControlByChangeEditability","changeEditabilityCellControl","renderColumn","decorated","getDecorated","readyDeferred","onCellChange","labelElement","controlElement","controlFiller","currentElement","refreshDesignControl","clearDisplayValue","updateOriginalValue","queryValue","searchType","typeSearch","rangeQuery","newParameter","orderType","displayXpath","displayOnly","defaultControl","innerControl","isIE","autoScrollBottom","align","submitOnChangexpathContext","addSubmitAction","bRefreshForm","notCollect","defer","internalSubmitOnChange","getCacheIdCase","idCaseObject","percent2Number","getIdCase","getIdWorkitem","getidTask","getSessionId","needBGPaint","background-image","startActionExecution","actionExecutionDeferred","endActionExecution","readyActionExecution","isFromCreatedRow","submitInvalidatePageCacheRequest","pageCacheToInvalidate","isDesignMode","isExecutionMode","preventDefaultForAnchorTag","isSharepointContext","processLabelLayout","processControlLayout","warm","$label","changeFontColor","changeTextDecoration","$control","$elements","textDecoration","formContainer","formParams","getContainerMessage","containerMessage","getColumnContainerMessage","isGridControl","$message","getFormParams","ele","rendersById","rendersByXpath","rendersByXpathId","rendersByType","pageCacheId","userConfirmationMessage","hasRule","paramsRender","processPath","breadCrumb","allowValidateAndSaveAction","enableActionValidateAndSave","initializeButtons","originalProcessButton","processButton","isRoutingDisabled","applicationParent","isMobileDevice","caption","ordinal","nextWithoutValidations","back","createnewcase","routing","buildButtonStyle","useCustomButtons","unshift","setParam","xpathId","listRendesByType","getRenderByType","listRendesByTypeLength","renderKey","listRender","getGridByColumn","grids","columnsIds","helptext","queryForm","globalForm","complexGatewayContainer","activeTransitions","processButtons","validation","checkboxLabel","transitionId","strStyle","getContextType","getEndPointAction","formtype","getButtons","buttonProperties","routingDisabled","propagateExternalEvents","processDefer","preProcessButton","postProcessButton","setLoaderDeferred","loaderDeferred","deleteLoaderDeferred","isLoaderDeferredSet","useOrSetLoaderDeferred","getLoaderPromise","appendWaitForLoader","getResolveOrReject","getAllTabs","getAllTabsLength","innerTabsLoading","needsUserConfirmation","showConfirmationBox","submitForm","customHandler","validateForm","saveForm","isNativeMobileDevice","allowOnlineActions","collectRenderValuesForSubmit","deferredsToWait","deferreds","saveParams","internalSubmitFormOffline","internalSubmitForm","checkWidgetsData","isComplexGatewayPainted","countProps","showMessageBox","isSaveForDraft","online","loading","tryPushResponsePromise","responsePromise","offlineAction","IdCase","caseNumber","CaseNumber","recreateNativeButtons","isValidResource","showNotification","bHasValidations","alertMessage","propertiesToDisplayMessages","validationToDisplayMessages","modalError","failHandler","submitDataAction","executeButtonAction","performAction","checkpointAction","commitAction","waitingDeferreds","prepareCheckpointAction","prepareCommitAction","getButtonAction","flowControlDeferred","sendRollbackAction","refreshForm","jqxhrList","abortAll","messageType","addValidationMessage","addErrorMessage","selectedTabs","getSelectedTabs","tabContainers","tabContainer","waitingTemplate","waitingOverlay","waitingMessage","tmpl","isSharePoint","canvas","getSize","getOffset","min-height","min-width","getFocusedElement","setFocusedElement","errorJson","setSize","clearOnlyServer","cancelPreviousRequest","focusIdentifier","IdScope","objMessage","strMessage","connection","buttonId","checkpointUrl","commitUrl","rollbackUrl","getFloatingButton","configureNetworkHandlers","isConnected","BIZAGI_ENVIRONMENT","handleConnectionChange","contextEvent","processTemplate","processedTemplate","g1","g2","layoutCollection","getCss","layoutGuid","layoutguid","loadStyle","getContextEvent","stripslashes","asyncTabsDef","withAddForm","withEditForm","allowDetail","getKeys","pointer","inlineAddRecords","showPreview","drawControls","drawActions","drawControl","drawForms","drawPreview","templateItem","hasData","getTotalRows","getRow","getNextRow","getPreviousRow","getFirstRow","getLastRow","setPointer","isTherePendingInlineRow","addKey","newId","removeKey","navigationform","getParameters","submitAddRequest","addUrl","submitEditRequest","editUrl","submitDeleteRequest","deleteUrl","submitSaveRequest","saveUrl","dataFail","submitRollbackRequest","getRemoteData","dataUrl","validateControls","expandedIcon","getExpandedIcon","collapsedIcon","getCollapsedIcon","expandedClassIcon","bImmediate","renderResult","performSearch","searchParams","refreshResults","collectSearchValues","isMapEmpty","deviceMaxRecordsExceeded","onSearchFinished","errorObject","submitArray","getCriteriaOperation","criteriaData","parseAdditionalProperties","tabItems","tabOrientation","loadOnDemand","containsFocusedElement","setActiveTab","selectedTab","renderTabContent","templateUri","useDefaultImage","getImage64","getImageUri","replaceMultiple","allowSendInMail","getValueFilesByData","dataFiles","valueAuxFiles","getDataFilesWithoutScope","valueResult","warn","files","getUploadXpath","fullFormat","indexHour","datePickerRegional","dateObj","dateControl","getDateControl","INVARIANT_FORMAT","i18n","formattedDateTime","allowDecimals","getDefaultAllowDecimals","numDecimals","BIZAGI_DEFAULT_CURRENCY_INFO","decimalDigits","decimalSeparator","groupSeparator","getDefaultGroupDigits","colorizeOnNegative","showsymbol","currencySymbol","hasLocalData","enableTyping","complementData","isDependant","getParentCombo","valueControl","renderCombo","renderComboTemplate","dataPromise","getTemplateName","emptyValue","emptyLabelForCombo","getTemplateParams","randomNumber","formatItem","showEmpty","showCurrentData","getDummyData","remoteDataLoaded","recalculate","allowActions","msgObj","auxMsg","resetData","combo","getSelectedValue","currentValue","parseAdditionalValues","bCurrentDataFound","emptyFound","dataValue","Object","comboData","isExtraItem","escapeValue","mapValue","validateValue","translated","findDataValueById","showLetters","randomId","setGroupDigits","dataTypeMinValue","calculateMinValue","dataTypeMaxValue","calculateMaxValue","isAndroidDevice","numericInput","attachRetypeDouble","attachFormatCurrency","removeValidations","language","digitGroupSeparator","minValue","getMinValue","maxValue","getMaxValue","inputValue","oldVal","isInvalidFormat","tempValue","messageToShow","isValidRenderMessage","executeFormatCurrencyPlugin","tmpData","isIE11","clipboardData","totalVal","keyUnicode","formatTimeout","floatPart","currentPosition","removeTrailingZeros","positive","regExp","validMessage","thousands","createTooltip","currentTitle","toolTipZindex","getMaxZindex","indexDateTimeSeparation","lastIndexOf","uppercaseDatePlaceholder","intHandler","isNow","timeControl","getTimeControl","onChangeHandler","updatingTime","hasMaxLines","maxLines","regularExpressionExpression","regularExpressionMessage","regularExpression","isEmptyField","textarea","validationMessages","regEx","decodedValue","decodeURI","valueToDisplay","originalData","areThereEditableColumns","areThereTotalizedColumns","initProperties","enabledChecks","exclusiveChanges","originalEnabledChecks","groupBy","isExclusive","columnRender","singleInstance","totalize","reverse","rowsPerPage","keyColumn","skipInitialLoad","allowFilter","groupSummary","groupText","groupCollapsed","groupOrder","formShowMode","addLabel","editLabel","deleteLabel","exportOptionsLabel","detailLabel","alreadySaved","overrideGetRemoteData","cellOverrides","changeOrderData","rowKey","reverseDataRows","removeRemainingColumns","numColumns","remainingColumns","getColumnType","getGridTemplate","applyTemplate","columnInitializers","initialize","encodeXpath","spliceRowData","spliceIndex","spliceRowDataVisible","spliceRowDataEditable","rowTemplate","buildCellXpathFilter","dataResp","collectGridChange","isPressed","configureColumnSubmitOnChange","keysToDelete","columnExclusiveChanges","columnEnabledChecks","columnXpath","canColumnBeSent","checkedObject","cellOverride","getCellOverride","getCellValue","setError","changeCellProperties","saveGrid","tmpEditable","changeColumnsEditability","saveInlineAddedRows","getDepthData","isBoolean","updateAffectedCellManually","canBeExported","hasErrors","getDataNewRows","uniqueMessages","isValueValid","messagesLength","gridValidationMessage","setCellOverrides","len_v","newRecords","submitForGridChange","getEnabledChecks","cleanNewRecords","hasColorHeader","headerFormat","isRTLOrientation","canBeExport","getExclusiveChangeByRow","idRow","allowDinamiclabel","bindingValue","configureHelpText","searchForms","advancedSearch","allowSuggest","allowTyping","allowClear","searchLength","enableLocalStorage","expireCache","submitVersion","h_contexttype","enableQuerySuggestBehavior","regexC","hideStatus","selectedValue","showDesignValidations","isNull","checkListGroup","setRanageControls","minControl","maxControl","$maxCanvas","$minCanvas","renderRangeControl","$canvas","defineRangeControl","dateMin","suscribe","observer","notify","dateMax","getRenderProperties","typeRangeControl","renderProperties","moneyMin","moneyMax","numberMin","numberMax","deferredActions","engine","templateEngine","autoGenerateData","selecttemplate","processPropertyValueArgs","tagslist","maxItems","processPropertyValueDataTmplArgs","defaultAllowActions","allowactions","isHorizontal","templatetype","executeActionImmediately","processPropertyValueExecuteAction","notifyExecution","actionName","templateDefined","actionManager","guidProcess","processStartForm","processActionFormCollection","processActionForm","addActionToQueue","actionsList","additionalXpath","idParentWorkitem","entityXpath","newValueActionsList","removeActionToQueue","controlValue","countSameActions","count","getPropertiesActionLaucher","actionsLaucher","getTagList","processPropertyValueExecuteConstructor","displayNamee","taglist","submitOnChangexpathContextRow","runButtonAction","error_obj","getErrorFormatted","filesCount","geolocation","allowUpdate","getCurrentPosition","succes_callback","fail_callback","getErrorMessage","PERMISSION_DENIED","POSITION_UNAVAILABLE","TIMEOUT","performPrecision","latitude","longitude","toPrecision","allowFlip","flipped","leftData","rightData","processPropertyValue","makeJsonBase","getColumnData","getRightAssociation","formatJson","associationData","leftId","association","isChecked","idRight","removeElement","rightId","removeValue","addElement","leftXpath","rightXpath","leftFactName","rightFactName","maxFileSizeOfProperty","maxSize","maxFileSizeOfUser","BIZAGI_SETTINGS","UploadMaxFileSize","maxfiles","validExtensions","singleExtensions","defExtensions","haveFiles","noFiles","renderUploadItem","replaceFilesHtml","itemTemplate","getTemplateItemName","buildItemUrl","filename","deleteUploadItem","fileItem","buildAddParams","BIZAGI_SESSION_NAME","setRenderRequired","maxFiles","q_xpath","showMetadata","listControl","fileProperties","getFileExtension","isImage","lengthValues","renderFileLayout","loader","productBuildToAbout","replaceItemHtml","metadataTemplate","metaData","ecm_ecmStatus","ecmStatus","ecm_isVisible","ecm_allowUpdateMetadata","allowUpdateMetadata","ecm_allowDelete","ecm_allowUpdateContent","allowUpdateContent","ecm_allowView","allowView","ecm_allowCheckOut","allowCheckOut","ecm_allowCancelCheckOut","allowCancelCheckOut","ecm_allowEdit","idFileUploads","extension","cookie","lockUploadItem","unlockUploadItem","isEmptyValue","letterOpened","getXpath","getContextXpath","maximized","likeButton","getFormLinkXpath","executeSubmitOnChange","submitCommitRequest","submitCheckpointRequest","submitDataRequest","dependants","parentCombo","initializingCascadingCombo","bindDependantCombo","configureReadOnlyHandlers","isInitialValue","deferredVisible","dependantCombo","onChangeFunction","refreshDependantCombo","focusDependant","cleanInput","isEventBinded","unbindDependantCombo","dependant","parentValue","inputCombo","parentLength","parentArray","configured","itemSelected","listSize","normalizeData","getDataValue","idToRemove","markAsChecked","some","found","canAddMoreItems","$tagsContainer","acc","getElementWidth","MORE_OPTION_WIDTH","filterList","query","$container","stringContainer","stringToSearch","addSelectedElements","findItemById","hasSearchForm","removeLastElement","getListItems","isUserPreference","isAutoWidth","isAutoHeight","getTemplateItem","currentUser","buildItemUrlOffline","loadImageFromForm","imageId","offlineImageId","imageValue","getDataUrl","saveImageOffline","path","blobPromise","isNative","media","getImagePath","normalizeIOSFilePath","errorHandler","resolveLocalFileSystemURL","fileEntry","reader","FileReader","onloadend","blob","Blob","readAsArrayBuffer","blobImage","blobError","buildFullItemUrl","getFileDependencies","fileDependencies","loadFile","renderUserfieldControl","extendedData","userEditableControl","getEditableControl","renderComplex","loadUserfieldReadOnly","userReadOnlyControl","getReadonlyControl","getReadonlyValue","setEditableValue","getEditableValue","getPropertyValue","propertyName","textStatus","errorThrown","getRenderElements","getServerResourceURL","resource","userfieldGuid","getRenderValue","showDialog","showPopup","initialParams","userfieldName","getUserfieldControl","isColumn","getControlXpathContext","getUserFieldInstance","replicateUserfieldMethods","userfieldInstance","downloadalldocuments","allowGenerate","preRenderControl","downloadAllDocuments","documents","getControlHtml","renderDocumentsHtml","renderActionsHtml","noActivateButton","allowgenerate","activateButton","getDocumentXpath","renderDocumentItem","joined","buildAllDocumentsUrl","caseId","workitemId","htmlControl","updateControlForPrintMode","validateContainer","replaceActionsHtml","buttonExecuted","generateLink","isPropagationStopped","documentTemplateGenerate","showDocumentPreview","deleteDocumentTemplate","resolveDeleteDocumentTemplate","resolveDocumentTemplateGenerate","messageText","autoOpenDocuments","returnCssTypeFile","lenght","redrawDocuments","documentContainer","renderAllDocumentDownload","removeDeleteButton","startIndex","restOfWord","finishIndex","downloadAllDocumentsLink","getErrorTemplate","getTemplateDownload","getTemplateReadonly","decoratedClass","decorateRenders","columnVisible","showColumn","isReadonly","instanceDecoratedClass","applyOverrides","propertyOverrides","invalidElement","overrideDecoratedRenderProperties","renderSummary","setSurrogateKey","setDefaultValue","getCompositeValue","overrideProperties","getSortName","getAnyDecoratedInstance","getSortColumn","arrayEach","originalGetData","getDataForAllCells","findDataById","fetchingData","valueForGrid","tableCell","formattedDate","slideFormParams","slideFormDeferred","createRenderContainer","allowGetOriginalFormValues","formValues","onSave","goBack","showSaveButton","renderSlideForm","slideForm","view_container","navigate","refreshParams","errorTemplate","getCommonTemplate","error_message","_renderButtons","slideContainer","configureViewHandlers","formClass","containerParams","transformData","allowEdition","transformActions","transformValidations","mapRenderType","additionallabel","gridActions","bDependencyFound","newAction","transformConditions","transformCommands","gridValidations","newValidation","refreshIndex","isAddForm","slideParams","slideDeferred","extraButtons","renderSearchDialog","getSearchContainerData","currentSearchForm","renderAddForm","allowNew","searchResultContainer","searchFormParams","slideBoxDeferred","handleSearchFormZindex","containerSearchCriteria","hasSessionFormException","goToStartPage","addContainer","addFormParams","saveDataAddForm","indicator","currentAddForm","mapping","setDisplayValueToControl","renderControlSearchForm","addForm","slideOptions","searchFormToLoad","otherElements","searchForm","isDefault","searchFormData","modalViewDisplayed","renderUploadFile","virtualForm","saveButtonLabel","getMetadataForm","$renderEdition","onSaveDataMetadataForm","fileData","metadata","getRenderType","metadataType","newRender","assign","metadataId","description","autoExtend","metadataValues","idMetadata","warnings","errors","configureComplexGateway","modalViewDidAppear","modalViewDidDisappear","isiOSTabletDevice","isObjectEmpty","warningContainer","errorContainer","ekey","deferredSave","autoSaveEvents","newData","saveBox","showSaveBox","nonSupportedMethods","stopLoading","validateFeatureSupport","getPane","pane","saveButton","nextButton","getViewContainer","postRenderEdit","formsRenderVersion","originalParams","popupResponse","workportal","popup","getResponseValues","getResponseValuesParams","dontClose","repaintComplexGateway","isComplex","workItems","taskType","currentPopup","widgets","BIZAGI_WORKPORTAL_WIDGET_COMPLEXGATEWAY","sourceElement","activeScroll","closed","addWarning","addError","isFloatingButtonsEnabled","isFormButtonsEnabled","notifier","sticky","$selected","contentPanel","tabItem","accordion","accordionItem","resultsGrid","searchCriteria","criteriaContainer","resultsContainer","br2nl","retypeDouble","extendedText","minLines","maxCharactersToShow","showChar","startString","endString","actualMaxLength","updateTextareaSize","currentRows","numberScientificNotation","inputDisplay","attachFormatSientificNotation","scientificNotationFormat","scientificNotationNumber","scientificNotationNumberDisplay","MAX_YEARS_DISPLAY","getFormattedDate","controlElements","defaultDateControl","minDateControl","maxDateControl","getTimeFormat","setFullYear","mobiscroll","calendar","showScrollArrows","lang","languages","BIZAGI_LANGUAGE","timeS","onSet","valueText","getVal","hours","minutes","is24h","onBeforeShow","isiOSDevice","isCordovaSupported","cordova","Keyboard","disableScroll","initializer","currentTime","fullDateFormated","setHour","getFullFormatedDate","getDateFromISO","preprocessDateValue","isClearButton","formatedFullDate","setNewDateValue","fullDate","formatISO","dateFromFormat","getDateFromFormat","applyDateFormat","initIndexTime","endIndexTime","validateMinAndMaxValue","showMandatoryMessage","isMinValue","vValue","resultValue","formatedDate","propertiee","isValidMinMaxValue","yesno","parsedValue","check","isCheck","mobileView","customHeader","contentTemplate","configureActions","configureModalViewHandlers","processComboData","comboValue","valueObjet","$elementsList","$clearButton","$searchInput","$li","selectedId","hasItems","validateItem","upload","QUALITY_PICTURE","LIMIT","EXTENSIONSIMG","EXTENSIONSFILE","EXTENSIONSVIDEO","EXTENSIONSAUDIO","renderItem","$contentFile","$inputFile","$nativeFile","checkFileExtensions","attachEvents","downloadFile","executeFormFailHandler","counterChoseFiles","chooseFile","removeFile","getUploadChoices","actionSheet","actionClicked","handlerUploadFile","appear","cancelClicked","getImageResolutionSizes","withoutCancel","handlerResolutionUpload","addFile","camera","getPicture","dataImage","extensions","checkMaxSize","getFileDataInfo","checkFileTypes","getAndroidVersion","isAndroid","modalResolutionUpload","buttonIndex","getImageResolutionItems","onFail","quality","sourceType","Camera","PictureSourceType","PHOTOLIBRARY","correctOrientation","saveImage","CAMERA","mediaType","MediaType","PICTURE","destinationType","DestinationType","FILE_URI","captureVideo","dataVideo","checkMaxSizeVideo","saveVideo","limit","actionSelected","ResolutionType","ORIGINAL","resolution","getImageResolution","transformImageSize","editedImageURL","localUrl","base64Image","dataItem","dataFile","uploadFile","fullPath","addParams","queueID","FileUploadOptions","fileKey","uploadKey","onUploadFileCompleted","messageError","$wrapper","checkMaxFiles","isMaxFilesReached","actualFiles","validOptions","video","fileAPISupported","buildAddFileParams","FormData","itemsUpload","errorResponse","checkMaxSizeFile","updateFilesCount","openOfflineFile","handlerWebUploadFile","removeOfflineFile","getBlobFromPath","saveResponse","onUploadOfflineFileCompleted","addInteractions","fileUploaded","failReadFile","fileIndex","fileValue","dataIndex","getFileParams","binaryFile","handleBinaryFile","blobFile","getDataUri","fileExtension","uniqueID","dataUrlToSave","dataMimeType","fileToSave","DataType","XMLHttpRequest","onload","readAsDataURL","responseType","send","fileMimeType","GRID_PAGE_SIZE","cellMetadata","getRowIndexByKey","initialLoadDone","applyGridPlugin","updateData","pendingActions","buildColumnModel","columnsTotalizers","bizagi_grid_tablet","hasTotalizer","pageRequested","fetchData","sortRequested","cellReady","rowSelected","addRow","addVirtualRow","editRow","editVirtualRow","deleteRow","moreRows","showFormDetails","showDetailForm","showMore","onTotalData","columnModel","columnLabel","dataReady","dataReadyDeferred","loadChanges","rowIndex","rowChanges","columnData","mapChangeValue","triggerGridPluginHandler","newKeys","saveDeferred","drawEditableCell","drawReadonlyCell","originalEditable","newid","slideView","view","addExclusiveChange","addPage","currentRow","adhocForm","saveAddedRow","cleanActionChanges","executeSubmitEditRequest","editInline","dataToSend","editPage","originalrowsPerPage","moreRowsCommon","isValidXPathId","cellInput","compositeValue","getCellValueFormatted","parentPromise","inlineAddPromise","inlineAddDeferred","rowLength","showTotal","columnsModel","operationState","return_value","avg","formatTotalizedResult","showTotals","formatMonetaryCell","showBorder","columnId","simpleXpath","originalRows","isTaskForm","createdOffline","isValidGrid","saveAddedRows","beforeInlineAdd","afterInlineAdd","cancelEdition","removeNewRecords","processChanges","collectOfflineTaskData","internalRedersValues","temporalNew","sortArray","currentChanges","columnNumber","addRowData","isNew","processOldRows","collectOfflineStartData","processRow","tempRows","leng","originalFormat","bRefresh","delInfo","errorsMessage","MAX_ROWS_SUPPORTED","rowsList","editedRows","editedKeys","editedRow","valueCopy","lengthColumns","lengthRows","filledRows","rowItem","tempRow","collectionnavigator","ADVANCED_SEARCH_ID","ADVANCED_ADDITION_ID","CLEAR_SEARCH_ID","NO_RESULTS_SEARCH_ID","DEFAULT_SEARCH_ID","SEARCH_MIN_LENGTH","SEARCH_DELAY","SEARCH_MAX_RECORDS","deferredReference","searchInput","_simplySearchView","_advanceSearchView","modalView","modalViewList","suggestFilter","debounce","autoCompleteSearchResults","selectItem","formSearchParams","getContentTemplate","afterOpenAnimation","processRequest","renderSearchItem","searchItem","req","suggestions","getSuggestData","getOfflineData","highlightMatches","inputText","dataList","startsWith","letter","fileprint","link","isValidValue","getFullyDecodedURI","linkEncode","encodeURI","linkSolver","linktarget","linkTarget","formLink","openLink","paintFormLink","rollbackForm","openLinkRule","dataRuleResp","actionSave","ex","noAction","hasexitrule","closeExitRule","hasentryrule","getFormLinkXpathContext","parentXpathContext","cascadingCombo","configureCombo","changeCombo","valueItem","multiSelect","openModalView","template_content","template_footer","footer","footerTemplate","$listContainer","$suggestInput","newList","querySelector","dataAssociation","isExecution","addEventControl","showDefaultGroupList","$groups","slideDown","$input","parentId","$groupList","closeAccordionSection","slideUp","ecm","ERROR_ECM_NO_AVAILABLE","ACTION_DETAILS","ACTION_EDIT","Filename","attackMenuEvents","addMenuEvents","$fileItem","viewMore","processActionByType","lockECMFile","unlockECMFile","performValidationMessage","isFailResponse","searchList","SEARCH_ELEMENTS","searchListInput","_searchListViewModal","getHeaderTemplate","getFooterTemplate","cssClassHeader","adjustResize","finalValue","deleteItem","getTagTemplate","modalViewTagList","modalFooter","modalHeader","initialScreenSize","emptyItems","userfieldWrapper","sControl","exists","createUserfieldInstance","loadUserfield","dynamicFunction","isUserField","styleContent","styleGuid","defaultUserField","designUserField","userfieldDefinition","basicUserField","isSupported","controlName","originalOfflineImageId","showAsyncImage","choosePhoto","imageAdd","resolutionButtonHandler","imagePreview","useCamera","coordinates","popoverOptions","CameraPopoverOptions","performUploadFile","imageDelete","uploadFileCompleted","msg","saveOfflineError","htmlImage","configureMenu","baseParams","useNativeScrolling","imageData","inputEdition","onPreviewActionBack","$preview","originalImageWidth","$viewMore","dataUrltoSave","ACTION_SHOW","ACTION_DOWNLOAD","ACTION_DELETE","$inputDocument","$listDocuments","$listActions","documentFile","$documentContainer","$actionContainer","ALLOW_UPDATE","coordinate","updateDisplayValue","onSuccess","coords","actionLauncher","templateData","configureActionsHandlers","configureTemplateHandlers","FilterAction","subscribe","multipleSelection","act","executeAction","showConfirmationDialog","class_name","cancelButtonLabel","savedData","editMode","renderParams","rewriteContextType","xpathContextWithKey","xpathContextWithoutKey","IdEntity","startForm","actionsToExecuteContainer","configureQueueVisibility","listOfActions","removeActionSelector","openActionSelector","extraParams","dataAction","actionsToExecuteTitle","calculateFilters","polymorphicLauncher","totalActions","lessActions","templateArguments","treeActionsList","getTreeItems","bindHandlers","level","templateTreeItem","$targetData","onActionClicked","pageCache","checkList","onCheckListGroupChange","goal","activityDescription","newItemName","addEditButton","cancelEditButton","additionalElements","notifyLoadItems","resolvedItems","resolved","setItemLocalStorage","hasChanges","idActivity","itemsResolved","progress","activityWork","webpart","publish","prepareNewItem","contentHolder","itemPosition","repaintControl","itemSelectedName","itemContent","addSelectedHandlers","addItem","guidItem","checkListHtml","refreshValue","rangeDate","rangeMoney","rangeNumber","layoutRender","layoutImage","getResponseHeader","byteArrayToBlob","stringToByteArray","imageUrl","URL","webkitURL","createObjectURL","idcase","idworkitem","contextxpath","layoutPlaceholder","layoutBoolean","layoutLink","getContainerRender","onClickElement","navigateFromRender","referenceType","kendoMobileApplication","layoutLabel","layoutText","layoutDateTime","layoutNumber","layoutMoney","layoutUpload","getHTMLFiles","originalGetControl","applyColumnStyles","xpathPath","applyUploadPlugin","nameFile","idSession","simpleXpathArray","templates","loadOverrides","initAsyncStuff","loadTemplates","loadTemplate","templateDestination","templateService","resolvedTemplate","mobileform","formTemplate","usersForm","nestedForm","mobilegroup","mobiletext","entityTemplate","getSearchRender","getQueryRender","getUser","activityCheckList","columnParams","exclusiveCheck","uploadecm","queryExtendedText","queryText","queryCheck","queryYesNo","queryNumber","queryMoney","queryDate","queryCombo","queryCascadingCombo","querySuggest","queryLabel","queryList","queryMultiSelect","querySearch","queryRadio","queryState","queryCaseState","queryProcess","querySearchUser","factory","getFileTemplate","tmplIcons","onDemand","old","offline","getLayoutRender","getRangeRender","execution_device","cachedFactory","getRenderFactory","print","getDataService","executionDeferred","deviceFactory","getFactory","unsubscribe","queryString","getQueryString","process","refreshing","pathProcess","lastWidth","lastHeight","resizeInPopUpHTML","configureRefresh","configureRouting","configureRenderError","configureResize","configureGlobalHandlers","enableE2EInterface","transformGridControl","processForm","getFailDeferred","jsonErrorMessage","BIZAGI_ORIENTATION","buttonsForm","fastEmpty","canvasParent","resizeTimeout","forceResize","triggerParams","heightActivitiFormContainer","renderForm","heightButtonContainer","renderBehavior","heightCanvas"],"mappings":"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","sourcesContent":["/*\r\nAdd the Material Design Style Ripple Effect on Click / Touch.\r\n*/\r\n(function ($) { \r\n    var transparent;\r\n    //only run this once. this addes an empty elment in boody root and gets the defintion of the browsers transparent color scheme.\r\n    if (typeof (transparent) == \"undefined\") {\r\n        // Get this browser's definition of no back ground / transprent, rgba(0,0,0,0) etc..\r\n        // Must be appended else Chrome etc return 'initial'\r\n        var $temp = $('<div style=\"background:none;display:none;\"/>').appendTo('body');\r\n        //now we just get the value given back to use by the browser for its spcific transparent color scheme.\r\n        transparent = $temp.css('backgroundColor');\r\n        //remove the temp object since were done with it.\r\n        $temp.remove();\r\n    }\r\n\r\n\r\n    //add Material desing style rippple effect to a given element that animates on click / touch.\r\n    $.fn.rippleEffect = function (options) {\r\n        // Extend our default options with those provided.\r\n        var opts = $.extend({}, $.fn.rippleEffect.defaults, options);\r\n\r\n\r\n        return this.each(function () {\r\n            $(this).on(\"click\", function (e) {\r\n                var $thisElement = $(this),\r\n                eventPageX,\r\n                eventPageY,\r\n                inkX,\r\n                inkY,\r\n                maxDiameter,\r\n                eventType = e.type,\r\n                rippleColor,\r\n                $inkSpan,\r\n                $inkparent;\r\n\r\n                //default append\r\n                $inkparent = $thisElement;\r\n\r\n                function getRippleColorFromTraverse() {\r\n                    if (opts.inkColor != \"\") {\r\n                        return opts.inkColor;\r\n                    } else {\r\n                        //try and get from elemnt or parent what ever has a bg color and it will lighten or dark based on color.\r\n                        return getInkColor($inkparent, opts.inkDefaultColor);\r\n                    }\r\n                }\r\n                //check to see if were appending ink to a parent element other than the trigger\r\n                //if you append to a parent item that item will have the ripple span and it may block access to links\r\n                //all i had to do was give any of the siblings of the ripple a z-index of 1, some i had to set position to relative.\r\n                if (opts.appendInkTo != \"\") {\r\n                    $inkparent = $thisElement.closest(opts.appendInkTo);\r\n                }\r\n                // check to se if we have an ink, if not we need to add it in, we only need to do this once.\r\n                if ($inkparent.find(\".\" + opts.inkClass).length == 0) {\r\n                    //add ink \r\n                    $inkparent.append('<span class=\"' + opts.inkContainerClass + '\"><span class=\"' + opts.inkClass + '\"></span></span>');\r\n                }\r\n                //set the ink var targeting the ink within the element to prevent dup ink animates.\r\n                $inkSpan = $inkparent.find(\".\" + opts.inkContainerClass + \" > \" + \" .\" + opts.inkClass);\r\n                //incase of quick double click or animate is present. remove the animation\r\n                $inkSpan.removeClass(\"animate\");\r\n\r\n                //now if the ink has no height set we need to add it in.\r\n                if (!$inkSpan.height() && !$inkSpan.width()) {\r\n                    //use $thisElement width or height whichever is larger for the diameter to make a circle which can cover the entire element.\r\n                    maxDiameter = Math.max($inkparent.outerWidth(), $inkparent.outerHeight());\r\n                    //set width and height and get bg color for the\r\n                    //see if ripple color was provided via data attr.\r\n                    if (typeof ($thisElement.data(\"ripple\")) != \"undefined\" && $thisElement.data(\"ripple\") != \"\") {\r\n                        rippleColor = $thisElement.data(\"ripple\");\r\n                    } else {\r\n                        //check if a target element id to get a ripple color from is provided\r\n                        if (typeof ($thisElement.data(\"ripple-getcolorfromid\")) != \"undefined\" && $thisElement.data(\"ripple-getcolorfromid\") != \"\") {\r\n                            var idToUse = $thisElement.data(\"ripple-getcolorfromid\");\r\n                            //make sure element is on page.\r\n                            if ($(idToUse).length > 0) {\r\n                                //set from given elmements bgcolor.\r\n                                rippleColor = $(idToUse).css(\"background-color\");\r\n                            } else {\r\n                                //get from default ways\r\n                                rippleColor = getRippleColorFromTraverse();\r\n                            }\r\n                        } else {\r\n                            //get from default ways\r\n                            rippleColor = getRippleColorFromTraverse();\r\n                        }\r\n                    }\r\n                    //set h and w and ripple color.\r\n                    $inkSpan.css({ height: maxDiameter, width: maxDiameter, \"background-color\": rippleColor });\r\n                }\r\n                \r\n                //now that the ink is taken care of we need to set the position where it starts, which if from click.\r\n                //get event type.\r\n                if(eventType === \"click\"){\r\n                    eventPageX = e.pageX; \r\n                    eventPageY = e.pageY;\r\n                } else if(eventType === \"touchstart\") {\r\n                    var touch = (e.originalEvent.touches[0] || e.originalEvent.changedTouches[0]);\r\n                    eventPageX = touch.pageX;\r\n                    eventPageY = touch.pageY\r\n                }\r\n               \r\n                inkX = (eventPageX - $inkparent.offset().left - $inkSpan.width() / 2);\r\n                inkY = (eventPageY - $inkparent.offset().top - $inkSpan.height() / 2);\r\n                $inkSpan.css({ top: inkY + 'px', left: inkX + 'px' }).addClass(\"animate\");\r\n                //remove animation after a little bit.\r\n                setTimeout(function () {\r\n                    $inkSpan.removeClass(\"animate\")\r\n                }, 400);\r\n\r\n            });\r\n        });\r\n    };\r\n    // Plugin defaults  added as a property on our plugin function.\r\n    $.fn.rippleEffect.defaults = {\r\n        inkContainerClass: \"ripple\",\r\n        inkClass: \"ink\",\r\n        //to avoid a global default you can add data-ripple=\"#ff00ff\" to the element that will have the ripple and that color will be used.\r\n        //or to use a tagrget elements background color for the ripple you can set the data-ripple=\"\" and data-ripple-getcolorfromid=\"#elmentWIthBGColorToUSe\"\r\n        inkDefaultColor: \"#F0F0F0\", //falback color to use if using parent traversing to get a bg color.\r\n        inkColor: \"\", //the ink color you want the element to use, this will override any bg checks for element and parent traversing, but if the ement has data-ripple=\"#fff\" the #fff will be used above all else\r\n        //if you append to a parent item that item will have the ripple span and it may block access to links and child elements\r\n        //all i had to do was give any of the children of the appended element a z-index of 1, some i had to set position to relative.\r\n        appendInkTo: \"\" //append ink to a diffrent element. will find closest element matching.\r\n    };\r\n\r\n    //Now users can include a line like this in their scripts:\r\n    //$.fn.rippleEffect.defaults.inkDefaultColor = \"#0000FF\";\r\n\r\n    // Define our get background color function.\r\n    //this will try and get a background color for the ink color manipulation \r\n    //by starting with the element provided and going as far back to the body unless a value is found.\r\n    //providing a falback value will make sure that an actual color is returned\r\n    function getBackgroundColorForInk($element, fallback) {\r\n        function getBgColor($elementToCheckForBg) {\r\n            //here we check against the @transparent var that is set on load.\r\n            if ($elementToCheckForBg.css('backgroundColor') == transparent) {\r\n                //here we check if were not at body, if not, then run again on the elments parent, if were at body use fallback or the browers take on transparent.\r\n                return !$elementToCheckForBg.is('body') ? getBgColor($elementToCheckForBg.parent()) : fallback || transparent;\r\n            } else {\r\n                //it was not transparent return this color.\r\n                return $elementToCheckForBg.css('backgroundColor');\r\n            }\r\n        }\r\n        //run the function which will repeate as long as it needs until it hits body to find a color to use.\r\n        return getBgColor($element);\r\n    };\r\n\r\n    //create as a property so users can set make there own lum check.\r\n    //returns the direction lumination should go for ink contrast.\r\n    //get the lumination value for a given color.\r\n    $.fn.rippleEffect.getLuminationValue = function (hexcolor) {\r\n        var hexcolor = hexcolor.substring(1);      // strip #\r\n        var rgb = parseInt(hexcolor, 16);   // convert rrggbb to decimal\r\n        var r = (rgb >> 16) & 0xff;  // extract red\r\n        var g = (rgb >> 8) & 0xff;  // extract green\r\n        var b = (rgb >> 0) & 0xff;  // extract blue\r\n\r\n        var luma = 0.2126 * r + 0.7152 * g + 0.0722 * b; // per ITU-R BT.709\r\n        return luma;\r\n    }\r\n\r\n    //create as property, for user override. \r\n    //this was from a site point article.\r\n    //get a new color luminance -0.15 is darker by 15% and 0.20 is lighter by 20%\r\n    $.fn.rippleEffect.getColorLuminance = function (hexcolor, lum) {\r\n        // validate hex string\r\n        hexcolor = String(hexcolor).replace(/[^0-9a-f]/gi, '');\r\n        if (hexcolor.length < 6) {\r\n            hexcolor = hexcolor[0] + hexcolor[0] + hexcolor[1] + hexcolor[1] + hexcolor[2] + hexcolor[2];\r\n        }\r\n        //set a default lum value.\r\n        lum = lum || 0;\r\n\r\n        // convert to decimal and change luminosity\r\n        var resultHex = \"#\", c, i;\r\n        for (i = 0; i < 3; i++) {\r\n            c = parseInt(hexcolor.substr(i * 2, 2), 16);\r\n            c = Math.round(Math.min(Math.max(0, c + (c * lum)), 255)).toString(16);\r\n            resultHex += (\"00\" + c).substr(c.length);\r\n        }\r\n\r\n        return resultHex;\r\n    }\r\n\r\n    //create property for overide if wanted, this converts an rgb value to hex.\r\n    //it does not work right with rgba though it just returns the bas rgb part so the trans is not claculated in.\r\n    $.fn.rippleEffect.colorToHex = function (rgb) {\r\n        //first echeck to see if we already have a hex color, if so just return.\r\n        if (rgb.substr(0, 1) === '#') {\r\n            return color;\r\n        }\r\n        rgb = rgb.match(/^rgba?[\\s+]?\\([\\s+]?(\\d+)[\\s+]?,[\\s+]?(\\d+)[\\s+]?,[\\s+]?(\\d+)[\\s+]?/i);\r\n        return (rgb && rgb.length === 4) ? \"#\" +\r\n         (\"0\" + parseInt(rgb[1], 10).toString(16)).slice(-2) +\r\n         (\"0\" + parseInt(rgb[2], 10).toString(16)).slice(-2) +\r\n         (\"0\" + parseInt(rgb[3], 10).toString(16)).slice(-2) : '';\r\n    }\r\n\r\n    //this is the base function that does all of the magic, it gets a bkg color, \r\n    //then changes the colors lumanince so the ink is visiable when being animated.\r\n    function getInkColor($element, fallBackColor) {\r\n        var backgroundOrInhreitedBackGround,\r\n            hex,\r\n            luma,\r\n            returnLumintion;\r\n        //get back ground color of element / or parent with an actual color or use fallback of a lighter gray \r\n        // Call our getBackgroundColorForInk function.\r\n\r\n        backgroundOrInhreitedBackGround = getBackgroundColorForInk($element, fallBackColor);\r\n        //convert to hex, this returns hex if it is already hex.\r\n        //call our colorToHex function\r\n        hex = $.fn.rippleEffect.colorToHex(backgroundOrInhreitedBackGround);\r\n        //now get the lumination value of this bg.\r\n        //call our getLuminationValue function\r\n        luma = $.fn.rippleEffect.getLuminationValue(hex);\r\n\r\n        //239 for lighter lumination ok \r\n        if (luma <= 239) {\r\n            //go lighter alwasy prefered.\r\n            //we need to make sure we are light enough though\r\n            if (luma <= 70) {\r\n                returnLumintion = $.fn.rippleEffect.getColorLuminance(hex, 0.80);\r\n            } else {\r\n                returnLumintion = $.fn.rippleEffect.getColorLuminance(hex, 0.20);\r\n            }\r\n        } else {\r\n            //go darker\r\n            returnLumintion = $.fn.rippleEffect.getColorLuminance(hex, -0.15);\r\n        }\r\n        return returnLumintion;\r\n    };\r\n\r\n})(jQuery);","/*\r\n *   Name: \r\n *   Author: Diego Parra\r\n *   Comments:\r\n *   -   This widget will implement a custom grid for bizagi rendering module\r\n *\r\n *   Markup: <div></div>\r\n *\r\n *   Styles:\r\n *   - Desktop: css/bizagi/desktop/controls/bizagi.grid.css\r\n *   - Tablet: css/bizagi/tablet/controls/bizagi.grid.css\r\n */\r\n\r\n// TODO: Create templates\r\n\r\n(function ($) {\r\n    $.widget(\"ui.bizagi_grid\", {\r\n        options: {\r\n            id: \"no-id\",\r\n            columns: [],\r\n            sortBy: \"\",\r\n            sortType: \"asc\",\r\n            showSummary: false,\r\n            collapse: false,\r\n            collapseState: false,\r\n            data: {},\r\n            indexedData: {},\r\n            maxColumns: 0,\r\n            buttonsPst: false,\r\n            title: '',\r\n            tableCssClass: '', // Style for entire table              \r\n            headerStyles: '',\r\n            floatingHeader: false,\r\n            hasExclusiveCheck: false,\r\n            template: {\r\n                grid: \"\",\r\n                waiting: \"\",\r\n                table: \"\",\r\n                emptyTable: \"\",\r\n                column: \"\",\r\n                specialColumn: \"\",\r\n                row: \"\",\r\n                rowButtons: \"\",\r\n                cell: \"\",\r\n                specialCell: \"\",\r\n                pager: \"\",\r\n                buttons: \"\",\r\n                dynamicPager: \"\",\r\n                summary: \"\",\r\n                summaryCell: \"\"\r\n            },\r\n            actions: {\r\n                add: true,\r\n                edit: true,\r\n                remove: true,\r\n                details: true,\r\n                allowMore: false,\r\n                enableXlsExport: false,\r\n                enablePdfExport: false\r\n            },\r\n            mode: \"execution\"\r\n        },\r\n        /*\r\n        *   Constructor\r\n        */\r\n        _init: function () {\r\n            var self = this;\r\n            var options = self.options;\r\n            var element = self.element;\r\n\r\n            // Set object variables\r\n            self.page = 1;\r\n            self.changes = {};\r\n            self.totalRows = 0;\r\n            self.totalPages = 0;\r\n            self.data = options.data;\r\n            self.selectedRow = 0;\r\n            self.components = {};\r\n            self.buttons = {};\r\n            self.asyncCells = {};\r\n            self.scrollableArea = options.scrollableArea || self;\r\n\r\n            // Build column indexes\r\n            self.columnByIndex = {};\r\n            self.columnByName = {};\r\n            self.columnKeyIndex = 0;\r\n            $.each(options.columns, function (i, column) {\r\n                // Fix non-present properties\r\n                column.key = typeof (column.key) !== \"undefined\" ? column.key : false;\r\n                column.label = typeof (column.label) !== \"undefined\" ? column.label : column.name;\r\n                column.sortType = \"asc\";\r\n                column.tooltip = typeof (column.tooltip) !== \"undefined\" ? column.tooltip : \"\";\r\n\r\n                // Index the column\r\n                self.columnByIndex[column.index] = column;\r\n                self.columnByName[column.name] = column;\r\n                if (column.key) {\r\n                    self.columnKeyIndex = column.index;\r\n                }\r\n            });\r\n\r\n            // Set sort options\r\n            options.sortBy = options.sortBy || self.columnByIndex[0].name;\r\n            if (self.columnByName[options.sortBy]) {\r\n                self.columnByName[options.sortBy].sortType = options.sortType;\r\n            } else {\r\n                if (self.columnByName[options.sortBy.split(\".\")[0]]) {\r\n                    self.columnByName[options.sortBy.split(\".\")[0]].sortType = options.sortType;\r\n                }\r\n            }\r\n\r\n            // Add base classes\r\n            element.addClass(\"ui-bizagi-grid-wrapper\");\r\n            element.attr(\"data-bizagi-id\", options.id);\r\n\r\n            // Calculate\r\n            self.calculateKeyIndex();\r\n\r\n            //collapse state\r\n            self.collapseState = options.collapseState;\r\n\r\n            // Start waiting signal \r\n            self.startLoading(false);\r\n        },\r\n        /*\r\n        *   Method to start loading for ajax data and update the ui\r\n        */\r\n        startLoading: function (bUseTimeout) {\r\n            var self = this;\r\n            bUseTimeout = typeof (bUseTimeout) !== \"undefined\" ? bUseTimeout : true;\r\n\r\n            if (self.options.mode !== \"execution\" || typeof self.options.sortBy === \"undefined\") {\r\n                return;\r\n            }\r\n\r\n            // Draw the waiting template when the endLoading delays more than 250ms\r\n            var waitingFn = function () {\r\n                var element = self.element;\r\n                var options = self.options;\r\n\r\n                // Set null to timeout\r\n                self.waitingTimeout = null;\r\n\r\n                element.append($.fasttmpl(options.template.waiting));\r\n            };\r\n\r\n            if (bUseTimeout) {\r\n                self.waitingTimeout = setTimeout(waitingFn, 250);\r\n            } else {\r\n                waitingFn();\r\n            }\r\n        },\r\n\r\n        /*\r\n        *   Method to remove the loading message\r\n        */\r\n        endLoading: function () {\r\n            var self = this;\r\n            var element = self.element;\r\n\r\n            // Remove waiting timeout\r\n            if (self.waitingTimeout) {\r\n                clearTimeout(self.waitingTimeout);\r\n                self.waitingTimeout = null;\r\n            }\r\n\r\n            // Remove everything\r\n            element.empty();\r\n        },\r\n\r\n        /*\r\n        *   This method updates the data and refreshes the grid\r\n        */\r\n        setData: function (data) {\r\n            var self = this;\r\n\r\n            // Set internal data\r\n            self.data = data;\r\n            self.calculateKeyIndex();\r\n\r\n            // Call refresh\r\n            self.refresh();\r\n        },\r\n        /*\r\n        *   This method retrieves the actual data from the grid\r\n        */\r\n        getData: function () {\r\n            var self = this;\r\n\r\n            // Return internal data\r\n            return self.data;\r\n        },\r\n\r\n        /*\r\n        *   Calculate key index\r\n        */\r\n        calculateKeyIndex: function () {\r\n            var self = this;\r\n            var columns = self.options.columns;\r\n            var data = self.data;\r\n\r\n            indexedData = {};\r\n\r\n            if (data.rows) {\r\n                $.each(data.rows, function (i, row) {\r\n                    var key;\r\n                    var row\r\n                    $.each(columns, function (j, column) {\r\n                        if (column.key) key = row[j];\r\n                    });\r\n                    indexedData[key] = row;\r\n                });\r\n            }\r\n            self.indexedData = indexedData;\r\n        },\r\n\r\n        /*\r\n        *   This method retrieves the changes made by the user\r\n        */\r\n        getChanges: function () {\r\n        },\r\n\r\n        /*\r\n        *   This method refreshes the grid\r\n        */\r\n        refresh: function () {\r\n            var self = this;\r\n\r\n            // Cleans components\r\n            self._cleanComponents();\r\n            self._cleanButtons();\r\n\r\n            // Call the draw method\r\n            self.components = {};\r\n            self.draw();\r\n        },\r\n\r\n        /*\r\n        *   This method refreshes only the summary\r\n        */\r\n        refreshSummary: function (columnIndex) {\r\n            var self = this;\r\n            var options = self.options;\r\n            var summary = self._getComponent(\"summary\");\r\n\r\n            // Do nothing if the component is drawing or there is no summary\r\n            if (self.drawing) return;\r\n            if (!summary) return;\r\n\r\n            // Resolve summary\r\n            if (options.showSummary) {\r\n\r\n                if (columnIndex) {\r\n                    // Refresh an specific summary\r\n                    self.refreshSummaryCell(columnIndex);\r\n\r\n                } else {\r\n                    // Clean and re-draw summary\r\n                    summary.empty();\r\n                    summary.append(self.drawSummary());\r\n\r\n                    // Execute post-render\r\n                    self.postRenderSummary(summary);\r\n                }\r\n            }\r\n        },\r\n\r\n        /*\r\n        *   Refresh a single summary cell\r\n        */\r\n        refreshSummaryCell: function (columnIndex) {\r\n            var self = this;\r\n            var options = self.options;\r\n            var summary = self._getComponent(\"summary\");\r\n            var getCell = function (summary, columnIndex) {\r\n                var cells = summary.is(\"[data-bizagi-component=summary-cells]\") ? summary.children() : summary.find(\"[data-bizagi-component=summary-cells]\").children();\r\n                return $(cells[columnIndex]);\r\n            };\r\n            var cell = getCell(summary, columnIndex);\r\n\r\n            // Omit index key\r\n            var column = self.columnByIndex[columnIndex];\r\n            if (column.key) return; // Omit key column\r\n\r\n            // Clean and Execute render\r\n            var html = self.drawSummaryCell(column);\r\n            cell.replaceWith(html);\r\n\r\n            // Recalculate cell\r\n            cell = getCell(summary, columnIndex);\r\n\r\n            // Execute post-render\r\n            self.onCellReady(column, \"summary\", cell, false);\r\n        },\r\n\r\n        /*\r\n        *   This method changes a cell value in the grid\r\n        */\r\n        changeCellValue: function (key, columnIndex, value) {\r\n            var self = this;\r\n            if (self.indexedData[key]) {\r\n                self.indexedData[key][columnIndex] = value;\r\n            }\r\n        },\r\n\r\n        deleteCellExclusiveValues: function(columnIndex) {\r\n            var self = this;\r\n            if (self.indexedData) {\r\n                $.each(self.indexedData, function (key) {\r\n                    self.indexedData[key][columnIndex] = false;\r\n                });\r\n            }\r\n        },\r\n\r\n        /*\r\n        *   This method draws the full grid associated with the data\r\n        */\r\n        draw: function () {\r\n            var self = this;\r\n            var options = self.options;\r\n            var element = self.element;\r\n\r\n            // Start global drawing flag\r\n            self.drawing = true;\r\n\r\n            // Ends waiting signal\r\n            self.endLoading();\r\n\r\n            if (options.orientation === \"rtl\") {\r\n\r\n                // Resolve grid template\r\n                var html = $.fasttmpl(options.template.gridRtl, {\r\n                    label: options.title,\r\n                    buttonsPst: options.buttonsPst,\r\n                    collapse: options.collapse,\r\n                    collapseState: self.collapseState,\r\n                    isDesign: (options.mode === \"design\")\r\n                });\r\n\r\n            } else {\r\n                // Resolve grid template\r\n                var html = $.fasttmpl(options.template.grid, {\r\n                    label: options.title,\r\n                    buttonsPst: options.buttonsPst,\r\n                    collapse: options.collapse,\r\n                    collapseState: self.collapseState,\r\n                    isDesign: (options.mode === \"design\")\r\n                });\r\n            }\r\n\r\n            // Call sub-drawers\r\n            html = self.drawTable(html);\r\n            self.grid = $(html).appendTo(element);\r\n\r\n            // Post render the grid\r\n            self.postRender(self.grid);\r\n\r\n            if (options.mode !== \"design\") {\r\n                // Attach paginator desktop\r\n                self.attachPaginator();\r\n\r\n                // Attach handlers\r\n                self.attachHandlers();\r\n            }\r\n\r\n            if (options.mode === \"execution\" && options.floatingHeader) {\r\n                var $tableContainer = self._getComponent(\"table\");\r\n                var $table = $(\"table\", $tableContainer);\r\n                var offset = parseInt($(self.scrollableArea).css(\"padding-top\").replace(/[^\\d.]/g, '')) || 0;\r\n\r\n                $table.stickyTableHeaders({\r\n                    fixedOffset: offset > 0 ? offset - 1 : offset,\r\n                    scrollableArea: self.scrollableArea,\r\n                    zIndex: 1000,\r\n                    cacheHeaderHeight: true\r\n                });\r\n                $tableContainer.bind(\"scroll\", function () {\r\n                    $table.trigger(\"resize.stickyTableHeaders\");\r\n                });\r\n            }\r\n\r\n            // Toggle visibility depending from row count\r\n            if (self.data.rows.length === 0) {\r\n                self._getComponent(\"table\").hide();\r\n                self._getComponent(\"pager\").hide();\r\n                self._getButton(\"remove\").hide();\r\n                self._getButton(\"edit\").hide();\r\n                self._getComponent(\"dynamicPager\").hide();\r\n                self._getComponent(\"emptyTable\").show();\r\n\r\n            } else {\r\n                self._getComponent(\"table\").show();\r\n                self._getButton(\"remove\").show();\r\n                self._getButton(\"edit\").show();\r\n                self._getComponent(\"emptyTable\").hide();\r\n\r\n                if (options.actions.allowMore) {\r\n                    self._getComponent(\"dynamicPager\").show();\r\n                    self._getComponent(\"pager\").hide();\r\n                } else {\r\n                    self._getComponent(\"pager\").show();\r\n                    self._getComponent(\"dynamicPager\").hide();\r\n                }\r\n\r\n                if (options.actions.edit) {\r\n                    self._getButton(\"edit\").show();\r\n                }\r\n\r\n                if (options.actions.enableXlsExport || options.actions.enablePdfExport) {\r\n                    self._getButton('show-grid-export-options').show();\r\n                } else {\r\n                    self._getButton('show-grid-export-options').css('display', 'none');\r\n                }\r\n\r\n            }          \r\n\r\n            // End global drawing flag\r\n            self.drawing = false;\r\n        },\r\n\r\n        attachPaginator: function () {\r\n        },\r\n\r\n        /*\r\n        *   This method draws the table associated with the data\r\n        */\r\n        drawTable: function (html) {\r\n            var self = this;\r\n            var options = self.options;\r\n\r\n            // Resolve table template\r\n            var table = $.fasttmpl(options.template.table, {\r\n                showSummary: options.showSummary,\r\n                tableCssClass: options.tableCssClass,\r\n                orientation: options.orientation\r\n            });\r\n            var emptyTable = $.fasttmpl(options.template.emptyTable);\r\n\r\n            // Resolve header\r\n            table = self._replaceElement(table, \"columns\", self.drawHeader());\r\n\r\n            // Resolve body\r\n            table = self._replaceElement(table, \"rows\", self.drawBody());\r\n\r\n            // Resolve summary\r\n            if (options.showSummary) {\r\n                table = self._replaceElement(table, \"summary\", self.drawSummary());\r\n            }\r\n\r\n            // Resolve pager\r\n            html = self._replaceElement(html, \"pager\", self.drawPager());\r\n\r\n            // Resolve buttons\r\n            html = self._replaceElement(html, \"buttons\", self.drawButtons());\r\n\r\n            //Resolve export options menu\r\n            html = self._replaceElement(html, \"gridExportOptions\", self.drawGridExportOptions());\r\n\r\n            // Resolve row buttons\r\n            html = self._replaceElement(html, \"rowButtons\", self.drawRowButtons());\r\n\r\n            // Resolve dynamic Pager\r\n            html = self._replaceElement(html, \"dynamicPager\", self.drawDynamicPager());\r\n\r\n            // Perform grid replaces\r\n            html = self._replaceElement(html, \"table\", table);\r\n            html = self._replaceElement(html, \"emptyTable\", emptyTable);\r\n            return html;\r\n        },\r\n        /*\r\n        * Find if a column has a exact match for sort it\r\n        */\r\n        isExactMatch: function () {\r\n            var self = this;\r\n            var columns = self.options.columns;\r\n            var sortBy = self.options.sortBy;\r\n            var i = 0, length = columns.length;\r\n            for (; i < length;) {\r\n                if (sortBy == columns[i++].name) {\r\n                    return true;\r\n                }\r\n            }\r\n            return false;\r\n        },\r\n\r\n        /*\r\n        *   This method draws the grid header\r\n        */\r\n        drawHeader: function () {\r\n            var self = this;\r\n            var options = self.options;\r\n\r\n            // Resolve columns\r\n            var columns = \"\";\r\n\r\n            self.exactMatch = self.isExactMatch();\r\n\r\n            $.each(options.columns, function (i, column) {\r\n                if (self.options.maxColumns > 0) {\r\n                    if (i <= self.options.maxColumns) {\r\n                        // Draw normal column\r\n                        columns += self.drawColumn(column);\r\n                    }\r\n                } else {\r\n                    // Draw normal column\r\n                    columns += self.drawColumn(column);\r\n                }\r\n            });\r\n\r\n            if (self.options.maxColumns > 0 && self._canShowButtons()){\r\n                // Draw special column\r\n                columns += self.drawSpecialColumn();\r\n            }\r\n\r\n            return columns;\r\n        },\r\n\r\n        /*\r\n        *   This method draws a column header\r\n        */\r\n        drawColumn: function (column) {\r\n            var self = this;\r\n            var options = self.options;\r\n\r\n            var columnProperties = column.bizAgiProperties || {}\r\n            var cssClass = columnProperties.cssclass ? columnProperties.cssclass : \"\";\r\n            var headerStyles = (options.headerStyles ? options.headerStyles.header : \"\");\r\n            headerStyles += (headerStyles !== \"\" ? \"; text-align:\" : \"text-align:\") + (columnProperties.columntitlealign ? columnProperties.columntitlealign : \"center\");\r\n\r\n            // Resolve column template\r\n            return $.fasttmpl(options.template.column, $.extend({}, column, {\r\n                isKey: column.key,\r\n                sortActive: column.name === options.sortBy ? column.name === options.sortBy : column.name === options.sortBy.split(\".\")[0] && !self.exactMatch ? column.name === options.sortBy.split(\".\")[0] : false,\r\n                sortType: options.sortOrder,\r\n                tooltip: column.tooltip || \"\",\r\n                columnCssClass: cssClass,\r\n                headerLabelStyles: options.headerStyles ? options.headerStyles.label : \"\",\r\n                headerStyles: headerStyles\r\n            }));\r\n        },\r\n        /*\r\n        *   This method draws a special column header that will be drawn when the grid can't show more columns\r\n        */\r\n        drawSpecialColumn: function () {\r\n            var self = this;\r\n            var options = self.options;\r\n\r\n            // Resolve column template\r\n            return $.fasttmpl(options.template.specialColumn);\r\n        },\r\n\r\n        drawDynamicPager: function () {\r\n            var self = this;\r\n            var options = self.options;\r\n\r\n            // Resolve column template\r\n            return $.fasttmpl(options.template.dynamicPager);\r\n        },\r\n\r\n        /*\r\n        *   This method draws the table body\r\n        */\r\n        drawBody: function () {\r\n            var self = this;\r\n\r\n            // Resolve rows\r\n            var rows = \"\";\r\n            $.each(self.data.rows, function (i, row) {\r\n                rows += self.drawRow(row);\r\n            });\r\n\r\n            return rows;\r\n        },\r\n\r\n        /*\r\n        *   This method draws a grid row\r\n        */\r\n        drawRow: function (rowData, isNewRow) {\r\n            var self = this;\r\n            var options = self.options;\r\n            var key = rowData[self.columnKeyIndex];\r\n            var newRow = isNewRow || false;\r\n            var rnd = Math.floor(Math.random() * 10000);\r\n            var row = $.fasttmpl(options.template.row, {\r\n                key: rnd,\r\n                isNewRow: isNewRow,\r\n                businessKey: key\r\n            });\r\n\r\n            // Resolve cells\r\n            var cells = \"\";\r\n            $.each(rowData, function (i, cell) {\r\n                if (self.options.maxColumns > 0) {\r\n                    if (i < self.options.maxColumns + 1) {\r\n                        // Draw normal cell\r\n                        cells += self.drawCell(i, key, cell, newRow);\r\n                    } \r\n                } else {\r\n                    // Draw normal cell\r\n                    cells += self.drawCell(i, key, cell, newRow);\r\n                }\r\n            });\r\n\r\n            if (self.options.maxColumns > 0 && self._canShowRowButtons()){\r\n                // Draw special column\r\n                cells += self.drawSpecialCell(self.options.maxColumns + 1);\r\n            }\r\n\r\n            // Resolve cells template\r\n            row = self._replaceElement(row, \"cells\", cells);\r\n            return row;\r\n        },\r\n\r\n        /*\r\n        *   This method draws the cells for summary\r\n        */\r\n        drawSummary: function () {\r\n            var self = this;\r\n            var options = self.options;\r\n            var row = $.fasttmpl(options.template.summary);\r\n            var cells = \"\";\r\n\r\n            // Resolve summary cells\r\n            $.each(options.columns, function (i, column) {\r\n                if (self.options.maxColumns > 0) {\r\n                    if (i <= self.options.maxColumns) {\r\n                        // Draw summary column\r\n                        cells += self.drawSummaryCell(column);\r\n                    }\r\n                } else {\r\n                    // Draw summary column\r\n                    cells += self.drawSummaryCell(column);\r\n                }\r\n            });\r\n\r\n            // Resolve cells template\r\n            row = self._replaceElement(row, \"summary-cells\", cells);\r\n            return row;\r\n        },\r\n\r\n        /*\r\n        *   This method draws a single summary cell\r\n        */\r\n        drawSummaryCell: function (column) {\r\n            var self = this;\r\n            var options = self.options;\r\n\r\n            var columnProperties = column.bizAgiProperties || {};\r\n            var cellAlign = columnProperties.columnAlign ? columnProperties.columnAlign : \"center\";\r\n\r\n            // Resolve cell template\r\n            var cell = $.fasttmpl(options.template.summaryCell, {\r\n                hidden: column.hidden || false,\r\n                summarizeBy: column.summarizeBy,\r\n                cellAlign: cellAlign\r\n            });\r\n\r\n            var result = self.onDrawCell(column, \"summary\", self.calculateSummary(column), false);\r\n            result = (result != undefined && typeof (result) != \"number\") ? result.replace(\"summaryValue\", self.calculateSummary(column)) : result;\r\n\r\n            if (!result) {\r\n                result = \"\";\r\n            }\r\n\r\n            var async = typeof (result) === \"object\" && result.done;\r\n            if (async) {\r\n                if (result.state() === \"resolved\") {\r\n                    // Fetch resolved result\r\n                    cell = self._replaceElement(cell, \"cellContent\", self.resolveResult(result));\r\n                } else {\r\n                    // Wait for result\r\n                    cell = self._replaceElement(cell, \"cellContent\", \"\");\r\n                    self.asyncCells[key + \"-\" + columnIndex] = result;\r\n                }\r\n\r\n            } else {\r\n                // Resolve cell content\r\n                cell = self._replaceElement(cell, \"cellContent\", result);\r\n            }\r\n\r\n            return cell;\r\n        },\r\n\r\n        /*\r\n        *   This method draws the grid cell\r\n        */\r\n        drawCell: function (columnIndex, key, value, isNewRow) {\r\n            var self = this;\r\n            var options = self.options;\r\n            isNewRow = isNewRow || false;\r\n            var messageValidation = \"\";\r\n\r\n            // Ensure that data is mapped into a column\r\n            if (!self.columnByIndex[columnIndex]) {\r\n                return \"\";\r\n            }\r\n\r\n            // Get message\r\n            if (columnIndex > 0) {\r\n                messageValidation = self.columnByIndex[columnIndex].bizAgiProperties && self.columnByIndex[columnIndex].bizAgiProperties.messageValidation;\r\n            }\r\n\r\n            var columnProperties = self.columnByIndex[columnIndex].bizAgiProperties || {};\r\n            var cssClass = (columnProperties.cssclass) ? columnProperties.cssclass : \"\";\r\n            var cellAlign = columnProperties.columnAlign ? columnProperties.columnAlign : \"center\";\r\n\r\n            // Resolve cell template\r\n            var cell = $.fasttmpl(options.template.cell, {\r\n                isKey: self.columnByIndex[columnIndex].key,\r\n                hidden: options.columns[columnIndex].hidden || false,\r\n                isDesign: (options.mode === \"design\"),\r\n                messageValidation: messageValidation,\r\n                columnCssClass: cssClass,\r\n                id: options.columns[columnIndex].bizAgiProperties ? options.columns[columnIndex].bizAgiProperties.id : undefined,\r\n                cellAlign: cellAlign\r\n            });\r\n\r\n            var result = self.onDrawCell(self.columnByIndex[columnIndex], key, value, isNewRow);\r\n            if (!result) {\r\n                result = \"\";\r\n            }\r\n            var async = typeof (result) === \"object\" && result.done;\r\n            if (async) {\r\n                if (result.state() === \"resolved\") {\r\n                    // Fetch resolved result\r\n                    cell = self._replaceElement(cell, \"cellContent\", self.resolveResult(result));\r\n                } else {\r\n                    // Wait for result\r\n                    cell = self._replaceElement(cell, \"cellContent\", \"\");\r\n                    self.asyncCells[key + \"-\" + columnIndex] = result;\r\n                }\r\n\r\n            } else {\r\n                // Resolve cell content\r\n                cell = self._replaceElement(cell, \"cellContent\", result);\r\n            }\r\n\r\n            self.columnByIndex[columnIndex]['cell'] = $(cell);\r\n            return cell;\r\n        },\r\n        /*\r\n        *   Returns the resolved result from a promise when the promise has been executed already\r\n        */\r\n        resolveResult: function (promise) {\r\n            var result;\r\n\r\n            promise.done(function (data) {\r\n                result = data;\r\n            });\r\n\r\n            return result;\r\n        },\r\n        /*\r\n        *   This method draws a special cell that will be drawn when the grid can't show more columns\r\n        */\r\n        drawSpecialCell: function (columnIndex) {\r\n            var self = this;\r\n            var options = self.options;\r\n\r\n            /* // Ensure that data is mapped into a column\r\n            if (!self.columnByIndex[columnIndex]) {\r\n                return \"\";\r\n            } */\r\n\r\n            // Resolve cell template\r\n            var cell = $.fasttmpl(options.template.specialCell);\r\n\r\n            return cell;\r\n        },\r\n        /*\r\n        *   This method draws a group header\r\n        */\r\n        drawGroupHeader: function () {\r\n            // TODO: Implement for PC version\r\n        },\r\n        /*\r\n        *   This method draws a footer\r\n        */\r\n        drawFooter: function () {\r\n            // TODO: Implement for PC version\r\n        },\r\n        /*\r\n        *   This method draws a grid pager\r\n        */\r\n        drawPager: function () {\r\n            var self = this;\r\n            var options = self.options;\r\n\r\n            // Calculate pages\r\n            var pages = [];\r\n            for (var i = 1; i <= self.data.total; i++) {\r\n                pages.push({\r\n                    number: i,\r\n                    active: (i == self.data.page)\r\n                });\r\n            }\r\n\r\n            // Resolve pager template\r\n            return $.fasttmpl(options.template.pager, {\r\n                page: self.data.page,\r\n                pages: pages,\r\n                records: self.data.records\r\n            });\r\n        },\r\n        /*\r\n        *   This method draws a grid button actions\r\n        */\r\n        drawButtons: function () {\r\n            var self = this;\r\n            var options = self.options;\r\n            var tooltips = options.tooltips || {};\r\n\r\n            var parameters = $.extend(options.actions, tooltips);\r\n\r\n            if (self._canShowButtons()) {\r\n                // Resolve buttons template\r\n                if (options.orientation === \"rtl\") {\r\n                    return $.fasttmpl(options.template.buttonsRtl, parameters);\r\n                } else {\r\n                    return $.fasttmpl(options.template.buttons, parameters);\r\n                }\r\n            } else {\r\n                return \"\";\r\n            }\r\n        },\r\n\r\n        /*\r\n        * This method draws the export options menu\r\n        */\r\n        drawGridExportOptions: function () {\r\n            var self = this;\r\n            var options = self.options;\r\n            var actions = options.actions;\r\n\r\n            tooltips = options.tooltips || {};\r\n\r\n            var parameters = $.extend({ \r\n                enableXlsExport: actions.enableXlsExport,\r\n                enablePdfExport: actions.enablePdfExport \r\n            }, tooltips);\r\n\r\n            return $.fasttmpl(options.template.exportOptions, parameters);\r\n        },\r\n\r\n        /*\r\n        *   This method draws a row buttons,\r\n        *   those buttons will be invisible, and will be activated when the user selects a row\r\n        */\r\n        drawRowButtons: function () {\r\n            var self = this;\r\n            var options = self.options;\r\n\r\n            if (self._canShowRowButtons()) {\r\n                // Resolve row buttons template\r\n                if (options.orientation === \"rtl\") {\r\n                    return $.fasttmpl(options.template.rowButtons.rtl, options.actions);\r\n                } else {\r\n                    return $.fasttmpl(options.template.rowButtons, options.actions);\r\n                }\r\n            } else {\r\n                return \"\";\r\n            }\r\n        },\r\n        /*\r\n        *   Execute post-renders in all the grid\r\n        */\r\n        postRender: function () {\r\n            var self = this;\r\n            var options = self.options;\r\n\r\n            // Get grid rows\r\n            var rows = self._getComponent(\"cells\");\r\n            if (rows) {\r\n                $.each(rows, function (i, row) {\r\n                    row = $(row);\r\n                    self.postRenderRow(row);\r\n                });\r\n            }\r\n\r\n            // Get summary row\r\n            if (options.showSummary) {\r\n                var summary = self._getComponent(\"summary\");\r\n                self.postRenderSummary(summary);\r\n            }\r\n\r\n            self._triggerHandler(\"gridControlReady\");\r\n        },\r\n\r\n        /*\r\n        *   Execute post-renders in each cell after the element has been created\r\n        */\r\n        postRenderRow: function (row) {\r\n            var self = this;\r\n            var key = row.attr(\"data-business-key\");\r\n            var isNewRow = row.attr(\"data-new-row\");\r\n            var cells = row.is(\"[data-bizagi-component=cells]\") ? row.children() : row.find(\"[data-bizagi-component=cells]\").children();\r\n\r\n            $.each(cells, function (i, cell) {\r\n                var column = self.columnByIndex[i];\r\n                if (typeof column == \"undefined\" || column.key) return; // Omit key column\r\n\r\n                // Check if the cell has an async result\r\n                var asyncResult = self.asyncCells[key + \"-\" + column.index];\r\n                if (asyncResult) {\r\n                    $.when(asyncResult)\r\n                        .done(function (html) {\r\n                            // Append async result\r\n                            cell = $(cell);\r\n                            cell.append(html);\r\n                            self.onCellReady(column, key, cell, isNewRow);\r\n                        });\r\n                } else {\r\n                    self.onCellReady(column, key, $(cell), isNewRow);\r\n                }\r\n            });\r\n        },\r\n\r\n        /*\r\n        *   Execute post-renders in each summary cell after the element has been created\r\n        */\r\n        postRenderSummary: function (summary) {\r\n            var self = this;\r\n            var cells = summary.is(\"[data-bizagi-component=summary-cells]\") ? summary.children() : summary.find(\"[data-bizagi-component=summary-cells]\").children();\r\n\r\n            $.each(cells, function (i, cell) {\r\n                var column = self.columnByIndex[i];\r\n                if (column.key) return; // Omit key column\r\n\r\n                // Check if the cell has an async result\r\n                var asyncResult = self.asyncCells[key + \"-\" + column.index];\r\n                if (asyncResult) {\r\n                    $.when(asyncResult)\r\n                        .done(function (html) {\r\n                            // Append async result\r\n                            cell = $(cell);\r\n                            cell.append(html);\r\n                            self.onCellReady(column, \"summary\", cell, false);\r\n                        });\r\n                } else {\r\n                    self.onCellReady(column, \"summary\", $(cell), false);\r\n                }\r\n            });\r\n        },\r\n\r\n        /*\r\n        *   Method to attach any handler to the grid\r\n        */\r\n        attachHandlers: function () { },\r\n\r\n        //TODO IMPLEMENTANDO\r\n        selectDynamicPager: function () {\r\n            this.onDynamicPager();\r\n        },\r\n\r\n        /*\r\n        *   Changes the current page in the grid\r\n        */\r\n        changePage: function (page) {\r\n            var self = this;\r\n            var currentPage = Number(self.data.page);\r\n            var total = self.data.total;\r\n            var newPage = page;\r\n\r\n            // Process previous page\r\n            if (page === \"previous\") {\r\n                if (currentPage > 1) {\r\n                    newPage = currentPage - 1;\r\n                } else {\r\n                    return;\r\n                }\r\n            }\r\n\r\n            // Process next page\r\n            if (page === \"next\") {\r\n                if (currentPage < total) {\r\n                    newPage = currentPage + 1;\r\n                } else {\r\n                    return;\r\n                }\r\n            }\r\n\r\n            //refresh components cells and rows\r\n            self._cleanComponents();\r\n\r\n            // Update internal options\r\n            self.page = Number(newPage);\r\n\r\n            // Execute handler\r\n            self.onPageRequested();\r\n        },\r\n\r\n        /*\r\n        *  Verify cells before sumitonchange\r\n        */\r\n        isValid: function () {\r\n            // Trigger handler\r\n            return this._triggerHandler(\"isValid\");\r\n        },\r\n\r\n        /*\r\n        *   Sort the grid by a column\r\n        */\r\n        sortBy: function (columnIndex, sortType) {\r\n            var self = this;\r\n            var options = self.options;\r\n            var column = self.columnByIndex[columnIndex];\r\n\r\n            if (typeof options.sortBy === \"undefined\") {\r\n                return true;\r\n            }\r\n\r\n            // Set new sort type reversed to current, if the sort column has not changed\r\n            if (typeof (column.name) === \"undefined\") column.name = column.label;\r\n            if (column.name == options.sortBy) {\r\n                sortType = sortType || (options.sortOrder == \"asc\" ? \"desc\" : \"asc\");\r\n            } else {\r\n                if (column.name == options.sortBy.split(\".\")[0]) {\r\n                    sortType = sortType || (options.sortType == \"asc\" ? \"desc\" : \"asc\");\r\n                } else {\r\n                    sortType = sortType || options.sortType;\r\n                }\r\n            }\r\n\r\n            // Update internal options\r\n            if (options.sortBy.split(\".\").length > 1) {\r\n                if (options.sortBy.split(\".\")[0] != column.name) {\r\n                    options.sortBy = column.name;\r\n                } else {\r\n                    options.sortBy = column.name;\r\n                }\r\n            } else {\r\n                options.sortBy = column.name;\r\n            }\r\n\r\n            if (typeof (column.bizAgiProperties.sortAttribute) !== \"undefined\" && column.bizAgiProperties.type.indexOf(\"column\") !== -1) {\r\n                options.sortBy = column.name + \".\" + column.bizAgiProperties.sortAttribute;\r\n            }\r\n\r\n            options.sortColumn = column;\r\n            options.sortType = sortType;\r\n            options.sortOrder = sortType;\r\n\r\n            //refresh components cells and rows\r\n            self._cleanComponents();\r\n\r\n            // Execute handler\r\n            self.onSortRequested();\r\n        },\r\n\r\n        /*\r\n        *   Selects a row in the grid\r\n        */\r\n        selectRow: function (key, businessKey) {\r\n            var self = this;\r\n\r\n            if (self.selectedRow == key) {\r\n                // Invoke un-select handler\r\n                self.onRowUnselected();\r\n\r\n                // Update internal options\r\n                self.selectedRow = 0;\r\n                self.selectedBusinessKey = 0;\r\n            } else {\r\n                if (self.selectedRow != 0) {\r\n                    // Invoke un-select handler\r\n                    self.onRowUnselected();\r\n                }\r\n\r\n                // Update internal options\r\n                self.selectedRow = key;\r\n                self.selectedBusinessKey = businessKey;\r\n\r\n                // Invoke select handler\r\n                self.onRowSelected();\r\n            }\r\n        },\r\n\r\n        /*\r\n        *   Unselects a row in the grid\r\n        */\r\n        unselectRow: function () {\r\n            var self = this;\r\n\r\n            if (self.selectedRow != 0) {\r\n                // Invoke un-select handler\r\n                self.onRowUnselected();\r\n                self.selectedRow = 0;\r\n                self.selectedBusinessKey = 0;\r\n            }\r\n        },\r\n\r\n        /*\r\n        *   Calculates the summary for a column given the data\r\n        */\r\n        calculateSummary: function (column) {\r\n            var self = this;\r\n            var operation = column.summarizeBy;\r\n\r\n            //Consider the default values in the operations\r\n            $.each(self.data.rows, function (i, value) {\r\n                if (typeof self.data.rows[i][column.index] !== \"undefined\" && self.data.rows[i][column.index] == null && column.bizAgiProperties.defaultvalue != null) {\r\n                    self.data.rows[i][column.index] = column.bizAgiProperties.defaultvalue;\r\n                }\r\n            });\r\n            var columnValues = $.map(self.data.rows, function (row, i) { return row[column.index]; });\r\n            var result;\r\n\r\n            // Don't calculate anything if there are no rows\r\n            if (columnValues.length == 0) return 0;\r\n\r\n            // Resolve operations\r\n            if (operation === \"sum\") {\r\n                result = 0;\r\n                $.each(columnValues, function (i, value) { if (value != null) result += Number(value); });\r\n\r\n            } else if (operation === \"min\") {\r\n                result = columnValues[0] || 0;\r\n                $.each(columnValues, function (i, value) { if (typeof (value) === \"number\" && value != null && (value < result)) result = Number(value); });\r\n                if (result === Math.max()) result = null;\r\n\r\n            } else if (operation === \"max\") {\r\n                result = columnValues[0] || 0;\r\n                $.each(columnValues, function (i, value) { if (typeof (value) === \"number\" && value != null && (value > result)) result = Number(value); });\r\n                if (result === Math.min()) result = null;\r\n\r\n            } else if (operation === \"avg\") {\r\n                result = 0;\r\n                $.each(columnValues, function (i, value) { if (value != null) result += Number(value); });\r\n                result = result / columnValues.length;\r\n\r\n            } else if (operation === \"count\") {\r\n                result = 0;\r\n                columnValues = self.data.rows;\r\n\r\n                for (i = 0; i < columnValues.length; i++) {\r\n                    var columnValue = columnValues[i][column.index];\r\n\r\n                    if (columnValue instanceof Array && columnValue.length > 0) {\r\n                        result += 1;\r\n                    }\r\n                    else if (!(columnValue instanceof Array) && columnValue !== null && columnValue !== \"\") {\r\n                        result += 1;\r\n                    }\r\n                }\r\n            }\r\n            return result;\r\n        },\r\n\r\n        /*\r\n        *   Process an action in order to do something with the grid\r\n        */\r\n        processAction: function (action, params) {\r\n            var self = this;\r\n\r\n            var key = params && params.key ? params.key : self.selectedBusinessKey;\r\n            if (action === \"edit\") {\r\n                self.onEditRow(key);\r\n            }\r\n            if (action === \"remove\") {\r\n                self.onDeleteRow(key);\r\n            }\r\n            if (action === \"more\") {\r\n                self.onShowMore(key);\r\n            }\r\n            if (action === \"details\") {\r\n                self.onShowDetails(key);\r\n            }\r\n            if (action === \"add\") {\r\n                self.onAddRow();\r\n            }\r\n\r\n            if (action === \"show-grid-export-options\") {\r\n                self.onShowExportGridOptions();\r\n            }\r\n        },\r\n        /*\r\n        *   Executes the page requested handler\r\n        */\r\n        onPageRequested: function () {\r\n            var self = this;\r\n\r\n            // Start loading signal \r\n            self.startLoading();\r\n\r\n            // Trigger handler\r\n            return self._triggerHandler(\"pageRequested\", self._buildRefreshParameters());\r\n        },\r\n        /*\r\n        *   Executes the sort requested handler\r\n        */\r\n        onSortRequested: function () {\r\n            var self = this;\r\n\r\n            // Start loading signal \r\n            self.startLoading();\r\n\r\n            // Trigger handler\r\n            return self._triggerHandler(\"sortRequested\", self._buildRefreshParameters());\r\n        },\r\n        /*\r\n        *   Executes the row selected handler\r\n        */\r\n        onRowSelected: function () {\r\n            var self = this;\r\n\r\n            return self._triggerHandler(\"rowSelected\", { key: self.selectedBusinessKey });\r\n        },\r\n        /*\r\n        *   Executes the row un-selected handler\r\n        */\r\n        onRowUnselected: function () {\r\n            var self = this;\r\n            return self._triggerHandler(\"rowUnselected\", { key: self.selectedBusinessKey });\r\n        },\r\n\r\n        /*\r\n        * Executes collapse grid\r\n        */\r\n        onCollapseGrid: function () {\r\n            var self = this;\r\n            return self._triggerHandler(\"performCollapseGrid\");\r\n        },\r\n\r\n        //TODO:llamar\r\n        onDynamicPager: function () {\r\n            var self = this;\r\n            return self._triggerHandler(\"moreRows\", { key: self.selectedBusinessKey });\r\n        },\r\n\r\n        /*\r\n        *   Executes the on draw cell handler\r\n        */\r\n        onDrawCell: function (column, key, value, isNewRow) {\r\n            var self = this;\r\n            return self._triggerHandler(\"drawCell\", { \r\n                column: column,\r\n                key: key,\r\n                value: value,\r\n                isNewRow: isNewRow \r\n            });\r\n        },\r\n        /*\r\n        *   Executes on cell ready handler\r\n        */\r\n        onCellReady: function (column, key, cell, isNewRow) {\r\n            var self = this;\r\n            return self._triggerHandler(\"cellReady\", { \r\n                column: column,\r\n                key: key,\r\n                cell: cell,\r\n                isNewRow: isNewRow \r\n            });\r\n        },\r\n\r\n        /*\r\n        *   Executes the on draw control handler\r\n        */\r\n        onDrawControl: function () {\r\n            //TODO: Implement this\r\n        },\r\n        /*\r\n        *   Executes the on draw group header handler\r\n        */\r\n        onDrawGroupHeader: function () {\r\n            //TODO: Implement this\r\n        },\r\n        /*\r\n        *   Executes the on add row handler\r\n        */\r\n        onAddRow: function () {\r\n            var self = this;\r\n            return self._triggerHandler(\"addRow\");\r\n        },\r\n        /*\r\n        *   Executes the on edit row handler\r\n        */\r\n        onEditRow: function (key) {\r\n            var self = this;\r\n            return self._triggerHandler(\"editRow\", { key: key });\r\n        },\r\n        /*\r\n        *   Executes the on delete row handler\r\n        */\r\n        onDeleteRow: function (key) {\r\n            var self = this;\r\n            return self._triggerHandler(\"deleteRow\", { key: key });\r\n        },\r\n        /*\r\n        *   Executes the on show more handler\r\n        */\r\n        onShowMore: function (key) {\r\n            var self = this;\r\n            return self._triggerHandler(\"showMore\", { key: key });\r\n        },\r\n        /*\r\n        *   Executes the on show details handler\r\n        */\r\n        onShowDetails: function (key) {\r\n            var self = this;\r\n            return self._triggerHandler(\"showFormDetails\", { key: key });\r\n        },\r\n        /*\r\n        * Executes the on show export grid options \r\n        */\r\n        onShowExportGridOptions: function () {\r\n            var self = this;\r\n            return self._triggerHandler(\"showGridExportOptions\");\r\n        },\r\n\r\n        /*\r\n        *   Replaces a matched element in the container for the specified \"replace\" element\r\n        */\r\n        _replaceElement: function (html, element, replace) {\r\n            return html.replaceFirstWithoutPatterns(\"{{element \" + element + \"}}\", replace);\r\n        },\r\n\r\n        /*\r\n        *   Return the event handler parameters object\r\n        */\r\n        _buildRefreshParameters: function () {\r\n            var self = this;\r\n            var options = self.options;\r\n            var sortColumn = (options.sortColumn != undefined) ? options.sortColumn.index : 1;\r\n            return { \r\n                page: self.page,\r\n                sortBy: options.sortBy,\r\n                sortType: options.sortOrder,\r\n                sortColumnIndex: sortColumn\r\n            };\r\n        },\r\n        /*\r\n        *   Calls directly to handler callback\r\n        */\r\n        _triggerHandler: function (type, data) {\r\n            var callback = this.options[type];\r\n            if (!callback) {\r\n                return null;\r\n            }\r\n            return callback.call(this.element[0], data);\r\n        },\r\n        /*\r\n        *   Gets the component\r\n        */\r\n        _getComponent: function (component) {\r\n            var self = this;\r\n            var element = self.element;\r\n            if (!self.components[component]) {\r\n                var foundComponent = $(\"[data-bizagi-component=\" + component + \"]\", element);\r\n                if (foundComponent != null && foundComponent.length > 0) {\r\n                    self.components[component] = foundComponent;\r\n                }\r\n            }\r\n            return self.components[component];\r\n        },\r\n        /*\r\n        *   Gets the specific Button\r\n        */\r\n        _getButton: function (button) {\r\n            var self = this;\r\n            var element = self.element;\r\n            if (!self.buttons[button])\r\n                self.buttons[button] = $(\"[data-action=\" + button + \"]\", element);\r\n            return self.buttons[button];\r\n        },\r\n        /*\r\n        * Cleans the components \r\n        */\r\n        _cleanComponents: function () {\r\n            var self = this;\r\n            self.components = {};\r\n        },\r\n        /*\r\n        * Cleans the buttons \r\n        */\r\n        _cleanButtons: function () {\r\n            var self = this;\r\n            self.buttons = {};\r\n        },\r\n        /*\r\n        *  Template method to check if buttons component must be rendered\r\n        */\r\n        _canShowButtons: function () {\r\n            return true;\r\n        },\r\n        /*\r\n        *  Template method to check if row buttons must be displayed when the row is selected\r\n        */\r\n        _canShowRowButtons: function(){\r\n            return true;\r\n        }\r\n\r\n    });\r\n})(jQuery);\r\n","/**\r\n * Autor: Ricardo Prez\r\n */\r\n\r\n(function ($) {\r\n\r\n    $.fn.material_bizagi_tabs = function (options, params) {\r\n\r\n        var opts = $.extend({}, $.fn.material_bizagi_tabs.defaults, options);\r\n\r\n        var base = {\r\n            index: 0,\r\n            tabs: [],\r\n            $el: undefined,\r\n            $active: undefined,\r\n            $active_content: undefined, \r\n            init: function(el, params){\r\n                var self = this;\r\n                var $tabs = $(\">ul.bz-tabs\", el);\r\n                var $content_tabs = self.$el = $(el);\r\n                var $ind;\r\n                self.index = opts.active_index_tab;\r\n\r\n                function updatePositions(active, $indicator){\r\n                    if (typeof $indicator !== \"undefined\"){\r\n                        var info = updateIndicatorState($tabs.get(0), active.get(0), opts.direction);\r\n                        $indicator.css(\"left\", info.left).css(\"width\", info.width);\r\n                    }\r\n        \r\n                    var scroll_info = scrollSelectedIntoView($tabs.get(0), active.get(0), opts.direction);                        \r\n                    $tabs.scrollLeft(scroll_info);\r\n                    $tabs.trigger(\"updatePositions\", getTabsMetaInfo($tabs.get(0), active.get(0), opts.direction));\r\n                }\r\n\r\n                $(\">li.bz-tab\", $tabs).each(function(index, element) {\r\n                    if (index === opts.active_index_tab){\r\n                        self.$active = $(this);\r\n                        self.$active.addClass(\"active\");\r\n                    }\r\n                    else {\r\n                        $($(element).data(\"reference\"), $content_tabs).hide();\r\n                    }\r\n                    self.tabs.push({index: index, element: element});\r\n                });\r\n                \r\n                self.$active_content = $(self.$active.data(\"reference\"), $content_tabs);\r\n                \r\n                //Updates the initial position\r\n                updatePositions(self.$active);\r\n                \r\n                $tabs.on('click', '> li.bz-tab', function (e) {\r\n                    e.stopPropagation();\r\n        \r\n                    if (typeof $ind === \"undefined\"){\r\n                        $ind = $(\"<li class='bz-indicator-bar'></li>\");\r\n                        var info = updateIndicatorState($tabs.get(0), self.$active.get(0), opts.direction);\r\n                        $ind.css(\"left\", info.left).css(\"width\", info.width);\r\n                        $ind = $tabs.prepend($ind).find(\".bz-indicator-bar\");\r\n                    }\r\n        \r\n                    self.$active.removeClass('active');            \r\n                    self.$active_content.hide();\r\n        \r\n                    self.$active = $(this);\r\n        \r\n                    var reference = self.$active.data(\"reference\");\r\n                    self.index = self.$active.data(\"index\");\r\n\r\n                    self.$active_content = $(reference, $content_tabs);\r\n        \r\n                    self.$active.addClass('active');\r\n\r\n                    //Updates to the current position\r\n                    updatePositions(self.$active, $ind);\r\n                    $tabs.trigger(\"updateActive\", {index: self.index});\r\n\r\n                    self.$active_content.show();\r\n                    e.preventDefault();\r\n                });\r\n\r\n            },\r\n            getActiveTab: function(){\r\n                return {\r\n                    index: this.index,\r\n                    tab: this.$active,\r\n                    contantTab : this.$active_content\r\n                };\r\n            },\r\n            moveToNextTab: function(){\r\n                var index = ((this.index + 1) < this.tabs.length) ? this.index + 1 : 0;\r\n                this.tabs[index].element.click();\r\n            },\r\n            refreshPositions: function(){\r\n                this.tabs[this.index].element.click();\r\n            }\r\n        };\r\n\r\n        \r\n        if (typeof options == \"string\" && options) {\r\n            base = $(this).data(\"base\");\r\n            if (typeof base == \"undefined\"){\r\n                console.error(\"this plugin is has not been initialized!!\");\r\n            }\r\n            return base[options](params);\r\n        }\r\n        else {\r\n            return this.each(function () {\r\n                base.init(this, params);\r\n                $(this).data(\"base\", base);\r\n            });\r\n        }\r\n    };\r\n\r\n    $.fn.material_bizagi_tabs.defaults = {\r\n        direction: 'ltr',\r\n        active_index_tab: 0\r\n    }\r\n\r\n    function updateIndicatorState(tabs, active_tab, direction) {\r\n        var tabs_meta = getTabsMetaInfo(tabs, active_tab, direction);\r\n        var tabs_info = tabs_meta.tabsMetaInfo;\r\n        var tab_info = tabs_meta.tabMetaInfo;\r\n\r\n        var left = 0;\r\n        if (tabs_info && tab_info) {\r\n            var tmp_left = \"rtl\" === direction ? tabs_info.scrollLeftNormalized + tabs_info.clientWidth - tabs_info.scrollWidth : tabs_info.scrollLeft;\r\n            left = tab_info.left - tabs_info.left + tmp_left;\r\n        }\r\n        return {\r\n            left: left,\r\n            width: tab_info ? tab_info.width : 0\r\n        }\r\n    }\r\n\r\n    function getTabsMetaInfo(tabs, active_tab, direction) {\r\n        var tabs_meta_info = void 0;\r\n        if (tabs) {\r\n            var r = tabs.getBoundingClientRect();\r\n            tabs_meta_info = {\r\n                clientWidth: tabs ? tabs.clientWidth : 0,\r\n                scrollLeft: tabs ? tabs.scrollLeft : 0,\r\n                scrollLeftNormalized: tabs ? getNormalizedScrollLeft(tabs, direction) : 0,\r\n                scrollWidth: tabs ? tabs.scrollWidth : 0,\r\n                left: r.left,\r\n                right: r.right\r\n            }\r\n        }\r\n        var tab_meta_info = void 0;\r\n        if (tabs && false !== active_tab) {\r\n            tab_meta_info = active_tab.getBoundingClientRect();\r\n        }\r\n\r\n        return {\r\n            tabsMetaInfo: tabs_meta_info,\r\n            tabMetaInfo: tab_meta_info\r\n        }\r\n    }\r\n\r\n    function getNormalizedScrollLeft(tabs, direction) {\r\n        var a = tabs.scrollLeft;\r\n        if (\"rtl\" !== direction)\r\n            return a;\r\n        var n = getScrollType(tabs);\r\n        if (\"indeterminate\" === n)\r\n            return Number.NaN;\r\n        switch (n) {\r\n            case \"negative\":\r\n                return e.scrollWidth - e.clientWidth + a;\r\n            case \"reverse\":\r\n                return e.scrollWidth - e.clientWidth - a\r\n        }\r\n        return a\r\n    }\r\n\r\n    function getScrollType(tabs) {\r\n        if (!tabs || !window.document.body)\r\n            return \"indeterminate\";\r\n\r\n        var e = window.document.createElement(\"div\");\r\n        e.appendChild(document.createTextNode(\"ABCD\"));\r\n        e.dir = \"rtl\";\r\n        e.style.fontSize = \"14px\";\r\n        e.style.width = \"4px\";\r\n        e.style.height = \"1px\";\r\n        e.style.position = \"absolute\";\r\n        e.style.top = \"-1000px\";\r\n        e.style.overflow = \"scroll\";\r\n        document.body.appendChild(e);\r\n        type = \"reverse\";\r\n        if (e.scrollLeft > 0)\r\n            type = \"default\";\r\n        else {\r\n            e.scrollLeft = 1;\r\n            0 === e.scrollLeft && (type = \"negative\")\r\n        }\r\n        document.body.removeChild(e);\r\n        return type;\r\n    }\r\n\r\n    scrollSelectedIntoView = function (tabs, active_tab, direction) {\r\n        var tabs_meta = getTabsMetaInfo(tabs, active_tab, direction)\r\n        var tabs_info = tabs_meta.tabsMetaInfo;\r\n        var tab_info = tabs_meta.tabMetaInfo;\r\n\r\n        if (!tab_info || !tabs_info)\r\n            return;\r\n        \r\n        var scroll_info = void 0;\r\n        if (tab_info.left < tabs_info.left) {\r\n            scroll_info = tabs_info.scrollLeft + (tab_info.left - tabs_info.left);\r\n        } else if (tab_info.right > tabs_info.right) {\r\n            scroll_info = tabs_info.scrollLeft + (tab_info.right - tabs_info.right);\r\n        }             \r\n        return scroll_info;\r\n    }\r\n    \r\n})($);","/*\r\n*   Name: Bizagi Grid for tablet\r\n*   Author: UI Forms Team\r\n*   Comments:\r\n*   -   This widget will extend the bizagi grid widget to specialize into a tablet view\r\n*\r\n*   Markup: <div></div>\r\n*\r\n*   Styles:\r\n*   - css/bizagi/tablet/controls/bizagi.grid.css\r\n*/\r\n\r\n(function ($) {\r\n    $.widget(\"ui.bizagi_grid_tablet\", $.ui.bizagi_grid, {\r\n\r\n        /**\r\n         * Constructor\r\n         * @private\r\n         */\r\n        _init: function () {\r\n            this._super();\r\n\r\n            this.isOfflineForm = typeof (this.options.isOfflineForm) !== \"undefined\" && bizagi.util.parseBoolean(this.options.isOfflineForm);\r\n        },\r\n\r\n        /**\r\n         * Method to attach any handler to the grid\r\n         * @returns {}\r\n         */\r\n        attachHandlers: function () {\r\n            var self = this;\r\n\r\n            // Add paging events\r\n            self._getComponent(\"pager\").find(\"ul li button\").bind(\"click\", function () {\r\n                var pageNumber = parseInt($(this).attr(\"data-page-number\"));\r\n\r\n                if (pageNumber) {\r\n                    self.changePage(pageNumber);\r\n                }\r\n            });\r\n\r\n            //TODO falta implementar\r\n            self._getComponent(\"dynamicPager\").find(\"input\").bind(\"click\", function () {\r\n                self.selectDynamicPager();\r\n            });\r\n\r\n            // Add sort events\r\n            self._getComponent(\"columns\").find(\".bz-tablet-grid__label\").bind(\"click\", function () {\r\n                if (!self.isOfflineForm) {\r\n                    var columnIndex = $(this).attr(\"data-column-index\");\r\n                    self.sortBy(columnIndex);\r\n                }\r\n            });\r\n\r\n            // Bind button actions\r\n            self._getComponent(\"buttons\").find(\"[data-action]\").bind(\"click\", function () {\r\n                if ($(this).attr(\"data-action\") === \"totalizer\") {\r\n                    self.totalizer();\r\n                } else {\r\n                    self.processAction($(this).attr(\"data-action\"));\r\n                    self.unselectRow();\r\n                }\r\n            });\r\n\r\n            self._getComponent(\"rowButtons\").find(\"[data-action]\").bind(\"click\", function () {\r\n                self.processAction($(this).attr(\"data-action\"));\r\n                self.unselectRow();\r\n            });\r\n\r\n            if (this.isOfflineForm) {\r\n                self._getComponent(\"rows\").on(\"click\", \".bz-tablet-grid__cell-more [data-action=more]\", function (evt) {\r\n                    var $context = $(evt.target).parents(\"[data-bizagi-component=cells]\");\r\n\r\n                    if ($context && $context.hasClass(\"bz-tablet-grid__row\")) {\r\n                        var businessKey = $context.attr(\"data-business-key\");\r\n                        var isNewRow = bizagi.util.parseBoolean($context.attr(\"data-new-row\")) || false;\r\n\r\n                        if (isNewRow) {\r\n                            self.onRemoveNewRow(businessKey);\r\n                        } else {\r\n                            self.processAction(\"remove\", {key: businessKey});\r\n                        }\r\n                    }\r\n                });\r\n            } else {\r\n\r\n                self._getComponent(\"rows\").find(\"tr\").bind(\"click\", function (evt) {\r\n                    var $context = $(evt.target).closest(\".bz-tablet-grid__cell\");\r\n\r\n                    evt.stopPropagation();\r\n\r\n                    if ($context && $context.hasClass(\"bz-tablet-grid__cell\")) {\r\n                        var key = $(this).attr(\"data-key\");\r\n                        var businessKey = $(this).attr(\"data-business-key\");\r\n\r\n                        self.selectRow(key, businessKey);\r\n                    }\r\n                });\r\n\r\n                // Bind special cell button action\r\n                self._addColumnActions();\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Popup Total\r\n         * @returns {}\r\n         */\r\n        totalizer: function () {\r\n            this.options.totalData();\r\n        },\r\n        /**\r\n         * Executes the row selected handler\r\n         * @returns {}\r\n         */\r\n        onRowSelected: function () {\r\n            // Call base\r\n            $.ui.bizagi_grid.prototype.onRowSelected.apply(this, arguments);\r\n\r\n            // Show row buttons             \r\n            this._showRowButtons();\r\n        },\r\n\r\n        /**\r\n         * Executes the row un-selected handler\r\n         * @returns {}\r\n         */\r\n        onRowUnselected: function () {\r\n            // Call base\r\n            $.ui.bizagi_grid.prototype.onRowUnselected.apply(this, arguments);\r\n\r\n            // Hide row buttons           \r\n            this._hideRowButtons();\r\n        },\r\n\r\n        getCell: function (key, xpath, index) {\r\n            var self = this;\r\n            var row = self._getComponent(\"rows\").find(\"[data-business-key=\" + key + \"]\");\r\n            var allVisibleTd, cell = \"\";\r\n\r\n            if (index < 4) {\r\n                allVisibleTd = $(\"td\", $(row));\r\n                cell = allVisibleTd[index + 1];\r\n            } else {\r\n                allVisibleTd = $(\"td:visible\", $(row));\r\n                cell = allVisibleTd[index];\r\n            }\r\n\r\n            return $(cell);\r\n        },\r\n\r\n        /**\r\n         * Template method to check if buttons component must be rendered\r\n         * @returns {}\r\n         */\r\n        _canShowButtons: function () {\r\n            var actions = this.options.actions;\r\n\r\n            if (this.isOfflineForm) {\r\n                return actions[\"add\"] || actions[\"remove\"] || actions[\"edit\"] || actions[\"inlineAdd\"];\r\n            } else {\r\n                return actions[\"add\"] || actions[\"hasTotalizer\"];\r\n            }\r\n        },\r\n\r\n        /*\r\n        *   This method draws a grid row\r\n        */\r\n        drawRow: function (rowData, isNewRow) {\r\n            var self = this;\r\n            var options = self.options;\r\n            var key = rowData[self.columnKeyIndex];\r\n            var newRow = isNewRow || false;\r\n            var rnd = Math.floor(Math.random() * 10000);\r\n            var row = $.fasttmpl(options.template.row, {\r\n                key: rnd,\r\n                isNewRow: isNewRow,\r\n                businessKey: key\r\n            });\r\n\r\n            // Resolve cells\r\n            var cells = \"\";\r\n            $.each(rowData, function (i, cell) {\r\n                // Draw normal cell\r\n                cells += self.drawCell(i, key, cell, newRow);\r\n            });\r\n\r\n            if (self._canShowRowButtons()){\r\n                // Draw special column\r\n                cells += self.drawSpecialCell(self.options.columns.length + 1);\r\n            }\r\n\r\n            // Resolve cells template\r\n            row = self._replaceElement(row, \"cells\", cells);\r\n            return row;\r\n        },\r\n\r\n        /*\r\n        *   This method draws a grid pager\r\n        */\r\n        drawPager: function () {\r\n            var self = this;\r\n            var options = self.options;\r\n\r\n            // Calculate pages\r\n            var pages = [];\r\n            var renderPages = [];\r\n\r\n            for (var i = 1; i <= self.data.total; i++) {\r\n                pages.push({\r\n                    number: i,\r\n                    active: (i == self.data.page)\r\n                });\r\n            }\r\n\r\n            if (self.data.page < 3 || self.data.page > self.data.total - 2) {\r\n                renderPages = [];\r\n            } else {\r\n                renderPages = [self.data.page - 1, self.data.page, self.data.page + 1];\r\n            }\r\n\r\n            var pagination = {\r\n                renderPages: renderPages,\r\n                pages: pages,\r\n                pagination: {\r\n                    totalPages: self.data.total,\r\n                    currentPage: self.data.page\r\n                }\r\n            };\r\n\r\n            // Resolve pager template\r\n            return $.fasttmpl(options.template.pager, pagination);\r\n        },\r\n\r\n        /**\r\n         * Template method to check if row buttons must be displayed when the row is selected\r\n         * @returns {}\r\n         */\r\n        _canShowRowButtons: function () {\r\n            var actions = this.options.actions;\r\n\r\n            if (this.isOfflineForm) {\r\n                return false;\r\n            } else {\r\n                return actions[\"edit\"] || actions[\"details\"] || actions[\"remove\"] || this.options.subType == \"adhocGrid\";\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Show the row buttons\r\n         * @returns {}\r\n         */\r\n        _showRowButtons: function () {\r\n            var self = this;\r\n            var doc = window.document;\r\n            var element = self.element;\r\n\r\n            // Add selected style to row\r\n            var tr = element.find(\"[data-bizagi-component=rows] tr[data-key=\" + self.selectedRow + \"]\");\r\n            tr.addClass(\"ui-bizagi-state-selected\");\r\n        },\r\n\r\n        /**\r\n         * Hide the row buttons\r\n         * @returns {}\r\n         */\r\n        _hideRowButtons: function () {\r\n            var self = this;\r\n\r\n            // Call base\r\n            $.ui.bizagi_grid.prototype.onRowUnselected.apply(self, arguments);\r\n\r\n            var tr = self._getComponent(\"rows\").find(\"tr[data-key=\" + self.selectedRow + \"]\");\r\n            tr.removeClass(\"ui-bizagi-state-selected\");\r\n\r\n            // Hide floating buttons for the row\r\n            if (!self.isOfflineForm) {\r\n                var floatingButtons = self._getComponent(\"rowButtons\");\r\n                floatingButtons.hide();\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Return the new created ids\r\n         * @param {} rows\r\n         * @returns {}\r\n         */\r\n        getNewRowKeys: function (rows) {\r\n            var self = this;\r\n\r\n            rows = rows || self._getComponent(\"rows\").find(\"[data-new-row=true]\");\r\n\r\n            return $.map(rows, function (row, i) {\r\n                return $(row).data(\"business-key\");\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Process an action in order to do something with the grid\r\n         * @param {} action\r\n         * @returns {}\r\n         */\r\n        processAction: function (action) {\r\n            var self = this;\r\n\r\n            // Call base\r\n            $.ui.bizagi_grid.prototype.processAction.apply(self, arguments);\r\n\r\n            if (action === \"save\") {\r\n                self.onSaveAddedRows();\r\n            }\r\n            if (action === \"cancel\") {\r\n                self.onCancelEdition();\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Check if row its new\r\n         * @param {} businessKey\r\n         * @returns {}\r\n         */\r\n        isNewRecord: function (businessKey) {\r\n            var self = this;\r\n            var row = self._getComponent(\"rows\");\r\n\r\n            if (row) {\r\n                businessKey = row.find(\"[data-business-key='\" + businessKey + \"']\");\r\n                if ($(businessKey).data(\"new-row\")) {\r\n                    return true;\r\n                }\r\n            }\r\n            return false;\r\n        },\r\n\r\n        /**\r\n         * Add inline row\r\n         * @returns {}\r\n         */\r\n        addInlineRow: function () {\r\n            var self = this;\r\n\r\n            // Draw the new row\r\n            self._triggerHandler(\"beforeInlineAdd\");\r\n            var html = self.drawRow(self.createAddRowData(), true);\r\n            var newRow = $(html);\r\n\r\n            // Execute the postrender\r\n            self.postRenderRow(newRow);\r\n\r\n            // Append to rows component\r\n            self._getComponent(\"rows\").append(newRow);\r\n\r\n            var buttons = self._getComponent(\"buttons\");\r\n\r\n            if (self.isOfflineForm) {\r\n                buttons.find(\"[data-action=save]\").removeClass(\"bz-tablet-grid__buttons--hidden\");\r\n                buttons.find(\"[data-action=cancel]\").removeClass(\"bz-tablet-grid__buttons--hidden\");\r\n            } else {\r\n                buttons.find(\"[data-action=save]\").css(\"display\", \"inline-block\");\r\n                buttons.find(\"[data-action=cancel]\").css(\"display\", \"inline-block\");\r\n            }\r\n\r\n            // Show table component if there are no rows\r\n            if (self.data.rows.length === 0) {\r\n                self._getComponent(\"table\").show();\r\n                self._getComponent(\"emptyTable\").hide();\r\n            }\r\n\r\n            self._triggerHandler(\"afterInlineAdd\");\r\n        },\r\n\r\n        /**\r\n         * Creates a dummy data for the new row\r\n         * @returns {}\r\n         */\r\n        createAddRowData: function () {\r\n            var self = this;\r\n            var options = self.options;\r\n            var row = [];\r\n\r\n            $.each(options.columns, function (i) {\r\n\r\n                if (i === self.columnKeyIndex) {\r\n                    // Add random key so we can identify them later\r\n                    var key = Math.ceil(Math.random() * 100000);\r\n                    row.push(key);\r\n                } else {\r\n                    // Add null value\r\n                    row.push(null);\r\n                }\r\n            });\r\n\r\n            return row;\r\n        },\r\n\r\n        /**\r\n         * Executes the on add row handler\r\n         * @returns {}\r\n         */\r\n        onAddRow: function () {\r\n            var self = this;\r\n\r\n            // Allow add\r\n            if (self.options.actions.add) {\r\n                if (self.options.actions.inlineAdd) {\r\n                    return self.addInlineRow();\r\n                } else {\r\n                    // Open dialog with addform\r\n                    return self._triggerHandler(\"addRow\");\r\n                }\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Executes when the user presses the cancel button, after inline add edition\r\n         * @returns {}\r\n         */\r\n        onCancelEdition: function () {\r\n            var self = this;\r\n\r\n            // Remove zero key rows\r\n            var rows = self._getComponent(\"rows\").find(\"[data-new-row=true]\");\r\n            var savedRows = self._getComponent(\"rows\").find(\"[data-new-row=false]\");\r\n            rows.detach();\r\n\r\n            // Hide buttons\r\n            var buttons = self._getComponent(\"buttons\");\r\n\r\n            if (self.isOfflineForm) {\r\n                buttons.find(\"[data-action=save]\").addClass(\"bz-tablet-grid__buttons--hidden\");\r\n                buttons.find(\"[data-action=cancel]\").addClass(\"bz-tablet-grid__buttons--hidden\");\r\n            } else {\r\n                buttons.find(\"[data-action=save]\").hide();\r\n                buttons.find(\"[data-action=cancel]\").hide();\r\n            }\r\n\r\n            // Show table component if there are no rows\r\n            if (savedRows.length === 0) {\r\n                self._getComponent(\"table\").hide();\r\n                self._getComponent(\"emptyTable\").show();\r\n            }\r\n\r\n            return self._triggerHandler(\"cancelEdition\", {keys: self.getNewRowKeys(rows)});\r\n        },\r\n\r\n        /**\r\n         * Executes when the user presses the save button, after inline add edition\r\n         * @returns {}\r\n         */\r\n        onSaveAddedRows: function () {\r\n            var self = this;\r\n\r\n            // Retrieve key of added rows\r\n            var newRowKeys = self.getNewRowKeys();\r\n            var buttons = self._getComponent(\"buttons\");\r\n\r\n            // Hide buttons         \r\n            if (newRowKeys.length >= 1 && self.isValid()) {\r\n\r\n                var row = self._getComponent(\"rows\");\r\n\r\n                if (self.isOfflineForm) {\r\n                    $.each(newRowKeys, function (key, value) {\r\n                        var businessKey = row.find(\"[data-business-key='\" + value + \"']\");\r\n                        $(businessKey).attr(\"data-new-row\", 'false');\r\n                    });\r\n\r\n                    buttons.find(\"[data-action=save]\").addClass(\"bz-tablet-grid__buttons--hidden\");\r\n                    buttons.find(\"[data-action=cancel]\").addClass(\"bz-tablet-grid__buttons--hidden\");\r\n\r\n                    self._triggerHandler(\"saveAddedRows\", {keys: newRowKeys});\r\n\r\n                    return true;\r\n                } else {\r\n                    buttons.find(\"[data-action=save]\").hide();\r\n                    buttons.find(\"[data-action=cancel]\").hide();\r\n\r\n                    self._triggerHandler(\"saveAddedRows\", {keys: newRowKeys});\r\n\r\n                    return self._triggerHandler(\"removeNewRecords\", {keys: newRowKeys});\r\n                }\r\n\r\n            } else {\r\n                return true;\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Add new column actions\r\n         * @private\r\n         */\r\n        _addColumnActions: function () {\r\n            var self = this;\r\n            var items = [];\r\n\r\n            if (self.options.actions.details) {\r\n                items.push({\r\n                    name: bizagi.localization.getResource(\"render-collection-navigator-details-form\"),\r\n                    fn: function (e) {\r\n                        var businessKey = $(e).parents(\"[data-bizagi-component=cells]\").attr(\"data-business-key\");\r\n\r\n                        if (self.options.actions.details) {\r\n                            self.processAction(\"details\", {key: businessKey});\r\n                        } else {\r\n                            self.processAction(\"more\", {key: businessKey});\r\n                        }\r\n                    }\r\n                });\r\n            }\r\n\r\n            if (self.options.actions.edit) {\r\n                items.push({\r\n                    name: bizagi.localization.getResource(\"render-grid-edit-label\"),\r\n                    fn: function (e) {\r\n                        var businessKey = $(e).parents(\"[data-bizagi-component=cells]\").attr(\"data-business-key\");\r\n\r\n                        self.processAction(\"edit\", {key: businessKey});\r\n                    }\r\n                });\r\n            }\r\n\r\n            if (self.options.actions.remove) {\r\n                items.push({\r\n                    name: bizagi.localization.getResource(\"render-ecm-confirm-bt-delete\"),\r\n                    fn: function (e) {\r\n                        var businessKey = $(e).parents(\"[data-bizagi-component=cells]\").attr(\"data-business-key\");\r\n\r\n                        self.processAction(\"remove\", {key: businessKey});\r\n                    }\r\n                });\r\n            }\r\n\r\n            self._getComponent(\"rows\").find(\"[data-action=more]\").overflowMenu({items: items});\r\n        },\r\n\r\n        /**\r\n         * Executes when the user presses the cancel button, after inline add edition\r\n         * @param key\r\n         * @param businessKey\r\n         */\r\n        onRemoveNewRow: function (businessKey) {\r\n            var self = this;\r\n            var buttons = self._getComponent(\"buttons\");\r\n\r\n            // Remove zero key rows\r\n            var cancelNewRow = self._getComponent(\"rows\").find(\"tr[data-business-key=\" + businessKey + \"]\");\r\n            var savedRows = self._getComponent(\"rows\").find(\"[data-new-row=false]\");\r\n            var newRows = self._getComponent(\"rows\").find(\"[data-new-row=true]\");\r\n\r\n            cancelNewRow.detach();\r\n\r\n            // Hide buttons\r\n            if(newRows.length === 1) {\r\n                buttons.find(\"[data-action=save]\").addClass(\"bz-tablet-grid__buttons--hidden\");\r\n                buttons.find(\"[data-action=cancel]\").addClass(\"bz-tablet-grid__buttons--hidden\");\r\n            }\r\n\r\n            // Show table component if there are no rows\r\n            if (savedRows.length === 0) {\r\n                self._getComponent(\"table\").hide();\r\n                self._getComponent(\"emptyTable\").show();\r\n            }\r\n\r\n            return self._triggerHandler(\"cancelEdition\", {keys: self.getNewRowKeys(cancelNewRow)});\r\n        },\r\n\r\n        /**\r\n         * Replaces a matched element in the container for the specified \"replace\" element\r\n         * @param html\r\n         * @param element\r\n         * @param replace\r\n         * @returns {*}\r\n         * @private\r\n         */\r\n        _replaceElement: function (html, element, replace) {\r\n            return html.replace(new RegExp(\"{{element \" + element + \"}}\", 'g'), replace);\r\n        }\r\n\r\n    });\r\n\r\n})(jQuery);\r\n","(function ($) {\r\n    var nextId = 0;\r\n    var _elements = [];\r\n\r\n    $.fn.overflowMenu = function (options) {\r\n\r\n        return this.each(function () {\r\n            var self = this;\r\n\r\n            self.id = nextId++;\r\n            options = options || {};\r\n\r\n            var items = options.items || [];\r\n            var target = null;\r\n\r\n            self.menu = document.createElement('ul');\r\n            self.menu.setAttribute('style', \"position: fixed;\");\r\n\r\n            self.menu.className = 'bz-overflow-menu';\r\n            self.menu.setAttribute('data-overflowmenu', self.id);\r\n\r\n            // Create <li>'s for each menu item\r\n            items.forEach(function (item, index) {\r\n                var li = document.createElement('li');\r\n\r\n                if (!('name' in item)) {\r\n                    // Insert a divider\r\n                    li.className = 'bz-overflow-menu__divider';\r\n                } else {\r\n                    li.className = 'bz-overflow-menu__item bz-overflow-menu__item--comfortable';\r\n                    li.textContent = item.name;\r\n                    li.setAttribute('data-overflowmenuitem', index);\r\n                    li.setAttribute('tabindex', 0);\r\n                    li.addEventListener('touchend', select.bind(this, li));\r\n                }\r\n                self.menu.appendChild(li);\r\n            });\r\n\r\n            function show(evt) {\r\n                target = evt.delegateTarget;\r\n\r\n                var x = evt.originalEvent.clientX;\r\n                var y = evt.originalEvent.clientY;\r\n\r\n                // Add root element to the <body>\r\n                setTimeout(function () {\r\n                    document.body.appendChild(self.menu);\r\n\r\n                    if (client.W() - x < self.menu.offsetWidth) {\r\n                        var xx = x - self.menu.offsetWidth;\r\n                    } else {\r\n                        var xx = x;\r\n                    }\r\n                    if (client.H() - y < self.menu.offsetHeight) {\r\n                        var yy = y - self.menu.offsetHeight;\r\n                    } else {\r\n                        var yy = y;\r\n                    }\r\n                    self.menu.style.left = xx + 'px';\r\n                    self.menu.style.top = yy + 'px';\r\n\r\n                    // Give overflow menu focus\r\n                    $(self.menu).focus();\r\n\r\n                    _elements.push(self.menu);\r\n                }, 100);\r\n            }\r\n\r\n            // Hides overflow menu\r\n            function hide() {\r\n                $(self.menu).remove();\r\n            }\r\n\r\n            // Selects the given item and calls its handler\r\n            function select(item, e) {\r\n                var itemId = item.getAttribute('data-overflowmenuitem');\r\n                if (items[itemId]) {\r\n                    // Call item handler with target element as parameter\r\n                    items[itemId].fn(target);\r\n                }\r\n                hide();\r\n                e.preventDefault();\r\n                e.stopPropagation();\r\n            }\r\n\r\n            // Listen click event to show menu\r\n            $(self).bind('click', function (e) {\r\n                var zIndex = getZIndex($(e.currentTarget));\r\n                $(self.menu).css(\"z-index\", zIndex);\r\n\r\n                show(e);\r\n            });\r\n        });\r\n\r\n    };\r\n\r\n    var client = {\r\n        W: function () {\r\n            return document.documentElement.clientWidth\r\n        },\r\n        H: function () {\r\n            return document.documentElement.clientHeight\r\n        }\r\n    };\r\n\r\n    var removeMenu = function () {\r\n\r\n        if (_elements && _elements.length > 0) {\r\n            _elements.forEach(function (el) {\r\n                $(el).remove();\r\n            });\r\n        }\r\n\r\n        _elements = [];\r\n    };\r\n\r\n\r\n    // Calculate the highest (top-most) zIndex in the document (minimum value returned: 2).\r\n    var getZIndex = function ($context) {\r\n        if ($context.get(0) === $('body').get(0)) return 2;\r\n\r\n        var $parent = $($context).parent();\r\n        var zIndex = parseFloat($parent.css('z-index'), -1);\r\n\r\n        if (zIndex > -1) return zIndex;\r\n\r\n        return getZIndex($parent);\r\n    };\r\n\r\n    document.addEventListener('touchstart', function (e) {\r\n        if ( e.target && !(/bz-overflow-menu__item/i.test(e.target.className)) ){\r\n            removeMenu();\r\n        }\r\n    });\r\n\r\n})(jQuery);","/*! jQuery UI - v1.10.2 - 2013-03-14\r\n* http://jqueryui.com\r\n* Includes: jquery.ui.core.js, jquery.ui.widget.js, jquery.ui.mouse.js, jquery.ui.draggable.js, jquery.ui.droppable.js, jquery.ui.resizable.js, jquery.ui.selectable.js, jquery.ui.sortable.js, jquery.ui.effect.js, jquery.ui.accordion.js, jquery.ui.autocomplete.js, jquery.ui.button.js, jquery.ui.datepicker.js, jquery.ui.dialog.js, jquery.ui.effect-blind.js, jquery.ui.effect-bounce.js, jquery.ui.effect-clip.js, jquery.ui.effect-drop.js, jquery.ui.effect-explode.js, jquery.ui.effect-fade.js, jquery.ui.effect-fold.js, jquery.ui.effect-highlight.js, jquery.ui.effect-pulsate.js, jquery.ui.effect-scale.js, jquery.ui.effect-shake.js, jquery.ui.effect-slide.js, jquery.ui.effect-transfer.js, jquery.ui.menu.js, jquery.ui.position.js, jquery.ui.progressbar.js, jquery.ui.slider.js, jquery.ui.spinner.js, jquery.ui.tabs.js, jquery.ui.tooltip.js\r\n* Copyright 2013 jQuery Foundation and other contributors; Licensed MIT */\r\n(function( $, undefined ) {\r\n\r\nvar uuid = 0,\r\n\truniqueId = /^ui-id-\\d+$/;\r\n\r\n// $.ui might exist from components with no dependencies, e.g., $.ui.position\r\n$.ui = $.ui || {};\r\n\r\n$.extend( $.ui, {\r\n\tversion: \"1.10.2\",\r\n\r\n\tkeyCode: {\r\n\t\tBACKSPACE: 8,\r\n\t\tCOMMA: 188,\r\n\t\tDELETE: 46,\r\n\t\tDOWN: 40,\r\n\t\tEND: 35,\r\n\t\tENTER: 13,\r\n\t\tESCAPE: 27,\r\n\t\tHOME: 36,\r\n\t\tLEFT: 37,\r\n\t\tNUMPAD_ADD: 107,\r\n\t\tNUMPAD_DECIMAL: 110,\r\n\t\tNUMPAD_DIVIDE: 111,\r\n\t\tNUMPAD_ENTER: 108,\r\n\t\tNUMPAD_MULTIPLY: 106,\r\n\t\tNUMPAD_SUBTRACT: 109,\r\n\t\tPAGE_DOWN: 34,\r\n\t\tPAGE_UP: 33,\r\n\t\tPERIOD: 190,\r\n\t\tRIGHT: 39,\r\n\t\tSPACE: 32,\r\n\t\tTAB: 9,\r\n\t\tUP: 38\r\n\t}\r\n});\r\n\r\n// plugins\r\n$.fn.extend({\r\n\tfocus: (function( orig ) {\r\n\t\treturn function( delay, fn ) {\r\n\t\t\treturn typeof delay === \"number\" ?\r\n\t\t\t\tthis.each(function() {\r\n\t\t\t\t\tvar elem = this;\r\n\t\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\t\t$( elem ).focus();\r\n\t\t\t\t\t\tif ( fn ) {\r\n\t\t\t\t\t\t\tfn.call( elem );\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}, delay );\r\n\t\t\t\t}) :\r\n\t\t\t\torig.apply( this, arguments );\r\n\t\t};\r\n\t})( $.fn.focus ),\r\n\r\n\tscrollParent: function() {\r\n\t\tvar scrollParent;\r\n\t\tif (($.ui.ie && (/(static|relative)/).test(this.css(\"position\"))) || (/absolute/).test(this.css(\"position\"))) {\r\n\t\t\tscrollParent = this.parents().filter(function() {\r\n\t\t\t\treturn (/(relative|absolute|fixed)/).test($.css(this,\"position\")) && (/(auto|scroll)/).test($.css(this,\"overflow\")+$.css(this,\"overflow-y\")+$.css(this,\"overflow-x\"));\r\n\t\t\t}).eq(0);\r\n\t\t} else {\r\n\t\t\tscrollParent = this.parents().filter(function() {\r\n\t\t\t\treturn (/(auto|scroll)/).test($.css(this,\"overflow\")+$.css(this,\"overflow-y\")+$.css(this,\"overflow-x\"));\r\n\t\t\t}).eq(0);\r\n\t\t}\r\n\r\n\t\treturn (/fixed/).test(this.css(\"position\")) || !scrollParent.length ? $(document) : scrollParent;\r\n\t},\r\n\r\n\tzIndex: function( zIndex ) {\r\n\t\tif ( zIndex !== undefined ) {\r\n\t\t\treturn this.css( \"zIndex\", zIndex );\r\n\t\t}\r\n\r\n\t\tif ( this.length ) {\r\n\t\t\tvar elem = $( this[ 0 ] ), position, value;\r\n\t\t\twhile ( elem.length && elem[ 0 ] !== document ) {\r\n\t\t\t\t// Ignore z-index if position is set to a value where z-index is ignored by the browser\r\n\t\t\t\t// This makes behavior of this function consistent across browsers\r\n\t\t\t\t// WebKit always returns auto if the element is positioned\r\n\t\t\t\tposition = elem.css( \"position\" );\r\n\t\t\t\tif ( position === \"absolute\" || position === \"relative\" || position === \"fixed\" ) {\r\n\t\t\t\t\t// IE returns 0 when zIndex is not specified\r\n\t\t\t\t\t// other browsers return a string\r\n\t\t\t\t\t// we ignore the case of nested elements with an explicit value of 0\r\n\t\t\t\t\t// <div style=\"z-index: -10;\"><div style=\"z-index: 0;\"></div></div>\r\n\t\t\t\t\tvalue = parseInt( elem.css( \"zIndex\" ), 10 );\r\n\t\t\t\t\tif ( !isNaN( value ) && value !== 0 ) {\r\n\t\t\t\t\t\treturn value;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\telem = elem.parent();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn 0;\r\n\t},\r\n\r\n\tuniqueId: function() {\r\n\t\treturn this.each(function() {\r\n\t\t\tif ( !this.id ) {\r\n\t\t\t\tthis.id = \"ui-id-\" + (++uuid);\r\n\t\t\t}\r\n\t\t});\r\n\t},\r\n\r\n\tremoveUniqueId: function() {\r\n\t\treturn this.each(function() {\r\n\t\t\tif ( runiqueId.test( this.id ) ) {\r\n\t\t\t\t$( this ).removeAttr( \"id\" );\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n});\r\n\r\n// selectors\r\nfunction focusable( element, isTabIndexNotNaN ) {\r\n\tvar map, mapName, img,\r\n\t\tnodeName = element.nodeName.toLowerCase();\r\n\tif ( \"area\" === nodeName ) {\r\n\t\tmap = element.parentNode;\r\n\t\tmapName = map.name;\r\n\t\tif ( !element.href || !mapName || map.nodeName.toLowerCase() !== \"map\" ) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\timg = $( \"img[usemap=#\" + mapName + \"]\" )[0];\r\n\t\treturn !!img && visible( img );\r\n\t}\r\n\treturn ( /input|select|textarea|button|object/.test( nodeName ) ?\r\n\t\t!element.disabled :\r\n\t\t\"a\" === nodeName ?\r\n\t\t\telement.href || isTabIndexNotNaN :\r\n\t\t\tisTabIndexNotNaN) &&\r\n\t\t// the element and all of its ancestors must be visible\r\n\t\tvisible( element );\r\n}\r\n\r\nfunction visible( element ) {\r\n\treturn $.expr.filters.visible( element ) &&\r\n\t\t!$( element ).parents().addBack().filter(function() {\r\n\t\t\treturn $.css( this, \"visibility\" ) === \"hidden\";\r\n\t\t}).length;\r\n}\r\n\r\n$.extend( $.expr[ \":\" ], {\r\n\tdata: $.expr.createPseudo ?\r\n\t\t$.expr.createPseudo(function( dataName ) {\r\n\t\t\treturn function( elem ) {\r\n\t\t\t\treturn !!$.data( elem, dataName );\r\n\t\t\t};\r\n\t\t}) :\r\n\t\t// support: jQuery <1.8\r\n\t\tfunction( elem, i, match ) {\r\n\t\t\treturn !!$.data( elem, match[ 3 ] );\r\n\t\t},\r\n\r\n\tfocusable: function( element ) {\r\n\t\treturn focusable( element, !isNaN( $.attr( element, \"tabindex\" ) ) );\r\n\t},\r\n\r\n\ttabbable: function( element ) {\r\n\t\tvar tabIndex = $.attr( element, \"tabindex\" ),\r\n\t\t\tisTabIndexNaN = isNaN( tabIndex );\r\n\t\treturn ( isTabIndexNaN || tabIndex >= 0 ) && focusable( element, !isTabIndexNaN );\r\n\t}\r\n});\r\n\r\n// support: jQuery <1.8\r\nif ( !$( \"<a>\" ).outerWidth( 1 ).jquery ) {\r\n\t$.each( [ \"Width\", \"Height\" ], function( i, name ) {\r\n\t\tvar side = name === \"Width\" ? [ \"Left\", \"Right\" ] : [ \"Top\", \"Bottom\" ],\r\n\t\t\ttype = name.toLowerCase(),\r\n\t\t\torig = {\r\n\t\t\t\tinnerWidth: $.fn.innerWidth,\r\n\t\t\t\tinnerHeight: $.fn.innerHeight,\r\n\t\t\t\touterWidth: $.fn.outerWidth,\r\n\t\t\t\touterHeight: $.fn.outerHeight\r\n\t\t\t};\r\n\r\n\t\tfunction reduce( elem, size, border, margin ) {\r\n\t\t\t$.each( side, function() {\r\n\t\t\t\tsize -= parseFloat( $.css( elem, \"padding\" + this ) ) || 0;\r\n\t\t\t\tif ( border ) {\r\n\t\t\t\t\tsize -= parseFloat( $.css( elem, \"border\" + this + \"Width\" ) ) || 0;\r\n\t\t\t\t}\r\n\t\t\t\tif ( margin ) {\r\n\t\t\t\t\tsize -= parseFloat( $.css( elem, \"margin\" + this ) ) || 0;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\treturn size;\r\n\t\t}\r\n\r\n\t\t$.fn[ \"inner\" + name ] = function( size ) {\r\n\t\t\tif ( size === undefined ) {\r\n\t\t\t\treturn orig[ \"inner\" + name ].call( this );\r\n\t\t\t}\r\n\r\n\t\t\treturn this.each(function() {\r\n\t\t\t\t$( this ).css( type, reduce( this, size ) + \"px\" );\r\n\t\t\t});\r\n\t\t};\r\n\r\n\t\t$.fn[ \"outer\" + name] = function( size, margin ) {\r\n\t\t\tif ( typeof size !== \"number\" ) {\r\n\t\t\t\treturn orig[ \"outer\" + name ].call( this, size );\r\n\t\t\t}\r\n\r\n\t\t\treturn this.each(function() {\r\n\t\t\t\t$( this).css( type, reduce( this, size, true, margin ) + \"px\" );\r\n\t\t\t});\r\n\t\t};\r\n\t});\r\n}\r\n\r\n// support: jQuery <1.8\r\nif ( !$.fn.addBack ) {\r\n\t$.fn.addBack = function( selector ) {\r\n\t\treturn this.add( selector == null ?\r\n\t\t\tthis.prevObject : this.prevObject.filter( selector )\r\n\t\t);\r\n\t};\r\n}\r\n\r\n// support: jQuery 1.6.1, 1.6.2 (http://bugs.jquery.com/ticket/9413)\r\nif ( $( \"<a>\" ).data( \"a-b\", \"a\" ).removeData( \"a-b\" ).data( \"a-b\" ) ) {\r\n\t$.fn.removeData = (function( removeData ) {\r\n\t\treturn function( key ) {\r\n\t\t\tif ( arguments.length ) {\r\n\t\t\t\treturn removeData.call( this, $.camelCase( key ) );\r\n\t\t\t} else {\r\n\t\t\t\treturn removeData.call( this );\r\n\t\t\t}\r\n\t\t};\r\n\t})( $.fn.removeData );\r\n}\r\n\r\n\r\n\r\n\r\n\r\n// deprecated\r\n$.ui.ie = !!/msie [\\w.]+/.exec( navigator.userAgent.toLowerCase() );\r\n\r\n$.support.selectstart = \"onselectstart\" in document.createElement( \"div\" );\r\n$.fn.extend({\r\n\tdisableSelection: function() {\r\n\t\treturn this.bind( ( $.support.selectstart ? \"selectstart\" : \"mousedown\" ) +\r\n\t\t\t\".ui-disableSelection\", function( event ) {\r\n\t\t\t\tevent.preventDefault();\r\n\t\t\t});\r\n\t},\r\n\r\n\tenableSelection: function() {\r\n\t\treturn this.unbind( \".ui-disableSelection\" );\r\n\t}\r\n});\r\n\r\n$.extend( $.ui, {\r\n\t// $.ui.plugin is deprecated.  Use the proxy pattern instead.\r\n\tplugin: {\r\n\t\tadd: function( module, option, set ) {\r\n\t\t\tvar i,\r\n\t\t\t\tproto = $.ui[ module ].prototype;\r\n\t\t\tfor ( i in set ) {\r\n\t\t\t\tproto.plugins[ i ] = proto.plugins[ i ] || [];\r\n\t\t\t\tproto.plugins[ i ].push( [ option, set[ i ] ] );\r\n\t\t\t}\r\n\t\t},\r\n\t\tcall: function( instance, name, args ) {\r\n\t\t\tvar i,\r\n\t\t\t\tset = instance.plugins[ name ];\r\n\t\t\tif ( !set || !instance.element[ 0 ].parentNode || instance.element[ 0 ].parentNode.nodeType === 11 ) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tfor ( i = 0; i < set.length; i++ ) {\r\n\t\t\t\tif ( instance.options[ set[ i ][ 0 ] ] ) {\r\n\t\t\t\t\tset[ i ][ 1 ].apply( instance.element, args );\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t// only used by resizable\r\n\thasScroll: function( el, a ) {\r\n\r\n\t\t//If overflow is hidden, the element might have extra content, but the user wants to hide it\r\n\t\tif ( $( el ).css( \"overflow\" ) === \"hidden\") {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tvar scroll = ( a && a === \"left\" ) ? \"scrollLeft\" : \"scrollTop\",\r\n\t\t\thas = false;\r\n\r\n\t\tif ( el[ scroll ] > 0 ) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\t// TODO: determine which cases actually cause this to happen\r\n\t\t// if the element doesn't have the scroll set, see if it's possible to\r\n\t\t// set the scroll\r\n\t\tel[ scroll ] = 1;\r\n\t\thas = ( el[ scroll ] > 0 );\r\n\t\tel[ scroll ] = 0;\r\n\t\treturn has;\r\n\t}\r\n});\r\n\r\n})( jQuery );\r\n\r\n(function( $, undefined ) {\r\n\r\nvar uuid = 0,\r\n\tslice = Array.prototype.slice,\r\n\t_cleanData = $.cleanData;\r\n$.cleanData = function( elems ) {\r\n\tfor ( var i = 0, elem; (elem = elems[i]) != null; i++ ) {\r\n\t\ttry {\r\n\t\t\t$( elem ).triggerHandler( \"remove\" );\r\n\t\t// http://bugs.jquery.com/ticket/8235\r\n\t\t} catch( e ) {}\r\n\t}\r\n\t_cleanData( elems );\r\n};\r\n\r\n$.widget = function( name, base, prototype ) {\r\n\tvar fullName, existingConstructor, constructor, basePrototype,\r\n\t\t// proxiedPrototype allows the provided prototype to remain unmodified\r\n\t\t// so that it can be used as a mixin for multiple widgets (#8876)\r\n\t\tproxiedPrototype = {},\r\n\t\tnamespace = name.split( \".\" )[ 0 ];\r\n\r\n\tname = name.split( \".\" )[ 1 ];\r\n\tfullName = namespace + \"-\" + name;\r\n\r\n\tif ( !prototype ) {\r\n\t\tprototype = base;\r\n\t\tbase = $.Widget;\r\n\t}\r\n\r\n\t// create selector for plugin\r\n\t$.expr[ \":\" ][ fullName.toLowerCase() ] = function( elem ) {\r\n\t\treturn !!$.data( elem, fullName );\r\n\t};\r\n\r\n\t$[ namespace ] = $[ namespace ] || {};\r\n\texistingConstructor = $[ namespace ][ name ];\r\n\tconstructor = $[ namespace ][ name ] = function( options, element ) {\r\n\t\t// allow instantiation without \"new\" keyword\r\n\t\tif ( !this._createWidget ) {\r\n\t\t\treturn new constructor( options, element );\r\n\t\t}\r\n\r\n\t\t// allow instantiation without initializing for simple inheritance\r\n\t\t// must use \"new\" keyword (the code above always passes args)\r\n\t\tif ( arguments.length ) {\r\n\t\t\tthis._createWidget( options, element );\r\n\t\t}\r\n\t};\r\n\t// extend with the existing constructor to carry over any static properties\r\n\t$.extend( constructor, existingConstructor, {\r\n\t\tversion: prototype.version,\r\n\t\t// copy the object used to create the prototype in case we need to\r\n\t\t// redefine the widget later\r\n\t\t_proto: $.extend( {}, prototype ),\r\n\t\t// track widgets that inherit from this widget in case this widget is\r\n\t\t// redefined after a widget inherits from it\r\n\t\t_childConstructors: []\r\n\t});\r\n\r\n\tbasePrototype = new base();\r\n\t// we need to make the options hash a property directly on the new instance\r\n\t// otherwise we'll modify the options hash on the prototype that we're\r\n\t// inheriting from\r\n\tbasePrototype.options = $.widget.extend( {}, basePrototype.options );\r\n\t$.each( prototype, function( prop, value ) {\r\n\t\tif ( !$.isFunction( value ) ) {\r\n\t\t\tproxiedPrototype[ prop ] = value;\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tproxiedPrototype[ prop ] = (function() {\r\n\t\t\tvar _super = function() {\r\n\t\t\t\t\treturn base.prototype[ prop ].apply( this, arguments );\r\n\t\t\t\t},\r\n\t\t\t\t_superApply = function( args ) {\r\n\t\t\t\t\treturn base.prototype[ prop ].apply( this, args );\r\n\t\t\t\t};\r\n\t\t\treturn function() {\r\n\t\t\t\tvar __super = this._super,\r\n\t\t\t\t\t__superApply = this._superApply,\r\n\t\t\t\t\treturnValue;\r\n\r\n\t\t\t\tthis._super = _super;\r\n\t\t\t\tthis._superApply = _superApply;\r\n\r\n\t\t\t\treturnValue = value.apply( this, arguments );\r\n\r\n\t\t\t\tthis._super = __super;\r\n\t\t\t\tthis._superApply = __superApply;\r\n\r\n\t\t\t\treturn returnValue;\r\n\t\t\t};\r\n\t\t})();\r\n\t});\r\n\tconstructor.prototype = $.widget.extend( basePrototype, {\r\n\t\t// TODO: remove support for widgetEventPrefix\r\n\t\t// always use the name + a colon as the prefix, e.g., draggable:start\r\n\t\t// don't prefix for widgets that aren't DOM-based\r\n\t\twidgetEventPrefix: existingConstructor ? basePrototype.widgetEventPrefix : name\r\n\t}, proxiedPrototype, {\r\n\t\tconstructor: constructor,\r\n\t\tnamespace: namespace,\r\n\t\twidgetName: name,\r\n\t\twidgetFullName: fullName\r\n\t});\r\n\r\n\t// If this widget is being redefined then we need to find all widgets that\r\n\t// are inheriting from it and redefine all of them so that they inherit from\r\n\t// the new version of this widget. We're essentially trying to replace one\r\n\t// level in the prototype chain.\r\n\tif ( existingConstructor ) {\r\n\t\t$.each( existingConstructor._childConstructors, function( i, child ) {\r\n\t\t\tvar childPrototype = child.prototype;\r\n\r\n\t\t\t// redefine the child widget using the same prototype that was\r\n\t\t\t// originally used, but inherit from the new version of the base\r\n\t\t\t$.widget( childPrototype.namespace + \".\" + childPrototype.widgetName, constructor, child._proto );\r\n\t\t});\r\n\t\t// remove the list of existing child constructors from the old constructor\r\n\t\t// so the old child constructors can be garbage collected\r\n\t\tdelete existingConstructor._childConstructors;\r\n\t} else {\r\n\t\tbase._childConstructors.push( constructor );\r\n\t}\r\n\r\n\t$.widget.bridge( name, constructor );\r\n};\r\n\r\n$.widget.extend = function( target ) {\r\n\tvar input = slice.call( arguments, 1 ),\r\n\t\tinputIndex = 0,\r\n\t\tinputLength = input.length,\r\n\t\tkey,\r\n\t\tvalue;\r\n\tfor ( ; inputIndex < inputLength; inputIndex++ ) {\r\n\t\tfor ( key in input[ inputIndex ] ) {\r\n\t\t\tvalue = input[ inputIndex ][ key ];\r\n\t\t\tif ( input[ inputIndex ].hasOwnProperty( key ) && value !== undefined ) {\r\n\t\t\t\t// Clone objects\r\n\t\t\t\tif ( $.isPlainObject( value ) ) {\r\n\t\t\t\t\ttarget[ key ] = $.isPlainObject( target[ key ] ) ?\r\n\t\t\t\t\t\t$.widget.extend( {}, target[ key ], value ) :\r\n\t\t\t\t\t\t// Don't extend strings, arrays, etc. with objects\r\n\t\t\t\t\t\t$.widget.extend( {}, value );\r\n\t\t\t\t// Copy everything else by reference\r\n\t\t\t\t} else {\r\n\t\t\t\t\ttarget[ key ] = value;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\treturn target;\r\n};\r\n\r\n$.widget.bridge = function( name, object ) {\r\n\tvar fullName = object.prototype.widgetFullName || name;\r\n\t$.fn[ name ] = function( options ) {\r\n\t\tvar isMethodCall = typeof options === \"string\",\r\n\t\t\targs = slice.call( arguments, 1 ),\r\n\t\t\treturnValue = this;\r\n\r\n\t\t// allow multiple hashes to be passed on init\r\n\t\toptions = !isMethodCall && args.length ?\r\n\t\t\t$.widget.extend.apply( null, [ options ].concat(args) ) :\r\n\t\t\toptions;\r\n\r\n\t\tif ( isMethodCall ) {\r\n\t\t\tthis.each(function() {\r\n\t\t\t\tvar methodValue,\r\n\t\t\t\t\tinstance = $.data( this, fullName );\r\n\t\t\t\tif ( !instance ) {\r\n\t\t\t\t\treturn $.error( \"cannot call methods on \" + name + \" prior to initialization; \" +\r\n\t\t\t\t\t\t\"attempted to call method '\" + options + \"'\" );\r\n\t\t\t\t}\r\n\t\t\t\tif ( !$.isFunction( instance[options] ) || options.charAt( 0 ) === \"_\" ) {\r\n\t\t\t\t\treturn $.error( \"no such method '\" + options + \"' for \" + name + \" widget instance\" );\r\n\t\t\t\t}\r\n\t\t\t\tmethodValue = instance[ options ].apply( instance, args );\r\n\t\t\t\tif ( methodValue !== instance && methodValue !== undefined ) {\r\n\t\t\t\t\treturnValue = methodValue && methodValue.jquery ?\r\n\t\t\t\t\t\treturnValue.pushStack( methodValue.get() ) :\r\n\t\t\t\t\t\tmethodValue;\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tthis.each(function() {\r\n\t\t\t\tvar instance = $.data( this, fullName );\r\n\t\t\t\tif ( instance ) {\r\n\t\t\t\t\tinstance.option( options || {} )._init();\r\n\t\t\t\t} else {\r\n\t\t\t\t\t$.data( this, fullName, new object( options, this ) );\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\treturn returnValue;\r\n\t};\r\n};\r\n\r\n$.Widget = function( /* options, element */ ) {};\r\n$.Widget._childConstructors = [];\r\n\r\n$.Widget.prototype = {\r\n\twidgetName: \"widget\",\r\n\twidgetEventPrefix: \"\",\r\n\tdefaultElement: \"<div>\",\r\n\toptions: {\r\n\t\tdisabled: false,\r\n\r\n\t\t// callbacks\r\n\t\tcreate: null\r\n\t},\r\n\t_createWidget: function( options, element ) {\r\n\t\telement = $( element || this.defaultElement || this )[ 0 ];\r\n\t\tthis.element = $( element );\r\n\t\tthis.uuid = uuid++;\r\n\t\tthis.eventNamespace = \".\" + this.widgetName + this.uuid;\r\n\t\tthis.options = $.widget.extend( {},\r\n\t\t\tthis.options,\r\n\t\t\tthis._getCreateOptions(),\r\n\t\t\toptions );\r\n\r\n\t\tthis.bindings = $();\r\n\t\tthis.hoverable = $();\r\n\t\tthis.focusable = $();\r\n\r\n\t\tif ( element !== this ) {\r\n\t\t\t$.data( element, this.widgetFullName, this );\r\n\t\t\tthis._on( true, this.element, {\r\n\t\t\t\tremove: function( event ) {\r\n\t\t\t\t\tif ( event.target === element ) {\r\n\t\t\t\t\t\tthis.destroy();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tthis.document = $( element.style ?\r\n\t\t\t\t// element within the document\r\n\t\t\t\telement.ownerDocument :\r\n\t\t\t\t// element is window or document\r\n\t\t\t\telement.document || element );\r\n\t\t\tthis.window = $( this.document[0].defaultView || this.document[0].parentWindow );\r\n\t\t}\r\n\r\n\t\tthis._create();\r\n\t\tthis._trigger( \"create\", null, this._getCreateEventData() );\r\n\t\tthis._init();\r\n\t},\r\n\t_getCreateOptions: $.noop,\r\n\t_getCreateEventData: $.noop,\r\n\t_create: $.noop,\r\n\t_init: $.noop,\r\n\r\n\tdestroy: function() {\r\n\t\tthis._destroy();\r\n\t\t// we can probably remove the unbind calls in 2.0\r\n\t\t// all event bindings should go through this._on()\r\n\t\tthis.element\r\n\t\t\t.unbind( this.eventNamespace )\r\n\t\t\t// 1.9 BC for #7810\r\n\t\t\t// TODO remove dual storage\r\n\t\t\t.removeData( this.widgetName )\r\n\t\t\t.removeData( this.widgetFullName )\r\n\t\t\t// support: jquery <1.6.3\r\n\t\t\t// http://bugs.jquery.com/ticket/9413\r\n\t\t\t.removeData( $.camelCase( this.widgetFullName ) );\r\n\t\tthis.widget()\r\n\t\t\t.unbind( this.eventNamespace )\r\n\t\t\t.removeAttr( \"aria-disabled\" )\r\n\t\t\t.removeClass(\r\n\t\t\t\tthis.widgetFullName + \"-disabled \" +\r\n\t\t\t\t\"ui-state-disabled\" );\r\n\r\n\t\t// clean up events and states\r\n\t\tthis.bindings.unbind( this.eventNamespace );\r\n\t\tthis.hoverable.removeClass( \"ui-state-hover\" );\r\n\t\tthis.focusable.removeClass( \"ui-state-focus\" );\r\n\t},\r\n\t_destroy: $.noop,\r\n\r\n\twidget: function() {\r\n\t\treturn this.element;\r\n\t},\r\n\r\n\toption: function( key, value ) {\r\n\t\tvar options = key,\r\n\t\t\tparts,\r\n\t\t\tcurOption,\r\n\t\t\ti;\r\n\r\n\t\tif ( arguments.length === 0 ) {\r\n\t\t\t// don't return a reference to the internal hash\r\n\t\t\treturn $.widget.extend( {}, this.options );\r\n\t\t}\r\n\r\n\t\tif ( typeof key === \"string\" ) {\r\n\t\t\t// handle nested keys, e.g., \"foo.bar\" => { foo: { bar: ___ } }\r\n\t\t\toptions = {};\r\n\t\t\tparts = key.split( \".\" );\r\n\t\t\tkey = parts.shift();\r\n\t\t\tif ( parts.length ) {\r\n\t\t\t\tcurOption = options[ key ] = $.widget.extend( {}, this.options[ key ] );\r\n\t\t\t\tfor ( i = 0; i < parts.length - 1; i++ ) {\r\n\t\t\t\t\tcurOption[ parts[ i ] ] = curOption[ parts[ i ] ] || {};\r\n\t\t\t\t\tcurOption = curOption[ parts[ i ] ];\r\n\t\t\t\t}\r\n\t\t\t\tkey = parts.pop();\r\n\t\t\t\tif ( value === undefined ) {\r\n\t\t\t\t\treturn curOption[ key ] === undefined ? null : curOption[ key ];\r\n\t\t\t\t}\r\n\t\t\t\tcurOption[ key ] = value;\r\n\t\t\t} else {\r\n\t\t\t\tif ( value === undefined ) {\r\n\t\t\t\t\treturn this.options[ key ] === undefined ? null : this.options[ key ];\r\n\t\t\t\t}\r\n\t\t\t\toptions[ key ] = value;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis._setOptions( options );\r\n\r\n\t\treturn this;\r\n\t},\r\n\t_setOptions: function( options ) {\r\n\t\tvar key;\r\n\r\n\t\tfor ( key in options ) {\r\n\t\t\tthis._setOption( key, options[ key ] );\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\t},\r\n\t_setOption: function( key, value ) {\r\n\t\tthis.options[ key ] = value;\r\n\r\n\t\tif ( key === \"disabled\" ) {\r\n\t\t\tthis.widget()\r\n\t\t\t\t.toggleClass( this.widgetFullName + \"-disabled ui-state-disabled\", !!value )\r\n\t\t\t\t.attr( \"aria-disabled\", value );\r\n\t\t\tthis.hoverable.removeClass( \"ui-state-hover\" );\r\n\t\t\tthis.focusable.removeClass( \"ui-state-focus\" );\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\tenable: function() {\r\n\t\treturn this._setOption( \"disabled\", false );\r\n\t},\r\n\tdisable: function() {\r\n\t\treturn this._setOption( \"disabled\", true );\r\n\t},\r\n\r\n\t_on: function( suppressDisabledCheck, element, handlers ) {\r\n\t\tvar delegateElement,\r\n\t\t\tinstance = this;\r\n\r\n\t\t// no suppressDisabledCheck flag, shuffle arguments\r\n\t\tif ( typeof suppressDisabledCheck !== \"boolean\" ) {\r\n\t\t\thandlers = element;\r\n\t\t\telement = suppressDisabledCheck;\r\n\t\t\tsuppressDisabledCheck = false;\r\n\t\t}\r\n\r\n\t\t// no element argument, shuffle and use this.element\r\n\t\tif ( !handlers ) {\r\n\t\t\thandlers = element;\r\n\t\t\telement = this.element;\r\n\t\t\tdelegateElement = this.widget();\r\n\t\t} else {\r\n\t\t\t// accept selectors, DOM elements\r\n\t\t\telement = delegateElement = $( element );\r\n\t\t\tthis.bindings = this.bindings.add( element );\r\n\t\t}\r\n\r\n\t\t$.each( handlers, function( event, handler ) {\r\n\t\t\tfunction handlerProxy() {\r\n\t\t\t\t// allow widgets to customize the disabled handling\r\n\t\t\t\t// - disabled as an array instead of boolean\r\n\t\t\t\t// - disabled class as method for disabling individual parts\r\n\t\t\t\tif ( !suppressDisabledCheck &&\r\n\t\t\t\t\t\t( instance.options.disabled === true ||\r\n\t\t\t\t\t\t\t$( this ).hasClass( \"ui-state-disabled\" ) ) ) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\treturn ( typeof handler === \"string\" ? instance[ handler ] : handler )\r\n\t\t\t\t\t.apply( instance, arguments );\r\n\t\t\t}\r\n\r\n\t\t\t// copy the guid so direct unbinding works\r\n\t\t\tif ( typeof handler !== \"string\" ) {\r\n\t\t\t\thandlerProxy.guid = handler.guid =\r\n\t\t\t\t\thandler.guid || handlerProxy.guid || $.guid++;\r\n\t\t\t}\r\n\r\n\t\t\tvar match = event.match( /^(\\w+)\\s*(.*)$/ ),\r\n\t\t\t\teventName = match[1] + instance.eventNamespace,\r\n\t\t\t\tselector = match[2];\r\n\t\t\tif ( selector ) {\r\n\t\t\t\tdelegateElement.delegate( selector, eventName, handlerProxy );\r\n\t\t\t} else {\r\n\t\t\t\telement.bind( eventName, handlerProxy );\r\n\t\t\t}\r\n\t\t});\r\n\t},\r\n\r\n\t_off: function( element, eventName ) {\r\n\t\teventName = (eventName || \"\").split( \" \" ).join( this.eventNamespace + \" \" ) + this.eventNamespace;\r\n\t\telement.unbind( eventName ).undelegate( eventName );\r\n\t},\r\n\r\n\t_delay: function( handler, delay ) {\r\n\t\tfunction handlerProxy() {\r\n\t\t\treturn ( typeof handler === \"string\" ? instance[ handler ] : handler )\r\n\t\t\t\t.apply( instance, arguments );\r\n\t\t}\r\n\t\tvar instance = this;\r\n\t\treturn setTimeout( handlerProxy, delay || 0 );\r\n\t},\r\n\r\n\t_hoverable: function( element ) {\r\n\t\tthis.hoverable = this.hoverable.add( element );\r\n\t\tthis._on( element, {\r\n\t\t\tmouseenter: function( event ) {\r\n\t\t\t\t$( event.currentTarget ).addClass( \"ui-state-hover\" );\r\n\t\t\t},\r\n\t\t\tmouseleave: function( event ) {\r\n\t\t\t\t$( event.currentTarget ).removeClass( \"ui-state-hover\" );\r\n\t\t\t}\r\n\t\t});\r\n\t},\r\n\r\n\t_focusable: function( element ) {\r\n\t\tthis.focusable = this.focusable.add( element );\r\n\t\tthis._on( element, {\r\n\t\t\tfocusin: function( event ) {\r\n\t\t\t\t$( event.currentTarget ).addClass( \"ui-state-focus\" );\r\n\t\t\t},\r\n\t\t\tfocusout: function( event ) {\r\n\t\t\t\t$( event.currentTarget ).removeClass( \"ui-state-focus\" );\r\n\t\t\t}\r\n\t\t});\r\n\t},\r\n\r\n\t_trigger: function( type, event, data ) {\r\n\t\tvar prop, orig,\r\n\t\t\tcallback = this.options[ type ];\r\n\r\n\t\tdata = data || {};\r\n\t\tevent = $.Event( event );\r\n\t\tevent.type = ( type === this.widgetEventPrefix ?\r\n\t\t\ttype :\r\n\t\t\tthis.widgetEventPrefix + type ).toLowerCase();\r\n\t\t// the original event may come from any element\r\n\t\t// so we need to reset the target on the new event\r\n\t\tevent.target = this.element[ 0 ];\r\n\r\n\t\t// copy original event properties over to the new event\r\n\t\torig = event.originalEvent;\r\n\t\tif ( orig ) {\r\n\t\t\tfor ( prop in orig ) {\r\n\t\t\t\tif ( !( prop in event ) ) {\r\n\t\t\t\t\tevent[ prop ] = orig[ prop ];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.element.trigger( event, data );\r\n\t\treturn !( $.isFunction( callback ) &&\r\n\t\t\tcallback.apply( this.element[0], [ event ].concat( data ) ) === false ||\r\n\t\t\tevent.isDefaultPrevented() );\r\n\t}\r\n};\r\n\r\n$.each( { show: \"fadeIn\", hide: \"fadeOut\" }, function( method, defaultEffect ) {\r\n\t$.Widget.prototype[ \"_\" + method ] = function( element, options, callback ) {\r\n\t\tif ( typeof options === \"string\" ) {\r\n\t\t\toptions = { effect: options };\r\n\t\t}\r\n\t\tvar hasOptions,\r\n\t\t\teffectName = !options ?\r\n\t\t\t\tmethod :\r\n\t\t\t\toptions === true || typeof options === \"number\" ?\r\n\t\t\t\t\tdefaultEffect :\r\n\t\t\t\t\toptions.effect || defaultEffect;\r\n\t\toptions = options || {};\r\n\t\tif ( typeof options === \"number\" ) {\r\n\t\t\toptions = { duration: options };\r\n\t\t}\r\n\t\thasOptions = !$.isEmptyObject( options );\r\n\t\toptions.complete = callback;\r\n\t\tif ( options.delay ) {\r\n\t\t\telement.delay( options.delay );\r\n\t\t}\r\n\t\tif ( hasOptions && $.effects && $.effects.effect[ effectName ] ) {\r\n\t\t\telement[ method ]( options );\r\n\t\t} else if ( effectName !== method && element[ effectName ] ) {\r\n\t\t\telement[ effectName ]( options.duration, options.easing, callback );\r\n\t\t} else {\r\n\t\t\telement.queue(function( next ) {\r\n\t\t\t\t$( this )[ method ]();\r\n\t\t\t\tif ( callback ) {\r\n\t\t\t\t\tcallback.call( element[ 0 ] );\r\n\t\t\t\t}\r\n\t\t\t\tnext();\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n});\r\n\r\n})( jQuery );\r\n\r\n(function( $, undefined ) {\r\n\r\nvar mouseHandled = false;\r\n$( document ).mouseup( function() {\r\n\tmouseHandled = false;\r\n});\r\n\r\n$.widget(\"ui.mouse\", {\r\n\tversion: \"1.10.2\",\r\n\toptions: {\r\n\t\tcancel: \"input,textarea,button,select,option\",\r\n\t\tdistance: 1,\r\n\t\tdelay: 0\r\n\t},\r\n\t_mouseInit: function() {\r\n\t\tvar that = this;\r\n\r\n\t\tthis.element\r\n\t\t\t.bind(\"mousedown.\"+this.widgetName, function(event) {\r\n\t\t\t\treturn that._mouseDown(event);\r\n\t\t\t})\r\n\t\t\t.bind(\"click.\"+this.widgetName, function(event) {\r\n\t\t\t\tif (true === $.data(event.target, that.widgetName + \".preventClickEvent\")) {\r\n\t\t\t\t\t$.removeData(event.target, that.widgetName + \".preventClickEvent\");\r\n\t\t\t\t\tevent.stopImmediatePropagation();\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\tthis.started = false;\r\n\t},\r\n\r\n\t// TODO: make sure destroying one instance of mouse doesn't mess with\r\n\t// other instances of mouse\r\n\t_mouseDestroy: function() {\r\n\t\tthis.element.unbind(\".\"+this.widgetName);\r\n\t\tif ( this._mouseMoveDelegate ) {\r\n\t\t\t$(document)\r\n\t\t\t\t.unbind(\"mousemove.\"+this.widgetName, this._mouseMoveDelegate)\r\n\t\t\t\t.unbind(\"mouseup.\"+this.widgetName, this._mouseUpDelegate);\r\n\t\t}\r\n\t},\r\n\r\n\t_mouseDown: function(event) {\r\n\t\t// don't let more than one widget handle mouseStart\r\n\t\tif( mouseHandled ) { return; }\r\n\r\n\t\t// we may have missed mouseup (out of window)\r\n\t\t(this._mouseStarted && this._mouseUp(event));\r\n\r\n\t\tthis._mouseDownEvent = event;\r\n\r\n\t\tvar that = this,\r\n\t\t\tbtnIsLeft = (event.which === 1),\r\n\t\t\t// event.target.nodeName works around a bug in IE 8 with\r\n\t\t\t// disabled inputs (#7620)\r\n\t\t\telIsCancel = (typeof this.options.cancel === \"string\" && event.target.nodeName ? $(event.target).closest(this.options.cancel).length : false);\r\n\t\tif (!btnIsLeft || elIsCancel || !this._mouseCapture(event)) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\tthis.mouseDelayMet = !this.options.delay;\r\n\t\tif (!this.mouseDelayMet) {\r\n\t\t\tthis._mouseDelayTimer = setTimeout(function() {\r\n\t\t\t\tthat.mouseDelayMet = true;\r\n\t\t\t}, this.options.delay);\r\n\t\t}\r\n\r\n\t\tif (this._mouseDistanceMet(event) && this._mouseDelayMet(event)) {\r\n\t\t\tthis._mouseStarted = (this._mouseStart(event) !== false);\r\n\t\t\tif (!this._mouseStarted) {\r\n\t\t\t\tevent.preventDefault();\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// Click event may never have fired (Gecko & Opera)\r\n\t\tif (true === $.data(event.target, this.widgetName + \".preventClickEvent\")) {\r\n\t\t\t$.removeData(event.target, this.widgetName + \".preventClickEvent\");\r\n\t\t}\r\n\r\n\t\t// these delegates are required to keep context\r\n\t\tthis._mouseMoveDelegate = function(event) {\r\n\t\t\treturn that._mouseMove(event);\r\n\t\t};\r\n\t\tthis._mouseUpDelegate = function(event) {\r\n\t\t\treturn that._mouseUp(event);\r\n\t\t};\r\n\t\t$(document)\r\n\t\t\t.bind(\"mousemove.\"+this.widgetName, this._mouseMoveDelegate)\r\n\t\t\t.bind(\"mouseup.\"+this.widgetName, this._mouseUpDelegate);\r\n\r\n\t\tevent.preventDefault();\r\n\r\n\t\tmouseHandled = true;\r\n\t\treturn true;\r\n\t},\r\n\r\n\t_mouseMove: function(event) {\r\n\t\t// IE mouseup check - mouseup happened when mouse was out of window\r\n\t\tif ($.ui.ie && ( !document.documentMode || document.documentMode < 9 ) && !event.button) {\r\n\t\t\treturn this._mouseUp(event);\r\n\t\t}\r\n\r\n\t\tif (this._mouseStarted) {\r\n\t\t\tthis._mouseDrag(event);\r\n\t\t\treturn event.preventDefault();\r\n\t\t}\r\n\r\n\t\tif (this._mouseDistanceMet(event) && this._mouseDelayMet(event)) {\r\n\t\t\tthis._mouseStarted =\r\n\t\t\t\t(this._mouseStart(this._mouseDownEvent, event) !== false);\r\n\t\t\t(this._mouseStarted ? this._mouseDrag(event) : this._mouseUp(event));\r\n\t\t}\r\n\r\n\t\treturn !this._mouseStarted;\r\n\t},\r\n\r\n\t_mouseUp: function(event) {\r\n\t\t$(document)\r\n\t\t\t.unbind(\"mousemove.\"+this.widgetName, this._mouseMoveDelegate)\r\n\t\t\t.unbind(\"mouseup.\"+this.widgetName, this._mouseUpDelegate);\r\n\r\n\t\tif (this._mouseStarted) {\r\n\t\t\tthis._mouseStarted = false;\r\n\r\n\t\t\tif (event.target === this._mouseDownEvent.target) {\r\n\t\t\t\t$.data(event.target, this.widgetName + \".preventClickEvent\", true);\r\n\t\t\t}\r\n\r\n\t\t\tthis._mouseStop(event);\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\t},\r\n\r\n\t_mouseDistanceMet: function(event) {\r\n\t\treturn (Math.max(\r\n\t\t\t\tMath.abs(this._mouseDownEvent.pageX - event.pageX),\r\n\t\t\t\tMath.abs(this._mouseDownEvent.pageY - event.pageY)\r\n\t\t\t) >= this.options.distance\r\n\t\t);\r\n\t},\r\n\r\n\t_mouseDelayMet: function(/* event */) {\r\n\t\treturn this.mouseDelayMet;\r\n\t},\r\n\r\n\t// These are placeholder methods, to be overriden by extending plugin\r\n\t_mouseStart: function(/* event */) {},\r\n\t_mouseDrag: function(/* event */) {},\r\n\t_mouseStop: function(/* event */) {},\r\n\t_mouseCapture: function(/* event */) { return true; }\r\n});\r\n\r\n})(jQuery);\r\n\r\n(function( $, undefined ) {\r\n\r\n$.widget(\"ui.draggable\", $.ui.mouse, {\r\n\tversion: \"1.10.2\",\r\n\twidgetEventPrefix: \"drag\",\r\n\toptions: {\r\n\t\taddClasses: true,\r\n\t\tappendTo: \"parent\",\r\n\t\taxis: false,\r\n\t\tconnectToSortable: false,\r\n\t\tcontainment: false,\r\n\t\tcursor: \"auto\",\r\n\t\tcursorAt: false,\r\n\t\tgrid: false,\r\n\t\thandle: false,\r\n\t\thelper: \"original\",\r\n\t\tiframeFix: false,\r\n\t\topacity: false,\r\n\t\trefreshPositions: false,\r\n\t\trevert: false,\r\n\t\trevertDuration: 500,\r\n\t\tscope: \"default\",\r\n\t\tscroll: true,\r\n\t\tscrollSensitivity: 20,\r\n\t\tscrollSpeed: 20,\r\n\t\tsnap: false,\r\n\t\tsnapMode: \"both\",\r\n\t\tsnapTolerance: 20,\r\n\t\tstack: false,\r\n\t\tzIndex: false,\r\n\r\n\t\t// callbacks\r\n\t\tdrag: null,\r\n\t\tstart: null,\r\n\t\tstop: null\r\n\t},\r\n\t_create: function() {\r\n\r\n\t\tif (this.options.helper === \"original\" && !(/^(?:r|a|f)/).test(this.element.css(\"position\"))) {\r\n\t\t\tthis.element[0].style.position = \"relative\";\r\n\t\t}\r\n\t\tif (this.options.addClasses){\r\n\t\t\tthis.element.addClass(\"ui-draggable\");\r\n\t\t}\r\n\t\tif (this.options.disabled){\r\n\t\t\tthis.element.addClass(\"ui-draggable-disabled\");\r\n\t\t}\r\n\r\n\t\tthis._mouseInit();\r\n\r\n\t},\r\n\r\n\t_destroy: function() {\r\n\t\tthis.element.removeClass( \"ui-draggable ui-draggable-dragging ui-draggable-disabled\" );\r\n\t\tthis._mouseDestroy();\r\n\t},\r\n\r\n\t_mouseCapture: function(event) {\r\n\r\n\t\tvar o = this.options;\r\n\r\n\t\t// among others, prevent a drag on a resizable-handle\r\n\t\tif (this.helper || o.disabled || $(event.target).closest(\".ui-resizable-handle\").length > 0) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\t//Quit if we're not on a valid handle\r\n\t\tthis.handle = this._getHandle(event);\r\n\t\tif (!this.handle) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\t$(o.iframeFix === true ? \"iframe\" : o.iframeFix).each(function() {\r\n\t\t\t$(\"<div class='ui-draggable-iframeFix' style='background: #fff;'></div>\")\r\n\t\t\t.css({\r\n\t\t\t\twidth: this.offsetWidth+\"px\", height: this.offsetHeight+\"px\",\r\n\t\t\t\tposition: \"absolute\", opacity: \"0.001\", zIndex: 1000\r\n\t\t\t})\r\n\t\t\t.css($(this).offset())\r\n\t\t\t.appendTo(\"body\");\r\n\t\t});\r\n\r\n\t\treturn true;\r\n\r\n\t},\r\n\r\n\t_mouseStart: function(event) {\r\n\r\n\t\tvar o = this.options;\r\n\r\n\t\t//Create and append the visible helper\r\n\t\tthis.helper = this._createHelper(event);\r\n\r\n\t\tthis.helper.addClass(\"ui-draggable-dragging\");\r\n\r\n\t\t//Cache the helper size\r\n\t\tthis._cacheHelperProportions();\r\n\r\n\t\t//If ddmanager is used for droppables, set the global draggable\r\n\t\tif($.ui.ddmanager) {\r\n\t\t\t$.ui.ddmanager.current = this;\r\n\t\t}\r\n\r\n\t\t/*\r\n\t\t * - Position generation -\r\n\t\t * This block generates everything position related - it's the core of draggables.\r\n\t\t */\r\n\r\n\t\t//Cache the margins of the original element\r\n\t\tthis._cacheMargins();\r\n\r\n\t\t//Store the helper's css position\r\n\t\tthis.cssPosition = this.helper.css(\"position\");\r\n\t\tthis.scrollParent = this.helper.scrollParent();\r\n\r\n\t\t//The element's absolute position on the page minus margins\r\n\t\tthis.offset = this.positionAbs = this.element.offset();\r\n\t\tthis.offset = {\r\n\t\t\ttop: this.offset.top - this.margins.top,\r\n\t\t\tleft: this.offset.left - this.margins.left\r\n\t\t};\r\n\r\n\t\t$.extend(this.offset, {\r\n\t\t\tclick: { //Where the click happened, relative to the element\r\n\t\t\t\tleft: event.pageX - this.offset.left,\r\n\t\t\t\ttop: event.pageY - this.offset.top\r\n\t\t\t},\r\n\t\t\tparent: this._getParentOffset(),\r\n\t\t\trelative: this._getRelativeOffset() //This is a relative to absolute position minus the actual position calculation - only used for relative positioned helper\r\n\t\t});\r\n\r\n\t\t//Generate the original position\r\n\t\tthis.originalPosition = this.position = this._generatePosition(event);\r\n\t\tthis.originalPageX = event.pageX;\r\n\t\tthis.originalPageY = event.pageY;\r\n\r\n\t\t//Adjust the mouse offset relative to the helper if \"cursorAt\" is supplied\r\n\t\t(o.cursorAt && this._adjustOffsetFromHelper(o.cursorAt));\r\n\r\n\t\t//Set a containment if given in the options\r\n\t\tif(o.containment) {\r\n\t\t\tthis._setContainment();\r\n\t\t}\r\n\r\n\t\t//Trigger event + callbacks\r\n\t\tif(this._trigger(\"start\", event) === false) {\r\n\t\t\tthis._clear();\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\t//Recache the helper size\r\n\t\tthis._cacheHelperProportions();\r\n\r\n\t\t//Prepare the droppable offsets\r\n\t\tif ($.ui.ddmanager && !o.dropBehaviour) {\r\n\t\t\t$.ui.ddmanager.prepareOffsets(this, event);\r\n\t\t}\r\n\r\n\r\n\t\tthis._mouseDrag(event, true); //Execute the drag once - this causes the helper not to be visible before getting its correct position\r\n\r\n\t\t//If the ddmanager is used for droppables, inform the manager that dragging has started (see #5003)\r\n\t\tif ( $.ui.ddmanager ) {\r\n\t\t\t$.ui.ddmanager.dragStart(this, event);\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\t},\r\n\r\n\t_mouseDrag: function(event, noPropagation) {\r\n\r\n\t\t//Compute the helpers position\r\n\t\tthis.position = this._generatePosition(event);\r\n\t\tthis.positionAbs = this._convertPositionTo(\"absolute\");\r\n\r\n\t\t//Call plugins and callbacks and use the resulting position if something is returned\r\n\t\tif (!noPropagation) {\r\n\t\t\tvar ui = this._uiHash();\r\n\t\t\tif(this._trigger(\"drag\", event, ui) === false) {\r\n\t\t\t\tthis._mouseUp({});\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\tthis.position = ui.position;\r\n\t\t}\r\n\r\n\t\tif(!this.options.axis || this.options.axis !== \"y\") {\r\n\t\t\tthis.helper[0].style.left = this.position.left+\"px\";\r\n\t\t}\r\n\t\tif(!this.options.axis || this.options.axis !== \"x\") {\r\n\t\t\tthis.helper[0].style.top = this.position.top+\"px\";\r\n\t\t}\r\n\t\tif($.ui.ddmanager) {\r\n\t\t\t$.ui.ddmanager.drag(this, event);\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\t},\r\n\r\n\t_mouseStop: function(event) {\r\n\r\n\t\t//If we are using droppables, inform the manager about the drop\r\n\t\tvar element,\r\n\t\t\tthat = this,\r\n\t\t\telementInDom = false,\r\n\t\t\tdropped = false;\r\n\t\tif ($.ui.ddmanager && !this.options.dropBehaviour) {\r\n\t\t\tdropped = $.ui.ddmanager.drop(this, event);\r\n\t\t}\r\n\r\n\t\t//if a drop comes from outside (a sortable)\r\n\t\tif(this.dropped) {\r\n\t\t\tdropped = this.dropped;\r\n\t\t\tthis.dropped = false;\r\n\t\t}\r\n\r\n\t\t//if the original element is no longer in the DOM don't bother to continue (see #8269)\r\n\t\telement = this.element[0];\r\n\t\twhile ( element && (element = element.parentNode) ) {\r\n\t\t\tif (element === document ) {\r\n\t\t\t\telementInDom = true;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif ( !elementInDom && this.options.helper === \"original\" ) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tif((this.options.revert === \"invalid\" && !dropped) || (this.options.revert === \"valid\" && dropped) || this.options.revert === true || ($.isFunction(this.options.revert) && this.options.revert.call(this.element, dropped))) {\r\n\t\t\t$(this.helper).animate(this.originalPosition, parseInt(this.options.revertDuration, 10), function() {\r\n\t\t\t\tif(that._trigger(\"stop\", event) !== false) {\r\n\t\t\t\t\tthat._clear();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tif(this._trigger(\"stop\", event) !== false) {\r\n\t\t\t\tthis._clear();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\t},\r\n\r\n\t_mouseUp: function(event) {\r\n\t\t//Remove frame helpers\r\n\t\t$(\"div.ui-draggable-iframeFix\").each(function() {\r\n\t\t\tthis.parentNode.removeChild(this);\r\n\t\t});\r\n\r\n\t\t//If the ddmanager is used for droppables, inform the manager that dragging has stopped (see #5003)\r\n\t\tif( $.ui.ddmanager ) {\r\n\t\t\t$.ui.ddmanager.dragStop(this, event);\r\n\t\t}\r\n\r\n\t\treturn $.ui.mouse.prototype._mouseUp.call(this, event);\r\n\t},\r\n\r\n\tcancel: function() {\r\n\r\n\t\tif(this.helper.is(\".ui-draggable-dragging\")) {\r\n\t\t\tthis._mouseUp({});\r\n\t\t} else {\r\n\t\t\tthis._clear();\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\t_getHandle: function(event) {\r\n\t\treturn this.options.handle ?\r\n\t\t\t!!$( event.target ).closest( this.element.find( this.options.handle ) ).length :\r\n\t\t\ttrue;\r\n\t},\r\n\r\n\t_createHelper: function(event) {\r\n\r\n\t\tvar o = this.options,\r\n\t\t\thelper = $.isFunction(o.helper) ? $(o.helper.apply(this.element[0], [event])) : (o.helper === \"clone\" ? this.element.clone().removeAttr(\"id\") : this.element);\r\n\r\n\t\tif(!helper.parents(\"body\").length) {\r\n\t\t\thelper.appendTo((o.appendTo === \"parent\" ? this.element[0].parentNode : o.appendTo));\r\n\t\t}\r\n\r\n\t\tif(helper[0] !== this.element[0] && !(/(fixed|absolute)/).test(helper.css(\"position\"))) {\r\n\t\t\thelper.css(\"position\", \"absolute\");\r\n\t\t}\r\n\r\n\t\treturn helper;\r\n\r\n\t},\r\n\r\n\t_adjustOffsetFromHelper: function(obj) {\r\n\t\tif (typeof obj === \"string\") {\r\n\t\t\tobj = obj.split(\" \");\r\n\t\t}\r\n\t\tif ($.isArray(obj)) {\r\n\t\t\tobj = {left: +obj[0], top: +obj[1] || 0};\r\n\t\t}\r\n\t\tif (\"left\" in obj) {\r\n\t\t\tthis.offset.click.left = obj.left + this.margins.left;\r\n\t\t}\r\n\t\tif (\"right\" in obj) {\r\n\t\t\tthis.offset.click.left = this.helperProportions.width - obj.right + this.margins.left;\r\n\t\t}\r\n\t\tif (\"top\" in obj) {\r\n\t\t\tthis.offset.click.top = obj.top + this.margins.top;\r\n\t\t}\r\n\t\tif (\"bottom\" in obj) {\r\n\t\t\tthis.offset.click.top = this.helperProportions.height - obj.bottom + this.margins.top;\r\n\t\t}\r\n\t},\r\n\r\n\t_getParentOffset: function() {\r\n\r\n\t\t//Get the offsetParent and cache its position\r\n\t\tthis.offsetParent = this.helper.offsetParent();\r\n\t\tvar po = this.offsetParent.offset();\r\n\r\n\t\t// This is a special case where we need to modify a offset calculated on start, since the following happened:\r\n\t\t// 1. The position of the helper is absolute, so it's position is calculated based on the next positioned parent\r\n\t\t// 2. The actual offset parent is a child of the scroll parent, and the scroll parent isn't the document, which means that\r\n\t\t//    the scroll is included in the initial calculation of the offset of the parent, and never recalculated upon drag\r\n\t\tif(this.cssPosition === \"absolute\" && this.scrollParent[0] !== document && $.contains(this.scrollParent[0], this.offsetParent[0])) {\r\n\t\t\tpo.left += this.scrollParent.scrollLeft();\r\n\t\t\tpo.top += this.scrollParent.scrollTop();\r\n\t\t}\r\n\r\n\t\t//This needs to be actually done for all browsers, since pageX/pageY includes this information\r\n\t\t//Ugly IE fix\r\n\t\tif((this.offsetParent[0] === document.body) ||\r\n\t\t\t(this.offsetParent[0].tagName && this.offsetParent[0].tagName.toLowerCase() === \"html\" && $.ui.ie)) {\r\n\t\t\tpo = { top: 0, left: 0 };\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\ttop: po.top + (parseInt(this.offsetParent.css(\"borderTopWidth\"),10) || 0),\r\n\t\t\tleft: po.left + (parseInt(this.offsetParent.css(\"borderLeftWidth\"),10) || 0)\r\n\t\t};\r\n\r\n\t},\r\n\r\n\t_getRelativeOffset: function() {\r\n\r\n\t\tif(this.cssPosition === \"relative\") {\r\n\t\t\tvar p = this.element.position();\r\n\t\t\treturn {\r\n\t\t\t\ttop: p.top - (parseInt(this.helper.css(\"top\"),10) || 0) + this.scrollParent.scrollTop(),\r\n\t\t\t\tleft: p.left - (parseInt(this.helper.css(\"left\"),10) || 0) + this.scrollParent.scrollLeft()\r\n\t\t\t};\r\n\t\t} else {\r\n\t\t\treturn { top: 0, left: 0 };\r\n\t\t}\r\n\r\n\t},\r\n\r\n\t_cacheMargins: function() {\r\n\t\tthis.margins = {\r\n\t\t\tleft: (parseInt(this.element.css(\"marginLeft\"),10) || 0),\r\n\t\t\ttop: (parseInt(this.element.css(\"marginTop\"),10) || 0),\r\n\t\t\tright: (parseInt(this.element.css(\"marginRight\"),10) || 0),\r\n\t\t\tbottom: (parseInt(this.element.css(\"marginBottom\"),10) || 0)\r\n\t\t};\r\n\t},\r\n\r\n\t_cacheHelperProportions: function() {\r\n\t\tthis.helperProportions = {\r\n\t\t\twidth: this.helper.outerWidth(),\r\n\t\t\theight: this.helper.outerHeight()\r\n\t\t};\r\n\t},\r\n\r\n\t_setContainment: function() {\r\n\r\n\t\tvar over, c, ce,\r\n\t\t\to = this.options;\r\n\r\n\t\tif(o.containment === \"parent\") {\r\n\t\t\to.containment = this.helper[0].parentNode;\r\n\t\t}\r\n\t\tif(o.containment === \"document\" || o.containment === \"window\") {\r\n\t\t\tthis.containment = [\r\n\t\t\t\to.containment === \"document\" ? 0 : $(window).scrollLeft() - this.offset.relative.left - this.offset.parent.left,\r\n\t\t\t\to.containment === \"document\" ? 0 : $(window).scrollTop() - this.offset.relative.top - this.offset.parent.top,\r\n\t\t\t\t(o.containment === \"document\" ? 0 : $(window).scrollLeft()) + $(o.containment === \"document\" ? document : window).width() - this.helperProportions.width - this.margins.left,\r\n\t\t\t\t(o.containment === \"document\" ? 0 : $(window).scrollTop()) + ($(o.containment === \"document\" ? document : window).height() || document.body.parentNode.scrollHeight) - this.helperProportions.height - this.margins.top\r\n\t\t\t];\r\n\t\t}\r\n\r\n\t\tif(!(/^(document|window|parent)$/).test(o.containment) && o.containment.constructor !== Array) {\r\n\t\t\tc = $(o.containment);\r\n\t\t\tce = c[0];\r\n\r\n\t\t\tif(!ce) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tover = ($(ce).css(\"overflow\") !== \"hidden\");\r\n\r\n\t\t\tthis.containment = [\r\n\t\t\t\t(parseInt($(ce).css(\"borderLeftWidth\"),10) || 0) + (parseInt($(ce).css(\"paddingLeft\"),10) || 0),\r\n\t\t\t\t(parseInt($(ce).css(\"borderTopWidth\"),10) || 0) + (parseInt($(ce).css(\"paddingTop\"),10) || 0),\r\n\t\t\t\t(over ? Math.max(ce.scrollWidth,ce.offsetWidth) : ce.offsetWidth) - (parseInt($(ce).css(\"borderRightWidth\"),10) || 0) - (parseInt($(ce).css(\"paddingRight\"),10) || 0) - this.helperProportions.width - this.margins.left - this.margins.right,\r\n\t\t\t\t(over ? Math.max(ce.scrollHeight,ce.offsetHeight) : ce.offsetHeight) - (parseInt($(ce).css(\"borderBottomWidth\"),10) || 0) - (parseInt($(ce).css(\"paddingBottom\"),10) || 0) - this.helperProportions.height - this.margins.top  - this.margins.bottom\r\n\t\t\t];\r\n\t\t\tthis.relative_container = c;\r\n\r\n\t\t} else if(o.containment.constructor === Array) {\r\n\t\t\tthis.containment = o.containment;\r\n\t\t}\r\n\r\n\t},\r\n\r\n\t_convertPositionTo: function(d, pos) {\r\n\r\n\t\tif(!pos) {\r\n\t\t\tpos = this.position;\r\n\t\t}\r\n\r\n\t\tvar mod = d === \"absolute\" ? 1 : -1,\r\n\t\t\tscroll = this.cssPosition === \"absolute\" && !(this.scrollParent[0] !== document && $.contains(this.scrollParent[0], this.offsetParent[0])) ? this.offsetParent : this.scrollParent, scrollIsRootNode = (/(html|body)/i).test(scroll[0].tagName);\r\n\r\n\t\treturn {\r\n\t\t\ttop: (\r\n\t\t\t\tpos.top\t+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// The absolute mouse position\r\n\t\t\t\tthis.offset.relative.top * mod +\t\t\t\t\t\t\t\t\t\t// Only for relative positioned nodes: Relative offset from element to offset parent\r\n\t\t\t\tthis.offset.parent.top * mod -\t\t\t\t\t\t\t\t\t\t// The offsetParent's offset without borders (offset + border)\r\n\t\t\t\t( ( this.cssPosition === \"fixed\" ? -this.scrollParent.scrollTop() : ( scrollIsRootNode ? 0 : scroll.scrollTop() ) ) * mod)\r\n\t\t\t),\r\n\t\t\tleft: (\r\n\t\t\t\tpos.left +\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// The absolute mouse position\r\n\t\t\t\tthis.offset.relative.left * mod +\t\t\t\t\t\t\t\t\t\t// Only for relative positioned nodes: Relative offset from element to offset parent\r\n\t\t\t\tthis.offset.parent.left * mod\t-\t\t\t\t\t\t\t\t\t\t// The offsetParent's offset without borders (offset + border)\r\n\t\t\t\t( ( this.cssPosition === \"fixed\" ? -this.scrollParent.scrollLeft() : scrollIsRootNode ? 0 : scroll.scrollLeft() ) * mod)\r\n\t\t\t)\r\n\t\t};\r\n\r\n\t},\r\n\r\n\t_generatePosition: function(event) {\r\n\r\n\t\tvar containment, co, top, left,\r\n\t\t\to = this.options,\r\n\t\t\tscroll = this.cssPosition === \"absolute\" && !(this.scrollParent[0] !== document && $.contains(this.scrollParent[0], this.offsetParent[0])) ? this.offsetParent : this.scrollParent,\r\n\t\t\tscrollIsRootNode = (/(html|body)/i).test(scroll[0].tagName),\r\n\t\t\tpageX = event.pageX,\r\n\t\t\tpageY = event.pageY;\r\n\r\n\t\t/*\r\n\t\t * - Position constraining -\r\n\t\t * Constrain the position to a mix of grid, containment.\r\n\t\t */\r\n\r\n\t\tif(this.originalPosition) { //If we are not dragging yet, we won't check for options\r\n\t\t\tif(this.containment) {\r\n\t\t\tif (this.relative_container){\r\n\t\t\t\tco = this.relative_container.offset();\r\n\t\t\t\tcontainment = [ this.containment[0] + co.left,\r\n\t\t\t\t\tthis.containment[1] + co.top,\r\n\t\t\t\t\tthis.containment[2] + co.left,\r\n\t\t\t\t\tthis.containment[3] + co.top ];\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tcontainment = this.containment;\r\n\t\t\t}\r\n\r\n\t\t\t\tif(event.pageX - this.offset.click.left < containment[0]) {\r\n\t\t\t\t\tpageX = containment[0] + this.offset.click.left;\r\n\t\t\t\t}\r\n\t\t\t\tif(event.pageY - this.offset.click.top < containment[1]) {\r\n\t\t\t\t\tpageY = containment[1] + this.offset.click.top;\r\n\t\t\t\t}\r\n\t\t\t\tif(event.pageX - this.offset.click.left > containment[2]) {\r\n\t\t\t\t\tpageX = containment[2] + this.offset.click.left;\r\n\t\t\t\t}\r\n\t\t\t\tif(event.pageY - this.offset.click.top > containment[3]) {\r\n\t\t\t\t\tpageY = containment[3] + this.offset.click.top;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif(o.grid) {\r\n\t\t\t\t//Check for grid elements set to 0 to prevent divide by 0 error causing invalid argument errors in IE (see ticket #6950)\r\n\t\t\t\ttop = o.grid[1] ? this.originalPageY + Math.round((pageY - this.originalPageY) / o.grid[1]) * o.grid[1] : this.originalPageY;\r\n\t\t\t\tpageY = containment ? ((top - this.offset.click.top >= containment[1] || top - this.offset.click.top > containment[3]) ? top : ((top - this.offset.click.top >= containment[1]) ? top - o.grid[1] : top + o.grid[1])) : top;\r\n\r\n\t\t\t\tleft = o.grid[0] ? this.originalPageX + Math.round((pageX - this.originalPageX) / o.grid[0]) * o.grid[0] : this.originalPageX;\r\n\t\t\t\tpageX = containment ? ((left - this.offset.click.left >= containment[0] || left - this.offset.click.left > containment[2]) ? left : ((left - this.offset.click.left >= containment[0]) ? left - o.grid[0] : left + o.grid[0])) : left;\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\ttop: (\r\n\t\t\t\tpageY -\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// The absolute mouse position\r\n\t\t\t\tthis.offset.click.top\t-\t\t\t\t\t\t\t\t\t\t\t\t// Click offset (relative to the element)\r\n\t\t\t\tthis.offset.relative.top -\t\t\t\t\t\t\t\t\t\t\t\t// Only for relative positioned nodes: Relative offset from element to offset parent\r\n\t\t\t\tthis.offset.parent.top +\t\t\t\t\t\t\t\t\t\t\t\t// The offsetParent's offset without borders (offset + border)\r\n\t\t\t\t( ( this.cssPosition === \"fixed\" ? -this.scrollParent.scrollTop() : ( scrollIsRootNode ? 0 : scroll.scrollTop() ) ))\r\n\t\t\t),\r\n\t\t\tleft: (\r\n\t\t\t\tpageX -\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// The absolute mouse position\r\n\t\t\t\tthis.offset.click.left -\t\t\t\t\t\t\t\t\t\t\t\t// Click offset (relative to the element)\r\n\t\t\t\tthis.offset.relative.left -\t\t\t\t\t\t\t\t\t\t\t\t// Only for relative positioned nodes: Relative offset from element to offset parent\r\n\t\t\t\tthis.offset.parent.left +\t\t\t\t\t\t\t\t\t\t\t\t// The offsetParent's offset without borders (offset + border)\r\n\t\t\t\t( ( this.cssPosition === \"fixed\" ? -this.scrollParent.scrollLeft() : scrollIsRootNode ? 0 : scroll.scrollLeft() ))\r\n\t\t\t)\r\n\t\t};\r\n\r\n\t},\r\n\r\n\t_clear: function() {\r\n\t\tthis.helper.removeClass(\"ui-draggable-dragging\");\r\n\t\tif(this.helper[0] !== this.element[0] && !this.cancelHelperRemoval) {\r\n\t\t\tthis.helper.remove();\r\n\t\t}\r\n\t\tthis.helper = null;\r\n\t\tthis.cancelHelperRemoval = false;\r\n\t},\r\n\r\n\t// From now on bulk stuff - mainly helpers\r\n\r\n\t_trigger: function(type, event, ui) {\r\n\t\tui = ui || this._uiHash();\r\n\t\t$.ui.plugin.call(this, type, [event, ui]);\r\n\t\t//The absolute position has to be recalculated after plugins\r\n\t\tif(type === \"drag\") {\r\n\t\t\tthis.positionAbs = this._convertPositionTo(\"absolute\");\r\n\t\t}\r\n\t\treturn $.Widget.prototype._trigger.call(this, type, event, ui);\r\n\t},\r\n\r\n\tplugins: {},\r\n\r\n\t_uiHash: function() {\r\n\t\treturn {\r\n\t\t\thelper: this.helper,\r\n\t\t\tposition: this.position,\r\n\t\t\toriginalPosition: this.originalPosition,\r\n\t\t\toffset: this.positionAbs\r\n\t\t};\r\n\t}\r\n\r\n});\r\n\r\n$.ui.plugin.add(\"draggable\", \"connectToSortable\", {\r\n\tstart: function(event, ui) {\r\n\r\n\t\tvar inst = $(this).data(\"ui-draggable\"), o = inst.options,\r\n\t\t\tuiSortable = $.extend({}, ui, { item: inst.element });\r\n\t\tinst.sortables = [];\r\n\t\t$(o.connectToSortable).each(function() {\r\n\t\t\tvar sortable = $.data(this, \"ui-sortable\");\r\n\t\t\tif (sortable && !sortable.options.disabled) {\r\n\t\t\t\tinst.sortables.push({\r\n\t\t\t\t\tinstance: sortable,\r\n\t\t\t\t\tshouldRevert: sortable.options.revert\r\n\t\t\t\t});\r\n\t\t\t\tsortable.refreshPositions();\t// Call the sortable's refreshPositions at drag start to refresh the containerCache since the sortable container cache is used in drag and needs to be up to date (this will ensure it's initialised as well as being kept in step with any changes that might have happened on the page).\r\n\t\t\t\tsortable._trigger(\"activate\", event, uiSortable);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t},\r\n\tstop: function(event, ui) {\r\n\r\n\t\t//If we are still over the sortable, we fake the stop event of the sortable, but also remove helper\r\n\t\tvar inst = $(this).data(\"ui-draggable\"),\r\n\t\t\tuiSortable = $.extend({}, ui, { item: inst.element });\r\n\r\n\t\t$.each(inst.sortables, function() {\r\n\t\t\tif(this.instance.isOver) {\r\n\r\n\t\t\t\tthis.instance.isOver = 0;\r\n\r\n\t\t\t\tinst.cancelHelperRemoval = true; //Don't remove the helper in the draggable instance\r\n\t\t\t\tthis.instance.cancelHelperRemoval = false; //Remove it in the sortable instance (so sortable plugins like revert still work)\r\n\r\n\t\t\t\t//The sortable revert is supported, and we have to set a temporary dropped variable on the draggable to support revert: \"valid/invalid\"\r\n\t\t\t\tif(this.shouldRevert) {\r\n\t\t\t\t\tthis.instance.options.revert = this.shouldRevert;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//Trigger the stop of the sortable\r\n\t\t\t\tthis.instance._mouseStop(event);\r\n\r\n\t\t\t\tthis.instance.options.helper = this.instance.options._helper;\r\n\r\n\t\t\t\t//If the helper has been the original item, restore properties in the sortable\r\n\t\t\t\tif(inst.options.helper === \"original\") {\r\n\t\t\t\t\tthis.instance.currentItem.css({ top: \"auto\", left: \"auto\" });\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\t\t\t\tthis.instance.cancelHelperRemoval = false; //Remove the helper in the sortable instance\r\n\t\t\t\tthis.instance._trigger(\"deactivate\", event, uiSortable);\r\n\t\t\t}\r\n\r\n\t\t});\r\n\r\n\t},\r\n\tdrag: function(event, ui) {\r\n\r\n\t\tvar inst = $(this).data(\"ui-draggable\"), that = this;\r\n\r\n\t\t$.each(inst.sortables, function() {\r\n\r\n\t\t\tvar innermostIntersecting = false,\r\n\t\t\t\tthisSortable = this;\r\n\r\n\t\t\t//Copy over some variables to allow calling the sortable's native _intersectsWith\r\n\t\t\tthis.instance.positionAbs = inst.positionAbs;\r\n\t\t\tthis.instance.helperProportions = inst.helperProportions;\r\n\t\t\tthis.instance.offset.click = inst.offset.click;\r\n\r\n\t\t\tif(this.instance._intersectsWith(this.instance.containerCache)) {\r\n\t\t\t\tinnermostIntersecting = true;\r\n\t\t\t\t$.each(inst.sortables, function () {\r\n\t\t\t\t\tthis.instance.positionAbs = inst.positionAbs;\r\n\t\t\t\t\tthis.instance.helperProportions = inst.helperProportions;\r\n\t\t\t\t\tthis.instance.offset.click = inst.offset.click;\r\n\t\t\t\t\tif (this !== thisSortable &&\r\n\t\t\t\t\t\tthis.instance._intersectsWith(this.instance.containerCache) &&\r\n\t\t\t\t\t\t$.contains(thisSortable.instance.element[0], this.instance.element[0])\r\n\t\t\t\t\t) {\r\n\t\t\t\t\t\tinnermostIntersecting = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn innermostIntersecting;\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\r\n\t\t\tif(innermostIntersecting) {\r\n\t\t\t\t//If it intersects, we use a little isOver variable and set it once, so our move-in stuff gets fired only once\r\n\t\t\t\tif(!this.instance.isOver) {\r\n\r\n\t\t\t\t\tthis.instance.isOver = 1;\r\n\t\t\t\t\t//Now we fake the start of dragging for the sortable instance,\r\n\t\t\t\t\t//by cloning the list group item, appending it to the sortable and using it as inst.currentItem\r\n\t\t\t\t\t//We can then fire the start event of the sortable with our passed browser event, and our own helper (so it doesn't create a new one)\r\n\t\t\t\t\tthis.instance.currentItem = $(that).clone().removeAttr(\"id\").appendTo(this.instance.element).data(\"ui-sortable-item\", true);\r\n\t\t\t\t\tthis.instance.options._helper = this.instance.options.helper; //Store helper option to later restore it\r\n\t\t\t\t\tthis.instance.options.helper = function() { return ui.helper[0]; };\r\n\r\n\t\t\t\t\tevent.target = this.instance.currentItem[0];\r\n\t\t\t\t\tthis.instance._mouseCapture(event, true);\r\n\t\t\t\t\tthis.instance._mouseStart(event, true, true);\r\n\r\n\t\t\t\t\t//Because the browser event is way off the new appended portlet, we modify a couple of variables to reflect the changes\r\n\t\t\t\t\tthis.instance.offset.click.top = inst.offset.click.top;\r\n\t\t\t\t\tthis.instance.offset.click.left = inst.offset.click.left;\r\n\t\t\t\t\tthis.instance.offset.parent.left -= inst.offset.parent.left - this.instance.offset.parent.left;\r\n\t\t\t\t\tthis.instance.offset.parent.top -= inst.offset.parent.top - this.instance.offset.parent.top;\r\n\r\n\t\t\t\t\tinst._trigger(\"toSortable\", event);\r\n\t\t\t\t\tinst.dropped = this.instance.element; //draggable revert needs that\r\n\t\t\t\t\t//hack so receive/update callbacks work (mostly)\r\n\t\t\t\t\tinst.currentItem = inst.element;\r\n\t\t\t\t\tthis.instance.fromOutside = inst;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//Provided we did all the previous steps, we can fire the drag event of the sortable on every draggable drag, when it intersects with the sortable\r\n\t\t\t\tif(this.instance.currentItem) {\r\n\t\t\t\t\tthis.instance._mouseDrag(event);\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t//If it doesn't intersect with the sortable, and it intersected before,\r\n\t\t\t\t//we fake the drag stop of the sortable, but make sure it doesn't remove the helper by using cancelHelperRemoval\r\n\t\t\t\tif(this.instance.isOver) {\r\n\r\n\t\t\t\t\tthis.instance.isOver = 0;\r\n\t\t\t\t\tthis.instance.cancelHelperRemoval = true;\r\n\r\n\t\t\t\t\t//Prevent reverting on this forced stop\r\n\t\t\t\t\tthis.instance.options.revert = false;\r\n\r\n\t\t\t\t\t// The out event needs to be triggered independently\r\n\t\t\t\t\tthis.instance._trigger(\"out\", event, this.instance._uiHash(this.instance));\r\n\r\n\t\t\t\t\tthis.instance._mouseStop(event, true);\r\n\t\t\t\t\tthis.instance.options.helper = this.instance.options._helper;\r\n\r\n\t\t\t\t\t//Now we remove our currentItem, the list group clone again, and the placeholder, and animate the helper back to it's original size\r\n\t\t\t\t\tthis.instance.currentItem.remove();\r\n\t\t\t\t\tif(this.instance.placeholder) {\r\n\t\t\t\t\t\tthis.instance.placeholder.remove();\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tinst._trigger(\"fromSortable\", event);\r\n\t\t\t\t\tinst.dropped = false; //draggable revert needs that\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t});\r\n\r\n\t}\r\n});\r\n\r\n$.ui.plugin.add(\"draggable\", \"cursor\", {\r\n\tstart: function() {\r\n\t\tvar t = $(\"body\"), o = $(this).data(\"ui-draggable\").options;\r\n\t\tif (t.css(\"cursor\")) {\r\n\t\t\to._cursor = t.css(\"cursor\");\r\n\t\t}\r\n\t\tt.css(\"cursor\", o.cursor);\r\n\t},\r\n\tstop: function() {\r\n\t\tvar o = $(this).data(\"ui-draggable\").options;\r\n\t\tif (o._cursor) {\r\n\t\t\t$(\"body\").css(\"cursor\", o._cursor);\r\n\t\t}\r\n\t}\r\n});\r\n\r\n$.ui.plugin.add(\"draggable\", \"opacity\", {\r\n\tstart: function(event, ui) {\r\n\t\tvar t = $(ui.helper), o = $(this).data(\"ui-draggable\").options;\r\n\t\tif(t.css(\"opacity\")) {\r\n\t\t\to._opacity = t.css(\"opacity\");\r\n\t\t}\r\n\t\tt.css(\"opacity\", o.opacity);\r\n\t},\r\n\tstop: function(event, ui) {\r\n\t\tvar o = $(this).data(\"ui-draggable\").options;\r\n\t\tif(o._opacity) {\r\n\t\t\t$(ui.helper).css(\"opacity\", o._opacity);\r\n\t\t}\r\n\t}\r\n});\r\n\r\n$.ui.plugin.add(\"draggable\", \"scroll\", {\r\n\tstart: function() {\r\n\t\tvar i = $(this).data(\"ui-draggable\");\r\n\t\tif(i.scrollParent[0] !== document && i.scrollParent[0].tagName !== \"HTML\") {\r\n\t\t\ti.overflowOffset = i.scrollParent.offset();\r\n\t\t}\r\n\t},\r\n\tdrag: function( event ) {\r\n\r\n\t\tvar i = $(this).data(\"ui-draggable\"), o = i.options, scrolled = false;\r\n\r\n\t\tif(i.scrollParent[0] !== document && i.scrollParent[0].tagName !== \"HTML\") {\r\n\r\n\t\t\tif(!o.axis || o.axis !== \"x\") {\r\n\t\t\t\tif((i.overflowOffset.top + i.scrollParent[0].offsetHeight) - event.pageY < o.scrollSensitivity) {\r\n\t\t\t\t\ti.scrollParent[0].scrollTop = scrolled = i.scrollParent[0].scrollTop + o.scrollSpeed;\r\n\t\t\t\t} else if(event.pageY - i.overflowOffset.top < o.scrollSensitivity) {\r\n\t\t\t\t\ti.scrollParent[0].scrollTop = scrolled = i.scrollParent[0].scrollTop - o.scrollSpeed;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif(!o.axis || o.axis !== \"y\") {\r\n\t\t\t\tif((i.overflowOffset.left + i.scrollParent[0].offsetWidth) - event.pageX < o.scrollSensitivity) {\r\n\t\t\t\t\ti.scrollParent[0].scrollLeft = scrolled = i.scrollParent[0].scrollLeft + o.scrollSpeed;\r\n\t\t\t\t} else if(event.pageX - i.overflowOffset.left < o.scrollSensitivity) {\r\n\t\t\t\t\ti.scrollParent[0].scrollLeft = scrolled = i.scrollParent[0].scrollLeft - o.scrollSpeed;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\tif(!o.axis || o.axis !== \"x\") {\r\n\t\t\t\tif(event.pageY - $(document).scrollTop() < o.scrollSensitivity) {\r\n\t\t\t\t\tscrolled = $(document).scrollTop($(document).scrollTop() - o.scrollSpeed);\r\n\t\t\t\t} else if($(window).height() - (event.pageY - $(document).scrollTop()) < o.scrollSensitivity) {\r\n\t\t\t\t\tscrolled = $(document).scrollTop($(document).scrollTop() + o.scrollSpeed);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif(!o.axis || o.axis !== \"y\") {\r\n\t\t\t\tif(event.pageX - $(document).scrollLeft() < o.scrollSensitivity) {\r\n\t\t\t\t\tscrolled = $(document).scrollLeft($(document).scrollLeft() - o.scrollSpeed);\r\n\t\t\t\t} else if($(window).width() - (event.pageX - $(document).scrollLeft()) < o.scrollSensitivity) {\r\n\t\t\t\t\tscrolled = $(document).scrollLeft($(document).scrollLeft() + o.scrollSpeed);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif(scrolled !== false && $.ui.ddmanager && !o.dropBehaviour) {\r\n\t\t\t$.ui.ddmanager.prepareOffsets(i, event);\r\n\t\t}\r\n\r\n\t}\r\n});\r\n\r\n$.ui.plugin.add(\"draggable\", \"snap\", {\r\n\tstart: function() {\r\n\r\n\t\tvar i = $(this).data(\"ui-draggable\"),\r\n\t\t\to = i.options;\r\n\r\n\t\ti.snapElements = [];\r\n\r\n\t\t$(o.snap.constructor !== String ? ( o.snap.items || \":data(ui-draggable)\" ) : o.snap).each(function() {\r\n\t\t\tvar $t = $(this),\r\n\t\t\t\t$o = $t.offset();\r\n\t\t\tif(this !== i.element[0]) {\r\n\t\t\t\ti.snapElements.push({\r\n\t\t\t\t\titem: this,\r\n\t\t\t\t\twidth: $t.outerWidth(), height: $t.outerHeight(),\r\n\t\t\t\t\ttop: $o.top, left: $o.left\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t},\r\n\tdrag: function(event, ui) {\r\n\r\n\t\tvar ts, bs, ls, rs, l, r, t, b, i, first,\r\n\t\t\tinst = $(this).data(\"ui-draggable\"),\r\n\t\t\to = inst.options,\r\n\t\t\td = o.snapTolerance,\r\n\t\t\tx1 = ui.offset.left, x2 = x1 + inst.helperProportions.width,\r\n\t\t\ty1 = ui.offset.top, y2 = y1 + inst.helperProportions.height;\r\n\r\n\t\tfor (i = inst.snapElements.length - 1; i >= 0; i--){\r\n\r\n\t\t\tl = inst.snapElements[i].left;\r\n\t\t\tr = l + inst.snapElements[i].width;\r\n\t\t\tt = inst.snapElements[i].top;\r\n\t\t\tb = t + inst.snapElements[i].height;\r\n\r\n\t\t\t//Yes, I know, this is insane ;)\r\n\t\t\tif(!((l-d < x1 && x1 < r+d && t-d < y1 && y1 < b+d) || (l-d < x1 && x1 < r+d && t-d < y2 && y2 < b+d) || (l-d < x2 && x2 < r+d && t-d < y1 && y1 < b+d) || (l-d < x2 && x2 < r+d && t-d < y2 && y2 < b+d))) {\r\n\t\t\t\tif(inst.snapElements[i].snapping) {\r\n\t\t\t\t\t(inst.options.snap.release && inst.options.snap.release.call(inst.element, event, $.extend(inst._uiHash(), { snapItem: inst.snapElements[i].item })));\r\n\t\t\t\t}\r\n\t\t\t\tinst.snapElements[i].snapping = false;\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\r\n\t\t\tif(o.snapMode !== \"inner\") {\r\n\t\t\t\tts = Math.abs(t - y2) <= d;\r\n\t\t\t\tbs = Math.abs(b - y1) <= d;\r\n\t\t\t\tls = Math.abs(l - x2) <= d;\r\n\t\t\t\trs = Math.abs(r - x1) <= d;\r\n\t\t\t\tif(ts) {\r\n\t\t\t\t\tui.position.top = inst._convertPositionTo(\"relative\", { top: t - inst.helperProportions.height, left: 0 }).top - inst.margins.top;\r\n\t\t\t\t}\r\n\t\t\t\tif(bs) {\r\n\t\t\t\t\tui.position.top = inst._convertPositionTo(\"relative\", { top: b, left: 0 }).top - inst.margins.top;\r\n\t\t\t\t}\r\n\t\t\t\tif(ls) {\r\n\t\t\t\t\tui.position.left = inst._convertPositionTo(\"relative\", { top: 0, left: l - inst.helperProportions.width }).left - inst.margins.left;\r\n\t\t\t\t}\r\n\t\t\t\tif(rs) {\r\n\t\t\t\t\tui.position.left = inst._convertPositionTo(\"relative\", { top: 0, left: r }).left - inst.margins.left;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tfirst = (ts || bs || ls || rs);\r\n\r\n\t\t\tif(o.snapMode !== \"outer\") {\r\n\t\t\t\tts = Math.abs(t - y1) <= d;\r\n\t\t\t\tbs = Math.abs(b - y2) <= d;\r\n\t\t\t\tls = Math.abs(l - x1) <= d;\r\n\t\t\t\trs = Math.abs(r - x2) <= d;\r\n\t\t\t\tif(ts) {\r\n\t\t\t\t\tui.position.top = inst._convertPositionTo(\"relative\", { top: t, left: 0 }).top - inst.margins.top;\r\n\t\t\t\t}\r\n\t\t\t\tif(bs) {\r\n\t\t\t\t\tui.position.top = inst._convertPositionTo(\"relative\", { top: b - inst.helperProportions.height, left: 0 }).top - inst.margins.top;\r\n\t\t\t\t}\r\n\t\t\t\tif(ls) {\r\n\t\t\t\t\tui.position.left = inst._convertPositionTo(\"relative\", { top: 0, left: l }).left - inst.margins.left;\r\n\t\t\t\t}\r\n\t\t\t\tif(rs) {\r\n\t\t\t\t\tui.position.left = inst._convertPositionTo(\"relative\", { top: 0, left: r - inst.helperProportions.width }).left - inst.margins.left;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif(!inst.snapElements[i].snapping && (ts || bs || ls || rs || first)) {\r\n\t\t\t\t(inst.options.snap.snap && inst.options.snap.snap.call(inst.element, event, $.extend(inst._uiHash(), { snapItem: inst.snapElements[i].item })));\r\n\t\t\t}\r\n\t\t\tinst.snapElements[i].snapping = (ts || bs || ls || rs || first);\r\n\r\n\t\t}\r\n\r\n\t}\r\n});\r\n\r\n$.ui.plugin.add(\"draggable\", \"stack\", {\r\n\tstart: function() {\r\n\t\tvar min,\r\n\t\t\to = this.data(\"ui-draggable\").options,\r\n\t\t\tgroup = $.makeArray($(o.stack)).sort(function(a,b) {\r\n\t\t\t\treturn (parseInt($(a).css(\"zIndex\"),10) || 0) - (parseInt($(b).css(\"zIndex\"),10) || 0);\r\n\t\t\t});\r\n\r\n\t\tif (!group.length) { return; }\r\n\r\n\t\tmin = parseInt($(group[0]).css(\"zIndex\"), 10) || 0;\r\n\t\t$(group).each(function(i) {\r\n\t\t\t$(this).css(\"zIndex\", min + i);\r\n\t\t});\r\n\t\tthis.css(\"zIndex\", (min + group.length));\r\n\t}\r\n});\r\n\r\n$.ui.plugin.add(\"draggable\", \"zIndex\", {\r\n\tstart: function(event, ui) {\r\n\t\tvar t = $(ui.helper), o = $(this).data(\"ui-draggable\").options;\r\n\t\tif(t.css(\"zIndex\")) {\r\n\t\t\to._zIndex = t.css(\"zIndex\");\r\n\t\t}\r\n\t\tt.css(\"zIndex\", o.zIndex);\r\n\t},\r\n\tstop: function(event, ui) {\r\n\t\tvar o = $(this).data(\"ui-draggable\").options;\r\n\t\tif(o._zIndex) {\r\n\t\t\t$(ui.helper).css(\"zIndex\", o._zIndex);\r\n\t\t}\r\n\t}\r\n});\r\n\r\n})(jQuery);\r\n\r\n(function( $, undefined ) {\r\n\r\nfunction isOverAxis( x, reference, size ) {\r\n\treturn ( x > reference ) && ( x < ( reference + size ) );\r\n}\r\n\r\n$.widget(\"ui.droppable\", {\r\n\tversion: \"1.10.2\",\r\n\twidgetEventPrefix: \"drop\",\r\n\toptions: {\r\n\t\taccept: \"*\",\r\n\t\tactiveClass: false,\r\n\t\taddClasses: true,\r\n\t\tgreedy: false,\r\n\t\thoverClass: false,\r\n\t\tscope: \"default\",\r\n\t\ttolerance: \"intersect\",\r\n\r\n\t\t// callbacks\r\n\t\tactivate: null,\r\n\t\tdeactivate: null,\r\n\t\tdrop: null,\r\n\t\tout: null,\r\n\t\tover: null\r\n\t},\r\n\t_create: function() {\r\n\r\n\t\tvar o = this.options,\r\n\t\t\taccept = o.accept;\r\n\r\n\t\tthis.isover = false;\r\n\t\tthis.isout = true;\r\n\r\n\t\tthis.accept = $.isFunction(accept) ? accept : function(d) {\r\n\t\t\treturn d.is(accept);\r\n\t\t};\r\n\r\n\t\t//Store the droppable's proportions\r\n\t\tthis.proportions = { width: this.element[0].offsetWidth, height: this.element[0].offsetHeight };\r\n\r\n\t\t// Add the reference and positions to the manager\r\n\t\t$.ui.ddmanager.droppables[o.scope] = $.ui.ddmanager.droppables[o.scope] || [];\r\n\t\t$.ui.ddmanager.droppables[o.scope].push(this);\r\n\r\n\t\t(o.addClasses && this.element.addClass(\"ui-droppable\"));\r\n\r\n\t},\r\n\r\n\t_destroy: function() {\r\n\t\tvar i = 0,\r\n\t\t\tdrop = $.ui.ddmanager.droppables[this.options.scope];\r\n\r\n\t\tfor ( ; i < drop.length; i++ ) {\r\n\t\t\tif ( drop[i] === this ) {\r\n\t\t\t\tdrop.splice(i, 1);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.element.removeClass(\"ui-droppable ui-droppable-disabled\");\r\n\t},\r\n\r\n\t_setOption: function(key, value) {\r\n\r\n\t\tif(key === \"accept\") {\r\n\t\t\tthis.accept = $.isFunction(value) ? value : function(d) {\r\n\t\t\t\treturn d.is(value);\r\n\t\t\t};\r\n\t\t}\r\n\t\t$.Widget.prototype._setOption.apply(this, arguments);\r\n\t},\r\n\r\n\t_activate: function(event) {\r\n\t\tvar draggable = $.ui.ddmanager.current;\r\n\t\tif(this.options.activeClass) {\r\n\t\t\tthis.element.addClass(this.options.activeClass);\r\n\t\t}\r\n\t\tif(draggable){\r\n\t\t\tthis._trigger(\"activate\", event, this.ui(draggable));\r\n\t\t}\r\n\t},\r\n\r\n\t_deactivate: function(event) {\r\n\t\tvar draggable = $.ui.ddmanager.current;\r\n\t\tif(this.options.activeClass) {\r\n\t\t\tthis.element.removeClass(this.options.activeClass);\r\n\t\t}\r\n\t\tif(draggable){\r\n\t\t\tthis._trigger(\"deactivate\", event, this.ui(draggable));\r\n\t\t}\r\n\t},\r\n\r\n\t_over: function(event) {\r\n\r\n\t\tvar draggable = $.ui.ddmanager.current;\r\n\r\n\t\t// Bail if draggable and droppable are same element\r\n\t\tif (!draggable || (draggable.currentItem || draggable.element)[0] === this.element[0]) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (this.accept.call(this.element[0],(draggable.currentItem || draggable.element))) {\r\n\t\t\tif(this.options.hoverClass) {\r\n\t\t\t\tthis.element.addClass(this.options.hoverClass);\r\n\t\t\t}\r\n\t\t\tthis._trigger(\"over\", event, this.ui(draggable));\r\n\t\t}\r\n\r\n\t},\r\n\r\n\t_out: function(event) {\r\n\r\n\t\tvar draggable = $.ui.ddmanager.current;\r\n\r\n\t\t// Bail if draggable and droppable are same element\r\n\t\tif (!draggable || (draggable.currentItem || draggable.element)[0] === this.element[0]) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (this.accept.call(this.element[0],(draggable.currentItem || draggable.element))) {\r\n\t\t\tif(this.options.hoverClass) {\r\n\t\t\t\tthis.element.removeClass(this.options.hoverClass);\r\n\t\t\t}\r\n\t\t\tthis._trigger(\"out\", event, this.ui(draggable));\r\n\t\t}\r\n\r\n\t},\r\n\r\n\t_drop: function(event,custom) {\r\n\r\n\t\tvar draggable = custom || $.ui.ddmanager.current,\r\n\t\t\tchildrenIntersection = false;\r\n\r\n\t\t// Bail if draggable and droppable are same element\r\n\t\tif (!draggable || (draggable.currentItem || draggable.element)[0] === this.element[0]) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tthis.element.find(\":data(ui-droppable)\").not(\".ui-draggable-dragging\").each(function() {\r\n\t\t\tvar inst = $.data(this, \"ui-droppable\");\r\n\t\t\tif(\r\n\t\t\t\tinst.options.greedy &&\r\n\t\t\t\t!inst.options.disabled &&\r\n\t\t\t\tinst.options.scope === draggable.options.scope &&\r\n\t\t\t\tinst.accept.call(inst.element[0], (draggable.currentItem || draggable.element)) &&\r\n\t\t\t\t$.ui.intersect(draggable, $.extend(inst, { offset: inst.element.offset() }), inst.options.tolerance)\r\n\t\t\t) { childrenIntersection = true; return false; }\r\n\t\t});\r\n\t\tif(childrenIntersection) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tif(this.accept.call(this.element[0],(draggable.currentItem || draggable.element))) {\r\n\t\t\tif(this.options.activeClass) {\r\n\t\t\t\tthis.element.removeClass(this.options.activeClass);\r\n\t\t\t}\r\n\t\t\tif(this.options.hoverClass) {\r\n\t\t\t\tthis.element.removeClass(this.options.hoverClass);\r\n\t\t\t}\r\n\t\t\tthis._trigger(\"drop\", event, this.ui(draggable));\r\n\t\t\treturn this.element;\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\r\n\t},\r\n\r\n\tui: function(c) {\r\n\t\treturn {\r\n\t\t\tdraggable: (c.currentItem || c.element),\r\n\t\t\thelper: c.helper,\r\n\t\t\tposition: c.position,\r\n\t\t\toffset: c.positionAbs\r\n\t\t};\r\n\t}\r\n\r\n});\r\n\r\n$.ui.intersect = function(draggable, droppable, toleranceMode) {\r\n\r\n\tif (!droppable.offset) {\r\n\t\treturn false;\r\n\t}\r\n\r\n\tvar draggableLeft, draggableTop,\r\n\t\tx1 = (draggable.positionAbs || draggable.position.absolute).left, x2 = x1 + draggable.helperProportions.width,\r\n\t\ty1 = (draggable.positionAbs || draggable.position.absolute).top, y2 = y1 + draggable.helperProportions.height,\r\n\t\tl = droppable.offset.left, r = l + droppable.proportions.width,\r\n\t\tt = droppable.offset.top, b = t + droppable.proportions.height;\r\n\r\n\tswitch (toleranceMode) {\r\n\t\tcase \"fit\":\r\n\t\t\treturn (l <= x1 && x2 <= r && t <= y1 && y2 <= b);\r\n\t\tcase \"intersect\":\r\n\t\t\treturn (l < x1 + (draggable.helperProportions.width / 2) && // Right Half\r\n\t\t\t\tx2 - (draggable.helperProportions.width / 2) < r && // Left Half\r\n\t\t\t\tt < y1 + (draggable.helperProportions.height / 2) && // Bottom Half\r\n\t\t\t\ty2 - (draggable.helperProportions.height / 2) < b ); // Top Half\r\n\t\tcase \"pointer\":\r\n\t\t\tdraggableLeft = ((draggable.positionAbs || draggable.position.absolute).left + (draggable.clickOffset || draggable.offset.click).left);\r\n\t\t\tdraggableTop = ((draggable.positionAbs || draggable.position.absolute).top + (draggable.clickOffset || draggable.offset.click).top);\r\n\t\t\treturn isOverAxis( draggableTop, t, droppable.proportions.height ) && isOverAxis( draggableLeft, l, droppable.proportions.width );\r\n\t\tcase \"touch\":\r\n\t\t\treturn (\r\n\t\t\t\t(y1 >= t && y1 <= b) ||\t// Top edge touching\r\n\t\t\t\t(y2 >= t && y2 <= b) ||\t// Bottom edge touching\r\n\t\t\t\t(y1 < t && y2 > b)\t\t// Surrounded vertically\r\n\t\t\t) && (\r\n\t\t\t\t(x1 >= l && x1 <= r) ||\t// Left edge touching\r\n\t\t\t\t(x2 >= l && x2 <= r) ||\t// Right edge touching\r\n\t\t\t\t(x1 < l && x2 > r)\t\t// Surrounded horizontally\r\n\t\t\t);\r\n\t\tdefault:\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n};\r\n\r\n/*\r\n\tThis manager tracks offsets of draggables and droppables\r\n*/\r\n$.ui.ddmanager = {\r\n\tcurrent: null,\r\n\tdroppables: { \"default\": [] },\r\n\tprepareOffsets: function(t, event) {\r\n\r\n\t\tvar i, j,\r\n\t\t\tm = $.ui.ddmanager.droppables[t.options.scope] || [],\r\n\t\t\ttype = event ? event.type : null, // workaround for #2317\r\n\t\t\tlist = (t.currentItem || t.element).find(\":data(ui-droppable)\").addBack();\r\n\r\n\t\tdroppablesLoop: for (i = 0; i < m.length; i++) {\r\n\r\n\t\t\t//No disabled and non-accepted\r\n\t\t\tif(m[i].options.disabled || (t && !m[i].accept.call(m[i].element[0],(t.currentItem || t.element)))) {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\r\n\t\t\t// Filter out elements in the current dragged item\r\n\t\t\tfor (j=0; j < list.length; j++) {\r\n\t\t\t\tif(list[j] === m[i].element[0]) {\r\n\t\t\t\t\tm[i].proportions.height = 0;\r\n\t\t\t\t\tcontinue droppablesLoop;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tm[i].visible = m[i].element.css(\"display\") !== \"none\";\r\n\t\t\tif(!m[i].visible) {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\r\n\t\t\t//Activate the droppable if used directly from draggables\r\n\t\t\tif(type === \"mousedown\") {\r\n\t\t\t\tm[i]._activate.call(m[i], event);\r\n\t\t\t}\r\n\r\n\t\t\tm[i].offset = m[i].element.offset();\r\n\t\t\tm[i].proportions = { width: m[i].element[0].offsetWidth, height: m[i].element[0].offsetHeight };\r\n\r\n\t\t}\r\n\r\n\t},\r\n\tdrop: function(draggable, event) {\r\n\r\n\t\tvar dropped = false;\r\n\t\t// Create a copy of the droppables in case the list changes during the drop (#9116)\r\n\t\t$.each(($.ui.ddmanager.droppables[draggable.options.scope] || []).slice(), function() {\r\n\r\n\t\t\tif(!this.options) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (!this.options.disabled && this.visible && $.ui.intersect(draggable, this, this.options.tolerance)) {\r\n\t\t\t\tdropped = this._drop.call(this, event) || dropped;\r\n\t\t\t}\r\n\r\n\t\t\tif (!this.options.disabled && this.visible && this.accept.call(this.element[0],(draggable.currentItem || draggable.element))) {\r\n\t\t\t\tthis.isout = true;\r\n\t\t\t\tthis.isover = false;\r\n\t\t\t\tthis._deactivate.call(this, event);\r\n\t\t\t}\r\n\r\n\t\t});\r\n\t\treturn dropped;\r\n\r\n\t},\r\n\tdragStart: function( draggable, event ) {\r\n\t\t//Listen for scrolling so that if the dragging causes scrolling the position of the droppables can be recalculated (see #5003)\r\n\t\tdraggable.element.parentsUntil( \"body\" ).bind( \"scroll.droppable\", function() {\r\n\t\t\tif( !draggable.options.refreshPositions ) {\r\n\t\t\t\t$.ui.ddmanager.prepareOffsets( draggable, event );\r\n\t\t\t}\r\n\t\t});\r\n\t},\r\n\tdrag: function(draggable, event) {\r\n\r\n\t\t//If you have a highly dynamic page, you might try this option. It renders positions every time you move the mouse.\r\n\t\tif(draggable.options.refreshPositions) {\r\n\t\t\t$.ui.ddmanager.prepareOffsets(draggable, event);\r\n\t\t}\r\n\r\n\t\t//Run through all droppables and check their positions based on specific tolerance options\r\n\t\t$.each($.ui.ddmanager.droppables[draggable.options.scope] || [], function() {\r\n\r\n\t\t\tif(this.options.disabled || this.greedyChild || !this.visible) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tvar parentInstance, scope, parent,\r\n\t\t\t\tintersects = $.ui.intersect(draggable, this, this.options.tolerance),\r\n\t\t\t\tc = !intersects && this.isover ? \"isout\" : (intersects && !this.isover ? \"isover\" : null);\r\n\t\t\tif(!c) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif (this.options.greedy) {\r\n\t\t\t\t// find droppable parents with same scope\r\n\t\t\t\tscope = this.options.scope;\r\n\t\t\t\tparent = this.element.parents(\":data(ui-droppable)\").filter(function () {\r\n\t\t\t\t\treturn $.data(this, \"ui-droppable\").options.scope === scope;\r\n\t\t\t\t});\r\n\r\n\t\t\t\tif (parent.length) {\r\n\t\t\t\t\tparentInstance = $.data(parent[0], \"ui-droppable\");\r\n\t\t\t\t\tparentInstance.greedyChild = (c === \"isover\");\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// we just moved into a greedy child\r\n\t\t\tif (parentInstance && c === \"isover\") {\r\n\t\t\t\tparentInstance.isover = false;\r\n\t\t\t\tparentInstance.isout = true;\r\n\t\t\t\tparentInstance._out.call(parentInstance, event);\r\n\t\t\t}\r\n\r\n\t\t\tthis[c] = true;\r\n\t\t\tthis[c === \"isout\" ? \"isover\" : \"isout\"] = false;\r\n\t\t\tthis[c === \"isover\" ? \"_over\" : \"_out\"].call(this, event);\r\n\r\n\t\t\t// we just moved out of a greedy child\r\n\t\t\tif (parentInstance && c === \"isout\") {\r\n\t\t\t\tparentInstance.isout = false;\r\n\t\t\t\tparentInstance.isover = true;\r\n\t\t\t\tparentInstance._over.call(parentInstance, event);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t},\r\n\tdragStop: function( draggable, event ) {\r\n\t\tdraggable.element.parentsUntil( \"body\" ).unbind( \"scroll.droppable\" );\r\n\t\t//Call prepareOffsets one final time since IE does not fire return scroll events when overflow was caused by drag (see #5003)\r\n\t\tif( !draggable.options.refreshPositions ) {\r\n\t\t\t$.ui.ddmanager.prepareOffsets( draggable, event );\r\n\t\t}\r\n\t}\r\n};\r\n\r\n})(jQuery);\r\n\r\n(function( $, undefined ) {\r\n\r\nfunction num(v) {\r\n\treturn parseInt(v, 10) || 0;\r\n}\r\n\r\nfunction isNumber(value) {\r\n\treturn !isNaN(parseInt(value, 10));\r\n}\r\n\r\n$.widget(\"ui.resizable\", $.ui.mouse, {\r\n\tversion: \"1.10.2\",\r\n\twidgetEventPrefix: \"resize\",\r\n\toptions: {\r\n\t\talsoResize: false,\r\n\t\tanimate: false,\r\n\t\tanimateDuration: \"slow\",\r\n\t\tanimateEasing: \"swing\",\r\n\t\taspectRatio: false,\r\n\t\tautoHide: false,\r\n\t\tcontainment: false,\r\n\t\tghost: false,\r\n\t\tgrid: false,\r\n\t\thandles: \"e,s,se\",\r\n\t\thelper: false,\r\n\t\tmaxHeight: null,\r\n\t\tmaxWidth: null,\r\n\t\tminHeight: 10,\r\n\t\tminWidth: 10,\r\n\t\t// See #7960\r\n\t\tzIndex: 90,\r\n\r\n\t\t// callbacks\r\n\t\tresize: null,\r\n\t\tstart: null,\r\n\t\tstop: null\r\n\t},\r\n\t_create: function() {\r\n\r\n\t\tvar n, i, handle, axis, hname,\r\n\t\t\tthat = this,\r\n\t\t\to = this.options;\r\n\t\tthis.element.addClass(\"ui-resizable\");\r\n\r\n\t\t$.extend(this, {\r\n\t\t\t_aspectRatio: !!(o.aspectRatio),\r\n\t\t\taspectRatio: o.aspectRatio,\r\n\t\t\toriginalElement: this.element,\r\n\t\t\t_proportionallyResizeElements: [],\r\n\t\t\t_helper: o.helper || o.ghost || o.animate ? o.helper || \"ui-resizable-helper\" : null\r\n\t\t});\r\n\r\n\t\t//Wrap the element if it cannot hold child nodes\r\n\t\tif(this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)) {\r\n\r\n\t\t\t//Create a wrapper element and set the wrapper to the new current internal element\r\n\t\t\tthis.element.wrap(\r\n\t\t\t\t$(\"<div class='ui-wrapper' style='overflow: hidden;'></div>\").css({\r\n\t\t\t\t\tposition: this.element.css(\"position\"),\r\n\t\t\t\t\twidth: this.element.outerWidth(),\r\n\t\t\t\t\theight: this.element.outerHeight(),\r\n\t\t\t\t\ttop: this.element.css(\"top\"),\r\n\t\t\t\t\tleft: this.element.css(\"left\")\r\n\t\t\t\t})\r\n\t\t\t);\r\n\r\n\t\t\t//Overwrite the original this.element\r\n\t\t\tthis.element = this.element.parent().data(\r\n\t\t\t\t\"ui-resizable\", this.element.data(\"ui-resizable\")\r\n\t\t\t);\r\n\r\n\t\t\tthis.elementIsWrapper = true;\r\n\r\n\t\t\t//Move margins to the wrapper\r\n\t\t\tthis.element.css({ marginLeft: this.originalElement.css(\"marginLeft\"), marginTop: this.originalElement.css(\"marginTop\"), marginRight: this.originalElement.css(\"marginRight\"), marginBottom: this.originalElement.css(\"marginBottom\") });\r\n\t\t\tthis.originalElement.css({ marginLeft: 0, marginTop: 0, marginRight: 0, marginBottom: 0});\r\n\r\n\t\t\t//Prevent Safari textarea resize\r\n\t\t\tthis.originalResizeStyle = this.originalElement.css(\"resize\");\r\n\t\t\tthis.originalElement.css(\"resize\", \"none\");\r\n\r\n\t\t\t//Push the actual element to our proportionallyResize internal array\r\n\t\t\tthis._proportionallyResizeElements.push(this.originalElement.css({ position: \"static\", zoom: 1, display: \"block\" }));\r\n\r\n\t\t\t// avoid IE jump (hard set the margin)\r\n\t\t\tthis.originalElement.css({ margin: this.originalElement.css(\"margin\") });\r\n\r\n\t\t\t// fix handlers offset\r\n\t\t\tthis._proportionallyResize();\r\n\r\n\t\t}\r\n\r\n\t\tthis.handles = o.handles || (!$(\".ui-resizable-handle\", this.element).length ? \"e,s,se\" : { n: \".ui-resizable-n\", e: \".ui-resizable-e\", s: \".ui-resizable-s\", w: \".ui-resizable-w\", se: \".ui-resizable-se\", sw: \".ui-resizable-sw\", ne: \".ui-resizable-ne\", nw: \".ui-resizable-nw\" });\r\n\t\tif(this.handles.constructor === String) {\r\n\r\n\t\t\tif ( this.handles === \"all\") {\r\n\t\t\t\tthis.handles = \"n,e,s,w,se,sw,ne,nw\";\r\n\t\t\t}\r\n\r\n\t\t\tn = this.handles.split(\",\");\r\n\t\t\tthis.handles = {};\r\n\r\n\t\t\tfor(i = 0; i < n.length; i++) {\r\n\r\n\t\t\t\thandle = $.trim(n[i]);\r\n\t\t\t\thname = \"ui-resizable-\"+handle;\r\n\t\t\t\taxis = $(\"<div class='ui-resizable-handle \" + hname + \"'></div>\");\r\n\r\n\t\t\t\t// Apply zIndex to all handles - see #7960\r\n\t\t\t\taxis.css({ zIndex: o.zIndex });\r\n\r\n\t\t\t\t//TODO : What's going on here?\r\n\t\t\t\tif (\"se\" === handle) {\r\n\t\t\t\t\taxis.addClass(\"ui-icon ui-icon-gripsmall-diagonal-se\");\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//Insert into internal handles object and append to element\r\n\t\t\t\tthis.handles[handle] = \".ui-resizable-\"+handle;\r\n\t\t\t\tthis.element.append(axis);\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tthis._renderAxis = function(target) {\r\n\r\n\t\t\tvar i, axis, padPos, padWrapper;\r\n\r\n\t\t\ttarget = target || this.element;\r\n\r\n\t\t\tfor(i in this.handles) {\r\n\r\n\t\t\t\tif(this.handles[i].constructor === String) {\r\n\t\t\t\t\tthis.handles[i] = $(this.handles[i], this.element).show();\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//Apply pad to wrapper element, needed to fix axis position (textarea, inputs, scrolls)\r\n\t\t\t\tif (this.elementIsWrapper && this.originalElement[0].nodeName.match(/textarea|input|select|button/i)) {\r\n\r\n\t\t\t\t\taxis = $(this.handles[i], this.element);\r\n\r\n\t\t\t\t\t//Checking the correct pad and border\r\n\t\t\t\t\tpadWrapper = /sw|ne|nw|se|n|s/.test(i) ? axis.outerHeight() : axis.outerWidth();\r\n\r\n\t\t\t\t\t//The padding type i have to apply...\r\n\t\t\t\t\tpadPos = [ \"padding\",\r\n\t\t\t\t\t\t/ne|nw|n/.test(i) ? \"Top\" :\r\n\t\t\t\t\t\t/se|sw|s/.test(i) ? \"Bottom\" :\r\n\t\t\t\t\t\t/^e$/.test(i) ? \"Right\" : \"Left\" ].join(\"\");\r\n\r\n\t\t\t\t\ttarget.css(padPos, padWrapper);\r\n\r\n\t\t\t\t\tthis._proportionallyResize();\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//TODO: What's that good for? There's not anything to be executed left\r\n\t\t\t\tif(!$(this.handles[i]).length) {\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\t//TODO: make renderAxis a prototype function\r\n\t\tthis._renderAxis(this.element);\r\n\r\n\t\tthis._handles = $(\".ui-resizable-handle\", this.element)\r\n\t\t\t.disableSelection();\r\n\r\n\t\t//Matching axis name\r\n\t\tthis._handles.mouseover(function() {\r\n\t\t\tif (!that.resizing) {\r\n\t\t\t\tif (this.className) {\r\n\t\t\t\t\taxis = this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i);\r\n\t\t\t\t}\r\n\t\t\t\t//Axis, default = se\r\n\t\t\t\tthat.axis = axis && axis[1] ? axis[1] : \"se\";\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t//If we want to auto hide the elements\r\n\t\tif (o.autoHide) {\r\n\t\t\tthis._handles.hide();\r\n\t\t\t$(this.element)\r\n\t\t\t\t.addClass(\"ui-resizable-autohide\")\r\n\t\t\t\t.mouseenter(function() {\r\n\t\t\t\t\tif (o.disabled) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t$(this).removeClass(\"ui-resizable-autohide\");\r\n\t\t\t\t\tthat._handles.show();\r\n\t\t\t\t})\r\n\t\t\t\t.mouseleave(function(){\r\n\t\t\t\t\tif (o.disabled) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (!that.resizing) {\r\n\t\t\t\t\t\t$(this).addClass(\"ui-resizable-autohide\");\r\n\t\t\t\t\t\tthat._handles.hide();\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t}\r\n\r\n\t\t//Initialize the mouse interaction\r\n\t\tthis._mouseInit();\r\n\r\n\t},\r\n\r\n\t_destroy: function() {\r\n\r\n\t\tthis._mouseDestroy();\r\n\r\n\t\tvar wrapper,\r\n\t\t\t_destroy = function(exp) {\r\n\t\t\t\t$(exp).removeClass(\"ui-resizable ui-resizable-disabled ui-resizable-resizing\")\r\n\t\t\t\t\t.removeData(\"resizable\").removeData(\"ui-resizable\").unbind(\".resizable\").find(\".ui-resizable-handle\").remove();\r\n\t\t\t};\r\n\r\n\t\t//TODO: Unwrap at same DOM position\r\n\t\tif (this.elementIsWrapper) {\r\n\t\t\t_destroy(this.element);\r\n\t\t\twrapper = this.element;\r\n\t\t\tthis.originalElement.css({\r\n\t\t\t\tposition: wrapper.css(\"position\"),\r\n\t\t\t\twidth: wrapper.outerWidth(),\r\n\t\t\t\theight: wrapper.outerHeight(),\r\n\t\t\t\ttop: wrapper.css(\"top\"),\r\n\t\t\t\tleft: wrapper.css(\"left\")\r\n\t\t\t}).insertAfter( wrapper );\r\n\t\t\twrapper.remove();\r\n\t\t}\r\n\r\n\t\tthis.originalElement.css(\"resize\", this.originalResizeStyle);\r\n\t\t_destroy(this.originalElement);\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\t_mouseCapture: function(event) {\r\n\t\tvar i, handle,\r\n\t\t\tcapture = false;\r\n\r\n\t\tfor (i in this.handles) {\r\n\t\t\thandle = $(this.handles[i])[0];\r\n\t\t\tif (handle === event.target || $.contains(handle, event.target)) {\r\n\t\t\t\tcapture = true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn !this.options.disabled && capture;\r\n\t},\r\n\r\n\t_mouseStart: function(event) {\r\n\r\n\t\tvar curleft, curtop, cursor,\r\n\t\t\to = this.options,\r\n\t\t\tiniPos = this.element.position(),\r\n\t\t\tel = this.element;\r\n\r\n\t\tthis.resizing = true;\r\n\r\n\t\t// bugfix for http://dev.jquery.com/ticket/1749\r\n\t\tif ( (/absolute/).test( el.css(\"position\") ) ) {\r\n\t\t\tel.css({ position: \"absolute\", top: el.css(\"top\"), left: el.css(\"left\") });\r\n\t\t} else if (el.is(\".ui-draggable\")) {\r\n\t\t\tel.css({ position: \"absolute\", top: iniPos.top, left: iniPos.left });\r\n\t\t}\r\n\r\n\t\tthis._renderProxy();\r\n\r\n\t\tcurleft = num(this.helper.css(\"left\"));\r\n\t\tcurtop = num(this.helper.css(\"top\"));\r\n\r\n\t\tif (o.containment) {\r\n\t\t\tcurleft += $(o.containment).scrollLeft() || 0;\r\n\t\t\tcurtop += $(o.containment).scrollTop() || 0;\r\n\t\t}\r\n\r\n\t\t//Store needed variables\r\n\t\tthis.offset = this.helper.offset();\r\n\t\tthis.position = { left: curleft, top: curtop };\r\n\t\tthis.size = this._helper ? { width: el.outerWidth(), height: el.outerHeight() } : { width: el.width(), height: el.height() };\r\n\t\tthis.originalSize = this._helper ? { width: el.outerWidth(), height: el.outerHeight() } : { width: el.width(), height: el.height() };\r\n\t\tthis.originalPosition = { left: curleft, top: curtop };\r\n\t\tthis.sizeDiff = { width: el.outerWidth() - el.width(), height: el.outerHeight() - el.height() };\r\n\t\tthis.originalMousePosition = { left: event.pageX, top: event.pageY };\r\n\r\n\t\t//Aspect Ratio\r\n\t\tthis.aspectRatio = (typeof o.aspectRatio === \"number\") ? o.aspectRatio : ((this.originalSize.width / this.originalSize.height) || 1);\r\n\r\n\t\tcursor = $(\".ui-resizable-\" + this.axis).css(\"cursor\");\r\n\t\t$(\"body\").css(\"cursor\", cursor === \"auto\" ? this.axis + \"-resize\" : cursor);\r\n\r\n\t\tel.addClass(\"ui-resizable-resizing\");\r\n\t\tthis._propagate(\"start\", event);\r\n\t\treturn true;\r\n\t},\r\n\r\n\t_mouseDrag: function(event) {\r\n\r\n\t\t//Increase performance, avoid regex\r\n\t\tvar data,\r\n\t\t\tel = this.helper, props = {},\r\n\t\t\tsmp = this.originalMousePosition,\r\n\t\t\ta = this.axis,\r\n\t\t\tprevTop = this.position.top,\r\n\t\t\tprevLeft = this.position.left,\r\n\t\t\tprevWidth = this.size.width,\r\n\t\t\tprevHeight = this.size.height,\r\n\t\t\tdx = (event.pageX-smp.left)||0,\r\n\t\t\tdy = (event.pageY-smp.top)||0,\r\n\t\t\ttrigger = this._change[a];\r\n\r\n\t\tif (!trigger) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\t// Calculate the attrs that will be change\r\n\t\tdata = trigger.apply(this, [event, dx, dy]);\r\n\r\n\t\t// Put this in the mouseDrag handler since the user can start pressing shift while resizing\r\n\t\tthis._updateVirtualBoundaries(event.shiftKey);\r\n\t\tif (this._aspectRatio || event.shiftKey) {\r\n\t\t\tdata = this._updateRatio(data, event);\r\n\t\t}\r\n\r\n\t\tdata = this._respectSize(data, event);\r\n\r\n\t\tthis._updateCache(data);\r\n\r\n\t\t// plugins callbacks need to be called first\r\n\t\tthis._propagate(\"resize\", event);\r\n\r\n\t\tif (this.position.top !== prevTop) {\r\n\t\t\tprops.top = this.position.top + \"px\";\r\n\t\t}\r\n\t\tif (this.position.left !== prevLeft) {\r\n\t\t\tprops.left = this.position.left + \"px\";\r\n\t\t}\r\n\t\tif (this.size.width !== prevWidth) {\r\n\t\t\tprops.width = this.size.width + \"px\";\r\n\t\t}\r\n\t\tif (this.size.height !== prevHeight) {\r\n\t\t\tprops.height = this.size.height + \"px\";\r\n\t\t}\r\n\t\tel.css(props);\r\n\r\n\t\tif (!this._helper && this._proportionallyResizeElements.length) {\r\n\t\t\tthis._proportionallyResize();\r\n\t\t}\r\n\r\n\t\t// Call the user callback if the element was resized\r\n\t\tif ( ! $.isEmptyObject(props) ) {\r\n\t\t\tthis._trigger(\"resize\", event, this.ui());\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\t},\r\n\r\n\t_mouseStop: function(event) {\r\n\r\n\t\tthis.resizing = false;\r\n\t\tvar pr, ista, soffseth, soffsetw, s, left, top,\r\n\t\t\to = this.options, that = this;\r\n\r\n\t\tif(this._helper) {\r\n\r\n\t\t\tpr = this._proportionallyResizeElements;\r\n\t\t\tista = pr.length && (/textarea/i).test(pr[0].nodeName);\r\n\t\t\tsoffseth = ista && $.ui.hasScroll(pr[0], \"left\") /* TODO - jump height */ ? 0 : that.sizeDiff.height;\r\n\t\t\tsoffsetw = ista ? 0 : that.sizeDiff.width;\r\n\r\n\t\t\ts = { width: (that.helper.width()  - soffsetw), height: (that.helper.height() - soffseth) };\r\n\t\t\tleft = (parseInt(that.element.css(\"left\"), 10) + (that.position.left - that.originalPosition.left)) || null;\r\n\t\t\ttop = (parseInt(that.element.css(\"top\"), 10) + (that.position.top - that.originalPosition.top)) || null;\r\n\r\n\t\t\tif (!o.animate) {\r\n\t\t\t\tthis.element.css($.extend(s, { top: top, left: left }));\r\n\t\t\t}\r\n\r\n\t\t\tthat.helper.height(that.size.height);\r\n\t\t\tthat.helper.width(that.size.width);\r\n\r\n\t\t\tif (this._helper && !o.animate) {\r\n\t\t\t\tthis._proportionallyResize();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t$(\"body\").css(\"cursor\", \"auto\");\r\n\r\n\t\tthis.element.removeClass(\"ui-resizable-resizing\");\r\n\r\n\t\tthis._propagate(\"stop\", event);\r\n\r\n\t\tif (this._helper) {\r\n\t\t\tthis.helper.remove();\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\r\n\t},\r\n\r\n\t_updateVirtualBoundaries: function(forceAspectRatio) {\r\n\t\tvar pMinWidth, pMaxWidth, pMinHeight, pMaxHeight, b,\r\n\t\t\to = this.options;\r\n\r\n\t\tb = {\r\n\t\t\tminWidth: isNumber(o.minWidth) ? o.minWidth : 0,\r\n\t\t\tmaxWidth: isNumber(o.maxWidth) ? o.maxWidth : Infinity,\r\n\t\t\tminHeight: isNumber(o.minHeight) ? o.minHeight : 0,\r\n\t\t\tmaxHeight: isNumber(o.maxHeight) ? o.maxHeight : Infinity\r\n\t\t};\r\n\r\n\t\tif(this._aspectRatio || forceAspectRatio) {\r\n\t\t\t// We want to create an enclosing box whose aspect ration is the requested one\r\n\t\t\t// First, compute the \"projected\" size for each dimension based on the aspect ratio and other dimension\r\n\t\t\tpMinWidth = b.minHeight * this.aspectRatio;\r\n\t\t\tpMinHeight = b.minWidth / this.aspectRatio;\r\n\t\t\tpMaxWidth = b.maxHeight * this.aspectRatio;\r\n\t\t\tpMaxHeight = b.maxWidth / this.aspectRatio;\r\n\r\n\t\t\tif(pMinWidth > b.minWidth) {\r\n\t\t\t\tb.minWidth = pMinWidth;\r\n\t\t\t}\r\n\t\t\tif(pMinHeight > b.minHeight) {\r\n\t\t\t\tb.minHeight = pMinHeight;\r\n\t\t\t}\r\n\t\t\tif(pMaxWidth < b.maxWidth) {\r\n\t\t\t\tb.maxWidth = pMaxWidth;\r\n\t\t\t}\r\n\t\t\tif(pMaxHeight < b.maxHeight) {\r\n\t\t\t\tb.maxHeight = pMaxHeight;\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis._vBoundaries = b;\r\n\t},\r\n\r\n\t_updateCache: function(data) {\r\n\t\tthis.offset = this.helper.offset();\r\n\t\tif (isNumber(data.left)) {\r\n\t\t\tthis.position.left = data.left;\r\n\t\t}\r\n\t\tif (isNumber(data.top)) {\r\n\t\t\tthis.position.top = data.top;\r\n\t\t}\r\n\t\tif (isNumber(data.height)) {\r\n\t\t\tthis.size.height = data.height;\r\n\t\t}\r\n\t\tif (isNumber(data.width)) {\r\n\t\t\tthis.size.width = data.width;\r\n\t\t}\r\n\t},\r\n\r\n\t_updateRatio: function( data ) {\r\n\r\n\t\tvar cpos = this.position,\r\n\t\t\tcsize = this.size,\r\n\t\t\ta = this.axis;\r\n\r\n\t\tif (isNumber(data.height)) {\r\n\t\t\tdata.width = (data.height * this.aspectRatio);\r\n\t\t} else if (isNumber(data.width)) {\r\n\t\t\tdata.height = (data.width / this.aspectRatio);\r\n\t\t}\r\n\r\n\t\tif (a === \"sw\") {\r\n\t\t\tdata.left = cpos.left + (csize.width - data.width);\r\n\t\t\tdata.top = null;\r\n\t\t}\r\n\t\tif (a === \"nw\") {\r\n\t\t\tdata.top = cpos.top + (csize.height - data.height);\r\n\t\t\tdata.left = cpos.left + (csize.width - data.width);\r\n\t\t}\r\n\r\n\t\treturn data;\r\n\t},\r\n\r\n\t_respectSize: function( data ) {\r\n\r\n\t\tvar o = this._vBoundaries,\r\n\t\t\ta = this.axis,\r\n\t\t\tismaxw = isNumber(data.width) && o.maxWidth && (o.maxWidth < data.width), ismaxh = isNumber(data.height) && o.maxHeight && (o.maxHeight < data.height),\r\n\t\t\tisminw = isNumber(data.width) && o.minWidth && (o.minWidth > data.width), isminh = isNumber(data.height) && o.minHeight && (o.minHeight > data.height),\r\n\t\t\tdw = this.originalPosition.left + this.originalSize.width,\r\n\t\t\tdh = this.position.top + this.size.height,\r\n\t\t\tcw = /sw|nw|w/.test(a), ch = /nw|ne|n/.test(a);\r\n\t\tif (isminw) {\r\n\t\t\tdata.width = o.minWidth;\r\n\t\t}\r\n\t\tif (isminh) {\r\n\t\t\tdata.height = o.minHeight;\r\n\t\t}\r\n\t\tif (ismaxw) {\r\n\t\t\tdata.width = o.maxWidth;\r\n\t\t}\r\n\t\tif (ismaxh) {\r\n\t\t\tdata.height = o.maxHeight;\r\n\t\t}\r\n\r\n\t\tif (isminw && cw) {\r\n\t\t\tdata.left = dw - o.minWidth;\r\n\t\t}\r\n\t\tif (ismaxw && cw) {\r\n\t\t\tdata.left = dw - o.maxWidth;\r\n\t\t}\r\n\t\tif (isminh && ch) {\r\n\t\t\tdata.top = dh - o.minHeight;\r\n\t\t}\r\n\t\tif (ismaxh && ch) {\r\n\t\t\tdata.top = dh - o.maxHeight;\r\n\t\t}\r\n\r\n\t\t// fixing jump error on top/left - bug #2330\r\n\t\tif (!data.width && !data.height && !data.left && data.top) {\r\n\t\t\tdata.top = null;\r\n\t\t} else if (!data.width && !data.height && !data.top && data.left) {\r\n\t\t\tdata.left = null;\r\n\t\t}\r\n\r\n\t\treturn data;\r\n\t},\r\n\r\n\t_proportionallyResize: function() {\r\n\r\n\t\tif (!this._proportionallyResizeElements.length) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar i, j, borders, paddings, prel,\r\n\t\t\telement = this.helper || this.element;\r\n\r\n\t\tfor ( i=0; i < this._proportionallyResizeElements.length; i++) {\r\n\r\n\t\t\tprel = this._proportionallyResizeElements[i];\r\n\r\n\t\t\tif (!this.borderDif) {\r\n\t\t\t\tthis.borderDif = [];\r\n\t\t\t\tborders = [prel.css(\"borderTopWidth\"), prel.css(\"borderRightWidth\"), prel.css(\"borderBottomWidth\"), prel.css(\"borderLeftWidth\")];\r\n\t\t\t\tpaddings = [prel.css(\"paddingTop\"), prel.css(\"paddingRight\"), prel.css(\"paddingBottom\"), prel.css(\"paddingLeft\")];\r\n\r\n\t\t\t\tfor ( j = 0; j < borders.length; j++ ) {\r\n\t\t\t\t\tthis.borderDif[ j ] = ( parseInt( borders[ j ], 10 ) || 0 ) + ( parseInt( paddings[ j ], 10 ) || 0 );\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tprel.css({\r\n\t\t\t\theight: (element.height() - this.borderDif[0] - this.borderDif[2]) || 0,\r\n\t\t\t\twidth: (element.width() - this.borderDif[1] - this.borderDif[3]) || 0\r\n\t\t\t});\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\t_renderProxy: function() {\r\n\r\n\t\tvar el = this.element, o = this.options;\r\n\t\tthis.elementOffset = el.offset();\r\n\r\n\t\tif(this._helper) {\r\n\r\n\t\t\tthis.helper = this.helper || $(\"<div style='overflow:hidden;'></div>\");\r\n\r\n\t\t\tthis.helper.addClass(this._helper).css({\r\n\t\t\t\twidth: this.element.outerWidth() - 1,\r\n\t\t\t\theight: this.element.outerHeight() - 1,\r\n\t\t\t\tposition: \"absolute\",\r\n\t\t\t\tleft: this.elementOffset.left +\"px\",\r\n\t\t\t\ttop: this.elementOffset.top +\"px\",\r\n\t\t\t\tzIndex: ++o.zIndex //TODO: Don't modify option\r\n\t\t\t});\r\n\r\n\t\t\tthis.helper\r\n\t\t\t\t.appendTo(\"body\")\r\n\t\t\t\t.disableSelection();\r\n\r\n\t\t} else {\r\n\t\t\tthis.helper = this.element;\r\n\t\t}\r\n\r\n\t},\r\n\r\n\t_change: {\r\n\t\te: function(event, dx) {\r\n\t\t\treturn { width: this.originalSize.width + dx };\r\n\t\t},\r\n\t\tw: function(event, dx) {\r\n\t\t\tvar cs = this.originalSize, sp = this.originalPosition;\r\n\t\t\treturn { left: sp.left + dx, width: cs.width - dx };\r\n\t\t},\r\n\t\tn: function(event, dx, dy) {\r\n\t\t\tvar cs = this.originalSize, sp = this.originalPosition;\r\n\t\t\treturn { top: sp.top + dy, height: cs.height - dy };\r\n\t\t},\r\n\t\ts: function(event, dx, dy) {\r\n\t\t\treturn { height: this.originalSize.height + dy };\r\n\t\t},\r\n\t\tse: function(event, dx, dy) {\r\n\t\t\treturn $.extend(this._change.s.apply(this, arguments), this._change.e.apply(this, [event, dx, dy]));\r\n\t\t},\r\n\t\tsw: function(event, dx, dy) {\r\n\t\t\treturn $.extend(this._change.s.apply(this, arguments), this._change.w.apply(this, [event, dx, dy]));\r\n\t\t},\r\n\t\tne: function(event, dx, dy) {\r\n\t\t\treturn $.extend(this._change.n.apply(this, arguments), this._change.e.apply(this, [event, dx, dy]));\r\n\t\t},\r\n\t\tnw: function(event, dx, dy) {\r\n\t\t\treturn $.extend(this._change.n.apply(this, arguments), this._change.w.apply(this, [event, dx, dy]));\r\n\t\t}\r\n\t},\r\n\r\n\t_propagate: function(n, event) {\r\n\t\t$.ui.plugin.call(this, n, [event, this.ui()]);\r\n\t\t(n !== \"resize\" && this._trigger(n, event, this.ui()));\r\n\t},\r\n\r\n\tplugins: {},\r\n\r\n\tui: function() {\r\n\t\treturn {\r\n\t\t\toriginalElement: this.originalElement,\r\n\t\t\telement: this.element,\r\n\t\t\thelper: this.helper,\r\n\t\t\tposition: this.position,\r\n\t\t\tsize: this.size,\r\n\t\t\toriginalSize: this.originalSize,\r\n\t\t\toriginalPosition: this.originalPosition\r\n\t\t};\r\n\t}\r\n\r\n});\r\n\r\n/*\r\n * Resizable Extensions\r\n */\r\n\r\n$.ui.plugin.add(\"resizable\", \"animate\", {\r\n\r\n\tstop: function( event ) {\r\n\t\tvar that = $(this).data(\"ui-resizable\"),\r\n\t\t\to = that.options,\r\n\t\t\tpr = that._proportionallyResizeElements,\r\n\t\t\tista = pr.length && (/textarea/i).test(pr[0].nodeName),\r\n\t\t\tsoffseth = ista && $.ui.hasScroll(pr[0], \"left\") /* TODO - jump height */ ? 0 : that.sizeDiff.height,\r\n\t\t\tsoffsetw = ista ? 0 : that.sizeDiff.width,\r\n\t\t\tstyle = { width: (that.size.width - soffsetw), height: (that.size.height - soffseth) },\r\n\t\t\tleft = (parseInt(that.element.css(\"left\"), 10) + (that.position.left - that.originalPosition.left)) || null,\r\n\t\t\ttop = (parseInt(that.element.css(\"top\"), 10) + (that.position.top - that.originalPosition.top)) || null;\r\n\r\n\t\tthat.element.animate(\r\n\t\t\t$.extend(style, top && left ? { top: top, left: left } : {}), {\r\n\t\t\t\tduration: o.animateDuration,\r\n\t\t\t\teasing: o.animateEasing,\r\n\t\t\t\tstep: function() {\r\n\r\n\t\t\t\t\tvar data = {\r\n\t\t\t\t\t\twidth: parseInt(that.element.css(\"width\"), 10),\r\n\t\t\t\t\t\theight: parseInt(that.element.css(\"height\"), 10),\r\n\t\t\t\t\t\ttop: parseInt(that.element.css(\"top\"), 10),\r\n\t\t\t\t\t\tleft: parseInt(that.element.css(\"left\"), 10)\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\tif (pr && pr.length) {\r\n\t\t\t\t\t\t$(pr[0]).css({ width: data.width, height: data.height });\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// propagating resize, and updating values for each animation step\r\n\t\t\t\t\tthat._updateCache(data);\r\n\t\t\t\t\tthat._propagate(\"resize\", event);\r\n\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t);\r\n\t}\r\n\r\n});\r\n\r\n$.ui.plugin.add(\"resizable\", \"containment\", {\r\n\r\n\tstart: function() {\r\n\t\tvar element, p, co, ch, cw, width, height,\r\n\t\t\tthat = $(this).data(\"ui-resizable\"),\r\n\t\t\to = that.options,\r\n\t\t\tel = that.element,\r\n\t\t\toc = o.containment,\r\n\t\t\tce = (oc instanceof $) ? oc.get(0) : (/parent/.test(oc)) ? el.parent().get(0) : oc;\r\n\r\n\t\tif (!ce) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tthat.containerElement = $(ce);\r\n\r\n\t\tif (/document/.test(oc) || oc === document) {\r\n\t\t\tthat.containerOffset = { left: 0, top: 0 };\r\n\t\t\tthat.containerPosition = { left: 0, top: 0 };\r\n\r\n\t\t\tthat.parentData = {\r\n\t\t\t\telement: $(document), left: 0, top: 0,\r\n\t\t\t\twidth: $(document).width(), height: $(document).height() || document.body.parentNode.scrollHeight\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t\t// i'm a node, so compute top, left, right, bottom\r\n\t\telse {\r\n\t\t\telement = $(ce);\r\n\t\t\tp = [];\r\n\t\t\t$([ \"Top\", \"Right\", \"Left\", \"Bottom\" ]).each(function(i, name) { p[i] = num(element.css(\"padding\" + name)); });\r\n\r\n\t\t\tthat.containerOffset = element.offset();\r\n\t\t\tthat.containerPosition = element.position();\r\n\t\t\tthat.containerSize = { height: (element.innerHeight() - p[3]), width: (element.innerWidth() - p[1]) };\r\n\r\n\t\t\tco = that.containerOffset;\r\n\t\t\tch = that.containerSize.height;\r\n\t\t\tcw = that.containerSize.width;\r\n\t\t\twidth = ($.ui.hasScroll(ce, \"left\") ? ce.scrollWidth : cw );\r\n\t\t\theight = ($.ui.hasScroll(ce) ? ce.scrollHeight : ch);\r\n\r\n\t\t\tthat.parentData = {\r\n\t\t\t\telement: ce, left: co.left, top: co.top, width: width, height: height\r\n\t\t\t};\r\n\t\t}\r\n\t},\r\n\r\n\tresize: function( event ) {\r\n\t\tvar woset, hoset, isParent, isOffsetRelative,\r\n\t\t\tthat = $(this).data(\"ui-resizable\"),\r\n\t\t\to = that.options,\r\n\t\t\tco = that.containerOffset, cp = that.position,\r\n\t\t\tpRatio = that._aspectRatio || event.shiftKey,\r\n\t\t\tcop = { top:0, left:0 }, ce = that.containerElement;\r\n\r\n\t\tif (ce[0] !== document && (/static/).test(ce.css(\"position\"))) {\r\n\t\t\tcop = co;\r\n\t\t}\r\n\r\n\t\tif (cp.left < (that._helper ? co.left : 0)) {\r\n\t\t\tthat.size.width = that.size.width + (that._helper ? (that.position.left - co.left) : (that.position.left - cop.left));\r\n\t\t\tif (pRatio) {\r\n\t\t\t\tthat.size.height = that.size.width / that.aspectRatio;\r\n\t\t\t}\r\n\t\t\tthat.position.left = o.helper ? co.left : 0;\r\n\t\t}\r\n\r\n\t\tif (cp.top < (that._helper ? co.top : 0)) {\r\n\t\t\tthat.size.height = that.size.height + (that._helper ? (that.position.top - co.top) : that.position.top);\r\n\t\t\tif (pRatio) {\r\n\t\t\t\tthat.size.width = that.size.height * that.aspectRatio;\r\n\t\t\t}\r\n\t\t\tthat.position.top = that._helper ? co.top : 0;\r\n\t\t}\r\n\r\n\t\tthat.offset.left = that.parentData.left+that.position.left;\r\n\t\tthat.offset.top = that.parentData.top+that.position.top;\r\n\r\n\t\twoset = Math.abs( (that._helper ? that.offset.left - cop.left : (that.offset.left - cop.left)) + that.sizeDiff.width );\r\n\t\thoset = Math.abs( (that._helper ? that.offset.top - cop.top : (that.offset.top - co.top)) + that.sizeDiff.height );\r\n\r\n\t\tisParent = that.containerElement.get(0) === that.element.parent().get(0);\r\n\t\tisOffsetRelative = /relative|absolute/.test(that.containerElement.css(\"position\"));\r\n\r\n\t\tif(isParent && isOffsetRelative) {\r\n\t\t\twoset -= that.parentData.left;\r\n\t\t}\r\n\r\n\t\tif (woset + that.size.width >= that.parentData.width) {\r\n\t\t\tthat.size.width = that.parentData.width - woset;\r\n\t\t\tif (pRatio) {\r\n\t\t\t\tthat.size.height = that.size.width / that.aspectRatio;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (hoset + that.size.height >= that.parentData.height) {\r\n\t\t\tthat.size.height = that.parentData.height - hoset;\r\n\t\t\tif (pRatio) {\r\n\t\t\t\tthat.size.width = that.size.height * that.aspectRatio;\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\tstop: function(){\r\n\t\tvar that = $(this).data(\"ui-resizable\"),\r\n\t\t\to = that.options,\r\n\t\t\tco = that.containerOffset,\r\n\t\t\tcop = that.containerPosition,\r\n\t\t\tce = that.containerElement,\r\n\t\t\thelper = $(that.helper),\r\n\t\t\tho = helper.offset(),\r\n\t\t\tw = helper.outerWidth() - that.sizeDiff.width,\r\n\t\t\th = helper.outerHeight() - that.sizeDiff.height;\r\n\r\n\t\tif (that._helper && !o.animate && (/relative/).test(ce.css(\"position\"))) {\r\n\t\t\t$(this).css({ left: ho.left - cop.left - co.left, width: w, height: h });\r\n\t\t}\r\n\r\n\t\tif (that._helper && !o.animate && (/static/).test(ce.css(\"position\"))) {\r\n\t\t\t$(this).css({ left: ho.left - cop.left - co.left, width: w, height: h });\r\n\t\t}\r\n\r\n\t}\r\n});\r\n\r\n$.ui.plugin.add(\"resizable\", \"alsoResize\", {\r\n\r\n\tstart: function () {\r\n\t\tvar that = $(this).data(\"ui-resizable\"),\r\n\t\t\to = that.options,\r\n\t\t\t_store = function (exp) {\r\n\t\t\t\t$(exp).each(function() {\r\n\t\t\t\t\tvar el = $(this);\r\n\t\t\t\t\tel.data(\"ui-resizable-alsoresize\", {\r\n\t\t\t\t\t\twidth: parseInt(el.width(), 10), height: parseInt(el.height(), 10),\r\n\t\t\t\t\t\tleft: parseInt(el.css(\"left\"), 10), top: parseInt(el.css(\"top\"), 10)\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t};\r\n\r\n\t\tif (typeof(o.alsoResize) === \"object\" && !o.alsoResize.parentNode) {\r\n\t\t\tif (o.alsoResize.length) { o.alsoResize = o.alsoResize[0]; _store(o.alsoResize); }\r\n\t\t\telse { $.each(o.alsoResize, function (exp) { _store(exp); }); }\r\n\t\t}else{\r\n\t\t\t_store(o.alsoResize);\r\n\t\t}\r\n\t},\r\n\r\n\tresize: function (event, ui) {\r\n\t\tvar that = $(this).data(\"ui-resizable\"),\r\n\t\t\to = that.options,\r\n\t\t\tos = that.originalSize,\r\n\t\t\top = that.originalPosition,\r\n\t\t\tdelta = {\r\n\t\t\t\theight: (that.size.height - os.height) || 0, width: (that.size.width - os.width) || 0,\r\n\t\t\t\ttop: (that.position.top - op.top) || 0, left: (that.position.left - op.left) || 0\r\n\t\t\t},\r\n\r\n\t\t\t_alsoResize = function (exp, c) {\r\n\t\t\t\t$(exp).each(function() {\r\n\t\t\t\t\tvar el = $(this), start = $(this).data(\"ui-resizable-alsoresize\"), style = {},\r\n\t\t\t\t\t\tcss = c && c.length ? c : el.parents(ui.originalElement[0]).length ? [\"width\", \"height\"] : [\"width\", \"height\", \"top\", \"left\"];\r\n\r\n\t\t\t\t\t$.each(css, function (i, prop) {\r\n\t\t\t\t\t\tvar sum = (start[prop]||0) + (delta[prop]||0);\r\n\t\t\t\t\t\tif (sum && sum >= 0) {\r\n\t\t\t\t\t\t\tstyle[prop] = sum || null;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\tel.css(style);\r\n\t\t\t\t});\r\n\t\t\t};\r\n\r\n\t\tif (typeof(o.alsoResize) === \"object\" && !o.alsoResize.nodeType) {\r\n\t\t\t$.each(o.alsoResize, function (exp, c) { _alsoResize(exp, c); });\r\n\t\t}else{\r\n\t\t\t_alsoResize(o.alsoResize);\r\n\t\t}\r\n\t},\r\n\r\n\tstop: function () {\r\n\t\t$(this).removeData(\"resizable-alsoresize\");\r\n\t}\r\n});\r\n\r\n$.ui.plugin.add(\"resizable\", \"ghost\", {\r\n\r\n\tstart: function() {\r\n\r\n\t\tvar that = $(this).data(\"ui-resizable\"), o = that.options, cs = that.size;\r\n\r\n\t\tthat.ghost = that.originalElement.clone();\r\n\t\tthat.ghost\r\n\t\t\t.css({ opacity: 0.25, display: \"block\", position: \"relative\", height: cs.height, width: cs.width, margin: 0, left: 0, top: 0 })\r\n\t\t\t.addClass(\"ui-resizable-ghost\")\r\n\t\t\t.addClass(typeof o.ghost === \"string\" ? o.ghost : \"\");\r\n\r\n\t\tthat.ghost.appendTo(that.helper);\r\n\r\n\t},\r\n\r\n\tresize: function(){\r\n\t\tvar that = $(this).data(\"ui-resizable\");\r\n\t\tif (that.ghost) {\r\n\t\t\tthat.ghost.css({ position: \"relative\", height: that.size.height, width: that.size.width });\r\n\t\t}\r\n\t},\r\n\r\n\tstop: function() {\r\n\t\tvar that = $(this).data(\"ui-resizable\");\r\n\t\tif (that.ghost && that.helper) {\r\n\t\t\tthat.helper.get(0).removeChild(that.ghost.get(0));\r\n\t\t}\r\n\t}\r\n\r\n});\r\n\r\n$.ui.plugin.add(\"resizable\", \"grid\", {\r\n\r\n\tresize: function() {\r\n\t\tvar that = $(this).data(\"ui-resizable\"),\r\n\t\t\to = that.options,\r\n\t\t\tcs = that.size,\r\n\t\t\tos = that.originalSize,\r\n\t\t\top = that.originalPosition,\r\n\t\t\ta = that.axis,\r\n\t\t\tgrid = typeof o.grid === \"number\" ? [o.grid, o.grid] : o.grid,\r\n\t\t\tgridX = (grid[0]||1),\r\n\t\t\tgridY = (grid[1]||1),\r\n\t\t\tox = Math.round((cs.width - os.width) / gridX) * gridX,\r\n\t\t\toy = Math.round((cs.height - os.height) / gridY) * gridY,\r\n\t\t\tnewWidth = os.width + ox,\r\n\t\t\tnewHeight = os.height + oy,\r\n\t\t\tisMaxWidth = o.maxWidth && (o.maxWidth < newWidth),\r\n\t\t\tisMaxHeight = o.maxHeight && (o.maxHeight < newHeight),\r\n\t\t\tisMinWidth = o.minWidth && (o.minWidth > newWidth),\r\n\t\t\tisMinHeight = o.minHeight && (o.minHeight > newHeight);\r\n\r\n\t\to.grid = grid;\r\n\r\n\t\tif (isMinWidth) {\r\n\t\t\tnewWidth = newWidth + gridX;\r\n\t\t}\r\n\t\tif (isMinHeight) {\r\n\t\t\tnewHeight = newHeight + gridY;\r\n\t\t}\r\n\t\tif (isMaxWidth) {\r\n\t\t\tnewWidth = newWidth - gridX;\r\n\t\t}\r\n\t\tif (isMaxHeight) {\r\n\t\t\tnewHeight = newHeight - gridY;\r\n\t\t}\r\n\r\n\t\tif (/^(se|s|e)$/.test(a)) {\r\n\t\t\tthat.size.width = newWidth;\r\n\t\t\tthat.size.height = newHeight;\r\n\t\t} else if (/^(ne)$/.test(a)) {\r\n\t\t\tthat.size.width = newWidth;\r\n\t\t\tthat.size.height = newHeight;\r\n\t\t\tthat.position.top = op.top - oy;\r\n\t\t} else if (/^(sw)$/.test(a)) {\r\n\t\t\tthat.size.width = newWidth;\r\n\t\t\tthat.size.height = newHeight;\r\n\t\t\tthat.position.left = op.left - ox;\r\n\t\t} else {\r\n\t\t\tthat.size.width = newWidth;\r\n\t\t\tthat.size.height = newHeight;\r\n\t\t\tthat.position.top = op.top - oy;\r\n\t\t\tthat.position.left = op.left - ox;\r\n\t\t}\r\n\t}\r\n\r\n});\r\n\r\n})(jQuery);\r\n\r\n(function( $, undefined ) {\r\n\r\n$.widget(\"ui.selectable\", $.ui.mouse, {\r\n\tversion: \"1.10.2\",\r\n\toptions: {\r\n\t\tappendTo: \"body\",\r\n\t\tautoRefresh: true,\r\n\t\tdistance: 0,\r\n\t\tfilter: \"*\",\r\n\t\ttolerance: \"touch\",\r\n\r\n\t\t// callbacks\r\n\t\tselected: null,\r\n\t\tselecting: null,\r\n\t\tstart: null,\r\n\t\tstop: null,\r\n\t\tunselected: null,\r\n\t\tunselecting: null\r\n\t},\r\n\t_create: function() {\r\n\t\tvar selectees,\r\n\t\t\tthat = this;\r\n\r\n\t\tthis.element.addClass(\"ui-selectable\");\r\n\r\n\t\tthis.dragged = false;\r\n\r\n\t\t// cache selectee children based on filter\r\n\t\tthis.refresh = function() {\r\n\t\t\tselectees = $(that.options.filter, that.element[0]);\r\n\t\t\tselectees.addClass(\"ui-selectee\");\r\n\t\t\tselectees.each(function() {\r\n\t\t\t\tvar $this = $(this),\r\n\t\t\t\t\tpos = $this.offset();\r\n\t\t\t\t$.data(this, \"selectable-item\", {\r\n\t\t\t\t\telement: this,\r\n\t\t\t\t\t$element: $this,\r\n\t\t\t\t\tleft: pos.left,\r\n\t\t\t\t\ttop: pos.top,\r\n\t\t\t\t\tright: pos.left + $this.outerWidth(),\r\n\t\t\t\t\tbottom: pos.top + $this.outerHeight(),\r\n\t\t\t\t\tstartselected: false,\r\n\t\t\t\t\tselected: $this.hasClass(\"ui-selected\"),\r\n\t\t\t\t\tselecting: $this.hasClass(\"ui-selecting\"),\r\n\t\t\t\t\tunselecting: $this.hasClass(\"ui-unselecting\")\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t};\r\n\t\tthis.refresh();\r\n\r\n\t\tthis.selectees = selectees.addClass(\"ui-selectee\");\r\n\r\n\t\tthis._mouseInit();\r\n\r\n\t\tthis.helper = $(\"<div class='ui-selectable-helper'></div>\");\r\n\t},\r\n\r\n\t_destroy: function() {\r\n\t\tthis.selectees\r\n\t\t\t.removeClass(\"ui-selectee\")\r\n\t\t\t.removeData(\"selectable-item\");\r\n\t\tthis.element\r\n\t\t\t.removeClass(\"ui-selectable ui-selectable-disabled\");\r\n\t\tthis._mouseDestroy();\r\n\t},\r\n\r\n\t_mouseStart: function(event) {\r\n\t\tvar that = this,\r\n\t\t\toptions = this.options;\r\n\r\n\t\tthis.opos = [event.pageX, event.pageY];\r\n\r\n\t\tif (this.options.disabled) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tthis.selectees = $(options.filter, this.element[0]);\r\n\r\n\t\tthis._trigger(\"start\", event);\r\n\r\n\t\t$(options.appendTo).append(this.helper);\r\n\t\t// position helper (lasso)\r\n\t\tthis.helper.css({\r\n\t\t\t\"left\": event.pageX,\r\n\t\t\t\"top\": event.pageY,\r\n\t\t\t\"width\": 0,\r\n\t\t\t\"height\": 0\r\n\t\t});\r\n\r\n\t\tif (options.autoRefresh) {\r\n\t\t\tthis.refresh();\r\n\t\t}\r\n\r\n\t\tthis.selectees.filter(\".ui-selected\").each(function() {\r\n\t\t\tvar selectee = $.data(this, \"selectable-item\");\r\n\t\t\tselectee.startselected = true;\r\n\t\t\tif (!event.metaKey && !event.ctrlKey) {\r\n\t\t\t\tselectee.$element.removeClass(\"ui-selected\");\r\n\t\t\t\tselectee.selected = false;\r\n\t\t\t\tselectee.$element.addClass(\"ui-unselecting\");\r\n\t\t\t\tselectee.unselecting = true;\r\n\t\t\t\t// selectable UNSELECTING callback\r\n\t\t\t\tthat._trigger(\"unselecting\", event, {\r\n\t\t\t\t\tunselecting: selectee.element\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t$(event.target).parents().addBack().each(function() {\r\n\t\t\tvar doSelect,\r\n\t\t\t\tselectee = $.data(this, \"selectable-item\");\r\n\t\t\tif (selectee) {\r\n\t\t\t\tdoSelect = (!event.metaKey && !event.ctrlKey) || !selectee.$element.hasClass(\"ui-selected\");\r\n\t\t\t\tselectee.$element\r\n\t\t\t\t\t.removeClass(doSelect ? \"ui-unselecting\" : \"ui-selected\")\r\n\t\t\t\t\t.addClass(doSelect ? \"ui-selecting\" : \"ui-unselecting\");\r\n\t\t\t\tselectee.unselecting = !doSelect;\r\n\t\t\t\tselectee.selecting = doSelect;\r\n\t\t\t\tselectee.selected = doSelect;\r\n\t\t\t\t// selectable (UN)SELECTING callback\r\n\t\t\t\tif (doSelect) {\r\n\t\t\t\t\tthat._trigger(\"selecting\", event, {\r\n\t\t\t\t\t\tselecting: selectee.element\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthat._trigger(\"unselecting\", event, {\r\n\t\t\t\t\t\tunselecting: selectee.element\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t},\r\n\r\n\t_mouseDrag: function(event) {\r\n\r\n\t\tthis.dragged = true;\r\n\r\n\t\tif (this.options.disabled) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar tmp,\r\n\t\t\tthat = this,\r\n\t\t\toptions = this.options,\r\n\t\t\tx1 = this.opos[0],\r\n\t\t\ty1 = this.opos[1],\r\n\t\t\tx2 = event.pageX,\r\n\t\t\ty2 = event.pageY;\r\n\r\n\t\tif (x1 > x2) { tmp = x2; x2 = x1; x1 = tmp; }\r\n\t\tif (y1 > y2) { tmp = y2; y2 = y1; y1 = tmp; }\r\n\t\tthis.helper.css({left: x1, top: y1, width: x2-x1, height: y2-y1});\r\n\r\n\t\tthis.selectees.each(function() {\r\n\t\t\tvar selectee = $.data(this, \"selectable-item\"),\r\n\t\t\t\thit = false;\r\n\r\n\t\t\t//prevent helper from being selected if appendTo: selectable\r\n\t\t\tif (!selectee || selectee.element === that.element[0]) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif (options.tolerance === \"touch\") {\r\n\t\t\t\thit = ( !(selectee.left > x2 || selectee.right < x1 || selectee.top > y2 || selectee.bottom < y1) );\r\n\t\t\t} else if (options.tolerance === \"fit\") {\r\n\t\t\t\thit = (selectee.left > x1 && selectee.right < x2 && selectee.top > y1 && selectee.bottom < y2);\r\n\t\t\t}\r\n\r\n\t\t\tif (hit) {\r\n\t\t\t\t// SELECT\r\n\t\t\t\tif (selectee.selected) {\r\n\t\t\t\t\tselectee.$element.removeClass(\"ui-selected\");\r\n\t\t\t\t\tselectee.selected = false;\r\n\t\t\t\t}\r\n\t\t\t\tif (selectee.unselecting) {\r\n\t\t\t\t\tselectee.$element.removeClass(\"ui-unselecting\");\r\n\t\t\t\t\tselectee.unselecting = false;\r\n\t\t\t\t}\r\n\t\t\t\tif (!selectee.selecting) {\r\n\t\t\t\t\tselectee.$element.addClass(\"ui-selecting\");\r\n\t\t\t\t\tselectee.selecting = true;\r\n\t\t\t\t\t// selectable SELECTING callback\r\n\t\t\t\t\tthat._trigger(\"selecting\", event, {\r\n\t\t\t\t\t\tselecting: selectee.element\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\t// UNSELECT\r\n\t\t\t\tif (selectee.selecting) {\r\n\t\t\t\t\tif ((event.metaKey || event.ctrlKey) && selectee.startselected) {\r\n\t\t\t\t\t\tselectee.$element.removeClass(\"ui-selecting\");\r\n\t\t\t\t\t\tselectee.selecting = false;\r\n\t\t\t\t\t\tselectee.$element.addClass(\"ui-selected\");\r\n\t\t\t\t\t\tselectee.selected = true;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tselectee.$element.removeClass(\"ui-selecting\");\r\n\t\t\t\t\t\tselectee.selecting = false;\r\n\t\t\t\t\t\tif (selectee.startselected) {\r\n\t\t\t\t\t\t\tselectee.$element.addClass(\"ui-unselecting\");\r\n\t\t\t\t\t\t\tselectee.unselecting = true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t// selectable UNSELECTING callback\r\n\t\t\t\t\t\tthat._trigger(\"unselecting\", event, {\r\n\t\t\t\t\t\t\tunselecting: selectee.element\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (selectee.selected) {\r\n\t\t\t\t\tif (!event.metaKey && !event.ctrlKey && !selectee.startselected) {\r\n\t\t\t\t\t\tselectee.$element.removeClass(\"ui-selected\");\r\n\t\t\t\t\t\tselectee.selected = false;\r\n\r\n\t\t\t\t\t\tselectee.$element.addClass(\"ui-unselecting\");\r\n\t\t\t\t\t\tselectee.unselecting = true;\r\n\t\t\t\t\t\t// selectable UNSELECTING callback\r\n\t\t\t\t\t\tthat._trigger(\"unselecting\", event, {\r\n\t\t\t\t\t\t\tunselecting: selectee.element\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn false;\r\n\t},\r\n\r\n\t_mouseStop: function(event) {\r\n\t\tvar that = this;\r\n\r\n\t\tthis.dragged = false;\r\n\r\n\t\t$(\".ui-unselecting\", this.element[0]).each(function() {\r\n\t\t\tvar selectee = $.data(this, \"selectable-item\");\r\n\t\t\tselectee.$element.removeClass(\"ui-unselecting\");\r\n\t\t\tselectee.unselecting = false;\r\n\t\t\tselectee.startselected = false;\r\n\t\t\tthat._trigger(\"unselected\", event, {\r\n\t\t\t\tunselected: selectee.element\r\n\t\t\t});\r\n\t\t});\r\n\t\t$(\".ui-selecting\", this.element[0]).each(function() {\r\n\t\t\tvar selectee = $.data(this, \"selectable-item\");\r\n\t\t\tselectee.$element.removeClass(\"ui-selecting\").addClass(\"ui-selected\");\r\n\t\t\tselectee.selecting = false;\r\n\t\t\tselectee.selected = true;\r\n\t\t\tselectee.startselected = true;\r\n\t\t\tthat._trigger(\"selected\", event, {\r\n\t\t\t\tselected: selectee.element\r\n\t\t\t});\r\n\t\t});\r\n\t\tthis._trigger(\"stop\", event);\r\n\r\n\t\tthis.helper.remove();\r\n\r\n\t\treturn false;\r\n\t}\r\n\r\n});\r\n\r\n})(jQuery);\r\n\r\n(function( $, undefined ) {\r\n\r\n/*jshint loopfunc: true */\r\n\r\nfunction isOverAxis( x, reference, size ) {\r\n\treturn ( x > reference ) && ( x < ( reference + size ) );\r\n}\r\n\r\nfunction isFloating(item) {\r\n\treturn (/left|right/).test(item.css(\"float\")) || (/inline|table-cell/).test(item.css(\"display\"));\r\n}\r\n\r\n$.widget(\"ui.sortable\", $.ui.mouse, {\r\n\tversion: \"1.10.2\",\r\n\twidgetEventPrefix: \"sort\",\r\n\tready: false,\r\n\toptions: {\r\n\t\tappendTo: \"parent\",\r\n\t\taxis: false,\r\n\t\tconnectWith: false,\r\n\t\tcontainment: false,\r\n\t\tcursor: \"auto\",\r\n\t\tcursorAt: false,\r\n\t\tdropOnEmpty: true,\r\n\t\tforcePlaceholderSize: false,\r\n\t\tforceHelperSize: false,\r\n\t\tgrid: false,\r\n\t\thandle: false,\r\n\t\thelper: \"original\",\r\n\t\titems: \"> *\",\r\n\t\topacity: false,\r\n\t\tplaceholder: false,\r\n\t\trevert: false,\r\n\t\tscroll: true,\r\n\t\tscrollSensitivity: 20,\r\n\t\tscrollSpeed: 20,\r\n\t\tscope: \"default\",\r\n\t\ttolerance: \"intersect\",\r\n\t\tzIndex: 1000,\r\n\r\n\t\t// callbacks\r\n\t\tactivate: null,\r\n\t\tbeforeStop: null,\r\n\t\tchange: null,\r\n\t\tdeactivate: null,\r\n\t\tout: null,\r\n\t\tover: null,\r\n\t\treceive: null,\r\n\t\tremove: null,\r\n\t\tsort: null,\r\n\t\tstart: null,\r\n\t\tstop: null,\r\n\t\tupdate: null\r\n\t},\r\n\t_create: function() {\r\n\r\n\t\tvar o = this.options;\r\n\t\tthis.containerCache = {};\r\n\t\tthis.element.addClass(\"ui-sortable\");\r\n\r\n\t\t//Get the items\r\n\t\tthis.refresh();\r\n\r\n\t\t//Let's determine if the items are being displayed horizontally\r\n\t\tthis.floating = this.items.length ? o.axis === \"x\" || isFloating(this.items[0].item) : false;\r\n\r\n\t\t//Let's determine the parent's offset\r\n\t\tthis.offset = this.element.offset();\r\n\r\n\t\t//Initialize mouse events for interaction\r\n\t\tthis._mouseInit();\r\n\r\n\t\t//We're ready to go\r\n\t\tthis.ready = true;\r\n\r\n\t},\r\n\r\n\t_destroy: function() {\r\n\t\tthis.element\r\n\t\t\t.removeClass(\"ui-sortable ui-sortable-disabled\");\r\n\t\tthis._mouseDestroy();\r\n\r\n\t\tfor ( var i = this.items.length - 1; i >= 0; i-- ) {\r\n\t\t\tthis.items[i].item.removeData(this.widgetName + \"-item\");\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\t_setOption: function(key, value){\r\n\t\tif ( key === \"disabled\" ) {\r\n\t\t\tthis.options[ key ] = value;\r\n\r\n\t\t\tthis.widget().toggleClass( \"ui-sortable-disabled\", !!value );\r\n\t\t} else {\r\n\t\t\t// Don't call widget base _setOption for disable as it adds ui-state-disabled class\r\n\t\t\t$.Widget.prototype._setOption.apply(this, arguments);\r\n\t\t}\r\n\t},\r\n\r\n\t_mouseCapture: function(event, overrideHandle) {\r\n\t\tvar currentItem = null,\r\n\t\t\tvalidHandle = false,\r\n\t\t\tthat = this;\r\n\r\n\t\tif (this.reverting) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tif(this.options.disabled || this.options.type === \"static\") {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\t//We have to refresh the items data once first\r\n\t\tthis._refreshItems(event);\r\n\r\n\t\t//Find out if the clicked node (or one of its parents) is a actual item in this.items\r\n\t\t$(event.target).parents().each(function() {\r\n\t\t\tif($.data(this, that.widgetName + \"-item\") === that) {\r\n\t\t\t\tcurrentItem = $(this);\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t});\r\n\t\tif($.data(event.target, that.widgetName + \"-item\") === that) {\r\n\t\t\tcurrentItem = $(event.target);\r\n\t\t}\r\n\r\n\t\tif(!currentItem) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tif(this.options.handle && !overrideHandle) {\r\n\t\t\t$(this.options.handle, currentItem).find(\"*\").addBack().each(function() {\r\n\t\t\t\tif(this === event.target) {\r\n\t\t\t\t\tvalidHandle = true;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tif(!validHandle) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.currentItem = currentItem;\r\n\t\tthis._removeCurrentsFromItems();\r\n\t\treturn true;\r\n\r\n\t},\r\n\r\n\t_mouseStart: function(event, overrideHandle, noActivation) {\r\n\r\n\t\tvar i, body,\r\n\t\t\to = this.options;\r\n\r\n\t\tthis.currentContainer = this;\r\n\r\n\t\t//We only need to call refreshPositions, because the refreshItems call has been moved to mouseCapture\r\n\t\tthis.refreshPositions();\r\n\r\n\t\t//Create and append the visible helper\r\n\t\tthis.helper = this._createHelper(event);\r\n\r\n\t\t//Cache the helper size\r\n\t\tthis._cacheHelperProportions();\r\n\r\n\t\t/*\r\n\t\t * - Position generation -\r\n\t\t * This block generates everything position related - it's the core of draggables.\r\n\t\t */\r\n\r\n\t\t//Cache the margins of the original element\r\n\t\tthis._cacheMargins();\r\n\r\n\t\t//Get the next scrolling parent\r\n\t\tthis.scrollParent = this.helper.scrollParent();\r\n\r\n\t\t//The element's absolute position on the page minus margins\r\n\t\tthis.offset = this.currentItem.offset();\r\n\t\tthis.offset = {\r\n\t\t\ttop: this.offset.top - this.margins.top,\r\n\t\t\tleft: this.offset.left - this.margins.left\r\n\t\t};\r\n\r\n\t\t$.extend(this.offset, {\r\n\t\t\tclick: { //Where the click happened, relative to the element\r\n\t\t\t\tleft: event.pageX - this.offset.left,\r\n\t\t\t\ttop: event.pageY - this.offset.top\r\n\t\t\t},\r\n\t\t\tparent: this._getParentOffset(),\r\n\t\t\trelative: this._getRelativeOffset() //This is a relative to absolute position minus the actual position calculation - only used for relative positioned helper\r\n\t\t});\r\n\r\n\t\t// Only after we got the offset, we can change the helper's position to absolute\r\n\t\t// TODO: Still need to figure out a way to make relative sorting possible\r\n\t\tthis.helper.css(\"position\", \"absolute\");\r\n\t\tthis.cssPosition = this.helper.css(\"position\");\r\n\r\n\t\t//Generate the original position\r\n\t\tthis.originalPosition = this._generatePosition(event);\r\n\t\tthis.originalPageX = event.pageX;\r\n\t\tthis.originalPageY = event.pageY;\r\n\r\n\t\t//Adjust the mouse offset relative to the helper if \"cursorAt\" is supplied\r\n\t\t(o.cursorAt && this._adjustOffsetFromHelper(o.cursorAt));\r\n\r\n\t\t//Cache the former DOM position\r\n\t\tthis.domPosition = { prev: this.currentItem.prev()[0], parent: this.currentItem.parent()[0] };\r\n\r\n\t\t//If the helper is not the original, hide the original so it's not playing any role during the drag, won't cause anything bad this way\r\n\t\tif(this.helper[0] !== this.currentItem[0]) {\r\n\t\t\tthis.currentItem.hide();\r\n\t\t}\r\n\r\n\t\t//Create the placeholder\r\n\t\tthis._createPlaceholder();\r\n\r\n\t\t//Set a containment if given in the options\r\n\t\tif(o.containment) {\r\n\t\t\tthis._setContainment();\r\n\t\t}\r\n\r\n\t\tif( o.cursor && o.cursor !== \"auto\" ) { // cursor option\r\n\t\t\tbody = this.document.find( \"body\" );\r\n\r\n\t\t\t// support: IE\r\n\t\t\tthis.storedCursor = body.css( \"cursor\" );\r\n\t\t\tbody.css( \"cursor\", o.cursor );\r\n\r\n\t\t\tthis.storedStylesheet = $( \"<style>*{ cursor: \"+o.cursor+\" !important; }</style>\" ).appendTo( body );\r\n\t\t}\r\n\r\n\t\tif(o.opacity) { // opacity option\r\n\t\t\tif (this.helper.css(\"opacity\")) {\r\n\t\t\t\tthis._storedOpacity = this.helper.css(\"opacity\");\r\n\t\t\t}\r\n\t\t\tthis.helper.css(\"opacity\", o.opacity);\r\n\t\t}\r\n\r\n\t\tif(o.zIndex) { // zIndex option\r\n\t\t\tif (this.helper.css(\"zIndex\")) {\r\n\t\t\t\tthis._storedZIndex = this.helper.css(\"zIndex\");\r\n\t\t\t}\r\n\t\t\tthis.helper.css(\"zIndex\", o.zIndex);\r\n\t\t}\r\n\r\n\t\t//Prepare scrolling\r\n\t\tif(this.scrollParent[0] !== document && this.scrollParent[0].tagName !== \"HTML\") {\r\n\t\t\tthis.overflowOffset = this.scrollParent.offset();\r\n\t\t}\r\n\r\n\t\t//Call callbacks\r\n\t\tthis._trigger(\"start\", event, this._uiHash());\r\n\r\n\t\t//Recache the helper size\r\n\t\tif(!this._preserveHelperProportions) {\r\n\t\t\tthis._cacheHelperProportions();\r\n\t\t}\r\n\r\n\r\n\t\t//Post \"activate\" events to possible containers\r\n\t\tif( !noActivation ) {\r\n\t\t\tfor ( i = this.containers.length - 1; i >= 0; i-- ) {\r\n\t\t\t\tthis.containers[ i ]._trigger( \"activate\", event, this._uiHash( this ) );\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t//Prepare possible droppables\r\n\t\tif($.ui.ddmanager) {\r\n\t\t\t$.ui.ddmanager.current = this;\r\n\t\t}\r\n\r\n\t\tif ($.ui.ddmanager && !o.dropBehaviour) {\r\n\t\t\t$.ui.ddmanager.prepareOffsets(this, event);\r\n\t\t}\r\n\r\n\t\tthis.dragging = true;\r\n\r\n\t\tthis.helper.addClass(\"ui-sortable-helper\");\r\n\t\tthis._mouseDrag(event); //Execute the drag once - this causes the helper not to be visible before getting its correct position\r\n\t\treturn true;\r\n\r\n\t},\r\n\r\n\t_mouseDrag: function(event) {\r\n\t\tvar i, item, itemElement, intersection,\r\n\t\t\to = this.options,\r\n\t\t\tscrolled = false;\r\n\r\n\t\t//Compute the helpers position\r\n\t\tthis.position = this._generatePosition(event);\r\n\t\tthis.positionAbs = this._convertPositionTo(\"absolute\");\r\n\r\n\t\tif (!this.lastPositionAbs) {\r\n\t\t\tthis.lastPositionAbs = this.positionAbs;\r\n\t\t}\r\n\r\n\t\t//Do scrolling\r\n\t\tif(this.options.scroll) {\r\n\t\t\tif(this.scrollParent[0] !== document && this.scrollParent[0].tagName !== \"HTML\") {\r\n\r\n\t\t\t\tif((this.overflowOffset.top + this.scrollParent[0].offsetHeight) - event.pageY < o.scrollSensitivity) {\r\n\t\t\t\t\tthis.scrollParent[0].scrollTop = scrolled = this.scrollParent[0].scrollTop + o.scrollSpeed;\r\n\t\t\t\t} else if(event.pageY - this.overflowOffset.top < o.scrollSensitivity) {\r\n\t\t\t\t\tthis.scrollParent[0].scrollTop = scrolled = this.scrollParent[0].scrollTop - o.scrollSpeed;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif((this.overflowOffset.left + this.scrollParent[0].offsetWidth) - event.pageX < o.scrollSensitivity) {\r\n\t\t\t\t\tthis.scrollParent[0].scrollLeft = scrolled = this.scrollParent[0].scrollLeft + o.scrollSpeed;\r\n\t\t\t\t} else if(event.pageX - this.overflowOffset.left < o.scrollSensitivity) {\r\n\t\t\t\t\tthis.scrollParent[0].scrollLeft = scrolled = this.scrollParent[0].scrollLeft - o.scrollSpeed;\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tif(event.pageY - $(document).scrollTop() < o.scrollSensitivity) {\r\n\t\t\t\t\tscrolled = $(document).scrollTop($(document).scrollTop() - o.scrollSpeed);\r\n\t\t\t\t} else if($(window).height() - (event.pageY - $(document).scrollTop()) < o.scrollSensitivity) {\r\n\t\t\t\t\tscrolled = $(document).scrollTop($(document).scrollTop() + o.scrollSpeed);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(event.pageX - $(document).scrollLeft() < o.scrollSensitivity) {\r\n\t\t\t\t\tscrolled = $(document).scrollLeft($(document).scrollLeft() - o.scrollSpeed);\r\n\t\t\t\t} else if($(window).width() - (event.pageX - $(document).scrollLeft()) < o.scrollSensitivity) {\r\n\t\t\t\t\tscrolled = $(document).scrollLeft($(document).scrollLeft() + o.scrollSpeed);\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif(scrolled !== false && $.ui.ddmanager && !o.dropBehaviour) {\r\n\t\t\t\t$.ui.ddmanager.prepareOffsets(this, event);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t//Regenerate the absolute position used for position checks\r\n\t\tthis.positionAbs = this._convertPositionTo(\"absolute\");\r\n\r\n\t\t//Set the helper position\r\n\t\tif(!this.options.axis || this.options.axis !== \"y\") {\r\n\t\t\tthis.helper[0].style.left = this.position.left+\"px\";\r\n\t\t}\r\n\t\tif(!this.options.axis || this.options.axis !== \"x\") {\r\n\t\t\tthis.helper[0].style.top = this.position.top+\"px\";\r\n\t\t}\r\n\r\n\t\t//Rearrange\r\n\t\tfor (i = this.items.length - 1; i >= 0; i--) {\r\n\r\n\t\t\t//Cache variables and intersection, continue if no intersection\r\n\t\t\titem = this.items[i];\r\n\t\t\titemElement = item.item[0];\r\n\t\t\tintersection = this._intersectsWithPointer(item);\r\n\t\t\tif (!intersection) {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\r\n\t\t\t// Only put the placeholder inside the current Container, skip all\r\n\t\t\t// items form other containers. This works because when moving\r\n\t\t\t// an item from one container to another the\r\n\t\t\t// currentContainer is switched before the placeholder is moved.\r\n\t\t\t//\r\n\t\t\t// Without this moving items in \"sub-sortables\" can cause the placeholder to jitter\r\n\t\t\t// beetween the outer and inner container.\r\n\t\t\tif (item.instance !== this.currentContainer) {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\r\n\t\t\t// cannot intersect with itself\r\n\t\t\t// no useless actions that have been done before\r\n\t\t\t// no action if the item moved is the parent of the item checked\r\n\t\t\tif (itemElement !== this.currentItem[0] &&\r\n\t\t\t\tthis.placeholder[intersection === 1 ? \"next\" : \"prev\"]()[0] !== itemElement &&\r\n\t\t\t\t!$.contains(this.placeholder[0], itemElement) &&\r\n\t\t\t\t(this.options.type === \"semi-dynamic\" ? !$.contains(this.element[0], itemElement) : true)\r\n\t\t\t) {\r\n\r\n\t\t\t\tthis.direction = intersection === 1 ? \"down\" : \"up\";\r\n\r\n\t\t\t\tif (this.options.tolerance === \"pointer\" || this._intersectsWithSides(item)) {\r\n\t\t\t\t\tthis._rearrange(event, item);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis._trigger(\"change\", event, this._uiHash());\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t//Post events to containers\r\n\t\tthis._contactContainers(event);\r\n\r\n\t\t//Interconnect with droppables\r\n\t\tif($.ui.ddmanager) {\r\n\t\t\t$.ui.ddmanager.drag(this, event);\r\n\t\t}\r\n\r\n\t\t//Call callbacks\r\n\t\tthis._trigger(\"sort\", event, this._uiHash());\r\n\r\n\t\tthis.lastPositionAbs = this.positionAbs;\r\n\t\treturn false;\r\n\r\n\t},\r\n\r\n\t_mouseStop: function(event, noPropagation) {\r\n\r\n\t\tif(!event) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t//If we are using droppables, inform the manager about the drop\r\n\t\tif ($.ui.ddmanager && !this.options.dropBehaviour) {\r\n\t\t\t$.ui.ddmanager.drop(this, event);\r\n\t\t}\r\n\r\n\t\tif(this.options.revert) {\r\n\t\t\tvar that = this,\r\n\t\t\t\tcur = this.placeholder.offset(),\r\n\t\t\t\taxis = this.options.axis,\r\n\t\t\t\tanimation = {};\r\n\r\n\t\t\tif ( !axis || axis === \"x\" ) {\r\n\t\t\t\tanimation.left = cur.left - this.offset.parent.left - this.margins.left + (this.offsetParent[0] === document.body ? 0 : this.offsetParent[0].scrollLeft);\r\n\t\t\t}\r\n\t\t\tif ( !axis || axis === \"y\" ) {\r\n\t\t\t\tanimation.top = cur.top - this.offset.parent.top - this.margins.top + (this.offsetParent[0] === document.body ? 0 : this.offsetParent[0].scrollTop);\r\n\t\t\t}\r\n\t\t\tthis.reverting = true;\r\n\t\t\t$(this.helper).animate( animation, parseInt(this.options.revert, 10) || 500, function() {\r\n\t\t\t\tthat._clear(event);\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tthis._clear(event, noPropagation);\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\r\n\t},\r\n\r\n\tcancel: function() {\r\n\r\n\t\tif(this.dragging) {\r\n\r\n\t\t\tthis._mouseUp({ target: null });\r\n\r\n\t\t\tif(this.options.helper === \"original\") {\r\n\t\t\t\tthis.currentItem.css(this._storedCSS).removeClass(\"ui-sortable-helper\");\r\n\t\t\t} else {\r\n\t\t\t\tthis.currentItem.show();\r\n\t\t\t}\r\n\r\n\t\t\t//Post deactivating events to containers\r\n\t\t\tfor (var i = this.containers.length - 1; i >= 0; i--){\r\n\t\t\t\tthis.containers[i]._trigger(\"deactivate\", null, this._uiHash(this));\r\n\t\t\t\tif(this.containers[i].containerCache.over) {\r\n\t\t\t\t\tthis.containers[i]._trigger(\"out\", null, this._uiHash(this));\r\n\t\t\t\t\tthis.containers[i].containerCache.over = 0;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif (this.placeholder) {\r\n\t\t\t//$(this.placeholder[0]).remove(); would have been the jQuery way - unfortunately, it unbinds ALL events from the original node!\r\n\t\t\tif(this.placeholder[0].parentNode) {\r\n\t\t\t\tthis.placeholder[0].parentNode.removeChild(this.placeholder[0]);\r\n\t\t\t}\r\n\t\t\tif(this.options.helper !== \"original\" && this.helper && this.helper[0].parentNode) {\r\n\t\t\t\tthis.helper.remove();\r\n\t\t\t}\r\n\r\n\t\t\t$.extend(this, {\r\n\t\t\t\thelper: null,\r\n\t\t\t\tdragging: false,\r\n\t\t\t\treverting: false,\r\n\t\t\t\t_noFinalSort: null\r\n\t\t\t});\r\n\r\n\t\t\tif(this.domPosition.prev) {\r\n\t\t\t\t$(this.domPosition.prev).after(this.currentItem);\r\n\t\t\t} else {\r\n\t\t\t\t$(this.domPosition.parent).prepend(this.currentItem);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tserialize: function(o) {\r\n\r\n\t\tvar items = this._getItemsAsjQuery(o && o.connected),\r\n\t\t\tstr = [];\r\n\t\to = o || {};\r\n\r\n\t\t$(items).each(function() {\r\n\t\t\tvar res = ($(o.item || this).attr(o.attribute || \"id\") || \"\").match(o.expression || (/(.+)[\\-=_](.+)/));\r\n\t\t\tif (res) {\r\n\t\t\t\tstr.push((o.key || res[1]+\"[]\")+\"=\"+(o.key && o.expression ? res[1] : res[2]));\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tif(!str.length && o.key) {\r\n\t\t\tstr.push(o.key + \"=\");\r\n\t\t}\r\n\r\n\t\treturn str.join(\"&\");\r\n\r\n\t},\r\n\r\n\ttoArray: function(o) {\r\n\r\n\t\tvar items = this._getItemsAsjQuery(o && o.connected),\r\n\t\t\tret = [];\r\n\r\n\t\to = o || {};\r\n\r\n\t\titems.each(function() { ret.push($(o.item || this).attr(o.attribute || \"id\") || \"\"); });\r\n\t\treturn ret;\r\n\r\n\t},\r\n\r\n\t/* Be careful with the following core functions */\r\n\t_intersectsWith: function(item) {\r\n\r\n\t\tvar x1 = this.positionAbs.left,\r\n\t\t\tx2 = x1 + this.helperProportions.width,\r\n\t\t\ty1 = this.positionAbs.top,\r\n\t\t\ty2 = y1 + this.helperProportions.height,\r\n\t\t\tl = item.left,\r\n\t\t\tr = l + item.width,\r\n\t\t\tt = item.top,\r\n\t\t\tb = t + item.height,\r\n\t\t\tdyClick = this.offset.click.top,\r\n\t\t\tdxClick = this.offset.click.left,\r\n\t\t\tisOverElement = (y1 + dyClick) > t && (y1 + dyClick) < b && (x1 + dxClick) > l && (x1 + dxClick) < r;\r\n\r\n\t\tif ( this.options.tolerance === \"pointer\" ||\r\n\t\t\tthis.options.forcePointerForContainers ||\r\n\t\t\t(this.options.tolerance !== \"pointer\" && this.helperProportions[this.floating ? \"width\" : \"height\"] > item[this.floating ? \"width\" : \"height\"])\r\n\t\t) {\r\n\t\t\treturn isOverElement;\r\n\t\t} else {\r\n\r\n\t\t\treturn (l < x1 + (this.helperProportions.width / 2) && // Right Half\r\n\t\t\t\tx2 - (this.helperProportions.width / 2) < r && // Left Half\r\n\t\t\t\tt < y1 + (this.helperProportions.height / 2) && // Bottom Half\r\n\t\t\t\ty2 - (this.helperProportions.height / 2) < b ); // Top Half\r\n\r\n\t\t}\r\n\t},\r\n\r\n\t_intersectsWithPointer: function(item) {\r\n\r\n\t\tvar isOverElementHeight = (this.options.axis === \"x\") || isOverAxis(this.positionAbs.top + this.offset.click.top, item.top, item.height),\r\n\t\t\tisOverElementWidth = (this.options.axis === \"y\") || isOverAxis(this.positionAbs.left + this.offset.click.left, item.left, item.width),\r\n\t\t\tisOverElement = isOverElementHeight && isOverElementWidth,\r\n\t\t\tverticalDirection = this._getDragVerticalDirection(),\r\n\t\t\thorizontalDirection = this._getDragHorizontalDirection();\r\n\r\n\t\tif (!isOverElement) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\treturn this.floating ?\r\n\t\t\t( ((horizontalDirection && horizontalDirection === \"right\") || verticalDirection === \"down\") ? 2 : 1 )\r\n\t\t\t: ( verticalDirection && (verticalDirection === \"down\" ? 2 : 1) );\r\n\r\n\t},\r\n\r\n\t_intersectsWithSides: function(item) {\r\n\r\n\t\tvar isOverBottomHalf = isOverAxis(this.positionAbs.top + this.offset.click.top, item.top + (item.height/2), item.height),\r\n\t\t\tisOverRightHalf = isOverAxis(this.positionAbs.left + this.offset.click.left, item.left + (item.width/2), item.width),\r\n\t\t\tverticalDirection = this._getDragVerticalDirection(),\r\n\t\t\thorizontalDirection = this._getDragHorizontalDirection();\r\n\r\n\t\tif (this.floating && horizontalDirection) {\r\n\t\t\treturn ((horizontalDirection === \"right\" && isOverRightHalf) || (horizontalDirection === \"left\" && !isOverRightHalf));\r\n\t\t} else {\r\n\t\t\treturn verticalDirection && ((verticalDirection === \"down\" && isOverBottomHalf) || (verticalDirection === \"up\" && !isOverBottomHalf));\r\n\t\t}\r\n\r\n\t},\r\n\r\n\t_getDragVerticalDirection: function() {\r\n\t\tvar delta = this.positionAbs.top - this.lastPositionAbs.top;\r\n\t\treturn delta !== 0 && (delta > 0 ? \"down\" : \"up\");\r\n\t},\r\n\r\n\t_getDragHorizontalDirection: function() {\r\n\t\tvar delta = this.positionAbs.left - this.lastPositionAbs.left;\r\n\t\treturn delta !== 0 && (delta > 0 ? \"right\" : \"left\");\r\n\t},\r\n\r\n\trefresh: function(event) {\r\n\t\tthis._refreshItems(event);\r\n\t\tthis.refreshPositions();\r\n\t\treturn this;\r\n\t},\r\n\r\n\t_connectWith: function() {\r\n\t\tvar options = this.options;\r\n\t\treturn options.connectWith.constructor === String ? [options.connectWith] : options.connectWith;\r\n\t},\r\n\r\n\t_getItemsAsjQuery: function(connected) {\r\n\r\n\t\tvar i, j, cur, inst,\r\n\t\t\titems = [],\r\n\t\t\tqueries = [],\r\n\t\t\tconnectWith = this._connectWith();\r\n\r\n\t\tif(connectWith && connected) {\r\n\t\t\tfor (i = connectWith.length - 1; i >= 0; i--){\r\n\t\t\t\tcur = $(connectWith[i]);\r\n\t\t\t\tfor ( j = cur.length - 1; j >= 0; j--){\r\n\t\t\t\t\tinst = $.data(cur[j], this.widgetFullName);\r\n\t\t\t\t\tif(inst && inst !== this && !inst.options.disabled) {\r\n\t\t\t\t\t\tqueries.push([$.isFunction(inst.options.items) ? inst.options.items.call(inst.element) : $(inst.options.items, inst.element).not(\".ui-sortable-helper\").not(\".ui-sortable-placeholder\"), inst]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tqueries.push([$.isFunction(this.options.items) ? this.options.items.call(this.element, null, { options: this.options, item: this.currentItem }) : $(this.options.items, this.element).not(\".ui-sortable-helper\").not(\".ui-sortable-placeholder\"), this]);\r\n\r\n\t\tfor (i = queries.length - 1; i >= 0; i--){\r\n\t\t\tqueries[i][0].each(function() {\r\n\t\t\t\titems.push(this);\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\treturn $(items);\r\n\r\n\t},\r\n\r\n\t_removeCurrentsFromItems: function() {\r\n\r\n\t\tvar list = this.currentItem.find(\":data(\" + this.widgetName + \"-item)\");\r\n\r\n\t\tthis.items = $.grep(this.items, function (item) {\r\n\t\t\tfor (var j=0; j < list.length; j++) {\r\n\t\t\t\tif(list[j] === item.item[0]) {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t});\r\n\r\n\t},\r\n\r\n\t_refreshItems: function(event) {\r\n\r\n\t\tthis.items = [];\r\n\t\tthis.containers = [this];\r\n\r\n\t\tvar i, j, cur, inst, targetData, _queries, item, queriesLength,\r\n\t\t\titems = this.items,\r\n\t\t\tqueries = [[$.isFunction(this.options.items) ? this.options.items.call(this.element[0], event, { item: this.currentItem }) : $(this.options.items, this.element), this]],\r\n\t\t\tconnectWith = this._connectWith();\r\n\r\n\t\tif(connectWith && this.ready) { //Shouldn't be run the first time through due to massive slow-down\r\n\t\t\tfor (i = connectWith.length - 1; i >= 0; i--){\r\n\t\t\t\tcur = $(connectWith[i]);\r\n\t\t\t\tfor (j = cur.length - 1; j >= 0; j--){\r\n\t\t\t\t\tinst = $.data(cur[j], this.widgetFullName);\r\n\t\t\t\t\tif(inst && inst !== this && !inst.options.disabled) {\r\n\t\t\t\t\t\tqueries.push([$.isFunction(inst.options.items) ? inst.options.items.call(inst.element[0], event, { item: this.currentItem }) : $(inst.options.items, inst.element), inst]);\r\n\t\t\t\t\t\tthis.containers.push(inst);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfor (i = queries.length - 1; i >= 0; i--) {\r\n\t\t\ttargetData = queries[i][1];\r\n\t\t\t_queries = queries[i][0];\r\n\r\n\t\t\tfor (j=0, queriesLength = _queries.length; j < queriesLength; j++) {\r\n\t\t\t\titem = $(_queries[j]);\r\n\r\n\t\t\t\titem.data(this.widgetName + \"-item\", targetData); // Data for target checking (mouse manager)\r\n\r\n\t\t\t\titems.push({\r\n\t\t\t\t\titem: item,\r\n\t\t\t\t\tinstance: targetData,\r\n\t\t\t\t\twidth: 0, height: 0,\r\n\t\t\t\t\tleft: 0, top: 0\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t},\r\n\r\n\trefreshPositions: function(fast) {\r\n\r\n\t\t//This has to be redone because due to the item being moved out/into the offsetParent, the offsetParent's position will change\r\n\t\tif(this.offsetParent && this.helper) {\r\n\t\t\tthis.offset.parent = this._getParentOffset();\r\n\t\t}\r\n\r\n\t\tvar i, item, t, p;\r\n\r\n\t\tfor (i = this.items.length - 1; i >= 0; i--){\r\n\t\t\titem = this.items[i];\r\n\r\n\t\t\t//We ignore calculating positions of all connected containers when we're not over them\r\n\t\t\tif(item.instance !== this.currentContainer && this.currentContainer && item.item[0] !== this.currentItem[0]) {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\r\n\t\t\tt = this.options.toleranceElement ? $(this.options.toleranceElement, item.item) : item.item;\r\n\r\n\t\t\tif (!fast) {\r\n\t\t\t\titem.width = t.outerWidth();\r\n\t\t\t\titem.height = t.outerHeight();\r\n\t\t\t}\r\n\r\n\t\t\tp = t.offset();\r\n\t\t\titem.left = p.left;\r\n\t\t\titem.top = p.top;\r\n\t\t}\r\n\r\n\t\tif(this.options.custom && this.options.custom.refreshContainers) {\r\n\t\t\tthis.options.custom.refreshContainers.call(this);\r\n\t\t} else {\r\n\t\t\tfor (i = this.containers.length - 1; i >= 0; i--){\r\n\t\t\t\tp = this.containers[i].element.offset();\r\n\t\t\t\tthis.containers[i].containerCache.left = p.left;\r\n\t\t\t\tthis.containers[i].containerCache.top = p.top;\r\n\t\t\t\tthis.containers[i].containerCache.width\t= this.containers[i].element.outerWidth();\r\n\t\t\t\tthis.containers[i].containerCache.height = this.containers[i].element.outerHeight();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\t_createPlaceholder: function(that) {\r\n\t\tthat = that || this;\r\n\t\tvar className,\r\n\t\t\to = that.options;\r\n\r\n\t\tif(!o.placeholder || o.placeholder.constructor === String) {\r\n\t\t\tclassName = o.placeholder;\r\n\t\t\to.placeholder = {\r\n\t\t\t\telement: function() {\r\n\r\n\t\t\t\t\tvar nodeName = that.currentItem[0].nodeName.toLowerCase(),\r\n\t\t\t\t\t\telement = $( that.document[0].createElement( nodeName ) )\r\n\t\t\t\t\t\t\t.addClass(className || that.currentItem[0].className+\" ui-sortable-placeholder\")\r\n\t\t\t\t\t\t\t.removeClass(\"ui-sortable-helper\");\r\n\r\n\t\t\t\t\tif ( nodeName === \"tr\" ) {\r\n\t\t\t\t\t\t// Use a high colspan to force the td to expand the full\r\n\t\t\t\t\t\t// width of the table (browsers are smart enough to\r\n\t\t\t\t\t\t// handle this properly)\r\n\t\t\t\t\t\telement.append( \"<td colspan='99'>&#160;</td>\" );\r\n\t\t\t\t\t} else if ( nodeName === \"img\" ) {\r\n\t\t\t\t\t\telement.attr( \"src\", that.currentItem.attr( \"src\" ) );\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif ( !className ) {\r\n\t\t\t\t\t\telement.css( \"visibility\", \"hidden\" );\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\treturn element;\r\n\t\t\t\t},\r\n\t\t\t\tupdate: function(container, p) {\r\n\r\n\t\t\t\t\t// 1. If a className is set as 'placeholder option, we don't force sizes - the class is responsible for that\r\n\t\t\t\t\t// 2. The option 'forcePlaceholderSize can be enabled to force it even if a class name is specified\r\n\t\t\t\t\tif(className && !o.forcePlaceholderSize) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t//If the element doesn't have a actual height by itself (without styles coming from a stylesheet), it receives the inline height from the dragged item\r\n\t\t\t\t\tif(!p.height()) { p.height(that.currentItem.innerHeight() - parseInt(that.currentItem.css(\"paddingTop\")||0, 10) - parseInt(that.currentItem.css(\"paddingBottom\")||0, 10)); }\r\n\t\t\t\t\tif(!p.width()) { p.width(that.currentItem.innerWidth() - parseInt(that.currentItem.css(\"paddingLeft\")||0, 10) - parseInt(that.currentItem.css(\"paddingRight\")||0, 10)); }\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t\t//Create the placeholder\r\n\t\tthat.placeholder = $(o.placeholder.element.call(that.element, that.currentItem));\r\n\r\n\t\t//Append it after the actual current item\r\n\t\tthat.currentItem.after(that.placeholder);\r\n\r\n\t\t//Update the size of the placeholder (TODO: Logic to fuzzy, see line 316/317)\r\n\t\to.placeholder.update(that, that.placeholder);\r\n\r\n\t},\r\n\r\n\t_contactContainers: function(event) {\r\n\t\tvar i, j, dist, itemWithLeastDistance, posProperty, sizeProperty, base, cur, nearBottom, floating,\r\n\t\t\tinnermostContainer = null,\r\n\t\t\tinnermostIndex = null;\r\n\r\n\t\t// get innermost container that intersects with item\r\n\t\tfor (i = this.containers.length - 1; i >= 0; i--) {\r\n\r\n\t\t\t// never consider a container that's located within the item itself\r\n\t\t\tif($.contains(this.currentItem[0], this.containers[i].element[0])) {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\r\n\t\t\tif(this._intersectsWith(this.containers[i].containerCache)) {\r\n\r\n\t\t\t\t// if we've already found a container and it's more \"inner\" than this, then continue\r\n\t\t\t\tif(innermostContainer && $.contains(this.containers[i].element[0], innermostContainer.element[0])) {\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tinnermostContainer = this.containers[i];\r\n\t\t\t\tinnermostIndex = i;\r\n\r\n\t\t\t} else {\r\n\t\t\t\t// container doesn't intersect. trigger \"out\" event if necessary\r\n\t\t\t\tif(this.containers[i].containerCache.over) {\r\n\t\t\t\t\tthis.containers[i]._trigger(\"out\", event, this._uiHash(this));\r\n\t\t\t\t\tthis.containers[i].containerCache.over = 0;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// if no intersecting containers found, return\r\n\t\tif(!innermostContainer) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// move the item into the container if it's not there already\r\n\t\tif(this.containers.length === 1) {\r\n\t\t\tif (!this.containers[innermostIndex].containerCache.over) {\r\n\t\t\t\tthis.containers[innermostIndex]._trigger(\"over\", event, this._uiHash(this));\r\n\t\t\t\tthis.containers[innermostIndex].containerCache.over = 1;\r\n\t\t\t}\r\n\t\t} else {\r\n\r\n\t\t\t//When entering a new container, we will find the item with the least distance and append our item near it\r\n\t\t\tdist = 10000;\r\n\t\t\titemWithLeastDistance = null;\r\n\t\t\tfloating = innermostContainer.floating || isFloating(this.currentItem);\r\n\t\t\tposProperty = floating ? \"left\" : \"top\";\r\n\t\t\tsizeProperty = floating ? \"width\" : \"height\";\r\n\t\t\tbase = this.positionAbs[posProperty] + this.offset.click[posProperty];\r\n\t\t\tfor (j = this.items.length - 1; j >= 0; j--) {\r\n\t\t\t\tif(!$.contains(this.containers[innermostIndex].element[0], this.items[j].item[0])) {\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t\tif(this.items[j].item[0] === this.currentItem[0]) {\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t\tif (floating && !isOverAxis(this.positionAbs.top + this.offset.click.top, this.items[j].top, this.items[j].height)) {\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t\tcur = this.items[j].item.offset()[posProperty];\r\n\t\t\t\tnearBottom = false;\r\n\t\t\t\tif(Math.abs(cur - base) > Math.abs(cur + this.items[j][sizeProperty] - base)){\r\n\t\t\t\t\tnearBottom = true;\r\n\t\t\t\t\tcur += this.items[j][sizeProperty];\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(Math.abs(cur - base) < dist) {\r\n\t\t\t\t\tdist = Math.abs(cur - base); itemWithLeastDistance = this.items[j];\r\n\t\t\t\t\tthis.direction = nearBottom ? \"up\": \"down\";\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t//Check if dropOnEmpty is enabled\r\n\t\t\tif(!itemWithLeastDistance && !this.options.dropOnEmpty) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif(this.currentContainer === this.containers[innermostIndex]) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\titemWithLeastDistance ? this._rearrange(event, itemWithLeastDistance, null, true) : this._rearrange(event, null, this.containers[innermostIndex].element, true);\r\n\t\t\tthis._trigger(\"change\", event, this._uiHash());\r\n\t\t\tthis.containers[innermostIndex]._trigger(\"change\", event, this._uiHash(this));\r\n\t\t\tthis.currentContainer = this.containers[innermostIndex];\r\n\r\n\t\t\t//Update the placeholder\r\n\t\t\tthis.options.placeholder.update(this.currentContainer, this.placeholder);\r\n\r\n\t\t\tthis.containers[innermostIndex]._trigger(\"over\", event, this._uiHash(this));\r\n\t\t\tthis.containers[innermostIndex].containerCache.over = 1;\r\n\t\t}\r\n\r\n\r\n\t},\r\n\r\n\t_createHelper: function(event) {\r\n\r\n\t\tvar o = this.options,\r\n\t\t\thelper = $.isFunction(o.helper) ? $(o.helper.apply(this.element[0], [event, this.currentItem])) : (o.helper === \"clone\" ? this.currentItem.clone() : this.currentItem);\r\n\r\n\t\t//Add the helper to the DOM if that didn't happen already\r\n\t\tif(!helper.parents(\"body\").length) {\r\n\t\t\t$(o.appendTo !== \"parent\" ? o.appendTo : this.currentItem[0].parentNode)[0].appendChild(helper[0]);\r\n\t\t}\r\n\r\n\t\tif(helper[0] === this.currentItem[0]) {\r\n\t\t\tthis._storedCSS = { width: this.currentItem[0].style.width, height: this.currentItem[0].style.height, position: this.currentItem.css(\"position\"), top: this.currentItem.css(\"top\"), left: this.currentItem.css(\"left\") };\r\n\t\t}\r\n\r\n\t\tif(!helper[0].style.width || o.forceHelperSize) {\r\n\t\t\thelper.width(this.currentItem.width());\r\n\t\t}\r\n\t\tif(!helper[0].style.height || o.forceHelperSize) {\r\n\t\t\thelper.height(this.currentItem.height());\r\n\t\t}\r\n\r\n\t\treturn helper;\r\n\r\n\t},\r\n\r\n\t_adjustOffsetFromHelper: function(obj) {\r\n\t\tif (typeof obj === \"string\") {\r\n\t\t\tobj = obj.split(\" \");\r\n\t\t}\r\n\t\tif ($.isArray(obj)) {\r\n\t\t\tobj = {left: +obj[0], top: +obj[1] || 0};\r\n\t\t}\r\n\t\tif (\"left\" in obj) {\r\n\t\t\tthis.offset.click.left = obj.left + this.margins.left;\r\n\t\t}\r\n\t\tif (\"right\" in obj) {\r\n\t\t\tthis.offset.click.left = this.helperProportions.width - obj.right + this.margins.left;\r\n\t\t}\r\n\t\tif (\"top\" in obj) {\r\n\t\t\tthis.offset.click.top = obj.top + this.margins.top;\r\n\t\t}\r\n\t\tif (\"bottom\" in obj) {\r\n\t\t\tthis.offset.click.top = this.helperProportions.height - obj.bottom + this.margins.top;\r\n\t\t}\r\n\t},\r\n\r\n\t_getParentOffset: function() {\r\n\r\n\r\n\t\t//Get the offsetParent and cache its position\r\n\t\tthis.offsetParent = this.helper.offsetParent();\r\n\t\tvar po = this.offsetParent.offset();\r\n\r\n\t\t// This is a special case where we need to modify a offset calculated on start, since the following happened:\r\n\t\t// 1. The position of the helper is absolute, so it's position is calculated based on the next positioned parent\r\n\t\t// 2. The actual offset parent is a child of the scroll parent, and the scroll parent isn't the document, which means that\r\n\t\t//    the scroll is included in the initial calculation of the offset of the parent, and never recalculated upon drag\r\n\t\tif(this.cssPosition === \"absolute\" && this.scrollParent[0] !== document && $.contains(this.scrollParent[0], this.offsetParent[0])) {\r\n\t\t\tpo.left += this.scrollParent.scrollLeft();\r\n\t\t\tpo.top += this.scrollParent.scrollTop();\r\n\t\t}\r\n\r\n\t\t// This needs to be actually done for all browsers, since pageX/pageY includes this information\r\n\t\t// with an ugly IE fix\r\n\t\tif( this.offsetParent[0] === document.body || (this.offsetParent[0].tagName && this.offsetParent[0].tagName.toLowerCase() === \"html\" && $.ui.ie)) {\r\n\t\t\tpo = { top: 0, left: 0 };\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\ttop: po.top + (parseInt(this.offsetParent.css(\"borderTopWidth\"),10) || 0),\r\n\t\t\tleft: po.left + (parseInt(this.offsetParent.css(\"borderLeftWidth\"),10) || 0)\r\n\t\t};\r\n\r\n\t},\r\n\r\n\t_getRelativeOffset: function() {\r\n\r\n\t\tif(this.cssPosition === \"relative\") {\r\n\t\t\tvar p = this.currentItem.position();\r\n\t\t\treturn {\r\n\t\t\t\ttop: p.top - (parseInt(this.helper.css(\"top\"),10) || 0) + this.scrollParent.scrollTop(),\r\n\t\t\t\tleft: p.left - (parseInt(this.helper.css(\"left\"),10) || 0) + this.scrollParent.scrollLeft()\r\n\t\t\t};\r\n\t\t} else {\r\n\t\t\treturn { top: 0, left: 0 };\r\n\t\t}\r\n\r\n\t},\r\n\r\n\t_cacheMargins: function() {\r\n\t\tthis.margins = {\r\n\t\t\tleft: (parseInt(this.currentItem.css(\"marginLeft\"),10) || 0),\r\n\t\t\ttop: (parseInt(this.currentItem.css(\"marginTop\"),10) || 0)\r\n\t\t};\r\n\t},\r\n\r\n\t_cacheHelperProportions: function() {\r\n\t\tthis.helperProportions = {\r\n\t\t\twidth: this.helper.outerWidth(),\r\n\t\t\theight: this.helper.outerHeight()\r\n\t\t};\r\n\t},\r\n\r\n\t_setContainment: function() {\r\n\r\n\t\tvar ce, co, over,\r\n\t\t\to = this.options;\r\n\t\tif(o.containment === \"parent\") {\r\n\t\t\to.containment = this.helper[0].parentNode;\r\n\t\t}\r\n\t\tif(o.containment === \"document\" || o.containment === \"window\") {\r\n\t\t\tthis.containment = [\r\n\t\t\t\t0 - this.offset.relative.left - this.offset.parent.left,\r\n\t\t\t\t0 - this.offset.relative.top - this.offset.parent.top,\r\n\t\t\t\t$(o.containment === \"document\" ? document : window).width() - this.helperProportions.width - this.margins.left,\r\n\t\t\t\t($(o.containment === \"document\" ? document : window).height() || document.body.parentNode.scrollHeight) - this.helperProportions.height - this.margins.top\r\n\t\t\t];\r\n\t\t}\r\n\r\n\t\tif(!(/^(document|window|parent)$/).test(o.containment)) {\r\n\t\t\tce = $(o.containment)[0];\r\n\t\t\tco = $(o.containment).offset();\r\n\t\t\tover = ($(ce).css(\"overflow\") !== \"hidden\");\r\n\r\n\t\t\tthis.containment = [\r\n\t\t\t\tco.left + (parseInt($(ce).css(\"borderLeftWidth\"),10) || 0) + (parseInt($(ce).css(\"paddingLeft\"),10) || 0) - this.margins.left,\r\n\t\t\t\tco.top + (parseInt($(ce).css(\"borderTopWidth\"),10) || 0) + (parseInt($(ce).css(\"paddingTop\"),10) || 0) - this.margins.top,\r\n\t\t\t\tco.left+(over ? Math.max(ce.scrollWidth,ce.offsetWidth) : ce.offsetWidth) - (parseInt($(ce).css(\"borderLeftWidth\"),10) || 0) - (parseInt($(ce).css(\"paddingRight\"),10) || 0) - this.helperProportions.width - this.margins.left,\r\n\t\t\t\tco.top+(over ? Math.max(ce.scrollHeight,ce.offsetHeight) : ce.offsetHeight) - (parseInt($(ce).css(\"borderTopWidth\"),10) || 0) - (parseInt($(ce).css(\"paddingBottom\"),10) || 0) - this.helperProportions.height - this.margins.top\r\n\t\t\t];\r\n\t\t}\r\n\r\n\t},\r\n\r\n\t_convertPositionTo: function(d, pos) {\r\n\r\n\t\tif(!pos) {\r\n\t\t\tpos = this.position;\r\n\t\t}\r\n\t\tvar mod = d === \"absolute\" ? 1 : -1,\r\n\t\t\tscroll = this.cssPosition === \"absolute\" && !(this.scrollParent[0] !== document && $.contains(this.scrollParent[0], this.offsetParent[0])) ? this.offsetParent : this.scrollParent,\r\n\t\t\tscrollIsRootNode = (/(html|body)/i).test(scroll[0].tagName);\r\n\r\n\t\treturn {\r\n\t\t\ttop: (\r\n\t\t\t\tpos.top\t+\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// The absolute mouse position\r\n\t\t\t\tthis.offset.relative.top * mod +\t\t\t\t\t\t\t\t\t\t// Only for relative positioned nodes: Relative offset from element to offset parent\r\n\t\t\t\tthis.offset.parent.top * mod -\t\t\t\t\t\t\t\t\t\t\t// The offsetParent's offset without borders (offset + border)\r\n\t\t\t\t( ( this.cssPosition === \"fixed\" ? -this.scrollParent.scrollTop() : ( scrollIsRootNode ? 0 : scroll.scrollTop() ) ) * mod)\r\n\t\t\t),\r\n\t\t\tleft: (\r\n\t\t\t\tpos.left +\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// The absolute mouse position\r\n\t\t\t\tthis.offset.relative.left * mod +\t\t\t\t\t\t\t\t\t\t// Only for relative positioned nodes: Relative offset from element to offset parent\r\n\t\t\t\tthis.offset.parent.left * mod\t-\t\t\t\t\t\t\t\t\t\t// The offsetParent's offset without borders (offset + border)\r\n\t\t\t\t( ( this.cssPosition === \"fixed\" ? -this.scrollParent.scrollLeft() : scrollIsRootNode ? 0 : scroll.scrollLeft() ) * mod)\r\n\t\t\t)\r\n\t\t};\r\n\r\n\t},\r\n\r\n\t_generatePosition: function(event) {\r\n\r\n\t\tvar top, left,\r\n\t\t\to = this.options,\r\n\t\t\tpageX = event.pageX,\r\n\t\t\tpageY = event.pageY,\r\n\t\t\tscroll = this.cssPosition === \"absolute\" && !(this.scrollParent[0] !== document && $.contains(this.scrollParent[0], this.offsetParent[0])) ? this.offsetParent : this.scrollParent, scrollIsRootNode = (/(html|body)/i).test(scroll[0].tagName);\r\n\r\n\t\t// This is another very weird special case that only happens for relative elements:\r\n\t\t// 1. If the css position is relative\r\n\t\t// 2. and the scroll parent is the document or similar to the offset parent\r\n\t\t// we have to refresh the relative offset during the scroll so there are no jumps\r\n\t\tif(this.cssPosition === \"relative\" && !(this.scrollParent[0] !== document && this.scrollParent[0] !== this.offsetParent[0])) {\r\n\t\t\tthis.offset.relative = this._getRelativeOffset();\r\n\t\t}\r\n\r\n\t\t/*\r\n\t\t * - Position constraining -\r\n\t\t * Constrain the position to a mix of grid, containment.\r\n\t\t */\r\n\r\n\t\tif(this.originalPosition) { //If we are not dragging yet, we won't check for options\r\n\r\n\t\t\tif(this.containment) {\r\n\t\t\t\tif(event.pageX - this.offset.click.left < this.containment[0]) {\r\n\t\t\t\t\tpageX = this.containment[0] + this.offset.click.left;\r\n\t\t\t\t}\r\n\t\t\t\tif(event.pageY - this.offset.click.top < this.containment[1]) {\r\n\t\t\t\t\tpageY = this.containment[1] + this.offset.click.top;\r\n\t\t\t\t}\r\n\t\t\t\tif(event.pageX - this.offset.click.left > this.containment[2]) {\r\n\t\t\t\t\tpageX = this.containment[2] + this.offset.click.left;\r\n\t\t\t\t}\r\n\t\t\t\tif(event.pageY - this.offset.click.top > this.containment[3]) {\r\n\t\t\t\t\tpageY = this.containment[3] + this.offset.click.top;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif(o.grid) {\r\n\t\t\t\ttop = this.originalPageY + Math.round((pageY - this.originalPageY) / o.grid[1]) * o.grid[1];\r\n\t\t\t\tpageY = this.containment ? ( (top - this.offset.click.top >= this.containment[1] && top - this.offset.click.top <= this.containment[3]) ? top : ((top - this.offset.click.top >= this.containment[1]) ? top - o.grid[1] : top + o.grid[1])) : top;\r\n\r\n\t\t\t\tleft = this.originalPageX + Math.round((pageX - this.originalPageX) / o.grid[0]) * o.grid[0];\r\n\t\t\t\tpageX = this.containment ? ( (left - this.offset.click.left >= this.containment[0] && left - this.offset.click.left <= this.containment[2]) ? left : ((left - this.offset.click.left >= this.containment[0]) ? left - o.grid[0] : left + o.grid[0])) : left;\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\ttop: (\r\n\t\t\t\tpageY -\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// The absolute mouse position\r\n\t\t\t\tthis.offset.click.top -\t\t\t\t\t\t\t\t\t\t\t\t\t// Click offset (relative to the element)\r\n\t\t\t\tthis.offset.relative.top\t-\t\t\t\t\t\t\t\t\t\t\t// Only for relative positioned nodes: Relative offset from element to offset parent\r\n\t\t\t\tthis.offset.parent.top +\t\t\t\t\t\t\t\t\t\t\t\t// The offsetParent's offset without borders (offset + border)\r\n\t\t\t\t( ( this.cssPosition === \"fixed\" ? -this.scrollParent.scrollTop() : ( scrollIsRootNode ? 0 : scroll.scrollTop() ) ))\r\n\t\t\t),\r\n\t\t\tleft: (\r\n\t\t\t\tpageX -\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// The absolute mouse position\r\n\t\t\t\tthis.offset.click.left -\t\t\t\t\t\t\t\t\t\t\t\t// Click offset (relative to the element)\r\n\t\t\t\tthis.offset.relative.left\t-\t\t\t\t\t\t\t\t\t\t\t// Only for relative positioned nodes: Relative offset from element to offset parent\r\n\t\t\t\tthis.offset.parent.left +\t\t\t\t\t\t\t\t\t\t\t\t// The offsetParent's offset without borders (offset + border)\r\n\t\t\t\t( ( this.cssPosition === \"fixed\" ? -this.scrollParent.scrollLeft() : scrollIsRootNode ? 0 : scroll.scrollLeft() ))\r\n\t\t\t)\r\n\t\t};\r\n\r\n\t},\r\n\r\n\t_rearrange: function(event, i, a, hardRefresh) {\r\n\r\n\t\ta ? a[0].appendChild(this.placeholder[0]) : i.item[0].parentNode.insertBefore(this.placeholder[0], (this.direction === \"down\" ? i.item[0] : i.item[0].nextSibling));\r\n\r\n\t\t//Various things done here to improve the performance:\r\n\t\t// 1. we create a setTimeout, that calls refreshPositions\r\n\t\t// 2. on the instance, we have a counter variable, that get's higher after every append\r\n\t\t// 3. on the local scope, we copy the counter variable, and check in the timeout, if it's still the same\r\n\t\t// 4. this lets only the last addition to the timeout stack through\r\n\t\tthis.counter = this.counter ? ++this.counter : 1;\r\n\t\tvar counter = this.counter;\r\n\r\n\t\tthis._delay(function() {\r\n\t\t\tif(counter === this.counter) {\r\n\t\t\t\tthis.refreshPositions(!hardRefresh); //Precompute after each DOM insertion, NOT on mousemove\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t},\r\n\r\n\t_clear: function(event, noPropagation) {\r\n\r\n\t\tthis.reverting = false;\r\n\t\t// We delay all events that have to be triggered to after the point where the placeholder has been removed and\r\n\t\t// everything else normalized again\r\n\t\tvar i,\r\n\t\t\tdelayedTriggers = [];\r\n\r\n\t\t// We first have to update the dom position of the actual currentItem\r\n\t\t// Note: don't do it if the current item is already removed (by a user), or it gets reappended (see #4088)\r\n\t\tif(!this._noFinalSort && this.currentItem.parent().length) {\r\n\t\t\tthis.placeholder.before(this.currentItem);\r\n\t\t}\r\n\t\tthis._noFinalSort = null;\r\n\r\n\t\tif(this.helper[0] === this.currentItem[0]) {\r\n\t\t\tfor(i in this._storedCSS) {\r\n\t\t\t\tif(this._storedCSS[i] === \"auto\" || this._storedCSS[i] === \"static\") {\r\n\t\t\t\t\tthis._storedCSS[i] = \"\";\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis.currentItem.css(this._storedCSS).removeClass(\"ui-sortable-helper\");\r\n\t\t} else {\r\n\t\t\tthis.currentItem.show();\r\n\t\t}\r\n\r\n\t\tif(this.fromOutside && !noPropagation) {\r\n\t\t\tdelayedTriggers.push(function(event) { this._trigger(\"receive\", event, this._uiHash(this.fromOutside)); });\r\n\t\t}\r\n\t\tif((this.fromOutside || this.domPosition.prev !== this.currentItem.prev().not(\".ui-sortable-helper\")[0] || this.domPosition.parent !== this.currentItem.parent()[0]) && !noPropagation) {\r\n\t\t\tdelayedTriggers.push(function(event) { this._trigger(\"update\", event, this._uiHash()); }); //Trigger update callback if the DOM position has changed\r\n\t\t}\r\n\r\n\t\t// Check if the items Container has Changed and trigger appropriate\r\n\t\t// events.\r\n\t\tif (this !== this.currentContainer) {\r\n\t\t\tif(!noPropagation) {\r\n\t\t\t\tdelayedTriggers.push(function(event) { this._trigger(\"remove\", event, this._uiHash()); });\r\n\t\t\t\tdelayedTriggers.push((function(c) { return function(event) { c._trigger(\"receive\", event, this._uiHash(this)); };  }).call(this, this.currentContainer));\r\n\t\t\t\tdelayedTriggers.push((function(c) { return function(event) { c._trigger(\"update\", event, this._uiHash(this));  }; }).call(this, this.currentContainer));\r\n\t\t\t}\r\n\t\t}\r\n\r\n\r\n\t\t//Post events to containers\r\n\t\tfor (i = this.containers.length - 1; i >= 0; i--){\r\n\t\t\tif(!noPropagation) {\r\n\t\t\t\tdelayedTriggers.push((function(c) { return function(event) { c._trigger(\"deactivate\", event, this._uiHash(this)); };  }).call(this, this.containers[i]));\r\n\t\t\t}\r\n\t\t\tif(this.containers[i].containerCache.over) {\r\n\t\t\t\tdelayedTriggers.push((function(c) { return function(event) { c._trigger(\"out\", event, this._uiHash(this)); };  }).call(this, this.containers[i]));\r\n\t\t\t\tthis.containers[i].containerCache.over = 0;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t//Do what was originally in plugins\r\n\t\tif ( this.storedCursor ) {\r\n\t\t\tthis.document.find( \"body\" ).css( \"cursor\", this.storedCursor );\r\n\t\t\tthis.storedStylesheet.remove();\r\n\t\t}\r\n\t\tif(this._storedOpacity) {\r\n\t\t\tthis.helper.css(\"opacity\", this._storedOpacity);\r\n\t\t}\r\n\t\tif(this._storedZIndex) {\r\n\t\t\tthis.helper.css(\"zIndex\", this._storedZIndex === \"auto\" ? \"\" : this._storedZIndex);\r\n\t\t}\r\n\r\n\t\tthis.dragging = false;\r\n\t\tif(this.cancelHelperRemoval) {\r\n\t\t\tif(!noPropagation) {\r\n\t\t\t\tthis._trigger(\"beforeStop\", event, this._uiHash());\r\n\t\t\t\tfor (i=0; i < delayedTriggers.length; i++) {\r\n\t\t\t\t\tdelayedTriggers[i].call(this, event);\r\n\t\t\t\t} //Trigger all delayed events\r\n\t\t\t\tthis._trigger(\"stop\", event, this._uiHash());\r\n\t\t\t}\r\n\r\n\t\t\tthis.fromOutside = false;\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tif(!noPropagation) {\r\n\t\t\tthis._trigger(\"beforeStop\", event, this._uiHash());\r\n\t\t}\r\n\r\n\t\t//$(this.placeholder[0]).remove(); would have been the jQuery way - unfortunately, it unbinds ALL events from the original node!\r\n\t\tthis.placeholder[0].parentNode.removeChild(this.placeholder[0]);\r\n\r\n\t\tif(this.helper[0] !== this.currentItem[0]) {\r\n\t\t\tthis.helper.remove();\r\n\t\t}\r\n\t\tthis.helper = null;\r\n\r\n\t\tif(!noPropagation) {\r\n\t\t\tfor (i=0; i < delayedTriggers.length; i++) {\r\n\t\t\t\tdelayedTriggers[i].call(this, event);\r\n\t\t\t} //Trigger all delayed events\r\n\t\t\tthis._trigger(\"stop\", event, this._uiHash());\r\n\t\t}\r\n\r\n\t\tthis.fromOutside = false;\r\n\t\treturn true;\r\n\r\n\t},\r\n\r\n\t_trigger: function() {\r\n\t\tif ($.Widget.prototype._trigger.apply(this, arguments) === false) {\r\n\t\t\tthis.cancel();\r\n\t\t}\r\n\t},\r\n\r\n\t_uiHash: function(_inst) {\r\n\t\tvar inst = _inst || this;\r\n\t\treturn {\r\n\t\t\thelper: inst.helper,\r\n\t\t\tplaceholder: inst.placeholder || $([]),\r\n\t\t\tposition: inst.position,\r\n\t\t\toriginalPosition: inst.originalPosition,\r\n\t\t\toffset: inst.positionAbs,\r\n\t\t\titem: inst.currentItem,\r\n\t\t\tsender: _inst ? _inst.element : null\r\n\t\t};\r\n\t}\r\n\r\n});\r\n\r\n})(jQuery);\r\n\r\n(function($, undefined) {\r\n\r\nvar dataSpace = \"ui-effects-\";\r\n\r\n$.effects = {\r\n\teffect: {}\r\n};\r\n\r\n/*!\r\n * jQuery Color Animations v2.1.2\r\n * https://github.com/jquery/jquery-color\r\n *\r\n * Copyright 2013 jQuery Foundation and other contributors\r\n * Released under the MIT license.\r\n * http://jquery.org/license\r\n *\r\n * Date: Wed Jan 16 08:47:09 2013 -0600\r\n */\r\n(function( jQuery, undefined ) {\r\n\r\n\tvar stepHooks = \"backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor\",\r\n\r\n\t// plusequals test for += 100 -= 100\r\n\trplusequals = /^([\\-+])=\\s*(\\d+\\.?\\d*)/,\r\n\t// a set of RE's that can match strings and generate color tuples.\r\n\tstringParsers = [{\r\n\t\t\tre: /rgba?\\(\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3})\\s*(?:,\\s*(\\d?(?:\\.\\d+)?)\\s*)?\\)/,\r\n\t\t\tparse: function( execResult ) {\r\n\t\t\t\treturn [\r\n\t\t\t\t\texecResult[ 1 ],\r\n\t\t\t\t\texecResult[ 2 ],\r\n\t\t\t\t\texecResult[ 3 ],\r\n\t\t\t\t\texecResult[ 4 ]\r\n\t\t\t\t];\r\n\t\t\t}\r\n\t\t}, {\r\n\t\t\tre: /rgba?\\(\\s*(\\d+(?:\\.\\d+)?)\\%\\s*,\\s*(\\d+(?:\\.\\d+)?)\\%\\s*,\\s*(\\d+(?:\\.\\d+)?)\\%\\s*(?:,\\s*(\\d?(?:\\.\\d+)?)\\s*)?\\)/,\r\n\t\t\tparse: function( execResult ) {\r\n\t\t\t\treturn [\r\n\t\t\t\t\texecResult[ 1 ] * 2.55,\r\n\t\t\t\t\texecResult[ 2 ] * 2.55,\r\n\t\t\t\t\texecResult[ 3 ] * 2.55,\r\n\t\t\t\t\texecResult[ 4 ]\r\n\t\t\t\t];\r\n\t\t\t}\r\n\t\t}, {\r\n\t\t\t// this regex ignores A-F because it's compared against an already lowercased string\r\n\t\t\tre: /#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,\r\n\t\t\tparse: function( execResult ) {\r\n\t\t\t\treturn [\r\n\t\t\t\t\tparseInt( execResult[ 1 ], 16 ),\r\n\t\t\t\t\tparseInt( execResult[ 2 ], 16 ),\r\n\t\t\t\t\tparseInt( execResult[ 3 ], 16 )\r\n\t\t\t\t];\r\n\t\t\t}\r\n\t\t}, {\r\n\t\t\t// this regex ignores A-F because it's compared against an already lowercased string\r\n\t\t\tre: /#([a-f0-9])([a-f0-9])([a-f0-9])/,\r\n\t\t\tparse: function( execResult ) {\r\n\t\t\t\treturn [\r\n\t\t\t\t\tparseInt( execResult[ 1 ] + execResult[ 1 ], 16 ),\r\n\t\t\t\t\tparseInt( execResult[ 2 ] + execResult[ 2 ], 16 ),\r\n\t\t\t\t\tparseInt( execResult[ 3 ] + execResult[ 3 ], 16 )\r\n\t\t\t\t];\r\n\t\t\t}\r\n\t\t}, {\r\n\t\t\tre: /hsla?\\(\\s*(\\d+(?:\\.\\d+)?)\\s*,\\s*(\\d+(?:\\.\\d+)?)\\%\\s*,\\s*(\\d+(?:\\.\\d+)?)\\%\\s*(?:,\\s*(\\d?(?:\\.\\d+)?)\\s*)?\\)/,\r\n\t\t\tspace: \"hsla\",\r\n\t\t\tparse: function( execResult ) {\r\n\t\t\t\treturn [\r\n\t\t\t\t\texecResult[ 1 ],\r\n\t\t\t\t\texecResult[ 2 ] / 100,\r\n\t\t\t\t\texecResult[ 3 ] / 100,\r\n\t\t\t\t\texecResult[ 4 ]\r\n\t\t\t\t];\r\n\t\t\t}\r\n\t\t}],\r\n\r\n\t// jQuery.Color( )\r\n\tcolor = jQuery.Color = function( color, green, blue, alpha ) {\r\n\t\treturn new jQuery.Color.fn.parse( color, green, blue, alpha );\r\n\t},\r\n\tspaces = {\r\n\t\trgba: {\r\n\t\t\tprops: {\r\n\t\t\t\tred: {\r\n\t\t\t\t\tidx: 0,\r\n\t\t\t\t\ttype: \"byte\"\r\n\t\t\t\t},\r\n\t\t\t\tgreen: {\r\n\t\t\t\t\tidx: 1,\r\n\t\t\t\t\ttype: \"byte\"\r\n\t\t\t\t},\r\n\t\t\t\tblue: {\r\n\t\t\t\t\tidx: 2,\r\n\t\t\t\t\ttype: \"byte\"\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\thsla: {\r\n\t\t\tprops: {\r\n\t\t\t\thue: {\r\n\t\t\t\t\tidx: 0,\r\n\t\t\t\t\ttype: \"degrees\"\r\n\t\t\t\t},\r\n\t\t\t\tsaturation: {\r\n\t\t\t\t\tidx: 1,\r\n\t\t\t\t\ttype: \"percent\"\r\n\t\t\t\t},\r\n\t\t\t\tlightness: {\r\n\t\t\t\t\tidx: 2,\r\n\t\t\t\t\ttype: \"percent\"\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tpropTypes = {\r\n\t\t\"byte\": {\r\n\t\t\tfloor: true,\r\n\t\t\tmax: 255\r\n\t\t},\r\n\t\t\"percent\": {\r\n\t\t\tmax: 1\r\n\t\t},\r\n\t\t\"degrees\": {\r\n\t\t\tmod: 360,\r\n\t\t\tfloor: true\r\n\t\t}\r\n\t},\r\n\tsupport = color.support = {},\r\n\r\n\t// element for support tests\r\n\tsupportElem = jQuery( \"<p>\" )[ 0 ],\r\n\r\n\t// colors = jQuery.Color.names\r\n\tcolors,\r\n\r\n\t// local aliases of functions called often\r\n\teach = jQuery.each;\r\n\r\n// determine rgba support immediately\r\nsupportElem.style.cssText = \"background-color:rgba(1,1,1,.5)\";\r\nsupport.rgba = supportElem.style.backgroundColor.indexOf( \"rgba\" ) > -1;\r\n\r\n// define cache name and alpha properties\r\n// for rgba and hsla spaces\r\neach( spaces, function( spaceName, space ) {\r\n\tspace.cache = \"_\" + spaceName;\r\n\tspace.props.alpha = {\r\n\t\tidx: 3,\r\n\t\ttype: \"percent\",\r\n\t\tdef: 1\r\n\t};\r\n});\r\n\r\nfunction clamp( value, prop, allowEmpty ) {\r\n\tvar type = propTypes[ prop.type ] || {};\r\n\r\n\tif ( value == null ) {\r\n\t\treturn (allowEmpty || !prop.def) ? null : prop.def;\r\n\t}\r\n\r\n\t// ~~ is an short way of doing floor for positive numbers\r\n\tvalue = type.floor ? ~~value : parseFloat( value );\r\n\r\n\t// IE will pass in empty strings as value for alpha,\r\n\t// which will hit this case\r\n\tif ( isNaN( value ) ) {\r\n\t\treturn prop.def;\r\n\t}\r\n\r\n\tif ( type.mod ) {\r\n\t\t// we add mod before modding to make sure that negatives values\r\n\t\t// get converted properly: -10 -> 350\r\n\t\treturn (value + type.mod) % type.mod;\r\n\t}\r\n\r\n\t// for now all property types without mod have min and max\r\n\treturn 0 > value ? 0 : type.max < value ? type.max : value;\r\n}\r\n\r\nfunction stringParse( string ) {\r\n\tvar inst = color(),\r\n\t\trgba = inst._rgba = [];\r\n\r\n\tstring = string.toLowerCase();\r\n\r\n\teach( stringParsers, function( i, parser ) {\r\n\t\tvar parsed,\r\n\t\t\tmatch = parser.re.exec( string ),\r\n\t\t\tvalues = match && parser.parse( match ),\r\n\t\t\tspaceName = parser.space || \"rgba\";\r\n\r\n\t\tif ( values ) {\r\n\t\t\tparsed = inst[ spaceName ]( values );\r\n\r\n\t\t\t// if this was an rgba parse the assignment might happen twice\r\n\t\t\t// oh well....\r\n\t\t\tinst[ spaces[ spaceName ].cache ] = parsed[ spaces[ spaceName ].cache ];\r\n\t\t\trgba = inst._rgba = parsed._rgba;\r\n\r\n\t\t\t// exit each( stringParsers ) here because we matched\r\n\t\t\treturn false;\r\n\t\t}\r\n\t});\r\n\r\n\t// Found a stringParser that handled it\r\n\tif ( rgba.length ) {\r\n\r\n\t\t// if this came from a parsed string, force \"transparent\" when alpha is 0\r\n\t\t// chrome, (and maybe others) return \"transparent\" as rgba(0,0,0,0)\r\n\t\tif ( rgba.join() === \"0,0,0,0\" ) {\r\n\t\t\tjQuery.extend( rgba, colors.transparent );\r\n\t\t}\r\n\t\treturn inst;\r\n\t}\r\n\r\n\t// named colors\r\n\treturn colors[ string ];\r\n}\r\n\r\ncolor.fn = jQuery.extend( color.prototype, {\r\n\tparse: function( red, green, blue, alpha ) {\r\n\t\tif ( red === undefined ) {\r\n\t\t\tthis._rgba = [ null, null, null, null ];\r\n\t\t\treturn this;\r\n\t\t}\r\n\t\tif ( red.jquery || red.nodeType ) {\r\n\t\t\tred = jQuery( red ).css( green );\r\n\t\t\tgreen = undefined;\r\n\t\t}\r\n\r\n\t\tvar inst = this,\r\n\t\t\ttype = jQuery.type( red ),\r\n\t\t\trgba = this._rgba = [];\r\n\r\n\t\t// more than 1 argument specified - assume ( red, green, blue, alpha )\r\n\t\tif ( green !== undefined ) {\r\n\t\t\tred = [ red, green, blue, alpha ];\r\n\t\t\ttype = \"array\";\r\n\t\t}\r\n\r\n\t\tif ( type === \"string\" ) {\r\n\t\t\treturn this.parse( stringParse( red ) || colors._default );\r\n\t\t}\r\n\r\n\t\tif ( type === \"array\" ) {\r\n\t\t\teach( spaces.rgba.props, function( key, prop ) {\r\n\t\t\t\trgba[ prop.idx ] = clamp( red[ prop.idx ], prop );\r\n\t\t\t});\r\n\t\t\treturn this;\r\n\t\t}\r\n\r\n\t\tif ( type === \"object\" ) {\r\n\t\t\tif ( red instanceof color ) {\r\n\t\t\t\teach( spaces, function( spaceName, space ) {\r\n\t\t\t\t\tif ( red[ space.cache ] ) {\r\n\t\t\t\t\t\tinst[ space.cache ] = red[ space.cache ].slice();\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\teach( spaces, function( spaceName, space ) {\r\n\t\t\t\t\tvar cache = space.cache;\r\n\t\t\t\t\teach( space.props, function( key, prop ) {\r\n\r\n\t\t\t\t\t\t// if the cache doesn't exist, and we know how to convert\r\n\t\t\t\t\t\tif ( !inst[ cache ] && space.to ) {\r\n\r\n\t\t\t\t\t\t\t// if the value was null, we don't need to copy it\r\n\t\t\t\t\t\t\t// if the key was alpha, we don't need to copy it either\r\n\t\t\t\t\t\t\tif ( key === \"alpha\" || red[ key ] == null ) {\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tinst[ cache ] = space.to( inst._rgba );\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// this is the only case where we allow nulls for ALL properties.\r\n\t\t\t\t\t\t// call clamp with alwaysAllowEmpty\r\n\t\t\t\t\t\tinst[ cache ][ prop.idx ] = clamp( red[ key ], prop, true );\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\t// everything defined but alpha?\r\n\t\t\t\t\tif ( inst[ cache ] && jQuery.inArray( null, inst[ cache ].slice( 0, 3 ) ) < 0 ) {\r\n\t\t\t\t\t\t// use the default of 1\r\n\t\t\t\t\t\tinst[ cache ][ 3 ] = 1;\r\n\t\t\t\t\t\tif ( space.from ) {\r\n\t\t\t\t\t\t\tinst._rgba = space.from( inst[ cache ] );\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\treturn this;\r\n\t\t}\r\n\t},\r\n\tis: function( compare ) {\r\n\t\tvar is = color( compare ),\r\n\t\t\tsame = true,\r\n\t\t\tinst = this;\r\n\r\n\t\teach( spaces, function( _, space ) {\r\n\t\t\tvar localCache,\r\n\t\t\t\tisCache = is[ space.cache ];\r\n\t\t\tif (isCache) {\r\n\t\t\t\tlocalCache = inst[ space.cache ] || space.to && space.to( inst._rgba ) || [];\r\n\t\t\t\teach( space.props, function( _, prop ) {\r\n\t\t\t\t\tif ( isCache[ prop.idx ] != null ) {\r\n\t\t\t\t\t\tsame = ( isCache[ prop.idx ] === localCache[ prop.idx ] );\r\n\t\t\t\t\t\treturn same;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\treturn same;\r\n\t\t});\r\n\t\treturn same;\r\n\t},\r\n\t_space: function() {\r\n\t\tvar used = [],\r\n\t\t\tinst = this;\r\n\t\teach( spaces, function( spaceName, space ) {\r\n\t\t\tif ( inst[ space.cache ] ) {\r\n\t\t\t\tused.push( spaceName );\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn used.pop();\r\n\t},\r\n\ttransition: function( other, distance ) {\r\n\t\tvar end = color( other ),\r\n\t\t\tspaceName = end._space(),\r\n\t\t\tspace = spaces[ spaceName ],\r\n\t\t\tstartColor = this.alpha() === 0 ? color( \"transparent\" ) : this,\r\n\t\t\tstart = startColor[ space.cache ] || space.to( startColor._rgba ),\r\n\t\t\tresult = start.slice();\r\n\r\n\t\tend = end[ space.cache ];\r\n\t\teach( space.props, function( key, prop ) {\r\n\t\t\tvar index = prop.idx,\r\n\t\t\t\tstartValue = start[ index ],\r\n\t\t\t\tendValue = end[ index ],\r\n\t\t\t\ttype = propTypes[ prop.type ] || {};\r\n\r\n\t\t\t// if null, don't override start value\r\n\t\t\tif ( endValue === null ) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\t// if null - use end\r\n\t\t\tif ( startValue === null ) {\r\n\t\t\t\tresult[ index ] = endValue;\r\n\t\t\t} else {\r\n\t\t\t\tif ( type.mod ) {\r\n\t\t\t\t\tif ( endValue - startValue > type.mod / 2 ) {\r\n\t\t\t\t\t\tstartValue += type.mod;\r\n\t\t\t\t\t} else if ( startValue - endValue > type.mod / 2 ) {\r\n\t\t\t\t\t\tstartValue -= type.mod;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tresult[ index ] = clamp( ( endValue - startValue ) * distance + startValue, prop );\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn this[ spaceName ]( result );\r\n\t},\r\n\tblend: function( opaque ) {\r\n\t\t// if we are already opaque - return ourself\r\n\t\tif ( this._rgba[ 3 ] === 1 ) {\r\n\t\t\treturn this;\r\n\t\t}\r\n\r\n\t\tvar rgb = this._rgba.slice(),\r\n\t\t\ta = rgb.pop(),\r\n\t\t\tblend = color( opaque )._rgba;\r\n\r\n\t\treturn color( jQuery.map( rgb, function( v, i ) {\r\n\t\t\treturn ( 1 - a ) * blend[ i ] + a * v;\r\n\t\t}));\r\n\t},\r\n\ttoRgbaString: function() {\r\n\t\tvar prefix = \"rgba(\",\r\n\t\t\trgba = jQuery.map( this._rgba, function( v, i ) {\r\n\t\t\t\treturn v == null ? ( i > 2 ? 1 : 0 ) : v;\r\n\t\t\t});\r\n\r\n\t\tif ( rgba[ 3 ] === 1 ) {\r\n\t\t\trgba.pop();\r\n\t\t\tprefix = \"rgb(\";\r\n\t\t}\r\n\r\n\t\treturn prefix + rgba.join() + \")\";\r\n\t},\r\n\ttoHslaString: function() {\r\n\t\tvar prefix = \"hsla(\",\r\n\t\t\thsla = jQuery.map( this.hsla(), function( v, i ) {\r\n\t\t\t\tif ( v == null ) {\r\n\t\t\t\t\tv = i > 2 ? 1 : 0;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// catch 1 and 2\r\n\t\t\t\tif ( i && i < 3 ) {\r\n\t\t\t\t\tv = Math.round( v * 100 ) + \"%\";\r\n\t\t\t\t}\r\n\t\t\t\treturn v;\r\n\t\t\t});\r\n\r\n\t\tif ( hsla[ 3 ] === 1 ) {\r\n\t\t\thsla.pop();\r\n\t\t\tprefix = \"hsl(\";\r\n\t\t}\r\n\t\treturn prefix + hsla.join() + \")\";\r\n\t},\r\n\ttoHexString: function( includeAlpha ) {\r\n\t\tvar rgba = this._rgba.slice(),\r\n\t\t\talpha = rgba.pop();\r\n\r\n\t\tif ( includeAlpha ) {\r\n\t\t\trgba.push( ~~( alpha * 255 ) );\r\n\t\t}\r\n\r\n\t\treturn \"#\" + jQuery.map( rgba, function( v ) {\r\n\r\n\t\t\t// default to 0 when nulls exist\r\n\t\t\tv = ( v || 0 ).toString( 16 );\r\n\t\t\treturn v.length === 1 ? \"0\" + v : v;\r\n\t\t}).join(\"\");\r\n\t},\r\n\ttoString: function() {\r\n\t\treturn this._rgba[ 3 ] === 0 ? \"transparent\" : this.toRgbaString();\r\n\t}\r\n});\r\ncolor.fn.parse.prototype = color.fn;\r\n\r\n// hsla conversions adapted from:\r\n// https://code.google.com/p/maashaack/source/browse/packages/graphics/trunk/src/graphics/colors/HUE2RGB.as?r=5021\r\n\r\nfunction hue2rgb( p, q, h ) {\r\n\th = ( h + 1 ) % 1;\r\n\tif ( h * 6 < 1 ) {\r\n\t\treturn p + (q - p) * h * 6;\r\n\t}\r\n\tif ( h * 2 < 1) {\r\n\t\treturn q;\r\n\t}\r\n\tif ( h * 3 < 2 ) {\r\n\t\treturn p + (q - p) * ((2/3) - h) * 6;\r\n\t}\r\n\treturn p;\r\n}\r\n\r\nspaces.hsla.to = function ( rgba ) {\r\n\tif ( rgba[ 0 ] == null || rgba[ 1 ] == null || rgba[ 2 ] == null ) {\r\n\t\treturn [ null, null, null, rgba[ 3 ] ];\r\n\t}\r\n\tvar r = rgba[ 0 ] / 255,\r\n\t\tg = rgba[ 1 ] / 255,\r\n\t\tb = rgba[ 2 ] / 255,\r\n\t\ta = rgba[ 3 ],\r\n\t\tmax = Math.max( r, g, b ),\r\n\t\tmin = Math.min( r, g, b ),\r\n\t\tdiff = max - min,\r\n\t\tadd = max + min,\r\n\t\tl = add * 0.5,\r\n\t\th, s;\r\n\r\n\tif ( min === max ) {\r\n\t\th = 0;\r\n\t} else if ( r === max ) {\r\n\t\th = ( 60 * ( g - b ) / diff ) + 360;\r\n\t} else if ( g === max ) {\r\n\t\th = ( 60 * ( b - r ) / diff ) + 120;\r\n\t} else {\r\n\t\th = ( 60 * ( r - g ) / diff ) + 240;\r\n\t}\r\n\r\n\t// chroma (diff) == 0 means greyscale which, by definition, saturation = 0%\r\n\t// otherwise, saturation is based on the ratio of chroma (diff) to lightness (add)\r\n\tif ( diff === 0 ) {\r\n\t\ts = 0;\r\n\t} else if ( l <= 0.5 ) {\r\n\t\ts = diff / add;\r\n\t} else {\r\n\t\ts = diff / ( 2 - add );\r\n\t}\r\n\treturn [ Math.round(h) % 360, s, l, a == null ? 1 : a ];\r\n};\r\n\r\nspaces.hsla.from = function ( hsla ) {\r\n\tif ( hsla[ 0 ] == null || hsla[ 1 ] == null || hsla[ 2 ] == null ) {\r\n\t\treturn [ null, null, null, hsla[ 3 ] ];\r\n\t}\r\n\tvar h = hsla[ 0 ] / 360,\r\n\t\ts = hsla[ 1 ],\r\n\t\tl = hsla[ 2 ],\r\n\t\ta = hsla[ 3 ],\r\n\t\tq = l <= 0.5 ? l * ( 1 + s ) : l + s - l * s,\r\n\t\tp = 2 * l - q;\r\n\r\n\treturn [\r\n\t\tMath.round( hue2rgb( p, q, h + ( 1 / 3 ) ) * 255 ),\r\n\t\tMath.round( hue2rgb( p, q, h ) * 255 ),\r\n\t\tMath.round( hue2rgb( p, q, h - ( 1 / 3 ) ) * 255 ),\r\n\t\ta\r\n\t];\r\n};\r\n\r\n\r\neach( spaces, function( spaceName, space ) {\r\n\tvar props = space.props,\r\n\t\tcache = space.cache,\r\n\t\tto = space.to,\r\n\t\tfrom = space.from;\r\n\r\n\t// makes rgba() and hsla()\r\n\tcolor.fn[ spaceName ] = function( value ) {\r\n\r\n\t\t// generate a cache for this space if it doesn't exist\r\n\t\tif ( to && !this[ cache ] ) {\r\n\t\t\tthis[ cache ] = to( this._rgba );\r\n\t\t}\r\n\t\tif ( value === undefined ) {\r\n\t\t\treturn this[ cache ].slice();\r\n\t\t}\r\n\r\n\t\tvar ret,\r\n\t\t\ttype = jQuery.type( value ),\r\n\t\t\tarr = ( type === \"array\" || type === \"object\" ) ? value : arguments,\r\n\t\t\tlocal = this[ cache ].slice();\r\n\r\n\t\teach( props, function( key, prop ) {\r\n\t\t\tvar val = arr[ type === \"object\" ? key : prop.idx ];\r\n\t\t\tif ( val == null ) {\r\n\t\t\t\tval = local[ prop.idx ];\r\n\t\t\t}\r\n\t\t\tlocal[ prop.idx ] = clamp( val, prop );\r\n\t\t});\r\n\r\n\t\tif ( from ) {\r\n\t\t\tret = color( from( local ) );\r\n\t\t\tret[ cache ] = local;\r\n\t\t\treturn ret;\r\n\t\t} else {\r\n\t\t\treturn color( local );\r\n\t\t}\r\n\t};\r\n\r\n\t// makes red() green() blue() alpha() hue() saturation() lightness()\r\n\teach( props, function( key, prop ) {\r\n\t\t// alpha is included in more than one space\r\n\t\tif ( color.fn[ key ] ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tcolor.fn[ key ] = function( value ) {\r\n\t\t\tvar vtype = jQuery.type( value ),\r\n\t\t\t\tfn = ( key === \"alpha\" ? ( this._hsla ? \"hsla\" : \"rgba\" ) : spaceName ),\r\n\t\t\t\tlocal = this[ fn ](),\r\n\t\t\t\tcur = local[ prop.idx ],\r\n\t\t\t\tmatch;\r\n\r\n\t\t\tif ( vtype === \"undefined\" ) {\r\n\t\t\t\treturn cur;\r\n\t\t\t}\r\n\r\n\t\t\tif ( vtype === \"function\" ) {\r\n\t\t\t\tvalue = value.call( this, cur );\r\n\t\t\t\tvtype = jQuery.type( value );\r\n\t\t\t}\r\n\t\t\tif ( value == null && prop.empty ) {\r\n\t\t\t\treturn this;\r\n\t\t\t}\r\n\t\t\tif ( vtype === \"string\" ) {\r\n\t\t\t\tmatch = rplusequals.exec( value );\r\n\t\t\t\tif ( match ) {\r\n\t\t\t\t\tvalue = cur + parseFloat( match[ 2 ] ) * ( match[ 1 ] === \"+\" ? 1 : -1 );\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tlocal[ prop.idx ] = value;\r\n\t\t\treturn this[ fn ]( local );\r\n\t\t};\r\n\t});\r\n});\r\n\r\n// add cssHook and .fx.step function for each named hook.\r\n// accept a space separated string of properties\r\ncolor.hook = function( hook ) {\r\n\tvar hooks = hook.split( \" \" );\r\n\teach( hooks, function( i, hook ) {\r\n\t\tjQuery.cssHooks[ hook ] = {\r\n\t\t\tset: function( elem, value ) {\r\n\t\t\t\tvar parsed, curElem,\r\n\t\t\t\t\tbackgroundColor = \"\";\r\n\r\n\t\t\t\tif ( value !== \"transparent\" && ( jQuery.type( value ) !== \"string\" || ( parsed = stringParse( value ) ) ) ) {\r\n\t\t\t\t\tvalue = color( parsed || value );\r\n\t\t\t\t\tif ( !support.rgba && value._rgba[ 3 ] !== 1 ) {\r\n\t\t\t\t\t\tcurElem = hook === \"backgroundColor\" ? elem.parentNode : elem;\r\n\t\t\t\t\t\twhile (\r\n\t\t\t\t\t\t\t(backgroundColor === \"\" || backgroundColor === \"transparent\") &&\r\n\t\t\t\t\t\t\tcurElem && curElem.style\r\n\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\t\tbackgroundColor = jQuery.css( curElem, \"backgroundColor\" );\r\n\t\t\t\t\t\t\t\tcurElem = curElem.parentNode;\r\n\t\t\t\t\t\t\t} catch ( e ) {\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tvalue = value.blend( backgroundColor && backgroundColor !== \"transparent\" ?\r\n\t\t\t\t\t\t\tbackgroundColor :\r\n\t\t\t\t\t\t\t\"_default\" );\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvalue = value.toRgbaString();\r\n\t\t\t\t}\r\n\t\t\t\ttry {\r\n\t\t\t\t\telem.style[ hook ] = value;\r\n\t\t\t\t} catch( e ) {\r\n\t\t\t\t\t// wrapped to prevent IE from throwing errors on \"invalid\" values like 'auto' or 'inherit'\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\t\tjQuery.fx.step[ hook ] = function( fx ) {\r\n\t\t\tif ( !fx.colorInit ) {\r\n\t\t\t\tfx.start = color( fx.elem, hook );\r\n\t\t\t\tfx.end = color( fx.end );\r\n\t\t\t\tfx.colorInit = true;\r\n\t\t\t}\r\n\t\t\tjQuery.cssHooks[ hook ].set( fx.elem, fx.start.transition( fx.end, fx.pos ) );\r\n\t\t};\r\n\t});\r\n\r\n};\r\n\r\ncolor.hook( stepHooks );\r\n\r\njQuery.cssHooks.borderColor = {\r\n\texpand: function( value ) {\r\n\t\tvar expanded = {};\r\n\r\n\t\teach( [ \"Top\", \"Right\", \"Bottom\", \"Left\" ], function( i, part ) {\r\n\t\t\texpanded[ \"border\" + part + \"Color\" ] = value;\r\n\t\t});\r\n\t\treturn expanded;\r\n\t}\r\n};\r\n\r\n// Basic color names only.\r\n// Usage of any of the other color names requires adding yourself or including\r\n// jquery.color.svg-names.js.\r\ncolors = jQuery.Color.names = {\r\n\t// 4.1. Basic color keywords\r\n\taqua: \"#00ffff\",\r\n\tblack: \"#000000\",\r\n\tblue: \"#0000ff\",\r\n\tfuchsia: \"#ff00ff\",\r\n\tgray: \"#808080\",\r\n\tgreen: \"#008000\",\r\n\tlime: \"#00ff00\",\r\n\tmaroon: \"#800000\",\r\n\tnavy: \"#000080\",\r\n\tolive: \"#808000\",\r\n\tpurple: \"#800080\",\r\n\tred: \"#ff0000\",\r\n\tsilver: \"#c0c0c0\",\r\n\tteal: \"#008080\",\r\n\twhite: \"#ffffff\",\r\n\tyellow: \"#ffff00\",\r\n\r\n\t// 4.2.3. \"transparent\" color keyword\r\n\ttransparent: [ null, null, null, 0 ],\r\n\r\n\t_default: \"#ffffff\"\r\n};\r\n\r\n})( jQuery );\r\n\r\n\r\n/******************************************************************************/\r\n/****************************** CLASS ANIMATIONS ******************************/\r\n/******************************************************************************/\r\n(function() {\r\n\r\nvar classAnimationActions = [ \"add\", \"remove\", \"toggle\" ],\r\n\tshorthandStyles = {\r\n\t\tborder: 1,\r\n\t\tborderBottom: 1,\r\n\t\tborderColor: 1,\r\n\t\tborderLeft: 1,\r\n\t\tborderRight: 1,\r\n\t\tborderTop: 1,\r\n\t\tborderWidth: 1,\r\n\t\tmargin: 1,\r\n\t\tpadding: 1\r\n\t};\r\n\r\n$.each([ \"borderLeftStyle\", \"borderRightStyle\", \"borderBottomStyle\", \"borderTopStyle\" ], function( _, prop ) {\r\n\t$.fx.step[ prop ] = function( fx ) {\r\n\t\tif ( fx.end !== \"none\" && !fx.setAttr || fx.pos === 1 && !fx.setAttr ) {\r\n\t\t\tjQuery.style( fx.elem, prop, fx.end );\r\n\t\t\tfx.setAttr = true;\r\n\t\t}\r\n\t};\r\n});\r\n\r\nfunction getElementStyles( elem ) {\r\n\tvar key, len,\r\n\t\tstyle = elem.ownerDocument.defaultView ?\r\n\t\t\telem.ownerDocument.defaultView.getComputedStyle( elem, null ) :\r\n\t\t\telem.currentStyle,\r\n\t\tstyles = {};\r\n\r\n\tif ( style && style.length && style[ 0 ] && style[ style[ 0 ] ] ) {\r\n\t\tlen = style.length;\r\n\t\twhile ( len-- ) {\r\n\t\t\tkey = style[ len ];\r\n\t\t\tif ( typeof style[ key ] === \"string\" ) {\r\n\t\t\t\tstyles[ $.camelCase( key ) ] = style[ key ];\r\n\t\t\t}\r\n\t\t}\r\n\t// support: Opera, IE <9\r\n\t} else {\r\n\t\tfor ( key in style ) {\r\n\t\t\tif ( typeof style[ key ] === \"string\" ) {\r\n\t\t\t\tstyles[ key ] = style[ key ];\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\treturn styles;\r\n}\r\n\r\n\r\nfunction styleDifference( oldStyle, newStyle ) {\r\n\tvar diff = {},\r\n\t\tname, value;\r\n\r\n\tfor ( name in newStyle ) {\r\n\t\tvalue = newStyle[ name ];\r\n\t\tif ( oldStyle[ name ] !== value ) {\r\n\t\t\tif ( !shorthandStyles[ name ] ) {\r\n\t\t\t\tif ( $.fx.step[ name ] || !isNaN( parseFloat( value ) ) ) {\r\n\t\t\t\t\tdiff[ name ] = value;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\treturn diff;\r\n}\r\n\r\n// support: jQuery <1.8\r\nif ( !$.fn.addBack ) {\r\n\t$.fn.addBack = function( selector ) {\r\n\t\treturn this.add( selector == null ?\r\n\t\t\tthis.prevObject : this.prevObject.filter( selector )\r\n\t\t);\r\n\t};\r\n}\r\n\r\n$.effects.animateClass = function( value, duration, easing, callback ) {\r\n\tvar o = $.speed( duration, easing, callback );\r\n\r\n\treturn this.queue( function() {\r\n\t\tvar animated = $( this ),\r\n\t\t\tbaseClass = animated.attr( \"class\" ) || \"\",\r\n\t\t\tapplyClassChange,\r\n\t\t\tallAnimations = o.children ? animated.find( \"*\" ).addBack() : animated;\r\n\r\n\t\t// map the animated objects to store the original styles.\r\n\t\tallAnimations = allAnimations.map(function() {\r\n\t\t\tvar el = $( this );\r\n\t\t\treturn {\r\n\t\t\t\tel: el,\r\n\t\t\t\tstart: getElementStyles( this )\r\n\t\t\t};\r\n\t\t});\r\n\r\n\t\t// apply class change\r\n\t\tapplyClassChange = function() {\r\n\t\t\t$.each( classAnimationActions, function(i, action) {\r\n\t\t\t\tif ( value[ action ] ) {\r\n\t\t\t\t\tanimated[ action + \"Class\" ]( value[ action ] );\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t};\r\n\t\tapplyClassChange();\r\n\r\n\t\t// map all animated objects again - calculate new styles and diff\r\n\t\tallAnimations = allAnimations.map(function() {\r\n\t\t\tthis.end = getElementStyles( this.el[ 0 ] );\r\n\t\t\tthis.diff = styleDifference( this.start, this.end );\r\n\t\t\treturn this;\r\n\t\t});\r\n\r\n\t\t// apply original class\r\n\t\tanimated.attr( \"class\", baseClass );\r\n\r\n\t\t// map all animated objects again - this time collecting a promise\r\n\t\tallAnimations = allAnimations.map(function() {\r\n\t\t\tvar styleInfo = this,\r\n\t\t\t\tdfd = $.Deferred(),\r\n\t\t\t\topts = $.extend({}, o, {\r\n\t\t\t\t\tqueue: false,\r\n\t\t\t\t\tcomplete: function() {\r\n\t\t\t\t\t\tdfd.resolve( styleInfo );\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\tthis.el.animate( this.diff, opts );\r\n\t\t\treturn dfd.promise();\r\n\t\t});\r\n\r\n\t\t// once all animations have completed:\r\n\t\t$.when.apply( $, allAnimations.get() ).done(function() {\r\n\r\n\t\t\t// set the final class\r\n\t\t\tapplyClassChange();\r\n\r\n\t\t\t// for each animated element,\r\n\t\t\t// clear all css properties that were animated\r\n\t\t\t$.each( arguments, function() {\r\n\t\t\t\tvar el = this.el;\r\n\t\t\t\t$.each( this.diff, function(key) {\r\n\t\t\t\t\tel.css( key, \"\" );\r\n\t\t\t\t});\r\n\t\t\t});\r\n\r\n\t\t\t// this is guarnteed to be there if you use jQuery.speed()\r\n\t\t\t// it also handles dequeuing the next anim...\r\n\t\t\to.complete.call( animated[ 0 ] );\r\n\t\t});\r\n\t});\r\n};\r\n\r\n$.fn.extend({\r\n\taddClass: (function( orig ) {\r\n\t\treturn function( classNames, speed, easing, callback ) {\r\n\t\t\treturn speed ?\r\n\t\t\t\t$.effects.animateClass.call( this,\r\n\t\t\t\t\t{ add: classNames }, speed, easing, callback ) :\r\n\t\t\t\torig.apply( this, arguments );\r\n\t\t};\r\n\t})( $.fn.addClass ),\r\n\r\n\tremoveClass: (function( orig ) {\r\n\t\treturn function( classNames, speed, easing, callback ) {\r\n\t\t\treturn arguments.length > 1 ?\r\n\t\t\t\t$.effects.animateClass.call( this,\r\n\t\t\t\t\t{ remove: classNames }, speed, easing, callback ) :\r\n\t\t\t\torig.apply( this, arguments );\r\n\t\t};\r\n\t})( $.fn.removeClass ),\r\n\r\n\ttoggleClass: (function( orig ) {\r\n\t\treturn function( classNames, force, speed, easing, callback ) {\r\n\t\t\tif ( typeof force === \"boolean\" || force === undefined ) {\r\n\t\t\t\tif ( !speed ) {\r\n\t\t\t\t\t// without speed parameter\r\n\t\t\t\t\treturn orig.apply( this, arguments );\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn $.effects.animateClass.call( this,\r\n\t\t\t\t\t\t(force ? { add: classNames } : { remove: classNames }),\r\n\t\t\t\t\t\tspeed, easing, callback );\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\t// without force parameter\r\n\t\t\t\treturn $.effects.animateClass.call( this,\r\n\t\t\t\t\t{ toggle: classNames }, force, speed, easing );\r\n\t\t\t}\r\n\t\t};\r\n\t})( $.fn.toggleClass ),\r\n\r\n\tswitchClass: function( remove, add, speed, easing, callback) {\r\n\t\treturn $.effects.animateClass.call( this, {\r\n\t\t\tadd: add,\r\n\t\t\tremove: remove\r\n\t\t}, speed, easing, callback );\r\n\t}\r\n});\r\n\r\n})();\r\n\r\n/******************************************************************************/\r\n/*********************************** EFFECTS **********************************/\r\n/******************************************************************************/\r\n\r\n(function() {\r\n\r\n$.extend( $.effects, {\r\n\tversion: \"1.10.2\",\r\n\r\n\t// Saves a set of properties in a data storage\r\n\tsave: function( element, set ) {\r\n\t\tfor( var i=0; i < set.length; i++ ) {\r\n\t\t\tif ( set[ i ] !== null ) {\r\n\t\t\t\telement.data( dataSpace + set[ i ], element[ 0 ].style[ set[ i ] ] );\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t// Restores a set of previously saved properties from a data storage\r\n\trestore: function( element, set ) {\r\n\t\tvar val, i;\r\n\t\tfor( i=0; i < set.length; i++ ) {\r\n\t\t\tif ( set[ i ] !== null ) {\r\n\t\t\t\tval = element.data( dataSpace + set[ i ] );\r\n\t\t\t\t// support: jQuery 1.6.2\r\n\t\t\t\t// http://bugs.jquery.com/ticket/9917\r\n\t\t\t\t// jQuery 1.6.2 incorrectly returns undefined for any falsy value.\r\n\t\t\t\t// We can't differentiate between \"\" and 0 here, so we just assume\r\n\t\t\t\t// empty string since it's likely to be a more common value...\r\n\t\t\t\tif ( val === undefined ) {\r\n\t\t\t\t\tval = \"\";\r\n\t\t\t\t}\r\n\t\t\t\telement.css( set[ i ], val );\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\tsetMode: function( el, mode ) {\r\n\t\tif (mode === \"toggle\") {\r\n\t\t\tmode = el.is( \":hidden\" ) ? \"show\" : \"hide\";\r\n\t\t}\r\n\t\treturn mode;\r\n\t},\r\n\r\n\t// Translates a [top,left] array into a baseline value\r\n\t// this should be a little more flexible in the future to handle a string & hash\r\n\tgetBaseline: function( origin, original ) {\r\n\t\tvar y, x;\r\n\t\tswitch ( origin[ 0 ] ) {\r\n\t\t\tcase \"top\": y = 0; break;\r\n\t\t\tcase \"middle\": y = 0.5; break;\r\n\t\t\tcase \"bottom\": y = 1; break;\r\n\t\t\tdefault: y = origin[ 0 ] / original.height;\r\n\t\t}\r\n\t\tswitch ( origin[ 1 ] ) {\r\n\t\t\tcase \"left\": x = 0; break;\r\n\t\t\tcase \"center\": x = 0.5; break;\r\n\t\t\tcase \"right\": x = 1; break;\r\n\t\t\tdefault: x = origin[ 1 ] / original.width;\r\n\t\t}\r\n\t\treturn {\r\n\t\t\tx: x,\r\n\t\t\ty: y\r\n\t\t};\r\n\t},\r\n\r\n\t// Wraps the element around a wrapper that copies position properties\r\n\tcreateWrapper: function( element ) {\r\n\r\n\t\t// if the element is already wrapped, return it\r\n\t\tif ( element.parent().is( \".ui-effects-wrapper\" )) {\r\n\t\t\treturn element.parent();\r\n\t\t}\r\n\r\n\t\t// wrap the element\r\n\t\tvar props = {\r\n\t\t\t\twidth: element.outerWidth(true),\r\n\t\t\t\theight: element.outerHeight(true),\r\n\t\t\t\t\"float\": element.css( \"float\" )\r\n\t\t\t},\r\n\t\t\twrapper = $( \"<div></div>\" )\r\n\t\t\t\t.addClass( \"ui-effects-wrapper\" )\r\n\t\t\t\t.css({\r\n\t\t\t\t\tfontSize: \"100%\",\r\n\t\t\t\t\tbackground: \"transparent\",\r\n\t\t\t\t\tborder: \"none\",\r\n\t\t\t\t\tmargin: 0,\r\n\t\t\t\t\tpadding: 0\r\n\t\t\t\t}),\r\n\t\t\t// Store the size in case width/height are defined in % - Fixes #5245\r\n\t\t\tsize = {\r\n\t\t\t\twidth: element.width(),\r\n\t\t\t\theight: element.height()\r\n\t\t\t},\r\n\t\t\tactive = document.activeElement;\r\n\r\n\t\t// support: Firefox\r\n\t\t// Firefox incorrectly exposes anonymous content\r\n\t\t// https://bugzilla.mozilla.org/show_bug.cgi?id=561664\r\n\t\ttry {\r\n\t\t\tactive.id;\r\n\t\t} catch( e ) {\r\n\t\t\tactive = document.body;\r\n\t\t}\r\n\r\n\t\telement.wrap( wrapper );\r\n\r\n\t\t// Fixes #7595 - Elements lose focus when wrapped.\r\n\t\tif ( element[ 0 ] === active || $.contains( element[ 0 ], active ) ) {\r\n\t\t\t$( active ).focus();\r\n\t\t}\r\n\r\n\t\twrapper = element.parent(); //Hotfix for jQuery 1.4 since some change in wrap() seems to actually lose the reference to the wrapped element\r\n\r\n\t\t// transfer positioning properties to the wrapper\r\n\t\tif ( element.css( \"position\" ) === \"static\" ) {\r\n\t\t\twrapper.css({ position: \"relative\" });\r\n\t\t\telement.css({ position: \"relative\" });\r\n\t\t} else {\r\n\t\t\t$.extend( props, {\r\n\t\t\t\tposition: element.css( \"position\" ),\r\n\t\t\t\tzIndex: element.css( \"z-index\" )\r\n\t\t\t});\r\n\t\t\t$.each([ \"top\", \"left\", \"bottom\", \"right\" ], function(i, pos) {\r\n\t\t\t\tprops[ pos ] = element.css( pos );\r\n\t\t\t\tif ( isNaN( parseInt( props[ pos ], 10 ) ) ) {\r\n\t\t\t\t\tprops[ pos ] = \"auto\";\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\telement.css({\r\n\t\t\t\tposition: \"relative\",\r\n\t\t\t\ttop: 0,\r\n\t\t\t\tleft: 0,\r\n\t\t\t\tright: \"auto\",\r\n\t\t\t\tbottom: \"auto\"\r\n\t\t\t});\r\n\t\t}\r\n\t\telement.css(size);\r\n\r\n\t\treturn wrapper.css( props ).show();\r\n\t},\r\n\r\n\tremoveWrapper: function( element ) {\r\n\t\tvar active = document.activeElement;\r\n\r\n\t\tif ( element.parent().is( \".ui-effects-wrapper\" ) ) {\r\n\t\t\telement.parent().replaceWith( element );\r\n\r\n\t\t\t// Fixes #7595 - Elements lose focus when wrapped.\r\n\t\t\tif ( element[ 0 ] === active || $.contains( element[ 0 ], active ) ) {\r\n\t\t\t\t$( active ).focus();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\r\n\t\treturn element;\r\n\t},\r\n\r\n\tsetTransition: function( element, list, factor, value ) {\r\n\t\tvalue = value || {};\r\n\t\t$.each( list, function( i, x ) {\r\n\t\t\tvar unit = element.cssUnit( x );\r\n\t\t\tif ( unit[ 0 ] > 0 ) {\r\n\t\t\t\tvalue[ x ] = unit[ 0 ] * factor + unit[ 1 ];\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn value;\r\n\t}\r\n});\r\n\r\n// return an effect options object for the given parameters:\r\nfunction _normalizeArguments( effect, options, speed, callback ) {\r\n\r\n\t// allow passing all options as the first parameter\r\n\tif ( $.isPlainObject( effect ) ) {\r\n\t\toptions = effect;\r\n\t\teffect = effect.effect;\r\n\t}\r\n\r\n\t// convert to an object\r\n\teffect = { effect: effect };\r\n\r\n\t// catch (effect, null, ...)\r\n\tif ( options == null ) {\r\n\t\toptions = {};\r\n\t}\r\n\r\n\t// catch (effect, callback)\r\n\tif ( $.isFunction( options ) ) {\r\n\t\tcallback = options;\r\n\t\tspeed = null;\r\n\t\toptions = {};\r\n\t}\r\n\r\n\t// catch (effect, speed, ?)\r\n\tif ( typeof options === \"number\" || $.fx.speeds[ options ] ) {\r\n\t\tcallback = speed;\r\n\t\tspeed = options;\r\n\t\toptions = {};\r\n\t}\r\n\r\n\t// catch (effect, options, callback)\r\n\tif ( $.isFunction( speed ) ) {\r\n\t\tcallback = speed;\r\n\t\tspeed = null;\r\n\t}\r\n\r\n\t// add options to effect\r\n\tif ( options ) {\r\n\t\t$.extend( effect, options );\r\n\t}\r\n\r\n\tspeed = speed || options.duration;\r\n\teffect.duration = $.fx.off ? 0 :\r\n\t\ttypeof speed === \"number\" ? speed :\r\n\t\tspeed in $.fx.speeds ? $.fx.speeds[ speed ] :\r\n\t\t$.fx.speeds._default;\r\n\r\n\teffect.complete = callback || options.complete;\r\n\r\n\treturn effect;\r\n}\r\n\r\nfunction standardAnimationOption( option ) {\r\n\t// Valid standard speeds (nothing, number, named speed)\r\n\tif ( !option || typeof option === \"number\" || $.fx.speeds[ option ] ) {\r\n\t\treturn true;\r\n\t}\r\n\r\n\t// Invalid strings - treat as \"normal\" speed\r\n\tif ( typeof option === \"string\" && !$.effects.effect[ option ] ) {\r\n\t\treturn true;\r\n\t}\r\n\r\n\t// Complete callback\r\n\tif ( $.isFunction( option ) ) {\r\n\t\treturn true;\r\n\t}\r\n\r\n\t// Options hash (but not naming an effect)\r\n\tif ( typeof option === \"object\" && !option.effect ) {\r\n\t\treturn true;\r\n\t}\r\n\r\n\t// Didn't match any standard API\r\n\treturn false;\r\n}\r\n\r\n$.fn.extend({\r\n\teffect: function( /* effect, options, speed, callback */ ) {\r\n\t\tvar args = _normalizeArguments.apply( this, arguments ),\r\n\t\t\tmode = args.mode,\r\n\t\t\tqueue = args.queue,\r\n\t\t\teffectMethod = $.effects.effect[ args.effect ];\r\n\r\n\t\tif ( $.fx.off || !effectMethod ) {\r\n\t\t\t// delegate to the original method (e.g., .show()) if possible\r\n\t\t\tif ( mode ) {\r\n\t\t\t\treturn this[ mode ]( args.duration, args.complete );\r\n\t\t\t} else {\r\n\t\t\t\treturn this.each( function() {\r\n\t\t\t\t\tif ( args.complete ) {\r\n\t\t\t\t\t\targs.complete.call( this );\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfunction run( next ) {\r\n\t\t\tvar elem = $( this ),\r\n\t\t\t\tcomplete = args.complete,\r\n\t\t\t\tmode = args.mode;\r\n\r\n\t\t\tfunction done() {\r\n\t\t\t\tif ( $.isFunction( complete ) ) {\r\n\t\t\t\t\tcomplete.call( elem[0] );\r\n\t\t\t\t}\r\n\t\t\t\tif ( $.isFunction( next ) ) {\r\n\t\t\t\t\tnext();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// If the element already has the correct final state, delegate to\r\n\t\t\t// the core methods so the internal tracking of \"olddisplay\" works.\r\n\t\t\tif ( elem.is( \":hidden\" ) ? mode === \"hide\" : mode === \"show\" ) {\r\n\t\t\t\telem[ mode ]();\r\n\t\t\t\tdone();\r\n\t\t\t} else {\r\n\t\t\t\teffectMethod.call( elem[0], args, done );\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn queue === false ? this.each( run ) : this.queue( queue || \"fx\", run );\r\n\t},\r\n\r\n\tshow: (function( orig ) {\r\n\t\treturn function( option ) {\r\n\t\t\tif ( standardAnimationOption( option ) ) {\r\n\t\t\t\treturn orig.apply( this, arguments );\r\n\t\t\t} else {\r\n\t\t\t\tvar args = _normalizeArguments.apply( this, arguments );\r\n\t\t\t\targs.mode = \"show\";\r\n\t\t\t\treturn this.effect.call( this, args );\r\n\t\t\t}\r\n\t\t};\r\n\t})( $.fn.show ),\r\n\r\n\thide: (function( orig ) {\r\n\t\treturn function( option ) {\r\n\t\t\tif ( standardAnimationOption( option ) ) {\r\n\t\t\t\treturn orig.apply( this, arguments );\r\n\t\t\t} else {\r\n\t\t\t\tvar args = _normalizeArguments.apply( this, arguments );\r\n\t\t\t\targs.mode = \"hide\";\r\n\t\t\t\treturn this.effect.call( this, args );\r\n\t\t\t}\r\n\t\t};\r\n\t})( $.fn.hide ),\r\n\r\n\ttoggle: (function( orig ) {\r\n\t\treturn function( option ) {\r\n\t\t\tif ( standardAnimationOption( option ) || typeof option === \"boolean\" ) {\r\n\t\t\t\treturn orig.apply( this, arguments );\r\n\t\t\t} else {\r\n\t\t\t\tvar args = _normalizeArguments.apply( this, arguments );\r\n\t\t\t\targs.mode = \"toggle\";\r\n\t\t\t\treturn this.effect.call( this, args );\r\n\t\t\t}\r\n\t\t};\r\n\t})( $.fn.toggle ),\r\n\r\n\t// helper functions\r\n\tcssUnit: function(key) {\r\n\t\tvar style = this.css( key ),\r\n\t\t\tval = [];\r\n\r\n\t\t$.each( [ \"em\", \"px\", \"%\", \"pt\" ], function( i, unit ) {\r\n\t\t\tif ( style.indexOf( unit ) > 0 ) {\r\n\t\t\t\tval = [ parseFloat( style ), unit ];\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn val;\r\n\t}\r\n});\r\n\r\n})();\r\n\r\n/******************************************************************************/\r\n/*********************************** EASING ***********************************/\r\n/******************************************************************************/\r\n\r\n(function() {\r\n\r\n// based on easing equations from Robert Penner (http://www.robertpenner.com/easing)\r\n\r\nvar baseEasings = {};\r\n\r\n$.each( [ \"Quad\", \"Cubic\", \"Quart\", \"Quint\", \"Expo\" ], function( i, name ) {\r\n\tbaseEasings[ name ] = function( p ) {\r\n\t\treturn Math.pow( p, i + 2 );\r\n\t};\r\n});\r\n\r\n$.extend( baseEasings, {\r\n\tSine: function ( p ) {\r\n\t\treturn 1 - Math.cos( p * Math.PI / 2 );\r\n\t},\r\n\tCirc: function ( p ) {\r\n\t\treturn 1 - Math.sqrt( 1 - p * p );\r\n\t},\r\n\tElastic: function( p ) {\r\n\t\treturn p === 0 || p === 1 ? p :\r\n\t\t\t-Math.pow( 2, 8 * (p - 1) ) * Math.sin( ( (p - 1) * 80 - 7.5 ) * Math.PI / 15 );\r\n\t},\r\n\tBack: function( p ) {\r\n\t\treturn p * p * ( 3 * p - 2 );\r\n\t},\r\n\tBounce: function ( p ) {\r\n\t\tvar pow2,\r\n\t\t\tbounce = 4;\r\n\r\n\t\twhile ( p < ( ( pow2 = Math.pow( 2, --bounce ) ) - 1 ) / 11 ) {}\r\n\t\treturn 1 / Math.pow( 4, 3 - bounce ) - 7.5625 * Math.pow( ( pow2 * 3 - 2 ) / 22 - p, 2 );\r\n\t}\r\n});\r\n\r\n$.each( baseEasings, function( name, easeIn ) {\r\n\t$.easing[ \"easeIn\" + name ] = easeIn;\r\n\t$.easing[ \"easeOut\" + name ] = function( p ) {\r\n\t\treturn 1 - easeIn( 1 - p );\r\n\t};\r\n\t$.easing[ \"easeInOut\" + name ] = function( p ) {\r\n\t\treturn p < 0.5 ?\r\n\t\t\teaseIn( p * 2 ) / 2 :\r\n\t\t\t1 - easeIn( p * -2 + 2 ) / 2;\r\n\t};\r\n});\r\n\r\n})();\r\n\r\n})(jQuery);\r\n\r\n(function( $, undefined ) {\r\n\r\nvar uid = 0,\r\n\thideProps = {},\r\n\tshowProps = {};\r\n\r\nhideProps.height = hideProps.paddingTop = hideProps.paddingBottom =\r\n\thideProps.borderTopWidth = hideProps.borderBottomWidth = \"hide\";\r\nshowProps.height = showProps.paddingTop = showProps.paddingBottom =\r\n\tshowProps.borderTopWidth = showProps.borderBottomWidth = \"show\";\r\n\r\n$.widget( \"ui.accordion\", {\r\n\tversion: \"1.10.2\",\r\n\toptions: {\r\n\t\tactive: 0,\r\n\t\tanimate: {},\r\n\t\tcollapsible: false,\r\n\t\tevent: \"click\",\r\n\t\theader: \"> li > :first-child,> :not(li):even\",\r\n\t\theightStyle: \"auto\",\r\n\t\ticons: {\r\n\t\t\tactiveHeader: \"ui-icon-triangle-1-s\",\r\n\t\t\theader: \"ui-icon-triangle-1-e\"\r\n\t\t},\r\n\r\n\t\t// callbacks\r\n\t\tactivate: null,\r\n\t\tbeforeActivate: null\r\n\t},\r\n\r\n\t_create: function() {\r\n\t\tvar options = this.options;\r\n\t\tthis.prevShow = this.prevHide = $();\r\n\t\tthis.element.addClass( \"ui-accordion ui-widget ui-helper-reset\" )\r\n\t\t\t// ARIA\r\n\t\t\t.attr( \"role\", \"tablist\" );\r\n\r\n\t\t// don't allow collapsible: false and active: false / null\r\n\t\tif ( !options.collapsible && (options.active === false || options.active == null) ) {\r\n\t\t\toptions.active = 0;\r\n\t\t}\r\n\r\n\t\tthis._processPanels();\r\n\t\t// handle negative values\r\n\t\tif ( options.active < 0 ) {\r\n\t\t\toptions.active += this.headers.length;\r\n\t\t}\r\n\t\tthis._refresh();\r\n\t},\r\n\r\n\t_getCreateEventData: function() {\r\n\t\treturn {\r\n\t\t\theader: this.active,\r\n\t\t\tpanel: !this.active.length ? $() : this.active.next(),\r\n\t\t\tcontent: !this.active.length ? $() : this.active.next()\r\n\t\t};\r\n\t},\r\n\r\n\t_createIcons: function() {\r\n\t\tvar icons = this.options.icons;\r\n\t\tif ( icons ) {\r\n\t\t\t$( \"<span>\" )\r\n\t\t\t\t.addClass( \"ui-accordion-header-icon ui-icon \" + icons.header )\r\n\t\t\t\t.prependTo( this.headers );\r\n\t\t\tthis.active.children( \".ui-accordion-header-icon\" )\r\n\t\t\t\t.removeClass( icons.header )\r\n\t\t\t\t.addClass( icons.activeHeader );\r\n\t\t\tthis.headers.addClass( \"ui-accordion-icons\" );\r\n\t\t}\r\n\t},\r\n\r\n\t_destroyIcons: function() {\r\n\t\tthis.headers\r\n\t\t\t.removeClass( \"ui-accordion-icons\" )\r\n\t\t\t.children( \".ui-accordion-header-icon\" )\r\n\t\t\t\t.remove();\r\n\t},\r\n\r\n\t_destroy: function() {\r\n\t\tvar contents;\r\n\r\n\t\t// clean up main element\r\n\t\tthis.element\r\n\t\t\t.removeClass( \"ui-accordion ui-widget ui-helper-reset\" )\r\n\t\t\t.removeAttr( \"role\" );\r\n\r\n\t\t// clean up headers\r\n\t\tthis.headers\r\n\t\t\t.removeClass( \"ui-accordion-header ui-accordion-header-active ui-helper-reset ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top\" )\r\n\t\t\t.removeAttr( \"role\" )\r\n\t\t\t.removeAttr( \"aria-selected\" )\r\n\t\t\t.removeAttr( \"aria-controls\" )\r\n\t\t\t.removeAttr( \"tabIndex\" )\r\n\t\t\t.each(function() {\r\n\t\t\t\tif ( /^ui-accordion/.test( this.id ) ) {\r\n\t\t\t\t\tthis.removeAttribute( \"id\" );\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\tthis._destroyIcons();\r\n\r\n\t\t// clean up content panels\r\n\t\tcontents = this.headers.next()\r\n\t\t\t.css( \"display\", \"\" )\r\n\t\t\t.removeAttr( \"role\" )\r\n\t\t\t.removeAttr( \"aria-expanded\" )\r\n\t\t\t.removeAttr( \"aria-hidden\" )\r\n\t\t\t.removeAttr( \"aria-labelledby\" )\r\n\t\t\t.removeClass( \"ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-state-disabled\" )\r\n\t\t\t.each(function() {\r\n\t\t\t\tif ( /^ui-accordion/.test( this.id ) ) {\r\n\t\t\t\t\tthis.removeAttribute( \"id\" );\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\tif ( this.options.heightStyle !== \"content\" ) {\r\n\t\t\tcontents.css( \"height\", \"\" );\r\n\t\t}\r\n\t},\r\n\r\n\t_setOption: function( key, value ) {\r\n\t\tif ( key === \"active\" ) {\r\n\t\t\t// _activate() will handle invalid values and update this.options\r\n\t\t\tthis._activate( value );\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif ( key === \"event\" ) {\r\n\t\t\tif ( this.options.event ) {\r\n\t\t\t\tthis._off( this.headers, this.options.event );\r\n\t\t\t}\r\n\t\t\tthis._setupEvents( value );\r\n\t\t}\r\n\r\n\t\tthis._super( key, value );\r\n\r\n\t\t// setting collapsible: false while collapsed; open first panel\r\n\t\tif ( key === \"collapsible\" && !value && this.options.active === false ) {\r\n\t\t\tthis._activate( 0 );\r\n\t\t}\r\n\r\n\t\tif ( key === \"icons\" ) {\r\n\t\t\tthis._destroyIcons();\r\n\t\t\tif ( value ) {\r\n\t\t\t\tthis._createIcons();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// #5332 - opacity doesn't cascade to positioned elements in IE\r\n\t\t// so we need to add the disabled class to the headers and panels\r\n\t\tif ( key === \"disabled\" ) {\r\n\t\t\tthis.headers.add( this.headers.next() )\r\n\t\t\t\t.toggleClass( \"ui-state-disabled\", !!value );\r\n\t\t}\r\n\t},\r\n\r\n\t_keydown: function( event ) {\r\n\t\t/*jshint maxcomplexity:15*/\r\n\t\tif ( event.altKey || event.ctrlKey ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar keyCode = $.ui.keyCode,\r\n\t\t\tlength = this.headers.length,\r\n\t\t\tcurrentIndex = this.headers.index( event.target ),\r\n\t\t\ttoFocus = false;\r\n\r\n\t\tswitch ( event.keyCode ) {\r\n\t\t\tcase keyCode.RIGHT:\r\n\t\t\tcase keyCode.DOWN:\r\n\t\t\t\ttoFocus = this.headers[ ( currentIndex + 1 ) % length ];\r\n\t\t\t\tbreak;\r\n\t\t\tcase keyCode.LEFT:\r\n\t\t\tcase keyCode.UP:\r\n\t\t\t\ttoFocus = this.headers[ ( currentIndex - 1 + length ) % length ];\r\n\t\t\t\tbreak;\r\n\t\t\tcase keyCode.SPACE:\r\n\t\t\tcase keyCode.ENTER:\r\n\t\t\t\tthis._eventHandler( event );\r\n\t\t\t\tbreak;\r\n\t\t\tcase keyCode.HOME:\r\n\t\t\t\ttoFocus = this.headers[ 0 ];\r\n\t\t\t\tbreak;\r\n\t\t\tcase keyCode.END:\r\n\t\t\t\ttoFocus = this.headers[ length - 1 ];\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\tif ( toFocus ) {\r\n\t\t\t$( event.target ).attr( \"tabIndex\", -1 );\r\n\t\t\t$( toFocus ).attr( \"tabIndex\", 0 );\r\n\t\t\ttoFocus.focus();\r\n\t\t\tevent.preventDefault();\r\n\t\t}\r\n\t},\r\n\r\n\t_panelKeyDown : function( event ) {\r\n\t\tif ( event.keyCode === $.ui.keyCode.UP && event.ctrlKey ) {\r\n\t\t\t$( event.currentTarget ).prev().focus();\r\n\t\t}\r\n\t},\r\n\r\n\trefresh: function() {\r\n\t\tvar options = this.options;\r\n\t\tthis._processPanels();\r\n\r\n\t\t// was collapsed or no panel\r\n\t\tif ( ( options.active === false && options.collapsible === true ) || !this.headers.length ) {\r\n\t\t\toptions.active = false;\r\n\t\t\tthis.active = $();\r\n\t\t// active false only when collapsible is true\r\n\t\t} if ( options.active === false ) {\r\n\t\t\tthis._activate( 0 );\r\n\t\t// was active, but active panel is gone\r\n\t\t} else if ( this.active.length && !$.contains( this.element[ 0 ], this.active[ 0 ] ) ) {\r\n\t\t\t// all remaining panel are disabled\r\n\t\t\tif ( this.headers.length === this.headers.find(\".ui-state-disabled\").length ) {\r\n\t\t\t\toptions.active = false;\r\n\t\t\t\tthis.active = $();\r\n\t\t\t// activate previous panel\r\n\t\t\t} else {\r\n\t\t\t\tthis._activate( Math.max( 0, options.active - 1 ) );\r\n\t\t\t}\r\n\t\t// was active, active panel still exists\r\n\t\t} else {\r\n\t\t\t// make sure active index is correct\r\n\t\t\toptions.active = this.headers.index( this.active );\r\n\t\t}\r\n\r\n\t\tthis._destroyIcons();\r\n\r\n\t\tthis._refresh();\r\n\t},\r\n\r\n\t_processPanels: function() {\r\n\t\tthis.headers = this.element.find( this.options.header )\r\n\t\t\t.addClass( \"ui-accordion-header ui-helper-reset ui-state-default ui-corner-all\" );\r\n\r\n\t\tthis.headers.next()\r\n\t\t\t.addClass( \"ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom\" )\r\n\t\t\t.filter(\":not(.ui-accordion-content-active)\")\r\n\t\t\t.hide();\r\n\t},\r\n\r\n\t_refresh: function() {\r\n\t\tvar maxHeight,\r\n\t\t\toptions = this.options,\r\n\t\t\theightStyle = options.heightStyle,\r\n\t\t\tparent = this.element.parent(),\r\n\t\t\taccordionId = this.accordionId = \"ui-accordion-\" +\r\n\t\t\t\t(this.element.attr( \"id\" ) || ++uid);\r\n\r\n\t\tthis.active = this._findActive( options.active )\r\n\t\t\t.addClass( \"ui-accordion-header-active ui-state-active ui-corner-top\" )\r\n\t\t\t.removeClass( \"ui-corner-all\" );\r\n\t\tthis.active.next()\r\n\t\t\t.addClass( \"ui-accordion-content-active\" )\r\n\t\t\t.show();\r\n\r\n\t\tthis.headers\r\n\t\t\t.attr( \"role\", \"tab\" )\r\n\t\t\t.each(function( i ) {\r\n\t\t\t\tvar header = $( this ),\r\n\t\t\t\t\theaderId = header.attr( \"id\" ),\r\n\t\t\t\t\tpanel = header.next(),\r\n\t\t\t\t\tpanelId = panel.attr( \"id\" );\r\n\t\t\t\tif ( !headerId ) {\r\n\t\t\t\t\theaderId = accordionId + \"-header-\" + i;\r\n\t\t\t\t\theader.attr( \"id\", headerId );\r\n\t\t\t\t}\r\n\t\t\t\tif ( !panelId ) {\r\n\t\t\t\t\tpanelId = accordionId + \"-panel-\" + i;\r\n\t\t\t\t\tpanel.attr( \"id\", panelId );\r\n\t\t\t\t}\r\n\t\t\t\theader.attr( \"aria-controls\", panelId );\r\n\t\t\t\tpanel.attr( \"aria-labelledby\", headerId );\r\n\t\t\t})\r\n\t\t\t.next()\r\n\t\t\t\t.attr( \"role\", \"tabpanel\" );\r\n\r\n\t\tthis.headers\r\n\t\t\t.not( this.active )\r\n\t\t\t.attr({\r\n\t\t\t\t\"aria-selected\": \"false\",\r\n\t\t\t\ttabIndex: -1\r\n\t\t\t})\r\n\t\t\t.next()\r\n\t\t\t\t.attr({\r\n\t\t\t\t\t\"aria-expanded\": \"false\",\r\n\t\t\t\t\t\"aria-hidden\": \"true\"\r\n\t\t\t\t})\r\n\t\t\t\t.hide();\r\n\r\n\t\t// make sure at least one header is in the tab order\r\n\t\tif ( !this.active.length ) {\r\n\t\t\tthis.headers.eq( 0 ).attr( \"tabIndex\", 0 );\r\n\t\t} else {\r\n\t\t\tthis.active.attr({\r\n\t\t\t\t\"aria-selected\": \"true\",\r\n\t\t\t\ttabIndex: 0\r\n\t\t\t})\r\n\t\t\t.next()\r\n\t\t\t\t.attr({\r\n\t\t\t\t\t\"aria-expanded\": \"true\",\r\n\t\t\t\t\t\"aria-hidden\": \"false\"\r\n\t\t\t\t});\r\n\t\t}\r\n\r\n\t\tthis._createIcons();\r\n\r\n\t\tthis._setupEvents( options.event );\r\n\r\n\t\tif ( heightStyle === \"fill\" ) {\r\n\t\t\tmaxHeight = parent.height();\r\n\t\t\tthis.element.siblings( \":visible\" ).each(function() {\r\n\t\t\t\tvar elem = $( this ),\r\n\t\t\t\t\tposition = elem.css( \"position\" );\r\n\r\n\t\t\t\tif ( position === \"absolute\" || position === \"fixed\" ) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tmaxHeight -= elem.outerHeight( true );\r\n\t\t\t});\r\n\r\n\t\t\tthis.headers.each(function() {\r\n\t\t\t\tmaxHeight -= $( this ).outerHeight( true );\r\n\t\t\t});\r\n\r\n\t\t\tthis.headers.next()\r\n\t\t\t\t.each(function() {\r\n\t\t\t\t\t$( this ).height( Math.max( 0, maxHeight -\r\n\t\t\t\t\t\t$( this ).innerHeight() + $( this ).height() ) );\r\n\t\t\t\t})\r\n\t\t\t\t.css( \"overflow\", \"auto\" );\r\n\t\t} else if ( heightStyle === \"auto\" ) {\r\n\t\t\tmaxHeight = 0;\r\n\t\t\tthis.headers.next()\r\n\t\t\t\t.each(function() {\r\n\t\t\t\t\tmaxHeight = Math.max( maxHeight, $( this ).css( \"height\", \"\" ).height() );\r\n\t\t\t\t})\r\n\t\t\t\t.height( maxHeight );\r\n\t\t}\r\n\t},\r\n\r\n\t_activate: function( index ) {\r\n\t\tvar active = this._findActive( index )[ 0 ];\r\n\r\n\t\t// trying to activate the already active panel\r\n\t\tif ( active === this.active[ 0 ] ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// trying to collapse, simulate a click on the currently active header\r\n\t\tactive = active || this.active[ 0 ];\r\n\r\n\t\tthis._eventHandler({\r\n\t\t\ttarget: active,\r\n\t\t\tcurrentTarget: active,\r\n\t\t\tpreventDefault: $.noop\r\n\t\t});\r\n\t},\r\n\r\n\t_findActive: function( selector ) {\r\n\t\treturn typeof selector === \"number\" ? this.headers.eq( selector ) : $();\r\n\t},\r\n\r\n\t_setupEvents: function( event ) {\r\n\t\tvar events = {\r\n\t\t\tkeydown: \"_keydown\"\r\n\t\t};\r\n\t\tif ( event ) {\r\n\t\t\t$.each( event.split(\" \"), function( index, eventName ) {\r\n\t\t\t\tevents[ eventName ] = \"_eventHandler\";\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tthis._off( this.headers.add( this.headers.next() ) );\r\n\t\tthis._on( this.headers, events );\r\n\t\tthis._on( this.headers.next(), { keydown: \"_panelKeyDown\" });\r\n\t\tthis._hoverable( this.headers );\r\n\t\tthis._focusable( this.headers );\r\n\t},\r\n\r\n\t_eventHandler: function( event ) {\r\n\t\tvar options = this.options,\r\n\t\t\tactive = this.active,\r\n\t\t\tclicked = $( event.currentTarget ),\r\n\t\t\tclickedIsActive = clicked[ 0 ] === active[ 0 ],\r\n\t\t\tcollapsing = clickedIsActive && options.collapsible,\r\n\t\t\ttoShow = collapsing ? $() : clicked.next(),\r\n\t\t\ttoHide = active.next(),\r\n\t\t\teventData = {\r\n\t\t\t\toldHeader: active,\r\n\t\t\t\toldPanel: toHide,\r\n\t\t\t\tnewHeader: collapsing ? $() : clicked,\r\n\t\t\t\tnewPanel: toShow\r\n\t\t\t};\r\n\r\n\t\tevent.preventDefault();\r\n\r\n\t\tif (\r\n\t\t\t\t// click on active header, but not collapsible\r\n\t\t\t\t( clickedIsActive && !options.collapsible ) ||\r\n\t\t\t\t// allow canceling activation\r\n\t\t\t\t( this._trigger( \"beforeActivate\", event, eventData ) === false ) ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\toptions.active = collapsing ? false : this.headers.index( clicked );\r\n\r\n\t\t// when the call to ._toggle() comes after the class changes\r\n\t\t// it causes a very odd bug in IE 8 (see #6720)\r\n\t\tthis.active = clickedIsActive ? $() : clicked;\r\n\t\tthis._toggle( eventData );\r\n\r\n\t\t// switch classes\r\n\t\t// corner classes on the previously active header stay after the animation\r\n\t\tactive.removeClass( \"ui-accordion-header-active ui-state-active\" );\r\n\t\tif ( options.icons ) {\r\n\t\t\tactive.children( \".ui-accordion-header-icon\" )\r\n\t\t\t\t.removeClass( options.icons.activeHeader )\r\n\t\t\t\t.addClass( options.icons.header );\r\n\t\t}\r\n\r\n\t\tif ( !clickedIsActive ) {\r\n\t\t\tclicked\r\n\t\t\t\t.removeClass( \"ui-corner-all\" )\r\n\t\t\t\t.addClass( \"ui-accordion-header-active ui-state-active ui-corner-top\" );\r\n\t\t\tif ( options.icons ) {\r\n\t\t\t\tclicked.children( \".ui-accordion-header-icon\" )\r\n\t\t\t\t\t.removeClass( options.icons.header )\r\n\t\t\t\t\t.addClass( options.icons.activeHeader );\r\n\t\t\t}\r\n\r\n\t\t\tclicked\r\n\t\t\t\t.next()\r\n\t\t\t\t.addClass( \"ui-accordion-content-active\" );\r\n\t\t}\r\n\t},\r\n\r\n\t_toggle: function( data ) {\r\n\t\tvar toShow = data.newPanel,\r\n\t\t\ttoHide = this.prevShow.length ? this.prevShow : data.oldPanel;\r\n\r\n\t\t// handle activating a panel during the animation for another activation\r\n\t\tthis.prevShow.add( this.prevHide ).stop( true, true );\r\n\t\tthis.prevShow = toShow;\r\n\t\tthis.prevHide = toHide;\r\n\r\n\t\tif ( this.options.animate ) {\r\n\t\t\tthis._animate( toShow, toHide, data );\r\n\t\t} else {\r\n\t\t\ttoHide.hide();\r\n\t\t\ttoShow.show();\r\n\t\t\tthis._toggleComplete( data );\r\n\t\t}\r\n\r\n\t\ttoHide.attr({\r\n\t\t\t\"aria-expanded\": \"false\",\r\n\t\t\t\"aria-hidden\": \"true\"\r\n\t\t});\r\n\t\ttoHide.prev().attr( \"aria-selected\", \"false\" );\r\n\t\t// if we're switching panels, remove the old header from the tab order\r\n\t\t// if we're opening from collapsed state, remove the previous header from the tab order\r\n\t\t// if we're collapsing, then keep the collapsing header in the tab order\r\n\t\tif ( toShow.length && toHide.length ) {\r\n\t\t\ttoHide.prev().attr( \"tabIndex\", -1 );\r\n\t\t} else if ( toShow.length ) {\r\n\t\t\tthis.headers.filter(function() {\r\n\t\t\t\treturn $( this ).attr( \"tabIndex\" ) === 0;\r\n\t\t\t})\r\n\t\t\t.attr( \"tabIndex\", -1 );\r\n\t\t}\r\n\r\n\t\ttoShow\r\n\t\t\t.attr({\r\n\t\t\t\t\"aria-expanded\": \"true\",\r\n\t\t\t\t\"aria-hidden\": \"false\"\r\n\t\t\t})\r\n\t\t\t.prev()\r\n\t\t\t\t.attr({\r\n\t\t\t\t\t\"aria-selected\": \"true\",\r\n\t\t\t\t\ttabIndex: 0\r\n\t\t\t\t});\r\n\t},\r\n\r\n\t_animate: function( toShow, toHide, data ) {\r\n\t\tvar total, easing, duration,\r\n\t\t\tthat = this,\r\n\t\t\tadjust = 0,\r\n\t\t\tdown = toShow.length &&\r\n\t\t\t\t( !toHide.length || ( toShow.index() < toHide.index() ) ),\r\n\t\t\tanimate = this.options.animate || {},\r\n\t\t\toptions = down && animate.down || animate,\r\n\t\t\tcomplete = function() {\r\n\t\t\t\tthat._toggleComplete( data );\r\n\t\t\t};\r\n\r\n\t\tif ( typeof options === \"number\" ) {\r\n\t\t\tduration = options;\r\n\t\t}\r\n\t\tif ( typeof options === \"string\" ) {\r\n\t\t\teasing = options;\r\n\t\t}\r\n\t\t// fall back from options to animation in case of partial down settings\r\n\t\teasing = easing || options.easing || animate.easing;\r\n\t\tduration = duration || options.duration || animate.duration;\r\n\r\n\t\tif ( !toHide.length ) {\r\n\t\t\treturn toShow.animate( showProps, duration, easing, complete );\r\n\t\t}\r\n\t\tif ( !toShow.length ) {\r\n\t\t\treturn toHide.animate( hideProps, duration, easing, complete );\r\n\t\t}\r\n\r\n\t\ttotal = toShow.show().outerHeight();\r\n\t\ttoHide.animate( hideProps, {\r\n\t\t\tduration: duration,\r\n\t\t\teasing: easing,\r\n\t\t\tstep: function( now, fx ) {\r\n\t\t\t\tfx.now = Math.round( now );\r\n\t\t\t}\r\n\t\t});\r\n\t\ttoShow\r\n\t\t\t.hide()\r\n\t\t\t.animate( showProps, {\r\n\t\t\t\tduration: duration,\r\n\t\t\t\teasing: easing,\r\n\t\t\t\tcomplete: complete,\r\n\t\t\t\tstep: function( now, fx ) {\r\n\t\t\t\t\tfx.now = Math.round( now );\r\n\t\t\t\t\tif ( fx.prop !== \"height\" ) {\r\n\t\t\t\t\t\tadjust += fx.now;\r\n\t\t\t\t\t} else if ( that.options.heightStyle !== \"content\" ) {\r\n\t\t\t\t\t\tfx.now = Math.round( total - toHide.outerHeight() - adjust );\r\n\t\t\t\t\t\tadjust = 0;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t},\r\n\r\n\t_toggleComplete: function( data ) {\r\n\t\tvar toHide = data.oldPanel;\r\n\r\n\t\ttoHide\r\n\t\t\t.removeClass( \"ui-accordion-content-active\" )\r\n\t\t\t.prev()\r\n\t\t\t\t.removeClass( \"ui-corner-top\" )\r\n\t\t\t\t.addClass( \"ui-corner-all\" );\r\n\r\n\t\t// Work around for rendering bug in IE (#5421)\r\n\t\tif ( toHide.length ) {\r\n\t\t\ttoHide.parent()[0].className = toHide.parent()[0].className;\r\n\t\t}\r\n\r\n\t\tthis._trigger( \"activate\", null, data );\r\n\t}\r\n});\r\n\r\n})( jQuery );\r\n\r\n(function( $, undefined ) {\r\n\r\n// used to prevent race conditions with remote data sources\r\nvar requestIndex = 0;\r\n\r\n$.widget( \"ui.autocomplete\", {\r\n\tversion: \"1.10.2\",\r\n\tdefaultElement: \"<input>\",\r\n\toptions: {\r\n\t\tappendTo: null,\r\n\t\tautoFocus: false,\r\n\t\tdelay: 300,\r\n\t\tminLength: 1,\r\n\t\tposition: {\r\n\t\t\tmy: \"left top\",\r\n\t\t\tat: \"left bottom\",\r\n\t\t\tcollision: \"none\"\r\n\t\t},\r\n\t\tsource: null,\r\n\r\n\t\t// callbacks\r\n\t\tchange: null,\r\n\t\tclose: null,\r\n\t\tfocus: null,\r\n\t\topen: null,\r\n\t\tresponse: null,\r\n\t\tsearch: null,\r\n\t\tselect: null\r\n\t},\r\n\r\n\tpending: 0,\r\n\r\n\t_create: function() {\r\n\t\t// Some browsers only repeat keydown events, not keypress events,\r\n\t\t// so we use the suppressKeyPress flag to determine if we've already\r\n\t\t// handled the keydown event. #7269\r\n\t\t// Unfortunately the code for & in keypress is the same as the up arrow,\r\n\t\t// so we use the suppressKeyPressRepeat flag to avoid handling keypress\r\n\t\t// events when we know the keydown event was used to modify the\r\n\t\t// search term. #7799\r\n\t\tvar suppressKeyPress, suppressKeyPressRepeat, suppressInput,\r\n\t\t\tnodeName = this.element[0].nodeName.toLowerCase(),\r\n\t\t\tisTextarea = nodeName === \"textarea\",\r\n\t\t\tisInput = nodeName === \"input\";\r\n\r\n\t\tthis.isMultiLine =\r\n\t\t\t// Textareas are always multi-line\r\n\t\t\tisTextarea ? true :\r\n\t\t\t// Inputs are always single-line, even if inside a contentEditable element\r\n\t\t\t// IE also treats inputs as contentEditable\r\n\t\t\tisInput ? false :\r\n\t\t\t// All other element types are determined by whether or not they're contentEditable\r\n\t\t\tthis.element.prop( \"isContentEditable\" );\r\n\r\n\t\tthis.valueMethod = this.element[ isTextarea || isInput ? \"val\" : \"text\" ];\r\n\t\tthis.isNewMenu = true;\r\n\r\n\t\tthis.element\r\n\t\t\t.addClass( \"ui-autocomplete-input\" )\r\n\t\t\t.attr( \"autocomplete\", \"off\" );\r\n\r\n\t\tthis._on( this.element, {\r\n\t\t\tkeydown: function( event ) {\r\n\t\t\t\t/*jshint maxcomplexity:15*/\r\n\t\t\t\tif ( this.element.prop( \"readOnly\" ) ) {\r\n\t\t\t\t\tsuppressKeyPress = true;\r\n\t\t\t\t\tsuppressInput = true;\r\n\t\t\t\t\tsuppressKeyPressRepeat = true;\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tsuppressKeyPress = false;\r\n\t\t\t\tsuppressInput = false;\r\n\t\t\t\tsuppressKeyPressRepeat = false;\r\n\t\t\t\tvar keyCode = $.ui.keyCode;\r\n\t\t\t\tswitch( event.keyCode ) {\r\n\t\t\t\tcase keyCode.PAGE_UP:\r\n\t\t\t\t\tsuppressKeyPress = true;\r\n\t\t\t\t\tthis._move( \"previousPage\", event );\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase keyCode.PAGE_DOWN:\r\n\t\t\t\t\tsuppressKeyPress = true;\r\n\t\t\t\t\tthis._move( \"nextPage\", event );\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase keyCode.UP:\r\n\t\t\t\t\tsuppressKeyPress = true;\r\n\t\t\t\t\tthis._keyEvent( \"previous\", event );\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase keyCode.DOWN:\r\n\t\t\t\t\tsuppressKeyPress = true;\r\n\t\t\t\t\tthis._keyEvent( \"next\", event );\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase keyCode.ENTER:\r\n\t\t\t\tcase keyCode.NUMPAD_ENTER:\r\n\t\t\t\t\t// when menu is open and has focus\r\n\t\t\t\t\tif ( this.menu.active ) {\r\n\t\t\t\t\t\t// #6055 - Opera still allows the keypress to occur\r\n\t\t\t\t\t\t// which causes forms to submit\r\n\t\t\t\t\t\tsuppressKeyPress = true;\r\n\t\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t\t\tthis.menu.select( event );\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase keyCode.TAB:\r\n\t\t\t\t\tif ( this.menu.active ) {\r\n\t\t\t\t\t\tthis.menu.select( event );\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase keyCode.ESCAPE:\r\n\t\t\t\t\tif ( this.menu.element.is( \":visible\" ) ) {\r\n\t\t\t\t\t\tthis._value( this.term );\r\n\t\t\t\t\t\tthis.close( event );\r\n\t\t\t\t\t\t// Different browsers have different default behavior for escape\r\n\t\t\t\t\t\t// Single press can mean undo or clear\r\n\t\t\t\t\t\t// Double press in IE means clear the whole form\r\n\t\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tsuppressKeyPressRepeat = true;\r\n\t\t\t\t\t// search timeout should be triggered before the input value is changed\r\n\t\t\t\t\tthis._searchTimeout( event );\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tkeypress: function( event ) {\r\n\t\t\t\tif ( suppressKeyPress ) {\r\n\t\t\t\t\tsuppressKeyPress = false;\r\n\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif ( suppressKeyPressRepeat ) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// replicate some key handlers to allow them to repeat in Firefox and Opera\r\n\t\t\t\tvar keyCode = $.ui.keyCode;\r\n\t\t\t\tswitch( event.keyCode ) {\r\n\t\t\t\tcase keyCode.PAGE_UP:\r\n\t\t\t\t\tthis._move( \"previousPage\", event );\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase keyCode.PAGE_DOWN:\r\n\t\t\t\t\tthis._move( \"nextPage\", event );\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase keyCode.UP:\r\n\t\t\t\t\tthis._keyEvent( \"previous\", event );\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase keyCode.DOWN:\r\n\t\t\t\t\tthis._keyEvent( \"next\", event );\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tinput: function( event ) {\r\n\t\t\t\tif ( suppressInput ) {\r\n\t\t\t\t\tsuppressInput = false;\r\n\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tthis._searchTimeout( event );\r\n\t\t\t},\r\n\t\t\tfocus: function() {\r\n\t\t\t\tthis.selectedItem = null;\r\n\t\t\t\tthis.previous = this._value();\r\n\t\t\t},\r\n\t\t\tblur: function( event ) {\r\n\t\t\t\tif ( this.cancelBlur ) {\r\n\t\t\t\t\tdelete this.cancelBlur;\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tclearTimeout( this.searching );\r\n\t\t\t\tthis.close( event );\r\n\t\t\t\tthis._change( event );\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tthis._initSource();\r\n\t\tthis.menu = $( \"<ul>\" )\r\n\t\t\t.addClass( \"ui-autocomplete ui-front\" )\r\n\t\t\t.appendTo( this._appendTo() )\r\n\t\t\t.menu({\r\n\t\t\t\t// custom key handling for now\r\n\t\t\t\tinput: $(),\r\n\t\t\t\t// disable ARIA support, the live region takes care of that\r\n\t\t\t\trole: null\r\n\t\t\t})\r\n\t\t\t.hide()\r\n\t\t\t.data( \"ui-menu\" );\r\n\r\n\t\tthis._on( this.menu.element, {\r\n\t\t\tmousedown: function( event ) {\r\n\t\t\t\t// prevent moving focus out of the text field\r\n\t\t\t\tevent.preventDefault();\r\n\r\n\t\t\t\t// IE doesn't prevent moving focus even with event.preventDefault()\r\n\t\t\t\t// so we set a flag to know when we should ignore the blur event\r\n\t\t\t\tthis.cancelBlur = true;\r\n\t\t\t\tthis._delay(function() {\r\n\t\t\t\t\tdelete this.cancelBlur;\r\n\t\t\t\t});\r\n\r\n\t\t\t\t// clicking on the scrollbar causes focus to shift to the body\r\n\t\t\t\t// but we can't detect a mouseup or a click immediately afterward\r\n\t\t\t\t// so we have to track the next mousedown and close the menu if\r\n\t\t\t\t// the user clicks somewhere outside of the autocomplete\r\n\t\t\t\tvar menuElement = this.menu.element[ 0 ];\r\n\t\t\t\tif ( !$( event.target ).closest( \".ui-menu-item\" ).length ) {\r\n\t\t\t\t\tthis._delay(function() {\r\n\t\t\t\t\t\tvar that = this;\r\n\t\t\t\t\t\tthis.document.one( \"mousedown\", function( event ) {\r\n\t\t\t\t\t\t\tif ( event.target !== that.element[ 0 ] &&\r\n\t\t\t\t\t\t\t\t\tevent.target !== menuElement &&\r\n\t\t\t\t\t\t\t\t\t!$.contains( menuElement, event.target ) ) {\r\n\t\t\t\t\t\t\t\tthat.close();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tmenufocus: function( event, ui ) {\r\n\t\t\t\t// support: Firefox\r\n\t\t\t\t// Prevent accidental activation of menu items in Firefox (#7024 #9118)\r\n\t\t\t\tif ( this.isNewMenu ) {\r\n\t\t\t\t\tthis.isNewMenu = false;\r\n\t\t\t\t\tif ( event.originalEvent && /^mouse/.test( event.originalEvent.type ) ) {\r\n\t\t\t\t\t\tthis.menu.blur();\r\n\r\n\t\t\t\t\t\tthis.document.one( \"mousemove\", function() {\r\n\t\t\t\t\t\t\t$( event.target ).trigger( event.originalEvent );\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar item = ui.item.data( \"ui-autocomplete-item\" );\r\n\t\t\t\tif ( false !== this._trigger( \"focus\", event, { item: item } ) ) {\r\n\t\t\t\t\t// use value to match what will end up in the input, if it was a key event\r\n\t\t\t\t\tif ( event.originalEvent && /^key/.test( event.originalEvent.type ) ) {\r\n\t\t\t\t\t\tthis._value( item.value );\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// Normally the input is populated with the item's value as the\r\n\t\t\t\t\t// menu is navigated, causing screen readers to notice a change and\r\n\t\t\t\t\t// announce the item. Since the focus event was canceled, this doesn't\r\n\t\t\t\t\t// happen, so we update the live region so that screen readers can\r\n\t\t\t\t\t// still notice the change and announce it.\r\n\t\t\t\t\tthis.liveRegion.text( item.value );\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tmenuselect: function( event, ui ) {\r\n\t\t\t\tvar item = ui.item.data( \"ui-autocomplete-item\" ),\r\n\t\t\t\t\tprevious = this.previous;\r\n\r\n\t\t\t\t// only trigger when focus was lost (click on menu)\r\n\t\t\t\tif ( this.element[0] !== this.document[0].activeElement ) {\r\n\t\t\t\t\tthis.element.focus();\r\n\t\t\t\t\tthis.previous = previous;\r\n\t\t\t\t\t// #6109 - IE triggers two focus events and the second\r\n\t\t\t\t\t// is asynchronous, so we need to reset the previous\r\n\t\t\t\t\t// term synchronously and asynchronously :-(\r\n\t\t\t\t\tthis._delay(function() {\r\n\t\t\t\t\t\tthis.previous = previous;\r\n\t\t\t\t\t\tthis.selectedItem = item;\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( false !== this._trigger( \"select\", event, { item: item } ) ) {\r\n\t\t\t\t\tthis._value( item.value );\r\n\t\t\t\t}\r\n\t\t\t\t// reset the term after the select event\r\n\t\t\t\t// this allows custom select handling to work properly\r\n\t\t\t\tthis.term = this._value();\r\n\r\n\t\t\t\tthis.close( event );\r\n\t\t\t\tthis.selectedItem = item;\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tthis.liveRegion = $( \"<span>\", {\r\n\t\t\t\trole: \"status\",\r\n\t\t\t\t\"aria-live\": \"polite\"\r\n\t\t\t})\r\n\t\t\t.addClass( \"ui-helper-hidden-accessible\" )\r\n\t\t\t.insertAfter( this.element );\r\n\r\n\t\t// turning off autocomplete prevents the browser from remembering the\r\n\t\t// value when navigating through history, so we re-enable autocomplete\r\n\t\t// if the page is unloaded before the widget is destroyed. #7790\r\n\t\tthis._on( this.window, {\r\n\t\t\tbeforeunload: function() {\r\n\t\t\t\tthis.element.removeAttr( \"autocomplete\" );\r\n\t\t\t}\r\n\t\t});\r\n\t},\r\n\r\n\t_destroy: function() {\r\n\t\tclearTimeout( this.searching );\r\n\t\tthis.element\r\n\t\t\t.removeClass( \"ui-autocomplete-input\" )\r\n\t\t\t.removeAttr( \"autocomplete\" );\r\n\t\tthis.menu.element.remove();\r\n\t\tthis.liveRegion.remove();\r\n\t},\r\n\r\n\t_setOption: function( key, value ) {\r\n\t\tthis._super( key, value );\r\n\t\tif ( key === \"source\" ) {\r\n\t\t\tthis._initSource();\r\n\t\t}\r\n\t\tif ( key === \"appendTo\" ) {\r\n\t\t\tthis.menu.element.appendTo( this._appendTo() );\r\n\t\t}\r\n\t\tif ( key === \"disabled\" && value && this.xhr ) {\r\n\t\t\tthis.xhr.abort();\r\n\t\t}\r\n\t},\r\n\r\n\t_appendTo: function() {\r\n\t\tvar element = this.options.appendTo;\r\n\r\n\t\tif ( element ) {\r\n\t\t\telement = element.jquery || element.nodeType ?\r\n\t\t\t\t$( element ) :\r\n\t\t\t\tthis.document.find( element ).eq( 0 );\r\n\t\t}\r\n\r\n\t\tif ( !element ) {\r\n\t\t\telement = this.element.closest( \".ui-front\" );\r\n\t\t}\r\n\r\n\t\tif ( !element.length ) {\r\n\t\t\telement = this.document[0].body;\r\n\t\t}\r\n\r\n\t\treturn element;\r\n\t},\r\n\r\n\t_initSource: function() {\r\n\t\tvar array, url,\r\n\t\t\tthat = this;\r\n\t\tif ( $.isArray(this.options.source) ) {\r\n\t\t\tarray = this.options.source;\r\n\t\t\tthis.source = function( request, response ) {\r\n\t\t\t\tresponse( $.ui.autocomplete.filter( array, request.term ) );\r\n\t\t\t};\r\n\t\t} else if ( typeof this.options.source === \"string\" ) {\r\n\t\t\turl = this.options.source;\r\n\t\t\tthis.source = function( request, response ) {\r\n\t\t\t\tif ( that.xhr ) {\r\n\t\t\t\t\tthat.xhr.abort();\r\n\t\t\t\t}\r\n\t\t\t\tthat.xhr = $.ajax({\r\n\t\t\t\t\turl: url,\r\n\t\t\t\t\tdata: request,\r\n\t\t\t\t\tdataType: \"json\",\r\n\t\t\t\t\tsuccess: function( data ) {\r\n\t\t\t\t\t\tresponse( data );\r\n\t\t\t\t\t},\r\n\t\t\t\t\terror: function() {\r\n\t\t\t\t\t\tresponse( [] );\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t};\r\n\t\t} else {\r\n\t\t\tthis.source = this.options.source;\r\n\t\t}\r\n\t},\r\n\r\n\t_searchTimeout: function( event ) {\r\n\t\tclearTimeout( this.searching );\r\n\t\tthis.searching = this._delay(function() {\r\n\t\t\t// only search if the value has changed\r\n\t\t\tif ( this.term !== this._value() ) {\r\n\t\t\t\tthis.selectedItem = null;\r\n\t\t\t\tthis.search( null, event );\r\n\t\t\t}\r\n\t\t}, this.options.delay );\r\n\t},\r\n\r\n\tsearch: function( value, event ) {\r\n\t\tvalue = value != null ? value : this._value();\r\n\r\n\t\t// always save the actual value, not the one passed as an argument\r\n\t\tthis.term = this._value();\r\n\r\n\t\tif ( value.length < this.options.minLength ) {\r\n\t\t\treturn this.close( event );\r\n\t\t}\r\n\r\n\t\tif ( this._trigger( \"search\", event ) === false ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\treturn this._search( value );\r\n\t},\r\n\r\n\t_search: function( value ) {\r\n\t\tthis.pending++;\r\n\t\tthis.element.addClass( \"ui-autocomplete-loading\" );\r\n\t\tthis.cancelSearch = false;\r\n\r\n\t\tthis.source( { term: value }, this._response() );\r\n\t},\r\n\r\n\t_response: function() {\r\n\t\tvar that = this,\r\n\t\t\tindex = ++requestIndex;\r\n\r\n\t\treturn function( content ) {\r\n\t\t\tif ( index === requestIndex ) {\r\n\t\t\t\tthat.__response( content );\r\n\t\t\t}\r\n\r\n\t\t\tthat.pending--;\r\n\t\t\tif ( !that.pending ) {\r\n\t\t\t\tthat.element.removeClass( \"ui-autocomplete-loading\" );\r\n\t\t\t}\r\n\t\t};\r\n\t},\r\n\r\n\t__response: function( content ) {\r\n\t\tif ( content ) {\r\n\t\t\tcontent = this._normalize( content );\r\n\t\t}\r\n\t\tthis._trigger( \"response\", null, { content: content } );\r\n\t\tif ( !this.options.disabled && content && content.length && !this.cancelSearch ) {\r\n\t\t\tthis._suggest( content );\r\n\t\t\tthis._trigger( \"open\" );\r\n\t\t} else {\r\n\t\t\t// use ._close() instead of .close() so we don't cancel future searches\r\n\t\t\tthis._close();\r\n\t\t}\r\n\t},\r\n\r\n\tclose: function( event ) {\r\n\t\tthis.cancelSearch = true;\r\n\t\tthis._close( event );\r\n\t},\r\n\r\n\t_close: function( event ) {\r\n\t\tif ( this.menu.element.is( \":visible\" ) ) {\r\n\t\t\tthis.menu.element.hide();\r\n\t\t\tthis.menu.blur();\r\n\t\t\tthis.isNewMenu = true;\r\n\t\t\tthis._trigger( \"close\", event );\r\n\t\t}\r\n\t},\r\n\r\n\t_change: function( event ) {\r\n\t\tif ( this.previous !== this._value() ) {\r\n\t\t\tthis._trigger( \"change\", event, { item: this.selectedItem } );\r\n\t\t}\r\n\t},\r\n\r\n\t_normalize: function( items ) {\r\n\t\t// assume all items have the right format when the first item is complete\r\n\t\tif ( items.length && items[0].label && items[0].value ) {\r\n\t\t\treturn items;\r\n\t\t}\r\n\t\treturn $.map( items, function( item ) {\r\n\t\t\tif ( typeof item === \"string\" ) {\r\n\t\t\t\treturn {\r\n\t\t\t\t\tlabel: item,\r\n\t\t\t\t\tvalue: item\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t\treturn $.extend({\r\n\t\t\t\tlabel: item.label || item.value,\r\n\t\t\t\tvalue: item.value || item.label\r\n\t\t\t}, item );\r\n\t\t});\r\n\t},\r\n\r\n\t_suggest: function( items ) {\r\n\t\tvar ul = this.menu.element.empty();\r\n\t\tthis._renderMenu( ul, items );\r\n\t\tthis.isNewMenu = true;\r\n\t\tthis.menu.refresh();\r\n\r\n\t\t// size and position menu\r\n\t\tul.show();\r\n\t\tthis._resizeMenu();\r\n\t\tul.position( $.extend({\r\n\t\t\tof: this.element\r\n\t\t}, this.options.position ));\r\n\r\n\t\tif ( this.options.autoFocus ) {\r\n\t\t\tthis.menu.next();\r\n\t\t}\r\n\t},\r\n\r\n\t_resizeMenu: function() {\r\n\t\tvar ul = this.menu.element;\r\n\t\tul.outerWidth( Math.max(\r\n\t\t\t// Firefox wraps long text (possibly a rounding bug)\r\n\t\t\t// so we add 1px to avoid the wrapping (#7513)\r\n\t\t\tul.width( \"\" ).outerWidth() + 1,\r\n\t\t\tthis.element.outerWidth()\r\n\t\t) );\r\n\t},\r\n\r\n\t_renderMenu: function( ul, items ) {\r\n\t\tvar that = this;\r\n\t\t$.each( items, function( index, item ) {\r\n\t\t\tthat._renderItemData( ul, item );\r\n\t\t});\r\n\t},\r\n\r\n\t_renderItemData: function( ul, item ) {\r\n\t\treturn this._renderItem( ul, item ).data( \"ui-autocomplete-item\", item );\r\n\t},\r\n\r\n\t_renderItem: function( ul, item ) {\r\n\t\treturn $( \"<li>\" )\r\n\t\t\t.append( $( \"<a>\" ).text( item.label ) )\r\n\t\t\t.appendTo( ul );\r\n\t},\r\n\r\n\t_move: function( direction, event ) {\r\n\t\tif ( !this.menu.element.is( \":visible\" ) ) {\r\n\t\t\tthis.search( null, event );\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif ( this.menu.isFirstItem() && /^previous/.test( direction ) ||\r\n\t\t\t\tthis.menu.isLastItem() && /^next/.test( direction ) ) {\r\n\t\t\tthis._value( this.term );\r\n\t\t\tthis.menu.blur();\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.menu[ direction ]( event );\r\n\t},\r\n\r\n\twidget: function() {\r\n\t\treturn this.menu.element;\r\n\t},\r\n\r\n\t_value: function() {\r\n\t\treturn this.valueMethod.apply( this.element, arguments );\r\n\t},\r\n\r\n\t_keyEvent: function( keyEvent, event ) {\r\n\t\tif ( !this.isMultiLine || this.menu.element.is( \":visible\" ) ) {\r\n\t\t\tthis._move( keyEvent, event );\r\n\r\n\t\t\t// prevents moving cursor to beginning/end of the text field in some browsers\r\n\t\t\tevent.preventDefault();\r\n\t\t}\r\n\t}\r\n});\r\n\r\n$.extend( $.ui.autocomplete, {\r\n\tescapeRegex: function( value ) {\r\n\t\treturn value.replace(/[\\-\\[\\]{}()*+?.,\\\\\\^$|#\\s]/g, \"\\\\$&\");\r\n\t},\r\n\tfilter: function(array, term) {\r\n\t\tvar matcher = new RegExp( $.ui.autocomplete.escapeRegex(term), \"i\" );\r\n\t\treturn $.grep( array, function(value) {\r\n\t\t\treturn matcher.test( value.label || value.value || value );\r\n\t\t});\r\n\t}\r\n});\r\n\r\n\r\n// live region extension, adding a `messages` option\r\n// NOTE: This is an experimental API. We are still investigating\r\n// a full solution for string manipulation and internationalization.\r\n$.widget( \"ui.autocomplete\", $.ui.autocomplete, {\r\n\toptions: {\r\n\t\tmessages: {\r\n\t\t\tnoResults: \"No search results.\",\r\n\t\t\tresults: function( amount ) {\r\n\t\t\t\treturn amount + ( amount > 1 ? \" results are\" : \" result is\" ) +\r\n\t\t\t\t\t\" available, use up and down arrow keys to navigate.\";\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t__response: function( content ) {\r\n\t\tvar message;\r\n\t\tthis._superApply( arguments );\r\n\t\tif ( this.options.disabled || this.cancelSearch ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif ( content && content.length ) {\r\n\t\t\tmessage = this.options.messages.results( content.length );\r\n\t\t} else {\r\n\t\t\tmessage = this.options.messages.noResults;\r\n\t\t}\r\n\t\tthis.liveRegion.text( message );\r\n\t}\r\n});\r\n\r\n}( jQuery ));\r\n\r\n(function( $, undefined ) {\r\n\r\nvar lastActive, startXPos, startYPos, clickDragged,\r\n\tbaseClasses = \"ui-button ui-widget ui-state-default ui-corner-all\",\r\n\tstateClasses = \"ui-state-hover ui-state-active \",\r\n\ttypeClasses = \"ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only\",\r\n\tformResetHandler = function() {\r\n\t\tvar buttons = $( this ).find( \":ui-button\" );\r\n\t\tsetTimeout(function() {\r\n\t\t\tbuttons.button( \"refresh\" );\r\n\t\t}, 1 );\r\n\t},\r\n\tradioGroup = function( radio ) {\r\n\t\tvar name = radio.name,\r\n\t\t\tform = radio.form,\r\n\t\t\tradios = $( [] );\r\n\t\tif ( name ) {\r\n\t\t\tname = name.replace( /'/g, \"\\\\'\" );\r\n\t\t\tif ( form ) {\r\n\t\t\t\tradios = $( form ).find( \"[name='\" + name + \"']\" );\r\n\t\t\t} else {\r\n\t\t\t\tradios = $( \"[name='\" + name + \"']\", radio.ownerDocument )\r\n\t\t\t\t\t.filter(function() {\r\n\t\t\t\t\t\treturn !this.form;\r\n\t\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn radios;\r\n\t};\r\n\r\n$.widget( \"ui.button\", {\r\n\tversion: \"1.10.2\",\r\n\tdefaultElement: \"<button>\",\r\n\toptions: {\r\n\t\tdisabled: null,\r\n\t\ttext: true,\r\n\t\tlabel: null,\r\n\t\ticons: {\r\n\t\t\tprimary: null,\r\n\t\t\tsecondary: null\r\n\t\t}\r\n\t},\r\n\t_create: function() {\r\n\t\tthis.element.closest( \"form\" )\r\n\t\t\t.unbind( \"reset\" + this.eventNamespace )\r\n\t\t\t.bind( \"reset\" + this.eventNamespace, formResetHandler );\r\n\r\n\t\tif ( typeof this.options.disabled !== \"boolean\" ) {\r\n\t\t\tthis.options.disabled = !!this.element.prop( \"disabled\" );\r\n\t\t} else {\r\n\t\t\tthis.element.prop( \"disabled\", this.options.disabled );\r\n\t\t}\r\n\r\n\t\tthis._determineButtonType();\r\n\t\tthis.hasTitle = !!this.buttonElement.attr( \"title\" );\r\n\r\n\t\tvar that = this,\r\n\t\t\toptions = this.options,\r\n\t\t\ttoggleButton = this.type === \"checkbox\" || this.type === \"radio\",\r\n\t\t\tactiveClass = !toggleButton ? \"ui-state-active\" : \"\",\r\n\t\t\tfocusClass = \"ui-state-focus\";\r\n\r\n\t\tif ( options.label === null ) {\r\n\t\t\toptions.label = (this.type === \"input\" ? this.buttonElement.val() : this.buttonElement.html());\r\n\t\t}\r\n\r\n\t\tthis._hoverable( this.buttonElement );\r\n\r\n\t\tthis.buttonElement\r\n\t\t\t.addClass( baseClasses )\r\n\t\t\t.attr( \"role\", \"button\" )\r\n\t\t\t.bind( \"mouseenter\" + this.eventNamespace, function() {\r\n\t\t\t\tif ( options.disabled ) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif ( this === lastActive ) {\r\n\t\t\t\t\t$( this ).addClass( \"ui-state-active\" );\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.bind( \"mouseleave\" + this.eventNamespace, function() {\r\n\t\t\t\tif ( options.disabled ) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\t$( this ).removeClass( activeClass );\r\n\t\t\t})\r\n\t\t\t.bind( \"click\" + this.eventNamespace, function( event ) {\r\n\t\t\t\tif ( options.disabled ) {\r\n\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t\tevent.stopImmediatePropagation();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\tthis.element\r\n\t\t\t.bind( \"focus\" + this.eventNamespace, function() {\r\n\t\t\t\t// no need to check disabled, focus won't be triggered anyway\r\n\t\t\t\tthat.buttonElement.addClass( focusClass );\r\n\t\t\t})\r\n\t\t\t.bind( \"blur\" + this.eventNamespace, function() {\r\n\t\t\t\tthat.buttonElement.removeClass( focusClass );\r\n\t\t\t});\r\n\r\n\t\tif ( toggleButton ) {\r\n\t\t\tthis.element.bind( \"change\" + this.eventNamespace, function() {\r\n\t\t\t\tif ( clickDragged ) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tthat.refresh();\r\n\t\t\t});\r\n\t\t\t// if mouse moves between mousedown and mouseup (drag) set clickDragged flag\r\n\t\t\t// prevents issue where button state changes but checkbox/radio checked state\r\n\t\t\t// does not in Firefox (see ticket #6970)\r\n\t\t\tthis.buttonElement\r\n\t\t\t\t.bind( \"mousedown\" + this.eventNamespace, function( event ) {\r\n\t\t\t\t\tif ( options.disabled ) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tclickDragged = false;\r\n\t\t\t\t\tstartXPos = event.pageX;\r\n\t\t\t\t\tstartYPos = event.pageY;\r\n\t\t\t\t})\r\n\t\t\t\t.bind( \"mouseup\" + this.eventNamespace, function( event ) {\r\n\t\t\t\t\tif ( options.disabled ) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif ( startXPos !== event.pageX || startYPos !== event.pageY ) {\r\n\t\t\t\t\t\tclickDragged = true;\r\n\t\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tif ( this.type === \"checkbox\" ) {\r\n\t\t\tthis.buttonElement.bind( \"click\" + this.eventNamespace, function() {\r\n\t\t\t\tif ( options.disabled || clickDragged ) {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t} else if ( this.type === \"radio\" ) {\r\n\t\t\tthis.buttonElement.bind( \"click\" + this.eventNamespace, function() {\r\n\t\t\t\tif ( options.disabled || clickDragged ) {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\t$( this ).addClass( \"ui-state-active\" );\r\n\t\t\t\tthat.buttonElement.attr( \"aria-pressed\", \"true\" );\r\n\r\n\t\t\t\tvar radio = that.element[ 0 ];\r\n\t\t\t\tradioGroup( radio )\r\n\t\t\t\t\t.not( radio )\r\n\t\t\t\t\t.map(function() {\r\n\t\t\t\t\t\treturn $( this ).button( \"widget\" )[ 0 ];\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.removeClass( \"ui-state-active\" )\r\n\t\t\t\t\t.attr( \"aria-pressed\", \"false\" );\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tthis.buttonElement\r\n\t\t\t\t.bind( \"mousedown\" + this.eventNamespace, function() {\r\n\t\t\t\t\tif ( options.disabled ) {\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t$( this ).addClass( \"ui-state-active\" );\r\n\t\t\t\t\tlastActive = this;\r\n\t\t\t\t\tthat.document.one( \"mouseup\", function() {\r\n\t\t\t\t\t\tlastActive = null;\r\n\t\t\t\t\t});\r\n\t\t\t\t})\r\n\t\t\t\t.bind( \"mouseup\" + this.eventNamespace, function() {\r\n\t\t\t\t\tif ( options.disabled ) {\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t$( this ).removeClass( \"ui-state-active\" );\r\n\t\t\t\t})\r\n\t\t\t\t.bind( \"keydown\" + this.eventNamespace, function(event) {\r\n\t\t\t\t\tif ( options.disabled ) {\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif ( event.keyCode === $.ui.keyCode.SPACE || event.keyCode === $.ui.keyCode.ENTER ) {\r\n\t\t\t\t\t\t$( this ).addClass( \"ui-state-active\" );\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t// see #8559, we bind to blur here in case the button element loses\r\n\t\t\t\t// focus between keydown and keyup, it would be left in an \"active\" state\r\n\t\t\t\t.bind( \"keyup\" + this.eventNamespace + \" blur\" + this.eventNamespace, function() {\r\n\t\t\t\t\t$( this ).removeClass( \"ui-state-active\" );\r\n\t\t\t\t});\r\n\r\n\t\t\tif ( this.buttonElement.is(\"a\") ) {\r\n\t\t\t\tthis.buttonElement.keyup(function(event) {\r\n\t\t\t\t\tif ( event.keyCode === $.ui.keyCode.SPACE ) {\r\n\t\t\t\t\t\t// TODO pass through original event correctly (just as 2nd argument doesn't work)\r\n\t\t\t\t\t\t$( this ).click();\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// TODO: pull out $.Widget's handling for the disabled option into\r\n\t\t// $.Widget.prototype._setOptionDisabled so it's easy to proxy and can\r\n\t\t// be overridden by individual plugins\r\n\t\tthis._setOption( \"disabled\", options.disabled );\r\n\t\tthis._resetButton();\r\n\t},\r\n\r\n\t_determineButtonType: function() {\r\n\t\tvar ancestor, labelSelector, checked;\r\n\r\n\t\tif ( this.element.is(\"[type=checkbox]\") ) {\r\n\t\t\tthis.type = \"checkbox\";\r\n\t\t} else if ( this.element.is(\"[type=radio]\") ) {\r\n\t\t\tthis.type = \"radio\";\r\n\t\t} else if ( this.element.is(\"input\") ) {\r\n\t\t\tthis.type = \"input\";\r\n\t\t} else {\r\n\t\t\tthis.type = \"button\";\r\n\t\t}\r\n\r\n\t\tif ( this.type === \"checkbox\" || this.type === \"radio\" ) {\r\n\t\t\t// we don't search against the document in case the element\r\n\t\t\t// is disconnected from the DOM\r\n\t\t\tancestor = this.element.parents().last();\r\n\t\t\tlabelSelector = \"label[for='\" + this.element.attr(\"id\") + \"']\";\r\n\t\t\tthis.buttonElement = ancestor.find( labelSelector );\r\n\t\t\tif ( !this.buttonElement.length ) {\r\n\t\t\t\tancestor = ancestor.length ? ancestor.siblings() : this.element.siblings();\r\n\t\t\t\tthis.buttonElement = ancestor.filter( labelSelector );\r\n\t\t\t\tif ( !this.buttonElement.length ) {\r\n\t\t\t\t\tthis.buttonElement = ancestor.find( labelSelector );\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis.element.addClass( \"ui-helper-hidden-accessible\" );\r\n\r\n\t\t\tchecked = this.element.is( \":checked\" );\r\n\t\t\tif ( checked ) {\r\n\t\t\t\tthis.buttonElement.addClass( \"ui-state-active\" );\r\n\t\t\t}\r\n\t\t\tthis.buttonElement.prop( \"aria-pressed\", checked );\r\n\t\t} else {\r\n\t\t\tthis.buttonElement = this.element;\r\n\t\t}\r\n\t},\r\n\r\n\twidget: function() {\r\n\t\treturn this.buttonElement;\r\n\t},\r\n\r\n\t_destroy: function() {\r\n\t\tthis.element\r\n\t\t\t.removeClass( \"ui-helper-hidden-accessible\" );\r\n\t\tthis.buttonElement\r\n\t\t\t.removeClass( baseClasses + \" \" + stateClasses + \" \" + typeClasses )\r\n\t\t\t.removeAttr( \"role\" )\r\n\t\t\t.removeAttr( \"aria-pressed\" )\r\n\t\t\t.html( this.buttonElement.find(\".ui-button-text\").html() );\r\n\r\n\t\tif ( !this.hasTitle ) {\r\n\t\t\tthis.buttonElement.removeAttr( \"title\" );\r\n\t\t}\r\n\t},\r\n\r\n\t_setOption: function( key, value ) {\r\n\t\tthis._super( key, value );\r\n\t\tif ( key === \"disabled\" ) {\r\n\t\t\tif ( value ) {\r\n\t\t\t\tthis.element.prop( \"disabled\", true );\r\n\t\t\t} else {\r\n\t\t\t\tthis.element.prop( \"disabled\", false );\r\n\t\t\t}\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis._resetButton();\r\n\t},\r\n\r\n\trefresh: function() {\r\n\t\t//See #8237 & #8828\r\n\t\tvar isDisabled = this.element.is( \"input, button\" ) ? this.element.is( \":disabled\" ) : this.element.hasClass( \"ui-button-disabled\" );\r\n\r\n\t\tif ( isDisabled !== this.options.disabled ) {\r\n\t\t\tthis._setOption( \"disabled\", isDisabled );\r\n\t\t}\r\n\t\tif ( this.type === \"radio\" ) {\r\n\t\t\tradioGroup( this.element[0] ).each(function() {\r\n\t\t\t\tif ( $( this ).is( \":checked\" ) ) {\r\n\t\t\t\t\t$( this ).button( \"widget\" )\r\n\t\t\t\t\t\t.addClass( \"ui-state-active\" )\r\n\t\t\t\t\t\t.attr( \"aria-pressed\", \"true\" );\r\n\t\t\t\t} else {\r\n\t\t\t\t\t$( this ).button( \"widget\" )\r\n\t\t\t\t\t\t.removeClass( \"ui-state-active\" )\r\n\t\t\t\t\t\t.attr( \"aria-pressed\", \"false\" );\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t} else if ( this.type === \"checkbox\" ) {\r\n\t\t\tif ( this.element.is( \":checked\" ) ) {\r\n\t\t\t\tthis.buttonElement\r\n\t\t\t\t\t.addClass( \"ui-state-active\" )\r\n\t\t\t\t\t.attr( \"aria-pressed\", \"true\" );\r\n\t\t\t} else {\r\n\t\t\t\tthis.buttonElement\r\n\t\t\t\t\t.removeClass( \"ui-state-active\" )\r\n\t\t\t\t\t.attr( \"aria-pressed\", \"false\" );\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t_resetButton: function() {\r\n\t\tif ( this.type === \"input\" ) {\r\n\t\t\tif ( this.options.label ) {\r\n\t\t\t\tthis.element.val( this.options.label );\r\n\t\t\t}\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tvar buttonElement = this.buttonElement.removeClass( typeClasses ),\r\n\t\t\tbuttonText = $( \"<span></span>\", this.document[0] )\r\n\t\t\t\t.addClass( \"ui-button-text\" )\r\n\t\t\t\t.html( this.options.label )\r\n\t\t\t\t.appendTo( buttonElement.empty() )\r\n\t\t\t\t.text(),\r\n\t\t\ticons = this.options.icons,\r\n\t\t\tmultipleIcons = icons.primary && icons.secondary,\r\n\t\t\tbuttonClasses = [];\r\n\r\n\t\tif ( icons.primary || icons.secondary ) {\r\n\t\t\tif ( this.options.text ) {\r\n\t\t\t\tbuttonClasses.push( \"ui-button-text-icon\" + ( multipleIcons ? \"s\" : ( icons.primary ? \"-primary\" : \"-secondary\" ) ) );\r\n\t\t\t}\r\n\r\n\t\t\tif ( icons.primary ) {\r\n\t\t\t\tbuttonElement.prepend( \"<span class='ui-button-icon-primary ui-icon \" + icons.primary + \"'></span>\" );\r\n\t\t\t}\r\n\r\n\t\t\tif ( icons.secondary ) {\r\n\t\t\t\tbuttonElement.append( \"<span class='ui-button-icon-secondary ui-icon \" + icons.secondary + \"'></span>\" );\r\n\t\t\t}\r\n\r\n\t\t\tif ( !this.options.text ) {\r\n\t\t\t\tbuttonClasses.push( multipleIcons ? \"ui-button-icons-only\" : \"ui-button-icon-only\" );\r\n\r\n\t\t\t\tif ( !this.hasTitle ) {\r\n\t\t\t\t\tbuttonElement.attr( \"title\", $.trim( buttonText ) );\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tbuttonClasses.push( \"ui-button-text-only\" );\r\n\t\t}\r\n\t\tbuttonElement.addClass( buttonClasses.join( \" \" ) );\r\n\t}\r\n});\r\n\r\n$.widget( \"ui.buttonset\", {\r\n\tversion: \"1.10.2\",\r\n\toptions: {\r\n\t\titems: \"button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(ui-button)\"\r\n\t},\r\n\r\n\t_create: function() {\r\n\t\tthis.element.addClass( \"ui-buttonset\" );\r\n\t},\r\n\r\n\t_init: function() {\r\n\t\tthis.refresh();\r\n\t},\r\n\r\n\t_setOption: function( key, value ) {\r\n\t\tif ( key === \"disabled\" ) {\r\n\t\t\tthis.buttons.button( \"option\", key, value );\r\n\t\t}\r\n\r\n\t\tthis._super( key, value );\r\n\t},\r\n\r\n\trefresh: function() {\r\n\t\tvar rtl = this.element.css( \"direction\" ) === \"rtl\";\r\n\r\n\t\tthis.buttons = this.element.find( this.options.items )\r\n\t\t\t.filter( \":ui-button\" )\r\n\t\t\t\t.button( \"refresh\" )\r\n\t\t\t.end()\r\n\t\t\t.not( \":ui-button\" )\r\n\t\t\t\t.button()\r\n\t\t\t.end()\r\n\t\t\t.map(function() {\r\n\t\t\t\treturn $( this ).button( \"widget\" )[ 0 ];\r\n\t\t\t})\r\n\t\t\t\t.removeClass( \"ui-corner-all ui-corner-left ui-corner-right\" )\r\n\t\t\t\t.filter( \":first\" )\r\n\t\t\t\t\t.addClass( rtl ? \"ui-corner-right\" : \"ui-corner-left\" )\r\n\t\t\t\t.end()\r\n\t\t\t\t.filter( \":last\" )\r\n\t\t\t\t\t.addClass( rtl ? \"ui-corner-left\" : \"ui-corner-right\" )\r\n\t\t\t\t.end()\r\n\t\t\t.end();\r\n\t},\r\n\r\n\t_destroy: function() {\r\n\t\tthis.element.removeClass( \"ui-buttonset\" );\r\n\t\tthis.buttons\r\n\t\t\t.map(function() {\r\n\t\t\t\treturn $( this ).button( \"widget\" )[ 0 ];\r\n\t\t\t})\r\n\t\t\t\t.removeClass( \"ui-corner-left ui-corner-right\" )\r\n\t\t\t.end()\r\n\t\t\t.button( \"destroy\" );\r\n\t}\r\n});\r\n\r\n}( jQuery ) );\r\n\r\n(function( $, undefined ) {\r\n\r\n$.extend($.ui, { datepicker: { version: \"1.10.2\" } });\r\n\r\nvar PROP_NAME = \"datepicker\",\r\n\tdpuuid = new Date().getTime(),\r\n\tinstActive;\r\n\r\n/* Date picker manager.\r\n   Use the singleton instance of this class, $.datepicker, to interact with the date picker.\r\n   Settings for (groups of) date pickers are maintained in an instance object,\r\n   allowing multiple different settings on the same page. */\r\n\r\nfunction Datepicker() {\r\n\tthis._curInst = null; // The current instance in use\r\n\tthis._keyEvent = false; // If the last event was a key event\r\n\tthis._disabledInputs = []; // List of date picker inputs that have been disabled\r\n\tthis._datepickerShowing = false; // True if the popup picker is showing , false if not\r\n\tthis._inDialog = false; // True if showing within a \"dialog\", false if not\r\n\tthis._mainDivId = \"ui-datepicker-div\"; // The ID of the main datepicker division\r\n\tthis._inlineClass = \"ui-datepicker-inline\"; // The name of the inline marker class\r\n\tthis._appendClass = \"ui-datepicker-append\"; // The name of the append marker class\r\n\tthis._triggerClass = \"ui-datepicker-trigger\"; // The name of the trigger marker class\r\n\tthis._dialogClass = \"ui-datepicker-dialog\"; // The name of the dialog marker class\r\n\tthis._disableClass = \"ui-datepicker-disabled\"; // The name of the disabled covering marker class\r\n\tthis._unselectableClass = \"ui-datepicker-unselectable\"; // The name of the unselectable cell marker class\r\n\tthis._currentClass = \"ui-datepicker-current-day\"; // The name of the current day marker class\r\n\tthis._dayOverClass = \"ui-datepicker-days-cell-over\"; // The name of the day hover marker class\r\n\tthis.regional = []; // Available regional settings, indexed by language code\r\n\tthis.regional[\"\"] = { // Default regional settings\r\n\t\tcloseText: \"Done\", // Display text for close link\r\n\t\tprevText: \"Prev\", // Display text for previous month link\r\n\t\tnextText: \"Next\", // Display text for next month link\r\n\t\tcurrentText: \"Today\", // Display text for current month link\r\n\t\tmonthNames: [\"January\",\"February\",\"March\",\"April\",\"May\",\"June\",\r\n\t\t\t\"July\",\"August\",\"September\",\"October\",\"November\",\"December\"], // Names of months for drop-down and formatting\r\n\t\tmonthNamesShort: [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"], // For formatting\r\n\t\tdayNames: [\"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\"], // For formatting\r\n\t\tdayNamesShort: [\"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\"], // For formatting\r\n\t\tdayNamesMin: [\"Su\",\"Mo\",\"Tu\",\"We\",\"Th\",\"Fr\",\"Sa\"], // Column headings for days starting at Sunday\r\n\t\tweekHeader: \"Wk\", // Column header for week of the year\r\n\t\tdateFormat: \"mm/dd/yy\", // See format options on parseDate\r\n\t\tfirstDay: 0, // The first day of the week, Sun = 0, Mon = 1, ...\r\n\t\tisRTL: false, // True if right-to-left language, false if left-to-right\r\n\t\tshowMonthAfterYear: false, // True if the year select precedes month, false for month then year\r\n\t\tyearSuffix: \"\" // Additional text to append to the year in the month headers\r\n\t};\r\n\tthis._defaults = { // Global defaults for all the date picker instances\r\n\t\tshowOn: \"focus\", // \"focus\" for popup on focus,\r\n\t\t\t// \"button\" for trigger button, or \"both\" for either\r\n\t\tshowAnim: \"fadeIn\", // Name of jQuery animation for popup\r\n\t\tshowOptions: {}, // Options for enhanced animations\r\n\t\tdefaultDate: null, // Used when field is blank: actual date,\r\n\t\t\t// +/-number for offset from today, null for today\r\n\t\tappendText: \"\", // Display text following the input box, e.g. showing the format\r\n\t\tbuttonText: \"...\", // Text for trigger button\r\n\t\tbuttonImage: \"\", // URL for trigger button image\r\n\t\tbuttonImageOnly: false, // True if the image appears alone, false if it appears on a button\r\n\t\thideIfNoPrevNext: false, // True to hide next/previous month links\r\n\t\t\t// if not applicable, false to just disable them\r\n\t\tnavigationAsDateFormat: false, // True if date formatting applied to prev/today/next links\r\n\t\tgotoCurrent: false, // True if today link goes back to current selection instead\r\n\t\tchangeMonth: false, // True if month can be selected directly, false if only prev/next\r\n\t\tchangeYear: false, // True if year can be selected directly, false if only prev/next\r\n\t\tyearRange: \"c-10:c+10\", // Range of years to display in drop-down,\r\n\t\t\t// either relative to today's year (-nn:+nn), relative to currently displayed year\r\n\t\t\t// (c-nn:c+nn), absolute (nnnn:nnnn), or a combination of the above (nnnn:-n)\r\n\t\tshowOtherMonths: false, // True to show dates in other months, false to leave blank\r\n\t\tselectOtherMonths: false, // True to allow selection of dates in other months, false for unselectable\r\n\t\tshowWeek: false, // True to show week of the year, false to not show it\r\n\t\tcalculateWeek: this.iso8601Week, // How to calculate the week of the year,\r\n\t\t\t// takes a Date and returns the number of the week for it\r\n\t\tshortYearCutoff: \"+10\", // Short year values < this are in the current century,\r\n\t\t\t// > this are in the previous century,\r\n\t\t\t// string value starting with \"+\" for current year + value\r\n\t\tminDate: null, // The earliest selectable date, or null for no limit\r\n\t\tmaxDate: null, // The latest selectable date, or null for no limit\r\n\t\tduration: \"fast\", // Duration of display/closure\r\n\t\tbeforeShowDay: null, // Function that takes a date and returns an array with\r\n\t\t\t// [0] = true if selectable, false if not, [1] = custom CSS class name(s) or \"\",\r\n\t\t\t// [2] = cell title (optional), e.g. $.datepicker.noWeekends\r\n\t\tbeforeShow: null, // Function that takes an input field and\r\n\t\t\t// returns a set of custom settings for the date picker\r\n\t\tonSelect: null, // Define a callback function when a date is selected\r\n\t\tonChangeMonthYear: null, // Define a callback function when the month or year is changed\r\n\t\tonClose: null, // Define a callback function when the datepicker is closed\r\n\t\tnumberOfMonths: 1, // Number of months to show at a time\r\n\t\tshowCurrentAtPos: 0, // The position in multipe months at which to show the current month (starting at 0)\r\n\t\tstepMonths: 1, // Number of months to step back/forward\r\n\t\tstepBigMonths: 12, // Number of months to step back/forward for the big links\r\n\t\taltField: \"\", // Selector for an alternate field to store selected dates into\r\n\t\taltFormat: \"\", // The date format to use for the alternate field\r\n\t\tconstrainInput: true, // The input is constrained by the current date format\r\n\t\tshowButtonPanel: false, // True to show button panel, false to not show it\r\n\t\tautoSize: false, // True to size the input for the date format, false to leave as is\r\n\t\tdisabled: false // The initial disabled state\r\n\t};\r\n\t$.extend(this._defaults, this.regional[\"\"]);\r\n\tthis.dpDiv = bindHover($(\"<div id='\" + this._mainDivId + \"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>\"));\r\n}\r\n\r\n$.extend(Datepicker.prototype, {\r\n\t/* Class name added to elements to indicate already configured with a date picker. */\r\n\tmarkerClassName: \"hasDatepicker\",\r\n\r\n\t//Keep track of the maximum number of rows displayed (see #7043)\r\n\tmaxRows: 4,\r\n\r\n\t// TODO rename to \"widget\" when switching to widget factory\r\n\t_widgetDatepicker: function() {\r\n\t\treturn this.dpDiv;\r\n\t},\r\n\r\n\t/* Override the default settings for all instances of the date picker.\r\n\t * @param  settings  object - the new settings to use as defaults (anonymous object)\r\n\t * @return the manager object\r\n\t */\r\n\tsetDefaults: function(settings) {\r\n\t\textendRemove(this._defaults, settings || {});\r\n\t\treturn this;\r\n\t},\r\n\r\n\t/* Attach the date picker to a jQuery selection.\r\n\t * @param  target\telement - the target input field or division or span\r\n\t * @param  settings  object - the new settings to use for this date picker instance (anonymous)\r\n\t */\r\n\t_attachDatepicker: function(target, settings) {\r\n\t\tvar nodeName, inline, inst;\r\n\t\tnodeName = target.nodeName.toLowerCase();\r\n\t\tinline = (nodeName === \"div\" || nodeName === \"span\");\r\n\t\tif (!target.id) {\r\n\t\t\tthis.uuid += 1;\r\n\t\t\ttarget.id = \"dp\" + this.uuid;\r\n\t\t}\r\n\t\tinst = this._newInst($(target), inline);\r\n\t\tinst.settings = $.extend({}, settings || {});\r\n\t\tif (nodeName === \"input\") {\r\n\t\t\tthis._connectDatepicker(target, inst);\r\n\t\t} else if (inline) {\r\n\t\t\tthis._inlineDatepicker(target, inst);\r\n\t\t}\r\n\t},\r\n\r\n\t/* Create a new instance object. */\r\n\t_newInst: function(target, inline) {\r\n\t\tvar id = target[0].id.replace(/([^A-Za-z0-9_\\-])/g, \"\\\\\\\\$1\"); // escape jQuery meta chars\r\n\t\treturn {id: id, input: target, // associated target\r\n\t\t\tselectedDay: 0, selectedMonth: 0, selectedYear: 0, // current selection\r\n\t\t\tdrawMonth: 0, drawYear: 0, // month being drawn\r\n\t\t\tinline: inline, // is datepicker inline or not\r\n\t\t\tdpDiv: (!inline ? this.dpDiv : // presentation div\r\n\t\t\tbindHover($(\"<div class='\" + this._inlineClass + \" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>\")))};\r\n\t},\r\n\r\n\t/* Attach the date picker to an input field. */\r\n\t_connectDatepicker: function(target, inst) {\r\n\t\tvar input = $(target);\r\n\t\tinst.append = $([]);\r\n\t\tinst.trigger = $([]);\r\n\t\tif (input.hasClass(this.markerClassName)) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis._attachments(input, inst);\r\n\t\tinput.addClass(this.markerClassName).keydown(this._doKeyDown).\r\n\t\t\tkeypress(this._doKeyPress).keyup(this._doKeyUp);\r\n\t\tthis._autoSize(inst);\r\n\t\t$.data(target, PROP_NAME, inst);\r\n\t\t//If disabled option is true, disable the datepicker once it has been attached to the input (see ticket #5665)\r\n\t\tif( inst.settings.disabled ) {\r\n\t\t\tthis._disableDatepicker( target );\r\n\t\t}\r\n\t},\r\n\r\n\t/* Make attachments based on settings. */\r\n\t_attachments: function(input, inst) {\r\n\t\tvar showOn, buttonText, buttonImage,\r\n\t\t\tappendText = this._get(inst, \"appendText\"),\r\n\t\t\tisRTL = this._get(inst, \"isRTL\");\r\n\r\n\t\tif (inst.append) {\r\n\t\t\tinst.append.remove();\r\n\t\t}\r\n\t\tif (appendText) {\r\n\t\t\tinst.append = $(\"<span class='\" + this._appendClass + \"'>\" + appendText + \"</span>\");\r\n\t\t\tinput[isRTL ? \"before\" : \"after\"](inst.append);\r\n\t\t}\r\n\r\n\t\tinput.unbind(\"focus\", this._showDatepicker);\r\n\r\n\t\tif (inst.trigger) {\r\n\t\t\tinst.trigger.remove();\r\n\t\t}\r\n\r\n\t\tshowOn = this._get(inst, \"showOn\");\r\n\t\tif (showOn === \"focus\" || showOn === \"both\") { // pop-up date picker when in the marked field\r\n\t\t\tinput.focus(this._showDatepicker);\r\n\t\t}\r\n\t\tif (showOn === \"button\" || showOn === \"both\") { // pop-up date picker when button clicked\r\n\t\t\tbuttonText = this._get(inst, \"buttonText\");\r\n\t\t\tbuttonImage = this._get(inst, \"buttonImage\");\r\n\t\t\tinst.trigger = $(this._get(inst, \"buttonImageOnly\") ?\r\n\t\t\t\t$(\"<img/>\").addClass(this._triggerClass).\r\n\t\t\t\t\tattr({ src: buttonImage, alt: buttonText, title: buttonText }) :\r\n\t\t\t\t$(\"<button type='button'></button>\").addClass(this._triggerClass).\r\n\t\t\t\t\thtml(!buttonImage ? buttonText : $(\"<img/>\").attr(\r\n\t\t\t\t\t{ src:buttonImage, alt:buttonText, title:buttonText })));\r\n\t\t\tinput[isRTL ? \"before\" : \"after\"](inst.trigger);\r\n\t\t\tinst.trigger.click(function() {\r\n\t\t\t\tif ($.datepicker._datepickerShowing && $.datepicker._lastInput === input[0]) {\r\n\t\t\t\t\t$.datepicker._hideDatepicker();\r\n\t\t\t\t} else if ($.datepicker._datepickerShowing && $.datepicker._lastInput !== input[0]) {\r\n\t\t\t\t\t$.datepicker._hideDatepicker();\r\n\t\t\t\t\t$.datepicker._showDatepicker(input[0]);\r\n\t\t\t\t} else {\r\n\t\t\t\t\t$.datepicker._showDatepicker(input[0]);\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\t\t\t});\r\n\t\t}\r\n\t},\r\n\r\n\t/* Apply the maximum length for the date format. */\r\n\t_autoSize: function(inst) {\r\n\t\tif (this._get(inst, \"autoSize\") && !inst.inline) {\r\n\t\t\tvar findMax, max, maxI, i,\r\n\t\t\t\tdate = new Date(2009, 12 - 1, 20), // Ensure double digits\r\n\t\t\t\tdateFormat = this._get(inst, \"dateFormat\");\r\n\r\n\t\t\tif (dateFormat.match(/[DM]/)) {\r\n\t\t\t\tfindMax = function(names) {\r\n\t\t\t\t\tmax = 0;\r\n\t\t\t\t\tmaxI = 0;\r\n\t\t\t\t\tfor (i = 0; i < names.length; i++) {\r\n\t\t\t\t\t\tif (names[i].length > max) {\r\n\t\t\t\t\t\t\tmax = names[i].length;\r\n\t\t\t\t\t\t\tmaxI = i;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn maxI;\r\n\t\t\t\t};\r\n\t\t\t\tdate.setMonth(findMax(this._get(inst, (dateFormat.match(/MM/) ?\r\n\t\t\t\t\t\"monthNames\" : \"monthNamesShort\"))));\r\n\t\t\t\tdate.setDate(findMax(this._get(inst, (dateFormat.match(/DD/) ?\r\n\t\t\t\t\t\"dayNames\" : \"dayNamesShort\"))) + 20 - date.getDay());\r\n\t\t\t}\r\n\t\t\tinst.input.attr(\"size\", this._formatDate(inst, date).length);\r\n\t\t}\r\n\t},\r\n\r\n\t/* Attach an inline date picker to a div. */\r\n\t_inlineDatepicker: function(target, inst) {\r\n\t\tvar divSpan = $(target);\r\n\t\tif (divSpan.hasClass(this.markerClassName)) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tdivSpan.addClass(this.markerClassName).append(inst.dpDiv);\r\n\t\t$.data(target, PROP_NAME, inst);\r\n\t\tthis._setDate(inst, this._getDefaultDate(inst), true);\r\n\t\tthis._updateDatepicker(inst);\r\n\t\tthis._updateAlternate(inst);\r\n\t\t//If disabled option is true, disable the datepicker before showing it (see ticket #5665)\r\n\t\tif( inst.settings.disabled ) {\r\n\t\t\tthis._disableDatepicker( target );\r\n\t\t}\r\n\t\t// Set display:block in place of inst.dpDiv.show() which won't work on disconnected elements\r\n\t\t// http://bugs.jqueryui.com/ticket/7552 - A Datepicker created on a detached div has zero height\r\n\t\tinst.dpDiv.css( \"display\", \"block\" );\r\n\t},\r\n\r\n\t/* Pop-up the date picker in a \"dialog\" box.\r\n\t * @param  input element - ignored\r\n\t * @param  date\tstring or Date - the initial date to display\r\n\t * @param  onSelect  function - the function to call when a date is selected\r\n\t * @param  settings  object - update the dialog date picker instance's settings (anonymous object)\r\n\t * @param  pos int[2] - coordinates for the dialog's position within the screen or\r\n\t *\t\t\t\t\tevent - with x/y coordinates or\r\n\t *\t\t\t\t\tleave empty for default (screen centre)\r\n\t * @return the manager object\r\n\t */\r\n\t_dialogDatepicker: function(input, date, onSelect, settings, pos) {\r\n\t\tvar id, browserWidth, browserHeight, scrollX, scrollY,\r\n\t\t\tinst = this._dialogInst; // internal instance\r\n\r\n\t\tif (!inst) {\r\n\t\t\tthis.uuid += 1;\r\n\t\t\tid = \"dp\" + this.uuid;\r\n\t\t\tthis._dialogInput = $(\"<input type='text' id='\" + id +\r\n\t\t\t\t\"' style='position: absolute; top: -100px; width: 0px;'/>\");\r\n\t\t\tthis._dialogInput.keydown(this._doKeyDown);\r\n\t\t\t$(\"body\").append(this._dialogInput);\r\n\t\t\tinst = this._dialogInst = this._newInst(this._dialogInput, false);\r\n\t\t\tinst.settings = {};\r\n\t\t\t$.data(this._dialogInput[0], PROP_NAME, inst);\r\n\t\t}\r\n\t\textendRemove(inst.settings, settings || {});\r\n\t\tdate = (date && date.constructor === Date ? this._formatDate(inst, date) : date);\r\n\t\tthis._dialogInput.val(date);\r\n\r\n\t\tthis._pos = (pos ? (pos.length ? pos : [pos.pageX, pos.pageY]) : null);\r\n\t\tif (!this._pos) {\r\n\t\t\tbrowserWidth = document.documentElement.clientWidth;\r\n\t\t\tbrowserHeight = document.documentElement.clientHeight;\r\n\t\t\tscrollX = document.documentElement.scrollLeft || document.body.scrollLeft;\r\n\t\t\tscrollY = document.documentElement.scrollTop || document.body.scrollTop;\r\n\t\t\tthis._pos = // should use actual width/height below\r\n\t\t\t\t[(browserWidth / 2) - 100 + scrollX, (browserHeight / 2) - 150 + scrollY];\r\n\t\t}\r\n\r\n\t\t// move input on screen for focus, but hidden behind dialog\r\n\t\tthis._dialogInput.css(\"left\", (this._pos[0] + 20) + \"px\").css(\"top\", this._pos[1] + \"px\");\r\n\t\tinst.settings.onSelect = onSelect;\r\n\t\tthis._inDialog = true;\r\n\t\tthis.dpDiv.addClass(this._dialogClass);\r\n\t\tthis._showDatepicker(this._dialogInput[0]);\r\n\t\tif ($.blockUI) {\r\n\t\t\t$.blockUI(this.dpDiv);\r\n\t\t}\r\n\t\t$.data(this._dialogInput[0], PROP_NAME, inst);\r\n\t\treturn this;\r\n\t},\r\n\r\n\t/* Detach a datepicker from its control.\r\n\t * @param  target\telement - the target input field or division or span\r\n\t */\r\n\t_destroyDatepicker: function(target) {\r\n\t\tvar nodeName,\r\n\t\t\t$target = $(target),\r\n\t\t\tinst = $.data(target, PROP_NAME);\r\n\r\n\t\tif (!$target.hasClass(this.markerClassName)) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tnodeName = target.nodeName.toLowerCase();\r\n\t\t$.removeData(target, PROP_NAME);\r\n\t\tif (nodeName === \"input\") {\r\n\t\t\tinst.append.remove();\r\n\t\t\tinst.trigger.remove();\r\n\t\t\t$target.removeClass(this.markerClassName).\r\n\t\t\t\tunbind(\"focus\", this._showDatepicker).\r\n\t\t\t\tunbind(\"keydown\", this._doKeyDown).\r\n\t\t\t\tunbind(\"keypress\", this._doKeyPress).\r\n\t\t\t\tunbind(\"keyup\", this._doKeyUp);\r\n\t\t} else if (nodeName === \"div\" || nodeName === \"span\") {\r\n\t\t\t$target.removeClass(this.markerClassName).empty();\r\n\t\t}\r\n\t},\r\n\r\n\t/* Enable the date picker to a jQuery selection.\r\n\t * @param  target\telement - the target input field or division or span\r\n\t */\r\n\t_enableDatepicker: function(target) {\r\n\t\tvar nodeName, inline,\r\n\t\t\t$target = $(target),\r\n\t\t\tinst = $.data(target, PROP_NAME);\r\n\r\n\t\tif (!$target.hasClass(this.markerClassName)) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tnodeName = target.nodeName.toLowerCase();\r\n\t\tif (nodeName === \"input\") {\r\n\t\t\ttarget.disabled = false;\r\n\t\t\tinst.trigger.filter(\"button\").\r\n\t\t\t\teach(function() { this.disabled = false; }).end().\r\n\t\t\t\tfilter(\"img\").css({opacity: \"1.0\", cursor: \"\"});\r\n\t\t} else if (nodeName === \"div\" || nodeName === \"span\") {\r\n\t\t\tinline = $target.children(\".\" + this._inlineClass);\r\n\t\t\tinline.children().removeClass(\"ui-state-disabled\");\r\n\t\t\tinline.find(\"select.ui-datepicker-month, select.ui-datepicker-year\").\r\n\t\t\t\tprop(\"disabled\", false);\r\n\t\t}\r\n\t\tthis._disabledInputs = $.map(this._disabledInputs,\r\n\t\t\tfunction(value) { return (value === target ? null : value); }); // delete entry\r\n\t},\r\n\r\n\t/* Disable the date picker to a jQuery selection.\r\n\t * @param  target\telement - the target input field or division or span\r\n\t */\r\n\t_disableDatepicker: function(target) {\r\n\t\tvar nodeName, inline,\r\n\t\t\t$target = $(target),\r\n\t\t\tinst = $.data(target, PROP_NAME);\r\n\r\n\t\tif (!$target.hasClass(this.markerClassName)) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tnodeName = target.nodeName.toLowerCase();\r\n\t\tif (nodeName === \"input\") {\r\n\t\t\ttarget.disabled = true;\r\n\t\t\tinst.trigger.filter(\"button\").\r\n\t\t\t\teach(function() { this.disabled = true; }).end().\r\n\t\t\t\tfilter(\"img\").css({opacity: \"0.5\", cursor: \"default\"});\r\n\t\t} else if (nodeName === \"div\" || nodeName === \"span\") {\r\n\t\t\tinline = $target.children(\".\" + this._inlineClass);\r\n\t\t\tinline.children().addClass(\"ui-state-disabled\");\r\n\t\t\tinline.find(\"select.ui-datepicker-month, select.ui-datepicker-year\").\r\n\t\t\t\tprop(\"disabled\", true);\r\n\t\t}\r\n\t\tthis._disabledInputs = $.map(this._disabledInputs,\r\n\t\t\tfunction(value) { return (value === target ? null : value); }); // delete entry\r\n\t\tthis._disabledInputs[this._disabledInputs.length] = target;\r\n\t},\r\n\r\n\t/* Is the first field in a jQuery collection disabled as a datepicker?\r\n\t * @param  target\telement - the target input field or division or span\r\n\t * @return boolean - true if disabled, false if enabled\r\n\t */\r\n\t_isDisabledDatepicker: function(target) {\r\n\t\tif (!target) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tfor (var i = 0; i < this._disabledInputs.length; i++) {\r\n\t\t\tif (this._disabledInputs[i] === target) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn false;\r\n\t},\r\n\r\n\t/* Retrieve the instance data for the target control.\r\n\t * @param  target  element - the target input field or division or span\r\n\t * @return  object - the associated instance data\r\n\t * @throws  error if a jQuery problem getting data\r\n\t */\r\n\t_getInst: function(target) {\r\n\t\ttry {\r\n\t\t\treturn $.data(target, PROP_NAME);\r\n\t\t}\r\n\t\tcatch (err) {\r\n\t\t\tthrow \"Missing instance data for this datepicker\";\r\n\t\t}\r\n\t},\r\n\r\n\t/* Update or retrieve the settings for a date picker attached to an input field or division.\r\n\t * @param  target  element - the target input field or division or span\r\n\t * @param  name\tobject - the new settings to update or\r\n\t *\t\t\t\tstring - the name of the setting to change or retrieve,\r\n\t *\t\t\t\twhen retrieving also \"all\" for all instance settings or\r\n\t *\t\t\t\t\"defaults\" for all global defaults\r\n\t * @param  value   any - the new value for the setting\r\n\t *\t\t\t\t(omit if above is an object or to retrieve a value)\r\n\t */\r\n\t_optionDatepicker: function(target, name, value) {\r\n\t\tvar settings, date, minDate, maxDate,\r\n\t\t\tinst = this._getInst(target);\r\n\r\n\t\tif (arguments.length === 2 && typeof name === \"string\") {\r\n\t\t\treturn (name === \"defaults\" ? $.extend({}, $.datepicker._defaults) :\r\n\t\t\t\t(inst ? (name === \"all\" ? $.extend({}, inst.settings) :\r\n\t\t\t\tthis._get(inst, name)) : null));\r\n\t\t}\r\n\r\n\t\tsettings = name || {};\r\n\t\tif (typeof name === \"string\") {\r\n\t\t\tsettings = {};\r\n\t\t\tsettings[name] = value;\r\n\t\t}\r\n\r\n\t\tif (inst) {\r\n\t\t\tif (this._curInst === inst) {\r\n\t\t\t\tthis._hideDatepicker();\r\n\t\t\t}\r\n\r\n\t\t\tdate = this._getDateDatepicker(target, true);\r\n\t\t\tminDate = this._getMinMaxDate(inst, \"min\");\r\n\t\t\tmaxDate = this._getMinMaxDate(inst, \"max\");\r\n\t\t\textendRemove(inst.settings, settings);\r\n\t\t\t// reformat the old minDate/maxDate values if dateFormat changes and a new minDate/maxDate isn't provided\r\n\t\t\tif (minDate !== null && settings.dateFormat !== undefined && settings.minDate === undefined) {\r\n\t\t\t\tinst.settings.minDate = this._formatDate(inst, minDate);\r\n\t\t\t}\r\n\t\t\tif (maxDate !== null && settings.dateFormat !== undefined && settings.maxDate === undefined) {\r\n\t\t\t\tinst.settings.maxDate = this._formatDate(inst, maxDate);\r\n\t\t\t}\r\n\t\t\tif ( \"disabled\" in settings ) {\r\n\t\t\t\tif ( settings.disabled ) {\r\n\t\t\t\t\tthis._disableDatepicker(target);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis._enableDatepicker(target);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis._attachments($(target), inst);\r\n\t\t\tthis._autoSize(inst);\r\n\t\t\tthis._setDate(inst, date);\r\n\t\t\tthis._updateAlternate(inst);\r\n\t\t\tthis._updateDatepicker(inst);\r\n\t\t}\r\n\t},\r\n\r\n\t// change method deprecated\r\n\t_changeDatepicker: function(target, name, value) {\r\n\t\tthis._optionDatepicker(target, name, value);\r\n\t},\r\n\r\n\t/* Redraw the date picker attached to an input field or division.\r\n\t * @param  target  element - the target input field or division or span\r\n\t */\r\n\t_refreshDatepicker: function(target) {\r\n\t\tvar inst = this._getInst(target);\r\n\t\tif (inst) {\r\n\t\t\tthis._updateDatepicker(inst);\r\n\t\t}\r\n\t},\r\n\r\n\t/* Set the dates for a jQuery selection.\r\n\t * @param  target element - the target input field or division or span\r\n\t * @param  date\tDate - the new date\r\n\t */\r\n\t_setDateDatepicker: function(target, date) {\r\n\t\tvar inst = this._getInst(target);\r\n\t\tif (inst) {\r\n\t\t\tthis._setDate(inst, date);\r\n\t\t\tthis._updateDatepicker(inst);\r\n\t\t\tthis._updateAlternate(inst);\r\n\t\t}\r\n\t},\r\n\r\n\t/* Get the date(s) for the first entry in a jQuery selection.\r\n\t * @param  target element - the target input field or division or span\r\n\t * @param  noDefault boolean - true if no default date is to be used\r\n\t * @return Date - the current date\r\n\t */\r\n\t_getDateDatepicker: function(target, noDefault) {\r\n\t\tvar inst = this._getInst(target);\r\n\t\tif (inst && !inst.inline) {\r\n\t\t\tthis._setDateFromField(inst, noDefault);\r\n\t\t}\r\n\t\treturn (inst ? this._getDate(inst) : null);\r\n\t},\r\n\r\n\t/* Handle keystrokes. */\r\n\t_doKeyDown: function(event) {\r\n\t\tvar onSelect, dateStr, sel,\r\n\t\t\tinst = $.datepicker._getInst(event.target),\r\n\t\t\thandled = true,\r\n\t\t\tisRTL = inst.dpDiv.is(\".ui-datepicker-rtl\");\r\n\r\n\t\tinst._keyEvent = true;\r\n\t\tif ($.datepicker._datepickerShowing) {\r\n\t\t\tswitch (event.keyCode) {\r\n\t\t\t\tcase 9: $.datepicker._hideDatepicker();\r\n\t\t\t\t\t\thandled = false;\r\n\t\t\t\t\t\tbreak; // hide on tab out\r\n\t\t\t\tcase 13: sel = $(\"td.\" + $.datepicker._dayOverClass + \":not(.\" +\r\n\t\t\t\t\t\t\t\t\t$.datepicker._currentClass + \")\", inst.dpDiv);\r\n\t\t\t\t\t\tif (sel[0]) {\r\n\t\t\t\t\t\t\t$.datepicker._selectDay(event.target, inst.selectedMonth, inst.selectedYear, sel[0]);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tonSelect = $.datepicker._get(inst, \"onSelect\");\r\n\t\t\t\t\t\tif (onSelect) {\r\n\t\t\t\t\t\t\tdateStr = $.datepicker._formatDate(inst);\r\n\r\n\t\t\t\t\t\t\t// trigger custom callback\r\n\t\t\t\t\t\t\tonSelect.apply((inst.input ? inst.input[0] : null), [dateStr, inst]);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t$.datepicker._hideDatepicker();\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\treturn false; // don't submit the form\r\n\t\t\t\tcase 27: $.datepicker._hideDatepicker();\r\n\t\t\t\t\t\tbreak; // hide on escape\r\n\t\t\t\tcase 33: $.datepicker._adjustDate(event.target, (event.ctrlKey ?\r\n\t\t\t\t\t\t\t-$.datepicker._get(inst, \"stepBigMonths\") :\r\n\t\t\t\t\t\t\t-$.datepicker._get(inst, \"stepMonths\")), \"M\");\r\n\t\t\t\t\t\tbreak; // previous month/year on page up/+ ctrl\r\n\t\t\t\tcase 34: $.datepicker._adjustDate(event.target, (event.ctrlKey ?\r\n\t\t\t\t\t\t\t+$.datepicker._get(inst, \"stepBigMonths\") :\r\n\t\t\t\t\t\t\t+$.datepicker._get(inst, \"stepMonths\")), \"M\");\r\n\t\t\t\t\t\tbreak; // next month/year on page down/+ ctrl\r\n\t\t\t\tcase 35: if (event.ctrlKey || event.metaKey) {\r\n\t\t\t\t\t\t\t$.datepicker._clearDate(event.target);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\thandled = event.ctrlKey || event.metaKey;\r\n\t\t\t\t\t\tbreak; // clear on ctrl or command +end\r\n\t\t\t\tcase 36: if (event.ctrlKey || event.metaKey) {\r\n\t\t\t\t\t\t\t$.datepicker._gotoToday(event.target);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\thandled = event.ctrlKey || event.metaKey;\r\n\t\t\t\t\t\tbreak; // current on ctrl or command +home\r\n\t\t\t\tcase 37: if (event.ctrlKey || event.metaKey) {\r\n\t\t\t\t\t\t\t$.datepicker._adjustDate(event.target, (isRTL ? +1 : -1), \"D\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\thandled = event.ctrlKey || event.metaKey;\r\n\t\t\t\t\t\t// -1 day on ctrl or command +left\r\n\t\t\t\t\t\tif (event.originalEvent.altKey) {\r\n\t\t\t\t\t\t\t$.datepicker._adjustDate(event.target, (event.ctrlKey ?\r\n\t\t\t\t\t\t\t\t-$.datepicker._get(inst, \"stepBigMonths\") :\r\n\t\t\t\t\t\t\t\t-$.datepicker._get(inst, \"stepMonths\")), \"M\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t// next month/year on alt +left on Mac\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\tcase 38: if (event.ctrlKey || event.metaKey) {\r\n\t\t\t\t\t\t\t$.datepicker._adjustDate(event.target, -7, \"D\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\thandled = event.ctrlKey || event.metaKey;\r\n\t\t\t\t\t\tbreak; // -1 week on ctrl or command +up\r\n\t\t\t\tcase 39: if (event.ctrlKey || event.metaKey) {\r\n\t\t\t\t\t\t\t$.datepicker._adjustDate(event.target, (isRTL ? -1 : +1), \"D\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\thandled = event.ctrlKey || event.metaKey;\r\n\t\t\t\t\t\t// +1 day on ctrl or command +right\r\n\t\t\t\t\t\tif (event.originalEvent.altKey) {\r\n\t\t\t\t\t\t\t$.datepicker._adjustDate(event.target, (event.ctrlKey ?\r\n\t\t\t\t\t\t\t\t+$.datepicker._get(inst, \"stepBigMonths\") :\r\n\t\t\t\t\t\t\t\t+$.datepicker._get(inst, \"stepMonths\")), \"M\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t// next month/year on alt +right\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\tcase 40: if (event.ctrlKey || event.metaKey) {\r\n\t\t\t\t\t\t\t$.datepicker._adjustDate(event.target, +7, \"D\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\thandled = event.ctrlKey || event.metaKey;\r\n\t\t\t\t\t\tbreak; // +1 week on ctrl or command +down\r\n\t\t\t\tdefault: handled = false;\r\n\t\t\t}\r\n\t\t} else if (event.keyCode === 36 && event.ctrlKey) { // display the date picker on ctrl+home\r\n\t\t\t$.datepicker._showDatepicker(this);\r\n\t\t} else {\r\n\t\t\thandled = false;\r\n\t\t}\r\n\r\n\t\tif (handled) {\r\n\t\t\tevent.preventDefault();\r\n\t\t\tevent.stopPropagation();\r\n\t\t}\r\n\t},\r\n\r\n\t/* Filter entered characters - based on date format. */\r\n\t_doKeyPress: function(event) {\r\n\t\tvar chars, chr,\r\n\t\t\tinst = $.datepicker._getInst(event.target);\r\n\r\n\t\tif ($.datepicker._get(inst, \"constrainInput\")) {\r\n\t\t\tchars = $.datepicker._possibleChars($.datepicker._get(inst, \"dateFormat\"));\r\n\t\t\tchr = String.fromCharCode(event.charCode == null ? event.keyCode : event.charCode);\r\n\t\t\treturn event.ctrlKey || event.metaKey || (chr < \" \" || !chars || chars.indexOf(chr) > -1);\r\n\t\t}\r\n\t},\r\n\r\n\t/* Synchronise manual entry and field/alternate field. */\r\n\t_doKeyUp: function(event) {\r\n\t\tvar date,\r\n\t\t\tinst = $.datepicker._getInst(event.target);\r\n\r\n\t\tif (inst.input.val() !== inst.lastVal) {\r\n\t\t\ttry {\r\n\t\t\t\tdate = $.datepicker.parseDate($.datepicker._get(inst, \"dateFormat\"),\r\n\t\t\t\t\t(inst.input ? inst.input.val() : null),\r\n\t\t\t\t\t$.datepicker._getFormatConfig(inst));\r\n\r\n\t\t\t\tif (date) { // only if valid\r\n\t\t\t\t\t$.datepicker._setDateFromField(inst);\r\n\t\t\t\t\t$.datepicker._updateAlternate(inst);\r\n\t\t\t\t\t$.datepicker._updateDatepicker(inst);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tcatch (err) {\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn true;\r\n\t},\r\n\r\n\t/* Pop-up the date picker for a given input field.\r\n\t * If false returned from beforeShow event handler do not show.\r\n\t * @param  input  element - the input field attached to the date picker or\r\n\t *\t\t\t\t\tevent - if triggered by focus\r\n\t */\r\n\t_showDatepicker: function(input) {\r\n\t\tinput = input.target || input;\r\n\t\tif (input.nodeName.toLowerCase() !== \"input\") { // find from button/image trigger\r\n\t\t\tinput = $(\"input\", input.parentNode)[0];\r\n\t\t}\r\n\r\n\t\tif ($.datepicker._isDisabledDatepicker(input) || $.datepicker._lastInput === input) { // already here\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar inst, beforeShow, beforeShowSettings, isFixed,\r\n\t\t\toffset, showAnim, duration;\r\n\r\n\t\tinst = $.datepicker._getInst(input);\r\n\t\tif ($.datepicker._curInst && $.datepicker._curInst !== inst) {\r\n\t\t\t$.datepicker._curInst.dpDiv.stop(true, true);\r\n\t\t\tif ( inst && $.datepicker._datepickerShowing ) {\r\n\t\t\t\t$.datepicker._hideDatepicker( $.datepicker._curInst.input[0] );\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tbeforeShow = $.datepicker._get(inst, \"beforeShow\");\r\n\t\tbeforeShowSettings = beforeShow ? beforeShow.apply(input, [input, inst]) : {};\r\n\t\tif(beforeShowSettings === false){\r\n\t\t\treturn;\r\n\t\t}\r\n\t\textendRemove(inst.settings, beforeShowSettings);\r\n\r\n\t\tinst.lastVal = null;\r\n\t\t$.datepicker._lastInput = input;\r\n\t\t$.datepicker._setDateFromField(inst);\r\n\r\n\t\tif ($.datepicker._inDialog) { // hide cursor\r\n\t\t\tinput.value = \"\";\r\n\t\t}\r\n\t\tif (!$.datepicker._pos) { // position below input\r\n\t\t\t$.datepicker._pos = $.datepicker._findPos(input);\r\n\t\t\t$.datepicker._pos[1] += input.offsetHeight; // add the height\r\n\t\t}\r\n\r\n\t\tisFixed = false;\r\n\t\t$(input).parents().each(function() {\r\n\t\t\tisFixed |= $(this).css(\"position\") === \"fixed\";\r\n\t\t\treturn !isFixed;\r\n\t\t});\r\n\r\n\t\toffset = {left: $.datepicker._pos[0], top: $.datepicker._pos[1]};\r\n\t\t$.datepicker._pos = null;\r\n\t\t//to avoid flashes on Firefox\r\n\t\tinst.dpDiv.empty();\r\n\t\t// determine sizing offscreen\r\n\t\tinst.dpDiv.css({position: \"absolute\", display: \"block\", top: \"-1000px\"});\r\n\t\t$.datepicker._updateDatepicker(inst);\r\n\t\t// fix width for dynamic number of date pickers\r\n\t\t// and adjust position before showing\r\n\t\toffset = $.datepicker._checkOffset(inst, offset, isFixed);\r\n\t\tinst.dpDiv.css({position: ($.datepicker._inDialog && $.blockUI ?\r\n\t\t\t\"static\" : (isFixed ? \"fixed\" : \"absolute\")), display: \"none\",\r\n\t\t\tleft: offset.left + \"px\", top: offset.top + \"px\"});\r\n\r\n\t\tif (!inst.inline) {\r\n\t\t\tshowAnim = $.datepicker._get(inst, \"showAnim\");\r\n\t\t\tduration = $.datepicker._get(inst, \"duration\");\r\n\t\t\tinst.dpDiv.zIndex($(input).zIndex()+1);\r\n\t\t\t$.datepicker._datepickerShowing = true;\r\n\r\n\t\t\tif ( $.effects && $.effects.effect[ showAnim ] ) {\r\n\t\t\t\tinst.dpDiv.show(showAnim, $.datepicker._get(inst, \"showOptions\"), duration);\r\n\t\t\t} else {\r\n\t\t\t\tinst.dpDiv[showAnim || \"show\"](showAnim ? duration : null);\r\n\t\t\t}\r\n\r\n\t\t\tif (inst.input.is(\":visible\") && !inst.input.is(\":disabled\")) {\r\n\t\t\t\tinst.input.focus();\r\n\t\t\t}\r\n\t\t\t$.datepicker._curInst = inst;\r\n\t\t}\r\n\t},\r\n\r\n\t/* Generate the date picker content. */\r\n\t_updateDatepicker: function(inst) {\r\n\t\tthis.maxRows = 4; //Reset the max number of rows being displayed (see #7043)\r\n\t\tinstActive = inst; // for delegate hover events\r\n\t\tinst.dpDiv.empty().append(this._generateHTML(inst));\r\n\t\tthis._attachHandlers(inst);\r\n\t\tinst.dpDiv.find(\".\" + this._dayOverClass + \" a\").mouseover();\r\n\r\n\t\tvar origyearshtml,\r\n\t\t\tnumMonths = this._getNumberOfMonths(inst),\r\n\t\t\tcols = numMonths[1],\r\n\t\t\twidth = 17;\r\n\r\n\t\tinst.dpDiv.removeClass(\"ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4\").width(\"\");\r\n\t\tif (cols > 1) {\r\n\t\t\tinst.dpDiv.addClass(\"ui-datepicker-multi-\" + cols).css(\"width\", (width * cols) + \"em\");\r\n\t\t}\r\n\t\tinst.dpDiv[(numMonths[0] !== 1 || numMonths[1] !== 1 ? \"add\" : \"remove\") +\r\n\t\t\t\"Class\"](\"ui-datepicker-multi\");\r\n\t\tinst.dpDiv[(this._get(inst, \"isRTL\") ? \"add\" : \"remove\") +\r\n\t\t\t\"Class\"](\"ui-datepicker-rtl\");\r\n\r\n\t\t// #6694 - don't focus the input if it's already focused\r\n\t\t// this breaks the change event in IE\r\n\t\tif (inst === $.datepicker._curInst && $.datepicker._datepickerShowing && inst.input &&\r\n\t\t\tinst.input.is(\":visible\") && !inst.input.is(\":disabled\") && inst.input[0] !== document.activeElement) {\r\n\t\t\tinst.input.focus();\r\n\t\t}\r\n\r\n\t\t// deffered render of the years select (to avoid flashes on Firefox)\r\n\t\tif( inst.yearshtml ){\r\n\t\t\torigyearshtml = inst.yearshtml;\r\n\t\t\tsetTimeout(function(){\r\n\t\t\t\t//assure that inst.yearshtml didn't change.\r\n\t\t\t\tif( origyearshtml === inst.yearshtml && inst.yearshtml ){\r\n\t\t\t\t\tinst.dpDiv.find(\"select.ui-datepicker-year:first\").replaceWith(inst.yearshtml);\r\n\t\t\t\t}\r\n\t\t\t\torigyearshtml = inst.yearshtml = null;\r\n\t\t\t}, 0);\r\n\t\t}\r\n\t},\r\n\r\n\t/* Retrieve the size of left and top borders for an element.\r\n\t * @param  elem  (jQuery object) the element of interest\r\n\t * @return  (number[2]) the left and top borders\r\n\t */\r\n\t_getBorders: function(elem) {\r\n\t\tvar convert = function(value) {\r\n\t\t\treturn {thin: 1, medium: 2, thick: 3}[value] || value;\r\n\t\t};\r\n\t\treturn [parseFloat(convert(elem.css(\"border-left-width\"))),\r\n\t\t\tparseFloat(convert(elem.css(\"border-top-width\")))];\r\n\t},\r\n\r\n\t/* Check positioning to remain on screen. */\r\n\t_checkOffset: function(inst, offset, isFixed) {\r\n\t\tvar dpWidth = inst.dpDiv.outerWidth(),\r\n\t\t\tdpHeight = inst.dpDiv.outerHeight(),\r\n\t\t\tinputWidth = inst.input ? inst.input.outerWidth() : 0,\r\n\t\t\tinputHeight = inst.input ? inst.input.outerHeight() : 0,\r\n\t\t\tviewWidth = document.documentElement.clientWidth + (isFixed ? 0 : $(document).scrollLeft()),\r\n\t\t\tviewHeight = document.documentElement.clientHeight + (isFixed ? 0 : $(document).scrollTop());\r\n\r\n\t\toffset.left -= (this._get(inst, \"isRTL\") ? (dpWidth - inputWidth) : 0);\r\n\t\toffset.left -= (isFixed && offset.left === inst.input.offset().left) ? $(document).scrollLeft() : 0;\r\n\t\toffset.top -= (isFixed && offset.top === (inst.input.offset().top + inputHeight)) ? $(document).scrollTop() : 0;\r\n\r\n\t\t// now check if datepicker is showing outside window viewport - move to a better place if so.\r\n\t\toffset.left -= Math.min(offset.left, (offset.left + dpWidth > viewWidth && viewWidth > dpWidth) ?\r\n\t\t\tMath.abs(offset.left + dpWidth - viewWidth) : 0);\r\n\t\toffset.top -= Math.min(offset.top, (offset.top + dpHeight > viewHeight && viewHeight > dpHeight) ?\r\n\t\t\tMath.abs(dpHeight + inputHeight) : 0);\r\n\r\n\t\treturn offset;\r\n\t},\r\n\r\n\t/* Find an object's position on the screen. */\r\n\t_findPos: function(obj) {\r\n\t\tvar position,\r\n\t\t\tinst = this._getInst(obj),\r\n\t\t\tisRTL = this._get(inst, \"isRTL\");\r\n\r\n\t\twhile (obj && (obj.type === \"hidden\" || obj.nodeType !== 1 || $.expr.filters.hidden(obj))) {\r\n\t\t\tobj = obj[isRTL ? \"previousSibling\" : \"nextSibling\"];\r\n\t\t}\r\n\r\n\t\tposition = $(obj).offset();\r\n\t\treturn [position.left, position.top];\r\n\t},\r\n\r\n\t/* Hide the date picker from view.\r\n\t * @param  input  element - the input field attached to the date picker\r\n\t */\r\n\t_hideDatepicker: function(input) {\r\n\t\tvar showAnim, duration, postProcess, onClose,\r\n\t\t\tinst = this._curInst;\r\n\r\n\t\tif (!inst || (input && inst !== $.data(input, PROP_NAME))) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (this._datepickerShowing) {\r\n\t\t\tshowAnim = this._get(inst, \"showAnim\");\r\n\t\t\tduration = this._get(inst, \"duration\");\r\n\t\t\tpostProcess = function() {\r\n\t\t\t\t$.datepicker._tidyDialog(inst);\r\n\t\t\t};\r\n\r\n\t\t\t// DEPRECATED: after BC for 1.8.x $.effects[ showAnim ] is not needed\r\n\t\t\tif ( $.effects && ( $.effects.effect[ showAnim ] || $.effects[ showAnim ] ) ) {\r\n\t\t\t\tinst.dpDiv.hide(showAnim, $.datepicker._get(inst, \"showOptions\"), duration, postProcess);\r\n\t\t\t} else {\r\n\t\t\t\tinst.dpDiv[(showAnim === \"slideDown\" ? \"slideUp\" :\r\n\t\t\t\t\t(showAnim === \"fadeIn\" ? \"fadeOut\" : \"hide\"))]((showAnim ? duration : null), postProcess);\r\n\t\t\t}\r\n\r\n\t\t\tif (!showAnim) {\r\n\t\t\t\tpostProcess();\r\n\t\t\t}\r\n\t\t\tthis._datepickerShowing = false;\r\n\r\n\t\t\tonClose = this._get(inst, \"onClose\");\r\n\t\t\tif (onClose) {\r\n\t\t\t\tonClose.apply((inst.input ? inst.input[0] : null), [(inst.input ? inst.input.val() : \"\"), inst]);\r\n\t\t\t}\r\n\r\n\t\t\tthis._lastInput = null;\r\n\t\t\tif (this._inDialog) {\r\n\t\t\t\tthis._dialogInput.css({ position: \"absolute\", left: \"0\", top: \"-100px\" });\r\n\t\t\t\tif ($.blockUI) {\r\n\t\t\t\t\t$.unblockUI();\r\n\t\t\t\t\t$(\"body\").append(this.dpDiv);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis._inDialog = false;\r\n\t\t}\r\n\t},\r\n\r\n\t/* Tidy up after a dialog display. */\r\n\t_tidyDialog: function(inst) {\r\n\t\tinst.dpDiv.removeClass(this._dialogClass).unbind(\".ui-datepicker-calendar\");\r\n\t},\r\n\r\n\t/* Close date picker if clicked elsewhere. */\r\n\t_checkExternalClick: function(event) {\r\n\t\tif (!$.datepicker._curInst) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar $target = $(event.target),\r\n\t\t\tinst = $.datepicker._getInst($target[0]);\r\n\r\n\t\tif ( ( ( $target[0].id !== $.datepicker._mainDivId &&\r\n\t\t\t\t$target.parents(\"#\" + $.datepicker._mainDivId).length === 0 &&\r\n\t\t\t\t!$target.hasClass($.datepicker.markerClassName) &&\r\n\t\t\t\t!$target.closest(\".\" + $.datepicker._triggerClass).length &&\r\n\t\t\t\t$.datepicker._datepickerShowing && !($.datepicker._inDialog && $.blockUI) ) ) ||\r\n\t\t\t( $target.hasClass($.datepicker.markerClassName) && $.datepicker._curInst !== inst ) ) {\r\n\t\t\t\t$.datepicker._hideDatepicker();\r\n\t\t}\r\n\t},\r\n\r\n\t/* Adjust one of the date sub-fields. */\r\n\t_adjustDate: function(id, offset, period) {\r\n\t\tvar target = $(id),\r\n\t\t\tinst = this._getInst(target[0]);\r\n\r\n\t\tif (this._isDisabledDatepicker(target[0])) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis._adjustInstDate(inst, offset +\r\n\t\t\t(period === \"M\" ? this._get(inst, \"showCurrentAtPos\") : 0), // undo positioning\r\n\t\t\tperiod);\r\n\t\tthis._updateDatepicker(inst);\r\n\t},\r\n\r\n\t/* Action for current link. */\r\n\t_gotoToday: function(id) {\r\n\t\tvar date,\r\n\t\t\ttarget = $(id),\r\n\t\t\tinst = this._getInst(target[0]);\r\n\r\n\t\tif (this._get(inst, \"gotoCurrent\") && inst.currentDay) {\r\n\t\t\tinst.selectedDay = inst.currentDay;\r\n\t\t\tinst.drawMonth = inst.selectedMonth = inst.currentMonth;\r\n\t\t\tinst.drawYear = inst.selectedYear = inst.currentYear;\r\n\t\t} else {\r\n\t\t\tdate = new Date();\r\n\t\t\tinst.selectedDay = date.getDate();\r\n\t\t\tinst.drawMonth = inst.selectedMonth = date.getMonth();\r\n\t\t\tinst.drawYear = inst.selectedYear = date.getFullYear();\r\n\t\t}\r\n\t\tthis._notifyChange(inst);\r\n\t\tthis._adjustDate(target);\r\n\t},\r\n\r\n\t/* Action for selecting a new month/year. */\r\n\t_selectMonthYear: function(id, select, period) {\r\n\t\tvar target = $(id),\r\n\t\t\tinst = this._getInst(target[0]);\r\n\r\n\t\tinst[\"selected\" + (period === \"M\" ? \"Month\" : \"Year\")] =\r\n\t\tinst[\"draw\" + (period === \"M\" ? \"Month\" : \"Year\")] =\r\n\t\t\tparseInt(select.options[select.selectedIndex].value,10);\r\n\r\n\t\tthis._notifyChange(inst);\r\n\t\tthis._adjustDate(target);\r\n\t},\r\n\r\n\t/* Action for selecting a day. */\r\n\t_selectDay: function(id, month, year, td) {\r\n\t\tvar inst,\r\n\t\t\ttarget = $(id);\r\n\r\n\t\tif ($(td).hasClass(this._unselectableClass) || this._isDisabledDatepicker(target[0])) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tinst = this._getInst(target[0]);\r\n\t\tinst.selectedDay = inst.currentDay = $(\"a\", td).html();\r\n\t\tinst.selectedMonth = inst.currentMonth = month;\r\n\t\tinst.selectedYear = inst.currentYear = year;\r\n\t\tthis._selectDate(id, this._formatDate(inst,\r\n\t\t\tinst.currentDay, inst.currentMonth, inst.currentYear));\r\n\t},\r\n\r\n\t/* Erase the input field and hide the date picker. */\r\n\t_clearDate: function(id) {\r\n\t\tvar target = $(id);\r\n\t\tthis._selectDate(target, \"\");\r\n\t},\r\n\r\n\t/* Update the input field with the selected date. */\r\n\t_selectDate: function(id, dateStr) {\r\n\t\tvar onSelect,\r\n\t\t\ttarget = $(id),\r\n\t\t\tinst = this._getInst(target[0]);\r\n\r\n\t\tdateStr = (dateStr != null ? dateStr : this._formatDate(inst));\r\n\t\tif (inst.input) {\r\n\t\t\tinst.input.val(dateStr);\r\n\t\t}\r\n\t\tthis._updateAlternate(inst);\r\n\r\n\t\tonSelect = this._get(inst, \"onSelect\");\r\n\t\tif (onSelect) {\r\n\t\t\tonSelect.apply((inst.input ? inst.input[0] : null), [dateStr, inst]);  // trigger custom callback\r\n\t\t} else if (inst.input) {\r\n\t\t\tinst.input.trigger(\"change\"); // fire the change event\r\n\t\t}\r\n\r\n\t\tif (inst.inline){\r\n\t\t\tthis._updateDatepicker(inst);\r\n\t\t} else {\r\n\t\t\tthis._hideDatepicker();\r\n\t\t\tthis._lastInput = inst.input[0];\r\n\t\t\tif (typeof(inst.input[0]) !== \"object\") {\r\n\t\t\t\tinst.input.focus(); // restore focus\r\n\t\t\t}\r\n\t\t\tthis._lastInput = null;\r\n\t\t}\r\n\t},\r\n\r\n\t/* Update any alternate field to synchronise with the main field. */\r\n\t_updateAlternate: function(inst) {\r\n\t\tvar altFormat, date, dateStr,\r\n\t\t\taltField = this._get(inst, \"altField\");\r\n\r\n\t\tif (altField) { // update alternate field too\r\n\t\t\taltFormat = this._get(inst, \"altFormat\") || this._get(inst, \"dateFormat\");\r\n\t\t\tdate = this._getDate(inst);\r\n\t\t\tdateStr = this.formatDate(altFormat, date, this._getFormatConfig(inst));\r\n\t\t\t$(altField).each(function() { $(this).val(dateStr); });\r\n\t\t}\r\n\t},\r\n\r\n\t/* Set as beforeShowDay function to prevent selection of weekends.\r\n\t * @param  date  Date - the date to customise\r\n\t * @return [boolean, string] - is this date selectable?, what is its CSS class?\r\n\t */\r\n\tnoWeekends: function(date) {\r\n\t\tvar day = date.getDay();\r\n\t\treturn [(day > 0 && day < 6), \"\"];\r\n\t},\r\n\r\n\t/* Set as calculateWeek to determine the week of the year based on the ISO 8601 definition.\r\n\t * @param  date  Date - the date to get the week for\r\n\t * @return  number - the number of the week within the year that contains this date\r\n\t */\r\n\tiso8601Week: function(date) {\r\n\t\tvar time,\r\n\t\t\tcheckDate = new Date(date.getTime());\r\n\r\n\t\t// Find Thursday of this week starting on Monday\r\n\t\tcheckDate.setDate(checkDate.getDate() + 4 - (checkDate.getDay() || 7));\r\n\r\n\t\ttime = checkDate.getTime();\r\n\t\tcheckDate.setMonth(0); // Compare with Jan 1\r\n\t\tcheckDate.setDate(1);\r\n\t\treturn Math.floor(Math.round((time - checkDate) / 86400000) / 7) + 1;\r\n\t},\r\n\r\n\t/* Parse a string value into a date object.\r\n\t * See formatDate below for the possible formats.\r\n\t *\r\n\t * @param  format string - the expected format of the date\r\n\t * @param  value string - the date in the above format\r\n\t * @param  settings Object - attributes include:\r\n\t *\t\t\t\t\tshortYearCutoff  number - the cutoff year for determining the century (optional)\r\n\t *\t\t\t\t\tdayNamesShort\tstring[7] - abbreviated names of the days from Sunday (optional)\r\n\t *\t\t\t\t\tdayNames\t\tstring[7] - names of the days from Sunday (optional)\r\n\t *\t\t\t\t\tmonthNamesShort string[12] - abbreviated names of the months (optional)\r\n\t *\t\t\t\t\tmonthNames\t\tstring[12] - names of the months (optional)\r\n\t * @return  Date - the extracted date value or null if value is blank\r\n\t */\r\n\tparseDate: function (format, value, settings) {\r\n\t\tif (format == null || value == null) {\r\n\t\t\tthrow \"Invalid arguments\";\r\n\t\t}\r\n\r\n\t\tvalue = (typeof value === \"object\" ? value.toString() : value + \"\");\r\n\t\tif (value === \"\") {\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\tvar iFormat, dim, extra,\r\n\t\t\tiValue = 0,\r\n\t\t\tshortYearCutoffTemp = (settings ? settings.shortYearCutoff : null) || this._defaults.shortYearCutoff,\r\n\t\t\tshortYearCutoff = (typeof shortYearCutoffTemp !== \"string\" ? shortYearCutoffTemp :\r\n\t\t\t\tnew Date().getFullYear() % 100 + parseInt(shortYearCutoffTemp, 10)),\r\n\t\t\tdayNamesShort = (settings ? settings.dayNamesShort : null) || this._defaults.dayNamesShort,\r\n\t\t\tdayNames = (settings ? settings.dayNames : null) || this._defaults.dayNames,\r\n\t\t\tmonthNamesShort = (settings ? settings.monthNamesShort : null) || this._defaults.monthNamesShort,\r\n\t\t\tmonthNames = (settings ? settings.monthNames : null) || this._defaults.monthNames,\r\n\t\t\tyear = -1,\r\n\t\t\tmonth = -1,\r\n\t\t\tday = -1,\r\n\t\t\tdoy = -1,\r\n\t\t\tliteral = false,\r\n\t\t\tdate,\r\n\t\t\t// Check whether a format character is doubled\r\n\t\t\tlookAhead = function(match) {\r\n\t\t\t\tvar matches = (iFormat + 1 < format.length && format.charAt(iFormat + 1) === match);\r\n\t\t\t\tif (matches) {\r\n\t\t\t\t\tiFormat++;\r\n\t\t\t\t}\r\n\t\t\t\treturn matches;\r\n\t\t\t},\r\n\t\t\t// Extract a number from the string value\r\n\t\t\tgetNumber = function(match) {\r\n\t\t\t\tvar isDoubled = lookAhead(match),\r\n\t\t\t\t\tsize = (match === \"@\" ? 14 : (match === \"!\" ? 20 :\r\n\t\t\t\t\t(match === \"y\" && isDoubled ? 4 : (match === \"o\" ? 3 : 2)))),\r\n\t\t\t\t\tdigits = new RegExp(\"^\\\\d{1,\" + size + \"}\"),\r\n\t\t\t\t\tnum = value.substring(iValue).match(digits);\r\n\t\t\t\tif (!num) {\r\n\t\t\t\t\tthrow \"Missing number at position \" + iValue;\r\n\t\t\t\t}\r\n\t\t\t\tiValue += num[0].length;\r\n\t\t\t\treturn parseInt(num[0], 10);\r\n\t\t\t},\r\n\t\t\t// Extract a name from the string value and convert to an index\r\n\t\t\tgetName = function(match, shortNames, longNames) {\r\n\t\t\t\tvar index = -1,\r\n\t\t\t\t\tnames = $.map(lookAhead(match) ? longNames : shortNames, function (v, k) {\r\n\t\t\t\t\t\treturn [ [k, v] ];\r\n\t\t\t\t\t}).sort(function (a, b) {\r\n\t\t\t\t\t\treturn -(a[1].length - b[1].length);\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t$.each(names, function (i, pair) {\r\n\t\t\t\t\tvar name = pair[1];\r\n\t\t\t\t\tif (value.substr(iValue, name.length).toLowerCase() === name.toLowerCase()) {\r\n\t\t\t\t\t\tindex = pair[0];\r\n\t\t\t\t\t\tiValue += name.length;\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\tif (index !== -1) {\r\n\t\t\t\t\treturn index + 1;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthrow \"Unknown name at position \" + iValue;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t// Confirm that a literal character matches the string value\r\n\t\t\tcheckLiteral = function() {\r\n\t\t\t\tif (value.charAt(iValue) !== format.charAt(iFormat)) {\r\n\t\t\t\t\tthrow \"Unexpected literal at position \" + iValue;\r\n\t\t\t\t}\r\n\t\t\t\tiValue++;\r\n\t\t\t};\r\n\r\n\t\tfor (iFormat = 0; iFormat < format.length; iFormat++) {\r\n\t\t\tif (literal) {\r\n\t\t\t\tif (format.charAt(iFormat) === \"'\" && !lookAhead(\"'\")) {\r\n\t\t\t\t\tliteral = false;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tcheckLiteral();\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tswitch (format.charAt(iFormat)) {\r\n\t\t\t\t\tcase \"d\":\r\n\t\t\t\t\t\tday = getNumber(\"d\");\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"D\":\r\n\t\t\t\t\t\tgetName(\"D\", dayNamesShort, dayNames);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"o\":\r\n\t\t\t\t\t\tdoy = getNumber(\"o\");\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"m\":\r\n\t\t\t\t\t\tmonth = getNumber(\"m\");\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"M\":\r\n\t\t\t\t\t\tmonth = getName(\"M\", monthNamesShort, monthNames);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"y\":\r\n\t\t\t\t\t\tyear = getNumber(\"y\");\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"@\":\r\n\t\t\t\t\t\tdate = new Date(getNumber(\"@\"));\r\n\t\t\t\t\t\tyear = date.getFullYear();\r\n\t\t\t\t\t\tmonth = date.getMonth() + 1;\r\n\t\t\t\t\t\tday = date.getDate();\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"!\":\r\n\t\t\t\t\t\tdate = new Date((getNumber(\"!\") - this._ticksTo1970) / 10000);\r\n\t\t\t\t\t\tyear = date.getFullYear();\r\n\t\t\t\t\t\tmonth = date.getMonth() + 1;\r\n\t\t\t\t\t\tday = date.getDate();\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"'\":\r\n\t\t\t\t\t\tif (lookAhead(\"'\")){\r\n\t\t\t\t\t\t\tcheckLiteral();\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tliteral = true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\tcheckLiteral();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (iValue < value.length){\r\n\t\t\textra = value.substr(iValue);\r\n\t\t\tif (!/^\\s+/.test(extra)) {\r\n\t\t\t\tthrow \"Extra/unparsed characters found in date: \" + extra;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (year === -1) {\r\n\t\t\tyear = new Date().getFullYear();\r\n\t\t} else if (year < 100) {\r\n\t\t\tyear += new Date().getFullYear() - new Date().getFullYear() % 100 +\r\n\t\t\t\t(year <= shortYearCutoff ? 0 : -100);\r\n\t\t}\r\n\r\n\t\tif (doy > -1) {\r\n\t\t\tmonth = 1;\r\n\t\t\tday = doy;\r\n\t\t\tdo {\r\n\t\t\t\tdim = this._getDaysInMonth(year, month - 1);\r\n\t\t\t\tif (day <= dim) {\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tmonth++;\r\n\t\t\t\tday -= dim;\r\n\t\t\t} while (true);\r\n\t\t}\r\n\r\n\t\tdate = this._daylightSavingAdjust(new Date(year, month - 1, day));\r\n\t\tif (date.getFullYear() !== year || date.getMonth() + 1 !== month || date.getDate() !== day) {\r\n\t\t\tthrow \"Invalid date\"; // E.g. 31/02/00\r\n\t\t}\r\n\t\treturn date;\r\n\t},\r\n\r\n\t/* Standard date formats. */\r\n\tATOM: \"yy-mm-dd\", // RFC 3339 (ISO 8601)\r\n\tCOOKIE: \"D, dd M yy\",\r\n\tISO_8601: \"yy-mm-dd\",\r\n\tRFC_822: \"D, d M y\",\r\n\tRFC_850: \"DD, dd-M-y\",\r\n\tRFC_1036: \"D, d M y\",\r\n\tRFC_1123: \"D, d M yy\",\r\n\tRFC_2822: \"D, d M yy\",\r\n\tRSS: \"D, d M y\", // RFC 822\r\n\tTICKS: \"!\",\r\n\tTIMESTAMP: \"@\",\r\n\tW3C: \"yy-mm-dd\", // ISO 8601\r\n\r\n\t_ticksTo1970: (((1970 - 1) * 365 + Math.floor(1970 / 4) - Math.floor(1970 / 100) +\r\n\t\tMath.floor(1970 / 400)) * 24 * 60 * 60 * 10000000),\r\n\r\n\t/* Format a date object into a string value.\r\n\t * The format can be combinations of the following:\r\n\t * d  - day of month (no leading zero)\r\n\t * dd - day of month (two digit)\r\n\t * o  - day of year (no leading zeros)\r\n\t * oo - day of year (three digit)\r\n\t * D  - day name short\r\n\t * DD - day name long\r\n\t * m  - month of year (no leading zero)\r\n\t * mm - month of year (two digit)\r\n\t * M  - month name short\r\n\t * MM - month name long\r\n\t * y  - year (two digit)\r\n\t * yy - year (four digit)\r\n\t * @ - Unix timestamp (ms since 01/01/1970)\r\n\t * ! - Windows ticks (100ns since 01/01/0001)\r\n\t * \"...\" - literal text\r\n\t * '' - single quote\r\n\t *\r\n\t * @param  format string - the desired format of the date\r\n\t * @param  date Date - the date value to format\r\n\t * @param  settings Object - attributes include:\r\n\t *\t\t\t\t\tdayNamesShort\tstring[7] - abbreviated names of the days from Sunday (optional)\r\n\t *\t\t\t\t\tdayNames\t\tstring[7] - names of the days from Sunday (optional)\r\n\t *\t\t\t\t\tmonthNamesShort string[12] - abbreviated names of the months (optional)\r\n\t *\t\t\t\t\tmonthNames\t\tstring[12] - names of the months (optional)\r\n\t * @return  string - the date in the above format\r\n\t */\r\n\tformatDate: function (format, date, settings) {\r\n\t\tif (!date) {\r\n\t\t\treturn \"\";\r\n\t\t}\r\n\r\n\t\tvar iFormat,\r\n\t\t\tdayNamesShort = (settings ? settings.dayNamesShort : null) || this._defaults.dayNamesShort,\r\n\t\t\tdayNames = (settings ? settings.dayNames : null) || this._defaults.dayNames,\r\n\t\t\tmonthNamesShort = (settings ? settings.monthNamesShort : null) || this._defaults.monthNamesShort,\r\n\t\t\tmonthNames = (settings ? settings.monthNames : null) || this._defaults.monthNames,\r\n\t\t\t// Check whether a format character is doubled\r\n\t\t\tlookAhead = function(match) {\r\n\t\t\t\tvar matches = (iFormat + 1 < format.length && format.charAt(iFormat + 1) === match);\r\n\t\t\t\tif (matches) {\r\n\t\t\t\t\tiFormat++;\r\n\t\t\t\t}\r\n\t\t\t\treturn matches;\r\n\t\t\t},\r\n\t\t\t// Format a number, with leading zero if necessary\r\n\t\t\tformatNumber = function(match, value, len) {\r\n\t\t\t\tvar num = \"\" + value;\r\n\t\t\t\tif (lookAhead(match)) {\r\n\t\t\t\t\twhile (num.length < len) {\r\n\t\t\t\t\t\tnum = \"0\" + num;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn num;\r\n\t\t\t},\r\n\t\t\t// Format a name, short or long as requested\r\n\t\t\tformatName = function(match, value, shortNames, longNames) {\r\n\t\t\t\treturn (lookAhead(match) ? longNames[value] : shortNames[value]);\r\n\t\t\t},\r\n\t\t\toutput = \"\",\r\n\t\t\tliteral = false;\r\n\r\n\t\tif (date) {\r\n\t\t\tfor (iFormat = 0; iFormat < format.length; iFormat++) {\r\n\t\t\t\tif (literal) {\r\n\t\t\t\t\tif (format.charAt(iFormat) === \"'\" && !lookAhead(\"'\")) {\r\n\t\t\t\t\t\tliteral = false;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\toutput += format.charAt(iFormat);\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tswitch (format.charAt(iFormat)) {\r\n\t\t\t\t\t\tcase \"d\":\r\n\t\t\t\t\t\t\toutput += formatNumber(\"d\", date.getDate(), 2);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase \"D\":\r\n\t\t\t\t\t\t\toutput += formatName(\"D\", date.getDay(), dayNamesShort, dayNames);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase \"o\":\r\n\t\t\t\t\t\t\toutput += formatNumber(\"o\",\r\n\t\t\t\t\t\t\t\tMath.round((new Date(date.getFullYear(), date.getMonth(), date.getDate()).getTime() - new Date(date.getFullYear(), 0, 0).getTime()) / 86400000), 3);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase \"m\":\r\n\t\t\t\t\t\t\toutput += formatNumber(\"m\", date.getMonth() + 1, 2);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase \"M\":\r\n\t\t\t\t\t\t\toutput += formatName(\"M\", date.getMonth(), monthNamesShort, monthNames);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase \"y\":\r\n\t\t\t\t\t\t\toutput += (lookAhead(\"y\") ? date.getFullYear() :\r\n\t\t\t\t\t\t\t\t(date.getYear() % 100 < 10 ? \"0\" : \"\") + date.getYear() % 100);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase \"@\":\r\n\t\t\t\t\t\t\toutput += date.getTime();\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase \"!\":\r\n\t\t\t\t\t\t\toutput += date.getTime() * 10000 + this._ticksTo1970;\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase \"'\":\r\n\t\t\t\t\t\t\tif (lookAhead(\"'\")) {\r\n\t\t\t\t\t\t\t\toutput += \"'\";\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tliteral = true;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\toutput += format.charAt(iFormat);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn output;\r\n\t},\r\n\r\n\t/* Extract all possible characters from the date format. */\r\n\t_possibleChars: function (format) {\r\n\t\tvar iFormat,\r\n\t\t\tchars = \"\",\r\n\t\t\tliteral = false,\r\n\t\t\t// Check whether a format character is doubled\r\n\t\t\tlookAhead = function(match) {\r\n\t\t\t\tvar matches = (iFormat + 1 < format.length && format.charAt(iFormat + 1) === match);\r\n\t\t\t\tif (matches) {\r\n\t\t\t\t\tiFormat++;\r\n\t\t\t\t}\r\n\t\t\t\treturn matches;\r\n\t\t\t};\r\n\r\n\t\tfor (iFormat = 0; iFormat < format.length; iFormat++) {\r\n\t\t\tif (literal) {\r\n\t\t\t\tif (format.charAt(iFormat) === \"'\" && !lookAhead(\"'\")) {\r\n\t\t\t\t\tliteral = false;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tchars += format.charAt(iFormat);\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tswitch (format.charAt(iFormat)) {\r\n\t\t\t\t\tcase \"d\": case \"m\": case \"y\": case \"@\":\r\n\t\t\t\t\t\tchars += \"0123456789\";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"D\": case \"M\":\r\n\t\t\t\t\t\treturn null; // Accept anything\r\n\t\t\t\t\tcase \"'\":\r\n\t\t\t\t\t\tif (lookAhead(\"'\")) {\r\n\t\t\t\t\t\t\tchars += \"'\";\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tliteral = true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\tchars += format.charAt(iFormat);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn chars;\r\n\t},\r\n\r\n\t/* Get a setting value, defaulting if necessary. */\r\n\t_get: function(inst, name) {\r\n\t\treturn inst.settings[name] !== undefined ?\r\n\t\t\tinst.settings[name] : this._defaults[name];\r\n\t},\r\n\r\n\t/* Parse existing date and initialise date picker. */\r\n\t_setDateFromField: function(inst, noDefault) {\r\n\t\tif (inst.input.val() === inst.lastVal) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar dateFormat = this._get(inst, \"dateFormat\"),\r\n\t\t\tdates = inst.lastVal = inst.input ? inst.input.val() : null,\r\n\t\t\tdefaultDate = this._getDefaultDate(inst),\r\n\t\t\tdate = defaultDate,\r\n\t\t\tsettings = this._getFormatConfig(inst);\r\n\r\n\t\ttry {\r\n\t\t\tdate = this.parseDate(dateFormat, dates, settings) || defaultDate;\r\n\t\t} catch (event) {\r\n\t\t\tdates = (noDefault ? \"\" : dates);\r\n\t\t}\r\n\t\tinst.selectedDay = date.getDate();\r\n\t\tinst.drawMonth = inst.selectedMonth = date.getMonth();\r\n\t\tinst.drawYear = inst.selectedYear = date.getFullYear();\r\n\t\tinst.currentDay = (dates ? date.getDate() : 0);\r\n\t\tinst.currentMonth = (dates ? date.getMonth() : 0);\r\n\t\tinst.currentYear = (dates ? date.getFullYear() : 0);\r\n\t\tthis._adjustInstDate(inst);\r\n\t},\r\n\r\n\t/* Retrieve the default date shown on opening. */\r\n\t_getDefaultDate: function(inst) {\r\n\t\treturn this._restrictMinMax(inst,\r\n\t\t\tthis._determineDate(inst, this._get(inst, \"defaultDate\"), new Date()));\r\n\t},\r\n\r\n\t/* A date may be specified as an exact value or a relative one. */\r\n\t_determineDate: function(inst, date, defaultDate) {\r\n\t\tvar offsetNumeric = function(offset) {\r\n\t\t\t\tvar date = new Date();\r\n\t\t\t\tdate.setDate(date.getDate() + offset);\r\n\t\t\t\treturn date;\r\n\t\t\t},\r\n\t\t\toffsetString = function(offset) {\r\n\t\t\t\ttry {\r\n\t\t\t\t\treturn $.datepicker.parseDate($.datepicker._get(inst, \"dateFormat\"),\r\n\t\t\t\t\t\toffset, $.datepicker._getFormatConfig(inst));\r\n\t\t\t\t}\r\n\t\t\t\tcatch (e) {\r\n\t\t\t\t\t// Ignore\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar date = (offset.toLowerCase().match(/^c/) ?\r\n\t\t\t\t\t$.datepicker._getDate(inst) : null) || new Date(),\r\n\t\t\t\t\tyear = date.getFullYear(),\r\n\t\t\t\t\tmonth = date.getMonth(),\r\n\t\t\t\t\tday = date.getDate(),\r\n\t\t\t\t\tpattern = /([+\\-]?[0-9]+)\\s*(d|D|w|W|m|M|y|Y)?/g,\r\n\t\t\t\t\tmatches = pattern.exec(offset);\r\n\r\n\t\t\t\twhile (matches) {\r\n\t\t\t\t\tswitch (matches[2] || \"d\") {\r\n\t\t\t\t\t\tcase \"d\" : case \"D\" :\r\n\t\t\t\t\t\t\tday += parseInt(matches[1],10); break;\r\n\t\t\t\t\t\tcase \"w\" : case \"W\" :\r\n\t\t\t\t\t\t\tday += parseInt(matches[1],10) * 7; break;\r\n\t\t\t\t\t\tcase \"m\" : case \"M\" :\r\n\t\t\t\t\t\t\tmonth += parseInt(matches[1],10);\r\n\t\t\t\t\t\t\tday = Math.min(day, $.datepicker._getDaysInMonth(year, month));\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase \"y\": case \"Y\" :\r\n\t\t\t\t\t\t\tyear += parseInt(matches[1],10);\r\n\t\t\t\t\t\t\tday = Math.min(day, $.datepicker._getDaysInMonth(year, month));\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tmatches = pattern.exec(offset);\r\n\t\t\t\t}\r\n\t\t\t\treturn new Date(year, month, day);\r\n\t\t\t},\r\n\t\t\tnewDate = (date == null || date === \"\" ? defaultDate : (typeof date === \"string\" ? offsetString(date) :\r\n\t\t\t\t(typeof date === \"number\" ? (isNaN(date) ? defaultDate : offsetNumeric(date)) : new Date(date.getTime()))));\r\n\r\n\t\tnewDate = (newDate && newDate.toString() === \"Invalid Date\" ? defaultDate : newDate);\r\n\t\tif (newDate) {\r\n\t\t\tnewDate.setHours(0);\r\n\t\t\tnewDate.setMinutes(0);\r\n\t\t\tnewDate.setSeconds(0);\r\n\t\t\tnewDate.setMilliseconds(0);\r\n\t\t}\r\n\t\treturn this._daylightSavingAdjust(newDate);\r\n\t},\r\n\r\n\t/* Handle switch to/from daylight saving.\r\n\t * Hours may be non-zero on daylight saving cut-over:\r\n\t * > 12 when midnight changeover, but then cannot generate\r\n\t * midnight datetime, so jump to 1AM, otherwise reset.\r\n\t * @param  date  (Date) the date to check\r\n\t * @return  (Date) the corrected date\r\n\t */\r\n\t_daylightSavingAdjust: function(date) {\r\n\t\tif (!date) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\tdate.setHours(date.getHours() > 12 ? date.getHours() + 2 : 0);\r\n\t\treturn date;\r\n\t},\r\n\r\n\t/* Set the date(s) directly. */\r\n\t_setDate: function(inst, date, noChange) {\r\n\t\tvar clear = !date,\r\n\t\t\torigMonth = inst.selectedMonth,\r\n\t\t\torigYear = inst.selectedYear,\r\n\t\t\tnewDate = this._restrictMinMax(inst, this._determineDate(inst, date, new Date()));\r\n\r\n\t\tinst.selectedDay = inst.currentDay = newDate.getDate();\r\n\t\tinst.drawMonth = inst.selectedMonth = inst.currentMonth = newDate.getMonth();\r\n\t\tinst.drawYear = inst.selectedYear = inst.currentYear = newDate.getFullYear();\r\n\t\tif ((origMonth !== inst.selectedMonth || origYear !== inst.selectedYear) && !noChange) {\r\n\t\t\tthis._notifyChange(inst);\r\n\t\t}\r\n\t\tthis._adjustInstDate(inst);\r\n\t\tif (inst.input) {\r\n\t\t\tinst.input.val(clear ? \"\" : this._formatDate(inst));\r\n\t\t}\r\n\t},\r\n\r\n\t/* Retrieve the date(s) directly. */\r\n\t_getDate: function(inst) {\r\n\t\tvar startDate = (!inst.currentYear || (inst.input && inst.input.val() === \"\") ? null :\r\n\t\t\tthis._daylightSavingAdjust(new Date(\r\n\t\t\tinst.currentYear, inst.currentMonth, inst.currentDay)));\r\n\t\t\treturn startDate;\r\n\t},\r\n\r\n\t/* Attach the onxxx handlers.  These are declared statically so\r\n\t * they work with static code transformers like Caja.\r\n\t */\r\n\t_attachHandlers: function(inst) {\r\n\t\tvar stepMonths = this._get(inst, \"stepMonths\"),\r\n\t\t\tid = \"#\" + inst.id.replace( /\\\\\\\\/g, \"\\\\\" );\r\n\t\tinst.dpDiv.find(\"[data-handler]\").map(function () {\r\n\t\t\tvar handler = {\r\n\t\t\t\tprev: function () {\r\n\t\t\t\t\twindow[\"DP_jQuery_\" + dpuuid].datepicker._adjustDate(id, -stepMonths, \"M\");\r\n\t\t\t\t},\r\n\t\t\t\tnext: function () {\r\n\t\t\t\t\twindow[\"DP_jQuery_\" + dpuuid].datepicker._adjustDate(id, +stepMonths, \"M\");\r\n\t\t\t\t},\r\n\t\t\t\thide: function () {\r\n\t\t\t\t\twindow[\"DP_jQuery_\" + dpuuid].datepicker._hideDatepicker();\r\n\t\t\t\t},\r\n\t\t\t\ttoday: function () {\r\n\t\t\t\t\twindow[\"DP_jQuery_\" + dpuuid].datepicker._gotoToday(id);\r\n\t\t\t\t},\r\n\t\t\t\tselectDay: function () {\r\n\t\t\t\t\twindow[\"DP_jQuery_\" + dpuuid].datepicker._selectDay(id, +this.getAttribute(\"data-month\"), +this.getAttribute(\"data-year\"), this);\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t},\r\n\t\t\t\tselectMonth: function () {\r\n\t\t\t\t\twindow[\"DP_jQuery_\" + dpuuid].datepicker._selectMonthYear(id, this, \"M\");\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t},\r\n\t\t\t\tselectYear: function () {\r\n\t\t\t\t\twindow[\"DP_jQuery_\" + dpuuid].datepicker._selectMonthYear(id, this, \"Y\");\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t\t$(this).bind(this.getAttribute(\"data-event\"), handler[this.getAttribute(\"data-handler\")]);\r\n\t\t});\r\n\t},\r\n\r\n\t/* Generate the HTML for the current state of the date picker. */\r\n\t_generateHTML: function(inst) {\r\n\t\tvar maxDraw, prevText, prev, nextText, next, currentText, gotoDate,\r\n\t\t\tcontrols, buttonPanel, firstDay, showWeek, dayNames, dayNamesMin,\r\n\t\t\tmonthNames, monthNamesShort, beforeShowDay, showOtherMonths,\r\n\t\t\tselectOtherMonths, defaultDate, html, dow, row, group, col, selectedDate,\r\n\t\t\tcornerClass, calender, thead, day, daysInMonth, leadDays, curRows, numRows,\r\n\t\t\tprintDate, dRow, tbody, daySettings, otherMonth, unselectable,\r\n\t\t\ttempDate = new Date(),\r\n\t\t\ttoday = this._daylightSavingAdjust(\r\n\t\t\t\tnew Date(tempDate.getFullYear(), tempDate.getMonth(), tempDate.getDate())), // clear time\r\n\t\t\tisRTL = this._get(inst, \"isRTL\"),\r\n\t\t\tshowButtonPanel = this._get(inst, \"showButtonPanel\"),\r\n\t\t\thideIfNoPrevNext = this._get(inst, \"hideIfNoPrevNext\"),\r\n\t\t\tnavigationAsDateFormat = this._get(inst, \"navigationAsDateFormat\"),\r\n\t\t\tnumMonths = this._getNumberOfMonths(inst),\r\n\t\t\tshowCurrentAtPos = this._get(inst, \"showCurrentAtPos\"),\r\n\t\t\tstepMonths = this._get(inst, \"stepMonths\"),\r\n\t\t\tisMultiMonth = (numMonths[0] !== 1 || numMonths[1] !== 1),\r\n\t\t\tcurrentDate = this._daylightSavingAdjust((!inst.currentDay ? new Date(9999, 9, 9) :\r\n\t\t\t\tnew Date(inst.currentYear, inst.currentMonth, inst.currentDay))),\r\n\t\t\tminDate = this._getMinMaxDate(inst, \"min\"),\r\n\t\t\tmaxDate = this._getMinMaxDate(inst, \"max\"),\r\n\t\t\tdrawMonth = inst.drawMonth - showCurrentAtPos,\r\n\t\t\tdrawYear = inst.drawYear;\r\n\r\n\t\tif (drawMonth < 0) {\r\n\t\t\tdrawMonth += 12;\r\n\t\t\tdrawYear--;\r\n\t\t}\r\n\t\tif (maxDate) {\r\n\t\t\tmaxDraw = this._daylightSavingAdjust(new Date(maxDate.getFullYear(),\r\n\t\t\t\tmaxDate.getMonth() - (numMonths[0] * numMonths[1]) + 1, maxDate.getDate()));\r\n\t\t\tmaxDraw = (minDate && maxDraw < minDate ? minDate : maxDraw);\r\n\t\t\twhile (this._daylightSavingAdjust(new Date(drawYear, drawMonth, 1)) > maxDraw) {\r\n\t\t\t\tdrawMonth--;\r\n\t\t\t\tif (drawMonth < 0) {\r\n\t\t\t\t\tdrawMonth = 11;\r\n\t\t\t\t\tdrawYear--;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tinst.drawMonth = drawMonth;\r\n\t\tinst.drawYear = drawYear;\r\n\r\n\t\tprevText = this._get(inst, \"prevText\");\r\n\t\tprevText = (!navigationAsDateFormat ? prevText : this.formatDate(prevText,\r\n\t\t\tthis._daylightSavingAdjust(new Date(drawYear, drawMonth - stepMonths, 1)),\r\n\t\t\tthis._getFormatConfig(inst)));\r\n\r\n\t\tprev = (this._canAdjustMonth(inst, -1, drawYear, drawMonth) ?\r\n\t\t\t\"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click'\" +\r\n\t\t\t\" title='\" + prevText + \"'><span class='ui-icon ui-icon-circle-triangle-\" + ( isRTL ? \"e\" : \"w\") + \"'>\" + prevText + \"</span></a>\" :\r\n\t\t\t(hideIfNoPrevNext ? \"\" : \"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='\"+ prevText +\"'><span class='ui-icon ui-icon-circle-triangle-\" + ( isRTL ? \"e\" : \"w\") + \"'>\" + prevText + \"</span></a>\"));\r\n\r\n\t\tnextText = this._get(inst, \"nextText\");\r\n\t\tnextText = (!navigationAsDateFormat ? nextText : this.formatDate(nextText,\r\n\t\t\tthis._daylightSavingAdjust(new Date(drawYear, drawMonth + stepMonths, 1)),\r\n\t\t\tthis._getFormatConfig(inst)));\r\n\r\n\t\tnext = (this._canAdjustMonth(inst, +1, drawYear, drawMonth) ?\r\n\t\t\t\"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click'\" +\r\n\t\t\t\" title='\" + nextText + \"'><span class='ui-icon ui-icon-circle-triangle-\" + ( isRTL ? \"w\" : \"e\") + \"'>\" + nextText + \"</span></a>\" :\r\n\t\t\t(hideIfNoPrevNext ? \"\" : \"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='\"+ nextText + \"'><span class='ui-icon ui-icon-circle-triangle-\" + ( isRTL ? \"w\" : \"e\") + \"'>\" + nextText + \"</span></a>\"));\r\n\r\n\t\tcurrentText = this._get(inst, \"currentText\");\r\n\t\tgotoDate = (this._get(inst, \"gotoCurrent\") && inst.currentDay ? currentDate : today);\r\n\t\tcurrentText = (!navigationAsDateFormat ? currentText :\r\n\t\t\tthis.formatDate(currentText, gotoDate, this._getFormatConfig(inst)));\r\n\r\n\t\tcontrols = (!inst.inline ? \"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>\" +\r\n\t\t\tthis._get(inst, \"closeText\") + \"</button>\" : \"\");\r\n\r\n\t\tbuttonPanel = (showButtonPanel) ? \"<div class='ui-datepicker-buttonpane ui-widget-content'>\" + (isRTL ? controls : \"\") +\r\n\t\t\t(this._isInRange(inst, gotoDate) ? \"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'\" +\r\n\t\t\t\">\" + currentText + \"</button>\" : \"\") + (isRTL ? \"\" : controls) + \"</div>\" : \"\";\r\n\r\n\t\tfirstDay = parseInt(this._get(inst, \"firstDay\"),10);\r\n\t\tfirstDay = (isNaN(firstDay) ? 0 : firstDay);\r\n\r\n\t\tshowWeek = this._get(inst, \"showWeek\");\r\n\t\tdayNames = this._get(inst, \"dayNames\");\r\n\t\tdayNamesMin = this._get(inst, \"dayNamesMin\");\r\n\t\tmonthNames = this._get(inst, \"monthNames\");\r\n\t\tmonthNamesShort = this._get(inst, \"monthNamesShort\");\r\n\t\tbeforeShowDay = this._get(inst, \"beforeShowDay\");\r\n\t\tshowOtherMonths = this._get(inst, \"showOtherMonths\");\r\n\t\tselectOtherMonths = this._get(inst, \"selectOtherMonths\");\r\n\t\tdefaultDate = this._getDefaultDate(inst);\r\n\t\thtml = \"\";\r\n\t\tdow;\r\n\t\tfor (row = 0; row < numMonths[0]; row++) {\r\n\t\t\tgroup = \"\";\r\n\t\t\tthis.maxRows = 4;\r\n\t\t\tfor (col = 0; col < numMonths[1]; col++) {\r\n\t\t\t\tselectedDate = this._daylightSavingAdjust(new Date(drawYear, drawMonth, inst.selectedDay));\r\n\t\t\t\tcornerClass = \" ui-corner-all\";\r\n\t\t\t\tcalender = \"\";\r\n\t\t\t\tif (isMultiMonth) {\r\n\t\t\t\t\tcalender += \"<div class='ui-datepicker-group\";\r\n\t\t\t\t\tif (numMonths[1] > 1) {\r\n\t\t\t\t\t\tswitch (col) {\r\n\t\t\t\t\t\t\tcase 0: calender += \" ui-datepicker-group-first\";\r\n\t\t\t\t\t\t\t\tcornerClass = \" ui-corner-\" + (isRTL ? \"right\" : \"left\"); break;\r\n\t\t\t\t\t\t\tcase numMonths[1]-1: calender += \" ui-datepicker-group-last\";\r\n\t\t\t\t\t\t\t\tcornerClass = \" ui-corner-\" + (isRTL ? \"left\" : \"right\"); break;\r\n\t\t\t\t\t\t\tdefault: calender += \" ui-datepicker-group-middle\"; cornerClass = \"\"; break;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcalender += \"'>\";\r\n\t\t\t\t}\r\n\t\t\t\tcalender += \"<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix\" + cornerClass + \"'>\" +\r\n\t\t\t\t\t(/all|left/.test(cornerClass) && row === 0 ? (isRTL ? next : prev) : \"\") +\r\n\t\t\t\t\t(/all|right/.test(cornerClass) && row === 0 ? (isRTL ? prev : next) : \"\") +\r\n\t\t\t\t\tthis._generateMonthYearHeader(inst, drawMonth, drawYear, minDate, maxDate,\r\n\t\t\t\t\trow > 0 || col > 0, monthNames, monthNamesShort) + // draw month headers\r\n\t\t\t\t\t\"</div><table class='ui-datepicker-calendar'><thead>\" +\r\n\t\t\t\t\t\"<tr>\";\r\n\t\t\t\tthead = (showWeek ? \"<th class='ui-datepicker-week-col'>\" + this._get(inst, \"weekHeader\") + \"</th>\" : \"\");\r\n\t\t\t\tfor (dow = 0; dow < 7; dow++) { // days of the week\r\n\t\t\t\t\tday = (dow + firstDay) % 7;\r\n\t\t\t\t\tthead += \"<th\" + ((dow + firstDay + 6) % 7 >= 5 ? \" class='ui-datepicker-week-end'\" : \"\") + \">\" +\r\n\t\t\t\t\t\t\"<span title='\" + dayNames[day] + \"'>\" + dayNamesMin[day] + \"</span></th>\";\r\n\t\t\t\t}\r\n\t\t\t\tcalender += thead + \"</tr></thead><tbody>\";\r\n\t\t\t\tdaysInMonth = this._getDaysInMonth(drawYear, drawMonth);\r\n\t\t\t\tif (drawYear === inst.selectedYear && drawMonth === inst.selectedMonth) {\r\n\t\t\t\t\tinst.selectedDay = Math.min(inst.selectedDay, daysInMonth);\r\n\t\t\t\t}\r\n\t\t\t\tleadDays = (this._getFirstDayOfMonth(drawYear, drawMonth) - firstDay + 7) % 7;\r\n\t\t\t\tcurRows = Math.ceil((leadDays + daysInMonth) / 7); // calculate the number of rows to generate\r\n\t\t\t\tnumRows = (isMultiMonth ? this.maxRows > curRows ? this.maxRows : curRows : curRows); //If multiple months, use the higher number of rows (see #7043)\r\n\t\t\t\tthis.maxRows = numRows;\r\n\t\t\t\tprintDate = this._daylightSavingAdjust(new Date(drawYear, drawMonth, 1 - leadDays));\r\n\t\t\t\tfor (dRow = 0; dRow < numRows; dRow++) { // create date picker rows\r\n\t\t\t\t\tcalender += \"<tr>\";\r\n\t\t\t\t\ttbody = (!showWeek ? \"\" : \"<td class='ui-datepicker-week-col'>\" +\r\n\t\t\t\t\t\tthis._get(inst, \"calculateWeek\")(printDate) + \"</td>\");\r\n\t\t\t\t\tfor (dow = 0; dow < 7; dow++) { // create date picker days\r\n\t\t\t\t\t\tdaySettings = (beforeShowDay ?\r\n\t\t\t\t\t\t\tbeforeShowDay.apply((inst.input ? inst.input[0] : null), [printDate]) : [true, \"\"]);\r\n\t\t\t\t\t\totherMonth = (printDate.getMonth() !== drawMonth);\r\n\t\t\t\t\t\tunselectable = (otherMonth && !selectOtherMonths) || !daySettings[0] ||\r\n\t\t\t\t\t\t\t(minDate && printDate < minDate) || (maxDate && printDate > maxDate);\r\n\t\t\t\t\t\ttbody += \"<td class='\" +\r\n\t\t\t\t\t\t\t((dow + firstDay + 6) % 7 >= 5 ? \" ui-datepicker-week-end\" : \"\") + // highlight weekends\r\n\t\t\t\t\t\t\t(otherMonth ? \" ui-datepicker-other-month\" : \"\") + // highlight days from other months\r\n\t\t\t\t\t\t\t((printDate.getTime() === selectedDate.getTime() && drawMonth === inst.selectedMonth && inst._keyEvent) || // user pressed key\r\n\t\t\t\t\t\t\t(defaultDate.getTime() === printDate.getTime() && defaultDate.getTime() === selectedDate.getTime()) ?\r\n\t\t\t\t\t\t\t// or defaultDate is current printedDate and defaultDate is selectedDate\r\n\t\t\t\t\t\t\t\" \" + this._dayOverClass : \"\") + // highlight selected day\r\n\t\t\t\t\t\t\t(unselectable ? \" \" + this._unselectableClass + \" ui-state-disabled\": \"\") +  // highlight unselectable days\r\n\t\t\t\t\t\t\t(otherMonth && !showOtherMonths ? \"\" : \" \" + daySettings[1] + // highlight custom dates\r\n\t\t\t\t\t\t\t(printDate.getTime() === currentDate.getTime() ? \" \" + this._currentClass : \"\") + // highlight selected day\r\n\t\t\t\t\t\t\t(printDate.getTime() === today.getTime() ? \" ui-datepicker-today\" : \"\")) + \"'\" + // highlight today (if different)\r\n\t\t\t\t\t\t\t((!otherMonth || showOtherMonths) && daySettings[2] ? \" title='\" + daySettings[2].replace(/'/g, \"&#39;\") + \"'\" : \"\") + // cell title\r\n\t\t\t\t\t\t\t(unselectable ? \"\" : \" data-handler='selectDay' data-event='click' data-month='\" + printDate.getMonth() + \"' data-year='\" + printDate.getFullYear() + \"'\") + \">\" + // actions\r\n\t\t\t\t\t\t\t(otherMonth && !showOtherMonths ? \"&#xa0;\" : // display for other months\r\n\t\t\t\t\t\t\t(unselectable ? \"<span class='ui-state-default'>\" + printDate.getDate() + \"</span>\" : \"<a class='ui-state-default\" +\r\n\t\t\t\t\t\t\t(printDate.getTime() === today.getTime() ? \" ui-state-highlight\" : \"\") +\r\n\t\t\t\t\t\t\t(printDate.getTime() === currentDate.getTime() ? \" ui-state-active\" : \"\") + // highlight selected day\r\n\t\t\t\t\t\t\t(otherMonth ? \" ui-priority-secondary\" : \"\") + // distinguish dates from other months\r\n\t\t\t\t\t\t\t\"' href='#'>\" + printDate.getDate() + \"</a>\")) + \"</td>\"; // display selectable date\r\n\t\t\t\t\t\tprintDate.setDate(printDate.getDate() + 1);\r\n\t\t\t\t\t\tprintDate = this._daylightSavingAdjust(printDate);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcalender += tbody + \"</tr>\";\r\n\t\t\t\t}\r\n\t\t\t\tdrawMonth++;\r\n\t\t\t\tif (drawMonth > 11) {\r\n\t\t\t\t\tdrawMonth = 0;\r\n\t\t\t\t\tdrawYear++;\r\n\t\t\t\t}\r\n\t\t\t\tcalender += \"</tbody></table>\" + (isMultiMonth ? \"</div>\" +\r\n\t\t\t\t\t\t\t((numMonths[0] > 0 && col === numMonths[1]-1) ? \"<div class='ui-datepicker-row-break'></div>\" : \"\") : \"\");\r\n\t\t\t\tgroup += calender;\r\n\t\t\t}\r\n\t\t\thtml += group;\r\n\t\t}\r\n\t\thtml += buttonPanel;\r\n\t\tinst._keyEvent = false;\r\n\t\treturn html;\r\n\t},\r\n\r\n\t/* Generate the month and year header. */\r\n\t_generateMonthYearHeader: function(inst, drawMonth, drawYear, minDate, maxDate,\r\n\t\t\tsecondary, monthNames, monthNamesShort) {\r\n\r\n\t\tvar inMinYear, inMaxYear, month, years, thisYear, determineYear, year, endYear,\r\n\t\t\tchangeMonth = this._get(inst, \"changeMonth\"),\r\n\t\t\tchangeYear = this._get(inst, \"changeYear\"),\r\n\t\t\tshowMonthAfterYear = this._get(inst, \"showMonthAfterYear\"),\r\n\t\t\thtml = \"<div class='ui-datepicker-title'>\",\r\n\t\t\tmonthHtml = \"\";\r\n\r\n\t\t// month selection\r\n\t\tif (secondary || !changeMonth) {\r\n\t\t\tmonthHtml += \"<span class='ui-datepicker-month'>\" + monthNames[drawMonth] + \"</span>\";\r\n\t\t} else {\r\n\t\t\tinMinYear = (minDate && minDate.getFullYear() === drawYear);\r\n\t\t\tinMaxYear = (maxDate && maxDate.getFullYear() === drawYear);\r\n\t\t\tmonthHtml += \"<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>\";\r\n\t\t\tfor ( month = 0; month < 12; month++) {\r\n\t\t\t\tif ((!inMinYear || month >= minDate.getMonth()) && (!inMaxYear || month <= maxDate.getMonth())) {\r\n\t\t\t\t\tmonthHtml += \"<option value='\" + month + \"'\" +\r\n\t\t\t\t\t\t(month === drawMonth ? \" selected='selected'\" : \"\") +\r\n\t\t\t\t\t\t\">\" + monthNamesShort[month] + \"</option>\";\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tmonthHtml += \"</select>\";\r\n\t\t}\r\n\r\n\t\tif (!showMonthAfterYear) {\r\n\t\t\thtml += monthHtml + (secondary || !(changeMonth && changeYear) ? \"&#xa0;\" : \"\");\r\n\t\t}\r\n\r\n\t\t// year selection\r\n\t\tif ( !inst.yearshtml ) {\r\n\t\t\tinst.yearshtml = \"\";\r\n\t\t\tif (secondary || !changeYear) {\r\n\t\t\t\thtml += \"<span class='ui-datepicker-year'>\" + drawYear + \"</span>\";\r\n\t\t\t} else {\r\n\t\t\t\t// determine range of years to display\r\n\t\t\t\tyears = this._get(inst, \"yearRange\").split(\":\");\r\n\t\t\t\tthisYear = new Date().getFullYear();\r\n\t\t\t\tdetermineYear = function(value) {\r\n\t\t\t\t\tvar year = (value.match(/c[+\\-].*/) ? drawYear + parseInt(value.substring(1), 10) :\r\n\t\t\t\t\t\t(value.match(/[+\\-].*/) ? thisYear + parseInt(value, 10) :\r\n\t\t\t\t\t\tparseInt(value, 10)));\r\n\t\t\t\t\treturn (isNaN(year) ? thisYear : year);\r\n\t\t\t\t};\r\n\t\t\t\tyear = determineYear(years[0]);\r\n\t\t\t\tendYear = Math.max(year, determineYear(years[1] || \"\"));\r\n\t\t\t\tyear = (minDate ? Math.max(year, minDate.getFullYear()) : year);\r\n\t\t\t\tendYear = (maxDate ? Math.min(endYear, maxDate.getFullYear()) : endYear);\r\n\t\t\t\tinst.yearshtml += \"<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>\";\r\n\t\t\t\tfor (; year <= endYear; year++) {\r\n\t\t\t\t\tinst.yearshtml += \"<option value='\" + year + \"'\" +\r\n\t\t\t\t\t\t(year === drawYear ? \" selected='selected'\" : \"\") +\r\n\t\t\t\t\t\t\">\" + year + \"</option>\";\r\n\t\t\t\t}\r\n\t\t\t\tinst.yearshtml += \"</select>\";\r\n\r\n\t\t\t\thtml += inst.yearshtml;\r\n\t\t\t\tinst.yearshtml = null;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\thtml += this._get(inst, \"yearSuffix\");\r\n\t\tif (showMonthAfterYear) {\r\n\t\t\thtml += (secondary || !(changeMonth && changeYear) ? \"&#xa0;\" : \"\") + monthHtml;\r\n\t\t}\r\n\t\thtml += \"</div>\"; // Close datepicker_header\r\n\t\treturn html;\r\n\t},\r\n\r\n\t/* Adjust one of the date sub-fields. */\r\n\t_adjustInstDate: function(inst, offset, period) {\r\n\t\tvar year = inst.drawYear + (period === \"Y\" ? offset : 0),\r\n\t\t\tmonth = inst.drawMonth + (period === \"M\" ? offset : 0),\r\n\t\t\tday = Math.min(inst.selectedDay, this._getDaysInMonth(year, month)) + (period === \"D\" ? offset : 0),\r\n\t\t\tdate = this._restrictMinMax(inst, this._daylightSavingAdjust(new Date(year, month, day)));\r\n\r\n\t\tinst.selectedDay = date.getDate();\r\n\t\tinst.drawMonth = inst.selectedMonth = date.getMonth();\r\n\t\tinst.drawYear = inst.selectedYear = date.getFullYear();\r\n\t\tif (period === \"M\" || period === \"Y\") {\r\n\t\t\tthis._notifyChange(inst);\r\n\t\t}\r\n\t},\r\n\r\n\t/* Ensure a date is within any min/max bounds. */\r\n\t_restrictMinMax: function(inst, date) {\r\n\t\tvar minDate = this._getMinMaxDate(inst, \"min\"),\r\n\t\t\tmaxDate = this._getMinMaxDate(inst, \"max\"),\r\n\t\t\tnewDate = (minDate && date < minDate ? minDate : date);\r\n\t\treturn (maxDate && newDate > maxDate ? maxDate : newDate);\r\n\t},\r\n\r\n\t/* Notify change of month/year. */\r\n\t_notifyChange: function(inst) {\r\n\t\tvar onChange = this._get(inst, \"onChangeMonthYear\");\r\n\t\tif (onChange) {\r\n\t\t\tonChange.apply((inst.input ? inst.input[0] : null),\r\n\t\t\t\t[inst.selectedYear, inst.selectedMonth + 1, inst]);\r\n\t\t}\r\n\t},\r\n\r\n\t/* Determine the number of months to show. */\r\n\t_getNumberOfMonths: function(inst) {\r\n\t\tvar numMonths = this._get(inst, \"numberOfMonths\");\r\n\t\treturn (numMonths == null ? [1, 1] : (typeof numMonths === \"number\" ? [1, numMonths] : numMonths));\r\n\t},\r\n\r\n\t/* Determine the current maximum date - ensure no time components are set. */\r\n\t_getMinMaxDate: function(inst, minMax) {\r\n\t\treturn this._determineDate(inst, this._get(inst, minMax + \"Date\"), null);\r\n\t},\r\n\r\n\t/* Find the number of days in a given month. */\r\n\t_getDaysInMonth: function(year, month) {\r\n\t\treturn 32 - this._daylightSavingAdjust(new Date(year, month, 32)).getDate();\r\n\t},\r\n\r\n\t/* Find the day of the week of the first of a month. */\r\n\t_getFirstDayOfMonth: function(year, month) {\r\n\t\treturn new Date(year, month, 1).getDay();\r\n\t},\r\n\r\n\t/* Determines if we should allow a \"next/prev\" month display change. */\r\n\t_canAdjustMonth: function(inst, offset, curYear, curMonth) {\r\n\t\tvar numMonths = this._getNumberOfMonths(inst),\r\n\t\t\tdate = this._daylightSavingAdjust(new Date(curYear,\r\n\t\t\tcurMonth + (offset < 0 ? offset : numMonths[0] * numMonths[1]), 1));\r\n\r\n\t\tif (offset < 0) {\r\n\t\t\tdate.setDate(this._getDaysInMonth(date.getFullYear(), date.getMonth()));\r\n\t\t}\r\n\t\treturn this._isInRange(inst, date);\r\n\t},\r\n\r\n\t/* Is the given date in the accepted range? */\r\n\t_isInRange: function(inst, date) {\r\n\t\tvar yearSplit, currentYear,\r\n\t\t\tminDate = this._getMinMaxDate(inst, \"min\"),\r\n\t\t\tmaxDate = this._getMinMaxDate(inst, \"max\"),\r\n\t\t\tminYear = null,\r\n\t\t\tmaxYear = null,\r\n\t\t\tyears = this._get(inst, \"yearRange\");\r\n\t\t\tif (years){\r\n\t\t\t\tyearSplit = years.split(\":\");\r\n\t\t\t\tcurrentYear = new Date().getFullYear();\r\n\t\t\t\tminYear = parseInt(yearSplit[0], 10);\r\n\t\t\t\tmaxYear = parseInt(yearSplit[1], 10);\r\n\t\t\t\tif ( yearSplit[0].match(/[+\\-].*/) ) {\r\n\t\t\t\t\tminYear += currentYear;\r\n\t\t\t\t}\r\n\t\t\t\tif ( yearSplit[1].match(/[+\\-].*/) ) {\r\n\t\t\t\t\tmaxYear += currentYear;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\treturn ((!minDate || date.getTime() >= minDate.getTime()) &&\r\n\t\t\t(!maxDate || date.getTime() <= maxDate.getTime()) &&\r\n\t\t\t(!minYear || date.getFullYear() >= minYear) &&\r\n\t\t\t(!maxYear || date.getFullYear() <= maxYear));\r\n\t},\r\n\r\n\t/* Provide the configuration settings for formatting/parsing. */\r\n\t_getFormatConfig: function(inst) {\r\n\t\tvar shortYearCutoff = this._get(inst, \"shortYearCutoff\");\r\n\t\tshortYearCutoff = (typeof shortYearCutoff !== \"string\" ? shortYearCutoff :\r\n\t\t\tnew Date().getFullYear() % 100 + parseInt(shortYearCutoff, 10));\r\n\t\treturn {shortYearCutoff: shortYearCutoff,\r\n\t\t\tdayNamesShort: this._get(inst, \"dayNamesShort\"), dayNames: this._get(inst, \"dayNames\"),\r\n\t\t\tmonthNamesShort: this._get(inst, \"monthNamesShort\"), monthNames: this._get(inst, \"monthNames\")};\r\n\t},\r\n\r\n\t/* Format the given date for display. */\r\n\t_formatDate: function(inst, day, month, year) {\r\n\t\tif (!day) {\r\n\t\t\tinst.currentDay = inst.selectedDay;\r\n\t\t\tinst.currentMonth = inst.selectedMonth;\r\n\t\t\tinst.currentYear = inst.selectedYear;\r\n\t\t}\r\n\t\tvar date = (day ? (typeof day === \"object\" ? day :\r\n\t\t\tthis._daylightSavingAdjust(new Date(year, month, day))) :\r\n\t\t\tthis._daylightSavingAdjust(new Date(inst.currentYear, inst.currentMonth, inst.currentDay)));\r\n\t\treturn this.formatDate(this._get(inst, \"dateFormat\"), date, this._getFormatConfig(inst));\r\n\t}\r\n});\r\n\r\n/*\r\n * Bind hover events for datepicker elements.\r\n * Done via delegate so the binding only occurs once in the lifetime of the parent div.\r\n * Global instActive, set by _updateDatepicker allows the handlers to find their way back to the active picker.\r\n */\r\nfunction bindHover(dpDiv) {\r\n\tvar selector = \"button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a\";\r\n\treturn dpDiv.delegate(selector, \"mouseout\", function() {\r\n\t\t\t$(this).removeClass(\"ui-state-hover\");\r\n\t\t\tif (this.className.indexOf(\"ui-datepicker-prev\") !== -1) {\r\n\t\t\t\t$(this).removeClass(\"ui-datepicker-prev-hover\");\r\n\t\t\t}\r\n\t\t\tif (this.className.indexOf(\"ui-datepicker-next\") !== -1) {\r\n\t\t\t\t$(this).removeClass(\"ui-datepicker-next-hover\");\r\n\t\t\t}\r\n\t\t})\r\n\t\t.delegate(selector, \"mouseover\", function(){\r\n\t\t\tif (!$.datepicker._isDisabledDatepicker( instActive.inline ? dpDiv.parent()[0] : instActive.input[0])) {\r\n\t\t\t\t$(this).parents(\".ui-datepicker-calendar\").find(\"a\").removeClass(\"ui-state-hover\");\r\n\t\t\t\t$(this).addClass(\"ui-state-hover\");\r\n\t\t\t\tif (this.className.indexOf(\"ui-datepicker-prev\") !== -1) {\r\n\t\t\t\t\t$(this).addClass(\"ui-datepicker-prev-hover\");\r\n\t\t\t\t}\r\n\t\t\t\tif (this.className.indexOf(\"ui-datepicker-next\") !== -1) {\r\n\t\t\t\t\t$(this).addClass(\"ui-datepicker-next-hover\");\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n}\r\n\r\n/* jQuery extend now ignores nulls! */\r\nfunction extendRemove(target, props) {\r\n\t$.extend(target, props);\r\n\tfor (var name in props) {\r\n\t\tif (props[name] == null) {\r\n\t\t\ttarget[name] = props[name];\r\n\t\t}\r\n\t}\r\n\treturn target;\r\n}\r\n\r\n/* Invoke the datepicker functionality.\r\n   @param  options  string - a command, optionally followed by additional parameters or\r\n\t\t\t\t\tObject - settings for attaching new datepicker functionality\r\n   @return  jQuery object */\r\n$.fn.datepicker = function(options){\r\n\r\n\t/* Verify an empty collection wasn't passed - Fixes #6976 */\r\n\tif ( !this.length ) {\r\n\t\treturn this;\r\n\t}\r\n\r\n\t/* Initialise the date picker. */\r\n\tif (!$.datepicker.initialized) {\r\n\t\t$(document).mousedown($.datepicker._checkExternalClick);\r\n\t\t$.datepicker.initialized = true;\r\n\t}\r\n\r\n\t/* Append datepicker main container to body if not exist. */\r\n\tif ($(\"#\"+$.datepicker._mainDivId).length === 0) {\r\n\t\t$(\"body\").append($.datepicker.dpDiv);\r\n\t}\r\n\r\n\tvar otherArgs = Array.prototype.slice.call(arguments, 1);\r\n\tif (typeof options === \"string\" && (options === \"isDisabled\" || options === \"getDate\" || options === \"widget\")) {\r\n\t\treturn $.datepicker[\"_\" + options + \"Datepicker\"].\r\n\t\t\tapply($.datepicker, [this[0]].concat(otherArgs));\r\n\t}\r\n\tif (options === \"option\" && arguments.length === 2 && typeof arguments[1] === \"string\") {\r\n\t\treturn $.datepicker[\"_\" + options + \"Datepicker\"].\r\n\t\t\tapply($.datepicker, [this[0]].concat(otherArgs));\r\n\t}\r\n\treturn this.each(function() {\r\n\t\ttypeof options === \"string\" ?\r\n\t\t\t$.datepicker[\"_\" + options + \"Datepicker\"].\r\n\t\t\t\tapply($.datepicker, [this].concat(otherArgs)) :\r\n\t\t\t$.datepicker._attachDatepicker(this, options);\r\n\t});\r\n};\r\n\r\n$.datepicker = new Datepicker(); // singleton instance\r\n$.datepicker.initialized = false;\r\n$.datepicker.uuid = new Date().getTime();\r\n$.datepicker.version = \"1.10.2\";\r\n\r\n// Workaround for #4055\r\n// Add another global to avoid noConflict issues with inline event handlers\r\nwindow[\"DP_jQuery_\" + dpuuid] = $;\r\n\r\n})(jQuery);\r\n\r\n(function( $, undefined ) {\r\n\r\nvar sizeRelatedOptions = {\r\n\t\tbuttons: true,\r\n\t\theight: true,\r\n\t\tmaxHeight: true,\r\n\t\tmaxWidth: true,\r\n\t\tminHeight: true,\r\n\t\tminWidth: true,\r\n\t\twidth: true\r\n\t},\r\n\tresizableRelatedOptions = {\r\n\t\tmaxHeight: true,\r\n\t\tmaxWidth: true,\r\n\t\tminHeight: true,\r\n\t\tminWidth: true\r\n\t};\r\n\r\n$.widget( \"ui.dialog\", {\r\n\tversion: \"1.10.2\",\r\n\toptions: {\r\n\t\tappendTo: \"body\",\r\n\t\tautoOpen: true,\r\n\t\tbuttons: [],\r\n\t\tcloseOnEscape: true,\r\n\t\tcloseText: \"close\",\r\n\t\tdialogClass: \"\",\r\n\t\tdraggable: true,\r\n\t\thide: null,\r\n\t\theight: \"auto\",\r\n\t\tmaxHeight: null,\r\n\t\tmaxWidth: null,\r\n\t\tminHeight: 150,\r\n\t\tminWidth: 150,\r\n\t\tmodal: false,\r\n\t\tposition: {\r\n\t\t\tmy: \"center\",\r\n\t\t\tat: \"center\",\r\n\t\t\tof: window,\r\n\t\t\tcollision: \"fit\",\r\n\t\t\t// Ensure the titlebar is always visible\r\n\t\t\tusing: function( pos ) {\r\n\t\t\t\tvar topOffset = $( this ).css( pos ).offset().top;\r\n\t\t\t\tif ( topOffset < 0 ) {\r\n\t\t\t\t\t$( this ).css( \"top\", pos.top - topOffset );\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tresizable: true,\r\n\t\tshow: null,\r\n\t\ttitle: null,\r\n\t\twidth: 300,\r\n\r\n\t\t// callbacks\r\n\t\tbeforeClose: null,\r\n\t\tclose: null,\r\n\t\tdrag: null,\r\n\t\tdragStart: null,\r\n\t\tdragStop: null,\r\n\t\tfocus: null,\r\n\t\topen: null,\r\n\t\tresize: null,\r\n\t\tresizeStart: null,\r\n\t\tresizeStop: null\r\n\t},\r\n\r\n\t_create: function() {\r\n\t\tthis.originalCss = {\r\n\t\t\tdisplay: this.element[0].style.display,\r\n\t\t\twidth: this.element[0].style.width,\r\n\t\t\tminHeight: this.element[0].style.minHeight,\r\n\t\t\tmaxHeight: this.element[0].style.maxHeight,\r\n\t\t\theight: this.element[0].style.height\r\n\t\t};\r\n\t\tthis.originalPosition = {\r\n\t\t\tparent: this.element.parent(),\r\n\t\t\tindex: this.element.parent().children().index( this.element )\r\n\t\t};\r\n\t\tthis.originalTitle = this.element.attr(\"title\");\r\n\t\tthis.options.title = this.options.title || this.originalTitle;\r\n\r\n\t\tthis._createWrapper();\r\n\r\n\t\tthis.element\r\n\t\t\t.show()\r\n\t\t\t.removeAttr(\"title\")\r\n\t\t\t.addClass(\"ui-dialog-content ui-widget-content\")\r\n\t\t\t.appendTo( this.uiDialog );\r\n\r\n\t\tthis._createTitlebar();\r\n\t\tthis._createButtonPane();\r\n\r\n\t\tif ( this.options.draggable && $.fn.draggable ) {\r\n\t\t\tthis._makeDraggable();\r\n\t\t}\r\n\t\tif ( this.options.resizable && $.fn.resizable ) {\r\n\t\t\tthis._makeResizable();\r\n\t\t}\r\n\r\n\t\tthis._isOpen = false;\r\n\t},\r\n\r\n\t_init: function() {\r\n\t\tif ( this.options.autoOpen ) {\r\n\t\t\tthis.open();\r\n\t\t}\r\n\t},\r\n\r\n\t_appendTo: function() {\r\n\t\tvar element = this.options.appendTo;\r\n\t\tif ( element && (element.jquery || element.nodeType) ) {\r\n\t\t\treturn $( element );\r\n\t\t}\r\n\t\treturn this.document.find( element || \"body\" ).eq( 0 );\r\n\t},\r\n\r\n\t_destroy: function() {\r\n\t\tvar next,\r\n\t\t\toriginalPosition = this.originalPosition;\r\n\r\n\t\tthis._destroyOverlay();\r\n\r\n\t\tthis.element\r\n\t\t\t.removeUniqueId()\r\n\t\t\t.removeClass(\"ui-dialog-content ui-widget-content\")\r\n\t\t\t.css( this.originalCss )\r\n\t\t\t// Without detaching first, the following becomes really slow\r\n\t\t\t.detach();\r\n\r\n\t\tthis.uiDialog.stop( true, true ).remove();\r\n\r\n\t\tif ( this.originalTitle ) {\r\n\t\t\tthis.element.attr( \"title\", this.originalTitle );\r\n\t\t}\r\n\r\n\t\tnext = originalPosition.parent.children().eq( originalPosition.index );\r\n\t\t// Don't try to place the dialog next to itself (#8613)\r\n\t\tif ( next.length && next[0] !== this.element[0] ) {\r\n\t\t\tnext.before( this.element );\r\n\t\t} else {\r\n\t\t\toriginalPosition.parent.append( this.element );\r\n\t\t}\r\n\t},\r\n\r\n\twidget: function() {\r\n\t\treturn this.uiDialog;\r\n\t},\r\n\r\n\tdisable: $.noop,\r\n\tenable: $.noop,\r\n\r\n\tclose: function( event ) {\r\n\t\tvar that = this;\r\n\r\n\t\tif ( !this._isOpen || this._trigger( \"beforeClose\", event ) === false ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tthis._isOpen = false;\r\n\t\tthis._destroyOverlay();\r\n\r\n\t\tif ( !this.opener.filter(\":focusable\").focus().length ) {\r\n\t\t\t// Hiding a focused element doesn't trigger blur in WebKit\r\n\t\t\t// so in case we have nothing to focus on, explicitly blur the active element\r\n\t\t\t// https://bugs.webkit.org/show_bug.cgi?id=47182\r\n\t\t\t$( this.document[0].activeElement ).blur();\r\n\t\t}\r\n\r\n\t\tthis._hide( this.uiDialog, this.options.hide, function() {\r\n\t\t\tthat._trigger( \"close\", event );\r\n\t\t});\r\n\t},\r\n\r\n\tisOpen: function() {\r\n\t\treturn this._isOpen;\r\n\t},\r\n\r\n\tmoveToTop: function() {\r\n\t\tthis._moveToTop();\r\n\t},\r\n\r\n\t_moveToTop: function( event, silent ) {\r\n\t\tvar moved = !!this.uiDialog.nextAll(\":visible\").insertBefore( this.uiDialog ).length;\r\n\t\tif ( moved && !silent ) {\r\n\t\t\tthis._trigger( \"focus\", event );\r\n\t\t}\r\n\t\treturn moved;\r\n\t},\r\n\r\n\topen: function() {\r\n\t\tvar that = this;\r\n\t\tif ( this._isOpen ) {\r\n\t\t\tif ( this._moveToTop() ) {\r\n\t\t\t\tthis._focusTabbable();\r\n\t\t\t}\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tthis._isOpen = true;\r\n\t\tthis.opener = $( this.document[0].activeElement );\r\n\r\n\t\tthis._size();\r\n\t\tthis._position();\r\n\t\tthis._createOverlay();\r\n\t\tthis._moveToTop( null, true );\r\n\t\tthis._show( this.uiDialog, this.options.show, function() {\r\n\t\t\tthat._focusTabbable();\r\n\t\t\tthat._trigger(\"focus\");\r\n\t\t});\r\n\r\n\t\tthis._trigger(\"open\");\r\n\t},\r\n\r\n\t_focusTabbable: function() {\r\n\t\t// Set focus to the first match:\r\n\t\t// 1. First element inside the dialog matching [autofocus]\r\n\t\t// 2. Tabbable element inside the content element\r\n\t\t// 3. Tabbable element inside the buttonpane\r\n\t\t// 4. The close button\r\n\t\t// 5. The dialog itself\r\n\t\tvar hasFocus = this.element.find(\"[autofocus]\");\r\n\t\tif ( !hasFocus.length ) {\r\n\t\t\thasFocus = this.element.find(\":tabbable\");\r\n\t\t}\r\n\t\tif ( !hasFocus.length ) {\r\n\t\t\thasFocus = this.uiDialogButtonPane.find(\":tabbable\");\r\n\t\t}\r\n\t\tif ( !hasFocus.length ) {\r\n\t\t\thasFocus = this.uiDialogTitlebarClose.filter(\":tabbable\");\r\n\t\t}\r\n\t\tif ( !hasFocus.length ) {\r\n\t\t\thasFocus = this.uiDialog;\r\n\t\t}\r\n\t\thasFocus.eq( 0 ).focus();\r\n\t},\r\n\r\n\t_keepFocus: function( event ) {\r\n\t\tfunction checkFocus() {\r\n\t\t\tvar activeElement = this.document[0].activeElement,\r\n\t\t\t\tisActive = this.uiDialog[0] === activeElement ||\r\n\t\t\t\t\t$.contains( this.uiDialog[0], activeElement );\r\n\t\t\tif ( !isActive ) {\r\n\t\t\t\tthis._focusTabbable();\r\n\t\t\t}\r\n\t\t}\r\n\t\tevent.preventDefault();\r\n\t\tcheckFocus.call( this );\r\n\t\t// support: IE\r\n\t\t// IE <= 8 doesn't prevent moving focus even with event.preventDefault()\r\n\t\t// so we check again later\r\n\t\tthis._delay( checkFocus );\r\n\t},\r\n\r\n\t_createWrapper: function() {\r\n\t\tthis.uiDialog = $(\"<div>\")\r\n\t\t\t.addClass( \"ui-dialog ui-widget ui-widget-content ui-corner-all ui-front \" +\r\n\t\t\t\tthis.options.dialogClass )\r\n\t\t\t.hide()\r\n\t\t\t.attr({\r\n\t\t\t\t// Setting tabIndex makes the div focusable\r\n\t\t\t\ttabIndex: -1,\r\n\t\t\t\trole: \"dialog\"\r\n\t\t\t})\r\n\t\t\t.appendTo( this._appendTo() );\r\n\r\n\t\tthis._on( this.uiDialog, {\r\n\t\t\tkeydown: function( event ) {\r\n\t\t\t\tif ( this.options.closeOnEscape && !event.isDefaultPrevented() && event.keyCode &&\r\n\t\t\t\t\t\tevent.keyCode === $.ui.keyCode.ESCAPE ) {\r\n\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t\tthis.close( event );\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// prevent tabbing out of dialogs\r\n\t\t\t\tif ( event.keyCode !== $.ui.keyCode.TAB ) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tvar tabbables = this.uiDialog.find(\":tabbable\"),\r\n\t\t\t\t\tfirst = tabbables.filter(\":first\"),\r\n\t\t\t\t\tlast  = tabbables.filter(\":last\");\r\n\r\n\t\t\t\tif ( ( event.target === last[0] || event.target === this.uiDialog[0] ) && !event.shiftKey ) {\r\n\t\t\t\t\tfirst.focus( 1 );\r\n\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t} else if ( ( event.target === first[0] || event.target === this.uiDialog[0] ) && event.shiftKey ) {\r\n\t\t\t\t\tlast.focus( 1 );\r\n\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tmousedown: function( event ) {\r\n\t\t\t\tif ( this._moveToTop( event ) ) {\r\n\t\t\t\t\tthis._focusTabbable();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t// We assume that any existing aria-describedby attribute means\r\n\t\t// that the dialog content is marked up properly\r\n\t\t// otherwise we brute force the content as the description\r\n\t\tif ( !this.element.find(\"[aria-describedby]\").length ) {\r\n\t\t\tthis.uiDialog.attr({\r\n\t\t\t\t\"aria-describedby\": this.element.uniqueId().attr(\"id\")\r\n\t\t\t});\r\n\t\t}\r\n\t},\r\n\r\n\t_createTitlebar: function() {\r\n\t\tvar uiDialogTitle;\r\n\r\n\t\tthis.uiDialogTitlebar = $(\"<div>\")\r\n\t\t\t.addClass(\"ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix\")\r\n\t\t\t.prependTo( this.uiDialog );\r\n\t\tthis._on( this.uiDialogTitlebar, {\r\n\t\t\tmousedown: function( event ) {\r\n\t\t\t\t// Don't prevent click on close button (#8838)\r\n\t\t\t\t// Focusing a dialog that is partially scrolled out of view\r\n\t\t\t\t// causes the browser to scroll it into view, preventing the click event\r\n\t\t\t\tif ( !$( event.target ).closest(\".ui-dialog-titlebar-close\") ) {\r\n\t\t\t\t\t// Dialog isn't getting focus when dragging (#8063)\r\n\t\t\t\t\tthis.uiDialog.focus();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tthis.uiDialogTitlebarClose = $(\"<button></button>\")\r\n\t\t\t.button({\r\n\t\t\t\tlabel: this.options.closeText,\r\n\t\t\t\ticons: {\r\n\t\t\t\t\tprimary: \"ui-icon-closethick\"\r\n\t\t\t\t},\r\n\t\t\t\ttext: false\r\n\t\t\t})\r\n\t\t\t.addClass(\"ui-dialog-titlebar-close\")\r\n\t\t\t.appendTo( this.uiDialogTitlebar );\r\n\t\tthis._on( this.uiDialogTitlebarClose, {\r\n\t\t\tclick: function( event ) {\r\n\t\t\t\tevent.preventDefault();\r\n\t\t\t\tthis.close( event );\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tuiDialogTitle = $(\"<span>\")\r\n\t\t\t.uniqueId()\r\n\t\t\t.addClass(\"ui-dialog-title\")\r\n\t\t\t.prependTo( this.uiDialogTitlebar );\r\n\t\tthis._title( uiDialogTitle );\r\n\r\n\t\tthis.uiDialog.attr({\r\n\t\t\t\"aria-labelledby\": uiDialogTitle.attr(\"id\")\r\n\t\t});\r\n\t},\r\n\r\n\t_title: function( title ) {\r\n\t\tif ( !this.options.title ) {\r\n\t\t\ttitle.html(\"&#160;\");\r\n\t\t}\r\n\t\ttitle.text( this.options.title );\r\n\t},\r\n\r\n\t_createButtonPane: function() {\r\n\t\tthis.uiDialogButtonPane = $(\"<div>\")\r\n\t\t\t.addClass(\"ui-dialog-buttonpane ui-widget-content ui-helper-clearfix\");\r\n\r\n\t\tthis.uiButtonSet = $(\"<div>\")\r\n\t\t\t.addClass(\"ui-dialog-buttonset\")\r\n\t\t\t.appendTo( this.uiDialogButtonPane );\r\n\r\n\t\tthis._createButtons();\r\n\t},\r\n\r\n\t_createButtons: function() {\r\n\t\tvar that = this,\r\n\t\t\tbuttons = this.options.buttons;\r\n\r\n\t\t// if we already have a button pane, remove it\r\n\t\tthis.uiDialogButtonPane.remove();\r\n\t\tthis.uiButtonSet.empty();\r\n\r\n\t\tif ( $.isEmptyObject( buttons ) || ($.isArray( buttons ) && !buttons.length) ) {\r\n\t\t\tthis.uiDialog.removeClass(\"ui-dialog-buttons\");\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t$.each( buttons, function( name, props ) {\r\n\t\t\tvar click, buttonOptions;\r\n\t\t\tprops = $.isFunction( props ) ?\r\n\t\t\t\t{ click: props, text: name } :\r\n\t\t\t\tprops;\r\n\t\t\t// Default to a non-submitting button\r\n\t\t\tprops = $.extend( { type: \"button\" }, props );\r\n\t\t\t// Change the context for the click callback to be the main element\r\n\t\t\tclick = props.click;\r\n\t\t\tprops.click = function() {\r\n\t\t\t\tclick.apply( that.element[0], arguments );\r\n\t\t\t};\r\n\t\t\tbuttonOptions = {\r\n\t\t\t\ticons: props.icons,\r\n\t\t\t\ttext: props.showText\r\n\t\t\t};\r\n\t\t\tdelete props.icons;\r\n\t\t\tdelete props.showText;\r\n\t\t\t$( \"<button></button>\", props )\r\n\t\t\t\t.button( buttonOptions )\r\n\t\t\t\t.appendTo( that.uiButtonSet );\r\n\t\t});\r\n\t\tthis.uiDialog.addClass(\"ui-dialog-buttons\");\r\n\t\tthis.uiDialogButtonPane.appendTo( this.uiDialog );\r\n\t},\r\n\r\n\t_makeDraggable: function() {\r\n\t\tvar that = this,\r\n\t\t\toptions = this.options;\r\n\r\n\t\tfunction filteredUi( ui ) {\r\n\t\t\treturn {\r\n\t\t\t\tposition: ui.position,\r\n\t\t\t\toffset: ui.offset\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t\tthis.uiDialog.draggable({\r\n\t\t\tcancel: \".ui-dialog-content, .ui-dialog-titlebar-close\",\r\n\t\t\thandle: \".ui-dialog-titlebar\",\r\n\t\t\tcontainment: \"document\",\r\n\t\t\tstart: function( event, ui ) {\r\n\t\t\t\t$( this ).addClass(\"ui-dialog-dragging\");\r\n\t\t\t\tthat._blockFrames();\r\n\t\t\t\tthat._trigger( \"dragStart\", event, filteredUi( ui ) );\r\n\t\t\t},\r\n\t\t\tdrag: function( event, ui ) {\r\n\t\t\t\tthat._trigger( \"drag\", event, filteredUi( ui ) );\r\n\t\t\t},\r\n\t\t\tstop: function( event, ui ) {\r\n\t\t\t\toptions.position = [\r\n\t\t\t\t\tui.position.left - that.document.scrollLeft(),\r\n\t\t\t\t\tui.position.top - that.document.scrollTop()\r\n\t\t\t\t];\r\n\t\t\t\t$( this ).removeClass(\"ui-dialog-dragging\");\r\n\t\t\t\tthat._unblockFrames();\r\n\t\t\t\tthat._trigger( \"dragStop\", event, filteredUi( ui ) );\r\n\t\t\t}\r\n\t\t});\r\n\t},\r\n\r\n\t_makeResizable: function() {\r\n\t\tvar that = this,\r\n\t\t\toptions = this.options,\r\n\t\t\thandles = options.resizable,\r\n\t\t\t// .ui-resizable has position: relative defined in the stylesheet\r\n\t\t\t// but dialogs have to use absolute or fixed positioning\r\n\t\t\tposition = this.uiDialog.css(\"position\"),\r\n\t\t\tresizeHandles = typeof handles === \"string\" ?\r\n\t\t\t\thandles\t:\r\n\t\t\t\t\"n,e,s,w,se,sw,ne,nw\";\r\n\r\n\t\tfunction filteredUi( ui ) {\r\n\t\t\treturn {\r\n\t\t\t\toriginalPosition: ui.originalPosition,\r\n\t\t\t\toriginalSize: ui.originalSize,\r\n\t\t\t\tposition: ui.position,\r\n\t\t\t\tsize: ui.size\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t\tthis.uiDialog.resizable({\r\n\t\t\tcancel: \".ui-dialog-content\",\r\n\t\t\tcontainment: \"document\",\r\n\t\t\talsoResize: this.element,\r\n\t\t\tmaxWidth: options.maxWidth,\r\n\t\t\tmaxHeight: options.maxHeight,\r\n\t\t\tminWidth: options.minWidth,\r\n\t\t\tminHeight: this._minHeight(),\r\n\t\t\thandles: resizeHandles,\r\n\t\t\tstart: function( event, ui ) {\r\n\t\t\t\t$( this ).addClass(\"ui-dialog-resizing\");\r\n\t\t\t\tthat._blockFrames();\r\n\t\t\t\tthat._trigger( \"resizeStart\", event, filteredUi( ui ) );\r\n\t\t\t},\r\n\t\t\tresize: function( event, ui ) {\r\n\t\t\t\tthat._trigger( \"resize\", event, filteredUi( ui ) );\r\n\t\t\t},\r\n\t\t\tstop: function( event, ui ) {\r\n\t\t\t\toptions.height = $( this ).height();\r\n\t\t\t\toptions.width = $( this ).width();\r\n\t\t\t\t$( this ).removeClass(\"ui-dialog-resizing\");\r\n\t\t\t\tthat._unblockFrames();\r\n\t\t\t\tthat._trigger( \"resizeStop\", event, filteredUi( ui ) );\r\n\t\t\t}\r\n\t\t})\r\n\t\t.css( \"position\", position );\r\n\t},\r\n\r\n\t_minHeight: function() {\r\n\t\tvar options = this.options;\r\n\r\n\t\treturn options.height === \"auto\" ?\r\n\t\t\toptions.minHeight :\r\n\t\t\tMath.min( options.minHeight, options.height );\r\n\t},\r\n\r\n\t_position: function() {\r\n\t\t// Need to show the dialog to get the actual offset in the position plugin\r\n\t\tvar isVisible = this.uiDialog.is(\":visible\");\r\n\t\tif ( !isVisible ) {\r\n\t\t\tthis.uiDialog.show();\r\n\t\t}\r\n\t\tthis.uiDialog.position( this.options.position );\r\n\t\tif ( !isVisible ) {\r\n\t\t\tthis.uiDialog.hide();\r\n\t\t}\r\n\t},\r\n\r\n\t_setOptions: function( options ) {\r\n\t\tvar that = this,\r\n\t\t\tresize = false,\r\n\t\t\tresizableOptions = {};\r\n\r\n\t\t$.each( options, function( key, value ) {\r\n\t\t\tthat._setOption( key, value );\r\n\r\n\t\t\tif ( key in sizeRelatedOptions ) {\r\n\t\t\t\tresize = true;\r\n\t\t\t}\r\n\t\t\tif ( key in resizableRelatedOptions ) {\r\n\t\t\t\tresizableOptions[ key ] = value;\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tif ( resize ) {\r\n\t\t\tthis._size();\r\n\t\t\tthis._position();\r\n\t\t}\r\n\t\tif ( this.uiDialog.is(\":data(ui-resizable)\") ) {\r\n\t\t\tthis.uiDialog.resizable( \"option\", resizableOptions );\r\n\t\t}\r\n\t},\r\n\r\n\t_setOption: function( key, value ) {\r\n\t\t/*jshint maxcomplexity:15*/\r\n\t\tvar isDraggable, isResizable,\r\n\t\t\tuiDialog = this.uiDialog;\r\n\r\n\t\tif ( key === \"dialogClass\" ) {\r\n\t\t\tuiDialog\r\n\t\t\t\t.removeClass( this.options.dialogClass )\r\n\t\t\t\t.addClass( value );\r\n\t\t}\r\n\r\n\t\tif ( key === \"disabled\" ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tthis._super( key, value );\r\n\r\n\t\tif ( key === \"appendTo\" ) {\r\n\t\t\tthis.uiDialog.appendTo( this._appendTo() );\r\n\t\t}\r\n\r\n\t\tif ( key === \"buttons\" ) {\r\n\t\t\tthis._createButtons();\r\n\t\t}\r\n\r\n\t\tif ( key === \"closeText\" ) {\r\n\t\t\tthis.uiDialogTitlebarClose.button({\r\n\t\t\t\t// Ensure that we always pass a string\r\n\t\t\t\tlabel: \"\" + value\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tif ( key === \"draggable\" ) {\r\n\t\t\tisDraggable = uiDialog.is(\":data(ui-draggable)\");\r\n\t\t\tif ( isDraggable && !value ) {\r\n\t\t\t\tuiDialog.draggable(\"destroy\");\r\n\t\t\t}\r\n\r\n\t\t\tif ( !isDraggable && value ) {\r\n\t\t\t\tthis._makeDraggable();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif ( key === \"position\" ) {\r\n\t\t\tthis._position();\r\n\t\t}\r\n\r\n\t\tif ( key === \"resizable\" ) {\r\n\t\t\t// currently resizable, becoming non-resizable\r\n\t\t\tisResizable = uiDialog.is(\":data(ui-resizable)\");\r\n\t\t\tif ( isResizable && !value ) {\r\n\t\t\t\tuiDialog.resizable(\"destroy\");\r\n\t\t\t}\r\n\r\n\t\t\t// currently resizable, changing handles\r\n\t\t\tif ( isResizable && typeof value === \"string\" ) {\r\n\t\t\t\tuiDialog.resizable( \"option\", \"handles\", value );\r\n\t\t\t}\r\n\r\n\t\t\t// currently non-resizable, becoming resizable\r\n\t\t\tif ( !isResizable && value !== false ) {\r\n\t\t\t\tthis._makeResizable();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif ( key === \"title\" ) {\r\n\t\t\tthis._title( this.uiDialogTitlebar.find(\".ui-dialog-title\") );\r\n\t\t}\r\n\t},\r\n\r\n\t_size: function() {\r\n\t\t// If the user has resized the dialog, the .ui-dialog and .ui-dialog-content\r\n\t\t// divs will both have width and height set, so we need to reset them\r\n\t\tvar nonContentHeight, minContentHeight, maxContentHeight,\r\n\t\t\toptions = this.options;\r\n\r\n\t\t// Reset content sizing\r\n\t\tthis.element.show().css({\r\n\t\t\twidth: \"auto\",\r\n\t\t\tminHeight: 0,\r\n\t\t\tmaxHeight: \"none\",\r\n\t\t\theight: 0\r\n\t\t});\r\n\r\n\t\tif ( options.minWidth > options.width ) {\r\n\t\t\toptions.width = options.minWidth;\r\n\t\t}\r\n\r\n\t\t// reset wrapper sizing\r\n\t\t// determine the height of all the non-content elements\r\n\t\tnonContentHeight = this.uiDialog.css({\r\n\t\t\t\theight: \"auto\",\r\n\t\t\t\twidth: options.width\r\n\t\t\t})\r\n\t\t\t.outerHeight();\r\n\t\tminContentHeight = Math.max( 0, options.minHeight - nonContentHeight );\r\n\t\tmaxContentHeight = typeof options.maxHeight === \"number\" ?\r\n\t\t\tMath.max( 0, options.maxHeight - nonContentHeight ) :\r\n\t\t\t\"none\";\r\n\r\n\t\tif ( options.height === \"auto\" ) {\r\n\t\t\tthis.element.css({\r\n\t\t\t\tminHeight: minContentHeight,\r\n\t\t\t\tmaxHeight: maxContentHeight,\r\n\t\t\t\theight: \"auto\"\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tthis.element.height( Math.max( 0, options.height - nonContentHeight ) );\r\n\t\t}\r\n\r\n\t\tif (this.uiDialog.is(\":data(ui-resizable)\") ) {\r\n\t\t\tthis.uiDialog.resizable( \"option\", \"minHeight\", this._minHeight() );\r\n\t\t}\r\n\t},\r\n\r\n\t_blockFrames: function() {\r\n\t\tthis.iframeBlocks = this.document.find( \"iframe\" ).map(function() {\r\n\t\t\tvar iframe = $( this );\r\n\r\n\t\t\treturn $( \"<div>\" )\r\n\t\t\t\t.css({\r\n\t\t\t\t\tposition: \"absolute\",\r\n\t\t\t\t\twidth: iframe.outerWidth(),\r\n\t\t\t\t\theight: iframe.outerHeight()\r\n\t\t\t\t})\r\n\t\t\t\t.appendTo( iframe.parent() )\r\n\t\t\t\t.offset( iframe.offset() )[0];\r\n\t\t});\r\n\t},\r\n\r\n\t_unblockFrames: function() {\r\n\t\tif ( this.iframeBlocks ) {\r\n\t\t\tthis.iframeBlocks.remove();\r\n\t\t\tdelete this.iframeBlocks;\r\n\t\t}\r\n\t},\r\n\r\n\t_allowInteraction: function( event ) {\r\n\t\tif ( $( event.target ).closest(\".ui-dialog\").length ) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\t// TODO: Remove hack when datepicker implements\r\n\t\t// the .ui-front logic (#8989)\r\n\t\treturn !!$( event.target ).closest(\".ui-datepicker\").length;\r\n\t},\r\n\r\n\t_createOverlay: function() {\r\n\t\tif ( !this.options.modal ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar that = this,\r\n\t\t\twidgetFullName = this.widgetFullName;\r\n\t\tif ( !$.ui.dialog.overlayInstances ) {\r\n\t\t\t// Prevent use of anchors and inputs.\r\n\t\t\t// We use a delay in case the overlay is created from an\r\n\t\t\t// event that we're going to be cancelling. (#2804)\r\n\t\t\tthis._delay(function() {\r\n\t\t\t\t// Handle .dialog().dialog(\"close\") (#4065)\r\n\t\t\t\tif ( $.ui.dialog.overlayInstances ) {\r\n\t\t\t\t\tthis.document.bind( \"focusin.dialog\", function( event ) {\r\n\t\t\t\t\t\tif ( !that._allowInteraction( event ) ) {\r\n\t\t\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t\t\t\t$(\".ui-dialog:visible:last .ui-dialog-content\")\r\n\t\t\t\t\t\t\t\t.data( widgetFullName )._focusTabbable();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tthis.overlay = $(\"<div>\")\r\n\t\t\t.addClass(\"ui-widget-overlay ui-front\")\r\n\t\t\t.appendTo( this._appendTo() );\r\n\t\tthis._on( this.overlay, {\r\n\t\t\tmousedown: \"_keepFocus\"\r\n\t\t});\r\n\t\t$.ui.dialog.overlayInstances++;\r\n\t},\r\n\r\n\t_getMaxZindex: function () {\r\n\t\tvar elm = $(\"*\");\r\n\t\tvar maxZindex = 1;\r\n\r\n\t\t$.each(elm, function (key, value) {\r\n\t\t\tvar zindex = parseInt($(value).css(\"z-index\"));\r\n\t\t\tif (zindex > maxZindex) {\r\n\t\t\t\tmaxZindex = zindex + 1;\r\n\t\t\t}\r\n\r\n\t\t});\r\n\r\n\t\treturn maxZindex;\r\n\t},\r\n\r\n\t_destroyOverlay: function() {\r\n\t\tif ( !this.options.modal ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif ( this.overlay ) {\r\n\t\t\t$.ui.dialog.overlayInstances--;\r\n\r\n\t\t\tif ( !$.ui.dialog.overlayInstances ) {\r\n\t\t\t\tthis.document.unbind( \"focusin.dialog\" );\r\n\t\t\t}\r\n\t\t\tthis.overlay.remove();\r\n\t\t\tthis.overlay = null;\r\n\t\t}\r\n\t}\r\n});\r\n\r\n$.ui.dialog.overlayInstances = 0;\r\n\r\n// DEPRECATED\r\nif ( $.uiBackCompat !== false ) {\r\n\t// position option with array notation\r\n\t// just override with old implementation\r\n\t$.widget( \"ui.dialog\", $.ui.dialog, {\r\n\t\t_position: function() {\r\n\t\t\tvar position = this.options.position,\r\n\t\t\t\tmyAt = [],\r\n\t\t\t\toffset = [ 0, 0 ],\r\n\t\t\t\tisVisible;\r\n\r\n\t\t\tif ( position ) {\r\n\t\t\t\tif ( typeof position === \"string\" || (typeof position === \"object\" && \"0\" in position ) ) {\r\n\t\t\t\t\tmyAt = position.split ? position.split(\" \") : [ position[0], position[1] ];\r\n\t\t\t\t\tif ( myAt.length === 1 ) {\r\n\t\t\t\t\t\tmyAt[1] = myAt[0];\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t$.each( [ \"left\", \"top\" ], function( i, offsetPosition ) {\r\n\t\t\t\t\t\tif ( +myAt[ i ] === myAt[ i ] ) {\r\n\t\t\t\t\t\t\toffset[ i ] = myAt[ i ];\r\n\t\t\t\t\t\t\tmyAt[ i ] = offsetPosition;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\tposition = {\r\n\t\t\t\t\t\tmy: myAt[0] + (offset[0] < 0 ? offset[0] : \"+\" + offset[0]) + \" \" +\r\n\t\t\t\t\t\t\tmyAt[1] + (offset[1] < 0 ? offset[1] : \"+\" + offset[1]),\r\n\t\t\t\t\t\tat: myAt.join(\" \")\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\r\n\t\t\t\tposition = $.extend( {}, $.ui.dialog.prototype.options.position, position );\r\n\t\t\t} else {\r\n\t\t\t\tposition = $.ui.dialog.prototype.options.position;\r\n\t\t\t}\r\n\r\n\t\t\t// need to show the dialog to get the actual offset in the position plugin\r\n\t\t\tisVisible = this.uiDialog.is(\":visible\");\r\n\t\t\tif ( !isVisible ) {\r\n\t\t\t\tthis.uiDialog.show();\r\n\t\t\t}\r\n\t\t\tthis.uiDialog.position( position );\r\n\t\t\tif ( !isVisible ) {\r\n\t\t\t\tthis.uiDialog.hide();\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n}\r\n\r\n}( jQuery ) );\r\n\r\n(function( $, undefined ) {\r\n\r\nvar rvertical = /up|down|vertical/,\r\n\trpositivemotion = /up|left|vertical|horizontal/;\r\n\r\n$.effects.effect.blind = function( o, done ) {\r\n\t// Create element\r\n\tvar el = $( this ),\r\n\t\tprops = [ \"position\", \"top\", \"bottom\", \"left\", \"right\", \"height\", \"width\" ],\r\n\t\tmode = $.effects.setMode( el, o.mode || \"hide\" ),\r\n\t\tdirection = o.direction || \"up\",\r\n\t\tvertical = rvertical.test( direction ),\r\n\t\tref = vertical ? \"height\" : \"width\",\r\n\t\tref2 = vertical ? \"top\" : \"left\",\r\n\t\tmotion = rpositivemotion.test( direction ),\r\n\t\tanimation = {},\r\n\t\tshow = mode === \"show\",\r\n\t\twrapper, distance, margin;\r\n\r\n\t// if already wrapped, the wrapper's properties are my property. #6245\r\n\tif ( el.parent().is( \".ui-effects-wrapper\" ) ) {\r\n\t\t$.effects.save( el.parent(), props );\r\n\t} else {\r\n\t\t$.effects.save( el, props );\r\n\t}\r\n\tel.show();\r\n\twrapper = $.effects.createWrapper( el ).css({\r\n\t\toverflow: \"hidden\"\r\n\t});\r\n\r\n\tdistance = wrapper[ ref ]();\r\n\tmargin = parseFloat( wrapper.css( ref2 ) ) || 0;\r\n\r\n\tanimation[ ref ] = show ? distance : 0;\r\n\tif ( !motion ) {\r\n\t\tel\r\n\t\t\t.css( vertical ? \"bottom\" : \"right\", 0 )\r\n\t\t\t.css( vertical ? \"top\" : \"left\", \"auto\" )\r\n\t\t\t.css({ position: \"absolute\" });\r\n\r\n\t\tanimation[ ref2 ] = show ? margin : distance + margin;\r\n\t}\r\n\r\n\t// start at 0 if we are showing\r\n\tif ( show ) {\r\n\t\twrapper.css( ref, 0 );\r\n\t\tif ( ! motion ) {\r\n\t\t\twrapper.css( ref2, margin + distance );\r\n\t\t}\r\n\t}\r\n\r\n\t// Animate\r\n\twrapper.animate( animation, {\r\n\t\tduration: o.duration,\r\n\t\teasing: o.easing,\r\n\t\tqueue: false,\r\n\t\tcomplete: function() {\r\n\t\t\tif ( mode === \"hide\" ) {\r\n\t\t\t\tel.hide();\r\n\t\t\t}\r\n\t\t\t$.effects.restore( el, props );\r\n\t\t\t$.effects.removeWrapper( el );\r\n\t\t\tdone();\r\n\t\t}\r\n\t});\r\n\r\n};\r\n\r\n})(jQuery);\r\n\r\n(function( $, undefined ) {\r\n\r\n$.effects.effect.bounce = function( o, done ) {\r\n\tvar el = $( this ),\r\n\t\tprops = [ \"position\", \"top\", \"bottom\", \"left\", \"right\", \"height\", \"width\" ],\r\n\r\n\t\t// defaults:\r\n\t\tmode = $.effects.setMode( el, o.mode || \"effect\" ),\r\n\t\thide = mode === \"hide\",\r\n\t\tshow = mode === \"show\",\r\n\t\tdirection = o.direction || \"up\",\r\n\t\tdistance = o.distance,\r\n\t\ttimes = o.times || 5,\r\n\r\n\t\t// number of internal animations\r\n\t\tanims = times * 2 + ( show || hide ? 1 : 0 ),\r\n\t\tspeed = o.duration / anims,\r\n\t\teasing = o.easing,\r\n\r\n\t\t// utility:\r\n\t\tref = ( direction === \"up\" || direction === \"down\" ) ? \"top\" : \"left\",\r\n\t\tmotion = ( direction === \"up\" || direction === \"left\" ),\r\n\t\ti,\r\n\t\tupAnim,\r\n\t\tdownAnim,\r\n\r\n\t\t// we will need to re-assemble the queue to stack our animations in place\r\n\t\tqueue = el.queue(),\r\n\t\tqueuelen = queue.length;\r\n\r\n\t// Avoid touching opacity to prevent clearType and PNG issues in IE\r\n\tif ( show || hide ) {\r\n\t\tprops.push( \"opacity\" );\r\n\t}\r\n\r\n\t$.effects.save( el, props );\r\n\tel.show();\r\n\t$.effects.createWrapper( el ); // Create Wrapper\r\n\r\n\t// default distance for the BIGGEST bounce is the outer Distance / 3\r\n\tif ( !distance ) {\r\n\t\tdistance = el[ ref === \"top\" ? \"outerHeight\" : \"outerWidth\" ]() / 3;\r\n\t}\r\n\r\n\tif ( show ) {\r\n\t\tdownAnim = { opacity: 1 };\r\n\t\tdownAnim[ ref ] = 0;\r\n\r\n\t\t// if we are showing, force opacity 0 and set the initial position\r\n\t\t// then do the \"first\" animation\r\n\t\tel.css( \"opacity\", 0 )\r\n\t\t\t.css( ref, motion ? -distance * 2 : distance * 2 )\r\n\t\t\t.animate( downAnim, speed, easing );\r\n\t}\r\n\r\n\t// start at the smallest distance if we are hiding\r\n\tif ( hide ) {\r\n\t\tdistance = distance / Math.pow( 2, times - 1 );\r\n\t}\r\n\r\n\tdownAnim = {};\r\n\tdownAnim[ ref ] = 0;\r\n\t// Bounces up/down/left/right then back to 0 -- times * 2 animations happen here\r\n\tfor ( i = 0; i < times; i++ ) {\r\n\t\tupAnim = {};\r\n\t\tupAnim[ ref ] = ( motion ? \"-=\" : \"+=\" ) + distance;\r\n\r\n\t\tel.animate( upAnim, speed, easing )\r\n\t\t\t.animate( downAnim, speed, easing );\r\n\r\n\t\tdistance = hide ? distance * 2 : distance / 2;\r\n\t}\r\n\r\n\t// Last Bounce when Hiding\r\n\tif ( hide ) {\r\n\t\tupAnim = { opacity: 0 };\r\n\t\tupAnim[ ref ] = ( motion ? \"-=\" : \"+=\" ) + distance;\r\n\r\n\t\tel.animate( upAnim, speed, easing );\r\n\t}\r\n\r\n\tel.queue(function() {\r\n\t\tif ( hide ) {\r\n\t\t\tel.hide();\r\n\t\t}\r\n\t\t$.effects.restore( el, props );\r\n\t\t$.effects.removeWrapper( el );\r\n\t\tdone();\r\n\t});\r\n\r\n\t// inject all the animations we just queued to be first in line (after \"inprogress\")\r\n\tif ( queuelen > 1) {\r\n\t\tqueue.splice.apply( queue,\r\n\t\t\t[ 1, 0 ].concat( queue.splice( queuelen, anims + 1 ) ) );\r\n\t}\r\n\tel.dequeue();\r\n\r\n};\r\n\r\n})(jQuery);\r\n\r\n(function( $, undefined ) {\r\n\r\n$.effects.effect.clip = function( o, done ) {\r\n\t// Create element\r\n\tvar el = $( this ),\r\n\t\tprops = [ \"position\", \"top\", \"bottom\", \"left\", \"right\", \"height\", \"width\" ],\r\n\t\tmode = $.effects.setMode( el, o.mode || \"hide\" ),\r\n\t\tshow = mode === \"show\",\r\n\t\tdirection = o.direction || \"vertical\",\r\n\t\tvert = direction === \"vertical\",\r\n\t\tsize = vert ? \"height\" : \"width\",\r\n\t\tposition = vert ? \"top\" : \"left\",\r\n\t\tanimation = {},\r\n\t\twrapper, animate, distance;\r\n\r\n\t// Save & Show\r\n\t$.effects.save( el, props );\r\n\tel.show();\r\n\r\n\t// Create Wrapper\r\n\twrapper = $.effects.createWrapper( el ).css({\r\n\t\toverflow: \"hidden\"\r\n\t});\r\n\tanimate = ( el[0].tagName === \"IMG\" ) ? wrapper : el;\r\n\tdistance = animate[ size ]();\r\n\r\n\t// Shift\r\n\tif ( show ) {\r\n\t\tanimate.css( size, 0 );\r\n\t\tanimate.css( position, distance / 2 );\r\n\t}\r\n\r\n\t// Create Animation Object:\r\n\tanimation[ size ] = show ? distance : 0;\r\n\tanimation[ position ] = show ? 0 : distance / 2;\r\n\r\n\t// Animate\r\n\tanimate.animate( animation, {\r\n\t\tqueue: false,\r\n\t\tduration: o.duration,\r\n\t\teasing: o.easing,\r\n\t\tcomplete: function() {\r\n\t\t\tif ( !show ) {\r\n\t\t\t\tel.hide();\r\n\t\t\t}\r\n\t\t\t$.effects.restore( el, props );\r\n\t\t\t$.effects.removeWrapper( el );\r\n\t\t\tdone();\r\n\t\t}\r\n\t});\r\n\r\n};\r\n\r\n})(jQuery);\r\n\r\n(function( $, undefined ) {\r\n\r\n$.effects.effect.drop = function( o, done ) {\r\n\r\n\tvar el = $( this ),\r\n\t\tprops = [ \"position\", \"top\", \"bottom\", \"left\", \"right\", \"opacity\", \"height\", \"width\" ],\r\n\t\tmode = $.effects.setMode( el, o.mode || \"hide\" ),\r\n\t\tshow = mode === \"show\",\r\n\t\tdirection = o.direction || \"left\",\r\n\t\tref = ( direction === \"up\" || direction === \"down\" ) ? \"top\" : \"left\",\r\n\t\tmotion = ( direction === \"up\" || direction === \"left\" ) ? \"pos\" : \"neg\",\r\n\t\tanimation = {\r\n\t\t\topacity: show ? 1 : 0\r\n\t\t},\r\n\t\tdistance;\r\n\r\n\t// Adjust\r\n\t$.effects.save( el, props );\r\n\tel.show();\r\n\t$.effects.createWrapper( el );\r\n\r\n\tdistance = o.distance || el[ ref === \"top\" ? \"outerHeight\": \"outerWidth\" ]( true ) / 2;\r\n\r\n\tif ( show ) {\r\n\t\tel\r\n\t\t\t.css( \"opacity\", 0 )\r\n\t\t\t.css( ref, motion === \"pos\" ? -distance : distance );\r\n\t}\r\n\r\n\t// Animation\r\n\tanimation[ ref ] = ( show ?\r\n\t\t( motion === \"pos\" ? \"+=\" : \"-=\" ) :\r\n\t\t( motion === \"pos\" ? \"-=\" : \"+=\" ) ) +\r\n\t\tdistance;\r\n\r\n\t// Animate\r\n\tel.animate( animation, {\r\n\t\tqueue: false,\r\n\t\tduration: o.duration,\r\n\t\teasing: o.easing,\r\n\t\tcomplete: function() {\r\n\t\t\tif ( mode === \"hide\" ) {\r\n\t\t\t\tel.hide();\r\n\t\t\t}\r\n\t\t\t$.effects.restore( el, props );\r\n\t\t\t$.effects.removeWrapper( el );\r\n\t\t\tdone();\r\n\t\t}\r\n\t});\r\n};\r\n\r\n})(jQuery);\r\n\r\n(function( $, undefined ) {\r\n\r\n$.effects.effect.explode = function( o, done ) {\r\n\r\n\tvar rows = o.pieces ? Math.round( Math.sqrt( o.pieces ) ) : 3,\r\n\t\tcells = rows,\r\n\t\tel = $( this ),\r\n\t\tmode = $.effects.setMode( el, o.mode || \"hide\" ),\r\n\t\tshow = mode === \"show\",\r\n\r\n\t\t// show and then visibility:hidden the element before calculating offset\r\n\t\toffset = el.show().css( \"visibility\", \"hidden\" ).offset(),\r\n\r\n\t\t// width and height of a piece\r\n\t\twidth = Math.ceil( el.outerWidth() / cells ),\r\n\t\theight = Math.ceil( el.outerHeight() / rows ),\r\n\t\tpieces = [],\r\n\r\n\t\t// loop\r\n\t\ti, j, left, top, mx, my;\r\n\r\n\t// children animate complete:\r\n\tfunction childComplete() {\r\n\t\tpieces.push( this );\r\n\t\tif ( pieces.length === rows * cells ) {\r\n\t\t\tanimComplete();\r\n\t\t}\r\n\t}\r\n\r\n\t// clone the element for each row and cell.\r\n\tfor( i = 0; i < rows ; i++ ) { // ===>\r\n\t\ttop = offset.top + i * height;\r\n\t\tmy = i - ( rows - 1 ) / 2 ;\r\n\r\n\t\tfor( j = 0; j < cells ; j++ ) { // |||\r\n\t\t\tleft = offset.left + j * width;\r\n\t\t\tmx = j - ( cells - 1 ) / 2 ;\r\n\r\n\t\t\t// Create a clone of the now hidden main element that will be absolute positioned\r\n\t\t\t// within a wrapper div off the -left and -top equal to size of our pieces\r\n\t\t\tel\r\n\t\t\t\t.clone()\r\n\t\t\t\t.appendTo( \"body\" )\r\n\t\t\t\t.wrap( \"<div></div>\" )\r\n\t\t\t\t.css({\r\n\t\t\t\t\tposition: \"absolute\",\r\n\t\t\t\t\tvisibility: \"visible\",\r\n\t\t\t\t\tleft: -j * width,\r\n\t\t\t\t\ttop: -i * height\r\n\t\t\t\t})\r\n\r\n\t\t\t// select the wrapper - make it overflow: hidden and absolute positioned based on\r\n\t\t\t// where the original was located +left and +top equal to the size of pieces\r\n\t\t\t\t.parent()\r\n\t\t\t\t.addClass( \"ui-effects-explode\" )\r\n\t\t\t\t.css({\r\n\t\t\t\t\tposition: \"absolute\",\r\n\t\t\t\t\toverflow: \"hidden\",\r\n\t\t\t\t\twidth: width,\r\n\t\t\t\t\theight: height,\r\n\t\t\t\t\tleft: left + ( show ? mx * width : 0 ),\r\n\t\t\t\t\ttop: top + ( show ? my * height : 0 ),\r\n\t\t\t\t\topacity: show ? 0 : 1\r\n\t\t\t\t}).animate({\r\n\t\t\t\t\tleft: left + ( show ? 0 : mx * width ),\r\n\t\t\t\t\ttop: top + ( show ? 0 : my * height ),\r\n\t\t\t\t\topacity: show ? 1 : 0\r\n\t\t\t\t}, o.duration || 500, o.easing, childComplete );\r\n\t\t}\r\n\t}\r\n\r\n\tfunction animComplete() {\r\n\t\tel.css({\r\n\t\t\tvisibility: \"visible\"\r\n\t\t});\r\n\t\t$( pieces ).remove();\r\n\t\tif ( !show ) {\r\n\t\t\tel.hide();\r\n\t\t}\r\n\t\tdone();\r\n\t}\r\n};\r\n\r\n})(jQuery);\r\n\r\n(function( $, undefined ) {\r\n\r\n$.effects.effect.fade = function( o, done ) {\r\n\tvar el = $( this ),\r\n\t\tmode = $.effects.setMode( el, o.mode || \"toggle\" );\r\n\r\n\tel.animate({\r\n\t\topacity: mode\r\n\t}, {\r\n\t\tqueue: false,\r\n\t\tduration: o.duration,\r\n\t\teasing: o.easing,\r\n\t\tcomplete: done\r\n\t});\r\n};\r\n\r\n})( jQuery );\r\n\r\n(function( $, undefined ) {\r\n\r\n$.effects.effect.fold = function( o, done ) {\r\n\r\n\t// Create element\r\n\tvar el = $( this ),\r\n\t\tprops = [ \"position\", \"top\", \"bottom\", \"left\", \"right\", \"height\", \"width\" ],\r\n\t\tmode = $.effects.setMode( el, o.mode || \"hide\" ),\r\n\t\tshow = mode === \"show\",\r\n\t\thide = mode === \"hide\",\r\n\t\tsize = o.size || 15,\r\n\t\tpercent = /([0-9]+)%/.exec( size ),\r\n\t\thorizFirst = !!o.horizFirst,\r\n\t\twidthFirst = show !== horizFirst,\r\n\t\tref = widthFirst ? [ \"width\", \"height\" ] : [ \"height\", \"width\" ],\r\n\t\tduration = o.duration / 2,\r\n\t\twrapper, distance,\r\n\t\tanimation1 = {},\r\n\t\tanimation2 = {};\r\n\r\n\t$.effects.save( el, props );\r\n\tel.show();\r\n\r\n\t// Create Wrapper\r\n\twrapper = $.effects.createWrapper( el ).css({\r\n\t\toverflow: \"hidden\"\r\n\t});\r\n\tdistance = widthFirst ?\r\n\t\t[ wrapper.width(), wrapper.height() ] :\r\n\t\t[ wrapper.height(), wrapper.width() ];\r\n\r\n\tif ( percent ) {\r\n\t\tsize = parseInt( percent[ 1 ], 10 ) / 100 * distance[ hide ? 0 : 1 ];\r\n\t}\r\n\tif ( show ) {\r\n\t\twrapper.css( horizFirst ? {\r\n\t\t\theight: 0,\r\n\t\t\twidth: size\r\n\t\t} : {\r\n\t\t\theight: size,\r\n\t\t\twidth: 0\r\n\t\t});\r\n\t}\r\n\r\n\t// Animation\r\n\tanimation1[ ref[ 0 ] ] = show ? distance[ 0 ] : size;\r\n\tanimation2[ ref[ 1 ] ] = show ? distance[ 1 ] : 0;\r\n\r\n\t// Animate\r\n\twrapper\r\n\t\t.animate( animation1, duration, o.easing )\r\n\t\t.animate( animation2, duration, o.easing, function() {\r\n\t\t\tif ( hide ) {\r\n\t\t\t\tel.hide();\r\n\t\t\t}\r\n\t\t\t$.effects.restore( el, props );\r\n\t\t\t$.effects.removeWrapper( el );\r\n\t\t\tdone();\r\n\t\t});\r\n\r\n};\r\n\r\n})(jQuery);\r\n\r\n(function( $, undefined ) {\r\n\r\n$.effects.effect.highlight = function( o, done ) {\r\n\tvar elem = $( this ),\r\n\t\tprops = [ \"backgroundImage\", \"backgroundColor\", \"opacity\" ],\r\n\t\tmode = $.effects.setMode( elem, o.mode || \"show\" ),\r\n\t\tanimation = {\r\n\t\t\tbackgroundColor: elem.css( \"backgroundColor\" )\r\n\t\t};\r\n\r\n\tif (mode === \"hide\") {\r\n\t\tanimation.opacity = 0;\r\n\t}\r\n\r\n\t$.effects.save( elem, props );\r\n\r\n\telem\r\n\t\t.show()\r\n\t\t.css({\r\n\t\t\tbackgroundImage: \"none\",\r\n\t\t\tbackgroundColor: o.color || \"#ffff99\"\r\n\t\t})\r\n\t\t.animate( animation, {\r\n\t\t\tqueue: false,\r\n\t\t\tduration: o.duration,\r\n\t\t\teasing: o.easing,\r\n\t\t\tcomplete: function() {\r\n\t\t\t\tif ( mode === \"hide\" ) {\r\n\t\t\t\t\telem.hide();\r\n\t\t\t\t}\r\n\t\t\t\t$.effects.restore( elem, props );\r\n\t\t\t\tdone();\r\n\t\t\t}\r\n\t\t});\r\n};\r\n\r\n})(jQuery);\r\n\r\n(function( $, undefined ) {\r\n\r\n$.effects.effect.pulsate = function( o, done ) {\r\n\tvar elem = $( this ),\r\n\t\tmode = $.effects.setMode( elem, o.mode || \"show\" ),\r\n\t\tshow = mode === \"show\",\r\n\t\thide = mode === \"hide\",\r\n\t\tshowhide = ( show || mode === \"hide\" ),\r\n\r\n\t\t// showing or hiding leaves of the \"last\" animation\r\n\t\tanims = ( ( o.times || 5 ) * 2 ) + ( showhide ? 1 : 0 ),\r\n\t\tduration = o.duration / anims,\r\n\t\tanimateTo = 0,\r\n\t\tqueue = elem.queue(),\r\n\t\tqueuelen = queue.length,\r\n\t\ti;\r\n\r\n\tif ( show || !elem.is(\":visible\")) {\r\n\t\telem.css( \"opacity\", 0 ).show();\r\n\t\tanimateTo = 1;\r\n\t}\r\n\r\n\t// anims - 1 opacity \"toggles\"\r\n\tfor ( i = 1; i < anims; i++ ) {\r\n\t\telem.animate({\r\n\t\t\topacity: animateTo\r\n\t\t}, duration, o.easing );\r\n\t\tanimateTo = 1 - animateTo;\r\n\t}\r\n\r\n\telem.animate({\r\n\t\topacity: animateTo\r\n\t}, duration, o.easing);\r\n\r\n\telem.queue(function() {\r\n\t\tif ( hide ) {\r\n\t\t\telem.hide();\r\n\t\t}\r\n\t\tdone();\r\n\t});\r\n\r\n\t// We just queued up \"anims\" animations, we need to put them next in the queue\r\n\tif ( queuelen > 1 ) {\r\n\t\tqueue.splice.apply( queue,\r\n\t\t\t[ 1, 0 ].concat( queue.splice( queuelen, anims + 1 ) ) );\r\n\t}\r\n\telem.dequeue();\r\n};\r\n\r\n})(jQuery);\r\n\r\n(function( $, undefined ) {\r\n\r\n$.effects.effect.puff = function( o, done ) {\r\n\tvar elem = $( this ),\r\n\t\tmode = $.effects.setMode( elem, o.mode || \"hide\" ),\r\n\t\thide = mode === \"hide\",\r\n\t\tpercent = parseInt( o.percent, 10 ) || 150,\r\n\t\tfactor = percent / 100,\r\n\t\toriginal = {\r\n\t\t\theight: elem.height(),\r\n\t\t\twidth: elem.width(),\r\n\t\t\touterHeight: elem.outerHeight(),\r\n\t\t\touterWidth: elem.outerWidth()\r\n\t\t};\r\n\r\n\t$.extend( o, {\r\n\t\teffect: \"scale\",\r\n\t\tqueue: false,\r\n\t\tfade: true,\r\n\t\tmode: mode,\r\n\t\tcomplete: done,\r\n\t\tpercent: hide ? percent : 100,\r\n\t\tfrom: hide ?\r\n\t\t\toriginal :\r\n\t\t\t{\r\n\t\t\t\theight: original.height * factor,\r\n\t\t\t\twidth: original.width * factor,\r\n\t\t\t\touterHeight: original.outerHeight * factor,\r\n\t\t\t\touterWidth: original.outerWidth * factor\r\n\t\t\t}\r\n\t});\r\n\r\n\telem.effect( o );\r\n};\r\n\r\n$.effects.effect.scale = function( o, done ) {\r\n\r\n\t// Create element\r\n\tvar el = $( this ),\r\n\t\toptions = $.extend( true, {}, o ),\r\n\t\tmode = $.effects.setMode( el, o.mode || \"effect\" ),\r\n\t\tpercent = parseInt( o.percent, 10 ) ||\r\n\t\t\t( parseInt( o.percent, 10 ) === 0 ? 0 : ( mode === \"hide\" ? 0 : 100 ) ),\r\n\t\tdirection = o.direction || \"both\",\r\n\t\torigin = o.origin,\r\n\t\toriginal = {\r\n\t\t\theight: el.height(),\r\n\t\t\twidth: el.width(),\r\n\t\t\touterHeight: el.outerHeight(),\r\n\t\t\touterWidth: el.outerWidth()\r\n\t\t},\r\n\t\tfactor = {\r\n\t\t\ty: direction !== \"horizontal\" ? (percent / 100) : 1,\r\n\t\t\tx: direction !== \"vertical\" ? (percent / 100) : 1\r\n\t\t};\r\n\r\n\t// We are going to pass this effect to the size effect:\r\n\toptions.effect = \"size\";\r\n\toptions.queue = false;\r\n\toptions.complete = done;\r\n\r\n\t// Set default origin and restore for show/hide\r\n\tif ( mode !== \"effect\" ) {\r\n\t\toptions.origin = origin || [\"middle\",\"center\"];\r\n\t\toptions.restore = true;\r\n\t}\r\n\r\n\toptions.from = o.from || ( mode === \"show\" ? {\r\n\t\theight: 0,\r\n\t\twidth: 0,\r\n\t\touterHeight: 0,\r\n\t\touterWidth: 0\r\n\t} : original );\r\n\toptions.to = {\r\n\t\theight: original.height * factor.y,\r\n\t\twidth: original.width * factor.x,\r\n\t\touterHeight: original.outerHeight * factor.y,\r\n\t\touterWidth: original.outerWidth * factor.x\r\n\t};\r\n\r\n\t// Fade option to support puff\r\n\tif ( options.fade ) {\r\n\t\tif ( mode === \"show\" ) {\r\n\t\t\toptions.from.opacity = 0;\r\n\t\t\toptions.to.opacity = 1;\r\n\t\t}\r\n\t\tif ( mode === \"hide\" ) {\r\n\t\t\toptions.from.opacity = 1;\r\n\t\t\toptions.to.opacity = 0;\r\n\t\t}\r\n\t}\r\n\r\n\t// Animate\r\n\tel.effect( options );\r\n\r\n};\r\n\r\n$.effects.effect.size = function( o, done ) {\r\n\r\n\t// Create element\r\n\tvar original, baseline, factor,\r\n\t\tel = $( this ),\r\n\t\tprops0 = [ \"position\", \"top\", \"bottom\", \"left\", \"right\", \"width\", \"height\", \"overflow\", \"opacity\" ],\r\n\r\n\t\t// Always restore\r\n\t\tprops1 = [ \"position\", \"top\", \"bottom\", \"left\", \"right\", \"overflow\", \"opacity\" ],\r\n\r\n\t\t// Copy for children\r\n\t\tprops2 = [ \"width\", \"height\", \"overflow\" ],\r\n\t\tcProps = [ \"fontSize\" ],\r\n\t\tvProps = [ \"borderTopWidth\", \"borderBottomWidth\", \"paddingTop\", \"paddingBottom\" ],\r\n\t\thProps = [ \"borderLeftWidth\", \"borderRightWidth\", \"paddingLeft\", \"paddingRight\" ],\r\n\r\n\t\t// Set options\r\n\t\tmode = $.effects.setMode( el, o.mode || \"effect\" ),\r\n\t\trestore = o.restore || mode !== \"effect\",\r\n\t\tscale = o.scale || \"both\",\r\n\t\torigin = o.origin || [ \"middle\", \"center\" ],\r\n\t\tposition = el.css( \"position\" ),\r\n\t\tprops = restore ? props0 : props1,\r\n\t\tzero = {\r\n\t\t\theight: 0,\r\n\t\t\twidth: 0,\r\n\t\t\touterHeight: 0,\r\n\t\t\touterWidth: 0\r\n\t\t};\r\n\r\n\tif ( mode === \"show\" ) {\r\n\t\tel.show();\r\n\t}\r\n\toriginal = {\r\n\t\theight: el.height(),\r\n\t\twidth: el.width(),\r\n\t\touterHeight: el.outerHeight(),\r\n\t\touterWidth: el.outerWidth()\r\n\t};\r\n\r\n\tif ( o.mode === \"toggle\" && mode === \"show\" ) {\r\n\t\tel.from = o.to || zero;\r\n\t\tel.to = o.from || original;\r\n\t} else {\r\n\t\tel.from = o.from || ( mode === \"show\" ? zero : original );\r\n\t\tel.to = o.to || ( mode === \"hide\" ? zero : original );\r\n\t}\r\n\r\n\t// Set scaling factor\r\n\tfactor = {\r\n\t\tfrom: {\r\n\t\t\ty: el.from.height / original.height,\r\n\t\t\tx: el.from.width / original.width\r\n\t\t},\r\n\t\tto: {\r\n\t\t\ty: el.to.height / original.height,\r\n\t\t\tx: el.to.width / original.width\r\n\t\t}\r\n\t};\r\n\r\n\t// Scale the css box\r\n\tif ( scale === \"box\" || scale === \"both\" ) {\r\n\r\n\t\t// Vertical props scaling\r\n\t\tif ( factor.from.y !== factor.to.y ) {\r\n\t\t\tprops = props.concat( vProps );\r\n\t\t\tel.from = $.effects.setTransition( el, vProps, factor.from.y, el.from );\r\n\t\t\tel.to = $.effects.setTransition( el, vProps, factor.to.y, el.to );\r\n\t\t}\r\n\r\n\t\t// Horizontal props scaling\r\n\t\tif ( factor.from.x !== factor.to.x ) {\r\n\t\t\tprops = props.concat( hProps );\r\n\t\t\tel.from = $.effects.setTransition( el, hProps, factor.from.x, el.from );\r\n\t\t\tel.to = $.effects.setTransition( el, hProps, factor.to.x, el.to );\r\n\t\t}\r\n\t}\r\n\r\n\t// Scale the content\r\n\tif ( scale === \"content\" || scale === \"both\" ) {\r\n\r\n\t\t// Vertical props scaling\r\n\t\tif ( factor.from.y !== factor.to.y ) {\r\n\t\t\tprops = props.concat( cProps ).concat( props2 );\r\n\t\t\tel.from = $.effects.setTransition( el, cProps, factor.from.y, el.from );\r\n\t\t\tel.to = $.effects.setTransition( el, cProps, factor.to.y, el.to );\r\n\t\t}\r\n\t}\r\n\r\n\t$.effects.save( el, props );\r\n\tel.show();\r\n\t$.effects.createWrapper( el );\r\n\tel.css( \"overflow\", \"hidden\" ).css( el.from );\r\n\r\n\t// Adjust\r\n\tif (origin) { // Calculate baseline shifts\r\n\t\tbaseline = $.effects.getBaseline( origin, original );\r\n\t\tel.from.top = ( original.outerHeight - el.outerHeight() ) * baseline.y;\r\n\t\tel.from.left = ( original.outerWidth - el.outerWidth() ) * baseline.x;\r\n\t\tel.to.top = ( original.outerHeight - el.to.outerHeight ) * baseline.y;\r\n\t\tel.to.left = ( original.outerWidth - el.to.outerWidth ) * baseline.x;\r\n\t}\r\n\tel.css( el.from ); // set top & left\r\n\r\n\t// Animate\r\n\tif ( scale === \"content\" || scale === \"both\" ) { // Scale the children\r\n\r\n\t\t// Add margins/font-size\r\n\t\tvProps = vProps.concat([ \"marginTop\", \"marginBottom\" ]).concat(cProps);\r\n\t\thProps = hProps.concat([ \"marginLeft\", \"marginRight\" ]);\r\n\t\tprops2 = props0.concat(vProps).concat(hProps);\r\n\r\n\t\tel.find( \"*[width]\" ).each( function(){\r\n\t\t\tvar child = $( this ),\r\n\t\t\t\tc_original = {\r\n\t\t\t\t\theight: child.height(),\r\n\t\t\t\t\twidth: child.width(),\r\n\t\t\t\t\touterHeight: child.outerHeight(),\r\n\t\t\t\t\touterWidth: child.outerWidth()\r\n\t\t\t\t};\r\n\t\t\tif (restore) {\r\n\t\t\t\t$.effects.save(child, props2);\r\n\t\t\t}\r\n\r\n\t\t\tchild.from = {\r\n\t\t\t\theight: c_original.height * factor.from.y,\r\n\t\t\t\twidth: c_original.width * factor.from.x,\r\n\t\t\t\touterHeight: c_original.outerHeight * factor.from.y,\r\n\t\t\t\touterWidth: c_original.outerWidth * factor.from.x\r\n\t\t\t};\r\n\t\t\tchild.to = {\r\n\t\t\t\theight: c_original.height * factor.to.y,\r\n\t\t\t\twidth: c_original.width * factor.to.x,\r\n\t\t\t\touterHeight: c_original.height * factor.to.y,\r\n\t\t\t\touterWidth: c_original.width * factor.to.x\r\n\t\t\t};\r\n\r\n\t\t\t// Vertical props scaling\r\n\t\t\tif ( factor.from.y !== factor.to.y ) {\r\n\t\t\t\tchild.from = $.effects.setTransition( child, vProps, factor.from.y, child.from );\r\n\t\t\t\tchild.to = $.effects.setTransition( child, vProps, factor.to.y, child.to );\r\n\t\t\t}\r\n\r\n\t\t\t// Horizontal props scaling\r\n\t\t\tif ( factor.from.x !== factor.to.x ) {\r\n\t\t\t\tchild.from = $.effects.setTransition( child, hProps, factor.from.x, child.from );\r\n\t\t\t\tchild.to = $.effects.setTransition( child, hProps, factor.to.x, child.to );\r\n\t\t\t}\r\n\r\n\t\t\t// Animate children\r\n\t\t\tchild.css( child.from );\r\n\t\t\tchild.animate( child.to, o.duration, o.easing, function() {\r\n\r\n\t\t\t\t// Restore children\r\n\t\t\t\tif ( restore ) {\r\n\t\t\t\t\t$.effects.restore( child, props2 );\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\r\n\t// Animate\r\n\tel.animate( el.to, {\r\n\t\tqueue: false,\r\n\t\tduration: o.duration,\r\n\t\teasing: o.easing,\r\n\t\tcomplete: function() {\r\n\t\t\tif ( el.to.opacity === 0 ) {\r\n\t\t\t\tel.css( \"opacity\", el.from.opacity );\r\n\t\t\t}\r\n\t\t\tif( mode === \"hide\" ) {\r\n\t\t\t\tel.hide();\r\n\t\t\t}\r\n\t\t\t$.effects.restore( el, props );\r\n\t\t\tif ( !restore ) {\r\n\r\n\t\t\t\t// we need to calculate our new positioning based on the scaling\r\n\t\t\t\tif ( position === \"static\" ) {\r\n\t\t\t\t\tel.css({\r\n\t\t\t\t\t\tposition: \"relative\",\r\n\t\t\t\t\t\ttop: el.to.top,\r\n\t\t\t\t\t\tleft: el.to.left\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\t$.each([ \"top\", \"left\" ], function( idx, pos ) {\r\n\t\t\t\t\t\tel.css( pos, function( _, str ) {\r\n\t\t\t\t\t\t\tvar val = parseInt( str, 10 ),\r\n\t\t\t\t\t\t\t\ttoRef = idx ? el.to.left : el.to.top;\r\n\r\n\t\t\t\t\t\t\t// if original was \"auto\", recalculate the new value from wrapper\r\n\t\t\t\t\t\t\tif ( str === \"auto\" ) {\r\n\t\t\t\t\t\t\t\treturn toRef + \"px\";\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\treturn val + toRef + \"px\";\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t$.effects.removeWrapper( el );\r\n\t\t\tdone();\r\n\t\t}\r\n\t});\r\n\r\n};\r\n\r\n})(jQuery);\r\n\r\n(function( $, undefined ) {\r\n\r\n$.effects.effect.shake = function( o, done ) {\r\n\r\n\tvar el = $( this ),\r\n\t\tprops = [ \"position\", \"top\", \"bottom\", \"left\", \"right\", \"height\", \"width\" ],\r\n\t\tmode = $.effects.setMode( el, o.mode || \"effect\" ),\r\n\t\tdirection = o.direction || \"left\",\r\n\t\tdistance = o.distance || 20,\r\n\t\ttimes = o.times || 3,\r\n\t\tanims = times * 2 + 1,\r\n\t\tspeed = Math.round(o.duration/anims),\r\n\t\tref = (direction === \"up\" || direction === \"down\") ? \"top\" : \"left\",\r\n\t\tpositiveMotion = (direction === \"up\" || direction === \"left\"),\r\n\t\tanimation = {},\r\n\t\tanimation1 = {},\r\n\t\tanimation2 = {},\r\n\t\ti,\r\n\r\n\t\t// we will need to re-assemble the queue to stack our animations in place\r\n\t\tqueue = el.queue(),\r\n\t\tqueuelen = queue.length;\r\n\r\n\t$.effects.save( el, props );\r\n\tel.show();\r\n\t$.effects.createWrapper( el );\r\n\r\n\t// Animation\r\n\tanimation[ ref ] = ( positiveMotion ? \"-=\" : \"+=\" ) + distance;\r\n\tanimation1[ ref ] = ( positiveMotion ? \"+=\" : \"-=\" ) + distance * 2;\r\n\tanimation2[ ref ] = ( positiveMotion ? \"-=\" : \"+=\" ) + distance * 2;\r\n\r\n\t// Animate\r\n\tel.animate( animation, speed, o.easing );\r\n\r\n\t// Shakes\r\n\tfor ( i = 1; i < times; i++ ) {\r\n\t\tel.animate( animation1, speed, o.easing ).animate( animation2, speed, o.easing );\r\n\t}\r\n\tel\r\n\t\t.animate( animation1, speed, o.easing )\r\n\t\t.animate( animation, speed / 2, o.easing )\r\n\t\t.queue(function() {\r\n\t\t\tif ( mode === \"hide\" ) {\r\n\t\t\t\tel.hide();\r\n\t\t\t}\r\n\t\t\t$.effects.restore( el, props );\r\n\t\t\t$.effects.removeWrapper( el );\r\n\t\t\tdone();\r\n\t\t});\r\n\r\n\t// inject all the animations we just queued to be first in line (after \"inprogress\")\r\n\tif ( queuelen > 1) {\r\n\t\tqueue.splice.apply( queue,\r\n\t\t\t[ 1, 0 ].concat( queue.splice( queuelen, anims + 1 ) ) );\r\n\t}\r\n\tel.dequeue();\r\n\r\n};\r\n\r\n})(jQuery);\r\n\r\n(function( $, undefined ) {\r\n\r\n$.effects.effect.slide = function( o, done ) {\r\n\r\n\t// Create element\r\n\tvar el = $( this ),\r\n\t\tprops = [ \"position\", \"top\", \"bottom\", \"left\", \"right\", \"width\", \"height\" ],\r\n\t\tmode = $.effects.setMode( el, o.mode || \"show\" ),\r\n\t\tshow = mode === \"show\",\r\n\t\tdirection = o.direction || \"left\",\r\n\t\tref = (direction === \"up\" || direction === \"down\") ? \"top\" : \"left\",\r\n\t\tpositiveMotion = (direction === \"up\" || direction === \"left\"),\r\n\t\tdistance,\r\n\t\tanimation = {};\r\n\r\n\t// Adjust\r\n\t$.effects.save( el, props );\r\n\tel.show();\r\n\tdistance = o.distance || el[ ref === \"top\" ? \"outerHeight\" : \"outerWidth\" ]( true );\r\n\r\n\t$.effects.createWrapper( el ).css({\r\n\t\toverflow: \"hidden\"\r\n\t});\r\n\r\n\tif ( show ) {\r\n\t\tel.css( ref, positiveMotion ? (isNaN(distance) ? \"-\" + distance : -distance) : distance );\r\n\t}\r\n\r\n\t// Animation\r\n\tanimation[ ref ] = ( show ?\r\n\t\t( positiveMotion ? \"+=\" : \"-=\") :\r\n\t\t( positiveMotion ? \"-=\" : \"+=\")) +\r\n\t\tdistance;\r\n\r\n\t// Animate\r\n\tel.animate( animation, {\r\n\t\tqueue: false,\r\n\t\tduration: o.duration,\r\n\t\teasing: o.easing,\r\n\t\tcomplete: function() {\r\n\t\t\tif ( mode === \"hide\" ) {\r\n\t\t\t\tel.hide();\r\n\t\t\t}\r\n\t\t\t$.effects.restore( el, props );\r\n\t\t\t$.effects.removeWrapper( el );\r\n\t\t\tdone();\r\n\t\t}\r\n\t});\r\n};\r\n\r\n})(jQuery);\r\n\r\n(function( $, undefined ) {\r\n\r\n$.effects.effect.transfer = function( o, done ) {\r\n\tvar elem = $( this ),\r\n\t\ttarget = $( o.to ),\r\n\t\ttargetFixed = target.css( \"position\" ) === \"fixed\",\r\n\t\tbody = $(\"body\"),\r\n\t\tfixTop = targetFixed ? body.scrollTop() : 0,\r\n\t\tfixLeft = targetFixed ? body.scrollLeft() : 0,\r\n\t\tendPosition = target.offset(),\r\n\t\tanimation = {\r\n\t\t\ttop: endPosition.top - fixTop ,\r\n\t\t\tleft: endPosition.left - fixLeft ,\r\n\t\t\theight: target.innerHeight(),\r\n\t\t\twidth: target.innerWidth()\r\n\t\t},\r\n\t\tstartPosition = elem.offset(),\r\n\t\ttransfer = $( \"<div class='ui-effects-transfer'></div>\" )\r\n\t\t\t.appendTo( document.body )\r\n\t\t\t.addClass( o.className )\r\n\t\t\t.css({\r\n\t\t\t\ttop: startPosition.top - fixTop ,\r\n\t\t\t\tleft: startPosition.left - fixLeft ,\r\n\t\t\t\theight: elem.innerHeight(),\r\n\t\t\t\twidth: elem.innerWidth(),\r\n\t\t\t\tposition: targetFixed ? \"fixed\" : \"absolute\"\r\n\t\t\t})\r\n\t\t\t.animate( animation, o.duration, o.easing, function() {\r\n\t\t\t\ttransfer.remove();\r\n\t\t\t\tdone();\r\n\t\t\t});\r\n};\r\n\r\n})(jQuery);\r\n\r\n(function( $, undefined ) {\r\n\r\n$.widget( \"ui.menu\", {\r\n\tversion: \"1.10.2\",\r\n\tdefaultElement: \"<ul>\",\r\n\tdelay: 300,\r\n\toptions: {\r\n\t\ticons: {\r\n\t\t\tsubmenu: \"ui-icon-carat-1-e\"\r\n\t\t},\r\n\t\tmenus: \"ul\",\r\n\t\tposition: {\r\n\t\t\tmy: \"left top\",\r\n\t\t\tat: \"right top\"\r\n\t\t},\r\n\t\trole: \"menu\",\r\n\r\n\t\t// callbacks\r\n\t\tblur: null,\r\n\t\tfocus: null,\r\n\t\tselect: null\r\n\t},\r\n\r\n\t_create: function() {\r\n\t\tthis.activeMenu = this.element;\r\n\t\t// flag used to prevent firing of the click handler\r\n\t\t// as the event bubbles up through nested menus\r\n\t\tthis.mouseHandled = false;\r\n\t\tthis.element\r\n\t\t\t.uniqueId()\r\n\t\t\t.addClass( \"ui-menu ui-widget ui-widget-content ui-corner-all\" )\r\n\t\t\t.toggleClass( \"ui-menu-icons\", !!this.element.find( \".ui-icon\" ).length )\r\n\t\t\t.attr({\r\n\t\t\t\trole: this.options.role,\r\n\t\t\t\ttabIndex: 0\r\n\t\t\t})\r\n\t\t\t// need to catch all clicks on disabled menu\r\n\t\t\t// not possible through _on\r\n\t\t\t.bind( \"click\" + this.eventNamespace, $.proxy(function( event ) {\r\n\t\t\t\tif ( this.options.disabled ) {\r\n\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t}\r\n\t\t\t}, this ));\r\n\r\n\t\tif ( this.options.disabled ) {\r\n\t\t\tthis.element\r\n\t\t\t\t.addClass( \"ui-state-disabled\" )\r\n\t\t\t\t.attr( \"aria-disabled\", \"true\" );\r\n\t\t}\r\n\r\n\t\tthis._on({\r\n\t\t\t// Prevent focus from sticking to links inside menu after clicking\r\n\t\t\t// them (focus should always stay on UL during navigation).\r\n\t\t\t\"mousedown .ui-menu-item > a\": function( event ) {\r\n\t\t\t\tevent.preventDefault();\r\n\t\t\t},\r\n\t\t\t\"click .ui-state-disabled > a\": function( event ) {\r\n\t\t\t\tevent.preventDefault();\r\n\t\t\t},\r\n\t\t\t\"click .ui-menu-item:has(a)\": function( event ) {\r\n\t\t\t\tvar target = $( event.target ).closest( \".ui-menu-item\" );\r\n\t\t\t\tif ( !this.mouseHandled && target.not( \".ui-state-disabled\" ).length ) {\r\n\t\t\t\t\tthis.mouseHandled = true;\r\n\r\n\t\t\t\t\tthis.select( event );\r\n\t\t\t\t\t// Open submenu on click\r\n\t\t\t\t\tif ( target.has( \".ui-menu\" ).length ) {\r\n\t\t\t\t\t\tthis.expand( event );\r\n\t\t\t\t\t} else if ( !this.element.is( \":focus\" ) ) {\r\n\t\t\t\t\t\t// Redirect focus to the menu\r\n\t\t\t\t\t\tthis.element.trigger( \"focus\", [ true ] );\r\n\r\n\t\t\t\t\t\t// If the active item is on the top level, let it stay active.\r\n\t\t\t\t\t\t// Otherwise, blur the active item since it is no longer visible.\r\n\t\t\t\t\t\tif ( this.active && this.active.parents( \".ui-menu\" ).length === 1 ) {\r\n\t\t\t\t\t\t\tclearTimeout( this.timer );\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t\"mouseenter .ui-menu-item\": function( event ) {\r\n\t\t\t\tvar target = $( event.currentTarget );\r\n\t\t\t\t// Remove ui-state-active class from siblings of the newly focused menu item\r\n\t\t\t\t// to avoid a jump caused by adjacent elements both having a class with a border\r\n\t\t\t\ttarget.siblings().children( \".ui-state-active\" ).removeClass( \"ui-state-active\" );\r\n\t\t\t\tthis.focus( event, target );\r\n\t\t\t},\r\n\t\t\tmouseleave: \"collapseAll\",\r\n\t\t\t\"mouseleave .ui-menu\": \"collapseAll\",\r\n\t\t\tfocus: function( event, keepActiveItem ) {\r\n\t\t\t\t// If there's already an active item, keep it active\r\n\t\t\t\t// If not, activate the first item\r\n\t\t\t\tvar item = this.active || this.element.children( \".ui-menu-item\" ).eq( 0 );\r\n\r\n\t\t\t\tif ( !keepActiveItem ) {\r\n\t\t\t\t\tthis.focus( event, item );\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tblur: function( event ) {\r\n\t\t\t\tthis._delay(function() {\r\n\t\t\t\t\tif ( !$.contains( this.element[0], this.document[0].activeElement ) ) {\r\n\t\t\t\t\t\tthis.collapseAll( event );\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tkeydown: \"_keydown\"\r\n\t\t});\r\n\r\n\t\tthis.refresh();\r\n\r\n\t\t// Clicks outside of a menu collapse any open menus\r\n\t\tthis._on( this.document, {\r\n\t\t\tclick: function( event ) {\r\n\t\t\t\tif ( !$( event.target ).closest( \".ui-menu\" ).length ) {\r\n\t\t\t\t\tthis.collapseAll( event );\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Reset the mouseHandled flag\r\n\t\t\t\tthis.mouseHandled = false;\r\n\t\t\t}\r\n\t\t});\r\n\t},\r\n\r\n\t_destroy: function() {\r\n\t\t// Destroy (sub)menus\r\n\t\tthis.element\r\n\t\t\t.removeAttr( \"aria-activedescendant\" )\r\n\t\t\t.find( \".ui-menu\" ).addBack()\r\n\t\t\t\t.removeClass( \"ui-menu ui-widget ui-widget-content ui-corner-all ui-menu-icons\" )\r\n\t\t\t\t.removeAttr( \"role\" )\r\n\t\t\t\t.removeAttr( \"tabIndex\" )\r\n\t\t\t\t.removeAttr( \"aria-labelledby\" )\r\n\t\t\t\t.removeAttr( \"aria-expanded\" )\r\n\t\t\t\t.removeAttr( \"aria-hidden\" )\r\n\t\t\t\t.removeAttr( \"aria-disabled\" )\r\n\t\t\t\t.removeUniqueId()\r\n\t\t\t\t.show();\r\n\r\n\t\t// Destroy menu items\r\n\t\tthis.element.find( \".ui-menu-item\" )\r\n\t\t\t.removeClass( \"ui-menu-item\" )\r\n\t\t\t.removeAttr( \"role\" )\r\n\t\t\t.removeAttr( \"aria-disabled\" )\r\n\t\t\t.children( \"a\" )\r\n\t\t\t\t.removeUniqueId()\r\n\t\t\t\t.removeClass( \"ui-corner-all ui-state-hover\" )\r\n\t\t\t\t.removeAttr( \"tabIndex\" )\r\n\t\t\t\t.removeAttr( \"role\" )\r\n\t\t\t\t.removeAttr( \"aria-haspopup\" )\r\n\t\t\t\t.children().each( function() {\r\n\t\t\t\t\tvar elem = $( this );\r\n\t\t\t\t\tif ( elem.data( \"ui-menu-submenu-carat\" ) ) {\r\n\t\t\t\t\t\telem.remove();\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t// Destroy menu dividers\r\n\t\tthis.element.find( \".ui-menu-divider\" ).removeClass( \"ui-menu-divider ui-widget-content\" );\r\n\t},\r\n\r\n\t_keydown: function( event ) {\r\n\t\t/*jshint maxcomplexity:20*/\r\n\t\tvar match, prev, character, skip, regex,\r\n\t\t\tpreventDefault = true;\r\n\r\n\t\tfunction escape( value ) {\r\n\t\t\treturn value.replace( /[\\-\\[\\]{}()*+?.,\\\\\\^$|#\\s]/g, \"\\\\$&\" );\r\n\t\t}\r\n\r\n\t\tswitch ( event.keyCode ) {\r\n\t\tcase $.ui.keyCode.PAGE_UP:\r\n\t\t\tthis.previousPage( event );\r\n\t\t\tbreak;\r\n\t\tcase $.ui.keyCode.PAGE_DOWN:\r\n\t\t\tthis.nextPage( event );\r\n\t\t\tbreak;\r\n\t\tcase $.ui.keyCode.HOME:\r\n\t\t\tthis._move( \"first\", \"first\", event );\r\n\t\t\tbreak;\r\n\t\tcase $.ui.keyCode.END:\r\n\t\t\tthis._move( \"last\", \"last\", event );\r\n\t\t\tbreak;\r\n\t\tcase $.ui.keyCode.UP:\r\n\t\t\tthis.previous( event );\r\n\t\t\tbreak;\r\n\t\tcase $.ui.keyCode.DOWN:\r\n\t\t\tthis.next( event );\r\n\t\t\tbreak;\r\n\t\tcase $.ui.keyCode.LEFT:\r\n\t\t\tthis.collapse( event );\r\n\t\t\tbreak;\r\n\t\tcase $.ui.keyCode.RIGHT:\r\n\t\t\tif ( this.active && !this.active.is( \".ui-state-disabled\" ) ) {\r\n\t\t\t\tthis.expand( event );\r\n\t\t\t}\r\n\t\t\tbreak;\r\n\t\tcase $.ui.keyCode.ENTER:\r\n\t\tcase $.ui.keyCode.SPACE:\r\n\t\t\tthis._activate( event );\r\n\t\t\tbreak;\r\n\t\tcase $.ui.keyCode.ESCAPE:\r\n\t\t\tthis.collapse( event );\r\n\t\t\tbreak;\r\n\t\tdefault:\r\n\t\t\tpreventDefault = false;\r\n\t\t\tprev = this.previousFilter || \"\";\r\n\t\t\tcharacter = String.fromCharCode( event.keyCode );\r\n\t\t\tskip = false;\r\n\r\n\t\t\tclearTimeout( this.filterTimer );\r\n\r\n\t\t\tif ( character === prev ) {\r\n\t\t\t\tskip = true;\r\n\t\t\t} else {\r\n\t\t\t\tcharacter = prev + character;\r\n\t\t\t}\r\n\r\n\t\t\tregex = new RegExp( \"^\" + escape( character ), \"i\" );\r\n\t\t\tmatch = this.activeMenu.children( \".ui-menu-item\" ).filter(function() {\r\n\t\t\t\treturn regex.test( $( this ).children( \"a\" ).text() );\r\n\t\t\t});\r\n\t\t\tmatch = skip && match.index( this.active.next() ) !== -1 ?\r\n\t\t\t\tthis.active.nextAll( \".ui-menu-item\" ) :\r\n\t\t\t\tmatch;\r\n\r\n\t\t\t// If no matches on the current filter, reset to the last character pressed\r\n\t\t\t// to move down the menu to the first item that starts with that character\r\n\t\t\tif ( !match.length ) {\r\n\t\t\t\tcharacter = String.fromCharCode( event.keyCode );\r\n\t\t\t\tregex = new RegExp( \"^\" + escape( character ), \"i\" );\r\n\t\t\t\tmatch = this.activeMenu.children( \".ui-menu-item\" ).filter(function() {\r\n\t\t\t\t\treturn regex.test( $( this ).children( \"a\" ).text() );\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tif ( match.length ) {\r\n\t\t\t\tthis.focus( event, match );\r\n\t\t\t\tif ( match.length > 1 ) {\r\n\t\t\t\t\tthis.previousFilter = character;\r\n\t\t\t\t\tthis.filterTimer = this._delay(function() {\r\n\t\t\t\t\t\tdelete this.previousFilter;\r\n\t\t\t\t\t}, 1000 );\r\n\t\t\t\t} else {\r\n\t\t\t\t\tdelete this.previousFilter;\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tdelete this.previousFilter;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif ( preventDefault ) {\r\n\t\t\tevent.preventDefault();\r\n\t\t}\r\n\t},\r\n\r\n\t_activate: function( event ) {\r\n\t\tif ( !this.active.is( \".ui-state-disabled\" ) ) {\r\n\t\t\tif ( this.active.children( \"a[aria-haspopup='true']\" ).length ) {\r\n\t\t\t\tthis.expand( event );\r\n\t\t\t} else {\r\n\t\t\t\tthis.select( event );\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\trefresh: function() {\r\n\t\tvar menus,\r\n\t\t\ticon = this.options.icons.submenu,\r\n\t\t\tsubmenus = this.element.find( this.options.menus );\r\n\r\n\t\t// Initialize nested menus\r\n\t\tsubmenus.filter( \":not(.ui-menu)\" )\r\n\t\t\t.addClass( \"ui-menu ui-widget ui-widget-content ui-corner-all\" )\r\n\t\t\t.hide()\r\n\t\t\t.attr({\r\n\t\t\t\trole: this.options.role,\r\n\t\t\t\t\"aria-hidden\": \"true\",\r\n\t\t\t\t\"aria-expanded\": \"false\"\r\n\t\t\t})\r\n\t\t\t.each(function() {\r\n\t\t\t\tvar menu = $( this ),\r\n\t\t\t\t\titem = menu.prev( \"a\" ),\r\n\t\t\t\t\tsubmenuCarat = $( \"<span>\" )\r\n\t\t\t\t\t\t.addClass( \"ui-menu-icon ui-icon \" + icon )\r\n\t\t\t\t\t\t.data( \"ui-menu-submenu-carat\", true );\r\n\r\n\t\t\t\titem\r\n\t\t\t\t\t.attr( \"aria-haspopup\", \"true\" )\r\n\t\t\t\t\t.prepend( submenuCarat );\r\n\t\t\t\tmenu.attr( \"aria-labelledby\", item.attr( \"id\" ) );\r\n\t\t\t});\r\n\r\n\t\tmenus = submenus.add( this.element );\r\n\r\n\t\t// Don't refresh list items that are already adapted\r\n\t\tmenus.children( \":not(.ui-menu-item):has(a)\" )\r\n\t\t\t.addClass( \"ui-menu-item\" )\r\n\t\t\t.attr( \"role\", \"presentation\" )\r\n\t\t\t.children( \"a\" )\r\n\t\t\t\t.uniqueId()\r\n\t\t\t\t.addClass( \"ui-corner-all\" )\r\n\t\t\t\t.attr({\r\n\t\t\t\t\ttabIndex: -1,\r\n\t\t\t\t\trole: this._itemRole()\r\n\t\t\t\t});\r\n\r\n\t\t// Initialize unlinked menu-items containing spaces and/or dashes only as dividers\r\n\t\tmenus.children( \":not(.ui-menu-item)\" ).each(function() {\r\n\t\t\tvar item = $( this );\r\n\t\t\t// hyphen, em dash, en dash\r\n\t\t\tif ( !/[^\\-\\u2014\\u2013\\s]/.test( item.text() ) ) {\r\n\t\t\t\titem.addClass( \"ui-widget-content ui-menu-divider\" );\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t// Add aria-disabled attribute to any disabled menu item\r\n\t\tmenus.children( \".ui-state-disabled\" ).attr( \"aria-disabled\", \"true\" );\r\n\r\n\t\t// If the active item has been removed, blur the menu\r\n\t\tif ( this.active && !$.contains( this.element[ 0 ], this.active[ 0 ] ) ) {\r\n\t\t\tthis.blur();\r\n\t\t}\r\n\t},\r\n\r\n\t_itemRole: function() {\r\n\t\treturn {\r\n\t\t\tmenu: \"menuitem\",\r\n\t\t\tlistbox: \"option\"\r\n\t\t}[ this.options.role ];\r\n\t},\r\n\r\n\t_setOption: function( key, value ) {\r\n\t\tif ( key === \"icons\" ) {\r\n\t\t\tthis.element.find( \".ui-menu-icon\" )\r\n\t\t\t\t.removeClass( this.options.icons.submenu )\r\n\t\t\t\t.addClass( value.submenu );\r\n\t\t}\r\n\t\tthis._super( key, value );\r\n\t},\r\n\r\n\tfocus: function( event, item ) {\r\n\t\tvar nested, focused;\r\n\t\tthis.blur( event, event && event.type === \"focus\" );\r\n\r\n\t\tthis._scrollIntoView( item );\r\n\r\n\t\tthis.active = item.first();\r\n\t\tfocused = this.active.children( \"a\" ).addClass( \"ui-state-focus\" );\r\n\t\t// Only update aria-activedescendant if there's a role\r\n\t\t// otherwise we assume focus is managed elsewhere\r\n\t\tif ( this.options.role ) {\r\n\t\t\tthis.element.attr( \"aria-activedescendant\", focused.attr( \"id\" ) );\r\n\t\t}\r\n\r\n\t\t// Highlight active parent menu item, if any\r\n\t\tthis.active\r\n\t\t\t.parent()\r\n\t\t\t.closest( \".ui-menu-item\" )\r\n\t\t\t.children( \"a:first\" )\r\n\t\t\t.addClass( \"ui-state-active\" );\r\n\r\n\t\tif ( event && event.type === \"keydown\" ) {\r\n\t\t\tthis._close();\r\n\t\t} else {\r\n\t\t\tthis.timer = this._delay(function() {\r\n\t\t\t\tthis._close();\r\n\t\t\t}, this.delay );\r\n\t\t}\r\n\r\n\t\tnested = item.children( \".ui-menu\" );\r\n\t\tif ( nested.length && ( /^mouse/.test( event.type ) ) ) {\r\n\t\t\tthis._startOpening(nested);\r\n\t\t}\r\n\t\tthis.activeMenu = item.parent();\r\n\r\n\t\tthis._trigger( \"focus\", event, { item: item } );\r\n\t},\r\n\r\n\t_scrollIntoView: function( item ) {\r\n\t\tvar borderTop, paddingTop, offset, scroll, elementHeight, itemHeight;\r\n\t\tif ( this._hasScroll() ) {\r\n\t\t\tborderTop = parseFloat( $.css( this.activeMenu[0], \"borderTopWidth\" ) ) || 0;\r\n\t\t\tpaddingTop = parseFloat( $.css( this.activeMenu[0], \"paddingTop\" ) ) || 0;\r\n\t\t\toffset = item.offset().top - this.activeMenu.offset().top - borderTop - paddingTop;\r\n\t\t\tscroll = this.activeMenu.scrollTop();\r\n\t\t\telementHeight = this.activeMenu.height();\r\n\t\t\titemHeight = item.height();\r\n\r\n\t\t\tif ( offset < 0 ) {\r\n\t\t\t\tthis.activeMenu.scrollTop( scroll + offset );\r\n\t\t\t} else if ( offset + itemHeight > elementHeight ) {\r\n\t\t\t\tthis.activeMenu.scrollTop( scroll + offset - elementHeight + itemHeight );\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\tblur: function( event, fromFocus ) {\r\n\t\tif ( !fromFocus ) {\r\n\t\t\tclearTimeout( this.timer );\r\n\t\t}\r\n\r\n\t\tif ( !this.active ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tthis.active.children( \"a\" ).removeClass( \"ui-state-focus\" );\r\n\t\tthis.active = null;\r\n\r\n\t\tthis._trigger( \"blur\", event, { item: this.active } );\r\n\t},\r\n\r\n\t_startOpening: function( submenu ) {\r\n\t\tclearTimeout( this.timer );\r\n\r\n\t\t// Don't open if already open fixes a Firefox bug that caused a .5 pixel\r\n\t\t// shift in the submenu position when mousing over the carat icon\r\n\t\tif ( submenu.attr( \"aria-hidden\" ) !== \"true\" ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tthis.timer = this._delay(function() {\r\n\t\t\tthis._close();\r\n\t\t\tthis._open( submenu );\r\n\t\t}, this.delay );\r\n\t},\r\n\r\n\t_open: function( submenu ) {\r\n\t\tvar position = $.extend({\r\n\t\t\tof: this.active\r\n\t\t}, this.options.position );\r\n\r\n\t\tclearTimeout( this.timer );\r\n\t\tthis.element.find( \".ui-menu\" ).not( submenu.parents( \".ui-menu\" ) )\r\n\t\t\t.hide()\r\n\t\t\t.attr( \"aria-hidden\", \"true\" );\r\n\r\n\t\tsubmenu\r\n\t\t\t.show()\r\n\t\t\t.removeAttr( \"aria-hidden\" )\r\n\t\t\t.attr( \"aria-expanded\", \"true\" )\r\n\t\t\t.position( position );\r\n\t},\r\n\r\n\tcollapseAll: function( event, all ) {\r\n\t\tclearTimeout( this.timer );\r\n\t\tthis.timer = this._delay(function() {\r\n\t\t\t// If we were passed an event, look for the submenu that contains the event\r\n\t\t\tvar currentMenu = all ? this.element :\r\n\t\t\t\t$( event && event.target ).closest( this.element.find( \".ui-menu\" ) );\r\n\r\n\t\t\t// If we found no valid submenu ancestor, use the main menu to close all sub menus anyway\r\n\t\t\tif ( !currentMenu.length ) {\r\n\t\t\t\tcurrentMenu = this.element;\r\n\t\t\t}\r\n\r\n\t\t\tthis._close( currentMenu );\r\n\r\n\t\t\tthis.blur( event );\r\n\t\t\tthis.activeMenu = currentMenu;\r\n\t\t}, this.delay );\r\n\t},\r\n\r\n\t// With no arguments, closes the currently active menu - if nothing is active\r\n\t// it closes all menus.  If passed an argument, it will search for menus BELOW\r\n\t_close: function( startMenu ) {\r\n\t\tif ( !startMenu ) {\r\n\t\t\tstartMenu = this.active ? this.active.parent() : this.element;\r\n\t\t}\r\n\r\n\t\tstartMenu\r\n\t\t\t.find( \".ui-menu\" )\r\n\t\t\t\t.hide()\r\n\t\t\t\t.attr( \"aria-hidden\", \"true\" )\r\n\t\t\t\t.attr( \"aria-expanded\", \"false\" )\r\n\t\t\t.end()\r\n\t\t\t.find( \"a.ui-state-active\" )\r\n\t\t\t\t.removeClass( \"ui-state-active\" );\r\n\t},\r\n\r\n\tcollapse: function( event ) {\r\n\t\tvar newItem = this.active &&\r\n\t\t\tthis.active.parent().closest( \".ui-menu-item\", this.element );\r\n\t\tif ( newItem && newItem.length ) {\r\n\t\t\tthis._close();\r\n\t\t\tthis.focus( event, newItem );\r\n\t\t}\r\n\t},\r\n\r\n\texpand: function( event ) {\r\n\t\tvar newItem = this.active &&\r\n\t\t\tthis.active\r\n\t\t\t\t.children( \".ui-menu \" )\r\n\t\t\t\t.children( \".ui-menu-item\" )\r\n\t\t\t\t.first();\r\n\r\n\t\tif ( newItem && newItem.length ) {\r\n\t\t\tthis._open( newItem.parent() );\r\n\r\n\t\t\t// Delay so Firefox will not hide activedescendant change in expanding submenu from AT\r\n\t\t\tthis._delay(function() {\r\n\t\t\t\tthis.focus( event, newItem );\r\n\t\t\t});\r\n\t\t}\r\n\t},\r\n\r\n\tnext: function( event ) {\r\n\t\tthis._move( \"next\", \"first\", event );\r\n\t},\r\n\r\n\tprevious: function( event ) {\r\n\t\tthis._move( \"prev\", \"last\", event );\r\n\t},\r\n\r\n\tisFirstItem: function() {\r\n\t\treturn this.active && !this.active.prevAll( \".ui-menu-item\" ).length;\r\n\t},\r\n\r\n\tisLastItem: function() {\r\n\t\treturn this.active && !this.active.nextAll( \".ui-menu-item\" ).length;\r\n\t},\r\n\r\n\t_move: function( direction, filter, event ) {\r\n\t\tvar next;\r\n\t\tif ( this.active ) {\r\n\t\t\tif ( direction === \"first\" || direction === \"last\" ) {\r\n\t\t\t\tnext = this.active\r\n\t\t\t\t\t[ direction === \"first\" ? \"prevAll\" : \"nextAll\" ]( \".ui-menu-item\" )\r\n\t\t\t\t\t.eq( -1 );\r\n\t\t\t} else {\r\n\t\t\t\tnext = this.active\r\n\t\t\t\t\t[ direction + \"All\" ]( \".ui-menu-item\" )\r\n\t\t\t\t\t.eq( 0 );\r\n\t\t\t}\r\n\t\t}\r\n\t\tif ( !next || !next.length || !this.active ) {\r\n\t\t\tnext = this.activeMenu.children( \".ui-menu-item\" )[ filter ]();\r\n\t\t}\r\n\r\n\t\tthis.focus( event, next );\r\n\t},\r\n\r\n\tnextPage: function( event ) {\r\n\t\tvar item, base, height;\r\n\r\n\t\tif ( !this.active ) {\r\n\t\t\tthis.next( event );\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif ( this.isLastItem() ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif ( this._hasScroll() ) {\r\n\t\t\tbase = this.active.offset().top;\r\n\t\t\theight = this.element.height();\r\n\t\t\tthis.active.nextAll( \".ui-menu-item\" ).each(function() {\r\n\t\t\t\titem = $( this );\r\n\t\t\t\treturn item.offset().top - base - height < 0;\r\n\t\t\t});\r\n\r\n\t\t\tthis.focus( event, item );\r\n\t\t} else {\r\n\t\t\tthis.focus( event, this.activeMenu.children( \".ui-menu-item\" )\r\n\t\t\t\t[ !this.active ? \"first\" : \"last\" ]() );\r\n\t\t}\r\n\t},\r\n\r\n\tpreviousPage: function( event ) {\r\n\t\tvar item, base, height;\r\n\t\tif ( !this.active ) {\r\n\t\t\tthis.next( event );\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif ( this.isFirstItem() ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif ( this._hasScroll() ) {\r\n\t\t\tbase = this.active.offset().top;\r\n\t\t\theight = this.element.height();\r\n\t\t\tthis.active.prevAll( \".ui-menu-item\" ).each(function() {\r\n\t\t\t\titem = $( this );\r\n\t\t\t\treturn item.offset().top - base + height > 0;\r\n\t\t\t});\r\n\r\n\t\t\tthis.focus( event, item );\r\n\t\t} else {\r\n\t\t\tthis.focus( event, this.activeMenu.children( \".ui-menu-item\" ).first() );\r\n\t\t}\r\n\t},\r\n\r\n\t_hasScroll: function() {\r\n\t\treturn this.element.outerHeight() < this.element.prop( \"scrollHeight\" );\r\n\t},\r\n\r\n\tselect: function( event ) {\r\n\t\t// TODO: It should never be possible to not have an active item at this\r\n\t\t// point, but the tests don't trigger mouseenter before click.\r\n\t\tthis.active = this.active || $( event.target ).closest( \".ui-menu-item\" );\r\n\t\tvar ui = { item: this.active };\r\n\t\tif ( !this.active.has( \".ui-menu\" ).length ) {\r\n\t\t\tthis.collapseAll( event, true );\r\n\t\t}\r\n\t\tthis._trigger( \"select\", event, ui );\r\n\t}\r\n});\r\n\r\n}( jQuery ));\r\n\r\n(function( $, undefined ) {\r\n\r\n$.ui = $.ui || {};\r\n\r\nvar cachedScrollbarWidth,\r\n\tmax = Math.max,\r\n\tabs = Math.abs,\r\n\tround = Math.round,\r\n\trhorizontal = /left|center|right/,\r\n\trvertical = /top|center|bottom/,\r\n\troffset = /[\\+\\-]\\d+(\\.[\\d]+)?%?/,\r\n\trposition = /^\\w+/,\r\n\trpercent = /%$/,\r\n\t_position = $.fn.position;\r\n\r\nfunction getOffsets( offsets, width, height ) {\r\n\treturn [\r\n\t\tparseFloat( offsets[ 0 ] ) * ( rpercent.test( offsets[ 0 ] ) ? width / 100 : 1 ),\r\n\t\tparseFloat( offsets[ 1 ] ) * ( rpercent.test( offsets[ 1 ] ) ? height / 100 : 1 )\r\n\t];\r\n}\r\n\r\nfunction parseCss( element, property ) {\r\n\treturn parseInt( $.css( element, property ), 10 ) || 0;\r\n}\r\n\r\nfunction getDimensions( elem ) {\r\n\tvar raw = elem[0];\r\n\tif ( raw.nodeType === 9 ) {\r\n\t\treturn {\r\n\t\t\twidth: elem.width(),\r\n\t\t\theight: elem.height(),\r\n\t\t\toffset: { top: 0, left: 0 }\r\n\t\t};\r\n\t}\r\n\tif ( $.isWindow( raw ) ) {\r\n\t\treturn {\r\n\t\t\twidth: elem.width(),\r\n\t\t\theight: elem.height(),\r\n\t\t\toffset: { top: elem.scrollTop(), left: elem.scrollLeft() }\r\n\t\t};\r\n\t}\r\n\tif ( raw.preventDefault ) {\r\n\t\treturn {\r\n\t\t\twidth: 0,\r\n\t\t\theight: 0,\r\n\t\t\toffset: { top: raw.pageY, left: raw.pageX }\r\n\t\t};\r\n\t}\r\n\treturn {\r\n\t\twidth: elem.outerWidth(),\r\n\t\theight: elem.outerHeight(),\r\n\t\toffset: elem.offset()\r\n\t};\r\n}\r\n\r\n$.position = {\r\n\tscrollbarWidth: function() {\r\n\t\tif ( cachedScrollbarWidth !== undefined ) {\r\n\t\t\treturn cachedScrollbarWidth;\r\n\t\t}\r\n\t\tvar w1, w2,\r\n\t\t\tdiv = $( \"<div style='display:block;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>\" ),\r\n\t\t\tinnerDiv = div.children()[0];\r\n\r\n\t\t$( \"body\" ).append( div );\r\n\t\tw1 = innerDiv.offsetWidth;\r\n\t\tdiv.css( \"overflow\", \"scroll\" );\r\n\r\n\t\tw2 = innerDiv.offsetWidth;\r\n\r\n\t\tif ( w1 === w2 ) {\r\n\t\t\tw2 = div[0].clientWidth;\r\n\t\t}\r\n\r\n\t\tdiv.remove();\r\n\r\n\t\treturn (cachedScrollbarWidth = w1 - w2);\r\n\t},\r\n\tgetScrollInfo: function( within ) {\r\n\t\tvar overflowX = within.isWindow ? \"\" : within.element.css( \"overflow-x\" ),\r\n\t\t\toverflowY = within.isWindow ? \"\" : within.element.css( \"overflow-y\" ),\r\n\t\t\thasOverflowX = overflowX === \"scroll\" ||\r\n\t\t\t\t( overflowX === \"auto\" && within.width < within.element[0].scrollWidth ),\r\n\t\t\thasOverflowY = overflowY === \"scroll\" ||\r\n\t\t\t\t( overflowY === \"auto\" && within.height < within.element[0].scrollHeight );\r\n\t\treturn {\r\n\t\t\twidth: hasOverflowY ? $.position.scrollbarWidth() : 0,\r\n\t\t\theight: hasOverflowX ? $.position.scrollbarWidth() : 0\r\n\t\t};\r\n\t},\r\n\tgetWithinInfo: function( element ) {\r\n\t\tvar withinElement = $( element || window ),\r\n\t\t\tisWindow = $.isWindow( withinElement[0] );\r\n\t\treturn {\r\n\t\t\telement: withinElement,\r\n\t\t\tisWindow: isWindow,\r\n\t\t\toffset: withinElement.offset() || { left: 0, top: 0 },\r\n\t\t\tscrollLeft: withinElement.scrollLeft(),\r\n\t\t\tscrollTop: withinElement.scrollTop(),\r\n\t\t\twidth: isWindow ? withinElement.width() : withinElement.outerWidth(),\r\n\t\t\theight: isWindow ? withinElement.height() : withinElement.outerHeight()\r\n\t\t};\r\n\t}\r\n};\r\n\r\n$.fn.position = function( options ) {\r\n\tif ( !options || !options.of ) {\r\n\t\treturn _position.apply( this, arguments );\r\n\t}\r\n\r\n\t// make a copy, we don't want to modify arguments\r\n\toptions = $.extend( {}, options );\r\n\r\n\tvar atOffset, targetWidth, targetHeight, targetOffset, basePosition, dimensions,\r\n\t\ttarget = $( options.of ),\r\n\t\twithin = $.position.getWithinInfo( options.within ),\r\n\t\tscrollInfo = $.position.getScrollInfo( within ),\r\n\t\tcollision = ( options.collision || \"flip\" ).split( \" \" ),\r\n\t\toffsets = {};\r\n\r\n\tdimensions = getDimensions( target );\r\n\tif ( target[0].preventDefault ) {\r\n\t\t// force left top to allow flipping\r\n\t\toptions.at = \"left top\";\r\n\t}\r\n\ttargetWidth = dimensions.width;\r\n\ttargetHeight = dimensions.height;\r\n\ttargetOffset = dimensions.offset;\r\n\t// clone to reuse original targetOffset later\r\n\tbasePosition = $.extend( {}, targetOffset );\r\n\r\n\t// force my and at to have valid horizontal and vertical positions\r\n\t// if a value is missing or invalid, it will be converted to center\r\n\t$.each( [ \"my\", \"at\" ], function() {\r\n\t\tvar pos = ( options[ this ] || \"\" ).split( \" \" ),\r\n\t\t\thorizontalOffset,\r\n\t\t\tverticalOffset;\r\n\r\n\t\tif ( pos.length === 1) {\r\n\t\t\tpos = rhorizontal.test( pos[ 0 ] ) ?\r\n\t\t\t\tpos.concat( [ \"center\" ] ) :\r\n\t\t\t\trvertical.test( pos[ 0 ] ) ?\r\n\t\t\t\t\t[ \"center\" ].concat( pos ) :\r\n\t\t\t\t\t[ \"center\", \"center\" ];\r\n\t\t}\r\n\t\tpos[ 0 ] = rhorizontal.test( pos[ 0 ] ) ? pos[ 0 ] : \"center\";\r\n\t\tpos[ 1 ] = rvertical.test( pos[ 1 ] ) ? pos[ 1 ] : \"center\";\r\n\r\n\t\t// calculate offsets\r\n\t\thorizontalOffset = roffset.exec( pos[ 0 ] );\r\n\t\tverticalOffset = roffset.exec( pos[ 1 ] );\r\n\t\toffsets[ this ] = [\r\n\t\t\thorizontalOffset ? horizontalOffset[ 0 ] : 0,\r\n\t\t\tverticalOffset ? verticalOffset[ 0 ] : 0\r\n\t\t];\r\n\r\n\t\t// reduce to just the positions without the offsets\r\n\t\toptions[ this ] = [\r\n\t\t\trposition.exec( pos[ 0 ] )[ 0 ],\r\n\t\t\trposition.exec( pos[ 1 ] )[ 0 ]\r\n\t\t];\r\n\t});\r\n\r\n\t// normalize collision option\r\n\tif ( collision.length === 1 ) {\r\n\t\tcollision[ 1 ] = collision[ 0 ];\r\n\t}\r\n\r\n\tif ( options.at[ 0 ] === \"right\" ) {\r\n\t\tbasePosition.left += targetWidth;\r\n\t} else if ( options.at[ 0 ] === \"center\" ) {\r\n\t\tbasePosition.left += targetWidth / 2;\r\n\t}\r\n\r\n\tif ( options.at[ 1 ] === \"bottom\" ) {\r\n\t\tbasePosition.top += targetHeight;\r\n\t} else if ( options.at[ 1 ] === \"center\" ) {\r\n\t\tbasePosition.top += targetHeight / 2;\r\n\t}\r\n\r\n\tatOffset = getOffsets( offsets.at, targetWidth, targetHeight );\r\n\tbasePosition.left += atOffset[ 0 ];\r\n\tbasePosition.top += atOffset[ 1 ];\r\n\r\n\treturn this.each(function() {\r\n\t\tvar collisionPosition, using,\r\n\t\t\telem = $( this ),\r\n\t\t\telemWidth = elem.outerWidth(),\r\n\t\t\telemHeight = elem.outerHeight(),\r\n\t\t\tmarginLeft = parseCss( this, \"marginLeft\" ),\r\n\t\t\tmarginTop = parseCss( this, \"marginTop\" ),\r\n\t\t\tcollisionWidth = elemWidth + marginLeft + parseCss( this, \"marginRight\" ) + scrollInfo.width,\r\n\t\t\tcollisionHeight = elemHeight + marginTop + parseCss( this, \"marginBottom\" ) + scrollInfo.height,\r\n\t\t\tposition = $.extend( {}, basePosition ),\r\n\t\t\tmyOffset = getOffsets( offsets.my, elem.outerWidth(), elem.outerHeight() );\r\n\r\n\t\tif ( options.my[ 0 ] === \"right\" ) {\r\n\t\t\tposition.left -= elemWidth;\r\n\t\t} else if ( options.my[ 0 ] === \"center\" ) {\r\n\t\t\tposition.left -= elemWidth / 2;\r\n\t\t}\r\n\r\n\t\tif ( options.my[ 1 ] === \"bottom\" ) {\r\n\t\t\tposition.top -= elemHeight;\r\n\t\t} else if ( options.my[ 1 ] === \"center\" ) {\r\n\t\t\tposition.top -= elemHeight / 2;\r\n\t\t}\r\n\r\n\t\tposition.left += myOffset[ 0 ];\r\n\t\tposition.top += myOffset[ 1 ];\r\n\r\n\t\t// if the browser doesn't support fractions, then round for consistent results\r\n\t\tif ( !$.support.offsetFractions ) {\r\n\t\t\tposition.left = round( position.left );\r\n\t\t\tposition.top = round( position.top );\r\n\t\t}\r\n\r\n\t\tcollisionPosition = {\r\n\t\t\tmarginLeft: marginLeft,\r\n\t\t\tmarginTop: marginTop\r\n\t\t};\r\n\r\n\t\t$.each( [ \"left\", \"top\" ], function( i, dir ) {\r\n\t\t\tif ( $.ui.position[ collision[ i ] ] ) {\r\n\t\t\t\t$.ui.position[ collision[ i ] ][ dir ]( position, {\r\n\t\t\t\t\ttargetWidth: targetWidth,\r\n\t\t\t\t\ttargetHeight: targetHeight,\r\n\t\t\t\t\telemWidth: elemWidth,\r\n\t\t\t\t\telemHeight: elemHeight,\r\n\t\t\t\t\tcollisionPosition: collisionPosition,\r\n\t\t\t\t\tcollisionWidth: collisionWidth,\r\n\t\t\t\t\tcollisionHeight: collisionHeight,\r\n\t\t\t\t\toffset: [ atOffset[ 0 ] + myOffset[ 0 ], atOffset [ 1 ] + myOffset[ 1 ] ],\r\n\t\t\t\t\tmy: options.my,\r\n\t\t\t\t\tat: options.at,\r\n\t\t\t\t\twithin: within,\r\n\t\t\t\t\telem : elem\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tif ( options.using ) {\r\n\t\t\t// adds feedback as second argument to using callback, if present\r\n\t\t\tusing = function( props ) {\r\n\t\t\t\tvar left = targetOffset.left - position.left,\r\n\t\t\t\t\tright = left + targetWidth - elemWidth,\r\n\t\t\t\t\ttop = targetOffset.top - position.top,\r\n\t\t\t\t\tbottom = top + targetHeight - elemHeight,\r\n\t\t\t\t\tfeedback = {\r\n\t\t\t\t\t\ttarget: {\r\n\t\t\t\t\t\t\telement: target,\r\n\t\t\t\t\t\t\tleft: targetOffset.left,\r\n\t\t\t\t\t\t\ttop: targetOffset.top,\r\n\t\t\t\t\t\t\twidth: targetWidth,\r\n\t\t\t\t\t\t\theight: targetHeight\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\telement: {\r\n\t\t\t\t\t\t\telement: elem,\r\n\t\t\t\t\t\t\tleft: position.left,\r\n\t\t\t\t\t\t\ttop: position.top,\r\n\t\t\t\t\t\t\twidth: elemWidth,\r\n\t\t\t\t\t\t\theight: elemHeight\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\thorizontal: right < 0 ? \"left\" : left > 0 ? \"right\" : \"center\",\r\n\t\t\t\t\t\tvertical: bottom < 0 ? \"top\" : top > 0 ? \"bottom\" : \"middle\"\r\n\t\t\t\t\t};\r\n\t\t\t\tif ( targetWidth < elemWidth && abs( left + right ) < targetWidth ) {\r\n\t\t\t\t\tfeedback.horizontal = \"center\";\r\n\t\t\t\t}\r\n\t\t\t\tif ( targetHeight < elemHeight && abs( top + bottom ) < targetHeight ) {\r\n\t\t\t\t\tfeedback.vertical = \"middle\";\r\n\t\t\t\t}\r\n\t\t\t\tif ( max( abs( left ), abs( right ) ) > max( abs( top ), abs( bottom ) ) ) {\r\n\t\t\t\t\tfeedback.important = \"horizontal\";\r\n\t\t\t\t} else {\r\n\t\t\t\t\tfeedback.important = \"vertical\";\r\n\t\t\t\t}\r\n\t\t\t\toptions.using.call( this, props, feedback );\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t\telem.offset( $.extend( position, { using: using } ) );\r\n\t});\r\n};\r\n\r\n$.ui.position = {\r\n\tfit: {\r\n\t\tleft: function( position, data ) {\r\n\t\t\tvar within = data.within,\r\n\t\t\t\twithinOffset = within.isWindow ? within.scrollLeft : within.offset.left,\r\n\t\t\t\touterWidth = within.width,\r\n\t\t\t\tcollisionPosLeft = position.left - data.collisionPosition.marginLeft,\r\n\t\t\t\toverLeft = withinOffset - collisionPosLeft,\r\n\t\t\t\toverRight = collisionPosLeft + data.collisionWidth - outerWidth - withinOffset,\r\n\t\t\t\tnewOverRight;\r\n\r\n\t\t\t// element is wider than within\r\n\t\t\tif ( data.collisionWidth > outerWidth ) {\r\n\t\t\t\t// element is initially over the left side of within\r\n\t\t\t\tif ( overLeft > 0 && overRight <= 0 ) {\r\n\t\t\t\t\tnewOverRight = position.left + overLeft + data.collisionWidth - outerWidth - withinOffset;\r\n\t\t\t\t\tposition.left += overLeft - newOverRight;\r\n\t\t\t\t// element is initially over right side of within\r\n\t\t\t\t} else if ( overRight > 0 && overLeft <= 0 ) {\r\n\t\t\t\t\tposition.left = withinOffset;\r\n\t\t\t\t// element is initially over both left and right sides of within\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif ( overLeft > overRight ) {\r\n\t\t\t\t\t\tposition.left = withinOffset + outerWidth - data.collisionWidth;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tposition.left = withinOffset;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t// too far left -> align with left edge\r\n\t\t\t} else if ( overLeft > 0 ) {\r\n\t\t\t\tposition.left += overLeft;\r\n\t\t\t// too far right -> align with right edge\r\n\t\t\t} else if ( overRight > 0 ) {\r\n\t\t\t\tposition.left -= overRight;\r\n\t\t\t// adjust based on position and margin\r\n\t\t\t} else {\r\n\t\t\t\tposition.left = max( position.left - collisionPosLeft, position.left );\r\n\t\t\t}\r\n\t\t},\r\n\t\ttop: function( position, data ) {\r\n\t\t\tvar within = data.within,\r\n\t\t\t\twithinOffset = within.isWindow ? within.scrollTop : within.offset.top,\r\n\t\t\t\touterHeight = data.within.height,\r\n\t\t\t\tcollisionPosTop = position.top - data.collisionPosition.marginTop,\r\n\t\t\t\toverTop = withinOffset - collisionPosTop,\r\n\t\t\t\toverBottom = collisionPosTop + data.collisionHeight - outerHeight - withinOffset,\r\n\t\t\t\tnewOverBottom;\r\n\r\n\t\t\t// element is taller than within\r\n\t\t\tif ( data.collisionHeight > outerHeight ) {\r\n\t\t\t\t// element is initially over the top of within\r\n\t\t\t\tif ( overTop > 0 && overBottom <= 0 ) {\r\n\t\t\t\t\tnewOverBottom = position.top + overTop + data.collisionHeight - outerHeight - withinOffset;\r\n\t\t\t\t\tposition.top += overTop - newOverBottom;\r\n\t\t\t\t// element is initially over bottom of within\r\n\t\t\t\t} else if ( overBottom > 0 && overTop <= 0 ) {\r\n\t\t\t\t\tposition.top = withinOffset;\r\n\t\t\t\t// element is initially over both top and bottom of within\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif ( overTop > overBottom ) {\r\n\t\t\t\t\t\tposition.top = withinOffset + outerHeight - data.collisionHeight;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tposition.top = withinOffset;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t// too far up -> align with top\r\n\t\t\t} else if ( overTop > 0 ) {\r\n\t\t\t\tposition.top += overTop;\r\n\t\t\t// too far down -> align with bottom edge\r\n\t\t\t} else if ( overBottom > 0 ) {\r\n\t\t\t\tposition.top -= overBottom;\r\n\t\t\t// adjust based on position and margin\r\n\t\t\t} else {\r\n\t\t\t\tposition.top = max( position.top - collisionPosTop, position.top );\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tflip: {\r\n\t\tleft: function( position, data ) {\r\n\t\t\tvar within = data.within,\r\n\t\t\t\twithinOffset = within.offset.left + within.scrollLeft,\r\n\t\t\t\touterWidth = within.width,\r\n\t\t\t\toffsetLeft = within.isWindow ? within.scrollLeft : within.offset.left,\r\n\t\t\t\tcollisionPosLeft = position.left - data.collisionPosition.marginLeft,\r\n\t\t\t\toverLeft = collisionPosLeft - offsetLeft,\r\n\t\t\t\toverRight = collisionPosLeft + data.collisionWidth - outerWidth - offsetLeft,\r\n\t\t\t\tmyOffset = data.my[ 0 ] === \"left\" ?\r\n\t\t\t\t\t-data.elemWidth :\r\n\t\t\t\t\tdata.my[ 0 ] === \"right\" ?\r\n\t\t\t\t\t\tdata.elemWidth :\r\n\t\t\t\t\t\t0,\r\n\t\t\t\tatOffset = data.at[ 0 ] === \"left\" ?\r\n\t\t\t\t\tdata.targetWidth :\r\n\t\t\t\t\tdata.at[ 0 ] === \"right\" ?\r\n\t\t\t\t\t\t-data.targetWidth :\r\n\t\t\t\t\t\t0,\r\n\t\t\t\toffset = -2 * data.offset[ 0 ],\r\n\t\t\t\tnewOverRight,\r\n\t\t\t\tnewOverLeft;\r\n\r\n\t\t\tif ( overLeft < 0 ) {\r\n\t\t\t\tnewOverRight = position.left + myOffset + atOffset + offset + data.collisionWidth - outerWidth - withinOffset;\r\n\t\t\t\tif ( newOverRight < 0 || newOverRight < abs( overLeft ) ) {\r\n\t\t\t\t\tposition.left += myOffset + atOffset + offset;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse if ( overRight > 0 ) {\r\n\t\t\t\tnewOverLeft = position.left - data.collisionPosition.marginLeft + myOffset + atOffset + offset - offsetLeft;\r\n\t\t\t\tif ( newOverLeft > 0 || abs( newOverLeft ) < overRight ) {\r\n\t\t\t\t\tposition.left += myOffset + atOffset + offset;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\ttop: function( position, data ) {\r\n\t\t\tvar within = data.within,\r\n\t\t\t\twithinOffset = within.offset.top + within.scrollTop,\r\n\t\t\t\touterHeight = within.height,\r\n\t\t\t\toffsetTop = within.isWindow ? within.scrollTop : within.offset.top,\r\n\t\t\t\tcollisionPosTop = position.top - data.collisionPosition.marginTop,\r\n\t\t\t\toverTop = collisionPosTop - offsetTop,\r\n\t\t\t\toverBottom = collisionPosTop + data.collisionHeight - outerHeight - offsetTop,\r\n\t\t\t\ttop = data.my[ 1 ] === \"top\",\r\n\t\t\t\tmyOffset = top ?\r\n\t\t\t\t\t-data.elemHeight :\r\n\t\t\t\t\tdata.my[ 1 ] === \"bottom\" ?\r\n\t\t\t\t\t\tdata.elemHeight :\r\n\t\t\t\t\t\t0,\r\n\t\t\t\tatOffset = data.at[ 1 ] === \"top\" ?\r\n\t\t\t\t\tdata.targetHeight :\r\n\t\t\t\t\tdata.at[ 1 ] === \"bottom\" ?\r\n\t\t\t\t\t\t-data.targetHeight :\r\n\t\t\t\t\t\t0,\r\n\t\t\t\toffset = -2 * data.offset[ 1 ],\r\n\t\t\t\tnewOverTop,\r\n\t\t\t\tnewOverBottom;\r\n\t\t\tif ( overTop < 0 ) {\r\n\t\t\t\tnewOverBottom = position.top + myOffset + atOffset + offset + data.collisionHeight - outerHeight - withinOffset;\r\n\t\t\t\tif ( ( position.top + myOffset + atOffset + offset) > overTop && ( newOverBottom < 0 || newOverBottom < abs( overTop ) ) ) {\r\n\t\t\t\t\tposition.top += myOffset + atOffset + offset;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse if ( overBottom > 0 ) {\r\n\t\t\t\tnewOverTop = position.top -  data.collisionPosition.marginTop + myOffset + atOffset + offset - offsetTop;\r\n\t\t\t\tif ( ( position.top + myOffset + atOffset + offset) > overBottom && ( newOverTop > 0 || abs( newOverTop ) < overBottom ) ) {\r\n\t\t\t\t\tposition.top += myOffset + atOffset + offset;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tflipfit: {\r\n\t\tleft: function() {\r\n\t\t\t$.ui.position.flip.left.apply( this, arguments );\r\n\t\t\t$.ui.position.fit.left.apply( this, arguments );\r\n\t\t},\r\n\t\ttop: function() {\r\n\t\t\t$.ui.position.flip.top.apply( this, arguments );\r\n\t\t\t$.ui.position.fit.top.apply( this, arguments );\r\n\t\t}\r\n\t}\r\n};\r\n\r\n// fraction support test\r\n(function () {\r\n\tvar testElement, testElementParent, testElementStyle, offsetLeft, i,\r\n\t\tbody = document.getElementsByTagName( \"body\" )[ 0 ],\r\n\t\tdiv = document.createElement( \"div\" );\r\n\r\n\t//Create a \"fake body\" for testing based on method used in jQuery.support\r\n\ttestElement = document.createElement( body ? \"div\" : \"body\" );\r\n\ttestElementStyle = {\r\n\t\tvisibility: \"hidden\",\r\n\t\twidth: 0,\r\n\t\theight: 0,\r\n\t\tborder: 0,\r\n\t\tmargin: 0,\r\n\t\tbackground: \"none\"\r\n\t};\r\n\tif ( body ) {\r\n\t\t$.extend( testElementStyle, {\r\n\t\t\tposition: \"absolute\",\r\n\t\t\tleft: \"-1000px\",\r\n\t\t\ttop: \"-1000px\"\r\n\t\t});\r\n\t}\r\n\tfor ( i in testElementStyle ) {\r\n\t\ttestElement.style[ i ] = testElementStyle[ i ];\r\n\t}\r\n\ttestElement.appendChild( div );\r\n\ttestElementParent = body || document.documentElement;\r\n\ttestElementParent.insertBefore( testElement, testElementParent.firstChild );\r\n\r\n\tdiv.style.cssText = \"position: absolute; left: 10.7432222px;\";\r\n\r\n\toffsetLeft = $( div ).offset().left;\r\n\t$.support.offsetFractions = offsetLeft > 10 && offsetLeft < 11;\r\n\r\n\ttestElement.innerHTML = \"\";\r\n\ttestElementParent.removeChild( testElement );\r\n})();\r\n\r\n}( jQuery ) );\r\n\r\n(function( $, undefined ) {\r\n\r\n$.widget( \"ui.progressbar\", {\r\n\tversion: \"1.10.2\",\r\n\toptions: {\r\n\t\tmax: 100,\r\n\t\tvalue: 0,\r\n\r\n\t\tchange: null,\r\n\t\tcomplete: null\r\n\t},\r\n\r\n\tmin: 0,\r\n\r\n\t_create: function() {\r\n\t\t// Constrain initial value\r\n\t\tthis.oldValue = this.options.value = this._constrainedValue();\r\n\r\n\t\tthis.element\r\n\t\t\t.addClass( \"ui-progressbar ui-widget ui-widget-content ui-corner-all\" )\r\n\t\t\t.attr({\r\n\t\t\t\t// Only set static values, aria-valuenow and aria-valuemax are\r\n\t\t\t\t// set inside _refreshValue()\r\n\t\t\t\trole: \"progressbar\",\r\n\t\t\t\t\"aria-valuemin\": this.min\r\n\t\t\t});\r\n\r\n\t\tthis.valueDiv = $( \"<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>\" )\r\n\t\t\t.appendTo( this.element );\r\n\r\n\t\tthis._refreshValue();\r\n\t},\r\n\r\n\t_destroy: function() {\r\n\t\tthis.element\r\n\t\t\t.removeClass( \"ui-progressbar ui-widget ui-widget-content ui-corner-all\" )\r\n\t\t\t.removeAttr( \"role\" )\r\n\t\t\t.removeAttr( \"aria-valuemin\" )\r\n\t\t\t.removeAttr( \"aria-valuemax\" )\r\n\t\t\t.removeAttr( \"aria-valuenow\" );\r\n\r\n\t\tthis.valueDiv.remove();\r\n\t},\r\n\r\n\tvalue: function( newValue ) {\r\n\t\tif ( newValue === undefined ) {\r\n\t\t\treturn this.options.value;\r\n\t\t}\r\n\r\n\t\tthis.options.value = this._constrainedValue( newValue );\r\n\t\tthis._refreshValue();\r\n\t},\r\n\r\n\t_constrainedValue: function( newValue ) {\r\n\t\tif ( newValue === undefined ) {\r\n\t\t\tnewValue = this.options.value;\r\n\t\t}\r\n\r\n\t\tthis.indeterminate = newValue === false;\r\n\r\n\t\t// sanitize value\r\n\t\tif ( typeof newValue !== \"number\" ) {\r\n\t\t\tnewValue = 0;\r\n\t\t}\r\n\r\n\t\treturn this.indeterminate ? false :\r\n\t\t\tMath.min( this.options.max, Math.max( this.min, newValue ) );\r\n\t},\r\n\r\n\t_setOptions: function( options ) {\r\n\t\t// Ensure \"value\" option is set after other values (like max)\r\n\t\tvar value = options.value;\r\n\t\tdelete options.value;\r\n\r\n\t\tthis._super( options );\r\n\r\n\t\tthis.options.value = this._constrainedValue( value );\r\n\t\tthis._refreshValue();\r\n\t},\r\n\r\n\t_setOption: function( key, value ) {\r\n\t\tif ( key === \"max\" ) {\r\n\t\t\t// Don't allow a max less than min\r\n\t\t\tvalue = Math.max( this.min, value );\r\n\t\t}\r\n\r\n\t\tthis._super( key, value );\r\n\t},\r\n\r\n\t_percentage: function() {\r\n\t\treturn this.indeterminate ? 100 : 100 * ( this.options.value - this.min ) / ( this.options.max - this.min );\r\n\t},\r\n\r\n\t_refreshValue: function() {\r\n\t\tvar value = this.options.value,\r\n\t\t\tpercentage = this._percentage();\r\n\r\n\t\tthis.valueDiv\r\n\t\t\t.toggle( this.indeterminate || value > this.min )\r\n\t\t\t.toggleClass( \"ui-corner-right\", value === this.options.max )\r\n\t\t\t.width( percentage.toFixed(0) + \"%\" );\r\n\r\n\t\tthis.element.toggleClass( \"ui-progressbar-indeterminate\", this.indeterminate );\r\n\r\n\t\tif ( this.indeterminate ) {\r\n\t\t\tthis.element.removeAttr( \"aria-valuenow\" );\r\n\t\t\tif ( !this.overlayDiv ) {\r\n\t\t\t\tthis.overlayDiv = $( \"<div class='ui-progressbar-overlay'></div>\" ).appendTo( this.valueDiv );\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tthis.element.attr({\r\n\t\t\t\t\"aria-valuemax\": this.options.max,\r\n\t\t\t\t\"aria-valuenow\": value\r\n\t\t\t});\r\n\t\t\tif ( this.overlayDiv ) {\r\n\t\t\t\tthis.overlayDiv.remove();\r\n\t\t\t\tthis.overlayDiv = null;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif ( this.oldValue !== value ) {\r\n\t\t\tthis.oldValue = value;\r\n\t\t\tthis._trigger( \"change\" );\r\n\t\t}\r\n\t\tif ( value === this.options.max ) {\r\n\t\t\tthis._trigger( \"complete\" );\r\n\t\t}\r\n\t}\r\n});\r\n\r\n})( jQuery );\r\n\r\n(function( $, undefined ) {\r\n\r\n// number of pages in a slider\r\n// (how many times can you page up/down to go through the whole range)\r\nvar numPages = 5;\r\n\r\n$.widget( \"ui.slider\", $.ui.mouse, {\r\n\tversion: \"1.10.2\",\r\n\twidgetEventPrefix: \"slide\",\r\n\r\n\toptions: {\r\n\t\tanimate: false,\r\n\t\tdistance: 0,\r\n\t\tmax: 100,\r\n\t\tmin: 0,\r\n\t\torientation: \"horizontal\",\r\n\t\trange: false,\r\n\t\tstep: 1,\r\n\t\tvalue: 0,\r\n\t\tvalues: null,\r\n\r\n\t\t// callbacks\r\n\t\tchange: null,\r\n\t\tslide: null,\r\n\t\tstart: null,\r\n\t\tstop: null\r\n\t},\r\n\r\n\t_create: function() {\r\n\t\tthis._keySliding = false;\r\n\t\tthis._mouseSliding = false;\r\n\t\tthis._animateOff = true;\r\n\t\tthis._handleIndex = null;\r\n\t\tthis._detectOrientation();\r\n\t\tthis._mouseInit();\r\n\r\n\t\tthis.element\r\n\t\t\t.addClass( \"ui-slider\" +\r\n\t\t\t\t\" ui-slider-\" + this.orientation +\r\n\t\t\t\t\" ui-widget\" +\r\n\t\t\t\t\" ui-widget-content\" +\r\n\t\t\t\t\" ui-corner-all\");\r\n\r\n\t\tthis._refresh();\r\n\t\tthis._setOption( \"disabled\", this.options.disabled );\r\n\r\n\t\tthis._animateOff = false;\r\n\t},\r\n\r\n\t_refresh: function() {\r\n\t\tthis._createRange();\r\n\t\tthis._createHandles();\r\n\t\tthis._setupEvents();\r\n\t\tthis._refreshValue();\r\n\t},\r\n\r\n\t_createHandles: function() {\r\n\t\tvar i, handleCount,\r\n\t\t\toptions = this.options,\r\n\t\t\texistingHandles = this.element.find( \".ui-slider-handle\" ).addClass( \"ui-state-default ui-corner-all\" ),\r\n\t\t\thandle = \"<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>\",\r\n\t\t\thandles = [];\r\n\r\n\t\thandleCount = ( options.values && options.values.length ) || 1;\r\n\r\n\t\tif ( existingHandles.length > handleCount ) {\r\n\t\t\texistingHandles.slice( handleCount ).remove();\r\n\t\t\texistingHandles = existingHandles.slice( 0, handleCount );\r\n\t\t}\r\n\r\n\t\tfor ( i = existingHandles.length; i < handleCount; i++ ) {\r\n\t\t\thandles.push( handle );\r\n\t\t}\r\n\r\n\t\tthis.handles = existingHandles.add( $( handles.join( \"\" ) ).appendTo( this.element ) );\r\n\r\n\t\tthis.handle = this.handles.eq( 0 );\r\n\r\n\t\tthis.handles.each(function( i ) {\r\n\t\t\t$( this ).data( \"ui-slider-handle-index\", i );\r\n\t\t});\r\n\t},\r\n\r\n\t_createRange: function() {\r\n\t\tvar options = this.options,\r\n\t\t\tclasses = \"\";\r\n\r\n\t\tif ( options.range ) {\r\n\t\t\tif ( options.range === true ) {\r\n\t\t\t\tif ( !options.values ) {\r\n\t\t\t\t\toptions.values = [ this._valueMin(), this._valueMin() ];\r\n\t\t\t\t} else if ( options.values.length && options.values.length !== 2 ) {\r\n\t\t\t\t\toptions.values = [ options.values[0], options.values[0] ];\r\n\t\t\t\t} else if ( $.isArray( options.values ) ) {\r\n\t\t\t\t\toptions.values = options.values.slice(0);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif ( !this.range || !this.range.length ) {\r\n\t\t\t\tthis.range = $( \"<div></div>\" )\r\n\t\t\t\t\t.appendTo( this.element );\r\n\r\n\t\t\t\tclasses = \"ui-slider-range\" +\r\n\t\t\t\t// note: this isn't the most fittingly semantic framework class for this element,\r\n\t\t\t\t// but worked best visually with a variety of themes\r\n\t\t\t\t\" ui-widget-header ui-corner-all\";\r\n\t\t\t} else {\r\n\t\t\t\tthis.range.removeClass( \"ui-slider-range-min ui-slider-range-max\" )\r\n\t\t\t\t\t// Handle range switching from true to min/max\r\n\t\t\t\t\t.css({\r\n\t\t\t\t\t\t\"left\": \"\",\r\n\t\t\t\t\t\t\"bottom\": \"\"\r\n\t\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tthis.range.addClass( classes +\r\n\t\t\t\t( ( options.range === \"min\" || options.range === \"max\" ) ? \" ui-slider-range-\" + options.range : \"\" ) );\r\n\t\t} else {\r\n\t\t\tthis.range = $([]);\r\n\t\t}\r\n\t},\r\n\r\n\t_setupEvents: function() {\r\n\t\tvar elements = this.handles.add( this.range ).filter( \"a\" );\r\n\t\tthis._off( elements );\r\n\t\tthis._on( elements, this._handleEvents );\r\n\t\tthis._hoverable( elements );\r\n\t\tthis._focusable( elements );\r\n\t},\r\n\r\n\t_destroy: function() {\r\n\t\tthis.handles.remove();\r\n\t\tthis.range.remove();\r\n\r\n\t\tthis.element\r\n\t\t\t.removeClass( \"ui-slider\" +\r\n\t\t\t\t\" ui-slider-horizontal\" +\r\n\t\t\t\t\" ui-slider-vertical\" +\r\n\t\t\t\t\" ui-widget\" +\r\n\t\t\t\t\" ui-widget-content\" +\r\n\t\t\t\t\" ui-corner-all\" );\r\n\r\n\t\tthis._mouseDestroy();\r\n\t},\r\n\r\n\t_mouseCapture: function( event ) {\r\n\t\tvar position, normValue, distance, closestHandle, index, allowed, offset, mouseOverHandle,\r\n\t\t\tthat = this,\r\n\t\t\to = this.options;\r\n\r\n\t\tif ( o.disabled ) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tthis.elementSize = {\r\n\t\t\twidth: this.element.outerWidth(),\r\n\t\t\theight: this.element.outerHeight()\r\n\t\t};\r\n\t\tthis.elementOffset = this.element.offset();\r\n\r\n\t\tposition = { x: event.pageX, y: event.pageY };\r\n\t\tnormValue = this._normValueFromMouse( position );\r\n\t\tdistance = this._valueMax() - this._valueMin() + 1;\r\n\t\tthis.handles.each(function( i ) {\r\n\t\t\tvar thisDistance = Math.abs( normValue - that.values(i) );\r\n\t\t\tif (( distance > thisDistance ) ||\r\n\t\t\t\t( distance === thisDistance &&\r\n\t\t\t\t\t(i === that._lastChangedValue || that.values(i) === o.min ))) {\r\n\t\t\t\tdistance = thisDistance;\r\n\t\t\t\tclosestHandle = $( this );\r\n\t\t\t\tindex = i;\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tallowed = this._start( event, index );\r\n\t\tif ( allowed === false ) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tthis._mouseSliding = true;\r\n\r\n\t\tthis._handleIndex = index;\r\n\r\n\t\tclosestHandle\r\n\t\t\t.addClass( \"ui-state-active\" )\r\n\t\t\t.focus();\r\n\r\n\t\toffset = closestHandle.offset();\r\n\t\tmouseOverHandle = !$( event.target ).parents().addBack().is( \".ui-slider-handle\" );\r\n\t\tthis._clickOffset = mouseOverHandle ? { left: 0, top: 0 } : {\r\n\t\t\tleft: event.pageX - offset.left - ( closestHandle.width() / 2 ),\r\n\t\t\ttop: event.pageY - offset.top -\r\n\t\t\t\t( closestHandle.height() / 2 ) -\r\n\t\t\t\t( parseInt( closestHandle.css(\"borderTopWidth\"), 10 ) || 0 ) -\r\n\t\t\t\t( parseInt( closestHandle.css(\"borderBottomWidth\"), 10 ) || 0) +\r\n\t\t\t\t( parseInt( closestHandle.css(\"marginTop\"), 10 ) || 0)\r\n\t\t};\r\n\r\n\t\tif ( !this.handles.hasClass( \"ui-state-hover\" ) ) {\r\n\t\t\tthis._slide( event, index, normValue );\r\n\t\t}\r\n\t\tthis._animateOff = true;\r\n\t\treturn true;\r\n\t},\r\n\r\n\t_mouseStart: function() {\r\n\t\treturn true;\r\n\t},\r\n\r\n\t_mouseDrag: function( event ) {\r\n\t\tvar position = { x: event.pageX, y: event.pageY },\r\n\t\t\tnormValue = this._normValueFromMouse( position );\r\n\r\n\t\tthis._slide( event, this._handleIndex, normValue );\r\n\r\n\t\treturn false;\r\n\t},\r\n\r\n\t_mouseStop: function( event ) {\r\n\t\tthis.handles.removeClass( \"ui-state-active\" );\r\n\t\tthis._mouseSliding = false;\r\n\r\n\t\tthis._stop( event, this._handleIndex );\r\n\t\tthis._change( event, this._handleIndex );\r\n\r\n\t\tthis._handleIndex = null;\r\n\t\tthis._clickOffset = null;\r\n\t\tthis._animateOff = false;\r\n\r\n\t\treturn false;\r\n\t},\r\n\r\n\t_detectOrientation: function() {\r\n\t\tthis.orientation = ( this.options.orientation === \"vertical\" ) ? \"vertical\" : \"horizontal\";\r\n\t},\r\n\r\n\t_normValueFromMouse: function( position ) {\r\n\t\tvar pixelTotal,\r\n\t\t\tpixelMouse,\r\n\t\t\tpercentMouse,\r\n\t\t\tvalueTotal,\r\n\t\t\tvalueMouse;\r\n\r\n\t\tif ( this.orientation === \"horizontal\" ) {\r\n\t\t\tpixelTotal = this.elementSize.width;\r\n\t\t\tpixelMouse = position.x - this.elementOffset.left - ( this._clickOffset ? this._clickOffset.left : 0 );\r\n\t\t} else {\r\n\t\t\tpixelTotal = this.elementSize.height;\r\n\t\t\tpixelMouse = position.y - this.elementOffset.top - ( this._clickOffset ? this._clickOffset.top : 0 );\r\n\t\t}\r\n\r\n\t\tpercentMouse = ( pixelMouse / pixelTotal );\r\n\t\tif ( percentMouse > 1 ) {\r\n\t\t\tpercentMouse = 1;\r\n\t\t}\r\n\t\tif ( percentMouse < 0 ) {\r\n\t\t\tpercentMouse = 0;\r\n\t\t}\r\n\t\tif ( this.orientation === \"vertical\" ) {\r\n\t\t\tpercentMouse = 1 - percentMouse;\r\n\t\t}\r\n\r\n\t\tvalueTotal = this._valueMax() - this._valueMin();\r\n\t\tvalueMouse = this._valueMin() + percentMouse * valueTotal;\r\n\r\n\t\treturn this._trimAlignValue( valueMouse );\r\n\t},\r\n\r\n\t_start: function( event, index ) {\r\n\t\tvar uiHash = {\r\n\t\t\thandle: this.handles[ index ],\r\n\t\t\tvalue: this.value()\r\n\t\t};\r\n\t\tif ( this.options.values && this.options.values.length ) {\r\n\t\t\tuiHash.value = this.values( index );\r\n\t\t\tuiHash.values = this.values();\r\n\t\t}\r\n\t\treturn this._trigger( \"start\", event, uiHash );\r\n\t},\r\n\r\n\t_slide: function( event, index, newVal ) {\r\n\t\tvar otherVal,\r\n\t\t\tnewValues,\r\n\t\t\tallowed;\r\n\r\n\t\tif ( this.options.values && this.options.values.length ) {\r\n\t\t\totherVal = this.values( index ? 0 : 1 );\r\n\r\n\t\t\tif ( ( this.options.values.length === 2 && this.options.range === true ) &&\r\n\t\t\t\t\t( ( index === 0 && newVal > otherVal) || ( index === 1 && newVal < otherVal ) )\r\n\t\t\t\t) {\r\n\t\t\t\tnewVal = otherVal;\r\n\t\t\t}\r\n\r\n\t\t\tif ( newVal !== this.values( index ) ) {\r\n\t\t\t\tnewValues = this.values();\r\n\t\t\t\tnewValues[ index ] = newVal;\r\n\t\t\t\t// A slide can be canceled by returning false from the slide callback\r\n\t\t\t\tallowed = this._trigger( \"slide\", event, {\r\n\t\t\t\t\thandle: this.handles[ index ],\r\n\t\t\t\t\tvalue: newVal,\r\n\t\t\t\t\tvalues: newValues\r\n\t\t\t\t} );\r\n\t\t\t\totherVal = this.values( index ? 0 : 1 );\r\n\t\t\t\tif ( allowed !== false ) {\r\n\t\t\t\t\tthis.values( index, newVal, true );\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tif ( newVal !== this.value() ) {\r\n\t\t\t\t// A slide can be canceled by returning false from the slide callback\r\n\t\t\t\tallowed = this._trigger( \"slide\", event, {\r\n\t\t\t\t\thandle: this.handles[ index ],\r\n\t\t\t\t\tvalue: newVal\r\n\t\t\t\t} );\r\n\t\t\t\tif ( allowed !== false ) {\r\n\t\t\t\t\tthis.value( newVal );\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t_stop: function( event, index ) {\r\n\t\tvar uiHash = {\r\n\t\t\thandle: this.handles[ index ],\r\n\t\t\tvalue: this.value()\r\n\t\t};\r\n\t\tif ( this.options.values && this.options.values.length ) {\r\n\t\t\tuiHash.value = this.values( index );\r\n\t\t\tuiHash.values = this.values();\r\n\t\t}\r\n\r\n\t\tthis._trigger( \"stop\", event, uiHash );\r\n\t},\r\n\r\n\t_change: function( event, index ) {\r\n\t\tif ( !this._keySliding && !this._mouseSliding ) {\r\n\t\t\tvar uiHash = {\r\n\t\t\t\thandle: this.handles[ index ],\r\n\t\t\t\tvalue: this.value()\r\n\t\t\t};\r\n\t\t\tif ( this.options.values && this.options.values.length ) {\r\n\t\t\t\tuiHash.value = this.values( index );\r\n\t\t\t\tuiHash.values = this.values();\r\n\t\t\t}\r\n\r\n\t\t\t//store the last changed value index for reference when handles overlap\r\n\t\t\tthis._lastChangedValue = index;\r\n\r\n\t\t\tthis._trigger( \"change\", event, uiHash );\r\n\t\t}\r\n\t},\r\n\r\n\tvalue: function( newValue ) {\r\n\t\tif ( arguments.length ) {\r\n\t\t\tthis.options.value = this._trimAlignValue( newValue );\r\n\t\t\tthis._refreshValue();\r\n\t\t\tthis._change( null, 0 );\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\treturn this._value();\r\n\t},\r\n\r\n\tvalues: function( index, newValue ) {\r\n\t\tvar vals,\r\n\t\t\tnewValues,\r\n\t\t\ti;\r\n\r\n\t\tif ( arguments.length > 1 ) {\r\n\t\t\tthis.options.values[ index ] = this._trimAlignValue( newValue );\r\n\t\t\tthis._refreshValue();\r\n\t\t\tthis._change( null, index );\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif ( arguments.length ) {\r\n\t\t\tif ( $.isArray( arguments[ 0 ] ) ) {\r\n\t\t\t\tvals = this.options.values;\r\n\t\t\t\tnewValues = arguments[ 0 ];\r\n\t\t\t\tfor ( i = 0; i < vals.length; i += 1 ) {\r\n\t\t\t\t\tvals[ i ] = this._trimAlignValue( newValues[ i ] );\r\n\t\t\t\t\tthis._change( null, i );\r\n\t\t\t\t}\r\n\t\t\t\tthis._refreshValue();\r\n\t\t\t} else {\r\n\t\t\t\tif ( this.options.values && this.options.values.length ) {\r\n\t\t\t\t\treturn this._values( index );\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn this.value();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\treturn this._values();\r\n\t\t}\r\n\t},\r\n\r\n\t_setOption: function( key, value ) {\r\n\t\tvar i,\r\n\t\t\tvalsLength = 0;\r\n\r\n\t\tif ( key === \"range\" && this.options.range === true ) {\r\n\t\t\tif ( value === \"min\" ) {\r\n\t\t\t\tthis.options.value = this._values( 0 );\r\n\t\t\t\tthis.options.values = null;\r\n\t\t\t} else if ( value === \"max\" ) {\r\n\t\t\t\tthis.options.value = this._values( this.options.values.length-1 );\r\n\t\t\t\tthis.options.values = null;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif ( $.isArray( this.options.values ) ) {\r\n\t\t\tvalsLength = this.options.values.length;\r\n\t\t}\r\n\r\n\t\t$.Widget.prototype._setOption.apply( this, arguments );\r\n\r\n\t\tswitch ( key ) {\r\n\t\t\tcase \"orientation\":\r\n\t\t\t\tthis._detectOrientation();\r\n\t\t\t\tthis.element\r\n\t\t\t\t\t.removeClass( \"ui-slider-horizontal ui-slider-vertical\" )\r\n\t\t\t\t\t.addClass( \"ui-slider-\" + this.orientation );\r\n\t\t\t\tthis._refreshValue();\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"value\":\r\n\t\t\t\tthis._animateOff = true;\r\n\t\t\t\tthis._refreshValue();\r\n\t\t\t\tthis._change( null, 0 );\r\n\t\t\t\tthis._animateOff = false;\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"values\":\r\n\t\t\t\tthis._animateOff = true;\r\n\t\t\t\tthis._refreshValue();\r\n\t\t\t\tfor ( i = 0; i < valsLength; i += 1 ) {\r\n\t\t\t\t\tthis._change( null, i );\r\n\t\t\t\t}\r\n\t\t\t\tthis._animateOff = false;\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"min\":\r\n\t\t\tcase \"max\":\r\n\t\t\t\tthis._animateOff = true;\r\n\t\t\t\tthis._refreshValue();\r\n\t\t\t\tthis._animateOff = false;\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"range\":\r\n\t\t\t\tthis._animateOff = true;\r\n\t\t\t\tthis._refresh();\r\n\t\t\t\tthis._animateOff = false;\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t},\r\n\r\n\t//internal value getter\r\n\t// _value() returns value trimmed by min and max, aligned by step\r\n\t_value: function() {\r\n\t\tvar val = this.options.value;\r\n\t\tval = this._trimAlignValue( val );\r\n\r\n\t\treturn val;\r\n\t},\r\n\r\n\t//internal values getter\r\n\t// _values() returns array of values trimmed by min and max, aligned by step\r\n\t// _values( index ) returns single value trimmed by min and max, aligned by step\r\n\t_values: function( index ) {\r\n\t\tvar val,\r\n\t\t\tvals,\r\n\t\t\ti;\r\n\r\n\t\tif ( arguments.length ) {\r\n\t\t\tval = this.options.values[ index ];\r\n\t\t\tval = this._trimAlignValue( val );\r\n\r\n\t\t\treturn val;\r\n\t\t} else if ( this.options.values && this.options.values.length ) {\r\n\t\t\t// .slice() creates a copy of the array\r\n\t\t\t// this copy gets trimmed by min and max and then returned\r\n\t\t\tvals = this.options.values.slice();\r\n\t\t\tfor ( i = 0; i < vals.length; i+= 1) {\r\n\t\t\t\tvals[ i ] = this._trimAlignValue( vals[ i ] );\r\n\t\t\t}\r\n\r\n\t\t\treturn vals;\r\n\t\t} else {\r\n\t\t\treturn [];\r\n\t\t}\r\n\t},\r\n\r\n\t// returns the step-aligned value that val is closest to, between (inclusive) min and max\r\n\t_trimAlignValue: function( val ) {\r\n\t\tif ( val <= this._valueMin() ) {\r\n\t\t\treturn this._valueMin();\r\n\t\t}\r\n\t\tif ( val >= this._valueMax() ) {\r\n\t\t\treturn this._valueMax();\r\n\t\t}\r\n\t\tvar step = ( this.options.step > 0 ) ? this.options.step : 1,\r\n\t\t\tvalModStep = (val - this._valueMin()) % step,\r\n\t\t\talignValue = val - valModStep;\r\n\r\n\t\tif ( Math.abs(valModStep) * 2 >= step ) {\r\n\t\t\talignValue += ( valModStep > 0 ) ? step : ( -step );\r\n\t\t}\r\n\r\n\t\t// Since JavaScript has problems with large floats, round\r\n\t\t// the final value to 5 digits after the decimal point (see #4124)\r\n\t\treturn parseFloat( alignValue.toFixed(5) );\r\n\t},\r\n\r\n\t_valueMin: function() {\r\n\t\treturn this.options.min;\r\n\t},\r\n\r\n\t_valueMax: function() {\r\n\t\treturn this.options.max;\r\n\t},\r\n\r\n\t_refreshValue: function() {\r\n\t\tvar lastValPercent, valPercent, value, valueMin, valueMax,\r\n\t\t\toRange = this.options.range,\r\n\t\t\to = this.options,\r\n\t\t\tthat = this,\r\n\t\t\tanimate = ( !this._animateOff ) ? o.animate : false,\r\n\t\t\t_set = {};\r\n\r\n\t\tif ( this.options.values && this.options.values.length ) {\r\n\t\t\tthis.handles.each(function( i ) {\r\n\t\t\t\tvalPercent = ( that.values(i) - that._valueMin() ) / ( that._valueMax() - that._valueMin() ) * 100;\r\n\t\t\t\t_set[ that.orientation === \"horizontal\" ? \"left\" : \"bottom\" ] = valPercent + \"%\";\r\n\t\t\t\t$( this ).stop( 1, 1 )[ animate ? \"animate\" : \"css\" ]( _set, o.animate );\r\n\t\t\t\tif ( that.options.range === true ) {\r\n\t\t\t\t\tif ( that.orientation === \"horizontal\" ) {\r\n\t\t\t\t\t\tif ( i === 0 ) {\r\n\t\t\t\t\t\t\tthat.range.stop( 1, 1 )[ animate ? \"animate\" : \"css\" ]( { left: valPercent + \"%\" }, o.animate );\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif ( i === 1 ) {\r\n\t\t\t\t\t\t\tthat.range[ animate ? \"animate\" : \"css\" ]( { width: ( valPercent - lastValPercent ) + \"%\" }, { queue: false, duration: o.animate } );\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tif ( i === 0 ) {\r\n\t\t\t\t\t\t\tthat.range.stop( 1, 1 )[ animate ? \"animate\" : \"css\" ]( { bottom: ( valPercent ) + \"%\" }, o.animate );\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif ( i === 1 ) {\r\n\t\t\t\t\t\t\tthat.range[ animate ? \"animate\" : \"css\" ]( { height: ( valPercent - lastValPercent ) + \"%\" }, { queue: false, duration: o.animate } );\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tlastValPercent = valPercent;\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tvalue = this.value();\r\n\t\t\tvalueMin = this._valueMin();\r\n\t\t\tvalueMax = this._valueMax();\r\n\t\t\tvalPercent = ( valueMax !== valueMin ) ?\r\n\t\t\t\t\t( value - valueMin ) / ( valueMax - valueMin ) * 100 :\r\n\t\t\t\t\t0;\r\n\t\t\t_set[ this.orientation === \"horizontal\" ? \"left\" : \"bottom\" ] = valPercent + \"%\";\r\n\t\t\tthis.handle.stop( 1, 1 )[ animate ? \"animate\" : \"css\" ]( _set, o.animate );\r\n\r\n\t\t\tif ( oRange === \"min\" && this.orientation === \"horizontal\" ) {\r\n\t\t\t\tthis.range.stop( 1, 1 )[ animate ? \"animate\" : \"css\" ]( { width: valPercent + \"%\" }, o.animate );\r\n\t\t\t}\r\n\t\t\tif ( oRange === \"max\" && this.orientation === \"horizontal\" ) {\r\n\t\t\t\tthis.range[ animate ? \"animate\" : \"css\" ]( { width: ( 100 - valPercent ) + \"%\" }, { queue: false, duration: o.animate } );\r\n\t\t\t}\r\n\t\t\tif ( oRange === \"min\" && this.orientation === \"vertical\" ) {\r\n\t\t\t\tthis.range.stop( 1, 1 )[ animate ? \"animate\" : \"css\" ]( { height: valPercent + \"%\" }, o.animate );\r\n\t\t\t}\r\n\t\t\tif ( oRange === \"max\" && this.orientation === \"vertical\" ) {\r\n\t\t\t\tthis.range[ animate ? \"animate\" : \"css\" ]( { height: ( 100 - valPercent ) + \"%\" }, { queue: false, duration: o.animate } );\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t_handleEvents: {\r\n\t\tkeydown: function( event ) {\r\n\t\t\t/*jshint maxcomplexity:25*/\r\n\t\t\tvar allowed, curVal, newVal, step,\r\n\t\t\t\tindex = $( event.target ).data( \"ui-slider-handle-index\" );\r\n\r\n\t\t\tswitch ( event.keyCode ) {\r\n\t\t\t\tcase $.ui.keyCode.HOME:\r\n\t\t\t\tcase $.ui.keyCode.END:\r\n\t\t\t\tcase $.ui.keyCode.PAGE_UP:\r\n\t\t\t\tcase $.ui.keyCode.PAGE_DOWN:\r\n\t\t\t\tcase $.ui.keyCode.UP:\r\n\t\t\t\tcase $.ui.keyCode.RIGHT:\r\n\t\t\t\tcase $.ui.keyCode.DOWN:\r\n\t\t\t\tcase $.ui.keyCode.LEFT:\r\n\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t\tif ( !this._keySliding ) {\r\n\t\t\t\t\t\tthis._keySliding = true;\r\n\t\t\t\t\t\t$( event.target ).addClass( \"ui-state-active\" );\r\n\t\t\t\t\t\tallowed = this._start( event, index );\r\n\t\t\t\t\t\tif ( allowed === false ) {\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\r\n\t\t\tstep = this.options.step;\r\n\t\t\tif ( this.options.values && this.options.values.length ) {\r\n\t\t\t\tcurVal = newVal = this.values( index );\r\n\t\t\t} else {\r\n\t\t\t\tcurVal = newVal = this.value();\r\n\t\t\t}\r\n\r\n\t\t\tswitch ( event.keyCode ) {\r\n\t\t\t\tcase $.ui.keyCode.HOME:\r\n\t\t\t\t\tnewVal = this._valueMin();\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase $.ui.keyCode.END:\r\n\t\t\t\t\tnewVal = this._valueMax();\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase $.ui.keyCode.PAGE_UP:\r\n\t\t\t\t\tnewVal = this._trimAlignValue( curVal + ( (this._valueMax() - this._valueMin()) / numPages ) );\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase $.ui.keyCode.PAGE_DOWN:\r\n\t\t\t\t\tnewVal = this._trimAlignValue( curVal - ( (this._valueMax() - this._valueMin()) / numPages ) );\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase $.ui.keyCode.UP:\r\n\t\t\t\tcase $.ui.keyCode.RIGHT:\r\n\t\t\t\t\tif ( curVal === this._valueMax() ) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tnewVal = this._trimAlignValue( curVal + step );\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase $.ui.keyCode.DOWN:\r\n\t\t\t\tcase $.ui.keyCode.LEFT:\r\n\t\t\t\t\tif ( curVal === this._valueMin() ) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tnewVal = this._trimAlignValue( curVal - step );\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\r\n\t\t\tthis._slide( event, index, newVal );\r\n\t\t},\r\n\t\tclick: function( event ) {\r\n\t\t\tevent.preventDefault();\r\n\t\t},\r\n\t\tkeyup: function( event ) {\r\n\t\t\tvar index = $( event.target ).data( \"ui-slider-handle-index\" );\r\n\r\n\t\t\tif ( this._keySliding ) {\r\n\t\t\t\tthis._keySliding = false;\r\n\t\t\t\tthis._stop( event, index );\r\n\t\t\t\tthis._change( event, index );\r\n\t\t\t\t$( event.target ).removeClass( \"ui-state-active\" );\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n});\r\n\r\n}(jQuery));\r\n\r\n(function( $ ) {\r\n\r\nfunction modifier( fn ) {\r\n\treturn function() {\r\n\t\tvar previous = this.element.val();\r\n\t\tfn.apply( this, arguments );\r\n\t\tthis._refresh();\r\n\t\tif ( previous !== this.element.val() ) {\r\n\t\t\tthis._trigger( \"change\" );\r\n\t\t}\r\n\t};\r\n}\r\n\r\n$.widget( \"ui.spinner\", {\r\n\tversion: \"1.10.2\",\r\n\tdefaultElement: \"<input>\",\r\n\twidgetEventPrefix: \"spin\",\r\n\toptions: {\r\n\t\tculture: null,\r\n\t\ticons: {\r\n\t\t\tdown: \"ui-icon-triangle-1-s\",\r\n\t\t\tup: \"ui-icon-triangle-1-n\"\r\n\t\t},\r\n\t\tincremental: true,\r\n\t\tmax: null,\r\n\t\tmin: null,\r\n\t\tnumberFormat: null,\r\n\t\tpage: 10,\r\n\t\tstep: 1,\r\n\r\n\t\tchange: null,\r\n\t\tspin: null,\r\n\t\tstart: null,\r\n\t\tstop: null\r\n\t},\r\n\r\n\t_create: function() {\r\n\t\t// handle string values that need to be parsed\r\n\t\tthis._setOption( \"max\", this.options.max );\r\n\t\tthis._setOption( \"min\", this.options.min );\r\n\t\tthis._setOption( \"step\", this.options.step );\r\n\r\n\t\t// format the value, but don't constrain\r\n\t\tthis._value( this.element.val(), true );\r\n\r\n\t\tthis._draw();\r\n\t\tthis._on( this._events );\r\n\t\tthis._refresh();\r\n\r\n\t\t// turning off autocomplete prevents the browser from remembering the\r\n\t\t// value when navigating through history, so we re-enable autocomplete\r\n\t\t// if the page is unloaded before the widget is destroyed. #7790\r\n\t\tthis._on( this.window, {\r\n\t\t\tbeforeunload: function() {\r\n\t\t\t\tthis.element.removeAttr( \"autocomplete\" );\r\n\t\t\t}\r\n\t\t});\r\n\t},\r\n\r\n\t_getCreateOptions: function() {\r\n\t\tvar options = {},\r\n\t\t\telement = this.element;\r\n\r\n\t\t$.each( [ \"min\", \"max\", \"step\" ], function( i, option ) {\r\n\t\t\tvar value = element.attr( option );\r\n\t\t\tif ( value !== undefined && value.length ) {\r\n\t\t\t\toptions[ option ] = value;\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn options;\r\n\t},\r\n\r\n\t_events: {\r\n\t\tkeydown: function( event ) {\r\n\t\t\tif ( this._start( event ) && this._keydown( event ) ) {\r\n\t\t\t\tevent.preventDefault();\r\n\t\t\t}\r\n\t\t},\r\n\t\tkeyup: \"_stop\",\r\n\t\tfocus: function() {\r\n\t\t\tthis.previous = this.element.val();\r\n\t\t},\r\n\t\tblur: function( event ) {\r\n\t\t\tif ( this.cancelBlur ) {\r\n\t\t\t\tdelete this.cancelBlur;\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tthis._stop();\r\n\t\t\tthis._refresh();\r\n\t\t\tif ( this.previous !== this.element.val() ) {\r\n\t\t\t\tthis._trigger( \"change\", event );\r\n\t\t\t}\r\n\t\t},\r\n\t\tmousewheel: function( event, delta ) {\r\n\t\t\tif ( !delta ) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif ( !this.spinning && !this._start( event ) ) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t\tthis._spin( (delta > 0 ? 1 : -1) * this.options.step, event );\r\n\t\t\tclearTimeout( this.mousewheelTimer );\r\n\t\t\tthis.mousewheelTimer = this._delay(function() {\r\n\t\t\t\tif ( this.spinning ) {\r\n\t\t\t\t\tthis._stop( event );\r\n\t\t\t\t}\r\n\t\t\t}, 100 );\r\n\t\t\tevent.preventDefault();\r\n\t\t},\r\n\t\t\"mousedown .ui-spinner-button\": function( event ) {\r\n\t\t\tvar previous;\r\n\r\n\t\t\t// We never want the buttons to have focus; whenever the user is\r\n\t\t\t// interacting with the spinner, the focus should be on the input.\r\n\t\t\t// If the input is focused then this.previous is properly set from\r\n\t\t\t// when the input first received focus. If the input is not focused\r\n\t\t\t// then we need to set this.previous based on the value before spinning.\r\n\t\t\tprevious = this.element[0] === this.document[0].activeElement ?\r\n\t\t\t\tthis.previous : this.element.val();\r\n\t\t\tfunction checkFocus() {\r\n\t\t\t\tvar isActive = this.element[0] === this.document[0].activeElement;\r\n\t\t\t\tif ( !isActive ) {\r\n\t\t\t\t\tthis.element.focus();\r\n\t\t\t\t\tthis.previous = previous;\r\n\t\t\t\t\t// support: IE\r\n\t\t\t\t\t// IE sets focus asynchronously, so we need to check if focus\r\n\t\t\t\t\t// moved off of the input because the user clicked on the button.\r\n\t\t\t\t\tthis._delay(function() {\r\n\t\t\t\t\t\tthis.previous = previous;\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// ensure focus is on (or stays on) the text field\r\n\t\t\tevent.preventDefault();\r\n\t\t\tcheckFocus.call( this );\r\n\r\n\t\t\t// support: IE\r\n\t\t\t// IE doesn't prevent moving focus even with event.preventDefault()\r\n\t\t\t// so we set a flag to know when we should ignore the blur event\r\n\t\t\t// and check (again) if focus moved off of the input.\r\n\t\t\tthis.cancelBlur = true;\r\n\t\t\tthis._delay(function() {\r\n\t\t\t\tdelete this.cancelBlur;\r\n\t\t\t\tcheckFocus.call( this );\r\n\t\t\t});\r\n\r\n\t\t\tif ( this._start( event ) === false ) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tthis._repeat( null, $( event.currentTarget ).hasClass( \"ui-spinner-up\" ) ? 1 : -1, event );\r\n\t\t},\r\n\t\t\"mouseup .ui-spinner-button\": \"_stop\",\r\n\t\t\"mouseenter .ui-spinner-button\": function( event ) {\r\n\t\t\t// button will add ui-state-active if mouse was down while mouseleave and kept down\r\n\t\t\tif ( !$( event.currentTarget ).hasClass( \"ui-state-active\" ) ) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif ( this._start( event ) === false ) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\tthis._repeat( null, $( event.currentTarget ).hasClass( \"ui-spinner-up\" ) ? 1 : -1, event );\r\n\t\t},\r\n\t\t// TODO: do we really want to consider this a stop?\r\n\t\t// shouldn't we just stop the repeater and wait until mouseup before\r\n\t\t// we trigger the stop event?\r\n\t\t\"mouseleave .ui-spinner-button\": \"_stop\"\r\n\t},\r\n\r\n\t_draw: function() {\r\n\t\tvar uiSpinner = this.uiSpinner = this.element\r\n\t\t\t.addClass( \"ui-spinner-input\" )\r\n\t\t\t.attr( \"autocomplete\", \"off\" )\r\n\t\t\t.wrap( this._uiSpinnerHtml() )\r\n\t\t\t.parent()\r\n\t\t\t\t// add buttons\r\n\t\t\t\t.append( this._buttonHtml() );\r\n\r\n\t\tthis.element.attr( \"role\", \"spinbutton\" );\r\n\r\n\t\t// button bindings\r\n\t\tthis.buttons = uiSpinner.find( \".ui-spinner-button\" )\r\n\t\t\t.attr( \"tabIndex\", -1 )\r\n\t\t\t.button()\r\n\t\t\t.removeClass( \"ui-corner-all\" );\r\n\r\n\t\t// IE 6 doesn't understand height: 50% for the buttons\r\n\t\t// unless the wrapper has an explicit height\r\n\t\tif ( this.buttons.height() > Math.ceil( uiSpinner.height() * 0.5 ) &&\r\n\t\t\t\tuiSpinner.height() > 0 ) {\r\n\t\t\tuiSpinner.height( uiSpinner.height() );\r\n\t\t}\r\n\r\n\t\t// disable spinner if element was already disabled\r\n\t\tif ( this.options.disabled ) {\r\n\t\t\tthis.disable();\r\n\t\t}\r\n\t},\r\n\r\n\t_keydown: function( event ) {\r\n\t\tvar options = this.options,\r\n\t\t\tkeyCode = $.ui.keyCode;\r\n\r\n\t\tswitch ( event.keyCode ) {\r\n\t\tcase keyCode.UP:\r\n\t\t\tthis._repeat( null, 1, event );\r\n\t\t\treturn true;\r\n\t\tcase keyCode.DOWN:\r\n\t\t\tthis._repeat( null, -1, event );\r\n\t\t\treturn true;\r\n\t\tcase keyCode.PAGE_UP:\r\n\t\t\tthis._repeat( null, options.page, event );\r\n\t\t\treturn true;\r\n\t\tcase keyCode.PAGE_DOWN:\r\n\t\t\tthis._repeat( null, -options.page, event );\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\t},\r\n\r\n\t_uiSpinnerHtml: function() {\r\n\t\treturn \"<span class='ui-spinner ui-widget ui-widget-content ui-corner-all'></span>\";\r\n\t},\r\n\r\n\t_buttonHtml: function() {\r\n\t\treturn \"\" +\r\n\t\t\t\"<a class='ui-spinner-button ui-spinner-up ui-corner-tr'>\" +\r\n\t\t\t\t\"<span class='ui-icon \" + this.options.icons.up + \"'>&#9650;</span>\" +\r\n\t\t\t\"</a>\" +\r\n\t\t\t\"<a class='ui-spinner-button ui-spinner-down ui-corner-br'>\" +\r\n\t\t\t\t\"<span class='ui-icon \" + this.options.icons.down + \"'>&#9660;</span>\" +\r\n\t\t\t\"</a>\";\r\n\t},\r\n\r\n\t_start: function( event ) {\r\n\t\tif ( !this.spinning && this._trigger( \"start\", event ) === false ) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tif ( !this.counter ) {\r\n\t\t\tthis.counter = 1;\r\n\t\t}\r\n\t\tthis.spinning = true;\r\n\t\treturn true;\r\n\t},\r\n\r\n\t_repeat: function( i, steps, event ) {\r\n\t\ti = i || 500;\r\n\r\n\t\tclearTimeout( this.timer );\r\n\t\tthis.timer = this._delay(function() {\r\n\t\t\tthis._repeat( 40, steps, event );\r\n\t\t}, i );\r\n\r\n\t\tthis._spin( steps * this.options.step, event );\r\n\t},\r\n\r\n\t_spin: function( step, event ) {\r\n\t\tvar value = this.value() || 0;\r\n\r\n\t\tif ( !this.counter ) {\r\n\t\t\tthis.counter = 1;\r\n\t\t}\r\n\r\n\t\tvalue = this._adjustValue( value + step * this._increment( this.counter ) );\r\n\r\n\t\tif ( !this.spinning || this._trigger( \"spin\", event, { value: value } ) !== false) {\r\n\t\t\tthis._value( value );\r\n\t\t\tthis.counter++;\r\n\t\t}\r\n\t},\r\n\r\n\t_increment: function( i ) {\r\n\t\tvar incremental = this.options.incremental;\r\n\r\n\t\tif ( incremental ) {\r\n\t\t\treturn $.isFunction( incremental ) ?\r\n\t\t\t\tincremental( i ) :\r\n\t\t\t\tMath.floor( i*i*i/50000 - i*i/500 + 17*i/200 + 1 );\r\n\t\t}\r\n\r\n\t\treturn 1;\r\n\t},\r\n\r\n\t_precision: function() {\r\n\t\tvar precision = this._precisionOf( this.options.step );\r\n\t\tif ( this.options.min !== null ) {\r\n\t\t\tprecision = Math.max( precision, this._precisionOf( this.options.min ) );\r\n\t\t}\r\n\t\treturn precision;\r\n\t},\r\n\r\n\t_precisionOf: function( num ) {\r\n\t\tvar str = num.toString(),\r\n\t\t\tdecimal = str.indexOf( \".\" );\r\n\t\treturn decimal === -1 ? 0 : str.length - decimal - 1;\r\n\t},\r\n\r\n\t_adjustValue: function( value ) {\r\n\t\tvar base, aboveMin,\r\n\t\t\toptions = this.options;\r\n\r\n\t\t// make sure we're at a valid step\r\n\t\t// - find out where we are relative to the base (min or 0)\r\n\t\tbase = options.min !== null ? options.min : 0;\r\n\t\taboveMin = value - base;\r\n\t\t// - round to the nearest step\r\n\t\taboveMin = Math.round(aboveMin / options.step) * options.step;\r\n\t\t// - rounding is based on 0, so adjust back to our base\r\n\t\tvalue = base + aboveMin;\r\n\r\n\t\t// fix precision from bad JS floating point math\r\n\t\tvalue = parseFloat( value.toFixed( this._precision() ) );\r\n\r\n\t\t// clamp the value\r\n\t\tif ( options.max !== null && value > options.max) {\r\n\t\t\treturn options.max;\r\n\t\t}\r\n\t\tif ( options.min !== null && value < options.min ) {\r\n\t\t\treturn options.min;\r\n\t\t}\r\n\r\n\t\treturn value;\r\n\t},\r\n\r\n\t_stop: function( event ) {\r\n\t\tif ( !this.spinning ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tclearTimeout( this.timer );\r\n\t\tclearTimeout( this.mousewheelTimer );\r\n\t\tthis.counter = 0;\r\n\t\tthis.spinning = false;\r\n\t\tthis._trigger( \"stop\", event );\r\n\t},\r\n\r\n\t_setOption: function( key, value ) {\r\n\t\tif ( key === \"culture\" || key === \"numberFormat\" ) {\r\n\t\t\tvar prevValue = this._parse( this.element.val() );\r\n\t\t\tthis.options[ key ] = value;\r\n\t\t\tthis.element.val( this._format( prevValue ) );\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif ( key === \"max\" || key === \"min\" || key === \"step\" ) {\r\n\t\t\tif ( typeof value === \"string\" ) {\r\n\t\t\t\tvalue = this._parse( value );\r\n\t\t\t}\r\n\t\t}\r\n\t\tif ( key === \"icons\" ) {\r\n\t\t\tthis.buttons.first().find( \".ui-icon\" )\r\n\t\t\t\t.removeClass( this.options.icons.up )\r\n\t\t\t\t.addClass( value.up );\r\n\t\t\tthis.buttons.last().find( \".ui-icon\" )\r\n\t\t\t\t.removeClass( this.options.icons.down )\r\n\t\t\t\t.addClass( value.down );\r\n\t\t}\r\n\r\n\t\tthis._super( key, value );\r\n\r\n\t\tif ( key === \"disabled\" ) {\r\n\t\t\tif ( value ) {\r\n\t\t\t\tthis.element.prop( \"disabled\", true );\r\n\t\t\t\tthis.buttons.button( \"disable\" );\r\n\t\t\t} else {\r\n\t\t\t\tthis.element.prop( \"disabled\", false );\r\n\t\t\t\tthis.buttons.button( \"enable\" );\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t_setOptions: modifier(function( options ) {\r\n\t\tthis._super( options );\r\n\t\tthis._value( this.element.val() );\r\n\t}),\r\n\r\n\t_parse: function( val ) {\r\n\t\tif ( typeof val === \"string\" && val !== \"\" ) {\r\n\t\t\tval = window.Globalize && this.options.numberFormat ?\r\n\t\t\t\tGlobalize.parseFloat( val, 10, this.options.culture ) : +val;\r\n\t\t}\r\n\t\treturn val === \"\" || isNaN( val ) ? null : val;\r\n\t},\r\n\r\n\t_format: function( value ) {\r\n\t\tif ( value === \"\" ) {\r\n\t\t\treturn \"\";\r\n\t\t}\r\n\t\treturn window.Globalize && this.options.numberFormat ?\r\n\t\t\tGlobalize.format( value, this.options.numberFormat, this.options.culture ) :\r\n\t\t\tvalue;\r\n\t},\r\n\r\n\t_refresh: function() {\r\n\t\tthis.element.attr({\r\n\t\t\t\"aria-valuemin\": this.options.min,\r\n\t\t\t\"aria-valuemax\": this.options.max,\r\n\t\t\t// TODO: what should we do with values that can't be parsed?\r\n\t\t\t\"aria-valuenow\": this._parse( this.element.val() )\r\n\t\t});\r\n\t},\r\n\r\n\t// update the value without triggering change\r\n\t_value: function( value, allowAny ) {\r\n\t\tvar parsed;\r\n\t\tif ( value !== \"\" ) {\r\n\t\t\tparsed = this._parse( value );\r\n\t\t\tif ( parsed !== null ) {\r\n\t\t\t\tif ( !allowAny ) {\r\n\t\t\t\t\tparsed = this._adjustValue( parsed );\r\n\t\t\t\t}\r\n\t\t\t\tvalue = this._format( parsed );\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.element.val( value );\r\n\t\tthis._refresh();\r\n\t},\r\n\r\n\t_destroy: function() {\r\n\t\tthis.element\r\n\t\t\t.removeClass( \"ui-spinner-input\" )\r\n\t\t\t.prop( \"disabled\", false )\r\n\t\t\t.removeAttr( \"autocomplete\" )\r\n\t\t\t.removeAttr( \"role\" )\r\n\t\t\t.removeAttr( \"aria-valuemin\" )\r\n\t\t\t.removeAttr( \"aria-valuemax\" )\r\n\t\t\t.removeAttr( \"aria-valuenow\" );\r\n\t\tthis.uiSpinner.replaceWith( this.element );\r\n\t},\r\n\r\n\tstepUp: modifier(function( steps ) {\r\n\t\tthis._stepUp( steps );\r\n\t}),\r\n\t_stepUp: function( steps ) {\r\n\t\tif ( this._start() ) {\r\n\t\t\tthis._spin( (steps || 1) * this.options.step );\r\n\t\t\tthis._stop();\r\n\t\t}\r\n\t},\r\n\r\n\tstepDown: modifier(function( steps ) {\r\n\t\tthis._stepDown( steps );\r\n\t}),\r\n\t_stepDown: function( steps ) {\r\n\t\tif ( this._start() ) {\r\n\t\t\tthis._spin( (steps || 1) * -this.options.step );\r\n\t\t\tthis._stop();\r\n\t\t}\r\n\t},\r\n\r\n\tpageUp: modifier(function( pages ) {\r\n\t\tthis._stepUp( (pages || 1) * this.options.page );\r\n\t}),\r\n\r\n\tpageDown: modifier(function( pages ) {\r\n\t\tthis._stepDown( (pages || 1) * this.options.page );\r\n\t}),\r\n\r\n\tvalue: function( newVal ) {\r\n\t\tif ( !arguments.length ) {\r\n\t\t\treturn this._parse( this.element.val() );\r\n\t\t}\r\n\t\tmodifier( this._value ).call( this, newVal );\r\n\t},\r\n\r\n\twidget: function() {\r\n\t\treturn this.uiSpinner;\r\n\t}\r\n});\r\n\r\n}( jQuery ) );\r\n\r\n(function( $, undefined ) {\r\n\r\nvar tabId = 0,\r\n\trhash = /#.*$/;\r\n\r\nfunction getNextTabId() {\r\n\treturn ++tabId;\r\n}\r\n\r\nfunction isLocal( anchor ) {\r\n\treturn anchor.hash.length > 1 &&\r\n\t\tdecodeURIComponent( anchor.href.replace( rhash, \"\" ) ) ===\r\n\t\t\tdecodeURIComponent( location.href.replace( rhash, \"\" ) );\r\n}\r\n\r\n$.widget( \"ui.tabs\", {\r\n\tversion: \"1.10.2\",\r\n\tdelay: 300,\r\n\toptions: {\r\n\t\tactive: null,\r\n\t\tcollapsible: false,\r\n\t\tevent: \"click\",\r\n\t\theightStyle: \"content\",\r\n\t\thide: null,\r\n\t\tshow: null,\r\n\r\n\t\t// callbacks\r\n\t\tactivate: null,\r\n\t\tbeforeActivate: null,\r\n\t\tbeforeLoad: null,\r\n\t\tload: null\r\n\t},\r\n\r\n\t_create: function() {\r\n\t\tvar that = this,\r\n\t\t\toptions = this.options;\r\n\r\n\t\tthis.running = false;\r\n\r\n\t\tthis.element\r\n\t\t\t.addClass( \"ui-tabs ui-widget ui-widget-content ui-corner-all\" )\r\n\t\t\t.toggleClass( \"ui-tabs-collapsible\", options.collapsible )\r\n\t\t\t// Prevent users from focusing disabled tabs via click\r\n\t\t\t.delegate( \".ui-tabs-nav > li\", \"mousedown\" + this.eventNamespace, function( event ) {\r\n\t\t\t\tif ( $( this ).is( \".ui-state-disabled\" ) ) {\r\n\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t// support: IE <9\r\n\t\t\t// Preventing the default action in mousedown doesn't prevent IE\r\n\t\t\t// from focusing the element, so if the anchor gets focused, blur.\r\n\t\t\t// We don't have to worry about focusing the previously focused\r\n\t\t\t// element since clicking on a non-focusable element should focus\r\n\t\t\t// the body anyway.\r\n\t\t\t.delegate( \".ui-tabs-anchor\", \"focus\" + this.eventNamespace, function() {\r\n\t\t\t\tif ( $( this ).closest( \"li\" ).is( \".ui-state-disabled\" ) ) {\r\n\t\t\t\t\tthis.blur();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\tthis._processTabs();\r\n\t\toptions.active = this._initialActive();\r\n\r\n\t\t// Take disabling tabs via class attribute from HTML\r\n\t\t// into account and update option properly.\r\n\t\tif ( $.isArray( options.disabled ) ) {\r\n\t\t\toptions.disabled = $.unique( options.disabled.concat(\r\n\t\t\t\t$.map( this.tabs.filter( \".ui-state-disabled\" ), function( li ) {\r\n\t\t\t\t\treturn that.tabs.index( li );\r\n\t\t\t\t})\r\n\t\t\t) ).sort();\r\n\t\t}\r\n\r\n\t\t// check for length avoids error when initializing empty list\r\n\t\tif ( this.options.active !== false && this.anchors.length ) {\r\n\t\t\tthis.active = this._findActive( options.active );\r\n\t\t} else {\r\n\t\t\tthis.active = $();\r\n\t\t}\r\n\r\n\t\tthis._refresh();\r\n\r\n\t\tif ( this.active.length ) {\r\n\t\t\tthis.load( options.active );\r\n\t\t}\r\n\t},\r\n\r\n\t_initialActive: function() {\r\n\t\tvar active = this.options.active,\r\n\t\t\tcollapsible = this.options.collapsible,\r\n\t\t\tlocationHash = location.hash.substring( 1 );\r\n\r\n\t\tif ( active === null ) {\r\n\t\t\t// check the fragment identifier in the URL\r\n\t\t\tif ( locationHash ) {\r\n\t\t\t\tthis.tabs.each(function( i, tab ) {\r\n\t\t\t\t\tif ( $( tab ).attr( \"aria-controls\" ) === locationHash ) {\r\n\t\t\t\t\t\tactive = i;\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\t// check for a tab marked active via a class\r\n\t\t\tif ( active === null ) {\r\n\t\t\t\tactive = this.tabs.index( this.tabs.filter( \".ui-tabs-active\" ) );\r\n\t\t\t}\r\n\r\n\t\t\t// no active tab, set to false\r\n\t\t\tif ( active === null || active === -1 ) {\r\n\t\t\t\tactive = this.tabs.length ? 0 : false;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// handle numbers: negative, out of range\r\n\t\tif ( active !== false ) {\r\n\t\t\tactive = this.tabs.index( this.tabs.eq( active ) );\r\n\t\t\tif ( active === -1 ) {\r\n\t\t\t\tactive = collapsible ? false : 0;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// don't allow collapsible: false and active: false\r\n\t\tif ( !collapsible && active === false && this.anchors.length ) {\r\n\t\t\tactive = 0;\r\n\t\t}\r\n\r\n\t\treturn active;\r\n\t},\r\n\r\n\t_getCreateEventData: function() {\r\n\t\treturn {\r\n\t\t\ttab: this.active,\r\n\t\t\tpanel: !this.active.length ? $() : this._getPanelForTab( this.active )\r\n\t\t};\r\n\t},\r\n\r\n\t_tabKeydown: function( event ) {\r\n\t\t/*jshint maxcomplexity:15*/\r\n\t\tvar focusedTab = $( this.document[0].activeElement ).closest( \"li\" ),\r\n\t\t\tselectedIndex = this.tabs.index( focusedTab ),\r\n\t\t\tgoingForward = true;\r\n\r\n\t\tif ( this._handlePageNav( event ) ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tswitch ( event.keyCode ) {\r\n\t\t\tcase $.ui.keyCode.RIGHT:\r\n\t\t\tcase $.ui.keyCode.DOWN:\r\n\t\t\t\tselectedIndex++;\r\n\t\t\t\tbreak;\r\n\t\t\tcase $.ui.keyCode.UP:\r\n\t\t\tcase $.ui.keyCode.LEFT:\r\n\t\t\t\tgoingForward = false;\r\n\t\t\t\tselectedIndex--;\r\n\t\t\t\tbreak;\r\n\t\t\tcase $.ui.keyCode.END:\r\n\t\t\t\tselectedIndex = this.anchors.length - 1;\r\n\t\t\t\tbreak;\r\n\t\t\tcase $.ui.keyCode.HOME:\r\n\t\t\t\tselectedIndex = 0;\r\n\t\t\t\tbreak;\r\n\t\t\tcase $.ui.keyCode.SPACE:\r\n\t\t\t\t// Activate only, no collapsing\r\n\t\t\t\tevent.preventDefault();\r\n\t\t\t\tclearTimeout( this.activating );\r\n\t\t\t\tthis._activate( selectedIndex );\r\n\t\t\t\treturn;\r\n\t\t\tcase $.ui.keyCode.ENTER:\r\n\t\t\t\t// Toggle (cancel delayed activation, allow collapsing)\r\n\t\t\t\tevent.preventDefault();\r\n\t\t\t\tclearTimeout( this.activating );\r\n\t\t\t\t// Determine if we should collapse or activate\r\n\t\t\t\tthis._activate( selectedIndex === this.options.active ? false : selectedIndex );\r\n\t\t\t\treturn;\r\n\t\t\tdefault:\r\n\t\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// Focus the appropriate tab, based on which key was pressed\r\n\t\tevent.preventDefault();\r\n\t\tclearTimeout( this.activating );\r\n\t\tselectedIndex = this._focusNextTab( selectedIndex, goingForward );\r\n\r\n\t\t// Navigating with control key will prevent automatic activation\r\n\t\tif ( !event.ctrlKey ) {\r\n\t\t\t// Update aria-selected immediately so that AT think the tab is already selected.\r\n\t\t\t// Otherwise AT may confuse the user by stating that they need to activate the tab,\r\n\t\t\t// but the tab will already be activated by the time the announcement finishes.\r\n\t\t\tfocusedTab.attr( \"aria-selected\", \"false\" );\r\n\t\t\tthis.tabs.eq( selectedIndex ).attr( \"aria-selected\", \"true\" );\r\n\r\n\t\t\tthis.activating = this._delay(function() {\r\n\t\t\t\tthis.option( \"active\", selectedIndex );\r\n\t\t\t}, this.delay );\r\n\t\t}\r\n\t},\r\n\r\n\t_panelKeydown: function( event ) {\r\n\t\tif ( this._handlePageNav( event ) ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// Ctrl+up moves focus to the current tab\r\n\t\tif ( event.ctrlKey && event.keyCode === $.ui.keyCode.UP ) {\r\n\t\t\tevent.preventDefault();\r\n\t\t\tthis.active.focus();\r\n\t\t}\r\n\t},\r\n\r\n\t// Alt+page up/down moves focus to the previous/next tab (and activates)\r\n\t_handlePageNav: function( event ) {\r\n\t\tif ( event.altKey && event.keyCode === $.ui.keyCode.PAGE_UP ) {\r\n\t\t\tthis._activate( this._focusNextTab( this.options.active - 1, false ) );\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\tif ( event.altKey && event.keyCode === $.ui.keyCode.PAGE_DOWN ) {\r\n\t\t\tthis._activate( this._focusNextTab( this.options.active + 1, true ) );\r\n\t\t\treturn true;\r\n\t\t}\r\n\t},\r\n\r\n\t_findNextTab: function( index, goingForward ) {\r\n\t\tvar lastTabIndex = this.tabs.length - 1;\r\n\r\n\t\tfunction constrain() {\r\n\t\t\tif ( index > lastTabIndex ) {\r\n\t\t\t\tindex = 0;\r\n\t\t\t}\r\n\t\t\tif ( index < 0 ) {\r\n\t\t\t\tindex = lastTabIndex;\r\n\t\t\t}\r\n\t\t\treturn index;\r\n\t\t}\r\n\r\n\t\twhile ( $.inArray( constrain(), this.options.disabled ) !== -1 ) {\r\n\t\t\tindex = goingForward ? index + 1 : index - 1;\r\n\t\t}\r\n\r\n\t\treturn index;\r\n\t},\r\n\r\n\t_focusNextTab: function( index, goingForward ) {\r\n\t\tindex = this._findNextTab( index, goingForward );\r\n\t\tthis.tabs.eq( index ).focus();\r\n\t\treturn index;\r\n\t},\r\n\r\n\t_setOption: function( key, value ) {\r\n\t\tif ( key === \"active\" ) {\r\n\t\t\t// _activate() will handle invalid values and update this.options\r\n\t\t\tthis._activate( value );\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif ( key === \"disabled\" ) {\r\n\t\t\t// don't use the widget factory's disabled handling\r\n\t\t\tthis._setupDisabled( value );\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tthis._super( key, value);\r\n\r\n\t\tif ( key === \"collapsible\" ) {\r\n\t\t\tthis.element.toggleClass( \"ui-tabs-collapsible\", value );\r\n\t\t\t// Setting collapsible: false while collapsed; open first panel\r\n\t\t\tif ( !value && this.options.active === false ) {\r\n\t\t\t\tthis._activate( 0 );\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif ( key === \"event\" ) {\r\n\t\t\tthis._setupEvents( value );\r\n\t\t}\r\n\r\n\t\tif ( key === \"heightStyle\" ) {\r\n\t\t\tthis._setupHeightStyle( value );\r\n\t\t}\r\n\t},\r\n\r\n\t_tabId: function( tab ) {\r\n\t\treturn tab.attr( \"aria-controls\" ) || \"ui-tabs-\" + getNextTabId();\r\n\t},\r\n\r\n\t_sanitizeSelector: function( hash ) {\r\n\t\treturn hash ? hash.replace( /[!\"$%&'()*+,.\\/:;<=>?@\\[\\]\\^`{|}~]/g, \"\\\\$&\" ) : \"\";\r\n\t},\r\n\r\n\trefresh: function() {\r\n\t\tvar options = this.options,\r\n\t\t\tlis = this.tablist.children( \":has(a[href])\" );\r\n\r\n\t\t// get disabled tabs from class attribute from HTML\r\n\t\t// this will get converted to a boolean if needed in _refresh()\r\n\t\toptions.disabled = $.map( lis.filter( \".ui-state-disabled\" ), function( tab ) {\r\n\t\t\treturn lis.index( tab );\r\n\t\t});\r\n\r\n\t\tthis._processTabs();\r\n\r\n\t\t// was collapsed or no tabs\r\n\t\tif ( options.active === false || !this.anchors.length ) {\r\n\t\t\toptions.active = false;\r\n\t\t\tthis.active = $();\r\n\t\t// was active, but active tab is gone\r\n\t\t} else if ( this.active.length && !$.contains( this.tablist[ 0 ], this.active[ 0 ] ) ) {\r\n\t\t\t// all remaining tabs are disabled\r\n\t\t\tif ( this.tabs.length === options.disabled.length ) {\r\n\t\t\t\toptions.active = false;\r\n\t\t\t\tthis.active = $();\r\n\t\t\t// activate previous tab\r\n\t\t\t} else {\r\n\t\t\t\tthis._activate( this._findNextTab( Math.max( 0, options.active - 1 ), false ) );\r\n\t\t\t}\r\n\t\t// was active, active tab still exists\r\n\t\t} else {\r\n\t\t\t// make sure active index is correct\r\n\t\t\toptions.active = this.tabs.index( this.active );\r\n\t\t}\r\n\r\n\t\tthis._refresh();\r\n\t},\r\n\r\n\t_refresh: function() {\r\n\t\tthis._setupDisabled( this.options.disabled );\r\n\t\tthis._setupEvents( this.options.event );\r\n\t\tthis._setupHeightStyle( this.options.heightStyle );\r\n\r\n\t\tthis.tabs.not( this.active ).attr({\r\n\t\t\t\"aria-selected\": \"false\",\r\n\t\t\ttabIndex: -1\r\n\t\t});\r\n\t\tthis.panels.not( this._getPanelForTab( this.active ) )\r\n\t\t\t.hide()\r\n\t\t\t.attr({\r\n\t\t\t\t\"aria-expanded\": \"false\",\r\n\t\t\t\t\"aria-hidden\": \"true\"\r\n\t\t\t});\r\n\r\n\t\t// Make sure one tab is in the tab order\r\n\t\tif ( !this.active.length ) {\r\n\t\t\tthis.tabs.eq( 0 ).attr( \"tabIndex\", 0 );\r\n\t\t} else {\r\n\t\t\tthis.active\r\n\t\t\t\t.addClass( \"ui-tabs-active ui-state-active\" )\r\n\t\t\t\t.attr({\r\n\t\t\t\t\t\"aria-selected\": \"true\",\r\n\t\t\t\t\ttabIndex: 0\r\n\t\t\t\t});\r\n\t\t\tthis._getPanelForTab( this.active )\r\n\t\t\t\t.show()\r\n\t\t\t\t.attr({\r\n\t\t\t\t\t\"aria-expanded\": \"true\",\r\n\t\t\t\t\t\"aria-hidden\": \"false\"\r\n\t\t\t\t});\r\n\t\t}\r\n\t},\r\n\r\n\t_processTabs: function() {\r\n\t\tvar that = this;\r\n\r\n\t\tthis.tablist = this._getList()\r\n\t\t\t.addClass( \"ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all\" )\r\n\t\t\t.attr( \"role\", \"tablist\" );\r\n\r\n\t\tthis.tabs = this.tablist.find( \"> li:has(a[href])\" )\r\n\t\t\t.addClass( \"ui-state-default ui-corner-top\" )\r\n\t\t\t.attr({\r\n\t\t\t\trole: \"tab\",\r\n\t\t\t\ttabIndex: -1\r\n\t\t\t});\r\n\r\n\t\tthis.anchors = this.tabs.map(function() {\r\n\t\t\t\treturn $( \"a\", this )[ 0 ];\r\n\t\t\t})\r\n\t\t\t.addClass( \"ui-tabs-anchor\" )\r\n\t\t\t.attr({\r\n\t\t\t\trole: \"presentation\",\r\n\t\t\t\ttabIndex: -1\r\n\t\t\t});\r\n\r\n\t\tthis.panels = $();\r\n\r\n\t\tthis.anchors.each(function( i, anchor ) {\r\n\t\t\tvar selector, panel, panelId,\r\n\t\t\t\tanchorId = $( anchor ).uniqueId().attr( \"id\" ),\r\n\t\t\t\ttab = $( anchor ).closest( \"li\" ),\r\n\t\t\t\toriginalAriaControls = tab.attr( \"aria-controls\" );\r\n\r\n\t\t\t// inline tab\r\n\t\t\tif ( isLocal( anchor ) ) {\r\n\t\t\t\tselector = anchor.hash;\r\n\t\t\t\tpanel = that.element.find( that._sanitizeSelector( selector ) );\r\n\t\t\t// remote tab\r\n\t\t\t} else {\r\n\t\t\t\tpanelId = that._tabId( tab );\r\n\t\t\t\tselector = \"#\" + panelId;\r\n\t\t\t\tpanel = that.element.find( selector );\r\n\t\t\t\tif ( !panel.length ) {\r\n\t\t\t\t\tpanel = that._createPanel( panelId );\r\n\t\t\t\t\tpanel.insertAfter( that.panels[ i - 1 ] || that.tablist );\r\n\t\t\t\t}\r\n\t\t\t\tpanel.attr( \"aria-live\", \"polite\" );\r\n\t\t\t}\r\n\r\n\t\t\tif ( panel.length) {\r\n\t\t\t\tthat.panels = that.panels.add( panel );\r\n\t\t\t}\r\n\t\t\tif ( originalAriaControls ) {\r\n\t\t\t\ttab.data( \"ui-tabs-aria-controls\", originalAriaControls );\r\n\t\t\t}\r\n\t\t\ttab.attr({\r\n\t\t\t\t\"aria-controls\": selector.substring( 1 ),\r\n\t\t\t\t\"aria-labelledby\": anchorId\r\n\t\t\t});\r\n\t\t\tpanel.attr( \"aria-labelledby\", anchorId );\r\n\t\t});\r\n\r\n\t\tthis.panels\r\n\t\t\t.addClass( \"ui-tabs-panel ui-widget-content ui-corner-bottom\" )\r\n\t\t\t.attr( \"role\", \"tabpanel\" );\r\n\t},\r\n\r\n\t// allow overriding how to find the list for rare usage scenarios (#7715)\r\n\t_getList: function() {\r\n\t\treturn this.element.find( \"ol,ul\" ).eq( 0 );\r\n\t},\r\n\r\n\t_createPanel: function( id ) {\r\n\t\treturn $( \"<div>\" )\r\n\t\t\t.attr( \"id\", id )\r\n\t\t\t.addClass( \"ui-tabs-panel ui-widget-content ui-corner-bottom\" )\r\n\t\t\t.data( \"ui-tabs-destroy\", true );\r\n\t},\r\n\r\n\t_setupDisabled: function( disabled ) {\r\n\t\tif ( $.isArray( disabled ) ) {\r\n\t\t\tif ( !disabled.length ) {\r\n\t\t\t\tdisabled = false;\r\n\t\t\t} else if ( disabled.length === this.anchors.length ) {\r\n\t\t\t\tdisabled = true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// disable tabs\r\n\t\tfor ( var i = 0, li; ( li = this.tabs[ i ] ); i++ ) {\r\n\t\t\tif ( disabled === true || $.inArray( i, disabled ) !== -1 ) {\r\n\t\t\t\t$( li )\r\n\t\t\t\t\t.addClass( \"ui-state-disabled\" )\r\n\t\t\t\t\t.attr( \"aria-disabled\", \"true\" );\r\n\t\t\t} else {\r\n\t\t\t\t$( li )\r\n\t\t\t\t\t.removeClass( \"ui-state-disabled\" )\r\n\t\t\t\t\t.removeAttr( \"aria-disabled\" );\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.options.disabled = disabled;\r\n\t},\r\n\r\n\t_setupEvents: function( event ) {\r\n\t\tvar events = {\r\n\t\t\tclick: function( event ) {\r\n\t\t\t\tevent.preventDefault();\r\n\t\t\t}\r\n\t\t};\r\n\t\tif ( event ) {\r\n\t\t\t$.each( event.split(\" \"), function( index, eventName ) {\r\n\t\t\t\tevents[ eventName ] = \"_eventHandler\";\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tthis._off( this.anchors.add( this.tabs ).add( this.panels ) );\r\n\t\tthis._on( this.anchors, events );\r\n\t\tthis._on( this.tabs, { keydown: \"_tabKeydown\" } );\r\n\t\tthis._on( this.panels, { keydown: \"_panelKeydown\" } );\r\n\r\n\t\tthis._focusable( this.tabs );\r\n\t\tthis._hoverable( this.tabs );\r\n\t},\r\n\r\n\t_setupHeightStyle: function( heightStyle ) {\r\n\t\tvar maxHeight,\r\n\t\t\tparent = this.element.parent();\r\n\r\n\t\tif ( heightStyle === \"fill\" ) {\r\n\t\t\tmaxHeight = parent.height();\r\n\t\t\tmaxHeight -= this.element.outerHeight() - this.element.height();\r\n\r\n\t\t\tthis.element.siblings( \":visible\" ).each(function() {\r\n\t\t\t\tvar elem = $( this ),\r\n\t\t\t\t\tposition = elem.css( \"position\" );\r\n\r\n\t\t\t\tif ( position === \"absolute\" || position === \"fixed\" ) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tmaxHeight -= elem.outerHeight( true );\r\n\t\t\t});\r\n\r\n\t\t\tthis.element.children().not( this.panels ).each(function() {\r\n\t\t\t\tmaxHeight -= $( this ).outerHeight( true );\r\n\t\t\t});\r\n\r\n\t\t\tthis.panels.each(function() {\r\n\t\t\t\t$( this ).height( Math.max( 0, maxHeight -\r\n\t\t\t\t\t$( this ).innerHeight() + $( this ).height() ) );\r\n\t\t\t})\r\n\t\t\t.css( \"overflow\", \"auto\" );\r\n\t\t} else if ( heightStyle === \"auto\" ) {\r\n\t\t\tmaxHeight = 0;\r\n\t\t\tthis.panels.each(function() {\r\n\t\t\t\tmaxHeight = Math.max( maxHeight, $( this ).height( \"\" ).height() );\r\n\t\t\t}).height( maxHeight );\r\n\t\t}\r\n\t},\r\n\r\n\t_eventHandler: function( event ) {\r\n\t\tvar options = this.options,\r\n\t\t\tactive = this.active,\r\n\t\t\tanchor = $( event.currentTarget ),\r\n\t\t\ttab = anchor.closest( \"li\" ),\r\n\t\t\tclickedIsActive = tab[ 0 ] === active[ 0 ],\r\n\t\t\tcollapsing = clickedIsActive && options.collapsible,\r\n\t\t\ttoShow = collapsing ? $() : this._getPanelForTab( tab ),\r\n\t\t\ttoHide = !active.length ? $() : this._getPanelForTab( active ),\r\n\t\t\teventData = {\r\n\t\t\t\toldTab: active,\r\n\t\t\t\toldPanel: toHide,\r\n\t\t\t\tnewTab: collapsing ? $() : tab,\r\n\t\t\t\tnewPanel: toShow\r\n\t\t\t};\r\n\r\n\t\tevent.preventDefault();\r\n\r\n\t\tif ( tab.hasClass( \"ui-state-disabled\" ) ||\r\n\t\t\t\t// tab is already loading\r\n\t\t\t\ttab.hasClass( \"ui-tabs-loading\" ) ||\r\n\t\t\t\t// can't switch durning an animation\r\n\t\t\t\tthis.running ||\r\n\t\t\t\t// click on active header, but not collapsible\r\n\t\t\t\t( clickedIsActive && !options.collapsible ) ||\r\n\t\t\t\t// allow canceling activation\r\n\t\t\t\t( this._trigger( \"beforeActivate\", event, eventData ) === false ) ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\toptions.active = collapsing ? false : this.tabs.index( tab );\r\n\r\n\t\tthis.active = clickedIsActive ? $() : tab;\r\n\t\tif ( this.xhr ) {\r\n\t\t\tthis.xhr.abort();\r\n\t\t}\r\n\r\n\t\tif ( !toHide.length && !toShow.length ) {\r\n\t\t\t$.error( \"jQuery UI Tabs: Mismatching fragment identifier.\" );\r\n\t\t}\r\n\r\n\t\tif ( toShow.length ) {\r\n\t\t\tthis.load( this.tabs.index( tab ), event );\r\n\t\t}\r\n\t\tthis._toggle( event, eventData );\r\n\t},\r\n\r\n\t// handles show/hide for selecting tabs\r\n\t_toggle: function( event, eventData ) {\r\n\t\tvar that = this,\r\n\t\t\ttoShow = eventData.newPanel,\r\n\t\t\ttoHide = eventData.oldPanel;\r\n\r\n\t\tthis.running = true;\r\n\r\n\t\tfunction complete() {\r\n\t\t\tthat.running = false;\r\n\t\t\tthat._trigger( \"activate\", event, eventData );\r\n\t\t}\r\n\r\n\t\tfunction show() {\r\n\t\t\teventData.newTab.closest( \"li\" ).addClass( \"ui-tabs-active ui-state-active\" );\r\n\r\n\t\t\tif ( toShow.length && that.options.show ) {\r\n\t\t\t\tthat._show( toShow, that.options.show, complete );\r\n\t\t\t} else {\r\n\t\t\t\ttoShow.show();\r\n\t\t\t\tcomplete();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// start out by hiding, then showing, then completing\r\n\t\tif ( toHide.length && this.options.hide ) {\r\n\t\t\tthis._hide( toHide, this.options.hide, function() {\r\n\t\t\t\teventData.oldTab.closest( \"li\" ).removeClass( \"ui-tabs-active ui-state-active\" );\r\n\t\t\t\tshow();\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\teventData.oldTab.closest( \"li\" ).removeClass( \"ui-tabs-active ui-state-active\" );\r\n\t\t\ttoHide.hide();\r\n\t\t\tshow();\r\n\t\t}\r\n\r\n\t\ttoHide.attr({\r\n\t\t\t\"aria-expanded\": \"false\",\r\n\t\t\t\"aria-hidden\": \"true\"\r\n\t\t});\r\n\t\teventData.oldTab.attr( \"aria-selected\", \"false\" );\r\n\t\t// If we're switching tabs, remove the old tab from the tab order.\r\n\t\t// If we're opening from collapsed state, remove the previous tab from the tab order.\r\n\t\t// If we're collapsing, then keep the collapsing tab in the tab order.\r\n\t\tif ( toShow.length && toHide.length ) {\r\n\t\t\teventData.oldTab.attr( \"tabIndex\", -1 );\r\n\t\t} else if ( toShow.length ) {\r\n\t\t\tthis.tabs.filter(function() {\r\n\t\t\t\treturn $( this ).attr( \"tabIndex\" ) === 0;\r\n\t\t\t})\r\n\t\t\t.attr( \"tabIndex\", -1 );\r\n\t\t}\r\n\r\n\t\ttoShow.attr({\r\n\t\t\t\"aria-expanded\": \"true\",\r\n\t\t\t\"aria-hidden\": \"false\"\r\n\t\t});\r\n\t\teventData.newTab.attr({\r\n\t\t\t\"aria-selected\": \"true\",\r\n\t\t\ttabIndex: 0\r\n\t\t});\r\n\t},\r\n\r\n\t_activate: function( index ) {\r\n\t\tvar anchor,\r\n\t\t\tactive = this._findActive( index );\r\n\r\n\t\t// trying to activate the already active panel\r\n\t\tif ( active[ 0 ] === this.active[ 0 ] ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// trying to collapse, simulate a click on the current active header\r\n\t\tif ( !active.length ) {\r\n\t\t\tactive = this.active;\r\n\t\t}\r\n\r\n\t\tanchor = active.find( \".ui-tabs-anchor\" )[ 0 ];\r\n\t\tthis._eventHandler({\r\n\t\t\ttarget: anchor,\r\n\t\t\tcurrentTarget: anchor,\r\n\t\t\tpreventDefault: $.noop\r\n\t\t});\r\n\t},\r\n\r\n\t_findActive: function( index ) {\r\n\t\treturn index === false ? $() : this.tabs.eq( index );\r\n\t},\r\n\r\n\t_getIndex: function( index ) {\r\n\t\t// meta-function to give users option to provide a href string instead of a numerical index.\r\n\t\tif ( typeof index === \"string\" ) {\r\n\t\t\tindex = this.anchors.index( this.anchors.filter( \"[href$='\" + index + \"']\" ) );\r\n\t\t}\r\n\r\n\t\treturn index;\r\n\t},\r\n\r\n\t_destroy: function() {\r\n\t\tif ( this.xhr ) {\r\n\t\t\tthis.xhr.abort();\r\n\t\t}\r\n\r\n\t\tthis.element.removeClass( \"ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible\" );\r\n\r\n\t\tthis.tablist\r\n\t\t\t.removeClass( \"ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all\" )\r\n\t\t\t.removeAttr( \"role\" );\r\n\r\n\t\tthis.anchors\r\n\t\t\t.removeClass( \"ui-tabs-anchor\" )\r\n\t\t\t.removeAttr( \"role\" )\r\n\t\t\t.removeAttr( \"tabIndex\" )\r\n\t\t\t.removeUniqueId();\r\n\r\n\t\tthis.tabs.add( this.panels ).each(function() {\r\n\t\t\tif ( $.data( this, \"ui-tabs-destroy\" ) ) {\r\n\t\t\t\t$( this ).remove();\r\n\t\t\t} else {\r\n\t\t\t\t$( this )\r\n\t\t\t\t\t.removeClass( \"ui-state-default ui-state-active ui-state-disabled \" +\r\n\t\t\t\t\t\t\"ui-corner-top ui-corner-bottom ui-widget-content ui-tabs-active ui-tabs-panel\" )\r\n\t\t\t\t\t.removeAttr( \"tabIndex\" )\r\n\t\t\t\t\t.removeAttr( \"aria-live\" )\r\n\t\t\t\t\t.removeAttr( \"aria-busy\" )\r\n\t\t\t\t\t.removeAttr( \"aria-selected\" )\r\n\t\t\t\t\t.removeAttr( \"aria-labelledby\" )\r\n\t\t\t\t\t.removeAttr( \"aria-hidden\" )\r\n\t\t\t\t\t.removeAttr( \"aria-expanded\" )\r\n\t\t\t\t\t.removeAttr( \"role\" );\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tthis.tabs.each(function() {\r\n\t\t\tvar li = $( this ),\r\n\t\t\t\tprev = li.data( \"ui-tabs-aria-controls\" );\r\n\t\t\tif ( prev ) {\r\n\t\t\t\tli\r\n\t\t\t\t\t.attr( \"aria-controls\", prev )\r\n\t\t\t\t\t.removeData( \"ui-tabs-aria-controls\" );\r\n\t\t\t} else {\r\n\t\t\t\tli.removeAttr( \"aria-controls\" );\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tthis.panels.show();\r\n\r\n\t\tif ( this.options.heightStyle !== \"content\" ) {\r\n\t\t\tthis.panels.css( \"height\", \"\" );\r\n\t\t}\r\n\t},\r\n\r\n\tenable: function( index ) {\r\n\t\tvar disabled = this.options.disabled;\r\n\t\tif ( disabled === false ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif ( index === undefined ) {\r\n\t\t\tdisabled = false;\r\n\t\t} else {\r\n\t\t\tindex = this._getIndex( index );\r\n\t\t\tif ( $.isArray( disabled ) ) {\r\n\t\t\t\tdisabled = $.map( disabled, function( num ) {\r\n\t\t\t\t\treturn num !== index ? num : null;\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tdisabled = $.map( this.tabs, function( li, num ) {\r\n\t\t\t\t\treturn num !== index ? num : null;\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis._setupDisabled( disabled );\r\n\t},\r\n\r\n\tdisable: function( index ) {\r\n\t\tvar disabled = this.options.disabled;\r\n\t\tif ( disabled === true ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif ( index === undefined ) {\r\n\t\t\tdisabled = true;\r\n\t\t} else {\r\n\t\t\tindex = this._getIndex( index );\r\n\t\t\tif ( $.inArray( index, disabled ) !== -1 ) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif ( $.isArray( disabled ) ) {\r\n\t\t\t\tdisabled = $.merge( [ index ], disabled ).sort();\r\n\t\t\t} else {\r\n\t\t\t\tdisabled = [ index ];\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis._setupDisabled( disabled );\r\n\t},\r\n\r\n\tload: function( index, event ) {\r\n\t\tindex = this._getIndex( index );\r\n\t\tvar that = this,\r\n\t\t\ttab = this.tabs.eq( index ),\r\n\t\t\tanchor = tab.find( \".ui-tabs-anchor\" ),\r\n\t\t\tpanel = this._getPanelForTab( tab ),\r\n\t\t\teventData = {\r\n\t\t\t\ttab: tab,\r\n\t\t\t\tpanel: panel\r\n\t\t\t};\r\n\r\n\t\t// not remote\r\n\t\tif ( isLocal( anchor[ 0 ] ) ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tthis.xhr = $.ajax( this._ajaxSettings( anchor, event, eventData ) );\r\n\r\n\t\t// support: jQuery <1.8\r\n\t\t// jQuery <1.8 returns false if the request is canceled in beforeSend,\r\n\t\t// but as of 1.8, $.ajax() always returns a jqXHR object.\r\n\t\tif ( this.xhr && this.xhr.statusText !== \"canceled\" ) {\r\n\t\t\ttab.addClass( \"ui-tabs-loading\" );\r\n\t\t\tpanel.attr( \"aria-busy\", \"true\" );\r\n\r\n\t\t\tthis.xhr\r\n\t\t\t\t.success(function( response ) {\r\n\t\t\t\t\t// support: jQuery <1.8\r\n\t\t\t\t\t// http://bugs.jquery.com/ticket/11778\r\n\t\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\t\tpanel.html( response );\r\n\t\t\t\t\t\tthat._trigger( \"load\", event, eventData );\r\n\t\t\t\t\t}, 1 );\r\n\t\t\t\t})\r\n\t\t\t\t.complete(function( jqXHR, status ) {\r\n\t\t\t\t\t// support: jQuery <1.8\r\n\t\t\t\t\t// http://bugs.jquery.com/ticket/11778\r\n\t\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\t\tif ( status === \"abort\" ) {\r\n\t\t\t\t\t\t\tthat.panels.stop( false, true );\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\ttab.removeClass( \"ui-tabs-loading\" );\r\n\t\t\t\t\t\tpanel.removeAttr( \"aria-busy\" );\r\n\r\n\t\t\t\t\t\tif ( jqXHR === that.xhr ) {\r\n\t\t\t\t\t\t\tdelete that.xhr;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}, 1 );\r\n\t\t\t\t});\r\n\t\t}\r\n\t},\r\n\r\n\t_ajaxSettings: function( anchor, event, eventData ) {\r\n\t\tvar that = this;\r\n\t\treturn {\r\n\t\t\turl: anchor.attr( \"href\" ),\r\n\t\t\tbeforeSend: function( jqXHR, settings ) {\r\n\t\t\t\treturn that._trigger( \"beforeLoad\", event,\r\n\t\t\t\t\t$.extend( { jqXHR : jqXHR, ajaxSettings: settings }, eventData ) );\r\n\t\t\t}\r\n\t\t};\r\n\t},\r\n\r\n\t_getPanelForTab: function( tab ) {\r\n\t\tvar id = $( tab ).attr( \"aria-controls\" );\r\n\t\treturn this.element.find( this._sanitizeSelector( \"#\" + id ) );\r\n\t}\r\n});\r\n\r\n})( jQuery );\r\n\r\n(function( $ ) {\r\n\r\nvar increments = 0;\r\n\r\nfunction addDescribedBy( elem, id ) {\r\n\tvar describedby = (elem.attr( \"aria-describedby\" ) || \"\").split( /\\s+/ );\r\n\tdescribedby.push( id );\r\n\telem\r\n\t\t.data( \"ui-tooltip-id\", id )\r\n\t\t.attr( \"aria-describedby\", $.trim( describedby.join( \" \" ) ) );\r\n}\r\n\r\nfunction removeDescribedBy( elem ) {\r\n\tvar id = elem.data( \"ui-tooltip-id\" ),\r\n\t\tdescribedby = (elem.attr( \"aria-describedby\" ) || \"\").split( /\\s+/ ),\r\n\t\tindex = $.inArray( id, describedby );\r\n\tif ( index !== -1 ) {\r\n\t\tdescribedby.splice( index, 1 );\r\n\t}\r\n\r\n\telem.removeData( \"ui-tooltip-id\" );\r\n\tdescribedby = $.trim( describedby.join( \" \" ) );\r\n\tif ( describedby ) {\r\n\t\telem.attr( \"aria-describedby\", describedby );\r\n\t} else {\r\n\t\telem.removeAttr( \"aria-describedby\" );\r\n\t}\r\n}\r\n\r\n$.widget( \"ui.tooltip\", {\r\n\tversion: \"1.10.2\",\r\n\toptions: {\r\n\t\tcontent: function() {\r\n\t\t\t// support: IE<9, Opera in jQuery <1.7\r\n\t\t\t// .text() can't accept undefined, so coerce to a string\r\n\t\t\tvar title = $( this ).attr( \"title\" ) || \"\";\r\n\t\t\t// Escape title, since we're going from an attribute to raw HTML\r\n\t\t\treturn $( \"<a>\" ).text( title ).html();\r\n\t\t},\r\n\t\thide: true,\r\n\t\t// Disabled elements have inconsistent behavior across browsers (#8661)\r\n\t\titems: \"[title]:not([disabled])\",\r\n\t\tposition: {\r\n\t\t\tmy: \"left top+15\",\r\n\t\t\tat: \"left bottom\",\r\n\t\t\tcollision: \"flipfit flip\"\r\n\t\t},\r\n\t\tshow: true,\r\n\t\ttooltipClass: null,\r\n\t\ttrack: false,\r\n\r\n\t\t// callbacks\r\n\t\tclose: null,\r\n\t\topen: null\r\n\t},\r\n\r\n\t_create: function() {\r\n\t\tthis._on({\r\n\t\t\tmouseover: \"open\",\r\n\t\t\tfocusin: \"open\"\r\n\t\t});\r\n\r\n\t\t// IDs of generated tooltips, needed for destroy\r\n\t\tthis.tooltips = {};\r\n\t\t// IDs of parent tooltips where we removed the title attribute\r\n\t\tthis.parents = {};\r\n\r\n\t\tif ( this.options.disabled ) {\r\n\t\t\tthis._disable();\r\n\t\t}\r\n\t},\r\n\r\n\t_setOption: function( key, value ) {\r\n\t\tvar that = this;\r\n\r\n\t\tif ( key === \"disabled\" ) {\r\n\t\t\tthis[ value ? \"_disable\" : \"_enable\" ]();\r\n\t\t\tthis.options[ key ] = value;\r\n\t\t\t// disable element style changes\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tthis._super( key, value );\r\n\r\n\t\tif ( key === \"content\" ) {\r\n\t\t\t$.each( this.tooltips, function( id, element ) {\r\n\t\t\t\tthat._updateContent( element );\r\n\t\t\t});\r\n\t\t}\r\n\t},\r\n\r\n\t_disable: function() {\r\n\t\tvar that = this;\r\n\r\n\t\t// close open tooltips\r\n\t\t$.each( this.tooltips, function( id, element ) {\r\n\t\t\tvar event = $.Event( \"blur\" );\r\n\t\t\tevent.target = event.currentTarget = element[0];\r\n\t\t\tthat.close( event, true );\r\n\t\t});\r\n\r\n\t\t// remove title attributes to prevent native tooltips\r\n\t\tthis.element.find( this.options.items ).addBack().each(function() {\r\n\t\t\tvar element = $( this );\r\n\t\t\tif ( element.is( \"[title]\" ) ) {\r\n\t\t\t\telement\r\n\t\t\t\t\t.data( \"ui-tooltip-title\", element.attr( \"title\" ) )\r\n\t\t\t\t\t.attr( \"title\", \"\" );\r\n\t\t\t}\r\n\t\t});\r\n\t},\r\n\r\n\t_enable: function() {\r\n\t\t// restore title attributes\r\n\t\tthis.element.find( this.options.items ).addBack().each(function() {\r\n\t\t\tvar element = $( this );\r\n\t\t\tif ( element.data( \"ui-tooltip-title\" ) ) {\r\n\t\t\t\telement.attr( \"title\", element.data( \"ui-tooltip-title\" ) );\r\n\t\t\t}\r\n\t\t});\r\n\t},\r\n\r\n\topen: function( event ) {\r\n\t\tvar that = this,\r\n\t\t\ttarget = $( event ? event.target : this.element )\r\n\t\t\t\t// we need closest here due to mouseover bubbling,\r\n\t\t\t\t// but always pointing at the same event target\r\n\t\t\t\t.closest( this.options.items );\r\n\r\n\t\t// No element to show a tooltip for or the tooltip is already open\r\n\t\tif ( !target.length || target.data( \"ui-tooltip-id\" ) ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif ( target.attr( \"title\" ) ) {\r\n\t\t\ttarget.data( \"ui-tooltip-title\", target.attr( \"title\" ) );\r\n\t\t}\r\n\r\n\t\ttarget.data( \"ui-tooltip-open\", true );\r\n\r\n\t\t// kill parent tooltips, custom or native, for hover\r\n\t\tif ( event && event.type === \"mouseover\" ) {\r\n\t\t\ttarget.parents().each(function() {\r\n\t\t\t\tvar parent = $( this ),\r\n\t\t\t\t\tblurEvent;\r\n\t\t\t\tif ( parent.data( \"ui-tooltip-open\" ) ) {\r\n\t\t\t\t\tblurEvent = $.Event( \"blur\" );\r\n\t\t\t\t\tblurEvent.target = blurEvent.currentTarget = this;\r\n\t\t\t\t\tthat.close( blurEvent, true );\r\n\t\t\t\t}\r\n\t\t\t\tif ( parent.attr( \"title\" ) ) {\r\n\t\t\t\t\tparent.uniqueId();\r\n\t\t\t\t\tthat.parents[ this.id ] = {\r\n\t\t\t\t\t\telement: this,\r\n\t\t\t\t\t\ttitle: parent.attr( \"title\" )\r\n\t\t\t\t\t};\r\n\t\t\t\t\tparent.attr( \"title\", \"\" );\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tthis._updateContent( target, event );\r\n\t},\r\n\r\n\t_updateContent: function( target, event ) {\r\n\t\tvar content,\r\n\t\t\tcontentOption = this.options.content,\r\n\t\t\tthat = this,\r\n\t\t\teventType = event ? event.type : null;\r\n\r\n\t\tif ( typeof contentOption === \"string\" ) {\r\n\t\t\treturn this._open( event, target, contentOption );\r\n\t\t}\r\n\r\n\t\tcontent = contentOption.call( target[0], function( response ) {\r\n\t\t\t// ignore async response if tooltip was closed already\r\n\t\t\tif ( !target.data( \"ui-tooltip-open\" ) ) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\t// IE may instantly serve a cached response for ajax requests\r\n\t\t\t// delay this call to _open so the other call to _open runs first\r\n\t\t\tthat._delay(function() {\r\n\t\t\t\t// jQuery creates a special event for focusin when it doesn't\r\n\t\t\t\t// exist natively. To improve performance, the native event\r\n\t\t\t\t// object is reused and the type is changed. Therefore, we can't\r\n\t\t\t\t// rely on the type being correct after the event finished\r\n\t\t\t\t// bubbling, so we set it back to the previous value. (#8740)\r\n\t\t\t\tif ( event ) {\r\n\t\t\t\t\tevent.type = eventType;\r\n\t\t\t\t}\r\n\t\t\t\tthis._open( event, target, response );\r\n\t\t\t});\r\n\t\t});\r\n\t\tif ( content ) {\r\n\t\t\tthis._open( event, target, content );\r\n\t\t}\r\n\t},\r\n\r\n\t_open: function( event, target, content ) {\r\n\t\tvar tooltip, events, delayedShow,\r\n\t\t\tpositionOption = $.extend( {}, this.options.position );\r\n\r\n\t\tif ( !content ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// Content can be updated multiple times. If the tooltip already\r\n\t\t// exists, then just update the content and bail.\r\n\t\ttooltip = this._find( target );\r\n\t\tif ( tooltip.length ) {\r\n\t\t\ttooltip.find( \".ui-tooltip-content\" ).html( content );\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// if we have a title, clear it to prevent the native tooltip\r\n\t\t// we have to check first to avoid defining a title if none exists\r\n\t\t// (we don't want to cause an element to start matching [title])\r\n\t\t//\r\n\t\t// We use removeAttr only for key events, to allow IE to export the correct\r\n\t\t// accessible attributes. For mouse events, set to empty string to avoid\r\n\t\t// native tooltip showing up (happens only when removing inside mouseover).\r\n\t\tif ( target.is( \"[title]\" ) ) {\r\n\t\t\tif ( event && event.type === \"mouseover\" ) {\r\n\t\t\t\ttarget.attr( \"title\", \"\" );\r\n\t\t\t} else {\r\n\t\t\t\ttarget.removeAttr( \"title\" );\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\ttooltip = this._tooltip( target );\r\n\t\taddDescribedBy( target, tooltip.attr( \"id\" ) );\r\n\t\ttooltip.find( \".ui-tooltip-content\" ).html( content );\r\n\r\n\t\tfunction position( event ) {\r\n\t\t\tpositionOption.of = event;\r\n\t\t\tif ( tooltip.is( \":hidden\" ) ) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\ttooltip.position( positionOption );\r\n\t\t}\r\n\t\tif ( this.options.track && event && /^mouse/.test( event.type ) ) {\r\n\t\t\tthis._on( this.document, {\r\n\t\t\t\tmousemove: position\r\n\t\t\t});\r\n\t\t\t// trigger once to override element-relative positioning\r\n\t\t\tposition( event );\r\n\t\t} else {\r\n\t\t\ttooltip.position( $.extend({\r\n\t\t\t\tof: target\r\n\t\t\t}, this.options.position ) );\r\n\t\t}\r\n\r\n\t\ttooltip.hide();\r\n\r\n\t\tthis._show( tooltip, this.options.show );\r\n\t\t// Handle tracking tooltips that are shown with a delay (#8644). As soon\r\n\t\t// as the tooltip is visible, position the tooltip using the most recent\r\n\t\t// event.\r\n\t\tif ( this.options.show && this.options.show.delay ) {\r\n\t\t\tdelayedShow = this.delayedShow = setInterval(function() {\r\n\t\t\t\tif ( tooltip.is( \":visible\" ) ) {\r\n\t\t\t\t\tposition( positionOption.of );\r\n\t\t\t\t\tclearInterval( delayedShow );\r\n\t\t\t\t}\r\n\t\t\t}, $.fx.interval );\r\n\t\t}\r\n\r\n\t\tthis._trigger( \"open\", event, { tooltip: tooltip } );\r\n\r\n\t\tevents = {\r\n\t\t\tkeyup: function( event ) {\r\n\t\t\t\tif ( event.keyCode === $.ui.keyCode.ESCAPE ) {\r\n\t\t\t\t\tvar fakeEvent = $.Event(event);\r\n\t\t\t\t\tfakeEvent.currentTarget = target[0];\r\n\t\t\t\t\tthis.close( fakeEvent, true );\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tremove: function() {\r\n\t\t\t\tthis._removeTooltip( tooltip );\r\n\t\t\t}\r\n\t\t};\r\n\t\tif ( !event || event.type === \"mouseover\" ) {\r\n\t\t\tevents.mouseleave = \"close\";\r\n\t\t}\r\n\t\tif ( !event || event.type === \"focusin\" ) {\r\n\t\t\tevents.focusout = \"close\";\r\n\t\t}\r\n\t\tthis._on( true, target, events );\r\n\t},\r\n\r\n\tclose: function( event ) {\r\n\t\tvar that = this,\r\n\t\t\ttarget = $( event ? event.currentTarget : this.element ),\r\n\t\t\ttooltip = this._find( target );\r\n\r\n\t\t// disabling closes the tooltip, so we need to track when we're closing\r\n\t\t// to avoid an infinite loop in case the tooltip becomes disabled on close\r\n\t\tif ( this.closing ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// Clear the interval for delayed tracking tooltips\r\n\t\tclearInterval( this.delayedShow );\r\n\r\n\t\t// only set title if we had one before (see comment in _open())\r\n\t\tif ( target.data( \"ui-tooltip-title\" ) ) {\r\n\t\t\ttarget.attr( \"title\", target.data( \"ui-tooltip-title\" ) );\r\n\t\t}\r\n\r\n\t\tremoveDescribedBy( target );\r\n\r\n\t\ttooltip.stop( true );\r\n\t\tthis._hide( tooltip, this.options.hide, function() {\r\n\t\t\tthat._removeTooltip( $( this ) );\r\n\t\t});\r\n\r\n\t\ttarget.removeData( \"ui-tooltip-open\" );\r\n\t\tthis._off( target, \"mouseleave focusout keyup\" );\r\n\t\t// Remove 'remove' binding only on delegated targets\r\n\t\tif ( target[0] !== this.element[0] ) {\r\n\t\t\tthis._off( target, \"remove\" );\r\n\t\t}\r\n\t\tthis._off( this.document, \"mousemove\" );\r\n\r\n\t\tif ( event && event.type === \"mouseleave\" ) {\r\n\t\t\t$.each( this.parents, function( id, parent ) {\r\n\t\t\t\t$( parent.element ).attr( \"title\", parent.title );\r\n\t\t\t\tdelete that.parents[ id ];\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tthis.closing = true;\r\n\t\tthis._trigger( \"close\", event, { tooltip: tooltip } );\r\n\t\tthis.closing = false;\r\n\t},\r\n\r\n\t_tooltip: function( element ) {\r\n\t\tvar id = \"ui-tooltip-\" + increments++,\r\n\t\t\ttooltip = $( \"<div>\" )\r\n\t\t\t\t.attr({\r\n\t\t\t\t\tid: id,\r\n\t\t\t\t\trole: \"tooltip\"\r\n\t\t\t\t})\r\n\t\t\t\t.addClass( \"ui-tooltip ui-widget ui-corner-all ui-widget-content \" +\r\n\t\t\t\t\t( this.options.tooltipClass || \"\" ) );\r\n\t\t$( \"<div>\" )\r\n\t\t\t.addClass( \"ui-tooltip-content\" )\r\n\t\t\t.appendTo( tooltip );\r\n\t\ttooltip.appendTo( this.document[0].body );\r\n\t\tthis.tooltips[ id ] = element;\r\n\t\treturn tooltip;\r\n\t},\r\n\r\n\t_find: function( target ) {\r\n\t\tvar id = target.data( \"ui-tooltip-id\" );\r\n\t\treturn id ? $( \"#\" + id ) : $();\r\n\t},\r\n\r\n\t_removeTooltip: function( tooltip ) {\r\n\t\ttooltip.remove();\r\n\t\tdelete this.tooltips[ tooltip.attr( \"id\" ) ];\r\n\t},\r\n\r\n\t_destroy: function() {\r\n\t\tvar that = this;\r\n\r\n\t\t// close open tooltips\r\n\t\t$.each( this.tooltips, function( id, element ) {\r\n\t\t\t// Delegate to close method to handle common cleanup\r\n\t\t\tvar event = $.Event( \"blur\" );\r\n\t\t\tevent.target = event.currentTarget = element[0];\r\n\t\t\tthat.close( event, true );\r\n\r\n\t\t\t// Remove immediately; destroying an open tooltip doesn't use the\r\n\t\t\t// hide animation\r\n\t\t\t$( \"#\" + id ).remove();\r\n\r\n\t\t\t// Restore the title\r\n\t\t\tif ( element.data( \"ui-tooltip-title\" ) ) {\r\n\t\t\t\telement.attr( \"title\", element.data( \"ui-tooltip-title\" ) );\r\n\t\t\t\telement.removeData( \"ui-tooltip-title\" );\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n});\r\n\r\n}( jQuery ) );\r\n","/*\r\n* jQuery UI Mask @VERSION\r\n*\r\n* Copyright (c) 2009 AUTHORS.txt (http://jqueryui.com/about)\r\n* Dual licensed under the MIT (MIT-LICENSE.txt)\r\n* and GPL (GPL-LICENSE.txt) licenses.\r\n*\r\n* Based on the jquery.maskedinput.js plugin by Josh Bush (digitalbush.com)\r\n*\r\n* http://docs.jquery.com/UI/Mask\r\n*\r\n* Depends:\r\n*   ui.core.js\r\n*/\r\n(function ($) {    \r\n\r\n    var pasteEventName = (bizagi.util.isEventSupported('paste') ? 'paste' : 'input') + \".mask\";\r\n\r\n    $.widget(\"ui.mask\", {\r\n\r\n        _init: function () {\r\n\r\n            var options = this.options, self = this;\r\n\r\n            $.extend(this, { caret: function (begin, end) { return $.ui.mask.caret(self.element, begin, end); } });\r\n\r\n            if (!options.mask || !options.mask.length) { return; } //no mask pattern defined. no point in continuing.\r\n            if (!options.placeholder || !options.placeholder.length) {\r\n                options.placeholder = '_'; //in case the user decided to nix a placeholder. \r\n            }\r\n\r\n            this._prepareBuffer();\r\n            this._bindEvents();\r\n            this._checkVal((this.element.val().length && options.allowPartials)); //Perform initial check for existing values\r\n        },\r\n\r\n        destroy: function () {\r\n            this.element\r\n\t\t\t.unbind('.mask')\r\n\t\t\t.removeData('mask');\r\n        },\r\n\r\n        value: function () {\r\n            var input = this.element,\r\n\t\t\tself = this,\r\n\t\t\tres = $.map(self.buffer, function (c, i) { return self.tests[i] ? c : null; }).join(''),\r\n\t\t\tr = new RegExp('\\\\' + this.options.placeholder, 'gi');\r\n            return res.replace(r, '');\r\n        },\r\n\r\n        formatted: function () {\r\n            var r = new RegExp('\\\\' + this.options.placeholder, 'gi'),\r\n\t\t\tres = this.element.val();\r\n            return res.replace(r, '');\r\n        },\r\n\r\n        apply: function () {\r\n            this.element.trigger('apply.mask');\r\n        },\r\n\r\n        _setData: function (key, value) {\r\n\r\n            $.widget.prototype._setData.apply(this, arguments);\r\n            var options = this.options;\r\n\r\n            switch (key) {\r\n                case 'mask':\r\n                    //no mask pattern defined. no point in continuing.\r\n                    if (!options.mask || !options.mask.length) {\r\n                        this.element.unbind('.mask')\r\n                        break;\r\n                    }\r\n                case 'placeholder':\r\n                    if (!options.placeholder || !options.placeholder.length) {\r\n                        options.placeholder = '_'; //in case the user decided to nix a placeholder.\r\n                    }\r\n                    this.element.val('');\r\n                    this._prepareBuffer();\r\n                    !this.eventsBound && this._bindEvents();\r\n                    break;\r\n            }\r\n\r\n        },\r\n\r\n        _prepareBuffer: function () {\r\n\r\n            this._escapeMask();\r\n\r\n            var self = this,\r\n\t\t\tinput = this.element,\r\n\t\t\toptions = this.options,\r\n\t\t\tmask = options.mask,\r\n\t\t\tdefs = $.ui.mask.definitions,\r\n\t\t\ttests = [],\r\n\t\t\tpartialPosition = mask.length,\r\n\t\t\tfirstNonMaskPos = null,\r\n\t\t\tlen = mask.length;\r\n\r\n            //if we're applying the mask to an element which is not an input, it won't have a val() method. fake one for our purposes.\r\n            if (!input.is(':input')) input.val = input.html;\r\n\r\n            $.each(mask.split(\"\"), function (i, c) {\r\n                if (c == '?') {\r\n                    len--;\r\n                    partialPosition = i;\r\n                }\r\n                else if (defs[c]) {\r\n                    tests.push(new RegExp(defs[c]));\r\n                    if (firstNonMaskPos == null)\r\n                        firstNonMaskPos = tests.length - 1;\r\n                }\r\n                else {\r\n                    tests.push(null);\r\n                }\r\n            });\r\n\r\n            $.extend(this, {\r\n                buffer: $.map(mask.split(\"\"), function (c, i) {\r\n                    if (c != '?') {\r\n                        return defs[c] ? options.placeholder : c;\r\n                    }\r\n                }),\r\n                tests: tests,\r\n                firstNonMaskPos: firstNonMaskPos,\r\n                partialPosition: partialPosition\r\n            });\r\n\r\n            this.buffer = $.map(this.buffer, function (c, i) {\r\n                if (c == \"\\t\") {\r\n                    return self.maskEscaped[i];\r\n                }\r\n                return c;\r\n            });\r\n\r\n            this.options.mask = mask = this.maskEscaped;\r\n        },\r\n\r\n        _bindEvents: function () {\r\n\r\n            var self = this,\r\n\t\t\tinput = this.element,\r\n\t\t\tignore = false,  \t\t\t//Variable for ignoring control keys\r\n\t\t\tfocusText = input.val();\r\n\r\n            function keydownEvent(e) {\r\n                e = e || window.event;\r\n                var pos = self.caret(),\r\n\t\t\t\tk = e.keyCode,\r\n\t\t\t\tkeyCode = $.ui.keyCode;\r\n\r\n                ignore = (k < keyCode.SHIFT || (k > keyCode.SHIFT && k < keyCode.SPACE) || (k > keyCode.SPACE && k < 41));\r\n\r\n                //delete selection before proceeding\r\n                if ((pos.begin - pos.end) != 0 && (!ignore || k == keyCode.BACKSPACE || k == keyCode.DELETE))\r\n                    self._clearBuffer(pos.begin, pos.end);\r\n\r\n                //backspace, delete, and escape get special treatment\r\n                if (k == keyCode.BACKSPACE || k == keyCode.DELETE) {//backspace/delete\r\n                    self._shiftL(pos.begin + ((k == keyCode.DELETE || (k == keyCode.BACKSPACE && pos.begin != pos.end)) ? 0 : -1), Math.abs(pos.begin - pos.end));\r\n                    return false;\r\n                }\r\n                else if (k == keyCode.ESCAPE) {//escape\r\n                    input.val(focusText);\r\n                    self.caret(0, self._checkVal());\r\n                    return false;\r\n                }\r\n            };\r\n\r\n            function keypressEvent(e) {\r\n\r\n                e = e || window.event;\r\n\r\n                var k = e.charCode || e.keyCode || e.which,\r\n\t\t\t\tkeyCode = $.ui.keyCode,\r\n\t\t\t\tlen = self.options.mask.length;\r\n\r\n                if (ignore) {\r\n                    ignore = false;\r\n                    //Fixes Mac FF bug on backspace\r\n                    return (e.keyCode == keyCode.BACKSPACE) ? false : null;\r\n                }\r\n\r\n                var pos = self.caret();\r\n\r\n                if (e.ctrlKey || e.altKey || e.metaKey) {//Ignore\r\n                    return true;\r\n                }\r\n                else if ((k >= keyCode.SPACE && k <= 125) || k > 186) {//typeable characters\r\n                    var p = self._seekNext(pos.begin - 1);\r\n                    if (p < len) {\r\n                        var c = String.fromCharCode(k);\r\n                        if (self.tests[p] && self.tests[p].test(c)) {\r\n                            self._shiftR(p);\r\n                            self.buffer[p] = c;\r\n                            self._writeBuffer();\r\n                            var next = self._seekNext(p);\r\n                            self.caret(next);\r\n                            self.options.completed && next == len && self.options.completed.call(input);\r\n                        }\r\n                    }\r\n                }\r\n                return false;\r\n            };\r\n\r\n            if (!input.attr(\"readonly\")) {\r\n                input\r\n\t\t\t\t.bind(\"focus.mask\", function () {\r\n\t\t\t\t    focusText = input.val();\r\n\t\t\t\t    var pos = self._checkVal();\r\n\t\t\t\t    self._writeBuffer();\r\n\t\t\t\t    setTimeout(function () {\r\n\t\t\t\t        if (pos == self.options.mask.length)\r\n\t\t\t\t            self.caret(0, pos);\r\n\t\t\t\t        else\r\n\t\t\t\t            self.caret(pos);\r\n\t\t\t\t    }, 0);\r\n\t\t\t\t})\r\n\t\t\t\t.bind(\"blur.mask\", function () {\r\n\t\t\t\t    self._checkVal();\r\n\t\t\t\t    if (input.val() != focusText)\r\n\t\t\t\t        input.change();\r\n\t\t\t\t})\r\n\t\t\t\t.bind(\"apply.mask\", function () { //changing the value of an input without keyboard input requires re-applying the mask.\r\n\t\t\t\t    focusText = input.val();\r\n\t\t\t\t    var pos = self._checkVal();\r\n\t\t\t\t    self._writeBuffer();\r\n\t\t\t\t})\r\n\t\t\t\t.bind(\"keydown.mask\", keydownEvent)\r\n\t\t\t\t.bind(\"keypress.mask\", keypressEvent)\r\n\t\t\t\t.bind(pasteEventName, function () {\r\n\t\t\t\t    setTimeout(function () { self.caret(self._checkVal(true)); }, 0);\r\n\t\t\t\t});\r\n                this.eventsBound = true;\r\n            }\r\n        },\r\n\r\n        _writeBuffer: function () {\r\n            return this.element.val(this.buffer.join('')).val();\r\n        },\r\n\r\n        _clearBuffer: function (start, end) {\r\n            var len = this.options.mask.length;\r\n            for (var i = start; i < end && i < len; i++) {\r\n                if (this.tests[i])\r\n                    this.buffer[i] = this.options.placeholder;\r\n            }\r\n        },\r\n\r\n        _seekNext: function (pos) {\r\n            var len = this.options.mask.length;\r\n            while (++pos <= len && !this.tests[pos]);\r\n            return pos;\r\n        },\r\n\r\n        _shiftR: function (pos) {\r\n            var len = this.options.mask.length;\r\n            for (var i = pos, c = this.options.placeholder; i < len; i++) {\r\n                if (this.tests[i]) {\r\n                    var j = this._seekNext(i);\r\n                    var t = this.buffer[i];\r\n                    this.buffer[i] = c;\r\n                    if (j < len && this.tests[j].test(t)) {\r\n                        c = t;\r\n                    }\r\n                    else {\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n        },\r\n\r\n        _shiftL: function (pos, length) {\r\n\r\n            while (!this.tests[pos] && --pos >= 0);\r\n\r\n            var originalPos = pos,\r\n\t\t\tlen = this.options.mask.length,\r\n\t\t\tplaceholder = this.options.placeholder;\r\n\r\n            for (var i = pos; i < len && (i >= 0 || length > 1); i++) {\r\n                if (this.tests[i]) {\r\n                    this.buffer[i] = placeholder;\r\n                    var j = this._seekNext(i);\r\n                    if (j < len && this.tests[i].test(this.buffer[j])) {\r\n                        this.buffer[pos] = this.buffer[j];\r\n                        this.buffer[j] = placeholder;\r\n                        pos++;\r\n                        while (!this.tests[pos]) pos++;\r\n                    }\r\n                }\r\n            }\r\n            this._writeBuffer();\r\n            this.caret(Math.max(this.firstNonMaskPos, originalPos));\r\n        },\r\n\r\n        _checkVal: function (allow) {\r\n            //try to place characters where they belong\r\n            var input = this.element,\r\n\t\t\ttest = input.val(),\r\n\t\t\tlen = this.options.mask.length,\r\n\t\t\tlastMatch = -1;\r\n\r\n            for (var i = 0, pos = 0; i < len; i++) {\r\n                if (this.tests[i]) {\r\n                    this.buffer[i] = this.options.placeholder;\r\n                    while (pos++ < test.length) {\r\n                        var c = test.charAt(pos - 1);\r\n                        if (this.tests[i].test(c)) {\r\n                            this.buffer[i] = c;\r\n                            lastMatch = i;\r\n                            break;\r\n                        }\r\n                    }\r\n                    if (pos > test.length)\r\n                        break;\r\n                }\r\n                else if (this.buffer[i] == test[pos] && i != this.partialPosition) {\r\n                    pos++;\r\n                    lastMatch = i;\r\n                }\r\n            }\r\n            if (!allow && lastMatch + 1 < this.partialPosition) {\r\n                if (!this.options.allowPartials || !this.value().length) {\r\n                    input.val(\"\");\r\n                    this._clearBuffer(0, len);\r\n                }\r\n                else //if we're allowing partial input/inital values, and the element we're masking isnt an input, then we need to allow the mask to apply.\r\n                    if (!input.is(':input')) this._writeBuffer();\r\n\r\n            }\r\n            else if (allow || lastMatch + 1 >= this.partialPosition) {\r\n                this._writeBuffer();\r\n                if (!allow) input.val(input.val().substring(0, lastMatch + 1));\r\n            }\r\n            return (this.partialPosition ? i : this.firstNonMaskPos);\r\n        },\r\n\r\n        _escapeMask: function () {\r\n            var mask = this.options.mask,\r\n\t\t\tliterals = [],\r\n\t\t\treplacements = [];\r\n\r\n            for (var i = 0; i < mask.length; i++) {\r\n                var c, temp = mask[i] || mask.charAt(i);\r\n                if (temp != \"\\\\\" || mask[i - 1] == \"\\\\\") {\r\n                    if (mask[i - 1] == \"\\\\\") {\r\n                        c = \"\\t\";\r\n                        replacements[literals.length] = temp;\r\n                    }\r\n                    else {\r\n                        c = temp;\r\n                    }\r\n                    literals[literals.length] = c;\r\n                }\r\n            }\r\n\r\n            this.options.mask = literals.join('');\r\n\r\n            for (var i = 0; i < literals.length; i++) {\r\n                if (replacements[i] !== undefined) {\r\n                    literals[i] = replacements[i];\r\n                }\r\n            }\r\n\r\n            this.maskEscaped = literals.join('');\r\n        }\r\n\r\n    });\r\n\r\n    $.extend($.ui.mask, {\r\n        version: \"@VERSION\",\r\n        getter: \"value formatted\",\r\n        defaults: {\r\n            mask: '',\r\n            placeholder: '_',\r\n            completed: null,\r\n            allowPartials: false\r\n        },\r\n        definitions: { //Predefined character definitions\r\n            '#': \"[\\\\d]\",\r\n            'a': \"[A-Za-z]\",\r\n            '*': \"[A-Za-z0-9]\"\r\n        },\r\n        caret: function (element, begin, end) {\t//Helper Function for Caret positioning\r\n            var input = element[0];\r\n            if (typeof begin == 'number') {\r\n                end = (typeof end == 'number') ? end : begin;\r\n                if (input.setSelectionRange) {\r\n                    input.focus();\r\n                    input.setSelectionRange(begin, end);\r\n                } else if (input.createTextRange) {\r\n                    var range = input.createTextRange();\r\n                    range.collapse(true);\r\n                    range.moveEnd('character', end);\r\n                    range.moveStart('character', begin);\r\n                    range.select();\r\n                }\r\n                return element;\r\n            } else {\r\n                if (input.setSelectionRange) {\r\n                    begin = input.selectionStart;\r\n                    end = input.selectionEnd;\r\n                }\r\n                else if (document.selection && document.selection.createRange) {\r\n                    var range = document.selection.createRange();\r\n                    begin = 0 - range.duplicate().moveStart('character', -100000);\r\n                    end = begin + range.text.length;\r\n                }\r\n                return { begin: begin, end: end };\r\n            }\r\n        }\r\n    });\r\n\r\n})(jQuery);","/*\r\n*\r\n* Copyright (c) 2006/2007 Sam Collett (http://www.texotela.co.uk)\r\n* Licensed under the MIT License:\r\n* http://www.opensource.org/licenses/mit-license.php\r\n* \r\n* Version 1.0\r\n* Demo: http://www.texotela.co.uk/code/jquery/numeric/\r\n*\r\n* $LastChangedDate: 2007-05-29 11:31:36 +0100 (Tue, 29 May 2007) $\r\n* $Rev: 2005 $\r\n*/\r\n\r\n/*\r\n* Allows only valid characters to be entered into input boxes.\r\n* Note: does not validate that the final text is a valid number\r\n* (that could be done by another script, or server-side)\r\n*\r\n* @name     numeric\r\n* @param    decimal      Decimal separator (e.g. '.' or ',' - default is '.')\r\n* @param    callback     A function that runs if the number is not valid (fires onblur)\r\n* @author   Sam Collett (http://www.texotela.co.uk)\r\n* @example  $(\".numeric\").numeric();\r\n* @example  $(\".numeric\").numeric(\",\");\r\n* @example  $(\".numeric\").numeric(null, callback);\r\n*\r\n*/\r\njQuery.fn.numeric = function (decimal, callback) {\r\n    decimal = decimal || \".\";\r\n    callback = typeof callback == \"function\" ? callback : function () { };\r\n    this.keypress(\r\n\t\tfunction (e) {\r\n\t\t    var key = e.charCode ? e.charCode : e.keyCode ? e.keyCode : 0;\r\n\t\t    // allow enter/return key (only when in an input box)\r\n\t\t    if (key == 13 && this.nodeName.toLowerCase() == \"input\") {\r\n\t\t        return true;\r\n\t\t    }\r\n\t\t    else if (key == 13) {\r\n\t\t        return false;\r\n\t\t    }\r\n\t\t    var allow = false;\r\n\t\t    // allow Ctrl+A\r\n\t\t    if ((e.ctrlKey && key == 97 /* firefox */) || (e.ctrlKey && key == 65) /* opera */) return true;\r\n\t\t    // allow Ctrl+X (cut)\r\n\t\t    if ((e.ctrlKey && key == 120 /* firefox */) || (e.ctrlKey && key == 88) /* opera */) return true;\r\n\t\t    // allow Ctrl+C (copy)\r\n\t\t    if ((e.ctrlKey && key == 99 /* firefox */) || (e.ctrlKey && key == 67) /* opera */) return true;\r\n\t\t    // allow Ctrl+Z (undo)\r\n\t\t    if ((e.ctrlKey && key == 122 /* firefox */) || (e.ctrlKey && key == 90) /* opera */) return true;\r\n\t\t    // allow or deny Ctrl+V (paste), Shift+Ins\r\n\t\t    if ((e.ctrlKey && key == 118 /* firefox */) || (e.ctrlKey && key == 86) /* opera */\r\n\t\t\t|| (e.shiftKey && key == 45)) return true;\r\n\t\t    // if a number was not pressed\r\n\t\t    if (key < 48 || key > 57) {\r\n\t\t        /* '-' only allowed at start */\r\n\t\t        if (key == 45 && this.value.length == 0) return true;\r\n\t\t        /* only one decimal separator allowed */\r\n\t\t        if (key == decimal.charCodeAt(0) && this.value.indexOf(decimal) != -1) {\r\n\t\t            allow = false;\r\n\t\t        }\r\n\t\t        // check for other keys that have special purposes\r\n\t\t        if (\r\n\t\t\t\t\tkey != 8 /* backspace */ &&\r\n\t\t\t\t\tkey != 9 /* tab */ &&\r\n\t\t\t\t\tkey != 13 /* enter */ &&\r\n\t\t\t\t\tkey != 35 /* end */ &&\r\n\t\t\t\t\tkey != 36 /* home */ &&\r\n\t\t\t\t\tkey != 37 /* left */ &&\r\n\t\t\t\t\tkey != 39 /* right */ &&\r\n\t\t\t\t\tkey != 46 /* del */\r\n\t\t\t\t) {\r\n\t\t            allow = false;\r\n\t\t        }\r\n\t\t        else {\r\n\t\t            // for detecting special keys (listed above)\r\n\t\t            // IE does not support 'charCode' and ignores them in keypress anyway\r\n\t\t            if (typeof e.charCode != \"undefined\") {\r\n\t\t                // special keys have 'keyCode' and 'which' the same (e.g. backspace)\r\n\t\t                if (e.keyCode == e.which && e.which != 0) {\r\n\t\t                    allow = true;\r\n\t\t                }\r\n\t\t                // or keyCode != 0 and 'charCode'/'which' = 0\r\n\t\t                else if (e.keyCode != 0 && e.charCode == 0 && e.which == 0) {\r\n\t\t                    allow = true;\r\n\t\t                }\r\n\t\t            }\r\n\t\t        }\r\n\t\t        // if key pressed is the decimal and it is not already in the field\r\n\t\t        if (key == decimal.charCodeAt(0) && this.value.indexOf(decimal) == -1) {\r\n\t\t            allow = true;\r\n\t\t        }\r\n\t\t    }\r\n\t\t    else {\r\n\t\t        allow = true;\r\n\t\t    }\r\n\t\t    return allow;\r\n\t\t}\r\n\t)\r\n\t.blur(\r\n\t\tfunction () {\r\n\t\t    var val = jQuery(this).val();\r\n\t\t    if (val != \"\") {\r\n\t\t        var re = new RegExp(\"^\\\\d+$|\\\\d*\" + decimal + \"\\\\d+\");\r\n\t\t        if (!re.exec(val)) {\r\n\t\t            callback.apply(this);\r\n\t\t        }\r\n\t\t    }\r\n\t\t}\r\n\t);\r\n    return this;\r\n}\r\n\r\njQuery.fn.numericSN = function (decimal, exp) {\r\n    decimal = decimal || \".\";\r\n    exp = exp || \"e\";\r\n    var plus = '+';\r\n    var minus = '-';\r\n    callback = typeof callback == \"function\" ? callback : function () { };\r\n    this.keypress(\r\n        function (e) {\r\n            var key = e.charCode ? e.charCode : e.keyCode ? e.keyCode : 0;\r\n            // allow enter/return key (only when in an input box)\r\n            if (key == 13 && this.nodeName.toLowerCase() == \"input\") {\r\n                return true;\r\n            }\r\n            else if (key == 13) {\r\n                return false;\r\n            }\r\n            var allow = false;\r\n            // allow Ctrl+A\r\n            if ((e.ctrlKey && key == 97 /* firefox */) || (e.ctrlKey && key == 65) /* opera */) return true;\r\n            // allow Ctrl+X (cut)\r\n            if ((e.ctrlKey && key == 120 /* firefox */) || (e.ctrlKey && key == 88) /* opera */) return true;\r\n            // allow Ctrl+C (copy)\r\n            if ((e.ctrlKey && key == 99 /* firefox */) || (e.ctrlKey && key == 67) /* opera */) return true;\r\n            // allow Ctrl+Z (undo)\r\n            if ((e.ctrlKey && key == 122 /* firefox */) || (e.ctrlKey && key == 90) /* opera */) return true;\r\n            // allow or deny Ctrl+V (paste), Shift+Ins\r\n            if ((e.ctrlKey && key == 118 /* firefox */) || (e.ctrlKey && key == 86) /* opera */\r\n                || (e.shiftKey && key == 45)) return true;\r\n            // if a number was not pressed\r\n            if (key < 48 || key > 57) {\r\n\r\n                /* only one decimal separator allowed */\r\n                if (key == decimal.charCodeAt(0) && this.value.indexOf(decimal) != -1) {\r\n                    allow = false;\r\n                }\r\n                /* only one e character allowed */\r\n                if (key == exp.charCodeAt(0) && this.value.indexOf(exp) != -1) {\r\n                    allow = false;\r\n                }\r\n\r\n\r\n                // check for other keys that have special purposes\r\n                if (\r\n                    key != 8 /* backspace */ &&\r\n                    key != 9 /* tab */ &&\r\n                    key != 13 /* enter */ &&\r\n                    key != 35 /* end */ &&\r\n                    key != 36 /* home */ &&\r\n                    key != 37 /* left */ &&\r\n                    key != 39 /* right */\r\n                    ) {\r\n                    allow = false;\r\n                }\r\n                else {\r\n                    // for detecting special keys (listed above)\r\n                    // IE does not support 'charCode' and ignores them in keypress anyway\r\n                    if (typeof e.charCode != \"undefined\") {\r\n                        // special keys have 'keyCode' and 'which' the same (e.g. backspace)\r\n                        if (e.keyCode == e.which && e.which != 0) {\r\n                            allow = true;\r\n                        }\r\n                        // or keyCode != 0 and 'charCode'/'which' = 0\r\n                        else if (e.keyCode != 0 && e.charCode == 0 && e.which == 0) {\r\n                            allow = true;\r\n                        }\r\n                    }\r\n                }\r\n                // if key pressed is the exp and it is not already in the field\r\n                if (key == exp.charCodeAt(0) && this.value.indexOf(exp) == -1) {\r\n                    allow = true;\r\n                }\r\n                 // if key pressed is the decimal and it is not already in the field\r\n                if (key == decimal.charCodeAt(0) && this.value.indexOf(decimal) == -1) {\r\n                    allow = true;\r\n                }\r\n\r\n                /* allow plus and minus keys*/\r\n                if (key == minus.charCodeAt(0) || key == plus.charCodeAt(0)) {\r\n                    allow = true;\r\n                }\r\n            }\r\n            else {\r\n                allow = true;\r\n            }\r\n            return allow;\r\n        }\r\n    )\r\n        .blur(\r\n        function () {\r\n            var val = jQuery(this).val();\r\n            if (val != \"\") {\r\n                var re = new RegExp(\"^\\\\d+$|\\\\d*\" + decimal + \"\\\\d+\");\r\n                if (!re.exec(val)) {\r\n                    callback.apply(this);\r\n                }\r\n            }\r\n        }\r\n    );\r\n    return this;\r\n}","//  This file is part of the jQuery formatCurrency Plugin.\r\n//\r\n//    The jQuery formatCurrency Plugin is free software: you can redistribute it\r\n//    and/or modify it under the terms of the GNU General Public License as published \r\n//    by the Free Software Foundation, either version 3 of the License, or\r\n//    (at your option) any later version.\r\n\r\n//    The jQuery formatCurrency Plugin is distributed in the hope that it will\r\n//    be useful, but WITHOUT ANY WARRANTY; without even the implied warranty \r\n//    of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n//    GNU General Public License for more details.\r\n//\r\n//    You should have received a copy of the GNU General Public License along with \r\n//    the jQuery formatCurrency Plugin.  If not, see <http://www.gnu.org/licenses/>.\r\n\r\n(function ($) {\r\n\r\n    $.formatCurrency = {};\r\n\r\n    $.formatCurrency.regions = [];\r\n\r\n    // default Region is en\r\n    $.formatCurrency.regions[''] = {\r\n        symbol: '$',\r\n        positiveFormat: '%s%n',\r\n        negativeFormat: '(%s%n)',\r\n        decimalSymbol: '.',\r\n        digitGroupSymbol: ',',\r\n        groupDigits: true\r\n    };\r\n\r\n    $.fn.formatCurrency = function (destination, settings) {\r\n\r\n        if (arguments.length == 1 && typeof destination !== \"string\") {\r\n            settings = destination;\r\n            destination = false;\r\n        }\r\n\r\n        // initialize defaults\r\n        var defaults = {\r\n            name: \"formatCurrency\",\r\n            colorize: false,\r\n            region: '',\r\n            global: true,\r\n            roundToDecimalPlace: 2, // roundToDecimalPlace: -1; for no rounding; 0 to round to the dollar; 1 for one digit cents; 2 for two digit cents; 3 for three digit cents; ...\r\n            eventOnDecimalsEntered: false\r\n        };\r\n        // initialize default region\r\n        defaults = $.extend(defaults, $.formatCurrency.regions['']);\r\n        // override defaults with settings passed in\r\n        settings = $.extend(defaults, settings);\r\n\r\n        // check for region setting\r\n        if (settings.region.length > 0) {\r\n            settings = $.extend(settings, getRegionOrCulture(settings.region));\r\n        }\r\n        settings.regex = generateRegex(settings);\r\n\r\n        return this.each(function () {\r\n            var $this = $(this);\r\n\r\n            // get number\r\n            var num = '0';\r\n            var multiCeroPattern = new RegExp(\"^(0+|-0+)\",\"g\");\r\n            num = $this[$this.is('input, select, textarea') ? 'val' : 'html']();\r\n\r\n            //identify '(123)' as a negative number\r\n            if (num.search('\\\\(') >= 0) {\r\n                num = '-' + num;\r\n            }\r\n\r\n            // Identify 0000 and -0000 pattern, and replace to 0\r\n            if (!num.match(/[1-9]/g))  num = num.replace(multiCeroPattern, 0);\r\n\r\n            if (num === '' || (num === '-' && settings.roundToDecimalPlace === -1)) {\r\n                return;\r\n            }\r\n\r\n            // if the number is valid use it, otherwise clean it\r\n            if (isNaN(num)) {\r\n                // clean number\r\n                num = num.replace(settings.regex, '');\r\n\r\n                if (num === '' || (num === '-' && settings.roundToDecimalPlace === -1)) {\r\n                    return;\r\n                }\r\n\r\n                if (settings.decimalSymbol != '.') {\r\n                    num = num.replace(settings.decimalSymbol, '.');  // reset to US decimal for arithmetic\r\n                }\r\n                if (isNaN(num)) {\r\n                    num = '0';\r\n                }\r\n            }\r\n\r\n            // evalutate number input\r\n            var numParts = String(num).split('.');\r\n            var isPositive = (num == Math.abs(num));\r\n            var hasDecimals = (numParts.length > 1);\r\n            var decimals = (hasDecimals ? numParts[1].toString() : '0');\r\n            var originalDecimals = decimals;\r\n\r\n            // format number\r\n            num = Math.abs(numParts[0]);\r\n            num = isNaN(num) ? 0 : num;\r\n            if (settings.roundToDecimalPlace >= 0) {\r\n                decimals = parseFloat('1.' + decimals); // prepend \"0.\"; (IE does NOT round 0.50.toFixed(0) up, but (1+0.50).toFixed(0)-1\r\n                decimals = decimals.toFixed(settings.roundToDecimalPlace); // round\r\n                if (decimals.substring(0, 1) == '2') {\r\n                    num = Number(num) + 1;\r\n                }\r\n                decimals = decimals.substring(2); // remove \"0.\"\r\n            }\r\n            num = String(num);\r\n\r\n            if (settings.groupDigits) {\r\n                for (var i = 0; i < Math.floor((num.length - (1 + i)) / 3); i++) {\r\n                    num = num.substring(0, num.length - (4 * i + 3)) + settings.digitGroupSymbol + num.substring(num.length - (4 * i + 3));\r\n                }\r\n            }\r\n\r\n            if ((hasDecimals && settings.roundToDecimalPlace == -1) || settings.roundToDecimalPlace > 0) {\r\n                num += settings.decimalSymbol + decimals;\r\n            }\r\n\r\n            // format symbol/negative\r\n            var format = isPositive ? settings.positiveFormat : settings.negativeFormat;\r\n            var money = format.replace(/%s/g, settings.symbol);\r\n            money = money.replace(/%n/g, num);\r\n\r\n            // setup destination\r\n            var $destination = $([]);\r\n            if (!destination) {\r\n                $destination = $this;\r\n            } else {\r\n                $destination = $(destination);\r\n            }\r\n            // set destination\r\n            $destination[$destination.is('input, select, textarea') ? 'val' : 'html'](money);\r\n\r\n            if (\r\n\t\t\t\thasDecimals &&\r\n\t\t\t\tsettings.eventOnDecimalsEntered &&\r\n\t\t\t\toriginalDecimals.length > settings.roundToDecimalPlace\r\n\t\t\t) {\r\n                $destination.trigger('decimalsEntered', originalDecimals);\r\n            }\r\n\r\n            // colorize\r\n            if (settings.colorize) {\r\n                $destination.css('color', isPositive ? 'black' : 'red');\r\n            }\r\n        });\r\n    };\r\n\r\n    // Remove all non numbers from text\r\n    $.fn.toNumber = function (settings) {\r\n        var defaults = $.extend({\r\n            name: \"toNumber\",\r\n            region: '',\r\n            global: true\r\n        }, $.formatCurrency.regions['']);\r\n\r\n        settings = jQuery.extend(defaults, settings);\r\n        if (settings.region.length > 0) {\r\n            settings = $.extend(settings, getRegionOrCulture(settings.region));\r\n        }\r\n        settings.regex = generateRegex(settings);\r\n\r\n        return this.each(function () {\r\n            var method = $(this).is('input, select, textarea') ? 'val' : 'html';\r\n            $(this)[method]($(this)[method]().replace('(', '(-').replace(settings.regex, ''));\r\n        });\r\n    };\r\n\r\n    // returns the value from the first element as a number\r\n    $.fn.asNumber = function (settings) {\r\n        var defaults = $.extend({\r\n            name: \"asNumber\",\r\n            region: '',\r\n            parse: true,\r\n            parseType: 'Float',\r\n            global: true\r\n        }, $.formatCurrency.regions['']);\r\n        settings = jQuery.extend(defaults, settings);\r\n        if (settings.region.length > 0) {\r\n            settings = $.extend(settings, getRegionOrCulture(settings.region));\r\n        }\r\n        settings.regex = generateRegex(settings);\r\n        settings.parseType = validateParseType(settings.parseType);\r\n\r\n        var method = $(this).is('input, select, textarea') ? 'val' : 'html';\r\n        var num = $(this)[method]();\r\n        num = num ? num : \"\";\r\n        num = num.replace('(', '(-');\r\n        num = num.replace(settings.regex, '');\r\n        if (!settings.parse) {\r\n            return num;\r\n        }\r\n\r\n        if (num.length == 0) {\r\n            num = '0';\r\n        }\r\n\r\n        if (settings.decimalSymbol != '.') {\r\n            num = num.replace(settings.decimalSymbol, '.');  // reset to US decimal for arthmetic\r\n        }\r\n\r\n        return window['parse' + settings.parseType](num);\r\n    };\r\n\r\n    function getRegionOrCulture(region) {\r\n        var regionInfo = $.formatCurrency.regions[region];\r\n        if (regionInfo) {\r\n            return regionInfo;\r\n        }\r\n        else {\r\n            if (/(\\w+)-(\\w+)/g.test(region)) {\r\n                var culture = region.replace(/(\\w+)-(\\w+)/g, \"$1\");\r\n                return $.formatCurrency.regions[culture];\r\n            }\r\n        }\r\n        // fallback to extend(null) (i.e. nothing)\r\n        return null;\r\n    }\r\n\r\n    function validateParseType(parseType) {\r\n        switch (parseType.toLowerCase()) {\r\n            case 'int':\r\n                return 'Int';\r\n            case 'float':\r\n                return 'Float';\r\n            default:\r\n                throw 'invalid parseType';\r\n        }\r\n    }\r\n\r\n    function generateRegex(settings) {\r\n        if (settings.symbol === '') {\r\n            return new RegExp(\"[^\\\\d\" + settings.decimalSymbol + \"-]\", \"g\");\r\n        }\r\n        else {\r\n            var symbol = settings.symbol.replace('$', '\\\\$').replace('.', '\\\\.');\r\n            return new RegExp(symbol + \"|[^\\\\d\" + settings.decimalSymbol + \"-]\", \"g\");\r\n        }\r\n    }\r\n\r\n})(jQuery);","/* \n * Simple slide content widget\n * @author:  Edward Morales\n */\n(function($){  \n  \n  \n    $.widget(\"ui.slideContent\",{\n        // Define options    \n        options:{\n            container: \"<div/>\",\n            content: \"\",\n            buttons:[],\n            zIndex:1,\n            autoOpen: true,\n            \n            // Define styles\n            cssWrapContainer:\"slide-container\",\n            //cssButtonsContainer:\"slide-bt-container\"\n            cssButtonsContainer:\"ui-slide-button-container\"\n        },\n        \n        _create: function(){\n            this._layout = $(\"<div class='\"+this.options.cssWrapContainer+\"'></div>\").append(this.element);\n        \t\n            // Set a property to the selector to check if the plugin has been applied or not\n            this.element.addClass(\"slide-container-applied\");\n            \n            // Add buttons container\n            if(this.options.buttons.length >= 1){\n                this._layout.append(this._createButtons());\n            }\n                        \n            this._layout.hide();            \n        },\n        \n        _init: function(){\n            if(this.options.autoOpen){\n                this._isOpen = false;\n                this.open();\n            }\n            return this;\n        },\n        \n        _createButtons: function(){\n            var self = this;\n            var content=$(\"<div class=\"+self.options.cssButtonsContainer+\"></div>\");\n            $.each(this.options.buttons, function(ui, value){\n                var button = $(\"<input type='button' value='\"+value.text+\"' >\").click(\n                    value.click\n                    ).appendTo(content);\n            });\n            \n            this.buttonContainer = content;\n            return content;\n        },\n                \n        destroy: function(){\n            $.Widget.prototype.destroy.apply(this);\n        \t\n            // Remove\n            this.element.removeClass(\"slide-container-applied\");\n        },\n        \n        setContent: function(content){\n            this.options.content = content;\n        },\n        \n        open: function(){\n            if (this._isOpen) {\n                return;\n            }\n            // Hide container element\n        \tthis.parentCurrentScroll = this.options.container.parent().scrollTop();\r\n            this.options.container.hide();\n            \n            this.options.container.after(this._layout);\n        \t\n            // Check if the content has applied this plugin\n            if (this.element.parents(\".slide-container-applied\").length > 0) {\n                // Hide buttons for previous slide\n                $(this.element.parents(\".slide-container-applied\")[0]).slideContent(\"hideButtons\");\n            }\n\n            this._layout.show();\n            \n            this._isOpen = true;\n            this._trigger('open');\n        },\n        \n        isOpen: function() {\n            return this._isOpen;\n        },\n        \n        close: function() {\n            var self = this;\n\t\t\n            if (false === self._trigger('beforeclose')) {\n                return;\n            }\n\n            if (self.isOpen()) {\n                // Show container element\n                this.options.container.show();\n            \tthis.options.container.parent().scrollTop(this.parentCurrentScroll);\n            \t\n                // Check if the content has applied this plugin\n                if (this.element.parents(\".slide-container-applied\").length > 0) {\n                    // Show buttons for previous slide\n                    $(this.element.parents(\".slide-container-applied\")[0]).slideContent(\"showButtons\");\n                }\n            \n                // Hide slide content\n                this._layout.hide();\n                self._isOpen = false;\n            }\n            \n            this._trigger('close');\n        },\n    \t\n        showButtons: function () {\n            this.buttonContainer.show();\t\n        },\n    \t\n        hideButtons: function () {\n            this.buttonContainer.hide();\t\n        }\n    });  \n})(jQuery); \n\n","(function (a) {\r\n    function k(b, c) {\r\n        function j() { var a = document.body, b = document.documentElement; return Math.max(a.scrollHeight, a.offsetHeight, b.clientHeight, b.scrollHeight, b.offsetHeight) } function u(b) { e = a(\"li.dw-v\", b).eq(0).index(); d = a(\"li.dw-v\", b).eq(-1).index(); f = i.height; F = m } function x(b) { var a = i.headerText; return a ? \"function\" == typeof a ? a.call(B, b) : a.replace(/{value}/i, b) : \"\" } function p() { m.temp = J && null !== m.val && m.val != b.val() || null === m.values ? i.parseValue(b.val() ? b.val() : \"\", m) : m.values.slice(0); m.setValue(!0) }\r\n        function z(b, c, e, u, f) { i.validate.call(B, y, e); a(\".dww ul\", y).each(function (u) { var i = a(this), d = a('li[data-val=\"' + m.temp[u] + '\"]', i), i = d.index(), g = d, d = i; if (!g.hasClass(\"dw-v\")) { for (var h = g, x = 0, j = 0; h.prev().length && !h.hasClass(\"dw-v\"); ) h = h.prev(), x++; for (; g.next().length && !g.hasClass(\"dw-v\"); ) g = g.next(), j++; j < x && j && 1 == !f || !x || !h.hasClass(\"dw-v\") || 1 == f ? d += j : (g = h, d -= x); m.temp[u] = g.data(\"val\") } if (i != d || u == e || void 0 === e) m.scroll(a(this), d, u == e ? b : 0, c, u) }); m.change(u) } function k() {\r\n            var b = 0, c = 0, u = a(window).width(),\r\ne = a(window).height(), d = a(window).scrollTop(), i = a(\".dwo\", y), f = a(\".dw\", y), g, h; a(\".dwc\", y).each(function () { g = a(this).outerWidth(!0); b += g; c = g > c ? g : c }); g = b > u ? c : b; f.width(g); g = f.outerWidth(); h = f.outerHeight(); f.css({ left: (u - g) / 2, top: d + (e - h) / 2 }); i.height(0).height(j())\r\n        } function w(b) { var a = +b.data(\"pos\") + 1; l(b, a > d ? e : a, 1) } function E(b) { var a = +b.data(\"pos\") - 1; l(b, a < e ? d : a, 2) } var m = this, B = b, b = a(B), M, i = a.extend({}, D), O, y, N = {}, P = {}, J = b.is(\"input\"), K = !1; m.enable = function () { i.disabled = !1; J && b.prop(\"disabled\", !1) };\r\n        m.disable = function () { i.disabled = !0; J && b.prop(\"disabled\", !0) }; m.scroll = function (b, a, c, u, e) {\r\n            var d = (O - a) * i.height; b.attr(\"style\", (c ? H + \"-transition:all \" + c.toFixed(1) + \"s ease-out;\" : \"\") + (I ? H + \"-transform:translate3d(0,\" + d + \"px,0);\" : \"top:\" + d + \"px;\")); if (c) {\r\n                var g = 0; clearInterval(N[e]); N[e] = setInterval(function () { g += 0.1; b.data(\"pos\", Math.round((a - u) * Math.sin(g / c * (Math.PI / 2)) + u)); g >= c && (clearInterval(N[e]), b.data(\"pos\", a)) }, 100); clearTimeout(P[e]); P[e] = setTimeout(function () {\r\n                    \"mixed\" == i.mode && !b.hasClass(\"dwa\") &&\r\nb.closest(\".dwwl\").find(\".dwwb\").fadeIn(\"fast\")\r\n                }, 1E3 * c)\r\n            } else b.data(\"pos\", a)\r\n        }; m.setValue = function (a, c, e) { var u = i.formatResult(m.temp); m.val = u; m.values = m.temp.slice(0); K && a && z(e); c && J && b.val(u).trigger(\"change\") }; m.validate = function (b, a, c, u) { z(b, a, c, !0, u) }; m.change = function (b) { var c = i.formatResult(m.temp); \"inline\" == i.display ? m.setValue(!1, b) : a(\".dwv\", y).html(x(c)); b && i.onChange.call(B, c, m) }; m.hide = function () {\r\n            if (!1 === i.onClose.call(B, m.val, m)) return !1; a(\".dwtd\").prop(\"disabled\", !1).removeClass(\"dwtd\");\r\n            b.blur(); y && y.remove(); K = !1; a(window).unbind(\".dw\")\r\n        }; m.show = function () {\r\n            if (i.disabled || K) return !1; var c = i.height, e = i.rows * c; p(); for (var d = '<div class=\"' + i.theme + '\">' + (\"inline\" == i.display ? '<div class=\"dw dwbg dwi\"><div class=\"dwwr\">' : '<div class=\"dwo\"></div><div class=\"dw dwbg\"><div class=\"dwwr\">' + (i.headerText ? '<div class=\"dwv\"></div>' : \"\")), f = 0; f < i.wheels.length; f++) {\r\n                var d = d + ('<div class=\"dwc' + (\"scroller\" != i.mode ? \" dwpm\" : \" dwsc\") + (i.showLabel ? \"\" : \" dwhl\") + '\"><div class=\"dwwc dwrc\"><table cellpadding=\"0\" cellspacing=\"0\"><tr>'),\r\nh; for (h in i.wheels[f]) {\r\n                    var d = d + ('<td><div class=\"dwwl dwrc\">' + (\"scroller\" != i.mode ? '<div class=\"dwwb dwwbp\" style=\"height:' + c + \"px;line-height:\" + c + 'px;\"><span>+</span></div><div class=\"dwwb dwwbm\" style=\"height:' + c + \"px;line-height:\" + c + 'px;\"><span>&ndash;</span></div>' : \"\") + '<div class=\"dwl\">' + h + '</div><div class=\"dww dwrc\" style=\"height:' + e + \"px;min-width:\" + i.width + 'px;\"><ul>'), x; for (x in i.wheels[f][h]) d += '<li class=\"dw-v\" data-val=\"' + x + '\" style=\"height:' + c + \"px;line-height:\" + c + 'px;\">' + i.wheels[f][h][x] +\r\n\"</li>\"; d += '</ul><div class=\"dwwo\"></div></div><div class=\"dwwol\"></div></div></td>'\r\n                } d += \"</tr></table></div></div>\"\r\n            } d += (\"inline\" != i.display ? '<div class=\"dwbc\"><span class=\"dwbw dwb-s\"><a href=\"#\" class=\"dwb\">' + i.setText + '</a></span><span class=\"dwbw dwb-c\"><a href=\"#\" class=\"dwb\">' + i.cancelText + \"</a></span></div>\" : '<div class=\"dwcc\"></div>') + \"</div></div></div>\"; y = a(d); z(); \"inline\" != i.display ? y.appendTo(\"body\") : b.is(\"div\") ? b.html(y) : y.insertAfter(b); K = !0; M.init(y, m); \"inline\" != i.display && (a(\".dwb-s a\",\r\ny).click(function () { m.setValue(!1, !0); m.hide(); i.onSelect.call(B, m.val, m); return !1 }), a(\".dwb-c a\", y).click(function () { m.hide(); i.onCancel.call(B, m.val, m); return !1 }), a(\"input,select\").each(function () { a(this).prop(\"disabled\") || a(this).addClass(\"dwtd\") }), a(\"input,select\").prop(\"disabled\", !0), k(), a(window).bind(\"resize.dw\", k)); y.delegate(\".dwwl\", \"DOMMouseScroll mousewheel\", function (b) {\r\n    if (!i.readonly) {\r\n        b.preventDefault(); var b = b.originalEvent, b = b.wheelDelta ? b.wheelDelta / 120 : b.detail ? -b.detail / 3 : 0, c = a(\"ul\",\r\nthis), d = +c.data(\"pos\"), d = Math.round(d - b); u(c); l(c, d, b < 0 ? 1 : 2)\r\n    } \r\n}).delegate(\".dwb, .dwwb\", G, function () { a(this).addClass(\"dwb-a\") }).delegate(\".dwwb\", G, function (b) { if (!i.readonly) { b.preventDefault(); b.stopPropagation(); var c = a(this).closest(\".dwwl\").find(\"ul\"); func = a(this).hasClass(\"dwwbp\") ? w : E; u(c); clearInterval(g); g = setInterval(function () { func(c) }, i.delay); func(c) } }).delegate(\".dwwl\", G, function (b) {\r\n    if (!r && i.mode != \"clickpick\" && !i.readonly) {\r\n        b.preventDefault(); r = true; s = a(\"ul\", this).addClass(\"dwa\"); i.mode ==\r\n\"mixed\" && a(\".dwwb\", this).fadeOut(\"fast\"); v = +s.data(\"pos\"); u(s); t = o(b); A = new Date; q = t; m.scroll(s, v)\r\n    } \r\n}); i.onShow.call(B, y, m)\r\n        }; m.init = function (c) {\r\n            M = a.extend({ defaults: {}, init: n }, a.scroller.themes[c.theme ? c.theme : i.theme]); a.extend(i, M.defaults, c); m.settings = i; O = Math.floor(i.rows / 2); var d = a.scroller.presets[i.preset]; b.unbind(\".dw\"); d && (d = d.call(B, m), a.extend(i, d, c), a.extend(C, d.methods)); void 0 !== b.data(\"dwro\") && (B.readOnly = h(b.data(\"dwro\"))); K && m.hide(); \"inline\" == i.display ? m.show() : (p(), J && i.showOnFocus &&\r\n(b.data(\"dwro\", B.readOnly), B.readOnly = !0, b.bind(\"focus.dw\", m.show)))\r\n        }; m.values = null; m.val = null; m.temp = null; m.init(c)\r\n    } function w(b) { for (var a in b) if (void 0 !== z[b[a]]) return !0; return !1 } function o(b) { return E ? b.originalEvent ? b.originalEvent.changedTouches[0].pageY : b.changedTouches[0].pageY : b.pageY } function h(b) { return !0 === b || \"true\" == b } function l(b, c, g, u, f) {\r\n        var h = b.closest(\".dwwr\").find(\"ul\").index(b), c = c > d ? d : c, c = c < e ? e : c, b = a(\"li\", b).eq(c); F.temp[h] = b.data(\"val\"); F.validate(u ? c == f ? 0.1 : Math.abs(0.1 * (c -\r\nf)) : 0, f, h, g)\r\n    } var j = {}, g, n = function () { }, f, e, d, F, p = (new Date).getTime(), r = !1, s = null, t, q, A, v, z = document.createElement(z).style, I = w([\"perspectiveProperty\", \"WebkitPerspective\", \"MozPerspective\", \"OPerspective\", \"msPerspective\"]) && \"webkitPerspective\" in document.documentElement.style, H = function () { var b = [\"Webkit\", \"Moz\", \"O\", \"ms\"], a; for (a in b) if (w([b[a] + \"Transform\"])) return \"-\" + b[a].toLowerCase(); return \"\" } (), E = \"ontouchstart\" in window, G = E ? \"touchstart\" : \"mousedown\", L = E ? \"touchend\" : \"mouseup\", D = { width: 70, height: 40,\r\n        rows: 3, delay: 300, disabled: !1, readonly: !1, showOnFocus: !0, showLabel: !0, wheels: [], theme: \"\", headerText: \"{value}\", display: \"modal\", mode: \"scroller\", preset: \"\", setText: \"Set\", cancelText: \"Cancel\", onShow: n, onClose: n, onSelect: n, onCancel: n, onChange: n, formatResult: function (b) { for (var a = \"\", d = 0; d < b.length; d++) a += (0 < d ? \" \" : \"\") + b[d]; return a }, parseValue: function (b, a) {\r\n            for (var d = a.settings.wheels, b = b.split(\" \"), e = [], f = 0, g = 0; g < d.length; g++) for (var h in d[g]) {\r\n                if (void 0 !== d[g][h][b[f]]) e.push(b[f]); else for (var j in d[g][h]) {\r\n                    e.push(j);\r\n                    break\r\n                } f++\r\n            } return e\r\n        }, validate: n\r\n    }, C = { init: function (b) { void 0 === b && (b = {}); return this.each(function () { this.id || (p += 1, this.id = \"scoller\" + p); j[this.id] = new k(this, b) }) }, enable: function () { return this.each(function () { var b = j[this.id]; b && b.enable() }) }, disable: function () { return this.each(function () { var b = j[this.id]; b && b.disable() }) }, isDisabled: function () { var b = j[this[0].id]; if (b) return b.settings.disabled }, option: function (b, a) {\r\n        return this.each(function () {\r\n            var d = j[this.id]; if (d) {\r\n                var e = {}; \"object\" === typeof b ?\r\ne = b : e[b] = a; d.init(e)\r\n            } \r\n        })\r\n    }, setValue: function (b, a, d) { return this.each(function () { var e = j[this.id]; e && (e.temp = b, e.setValue(!0, a, d)) }) }, getInst: function () { return j[this[0].id] }, getValue: function () { var b = j[this[0].id]; if (b) return b.values }, show: function () { var b = j[this[0].id]; if (b) return b.show() }, hide: function () { return this.each(function () { var b = j[this.id]; b && b.hide() }) }, destroy: function () {\r\n        return this.each(function () {\r\n            var b = j[this.id]; b && (b.hide(), a(this).unbind(\".dw\"), delete j[this.id], a(this).is(\"input\") &&\r\n(this.readOnly = h(a(this).data(\"dwro\"))))\r\n        })\r\n    } \r\n    }; a(document).bind(E ? \"touchmove\" : \"mousemove\", function (b) { r && (b.preventDefault(), q = o(b), b = v + (t - q) / f, b = b > d + 1 ? d + 1 : b, b = b < e - 1 ? e - 1 : b, F.scroll(s, b)) }); a(document).bind(L, function (b) { if (r) { b.preventDefault(); s.removeClass(\"dwa\"); var c = new Date - A, b = v + (t - q) / f, b = b > d + 1 ? d + 1 : b, b = b < e - 1 ? e - 1 : b; 300 > c ? (c = (q - t) / c, c = c * c / 0.0012, 0 > q - t && (c = -c)) : c = q - t; l(s, Math.round(v - c / f), 0, !0, Math.round(b)); r = !1; s = null } clearInterval(g); a(\".dwb-a\").removeClass(\"dwb-a\") }); a.fn.scroller = function (b) {\r\n        if (C[b]) return C[b].apply(this,\r\nArray.prototype.slice.call(arguments, 1)); if (\"object\" === typeof b || !b) return C.init.apply(this, arguments); a.error(\"Unknown method\")\r\n    }; a.scroller = { setDefaults: function (b) { a.extend(D, b) }, presets: {}, themes: {}}\r\n})(jQuery); (function (a) {\r\n    var k = new Date, w = { dateFormat: \"mm/dd/yy\", dateOrder: \"mmddy\", timeWheels: \"hhiiA\", timeFormat: \"hh:ii A\", startYear: k.getFullYear() - 100, endYear: k.getFullYear() + 1, monthNames: \"January,February,March,April,May,June,July,August,September,October,November,December\".split(\",\"), monthNamesShort: \"Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec\".split(\",\"), dayNames: \"Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday\".split(\",\"), dayNamesShort: \"Sun,Mon,Tue,Wed,Thu,Fri,Sat\".split(\",\"), shortYearCutoff: \"+10\",\r\n        monthText: \"Month\", dayText: \"Day\", yearText: \"Year\", hourText: \"Hours\", minuteText: \"Minutes\", secText: \"Seconds\", ampmText: \"&nbsp;\", stepHour: 1, stepMinute: 1, stepSecond: 1, separator: \" \"\r\n    }, k = function (o) {\r\n        function h(b, a, c) { return void 0 !== p[a] ? +b[p[a]] : void 0 !== c ? c : H[r[a]] ? H[r[a]]() : r[a](H) } function l(b, a) { return Math.floor(b / a) * a } function j(b) { var a = h(b, \"h\", 0); return new Date(h(b, \"y\"), h(b, \"m\"), h(b, \"d\"), h(b, \"ap\") ? a + 12 : a, h(b, \"i\", 0), h(b, \"s\", 0)) } var g = a(this), n; if (g.is(\"input\")) {\r\n            switch (g.attr(\"type\")) {\r\n                case \"date\": n =\r\n\"yy-mm-dd\"; break; case \"datetime\": n = \"yy-mm-ddTHH:ii:ssZ\"; break; case \"datetime-local\": n = \"yy-mm-ddTHH:ii:ss\"; break; case \"month\": n = \"yy-mm\"; w.dateOrder = \"mmyy\"; break; case \"time\": n = \"HH:ii:ss\"\r\n            } var f = g.attr(\"min\"), g = g.attr(\"max\"); f && (w.minDate = a.scroller.parseDate(n, f)); g && (w.maxDate = a.scroller.parseDate(n, g))\r\n        } var e = a.extend({}, w, o.settings), d = 0, f = [], k = [], p = {}, r = { y: \"getFullYear\", m: \"getMonth\", d: \"getDate\", h: function (b) { b = b.getHours(); b = z && 12 <= b ? b - 12 : b; return l(b, E) }, i: function (b) { return l(b.getMinutes(), G) },\r\n            s: function (b) { return l(b.getSeconds(), L) }, ap: function (b) { return v && 11 < b.getHours() ? 1 : 0 } \r\n        }, s = e.preset, t = e.dateOrder, q = e.timeWheels, A = t.match(/D/), v = q.match(/a/i), z = q.match(/h/), I = \"datetime\" == s ? e.dateFormat + e.separator + e.timeFormat : \"time\" == s ? e.timeFormat : e.dateFormat, H = new Date, E = e.stepHour, G = e.stepMinute, L = e.stepSecond, D = e.minDate, C = e.maxDate; n = n ? n : I; if (s.match(/date/i)) {\r\n            a.each([\"y\", \"m\", \"d\"], function (b, a) { b = t.search(RegExp(a, \"i\")); -1 < b && k.push({ o: b, v: a }) }); k.sort(function (b, a) { return b.o > a.o ? 1 : -1 });\r\n            a.each(k, function (b, a) { p[a.v] = b }); for (var g = {}, b = 0; 3 > b; b++) if (b == p.y) { d++; g[e.yearText] = {}; for (var c = D ? D.getFullYear() : e.startYear, Q = C ? C.getFullYear() : e.endYear; c <= Q; c++) g[e.yearText][c] = t.match(/yy/i) ? c : (c + \"\").substr(2, 2) } else if (b == p.m) { d++; g[e.monthText] = {}; for (c = 0; 12 > c; c++) g[e.monthText][c] = t.match(/MM/) ? e.monthNames[c] : t.match(/M/) ? e.monthNamesShort[c] : t.match(/mm/) && 9 > c ? \"0\" + (c + 1) : c + 1 } else if (b == p.d) { d++; g[e.dayText] = {}; for (c = 1; 32 > c; c++) g[e.dayText][c] = t.match(/dd/i) && 10 > c ? \"0\" + c : c } f.push(g)\r\n        } if (s.match(/time/i)) {\r\n            g =\r\n{}; if (q.match(/h/i)) { p.h = d++; g[e.hourText] = {}; for (c = 0; c < (z ? 12 : 24); c += E) g[e.hourText][c] = z && 0 == c ? 12 : q.match(/hh/i) && 10 > c ? \"0\" + c : c } if (q.match(/i/)) { p.i = d++; g[e.minuteText] = {}; for (c = 0; 60 > c; c += G) g[e.minuteText][c] = q.match(/ii/) && 10 > c ? \"0\" + c : c } if (q.match(/s/)) { p.s = d++; g[e.secText] = {}; for (c = 0; 60 > c; c += L) g[e.secText][c] = q.match(/ss/) && 10 > c ? \"0\" + c : c } v && (p.ap = d++, d = q.match(/A/), g[e.ampmText] = { \"0\": d ? \"AM\" : \"am\", 1: d ? \"PM\" : \"pm\" }); f.push(g)\r\n        } return { wheels: f, headerText: function () {\r\n            return a.scroller.formatDate(I, j(o.temp),\r\ne)\r\n        }, formatResult: function (b) { return a.scroller.formatDate(n, j(b), e) }, parseValue: function (b) { var c = new Date, d = []; try { c = a.scroller.parseDate(n, b, e) } catch (g) { } for (var f in p) d[p[f]] = c[r[f]] ? c[r[f]]() : r[f](c); return d }, validate: function (b, c) {\r\n            var d = o.temp, f = { m: 0, d: 1, h: 0, i: 0, s: 0, ap: 0 }, g = { m: 11, d: 31, h: l(z ? 11 : 23, E), i: l(59, G), s: l(59, L), ap: 1 }, j = !0, n = !0; a.each(D || C ? \"y,m,d,ap,h,i,s\".split(\",\") : c == p.y || c == p.m || void 0 === c ? [\"d\"] : [], function (c, l) {\r\n                if (void 0 !== p[l]) {\r\n                    var o = f[l], i = g[l], z = 31, k = h(d, l), s = a(\"ul\", b).eq(p[l]),\r\nq, x; \"d\" == l && (q = h(d, \"y\"), x = h(d, \"m\"), i = z = 32 - (new Date(q, x, 32)).getDate(), A && a(\"li\", s).each(function () { var b = a(this), c = b.data(\"val\"), d = (new Date(q, x, c)).getDay(); b.html(t.replace(/[my]/gi, \"\").replace(/dd/, 10 > c ? \"0\" + c : c).replace(/d/, c).replace(/DD/, e.dayNames[d]).replace(/D/, e.dayNamesShort[d])) })); j && D && (o = D[r[l]] ? D[r[l]]() : r[l](D)); n && C && (i = C[r[l]] ? C[r[l]]() : r[l](C)); if (\"y\" != l) {\r\n                        var F = a('li[data-val=\"' + o + '\"]', s).index(), w = a('li[data-val=\"' + i + '\"]', s).index(); a(\"li\", s).removeClass(\"dw-v\").slice(F, w + 1).addClass(\"dw-v\");\r\n                        \"d\" == l && a(\"li\", s).removeClass(\"dw-h\").slice(z).addClass(\"dw-h\"); k < o && (k = o); k > i && (k = i)\r\n                    } j && (j = k == o); n && (n = k == i); if (e.invalid && \"d\" == l) {\r\n                        var v = []; e.invalid.dates && a.each(e.invalid.dates, function (b, a) { a.getFullYear() == q && a.getMonth() == x && v.push(a.getDate() - 1) }); if (e.invalid.daysOfWeek) { var I = (new Date(q, x, 1)).getDay(); a.each(e.invalid.daysOfWeek, function (b, a) { for (var c = a - I; c < z; c = c + 7) c >= 0 && v.push(c) }) } e.invalid.daysOfMonth && a.each(e.invalid.daysOfMonth, function (b, a) {\r\n                            a = (a + \"\").split(\"/\"); a[1] ? a[0] - 1 == x && v.push(a[1] -\r\n1) : v.push(a[0] - 1)\r\n                        }); a.each(v, function (b, c) { a(\"li\", s).eq(c).removeClass(\"dw-v\") })\r\n                    } \r\n                } \r\n            })\r\n        }, methods: { getDate: function (b) { var c = a(this).scroller(\"getInst\"); if (c) return j(b ? c.temp : c.values) }, setDate: function (b, c, d) { void 0 == c && (c = !1); return this.each(function () { var e = a(this).scroller(\"getInst\"); if (e) { for (var f in p) e.temp[p[f]] = b[r[f]] ? b[r[f]]() : r[f](b); e.setValue(!0, c, d) } }) } }\r\n        }\r\n    }; a.scroller.presets.date = k; a.scroller.presets.datetime = k; a.scroller.presets.time = k; a.scroller.formatDate = function (o, h, l) {\r\n        if (!h) return null;\r\n        for (var l = a.extend({}, w, l), j = function (a) { for (var e = 0; d + 1 < o.length && o.charAt(d + 1) == a; ) e++, d++; return e }, g = function (a, d, e) { d = \"\" + d; if (j(a)) for (; d.length < e; ) d = \"0\" + d; return d }, n = function (a, d, e, f) { return j(a) ? f[d] : e[d] }, f = \"\", e = !1, d = 0; d < o.length; d++) if (e) \"'\" == o.charAt(d) && !j(\"'\") ? e = !1 : f += o.charAt(d); else switch (o.charAt(d)) {\r\n            case \"d\": f += g(\"d\", h.getDate(), 2); break; case \"D\": f += n(\"D\", h.getDay(), l.dayNamesShort, l.dayNames); break; case \"o\": f += g(\"o\", (h.getTime() - (new Date(h.getFullYear(), 0, 0)).getTime()) / 864E5,\r\n3); break; case \"m\": f += g(\"m\", h.getMonth() + 1, 2); break; case \"M\": f += n(\"M\", h.getMonth(), l.monthNamesShort, l.monthNames); break; case \"y\": f += j(\"y\") ? h.getFullYear() : (10 > h.getYear() % 100 ? \"0\" : \"\") + h.getYear() % 100; break; case \"h\": var k = h.getHours(), f = f + g(\"h\", 12 < k ? k - 12 : 0 == k ? 12 : k, 2); break; case \"H\": f += g(\"H\", h.getHours(), 2); break; case \"i\": f += g(\"i\", h.getMinutes(), 2); break; case \"s\": f += g(\"s\", h.getSeconds(), 2); break; case \"a\": f += 11 < h.getHours() ? \"pm\" : \"am\"; break; case \"A\": f += 11 < h.getHours() ? \"PM\" : \"AM\"; break; case \"'\": j(\"'\") ? f +=\r\n\"'\" : e = !0; break; default: f += o.charAt(d)\r\n        } return f\r\n    }; a.scroller.parseDate = function (k, h, l) {\r\n        var j = new Date; if (!k || !h) return j; for (var h = \"object\" == typeof h ? h.toString() : h + \"\", g = a.extend({}, w, l), l = j.getFullYear(), n = j.getMonth() + 1, f = j.getDate(), e = -1, d = j.getHours(), j = j.getMinutes(), F = 0, p = -1, r = !1, s = function (a) { (a = v + 1 < k.length && k.charAt(v + 1) == a) && v++; return a }, t = function (a) {\r\n            s(a); a = h.substr(A).match(RegExp(\"^\\\\d{1,\" + (\"@\" == a ? 14 : \"!\" == a ? 20 : \"y\" == a ? 4 : \"o\" == a ? 3 : 2) + \"}\")); if (!a) return 0; A += a[0].length; return parseInt(a[0],\r\n10)\r\n        }, q = function (a, d, e) { a = s(a) ? e : d; for (d = 0; d < a.length; d++) if (h.substr(A, a[d].length).toLowerCase() == a[d].toLowerCase()) return A += a[d].length, d + 1; return 0 }, A = 0, v = 0; v < k.length; v++) if (r) \"'\" == k.charAt(v) && !s(\"'\") ? r = !1 : A++; else switch (k.charAt(v)) {\r\n            case \"d\": f = t(\"d\"); break; case \"D\": q(\"D\", g.dayNamesShort, g.dayNames); break; case \"o\": e = t(\"o\"); break; case \"m\": n = t(\"m\"); break; case \"M\": n = q(\"M\", g.monthNamesShort, g.monthNames); break; case \"y\": l = t(\"y\"); break; case \"H\": d = t(\"H\"); break; case \"h\": d = t(\"h\"); break; case \"i\": j =\r\nt(\"i\"); break; case \"s\": F = t(\"s\"); break; case \"a\": p = q(\"a\", [\"am\", \"pm\"], [\"am\", \"pm\"]) - 1; break; case \"A\": p = q(\"A\", [\"am\", \"pm\"], [\"am\", \"pm\"]) - 1; break; case \"'\": s(\"'\") ? A++ : r = !0; break; default: A++\r\n        } 100 > l && (l += (new Date).getFullYear() - (new Date).getFullYear() % 100 + (l <= g.shortYearCutoff ? 0 : -100)); if (-1 < e) { n = 1; f = e; do { g = 32 - (new Date(l, n - 1, 32)).getDate(); if (f <= g) break; n++; f -= g } while (1) } d = new Date(l, n - 1, f, -1 == p ? d : p && 12 > d ? d + 12 : !p && 12 == d ? 0 : d, j, F); if (d.getFullYear() != l || d.getMonth() + 1 != n || d.getDate() != f) throw \"Invalid date\"; return d\r\n    } \r\n})(jQuery); (function (a) {\r\n    var k = { inputClass: \"\" }; a.scroller.presets.select = function (w) {\r\n        var o = a.extend({}, k, w.settings), h = a(this), l = this.id + \"_dummy\"; a('label[for=\"' + this.id + '\"]').attr(\"for\", l); var j = a('label[for=\"' + l + '\"]'), j = j.length ? j.text() : h.attr(\"name\"), g = [], n = [{}]; n[0][j] = {}; var f = n[0][j]; a(\"option\", h).each(function () { var d = a(this).attr(\"value\"); f[d] = a(this).text(); a(this).prop(\"disabled\") && g.push(d) }); a(\"#\" + l).remove(); var e = a('<input type=\"text\" id=\"' + l + '\" value=\"' + f[h.val()] + '\" class=\"' + o.inputClass + '\" readonly />').insertBefore(h);\r\n        o.showOnFocus && e.focus(function () { w.show() }); h.hide().closest(\".ui-field-contain\").trigger(\"create\"); return { width: 200, wheels: n, headerText: !1, formatResult: function (a) { return f[a[0]] }, parseValue: function () { return [h.val()] }, validate: function (d) { a.each(g, function (e, f) { a('li[data-val=\"' + f + '\"]', d).removeClass(\"dw-v\") }) }, onSelect: function (a, f) { e.val(a); h.val(f.values[0]).trigger(\"change\") }, onChange: function (a, f) { \"inline\" == o.display && (e.val(a), h.val(f.temp[0]).trigger(\"change\")) }, onClose: function () { e.blur() } }\r\n    } \r\n})(jQuery); (function (a) { a.scroller.themes.android = { defaults: { dateOrder: \"Mddyy\", mode: \"clickpick\", height: 50}} })(jQuery); (function (a) { var k = { defaults: { dateOrder: \"Mddyy\", mode: \"mixed\", rows: 5, width: 70, showLabel: !1} }; a.scroller.themes[\"android-ics\"] = k; a.scroller.themes[\"android-ics light\"] = k })(jQuery); (function (a) { a.scroller.themes.ios = { defaults: { dateOrder: \"MMdyy\", rows: 5, height: 30, width: 55, headerText: !1, showLabel: !1}} })(jQuery); (function (a) {\r\n    a.scroller.themes.jqm = { defaults: { jqmBody: \"c\", jqmHeader: \"b\", jqmWheel: \"d\", jqmClickPick: \"c\", jqmSet: \"b\", jqmCancel: \"c\" }, init: function (k, w) {\r\n        var o = w.settings; a(\".dw\", k).removeClass(\"dwbg\").addClass(\"ui-overlay-shadow ui-corner-all ui-body-a\"); a(\".dwb-s a\", k).attr(\"data-role\", \"button\").attr(\"data-theme\", o.jqmSet); a(\".dwb-c a\", k).attr(\"data-role\", \"button\").attr(\"data-theme\", o.jqmCancel); a(\".dwwb\", k).attr(\"data-role\", \"button\").attr(\"data-theme\", o.jqmClickPick); a(\".dwv\", k).addClass(\"ui-header ui-bar-\" +\r\no.jqmHeader); a(\".dwwr\", k).addClass(\"ui-body-\" + o.jqmBody); a(\".dwpm .dww\", k).addClass(\"ui-body-\" + o.jqmWheel); \"inline\" != o.display && a(\".dw\", k).addClass(\"pop in\"); k.trigger(\"create\"); a(\".dwo\", k).click(function () { w.hide() })\r\n    } \r\n    }\r\n})(jQuery);\n","/**\r\n * Name:\r\n *   Author: Bizagi Mobile team\r\n *   Comments:\r\n * Structure to applicate plugin\r\n *  <div class=\"bz-bizagi-container-tap-popup\"> //container\r\n    <div class=\"cell bz-container-items-tabs\"> // represent item of tab\r\n    <span >${displayName}</span>// the first span always is the title                                    \r\n    <span> ........</span> // after the span can place the items you want\r\n    <div> .........</div> // etc\r\n    </div> <!-- end cell-->\r\n    </div><!-- end bz-bizagi-container-tap-popup-->\r\n**/\r\n(function ($) {\r\n    $.fn.bztabs = function (params) {\r\n\r\n        var self = $(this);\r\n\r\n        params = params || {};\r\n        params.activeTab = params.activeTab || 0;\r\n        params.tabNumber = params.tabNumber || 1;\r\n\r\n\r\n        var activate = (params.activate && typeof params.activate === \"function\") ? params.activate : function () { };\r\n        var beforeActivate = (params.beforeActivate && typeof params.beforeActivate === \"function\") ? params.beforeActivate : function () { };\r\n\r\n        // PopUp control\r\n        var popUp = self.find(\">div.bz-bizagi-container-tap-popup\").hide();\r\n        // Depending on tabNumber a percentage will be in the width of each tab\r\n        var tabCountPopup = popUp.children().length;\r\n        // Base to build the header of tabs\r\n        var tabHeader = $(\"<div class='bz-header_select'></div>\");\r\n\r\n        var tabCountReal = (params.tabNumber > tabCountPopup) ? tabCountPopup : params.tabNumber;\r\n\r\n        // round down\r\n        var widthRow = Math.floor(100 / Number(tabCountReal));\r\n\r\n        // Duplicate the tabs to create the header\r\n        popUp.children().each(function (i, item) {\r\n            tabHeader.append(\r\n                \"<div class='bz-wp-tabs-ui bz-wp-tabs-item' data-index='\" + i + \"' data-reference-tab='\" +\r\n                item.getAttribute(\"data-reference-tab\") + \"'><span>\" +\r\n                item.textContent + \"</span></div>\");\r\n        });\r\n\r\n        tabHeader.find(\"> .bz-wp-tabs-ui\").css(\"width\", widthRow + \"%\");        \r\n        tabHeader.append(\"<div class='bz-wp-tabs-arrow-container'><div class='bz-cm-icon bz-mo-icon bz-plus'></div></div>\");\r\n\r\n        self.prepend(tabHeader);\r\n\r\n        var tabCurrent = self.find(\"> .bz-bizagi-container-tap-popup > .bz-container-items-tabs\").eq(params.activeTab);\r\n        var itemCurrent = $($(tabCurrent).data(\"reference-tab\"), self);\r\n\r\n        itemCurrent.addClass(\"childrenActive\");\r\n        tabCurrent.addClass(\"tabSelected\");\r\n\r\n        // Mark the selected tab in the header\r\n        var activeTab = $(\".bz-wp-tabs-ui:nth-child(\" + (params.activeTab + 1) + \")\", tabHeader).addClass(\"tabSelected\");\r\n\r\n        // The new width will be added to the tabSelected in order to complete the 100% on tabs\r\n        var widthTabSelected = widthRow + (100 - (widthRow * tabCountReal));\r\n        activeTab.css(\"width\", widthTabSelected + \"%\");\r\n\r\n        function updateTabSize() {\r\n            if (params.tabNumber < tabCountPopup) {\r\n                // Select the current tab\r\n                $(\".bz-wp-tabs-arrow-container\", self).first().addClass(\"show-pluss\");\r\n                tabHeader.addClass(\"show-pluss\");\r\n                activeTab.trigger(\"click\", { origin: \"popUp\" });\r\n            } else {\r\n                $(\".bz-wp-tabs-arrow-container\", self).removeClass(\"show-pluss\");\r\n                tabHeader.removeClass(\"show-pluss\");\r\n                tabHeader.find(\"> .bz-wp-tabs-ui:last\").addClass(\"bz-wp-no-border\");\r\n            }\r\n        }\r\n\r\n        // Reorder tabs\r\n        function reorderTabs(dataRef) {\r\n\r\n            var tempTabs = tabHeader.find(\".bz-wp-tabs-ui\");\r\n            var moveAtTheEnd = true;\r\n\r\n            tempTabs.each(function (i, item) {\r\n                if (dataRef !== item.getAttribute(\"data-reference-tab\") && moveAtTheEnd) {\r\n                    tabHeader.remove(\"[data-reference-tab='\" + dataRef + \"']\");\r\n                    tabHeader.append(item);\r\n                } else {\r\n                    moveAtTheEnd = false;\r\n                }\r\n            });\r\n        }\r\n\r\n        // Change tabs\r\n        function changeTab(e, params) {\r\n\r\n            params = params || {};\r\n            params.origin = params.origin || \"header\";\r\n\r\n            e.stopPropagation();\r\n            e.preventDefault();\r\n\r\n            if ($(this).hasClass(\"tabSelected\") && params.origin !== \"popUp\") {\r\n                return;\r\n            }\r\n\r\n            var dataRef = e.currentTarget.getAttribute(\"data-reference-tab\");\r\n            var tabChildren = $(dataRef, self);\r\n\r\n            activeTab = $(e.currentTarget);\r\n            // Changes the visibility of the contents of the tabs\r\n            self.find(\">div.childrenActive\").removeClass(\"childrenActive\");\r\n            tabChildren.addClass(\"childrenActive\");\r\n\r\n            // Add the normal width\r\n            tabHeader.find(\">div.tabSelected\").removeClass(\"tabSelected\").css(\"width\", widthRow + \"%\");\r\n\r\n            if (popUp.css(\"display\") === \"block\") {\r\n                popUp.toggle();\r\n            }\r\n\r\n            if (params.origin && params.origin === \"popUp\") {\r\n                activeTab = $(\"[data-reference-tab='\" + dataRef + \"']\", tabHeader);\r\n                reorderTabs(dataRef);\r\n            }\r\n\r\n            // Add the new width for tabSelected to complete the 100%\r\n            activeTab.addClass(\"tabSelected\").css(\"width\", widthTabSelected + \"%\");\r\n            activate(e, params);\r\n        }\r\n\r\n        if (typeof (params.domIncluded) !== \"undefined\") {\r\n            // Until the control is added to the DOM can be known widths to add the icon popup         \r\n            $.when(params.domIncluded).done(function () {\r\n                updateTabSize();\r\n            });\r\n        } else {\r\n            updateTabSize();\r\n        }\r\n\r\n        // Attach events\r\n        self.find(\".bz-wp-tabs-arrow-container\").first().bind(\"click\", function (event) {\r\n\r\n            // Determine if an item is visible or not\r\n            var headerWidth = (tabHeader.innerWidth() - 29);\r\n            var totalWidth = 0;\r\n\r\n            // Remove the visible elements\r\n            $(\".bz-container-items-tabs\", popUp).removeClass(\"show\");\r\n\r\n            tabHeader.find(\".bz-wp-tabs-ui\").each(function (i, item) {\r\n\r\n                totalWidth += $(\":first-child\", item).outerWidth();\r\n\r\n                // If \"true\" then it is a tab to display the popup\r\n                if (totalWidth > headerWidth) {\r\n\r\n                    popUp.children().each(function (j, pop) {\r\n                        if (pop.textContent === item.textContent) {\r\n                            $(pop).addClass(\"show\");\r\n                            $(\".cell.bz-container-items-tabs\").css(\"border-bottom\", \"\");\r\n                            $(\".cell.bz-container-items-tabs.show\").last().css(\"border-bottom\", \"none\");\r\n\r\n                            return;\r\n                        }\r\n                    });\r\n                }\r\n            });\r\n\r\n            event.stopPropagation();\r\n            event.preventDefault();\r\n            popUp.toggle();\r\n        });\r\n\r\n        $(\">div.cell\", popUp).bind(\"click\", function (e) {\r\n            changeTab(e, { origin: \"popUp\" });\r\n        });\r\n\r\n        $(\".bz-wp-tabs-ui\", tabHeader).bind(\"click\", changeTab);\r\n\r\n        tabHeader.bind(\"resizeHeader\", function () {\r\n            updateTabSize();\r\n        });\r\n    };\r\n})(jQuery);","/*\r\n*   Name: BizAgi Services Rendering End Points\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script defines all the end-points used to retrieve ajax stuff\r\n*   -   All urls must be relative to the base application\r\n*/\r\n\r\n// Create or define namespace\r\nbizagi.render = (typeof (bizagi.render) !== \"undefined\") ? bizagi.render : {};\r\nbizagi.render.services = (typeof (bizagi.render.services) !== \"undefined\") ? bizagi.render.services : {};\r\nbizagi.render.services.endPoints = [];\r\n\r\n// Creates a endpoint hash factory to resolve custom requirements\r\nbizagi.render.services.getEndPoints = function (params) {\r\n\r\n    var renderHandlerPathRest = \"Rest/Handlers/Render\";\r\n    var renderUploadHandlerPathRest = \"Rest/Handlers/Render/Upload\";\r\n    var renderFileHandlerPathRest = \"Rest/Handlers/RenderFile\";\r\n    var letterHandlerPathRest = \"Rest/Handlers/Letter\";\r\n    var multiActionHandlerPathRest = \"Rest/Handlers/MultiAction\";\r\n    var metadataHandlerPathRest = \"Rest/Handlers/Metadata\";\r\n    var metadataMultiactionHandlerPathRest = \"Rest/Handlers/MetadataMultiAction\";\r\n    // Default workportal end-points\r\n    if (params.context == \"workflow\") {\r\n        return {\r\n            \"form-get-data\": params.proxyPrefix + renderHandlerPathRest,\r\n            \"form-submit-data\": params.proxyPrefix + renderHandlerPathRest,\r\n            \"form-submit-data-upload\": params.proxyPrefix + renderUploadHandlerPathRest,\r\n            \"render-property-refresh\": params.proxyPrefix + renderHandlerPathRest,\r\n            \"render-multiaction\": params.proxyPrefix + multiActionHandlerPathRest,\r\n            \"render-upload-cancel-image\": params.proxyPrefix + \"jquery/rendering/css/desktop/plugins/other/images/upload-cancel.png\",\r\n            \"render-upload-data-url\": params.proxyPrefix + renderFileHandlerPathRest,\r\n            \"render-upload-add-url\": params.proxyPrefix + renderUploadHandlerPathRest,\r\n            \"render-upload-delete-url\": params.proxyPrefix + renderHandlerPathRest,\r\n            \"render-ecm-upload-url\": params.proxyPrefix + metadataHandlerPathRest,\r\n            \"render-multiaction-metadata\": params.proxyPrefix + metadataMultiactionHandlerPathRest,\r\n            \"render-grid-edit-url\": params.proxyPrefix + renderHandlerPathRest,\r\n            \"render-grid-save-url\": params.proxyPrefix + renderHandlerPathRest,\r\n            \"render-grid-add-url\": params.proxyPrefix + renderHandlerPathRest,\r\n            \"render-grid-rollback-url\": params.proxyPrefix + renderHandlerPathRest,\r\n            \"render-grid-commit-url\": params.proxyPrefix + renderHandlerPathRest,\r\n            \"render-grid-checkpoint-url\": params.proxyPrefix + renderHandlerPathRest,\r\n            \"render-save-entity\": params.proxyPrefix + renderHandlerPathRest,\r\n            \"render-stakeholder-associated\": params.proxyPrefix + renderHandlerPathRest,\r\n            \"render-search-default-image\": params.proxyPrefix + \"jquery/rendering/css/desktop/images/bizagi_xpress.png\",\r\n            \"render-search-form-get-data\": params.proxyPrefix + renderHandlerPathRest + \"?h_contexttype=metadata\",\r\n            \"render-search-advanced-url\": params.proxyPrefix + \"Rest/Handlers/Query\",\r\n            \"render-letter-notEditable-url\": params.proxyPrefix + letterHandlerPathRest,\r\n            \"render-letter-content-url\": params.proxyPrefix + letterHandlerPathRest,\r\n            \"render-letter-save-url\": params.proxyPrefix + renderHandlerPathRest,\r\n            \"render-letter-content-icons\": params.proxyPrefix + \"jquery/rendering/css/desktop/plugins/other/images/nicEditorIcons.gif\",\r\n            \"render-userfield-definition\": params.proxyPrefix + \"Rest/Userfields/{guidUserfield}/UserfieldDependency/{device}\",\r\n            \"render-document-generate\": params.proxyPrefix + \"Rest/DocumentTemplates/CaseTemplates\",\r\n            \"render-document-generateAllDocuments\": params.proxyPrefix + \"Rest/DocumentTemplates/TemplatesConcatFilesToPDF\",\r\n            \"render-processes-startform\": params.proxyPrefix + \"Rest/Processes/HasStartForm\",\r\n            \"render-processes-getstartform\": params.proxyPrefix + \"Rest/Processes/HasStartForm\",\r\n            \"render-entity-layout-image64\": params.proxyPrefix + \"Api/Entities/{entity}/Picture/{surrogateKey}/Base64\",\r\n            \"render-entity-layout-imageByteArray\": params.proxyPrefix + \"Api/Entities/{entity}/Picture/{surrogateKey}/Array?xpath={xpath}&width={width}&height={height}&idcase={idcase}&idworkitem={idworkitem}&contextxpath={contextxpath}&h_={hash}\" + \"&xsrf=\" + bizagi.getXSRFToken(),\r\n            \"render-entity-layout-upload-files\": params.proxyPrefix + \"Api/Entities/{entity}/Files/{surrogateKey}/Array?xpath={xpath}\",\r\n            \"case-handler-getCaseSummary\": params.proxyPrefix + \"Rest/Cases/{idCase}/SummaryGuid\",\r\n            \"case-handler-getCaseSummaryByGuid\": params.proxyPrefix + \"Rest/Cases/{guid}/SummaryByGuid\",\r\n            \"case-handler-getCaseAssignees\": params.proxyPrefix + \"Rest/Cases/{idCase}/AssigneesGuid\",\r\n            \"case-handler-getWorkItems\": params.proxyPrefix + \"Rest/Cases/{idCase}/WorkItems\",\r\n            \"case-handler-getWorkItemsByGuid\": params.proxyPrefix + \"Rest/Cases/{guid}/WorkItemsByGuid\",\r\n            \"admin-getUsersList\": params.proxyPrefix + \"Rest/Users/SearchUsers\",\r\n            \"admin-getUsersList-FromPreferences\": params.proxyPrefix + \"Rest/Users/SearchUsersFromPreferences\",\r\n            \"admin-getUsersList-ForStakeholders\": params.proxyPrefix + \"Rest/Users/SearchUsersForStakeholders\",\r\n            \"admin-getUsersForAssignation\": params.proxyPrefix + \"Rest/Users/UsersForAssignation\",\r\n            \"admin-users-config\": params.proxyPrefix + \"Api/Authentication/BizagiConfig\",\r\n            //users administration\r\n            \"admin-usersform\": params.proxyPrefix + \"Rest/Handlers/Render\",\r\n            \"admin-GenerateDataToSendByEmail\": params.proxyPrefix + \"Rest/Users/GenerateDataToSendByEmail\",\r\n            \"admin-sendUserEmail\": params.proxyPrefix + \"Rest/Users/SendUserEmail\"\r\n        };\r\n    }\r\n    // Sharepoint end-points (must be customized for each project)\r\n    if (params.context == \"sharepoint\" || params.context == \"portal\") {\r\n        if (typeof (params.sharepointProxyPrefix) === \"undefined\") alert(\"sharepointProxyPrefix param is requiered to build endpoints when context is 'sharepoint'\");\r\n        return {\r\n            \"form-get-data\": params.sharepointProxyPrefix + renderHandlerPathRest,\r\n            \"form-submit-data\": params.sharepointProxyPrefix + renderHandlerPathRest,\r\n            \"form-submit-data-upload\": params.sharepointProxyPrefix + renderUploadHandlerPathRest,\r\n            \"render-property-refresh\": params.sharepointProxyPrefix + renderHandlerPathRest,\r\n            \"render-multiaction\": params.sharepointProxyPrefix + multiActionHandlerPathRest,\r\n            \"render-upload-cancel-image\": \"jquery/rendering/css/desktop/plugins/other/images/upload-cancel.png\",\r\n            \"render-upload-data-url\": params.sharepointProxyPrefix + renderFileHandlerPathRest,\r\n            \"render-upload-add-url\": params.sharepointProxyPrefix + renderUploadHandlerPathRest,\r\n            \"render-upload-delete-url\": params.sharepointProxyPrefix + renderHandlerPathRest,\r\n            \"render-ecm-upload-url\": params.sharepointProxyPrefix + metadataHandlerPathRest,\r\n            \"render-grid-edit-url\": params.sharepointProxyPrefix + renderHandlerPathRest,\r\n            \"render-grid-save-url\": params.sharepointProxyPrefix + renderHandlerPathRest,\r\n            \"render-grid-add-url\": params.sharepointProxyPrefix + renderHandlerPathRest,\r\n            \"render-grid-rollback-url\": params.sharepointProxyPrefix + renderHandlerPathRest,\r\n            \"render-grid-commit-url\": params.sharepointProxyPrefix + renderHandlerPathRest,\r\n            \"render-grid-checkpoint-url\": params.sharepointProxyPrefix + renderHandlerPathRest,\r\n            \"render-save-entity\": params.sharepointProxyPrefix + renderHandlerPathRest,\r\n            \"render-stakeholder-associated\": params.proxyPrefix + renderHandlerPathRest,\r\n            \"render-search-default-image\": \"jquery/css/bizagi/desktop/images/bizagi_xpress.png\",\r\n            \"render-search-form-get-data\": params.sharepointProxyPrefix + renderHandlerPathRest + \"?h_contexttype=metadata\",\r\n            \"render-search-advanced-url\": params.sharepointProxyPrefix + \"Rest/Handlers/Query\",\r\n            \"render-letter-notEditable-url\": params.sharepointProxyPrefix + letterHandlerPathRest,\r\n            \"render-letter-content-url\": params.sharepointProxyPrefix + letterHandlerPathRest,\r\n            \"render-letter-save-url\": params.sharepointProxyPrefix + renderHandlerPathRest,\r\n            \"render-letter-content-icons\": \"jquery/css/plugins/other/images/nicEditorIcons.gif\",\r\n            \"render-userfield-definition\": params.sharepointProxyPrefix + \"Rest/Userfields/{guidUserfield}/UserfieldDependency/{device}\",\r\n            \"render-document-generate\": params.sharepointProxyPrefix + \"Rest/DocumentTemplates/CaseTemplates\",\r\n            \"render-document-generateAllDocuments\": params.sharepointProxyPrefix + \"Rest/DocumentTemplates/TemplatesConcatFilesToPDF\",\r\n            \"render-processes-startform\": params.proxyPrefix + \"Rest/Processes/HasStartForm\",\r\n            \"render-processes-getstartform\": params.proxyPrefix + \"Rest/Processes/HasStartForm\",\r\n            \"render-entity-layout-image64\": params.proxyPrefix + \"Api/Entities/{entity}/Picture/{surrogateKey}/Base64\",\r\n            \"render-entity-layout-imageByteArray\": params.proxyPrefix + \"Api/Entities/{entity}/Picture/{surrogateKey}/Array?xpath={xpath}&width={width}&height={height}&idcase={idcase}&idworkitem={idworkitem}&contextxpath={contextxpath}&h_={hash}\" + \"&xsrf=\" + bizagi.getXSRFToken(),\r\n            \"case-handler-getCaseSummary\": params.sharepointProxyPrefix + \"Rest/Cases/{idCase}/Summary\",\r\n            \"case-handler-getCaseSummaryByGuid\": params.sharepointProxyPrefix + \"Rest/Cases/{guid}/SummaryByGuid\",\r\n            \"case-handler-getWorkItems\": params.sharepointProxyPrefix + \"Rest/Cases/{idCase}/WorkItems\",\r\n            \"case-handler-getWorkItemsByGuid\": params.proxyPrefix + \"Rest/Cases/{guid}/WorkItemsByGuid\"\r\n        };\r\n    }\r\n\r\n    if (params.context == \"entitymanagement\") {\r\n        return {\r\n            \"form-get-data\": params.proxyPrefix + renderHandlerPathRest + \"?h_contexttype=entity\",\r\n            \"form-submit-data\": params.proxyPrefix + renderHandlerPathRest + \"?h_contexttype=entity\",\r\n            \"form-submit-data-upload\": params.proxyPrefix + renderUploadHandlerPathRest + \"?h_contexttype=entity\",\r\n            \"render-property-refresh\": params.proxyPrefix + renderHandlerPathRest + \"?h_contexttype=entity\",\r\n            \"render-upload-cancel-image\": \"jquery/rendering/css/desktop/plugins/other/images/upload-cancel.png\",\r\n            \"render-upload-data-url\": params.proxyPrefix + renderFileHandlerPathRest + \"?h_contexttype=entity\",\r\n            \"render-upload-add-url\": params.proxyPrefix + renderUploadHandlerPathRest + \"?h_contexttype=entity\",\r\n            \"render-upload-delete-url\": params.proxyPrefix + renderHandlerPathRest + \"?h_contexttype=entity\",\r\n            \"render-grid-edit-url\": params.proxyPrefix + renderHandlerPathRest + \"?h_contexttype=entity\",\r\n            \"render-grid-save-url\": params.proxyPrefix + renderHandlerPathRest + \"?h_contexttype=entity\",\r\n            \"render-grid-add-url\": params.proxyPrefix + renderHandlerPathRest + \"?h_contexttype=entity\",\r\n            \"render-grid-rollback-url\": params.proxyPrefix + renderHandlerPathRest + \"?h_contexttype=entity\",\r\n            \"render-grid-commit-url\": params.proxyPrefix + renderHandlerPathRest + \"?h_contexttype=entity\",\r\n            \"render-grid-checkpoint-url\": params.proxyPrefix + renderHandlerPathRest + \"?h_contexttype=entity\",\r\n            \"render-search-default-image\": \"jquery/rendering/css/desktop/images/bizagi_xpress.png\",\r\n            \"render-search-form-get-data\": params.proxyPrefix + renderHandlerPathRest + \"?h_contexttype=metadata\",\r\n            \"render-search-advanced-url\": params.proxyPrefix + \"Rest/Handlers/Query\" + \"?h_contexttype=entity\",\r\n            \"render-letter-notEditable-url\": params.proxyPrefix + letterHandlerPathRest + \"?h_contexttype=entity\",\r\n            \"render-letter-content-url\": params.proxyPrefix + letterHandlerPathRest + \"?h_contexttype=entity\",\r\n            \"render-letter-save-url\": params.proxyPrefix + renderHandlerPathRest + \"?h_contexttype=entity\",\r\n            \"render-letter-content-icons\": \"jquery/rendering/css/desktop/plugins/other/images/nicEditorIcons.gif\"\r\n        };\r\n    }\r\n\r\n    if (params.context == \"search\") {\r\n        return {\r\n            \"form-get-data\": params.proxyPrefix + renderHandlerPathRest + \"?h_contexttype=metadata\",\r\n            \"form-submit-data\": params.proxyPrefix + renderHandlerPathRest + \"?h_contexttype=metadata\",\r\n            \"form-submit-data-upload\": params.proxyPrefix + renderUploadHandlerPathRest + \"?h_contexttype=metadata\",\r\n            \"render-property-refresh\": params.proxyPrefix + renderHandlerPathRest + \"?h_contexttype=metadata\",\r\n            \"render-upload-cancel-image\": \"jquery/rendering/css/desktop/plugins/other/images/upload-cancel.png\",\r\n            \"render-upload-data-url\": params.proxyPrefix + renderFileHandlerPathRest + \"?h_contexttype=metadata\",\r\n            \"render-upload-add-url\": params.proxyPrefix + renderUploadHandlerPathRest + \"?h_contexttype=metadata\",\r\n            \"render-upload-delete-url\": params.proxyPrefix + renderHandlerPathRest + \"?h_contexttype=metadata\",\r\n            \"render-grid-edit-url\": params.proxyPrefix + renderHandlerPathRest + \"?h_contexttype=metadata\",\r\n            \"render-grid-save-url\": params.proxyPrefix + renderHandlerPathRest + \"?h_contexttype=metadata\",\r\n            \"render-grid-add-url\": params.proxyPrefix + renderHandlerPathRest + \"?h_contexttype=metadata\",\r\n            \"render-grid-rollback-url\": params.proxyPrefix + renderHandlerPathRest + \"?h_contexttype=metadata\",\r\n            \"render-grid-commit-url\": params.proxyPrefix + renderHandlerPathRest + \"?h_contexttype=metadata\",\r\n            \"render-grid-checkpoint-url\": params.proxyPrefix + renderHandlerPathRest + \"?h_contexttype=metadata\",\r\n            \"render-search-default-image\": \"jquery/rendering/css/desktop/images/bizagi_xpress.png\",\r\n            \"render-search-form-get-data\": params.proxyPrefix + renderHandlerPathRest + \"?h_contexttype=metadata\",\r\n            \"render-search-advanced-url\": params.proxyPrefix + \"Rest/Handlers/Query\" + \"?h_contexttype=metadata\",\r\n            \"render-letter-notEditable-url\": params.proxyPrefix + letterHandlerPathRest + \"?h_contexttype=metadata\",\r\n            \"render-letter-content-url\": params.proxyPrefix + letterHandlerPathRest + \"?h_contexttype=metadata\",\r\n            \"render-letter-save-url\": params.proxyPrefix + renderHandlerPathRest + \"?h_contexttype=metadata\",\r\n            \"render-letter-content-icons\": \"jquery/rendering/css/desktop/plugins/other/images/nicEditorIcons.gif\"\r\n        };\r\n    }\r\n\r\n    return {};\r\n};\r\n","/*\r\n*   Name: BizAgi Rendering Service Context Factory\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will define the endpoints to be used based on the given context\r\n*/\r\n\r\n$.Class.extend(\"bizagi.render.services.context\", {}, {\r\n    /* \r\n    *   Constructor\r\n    */\r\n    init: function (params) {\r\n        this.context = params.context;\r\n        this.endPoints = bizagi.render.services.getEndPoints(params);\r\n        this.proxyPrefix = !bizagi.util.isEmpty(params.proxyPrefix) ? params.proxyPrefix : \"\";\r\n    },\r\n\r\n    /*\r\n    *   Returns the given url for a specified service\r\n    */\r\n    getUrl: function (service) {\r\n        if (this.endPoints[service] == null) {\r\n            alert(\"No endpoint defined for: \" + service);\r\n        }\r\n        return this.endPoints[service];\r\n    },\r\n\r\n    setProxyPrefix: function(params){\r\n        this.proxyPrefix = !bizagi.util.isEmpty(params.proxyPrefix) ? params.proxyPrefix : \"\";\r\n        this.endPoints = bizagi.render.services.getEndPoints(params);\r\n    }\r\n});","/*\r\n *   Name: BizAgi Rendering Services\r\n *   Author: Diego Parra\r\n *   Comments:\r\n *   -   This class will provide a facade to access to rendering REST services\r\n */\r\n\r\n$.Class.extend(\"bizagi.render.services.service\",\r\n    {\r\n        // Statics\r\n        BA_ACTION_PARAMETER_PREFIX: \"p_\",\r\n        BA_CONTEXT_PARAMETER_PREFIX: \"h_\",\r\n        BA_PAGE_CACHE: \"pageCacheId\"\r\n    },\r\n    {\r\n        /*\r\n         *   Constructor\r\n         */\r\n        init: function(params) {\r\n            params = params || {};\r\n            params.context = params.context || \"workflow\";\r\n            params.proxyPrefix = !bizagi.util.isEmpty(params.proxyPrefix) ? params.proxyPrefix : \"\";\r\n            this.serviceLocator = new bizagi.render.services.context(params);\r\n            this.multiactionService = new bizagi.render.services.multiactionservice(this);\r\n            this.guid = Math.guid();\r\n\r\n            if (bizagi.override.enableECMMetadataMultiaction) {\r\n                this.multiactionMetadataService = new bizagi.render.services.metadatamultiactionservice(this);\r\n            }\r\n\r\n            // Userfield definitions mini-cache\r\n            this.userfieldRequests = {};\r\n\r\n            this.deviceType = params.deviceType || (bizagi.util.isSmartphoneDevice() ? bizagi.deviceEnum.smartphone: (bizagi.util.isTabletDevice() ? bizagi.deviceEnum.tablet: bizagi.deviceEnum.desktop));\r\n            this.deviceCode = bizagi.util.getDeviceCode();\r\n        },\r\n        /*\r\n         *   Return the multiaction-service\r\n         */\r\n        multiaction: function() {\r\n            return this.multiactionService;\r\n        },\r\n\r\n        metadataECMMultiaction: function () {\r\n            return bizagi.override.enableECMMetadataMultiaction ? this.multiactionMetadataService: this;\r\n        },\r\n        /*\r\n         *   SINGLE SERVICES METHODS\r\n         */\r\n\r\n        /*\r\n         *   Gets form data\r\n         *   Returns a promise of the data being retrieved\r\n         */\r\n        getFormData: function(params) {\r\n            var self = this;\r\n\r\n            // Check if the params contains mocked data\r\n            if (params && params.data) {\r\n                return params.data;\r\n            }\r\n\r\n            // Define data\r\n            params = params || {};\r\n            var data = {};\r\n            data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = params.action || \"LOADFORM\";\r\n            data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"devicetype\"] = self.deviceType;\r\n            data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"devicecode\"] = self.deviceCode;\r\n\r\n            if (params.idProcess)\r\n                data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idProcess\"] = params.idProcess;\r\n            if (params.idForm)\r\n                data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idForm\"] = params.idForm;\r\n            if (params.idEntity)\r\n                data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idEntity\"] = params.idEntity;\r\n            if (params.surrogateKey)\r\n                data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"surrogateKey\"] = params.surrogateKey;\r\n            if (params.idRender)\r\n                data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\r\n            if (params.xpathContext)\r\n                data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\r\n            if (params.requestedForm)\r\n                data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"requestedForm\"] = params.requestedForm;\r\n            if (params.recordXPath)\r\n                data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"recordXPath\"] = params.recordXPath;\r\n            if (params.summaryForm)\r\n                data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"summaryForm\"] = params.summaryForm;\r\n            if (params.idCase)\r\n                data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idCase\"] = params.idCase;\r\n            if (params.idWorkitem)\r\n                data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idWorkitem\"] = params.idWorkitem;\r\n            if (params.idTask)\r\n                data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idTask\"] = params.idTask;\r\n            if (params.idPageCache)\r\n                data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\r\n            if (params.contextType)\r\n                data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = params.contextType;\r\n            if (params.guidEntity)\r\n                data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"guidEntity\"] = params.guidEntity;\r\n            if (!bizagi.util.isEmpty(params.isRefresh))\r\n                data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"isRefresh\"] = params.isRefresh;\r\n            if (params.isActionStartForm)\r\n                data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"isActionStartForm\"] = params.isActionStartForm;\r\n            if (params.additionalXpaths)\r\n                data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"additionalXpaths\"] = params.additionalXpaths;\r\n            if (params.idStartScope)\r\n                data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idStartScope\"] = params.idStartScope;\r\n            if (typeof params.readOnlyForm !== \"undefined\")\r\n                data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"readonlyform\"] = params.readOnlyForm;\r\n            if (typeof params.printversion !== \"undefined\")\r\n                data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"printForm\"] = params.printversion;\r\n            if (typeof params.recordXpath !== \"undefined\")\r\n                data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"recordlauncherxpath\"] = params.recordXpath;\r\n            if (params.guid)\r\n                data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"guid\"] = params.guid;\r\n            if (params.downloadOfflineForm)\r\n                data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"downloadofflineform\"] = 1;\r\n\r\n            if (params.editable === false) {\r\n                data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"DisplayFormAsReadOnly\"] = true;\r\n            }\r\n\r\n            // Support parameter from ui\r\n            // Parameters that affects all the same attributes of render\r\n            if (params.printversion) {\r\n                //Print limit grid rows\r\n                var BA_ALL_PARAMETER_PREFIX = \"all_\";\r\n\r\n                if (params[self.Class.BA_ACTION_PARAMETER_PREFIX + BA_ALL_PARAMETER_PREFIX + \"rows\"]) {\r\n                    data[self.Class.BA_ACTION_PARAMETER_PREFIX + BA_ALL_PARAMETER_PREFIX + \"rows\"] = params[self.Class.BA_ACTION_PARAMETER_PREFIX + BA_ALL_PARAMETER_PREFIX + \"rows\"];\r\n                }\r\n            }\r\n\r\n            // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\r\n            if (params.prepare)\r\n                return data;\r\n\r\n\r\n            // Call ajax and returns promise\r\n            bizagi.chrono.initAndStart(\"data\");\r\n            var ajaxParams = {\r\n                url: params.url || self.serviceLocator.getUrl(\"form-get-data\"),\r\n                data: data,\r\n                type: \"POST\",\r\n                dataType: \"json\",\r\n                serviceType: params.action || \"LOAD\"\r\n            };\r\n            if (params.downloadOfflineForm){\r\n                ajaxParams.avoidLoader = true;\r\n            }\r\n            return $.ajax(ajaxParams)\r\n                .pipe(function(response) {\r\n                    bizagi.chrono.stopAndLog(\"data\");\r\n\r\n                    // Transform data for read only version\r\n                    if (params.printversion) {\r\n                        try {\r\n                            response.form.properties.editable = \"False\";\r\n\r\n                            var transformGridDataToReadOnly = function(_data) {\r\n                                if (_data == null) {\r\n                                    return _data;\r\n                                }\r\n                                if (_data.hasOwnProperty('type') && _data.type == 'grid') {\r\n                                    _data.id = data.id + \"-print\";\r\n                                    _data.allowAdd = \"False\";\r\n                                    _data.allowDelete = \"False\";\r\n                                    _data.allowEdit = \"False\";\r\n                                    _data.allowGrouping = \"False\";\r\n                                    _data.allowMore = \"False\";\r\n                                    _data.allowSearch = \"False\";\r\n                                } else {\r\n                                    $.each(data, function(key, value) {\r\n                                        if (typeof (value) == 'object') {\r\n                                            _data[key] = transformGridDataToReadOnly(_data[key]);\r\n                                        }\r\n                                    });\r\n                                }\r\n                                return _data;\r\n                            };\r\n                            response = transformGridDataToReadOnly(response);\r\n                        } catch (e) {\r\n                        }\r\n                    }\r\n\r\n                    return response;\r\n                });\r\n        },\r\n        /*\r\n         *   Gets a search form data\r\n         *   Returns a promise of the data being retrieved\r\n         */\r\n        getSearchFormData: function(params) {\r\n            var self = this;\r\n\r\n            // Define data\r\n            params = params || {};\r\n            var data = {};\r\n            data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"SEARCHFORM\";\r\n            if (params.xpath)\r\n                data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpath\"] = params.xpath;\r\n            if (params.idRender)\r\n                data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\r\n            if (params.xpathContext)\r\n                data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\r\n            if (params.idSearchForm)\r\n                data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"searchForm\"] = params.idSearchForm;\r\n            if (params.idPageCache)\r\n                data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\r\n\r\n            // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\r\n            if (params.prepare)\r\n                return data;\r\n\r\n            // Call ajax and returns promise\r\n            return $.ajax({\r\n                url: params.url || self.serviceLocator.getUrl(\"render-search-form-get-data\"),\r\n                data: data,\r\n                type: \"POST\",\r\n                dataType: \"json\",\r\n                serviceType: \"SEARCHFORM\"\r\n            });\r\n        },\r\n\r\n        processDataValues: function(data) {\r\n            var o;\r\n            data = $.extend(true, {}, data);\r\n            for (o in data) {\r\n                if (data.hasOwnProperty(o) && $.type(data[o]) == \"object\") {\r\n                    // for search\r\n                    if (data[o].hasOwnProperty(\"id\")) {\r\n                        data[o] = data[o].id;\r\n                    }\r\n                }\r\n            }\r\n            return data;\r\n        },\r\n        /*\r\n         *   Sends a form action to the server\r\n         */\r\n        submitData: function(params) {\r\n            var self = this;\r\n\r\n            // Define data\r\n            data = self.resolveData(params.data || {}, params.xpathContext);\r\n            data = self.processDataValues(data);\r\n\r\n            data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = params.action;\r\n\r\n            // Fill optional parameters\r\n            params = params || {};\r\n            if (params.xpath)\r\n                data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpath\"] = params.xpath;\r\n            if (params.idRender)\r\n                data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\r\n            if (params.xpathContext)\r\n                data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\r\n            if (params.idPageCache)\r\n                data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\r\n            if (params.guidEntity)\r\n                data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"guidEntity\"] = params.guidEntity;\r\n            if (params.contexttype)\r\n                data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = params.contexttype;\r\n            if (params.transitions)\r\n                data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"transitions\"] = params.transitions;\r\n            if (params.surrogatekey)\r\n                data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"surrogateKey\"] = params.surrogatekey;\r\n            if (params.forcePlanCompletion)\r\n                data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"forcePlanCompletion\"] = params.forcePlanCompletion;\r\n\r\n            /* if (params.isActionStartForm)\r\n             data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"isActionStartForm\"] = params.isActionStartForm;\r\n             */\r\n            var actionType = params.action.toString().toUpperCase();\r\n\r\n            // Log submit data\r\n            bizagi.debug(\"Data sent\", data);\r\n\r\n            // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\r\n            if (params.prepare)\r\n                return data;\r\n\r\n            // Call ajax and returns promise\r\n            return $.ajax({\r\n                url: params.url || self.serviceLocator.getUrl(\"form-submit-data\"),\r\n                data: data,\r\n                type: \"POST\",\r\n                dataType: \"json\",\r\n                serviceType: actionType\r\n            });\r\n        },\r\n        /*\r\n         * Get data processing xpathcontext\r\n         */\r\n        resolveData: function(data, xpathContext) {\r\n            var name, newName, value;\r\n            if (!$.isEmptyObject(data) && xpathContext) {\r\n                if (xpathContext.search(/\\[id=\\d+\\]/) !== -1) {\r\n                    for (name in data) {\r\n                        if (name.search(/\\[id=\\d+\\]/) !== -1 && xpathContext == name.substr(0, name.search(/\\]/) + 1)) {\r\n                            newName = name.substr(name.search(/\\]/) + 2);\r\n                            value = data[name];\r\n                            data[newName] = value;\r\n                            delete data[name];\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            return data;\r\n        },\r\n        /*\r\n         *   Fetch a property from the server\r\n         *   Params:\r\n         *   -   xpath\r\n         *   -   idRender\r\n         *   -   xpathContext\r\n         *   -   property\r\n         */\r\n        getPropertyData: function(params) {\r\n            var self = this;\r\n\r\n            // Define data\r\n            var data = params.extra || {};\r\n            data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"PROCESSPROPERTYVALUE\";\r\n            data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpath\"] = params.xpath;\r\n            data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\r\n            data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\r\n            data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\r\n            data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"propertyName\"] = params.property;\r\n\r\n            if (params.sessionId)\r\n                data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"sessionId\"] = params.sessionId;\r\n            if (params.contexttype)\r\n                data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = params.contexttype;\r\n            if (params.guidentity)\r\n                data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"guidEntity\"] = params.guidentity;\r\n            if (params.surrogatekey)\r\n                data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"surrogateKey\"] = params.surrogatekey;\r\n            if (params.pxpath)\r\n                data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"xpath\"] = params.pxpath;\r\n            if (params.prows)\r\n                data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"rows\"] = params.prows;\r\n            if (params.ppage)\r\n                data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"page\"] = params.ppage;\r\n            if (params.pfilter != undefined && params.pfilter != null)\r\n                data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"filter\"] = params.pfilter;\r\n            /*else\r\n             data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"filter\"] = \"\";*/\r\n            if (params.psort != undefined && params.psort != null)\r\n                data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"sort\"] = params.psort;\r\n            if (params.porder)\r\n                data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"order\"] = params.porder;\r\n            if (params.pcaseId)\r\n                data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"caseId\"] = params.pcaseId;\r\n            if (params.pguidEntity)\r\n                data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"guidEntity\"] = params.pguidEntity;\r\n            if (params.psurrogatedKey) {\r\n                data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"surrogatedKey\"] = params.psurrogatedKey;\r\n            }\r\n            if (params.pactionXpath) {\r\n                data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"actionXpath\"] = params.pactionXpath;\r\n            }\r\n            if (params.ptemplateGuid) {\r\n                data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"templateGuid\"] = params.ptemplateGuid;\r\n            }\r\n            if (params.pparameters) {\r\n                data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"parameters\"] = params.pparameters;\r\n            }\r\n\r\n            // Log submit data\r\n            bizagi.debug(\"Property refresh for '\" + params.xpath + \"'\", data);\r\n\r\n            // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\r\n            if (params.prepare)\r\n                return data;\r\n\r\n            // Call ajax and returns promise\r\n            // TODO: change REST library in order to support extra HTTP parameters\r\n            // Please be careful with dataType parameter\r\n            return $.ajax({\r\n                url: params.url || self.serviceLocator.getUrl(\"render-property-refresh\"),\r\n                data: data,\r\n                type: \"POST\",\r\n                dataType: params.dataType || \"json\",\r\n                serviceType: \"PROCESSPROPERTYVALUE\",\r\n                beforeSend: function(xhr, status) {\r\n                    bizagi.multiactionConnection = bizagi.multiactionConnection || [];\r\n                    bizagi.multiactionConnection.push(xhr);\r\n                }\r\n            });\r\n\r\n        },\r\n        /*\r\n         *   Refresh the data property from the server\r\n         *   Params:\r\n         *   -   xpath\r\n         *   -   idRender\r\n         *   -   xpathContext\r\n         */\r\n        getData: function(params) {\r\n            return this.getPropertyData($.extend(params, {\r\n                property: \"data\"\r\n            }));\r\n        },\r\n        /*\r\n         *   Refresh the data property from the server\r\n         *   This version is to fetch search data\r\n         *   Params:\r\n         *   -   xpath\r\n         *   -   idRender\r\n         *   -   xpathContext\r\n         *   -   term\r\n         */\r\n        getSearchData: function(params) {\r\n            var self = this;\r\n            params.extra = params.extra || {};\r\n            params.extra[self.Class.BA_ACTION_PARAMETER_PREFIX + \"term\"] = params.term;\r\n\r\n            return this.getPropertyData($.extend(params, {\r\n                property: \"data\"\r\n            }));\r\n        },\r\n\r\n        /*\r\n         * Refresh tha data property from the server\r\n         * Params:\r\n         *   -   collapsestate\r\n         */\r\n        getCollapseData: function(params) {\r\n            var self = this;\r\n            params.extra = params.extra || {};\r\n\r\n            params.extra[self.Class.BA_ACTION_PARAMETER_PREFIX + \"collapseState\"] = params.collapseState;\r\n\r\n            return this.getPropertyData($.extend(params, {\r\n                property: \"collapseState\"\r\n            }));\r\n        },\r\n\r\n        /*\r\n         *   Refresh the data property from the server\r\n         *   This version is to fetch grid data\r\n         *   Params:\r\n         *   -   xpath\r\n         *   -   idRender\r\n         *   -   xpathContext\r\n         *   -   sort\r\n         *   -   page\r\n         *   -   rows\r\n         */\r\n        getGridData: function(params) {\r\n            var self = this;\r\n            params.extra = params.extra || {};\r\n\r\n            params.extra[self.Class.BA_ACTION_PARAMETER_PREFIX + \"sort\"] = params.sort;\r\n            params.extra[self.Class.BA_ACTION_PARAMETER_PREFIX + \"order\"] = params.order;\r\n            params.extra[self.Class.BA_ACTION_PARAMETER_PREFIX + \"page\"] = params.page;\r\n            params.extra[self.Class.BA_ACTION_PARAMETER_PREFIX + \"rows\"] = params.rows;\r\n            params.extra[self.Class.BA_ACTION_PARAMETER_PREFIX + \"searchFilter\"] = params.searchFilter;\r\n            params.extra[self.Class.BA_ACTION_PARAMETER_PREFIX + \"value\"] = params.value;\r\n\r\n            return this.getPropertyData($.extend(params, {\r\n                property: \"data\"\r\n            }));\r\n        },\r\n\r\n        getGridDataExclusivesSelected: function(params) {\r\n            var self = this;\r\n            params.extra = params.extra || {};\r\n            params.extra[self.Class.BA_ACTION_PARAMETER_PREFIX + \"rows\"] = params.rows;\r\n            params.extra[self.Class.BA_ACTION_PARAMETER_PREFIX + \"value\"] = params.value;\r\n            params.extra[self.Class.BA_ACTION_PARAMETER_PREFIX + \"xpathfilter\"] = params.xpathfilter;\r\n            return this.getPropertyData($.extend(params, {\r\n                property: \"exclusivesSelected\"\r\n            }));\r\n        },\r\n\r\n        /*\r\n         *   Returns the upload plugin cancel image\r\n         */\r\n        getUploadCancelImage: function() {\r\n            return bizagi.services.ajax.pathToBase + this.serviceLocator.getUrl(\"render-upload-cancel-image\");\r\n        },\r\n        /*\r\n         *   Returns the upload file url for each file\r\n         */\r\n        getUploadFileUrl: function(params) {\r\n            var self = this;\r\n            var url = this.serviceLocator.getUrl(\"render-upload-data-url\");\r\n            var data = {};\r\n            data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"PROCESSPROPERTYVALUE\";\r\n            data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"propertyName\"] = \"fileContent\";\r\n            data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpath\"] = params.xpath;\r\n            data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\r\n            data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\r\n            data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\r\n            data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"fileId\"] = params.fileId;\r\n            data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"sessionId\"] = params.sessionId;\r\n            (params.contexttype) ? data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = params.contexttype : \"\";\r\n            return self.verifyPathToBase(bizagi.services.ajax.pathToBase, url) + \"?\" + jQuery.param(data) + \"&xsrf=\" + bizagi.getXSRFToken();\r\n        },\r\n\r\n        getUploadFileEntityUrl: function(params) {\r\n            var self = this;\r\n            var url = this.serviceLocator.getUrl(\"render-upload-data-url\");\r\n            var data = {};\r\n\r\n            data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"PROCESSPROPERTYVALUETEMPLATE\";\r\n            data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"propertyName\"] = \"fileContent\";\r\n            data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpath\"] = params.xpath;\r\n            data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"fileId\"] = params.fileId;\r\n            if (params.isContextContainerWidgetRender) {\r\n                data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\r\n                data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\r\n                data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\r\n                data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"sessionId\"] = params.sessionId;\r\n                data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"xpathactions\"] = params.xpathActions;\r\n            } else {\r\n                data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"surrogateKey\"] = params.surrogatekey;\r\n                data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"guidEntity\"] = params.guidentity;\r\n            }\r\n\r\n            return self.verifyPathToBase(bizagi.services.ajax.pathToBase, url) + \"?\" + jQuery.param(data) + \"&xsrf=\" + bizagi.getXSRFToken();\r\n        },\r\n\r\n        /*\r\n         *   Returns the upload add url\r\n         */\r\n        getUploadAddUrl: function() {\r\n            var self = this;\r\n            var url = this.serviceLocator.getUrl(\"render-upload-add-url\");\r\n            var data = {};\r\n            data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"ADDFILE\";\r\n\r\n            return self.verifyPathToBase(bizagi.services.ajax.pathToBase, url) + \"?\" + jQuery.param(data);\r\n        },\r\n        /*\r\n         *   Returns the upload add url\r\n         */\r\n        getUploadAddFileUrl: function(isUserPreferences) {\r\n            var self = this;\r\n            var url = this.serviceLocator.getUrl(\"form-submit-data-upload\");\r\n            var data = {};\r\n\r\n            data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = (isUserPreferences === true) ? \"SAVEUSERIMAGE\" : \"savefile\";\r\n\r\n            return self.verifyPathToBase(bizagi.services.ajax.pathToBase, url) + \"?\" + jQuery.param(data);\r\n        },\r\n\r\n        deleteImage: function(params) {\r\n            var self = this;\r\n\r\n            var data = params.extra || {};\r\n            data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"DELETEUSERIMAGE\";\r\n            data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpath\"] = params.xpath;\r\n            data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\r\n            data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\r\n            data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\r\n            (params.contexttype) ? data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = params.contexttype : \"\";\r\n\r\n            // Log submit data\r\n            bizagi.debug(\"Removing image '\" + params.xpath + \"'\", data);\r\n\r\n            // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\r\n            if (params.prepare)\r\n                return data;\r\n\r\n            // Call ajax and returns promise\r\n            return $.ajax({\r\n                url: params.url || self.serviceLocator.getUrl(\"render-upload-delete-url\"),\r\n                data: data,\r\n                type: \"POST\",\r\n                dataType: \"json\"\r\n            });\r\n        },\r\n\r\n        /*\r\n         *   Returns the upload add url\r\n         */\r\n        deleteUploadFile: function(params) {\r\n            var self = this;\r\n\r\n            // Define data\r\n            var data = params.extra || {};\r\n            data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"REMOVERELATION\";\r\n            data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpath\"] = params.xpath;\r\n            data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\r\n            data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\r\n            data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\r\n            (params.contexttype) ? data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = params.contexttype : \"\";\r\n\r\n            // Log submit data\r\n            bizagi.debug(\"Removing file in upload '\" + params.xpath + \"'\", data);\r\n\r\n            // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\r\n            if (params.prepare)\r\n                return data;\r\n\r\n            // Call ajax and returns promise\r\n            return $.ajax({\r\n                url: params.url || self.serviceLocator.getUrl(\"render-upload-delete-url\"),\r\n                data: data,\r\n                type: \"POST\",\r\n                dataType: \"json\"\r\n\r\n            });\r\n        },\r\n        /*\r\n         * Return file meta data\r\n         */\r\n        getECMMetadata: function(params) {\r\n            var self = this;\r\n\r\n            // Define data\r\n            var data = params.extra || {};\r\n            data.action = \"getECMMetadata\";\r\n            data.idFileUpload = params.idFileUpload;\r\n            data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\r\n            data.xpathContext = params.xpathContext;\r\n            data.xPath = params.xPath;\r\n            data.idAttrib = params.idAttrib;\r\n            if (params.sessionId) {\r\n                data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"sessionId\"] = params.sessionId;\r\n            }\r\n            // Log submit data\r\n            bizagi.debug(\"Get file metadata '\" + params.xPath + \"'\", data);\r\n\r\n            // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\r\n            if (params.prepare)\r\n                return data;\r\n\r\n            // Call ajax and returns promise\r\n            return $.ajax({\r\n                url: params.url || self.serviceLocator.getUrl(\"render-ecm-upload-url\"),\r\n                data: data,\r\n                type: \"POST\",\r\n                dataType: \"json\",\r\n                interceptor: {\r\n                    intercept: true,\r\n                    source: \"rendering_\" + self.guid,\r\n                }\r\n            });\r\n\r\n        },\r\n        /*\r\n         * Checkout a file\r\n         **/\r\n        checkOutFile: function(params) {\r\n            var self = this;\r\n\r\n            // Define data\r\n            var data = params.extra || {};\r\n            data.action = \"checkOutFile\";\r\n            data.idFileUpload = params.idFileUpload;\r\n            data.xPath = params.xPath;\r\n            data.idAttrib = params.idAttrib;\r\n            data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\r\n            data.xpathContext = params.xpathContext;\r\n\r\n\r\n            // Log submit data\r\n            bizagi.debug(\"file checkout '\" + params.xPath + \"'\", data);\r\n\r\n            // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\r\n            if (params.prepare)\r\n                return data;\r\n\r\n            // Call ajax and returns promise\r\n            return $.ajax({\r\n                url: params.url || self.serviceLocator.getUrl(\"render-ecm-upload-url\"),\r\n                data: data,\r\n                type: \"POST\",\r\n                dataType: \"json\"\r\n            });\r\n        },\r\n        /*\r\n         * cancelCheckOut\r\n         **/\r\n        cancelCheckOut: function(params) {\r\n            var self = this;\r\n\r\n            // Define data\r\n            var data = params.extra || {};\r\n            data.action = \"cancelCheckOut\";\r\n            data.idFileUpload = params.idFileUpload;\r\n            data.xPath = params.xPath;\r\n            data.idAttrib = params.idAttrib;\r\n            data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\r\n            data.xpathContext = params.xpathContext;\r\n\r\n            // Log submit data\r\n            bizagi.debug(\"file checkout '\" + params.xPath + \"'\", data);\r\n\r\n            // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\r\n            if (params.prepare)\r\n                return data;\r\n\r\n            // Call ajax and returns promise\r\n            return $.ajax({\r\n                url: params.url || self.serviceLocator.getUrl(\"render-ecm-upload-url\"),\r\n                data: data,\r\n                type: \"POST\",\r\n                dataType: \"json\"\r\n            });\r\n        },\r\n        /*\r\n         * Checkout a file\r\n         **/\r\n        deleteECMFile: function(params) {\r\n            var self = this;\r\n\r\n            // Define data\r\n            var data = params.extra || {};\r\n            data.action = \"delete\";\r\n            data.idFileUpload = params.idFileUpload;\r\n            data.xPath = params.xPath;\r\n            data.idAttrib = params.idAttrib;\r\n            data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\r\n            data.xpathContext = params.xpathContext;\r\n\r\n            // Log submit data\r\n            bizagi.debug(\"delete file'\" + params.xPath + \"'\", data);\r\n\r\n            // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\r\n            if (params.prepare)\r\n                return data;\r\n\r\n            // Call ajax and returns promise\r\n            return $.ajax({\r\n                url: params.url || self.serviceLocator.getUrl(\"render-ecm-upload-url\"),\r\n                data: data,\r\n                type: \"POST\",\r\n                dataType: \"json\"\r\n            });\r\n        },\r\n        /*\r\n         *  Update ECM file content\r\n         **/\r\n        updateECMFileContent: function(params) {\r\n            var self = this;\r\n\r\n            // Define data\r\n            var data = params.extra || {};\r\n            data.action = \"updateECMFileContent\";\r\n            data.idFileUpload = params.idFileUpload;\r\n            data.xPath = params.xPath;\r\n            data.idAttrib = params.idAttrib;\r\n\r\n            data.metaValues = params.metaValues;\r\n            data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\r\n            data.xpathContext = params.xpathContext;\r\n\r\n            // Log submit data\r\n            bizagi.debug(\"Update file content '\" + params.xPath + \"'\", data);\r\n\r\n            // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\r\n            if (params.prepare)\r\n                return data;\r\n\r\n            // Call ajax and returns promise\r\n            return $.ajax({\r\n                url: params.url || self.serviceLocator.getUrl(\"render-ecm-upload-url\"),\r\n                data: data,\r\n                type: \"POST\",\r\n                dataType: \"json\"\r\n            });\r\n        },\r\n        /*\r\n         *  Update file content\r\n         **/\r\n        updateECMMetadata: function(params) {\r\n            var self = this;\r\n\r\n            // Define data\r\n            var data = params.extra || {};\r\n            data.action = \"updateECMMetadata\";\r\n            data.idFileUpload = params.idFileUpload;\r\n            data.xPath = params.xPath;\r\n            data.idAttrib = params.idAttrib;\r\n\r\n            data.metaValues = params.metaValues;\r\n            data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\r\n            data.xpathContext = params.xpathContext;\r\n\r\n            // Log submit data\r\n            bizagi.debug(\"Update file meta data '\" + params.xPath + \"'\", data);\r\n\r\n            // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\r\n            if (params.prepare)\r\n                return data;\r\n\r\n            // Call ajax and returns promise\r\n            return $.ajax({\r\n                url: params.url || self.serviceLocator.getUrl(\"render-ecm-upload-url\"),\r\n                data: data,\r\n                type: \"POST\",\r\n                dataType: \"json\"\r\n            });\r\n        },\r\n        getFileProperties: function(params) {\r\n            var self = this;\r\n\r\n            // Define data\r\n            var data = params.extra || {};\r\n            data.action = \"getFileProperties\";\r\n            data.idFileUpload = params.idFileUpload;\r\n            data.xPath = params.xPath;\r\n            data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\r\n            data.xpathContext = params.xpathContext;\r\n\r\n            // Log submit data\r\n            bizagi.debug(\"Get file properties '\" + params.xPath + \"'\", data);\r\n\r\n            // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\r\n            if (params.prepare)\r\n                return data;\r\n\r\n            // Call ajax and returns promise\r\n            return $.ajax({\r\n                url: params.url || self.serviceLocator.getUrl(\"render-ecm-upload-url\"),\r\n                data: data,\r\n                type: \"POST\",\r\n                dataType: \"json\",\r\n                interceptor: {\r\n                    intercept: true,\r\n                    source: \"rendering_\" + self.guid,\r\n                }\r\n            });\r\n        },\r\n        uploadECMFile: function(params) {\r\n            var self = this;\r\n\r\n            // Define data\r\n            var data = params.extra || {};\r\n            data.action = \"uploadECMFile\";\r\n            data.fileUpload = params.fileUpload; // Content of file\r\n            data.xPath = params.xPath;\r\n\r\n            data.idAttrib = params.idAttrib;\r\n            data.fileName = params.fileName;\r\n            data.metaValues = params.metaValues;\r\n            data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\r\n            data.xpathContext = params.xpathContext;\r\n\r\n\r\n            // Log submit data\r\n            bizagi.debug(\"Upload ECM file '\" + params.xPath + \"'\", data);\r\n\r\n            // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\r\n            if (params.prepare)\r\n                return data;\r\n\r\n            // Call ajax and returns promise\r\n            return $.ajax({\r\n                url: params.url || self.serviceLocator.getUrl(\"render-ecm-upload-url\"),\r\n                data: data,\r\n                type: \"POST\",\r\n                dataType: \"json\"\r\n            });\r\n        },\r\n        getECMFileUrl: function(params) {\r\n            var self = this;\r\n            var url = params.url || self.serviceLocator.getUrl(\"render-ecm-upload-url\") + \"File\";\r\n\r\n            // Define data\r\n            var data = params.extra || {};\r\n\r\n            data.action = \"viewECMFile\";\r\n            data.idFileUpload = params.idFileUpload;\r\n            data.xPath = params.xPath;\r\n            data.idAttrib = params.idAttrib;\r\n\r\n            data.fileName = params.fileName;\r\n            data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\r\n            data.xpathContext = params.xpathContext;\r\n            if (params.sessionId) {\r\n                data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"sessionId\"] = params.sessionId;\r\n            }\r\n            if (params.p_sessionId) {\r\n                data.p_sessionId = params.p_sessionId;\r\n            }\r\n\r\n\r\n            // Log submit data\r\n            bizagi.debug(\"View uploaded file '\" + params.xPath + \"'\", data);\r\n\r\n            return self.verifyPathToBase(bizagi.services.ajax.pathToBase, url) + \"?\" + jQuery.param(data) + \"&xsrf=\" + bizagi.getXSRFToken();\r\n        },\r\n        /*\r\n         *\r\n         */\r\n        isFileOnECM: function(params) {\r\n            var self = this;\r\n\r\n            // Define data\r\n            var data = {};\r\n            data[\"action\"] = \"isFileOnECM\";\r\n            data[\"idUpload\"] = params.idUpload;\r\n\r\n            // Call ajax and returns promise\r\n            return $.read(self.serviceLocator.getUrl(\"render-ecm-upload-url\"), data);\r\n        },\r\n        /*\r\n         *   Start a grid record edition\r\n         */\r\n        editGridRecord: function(params) {\r\n            var self = this;\r\n\r\n            // Define data\r\n            var data = params.extra || {};\r\n\r\n            data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"EDITRELATION\";\r\n            data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpath\"] = params.xpath;\r\n            data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\r\n            data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\r\n            data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\r\n\r\n            if (params.contexttype) {\r\n                data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = params.contexttype;\r\n            }\r\n\r\n            // Log submit data\r\n            bizagi.debug(\"Sending edit request for relation '\" + params.xpath + \"'\", data);\r\n\r\n            // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\r\n            if (params.prepare)\r\n                return data;\r\n\r\n            // Call ajax and returns promise\r\n            return $.ajax({\r\n                url: params.url || self.serviceLocator.getUrl(\"render-grid-edit-url\"),\r\n                data: data,\r\n                type: \"POST\",\r\n                dataType: \"json\",\r\n                serviceType: \"EDITRELATION\"\r\n            });\r\n        },\r\n        /*\r\n         *   Sends a grid request to add a new row\r\n         *   The server returns the new row in json\r\n         */\r\n        addGridRecord: function(params) {\r\n            var self = this;\r\n\r\n            // Define data\r\n            var data = params.extra || {};\r\n\r\n            data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"ADDRELATION\";\r\n            data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpath\"] = params.xpath;\r\n            data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\r\n            data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\r\n            if (params.contexttype) {\r\n                data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = params.contexttype;\r\n            }\r\n            data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\r\n\r\n            // Log submit data\r\n            bizagi.debug(\"Sending add request for grid '\" + params.xpath + \"'\", data);\r\n\r\n\r\n            // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\r\n            if (params.prepare)\r\n                return data;\r\n\r\n            // Call ajax and returns promise\r\n            return $.ajax({\r\n                url: params.url || self.serviceLocator.getUrl(\"render-grid-add-url\"),\r\n                data: data,\r\n                type: \"POST\",\r\n                dataType: \"json\",\r\n                serviceType: \"ADDRELATION\"\r\n            });\r\n        },\r\n        /*\r\n         *   Sends a grid request to add a new row, and sending the data at the same time\r\n         *   The server returns the new row in json\r\n         */\r\n        addGridRecordData: function(params) {\r\n            var self = this;\r\n\r\n            // Define data\r\n            var data = params.extra || {};\r\n\r\n            data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"ADDRELATIONWITHDATA\";\r\n            data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpath\"] = params.xpath;\r\n            data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\r\n            data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\r\n            data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\r\n            if (params.contexttype) {\r\n                data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = params.contexttype;\r\n            }\r\n\r\n            // Build data to submit\r\n            var submitData = params.submitData || {};\r\n            for (key in submitData) {\r\n                data[key] = submitData[key];\r\n            }\r\n\r\n            // Log submit data\r\n            bizagi.debug(\"Sending add request for grid '\" + params.xpath + \"'\", data);\r\n\r\n            // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\r\n            if (params.prepare)\r\n                return data;\r\n\r\n            // Call ajax and returns promise\r\n            return $.ajax({\r\n                url: params.url || self.serviceLocator.getUrl(\"render-grid-add-url\"),\r\n                data: data,\r\n                type: \"POST\",\r\n                dataType: \"json\",\r\n                serviceType: \"ADDRELATIONWITHDATA\"\r\n            });\r\n        },\r\n        /*\r\n         *   Submits the grid record data to the server\r\n         */\r\n        saveGridRecord: function(params) {\r\n            var self = this;\r\n\r\n            // Define data\r\n            var data = params.extra || {};\r\n\r\n            data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"SAVERELATION\";\r\n            data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\r\n            data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\r\n\r\n            if (params.contexttype) {\r\n                data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = params.contexttype;\r\n            }\r\n\r\n            data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"disableServerGridValidations\"] = params.disableServerGridValidations || false;\r\n\r\n            // Send the submitted data page cache because it cointains the grid's form page cache\r\n            if (params.submitData.idPageCache) {\r\n                data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.submitData.idPageCache;\r\n                delete params.submitData.idPageCache;\r\n            }\r\n\r\n            var submitData = params.submitData || {};\r\n\r\n            // Build data to submit\r\n            submitData = self.processDataValues(submitData);\r\n\r\n            for (key in submitData) {\r\n                data[key] = submitData[key];\r\n            }\r\n\r\n            // Log submit data\r\n            bizagi.debug(\"Sending save request for grid '\" + params.xpath + \"'\", data);\r\n\r\n            // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\r\n            if (params.prepare)\r\n                return data;\r\n\r\n            // Call ajax and returns promise\r\n            return $.ajax({\r\n                url: params.url || self.serviceLocator.getUrl(\"render-grid-save-url\"),\r\n                data: data,\r\n                type: \"POST\",\r\n                dataType: \"json\",\r\n                serviceType: \"SAVERELATION\"\r\n            });\r\n        },\r\n        /*\r\n         *   Deletes a grid record in the server\r\n         */\r\n        deleteGridRecord: function(params) {\r\n            var self = this;\r\n\r\n            // Define data\r\n            var data = params.extra || {};\r\n\r\n            data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"REMOVERELATION\";\r\n            data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpath\"] = params.xpath;\r\n            data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\r\n            data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\r\n            data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\r\n            if (params.contexttype) {\r\n                data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = params.contexttype;\r\n            }\r\n\r\n            // Log submit data\r\n            bizagi.debug(\"Sending delete request for grid '\" + params.xpath + \"'\", data);\r\n\r\n            // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\r\n            if (params.prepare)\r\n                return data;\r\n\r\n            // Call ajax and returns promise\r\n            return $.ajax({\r\n                url: params.url || self.serviceLocator.getUrl(\"render-grid-save-url\"),\r\n                data: data,\r\n                type: \"POST\",\r\n                dataType: \"json\",\r\n                serviceType: \"REMOVERELATION\"\r\n            });\r\n        },\r\n\r\n        /*\r\n         * Get association flipped status\r\n         */\r\n        getFlipAssociation: function(params) {\r\n            var self = this;\r\n\r\n            // Define data\r\n            var data = params.extra || {};\r\n\r\n            data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"PROCESSPROPERTYVALUE\";\r\n            data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpath\"] = params.xpath;\r\n            data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.id;\r\n            data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"propertyName\"] = \"flipped\";\r\n            data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\r\n            data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\r\n            data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"flipstate\"] = params.flipstate;\r\n            if (params.contexttype) {\r\n                data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = params.contexttype;\r\n            }\r\n\r\n            // Log request data\r\n            bizagi.debug(\"Sending request for flip association control '\" + params.xpath + \"'\", data);\r\n\r\n            // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\r\n            if (params.prepare)\r\n                return data;\r\n\r\n            // Call ajax and returns promise\r\n            return $.ajax({\r\n                url: params.url || self.serviceLocator.getUrl(\"render-property-refresh\"),\r\n                data: data,\r\n                type: \"POST\",\r\n                dataType: \"text\"\r\n            }).pipe(function(response) {\r\n                try {\r\n                    // Try to attempt to parse JSON\r\n                    return bizagi.services.ajax.parseJSON(response);\r\n                } catch (e) {\r\n                    // If JSON is not valid we need to return the original text response\r\n                    return response;\r\n                }\r\n            });\r\n        },\r\n        /*\r\n         *   Cancels an add or edit request for a grid\r\n         */\r\n        rollbackGridAction: function(params) {\r\n            var self = this;\r\n\r\n            // Define data\r\n            var data = params.extra || {};\r\n\r\n            data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"ROLLBACK\";\r\n            data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpath\"] = params.xpath;\r\n            data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\r\n            data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\r\n            data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\r\n\r\n            if (params.contexttype) {\r\n                data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = params.contexttype;\r\n            }\r\n\r\n            // Log submit data\r\n            bizagi.debug(\"Sending rollback request for grid '\" + params.xpath + \"'\", data);\r\n\r\n            // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\r\n            if (params.prepare)\r\n                return data;\r\n\r\n            // Call ajax and returns promise\r\n            return $.ajax({\r\n                url: params.url || self.serviceLocator.getUrl(\"render-grid-rollback-url\"),\r\n                data: data,\r\n                type: \"POST\",\r\n                dataType: \"json\",\r\n                serviceType: \"ROLLBACK\"\r\n            });\r\n        },\r\n        /*\r\n         *   Returns the search render default image\r\n         */\r\n        getSearchDefaultImage: function() {\r\n            return bizagi.services.ajax.pathToBase + this.serviceLocator.getUrl(\"render-search-default-image\");\r\n        },\r\n\r\n        processDataCriteria: function(criteria) {\r\n            var o;\r\n            criteria = $.extend(true, [], criteria);\r\n            for (o in criteria) {\r\n                if (criteria.hasOwnProperty(o) && criteria[o].hasOwnProperty(\"value\") && $.type(criteria[o].value) == \"object\") {\r\n                    // for search\r\n                    if (criteria[o].value.hasOwnProperty(\"id\") && criteria[o].value.hasOwnProperty(\"label\")) {\r\n                        criteria[o].value = criteria[o].value.id;\r\n                    }\r\n                }\r\n            }\r\n            return criteria;\r\n        },\r\n\r\n        /*\r\n         *   Perform entity search in the server\r\n         */\r\n        submitSearch: function(params) {\r\n            var self = this, criteria;\r\n\r\n            // Define data\r\n            var data = params.extra || {};\r\n\r\n            var sort = params.sort && params.sort !== \"\" ? params.sort : \"\";\r\n\r\n            if (params.order && params.order !== \"\" && sort !== \"\")\r\n                sort += \" \" + params.order;\r\n\r\n            data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"SEARCHENTITYFORRENDER\";\r\n            data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\r\n            data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\r\n            data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\r\n            data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"searchForm\"] = params.idSearchForm;\r\n            data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"sort\"] = sort;\r\n            data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"page\"] = params.page;\r\n            data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"pageSize\"] = params.rows;\r\n            data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"searchFilter\"] = params.searchFilter;\r\n\r\n            criteria = self.processDataCriteria(params.criteria);\r\n            data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"searchCriteria\"] = JSON.encode(criteria);\r\n\r\n            // Optional search params\r\n            if (params.allowFullSearch)\r\n                data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"allowFullSearch\"] = params.allowFullSearch;\r\n            if (params.maxRecords)\r\n                data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"maxRowsAllowed\"] = params.maxRecords;\r\n\r\n            // Log submit data\r\n            bizagi.debug(\"Performing advanced search\", data);\r\n\r\n            // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\r\n            if (params.prepare)\r\n                return data;\r\n\r\n            // Call ajax and returns promise\r\n            return $.ajax({\r\n                url: params.url || self.serviceLocator.getUrl(\"render-search-advanced-url\"),\r\n                data: data,\r\n                type: \"POST\",\r\n                dataType: \"json\",\r\n                serviceType: \"SEARCHENTITYFORRENDER\"\r\n            });\r\n        },\r\n\r\n        /*\r\n         *   Submits the stakeholder associated\r\n         */\r\n        associateStakeholder: function(params) {\r\n            var self = this;\r\n\r\n            // Define data\r\n            var data = params.extra || {};\r\n            data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"SAVE\";\r\n            data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\r\n            data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = params.contexttype;\r\n            data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"surrogateKey\"] = params.surrogateKey;\r\n            data[\"associatedUser\"] = params.associatedUser;\r\n            data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"guidEntity\"] = params.guidentity;\r\n\r\n            // Log submit data\r\n            bizagi.debug(\"Property refresh for '\" + params.xpath + \"'\", data);\r\n\r\n            // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\r\n            if (params.prepare)\r\n                return data;\r\n\r\n            // Call ajax and returns promise\r\n            // TODO: change REST library in order to support extra HTTP parameters\r\n            // Please be careful with dataType parameter\r\n            return $.ajax({\r\n                url: params.url || self.serviceLocator.getUrl(\"render-stakeholder-associated\"),\r\n                data: data,\r\n                type: \"POST\",\r\n                dataType: params.dataType || \"json\"\r\n            });\r\n        },\r\n\r\n        /*\r\n         *   Refresh the stakeholder associated list\r\n         */\r\n        refreshAssociateStakeholder: function(params) {\r\n            var self = this;\r\n\r\n            // Define data\r\n            var data = params.extra || {};\r\n            data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"PROCESSPROPERTYVALUE\";\r\n            data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\r\n            data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = params.contexttype;\r\n            data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"propertyName\"] = params.property;\r\n            data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\r\n\r\n            // Log submit data\r\n            bizagi.debug(\"Property refresh for '\" + params.xpath + \"'\", data);\r\n\r\n            // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\r\n            if (params.prepare)\r\n                return data;\r\n\r\n            // Call ajax and returns promise\r\n            // TODO: change REST library in order to support extra HTTP parameters\r\n            // Please be careful with dataType parameter\r\n            return $.ajax({\r\n                url: params.url || self.serviceLocator.getUrl(\"render-stakeholder-associated\"),\r\n                data: data,\r\n                type: \"POST\",\r\n                dataType: params.dataType || \"json\",\r\n                serviceType: \"PROCESSPROPERTYVALUE\"\r\n            });\r\n        },\r\n\r\n        /*\r\n         *   Gets the link to the letter\r\n         */\r\n        getLetterNotEditableUrl: function(params) {\r\n            var self = this;\r\n\r\n            // Define data\r\n            var data = params.extra || {};\r\n\r\n            data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"GETLETTER\";\r\n            data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\r\n            data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpath\"] = params.xpath;\r\n            data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\r\n            data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\r\n\r\n            // Call ajax and returns promise\r\n            var url = params.url || self.serviceLocator.getUrl(\"render-letter-notEditable-url\");\r\n            return self.verifyPathToBase(bizagi.services.ajax.pathToBase, url) + \"?\" + jQuery.param(data);\r\n        },\r\n        /*\r\n         *   Gets the content for editable letters\r\n         */\r\n        getLetterContent: function(params) {\r\n            var self = this;\r\n\r\n            // Define data\r\n            var data = params.extra || {};\r\n\r\n            data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"GETLETTER\";\r\n            data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\r\n            data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpath\"] = params.xpath;\r\n            data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\r\n            data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\r\n\r\n            // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\r\n            if (params.prepare)\r\n                return data;\r\n\r\n            // Call ajax and returns promise\r\n            return $.ajax({\r\n                url: params.url || self.serviceLocator.getUrl(\"render-letter-content-url\"),\r\n                data: data,\r\n                type: \"POST\",\r\n                dataType: \"html\"\r\n            }).pipe(function(response) {\r\n                try {\r\n                    return bizagi.services.ajax.parseJSON(response);\r\n                } catch (e) {\r\n                    return response;\r\n                }\r\n            });\r\n        },\r\n        /*\r\n         *   Get the can generate letter flag\r\n         */\r\n        getCanGenerateLetter: function(params) {\r\n            var self = this;\r\n\r\n            // Define data\r\n            var data = params.extra || {};\r\n\r\n            data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"CANGENERATELETTER\";\r\n            data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\r\n            data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpath\"] = params.xpath;\r\n            data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\r\n            data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\r\n\r\n            // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\r\n            if (params.prepare)\r\n                return data;\r\n\r\n            // Call ajax and returns promise\r\n            return $.ajax({\r\n                url: self.serviceLocator.getUrl(\"render-letter-content-url\"),\r\n                data: data,\r\n                type: \"POST\",\r\n                dataType: \"json\"\r\n            });\r\n        },\r\n        /*\r\n         *   Saves the content for editable letters\r\n         */\r\n        saveLetterContent: function(params) {\r\n            var self = this;\r\n\r\n            // Define data\r\n            var data = params.extra || {};\r\n            data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"UPDATELETTER\";\r\n            data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\r\n            data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpath\"] = params.xpath;\r\n            data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\r\n            data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\r\n\r\n            // Define content\r\n            var content = params.content || \"\";\r\n\r\n            // Define url\r\n            var url = params.url || (self.serviceLocator.getUrl(\"render-letter-save-url\"));\r\n            var fullUrl = url + \"?\" + jQuery.param(data);\r\n\r\n            // Log submit data\r\n            bizagi.debug(\"Save request for letter sent to: \" + fullUrl, content);\r\n\r\n            // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\r\n            if (params.prepare)\r\n                return data;\r\n\r\n            // Call ajax and returns promise\r\n            return $.ajax({\r\n                url: fullUrl,\r\n                data: content,\r\n                type: \"POST\",\r\n                dataType: \"html\"\r\n            });\r\n        },\r\n        /*\r\n         *   Returns the icons path for the letter plugin\r\n         */\r\n        getLetterEditorIconsPath: function() {\r\n            return bizagi.services.ajax.pathToBase + this.serviceLocator.getUrl(\"render-letter-content-icons\");\r\n        },\r\n        /*\r\n         *   Executes a button action in the server\r\n         */\r\n        executeButton: function(params) {\r\n            return this.getPropertyData($.extend(params, {\r\n                property: \"buttonRule\"\r\n            }));\r\n        },\r\n        /*\r\n         *   Executes a fileprint action in the server\r\n         */\r\n        getFilePrintUrl: function(params) {\r\n\r\n            var self = this;\r\n            var url = this.serviceLocator.getUrl(\"render-upload-data-url\");\r\n            var data = {};\r\n            data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"PROCESSPROPERTYVALUE\";\r\n            data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"propertyName\"] = \"data\";\r\n            data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"disposition\"] = params.disposition;\r\n            data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\r\n            data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\r\n            data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"sessionId\"] = params.sessionId;\r\n            data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\r\n            (params.contexttype) ? data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = params.contexttype : \"\";\r\n\r\n            return self.verifyPathToBase(bizagi.services.ajax.pathToBase, url) + \"?\" + jQuery.param(data);\r\n\r\n        },\r\n        /*\r\n         *   Start a link form edition\r\n         */\r\n        editLinkForm: function(params) {\r\n            // Actually it does the same than edit grid records\r\n            return this.editGridRecord(params);\r\n        },\r\n        /*\r\n         *   Saves the content of the link form\r\n         */\r\n        saveLinkForm: function(params) {\r\n            // Actually it does the same than edit grid records\r\n            //return this.saveGridRecord(params);\r\n            var self = this;\r\n\r\n            // Define data\r\n            var data = params.extra || {};\r\n\r\n            data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"SAVEFORMLINKRELATION\";\r\n            data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\r\n            data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\r\n\r\n            if (params.contexttype) {\r\n                data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = params.contexttype;\r\n            }\r\n\r\n            // Send the submitted data page cache because it cointains the grid's form page cache\r\n            if (params.submitData.idPageCache) {\r\n                data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.submitData.idPageCache;\r\n                delete params.submitData.idPageCache;\r\n            }\r\n\r\n            var submitData = params.submitData || {};\r\n\r\n            // Build data to submit\r\n            submitData = self.processDataValues(submitData);\r\n\r\n            for (key in submitData) {\r\n                data[key] = submitData[key];\r\n            }\r\n\r\n            // Log submit data\r\n            bizagi.debug(\"Sending save request for grid '\" + params.xpath + \"'\", data);\r\n\r\n            // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\r\n            if (params.prepare)\r\n                return data;\r\n\r\n            // Call ajax and returns promise\r\n            return $.ajax({\r\n                url: params.url || self.serviceLocator.getUrl(\"render-grid-save-url\"),\r\n                data: data,\r\n                type: \"POST\",\r\n                dataType: \"json\",\r\n                serviceType: \"SAVEFORMLINKRELATION\"\r\n            });\r\n        },\r\n        /*\r\n         *   Rollbacks the link form edition\r\n         */\r\n        rollbackLinkForm: function(params) {\r\n            // Actually it does the same than rollback grid records\r\n            return this.rollbackGridAction(params);\r\n        },\r\n        /*   Commit the link form edition\r\n         */\r\n        commitLinkForm: function(params) {\r\n            // Actually it does the same than rollback grid records\r\n            return this.commitGridAction(params);\r\n        },\r\n        /*   Sends schekpoint action\r\n         */\r\n        sendCheckpoint: function(params) {\r\n            // Actually it does the same than rollback grid records\r\n            return this.sendCheckpointAction(params);\r\n        },\r\n        /*\r\n         *   Loads the userfield definition\r\n         */\r\n        getUserfieldDefinition: function(params) {\r\n            var self = this;\r\n            params = params || {};\r\n\r\n            // Check in deferreds cache\r\n            if (self.userfieldRequests[params.userfield])\r\n                return self.userfieldRequests[params.userfield];\r\n\r\n            // Required params: idCase\r\n            self.userfieldRequests[params.userfield] = $.read(self.serviceLocator.getUrl(\"render-userfield-definition\"),\r\n                {\r\n                    guidUserfield: params.userfield,\r\n                    device: (params.device || \"desktop\")\r\n                }\r\n            );\r\n\r\n            // Return deferred\r\n            return self.userfieldRequests[params.userfield];\r\n        },\r\n        /**\r\n         *  Get render json for one render o container\r\n         *  @param {object} params object with idRender,idPageCache\r\n         */\r\n        refreshControl: function(params) {\r\n            var self = this;\r\n            params = params || {};\r\n\r\n            var data = {};\r\n            data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"REFRESH\";\r\n            data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\r\n            (params.xpathContext) ? data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext : \"\";\r\n            data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\r\n            (params.contexttype) ? data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = params.contexttype : \"\";\r\n            (params.idForm) ? data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idForm\"] = params.idForm : \"\";\r\n\r\n            // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\r\n            if (params.prepare) {\r\n                return data;\r\n            }\r\n\r\n            return $.ajax({\r\n                url: params.url || self.serviceLocator.getUrl(\"form-get-data\"),\r\n                data: data,\r\n                type: \"POST\",\r\n                dataType: \"json\",\r\n                serviceType: \"PARTIALREFRESH\"\r\n            });\r\n        },\r\n        /**\r\n         *  Get render json for one render o container\r\n         *  @param {object} params object with idRender,idPageCache\r\n         */\r\n        refreshGridCell: function(params) {\r\n            var self = this;\r\n            params = params || {};\r\n\r\n            var data = {};\r\n            data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"REFRESHGRIDCELL\";\r\n            data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\r\n            data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"guidcolumn\"] = params.column;\r\n            (params.xpathContext) ? data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext : \"\";\r\n            data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\r\n            data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\r\n            (params.idForm) ? data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idForm\"] = params.idForm : \"\";\r\n            (params.typeRender) ? data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"typeRender\"] = params.typeRender : \"\";\r\n\r\n            // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\r\n            if (params.prepare) {\r\n                return data;\r\n            }\r\n\r\n            return $.ajax({\r\n                url: params.url || self.serviceLocator.getUrl(\"form-get-data\"),\r\n                data: data,\r\n                type: \"POST\",\r\n                dataType: \"json\"\r\n            });\r\n        },\r\n        /**\r\n         * Request to execute rule on server\r\n         * @param {object} params h_pageCacheId, guidrule\r\n         */\r\n        executeRule: function(params) {\r\n            var self = this;\r\n\r\n\r\n            var data = {};\r\n            params = params || {};\r\n\r\n            data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"EXECUTERULE\";\r\n            data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\r\n            data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"guidrule\"] = params.rule || \"\";\r\n            (params.xpathContext) ? data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext : \"\";\r\n            (params.contexttype) ? data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = params.contexttype : \"\";\r\n\r\n            // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\r\n            if (params.prepare) {\r\n                return data;\r\n            }\r\n\r\n            return $.create(self.serviceLocator.getUrl(\"form-submit-data\"), data);\r\n        },\r\n        /**\r\n         * Request to execute interface on server\r\n         * @param {object} params h_pageCacheId, guidinterface\r\n         */\r\n        executeInterface: function(params) {\r\n            var self = this;\r\n            var data = {};\r\n            params = params || {};\r\n\r\n            data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"EXECUTEINTERFACE\";\r\n            data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\r\n            data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"guidinterface\"] = params.interface || \"\";\r\n            data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext || \"\";\r\n\r\n            // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\r\n            if (params.prepare) {\r\n                return data;\r\n            }\r\n\r\n            return $.create(self.serviceLocator.getUrl(\"form-submit-data\"), data);\r\n        },\r\n        /**\r\n         * Request to execute SAP Connecor\r\n         * @param {object} params h_pageCacheId, guidinterface\r\n         */\r\n        executeSAPConnector: function(params) {\r\n            var self = this;\r\n            var data = {};\r\n            params = params || {};\r\n\r\n            data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"EXECUTESAP\";\r\n            data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\r\n            data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"guidsap\"] = params.guidsap || \"\";\r\n            data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext || \"\";\r\n\r\n            // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\r\n            if (params.prepare) {\r\n                return data;\r\n            }\r\n\r\n            return $.create(self.serviceLocator.getUrl(\"form-submit-data\"), data);\r\n        },\r\n        /**\r\n         * Request to execute a Bizagi connector\r\n         * @param params\r\n         * @return {{}}\r\n         */\r\n        executeConnector: function(params) {\r\n            var self = this;\r\n            var data = {};\r\n            params = params || {};\r\n\r\n            data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"EXECUTECONNECTOR\";\r\n            data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\r\n            data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"guidConnector\"] = params.guidConnector || \"\";\r\n            data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext || \"\";\r\n\r\n            // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\r\n            if (params.prepare) {\r\n                return data;\r\n            }\r\n\r\n            return $.create(self.serviceLocator.getUrl(\"form-submit-data\"), data);\r\n        },\r\n        /*\r\n         *   Document Templates generate rest service\r\n         */\r\n        generateDocumentTemplate: function(params) {\r\n            var self = this;\r\n            params = params || {};\r\n            params.append = params.append ? params.append : false;\r\n\r\n            return $.create(\r\n                self.serviceLocator.getUrl(\"render-document-generate\"),\r\n                {\r\n                    h_pageCacheId: params.idPageCache,\r\n                    contextXpath: params.xpathcontext,\r\n                    groupMappingId: params.groupMapping,\r\n                    xpathAttribute: params.xpath,\r\n                    append: params.append,\r\n                    controlId: params.id\r\n                }\r\n            );\r\n        },\r\n        /*\r\n         *   Document Templates generate rest service\r\n         */\r\n        getAllDocumentsDownloadUrl: function(params) {\r\n            var self = this;\r\n            var url = this.serviceLocator.getUrl(\"render-document-generateAllDocuments\");\r\n            var data = {};\r\n            data[\"h_pageCacheId\"] = params.idPageCache;\r\n            data[\"contextXpath\"] = params.xpathContext;\r\n            data[\"xpathAttribute\"] = params.xpath;\r\n            data[\"idCase\"] = params.idCase;\r\n            data[\"idWorkItem\"] = params.idWorkItem;\r\n            data[\"p_sessionId\"] = params.sessionId;\r\n\r\n            return self.verifyPathToBase(bizagi.services.ajax.pathToBase, url) + \"?\" + jQuery.param(data) + \"&xsrf=\" + bizagi.getXSRFToken();\r\n\r\n        },\r\n\r\n\r\n        getCaseNumber: function(params) {\r\n            var self = this;\r\n            //this function use sendEMail\r\n            //and not possible use dat ain ajax\r\n            //this is workaround (rhonyp)\r\n            return $.ajax({\r\n                url: self.serviceLocator.getUrl(\"case-handler-getCaseSummary\").replace(\"{idCase}\", params.idCase) + \"?eventAsTasks=false&onlyUserWorkItems=true&mobileDevice=\" + bizagi.isMobile(),\r\n                type: \"GET\",\r\n                dataType: \"json\"\r\n            });\r\n        },\r\n\r\n        getCaseAssignees: function(params) {\r\n            var self = this;\r\n            params = params || {};\r\n\r\n            // Required params: idCase\r\n            return $.read(\r\n                self.serviceLocator.getUrl(\"case-handler-getCaseAssignees\"), {\r\n                    idCase: params.idCase\r\n                }\r\n            ).pipe(function(response) {\r\n                    return response;\r\n                });\r\n        },\r\n\r\n        getWorkitems: function(params) {\r\n            var self = this;\r\n            params = params || {};\r\n\r\n            return $.read(self.serviceLocator.getUrl(\"case-handler-getWorkItems\"), {\r\n                idCase: params.idCase,\r\n                onlyUserWorkItems: params.onlyUserWorkItems || \"\"\r\n            });\r\n        },\r\n        /*\r\n         *   Executes a grid export action in the server\r\n         */\r\n        getGridExportUrl: function(params) {\r\n\r\n            var self = this,\r\n                url = this.serviceLocator.getUrl(\"render-upload-data-url\"),\r\n                data = {};\r\n\r\n            data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"PROCESSPROPERTYVALUE\";\r\n            data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"propertyName\"] = params.exportType; //\"data\";\r\n            data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"disposition\"] = params.disposition;\r\n            data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\r\n            data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\r\n            data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"sort\"] = params.sort;\r\n            data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"sessionId\"] = params.sessionId;\r\n            data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"idForm\"] = params.idForm;\r\n            data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\r\n            (params.contexttype) ? data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = params.contexttype : \"\";\r\n\r\n            return self.verifyPathToBase(bizagi.services.ajax.pathToBase, url) + \"?\" + jQuery.param(data) + \"&xsrf=\" + bizagi.getXSRFToken();\r\n        },\r\n\r\n        /*\r\n         * Executes a send email action in the server\r\n         */\r\n        sendEmail: function(params) {\r\n            var self = this;\r\n            params = params || {};\r\n\r\n            var data = {};\r\n            data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"PROCESSPROPERTYVALUE\";\r\n            data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\r\n            data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpath\"] = params.xpath;\r\n            data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\r\n            data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"propertyName\"] = params.property || \"sendEmail\";\r\n            (params.xpathContext) ? data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext : \"\";\r\n\r\n            // Email parameters\r\n            data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"to\"] = params.to;\r\n            data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"subject\"] = params.subject;\r\n            data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"message\"] = params.message;\r\n            data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"selected\"] = JSON.encode(params.selected);\r\n\r\n            // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\r\n            if (params.prepare) {\r\n                return data;\r\n            }\r\n\r\n            var url = params.url || self.serviceLocator.getUrl(\"form-get-data\");\r\n\r\n            return $.create(url, data);\r\n        },\r\n\r\n        /*\r\n         * Request to invalidates page cache in server, since it is no needed anymore\r\n         */\r\n        invalidatePageCache: function(params) {\r\n            var self = this;\r\n\r\n            // Define data\r\n            var data = params.extra || {};\r\n\r\n            data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"INVALIDATEPAGECACHE\";\r\n            data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\r\n\r\n            // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\r\n            if (params.prepare)\r\n                return data;\r\n\r\n            // Call ajax and returns promise\r\n            return $.ajax({\r\n                url: params.url || self.serviceLocator.getUrl(\"form-submit-data\"),\r\n                data: data,\r\n                type: \"POST\",\r\n                dataType: \"json\",\r\n                serviceType: \"INVALIDATEPAGECACHE\"\r\n            });\r\n        },\r\n\r\n        /*\r\n         * Search users usign parameters suchs as userName, fullName, domain and organization\r\n         * @params { domain: (string), userName: (string), fullName: (string), organization: (string), page: (int), pageSize: (int) }\r\n         * @return {deferred} ajax object with JSON content\r\n         */\r\n        getUsersList: function(params) {\r\n            var self = this;\r\n\r\n            return $.read(self.serviceLocator.getUrl(\"admin-getUsersList\"), params);\r\n        },\r\n        /*\r\n         * Search users for preferences usign parameters suchs as userName, fullName, domain and organization\r\n         * @params { domain: (string), userName: (string), fullName: (string), organization: (string), page: (int), pageSize: (int) }\r\n         * @return {deferred} ajax object with JSON content\r\n         */\r\n        getUsersListFromPreferences: function(params) {\r\n            return $.read(this.serviceLocator.getUrl(\"admin-getUsersList-FromPreferences\"), params);\r\n        },\r\n\r\n        /*\r\n         * Search users for Stakeholders\r\n         * @params { domain: (string), userName: (string), fullName: (string), organization: (string), page: (int), pageSize: (int) }\r\n         * @return {deferred} ajax object with JSON content\r\n         */\r\n        getUsersListForStakeholders: function(params) {\r\n            return $.read(this.serviceLocator.getUrl(\"admin-getUsersList-ForStakeholders\"), params);\r\n        },\r\n\r\n        /*\r\n         * Search users usign parameters suchs as userName, fullName, domain and organization\r\n         * @params { domain: (string), userName: (string), fullName: (string), organization: (string), page: (int), pageSize: (int) }\r\n         * @return {deferred} ajax object with JSON content\r\n         */\r\n        getUsersForAssignation: function(params) {\r\n            var self = this;\r\n\r\n            return $.read(self.serviceLocator.getUrl(\"admin-getUsersForAssignation\"), params);\r\n        },\r\n\r\n        /**\r\n         * Get Users Creation/Edition Form\r\n         */\r\n        getUsersForm: function(params) {\r\n            var self = this;\r\n            return $.create(self.serviceLocator.getUrl(\"admin-usersform\"), params);\r\n        },\r\n        /**\r\n         *   Return generate Data To Send By Email\r\n         */\r\n        generateDataToSendByEmail: function(params) {\r\n            var self = this;\r\n            params = params || {};\r\n            var data = {\r\n                action: \"GenerateDataToSendByEmail\",\r\n                idUser: params.idUser,\r\n                password: params.password\r\n            };\r\n\r\n            // Call ajax and returns promise\r\n            return $.ajax({\r\n                url: self.serviceLocator.getUrl(\"admin-GenerateDataToSendByEmail\"),\r\n                data: params,\r\n                type: \"POST\",\r\n                dataType: \"json\"\r\n            });\r\n        },\r\n        /**\r\n         * Return generate Send user password Mail\r\n         */\r\n        sendUserEmail: function(params) {\r\n            var self = this;\r\n            params = params || {};\r\n            var data = {\r\n                action: \"SendUserEmail\",\r\n                emailTo: params.eMailTo,\r\n                subject: params.subject,\r\n                body: params.body\r\n            };\r\n            // Call ajax and returns promise\r\n            return $.ajax({\r\n                url: self.serviceLocator.getUrl(\"admin-sendUserEmail\"),\r\n                data: params,\r\n                type: \"POST\",\r\n                dataType: \"json\"\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Get bizagi configuration\r\n         * @param {Function}   type callback function when the file load is succed\r\n         * @return {deferred} ajax object with JSON content\r\n         */\r\n        getConfiguration: function() {\r\n            var self = this;\r\n            var url = self.serviceLocator.getUrl(\"admin-users-config\");\r\n\r\n            return $.read(url);\r\n        },\r\n\r\n        /**\r\n         * Validate if url has 'http' string, in that case is not necesary add the pathToBase prefix\r\n         */\r\n        verifyPathToBase: function(pathToBase, url) {\r\n\r\n            if (url.indexOf(\"http\") != -1 && pathToBase != \"\") {\r\n                return url;\r\n            } else {\r\n                return pathToBase + url;\r\n            }\r\n\r\n        },\r\n\r\n        /**\r\n         * Get template of entity\r\n         * @param params { guid, prepare}\r\n         */\r\n        getTemplate: function(params) {\r\n            var self = this;\r\n            var data = {};\r\n            params = params || {};\r\n\r\n            data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"LOADTEMPLATE\";\r\n            data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = \"entity\";\r\n            data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"guidEntity\"] = params.guid;\r\n            data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"isProcessData\"] = params.forcePersonalizedColumns;\r\n\r\n            if (params.templateType) {\r\n                data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"templatetype\"] = params.templateType;\r\n            }\r\n\r\n            if (params.templateGuid) {\r\n                data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"templateguid\"] = params.templateGuid;\r\n            }\r\n\r\n            if (params.isDefaultTemplate != undefined) {\r\n                data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"isDefaultTemplate\"] = params.isDefaultTemplate;\r\n            }\r\n\r\n            // Fix device type since on mobility there are tablet_ios, tablet_android, smartphone_ios, smartphone_ios\r\n            // and the service recives either tablet or smartphone\r\n            var deviceType = bizagi.util.detectDevice();\r\n            if (bizagi.util.isTabletDevice()) {\r\n                deviceType = \"tablet\";\r\n            } else if (bizagi.util.isSmartphoneDevice()) {\r\n                deviceType = \"mobile\";\r\n            }\r\n\r\n            data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"devicetype\"] = deviceType;\r\n\r\n            // When prepare is true just return data, this feature is used by multiaction service\r\n            if (params.prepare) {\r\n                return data;\r\n            }\r\n\r\n            return $.create(self.serviceLocator.getUrl(\"form-get-data\"), data);\r\n        },\r\n\r\n        /**\r\n         * Chek if an entity has startform\r\n         * @param params\r\n         * @return {*}\r\n         */\r\n        hasStartForm: function(params) {\r\n            var self = this;\r\n            var data = {};\r\n\r\n            if (params.guidWFClass) {\r\n                data.guidWFClass = params.guidWFClass;\r\n            }\r\n\r\n            return $.read(self.serviceLocator.getUrl(\"render-processes-startform\"), data);\r\n        },\r\n\r\n        /**\r\n         * Get the start form of the case\r\n         * @param params\r\n         * @return {*}\r\n         */\r\n        getStartForm: function(params) {\r\n            var self = this;\r\n            var data = {};\r\n\r\n            data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"LOADSTARTFORM\";\r\n            data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"guidprocess\"] = params.guidprocess;\r\n            data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"isActionStartForm\"] = true;\r\n            data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"devicetype\"] = self.deviceType;\r\n            data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"devicecode\"] = self.deviceCode;\r\n\r\n            if (params.idStartScope) {\r\n                data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idStartScope\"] = params.idStartScope;\r\n            }\r\n            if (params.idCase) {\r\n                data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idCase\"] = params.idCase;\r\n            }\r\n            if (params.idStartScope) {\r\n                data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idStartScope\"] = params.idStartScope;\r\n            }\r\n            if (params.idWorkitem) {\r\n                data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idWorkitem\"] = params.idWorkitem;\r\n            }\r\n            if (params.additionalXpaths) {\r\n                data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"additionalXpaths\"] = params.additionalXpaths;\r\n            }\r\n            if (params.surrogatedKey) {\r\n                data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"surrogatedKey\"] = params.surrogatedKey;\r\n            }\r\n            if (params.recordXpath) {\r\n                data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"recordlauncherxpath\"] = params.recordXpath;\r\n            }\r\n            if (params.mappingstakeholders) {\r\n                data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"mappingstakeholders\"] = params.mappingstakeholders;\r\n            }\r\n\r\n            return $.ajax({\r\n                url: self.serviceLocator.getUrl(\"form-get-data\"),\r\n                data: data,\r\n                type: \"POST\",\r\n                dataType: \"json\",\r\n                cache: true\r\n            });\r\n        },\r\n        /*\r\n         *   Start a link form edition\r\n         */\r\n        editActionForm: function(params) {\r\n            // Actually it does the same than edit grid records\r\n            return this.editGridRecord(params);\r\n        },\r\n\r\n        /**\r\n         * Get list of actions in action launcher\r\n         * @param params\r\n         * @return {*}\r\n         */\r\n        getActions: function(params) {\r\n            var self = this;\r\n            var extendParams = $.extend(params, { prepare: true });\r\n\r\n            var data = self.getPropertyData(extendParams) || [];\r\n\r\n            if (params.ptags) {\r\n                data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"tags\"] = params.ptags;\r\n            }\r\n\r\n            if (params.pmaxitems) {\r\n                data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"maxitems\"] = params.pmaxitems;\r\n            }\r\n\r\n            if (params.prepare) {\r\n                return data;\r\n            }\r\n\r\n            return $.ajax({\r\n                url: params.url || self.serviceLocator.getUrl(\"render-property-refresh\"),\r\n                data: data,\r\n                type: \"POST\",\r\n                dataType: params.dataType || \"json\",\r\n                serviceType: \"PROCESSPROPERTYVALUE\",\r\n                beforeSend: function(xhr, status) {\r\n                    bizagi.multiactionConnection = bizagi.multiactionConnection || [];\r\n                    bizagi.multiactionConnection.push(xhr);\r\n                }\r\n            });\r\n\r\n        },\r\n\r\n        /**\r\n         * Execute actions or constructors\r\n         * @param params\r\n         */\r\n        executeActions: function(params) {\r\n            var self = this;\r\n            var extendParams = $.extend({}, params, { prepare: true });\r\n            var data = self.getPropertyData(extendParams) || [];\r\n\r\n            if (params.pguidConstructor) {\r\n                data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"guidConstructor\"] = params.pguidConstructor;\r\n            }\r\n\r\n            if (params.pguidAction) {\r\n                data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"guidAction\"] = params.pguidAction;\r\n            }\r\n            if (params.prepare) {\r\n                return data;\r\n            }\r\n            return $.ajax({\r\n                url: params.url || self.serviceLocator.getUrl(\"render-property-refresh\"),\r\n                data: data,\r\n                type: \"POST\",\r\n                dataType: params.dataType || \"json\",\r\n                serviceType: \"PROCESSPROPERTYVALUE\"\r\n            });\r\n\r\n        },\r\n\r\n        /**\r\n         * Get list of actions in action launcher\r\n         * @param params\r\n         * @return {*}\r\n         */\r\n        getPolymorphicActions: function(params) {\r\n            var self = this;\r\n            var extendParams = $.extend(params, { prepare: true });\r\n            var data = self.getPropertyData(extendParams) || [];\r\n\r\n            if (params.ptags) {\r\n                data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"tags\"] = params.ptags;\r\n            }\r\n\r\n            if (params.additionalXpaths) {\r\n                data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"additionalXpaths\"] = params.additionalXpaths;\r\n            }\r\n\r\n            if (params.prepare) {\r\n                return data;\r\n            }\r\n\r\n            return $.ajax({\r\n                url: params.url || self.serviceLocator.getUrl(\"render-property-refresh\"),\r\n                data: data,\r\n                type: \"POST\",\r\n                dataType: params.dataType || \"json\",\r\n                serviceType: \"PROCESSPROPERTYVALUE\"\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Make a JSON tree of polymorphic constructors categories\r\n         * @param values\r\n         * @return {Array}\r\n         */\r\n        serializePolymorphicActions: function(values) {\r\n            // json serializer\r\n            var actions = [];\r\n            var GUID_ENTITY = 0, DISPLAY_NAME = 1, XPATHCONTEXT = 2, TYPE = 3, GUID_OBJECT = 4, GUID_CONSTRUCTOR = 5, GUID_PARENT_ENTITY = 6;\r\n\r\n            /**\r\n             * Get children by guid of entity\r\n             * @param guid\r\n             * @return {Array}\r\n             */\r\n            var getChildren = function(guid) {\r\n                var children = [];\r\n                guid = guid || \"\";\r\n\r\n                $.each(values, function(key, value) {\r\n                    if (value[GUID_PARENT_ENTITY] == guid) {\r\n                        children.push(value);\r\n                    }\r\n                });\r\n                return children;\r\n            };\r\n\r\n            /**\r\n             * Get parents by action object\r\n             * @param node\r\n             * @return {string}\r\n             */\r\n            var getParents = function(node) {\r\n                node = node || {};\r\n                var parents = \"\";\r\n\r\n                $.each(values, function(key, value) {\r\n                    if (value[GUID_ENTITY] == node[GUID_PARENT_ENTITY]) {\r\n                        parents += getParents(value) + value[DISPLAY_NAME] + \" > \";\r\n                    }\r\n                });\r\n                return parents;\r\n            };\r\n\r\n\r\n            /**\r\n             * Make a tree of actions\r\n             * @param list\r\n             * @param guid\r\n             * @return {*}\r\n             */\r\n            var fillTree = function(list, guid) {\r\n                var node;\r\n                var children = getChildren(guid);\r\n                $.each(children, function(key, value) {\r\n                    var child = fillTree([], value[GUID_ENTITY]);\r\n                    node = {\r\n                        \"guidEntity\": value[GUID_ENTITY],\r\n                        \"displayName\": value[DISPLAY_NAME],\r\n                        \"hasConstructor\": (value[GUID_CONSTRUCTOR]) ? true : false,\r\n                        \"type\": value[TYPE],\r\n                        \"guidObject\": value[GUID_OBJECT],\r\n                        \"guidConstructor\": value[GUID_CONSTRUCTOR],\r\n                        \"xpathContext\": value[XPATHCONTEXT],\r\n                        \"children\": child,\r\n                        \"parents\": getParents(value)\r\n                    };\r\n                    if (node.guidConstructor !== \"\" || node.children.length > 0) {\r\n                        list.push(node);\r\n                    }\r\n                });\r\n\r\n                return list;\r\n            };\r\n            fillTree(actions, \"\");\r\n            return actions;\r\n        },\r\n\r\n        /**\r\n         * Gets the image for an entity xpath\r\n         * @param params\r\n         */\r\n        getEntityImage64: function(params) {\r\n            var self = this,\r\n                data = {\r\n                    width: params.data,\r\n                    height: params.height,\r\n                    xpath: params.xpath\r\n                },\r\n                url = self.serviceLocator.getUrl(\"render-entity-layout-image64\").replace(\"{entity}\", params.entity).replace(\"{surrogateKey}\", params.surrogateKey);\r\n\r\n            return $.ajax({\r\n                url: url,\r\n                data: data\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Get data files when user access from my stuff, because there is no scope\r\n         */\r\n        getFilesDataForLayoutUploadControl: function(params) {\r\n            var self = this;\r\n            return $.read(self.serviceLocator.getUrl(\"render-entity-layout-upload-files\"), params);\r\n        },\r\n\r\n        /**\r\n         * Process an upload file into the server\r\n         * @param {} params\r\n         * @returns {}\r\n         */\r\n        processUploadFile: function(params) {                \r\n            return $.ajax({\r\n                url: this.verifyMobilePathToBase(bizagi.services.ajax.pathToBase || \"\", params.url),\r\n                data: params.formData,\r\n                type: \"POST\",\r\n                contentType: false,\r\n                processData: false\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Commit an add or edit request for a grid\r\n         * @param params\r\n         * @returns {*}\r\n         */\r\n        commitGridAction: function(params) {\r\n            var self = this;\r\n\r\n            // Define data\r\n            var data = params.extra || {};\r\n\r\n            data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"COMMIT\";\r\n            data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpath\"] = params.xpath;\r\n            data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\r\n            data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\r\n            data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\r\n\r\n            if (params.contexttype) {\r\n                data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = params.contexttype;\r\n            }\r\n\r\n            // Log submit data\r\n            bizagi.debug(\"Sending rollback request for grid '\" + params.xpath + \"'\", data);\r\n\r\n            // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\r\n            if (params.prepare)\r\n                return data;\r\n\r\n            // Call ajax and returns promise\r\n            return $.ajax({\r\n                url: params.url || self.serviceLocator.getUrl(\"render-grid-commit-url\"),\r\n                data: data,\r\n                type: \"POST\",\r\n                dataType: \"json\",\r\n                serviceType: \"COMMIT\"\r\n            });\r\n        },\r\n        /*\r\n         *   Commit an add or edit request for a grid\r\n         */\r\n        sendCheckpointAction: function(params) {\r\n            var self = this;\r\n\r\n            // Define data\r\n            var data = params.extra || {};\r\n\r\n            data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"CHECKPOINT\";\r\n            data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpath\"] = params.xpath;\r\n            data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = params.idRender;\r\n            data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = params.xpathContext;\r\n            data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = params.idPageCache;\r\n\r\n            if (params.contexttype) {\r\n                data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = params.contexttype;\r\n            }\r\n\r\n            // Log submit data\r\n            bizagi.debug(\"Sending checkpoint request for grid '\" + params.xpath + \"'\", data);\r\n\r\n            // If the parameter \"prepare\" is true, only return the data, so we can use the multiaction request\r\n            if (params.prepare)\r\n                return data;\r\n\r\n            // Call ajax and returns promise\r\n            return $.ajax({\r\n                url: params.url || self.serviceLocator.getUrl(\"render-grid-checkpoint-url\"),\r\n                data: data,\r\n                type: \"POST\",\r\n                dataType: \"json\",\r\n                serviceType: \"CHECKPOINT\"\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Validate if url has 'http' string, in that case is not necesary add the pathToBase prefix\r\n         */\r\n        verifyMobilePathToBase: function(pathToBase, url) {\r\n            return bizagi.util.isMashupContext() ? (url || \"\").replaceAll(pathToBase, \"\"): url;                \r\n        }\r\n\r\n    });\r\n","/*\r\n *   Name: BizAgi Rendering Services\r\n *   Author: Diego Parra\r\n *   Comments:\r\n *   -   This class will provide a facade to access to multiaction rendering REST services\r\n */\r\n$.Class.extend(\"bizagi.render.services.multiactionservice\", {\r\n    // Statics\r\n    BA_ACTION_PARAMETER_PREFIX: \"p_\",\r\n    BA_CONTEXT_PARAMETER_PREFIX: \"h_\",\r\n    BA_PAGE_CACHE: \"pageCacheId\"\r\n}, {\r\n\r\n    /* \r\n    *   Constructor\r\n    */\r\n    init: function (service) {\r\n        this.service = service;\r\n        this.serviceLocator = service.serviceLocator;\r\n\r\n        // Multiaction - batch stuff\r\n        this.batch = {};\r\n        this.batchTimer = 50;\r\n        this.circularDependencies = new bizagi.circularDependencies();\r\n\r\n        // Create proxyed version of methods\r\n        this.replicateServiceMethods();\r\n    },\r\n\r\n    /*\r\n    *   Returns the internal service\r\n    */\r\n    getService: function () {\r\n        return this.service;\r\n    },\r\n\r\n    /*\r\n    *   Create a proxied multiaction version for service calls\r\n    */\r\n    replicateServiceMethods: function () {\r\n        var self = this;\r\n        for (var key in this.service.Class.prototype) {\r\n            // Omit the folowing methods\r\n            if (key == \"init\" || key == \"constructor\" || key == \"Class\" || key == \"multiaction\") continue;\r\n\r\n            // Replicate instance methods\r\n            self[key] = eval('var tmp = function(){ return this.proxyMethod(this.getService().' + key + ', arguments);};tmp');\r\n        }\r\n    },\r\n\r\n    /*\r\n    *   Perform the proxy call for each service method\r\n    */\r\n    proxyMethod: function (method, arguments) {\r\n        var service = this.service;\r\n\r\n        // Check if has only one argument, else execute directly\r\n        if (!arguments || arguments.length != 1) {\r\n            return method.apply(service, arguments);\r\n        }\r\n\r\n        // Check if the argument is object, else execute directly\r\n        if (typeof (arguments[0]) != \"object\") {\r\n            return method.apply(service, arguments);\r\n        }\r\n\r\n        var params = arguments[0];\r\n\r\n        // If the caller is requesting a prepare call, just execute the method with the current arguments\r\n        if (params.prepare == true) return method.apply(service, arguments);\r\n\r\n        // Prepare the ajax instead of sending it\r\n        params.prepare = true;\r\n        var action = method.apply(service, arguments);\r\n\r\n        return this.add(action);\r\n    },\r\n\r\n    /**\r\n    * This method make a standard error message\r\n    */\r\n    makeCircularDependenciesError: function (error) {\r\n        var messageTmpl = bizagi.localization.getResource(\"render-actions-loop-validation\");\r\n\r\n        return printf(messageTmpl, error.dependencyFrom, error.dependencyTo);\r\n    },\r\n\r\n\r\n    /*\r\n    *   Add an action to be performed in a multiaction, and be resolved later\r\n    *   returns a deferred\r\n    */\r\n    add: function (action) {\r\n        var self = this;\r\n        var deferred = new $.Deferred();\r\n\r\n        var name = action.h_action || \"unnamed\";\r\n\r\n        // Put here all actions to ignore in circular dependencies\r\n        var exceptionActions = [\"PROCESSPROPERTYVALUE\", \"LOADTEMPLATE\", \"ADDRELATIONWITHDATA\"];\r\n\r\n        if (exceptionActions.indexOf(name) < 0 && bizagi.override.detectCircularDependencies) {\r\n            self.circularDependencies.addNode(name, action);\r\n        }\r\n\r\n        // First clear previous timeout\r\n        clearTimeout(self.batchTimeout);\r\n        var tag = action.tag = Math.guid();\r\n        var singleAction = { action: action, deferred: deferred };\r\n        self.batch[tag] = singleAction;\r\n\r\n        // Start a new timeout\r\n        self.batchTimeout = setTimeout(function () {\r\n            var resolveDependencies = self.circularDependencies.resolve();\r\n\r\n            if (resolveDependencies.error) {\r\n                // Reset Queue\r\n                for (var i in self.batch) {\r\n                    var message = resolveDependencies.error.multiactionError;\r\n                    self.batch[i].deferred.reject(message);\r\n                }\r\n                self.batch = {};\r\n            } else {\r\n                self.fire();\r\n            }\r\n        }, self.batchTimer);\r\n\r\n        return deferred.promise();\r\n    },\r\n    /*\r\n    *   Fires up the multiaction\r\n    */\r\n    fire: function () {\r\n        var self = this;\r\n        var batch = {};\r\n\r\n        // Prepare actions and clone batch manually\r\n        var actions = [];\r\n        $.each(self.batch, function (tag, item) {\r\n            actions.push(item.action);\r\n            batch[tag] = item;\r\n        });\r\n\r\n        // Reset batch\r\n        self.batch = {};\r\n\r\n        // Fire ajax \r\n        $.when(self.execute({ actions: actions, rejectDeferreds: false }))\r\n                .done(function (responses) {\r\n\r\n                    // Process each response\r\n                    $.each(responses, function (i, response) {\r\n                        var tag = response.tag;\r\n                        if (!response.error) {\r\n                            batch[tag].deferred.resolve(response.result);\r\n                        } else {\r\n                            batch[tag].deferred.reject(response.error, response, response.error.message);\r\n                        }\r\n\r\n                        // Remove paired tag from collection\r\n                        delete batch[tag];\r\n                    });\r\n\r\n                    // Check if there are unpaired actions so we need to trigger fail deferred\r\n                    $.each(batch, function (i, item) {\r\n                        item.deferred.reject({ type: \"not-processed\", message: \"Operation didn't executed\" }, '', \"Operation didn't executed\");\r\n                    });\r\n                }).fail(function (xhr, type, error) {\r\n\r\n                    // Check if there are unpaired actions so we need to trigger fail deferred\r\n                    var errorMessage = typeof (error) !== \"undefined\" ? error.message : (error || \"Operation didn't executed\");\r\n                    $.each(batch, function (i, item) {\r\n                        item.deferred.reject({ type: \"not-processed\", message: errorMessage }, '', \"Operation didn't executed\");\r\n                    });\r\n                });\r\n    },\r\n    /*\r\n    *   Sends a multiaction to the server\r\n    */\r\n    execute: function (params) {\r\n        var self = this;\r\n\r\n        // Define data\r\n        var data = {};\r\n        var rejectDeferreds = params.rejectDeferreds !== undefined ? params.rejectDeferreds : true;\r\n        data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"multiaction\";\r\n\r\n        // Check action tag\r\n        $.each(params.actions, function (i, action) {\r\n            action[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"tag\"] = action.tag || i;\r\n            delete action.tag;\r\n        });\r\n\r\n        // Fill optional parameters\r\n        params = params || {};\r\n        if (params.actions) {\r\n            data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"actions\"] = JSON.encode(params.actions);\r\n        }\r\n\r\n        // Log submit data\r\n        bizagi.debug(\"Performing multi-action\", data);\r\n\r\n        // Call ajax and returns promise\r\n        var deferred = new $.Deferred();\r\n        $.ajax({\r\n            url: self.serviceLocator.getUrl(\"render-multiaction\"),\r\n            data: data,\r\n            type: \"POST\",\r\n            dataType: \"json\",\r\n            serviceType: \"MULTIACTION\",\r\n            beforeSend: function (xhr, status) {\r\n                bizagi.multiactionConnection = bizagi.multiactionConnection || [];\r\n                bizagi.multiactionConnection.push(xhr);\r\n            }\r\n\r\n        }).done(function (responses) {\r\n            for (i in responses) {\r\n                if (typeof responses[i] !== \"function\") {\r\n                    var response = responses[i];\r\n                    if (response.error) {\r\n                        if (rejectDeferreds) {\r\n                            deferred.reject(this, \"servererror\", response);\r\n                            return;\r\n                        }\r\n\r\n                    }\r\n                }\r\n            }\r\n            deferred.resolve(responses);\r\n\r\n        }).fail(function (xhr) {\r\n            var response = xhr.responseText || xhr;\r\n            var finalResponse;\r\n            // Try to parse the response\r\n            try {\r\n                finalResponse = JSON.parse(response);\r\n            } catch (e) { }\r\n            deferred.reject(xhr, \"servererror\", finalResponse);\r\n        });\r\n\r\n        return deferred.promise();\r\n    }\r\n});\r\n","/*\r\n *   Name: BizAgi Rendering Services\r\n *   Author: Einer Perez\r\n *   Comments:\r\n *   -   This class will provide a facade to access to multiaction rendering REST services\r\n */\r\nbizagi.render.services.multiactionservice.extend(\"bizagi.render.services.metadatamultiactionservice\", {\r\n    // Statics\r\n    BA_ACTION_PARAMETER_PREFIX: \"p_\",\r\n    BA_CONTEXT_PARAMETER_PREFIX: \"h_\",\r\n    BA_PAGE_CACHE: \"h_pageCacheId\"\r\n}, {\r\n\r\n    /*\r\n    *   Sends a multiaction to the server\r\n    */\r\n    execute: function (params) {\r\n        var self = this;\r\n\r\n        // Define data\r\n        var data = {};\r\n        var rejectDeferreds = params.rejectDeferreds !== undefined ? params.rejectDeferreds : true;\r\n        data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = \"multiaction\";\r\n\r\n        // Check action tag\r\n        $.each(params.actions, function (i, action) {\r\n            action[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"tag\"] = action.tag || i;\r\n            if (action[self.Class.BA_PAGE_CACHE]) {\r\n                data[self.Class.BA_PAGE_CACHE] = action[self.Class.BA_PAGE_CACHE];\r\n            }\r\n            delete action[self.Class.BA_PAGE_CACHE];\r\n            delete action.tag;\r\n        });\r\n\r\n        // Fill optional parameters\r\n        params = params || {};\r\n        if (params.actions) {\r\n            data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"actions\"] = JSON.encode(params.actions);\r\n        }\r\n\r\n        // Log submit data\r\n        bizagi.debug(\"Performing multi-action metadata\", data);\r\n\r\n        // Call ajax and returns promise\r\n        var deferred = new $.Deferred();\r\n        $.ajax({\r\n            url: self.serviceLocator.getUrl(\"render-multiaction-metadata\"),\r\n            data: data,\r\n            type: \"POST\",\r\n            dataType: \"json\",\r\n            serviceType: \"MULTIACTION\",\r\n            beforeSend: function (xhr, status) {\r\n                bizagi.multiactionConnection = bizagi.multiactionConnection || [];\r\n                bizagi.multiactionConnection.push(xhr);\r\n            }\r\n\r\n        }).done(function (responses) {\r\n            for (i in responses) {\r\n                if (typeof responses[i] !== \"function\") {\r\n                    var response = responses[i];\r\n                    if (response.error) {\r\n                        if (rejectDeferreds) {\r\n                            deferred.reject(this, \"servererror\", response);\r\n                            return;\r\n                        }\r\n\r\n                    }\r\n                }\r\n            }\r\n            deferred.resolve(responses);\r\n\r\n        }).fail(function (xhr) {\r\n            var response = xhr.responseText || xhr;\r\n            var finalResponse;\r\n            // Try to parse the response\r\n            try {\r\n                finalResponse = JSON.parse(response);\r\n            } catch (e) { }\r\n            deferred.reject(xhr, \"servererror\", finalResponse);\r\n        });\r\n\r\n        return deferred.promise();\r\n    }\r\n});\r\n","/*\r\n*   Name: Bizagi Rendering Services\r\n*   Author: Bizagi Mobile Team\r\n*   Comments:\r\n*   -   This class will provide a facade to access to workportal REST services\r\n*/\r\n\r\nbizagi.render.services.service.extend(\"bizagi.render.services.service\", {},\r\n{\r\n    /* \r\n     *   Constructor\r\n     */\r\n    init: function(params) {\r\n        // Call base\r\n        var self = this;\r\n\r\n        self._super(params);\r\n        self.database = params.database;\r\n    },\r\n\r\n    getFormData: function(params) {\r\n        var self = this;\r\n\r\n        params = params || {};\r\n\r\n        if (!params.isOfflineForm) {\r\n            return self._super(params);\r\n        } else {\r\n\r\n            if (bizagi.util.isNativePluginSupported() && typeof(bizagiapp.getNativeFormData) !== \"undefined\") {\r\n                return self.getFormDataFromNative(params)\r\n                    .then(function(result) {\r\n                        return self.database.mergeForm(result[1], result[0].data);\r\n                    });\r\n\r\n            } else {\r\n                if(params.offlineType === 'task'){\r\n                    //It is not a start event\r\n                    if(params.isEdited || !params.isOpen){\r\n                        var def = new $.Deferred();\r\n                        $.when(self.database.getTaskData(params)).then(function(formData){\r\n                            \r\n                            var formPromise = self.database.getTaskForm(params)\r\n                            $.when(self.database.mergeDataDocument(formData.data, null, formPromise)).done(function(complexData){\r\n                                var object = {\r\n                                    data: complexData, \r\n                                    isOpen: params.isOpen\r\n                                };\r\n                                self.database.mergeForm(object, formPromise).then(function(mergedForm){\r\n                                    def.resolve(mergedForm);\r\n                                });\r\n                            });\r\n    \r\n                        });\r\n                        return def.promise();\r\n                    }\r\n                    else\r\n                        return self.database.getTaskForm(params);\r\n                }\r\n                else {\r\n                    return $.when(self.database.getCase(params.idCase))\r\n                    .then(function(response) {\r\n                        var idWfClass = $.trim(response.idWfClass.toString());\r\n                        return self.database.mergeForm(response, self.database.getFormData(idWfClass));\r\n                    });\r\n                }\r\n            }\r\n        }\r\n    },\r\n\r\n    getOfflineImage: function(params, fileType){\r\n        if(params.offlineType === \"task\")\r\n            return this.database.getActivityImage(params, fileType);\r\n        else\r\n            return this.database.getStartDataImage(params, fileType);\r\n    },\r\n\r\n    getOfflineActivityDataImage: function(params, fileFormat){\r\n        return this.database.getActivityDataImage(params, fileFormat);\r\n    },\r\n\r\n    saveOfflineImage: function(params, image){\r\n        if (params.operationType === \"synchronization\")\r\n            return this.database.saveActivityFormImage(params, image);\r\n        else if (params.operationType === \"edition\"){\r\n            if(params.offlineType === \"task\")\r\n                return this.database.saveActivityDataImage(params, image);\r\n            else\r\n                return this.database.saveStartDataImage(params, image);\r\n        }\r\n        else \r\n            return null;\r\n    },\r\n\r\n    saveOfflineFile: function(params, file, mimeType){\r\n        if (params.operationType === \"synchronization\")\r\n            return this.database.saveActivityFormFile(params, file, mimeType);\r\n        else if (params.operationType === \"edition\"){\r\n            if(params.offlineType === \"task\")\r\n                return this.database.saveActivityDataFile(params, file, mimeType);\r\n            else\r\n                return this.database.saveStartDataFile(params, file, mimeType);\r\n        }\r\n        else \r\n            return null;\r\n    },\r\n\r\n    getOfflineFile: function(params, fileType, mimeType){\r\n        if(params.offlineType === \"task\")\r\n            return this.database.getActivityFile(params, fileType, mimeType);\r\n        else\r\n            return this.database.getStartDataFile(params, fileType, mimeType);\r\n    },\r\n\r\n    getOfflineActivityDataFile: function(params, fileType, mimeType){\r\n        return this.database.getActivityDataFile(params, fileType, mimeType);\r\n    },\r\n\r\n    getFormDataFromNative: function(params) {\r\n        var def = new $.Deferred();\r\n\r\n        bizagiapp.getNativeFormData(params, function(form) {\r\n\r\n            bizagiapp.getCase(params.idCase, function(caseInfo) {\r\n\r\n                var result = [JSON.parse(form), JSON.parse(caseInfo)];\r\n\r\n                def.resolve(result);\r\n\r\n            }, function(error) {\r\n\r\n                def.reject(error);\r\n\r\n            });\r\n\r\n\r\n        }, function(error) {\r\n            def.reject(error);\r\n        })\r\n\r\n        return def.promise();\r\n    },\r\n\r\n    submitData: function(params) {\r\n        var self = this;\r\n\r\n        params = params || {};\r\n\r\n        if (!params.isOfflineForm) {\r\n            return self._super(params);\r\n        } else {\r\n\r\n            var data = self.resolveData(params.data || {}, params.xpathContext);\r\n            data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = params.action;\r\n\r\n            if (bizagi.util.isNativePluginSupported() && typeof (bizagiapp.getNativeFormData) !== \"undefined\") {\r\n                return self.saveNativeFormInfo(params, data);\r\n            }\r\n\r\n            if(params.offlineType === 'task'){\r\n                return self.database.saveTaskData(params,data);                 \r\n            }\r\n            else{\r\n                return self.database.saveStartData(params, data);   \r\n            }\r\n            \r\n        }\r\n    },\r\n\r\n    saveNativeFormInfo: function(params, data) {\r\n        var self = this;\r\n\r\n        var def = new $.Deferred();\r\n\r\n        self.getFormDataFromNative(params).then(function(result) {\r\n            return self.database.nativesaveStartData(data, result[1], result[0].data)\r\n                .done(function(doc) {\r\n                    bizagiapp.saveFormData(params, doc);\r\n                    def.resolve(doc);\r\n                });\r\n        });\r\n\r\n        return def.promise();\r\n    }\r\n});\r\n","/*\r\n*   Name: Bizagi Rendering Services\r\n*   Author: Bizagi Mobile Team\r\n*   Comments:\r\n*   -   This class will provide a facade to access to workportal REST services\r\n*/\r\n\r\nbizagi.render.services.service.extend(\"bizagi.render.services.service\", {},\r\n{\r\n    /* \r\n     *   Constructor\r\n     */\r\n    init: function(params) {\r\n        // Call base\r\n        var self = this;\r\n\r\n        self._super(params);\r\n        self.database = params.database;\r\n    },\r\n\r\n    getFormData: function(params) {\r\n        var self = this;\r\n\r\n        params = params || {};\r\n\r\n        if (!params.isOfflineForm || bizagi.util.isOfflineFormsV2Supported()) {\r\n            return self._super(params);\r\n        } else {\r\n\r\n            if (bizagi.util.isNativePluginSupported() && typeof(bizagiapp.getNativeFormData) !== \"undefined\") {\r\n\r\n                return self.getFormDataFromNative(params)\r\n                    .then(function(result) {\r\n                        return self.database.mergeForm(result[1], result[0].data);\r\n                    });\r\n\r\n            } else {\r\n\r\n                return $.when(self.database.getCase(params.idCase))\r\n                    .then(function(response) {\r\n                        var idWfClass = $.trim(response.idWfClass.toString());\r\n\r\n                        return self.database.mergeForm(response, self.database.getFormData(idWfClass));\r\n                    });\r\n            }\r\n        }\r\n    },\r\n\r\n    getFormDataFromNative: function(params) {\r\n        var def = new $.Deferred();\r\n\r\n        bizagiapp.getNativeFormData(params, function(form) {\r\n\r\n            bizagiapp.getCase(params.idCase, function(caseInfo) {\r\n\r\n                var result = [JSON.parse(form), JSON.parse(caseInfo)];\r\n\r\n                def.resolve(result);\r\n\r\n            }, function(error) {\r\n\r\n                def.reject(error);\r\n\r\n            });\r\n\r\n\r\n        }, function(error) {\r\n            def.reject(error);\r\n        })\r\n\r\n        return def.promise();\r\n    },\r\n\r\n    submitData: function(params) {\r\n        var self = this;\r\n\r\n        params = params || {};\r\n\r\n        if (!params.isOfflineForm || bizagi.util.isOfflineFormsV2Supported()) {\r\n            return self._super(params);\r\n        } else {\r\n\r\n            var data = self.resolveData(params.data || {}, params.xpathContext);\r\n            data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = params.action;\r\n\r\n            if (bizagi.util.isNativePluginSupported() && typeof (bizagiapp.getNativeFormData) !== \"undefined\") {\r\n                return self.saveNativeFormInfo(params, data);\r\n            }\r\n\r\n            return self.database.saveFormInfo(params, data);\r\n        }\r\n    },\r\n\r\n    saveNativeFormInfo: function(params, data) {\r\n        var self = this;\r\n\r\n        var def = new $.Deferred();\r\n\r\n        self.getFormDataFromNative(params).then(function(result) {\r\n            return self.database.nativeSaveFormInfo(data, result[1], result[0].data)\r\n                .done(function(doc) {\r\n                    bizagiapp.saveFormData(params, doc);\r\n                    def.resolve(doc);\r\n                });\r\n        });\r\n\r\n        return def.promise();\r\n    }\r\n});\r\n","/*\r\n *   Name: BizAgi Rendering Command controller \r\n *   Author: Diego Parra\r\n *   Comments:\r\n *   -   This script will define basic stuff for action and validation controllers\r\n */\r\n\r\n$.Class.extend(\"bizagi.command.controllers.controller\", {\r\n    /* \r\n    *   Set to true in order to debug\r\n    */\r\n    THROW_ERROR: true\r\n\r\n}, {\r\n    /*  \r\n    *   Constructor\r\n    */ \r\n    init: function (form) {\r\n        this.form = form;\r\n        this.dateFormat = form.getResource(\"dateFormat\");\r\n    },\r\n    /*\r\n    *   Returns the condition in JS\r\n    */\r\n    buildConditions: function (conditions, bGridDetected, bCheckEditability) {\r\n        var self = this;\r\n        var operator = conditions.expressions && conditions.expressions.length > 1 ? self.buildConditionOperator(conditions.operator) : conditions.operator;\r\n\r\n        // Define if a grid has been detected\r\n        bGridDetected = bGridDetected || false;\r\n        bCheckEditability = bCheckEditability || false;\r\n\r\n        //  Validate trtue and false conditions\r\n        if (operator == \"true\")\r\n            return \"true\";\r\n        if (operator == \"false\")\r\n            return \"false\";\r\n\r\n        var sJsCondition = \"\";\r\n\r\n        for (var i = 0; i < conditions.expressions.length; i++) {\r\n            var expression = conditions.expressions[i];\r\n\r\n            if (expression.simple) {\r\n                var bGDetected = self.searchGridReferenceInCondition(expression.simple);\r\n                sJsCondition += self.buildSimpleCondition(expression.simple, bGDetected, bCheckEditability);\r\n\r\n            } else if (expression.complex) {\r\n                sJsCondition += \"(\" + self.buildConditions(expression.complex, bGridDetected, bCheckEditability) + \") \";\r\n            }\r\n\r\n            // Adds operator\r\n            sJsCondition += (i < conditions.expressions.length - 1 ? operator : \"\");\r\n        }\r\n\r\n        return sJsCondition;\r\n    },\r\n    /*\r\n    *   Builds the condition operator\r\n    */\r\n    buildConditionOperator: function (conditionsOperator) {\r\n        if (conditionsOperator == \"and\")\r\n            return \" && \";\r\n        if (conditionsOperator == \"or\")\r\n            return \" || \";\r\n        return conditionsOperator;\r\n    },\r\n    /*\r\n    *   Builds a simple condition\r\n    */\r\n    buildSimpleCondition: function (condition, bGridDetected, bCheckEditability) {\r\n        var self = this;\r\n        var sXpath;\r\n        var xpath;\r\n        var sArgument = \"\";\r\n        var operator = condition.operator;\r\n        var ensureValueJs = \"\";\r\n        var ensureEditable = \"\";\r\n\r\n        // Define if a grid has been detected\r\n        bGridDetected = bGridDetected || false;\r\n        bCheckEditability = bCheckEditability || false;\r\n\r\n        // List of controls excluded to editability validation\r\n        // Just keep empty the value of element\r\n        var excludeEditabilityRule = { \"boolean\": \"\" };\r\n        var control =  (condition.xpath && condition.renderId) ? \r\n                        condition.xpath + '.' + condition.renderId : \r\n                        condition.xpath || condition.renderId;                       \r\n\r\n        \r\n        if (bGridDetected && condition.containerId){\r\n            var gridXpathInfo = self.processGridXpath(condition.xpath)            \r\n            control = gridXpathInfo.gridXpath + \".\" + condition.containerId + \"[].\" + gridXpathInfo.remainingXpath + \".\" + condition.renderId;            \r\n        }\r\n\r\n\r\n        var detectedArgumentType = self.detectConditionArgumentType(control, condition.argumentType);\r\n\r\n        // Build xpath\r\n        sXpath = self.buildXpath(control, detectedArgumentType, bGridDetected);\r\n        if (detectedArgumentType != \"boolean\") {\r\n            ensureValueJs += \"!bizagi.util.isEmpty(\" + sXpath + \") && \";\r\n        }\r\n\r\n        // Check if the render is editable, only when the parameter is provided\r\n        if (bCheckEditability && control && control.length > 0 && !excludeEditabilityRule.hasOwnProperty(detectedArgumentType)) {\r\n            ensureEditable = \"self.isVisible('\" + control + \"') && self.isEditable('\" + control + \"') && \";\r\n        }\r\n\r\n        // Build argument\r\n        if (!bizagi.util.isEmpty(condition.argument)) {\r\n            sArgument = self.buildArgument(condition.argument, detectedArgumentType, bGridDetected);\r\n\r\n            // If the argument is xpath it must be filled to for some operators\r\n            if (detectedArgumentType == \"xpath\") {\r\n                ensureValueJs += \"!bizagi.util.isEmpty(\" + sArgument + \") && \";\r\n            }\r\n\r\n        } else if (condition.argument === \"\") {\r\n            // Also check the case when the argument is empty\r\n            sArgument = \"\\\"\\\"\";\r\n        }\r\n\r\n        // Build condition\r\n\r\n        if (operator == \"includes\") {\r\n            return ensureEditable + ensureValueJs + \"self.includes(\" + sXpath + \",\" + sArgument + \") \";\r\n        }\r\n        //if (operator == \"changes\") return \"true\";\r\n        if (operator == \"changes\") {\r\n            return \"self.isChanged(\" + sXpath + \", params.changed)\";\r\n        }\r\n        if (operator == \"equals\")\r\n            return ensureEditable + ensureValueJs + sXpath + \" == \" + sArgument;\r\n        if (operator == \"not-equals\")\r\n            return ensureEditable + sXpath + \" != \" + sArgument;\r\n        if (operator == \"less-than\")\r\n            return ensureEditable + ensureValueJs + sXpath + \" < \" + sArgument;\r\n        if (operator == \"less-equals-than\")\r\n            return ensureEditable + ensureValueJs + sXpath + \" <= \" + sArgument;\r\n        if (operator == \"greater-than\")\r\n            return ensureEditable + ensureValueJs + sXpath + \" > \" + sArgument;\r\n        if (operator == \"greater-equals-than\")\r\n            return ensureEditable + ensureValueJs + sXpath + \" >= \" + sArgument;\r\n        if (operator == \"like\")\r\n            return ensureEditable + ensureValueJs + sXpath + \".toString().indexOf(\" + sArgument + \") >= 0 \";\r\n        if (operator == \"is-empty\") {\r\n            if (detectedArgumentType != \"entity\") {\r\n                return ensureEditable + \"bizagi.util.isEmpty(\" + sXpath + \")\";\r\n            } else {\r\n                return ensureEditable + \"(\" + sXpath + \" == 0 || bizagi.util.isEmpty(\" + sXpath + \"))\";\r\n            }\r\n        }\r\n        if (operator == \"is-not-empty\") {\r\n            if (detectedArgumentType != \"entity\") {\r\n                return ensureEditable + \"!bizagi.util.isEmpty(\" + sXpath + \")\";\r\n            } else {\r\n                return ensureEditable + \"(\" + sXpath + \" != 0 && !bizagi.util.isEmpty(\" + sXpath + \"))\";\r\n            }\r\n        }\r\n        if (operator == \"is-true\")\r\n            return ensureEditable + \"( \" + sXpath + \" == true || \" + sXpath + \" == 'true' )\";\r\n        if (operator == \"is-false\")\r\n            return ensureEditable + \"( \" + sXpath + \" == false || \" + sXpath + \" == 'false' || \" + sXpath + \" == 'False' )\";\r\n        if (operator == \"does-not-contain\")\r\n            return ensureEditable + ensureValueJs + sXpath + \".toString().indexOf(\" + sArgument + \") < 0 \";\r\n        if (operator == \"contains\")\r\n            return ensureEditable + ensureValueJs + sXpath + \".toString().indexOf(\" + sArgument + \") >= 0 \";\r\n        if (operator == \"begins-with\")\r\n            return ensureEditable + ensureValueJs + sXpath + \".toString().startsWith(\" + sArgument + \") == true \";\r\n        if (operator == \"does-not-begins-with\")\r\n            return ensureEditable + ensureValueJs + sXpath + \".toString().startsWith(\" + sArgument + \") == false \";\r\n        if (operator == \"file-uploaded\") {\r\n            xpath = control;\r\n            if (bGridDetected && xpath) {\r\n                xpath = xpath.replaceAll(\"[]\", \"[' + i + ']\");\r\n            }\r\n            return ensureEditable + \"self.isFileUploaded('\" + xpath + \"') \";\r\n        }\r\n        if (operator == \"file-not-uploaded\") {\r\n            xpath = control;\r\n            if (bGridDetected && xpath) {\r\n                xpath = xpath.replaceAll(\"[]\", \"[' + i + ']\");\r\n            }\r\n            return ensureEditable + \"!self.isFileUploaded('\" + xpath + \"') \";\r\n        }\r\n        if (operator == \"is-invalid-email\")\r\n            return ensureEditable + \"!self.isValidEmail(\" + sXpath + \") \";\r\n        if (operator == \"letter-edited\")\r\n            return \"false\"; //TODO\r\n        if (operator == \"letter-not-edited\")\r\n            return \"false\"; //TODO\r\n        if (operator == \"cell-change\")\r\n            return \"column == \" + sArgument;\r\n\r\n        if (operator == \"on-press\") {\r\n            if (bGridDetected) {\r\n                var id = self.buildXpath(control, \"id\", bGridDetected);\r\n                return \"self.isGridButtonPressed(\" + id + \", params.pressed)\";\r\n            } else {\r\n                return \"self.isButtonPressed('\" + control + \"', params.pressed)\";\r\n            }\r\n        }\r\n\r\n        // ondelete behavior on grid control  \r\n        if (operator == 'on-deleted-row') {\r\n            xpath = control || \"\";\r\n            return \"self.onDeletedGridRow('\" + xpath + \"', params.rowDeleted)\";\r\n        }\r\n\r\n        // If there is another operator code throw exception\r\n        throw new \"There is no implementation for operator code \" + operator;\r\n    },\r\n    /*\r\n    *   Detects the argument type based on the render\r\n    */\r\n    detectConditionArgumentType: function (control, argumentType) {\r\n        var self = this;\r\n\r\n        if (argumentType === undefined || argumentType == \"const\") {\r\n\r\n            // Search render\r\n            var form = self.form;\r\n            var render = form.getRender(control) || form.getRenderById(control);\r\n\r\n            // Check if exists the render\r\n            if (render == null) {\r\n                throw new Error(\"RenderNotFoundException in method detectConditionArgumentType of bizagi.command.controllers.controller\");\r\n            }\r\n\r\n            // Check if the render is a grid\r\n            if (render.properties.type == \"grid\") {\r\n                var gridXpath = self.processGridXpath(control);\r\n\r\n                if (gridXpath.remainingXpath === \"\") {\r\n                    // The target is the grid\r\n                    return \"xpath\";\r\n                } else {\r\n                    render = render.getColumn(gridXpath.remainingXpath);\r\n                    if (render == null) {\r\n                        throw new Error(\"RenderNotFoundException in method detectConditionArgumentType of bizagi.command.controllers.controller\");\r\n                    }\r\n                }\r\n            }\r\n\r\n            var dataType = render.properties.dataType;\r\n            var renderType = bizagi.util.normalizeType(render.properties.type);\r\n\r\n            if (self.isRelatedEntityRender(renderType)) {\r\n                return 'entity';\r\n            }\r\n\r\n            // Number\r\n            if (dataType == 1 || dataType == 2 || dataType == 3 || dataType == 4 || dataType == 6 || dataType == 7 || dataType == 10 || dataType == 11) {\r\n                return 'number';\r\n            }\r\n\r\n            // Money\r\n            if (dataType == 8) {\r\n                return 'money';\r\n            }\r\n\r\n            // Date\r\n            if (dataType == 12 || dataType == 13) {\r\n                if (render.properties.showTime == true) {\r\n                    return 'datetime';\r\n                } else {\r\n                    return 'date';\r\n                }\r\n            }\r\n\r\n            // Boolean\r\n            if (dataType == 5) {\r\n                return 'boolean';\r\n            }\r\n\r\n            // Button\r\n            if (renderType == \"button\") {\r\n                return \"button\";\r\n            }\r\n\r\n            // Default\r\n            return 'text';\r\n\r\n        } else if (argumentType == \"xpath\" || argumentType == \"function\" || argumentType == \"entity\") {\r\n            return argumentType;\r\n        }\r\n\r\n        // Default return text\r\n        return 'text';\r\n    },\r\n    /*\r\n    *   Detects if a render type must be binded to a xpath with related entity\r\n    */\r\n    isRelatedEntityRender: function (renderType) {\r\n        return [\"combo\", \"list\", \"radio\", \"search\", \"searchCombo\", \"columnCombo\"].includes(renderType) || /^cascadingcombo$/i.test(renderType);\r\n    },\r\n\r\n    buildXpath: function (xpath, argumentType, bGridDetected) {\r\n        var self = this;\r\n\r\n        // Define if a grid has been detected\r\n        bGridDetected = bGridDetected || false;\r\n\r\n        // Process grid xpaths\r\n        if (bGridDetected) {\r\n            xpath = xpath.replaceAll(\"[]\", \"[' + i + ']\");\r\n        }\r\n\r\n        if (argumentType == 'xpath' && !bGridDetected) {\r\n            return \"self.evalXpath('\" + xpath + \"', '\" + self.detectConditionArgumentType(xpath, \"const\") + \"')\";\r\n        } else if (argumentType == 'id') {\r\n            return \"'\" + xpath + \"'\";\r\n        } else if (argumentType == 'function') {\r\n            var xpathArgumentType = self.detectConditionArgumentType(xpath, \"const\");\r\n            return \"self.evalXpath('\" + xpath + \"', '\" + xpathArgumentType + \"')\";\r\n        } else if (bGridDetected){\r\n            return \"self.evalGridXpath(params, '\" + xpath + \"', '\" + argumentType + \"')\";      \r\n        }\r\n\r\n        return \"self.evalXpath('\" + xpath + \"', '\" + argumentType + \"')\";\r\n    },\r\n    buildArgument: function (argument, argumentType, bGridDetected, xpathContext) {\r\n        var self = this;\r\n        var number;\r\n\r\n        // Define if a grid has been detected\r\n        bGridDetected = bGridDetected || false;\r\n\r\n        if (argumentType == 'text') {\r\n            // Text\r\n            argument = (argument == null) ? \"\" : argument;\r\n            argument = (typeof argument != 'string') ? argument.toString() : argument;\r\n            if (argument.indexOf(\"'\") != -1)\r\n                argument = argument.replaceAll(\"'\", \"\\\\'\");\r\n\r\n            // Remove line breaks because they will fail with the eval command\r\n            if (argument.indexOf(\"\\n\") != -1)\r\n                argument = argument.replaceAll(\"\\n\", \"\");\r\n\r\n            return \"'\" + argument.toString() + \"'\";\r\n        }\r\n        if (argumentType == 'boolean') {\r\n            // Boolean\r\n            if (typeof (argument) == \"string\") {\r\n                return argument == \"Default\" ? argument : (eval(argument.toLowerCase()) == true ? \"true\" : \"false\");\r\n            } else {\r\n                return (eval(argument) == true ? \"true\" : \"false\");\r\n            }\r\n        }\r\n        if (argumentType == 'number') {\r\n            // Number\r\n            number = new Number(argument);\r\n            if (number == NaN)\r\n                return \"-99999999\";\r\n            return number.toString();\r\n        }\r\n        if (argumentType == 'money') {\r\n            // MONEY\r\n            number = new Number(argument);\r\n            if (number == NaN)\r\n                return \"-99999999\";\r\n            return number.toString();\r\n        }\r\n        if (argumentType == 'date') {\r\n            //Date\r\n            var date = bizagi.util.dateFormatter.getDateFromInvariant(argument);\r\n            if (!date || date == 0)\r\n                date = new Date(0);\r\n\r\n            // Remove time\r\n            date.setHours(0, 0, 0, 0);\r\n\r\n            return \"bizagi.util.dateFormatter.getDateFromInvariant('\" + bizagi.util.dateFormatter.formatInvariant(date) + \"').getTime()\";\r\n        }\r\n        if (argumentType == 'datetime') {\r\n            //Date\r\n            var date = bizagi.util.dateFormatter.getDateFromInvariant(argument, true);\r\n            if (!date || date == 0) {\r\n                date = new Date(0);\r\n            }\r\n            \r\n            date.setSeconds(0);\r\n            date.setMilliseconds(0);\r\n\r\n            return \"bizagi.util.dateFormatter.getDateFromInvariant('\" + bizagi.util.dateFormatter.formatInvariant(date, true) + \"', true).getTime()\";\r\n        }\r\n        if (argumentType == 'color') {\r\n            // Color\r\n            return \"'\" + argument.toString() + \"'\";\r\n        }\r\n        if (argumentType == 'entity') {\r\n\r\n            if (bizagi.util.isEmpty(argument)) {\r\n                return null;\r\n            }\r\n            try {\r\n                argument = typeof (argument) != \"object\" ? JSON.parse(argument) : argument;\r\n            } catch (e) {\r\n                argument = argument || {};\r\n            }\r\n\r\n\r\n            // Entity value\r\n            var result = argument.id || argument;\r\n            return JSON.stringify(result);\r\n        }\r\n        if (argumentType == 'xpath') {\r\n            // Xpath value\r\n            var xpath = argument.toString();\r\n\r\n            // Process grid xpaths\r\n            if (bGridDetected) {\r\n                xpath = xpath.replaceAll(\"[]\", \"[' + i + ']\");\r\n            }\r\n\r\n            if (xpathContext) {\r\n                xpath = xpathContext + \".\" + xpath;\r\n            }\r\n\r\n            return self.buildXpath(xpath, argumentType, bGridDetected);\r\n        }\r\n        if (argumentType == 'json') {\r\n            // Xpath value\r\n            return JSON.encode(argument);\r\n        }\r\n        if (argumentType == 'function') {\r\n            if (argument == \"BANow\") {\r\n                return \"self.getCurrentDate()\";\r\n            }\r\n            // If there is another function type code throw exception\r\n            throw \"There is no implementation for function \" + argument;\r\n        }\r\n\r\n        if (argumentType == undefined) {\r\n            return null;\r\n        }\r\n\r\n        // If there is another argument type code throw exception\r\n        throw \"There is no implementation for argument type \" + argumentType;\r\n    },\r\n    /*\r\n    *   Evals if an xpath is editable\r\n    */\r\n    isEditable: function (xpath) {\r\n        var self = this;\r\n        // For the submit action we need only one render to perform the server action\r\n        var render = self.getRender(xpath);\r\n        if (render == null) {\r\n            if (self.Class.THROW_ERROR) {\r\n                self.showRenderNotFoundError(xpath);\r\n            }\r\n            return;\r\n        }\r\n\r\n        return render.properties.editable;\r\n    },\r\n\r\n    isVisible: function (xpath) {\r\n        var self = this;\r\n\r\n        var render = self.getRender(xpath);\r\n        if (render == null) {\r\n            if (self.Class.THROW_ERROR) {\r\n                self.showRenderNotFoundError(xpath);\r\n            }\r\n            return;\r\n        }\r\n\r\n        if (render.properties.visible) {\r\n            return self.isParentVisible(render.parent);\r\n        } else {\r\n            var renderType = bizagi.util.normalizeType(render.properties.type);\r\n            if (/^hidden$/i.test(renderType)) {\r\n                return true;\r\n            } else {\r\n                return false;\r\n            }\r\n        }\r\n    },\r\n\r\n    isParentVisible: function (render) {\r\n        var self = this;\r\n        if (render.parent) {\r\n            if (render.properties.visible) {\r\n                return self.isParentVisible(render.parent);\r\n            } else {\r\n                return false;\r\n            }\r\n        } else {\r\n            return render.properties.visible;\r\n        }\r\n    },\r\n\r\n    /* \r\n    *   Evals an xpath to find a render and return its value\r\n    */\r\n    evalGridXpath: function(params, xpath, argumentType) {\r\n        var self = this;\r\n        \r\n        if (params === undefined){\r\n            return this.evalXpath(xpath, argumentType);\r\n        }\r\n\r\n        var grid = params.grid;\r\n\r\n        if (grid === undefined || grid === null){\r\n            if (self.Class.THROW_ERROR) {\r\n                self.showRenderNotFoundError(xpath);\r\n            }\r\n            return null;    \r\n        }\r\n\r\n        // Grid renders\r\n        var gridXpath = self.processGridXpath(xpath);\r\n\r\n        // Return the value\r\n        var gridColumn = grid.getColumn(gridXpath.remainingXpath);\r\n\r\n        if (!gridColumn) {\r\n            return false;\r\n            //throw \"There is no a valid render for xpath \" + xpath;\r\n        }\r\n\r\n        var cellValue = grid.getCellCurrentValue(gridXpath.index, gridXpath.remainingXpath);\r\n\r\n        if (gridColumn.properties.type == \"columnRadio\") {\r\n            if (cellValue && !bizagi.util.isString(cellValue)) {\r\n                if (cellValue.length > 0 && cellValue[0].length > 0)\r\n                    cellValue = cellValue[0][0];\r\n                else\r\n                    cellValue = cellValue.id;\r\n            }\r\n            else if(!bizagi.util.isString(cellValue))\r\n                cellValue = 0;\r\n        }\r\n\r\n        if (gridColumn.properties.type == \"columnCombo\") {\r\n            cellValue = (cellValue && cellValue.id) ? cellValue.id : 0;\r\n        }\r\n\r\n        if (gridColumn.properties.type == \"columnSearch\") {\r\n            cellValue = (cellValue && cellValue.id) ? cellValue.id : 0;\r\n        }\r\n\r\n        // Parse empty values\r\n        if (bizagi.util.isEmpty(cellValue)) {\r\n            // If the render is a boolean return false for actions\r\n            if (argumentType == \"boolean\") {\r\n                if (gridColumn.properties.display == \"check\") {\r\n                    return false;\r\n                } else {\r\n                    return null;\r\n                }\r\n            }\r\n        }\r\n\r\n        // Parse boolean and non-empty date types\r\n        if ((argumentType == \"boolean\") || (argumentType == \"date\" && !bizagi.util.isEmpty(self.getRender(xpath, argumentType).value))) {\r\n            return eval(self.buildArgument(cellValue, argumentType));\r\n        }\r\n\r\n        if (typeof (gridColumn) != \"undefined\" && typeof (gridColumn.properties) != \"undefined\" && typeof (gridColumn.properties.type) != \"undefined\" && gridColumn.properties.type == \"columnDate\")\r\n            cellValue = bizagi.util.dateFormatter.getDateFromInvariant(cellValue);\r\n\r\n        return cellValue;\r\n    },\r\n\r\n    /* \r\n    *   Evals an xpath to find a render and return its value\r\n    */\r\n    evalXpath: function (xpath, argumentType) {\r\n        var self = this, i, renderToEval;\r\n\r\n        var renders = self.getRenders(xpath);\r\n        if (renders == null) {\r\n            if (self.Class.THROW_ERROR) {\r\n                self.showRenderNotFoundError(xpath);\r\n            }\r\n            return null;\r\n        }\r\n\r\n        var rendersToEval = [];\r\n        $.each(renders, function (i, render) {\r\n            if (render.properties.editable) {\r\n                rendersToEval.push(render);\r\n            }\r\n        });\r\n\r\n        // If no render has been found skip editable validation\r\n        if (rendersToEval.length === 0) {\r\n            $.each(renders, function (i, render) {\r\n                rendersToEval.push(render);\r\n            });\r\n        }\r\n\r\n        i = 0;\r\n        while (i < rendersToEval.length) {\r\n            renderToEval = rendersToEval[i++];\r\n            var bIsGrid = (renderToEval.properties.type == 'grid');\r\n            if (!bIsGrid) {\r\n                // Normal renders\r\n                var value = renderToEval.getValue();\r\n                var renderType = bizagi.util.normalizeType(renderToEval.properties.type || \"\");\r\n\r\n                if (argumentType === undefined || argumentType === \"undefined\") {\r\n                    return value;\r\n                }\r\n\r\n                // If the render is a combo and the value is null return 0 for validations and actions\r\n                if ([\"combo\", \"list\", \"search\", \"radio\"].includes(renderType) || /^cascadingcombo$/i.test(renderType)) {\r\n                    if (bizagi.util.isEmpty(value) || value.id == \"\") {\r\n                        value = 0;\r\n                    }\r\n                }\r\n\r\n                if (renderType === \"comboSelected\") {\r\n                    return (typeof value === \"string\") ? JSON.parse(value).value : value;\r\n                }\r\n\r\n                if (bizagi.util.isEmpty(value)) {\r\n                    // If the render is a check and the value is null return false for validations and actions\r\n                    if (renderType === \"boolean\" && renderToEval.properties.display === \"check\") {\r\n                        return false;\r\n                    }\r\n\r\n                    if (bizagi.util.isEmpty(value)) {\r\n                        // If the render is a check and the value is null return false for validations and actions\r\n                        if (renderType === \"boolean\" && renderToEval.properties.display === \"check\") {\r\n                            return false;\r\n                        }\r\n                    }\r\n\r\n                    return value;\r\n                }\r\n\r\n                if (argumentType === \"xpath\") {\r\n                    return eval(self.buildArgument(xpath, argumentType));\r\n                } else {\r\n                    return eval(self.buildArgument(value, argumentType));\r\n                }                \r\n            } else {\r\n\r\n                // Grid renders\r\n                var gridXpath = self.processGridXpath(xpath);\r\n\r\n                // Return the value\r\n                var gridColumn = renderToEval.getColumn(gridXpath.remainingXpath);\r\n\r\n                if (!gridColumn) {\r\n                    continue;\r\n                }\r\n\r\n                var cellValue = renderToEval.getCellCurrentValue(gridXpath.index, gridXpath.remainingXpath);\r\n\r\n                if (gridColumn.properties.type == \"columnRadio\") {\r\n                    if (cellValue && !bizagi.util.isString(cellValue)) {\r\n                        if (cellValue.length > 0 && cellValue[0].length > 0)\r\n                            cellValue = cellValue[0][0];\r\n                        else\r\n                            cellValue = cellValue.id;\r\n                    }\r\n                    else if(!bizagi.util.isString(cellValue))\r\n                        cellValue = 0;\r\n                }\r\n\r\n                if (gridColumn.properties.type == \"columnCombo\" || gridColumn.properties.type == \"columnSearch\" || gridColumn.properties.type == \"columnList\") {\r\n                    if(cellValue && cellValue.id)\r\n                        cellValue = cellValue.id;\r\n                    else if(typeof (cellValue) != \"number\" && typeof (cellValue) != \"string\")\r\n                        cellValue = 0;\r\n                }\r\n\r\n                // Parse empty values\r\n                if (bizagi.util.isEmpty(cellValue)) {\r\n                    // If the render is a boolean return false for actions\r\n                    if (argumentType == \"boolean\") {\r\n                        if (gridColumn.properties.display == \"check\") {\r\n                            return false;\r\n                        } else {\r\n                            return null;\r\n                        }\r\n                    }\r\n                }\r\n\r\n                // Parse boolean and non-empty date types\r\n                if ((argumentType == \"boolean\") || (argumentType == \"date\" && !bizagi.util.isEmpty(self.getRender(xpath, argumentType).value))) {\r\n                    return eval(self.buildArgument(cellValue, argumentType));\r\n                }\r\n\r\n                if (typeof (gridColumn) != \"undefined\" && typeof (gridColumn.properties) != \"undefined\" && typeof (gridColumn.properties.type) != \"undefined\" && gridColumn.properties.type == \"columnDate\")\r\n                    cellValue = bizagi.util.dateFormatter.getDateFromInvariant(cellValue);\r\n\r\n                return cellValue;\r\n            }\r\n\r\n            throw \"There is no a valid render for xpath \" + xpath;\r\n        }\r\n\r\n\r\n    },\r\n    /*\r\n    *   Check if the upload render has any files uploaded\r\n    */\r\n    isFileUploaded: function (xpath) {\r\n        var self = this;\r\n\r\n        var value = self.evalXpath(xpath);\r\n\r\n        if (value && value.length) {\r\n            if (value.length > 0)\r\n                return true;\r\n        }\r\n\r\n        return false;\r\n    },\r\n    /*\r\n    *   Check if a render has a valid email value\r\n    */\r\n    isValidEmail: function (value) {\r\n        var regex = /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/gi;\r\n        if (value && value.match(new RegExp(regex))) {\r\n            return true;\r\n        }\r\n        return false;\r\n    },\r\n    /**\r\n    * Compare two elements, data of html and renderId to action\r\n    */\r\n    isButtonPressed: function (control, pressed) {\r\n        // Check if the control is a button\r\n        var render = this.getRenderById(control);\r\n        if (render === null || render.properties.type != \"button\") return false;\r\n\r\n        return pressed;\r\n    },\r\n    /*\r\n    * Compare two elements, data of html and renderId to action\r\n    */\r\n    isGridButtonPressed: function (control, pressed) {\r\n        // Check if the control is a button\r\n        var arrGridXpath = this.processGridXpath(control);\r\n        var gridXpath = arrGridXpath.gridXpath;\r\n        var render = this.getRender(gridXpath);\r\n        var column = arrGridXpath.remainingXpath || \"\";\r\n\r\n\r\n        if (pressed && render && render.columns) {\r\n            $.each(render.columns, function (key, value) {\r\n                if ((value.properties.xpath === column || value.properties.id === column) && value.properties.type === \"columnButton\") {\r\n                    pressed = true;\r\n                }\r\n            });\r\n        }\r\n        return pressed;\r\n    },\r\n\r\n    /**\r\n    * Check if a control has been changed\r\n    */\r\n    isChanged: function (value, isChanged) {\r\n        if (value === undefined || value === null) {\r\n            return false;\r\n        }\r\n        return isChanged;\r\n    },\r\n\r\n    /**\r\n    * Check if a control has the item\r\n    */\r\n    includes: function (value, argument) {\r\n        if (typeof value == \"undefined\" || value === null) {\r\n            return false;\r\n        }\r\n        if (typeof argument == \"undefined\" || argument === null) {\r\n            return false;\r\n        }\r\n        var inArray = $.grep(value, function (e) {\r\n            return e.id == argument;\r\n        });\r\n        if (inArray.length > 0) {\r\n            return true;\r\n        }\r\n        return false\r\n    },\r\n\r\n    /**\r\n    *  Check if the grid has been deleted a row\r\n    */\r\n    onDeletedGridRow: function (xpath, rowDeleted) {\r\n        var self = this;\r\n        var grid = self.getRender(xpath) || {};\r\n\r\n        if (grid && rowDeleted) {\r\n            return true;\r\n        } else {\r\n            return false;\r\n        }\r\n    },\r\n\r\n    /*\r\n    *   Wrapper for get renders, return null if no renders have been found\r\n    */\r\n    getRenders: function (xpath) {\r\n        var self = this,\r\n            form = self.form,\r\n            regex = /id=([\\w-]+)/gi;\r\n        var renders = null;\r\n\r\n        // Check if the xpath is an id\r\n        var idMatches = regex.exec(xpath);\r\n        if (idMatches && idMatches.length > 1) {\r\n            var render = self.getRenderById(idMatches[1]);\r\n            if (render) {\r\n                if (render.length == 0)\r\n                    return null;\r\n                else {\r\n                    renders = [];\r\n                    renders.push(render);\r\n                    return renders;\r\n                }\r\n            } else {\r\n                return null;\r\n            }\r\n\r\n        }\r\n\r\n        renders = form.getRenders(xpath);\r\n        if (renders.length == 0)\r\n            return null;\r\n        return renders;\r\n    },\r\n    /*\r\n    *   Wrapper for get only one editable render\r\n    */\r\n    getRender: function (xpath) {\r\n        var self = this,\r\n            form = self.form;\r\n\r\n        return form.getRender(xpath);\r\n    },\r\n    /*\r\n    *   Wrapper to get a render by id\r\n    */\r\n    getRenderById: function (id) {\r\n        var self = this,\r\n            form = self.form;\r\n\r\n        return form.getRenderById(id);\r\n    },\r\n    /* \r\n    *   Helper function to detect metadata errors\r\n    */\r\n    showRenderNotFoundError: function (xpath) {\r\n        bizagi.debug(\"Cannot find render in DOM: \" + xpath);\r\n    },\r\n    /* \r\n    *   Helper function to detect metadata errors\r\n    */\r\n    showContainerNotFoundError: function (containerId) {\r\n        bizagi.debug(\"Cannot find container in DOM: \" + containerId);\r\n    },\r\n    /*\r\n    *   Returns the current date\r\n    */\r\n    getCurrentDate: function () {\r\n        var currentDate = new Date();\r\n\r\n        // Remove time\r\n        currentDate.setHours(0, 0, 0, 0);\r\n        return currentDate;\r\n    },\r\n    /*\r\n    *   Return the grid xpath parts\r\n    */\r\n    processGridXpath: function (xpath) {        \r\n        // Eval using regular expressions\r\n        var regex = new RegExp(/([\\w\\.-]*)\\[(\\d*)\\]\\.([\\w\\.|\\w-\\.]*)/g);\r\n        var matches = regex.exec(xpath);\r\n        var index, remainingXpath, gridXpath;\r\n        if (matches) {\r\n            gridXpath = matches[1];\r\n            index = matches[2];\r\n            remainingXpath = matches[3];\r\n        } else {\r\n            index = \"\";\r\n            remainingXpath = \"\";\r\n        }\r\n\r\n        return { xpath: xpath, index: index, remainingXpath: remainingXpath, gridXpath: gridXpath };\r\n    },\r\n    /*\r\n    *   Check if an action/validation contains reference to a grid\r\n    */\r\n    searchForGridReference: function (conditions, commands) {\r\n        var self = this;\r\n        var i;\r\n        // Check in conditions\r\n        if (conditions) {\r\n            return self.searchGridReferenceInCondition(conditions);\r\n        }\r\n\r\n        // Check in commands\r\n        if (commands) {\r\n            for (i in commands) {\r\n                var command = commands[i];\r\n                return self.searchForGridReferenceInCommand(command);\r\n            }\r\n        }\r\n\r\n        return null;\r\n    },\r\n    /*\r\n     *   Check if an action/validation contains reference to a grid\r\n     */\r\n    searchForGridReferenceInCommand: function(command){\r\n        if (command.xpath && command.xpath.indexOf(\"[]\") > 0) {\r\n            return command.xpath.substring(0, command.xpath.indexOf(\"[]\"));\r\n        }\r\n\r\n        // Check in argument if argumentType is xpath\r\n        if (command.argumentType == 'xpath') {\r\n            if (command.argument.indexOf(\"[]\") > 0) {\r\n                return command.argument.substring(0, command.argument.indexOf(\"[]\"));\r\n            }\r\n        }\r\n    },\r\n\r\n    /*\r\n    *   Check if a condition contains reference to a grid\r\n    */\r\n    searchGridReferenceInCondition: function (condition) {\r\n        var self = this;\r\n        var bGridReferenceFound;\r\n        if (typeof (condition) === \"string\" || typeof (condition) === \"boolean\")\r\n            return null;\r\n        if (condition.expressions) {\r\n            for (i in condition.expressions) {\r\n                if(condition.expressions.hasOwnProperty(i)) {\r\n                    bGridReferenceFound = self.searchGridReferenceInCondition(condition.expressions[i]);\r\n                    if (bGridReferenceFound)\r\n                        return bGridReferenceFound;\r\n                }\r\n            }\r\n\r\n        } else if (condition.simple) {\r\n            return self.searchGridReferenceInCondition(condition.simple);\r\n\r\n        } else if (condition.complex) {\r\n            return self.searchGridReferenceInCondition(condition.complex);\r\n        } else {\r\n            // Looking for grid reference within xpath\r\n            if (condition.xpath || condition.renderId) {\r\n                // Check in condition.xpath\r\n                bGridReferenceFound = self.searchGridReferenceInXpath(condition.xpath) || self.searchGridReferenceInXpath(condition.renderId);\r\n                if (bGridReferenceFound)\r\n                    return bGridReferenceFound;\r\n\r\n                // Check in argument if argumentType is xpath\r\n                if (condition.argumentType == 'xpath') {\r\n                    bGridReferenceFound = self.searchGridReferenceInXpath(condition.argument);\r\n                    if (bGridReferenceFound)\r\n                        return bGridReferenceFound;\r\n\r\n                }\r\n\r\n            }\r\n        }\r\n\r\n        return null;\r\n    },\r\n    /*\r\n    *   Check if a xpath contains a grid reference\r\n    */\r\n    searchGridReferenceInXpath: function (xpath) {\r\n        // Check in condition.xpath\r\n        if (xpath && xpath.indexOf(\"[]\") > 0) {\r\n            return xpath.substring(0, xpath.indexOf(\"[]\"));\r\n        }\r\n        return null;\r\n    },\r\n    getGridControl: function (xpath, surrogateKey) {\r\n        var self = this;\r\n        var remainingXpath = self.processGridXpath(xpath).remainingXpath;\r\n        var grid = self.getRender(xpath);\r\n        var column = grid.getControlCell(surrogateKey, remainingXpath);\r\n\r\n        return column;\r\n\r\n    }\r\n\r\n});\r\n","/**\r\n *   Name: Bizagi Rendering Validation controller\r\n *   Author: Diego Parra\r\n *   Comments:\r\n *   -   This script will parse and execute all the validations defined for the form\r\n */\r\n\r\nbizagi.command.controllers.controller.extend(\"bizagi.command.controllers.validation\", {}, {\r\n\r\n    /* \r\n    *   Constructor\r\n    */\r\n    init: function (form, validations, mainForm) {\r\n        var self = this;\r\n\r\n        // Enable evalValidation function with console log trace\r\n        self.enableDebug = false;\r\n\r\n        // Call base\r\n        this._super(form);\r\n\r\n        var container = mainForm != undefined ? mainForm.container : form.container;\r\n\r\n        var validationBox = $('<div />').appendTo(container);\r\n\r\n        //Notifies that a modal view appear/disappear\r\n        $.widget( \"ui.bizagi_notifications\", $.ui.bizagi_notifications, {\r\n            expand: function() {\r\n                this._super();\r\n                self.form.triggerGlobalHandler(\"modalViewDidAppear\", {});\r\n            },\r\n            collapse: function() {\r\n                this._super();\r\n                self.form.triggerGlobalHandler(\"modalViewDidDisappear\", {});\r\n            },\r\n            hide: function() {\r\n                this._super();\r\n                self.form.triggerGlobalHandler(\"modalViewDidDisappear\", {});\r\n            }\r\n        });\r\n\r\n        // Apply plugin\r\n        validationBox.bizagi_notifications({\r\n            itemIcon: \"ui-icon-circle-close\",\r\n            minimized: false,\r\n            clearEnabled: false,\r\n            title: form.getResource(\"render-form-validations-header-text\"),\r\n            device: bizagi.util.detectDevice(),\r\n            orientation: form.properties.orientation\r\n        });\r\n\r\n        // Bind click\r\n        validationBox.bind(\"itemClick\", function (e, ui) {\r\n            self.onNotificationClick(ui.data);\r\n        });\r\n\r\n        // Build validations\r\n        if (validations)\r\n            self.buildValidations(validations);\r\n\r\n        // Keep references\r\n        self.validationBox = validationBox;\r\n        self.validations = validations || [];\r\n    },\r\n\r\n\r\n    /* \r\n    *   Method to incorporate automatic validation rules \r\n    */\r\n    buildValidations: function (validations) {\r\n        var self = this;\r\n        var fnValidations = self.buildAllValidations(validations);\r\n\t\r\n        self.form.bind(\"rendervalidate\", function () {\r\n            return fnValidations(self);\r\n        });\r\n    },\r\n\r\n    /* \r\n    *   Method to add a simple error message in the validation box\r\n    */\r\n    showErrorMessage: function (message) {\r\n        bizagi.showErrorAlertDialog = false;\r\n        this.showValidationMessage(message, null, \"ui-icon-circle-close\", \"ui-state-error\");\r\n    },\r\n\r\n    /* \r\n    *   Method to add a simple alert message in the validation box\r\n    */\r\n    showAlertMessage: function (message) {\r\n        this.showValidationMessage(message, null, \"ui-icon-alert\", \"ui-state-highlight\");\r\n    },\r\n\r\n    /* \r\n    *   Method to add a simple info message in the validation box\r\n    */\r\n    showInfoMessage: function (message) {\r\n        this.showValidationMessage(message, null, \"ui-icon-info\", \"ui-state-highlight\");\r\n    },\r\n\r\n    /* \r\n    *   Method to add a simple validation message in the validation box\r\n    */\r\n    showValidationMessage: function (message, focus, icon, itemAdditionalClass, type, renderId) {\r\n        var self = this;\r\n        var form = self.form;\r\n        var render = null;\r\n\r\n        if (renderId) {\r\n            render = form.getRenderById(renderId) || null;\r\n        } else {\r\n            render = focus ? form.getRender(focus) : null;\r\n        }\r\n\r\n        bizagi.showErrorAlertDialog = false;\r\n\r\n        // Method to perform validations after the render has been changed, or the notifications has been clicked\r\n        var performValidationFn = function () {\r\n            // First hide and clear validation box\r\n            self.clearValidationMessages();\r\n\r\n            var lastActionButton = form ? form.getLastActionButton() : {};\r\n            var skipValidation = lastActionButton && lastActionButton.action === \"nextWithoutValidations\";\r\n\r\n            if (!skipValidation) {\r\n                // Run validations\r\n                self.validating = true;\r\n                self.performValidations();\r\n                self.validating = false;\r\n            }\r\n\r\n            // Attempt to hide if there are no validations\r\n            if (self.countValidationMessages() == 0) {\r\n                self.hideValidationMessages();\r\n                self.form.triggerGlobalHandler(\"modalViewDidDisappear\", {});\r\n            } else {\r\n                self.form.triggerGlobalHandler(\"modalViewDidAppear\", {});\r\n            }\r\n\r\n            //form.triggerGlobalHandler(\"modalViewDidDisappear\", {});\r\n        };\r\n        self.form.triggerGlobalHandler(\"modalViewDidAppear\", {});\r\n        // Add message\r\n        self.validationBox.bizagi_notifications(\"addNotification\", message, focus, icon, itemAdditionalClass, performValidationFn, type, renderId);\r\n\r\n        if (render) {\r\n            // Add error message to render\r\n            render.setValidationMessage(message);\r\n\r\n            if (!bizagi.util.isIE8()) {\r\n\r\n                // Bind event when render change\r\n                if (!self.validating) render.one(\"rendervalidate\", performValidationFn);\r\n            }\r\n        }\r\n    },\r\n\r\n    /*\r\n    *   Count the number of validation messages\r\n    */\r\n    countValidationMessages: function () {\r\n        return this.validationBox.bizagi_notifications(\"count\");\r\n    },\r\n\r\n    /*\r\n    *   Remove all the validations\r\n    */\r\n    clearValidationMessages: function (params) {\r\n        var validationsBoxes = $(\".ui-bizagi-notifications-container\", \"body\").not(\".ui-bizagi-log-container\");\r\n\r\n        return validationsBoxes.bizagi_notifications(\"clearAll\", undefined, params);\r\n    },\r\n\r\n    /*\r\n    *   Hide the validation notifications box\r\n    */\r\n    hideValidationMessages: function () {\r\n        return this.validationBox.bizagi_notifications(\"hide\");\r\n    },\r\n\r\n    /*\r\n    *   Show the validation notifications box\r\n    */\r\n    showValidationMessages: function () {\r\n        return this.validationBox.bizagi_notifications(\"show\");\r\n    },\r\n\r\n    /*\r\n    *   Expand the notification box\r\n    */\r\n    expandNotificationBox: function (autofocus) {\r\n        // Select first error and expand notifications\r\n        if (autofocus !== false) this.validationBox.bizagi_notifications(\"autoFocusFirstError\");\r\n        return this.validationBox.bizagi_notifications(\"expand\");\r\n    },\r\n\r\n    isExpandedNotificationBox: function(){        \r\n        return this.validationBox.bizagi_notifications(\"isExpanded\") && this.validationBox.bizagi_notifications(\"isContentVisible\");\r\n    },\r\n\r\n    /*\r\n    *   Run all validation rules in the form container\r\n    */\r\n    performValidations: function (invalidElements) {\r\n        var self = this;\r\n\r\n        // First hide and clear validation box\r\n        self.clearValidationMessages();\r\n        self.validationBox.bizagi_notifications(\"initBatch\");\r\n\r\n        // Run render validations\r\n        var bRendersValid = self.validateRenders(invalidElements);\r\n\r\n        // Run form validations\r\n        var bFormValid = self.validations.length > 0 ? self.form.triggerHandler(\"rendervalidate\") : true;\r\n        self.validationBox.bizagi_notifications(\"endBatch\");\r\n\r\n        // Show validations if invalid\r\n        if (!bFormValid || !bRendersValid) {\r\n            self.validationBox.bizagi_notifications(\"show\");\r\n            return false;\r\n        }\r\n\r\n        return true;\r\n    },\r\n\r\n    /* PRIVATE METHODS */\r\n\r\n    /*  \r\n    *   Construct validations javascript rules\r\n    */\r\n    buildAllValidations: function (validations) {\r\n        var self = this;\r\n        var sJSCode = \"\";\r\n\r\n        for (var i = 0; i < validations.length; i++) {\r\n\r\n            var isEnabled = (validations[i].enabled != undefined) ? validations[i].enabled : true;\r\n            if (isEnabled) {\r\n                // If validation is not \"valid\" we can omit that instruction\r\n                try {\r\n                    sJSCode += self.buildValidation(validations[i].conditions, validations[i].validationCommand);\r\n                } catch (e) {\r\n                    if (e.message != \"RenderNotFoundException\") {\r\n                        bizagi.logError(\"Validation cannot be parsed: \" + e.message, validations[i]);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        // Build final function\r\n        var sStatement = \"var baTmpFn = function(self, params){\\r\\n var bValid = true;\\r\\n \" + sJSCode + \"\\r\\n return bValid;}; baTmpFn\";\r\n\r\n        // Return interpreted function\r\n        return self.evalValidation(sStatement);\r\n    },\r\n\r\n    /*\r\n    *   Build a single javascript validation rule\r\n    */\r\n    buildValidation: function (conditions, validationCommand) {\r\n        var self = this;\r\n        var sJsCondition = \"\";\r\n        var sJsValidation = \"\";\r\n\r\n        // Detect grid references\r\n        var gridReference = self.searchForGridReference(conditions);\r\n        var bGridDetected = (gridReference != null);\r\n\r\n        // Build Conditions\r\n        sJsCondition += \"( \" + self.buildConditions(conditions, bGridDetected, true) + \" )\";\r\n\r\n        // Fix message for quotes and break lines\r\n        validationCommand.message = validationCommand.message.replace(/'/g, \"\\\\'\");\r\n        validationCommand.message = validationCommand.message.replace(/\\n/g, \" \");\r\n        \r\n        // Build Message\r\n        var focus = validationCommand.focus || \"\";\r\n        if (bGridDetected) focus = gridReference;\r\n        if (validationCommand.tokens)\r\n            sJsValidation += \"self.showValidationMessage(' \" + validationCommand.message + \"', '\" + focus + \"', JSON.parse('\" + JSON.encode(validationCommand.tokens) + \"')); bValid = false;\\r\\n\";\r\n        else\r\n            sJsValidation += \"self.showValidationMessage(' \" + validationCommand.message + \"', '\" + focus + \"'); bValid = false;\\r\\n\";\r\n\r\n        // Build final statement\r\n        if (!bGridDetected) {\r\n\r\n\r\n            return \"if (\" + sJsCondition + \"){\\r\\n \" + sJsValidation + \" \\r\\n}\";\r\n        } else {\r\n            var sGridStatement = \"var grid = self.form.getRender('\" + gridReference + \"');\\r\\n\";\r\n            sGridStatement += \"if(grid === null) return true;\\r\\n\";\r\n            sGridStatement += \"var data = grid.getIndexes();\\r\\n\";\r\n            sGridStatement += \"var bGridValid = true;\\r\\n\";\r\n            sGridStatement += \"$.each(data, function(_, i) {\\r\\n\";\r\n            sGridStatement += \"if (\" + sJsCondition + \"){\\r\\n bGridValid = false; \\r\\n}\";\r\n            sGridStatement += \"});\\r\\n\";\r\n            sGridStatement += \"if (bGridValid == false){\\r\\n \" + sJsValidation + \"\\r\\n}\";\r\n            return sGridStatement;\r\n        }\r\n    },\r\n\r\n    /* \r\n    *   Method triggered when the validation item has been clicked\r\n    */\r\n    onNotificationClick: function (data) {\r\n        var self = this;\r\n        var form = self.form;\r\n        var xpath = data.focus;\r\n        var renderId = data.id;\r\n\r\n        if (xpath) {\r\n            var render = renderId ? form.getRenderById(renderId) : form.getRender(xpath);\r\n\r\n            if (render) {\r\n                render.focus();\r\n            }\r\n        }\r\n    },\r\n\r\n    /* \r\n    *   Method to loop\r\n    */\r\n    validateRenders: function (invalidElements) {\r\n        var self = this;\r\n        invalidElements = invalidElements || [];\r\n\r\n        // Do a check\r\n        var bValid = self.form.isValid(invalidElements);\r\n        if (!bValid) {\r\n            invalidElements.forEach(function(element){\r\n                if( element.id ) {\r\n                    // Parameters: message, xpath, icon, itemAdditionalClass, type, renderId\r\n                    self.showValidationMessageById(element.message, element.xpath, element.id);\r\n                } else if (element.message || element.xpath) {\r\n                    self.showValidationMessage(element.message, element.xpath);\r\n                }\r\n            });            \r\n        }\r\n\r\n        return bValid;\r\n    },\r\n\r\n    /*\r\n    *\tEval validation string, for debug purposes\r\n    */\r\n    evalValidation: function (command) {\r\n        var self = this;\r\n\r\n        if (self.enableDebug && console != undefined) {\r\n            console.log(command);\r\n        }\r\n\r\n        return eval(command);\r\n    },\r\n\r\n    /**\r\n     * Method to add a simple validation message in the validation box\r\n     * @param message\r\n     * @param xpath\r\n     * @param renderId\r\n     */\r\n    showValidationMessageById: function (message, xpath, renderId) {\r\n        this.showValidationMessage(message, xpath, undefined, false, undefined, renderId);\r\n    }\r\n\r\n});\r\n","/*\r\n *   Name: Bizagi Rendering Validation controller\r\n *   Author: Diego Parra\r\n *   Comments:\r\n *   -   This script will parse and execute all the validations defined for the form\r\n */\r\n\r\nbizagi.command.controllers.controller.extend(\"bizagi.command.controllers.action\", {}, {\r\n    /* \r\n    *   Constructor\r\n    */\r\n    init: function (form, actions) {\r\n        var self = this;\r\n\r\n        // Call base\r\n        this._super(form);\r\n\r\n        // Set a new hash containing all the dependencies subscribing the events\r\n        self.globalDependencies = {};\r\n        self.initialCallFunctions = {};\r\n        self.funtionsToExecuteARefreshCommand = [];\r\n        self.initialCallFunctionsDeferred = new $.Deferred();        \r\n\r\n        // Build actions\r\n        if (actions)\r\n            self.buildActions(actions);\r\n\r\n        // Keep references\r\n        self.actions = actions;\r\n        self.internalSubmitActions = {};\r\n\r\n        // Set initial timer to trigger initial functions using a setTimeout, and distributing them in differente timespans\r\n        self.initialCallTimeout = 25;\r\n        self.initialCallIncrements = 25;\r\n        self.actionsHistory = {};\r\n        self.period = 50;\r\n    },\r\n    /*\r\n    *   Adds an internal submit action to be executed with all the given rules\r\n    */\r\n    processInternalSubmitAction: function (xpath, action) {\r\n        var self = this;\r\n\r\n        // if the action is registered, don't add it again\r\n        // only one internal submit action is allowed per control\r\n        if (self.internalSubmitActions[xpath])\r\n            return;\r\n\r\n        // Add to hash and build it\r\n        self.internalSubmitActions[xpath] = action;\r\n        self.buildAction(action, true);\r\n    },\r\n\r\n    isSummaryOrGlobalForm: function () {\r\n        var self = this;\r\n        var result = false;\r\n\r\n        if (self.form.properties.typeForm === \"SummaryForm\" || self.form.properties.typeForm === \"GlobalForm\") result = true;\r\n        return result;\r\n    },\r\n\r\n    evalClientAction: function (action) {\r\n        var self = this, i = 0, serverCommand = false, command;\r\n        var commands = [].concat(action.commands, action.elseCommands);\r\n        var length = commands.length;\r\n\r\n        for (; i < length; i++) {\r\n            command = commands[i];\r\n            if (!self.isClientAction(command)) {\r\n                serverCommand = true;\r\n                break;\r\n            }\r\n        }\r\n\r\n        if (serverCommand) {\r\n            action.enabled = false;\r\n        }\r\n    },\r\n\r\n    /* Process all given  actions*/\r\n    buildActions: function (actions, dontExecute) {\r\n        var self = this, i, len;\r\n        var hashes = {};\r\n        self.funtionsToExecuteARefreshCommand = [];\r\n\r\n        if (self.form.properties.displayAsReadOnly)\r\n            actions = [];\r\n\r\n        var executeOnlyClientActions = self.isSummaryOrGlobalForm();\r\n\r\n        for (i = 0, len = actions.length; i < len; i++) {\r\n            // If action is not \"valid\" we can omit that instruction\r\n            try {\r\n                var action = actions[i];\r\n                var hash = bizagi.util.md5(JSON.stringify(action.conditions));\r\n                var hashC = bizagi.util.md5(JSON.stringify(action.commands));\r\n                if (hashes[hash]) {\r\n                    if (hashes[hash].indexOf(hashC) === -1) {\r\n                        // si la condicion es igual y los comandos diferentes\r\n                        executeOnlyClientActions && self.evalClientAction(action);\r\n                        self.buildAction(action, dontExecute);\r\n                        hashes[hash].push(hashC);\r\n                    }\r\n                } else {\r\n                    executeOnlyClientActions && self.evalClientAction(action);\r\n                    self.buildAction(action, dontExecute);\r\n                    hashes[hash] = [hashC];\r\n                }\r\n            } catch (e) {\r\n                // Handle the exception\r\n                if (e.message !== \"RenderNotFoundException\") {\r\n                    bizagi.logError(\"Action cannot be parsed: \" + e.message, actions[i]);\r\n                }\r\n            }\r\n        }\r\n    },\r\n    /*\r\n    *   Remove all current handlers\r\n    */\r\n    unbindActions: function () {\r\n        var self = this;\r\n\r\n        // Remove all previous handlers\r\n        $.each(self.globalDependencies, function (i, render) {\r\n            render.unbind(\"renderchange.action\");\r\n        });\r\n\r\n        self.globalDependencies = {};\r\n\r\n        // Reset timers and collections\r\n        $.each(self.initialCallFunctions, function (i, handle) {\r\n            clearTimeout(handle);\r\n        });\r\n        self.initialCallFunctions = {};\r\n    },\r\n    /* \r\n    *   Re-execute actions, cleaning the handlers first\r\n    */\r\n    refreshActions: function (newActions) {\r\n        var self = this;\r\n\r\n        self.initialCallTimeout = 25;\r\n        self.initialCallFunctions = {};\r\n\r\n        newActions = newActions || [];\r\n\r\n        // Build the actions again\r\n        self.actions = self.actions.concat(newActions);\r\n        self.buildActions(self.actions, true);\r\n\r\n        // Build internal actions again\r\n        $.each(self.internalSubmitActions, function (_, action) {\r\n            try {\r\n                self.buildAction(action, false);\r\n            } catch (e) {\r\n                // Handle the exception\r\n                if (e.message !== \"RenderNotFoundException\") {\r\n                    bizagi.logError(\"Action cannot be parsed: \" + e.message, action);\r\n                }\r\n            }\r\n        });\r\n    },\r\n    /* Process a single action*/\r\n    buildAction: function (action, dontExecute) {\r\n        var self = this;\r\n        var form = self.form;\r\n        var dependencies = [];\r\n        var dependenciesId = [];\r\n\r\n        var isEnabled = (action.enabled != undefined) ? action.enabled : true;\r\n\r\n        if (!isEnabled) return;\r\n\r\n        // If the condition operator is true, we gotta dig in the actions to check if it modifies a grid\r\n        // To include an auto-dependency, so each time the grid is changed that condition will be executed\r\n        if (action.conditions && action.conditions.operator == \"true\") {\r\n            if (!action.dependencies)\r\n                action.dependencies = [];\r\n            $.each(action.commands, function (_, command) {\r\n                var gridReference = self.searchGridReferenceInXpath(command.xpath);\r\n                if (gridReference) {\r\n                    var dependencyAlreadyAdded = false, j, len;\r\n                    for (j = 0, len = action.dependencies; j < len; j++) {\r\n                        if (action.dependencies[j] == gridReference)\r\n                            dependencyAlreadyAdded = true;\r\n                    }\r\n                    if (!dependencyAlreadyAdded)\r\n                        action.dependencies.push(gridReference);\r\n                }\r\n            });\r\n        }\r\n\r\n        function isValidDependency(type) {\r\n            var notValid = [\"groupedgrid\", \"collectionnavigator\"];\r\n            if (notValid.indexOf(type) === -1) {\r\n                return true;\r\n            } else {\r\n                return false;\r\n            }\r\n        }\r\n\r\n\r\n        // Find dependencies to attach triggers\r\n        if (action.dependencies) {\r\n            for (var i = 0; i < action.dependencies.length; i++) {\r\n                if (typeof action.dependencies[i] != \"undefined\") {\r\n                    var renders = form.getRenders(action.dependencies[i]);\r\n                    if (renders.length === 0) {\r\n                        var renderById = form.getRenderById(action.dependencies[i]);\r\n                        renders = (renderById) ? [renderById] : null;\r\n                    }\r\n\r\n                    if (renders) {\r\n                        $.each(renders, function (_, render) {\r\n                            if ($.inArray(render.properties.id, dependenciesId) < 0) {\r\n                                if (isValidDependency(render.properties.type)) {\r\n                                    dependenciesId.push(render.properties.id);\r\n                                    dependencies.push(render);\r\n                                }\r\n                            }\r\n                        });\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        // Build anonymous function\r\n        var fn = self.buildFunction(action.conditions, action.commands, action.elseCommands);                \r\n                \r\n        var actionDependecies = function(fn){\r\n            this.commandDependencies =  \r\n                action.commands.concat(action.elseCommands).map(function(command){\r\n                    return command.xpath || command.container || command.renderId; \r\n                });\r\n\r\n            this.commandNames =  \r\n                action.commands.concat(action.elseCommands).map(function(command){\r\n                    return command.command; \r\n                });\r\n            \r\n            this.fn = fn;    \r\n        }\r\n        \r\n        actionDependecies.prototype =  {\r\n            hasDependency: function(xpath){\r\n                if (xpath == null)\r\n                    return false;\r\n\r\n                return this.commandDependencies.indexOf(xpath) >= 0;                       \r\n            },\r\n            \r\n            hasRefreshCommand: function(){\r\n                return this.commandNames.indexOf('refresh') >= 0;  \r\n            },\r\n            execute: function(args){\r\n                return fn(self, args);\r\n            }\r\n        }         \r\n      \r\n        self.funtionsToExecuteARefreshCommand = self.funtionsToExecuteARefreshCommand || [];\r\n        var actionDependeciesIntance = new actionDependecies(fn);\r\n        if (!actionDependeciesIntance.hasRefreshCommand()){\r\n            self.funtionsToExecuteARefreshCommand.push(actionDependeciesIntance);\r\n        }\r\n        \r\n        // Attach handlers\r\n        $.each(dependencies, function (_, render) {\r\n            render.bind(\"renderchange.action\", function (ev, args) {\r\n                args = args || {};\r\n\r\n                // Default changed argument to true\r\n                args.changed = args.changed !== undefined ? args.changed : true;\r\n\r\n                // If a grid action has been performed, try to filter it by column, to avoid execute all grid actions each time                \r\n                if (args.column) {\r\n                    for (var j = 0; j < action.gridColumns.length; j++) {\r\n                        if (args.column == action.gridColumns[j]) {\r\n                            // Call function\r\n                            fn(self, args);\r\n                            return;\r\n                        }\r\n                    }\r\n                } else {\r\n                    // Call function\r\n                    fn(self, args);\r\n                }\r\n            });\r\n\r\n            // Add to global dependencies hash\r\n            self.globalDependencies[render.properties.id] = render;\r\n\r\n            // If render is a grid ... trigger function at this point\r\n            if (render.properties.type === 'grid') {\r\n                dontExecute = true;\r\n\r\n                // Search column dependencies\r\n                action.gridColumns = [];\r\n                self.searchGridColumns(action.conditions, action.gridColumns);\r\n            }\r\n        });\r\n\r\n        // Check if it has to execute\r\n        if (dontExecute)\r\n            return;\r\n\r\n        // Execute the action because it must execute when the page loads with pre-defined value\r\n        // Create an async function to trigger it later\r\n        var asyncFn = function (self) {\r\n\r\n            var guid = Math.guid();\r\n            // Create the timeout\r\n            var handle = setTimeout(function () {\r\n                try {\r\n                    // TODO: Define render to set parameter to \"fn\" function\r\n                    fn(self);\r\n                    delete self.initialCallFunctions[guid];\r\n                } catch (e) {\r\n                }\r\n                finally{\r\n                    clearTimeout(handle);\r\n                }\r\n            }, self.initialCallTimeout);\r\n\r\n            // Save a reference\r\n            self.initialCallFunctions[guid] = handle;\r\n            self.initialCallTimeout += self.initialCallIncrements;\r\n        };\r\n\r\n        // Run it\r\n        asyncFn(self);\r\n    },\r\n    \r\n    \r\n    tryToExecuteFunction: function(xpath) {\r\n        if (bizagi.override && bizagi.override.enableExecuteRefreshAction === true) {\r\n            for (var index = 0; index < this.funtionsToExecuteARefreshCommand.length; index++) {\r\n                var fn = this.funtionsToExecuteARefreshCommand[index];\r\n\r\n                if (fn.hasDependency(xpath)) {\r\n                    fn.execute();\r\n                }\r\n            }\r\n        }\r\n    },\r\n    \r\n    /*\r\n    * Creates the function to execute based on the action metadata\r\n    */\r\n    buildFunction: function (conditions, commands, elseCommands) {\r\n        var self = this;\r\n\r\n        var gridReference = self.searchForGridReference(conditions, commands);\r\n        var bGridDetected = (gridReference != null) ? gridReference : false;\r\n        var sJsCondition = \"\";\r\n        var sJsAction = \"\";\r\n        var sStatement;\r\n        var sJsElseAction = \"\";\r\n        var bAutomaticRestore = elseCommands ? false : true;\r\n        var bCondition = conditions ? true : false;\r\n        var i;\r\n\r\n        // Build Condition\r\n        if (bCondition) {\r\n            sJsCondition += self.buildConditions(conditions, bGridDetected);\r\n        }\r\n\r\n        // Build and execute actions\r\n        for (i = 0; i < commands.length; i++) {\r\n            // Parse command\r\n            var queueAction = self.isServerCommand(commands[i]) ? \"addParallel\" : \"add\";\r\n            var command = self.buildCommand(commands[i], bGridDetected);\r\n\r\n            // Check if command ending with semicolon and remove it\r\n            command = (command.indexOf(\";\") >= 1) ? command.replace(\";\", \"\") : command;\r\n            sJsAction += \"actionQueue.\" + queueAction + \"(function(){return \" + command + \" ;}); \\r\\n\";\r\n\r\n            if (bAutomaticRestore) {\r\n                sJsElseAction += self.buildRestoreCommand(commands[i], bGridDetected);\r\n            }\r\n        }\r\n\r\n        // Build non-automatic else commands\r\n        if (!bAutomaticRestore) {\r\n            sJsElseAction += \"var actionQueue = new bizagiQueue(); \\r\\n\";\r\n            sJsElseAction += \"if (params.render){params.render.startActionExecution();} \\r\\n\";\r\n            for (i = 0; i < elseCommands.length; i++) {\r\n                var queueAction = self.isServerCommand(elseCommands[i]) ? \"addParallel\" : \"add\";\r\n                var elseCommand = self.buildCommand(elseCommands[i], bGridDetected);\r\n                // Check if command ending with semicolon and remove it\r\n                elseCommand = (elseCommand.indexOf(\";\") >= 1) ? elseCommand.replace(\";\", \"\") : elseCommand;\r\n                sJsElseAction += \"actionQueue.\" + queueAction + \"(function(){return \" + elseCommand + \" ;}); \\r\\n\";\r\n            }\r\n            sJsElseAction += \"var execute = actionQueue.execute().always(function(){ \\r\\n\";\r\n            sJsElseAction += \"if (params.render){ params.render.endActionExecution();} \\r\\n });\\r\\n\";\r\n            sJsElseAction += \"self.form.appendWaitForLoader({ promise: execute, create: true });\\r\\n\";\r\n        }\r\n\r\n        // Build final function\r\n        //sStatement = \"var baTmpFn = function(self, i, column){ \\r\\n\";\r\n        sStatement = \"var baTmpFn = function(self, params){ \\r\\n\";\r\n        sStatement += \"params = params || {};\\r\\n\";\r\n        if (bGridDetected) {\r\n            sStatement += \"var i = params.key;\\r\\n\";\r\n            sStatement += \"var column = params.column;\\r\\n\";\r\n        }\r\n        if (bCondition) {\r\n            sStatement += \"if (\" + sJsCondition + \"){ \\r\\n\";\r\n        }\r\n\r\n        // Creates defferreds\r\n        sStatement += \"var actionQueue = new bizagiQueue(); \\r\\n\";\r\n        sStatement += \"if (params.render){params.render.startActionExecution();} \\r\\n\";\r\n        sStatement += sJsAction;\r\n        sStatement += \"var execute = actionQueue.execute().always(function(){ \\r\\n\";\r\n        sStatement += \"if (params.render){ params.render.endActionExecution();} \\r\\n });\\r\\n\";\r\n        sStatement += \"self.form.appendWaitForLoader({ promise: execute, create: true });\\r\\n\";\r\n\r\n        if (bCondition) {\r\n            sStatement += \"\\r\\n } \";\r\n            if (sJsElseAction.length > 0) {\r\n                sStatement += \"else { \\r\\n\" + sJsElseAction + \" }\\r\\n\";\r\n            }\r\n        }\r\n\r\n        sStatement += \"};\\r\\n\";\r\n\r\n\r\n        if (!bGridDetected) {\r\n            sStatement += \"baTmpFn\";\r\n        } else {\r\n            var sGridStatement = \"var baGridTmpFn = function(self, args){ \\r\\n\";\r\n            sGridStatement += \"args = args || {};\\r\\n\";\r\n            sGridStatement += \"\\t var grid = args.render || self.form.getRender('\" + gridReference + \"') || []; \\r\\n\";\r\n            sGridStatement += \"\\t grid = grid.grid ? grid : (self.form.getRender('\" + gridReference + \"') || []); \\r\\n\";\r\n            sGridStatement += \"\\t args.grid = grid; \\r\\n\";\r\n            sGridStatement += \"if(args.surrogateKey === undefined){\\r\\n\";\r\n            sGridStatement += \"\\t var data = grid.getIndexes();\\r\\n\";\r\n            sGridStatement += \"\\t $.each(data, function(i, index) {\\r\\n\";\r\n            sGridStatement += \"\\t\\t args.key = index; \\r\\n\";\r\n            sGridStatement += \"\\t\\t baTmpFn(self, args);\\r\\n\";\r\n            sGridStatement += \"\\t });\\r\\n\";\r\n            sGridStatement += \"} else {\\r\\n\";\r\n            sGridStatement += \"\\t args.key = args.surrogateKey; \\r\\n\";\r\n            sGridStatement += \"\\t\\t baTmpFn(self, args ); \\r\\n\";\r\n            sGridStatement += \"}\\r\\n\";\r\n            sGridStatement += \"};\\r\\n\";\r\n            sStatement += sGridStatement;\r\n            sStatement += \"baGridTmpFn\";\r\n        }\r\n\r\n        // Return interpreted function\r\n        return eval(sStatement);\r\n    },\r\n\r\n    /*\r\n    *   This method checks if a command must be performed by the client, or by the server\r\n    */\r\n    isServerCommand: function (command) {\r\n        var commandType = command.command;\r\n\r\n        return [\"refresh\", \"submit-data\", \"execute-rule\", \"execute-interface\", \"execute-sap\", \"execute-connector\", \"execute-excel-bot\"].includes(commandType);\r\n    },\r\n\r\n    isClientAction: function (command) {\r\n        var commandType = command.command;\r\n\r\n        return [\"background-color\", \"forecolor\", \"visible\", \"required\", \"collapse\", \"set-active\"].includes(commandType);\r\n    },\r\n\r\n    isRecentAction: function (prefix, command) {\r\n        var self = this;\r\n        var tag = prefix + \"@\" + command;\r\n        if (self.actionsHistory[tag] != null) {\r\n            return true;\r\n        }\r\n        $.when(self.runAction(prefix, command)).done(function () {\r\n            delete self.actionsHistory[tag];\r\n            bizagi.log(\"resolve \" + tag);\r\n        });\r\n        return false;\r\n    },\r\n\r\n    runAction: function (prefix, command) {\r\n        var self = this;\r\n        var tag = prefix + \"@\" + command;\r\n        self.actionsHistory[tag] = new $.Deferred();\r\n        setTimeout(self.actionsHistory[tag].resolve, self.period);\r\n        return self.actionsHistory[tag].promise();\r\n    },\r\n    /*\r\n    *   Builds the action JS\r\n    */\r\n    buildCommand: function (command, bGridDetected) {\r\n        var self = this;\r\n\r\n        // Define if a grid has been detected\r\n        bGridDetected = bGridDetected || false;\r\n\r\n        var gridReference = bGridDetected;\r\n\r\n        // Parse argument\r\n        var commandType = command.command;\r\n        var detectedArgumentType = self.detectCommandArgumentType(command.argumentType, commandType);\r\n        var argument = self.buildArgument(command.argument, detectedArgumentType, bGridDetected, command.xpathContext);\r\n        var xpath = command.xpath;\r\n\r\n        var commandGridDetected = self.searchForGridReferenceInCommand(command);\r\n        if (commandGridDetected && command.containerId){\r\n            var gridXpathInfo = self.processGridXpath(xpath)            \r\n            xpath = gridXpathInfo.gridXpath + \".\" + command.containerId + \"[].\" + gridXpathInfo.remainingXpath + \".\" + command.renderId;\r\n        }\r\n        else if (xpath && command.renderId){\r\n            xpath = xpath + \".\" + command.renderId;\r\n        }\r\n        // If a render id is given, we use it with priority over only xpath\r\n        else if (command.renderId) {\r\n            xpath = \"id=\" + command.renderId + \"\";\r\n        }\r\n\r\n        // Process grid xpaths\r\n        if (bGridDetected && xpath) {\r\n            xpath = xpath.replaceAll(\"[]\", \"[' + i + ']\");\r\n        }\r\n\r\n        if ((command.xpath && command.xpath.length > 0) || (command.renderId && command.renderId.length > 0)) {\r\n            // Build render command\r\n            switch (commandType) {\r\n                case 'background-color':\r\n                    if (command.controlType === \"activityFlowButton\") {\r\n                        return \"self.changeButtonBackground('\" + xpath + \"', \" + argument + \");\";\r\n                    } else {\r\n                        return \"self.changeRenderBackground('\" + xpath + \"', \" + argument + \");\";\r\n                    }\r\n                    break;\r\n                case 'forecolor':\r\n                    if (command.controlType === \"activityFlowButton\") {\r\n                        return \"self.changeButtonForeground('\" + xpath + \"', \" + argument + \");\";\r\n                    } else {\r\n                        return \"self.changeRenderForeground('\" + xpath + \"', \" + argument + \");\";\r\n                    }\r\n                    break;\r\n                case 'visible':\r\n                    if (command.controlType === \"activityFlowButton\") {\r\n                        return \"self.changeButtonVisibility('\" + xpath + \"', \" + argument + \");\";\r\n                    } else {\r\n                        return \"self.changeRenderVisibility('\" + xpath + \"', \" + argument + \");\";\r\n                    }\r\n                    break;\r\n                case 'readonly':\r\n                    if (command.controlType === \"activityFlowButton\") {\r\n                        return \"self.changeButtonEditability('\" + xpath + \"', \" + argument + \");\";\r\n                    } else {\r\n                        return \"self.changeRenderEditability('\" + xpath + \"', '\" + argument + \"');\";\r\n                    }\r\n                    break;\r\n                case 'required':\r\n                    return \"self.changeRenderRequired('\" + xpath + \"', \" + argument + \");\";\r\n                    break;\r\n                case 'set-value':\r\n                    // Check specific argument type\r\n                    if (bGridDetected && command.argumentType === \"xpath\" && !!command.xpathContext) {\r\n                        // When we are going to evaluate a xpath is necessary add a xpathcontext if it exist\r\n                        if (typeof command.xpathContext !== \"undefined\"){\r\n                            command.argument = command.xpathContext + \".\" + command.argument;\r\n                        }\r\n                        argument = self.buildArgument(command.argument, detectedArgumentType, bGridDetected);\r\n                    }\r\n\r\n                    return \"self.changeRenderValue('\" + xpath + \"', \" + argument + \");\";\r\n                    break;\r\n                case 'set-min':\r\n                    return \"self.changeRenderMinValue('\" + xpath + \"', \" + argument + \");\";\r\n                    break;\r\n                case 'set-max':\r\n                    return \"self.changeRenderMaxValue('\" + xpath + \"', \" + argument + \");\";\r\n                    break;\r\n                case 'calculate':\r\n                    return \"self.executeCalculatedField('\" + xpath + \"');\";\r\n                    break;\r\n                case 'submit-value':\r\n                    return \"self.submitRender('\" + xpath + \"', '\" + argument + \"');\";\r\n                    break;\r\n                case 'clean-data':\r\n                    return \"self.cleanRenderData('\" + xpath + \"');\";\r\n                    break;\r\n\r\n                // New Features                                        \r\n                case 'refresh':\r\n                    commandGridDetected = self.searchForGridReferenceInCommand(command);\r\n\r\n                    if (commandGridDetected) {\r\n                        return \"self.refreshGridCell('\" + xpath + \"', \" + \"'\" + (command.xpathContext || \"\") + \"'\" + \");\";\r\n                    } else {\r\n                        return \"self.refreshControl('\" + xpath + \"', \" + \"'\" + (command.xpathContext || \"\") + \"','\" + commandType + \"');\";\r\n                    }\r\n                    break;\r\n                case 'trigger-click':\r\n                    return \"self.triggerClick('\" + xpath + \"');\";\r\n                    break;\r\n\r\n            }\r\n        } else {\r\n            // Build container command\r\n            switch (commandType) {\r\n                case 'background-color':\r\n                    return \"self.changeContainerBackground('\" + command.container + \"', \" + argument + \");\";\r\n                    break;\r\n                case 'visible':\r\n                    return \"self.changeContainerVisibility('\" + command.container + \"', \" + argument + \");\";\r\n                    break;\r\n                case 'collapse':\r\n                    return \"self.toogleContainer('\" + command.container + \"', \" + !bizagi.util.parseBoolean(argument) + \");\";\r\n                    break;\r\n                case 'set-active':\r\n                    return \"self.changeActiveItem('\" + command.container + \"');\";\r\n                    break;\r\n                case 'readonly':\r\n                    return \"self.changeContainerEditability('\" + command.container + \"', '\" + argument + \"');\";\r\n                    break;\r\n\r\n                // New Features                                        \r\n                case 'refresh':\r\n                    // Set prepare parameter to multiaction purposes \r\n                    return \"self.refreshContainer('\" + command.container + \"', \" + \"'\" + (command.xpathContext || \"\") + \"'\" + \");\";\r\n                    break;\r\n            }\r\n        }\r\n\r\n        // Global  actions without specific target\r\n        if (commandType === 'submit-data') {\r\n            return \"self.submitFormData();\";\r\n        }\r\n\r\n        if (commandType === 'execute-rule') {\r\n            var ruleObj = command.argument || {};\r\n            var guidRule = \"\";\r\n            try {\r\n                guidRule = JSON.parse(ruleObj).guid;\r\n            } catch (e) {\r\n            }\r\n\r\n            var xpathContext = command.xpathContext || \"\";\r\n            if (bGridDetected) {\r\n                var xpathContextRow = gridReference + \"[id=%s]\";\r\n                return \"self.executeRule('\" + guidRule + \"', printf('\" + xpathContextRow + \"',i) ,'\" + commandType + \"');\";\r\n            } else {\r\n                return \"self.executeRule('\" + guidRule + \"','\" + xpathContext + \"','\" + commandType + \"');\";\r\n            }\r\n        }\r\n\r\n        if (commandType === 'execute-interface') {\r\n            var interfaceObj = command.argument || {};\r\n            var guidInterface = \"\";\r\n\r\n            try {\r\n                guidInterface = JSON.parse(interfaceObj).guid;\r\n            } catch (e) {\r\n            }\r\n\r\n            xpathContext = command.xpathContext || \"\";\r\n            if (bGridDetected) {\r\n                xpathContextRow = gridReference + \"[id=%s]\";\r\n                return \"self.executeInterface('\" + guidInterface + \"', printf('\" + xpathContextRow + \"',i));\";\r\n            } else {\r\n                return \"self.executeInterface('\" + guidInterface + \"','\" + xpathContext + \"');\";\r\n            }\r\n        }\r\n\r\n        if (commandType === 'execute-sap') {\r\n            var connectorObj = command.argument || {};\r\n            var guidsap = \"\";\r\n\r\n            try {\r\n                guidsap = JSON.parse(connectorObj).guid;\r\n            } catch (e) {\r\n            }\r\n\r\n            xpathContext = command.xpathContext || \"\";\r\n            if (bGridDetected) {\r\n                xpathContextRow = gridReference + \"[id=%s]\";\r\n                return \"self.executeSAPConnector('\" + guidsap + \"', printf('\" + xpathContextRow + \"',i));\";\r\n            } else {\r\n                return \"self.executeSAPConnector('\" + guidsap + \"','\" + xpathContext + \"');\";\r\n            }\r\n        }\r\n\r\n        if (commandType === 'execute-connector' || commandType === 'execute-excel-bot') {\r\n            var connectorObj = command.argument || {};\r\n            var guidConnector = \"\";\r\n\r\n            try {\r\n                guidConnector = JSON.parse(connectorObj).guid;\r\n            } catch (e) {\r\n            }\r\n\r\n            xpathContext = command.xpathContext || \"\";\r\n            if (bGridDetected) {\r\n                xpathContextRow = gridReference + \"[id=%s]\";\r\n                return \"self.executeConnector('\" + guidConnector + \"', printf('\" + xpathContextRow + \"',i));\";\r\n            } else {\r\n                return \"self.executeConnector('\" + guidConnector + \"','\" + xpathContext + \"');\";\r\n            }\r\n        }\r\n\r\n        bizagi.log(\"There is no definition for commandType: \" + commandType);\r\n        return \"\";\r\n    },\r\n    /* \r\n    *   Builds the JS command to restore automatically a command when condition is not met\r\n    */\r\n    buildRestoreCommand: function (command, bGridDetected) {\r\n        var xpath = command.xpath;\r\n        var commandType = command.command;\r\n\r\n        // Define if a grid has been detected\r\n        bGridDetected = bGridDetected || false;\r\n\r\n        // If a render id is given, we use it with priority over only xpath\r\n        if (command.renderId) {\r\n            xpath = \"id=\" + command.renderId + \"\";\r\n        }\r\n\r\n        // Process grid xpaths\r\n        if (bGridDetected) {\r\n            xpath = xpath.replaceAll(\"[]\", \"[' + i + ']\");\r\n        }\r\n\r\n        // Build restore action\r\n        if (xpath && xpath.length > 0) {\r\n            return \"self.restoreRender('\" + xpath + \"', '\" + commandType + \"');\";\r\n        } else {\r\n            return \"self.restoreContainer('\" + command.container + \"', '\" + commandType + \"');\";\r\n        }\r\n    },\r\n    /* \r\n    *   Detect the command argument type based on the command type\r\n    */\r\n    detectCommandArgumentType: function (argumentType, commandType) {\r\n        if (argumentType === undefined) {\r\n            return argumentType;\r\n\r\n        } else if (argumentType == \"const\") {\r\n\r\n            if (commandType == 'background-color')\r\n                return 'color';\r\n            if (commandType == 'forecolor')\r\n                return 'color';\r\n            if (commandType == 'visible')\r\n                return 'boolean';\r\n            if (commandType == 'readonly')\r\n                return 'boolean';\r\n            if (commandType == 'required')\r\n                return 'boolean';\r\n            if (commandType == 'set-value')\r\n                return 'text';\r\n            if (commandType == 'collapse')\r\n                return 'boolean';\r\n            if (commandType == 'set-active')\r\n                return 'number';\r\n            if (commandType == 'set-min')\r\n                return 'text';\r\n            if (commandType == 'set-max')\r\n                return 'text';\r\n            if (commandType == 'calculate')\r\n                return undefined;\r\n            if (commandType == 'refresh')\r\n                return undefined;\r\n            if (commandType == 'submit-value')\r\n                return 'json';\r\n\r\n        } else if (argumentType === \"xpath\" || argumentType === \"entity\") {\r\n            return argumentType;\r\n        }\r\n\r\n        bizagi.log(\"There is no definition for commandType: \" + commandType);\r\n        return null;\r\n    },\r\n    /* \r\n    *   Builds the JS command to restore a render when condition is not met\r\n    */\r\n    restoreRender: function (xpath, commandType) {\r\n        var self = this;\r\n        var renders = self.getRenders(xpath);\r\n        if (renders == null) {\r\n            if (self.Class.THROW_ERROR) {\r\n                self.showRenderNotFoundError(xpath);\r\n            }\r\n            return;\r\n        }\r\n\r\n        $.each(renders, function (i, render) {\r\n            var properties = render.originalProperties;\r\n            var textFormat = properties.textFormat || {};\r\n            if (commandType == 'background-color')\r\n                self.changeRenderBackground(xpath, textFormat.background || '');\r\n            if (commandType == 'forecolor')\r\n                self.changeRenderForeground(xpath, textFormat.color || 'none');\r\n            if (commandType == 'visible')\r\n                self.changeRenderVisibility(xpath, properties.visible != undefined ? properties.visible : true);\r\n            if (commandType == 'readonly')\r\n                self.changeRenderEditability(xpath, properties.editable != undefined ? properties.editable : true);\r\n            if (commandType == 'required')\r\n                self.changeRenderRequired(xpath, properties.required != undefined ? properties.required : false);\r\n            // NOte: Command 6 does not have restoration\r\n        });\r\n    },\r\n    /* \r\n    *   Builds the JS command to restore a container when condition is not met\r\n    */\r\n    restoreContainer: function (containerId, commandType) {\r\n        var self = this;\r\n        var form = self.form;\r\n        var container = form.getContainer(containerId);\r\n        if (container == null) {\r\n            if (self.Class.THROW_ERROR) {\r\n                self.showContainerNotFoundError(xpath);\r\n            }\r\n            return;\r\n        }\r\n\r\n        var properties = container.originalProperties;\r\n        if (commandType == 'background-color')\r\n            self.changeContainerBackground(containerId, properties.backgroundColor || 'none');\r\n        if (commandType == 'visible')\r\n            self.changeContainerVisibility(containerId, properties.visible != undefined ? properties.visible : true);\r\n        if (commandType == 'collapse')\r\n            self.toogleContainer(containerId, true);\r\n        // NOte: Command 8 does not have restoration\r\n        if (commandType == 'readonly')\r\n            self.changeContainerEditability(containerId, properties.editable != undefined ? properties.editable : true);\r\n    },\r\n    /* \r\n    *   Sets a new color for the background of the render\r\n    *   Applies also to grid cells!\r\n    */\r\n    changeRenderBackground: function (xpath, argument) {\r\n        var self = this;\r\n        var renders = self.getRenders(xpath);\r\n        if (renders == null) {\r\n            if (self.Class.THROW_ERROR) {\r\n                self.showRenderNotFoundError(xpath);\r\n            }\r\n            return;\r\n        }\r\n\r\n        $.each(renders, function (i, render) {\r\n            //Detects if is the grid component, and set the desired properties\r\n            if (!self.isGridComponent(render, xpath)) {\r\n                // Normal renders\r\n                $.when(render.ready()).done(function () {\r\n                    render.changeBackgroundColor(argument);\r\n                });\r\n\r\n            } else {\r\n                // Grid renders\r\n                var gridXpath = self.processGridXpath(xpath);\r\n                $.when(render.ready()).done(function () {\r\n                    if (!bizagi.util.isEmpty(gridXpath.index)) {\r\n                        render.changeCellBackgroundColor(gridXpath.index, gridXpath.remainingXpath, argument);\r\n\r\n                    } else {\r\n                        var indexes = render.getIndexes(), j, lenIndex;\r\n                        for (j = 0, lenIndex = indexes.length; j < lenIndex; j++) {\r\n                            render.changeCellBackgroundColor(indexes[j], gridXpath.remainingXpath, argument);\r\n                        }\r\n                    }\r\n                });\r\n            }\r\n        });\r\n    },\r\n    /*\r\n     *   Sets a new color for the background of the button\r\n     *   Applies also to grid cells!\r\n     */\r\n    changeButtonBackground: function (xpath, argument) {\r\n        var self = this;\r\n        var guid = xpath.substring(3);\r\n        var element = self.form.getButton(guid);\r\n\r\n        element.css(\"background-image\", \"none\");\r\n        element.addClass(\"ui-fast-transition\");\r\n\r\n        if (typeof (element[0]) !== \"undefined\") {\r\n            element[0].style.setProperty(\"background-color\", argument, \"important\");\r\n        }\r\n    },\r\n\r\n    /* \r\n    *   Sets a new color for the foreground of the render\r\n    */\r\n    changeRenderForeground: function (xpath, argument) {\r\n        var self = this;\r\n        var renders = self.getRenders(xpath);\r\n        if (renders == null) {\r\n            if (self.Class.THROW_ERROR) {\r\n                self.showRenderNotFoundError(xpath);\r\n            }\r\n            return;\r\n        }\r\n\r\n        $.each(renders, function (i, render) {\r\n            //Detects if is the grid component, and set the desired properties\r\n            if (!self.isGridComponent(render, xpath)) {\r\n                // Normal renders\r\n                $.when(render.ready()).done(function () {\r\n                    render.changeColor(argument);\r\n                });\r\n\r\n            } else {\r\n                // Grid renders\r\n                var gridXpath = self.processGridXpath(xpath);\r\n                $.when(render.ready()).done(function () {\r\n                    if (!bizagi.util.isEmpty(gridXpath.index)) {\r\n                        render.changeCellColor(gridXpath.index, gridXpath.remainingXpath, argument);\r\n\r\n                    } else {\r\n                        var indexes = render.getIndexes(), j, lenIndex;\r\n                        for (j = 0, lenIndex = indexes.length; j < lenIndex; j++) {\r\n                            render.changeCellColor(indexes[j], gridXpath.remainingXpath, argument);\r\n                        }\r\n                    }\r\n                });\r\n            }\r\n        });\r\n    },\r\n    /*\r\n     *   Sets a new color for the foreground of the render\r\n     */\r\n    changeButtonForeground: function (xpath, argument) {\r\n        var self = this;\r\n        var guid = xpath.substring(3);\r\n        var element = self.form.getButton(guid);\r\n        element.css(\"color\", argument, \"!important\");\r\n    },\r\n    /* \r\n    *   Changes the visibility of the render\r\n    */\r\n    changeRenderVisibility: function (xpath, argument) {\r\n        var self = this;\r\n        var renders = self.getRenders(xpath);\r\n        if (renders == null) {\r\n            if (self.Class.THROW_ERROR) {\r\n                self.showRenderNotFoundError(xpath);\r\n            }\r\n            return;\r\n        }\r\n\r\n        $.each(renders, function (i, render) {\r\n            //Detects if is the grid component, and set the desired properties\r\n            if (!self.isGridComponent(render, xpath)) {\r\n                // Normal renders\r\n                $.when(render.ready()).done(function () {\r\n                    $.when(render.renderingDeferred).done(function () {\r\n                        render.changeVisibility(argument);\r\n                    });\r\n                });\r\n            } else {\r\n                // Grid renders\r\n                var gridXpath = self.processGridXpath(xpath);\r\n                $.when(render.ready()).done(function () {\r\n                    if (!bizagi.util.isEmpty(gridXpath.index)) {\r\n                        render.changeCellVisibility(gridXpath.index, gridXpath.remainingXpath, argument);\r\n\r\n                    } else {\r\n                        var indexes = render.getIndexes(), j, lenIndex;\r\n                        for (j = 0, lenIndex = indexes.length; j < lenIndex; j++) {\r\n                            render.changeCellVisibility(indexes[j], gridXpath.remainingXpath, argument);\r\n                        }\r\n                    }\r\n                });\r\n            }\r\n        });\r\n    },\r\n    /*\r\n     *   Changes the visibility of the button\r\n     */\r\n    changeButtonVisibility: function (xpath, argument) {\r\n        var self = this;\r\n        var guid = xpath.substring(3);\r\n        var element = self.form.getButton(guid);\r\n        if (bizagi.util.parseBoolean(argument) == true) {\r\n            element.show();\r\n            element.css(\"display\", \"\");\r\n        } else {\r\n            element.hide();\r\n        }\r\n    },\r\n    /* \r\n    *   Changes the editability of the render\r\n    */\r\n    changeRenderEditability: function (xpath, argument) {\r\n        var self = this;\r\n        var renders = self.getRenders(xpath);\r\n        if (renders == null) {\r\n            if (self.Class.THROW_ERROR) {\r\n                self.showRenderNotFoundError(xpath);\r\n            }\r\n            return;\r\n        }\r\n\r\n        $.each(renders, function (i, render) {\r\n            // execute commands over valid renders\r\n            if (self.isValidRender(render)) {\r\n                //Detects if is the grid component, and set the desired properties\r\n                if (!self.isGridComponent(render, xpath)) {\r\n                    // Normal renders\r\n                    $.when(render.ready()).done(function () {\r\n                        $.when(render.renderingDeferred).done(function () {\r\n                            render.changeEditability(argument);\r\n                        });\r\n                    });\r\n                } else {\r\n                    // Grid renders\r\n                    var gridXpath = self.processGridXpath(xpath);\r\n                    $.when(render.ready()).done(function () {\r\n                        if (!bizagi.util.isEmpty(gridXpath.index)) {\r\n                            render.changeCellEditability(gridXpath.index, gridXpath.remainingXpath, argument);\r\n\r\n                        } else {\r\n                            var indexes = render.getIndexes(), j, lenIndex;\r\n                            for (j = 0, lenIndex = indexes.length; j < lenIndex; j++) {\r\n                                render.changeCellEditability(indexes[j], gridXpath.remainingXpath, argument);\r\n                            }\r\n                        }\r\n                    });\r\n                }\r\n            }\r\n        });\r\n\r\n\r\n    },\r\n    /*\r\n     *   Changes the editability of the button\r\n     */\r\n    changeButtonEditability: function (xpath, argument) {\r\n        var self = this;\r\n        var guid = xpath.substring(3);\r\n        var element = self.form.getButton(guid);\r\n        if (bizagi.util.parseBoolean(argument) == true) {\r\n            element.removeAttr(\"disabled\");\r\n        } else {\r\n            element.attr(\"disabled\", \"disabled\");\r\n        }\r\n    },\r\n    /*\r\n     *  trigger Click button\r\n     */\r\n    triggerClick: function (xpath) {\r\n        var self = this;\r\n        var guid = xpath.substring(3);\r\n        var element = self.form.getButton(guid);\r\n        element.trigger(\"click\");\r\n    },\r\n\r\n    /* \r\n    *   Changes the required value of the render\r\n    */\r\n    changeRenderRequired: function (xpath, argument) {\r\n        var self = this;\r\n        var renders = self.getRenders(xpath);\r\n        var rendersToEval = [];\r\n\r\n        if (renders == null) {\r\n            if (self.Class.THROW_ERROR) {\r\n                self.showRenderNotFoundError(xpath);\r\n            }\r\n            return;\r\n        }\r\n\r\n        $.each(renders, function (i, render) {\r\n            if (bizagi.util.parseBoolean(render.properties.editable)) {\r\n                rendersToEval.push(render);\r\n            }\r\n        });\r\n\r\n        if (rendersToEval.length === 0) {\r\n            rendersToEval = renders;\r\n        }\r\n\r\n        $.each(rendersToEval, function (i, render) {\r\n            // execute commands over valid renders\r\n            if (self.isValidRender(render)) {\r\n                //Detects if is the grid component, and set the desired properties\r\n                if (!self.isGridComponent(render, xpath)) {\r\n                    // Normal renders\r\n                    $.when(render.ready()).done(function () {\r\n                        $.when(render.renderingDeferred).done(function () {\r\n                            render.changeRequired(argument);\r\n                        });\r\n                    });\r\n                } else {\r\n                    // Grid renders\r\n                    var gridXpath = self.processGridXpath(xpath);\r\n                    $.when(render.ready()).done(function () {\r\n                        if (!bizagi.util.isEmpty(gridXpath.index)) {\r\n                            render.changeCellRequired(gridXpath.index, gridXpath.remainingXpath, argument);\r\n\r\n                        } else {\r\n                            var indexes = render.getIndexes(), j, lenIndex;\r\n                            for (j = 0, lenIndex = indexes.length; j < lenIndex; j++) {\r\n                                render.changeCellRequired(indexes[j], gridXpath.remainingXpath, argument);\r\n                            }\r\n                        }\r\n                    });\r\n                }\r\n            }\r\n        });\r\n    },\r\n    /* \r\n    *   Changes the render internal value\r\n    */\r\n    changeRenderValue: function (xpath, argument) {\r\n        var self = this;\r\n\r\n        if (argument != null && typeof argument === \"object\" ){\r\n            argument = $.extend(argument, {fromAction: true});\r\n        }\r\n\r\n        var renders = self.getRenders(xpath);\r\n        if (renders == null) {\r\n            if (self.Class.THROW_ERROR) {\r\n                self.showRenderNotFoundError(xpath);\r\n            }\r\n            return;\r\n        }\r\n\r\n        // Eval only an editable render\r\n        var rendersToEval = [];\r\n        $.each(renders, function (i, render) {\r\n            if (render.properties.editable) {\r\n                rendersToEval.push(render);\r\n            }\r\n        });\r\n\r\n        // If no render has been found skip editable validation\r\n        if (rendersToEval.length == 0) {\r\n            $.each(renders, function (i, render) {\r\n                rendersToEval.push(render);\r\n            });\r\n        }\r\n\r\n        $.each(rendersToEval, function (i, render) {\r\n            //Detects if is the grid component, and set the desired properties\r\n            if (!self.isGridComponent(render, xpath)) {\r\n                // Normal renders\r\n                $.when(render.ready()).done(function () {\r\n                    if (render.asyncRenderDeferred) {\r\n                        $.when(render.asyncRenderDeferred).done(function () {\r\n                            render.setDisplayValue(argument);\r\n                        });\r\n                    } else {\r\n                        render.setDisplayValue(argument);\r\n                    }\r\n                });\r\n            } else {\r\n                // Grid renders\r\n                var gridXpath = self.processGridXpath(xpath);\r\n                $.when(render.ready()).done(function () {\r\n                    if (!bizagi.util.isEmpty(gridXpath.index)) {\r\n                        render.changeCellValue(gridXpath.index, gridXpath.remainingXpath, argument);\r\n\r\n                    } else {\r\n                        var indexes = render.getIndexes(), j, lenIndex;\r\n                        for (j = 0, lenIndex = indexes.length; j < lenIndex; j++) {\r\n                            render.changeCellValue(indexes[j], gridXpath.remainingXpath, argument);\r\n                        }\r\n                    }\r\n                });\r\n            }\r\n        });\r\n    },\r\n    /* \r\n    *   Changes the render minimum value\r\n    */\r\n    changeRenderMinValue: function (xpath, argument) {\r\n        var self = this;\r\n        var renders = self.getRenders(xpath);\r\n        if (renders == null) {\r\n            if (self.Class.THROW_ERROR) {\r\n                self.showRenderNotFoundError(xpath);\r\n            }\r\n            return;\r\n        }\r\n\r\n        $.each(renders, function (i, render) {\r\n            //Detects if is the grid component, and set the desired properties\r\n            if (!self.isGridComponent(render, xpath)) {\r\n                // Normal renders\r\n                $.when(render.ready()).done(function () {\r\n                    var renderType = render.properties.type;\r\n                    if (renderType === \"number\" || renderType === \"date\" || renderType === \"money\") {\r\n                        render.changeMinValue(argument);\r\n                    }\r\n                });\r\n\r\n            } else {\r\n                // Grid renders\r\n                var gridXpath = self.processGridXpath(xpath);\r\n                $.when(render.ready()).done(function () {\r\n                    if (!bizagi.util.isEmpty(gridXpath.index)) {\r\n                        render.changeCellMinValue(gridXpath.index, gridXpath.remainingXpath, argument);\r\n\r\n                    } else {\r\n                        var indexes = render.getIndexes(), j, lenIndex;\r\n                        for (j = 0, lenIndex = indexes.length; j < lenIndex; j++) {\r\n                            render.changeCellMinValue(indexes[j], gridXpath.remainingXpath, argument);\r\n                        }\r\n                    }\r\n                });\r\n            }\r\n        });\r\n    },\r\n    /* \r\n    *   Changes the render max value\r\n    */\r\n    changeRenderMaxValue: function (xpath, argument) {\r\n        var self = this;\r\n        var renders = self.getRenders(xpath);\r\n        if (renders == null) {\r\n            if (self.Class.THROW_ERROR) {\r\n                self.showRenderNotFoundError(xpath);\r\n            }\r\n            return;\r\n        }\r\n\r\n        $.each(renders, function (i, render) {\r\n            //Detects if is the grid component, and set the desired properties\r\n            if (!self.isGridComponent(render, xpath)) {\r\n                // Normal renders\r\n                $.when(render.ready()).done(function () {\r\n                    render.changeMaxValue(argument);\r\n                });\r\n\r\n            } else {\r\n                // Grid renders\r\n                var gridXpath = self.processGridXpath(xpath);\r\n                $.when(render.ready()).done(function () {\r\n                    if (!bizagi.util.isEmpty(gridXpath.index)) {\r\n                        render.changeCellMaxValue(gridXpath.index, gridXpath.remainingXpath, argument);\r\n\r\n                    } else {\r\n                        var indexes = render.getIndexes(), j, lenIndex;\r\n                        for (j = 0, lenIndex = indexes.length; j < lenIndex; j++) {\r\n                            render.changeCellMaxValue(indexes[j], gridXpath.remainingXpath, argument);\r\n                        }\r\n                    }\r\n                });\r\n            }\r\n        });\r\n    },\r\n    /* \r\n    *   Changes the render max value\r\n    */\r\n    executeCalculatedField: function (xpath) {\r\n        var self = this;\r\n        var renders = self.getRenders(xpath);\r\n        if (renders == null) {\r\n            if (self.Class.THROW_ERROR) {\r\n                self.showRenderNotFoundError(xpath);\r\n            }\r\n            return;\r\n        }\r\n\r\n        $.each(renders, function (i, render) {\r\n            $.when(render.ready()).done(function () {\r\n                render.runFormula();\r\n            });\r\n        });\r\n    },\r\n    /* \r\n    *   Refresh the render internal value using ajax\r\n    */\r\n    refreshControl: function (xpath, xpathContext, commandType) {\r\n        var self = this;\r\n        var renders = self.getRenders(xpath) || self.form.getContainer(xpath);\r\n        var queue = new bizagiQueue();\r\n\r\n        if (renders == null) {\r\n            if (self.Class.THROW_ERROR) {\r\n                self.showRenderNotFoundError(xpath);\r\n            }\r\n            return;\r\n        }\r\n\r\n        // Process matching renders\r\n        $.each(renders, function (i, render) {\r\n            queue.add(render.ready().pipe(function () {\r\n                return render.refreshControl({xpath: xpath, xpathContext: xpathContext});\r\n            }));\r\n        });\r\n\r\n        // Return queue deferred\r\n        return queue.execute();\r\n    },\r\n    /* \r\n    *   Refresh the render internal value using ajax\r\n    */\r\n    refreshContainer: function (containerId, xpathContext) {\r\n        var self = this;\r\n        var container = self.form.getContainer(containerId);\r\n\r\n        if (container == null) {\r\n            if (self.Class.THROW_ERROR) {\r\n                self.showRenderNotFoundError(containerId);\r\n            }\r\n            return;\r\n        }\r\n\r\n        return $.when(container.ready())\r\n            .pipe(function () {\r\n                return container.refreshContainer({xpathContext: xpathContext});\r\n            });\r\n    },\r\n    /**\r\n     * Refresh a cell of grid\r\n     */\r\n    refreshGridCell: function (xpath, xpathContext) {\r\n        var self = this;\r\n        var queue = new bizagiQueue();\r\n        var def = new $.Deferred();\r\n        var renders = self.getRenders(xpath) || self.form.getContainer(xpath);\r\n\r\n        if (renders == null) {\r\n            if (self.Class.THROW_ERROR) {\r\n                self.showRenderNotFoundError(xpath);\r\n            }\r\n            return null;\r\n        }\r\n\r\n        // Eval only an editable render\r\n        var rendersToEval = [];\r\n        $.each(renders, function (i, render) {\r\n            if (render.properties.editable) {\r\n                rendersToEval.push(render);\r\n                return false;\r\n            }\r\n        });\r\n\r\n        // If no render has been found skip editable validation\r\n        if (rendersToEval.length == 0) {\r\n            $.each(renders, function (i, render) {\r\n                rendersToEval.push(render);\r\n                return false;\r\n            });\r\n        }\r\n\r\n        if (rendersToEval.length === 0) {\r\n            return;\r\n        }\r\n\r\n        // Check xpathContext of the form (addForm or editForm)\r\n        if (self.form && self.form.properties.xpathContext !== \"\") {\r\n            xpathContext = (xpathContext !== \"\") ? self.form.properties.xpathContext + \".\" + xpathContext : self.form.properties.xpathContext;\r\n        }\r\n\r\n        queue.add(def.promise());\r\n\r\n        $.when.apply($, $.map(rendersToEval, function (grid) {\r\n            grid.ready();\r\n        }))\r\n            .done(function () {\r\n                var len = rendersToEval.length;\r\n                var internalQueue = new bizagiQueue();\r\n                for (var i = 0; i < len; i++) {\r\n                    var grid = rendersToEval[i];\r\n\r\n                    var gridXpath = self.processGridXpath(xpath);\r\n                    if (!bizagi.util.isEmpty(gridXpath.index)) {\r\n                        // Process a specific row\r\n                        internalQueue.add(grid.refreshCell({\r\n                            key: gridXpath.index,\r\n                            column: gridXpath.remainingXpath,\r\n                            xpathContext: xpathContext\r\n                        }));\r\n                    } else {\r\n                        // Process all rows\r\n                        var indexes = grid.getIndexes();\r\n                        var lenIndex = indexes.length;\r\n                        for (var j = 0; j < lenIndex; j++) {\r\n                            internalQueue.addParallel(grid.refreshCell({\r\n                                key: indexes[j],\r\n                                column: gridXpath.remainingXpath,\r\n                                xpathContext: xpathContext\r\n                            }));\r\n                        }\r\n                    }\r\n                }\r\n\r\n                $.when(internalQueue.execute())\r\n                    .done(function () {\r\n                        def.resolve();\r\n                    });\r\n            });\r\n\r\n\r\n        return queue.execute();\r\n    },\r\n    /**\r\n     * This function execute action to save all data of render, but\r\n     * the server service dont execute any rule on the server\r\n     */\r\n    submitFormData: function (params) {\r\n        var self = this;\r\n\r\n        // For the submit action we need only the whole form to perform the server action\r\n        var form = self.form;\r\n\r\n        // Process the action\r\n        return $.when(form.ready())\r\n            .pipe(function () {\r\n                return form.submitData(params);\r\n            });\r\n    },\r\n    /**\r\n     * This function send a request to the server to execute a rule\r\n     */\r\n    executeRule: function (rule, xpathContext, commandType) {\r\n        var self = this;\r\n        // For the execute rule  action we need only the whole form to perform the server action\r\n        var form = self.form;\r\n        var prefix = rule + \".\" + xpathContext;\r\n        if (self.isRecentAction(prefix, commandType)) {\r\n            return;\r\n        } else {\r\n            // Process the action\r\n            return $.when(form.ready())\r\n                .pipe(function () {\r\n                    return form.executeRule({rule: rule, xpathContext: xpathContext});\r\n                });\r\n        }\r\n    },\r\n    executeInterface: function (interface, xpathContext) {\r\n        var self = this;\r\n        // For the execute rule  action we need only the whole form to perform the server action\r\n        var form = self.form;\r\n\r\n        // Process the action\r\n        return $.when(form.ready())\r\n            .pipe(function () {\r\n                return form.executeInterface({interface: interface, xpathContext: xpathContext});\r\n            });\r\n    },\r\n\r\n\r\n    executeSAPConnector: function (guidsap, xpathContext) {\r\n        var self = this;\r\n        var form = self.form;\r\n        return $.when(form.ready).pipe(function () {\r\n            return form.executeSAPConnector({guidsap: guidsap, xpathContext: xpathContext});\r\n        });\r\n    },\r\n\r\n    executeConnector: function (guidConnector, xpathContext) {\r\n        var self = this;\r\n        var form = self.form;\r\n        return $.when(form.ready).pipe(function () {\r\n            return form.executeConnector({guidConnector: guidConnector, xpathContext: xpathContext});\r\n        });\r\n    },\r\n    /*\r\n    *   Submit the given render and refresh dependencies after that\r\n    */\r\n    submitRender: function (xpath, argument) {\r\n        var self = this;\r\n        // For the submit action we need only one render to perform the server action\r\n        var render = self.getRender(xpath);\r\n        if (render == null) {\r\n            if (self.Class.THROW_ERROR) {\r\n                self.showRenderNotFoundError(xpath);\r\n            }\r\n            return;\r\n        }\r\n\r\n        // Process the action in the render\r\n        return $.when(render.ready()).pipe(function () {\r\n            return render.submitOnChange();\r\n        });\r\n    },\r\n    /*\r\n    * Cleans current value\r\n    */\r\n    cleanRenderData: function (xpath) {\r\n        var self = this;\r\n        var renders = self.getRenders(xpath);\r\n        if (renders == null) {\r\n            if (self.Class.THROW_ERROR) {\r\n                self.showRenderNotFoundError(xpath);\r\n            }\r\n            return;\r\n        }\r\n\r\n        $.each(renders, function (i, render) {\r\n            //Detects if is the grid component, and set the desired properties\r\n            if (!self.isGridComponent(render, xpath)) {\r\n                // Normal renders\r\n                $.when(render.ready()).done(function () {\r\n                    $.when(render.renderingDeferred).done(function () {\r\n                        render.cleanData();\r\n                        self.changeRenderRequired(xpath, render.properties.required != undefined ? render.properties.required : false);\r\n                    });\r\n                });\r\n            } else {\r\n                // Grid renders\r\n                var gridXpath = self.processGridXpath(xpath);\r\n                $.when(render.ready()).done(function () {\r\n                    if (!bizagi.util.isEmpty(gridXpath.index)) {\r\n                        render.cleanCellData(gridXpath.index, gridXpath.remainingXpath);\r\n                    } else {\r\n                        var indexes = render.getIndexes(), j, lenIndex;\r\n                        for (j = 0, lenIndex = indexes.length; j < lenIndex; j++) {\r\n                            render.cleanCellData(indexes[j], gridXpath.remainingXpath);\r\n                        }\r\n                    }\r\n                });\r\n            }\r\n        });\r\n    },\r\n    /* \r\n    *   Changes container background color\r\n    */\r\n    changeContainerBackground: function (containerId, argument) {\r\n        var self = this;\r\n        var form = self.form;\r\n        var container = form.getContainer(containerId);\r\n        if (container == null) {\r\n            if (self.Class.THROW_ERROR) {\r\n                self.showContainerNotFoundError(containerId);\r\n            }\r\n            return;\r\n        }\r\n\r\n        $.when(container.ready()).done(function () {\r\n            container.changeBackgroundColor(argument);\r\n        });\r\n    },\r\n    /* \r\n    *   Shows or hides a container\r\n    */\r\n    changeContainerVisibility: function (containerId, argument) {\r\n        var self = this;\r\n        var form = self.form;\r\n        var container = form.getContainer(containerId);\r\n        if (container == null) {\r\n            if (self.Class.THROW_ERROR) {\r\n                self.showContainerNotFoundError(containerId);\r\n            }\r\n            return;\r\n        }\r\n\r\n        $.when(container.ready(true)).done(function () {\r\n            $.when(container.renderingDeferred).done(function () {\r\n                container.changeVisibility(argument);\r\n            });\r\n        });\r\n    },\r\n    /* \r\n    *   Expand or collapse a group container\r\n    */\r\n    toogleContainer: function (containerId, argument) {\r\n        var self = this;\r\n        var form = self.form;\r\n        var container = form.getContainer(containerId);\r\n        if (container == null) {\r\n            if (self.Class.THROW_ERROR) {\r\n                self.showContainerNotFoundError(containerId);\r\n            }\r\n            return;\r\n        }\r\n        if (container.properties.type !== \"group\")\r\n            return;\r\n\r\n        $.when(container.ready()).done(function () {\r\n            container.toogleContainer(argument);\r\n        });\r\n    },\r\n    /* \r\n    *   Select a determinate sub-container in a tab or an accordion\r\n    */\r\n    changeActiveItem: function (containerId) {\r\n        var self = this;\r\n        var form = self.form;\r\n        var container = form.getContainer(containerId);\r\n        if (container == null) {\r\n            if (self.Class.THROW_ERROR) {\r\n                self.showContainerNotFoundError(containerId);\r\n            }\r\n            return;\r\n        }\r\n        if (container.properties.type === \"tabItem\" && container.loadingDeferred) {\r\n            container.loadingDeferred.resolve();\r\n        }\r\n        $.when(container.ready()).done(function () {\r\n            container.setAsActiveContainer();\r\n        });\r\n    },\r\n    /* \r\n    *   Changes container editability\r\n    */\r\n    changeContainerEditability: function (containerId, argument) {\r\n        var self = this;\r\n        var form = self.form;\r\n        var container = form.getContainer(containerId);\r\n        if (container == null) {\r\n            if (self.Class.THROW_ERROR) {\r\n                self.showContainerNotFoundError(containerId);\r\n            }\r\n            return;\r\n        }\r\n\r\n        $.when(container.ready()).done(function () {\r\n            container.changeEditability(argument);\r\n        });\r\n    },\r\n    /*\r\n    *   Search for grid columns\r\n    */\r\n    searchGridColumns: function (condition, gridColumns) {\r\n        var self = this;\r\n        var column;\r\n        if (typeof (condition) === \"string\" || typeof (condition) === \"boolean\")\r\n            return null;\r\n        if (condition.expressions) {\r\n            var j, lenIndex;\r\n            for (j = 0, lenIndex = condition.expressions.length; j < lenIndex; j++) {\r\n                self.searchGridColumns(condition.expressions[j], gridColumns);\r\n            }\r\n\r\n        } else if (condition.simple) {\r\n            return self.searchGridColumns(condition.simple, gridColumns);\r\n\r\n        } else if (condition.complex) {\r\n            return self.searchGridColumns(condition.complex, gridColumns);\r\n        } else {\r\n            var xpath = condition.xpath || condition.renderId;\r\n            if (xpath) {\r\n                // Check in condition.xpath\r\n                if (xpath && xpath.indexOf(\"[]\") > 0) {\r\n                    column = xpath.substring(xpath.indexOf(\"[]\") + 3);\r\n                    gridColumns.push(column);\r\n                }\r\n\r\n                // Check in argument if argumentType is xpath\r\n                if (condition.argumentType === 'xpath') {\r\n                    if (condition.argument.indexOf(\"[]\") > 0) {\r\n                        column = condition.argument.substring(condition.argument.indexOf(\"[]\") + 3);\r\n                        gridColumns.push(column);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        return null;\r\n    },\r\n    /**/\r\n\r\n    isGridComponent: function (render, xpath) {\r\n        return (render.properties.type === 'grid' && xpath.indexOf('[') >= 0);\r\n    },\r\n    /**/\r\n\r\n    isValidRender: function (render) {\r\n        var notValid = [\"collectionnavigator\"];\r\n\r\n        return notValid.indexOf(render.properties.type) === -1;\r\n    },\r\n\r\n    /**\r\n     * Helper to override the visibility and editability. TODO: Apply to mobile with formButtons\r\n     * @param {} xpath\r\n     * @param {} status\r\n     * @returns {}\r\n     */\r\n    changeFormButtonVisibility: function(xpath, visible) {\r\n        var self = this;\r\n        var form = self.form;\r\n        var guid = xpath.substring(3);\r\n\r\n        var buttons = form.buttons && form.buttons.length ? form.buttons : form.properties.buttons || [];\r\n        var isVisible = bizagi.util.parseBoolean(visible) !== false;\r\n        var index = buttons.findIndex(function(item) { return item.id === guid; });\r\n        var navigation = form.getNavigation();\r\n\r\n        if (index !== -1)\r\n            buttons[index].visible = isVisible;\r\n\r\n        form.buttons = buttons || [];\r\n        navigation.setNavigationButtons(form);\r\n    }\r\n});","/*\r\n*   Name: BizAgi Element Class\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will define a base class with common stuff related to all renders and containers\r\n*/\r\n\r\n$.Class.extend(\"bizagi.rendering.element\", {\r\n    ELEMENT_TYPE_CONTAINER: 1,\r\n    ELEMENT_TYPE_RENDER: 2,\r\n    ELEMENT_TYPE_COLUMN: 3\r\n}, {\r\n\r\n    /*\r\n    *   Constructor\r\n    */\r\n    init: function (params) {\r\n        // Set render factory\r\n        this.renderFactory = params.renderFactory;\r\n\r\n        // Set data service\r\n        this.dataService = params.dataService;\r\n\r\n        // Set reference to parent\r\n        this.parent = params.parent;\r\n\r\n        // Set l10n service\r\n        this.resources = bizagi.localization;\r\n\r\n        // Set the observable element\r\n        this.observableElement = $(\"<div />\");\r\n\r\n        // Set the dispose flag\r\n        this.disposed = false;\r\n\r\n        // Update data\r\n        this.initializeData(params.data);\r\n\r\n        // Define an object to hold the subscribe collection\r\n        this.subscribers = [];\r\n    },\r\n\r\n    /*\r\n    *   Update or init the element data\r\n    */\r\n    initializeData: function (data) {\r\n        var self = this;\r\n\r\n        // Set the internal data\r\n        this.properties = {};\r\n        if (data && data.properties) this.properties = data.properties;\r\n\r\n        // Set xpath context\r\n        this.properties.xpathContext = this.getXpathContext();\r\n\r\n        // Set page cache\r\n        this.properties.idPageCache = this.getPageCache();\r\n    },\r\n\r\n    /*\r\n    *   Returns the xpath context of the element\r\n    */\r\n    getXpathContext: function () {\r\n        // By default return parent's xpath context\r\n        // This method is overriden in form container which contains the real xpath context\r\n\r\n        return (this.parent != undefined && typeof this.parent.getXpathContext == \"function\") ? this.parent.getXpathContext() : \"\";\r\n    },\r\n\r\n    /*\r\n    *   Returns the page cache for the current element\r\n    */\r\n    getPageCache: function () {\r\n        // By default return parent's page cache\r\n        // This method is overriden in form container which contains the real page cache\r\n\r\n        return (this.parent != undefined && typeof this.parent.getPageCache == \"function\") ? this.parent.getPageCache() : \"\";\r\n    },\r\n\r\n    /*\r\n    *   Returns the form containing the element\r\n    */\r\n    getFormContainer: function () {\r\n        // By default return parent's form container\r\n        // This method is overriden in form container which returns itself\r\n        if (typeof (this.parent) != \"undefined\")\r\n        return this.parent.getFormContainer();\r\n    },\r\n\r\n\r\n    /*\r\n    *   Returns the mapped resource\r\n    */\r\n    getResource: function (key) {\r\n        return this.resources.getResource(key);\r\n    },\r\n\r\n    /*\r\n    *   Returns the element type\r\n    */\r\n    getElementType: function () { },\r\n\r\n    /* \r\n    *   Resizes the element \r\n    */\r\n    resize: function (size) {\r\n\r\n    },\r\n\r\n    /*\r\n    *   Focus on the current element\r\n    */\r\n    focus: function () {\r\n\r\n        if (this.properties.required) {\r\n            var layout = $(\"#ui-bizagi-wp-app-render-form-content\");\r\n            // Check if element is visible into scroll\r\n            if (!bizagi.util.isScrolledIntoView(this.element, layout)) {\r\n                $(this.element).attr('tabindex', -1).focus();\r\n            }\r\n            if (this.element) {\r\n                this.element.effect('highlight', 2000);\r\n            }\r\n        }\r\n\r\n        //Check if the element has parent\r\n        if (this.parent && typeof this.parent.focus == 'function') {\r\n            this.parent.focus();\r\n        }\r\n    },\r\n\r\n    /*\r\n    *   Publish a global event that the facade will replicate\r\n    */\r\n    triggerGlobalHandler: function (eventType, data) {\r\n        if (this.disposed) return null;\r\n        if (this.parent) return this.parent.triggerGlobalHandler(eventType, data);\r\n        return null;\r\n    },\r\n\r\n    /*\r\n    *   Triggers an event inside the control\r\n    */\r\n    trigger: function (eventType, data) {\r\n        if (this.disposed) return null;\r\n        if (this.observableElement) return this.observableElement.trigger(eventType, data);\r\n        return null;\r\n    },\r\n\r\n    /*\r\n    *   Triggers an event handler inside the control\r\n    */\r\n    triggerHandler: function (eventType, data) {\r\n        if (this.disposed) return null;\r\n        if (this.observableElement) return this.observableElement.triggerHandler(eventType, data);\r\n        return null;\r\n    },\r\n\r\n    /*\r\n    *   Binds to an event\r\n    */\r\n    bind: function (eventType, fn) {\r\n        if (this.disposed) return null;\r\n        if (this.observableElement) return this.observableElement.bind(eventType, fn);\r\n        this.subscribers.push({ event: eventType });\r\n        return null;\r\n    },\r\n\r\n    /*\r\n    *   Un-binds to an event\r\n    */\r\n    unbind: function (eventType, fn) {\r\n        if (this.disposed) return null;\r\n        if (this.observableElement) return this.observableElement.unbind(eventType, fn);\r\n        return null;\r\n    },\r\n\r\n    /*\r\n    *   Binds a one time event\r\n    */\r\n    one: function (eventType, fn) {\r\n        if (this.disposed) return null;\r\n        if (this.observableElement) return this.observableElement.one(eventType, fn);\r\n        this.subscribers.push({ event: eventType });\r\n        return null;\r\n    },\r\n\r\n    /*\r\n    *   Return the rendered element\r\n    */\r\n    getRenderedElement: function () { },\r\n\r\n    /*\r\n    *   Get current rendering mode\r\n    */\r\n    getMode: function () {\r\n        if (this.parent) return this.parent.getMode();\r\n    },\r\n\r\n    /*\r\n    *   Get current rendering params\r\n    */\r\n    getParams: function () {\r\n        if (this.parent) return this.parent.getParams();\r\n    },\r\n\r\n    /*\r\n    * Get current form type (ex. queryform, form)\r\n    */\r\n    getFormType: function () {\r\n        var self = this;\r\n\r\n        var form = self.getFormContainer();\r\n        return form.properties.type || \"form\";\r\n    },\r\n\r\n    /*\r\n    *   Returns a promise that will resolve when the element is ready\r\n    */\r\n    ready: function () { },\r\n\r\n    /*\r\n    *   Returns a promise that will resolve when the element is ready to save\r\n    */\r\n    isReadyToSave: function () { },\r\n\r\n    /*\r\n    *   Get the custom handlers set for this execution\r\n    */\r\n    getCustomHandlers: function () {\r\n        return null;\r\n    },\r\n\r\n    /*\r\n    *   Dispose the class so we can detect when a class is invalid already\r\n    */\r\n    dispose: function () {\r\n        var self = this;\r\n        self.disposed = true;\r\n\r\n        setTimeout(function () {\r\n            if (self.subscribers != null) {\r\n                // Remove all subcriptions\r\n                $.each(self.subscribers, function (i, item) {\r\n                    self.unbind(item.event);\r\n                });\r\n            }\r\n            delete self.subscribers;\r\n\r\n            if (self.observableElement) self.observableElement.off();\r\n            bizagi.util.dispose(self);\r\n        }, bizagi.override.disposeTime || 50);\r\n    },\r\n\r\n    /*\r\n    *   Check if the current object is disposed\r\n    */\r\n    isDisposed: function () {\r\n        return this.disposed;\r\n    },\r\n\r\n    /*\r\n    *   This method process the error or alert messages coming from the server, and adds them to the validation controller\r\n    */\r\n    processFailMessage: function(message) {\r\n        var self = this;\r\n        var form = self.getFormContainer();\r\n        var isOfflineForm = bizagi.util.isOfflineForm({ context: self });\r\n\r\n        if (message.errorType === \"CustomMessageException\") {\r\n            // Clear previous validations\r\n            form.validationController.clearValidationMessages();\r\n            var error = bizagi.localization.getResource(message.message);\r\n            form.validationController.showErrorMessage(error);\r\n        } else if (message.errorType === \"InvalidCaseStateException\") {\r\n            var params = form.getParams()\r\n\r\n            form.validationController.clearValidationMessages();\r\n           \r\n            // Redirection Here\r\n            form.container.trigger(\"routing\", { idCase: params.idCase || bizagi.context.idCase });\r\n        } else {\r\n            var message = message || {};\r\n            message = typeof (message) == \"string\" ? JSON.parse(message) : message;\r\n            var type = message.type || \"error\";\r\n            var code = message.code || \"code\";\r\n            message = message.responseText || (message.message || message);\r\n\r\n            // Omit processing when the ajax didn't process\r\n            if (type === \"not-processed\") return;\r\n            if (type === \"not-shown\") return;\r\n            if (isOfflineForm && code === \"AUTH_ERROR\") return;\r\n\r\n            // Clear previous validations\r\n            form.validationController.clearValidationMessages();\r\n            if (type == \"alert\") {\r\n                form.validationController.showAlertMessage(message);\r\n            } else {\r\n                form.validationController.showErrorMessage(message);\r\n            }\r\n        }\r\n\r\n        return message;\r\n    },\r\n\r\n    /*\r\n    *   Sets a waiting overlay above the current element\r\n    */\r\n    startLoading: function () {  /* Override in implementations */ },\r\n\r\n    /*\r\n    *   Removes the waiting overlay\r\n    */\r\n    endLoading: function () { /* Override in implementations */ },\r\n\r\n    /**\r\n    *   Prepare control to remove it from the render, that allows to\r\n    *   clean all elements of the control or to do any stuff before to remove\r\n    */\r\n    beforeToRefresh: function () { /* Implement in each render and container if you need */ },\r\n\r\n    /**\r\n    *   Run before that the control has been refreshed\r\n    */\r\n    afterToRefresh: function () { \r\n        /* Implement in each render and container if you need */ \r\n        var formContainer = this.getFormContainer();\r\n        formContainer.tryToExecuteFunction(this.properties.xpath || this.properties.id); \r\n    }\r\n});\r\n\r\n","/*\r\n *   Name: BizAgi Container Class\r\n *   Author: Diego Parra\r\n *   Comments:\r\n *   -   This script will define a base container class with common stuff related to all containers\r\n */\r\n\r\nbizagi.rendering.element.extend(\"bizagi.rendering.container\", {\r\n    TYPE_QUERY_FORM: \"queryForm\"\r\n}, {\r\n\r\n    /*\r\n    *   Update or init the element data\r\n    */\r\n    initializeData: function (data) {\r\n        var self = this;\r\n\r\n        // Call base\r\n        self._super(data);\r\n\r\n        // Set defaults\r\n        var properties = self.properties;\r\n        properties.uniqueId = Math.ceil(Math.random() * 1000000);\r\n        properties.editable = (typeof properties.editable != \"undefined\") ? bizagi.util.parseBoolean(properties.editable) : true;\r\n        properties.visible = (typeof properties.visible != \"undefined\") ? bizagi.util.parseBoolean(properties.visible) : true;\r\n\r\n        // Override orientation from parent if not set\r\n        properties.orientation = properties.orientation || \"auto\";\r\n\r\n        // Save original properties\r\n        this.originalProperties = JSON.parse(JSON.encode(properties));\r\n\r\n        // Create children\r\n        this.children = [];\r\n        this.childrenHash = {};\r\n\r\n        if (data.elements) {\r\n            $.each(data.elements, function(i, element) {\r\n                if (element.render) {\r\n                    self.createRenderElement(element);\r\n                } else if (element.container) {\r\n                    self.createContainerElement(element);\r\n                } else if (element.form) {\r\n                    self.createFormElement(element);\r\n                }\r\n            });\r\n        }\r\n    },\r\n\r\n    /*\r\n    *   Creates a render element\r\n    */\r\n    createRenderElement: function (element) {\r\n        var self = this;\r\n        var properties = self.properties;\r\n        var originalElement;\r\n\r\n        // Replicate editable property when container is not editable\r\n        if (properties.editable == false) {\r\n            element.render.properties.editable = properties.editable;\r\n            if (element.render.properties.type == \"grid\")\r\n                element.render.properties.inlineEdit = false;\r\n        }\r\n\r\n        // Replicate required property when container is not required\r\n        if (properties.required === false) {\r\n            element.render.properties.required = properties.required;\r\n        }\r\n\r\n        //clone originalElement to apply duplicate render properties correctly\r\n        if (element.render.properties.retype == \"duplicate\") {\r\n            originalElement = bizagi.clone(element);\r\n        }\r\n\r\n        var render = self.renderFactory.getRender({\r\n            type: element.render.properties.type,\r\n            data: element.render,\r\n            dataService: self.dataService,\r\n            parent: self,\r\n            mode: self.getMode()\r\n        });\r\n\r\n        // Add to children\r\n        self.children.push(render);\r\n\r\n        // Check for duplicate\r\n        if (element.render.properties.retype == \"duplicate\") {\r\n            self.processDuplicateRender(render, originalElement);\r\n        }\r\n\r\n        //TODO: at this point not posible add the retype double at this point not exist input\r\n\r\n        // Register in form container\r\n        self.getFormContainer().registerRender(render);\r\n    },\r\n    /*\r\n    *   Creates a container element\r\n    */\r\n    createContainerElement: function (element) {\r\n        var self = this;\r\n        var properties = self.properties;\r\n\r\n        // Replicate editable property when container is not editable\r\n        if (properties.editable == false) {\r\n            element.container.properties.editable = properties.editable;\r\n        }\r\n\r\n        // Replicate required property when container is not required\r\n        if (properties.required === false) {\r\n            element.container.properties.required = properties.required;\r\n        }\r\n\r\n        var container = self.renderFactory.getContainer({\r\n            type: element.container.properties.type,\r\n            data: element.container,\r\n            parent: self,\r\n            dataService: self.dataService,\r\n            mode: self.getMode(),\r\n            isDesign: self.getMode() === \"design\"\r\n        });\r\n\r\n        self.children.push(container);\r\n\r\n        // Register in form container\r\n        self.getFormContainer().registerRender(container);\r\n    },\r\n    /*\r\n    *   Creates a form element\r\n    */\r\n    createFormElement: function (element) {\r\n        var self = this;\r\n        var properties = self.properties;\r\n\r\n        // Replicate editable property when container is not editable\r\n        if (properties.editable == false) {\r\n            element.container.properties.editable = properties.editable;\r\n        }\r\n\r\n        var form = self.renderFactory.getContainer({\r\n            type: (element.form.properties.type || \"form\"),\r\n            data: element.form,\r\n            parent: self,\r\n            dataService: self.dataService,\r\n            mode: self.getMode()\r\n        });\r\n        self.children.push(form);\r\n    },\r\n    /* \r\n    *   Gets the current container \r\n    */\r\n    getElement: function () {\r\n        var self = this;\r\n        return self.container;\r\n    },\r\n    /* \r\n    *   Gets a collection for all elements matching a type \r\n    */\r\n    getElementsByType: function (type, elements) {\r\n        elements = elements || [];\r\n        var self = this;\r\n\r\n        // Iterate through elements\r\n        $.each(self.children, function (i, child) {\r\n            if (child.properties.type == type) {\r\n                elements.push(child);\r\n            }\r\n            if (child.getElementType() == bizagi.rendering.element.ELEMENT_TYPE_CONTAINER) {\r\n                child.getElementsByType(type, elements);\r\n            }\r\n        });\r\n\r\n        return elements;\r\n    },\r\n    /*\r\n    *   Process renders with duplicate property\r\n    */\r\n    processDuplicateRender: function (render, element) {\r\n        var self = this;\r\n        var clonedElement = JSON.parse(JSON.encode(element.render));\r\n\r\n        // Changes properties\r\n        clonedElement.properties.displayName = clonedElement.properties.displayName + \" \" + self.getResource(\"render-text-duplicate-label-sufix\");\r\n        clonedElement.properties.xpath = clonedElement.properties.xpath + \".clone\";\r\n        clonedElement.properties.isClone = true;\r\n\r\n        // Creates clone\r\n        var clone = self.renderFactory.getRender({\r\n            type: clonedElement.properties.type,\r\n            data: clonedElement,\r\n            parent: self,\r\n            mode: self.getMode()\r\n        });\r\n\r\n        // Associates with main render\r\n        render.cloneRender = clone;\r\n\r\n        // Add to collection\r\n        self.children.push(clone);\r\n    },\r\n    /*\r\n    *   Returns the element type\r\n    */\r\n    getElementType: function () {\r\n        return bizagi.rendering.element.ELEMENT_TYPE_CONTAINER;\r\n    },\r\n    /*\r\n    *   Returns the in-memory processed element\r\n    */\r\n    render: function () {\r\n        var self = this,\r\n            mode = self.getMode(),\r\n            result;\r\n\r\n        // Render container\r\n        result = self.internalRender();\r\n\r\n        // Apply container defaults\r\n        self.applyContainerDefaults();\r\n\r\n        // Add container id\r\n        result.attr(\"data-container-id\", self.properties.id);\r\n\r\n        //Add container tag property\r\n        if (self.properties.tag) {\r\n            result.attr(\"data-tag\", self.properties.tag);\r\n        }\r\n\r\n        //Add class to the requested form, to specify if is add form, edit form, or detail form\r\n        if (self.params)\r\n            if (self.params.requestedForm)\r\n                result.addClass(self.params.requestedForm);\r\n\r\n        return result;\r\n    },\r\n    /*\r\n    *   Internal  rendering\r\n    */\r\n    internalRender: function () {\r\n        var self = this;\r\n\r\n        // Render the container\r\n        var html = self.renderContainerHtml();\r\n\r\n        // Convert html string to jquery object\r\n        var container = self.container = $(html);\r\n\r\n        // Post-render\r\n        self.postRenderContainer(container);\r\n\r\n        return self.container;\r\n    },\r\n    /*\r\n    *   Renders container html\r\n    */\r\n    renderContainerHtml: function () {\r\n        var self = this;\r\n        // Start rendering deferred\r\n        self.renderingDeferred = self.renderingDeferred || new $.Deferred();\r\n\r\n        return this.renderContainer();\r\n    },\r\n    /*\r\n    *   Check if the jquery element is ready or not\r\n    */\r\n    isRendered: function () {\r\n        var self = this;\r\n        if (!self.renderingDeferred)\r\n            return false;\r\n        return self.renderingDeferred.promise();\r\n    },\r\n    /*\r\n    *   Return the rendered element\r\n    */\r\n    getRenderedElement: function () {\r\n        if (bizagi.util.isEmpty(this.container))\r\n            alert(\"container hasn't been rendered!\");\r\n\r\n        return this.container;\r\n    },\r\n    /* \r\n    *   Set container defaults\r\n    */\r\n    applyContainerDefaults: function () {\r\n        var self = this,\r\n                properties = self.properties;\r\n\r\n        // Set customizations\r\n        if (properties.backgroundColor)\r\n            self.changeBackgroundColor(properties.backgroundColor);\r\n\r\n        // Set editability and visiblity\r\n        if (!properties.visible)\r\n            self.changeVisibility(properties.visible);\r\n    },\r\n    /* \r\n    *  Changes background color \r\n    */\r\n    changeBackgroundColor: function (color) {\r\n        var self = this;\r\n        var properties = self.properties;\r\n\r\n        properties.backgroundColor = color;\r\n\r\n        // Iterate through elements\r\n        $.each(self.children, function (i, child) {\r\n            if (child.getElementType() == bizagi.rendering.element.ELEMENT_TYPE_CONTAINER) {\r\n                child.changeBackgroundColor(color);\r\n\r\n            } else if (child.getElementType() == bizagi.rendering.element.ELEMENT_TYPE_RENDER) {\r\n                child.changeBackgroundColor(color);\r\n            }\r\n        });\r\n    },\r\n    /* \r\n    *   Hides / Show container \r\n    */\r\n    changeVisibility: function (argument) {\r\n        var self = this;\r\n        var properties = self.properties;\r\n\r\n        // Store in properties\r\n        properties.visible = bizagi.util.parseBoolean(argument);\r\n\r\n        // Hide - show the render\r\n        if (properties.visible) {\r\n            self.container.show();\r\n\r\n        } else {\r\n            self.container.hide();\r\n        }\r\n    },\r\n    /* Changes editability */\r\n    changeEditability: function (argument) {\r\n        var self = this;\r\n        var properties = self.properties;\r\n\r\n        // Store in properties\r\n        properties.editable = argument == \"Default\" ? self.originalProperties.editable: bizagi.util.parseBoolean(argument);\r\n\r\n        // Iterate through elements\r\n        $.each(self.children, function (i, child) {\r\n            if (child.getElementType() == bizagi.rendering.element.ELEMENT_TYPE_CONTAINER) {\r\n                child.changeEditability(argument);\r\n\r\n            } else if (child.getElementType() == bizagi.rendering.element.ELEMENT_TYPE_RENDER) {\r\n                child.changeEditability(argument);\r\n            }\r\n        });\r\n    },\r\n    /*\r\n    *   Replaces a <x/> tag in the container for the specified \"replace\" element\r\n    */\r\n    replaceTag: function (container, tag, replace) {\r\n        bizagi.util.replaceSelector(container, tag, replace);\r\n    },\r\n    /*\r\n    *   Replaces a <children/> tag in the container for the specified \"replace\" element\r\n    */\r\n    replaceChildrenTag: function (container, replace) {\r\n        this.replaceTag(container, \".children\", replace);\r\n    },\r\n    /*\r\n    *   Replaces a {{children}} string in the specified element\r\n    */\r\n    replaceChildrenHtml: function (html, replace) {\r\n        return html.replaceFirstWithoutPatterns(\"{{children}}\", replace);\r\n    },\r\n    /*\r\n    *   Template method to render the container layout, returns a string with all the builded html,\r\n    *   must be overriden in all children\r\n    */\r\n    renderContainer: function () {\r\n    },\r\n    /*\r\n    *   Template method to process each jquery object\r\n    *   must be overriden in each container\r\n    */\r\n    postRenderContainer: function (container) {\r\n        var self = this;\r\n        var properties = self.properties;\r\n        var mode = self.getMode();\r\n\r\n        // Resolve rendering deferred\r\n        if (self.renderingDeferred)\r\n            self.renderingDeferred.resolve();\r\n\r\n        // Process children elements\r\n        self.container = container;\r\n        self.executeChildrenPostRender(container);\r\n\r\n        if (mode == \"execution\") {\r\n            // Apply handlers\r\n            self.configureHandlers();\r\n            self.applyPlaceHolderPolyfill();\r\n\r\n        }\r\n        if (mode == \"design\") {\r\n            // Configure view\r\n            self.configureDesignView();\r\n        }\r\n        if (mode == \"layout\") {\r\n            // Configure view\r\n            self.configureDesignView();\r\n            self.configureLayoutView();\r\n        }\r\n    },\r\n\r\n    applyPlaceHolderPolyfill: function () {\r\n        var self = this;\r\n        var config = window.placeHolderConfig || {};\r\n        if (('placeholder' in $('<input>')[0] || 'placeHolder' in $('<input>')[0]) && !config.forceApply) {\r\n            // don't run the polyfill when the browser has native support\r\n            return;\r\n        }\r\n        Placeholders.enable();\r\n    },\r\n    /*\r\n    *   Process container children\r\n    */\r\n    executeChildrenPostRender: function (container) {\r\n        var self = this;\r\n        var childrenElements = container.children();\r\n\r\n        $.each(childrenElements, function (i, childElement) {\r\n            childElement = $(childElement);\r\n            var id = Number(childElement.data(\"unique-id\"));\r\n            if (id) {\r\n                var child = self.childrenHash[id];\r\n                if (child) {\r\n                    var type = child.getElementType();\r\n                    if (type == bizagi.rendering.element.ELEMENT_TYPE_RENDER)\r\n                        child.postRenderElement(childElement);\r\n                    if (type == bizagi.rendering.element.ELEMENT_TYPE_CONTAINER)\r\n                        child.postRenderContainer(childElement);\r\n                }\r\n            } else {\r\n                self.executeChildrenPostRender(childElement);\r\n            }\r\n        });\r\n    },\r\n    /*\r\n    *   Template method to implement in each device to customize the container's behaviour to add handlers\r\n    */\r\n    configureHandlers: function () {\r\n    },\r\n    /*\r\n    *   Template method to implement in each device to customize the render's behaviour when rendering in design mode\r\n    */\r\n    configureDesignView: function () {\r\n    },\r\n    /*\r\n    *   Template method to implement in each device to customize the container's behaviour to show layout\r\n    */\r\n    configureLayoutView: function () {\r\n\r\n    },\r\n    /**\r\n    *   Renders all children html\r\n    */\r\n    renderChildrenHtml: function () {\r\n        var self = this;\r\n        var temp = \"\";\r\n\r\n        $.each(self.children, function (i, child) {\r\n            var type = child.getElementType();\r\n            if (type == bizagi.rendering.element.ELEMENT_TYPE_RENDER)\r\n                temp += child.renderElement();\r\n            if (type == bizagi.rendering.element.ELEMENT_TYPE_CONTAINER)\r\n                temp += child.renderContainerHtml();\r\n            self.childrenHash[child.properties.uniqueId] = child;\r\n        });\r\n\r\n        return temp;\r\n    },\r\n    /*\r\n    *   Iterate through all the renders in the container and fills the hashtable\r\n    */\r\n    collectRenderValues: function (renderValues) {\r\n        var self = this;\r\n        if (self.children) {\r\n            $.each(self.children, function (i, child) {\r\n                if (child.getElementType() == bizagi.rendering.element.ELEMENT_TYPE_CONTAINER) {\r\n                    // Go though container\r\n                    child.collectRenderValues(renderValues);\r\n\r\n                } else if (child.getElementType() == bizagi.rendering.element.ELEMENT_TYPE_RENDER) {\r\n                    // Check if the render can be sent to the server\r\n                    if (child.canBeSent()) {\r\n                        child.collectData(renderValues);\r\n                    }\r\n                }\r\n            });\r\n        }\r\n    },\r\n\r\n    /*\r\n    *   Iterate through all the renders and check if has changed\r\n    */\r\n    hasChanged: function (result) {\r\n        var self = this;\r\n        result = result || [];\r\n\r\n        if (!result.length) {\r\n            if(self.children){\r\n                $.each(self.children, function (i, child) {\r\n                    if (result.length || child.hasChanged(result)) {\r\n                        return false;\r\n                    }\r\n                });\r\n            }\r\n        } else {\r\n            return result;\r\n        }\r\n    },\r\n\r\n    /*\r\n    *    Creates a json array parameters to search result\r\n    */\r\n    collectRenderValuesQueryForm: function (renderValues) {\r\n        var self = this;\r\n        $.each(self.children, function (i, child) {\r\n            if (child.getElementType() == bizagi.rendering.element.ELEMENT_TYPE_CONTAINER) {\r\n                // Go though container\r\n                child.collectRenderValuesQueryForm(renderValues);\r\n\r\n            } else if (child.getElementType() == bizagi.rendering.element.ELEMENT_TYPE_RENDER) {\r\n                // Check if the render can be sent to the server\r\n                if (child.canBeSentQueryForm()) {\r\n                    child.collectDataQueryForm(renderValues);\r\n                }\r\n            }\r\n        });\r\n    },\r\n    /*\r\n    *   Gets the first child\r\n    */\r\n    firstChild: function () {\r\n        return this.children[0];\r\n    },\r\n    /*\r\n    *   Method to find all the renders matching an xpath inside the container\r\n    */\r\n    getRenders: function (xpath, renders) {\r\n        var self = this;\r\n\r\n        renders = renders || [];\r\n\r\n        // Remove [] filters for grid columns xpaths to fully identify the grid as the xpath target\r\n        if (xpath.indexOf(\"[\") > 0) {\r\n            xpath = xpath.substring(0, xpath.indexOf(\"[\"));\r\n        }\r\n\r\n        $.each(self.children, function (i, child) {\r\n            if (child.getElementType() == bizagi.rendering.element.ELEMENT_TYPE_CONTAINER) {\r\n                // Go though container\r\n                child.getRenders(xpath, renders);\r\n\r\n            } else if (child.getElementType() == bizagi.rendering.element.ELEMENT_TYPE_RENDER) {\r\n                if (xpath == child.properties.xpath) {\r\n                    renders.push(child);\r\n                }\r\n            }\r\n        });\r\n\r\n        return renders;\r\n    },\r\n    /* \r\n    *   Gets the first editable render \r\n    */\r\n    getRender: function (xpath) {\r\n        var self = this;\r\n        var renders = self.getRenders(xpath);\r\n        var result = null;\r\n        $.each(renders, function (i, render) {\r\n            if (render.properties.editable) {\r\n                if (result == null)\r\n                    result = render;\r\n            }\r\n        });\r\n\r\n        // if no render has been found, skip editable condition\r\n        if (result == null) {\r\n            $.each(renders, function (i, render) {\r\n                result = render;\r\n            });\r\n        }\r\n\r\n        return result;\r\n    },\r\n\r\n    /*\r\n     *   Gets all renders by xpath\r\n     */\r\n    getRendersByXpath: function (xpath) {\r\n        var self = this;\r\n        return self.getRenders(xpath);\r\n    },\r\n\r\n    /* \r\n    *   Gets a container by the id\r\n    */\r\n    getContainer: function (id) {\r\n        var self = this;\r\n\r\n        if (self.properties.id == id)\r\n            return this;\r\n\r\n        var result;\r\n        $.each(self.children, function (i, child) {\r\n            if (child.getElementType() == bizagi.rendering.element.ELEMENT_TYPE_CONTAINER) {\r\n                // Go though container\r\n                var o = child.getContainer(id);\r\n                if (o != null) {\r\n                    result = o;\r\n                    return false;\r\n                }\r\n            }\r\n        });\r\n\r\n        return result;\r\n    },\r\n    /* \r\n    *   Validate all renders in the container \r\n    */\r\n    isValid: function (invalidElements) {\r\n        var self = this;\r\n\r\n        if (self.children) {\r\n            $.each(self.children, function (i, child) {\r\n                if (child.properties.visible) {\r\n                    if (child.getElementType() == bizagi.rendering.element.ELEMENT_TYPE_CONTAINER) {\r\n                        // Go though container\r\n                        child.isValid(invalidElements);\r\n                    } else if (child.getElementType() == bizagi.rendering.element.ELEMENT_TYPE_RENDER) {\r\n                        // Go to the render\r\n                        child.isValid(invalidElements);\r\n                    }\r\n                }\r\n            });\r\n        }\r\n\r\n        return invalidElements.length == 0;\r\n    },\r\n\r\n    /*\r\n   *   Validate all grids in the container\r\n   */\r\n    hasValidGrids: function (invalidElements) {\r\n        var self = this;\r\n\r\n        $.each(self.children, function (i, child) {\r\n            if (child.properties.visible) {\r\n                if (child.getElementType() == bizagi.rendering.element.ELEMENT_TYPE_CONTAINER) {\r\n                    // Go though container\r\n                    child.hasValidGrids(invalidElements);\r\n\r\n                } else if (child.getElementType() == bizagi.rendering.element.ELEMENT_TYPE_RENDER && typeof (child.grid) != \"undefined\") {\r\n                    // Go to the render\r\n                    child.isValid(invalidElements);\r\n                }\r\n            }\r\n        });\r\n\r\n        return invalidElements.length == 0;\r\n    },\r\n    /*\r\n    *   Returns a promise that will resolve when the element is ready\r\n    */\r\n    ready: function () {\r\n        var self = this;\r\n        return $.when(self.parent.ready(), self.isRendered());\r\n    },\r\n    /*\r\n    *   Returns a promise that will resolve when the element is ready to save\r\n    */\r\n    isReadyToSave: function () {\r\n        var self = this;\r\n        var childrenPromises = $.map(self.children, function (child) {\r\n            return child.isReadyToSave();\r\n        });\r\n        return $.when.apply($, childrenPromises);\r\n    },\r\n    /*  \r\n    *   Return the current focuses container\r\n    */\r\n    getFocus: function () {\r\n        var self = this;\r\n        var focus;\r\n        $.each(self.children, function (i, child) {\r\n            if (child.getElementType() == bizagi.rendering.element.ELEMENT_TYPE_CONTAINER) {\r\n                var result = child.getFocus();\r\n                if (!bizagi.util.isEmpty(result)) {\r\n                    focus = result;\r\n                }\r\n            }\r\n        });\r\n\r\n        return focus;\r\n    },\r\n    /*\r\n    *   Get the custom handlers set for this execution\r\n    */\r\n    getCustomHandlers: function () {\r\n        var self = this;\r\n        var form = self.getFormContainer();\r\n\r\n        if (form) {\r\n            return form.getCustomHandlers();\r\n        }\r\n    },\r\n    /*\r\n    *   Get the custom handlers set for this execution\r\n    */\r\n    getCustomHandler: function (key) {\r\n        var self = this;\r\n        var customHandlers = self.getCustomHandlers();\r\n\r\n        if (customHandlers) {\r\n            return customHandlers[key];\r\n        }\r\n    },\r\n    /*\r\n    *   Dispose the class so we can detect when a class is invalid already\r\n    */\r\n    dispose: function () {\r\n        var self = this;\r\n\r\n        // Iterate through elements\r\n        setTimeout(function () {\r\n            if (self.children) {\r\n                $.each(self.children, function (i, child) {\r\n                    child.dispose();\r\n                });\r\n            }\r\n        }, bizagi.override.disposeTime || 50);\r\n\r\n        // Call base\r\n        self._super();\r\n    },\r\n\r\n    /*\r\n    *   Refresh the current container\r\n    */\r\n    refreshContainer: function (args) {\r\n        var self = this;\r\n        var properties = self.properties;\r\n        var form = self.getFormContainer();\r\n\r\n        // Start waiting\r\n        self.startLoading();\r\n\r\n        // Execute personalized stuff before to refresh it\r\n        self.beforeToRefresh();\r\n\r\n        // Call the service\r\n        return $.when(self.dataService.multiaction().refreshControl({\r\n            xpath: properties.xpath,\r\n            idRender: properties.id,\r\n            idPageCache: properties.idPageCache,\r\n            xpathContext: (properties.xpathContext || args.xpathContext),\r\n            contexttype: self.properties.contexttype || \"\",\r\n            idForm: (form && form.properties && form.properties.id) ? form.properties.id : \"\" //To fix BA56877.\r\n        })).done(function (data) {\r\n\r\n            if (!self.isDisposed()) {\r\n\r\n                // Unregister children of container to replace in hash self.rendersById and self.rendersByXpath\r\n                self.unregisterChildren();\r\n                delete self.children;\r\n                delete self.childrenHash;\r\n\r\n                self.getFormContainer().removeActions();\r\n\r\n                // update editable\r\n                if (self.properties.editable === false) {\r\n                    data.container && data.container.properties ? (data.container.properties.editable = false) : \"\";\r\n                }\r\n\r\n                // Update the data\r\n                self.initializeData(data.container);\r\n\r\n                // Render the container again\r\n                var currentContainer = self.container;\r\n                var result = self.render();\r\n\r\n                if (self.properties.type == \"tabItem\") {\r\n                    $(result).addClass(\"childrenActive\");\r\n                }\r\n\r\n                currentContainer.replaceWith(result);\r\n\r\n                // Rebind the actions\r\n                var actions = data.container && data.container.actions ? data.container.actions : [];\r\n                self.getFormContainer().refreshActions(actions);\r\n\r\n                self.triggerChildrenActions();\r\n\r\n                // Execute personalized stuff after to refresh it\r\n                self.afterToRefresh();\r\n\r\n            }\r\n        }).fail(function (message) {\r\n            message = self.processFailMessage(message);\r\n\r\n        }).always(function () {\r\n            self.endLoading();\r\n        });\r\n    },\r\n\r\n    /*\r\n     *   Refresh the current container\r\n     */\r\n    refreshDesignContainer: function (data) {\r\n        var self = this;\r\n        var properties = self.properties;\r\n\r\n        // Execute personalized stuff before to refresh it\r\n        self.beforeToRefresh(data);\r\n        //self.setActiveTab(data.elements);\r\n\r\n        $.extend(data.properties, {\r\n            editable: properties.editable,\r\n            contexttype: (properties.contexttype || \"\"),\r\n            idPageCache: properties.idPageCache,\r\n            idRender: properties.id,\r\n            messageValidation: properties.messageValidation,\r\n            uniqueId: properties.uniqueId,\r\n            visible:properties.visible,\r\n            xpath: properties.xpath,\r\n            mode: \"design\",\r\n            xpathContext: properties.xpathContext || \"\"\r\n        });\r\n\r\n\r\n        if (!self.isDisposed()) {\r\n            // Unregister children of container to replace in hash self.rendersById and self.rendersByXpath\r\n            self.unregisterChildren();\r\n            delete self.children;\r\n            delete self.childrenHash;\r\n\r\n            // update editable\r\n            if (self.properties.editable === false) {\r\n                data.container && data.container.properties ? (data.container.properties.editable = false) : \"\";\r\n            }\r\n\r\n            // Update the data\r\n            self.initializeData(data.container);\r\n\r\n            // Render the container again\r\n            var currentContainer = self.container;\r\n            var result = self.render();\r\n\r\n            if (self.properties.type == \"tabItem\") {\r\n                $(result).addClass(\"childrenActive\");\r\n            }\r\n\r\n            currentContainer && currentContainer.replaceWith(result);\r\n\r\n            // Execute personalized stuff after to refresh it\r\n            self.afterToRefresh();\r\n        }\r\n    },\r\n\r\n    beforeToRefresh: function () {\r\n        var self = this;\r\n\r\n        // Call beforeToRefresh of each children\r\n        for (var i = 0; i < self.children.length; i++) {\r\n            self.children[i].beforeToRefresh();\r\n        }\r\n    },\r\n\r\n    afterToRefresh: function () {\r\n        var self = this;\r\n\r\n        var formContainer = self.getFormContainer();\r\n        formContainer.tryToExecuteFunction(self.properties.id);\r\n\r\n        // Call beforeToRefresh of each children\r\n        for (var i = 0; i < self.children.length; i++) {\r\n            self.children[i].afterToRefresh();\r\n        }\r\n    },\r\n\r\n    /*\r\n    *   Re-execute children actions\r\n    */\r\n    triggerChildrenActions: function () {\r\n        var self = this;\r\n\r\n        var form = self.getFormContainer();\r\n        var children = self.children;\r\n\r\n        for (var i = 0, l = children.length; i < l; i++) {\r\n            var child = children[i];\r\n            var type = child.getElementType();\r\n\r\n            if (type === bizagi.rendering.element.ELEMENT_TYPE_CONTAINER) {\r\n                child.triggerChildrenActions();\r\n            }\r\n            else if (type === bizagi.rendering.element.ELEMENT_TYPE_RENDER) {\r\n                child.triggerRenderChange({ changed: false });\r\n            }\r\n        }\r\n    },\r\n\r\n\r\n    /*\r\n    * register actions container\r\n    */\r\n    registerActions: function (actions) {\r\n        var self = this;\r\n        var form = self.getFormContainer();\r\n\r\n        if (actions) {\r\n            form.actionController.buildActions(actions);\r\n        }\r\n    },\r\n\r\n    /*\r\n    * unregister children container\r\n    */\r\n    unregisterChildren: function () {\r\n        var self = this;\r\n\r\n        var form = self.getFormContainer();\r\n        var children = self.children;\r\n\r\n        for (var i = 0, l = children.length; i < l; i++) {\r\n            var child = children[i];\r\n            var type = child.getElementType();\r\n\r\n            if (type === bizagi.rendering.element.ELEMENT_TYPE_CONTAINER) {\r\n                child.unregisterChildren();\r\n            }\r\n            else if (type === bizagi.rendering.element.ELEMENT_TYPE_RENDER) {\r\n                form.unregisterRender(child);\r\n            }\r\n        }\r\n    },\r\n    /*\r\n    * Replace child\r\n    */\r\n    replaceChild: function (element) {\r\n        var self = this;\r\n\r\n        var children = self.children;\r\n\r\n        for (var i = 0, l = children.length; i < l; i++) {\r\n            var child = children[i];\r\n\r\n            if (child.properties.uniqueId == element.properties.uniqueId) {\r\n                children.splice(i, 1);\r\n                children.splice(i, 0, element);\r\n                break;\r\n            }\r\n        }\r\n    },\r\n    /*\r\n    * Gets child\r\n    */\r\n    getChildById: function (id) {\r\n\r\n        var self = this;\r\n\r\n        var children = self.children;\r\n\r\n        for (var i = 0, l = children.length; i < l; i++) {\r\n            var child = children[i];\r\n\r\n            if (child.properties.id == id) {\r\n                return child;\r\n            }\r\n        }\r\n\r\n        return null;\r\n    }\r\n\r\n});\r\n","/**\r\n *   Name: Bizagi Tablet Container Extension\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will redefine the container class to adjust to tablet devices\r\n */\r\n\r\n// Extends itself\r\nbizagi.rendering.container.extend(\"bizagi.rendering.tablet.container\", {}, {\r\n    /**\r\n     * Starts waiting signal for async stuff\r\n     */\r\n    startLoading: function () {\r\n    },\r\n\r\n    /**\r\n     * Ends waiting for async stuff\r\n     */\r\n    endLoading: function () {\r\n    }\r\n});\r\n","/*\r\n *   Name: Bizagi Render Class\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define a base render class with common stuff related to all renders\r\n */\r\n\r\nbizagi.rendering.element.extend(\"bizagi.rendering.render\", {\r\n    postRenderTimeout: 0,\r\n    maxRendersPerScreen: 50,\r\n    rendersExecuted: 0,\r\n    renderOptimization: false,\r\n    TYPE_QUERY_FORM: \"queryForm\",\r\n    startOptimization: function () {\r\n        bizagi.rendering.render.postRenderTimeout = 500;\r\n        bizagi.rendering.render.rendersExecuted = 0;\r\n        // Cancelled optimization temporally, because its on experimental stage\r\n        bizagi.rendering.render.renderOptimization = false;\r\n    },\r\n    stopOptimization: function () {\r\n        bizagi.rendering.render.postRenderTimeout = 0;\r\n        bizagi.rendering.render.rendersExecuted = 0;\r\n        bizagi.rendering.render.renderOptimization = false;\r\n    }\r\n}, {\r\n    /*\r\n    *   Update or init the element data\r\n    */\r\n    initializeData: function (data) {\r\n        var self = this;\r\n\r\n        // Call base\r\n        self._super(data);\r\n\r\n        var form = self.getFormContainer();\r\n\r\n        // Fill default properties\r\n        var properties = self.properties;\r\n\r\n        properties.included = (typeof properties.included != \"undefined\") ? bizagi.util.parseBoolean(properties.included) : false;\r\n        properties.uniqueId = Math.ceil(Math.random() * 1000000);\r\n        properties.displayName = properties.displayName || \"\";\r\n        properties.editable = (typeof properties.editable != \"undefined\") ? bizagi.util.parseBoolean(properties.editable) : true;\r\n        properties.visible = (typeof properties.visible != \"undefined\") ? bizagi.util.parseBoolean(properties.visible) : true;\r\n        properties.includedInResult = (typeof properties.includedInResult != \"undefined\") ? bizagi.util.parseBoolean(properties.includedInResult) : false;\r\n\r\n        var renderType = bizagi.util.normalizeType(properties.type);\r\n        if (/^hidden$/i.test(renderType)) {\r\n            properties.visible = false;\r\n        }\r\n\r\n        properties.required = (typeof properties.required != \"undefined\") ? bizagi.util.parseBoolean(properties.required) : false;\r\n        properties.submitOnChange = (typeof properties.submitOnChange != \"undefined\") ? bizagi.util.parseBoolean(properties.submitOnChange) : false;\r\n        properties.maxLength = properties.maxLength || 0;\r\n        properties.helpText = bizagi.util.trim(properties.helpText) || \"\";\r\n        properties.textFormat = properties.textFormat || {};\r\n        properties.valueFormat = properties.valueFormat || {};\r\n        properties.isHidden = (typeof properties.isHidden != \"undefined\") ? bizagi.util.parseBoolean(properties.isHidden) : false;\r\n        properties.visible = (properties.isHidden) ? false : properties.visible;\r\n        //BUG 26867 -    Verify if the control was editable in sometime. Apply only in the column grid (canBeSent). \r\n        //Change the value property on changeEditability, changeEditabilityCellControl\r\n        properties.editabilityEnabled = false;\r\n\r\n        // Old color and background color\r\n        if (properties.color) {\r\n            properties.textFormat.color = properties.color;\r\n        }\r\n\r\n        if (properties.backgroundColor) {\r\n            properties.textFormat.backgroundColor = properties.backgroundColor;\r\n        }\r\n\r\n        // Non-editable fields cannot be required\r\n        properties.required = properties.editable ? properties.required : false;\r\n\r\n        // Override orientation from parent if not set\r\n        properties.orientation = properties.orientation || \"auto\";\r\n\r\n        // Check contexttype\r\n        properties.contexttype = (form.params && form.params.data && form.params.data.contextType) ? form.params.data.contextType : \"\";\r\n\r\n        // Save original properties\r\n        self.originalProperties = {\r\n            textFormat: {\r\n                color: properties.textFormat.color,\r\n                backgroundColor: properties.textFormat.backgroundColor\r\n            },\r\n            valueFormat: {\r\n                color: properties.textFormat.color,\r\n                backgroundColor: properties.textFormat.backgroundColor\r\n            },\r\n            visible: properties.visible,\r\n            editable: properties.editable,\r\n            required: properties.required,\r\n            labelAlign: properties.labelAlign,\r\n            valueAlign: properties.valueAlign\r\n        };\r\n\r\n        // Create value property\r\n        self.value = typeof (properties.value) !== \"undefined\" ? properties.value : null;\r\n\r\n        // Register original value property\r\n        self.properties.originalValue = self.value;\r\n        self.properties.previousValue = self.value;\r\n\r\n        // Calculate layout properties\r\n        self.calculateInitialLayoutProperties();\r\n    },\r\n    /*\r\n    *   Calculate aligns, display types, rtl and widths\r\n    */\r\n    calculateInitialLayoutProperties: function () {\r\n        var self = this;\r\n        var properties = self.properties;\r\n\r\n        // Set visual defaults\r\n        properties.displayType = properties.displayType || \"normal\";\r\n        properties.labelAlign = properties.labelAlign || self.getDefaultLabelAlign(properties.displayType);\r\n        properties.valueAlign = properties.valueAlign || self.getDefaultValueAlign(properties.displayType);\r\n\r\n        // Check rtl orientation\r\n        if (properties.orientation === \"rtl\") {\r\n            properties.labelAlign = self.getRTLAlign(properties.labelAlign);\r\n            properties.valueAlign = self.getRTLAlign(properties.valueAlign);\r\n        }\r\n\r\n        // Calculate render with\r\n        var renderWidth = self.calculateRenderWidth(properties.labelWidth, properties.valueWidth, properties.displayType);\r\n        properties.labelWidth = renderWidth.label;\r\n        properties.valueWidth = renderWidth.control;\r\n\r\n        if (properties.layoutType === \"percentage\") {\r\n            properties.valueWidth = renderWidth.control;\r\n        }\r\n\r\n        if (properties.labelWidth == 0) {\r\n            properties.displayType = \"value\";\r\n            properties.valueWidth = renderWidth.control;\r\n        }\r\n\r\n        if (properties.valueWidth == 0) {\r\n            properties.displayType = \"label\";\r\n        }\r\n\r\n        if (properties.type === \"userfield\") {\r\n            if (properties.displayType === \"both\") {\r\n                properties.valueWidth = properties.valueWidth || 50;\r\n                properties.labelWidth = properties.labelWidth || 50;\r\n            } else if (properties.displayType === \"vertical\") {\r\n                properties.valueWidth = 100;\r\n                properties.labelWidth = 100;\r\n            } else {\r\n                properties.valueWidth = 100;\r\n                properties.labelWidth = 0;\r\n            }\r\n        }\r\n    },\r\n    /*\r\n    *   Returns the element type\r\n    */\r\n    getElementType: function () {\r\n        return bizagi.rendering.element.ELEMENT_TYPE_RENDER;\r\n    },\r\n    /*\r\n    *   Returns the html templated element\r\n    */\r\n    render: function (renderTemplateName) {\r\n        return this.renderElement(renderTemplateName);\r\n    },\r\n    /*\r\n    *   Returns the html templated element\r\n    */\r\n    renderElement: function (renderTemplateName) {\r\n        var self = this;\r\n        var properties = self.properties;\r\n        var form = self.getFormContainer();\r\n        // Start rendering deferred\r\n        self.renderingDeferred = new $.Deferred();\r\n\r\n        // Set render template\r\n        renderTemplateName = renderTemplateName || \"render\";\r\n        var renderTemplate = self.renderFactory.getTemplate(renderTemplateName);\r\n\r\n        // Resolve render label\r\n        var label = properties.displayName;\r\n        if (typeof label == \"string\") {\r\n            label = label.replaceAll(\"&\", \"&amp;\");\r\n            label = label.replaceAll(\"$\", \"&#36;\");\r\n            label = label.replaceAll(\"<\", \"&lt;\").replaceAll(\">\", \"&gt;\");\r\n            label = label.replaceAll(\"\\\"\", \"&#34;\").replaceAll(\"'\", \"&#39;\").replaceAll(\"/\", \"&#47;\");\r\n            label = label.replaceAll(\"\\\\n\", \"<br/>\");\r\n            label = label.replaceAll(\"\\n\", \"<br/>\");\r\n        }\r\n\r\n        var isFullRender = bizagi.util.detectDevice() !== \"desktop\" && (properties.type === \"association\" || properties.type === \"uploadecm\" || ((properties.type === \"actionLauncher\" || properties.type === \"polymorphicLauncher\") && bizagi.util.isTabletDevice()) || (properties.type === \"grid\" && !bizagi.util.isTabletDevice()));\r\n        var labelWidth = parseFloat(properties.labelWidth);\r\n\r\n        // Render template\r\n        var html = $.fasttmpl(renderTemplate, {\r\n            label: label, helpText: properties.helpText,\r\n            editable: properties.editable,\r\n            isExtendedText: (properties.type == \"text\" && properties.isExtended),\r\n            orientation: properties.orientation,\r\n            uniqueId: properties.uniqueId,\r\n            id: properties.id,\r\n            xpath: properties.xpath,\r\n            tag: properties.tag,\r\n            displayType: properties.displayType,\r\n            displayOptionClass: self.getDisplayOptionClass(properties.displayType),\r\n            labelAlignClass: self.getAlignClass(properties.labelAlign),\r\n            valueAlignClass: self.getAlignClass(properties.valueAlign),\r\n            labelWidth: labelWidth,\r\n            stringLabelWidth: labelWidth + (properties.layoutType == 'pixels' ? 'px' : '%'),\r\n            valueWidth: parseFloat(properties.valueWidth),\r\n            stringValueWidth: parseFloat(properties.valueWidth) + (properties.layoutType == 'pixels' ? 'px' : '%'),\r\n            layoutType: properties.layoutType,\r\n            isDesign: self.getMode() === \"design\",\r\n            messageValidation: properties.messageValidation,\r\n            printVersion: form.params.printversion,\r\n            cssClass: properties.cssclass || \"\",\r\n            includedInResult: properties.includedInResult,\r\n            included: properties.included,\r\n            type: properties.type,\r\n            showFullRender: isFullRender,\r\n            required: properties.required,\r\n            helpText: properties.helpText\r\n        });\r\n\r\n        // Render internal control html\r\n        var result = self.internalRenderControl();\r\n        if (!result) {\r\n            result = \"\";\r\n        }\r\n\r\n        // Check if this is an async element or not\r\n        var async = typeof (result) === \"object\" && result.done;\r\n        if (!async) {\r\n            html = self.replaceControlHtml(html, result);\r\n\r\n        } else {\r\n            if (result.state() === \"resolved\") {\r\n                // Fetch resolved result\r\n                html = self.replaceControlHtml(html, self.resolveResult(result));\r\n                self.asyncRenderDeferred = null;\r\n            } else {\r\n                // Wait for result\r\n                self.asyncRenderDeferred = result;\r\n                html = self.replaceControlHtml(html, \"\");\r\n            }\r\n        }\r\n\r\n        return html;\r\n    },\r\n    /*\r\n    *   Returns the resolved result from a promise when the promise has been executed already\r\n    */\r\n    resolveResult: function (promise) {\r\n        return bizagi.resolveResult(promise);\r\n    },\r\n    /*\r\n    *   Check if the jquery element is ready or not\r\n    */\r\n    isRendered: function () {\r\n        var self = this;\r\n        if (!self.renderingDeferred) {\r\n            return false;\r\n        }\r\n        return self.renderingDeferred.promise();\r\n    },\r\n    /*\r\n    *   Renders the control html\r\n    */\r\n    internalRenderControl: function () {\r\n        var self = this;\r\n        var properties = self.properties;\r\n        self.control = null;\r\n\r\n        if (self.renderFactory.printVersion) {\r\n            properties.editable = false;\r\n            return self.renderControl();\r\n        } else if (properties.editable) {\r\n            return self.renderControl();\r\n        }\r\n\r\n        return self.renderReadOnly();\r\n    },\r\n    /*\r\n    *   Template method to implement in each device to customize each render after processed\r\n    */\r\n    postRenderElement: function (element) {\r\n        var self = this;\r\n        var properties = self.properties;\r\n\r\n        // Set element variable\r\n        self.element = element;\r\n\r\n        if (properties.submitOnChange)\r\n            self.configureSubmitOnChange();\r\n\r\n        // Process internal layout\r\n        isLabelFormat = true;\r\n\r\n        var executePostRender = function (_element) {\r\n            if (bizagi.rendering.render.renderOptimization &&\r\n                bizagi.rendering.render.rendersExecuted > bizagi.rendering.render.maxRendersPerScreen) {\r\n\r\n                // Execute post-render control\r\n                setTimeout(function () {\r\n                    self.internalPostRender(_element);\r\n                    bizagi.rendering.render.postRenderTimeout += 50;\r\n                }, bizagi.rendering.render.postRenderTimeout);\r\n\r\n            } else {\r\n                self.internalPostRender(_element);\r\n            }\r\n            bizagi.rendering.render.rendersExecuted++;\r\n        };\r\n\r\n        if (self.asyncRenderDeferred) {\r\n            // Wait for async result\r\n            $.when(self.asyncRenderDeferred)\r\n                .done(function (html) {\r\n                    var control = self.getControl();\r\n                    if (typeof self.emptyControlByAsyncRenderDeferred == \"function\") {\r\n                        self.emptyControlByAsyncRenderDeferred();\r\n                    }\r\n                    control.append(html);\r\n\r\n                    // Execute post-render control\r\n                    executePostRender(element);\r\n                    self.processLayout(!isLabelFormat, self.properties.valueFormat || {});\r\n                });\r\n        } else {\r\n            // Execute post-render control\r\n            executePostRender(element);\r\n        }\r\n    },\r\n    /*\r\n    *   Executes the post render handlers\r\n    */\r\n    internalPostRender: function (element) {\r\n        var self = this;\r\n        var properties = self.properties;\r\n        var mode = self.getMode();\r\n\r\n        self.control = self.getControl();\r\n\r\n        // Resolve rendering deferred\r\n        if (self.renderingDeferred) {\r\n            self.renderingDeferred.resolve();\r\n        }\r\n\r\n        // Execute post-renders\r\n        if (properties.editable) {\r\n            // Post-render editable version\r\n            if (self.renderFactory.printVersion && self.postRenderPrintVersion) {\r\n                self.postRenderPrintVersion();\r\n            } else {\r\n                self.postRender();\r\n            }\r\n\r\n        } else {\r\n            // Post-render readonly version\r\n            self.postRenderReadOnly(element);\r\n        }\r\n\r\n        // Perform execution mode methods\r\n        if (mode == \"execution\") {\r\n            self.performExecutionModeMethods();\r\n        } else {\r\n            self.performDesignModeMethods();\r\n        }\r\n\r\n        self.processLayout(isLabelFormat, self.properties.textFormat || {});\r\n        self.processLayout(!isLabelFormat, self.properties.valueFormat || {});\r\n    },\r\n    /*\r\n    *   Execute runtime only methods\r\n    */\r\n    performExecutionModeMethods: function () {\r\n        var self = this;\r\n        var properties = self.properties;\r\n        if (self.getFormType() == self.Class.TYPE_QUERY_FORM) {\r\n            self.configureHandlersQueryForm();\r\n        }\r\n\r\n        // Apply handlers\r\n        if (properties.editable) {\r\n            self.configureHandlers();\r\n        } else {\r\n            self.configureHandlersReadOnly();\r\n        }\r\n\r\n        // Set initial value\r\n        self.internalSetInitialValue();\r\n    },\r\n    /**\r\n     * Execute design only methods\r\n     */\r\n    performDesignModeMethods: function () {\r\n        var self = this;\r\n\r\n        // Execute custom code for each render\r\n        self.configureDesignView();\r\n\r\n        // Set initial value\r\n        self.internalSetInitialValue();\r\n    },\r\n    /*\r\n    *   Replaces a {{control}} string in the specified element\r\n    */\r\n    replaceControlHtml: function (html, replace) {\r\n        html = html || \"\";\r\n        replace = replace || \"\";\r\n        return html.replaceFirstWithoutPatterns(\"{{control}}\", replace);\r\n    },\r\n    /*\r\n    *   Return the rendered element\r\n    */\r\n    getRenderedElement: function () {\r\n        if (bizagi.util.isEmpty(this.element)) {\r\n            bizagi.log(\" render hasn't been rendered!\", this, \"error\");\r\n        }\r\n\r\n        return this.element;\r\n    },\r\n    /*\r\n    *   Sets the initial value for the renders\r\n    */\r\n    internalSetInitialValue: function () {\r\n        var self = this;\r\n        var properties = self.properties;\r\n        self.internalSetInitialValueFlag = true;\r\n\r\n        // Set the initial value\r\n        if (properties.editable) {\r\n            if (!bizagi.util.isEmpty(self.value)) {\r\n                self.setDisplayValue(self.value);\r\n            }\r\n        } else {\r\n            if (!bizagi.util.isEmpty(self.value)) {\r\n                self.setDisplayValue(self.value);\r\n            }\r\n        }\r\n        self.internalSetInitialValueFlag = false;\r\n    },\r\n    /*\r\n    * Public method to determine if a value is valid or not\r\n    */\r\n    isValid: function (invalidElements) {\r\n        var self = this;\r\n        var properties = self.properties;\r\n        var message;\r\n        var inlineAdd = self.grid && self.grid.properties && self.grid.properties.inlineAdd;\r\n\r\n        // Don't check non-editable renders\r\n        if (bizagi.util.parseBoolean(properties.visible) === false) {\r\n            return true;\r\n        }\r\n        // Don't check non-editable renders\r\n        if (bizagi.util.parseBoolean(properties.editable) === false && !inlineAdd) {\r\n            return true;\r\n        }\r\n\r\n        // Clear error message\r\n        self.setValidationMessage(\"\");\r\n\r\n        // Check required\r\n        if (bizagi.util.parseBoolean(properties.required)) {\r\n            var form = self.getFormContainer();\r\n            var hasValue = false;\r\n            var renders = self.grid ? [self] : form.getRenders(properties.xpath);\r\n            var isQueryForm = /^query/i.test(properties.type);\r\n\t               \r\n            renders.filter(function (render) {\r\n                return render.properties.id == properties.id;\r\n            }).forEach(function (render) {\r\n                if (render.hasValue() && (render.properties.editable || inlineAdd)) {\r\n                    hasValue = true;\r\n                    return false;\r\n                }\r\n            });\r\n\r\n            if (!hasValue && !self.properties.isClone) {\r\n                message = self.getResource(\"render-required-text\").replaceAll(\"#label#\", properties.displayName);\r\n                var messageData = {xpath: properties.xpath, message: message};\r\n\r\n                if (isQueryForm) {\r\n                    messageData = $.extend({}, messageData, {\r\n                        id: properties.id,\r\n                        isQuery: isQueryForm\r\n                    });\r\n                }\r\n\r\n                invalidElements.push(messageData);\r\n                return false;\r\n            }\r\n        }\r\n\r\n        // Check retypes\r\n        if (properties.retype == \"duplicate\") {\r\n            // Don't process cloned renders, just originals\r\n            if (self.cloneRender) {\r\n                if (self.cloneRender.getValue() != self.getValue()) {\r\n                    message = self.getResource(\"render-text-retype-error\");\r\n                    invalidElements.push({xpath: properties.xpath, message: message});\r\n                    return false;\r\n                }\r\n            }\r\n        } else if (properties.retype == \"double\") {\r\n            var control = $(\"input\", self.element);\r\n\r\n            //Waits until the control has the second value written\r\n            if (control && control.data(\"oldValue\")) {\r\n                if (control.val() === \"\") {\r\n\r\n                    message = self.getResource(\"render-text-retype-error\");\r\n                    invalidElements.push({\r\n                        xpath: properties.xpath,\r\n                        message: message\r\n                    });\r\n\r\n                    return false;\r\n                } else if (control.val() != control.data(\"oldValue\")) {\r\n                    message = self.getResource(\"render-text-retype-error\");\r\n                    invalidElements.push({xpath: properties.xpath, message: message});\r\n\r\n                    return false;\r\n                }\r\n            }\r\n        }\r\n\r\n        // Check maxlength\r\n        var columnEditable = self.grid && self.grid.getColumn ? self.grid.getColumn(self.properties.xpath).properties.editable : true;\r\n        if (properties.type !== \"userPassword\" && properties.maxLength !== undefined && properties.maxLength > 0 && bizagi.util.isNumeric(properties.maxLength)) {\r\n            if (columnEditable || (!columnEditable && self.controlValueIsChanged())) {\r\n                var maxLength = new Number(properties.maxLength);\r\n                var value = self.getValue();\r\n\r\n                if (value && value.toString().length > maxLength) {\r\n                    message = self.getResource(\"render-text-maxLength-error\").replaceAll(\"#maxLength#\", maxLength);\r\n                    invalidElements.push({xpath: properties.xpath, message: message});\r\n                    return false;\r\n                }\r\n            }\r\n        }\r\n\r\n        return true;\r\n    },\r\n\r\n    /*\r\n    *   Check if a render has no value for required validation\r\n    */\r\n    hasValue: function () {\r\n        var self = this;\r\n        // Next line decides if only spaces are accepted as valid texts or not. Anyway the spaces are still saved as self.value has not changed\r\n        var value = self.getValue();\r\n\r\n        if (value && self.properties.type === \"text\") {\r\n            value = typeof (value) === \"string\" ? value.trim() : value;\r\n        }\r\n\r\n        return !bizagi.util.isEmpty(value);\r\n    },\r\n    /*\r\n    *   Template method to implement in each device to customize each render after processed\r\n    */\r\n    postRender: function () {       \r\n    },\r\n    /*\r\n    *   Template method to implement in each device to customize each render after processed in read-only mode\r\n    */\r\n    postRenderReadOnly: function () {\r\n    },\r\n    /*\r\n    *   Template method to implement in each device to customize the render's behaviour to add handlers\r\n    */\r\n    configureHandlers: function () {\r\n    },\r\n    /*\r\n    *   Template method to implement in each device to customize the render's behaviour to add handlers when the control is readonly\r\n    */\r\n    configureHandlersReadOnly: function () {\r\n    },\r\n    /*\r\n    *   Template method to implement in each device to customize the render's behaviour when rendering in design mode\r\n    */\r\n    configureDesignView: function () {\r\n    },\r\n    /*\r\n    *   Method to process the render the layout\r\n    */\r\n    processLayout: function (isLabelFormat, format) {\r\n        var self = this;\r\n        var properties = self.properties;\r\n\r\n        if (self.getControl() == null) return;\r\n\r\n        // Set customizations\r\n        format = format || {};\r\n\r\n        if (format.color) {\r\n            self.changeColor(format.color, isLabelFormat);\r\n        }\r\n        if (format.background) {\r\n            self.changeBackgroundColor(format.background);\r\n        }\r\n        //if bold is true in modeler, we receive nothing in execution (!formal.bold)\r\n        if (format.bold || !format.bold || !isLabelFormat) {\r\n            self.changeFontBold(format.bold, isLabelFormat);\r\n        }\r\n        if (format.italic) {\r\n            self.changeFontItalic(format.italic, isLabelFormat);\r\n        }\r\n        if (format.underline) {\r\n            self.changeFontUnderline(format.underline, isLabelFormat);\r\n        }\r\n        if (format.strikethru) {\r\n            self.changeFontStrikethru(format.strikethru, isLabelFormat);\r\n        }\r\n        if (format.size) {\r\n            self.changeFontSize(format.size, isLabelFormat);\r\n        }\r\n\r\n        // Set required and visiblity\r\n        properties.required = properties.required != undefined ? bizagi.util.parseBoolean(properties.required) : false;\r\n        var visible = properties.visible != undefined ? bizagi.util.parseBoolean(properties.visible) : true;\r\n        if (properties.required) {\r\n            self.changeRequired(properties.required);\r\n        }\r\n        if (!visible) {\r\n            if (self.grid) {\r\n                self.changeCellVisibility(visible);\r\n            } else {\r\n                self.changeVisibility(visible);\r\n            }\r\n        }\r\n    },\r\n    /*\r\n    *   Sets the internal value\r\n    */\r\n    setValue: function (value, triggerEvents) {\r\n        var self = this;\r\n        triggerEvents = triggerEvents !== undefined ? triggerEvents : true;\r\n\r\n        if (!(bizagi.util.identicalObjects(value, self.value))) {\r\n            // set previous value\r\n            self.properties.previousValue = self.properties.originalValue = self.value;\r\n\r\n            // Change internal value\r\n            self.value = self.properties.value = value;\r\n            if (self.properties.required && self.getMode() == \"execution\") {\r\n\r\n                if (self.checkRequired([])) {\r\n                    self.changeRequiredLabel(false);\r\n                } else {\r\n                    self.changeRequiredLabel(true);\r\n                }\r\n            }\r\n\r\n            // Trigger events\r\n            if (triggerEvents && !self.internalSetInitialValueFlag) {\r\n                self.triggerRenderChange();\r\n                self.triggerRenderValidate();\r\n            }\r\n        }\r\n    },\r\n\r\n    checkRequired: function (invalidElements) {\r\n        var self = this;\r\n        var properties = self.properties;\r\n\r\n        if (bizagi.util.parseBoolean(properties.required)) {\r\n            if (!self.hasValue()) {\r\n                message = self.getResource(\"render-required-text\").replaceAll(\"#label#\", properties.displayName);\r\n                invalidElements.push({\r\n                    xpath: properties.xpath,\r\n                    message: message\r\n                });\r\n                return false;\r\n            }\r\n        }\r\n        return true;\r\n    },\r\n\r\n    validateInputRetype: function () {\r\n        var self = this;\r\n        if (self.properties.retype && self.cloneRender) {\r\n            return self.getValue() == self.cloneRender.getValue();\r\n        }\r\n        return true;\r\n    },\r\n\r\n    /*\r\n    *   Triggers the render change event\r\n    */\r\n    triggerRenderChange: function (params) {\r\n        var self = this;\r\n        params = params || {};\r\n        params.changed = params.changed !== undefined ? params.changed : true;\r\n        self.triggerHandler(\"renderchange\", {render: self, changed: params.changed});\r\n    },\r\n    /*\r\n    *   Triggers the render validate event\r\n    */\r\n    triggerRenderValidate: function () {\r\n        var self = this;\r\n        self.triggerHandler(\"rendervalidate\", {render: self});\r\n    },\r\n    /*\r\n    *   Sets the value in the rendered control\r\n    */\r\n    setDisplayValue: function (value) {\r\n        var self = this;\r\n        var control = self.getControl();\r\n\r\n        // Set internal value\r\n        self.setValue(value, false);\r\n\r\n        if (!self.properties.editable && (self.properties.display !== \"check\" || (self.properties.display === \"check\" && bizagi.override.enableCheck === true))) {\r\n            // Render as simple value\r\n            var displayValue = self.getDisplayValue(value);\r\n            if (typeof (displayValue) == \"string\" || typeof (displayValue) == \"number\") {\r\n                displayValue = bizagi.util.sanitizeHTML(displayValue);\r\n                $(control).html(\"<label class='readonly-control'>\" + displayValue + \"</label>\");\r\n            }\r\n        }\r\n    },\r\n    /*\r\n    *   Returns the internal value\r\n    */\r\n    getValue: function () {\r\n        return this.value;\r\n    },\r\n    /*\r\n    *   Returns the value to display, ex. non-editable renders\r\n    */\r\n    getDisplayValue: function () {\r\n        return this.getValue();\r\n    },\r\n    /*\r\n    *   Template method to get the label element\r\n    */\r\n    getLabel: function () {\r\n        bizagi.util.mustImplement(\"getLabel\");\r\n    },\r\n    /*\r\n    *   Template method to get the control element\r\n    */\r\n    getControl: function () {\r\n        bizagi.util.mustImplement(\"getControl\");\r\n    },\r\n    /*\r\n    *   Template method to get the control filler element\r\n    */\r\n    getControlFiller: function () {\r\n        bizagi.util.mustImplement(\"getControlFiller\");\r\n    },\r\n    /*\r\n    *   Template method to implement in each children to customize each control\r\n    */\r\n    renderControl: function () {\r\n    },\r\n    /*\r\n    *   Adds a validation message to the render\r\n    */\r\n    setValidationMessage: function (message) {\r\n        this.validationMessage = message;\r\n    },\r\n    /*\r\n    *   Method to render non editable values\r\n    */\r\n    renderReadOnly: function () {\r\n        var result = this.getValue();\r\n        var readOnlyValue = \"\";\r\n\r\n        if (bizagi.util.isObject(result) && typeof (result.value) !== \"undefined\") {\r\n            readOnlyValue = bizagi.util.sanitizeHTML(result.value);\r\n        } else if (!bizagi.util.isEmpty(result)) {\r\n            if (bizagi.util.isString(result)) {\r\n                readOnlyValue = bizagi.util.decodedDisplayValue(result);\r\n            } else {\r\n                readOnlyValue = result;\r\n            }\r\n        }\r\n\r\n        return readOnlyValue;\r\n    },\r\n\r\n    /*\r\n    *  Method to render print version\r\n    */\r\n    postRenderPrintVersion: function () {\r\n    },\r\n\r\n    /*\r\n    *   Customizes render display type with custom css classes\r\n    */\r\n    changeDisplayOption: function (displayType) {\r\n        this.properties.displayType = displayType;\r\n    },\r\n\r\n    /*\r\n    *   Return the right display option class\r\n    */\r\n    getDisplayOptionClass: function (displayType) {\r\n        return \"\";\r\n    },\r\n\r\n    /*\r\n    *   Customizes render label align\r\n    */\r\n    changeLabelAlign: function (alignType) {\r\n        this.properties.labelAlign = alignType;\r\n    },\r\n\r\n    /*\r\n    *   Customizes render value align\r\n    */\r\n    changeValueAlign: function (alignType) {\r\n        this.properties.valueAlign = alignType;\r\n    },\r\n\r\n    /*\r\n    *   Return the right align class\r\n    */\r\n    getAlignClass: function (alignType) {\r\n        return \"\";\r\n    },\r\n\r\n    /*\r\n    *   Customizes render label and value width\r\n    */\r\n    customizeRenderWidth: function () {\r\n    },\r\n\r\n    /* Customizes render color*/\r\n    changeColor: function (color, isLabelFormat) {\r\n        var self = this;\r\n        var control = self.getControl();\r\n        var label = self.getLabel();\r\n        var isLabelFormat = (typeof isLabelFormat != \"undefined\" || isLabelFormat != null) ? isLabelFormat : true;\r\n\r\n        if (control && label) {\r\n            if (color != 'none') {\r\n                // Hide - show the render\r\n                if (self.properties.displayType === \"value\" || !isLabelFormat) {\r\n                    self.getElementsToStylize(self.getControl()).css(\"color\", color, \"!important\");\r\n                    self.getControl().find(\"*\").each(function (i, element) {\r\n                        self.getElementsToStylize(element).css(\"color\", color, \"!important\");\r\n                    });\r\n                } else {\r\n                    self.element.each(function () {\r\n                        this.style.setProperty('color', color, 'important');\r\n                    });\r\n\r\n                    if (self.properties.type == \"grid\") {\r\n                        self.getControl().find(\".bz-mobile-grid__header-title\").each(function () {\r\n                            this.style.setProperty('color', color, 'important');\r\n                        });\r\n                    }\r\n\r\n                    self.getLabel().find(\"label\").css(\"color\", color, \"!important\");\r\n                    if (self.properties.editable === false) {\r\n                        self.getElementsToStylize(self.getControl()).css(\"color\", color, \"!important\");\r\n                        self.getElementsToStylize($(\"label\", self.getControl()).css(\"color\", color, \"!important\"));\r\n                    }\r\n                }\r\n            } else {\r\n                self.element.css(\"color\", \"\");\r\n                self.getLabel().find(\"label\").css(\"color\", \"\");\r\n                self.getControl().css(\"color\", \"\");\r\n\r\n                self.getControl().find(\"input, textarea\").each(function (i, element) {\r\n                    var originalColor = $(element).data(\"originalColor\") || \"\";\r\n                    self.getElementsToStylize(element).css(\"color\", originalColor);\r\n                });\r\n            }\r\n        }\r\n    },\r\n\r\n    /* Customizes render background color*/\r\n    changeBackgroundColor: function (color) {\r\n        var self = this;\r\n        var control = self.getControl();\r\n        var label = self.getLabel();\r\n\r\n        if (control && label) {\r\n            if (color != 'none') {\r\n                self.element.each(function () {\r\n                    this.style.setProperty('background-color', color, 'important');\r\n                });\r\n\r\n                if (typeof (label.find('label').style) !== \"undefined\") {\r\n                    self.getLabel().find(\"label\").style(\"background-color\", color, \"important\");\r\n                } else {\r\n                    self.getLabel().find(\"label\").css(\"background-color\", color, \"!important\");\r\n                }\r\n\r\n                var currentStyle = self.getLabel().attr(\"style\");\r\n                currentStyle += \"; background-color:\" + color + \"!important\";\r\n                self.getLabel().attr(\"style\", currentStyle);\r\n            } else {\r\n                self.element.css(\"background-color\", \"\");\r\n                self.getLabel().find(\"label\").css(\"background-color\", \"\");\r\n                self.getControl().css(\"background-color\", \"\");\r\n                self.getControl().find(\"input, textarea\").each(function (i, element) {\r\n                    var originalColor = $(element).data(\"originalColor\") || \"\";\r\n                    $(element).css(\"background-color\", originalColor);\r\n                });\r\n            }\r\n        }\r\n    },\r\n\r\n    /* Returns the formatting label to be used for bold, italic, underline, strikethrough and size*/\r\n    getFormattingLabel: function () {\r\n        var self = this;\r\n        return self.getLabel().find(\"label\");\r\n    },\r\n\r\n    /* Customizes the font weight */\r\n    changeFontBold: function (bold, isLabelFormat) {\r\n        var self = this;\r\n        var isLabelFormat = (typeof isLabelFormat != \"undefined\" || isLabelFormat != null) ? isLabelFormat : true;\r\n\r\n        // Hide - show the render\r\n        if (bizagi.util.parseBoolean(bold) != false && isLabelFormat) {\r\n            self.getFormattingLabel().css(\"font-weight\", \"bold\", \"!important\");\r\n            self.getControl().each(function (i, element) {\r\n                $(element).css(\"font-weight\", \"bold\", \"!important\");\r\n            });\r\n\r\n        } else {\r\n            if (isLabelFormat)\r\n                self.getFormattingLabel().css(\"font-weight\", \"normal\", \"!important\");\r\n        }\r\n        if (!isLabelFormat) {\r\n            if (bizagi.util.parseBoolean(bold) == true) {\r\n                self.getControl().find(\"*\").each(function (i, element) {\r\n                    $(element).css(\"font-weight\", \"bold\", \"!important\");\r\n                });\r\n            } else {\r\n                self.getControl().find(\"*\").each(function (i, element) {\r\n                    $(element).css(\"font-weight\", \"normal\", \"!important\");\r\n                });\r\n                self.getControl().css(\"font-weight\", \"normal\", \"!important\");\r\n            }\r\n        }\r\n    },\r\n\r\n    controlValueIsChanged: function () {\r\n        var self = this;\r\n        var properties = self.properties;\r\n        var value = self.getValue();\r\n        var compareValue = properties.originalValue;\r\n        var baseValue = properties.defaultValue;\r\n        var result = true;\r\n        var renderType = bizagi.util.normalizeType(properties.type);\r\n\r\n        // Flag to force to collect data\r\n        if ($.forceCollectData) {\r\n            return true;\r\n        }\r\n\r\n        // Verify if control has been ready\r\n        if (renderType === \"grid\" && self.ready().state() === \"pending\") {\r\n            return false;\r\n        }\r\n\r\n        if ([\"combo\", \"queryCombo\", \"list\", \"queryList\",\"radio\", \"queryRadio\"].includes(renderType) || /^cascadingcombo$/i.test(renderType)) {\r\n            if (value && value.length !== undefined) {\r\n                value = value[0];\r\n            }\r\n            if (compareValue && compareValue.length !== undefined) {\r\n                compareValue = compareValue[0];\r\n            }\r\n            if (baseValue && baseValue.length !== undefined) {\r\n                baseValue = baseValue[0];\r\n            }\r\n            value = value && value.id ? value.id : value;\r\n            compareValue = compareValue && compareValue.id ? compareValue.id : compareValue;\r\n            baseValue = baseValue && baseValue.id ? baseValue.id : baseValue;\r\n            if (typeof baseValue != \"undefined\" && baseValue != null) {\r\n                result = (compareValue == value) && (compareValue != baseValue) ? false : true;\r\n            } else {\r\n                result = (compareValue == value) ? false : true;\r\n            }\r\n        } else if (renderType === \"boolean\" || renderType === \"queryBoolean\" || renderType === \"queryCheck\") {\r\n            result = (bizagi.util.parseBoolean(compareValue) == bizagi.util.parseBoolean(value)) ? false : true;\r\n        } else if (renderType === \"searchNumber\") {\r\n            result = !!(value);\r\n        } else if (renderType === \"number\") {\r\n            if ((value === null || value === \"\") && (compareValue === null || compareValue === \"\")) {\r\n                result = false;\r\n            } else {\r\n                result = (compareValue === value) ? false : true;\r\n            }\r\n        } else if (renderType === \"text\") {\r\n            if ((value === null || value === \"\") && (compareValue === null || compareValue === \"\")) {\r\n                result = false;\r\n            } else {\r\n                result = (compareValue === value) ? false : true;\r\n            }\r\n        } else if (renderType === \"date\") {\r\n            if (!compareValue && !value) {\r\n                result = false;\r\n            } else {\r\n                result = (compareValue == value) ? false : true;\r\n            }\r\n        } else if (renderType === \"actionLauncher\") {\r\n            //Object must be an array\r\n            result = false;\r\n            var compareValueObj = [];\r\n            try {\r\n                if (typeof compareValue === \"string\") {\r\n                    compareValueObj = JSON.parse(compareValue);\r\n                } else {\r\n                    compareValueObj = compareValue;\r\n                }\r\n            } catch (e) {\r\n            }\r\n\r\n            var _findAction = function (guid, targetObj) {\r\n                guid = guid || \"\";\r\n                targetObj = targetObj || [];\r\n                var result = false;\r\n                for (var i = 0, l = targetObj.length; i < l; i++) {\r\n                    if (targetObj[i].guidAction == guid) {\r\n                        result = true;\r\n                        break;\r\n                    }\r\n                }\r\n                return result;\r\n            };\r\n\r\n            if (compareValueObj.length == value.length) {\r\n                for (var i = 0, l = compareValueObj.length; i < l; i++) {\r\n                    if (!_findAction(compareValueObj[i].guidAction, value)) {\r\n                        result = true;\r\n                    }\r\n                }\r\n\r\n            } else {\r\n                result = true;\r\n            }\r\n        } else if (renderType === \"polymorphicLauncher\" || renderType === \"entityTemplate\") {\r\n            //Object must be an array\r\n            if (compareValue.length != value.length) {\r\n                result = true;\r\n            } else {\r\n                result = (JSON.encode(value) == JSON.encode(compareValue)) ? false : true;\r\n            }\r\n        } else if (renderType === \"image\") {\r\n            if (compareValue == null && value.indexOf(true) < 0) {\r\n                result = false;\r\n            } else {\r\n                result = true;\r\n            }\r\n        } else if (renderType === \"searchList\") {\r\n            var objectValue = {};\r\n            try {\r\n                objectValue = JSON.parse(value);\r\n            } catch (e) {\r\n                console.log(\"Error when detect change value on searchList control\")\r\n            }\r\n            result = (JSON.encode(compareValue) == JSON.encode(objectValue.value)) ? false : true;\r\n        } else {\r\n            result = (compareValue === value) ? false : true;\r\n        }\r\n\r\n        return result;\r\n    },\r\n\r\n    /* Customizes the font italic style */\r\n    changeFontItalic: function (italic, isLabelFormat) {\r\n        var self = this;\r\n        var isLabelFormat = (typeof isLabelFormat != \"undefined\" || isLabelFormat != null) ? isLabelFormat : true;\r\n\r\n        // Hide - show the render\r\n        if (self.properties.displayType == \"value\" || !isLabelFormat) {\r\n            if (bizagi.util.parseBoolean(italic) == true) {\r\n                if (isLabelFormat)\r\n                    self.getFormattingLabel().css(\"font-style\", \"italic\", \"!important\");\r\n\r\n                if (self.properties.editable) {\r\n                    self.getControl().find(\"*\").each(function (i, element) {\r\n                        self.getElementsToStylize(element).css(\"font-style\", \"italic\", \"!important\");\r\n                    });\r\n                } else {\r\n                    self.getElementsToStylize(self.getControl()).css(\"font-style\", \"italic\", \"!important\");\r\n                }\r\n            } else {\r\n                if (isLabelFormat)\r\n                    self.getFormattingLabel().css(\"font-style\", \"normal\", \"!important\");\r\n\r\n                if (self.properties.editable) {\r\n                    self.getControl().find(\"*\").each(function (i, element) {\r\n                        self.getElementsToStylize(element).css(\"font-style\", \"normal\", \"!important\");\r\n                    });\r\n                } else {\r\n                    self.getElementsToStylize(self.getControl()).css(\"font-style\", \"normal\", \"!important\");\r\n                }\r\n            }\r\n        } else {\r\n            if (bizagi.util.parseBoolean(italic) == true) {\r\n                self.getFormattingLabel().css(\"font-style\", \"italic\", \"!important\");\r\n            } else {\r\n                self.getFormattingLabel().css(\"font-style\", \"normal\", \"!important\");\r\n            }\r\n        }\r\n    },\r\n\r\n    /* Customizes the font underline */\r\n    changeFontUnderline: function (underline, isLabelFormat) {\r\n        var self = this;\r\n        var textFormat = self.properties.textFormat || {};\r\n        var valueFormat = self.properties.valueFormat || {};\r\n        var strikethru = bizagi.util.parseBoolean(textFormat.strikethru) ? \"line-through \" : \"\";\r\n        var valuestrikethru = bizagi.util.parseBoolean(valueFormat.strikethru) ? \"line-through \" : \"\";\r\n        var isLabelFormat = (typeof isLabelFormat != \"undefined\" || isLabelFormat != null) ? isLabelFormat : true;\r\n\r\n        // Hide - show the render\r\n        if (bizagi.util.parseBoolean(underline) == true && isLabelFormat) {\r\n            self.getFormattingLabel().css(\"text-decoration\", strikethru + \"underline\", \"!important\");\r\n            self.getControl().each(function (i, element) {\r\n                self.getElementsToStylize(element).css(\"text-decoration\", strikethru + \"underline\");\r\n            });\r\n        } else {\r\n            if (isLabelFormat)\r\n                self.getFormattingLabel().css(\"text-decoration\", strikethru, \"!important\");\r\n        }\r\n        if (self.properties.displayType == \"value\" || !isLabelFormat) {\r\n            if (bizagi.util.parseBoolean(underline) == true) {\r\n                if (self.properties.editable) {\r\n                    self.getControl().find(\"*\").each(function (i, element) {\r\n                        self.getElementsToStylize(element).css(\"text-decoration\", valuestrikethru + \"underline\", \"!important\");\r\n                    });\r\n                } else {\r\n                    self.getElementsToStylize(self.getControl()).css(\"text-decoration\", valuestrikethru + \"underline\", \"!important\");\r\n                }\r\n            } else {\r\n                self.getControl().find(\"*\").each(function (i, element) {\r\n                    self.getElementsToStylize(element).css(\"text-decoration\", valuestrikethru, \"!important\");\r\n                });\r\n            }\r\n        }\r\n    },\r\n\r\n    /* Customizes the font Strikethrough property */\r\n    changeFontStrikethru: function (strikethru, isLabelFormat) {\r\n        var self = this;\r\n        var textFormat = self.properties.textFormat || {};\r\n        var valueFormat = self.properties.valueFormat || {};\r\n        var underline = bizagi.util.parseBoolean(textFormat.underline) ? \"underline \" : \"\";\r\n        var valueunderline = bizagi.util.parseBoolean(valueFormat.underline) ? \"underline \" : \"\";\r\n        var isLabelFormat = (typeof isLabelFormat != \"undefined\" || isLabelFormat != null) ? isLabelFormat : true;\r\n\r\n        // Hide - show the render\r\n        if (bizagi.util.parseBoolean(strikethru) == true && isLabelFormat) {\r\n            self.getFormattingLabel().css(\"text-decoration\", underline + \"line-through\", \"!important\");\r\n        } else {\r\n            if (isLabelFormat)\r\n                self.getFormattingLabel().css(\"text-decoration\", underline, \"!important\");\r\n        }\r\n\r\n        if (self.properties.displayType == \"value\" || !isLabelFormat) {\r\n            if (bizagi.util.parseBoolean(strikethru) == true) {\r\n                if (self.properties.editable) {\r\n                    self.getControl().find(\"*\").each(function (i, element) {\r\n                        self.getElementsToStylize(element).css(\"text-decoration\", valueunderline + \"line-through\", \"!important\");\r\n                    });\r\n                } else {\r\n                    self.getElementsToStylize(self.getControl()).css(\"text-decoration\", valueunderline + \"line-through\", \"!important\");\r\n                }\r\n            } else {\r\n                if (self.properties.editable) {\r\n                    self.getControl().find(\"*\").each(function (i, element) {\r\n                        self.getElementsToStylize(element).css(\"text-decoration\", valueunderline, \"!important\");\r\n                    });\r\n                } else {\r\n                    self.getElementsToStylize(self.getControl()).css(\"text-decoration\", valueunderline, \"!important\");\r\n                }\r\n            }\r\n        }\r\n    },\r\n\r\n    /* Customizes the font size property */\r\n    changeFontSize: function (size, isLabelFormat) {\r\n        var self = this;\r\n        var isLabelFormat = (typeof isLabelFormat != \"undefined\" || isLabelFormat != null) ? isLabelFormat : true;\r\n\r\n        // Hide - show the render\r\n        if (size != \"0\") {\r\n            var label = self.getFormattingLabel();\r\n            var newFontSize = (100 + Number(size) * 10) + \"%\";\r\n            if (isLabelFormat) {\r\n                label.css(\"font-size\", newFontSize, \"!important\");\r\n            }\r\n            if (self.properties.displayType == \"value\" || !isLabelFormat) {\r\n                var control = self.getControl();\r\n                if (typeof control.children() == \"object\" && control.children().length > 0) {\r\n                    self.getElementsToStylize(control.children()).css(\"font-size\", newFontSize, \"!important\");\r\n                } else {\r\n                    self.getElementsToStylize(control).css(\"font-size\", newFontSize, \"!important\");\r\n                    // Next line applies to Cascading combo and combo in order to increase the control space with large value fonts\r\n                    if (self.properties.type.indexOf(\"ombo\") != -1 && size > 4) (\".ui-selectmenu\", control).children(0).height(2 * size + 20);\r\n                }\r\n\r\n                self.getElementsToStylize(control.find(\".ui-bizagi-render-date\")).css(\"line-height\", \"normal\");\r\n            }\r\n        }\r\n    },\r\n\r\n    /**\r\n     * in mobiles, don't apply styles to icon's elements\r\n     */\r\n    getElementsToStylize: function (context) {\r\n        return $(context);\r\n    },\r\n\r\n    /* Changes the render visibility*/\r\n    changeVisibility: function (argument) {\r\n        var self = this;\r\n        var properties = self.properties;\r\n\r\n        // Hide - show the render\r\n        if (bizagi.util.parseBoolean(argument) == true) {\r\n            if (properties.type !== \"hidden\") {\r\n                self.element.show();\r\n                self.element.css(\"display\", \"\");\r\n\r\n                if (properties.required) {\r\n                    if (!self.hasValue()) {\r\n                        self.changeRequiredLabel(true);\r\n                    }\r\n                }\r\n            }\r\n        } else if (self.element) {\r\n            self.element.hide();\r\n        }\r\n\r\n        // Update properties\r\n        properties.visible = argument;\r\n    },\r\n    /* Changes the render editability*/\r\n    changeEditability: function (argument) {\r\n        var self = this;\r\n        var properties = self.properties;\r\n        var control = self.getControl();\r\n\r\n        // Renders again\r\n        properties.editable = argument == \"Default\" ? self.originalProperties.editable: bizagi.util.parseBoolean(argument);\r\n        properties.editabilityEnabled = properties.editabilityEnabled || properties.editable; \r\n\r\n        // Clears control\r\n        control.empty();\r\n\r\n        if (typeof self.internalRenderControl == \"function\") {\r\n            $.when(self.internalRenderControl()).done(function (html) {\r\n                if (typeof self.emptyControlByChangeEditability == \"function\")\r\n                    self.emptyControlByChangeEditability();\r\n                if (!self.asyncRenderDeferred)\r\n                    control.append(html);\r\n                self.postRenderElement(self.element);\r\n            });\r\n        }\r\n    },\r\n\r\n    /*\r\n    * change cell editability and attach bindings\r\n    */\r\n    changeEditabilityCellControl: function (argument, key, xpath) {\r\n        var self = this,\r\n            properties = self.properties;\r\n        var control = self.getControl();\r\n\r\n        var renderColumn = self.grid.getColumn(xpath);\r\n        var decorated = renderColumn.getDecorated(key);\r\n\r\n        // Renders again\r\n        properties.editable = argument == \"Default\" ? self.originalProperties.editable: bizagi.util.parseBoolean(argument);\r\n        properties.editabilityEnabled = properties.editabilityEnabled || properties.editable; \r\n\r\n        // Clears control\r\n        control.empty();\r\n        if (typeof self.internalRenderControl == \"function\") {\r\n            $.when(self.internalRenderControl()).done(function (html) {\r\n                if (!self.asyncRenderDeferred) {\r\n                    control.append(html);\r\n                }\r\n\r\n                self.postRenderElement(self.element);\r\n\r\n                if (properties.editable) {\r\n\r\n                    renderColumn.bind(\"rendered\", function () {\r\n                        renderColumn.readyDeferred.resolve();\r\n                    });\r\n\r\n                    decorated.unbind(\"renderchange\");\r\n\r\n                    // If the render changes set the flag on\r\n                    decorated.bind(\"renderchange\", function (render, args) {\r\n                        renderColumn.changed = true;\r\n                        self.grid.onCellChange(renderColumn, null, key, args);\r\n                    });\r\n                }\r\n            });\r\n        }\r\n    },\r\n\r\n    changeRequired: function (argument) {\r\n        var self = this;\r\n        var properties = self.properties;\r\n\r\n        var label = properties.displayName || \"\";\r\n        var labelElement = $(\"label\", self.getLabel());\r\n        var controlElement = self.getControl();\r\n\r\n        // Update properties\r\n        properties.required = argument;\r\n\r\n        // Changes label\r\n        if (self.getMode() == \"execution\" && self.checkRequired([])) {\r\n            self.changeRequiredLabel(false);\r\n        } else if (bizagi.util.parseBoolean(argument) == true && properties.editable) {\r\n            if (self.properties.orientation == \"rtl\") {\r\n                controlElement.prepend('<div class=\"ui-bizagi-render-control-required-rtl\"></div>');\r\n            } else {\r\n                controlElement.addClass('control-required');\r\n                controlElement.prepend('<div class=\"ui-bizagi-render-control-required\"></div>');\r\n            }\r\n        } else {\r\n            // if element has required label and through action change it, remove element.\r\n            if (self.properties.orientation == \"rtl\") {\r\n                $(\".ui-bizagi-render-control-required-rtl\", controlElement).remove();\r\n            } else {\r\n                controlElement.removeClass('control-required');\r\n                $(\".ui-bizagi-render-control-required\", controlElement).remove();\r\n            }\r\n        }\r\n\r\n        // Set text, HTML is more suitable for the content\r\n        labelElement.html(label);\r\n\r\n        // Perform validations again to check if the form is valid after this change\r\n        self.triggerRenderValidate();\r\n    },\r\n    /**\r\n     * This method just make a toggle of red label indicator\r\n     * Does't change internal value of control, if you need it\r\n     * please use changeRequired method\r\n     *\r\n     * @argument {boolean} argument\r\n     */\r\n    changeRequiredLabel: function (argument) {\r\n        var self = this;\r\n        var properties = self.properties;\r\n\r\n        var label = properties.displayName || \"\";\r\n        var labelElement = $(\"label\", self.getLabel());\r\n        var controlElement = self.getControl();\r\n\r\n        // Changes label\r\n        if (bizagi.util.parseBoolean(argument) == true && properties.editable) {\r\n            if (self.properties.orientation == \"rtl\") {\r\n                controlElement.prepend('<div class=\"ui-bizagi-render-control-required-rtl\"></div>');\r\n            } else {\r\n                controlElement.addClass('control-required');\r\n                controlElement.append('<div class=\"ui-bizagi-render-control-required\"></div>');\r\n            }\r\n        } else {\r\n            // if element has required label and through action change it, remove element.\r\n            if (self.properties.orientation == \"rtl\") {\r\n                $(\".ui-bizagi-render-control-required-rtl\", controlElement).remove();\r\n            } else {\r\n                controlElement.removeClass('control-required');\r\n                $(\".ui-bizagi-render-control-required\", controlElement).remove();\r\n            }\r\n        }\r\n\r\n        // Set text, HTML is more suitable for the content\r\n        labelElement.html(label);\r\n\r\n        // Perform validations again to check if the form is valid after this change\r\n        self.triggerRenderValidate();\r\n    },\r\n    /*\r\n    *   Refresh the control with a new data\r\n    */\r\n    refreshControl: function (args) {\r\n        var self = this;\r\n        var properties = self.properties;\r\n        var originalValue = self.value;\r\n        var form = self.getFormContainer();\r\n        var idForm = form.properties.id || \"\";\r\n\r\n        args = args || {};\r\n\r\n        // Start waiting\r\n        self.startLoading();\r\n\r\n        // Execute personalized stuff before to refresh it\r\n        self.beforeToRefresh();\r\n\r\n        // Call the ajax service\r\n        return $.when(self.dataService.multiaction().refreshControl({\r\n            xpath: properties.xpath,\r\n            idRender: properties.id,\r\n            idPageCache: properties.idPageCache,\r\n            xpathContext: (properties.xpathContext || args.xpathContext),\r\n            idForm: idForm\r\n        })).pipe(function (data) {\r\n            // Clear variables\r\n            self.control = self.controlFiller = self.label = null;\r\n\r\n            // Update properties data\r\n            var currentElement = self.element;\r\n            self.initializeData(data.render);\r\n\r\n            // Render the control again\r\n            return $.when(self.render()).pipe(function (html) {\r\n                var result = $(html);\r\n                //Dont remove unused rendered var\r\n                var rendered = self.postRenderElement(result);\r\n                self.properties.originalValue = self.value;\r\n                return result;\r\n            }).pipe(function (result) {\r\n                // When the content has been post-renderized, replace it\r\n                currentElement.replaceWith(result);\r\n\r\n                // Prevent multiple refresh on grid\r\n                if (!self.grid) {\r\n                    self.triggerRenderChange({changed: false});\r\n                }\r\n\r\n                // Execute personalized stuff before to refresh it\r\n                self.afterToRefresh();\r\n            });\r\n\r\n        }).fail(function (message) {\r\n            var message = self.processFailMessage(message);\r\n\r\n        }).always(function () {\r\n            self.endLoading();\r\n        });\r\n    },\r\n\r\n    /*\r\n     *   Refresh the control with a new data\r\n     */\r\n    refreshDesignControl: function (data) {\r\n        var self = this;\r\n        var properties = self.properties;\r\n\r\n        // Execute personalized stuff before to refresh it\r\n        self.beforeToRefresh();\r\n\r\n        // Clear variables\r\n        self.control = self.controlFiller = self.label = null;\r\n\r\n        $.extend(data.render.properties, {\r\n            xpath: properties.xpath,\r\n            idRender: properties.id,\r\n            xpathContext: (properties.xpathContext || \"form\"),\r\n            idPageCache: properties.idPageCache\r\n        });\r\n\r\n        // Update properties data\r\n        var currentElement = self.element;\r\n        self.initializeData(data.render);\r\n\r\n        // Render the control again\r\n        return $.when(self.render()).pipe(function (html) {\r\n            var result = $(html);\r\n            //Dont remove unused rendered var\r\n            var rendered = self.postRenderElement(result);\r\n            self.properties.originalValue = self.value;\r\n            return result;\r\n        }).pipe(function (result) {\r\n            // When the content has been post-renderized, replace it\r\n            currentElement.replaceWith(result);\r\n            self.triggerRenderChange();\r\n\r\n            // Execute personalized stuff before to refresh it\r\n            self.beforeToRefresh();\r\n        });\r\n    },\r\n\r\n    /*\r\n    * Cleans current value\r\n    */\r\n    cleanData: function () {\r\n        var self = this;\r\n\r\n        self.setValue(\"\");\r\n        self.clearDisplayValue();\r\n    },\r\n\r\n    /*\r\n     *   Sets the value in the rendered control\r\n     */\r\n    clearDisplayValue: function () {\r\n        var self = this;\r\n        var control = self.getControl();\r\n        var input = control.find(\"input\");\r\n\r\n        if (input.length > 0) {\r\n            input.val(self.getValue());\r\n        } else if (self.properties.editable === false) {\r\n            $(control).html(\"<label class='readonly-control'></label>\");\r\n        }\r\n    },\r\n\r\n    /*\r\n    *   Updates original value for some comparisons\r\n    */\r\n    updateOriginalValue: function () {\r\n        var self = this;\r\n        self.properties.originalValue = self.value;\r\n    },\r\n    /*\r\n    *   Add the render data to the given collection in order to send data to the server\r\n    */\r\n    collectData: function (renderValues) {\r\n        var self = this;\r\n        var properties = self.properties;\r\n\r\n        // Add the render value\r\n        var xpath = properties.xpath;\r\n        var value = self.getValue();\r\n\r\n        if (self.controlValueIsChanged()) {\r\n            // Filter by valid xpaths and valid values\r\n            if (!bizagi.util.isEmpty(xpath)) {\r\n                if (!bizagi.util.isEmpty(value)) {\r\n                    renderValues[properties.xpath] = value;\r\n                } else if (value === \"\" || value === null) {\r\n                    renderValues[properties.xpath] = \"\";\r\n                }\r\n            }\r\n        }\r\n\r\n        //Validate if the input has a retype configured and check that both values matches, otherwise delete the original value\r\n        if (!self.validateInputRetype()) {\r\n            renderValues[properties.xpath] = \"\";\r\n        }\r\n    },\r\n\r\n    hasChanged: function (result) {\r\n        var self = this;\r\n        if (self.controlValueIsChanged()) {\r\n            result.push(true);\r\n            return true;\r\n        } else {\r\n            return false;\r\n        }\r\n    },\r\n\r\n    /*\r\n    *  Configure aditional Handlers for queryForm type\r\n    */\r\n    configureHandlersQueryForm: function () {\r\n        var self = this;\r\n        var checkIncluded = self.element.find(\".ui-bizagi-render-control-included\");\r\n        checkIncluded.change(function () {\r\n            self.properties.included = $(this).is(\":checked\");\r\n        });\r\n    },\r\n    /*\r\n    *   Add the render data to the given collection in order to send data to the server\r\n    */\r\n    collectDataQueryForm: function (renderValues) {\r\n        var self = this;\r\n        var properties = self.properties;\r\n        var xpath = properties.xpath;\r\n        var value = self.getValue();\r\n        var queryValue = null;\r\n        if (!bizagi.util.isEmpty(xpath)) {\r\n            if (value !== null && typeof (value) !== \"undefined\") {\r\n                var isObject = typeof (value.id) !== \"undefined\";\r\n                if (isObject) {\r\n                    queryValue = (!bizagi.util.isEmpty(value.id)) ? [value] : null;\r\n                } else {\r\n                    queryValue = (value !== \"\") ? value : null;\r\n                }\r\n            }\r\n            if (queryValue !== null || properties.included) {\r\n\r\n                if (!(properties.display == \"check\" && properties.value == false)) {\r\n\r\n                    var searchType = self.properties.typeSearch || self.properties.rangeQuery || \"NONE\";\r\n                    searchType = searchType.toUpperCase();\r\n                    var newParameter = {\r\n                        \"value\": queryValue,\r\n                        \"included\": self.properties.included,\r\n                        \"xpath\": properties.xpath,\r\n                        \"searchType\": searchType,\r\n                        \"orderType\": \"NONE\"\r\n                    };\r\n                    if (typeof properties.displayXpath !== \"undefined\" && properties.displayXpath !== \"\") {\r\n                        //newParameter.displayXpath= properties.xpath+\".\"+properties.displayXpath;\r\n                        newParameter.displayXpath = properties.displayXpath;\r\n                    }\r\n                    renderValues.push(newParameter);\r\n                }\r\n            }\r\n        }\r\n    },\r\n\r\n    /*\r\n    *  Method to determine if the render value can be sent to the server or not\r\n    */\r\n    canBeSent: function () {\r\n        var self = this, force;\r\n        var properties = self.properties;\r\n        var displayOnly = bizagi.util.parseBoolean(properties.displayOnly) || false;\r\n        var editable = properties.editable;\r\n\r\n        // The render can be sent if it is editable and is not \"display only\"\r\n        if (!displayOnly && editable) {\r\n            return true;\r\n        }\r\n\r\n        // Don't send the clones\r\n        if (properties.isClone) {\r\n            return false;\r\n        }\r\n\r\n        if (properties.xpath) {\r\n            var form = self.getFormContainer();\r\n            if (form.getRenders(properties.xpath).length == 1) {\r\n                force = $.forceCollectData ? $.forceCollectData.toString() : false;\r\n                $.forceCollectData = force ? undefined : $.forceCollectData;\r\n                if (self.controlValueIsChanged()) {\r\n                    $.forceCollectData = force ? bizagi.util.parseBoolean(force) : $.forceCollectData;\r\n                    return true;\r\n                }\r\n                $.forceCollectData = force ? bizagi.util.parseBoolean(force) : $.forceCollectData;\r\n            }\r\n        }\r\n\r\n        return false;\r\n    },\r\n    /*\r\n    *  Method to determine if the render value can be sent to search\r\n    */\r\n    canBeSentQueryForm: function () {\r\n        var self = this, force;\r\n        var properties = self.properties;\r\n        // Don't send the clones\r\n        if (properties.isClone) {\r\n            return false;\r\n        }\r\n        return true;\r\n    },\r\n    /*\r\n    *   Focus on the current element\r\n    */\r\n    focus: function (time) {\r\n        var self = this;\r\n\r\n        // Focus is only allowed when the render is visible\r\n        if (!self.properties.visible) return;\r\n\r\n        // Call base\r\n        this._super();\r\n        var layout = $(\"#ui-bizagi-wp-app-render-form-content\");\r\n\r\n        // Configures effect\r\n        var effect = function () {\r\n            var control = self.getControl();\r\n            var defaultControl = (self.properties.type != \"grid\") ? $(\"input, select, option, textarea\", control) : $(\"input, select, option, textarea\", control).first();\r\n            if (defaultControl.length > 0) {\r\n\r\n                // Focus control\r\n                $.each(defaultControl, function (i) {\r\n                    var innerControl = defaultControl[i];\r\n                    if ($(innerControl).attr(\"type\") != \"hidden\" && $(innerControl).css(\"display\") != \"none\" && $(innerControl).css(\"visibility\") != \"hidden\") {\r\n\r\n                        try {\r\n                            if (!bizagi.util.isIE()) {\r\n                                bizagi.util.autoScrollBottom(layout);\r\n                            }\r\n                            innerControl.focus();\r\n                        } catch (e) {\r\n                        }\r\n                    }\r\n                });\r\n            }\r\n        };\r\n\r\n        // Wait until the render is ready to apply the focus effect\r\n        $.when(self.ready())\r\n            .done(function () {\r\n                // Run effect\r\n                if (time > 0) {\r\n                    setTimeout(effect, time);\r\n                } else {\r\n                    effect();\r\n                }\r\n            });\r\n    },\r\n\r\n    /*\r\n    *   Resolves default align for each display type\r\n    */\r\n    getDefaultLabelAlign: function (displayType) {\r\n        return \"default\";\r\n    },\r\n\r\n    /*\r\n    *   Resolves default value align for each display type\r\n    */\r\n    getDefaultValueAlign: function (displayType) {\r\n        return \"default\";\r\n    },\r\n    /*\r\n    *   Transform the align type when using RTL orientation\r\n    */\r\n    getRTLAlign: function (align) {\r\n        /* if (align === \"default\"){ \r\n            return \"right\";\r\n        } */\r\n        return align;\r\n    },\r\n\r\n    /*\r\n    *   Enables submit on change feature for the current render\r\n    */\r\n    configureSubmitOnChange: function () {\r\n        var self = this;\r\n        var properties = self.properties;\r\n        var xpath = \"\";\r\n\r\n        if (!properties.editable) return;\r\n\r\n        // Build action\r\n        properties.dependencies = properties.dependencies || 'all';\r\n\r\n        if (properties.xpath) {\r\n            if (properties.submitOnChangexpathContext) {\r\n                xpath = properties.submitOnChangexpathContext + \".\" + properties.xpath;\r\n            } else {\r\n                xpath = properties.xpath;\r\n            }\r\n        } else {\r\n            if (properties.submitOnChangexpathContext) {\r\n                xpath = properties.submitOnChangexpathContext + \".\" + properties.id;\r\n            } else {\r\n                xpath = properties.id;\r\n            }\r\n        }\r\n\r\n        var action = {\r\n            \"conditions\": {\r\n                \"expressions\": [\r\n                    {\r\n                        \"simple\": {\r\n                            \"xpath\": xpath,\r\n                            \"operator\": \"changes\",\r\n                            \"argumentType\": \"const\"\r\n                        }\r\n                    }\r\n                ]\r\n            },\r\n            \"commands\": [\r\n                {\r\n                    \"xpath\": xpath,\r\n                    \"command\": 'submit-value',\r\n                    \"argument\": properties.dependencies\r\n                }\r\n            ],\r\n            \"dependencies\": [xpath],\r\n            \"elseCommands\": []\r\n        };\r\n\r\n        // Add action when form ends its rendering\r\n        $.when(self.ready()).done(function () {\r\n            var form = self.getFormContainer();\r\n            form.addSubmitAction(xpath, action);\r\n        });\r\n    },\r\n\r\n    /*\r\n    *   Sends all the info to the server then refreshes the form\r\n    *   Returns a deferred\r\n    */\r\n    submitOnChange: function (data, bRefreshForm, notCollect) {\r\n        var self = this;\r\n        var defer = $.Deferred();\r\n\r\n        // Add context parameter\r\n        if (self.properties.contexttype != \"\" && data) {\r\n            data[self.dataService.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = self.properties.contexttype;\r\n        }\r\n\r\n        $.when(self.isReadyToSave()).done(function () {\r\n            self.internalSubmitOnChange(data, bRefreshForm, notCollect).done(function () {\r\n                defer.resolve();\r\n            }).fail(function () {\r\n                defer.reject();\r\n            });\r\n        });\r\n\r\n        return defer.promise();\r\n    },\r\n\r\n    getCacheIdCase: function () {\r\n        var self = this;\r\n        var idCase = self.getParams().idCase;\r\n\r\n        if (bizagi.cache === undefined) {\r\n            bizagi.cache = {};\r\n            bizagi.cache.idCaseObject = {\r\n                idCase: idCase !== undefined ? idCase : (bizagi.cache.idCase !== undefined ? bizagi.cache.idCase : undefined)\r\n            };\r\n        } else {\r\n            if (idCase !== undefined && bizagi.cache.idCaseObject !== undefined) {\r\n                bizagi.cache.idCaseObject.idCase = idCase;\r\n            } else {\r\n                if (idCase !== undefined && bizagi.cache.idCaseObject === undefined) {\r\n                    bizagi.cache.idCaseObject = {};\r\n                    bizagi.cache.idCaseObject.idCase = idCase;\r\n                }\r\n            }\r\n        }\r\n\r\n        if (idCase === undefined) {\r\n            if (bizagi.cache.idCaseObject === undefined) {\r\n                idCase = undefined;\r\n            } else {\r\n                idCase = bizagi.cache.idCaseObject.idCase;\r\n            }\r\n        } else {\r\n            idCase = idCase;\r\n        }\r\n\r\n        return idCase;\r\n    },\r\n    /*\r\n    *   Internal method\r\n    *   Sends all the info to the server then refreshes the form\r\n    *   Returns a deferred\r\n    */\r\n    internalSubmitOnChange: function (data, bRefreshForm, notCollect) {\r\n        var self = this;\r\n        var form = self.getFormContainer();\r\n        var properties = self.properties;\r\n        var parameters = {\r\n            data: data,\r\n            bRefreshForm: bRefreshForm,\r\n            notCollect: notCollect,\r\n            properties: {\r\n                idCase: self.getCacheIdCase(),\r\n                id: properties.id,\r\n                xpath: properties.xpath,\r\n                idPageCache: properties.idPageCache,\r\n                contexttype: properties.contexttype\r\n            }\r\n        }\r\n\r\n        return form.internalSubmitOnChange(parameters);\r\n    },\r\n    /*\r\n    *   Returns a promise that will resolve when the element is ready\r\n    */\r\n    ready: function () {\r\n        var self = this;\r\n        return $.when(self.parent.ready(), self.isRendered());\r\n    },\r\n    /*\r\n    *   Get the custom handlers set for this execution\r\n    */\r\n    getCustomHandlers: function () {\r\n        var self = this;\r\n        var form = self.getFormContainer();\r\n\r\n        if (form) {\r\n            return form.getCustomHandlers();\r\n        }\r\n        return null;\r\n    },\r\n    /*\r\n    *   Get the custom handlers set for this execution\r\n    */\r\n    getCustomHandler: function (key) {\r\n        var self = this;\r\n        var customHandlers = self.getCustomHandlers();\r\n\r\n        if (customHandlers) {\r\n            return customHandlers[key];\r\n        }\r\n        return null;\r\n    },\r\n    /*\r\n    *   Calculates render label and value width\r\n    */\r\n    calculateRenderWidth: function (labelWidth, valueWidth, displayType) {\r\n        var self = this;\r\n        // Read values\r\n        // If the label width or the value width are 0, the BAS means that no value is used, so we need to adjust them to 50%\r\n        if (valueWidth == \"100\" && typeof labelWidth === \"undefined\") {\r\n            labelWidth = \"0\";\r\n        } else {\r\n            labelWidth = labelWidth ? (labelWidth != \"0\" ? labelWidth : \"50\") : \"50%\";\r\n        }\r\n        valueWidth = valueWidth ? (valueWidth != \"0\" ? valueWidth : \"50\") : \"50%\";\r\n\r\n        if (displayType == \"normal\" || displayType == \"both\" || displayType == \"reversed\") {\r\n\r\n            // Special case with lower values, so they want both fields in \"auto\" width\r\n            if (labelWidth && bizagi.util.percent2Number(labelWidth) < 5 &&\r\n                valueWidth && bizagi.util.percent2Number(valueWidth) < 5) {\r\n                return {label: 0, control: 100};\r\n            }\r\n            // Normalize percentages\r\n            if (labelWidth && !valueWidth) {\r\n                labelWidth = bizagi.util.percent2Number(labelWidth);\r\n                valueWidth = 100 - labelWidth;\r\n\r\n            } else if (!labelWidth && valueWidth) {\r\n                valueWidth = bizagi.util.percent2Number(valueWidth);\r\n                labelWidth = 100 - valueWidth;\r\n            } else {\r\n                labelWidth = bizagi.util.percent2Number(labelWidth);\r\n                valueWidth = bizagi.util.percent2Number(valueWidth);\r\n\r\n                // Check 100% percentage\r\n                if ((labelWidth + valueWidth) != 100 && typeof (self.properties) != \"undefined\" && self.properties.layoutType != \"pixels\") {\r\n                    valueWidth = 100 - labelWidth;\r\n                }\r\n            }\r\n        } else {\r\n            labelWidth = 100;\r\n            valueWidth = 100;\r\n        }\r\n\r\n        return {label: labelWidth, control: valueWidth};\r\n    },\r\n    /*\r\n    *   Get param value idCase\r\n    */\r\n    getIdCase: function () {\r\n        var self = this;\r\n        return self.getFormContainer().params.idCase || bizagi.context.idCase;\r\n    },\r\n    /*\r\n    *   Get param value idWorkitem\r\n    */\r\n    getIdWorkitem: function () {\r\n        var self = this;\r\n        return self.getFormContainer().params.idWorkitem || bizagi.context.idWorkitem;\r\n    },\r\n    /*\r\n    *   Get param value idTask\r\n    */\r\n    getidTask: function () {\r\n        var self = this;\r\n        return self.getFormContainer().params.idTask || bizagi.context.idTask;\r\n    },\r\n    /*\r\n    *   Get param value sessionId\r\n    */\r\n    getSessionId: function () {\r\n        var self = this;\r\n        return self.getFormContainer().properties.sessionId;\r\n    },\r\n\r\n    /*\r\n    *   CELL STUFF\r\n    *   TODO: Move to other place\r\n    */\r\n\r\n    /* Customizes cell color*/\r\n    changeCellColor: function (color) {\r\n        var self = this;\r\n        var control = self.getControl();\r\n        if (control) {\r\n            if (color != 'none') {\r\n                control.css(\"color\", color);\r\n                control.find(\"input, textarea, label\").each(function (i, element) {\r\n                    $(element).css(\"color\", color);\r\n                });\r\n            } else {\r\n                control.css(\"color\", \"\");\r\n                control.find(\"input, textarea, label\").each(function (i, element) {\r\n                    $(element).css(\"color\", \"\");\r\n                });\r\n            }\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Customizes cell background color\r\n     * @param color\r\n     */\r\n    changeCellBackgroundColor: function (color) {\r\n        var self = this;\r\n        var control = self.getControl();\r\n        var backgroundColor = \"\";\r\n        var backgroundImage = \"\";\r\n\r\n        if (control) {\r\n            if (color != 'none') {\r\n                backgroundColor = color;\r\n                backgroundImage = \"none\";\r\n            }\r\n\r\n            if (self.properties.editable) {\r\n                var needBGPaint = false;\r\n\r\n                control.find(\"input, textarea, .ui-selectmenu\").each(function (i, element) {\r\n\r\n                    if (((element.type == \"text\") || (element.type == \"textarea\")) && !($(element).hasClass('ui-select-data')))\r\n                        needBGPaint = true;\r\n\r\n                    $(element).css({\r\n                        \"background-color\": backgroundColor,\r\n                        \"background-image\": backgroundImage\r\n                    });\r\n                });\r\n\r\n                if (!needBGPaint) {\r\n                    control.closest(\"td\").each(function (i, element) {\r\n                        $(element).css({\r\n                            \"background-color\": backgroundColor,\r\n                            \"background-image\": backgroundImage\r\n                        });\r\n                    });\r\n                }\r\n\r\n            } else {\r\n                control.each(function (i, element) {\r\n                    //TODO: Validar si se aplican los estilos en tablet aun sin esta linea, cuidado con desktop\r\n                    var item = ($(element).hasClass(\"ui-bizagi-cell-readonly\")) ? control.closest(\"td\") : $(element);\r\n                    item.css({\r\n                        \"background-color\": backgroundColor,\r\n                        \"background-image\": backgroundImage\r\n                    });\r\n                });\r\n            }\r\n        }\r\n\r\n\r\n    },\r\n\r\n    /**\r\n     * Changes the cell visibility\r\n     * @param argument\r\n     */\r\n    changeCellVisibility: function (argument) {\r\n        var self = this;\r\n        var properties = self.properties;\r\n        var control = self.getControl();\r\n\r\n        if (control) {\r\n            // Hide - show the render\r\n            if (bizagi.util.parseBoolean(argument) == true) {\r\n                //control.show();\r\n                control.css(\"visibility\", \"visible\");\r\n                control.css(\"display\", \"\");\r\n\r\n                self.element && self.element.show();\r\n            } else {\r\n                //control.hide();\r\n                control.css(\"visibility\", \"hidden\");\r\n            }\r\n        }\r\n\r\n        // Update properties\r\n        properties.visible = argument;\r\n    },\r\n\r\n    /**\r\n     * Changes the cell required\r\n     * @param argument\r\n     */\r\n    changeCellRequired: function (argument) {\r\n        var self = this;\r\n        var properties = self.properties;\r\n        var control = self.getControl();\r\n\r\n        if (control) {\r\n            // Check if argument is true and control donot have any value\r\n            if (bizagi.util.parseBoolean(argument) == true && bizagi.util.isEmpty(self.value)) {\r\n                control.addClass('control-required');\r\n                control.append('<div class=\"ui-bizagi-render-control-required\"></div>');\r\n            } else {\r\n                control.removeClass('control-required');\r\n                $(\".ui-bizagi-render-control-required\", control).remove();\r\n            }\r\n            // Update properties\r\n            properties.required = argument;\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Method to create deferred at the moment to start multiaction\r\n     */\r\n    startActionExecution: function () {\r\n        var self = this;\r\n        self.startLoading();\r\n        self.actionExecutionDeferred = new $.Deferred();\r\n    },\r\n\r\n    /**\r\n     * method to resolve the deferred when multiaction finish\r\n     */\r\n    endActionExecution: function () {\r\n        var self = this;\r\n        self.endLoading();\r\n        if (self.actionExecutionDeferred) self.actionExecutionDeferred.resolve();\r\n        delete self.actionExecutionDeferred;\r\n    },\r\n\r\n    /**\r\n     * Method to return the promise to anyone that needs to know if multiaction ended\r\n     * @returns {*}\r\n     */\r\n    readyActionExecution: function () {\r\n        var self = this;\r\n        if (!self.actionExecutionDeferred) return $.when(true);\r\n        return self.actionExecutionDeferred.promise();\r\n    },\r\n\r\n    /**\r\n     * Verifies is the elements was inside a new row in a grid\r\n     * @returns {boolean}\r\n     */\r\n    isFromCreatedRow: function () {\r\n        var self = this;\r\n\r\n        if (self.grid) {\r\n            var i = self.grid.columns.length;\r\n\r\n            while (i-- > 0) {\r\n                if (self.grid.columns[i].properties.xpath == self.properties.xpath) {\r\n                    if (self.grid.columns[i].isNewRow == true) {\r\n                        return true;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        return false;\r\n    },\r\n    /**\r\n     * Submits a invalidate page cache request\r\n     * @param params\r\n     */\r\n    submitInvalidatePageCacheRequest: function (params) {\r\n        var self = this,\r\n            properties = self.properties;\r\n        var pageCacheToInvalidate = params ? params.idPageCache : properties.idPageCache;\r\n\r\n\r\n        self.dataService.invalidatePageCache({idPageCache: pageCacheToInvalidate});\r\n    },\r\n\r\n    /**\r\n     * Check is design mode\r\n     */\r\n    isDesignMode: function () {\r\n        return this.getMode() === \"design\";\r\n    },\r\n\r\n    /**\r\n     * Check is design mode\r\n     */\r\n    isExecutionMode: function () {\r\n        return this.getMode() === \"execution\";\r\n    },\r\n\r\n    /***/\r\n    preventDefaultForAnchorTag: function(){        \r\n        if (bizagi.util.isSharepointContext()){\r\n            $(\"a[href='#']\", this.getControl()).click(function(ev){\r\n                ev.preventDefault();          \r\n            });\r\n        }    \r\n    }\r\n});\r\n","/*\r\n *   Name: Bizagi Render Base Class\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define a base render class with common stuff related to all renders\r\n */\r\n\r\n$.Class.extend(\"bizagi.rendering.render.base\", {}, {\r\n\r\n    /**\r\n     * Method to process the render the layout\r\n     * @param {boolean} isLabelFormat\r\n     * @param {string} format\r\n     */\r\n    processLayout: function (isLabelFormat, format) {\r\n        var properties = this.properties;\r\n\r\n        if (typeof isLabelFormat !== \"boolean\") {\r\n            console.warm(\"error calling processLayout, 'isLabelFormat' is not boolean\");\r\n            return;\r\n        }\r\n\r\n        if (isLabelFormat) {\r\n            this.processLabelLayout(format);\r\n        } else {\r\n            this.processControlLayout(format);\r\n\r\n            // Set required and visiblity\r\n            properties.required = typeof (properties.required) !== \"undefined\" ? bizagi.util.parseBoolean(properties.required) : false;\r\n            var visible = typeof (properties.visible) !== \"undefined\" ? bizagi.util.parseBoolean(properties.visible) : true;\r\n\r\n            if (properties.required) {\r\n                this.changeRequired(properties.required);\r\n            }\r\n\r\n            if (!visible) {\r\n                this.changeVisibility(visible);\r\n            }\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Method to process the label in the layout\r\n     * @param {} format\r\n     * @returns {}\r\n     */\r\n    processLabelLayout: function (format) {\r\n        var $label = this.getLabel();\r\n        if ($label == null) return;\r\n\r\n        // Set customizations\r\n        format = format || {};\r\n        if (typeof format.bold === \"undefined\") {\r\n            format.bold = true; // Default value\r\n        }\r\n\r\n        this.changeBackgroundColor(format.background)\r\n            .changeFontColor($label, format.color)\r\n            .changeFontBold($label, format.bold)\r\n            .changeFontSize($label, format.size)\r\n            .changeFontItalic($label, format.italic)\r\n            .changeTextDecoration($label, (format.underline ? \"underline\" : \"\") + (format.strikethru ? \" line-through\" : \"\"));\r\n    },\r\n\r\n    /**\r\n     * Method to process the control in the layout\r\n     * @param {} format\r\n     * @returns {}\r\n     */\r\n    processControlLayout: function (format) {\r\n        var $control = this.getControl();\r\n        var $elements = this.getElementsToStylize($control);\r\n\r\n        // Set customizations\r\n        format = format || {};\r\n\r\n        this.changeFontColor($elements, format.color)\r\n            .changeFontBold($elements, format.bold)\r\n            .changeFontItalic($elements, format.italic)\r\n            .changeFontSize($elements, format.size)\r\n            .changeTextDecoration($elements, (format.underline ? \"underline\" : \"\") + (format.strikethru ? \" line-through\" : \"\"));\r\n    },\r\n\r\n    /**\r\n     * Customizes render color\r\n     * @param {} color\r\n     * @returns {}\r\n     */\r\n    changeColor: function (color) {\r\n        var $label = this.getLabel();\r\n        var $control = this.getControl();\r\n        var $elements = this.getElementsToStylize($control);\r\n\r\n        return this\r\n            .changeFontColor($label, color)\r\n            .changeFontColor($elements, color);\r\n    },\r\n\r\n    /**\r\n     * Customizes render color\r\n     * @param {} $element\r\n     * @param {} color\r\n     * @returns {}\r\n     */\r\n    changeFontColor: function ($element, color) {\r\n        if ($element === undefined) return this;\r\n        if (color === undefined) return this;\r\n\r\n        var style = color !== \"none\" ? color : \"\";\r\n        $element.css(\"color\", style);\r\n\r\n        return this;\r\n    },\r\n\r\n    /**\r\n     * Customizes the font size property\r\n     * @param {} $element\r\n     * @param {} size\r\n     * @returns {}\r\n     */\r\n    changeFontSize: function ($element, size) {\r\n        if (size === undefined) return this;\r\n        if ($element === undefined) return this;\r\n\r\n        if (size !== \"0\") {\r\n            var newFontSize = 100 + Number(size) * 10 + \"%\";\r\n            $element.css(\"font-size\", newFontSize);\r\n        }\r\n\r\n        return this;\r\n    },\r\n\r\n    /**\r\n     * Customizes the font Strikethrough or underline property\r\n     * @param {} $element\r\n     * @param {} textDecoration\r\n     * @returns {}\r\n     */\r\n    changeTextDecoration: function ($element, textDecoration) {\r\n        if (textDecoration === undefined) return this;\r\n        if ($element === undefined) return this;\r\n\r\n        textDecoration && $element.css(\"text-decoration\", textDecoration);\r\n\r\n        return this;\r\n    },\r\n\r\n    /**\r\n     * Customizes the font italic style\r\n     * @param {} $element\r\n     * @param {} italic\r\n     * @returns {}\r\n     */\r\n    changeFontItalic: function ($element, italic) {\r\n        var style = bizagi.util.parseBoolean(italic) ? \"italic\" : \"normal\";\r\n\r\n        $element.css(\"font-style\", style);\r\n\r\n        return this;\r\n    },\r\n\r\n    /**\r\n     * Customizes the font weight\r\n     * @param {} $label\r\n     * @param {} bold\r\n     * @returns {}\r\n     */\r\n    changeFontBold: function ($label, bold) {\r\n        var style = bizagi.util.parseBoolean(bold) ? \"bold\" : \"normal\";\r\n\r\n        $label.css(\"font-weight\", style);\r\n\r\n        return this;\r\n    },\r\n\r\n    /**\r\n     * Customizes render background color\r\n     * @param {} color\r\n     * @returns {}\r\n     */\r\n    changeBackgroundColor: function (color) {\r\n        if (typeof color === \"undefined\") return this;\r\n\r\n        if (color !== \"none\") {\r\n            this.element.css(\"background-color\", color);\r\n        } else {\r\n            this.element.css(\"background-color\", \"\");\r\n        }\r\n\r\n        return this;\r\n    },\r\n\r\n    /**\r\n     * This method just make a toggle of red label indicator\r\n     * @argument {boolean} argument\r\n     */\r\n    changeRequiredLabel: function () {\r\n    },\r\n\r\n    /**\r\n     * Change cell required and attach bindings\r\n     * @param argument\r\n     */\r\n    changeCellRequired: function (argument) {\r\n        this.changeRequired(argument);\r\n    },\r\n\r\n    /**\r\n     * \r\n     */\r\n    getRTLAlign: function (align) {\r\n        if (typeof align == \"undefined\" || align == \"\") {\r\n            return \"default\";\r\n        }\r\n        return align;\r\n    },\r\n\r\n    /**\r\n     * TODO: This override should be removed after genome, just because the align shoudnt be depend of the display type\r\n     */\r\n    getDefaultLabelAlign: function(){\r\n        return \"default\";\r\n    },\r\n\r\n    /**\r\n     * TODO: This override should be removed after genome, just because the align shoudnt be depend of the display type\r\n     */\r\n    getDefaultValueAlign: function(){\r\n        return \"default\";\r\n    }\r\n});","/**\r\n *   Name: Bizagi Tablet Render Extension\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will redefine the render class to adjust to tablet devices\r\n */\r\n\r\n// Extends from render base\r\nbizagi.rendering.render.extend(\"bizagi.rendering.tablet.render\", bizagi.rendering.render.base.prototype);\r\n// Extends itself\r\nbizagi.rendering.tablet.render.extend(\"bizagi.rendering.tablet.render\", {}, {\r\n\r\n    /**\r\n     * Update or init the element data\r\n     * @param data\r\n     */\r\n    initializeData: function (data) {\r\n        this._super(data);\r\n\r\n        var formContainer = this.getFormContainer();\r\n        this.formParams = formContainer.getParams();\r\n    },\r\n\r\n    /**\r\n     * Returns the label element usually to apply styles\r\n     */\r\n    getLabel: function () {\r\n        if (!this.label)\r\n            this.label = $(\".bz-form-label label\", this.element || this.observableElement);\r\n\r\n        return this.label;\r\n    },\r\n\r\n    /**\r\n     * Return the label\r\n     */\r\n    getFormattingLabel: function () {\r\n        // TODO: Despues de cambiar a genome desktop, validar se solo se deja este metodo en la base\r\n        return this.getLabel();\r\n    },\r\n\r\n    /**\r\n     * Template method to get the control element\r\n     */\r\n    getControl: function () {\r\n        if (!this.control || this.control.length === 0)\r\n            this.control = $(\".bz-control\", this.element || this.observableElement);\r\n\r\n        if (!this.control || this.control.length === 0) return null;\r\n\r\n        return this.control;\r\n    },\r\n\r\n    /**\r\n     * Template method to get the control filler element\r\n     */\r\n    getControlFiller: function () {\r\n        if (!this.controlFiller)\r\n            this.controlFiller = $(\".bz-form-item__control\", this.element || this.observableElement);\r\n\r\n        return this.controlFiller;\r\n    },\r\n\r\n    getContainerMessage: function () {\r\n        if (!this.containerMessage)\r\n            this.containerMessage = $(\".bz-form-message__text\", this.element || this.observableElement);\r\n\r\n        return this.containerMessage;\r\n    },\r\n\r\n    getColumnContainerMessage: function () {\r\n        if (!this.containerMessage)\r\n            this.containerMessage = $(\".bz-form-cell-message__text\", this.element || this.observableElement);\r\n\r\n        return this.containerMessage;\r\n    },\r\n\r\n    /**\r\n     * Starts waiting signal for async stuff\r\n     */\r\n    startLoading: function () {\r\n    },\r\n\r\n    /**\r\n     * Ends waiting for async stuff\r\n     */\r\n    endLoading: function () {\r\n    },\r\n\r\n    /**\r\n     * Return the right display option class\r\n     * @param {} displayType\r\n     */\r\n    getDisplayOptionClass: function (displayType) {\r\n        if (displayType === \"normal\" || displayType === \"both\") {\r\n            return \"bz-form-item--display-normal\";\r\n        } else if (displayType === \"vertical\") {\r\n            return \"bz-form-item--display-vertical\";\r\n        } else if (displayType === \"reversed\") {\r\n            return \"bz-form-item--display-reversed\";\r\n        } else if (displayType === \"label\") {\r\n            return \"bz-form-item--display-label\";\r\n        } else if (displayType === \"value\") {\r\n            return \"bz-form-item--display-value\";\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Customizes render display type with custom css classes\r\n     * @param displayType\r\n     */\r\n    changeDisplayOption: function (displayType) {\r\n        // var self = this,\r\n        // el = self.element;\r\n\r\n        // Clean old display type\r\n        // el.removeClass('ui-bizagi-render-display-normal ui-bizagi-render-display-vertical ui-bizagi-render-display-reversed')\r\n        //   .removeClass('ui-bizagi-render-display-vertical-reversed ui-bizagi-render-display-label ui-bizagi-render-display-value');\r\n        // el.addClass(self.getDisplayOptionClass(displayType));\r\n    },\r\n\r\n    /**\r\n     * Return the right align class\r\n     * @param alignType\r\n     * @returns {*}\r\n     */\r\n    getAlignClass: function (alignType) {\r\n        return alignType;\r\n    },\r\n\r\n    /**\r\n     * Customizes render label align\r\n     * @param alignType\r\n     */\r\n    changeLabelAlign: function (alignType) {\r\n        // var self = this;\r\n\r\n        // Get label\r\n        // var label = self.getLabel();\r\n\r\n        // Remove old label align\r\n        // label.removeClass('ui-bizagi-render-align-left ui-bizagi-render-align-center ui-bizagi-render-align-right');\r\n\r\n        // Set label align\r\n        // label.addClass(self.getAlignClass(alignType));\r\n    },\r\n\r\n    /**\r\n     * Customizes render value align\r\n     * @param alignType\r\n     */\r\n    changeValueAlign: function (alignType) {\r\n        // var self = this;\r\n\r\n        // Get control\r\n        // var controlFiller = self.getControlFiller();\r\n        //\r\n        // // Remove old value align\r\n        // controlFiller.removeClass('ui-bizagi-render-align-left ui-bizagi-render-align-center ui-bizagi-render-align-right');\r\n        //\r\n        // // Set value align\r\n        // controlFiller.addClass(self.getAlignClass(alignType));\r\n    },\r\n\r\n    /**\r\n     * Customizes render label and value width\r\n     * TODO: Review implementation on execution\r\n     */\r\n    customizeRenderWidth: function () {\r\n        var self = this;\r\n        var label = self.getLabel();\r\n        var properties = self.properties;\r\n        var controlFiller = self.getControlFiller();\r\n\r\n        // Read values\r\n        // If the label width or the value width are 0, the BAS means that no value is used, so we need to adjust them to 50%\r\n        var labelWidth = properties.labelWidth ? (properties.labelWidth != '0' ? properties.labelWidth : '50%') : null;\r\n        var valueWidth = properties.valueWidth ? (properties.valueWidth != '0' ? properties.valueWidth : '50%') : null;\r\n\r\n        // Normalize percentages\r\n        if (labelWidth && !valueWidth) {\r\n            labelWidth = bizagi.util.percent2Number(labelWidth);\r\n            valueWidth = 100 - labelWidth;\r\n\r\n        } else if (!labelWidth && valueWidth) {\r\n            valueWidth = bizagi.util.percent2Number(valueWidth);\r\n            labelWidth = 100 - valueWidth;\r\n\r\n        } else {\r\n            labelWidth = bizagi.util.percent2Number(labelWidth);\r\n            valueWidth = bizagi.util.percent2Number(valueWidth);\r\n\r\n            // Check 100% percentage\r\n            if ((labelWidth + valueWidth) != 100) {\r\n                valueWidth = 100 - labelWidth;\r\n            }\r\n        }\r\n\r\n        // Now apply width\r\n        label.width(labelWidth + \"%\");\r\n        controlFiller.width((valueWidth - 0.01) + \"%\");\r\n    },\r\n\r\n    /**\r\n     * Adds a validation message to the render\r\n     * @param message\r\n     */\r\n    setValidationMessage: function (message) {\r\n        // Call base\r\n        this._super(message);\r\n        var dataType = this.properties.type;\r\n        var isGridControl = (bizagi.util.normalizeType(dataType) === \"grid\");\r\n        var isColumn = (this.grid && this.column && /column/.test(dataType));\r\n        var $message = isColumn ? this.getColumnContainerMessage() : this.getContainerMessage();\r\n\r\n        if (message && message.length > 0) {\r\n            message = message.replace(/<\\w+>([^<]*)<\\/\\w+>/g, \"$1\");\r\n\r\n            $message.attr(\"data-error\", message);\r\n            $message.text(message);\r\n\r\n            if (this.element){\r\n                isGridControl ? this.element.addClass(\"bz-form-item-grid--error\") : this.element.addClass(\"bz-form-item--error\");\r\n            }\r\n        } else {\r\n            $message.text(\"\");\r\n            if (this.element){\r\n                isGridControl ? this.element.removeClass(\"bz-form-item-grid--error\") : this.element.removeClass(\"bz-form-item--error\");\r\n            }\r\n        }\r\n\r\n    },\r\n\r\n    /**\r\n     * Sets the value in the rendered control\r\n     */\r\n    setDisplayValue: function (value) {\r\n        var self = this;\r\n        var control = self.getControl();\r\n\r\n        // Set internal value\r\n        self.setValue(value, false);\r\n\r\n        if (!self.properties.editable && self.properties.display !== \"check\") {\r\n            // Render as simple value\r\n            var displayValue = self.getDisplayValue(value);\r\n\r\n            if (typeof (displayValue) == \"string\" || typeof (displayValue) == \"number\") {\r\n                $(control).html(\"<label class='bz-form-label'>\" + displayValue + \"</label>\");\r\n            }\r\n        }\r\n    },\r\n\r\n    /**\r\n     * in mobiles, don't apply styles to icon's elements\r\n     */\r\n    getElementsToStylize: function (context) {\r\n        return $(\".bz-input\", context);\r\n    },\r\n\r\n    getFormParams: function () {\r\n        return this.formParams || {};\r\n    },\r\n\r\n    changeRequired: function (argument) {\r\n        // Update properties\r\n        this.properties.required = argument;\r\n\r\n        if (bizagi.util.parseBoolean(argument) && this.properties.editable) {\r\n            this.element.addClass(\"bz-form-item--required\");\r\n        } else {\r\n            this.element.removeClass(\"bz-form-item--required\");\r\n        }\r\n\r\n        // Perform validations again to check if the form is valid after this change\r\n        this.triggerRenderValidate();\r\n    },\r\n\r\n    changeRequiredLabel: function (argument) {\r\n    },\r\n\r\n    /**\r\n     * Sets the value in the rendered control\r\n     */\r\n    clearDisplayValue: function () {\r\n        var self = this;\r\n        var control = self.getControl();\r\n\r\n        var input = control.find(\"input\").filter(function (index, ele) {\r\n            return ele.type !== \"file\" && ele.type !== \"radio\" && ele.type !== \"checkbox\"\r\n        });\r\n\r\n        if (input.length > 0) {\r\n            input.val(self.getValue());\r\n        } else {\r\n            self.setDisplayValue(\"\");\r\n        }\r\n    }\r\n\r\n});\r\n","/**\r\n *   Name: Bizagi Form Container Class\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define a form container class that defines basic stuff regarding the device\r\n */\r\n\r\n$.Class.extend(\"bizagi.rendering.form\", {}, {\r\n    /*\r\n    *   Constructor\r\n    */\r\n    init: function (params) {\r\n        var self = this;\r\n        var data = params.data;\r\n        var device = bizagi.util.detectDevice();\r\n\r\n        // Creates a hashtable to maintain references by id\r\n        self.rendersById = {};\r\n        self.rendersByXpath = {};\r\n        self.rendersByXpathId = {};\r\n        self.rendersByType = {};\r\n\r\n        // Set page cache id\r\n        self.idPageCache = data.pageCacheId;\r\n\r\n        // Set default mode\r\n        self.mode = params.mode || \"execution\";\r\n        self.focus = params.focus;\r\n\r\n        // Set rendering params\r\n        self.params = params;\r\n\r\n        // Call base\r\n        this._super(params);\r\n\r\n        // Define confirmation message \r\n        var message = \"\";\r\n\r\n        if (device !== \"desktop\") {\r\n            message = this.getResource(\"render-form-user-confirmation-message\").replace(/<br(\\/| \\/)>/g, \"\\n\");\r\n        } else {\r\n            message = this.getResource(\"render-form-user-confirmation-message\");\r\n        }\r\n\r\n        // Default properties\r\n        var properties = self.properties;\r\n        properties.sessionId = data.sessionId;\r\n        properties.displayAsReadOnly = bizagi.util.parseBoolean(data.displayAsReadOnly) || false;\r\n        properties.userConfirmationMessage = properties.userConfirmationMessage || message;\r\n        properties.orientation = properties.orientation || \"ltr\";\r\n        properties.hasRule = bizagi.util.parseBoolean(properties.hasRule) || false;\r\n        properties.contexttype = params.contexttype || \"\";\r\n        properties.paramsRender = params.paramsRender || {};\r\n        properties.processPath = params.data.processPath ? params.data.processPath.replaceAll(\"|/|\", \"  &rsaquo;  \") : \"\";\r\n        properties.breadCrumb = params.data.processPath ? params.data.processPath.split(\"|/|\") : [];\r\n\r\n        // Set validations & actions\r\n        this.validations = data.validations;\r\n        this.actions = data.actions;\r\n\r\n        // Enable the \"Validate and Save\" action for Form Buttons\r\n        self.allowValidateAndSaveAction = bizagi.override && bizagi.override.enableActionValidateAndSave === true;\r\n\r\n        // Initialize buttons\r\n        self.initializeButtons(data);\r\n\r\n        // Define transitions to Complex Gateway\r\n        if (data.transitions) {\r\n            self.transitions = data.transitions;\r\n        }\r\n\r\n        this.originalProcessButton = this.processButton;\r\n\r\n        //Custom behaviour for application parent activated.\r\n        self.isRoutingDisabled = false;\r\n        if (params.applicationParent) {\r\n            switch (params.applicationParent) {\r\n                case 'NEWWORKPORTAL':\r\n                    self.isRoutingDisabled = true;\r\n                    break;\r\n            }\r\n        }\r\n\r\n        self.isOfflineFormsV2Supported = bizagi.util.isMobileDevice() && bizagi.util.isOfflineFormsV2Supported();\r\n        self.isOfflineForm = bizagi.util.isOfflineForm({context: self});\r\n    },\r\n\r\n    /*\r\n    *   Initializes button metadata\r\n    */\r\n    initializeButtons: function (data) {\r\n        var self = this;\r\n\r\n        self.buttons = [];\r\n\r\n        // Process buttons\r\n        if (data.buttons) {\r\n            $.each(data.buttons, function (i, item) {\r\n                var button = item.button.properties;\r\n\r\n                // Process caption\r\n                button.caption = !bizagi.util.isEmpty(button.caption) && self.getResource(button.caption) != button.caption ? self.getResource(button.caption) : button.caption;\r\n\r\n                // Process actions\r\n                if (button.actions) {\r\n                    $.each(button.actions, function (i, action) {\r\n                        button[action] = true;\r\n                    });\r\n                }\r\n\r\n                // Add other properties\r\n                button.ordinal = i;\r\n                button.action = button.next ? \"next\" :\r\n                    button.nextWithoutValidations ? \"nextWithoutValidations\" :\r\n                        button.submitData ? \"save\" :\r\n                            button.cancel ? \"cancel\" :\r\n                                button.back ? \"back\" :\r\n                                    button.createnewcase ? \"createnewcase\" :\r\n                                        button.validate ? \"validate\" : \"\";\r\n\r\n                // Explicit add save operation\r\n                button.save = (button.action === \"save\");\r\n\r\n                // Add inherent behaviours\r\n                if (button.next || button.back || button.nextWithoutValidations) {\r\n                    button.routing = true;\r\n                }\r\n\r\n                if (button.hasRule) {\r\n                    button.executeRule = true;\r\n                }\r\n\r\n                if (self.allowValidateAndSaveAction && button.validate) {\r\n                    button.submitData = true;\r\n                    button.refresh = true;\r\n                    button.save = true;\r\n                    if (button.action === \"next\" || button.action === \"createnewcase\") {\r\n                        button.refresh = false;\r\n                    }\r\n                }\r\n\r\n                // Prepare button style\r\n                button.style = self.buildButtonStyle(button);\r\n\r\n                // Add to button array\r\n                if (self.properties.orientation === \"rtl\" && !self.properties.useCustomButtons) {\r\n                    self.buttons.unshift(button);\r\n                } else {\r\n                    self.buttons.push(button);\r\n                }\r\n\r\n            });\r\n        }\r\n    },\r\n\r\n    /*\r\n    *   Get the original params used to fetch the form\r\n    */\r\n    getParams: function () {\r\n        return this.params;\r\n    },\r\n\r\n    setParam: function (property, value) {\r\n        if (this.params) {\r\n            this.params[property] = value;\r\n        }\r\n    },\r\n\r\n    /*\r\n    *   Get current rendering mode\r\n    */\r\n    getMode: function () {\r\n        return this.mode;\r\n    },\r\n    /*\r\n    *   Get the custom handlers set for this execution\r\n    */\r\n    getCustomHandlers: function () {\r\n        var self = this;\r\n        if (self.params) {\r\n            return self.params.customHandlers;\r\n        }\r\n    },\r\n    /*\r\n    * Method to index renders\r\n    */\r\n    registerRender: function (render) {\r\n        var self = this;\r\n        var xpath = render.properties.xpath;\r\n        var id = render.properties.id;\r\n        var type = render.properties.type;\r\n        var xpathId = xpath ? xpath + \".\" + id : undefined;\r\n\r\n        self.rendersById[id] = render;\r\n        if (xpath) {\r\n            if (!self.rendersByXpath[xpath]) {\r\n                self.rendersByXpath[xpath] = [];\r\n            }\r\n            self.rendersByXpath[xpath].push(render);\r\n        }\r\n\r\n        if (xpathId) {\r\n            if (!self.rendersByXpathId[xpathId]) {\r\n                self.rendersByXpathId[xpathId] = [];\r\n            }\r\n            self.rendersByXpathId[xpathId].push(render);\r\n        }\r\n\r\n        if (!self.rendersByType[type]) {\r\n            self.rendersByType[type] = [];\r\n        }\r\n        self.rendersByType[type].push(render);\r\n    },\r\n    /*\r\n    * Method to unregister render\r\n    */\r\n    unregisterRender: function (render) {\r\n        var self = this;\r\n\r\n        if (self.rendersById[render.properties.id]) {\r\n            delete self.rendersById[render.properties.id];\r\n        }\r\n\r\n        if (render.properties.xpath) {\r\n            if ($.isArray(self.rendersByXpath[render.properties.xpath])\r\n                && self.rendersByXpath[render.properties.xpath].length > 1) {\r\n                for (var i = 0, l = self.rendersByXpath[render.properties.xpath].length; i < l; i++) {\r\n                    var element = self.rendersByXpath[render.properties.xpath][i];\r\n                    if (element.properties.id === render.properties.id) {\r\n                        self.rendersByXpath[render.properties.xpath].splice(i, 1);\r\n                        self.rendersByXpathId[render.properties.xpath + '.' + render.properties.id].splice(i, 1);\r\n                        break;\r\n                    }\r\n                }\r\n            } else {\r\n                delete self.rendersByXpath[render.properties.xpath];\r\n            }\r\n        }\r\n\r\n        // Unregister from renders by type\r\n        if (render.properties.type) {\r\n            var listRendesByType = self.getRenderByType(render.properties.type);\r\n            var listRendesByTypeLength = listRendesByType.length;\r\n            var renderKey = render.properties.id || render.properties.xpath;\r\n\r\n            for (var i = 0; i < listRendesByTypeLength; i++) {\r\n                var listRender = listRendesByType[i];\r\n                if ((typeof listRender.properties.id != \"undefined\" && listRender.properties.id == renderKey) ||\r\n                    (typeof listRender.properties.xpath != \"undefined\" && listRender.properties.xpath == renderKey)) {\r\n                    // Unregister element\r\n                    self.rendersByType[render.properties.type].splice(i, 1);\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n    },\r\n    /*\r\n    * Method to access a render by id\r\n    */\r\n    getRenderById: function (id) {\r\n        var self = this;\r\n\r\n        return self.rendersById[id];\r\n    },\r\n\r\n    getGridByColumn: function (id) {\r\n        var self = this;\r\n        var grids = self.getRenderByType('grid');\r\n        var i = 0, columnIndex;\r\n\r\n        for (; i < grids.length; i++) {\r\n            columnIndex = grids[i].columnsIds.indexOf(id);\r\n            if (columnIndex != -1) {\r\n                return grids[i];\r\n            }\r\n        }\r\n\r\n        return null;\r\n    },\r\n\r\n    /*\r\n    *   Method to find all the renders matching an xpath inside the container\r\n    */\r\n    getRenders: function (xpath) {\r\n        var self = this;\r\n\r\n        // Remove [] filters for grid columns xpaths to fully identify the grid as the xpath target\r\n        if (xpath && xpath.indexOf)\r\n            if (xpath.indexOf(\"[\") > 0) {\r\n                xpath = xpath.substring(0, xpath.indexOf(\"[\"));\r\n            }\r\n\r\n        return self.rendersByXpathId[xpath] ?\r\n            self.rendersByXpathId[xpath] : self.rendersByXpath[xpath] ?\r\n                self.rendersByXpath[xpath] : [];\r\n    },\r\n    /**\r\n     * Get all render with the same type\r\n     */\r\n    getRenderByType: function (type) {\r\n        var self = this;\r\n\r\n        // Check that type is defined\r\n        if (typeof type == \"string\" && type.length > 0) {\r\n            // Search controls by type\r\n            return (self.rendersByType[type]) ? self.rendersByType[type] : [];\r\n        }\r\n        return [];\r\n    },\r\n\r\n    /*\r\n    *   Build the container html\r\n    */\r\n    renderContainer: function () {\r\n        var self = this;\r\n        var properties = this.properties;\r\n        var template = self.renderFactory.getTemplate(\"form\");\r\n        var idCase = \"\";\r\n\r\n        // Render the form\r\n        var html = $.fasttmpl(template, {\r\n            buttons: self.buttons,\r\n            transitions: self.transitions,\r\n            uniqueId: properties.uniqueId,\r\n            helptext: properties.helpText,\r\n            mode: self.getMode(),\r\n            queryForm: self.getFormType() == \"queryForm\",\r\n            summaryForm: self.params.summaryForm || false,\r\n            globalForm: self.properties.displayAsReadOnly || false,\r\n            idCase: idCase,\r\n            displayName: self.params.displayName || idCase,\r\n            processPath: properties.processPath,\r\n            breadCrumb: properties.breadCrumb,\r\n            orientation: properties.orientation\r\n        });\r\n\r\n        // Render children\r\n        html = self.replaceChildrenHtml(html, self.renderChildrenHtml());\r\n        return html;\r\n    },\r\n    /*\r\n    *   Process the html rendering object\r\n    */\r\n    postRenderContainer: function (form) {\r\n        var self = this;\r\n        var mode = self.getMode();\r\n\r\n        // Add a mode class\r\n        form.addClass(\"ui-bizagi-rendering-mode-\" + mode);\r\n\r\n        // Call base\r\n        this._super(form);\r\n    },\r\n    /*\r\n    *   Template method to implement in each device to customize the container's behaviour to add handlers\r\n    */\r\n    configureHandlers: function () {\r\n        var self = this;\r\n        var complexGatewayContainer;\r\n        var form = self.container;\r\n\r\n        if (form.length > 1) {\r\n            $(form).each(function () {\r\n                if ($(this).hasClass('ui-bizagi-container-complexgateway')) {\r\n                    complexGatewayContainer = this;\r\n                }\r\n            });\r\n        } else {\r\n            complexGatewayContainer = $(\".ui-bizagi-container-complexgateway\", form);\r\n        }\r\n\r\n        // activeTransitions is used to store ids of activities in Complex Gateway\r\n        self.activeTransitions = {};\r\n\r\n        // Process buttons\r\n        self.processButtons(form);\r\n\r\n        // Check for dom included event\r\n        self.bind(\"ondomincluded\", function (e, mainForm) {\r\n            // Creates validation controller after the form is ready\r\n            self.validationController = new bizagi.command.controllers.validation(self, self.validations, mainForm);\r\n            // Creates action controller after the form is ready\r\n            self.actionController = new bizagi.command.controllers.action(self, self.actions);\r\n\r\n            // Resolve this deferred to start executing DOM dependant plugins\r\n            self.readyDeferred.resolve();\r\n        });\r\n\r\n        // Set events for complex gateway interface\r\n        $(complexGatewayContainer).find(\".ui-checkbox\").bind(\"click\", function () {\r\n            var checkboxLabel = $(\"label\", this);\r\n\r\n            var transitionId = checkboxLabel.data(\"value\") || \"\";\r\n            if (typeof self.activeTransitions[transitionId] == \"undefined\") {\r\n                self.activeTransitions[transitionId] = false;\r\n            }\r\n\r\n            if (bizagi.util.parseBoolean(checkboxLabel.data(\"checked\"))) {\r\n                // Uncheck element\r\n                checkboxLabel.removeClass(\"ui-checkbox-state-checked\");\r\n                checkboxLabel.removeClass(\"bz-check\").addClass(\"bz-full-ball\");\r\n                checkboxLabel.data(\"checked\", false);\r\n                self.activeTransitions[transitionId] = false;\r\n            } else {\r\n                // Check element\r\n                checkboxLabel.addClass(\"ui-checkbox-state-checked\");\r\n                checkboxLabel.addClass(\"bz-mo-icon\").addClass(\"bz-check\").removeClass(\"bz-full-ball\");\r\n                checkboxLabel.data(\"checked\", true);\r\n                self.activeTransitions[transitionId] = true;\r\n            }\r\n        });\r\n\r\n\r\n    },\r\n    /*\r\n    *   Template method to implement in each device to customize the render's behaviour when rendering in design mode\r\n    */\r\n    configureDesignView: function () {\r\n        var self = this;\r\n\r\n\r\n        // Check for dom included event\r\n        self.bind(\"ondomincluded\", function () {\r\n            // Resolve this deferred to start executing DOM dependant plugins\r\n            self.readyDeferred.resolve();\r\n        });\r\n    },\r\n    /*\r\n    *   Format form buttons to allow further customization\r\n    */\r\n    buildButtonStyle: function (button) {\r\n\r\n        var style = {};\r\n        if (button.format) {\r\n            if (button.format.size) {\r\n                if (button.format.size != \"0\") {\r\n                    var newFontSize = (100 + Number(button.format.size) * 10) + \"%\";\r\n                    style[\"font-size\"] = newFontSize + \" !important\";\r\n                }\r\n            }\r\n            if (button.format.bold) {\r\n                style[\"font-weight\"] = \"bold !important\";\r\n                if (bizagi.util.isIE()) {\r\n                    style[\"font-family\"] = \"'Open Sans', 'Helvetica Neue', Arial, Helvetica, sans-serif !important\";\r\n                }\r\n            }\r\n            if (button.format.italic) {\r\n                style[\"font-style\"] = \"italic !important\";\r\n            }\r\n            if (button.format.underline || button.format.strikethru) {\r\n                var strikethru = bizagi.util.parseBoolean(button.format.strikethru) ? \"line-through \" : \"\";\r\n                var underline = bizagi.util.parseBoolean(button.format.underline) ? \"underline \" : \"\";\r\n                style[\"text-decoration\"] = strikethru + underline + \" !important\";\r\n            }\r\n            if (button.format.background) {\r\n                style[\"background-color\"] = button.format.background + \" !important\";\r\n                style[\"background-image\"] = \"none !important\";\r\n            }\r\n            if (button.format.color) {\r\n                style[\"color\"] = button.format.color + \" !important\";\r\n            }\r\n        }\r\n\r\n        var strStyle = \"\";\r\n        for (key in style) {\r\n            strStyle += key + \":\" + style[key] + \";\";\r\n        }\r\n        return strStyle;\r\n    },\r\n    /*\r\n    *   Returns the in-memory processed element\r\n    *   Returns a promise\r\n    */\r\n    render: function () {\r\n        var self = this;\r\n\r\n        // Creates a deferred, so we can check when form has been included in dom\r\n        if (!self.readyDeferred)\r\n            self.readyDeferred = new $.Deferred();\r\n\r\n        // Call base\r\n        var result = this._super();\r\n\r\n        return result;\r\n    },\r\n    /*\r\n    *   Sets a promise that the form will be included in the DOM\r\n    *   so we can apply some tedious plugins that require that\r\n    */\r\n    ready: function () {\r\n        var self = this;\r\n\r\n        return self.readyDeferred.promise();\r\n    },\r\n    /*\r\n    *   Returns the xpath context of the element\r\n    */\r\n    getXpathContext: function () {\r\n        return this.properties.xpathContext || \"\";\r\n    },\r\n    /*\r\n    *  Return context type, when the parent form is entity\r\n    */\r\n    getContextType: function () {\r\n        return this.properties.contexttype || \"\";\r\n    },\r\n\r\n    /*\r\n    * Return the endpoint action, when the form will be refresh\r\n    */\r\n    getEndPointAction: function () {\r\n        var self = this,\r\n            properties = self.properties;\r\n\r\n        if (properties.formtype == \"startform\")\r\n            return \"LOADSTARTFORM\";\r\n\r\n        return undefined;\r\n\r\n    },\r\n\r\n    /*\r\n    *   Returns the page cache id for the element\r\n    */\r\n    getPageCache: function () {\r\n        return this.idPageCache;\r\n    },\r\n    /*\r\n    *   Returns the form containing the element\r\n    */\r\n    getFormContainer: function () {\r\n        return this;\r\n    },\r\n    /*\r\n    *   Method to process button actions in the form\r\n    */\r\n    processButtons: function () {\r\n        var self = this;\r\n        var buttons = self.getButtons();\r\n\r\n        // Don't process buttons if they are undefined in the template\r\n        if (!buttons || buttons.length == 0) {\r\n            return;\r\n        }\r\n\r\n        // Attach a handler for each button\r\n        buttons.on(\"click\", function (e) {\r\n            e.preventDefault();\r\n            e.stopImmediatePropagation();\r\n\r\n            self.startLoading();\r\n\r\n            var button = $(this);\r\n            var ordinal = button.attr(\"ordinal\");\r\n            var buttonProperties = self.buttons[ordinal];\r\n\r\n            self.lastActionButton = buttonProperties;\r\n            if (buttonProperties.action === \"next\") {\r\n                buttonProperties.routingDisabled = self.isRoutingDisabled;\r\n            }\r\n\r\n            button.prop(\"disabled\", true); //disable button to prevent multiple click actions\r\n\r\n            if (button.hasOwnProperty('disabled')) {\r\n                button.button(\"disable\"); //Setting styles\r\n            }\r\n\r\n            // External Events\r\n            self.propagateExternalEvents(e);\r\n\r\n            // Execute button\r\n            //QAF-1418 - add setTimeout\r\n            setTimeout(function () {\r\n                $.when(self.processButton(buttonProperties)).always(function () {\r\n                    self.processDefer = undefined;\r\n                    self.endLoading();\r\n                    if ($.contains(document.documentElement, button.get(0))) { //check if button is still in DOM\r\n                        button.prop(\"disabled\", false);  //enable button\r\n\r\n                        if (button.hasOwnProperty('enable')) {\r\n                            button.button(\"enable\"); //Setting styles\r\n                        }\r\n                    }\r\n                });\r\n            }, 100);\r\n        });\r\n    },\r\n    /*\r\n    * Execute codes just before sending information to server\r\n    */\r\n    preProcessButton: function (buttonProperties) {\r\n        return true;\r\n    },\r\n    /*\r\n    * Execute codes just after sending information to server\r\n    */\r\n    postProcessButton: function (responses, buttonProperties) {\r\n        return true; // true means continue\r\n    },\r\n\r\n    setLoaderDeferred: function () {\r\n        var self = this;\r\n\r\n        self.loaderDeferred = $.Deferred().resolve();\r\n    },\r\n\r\n    deleteLoaderDeferred: function () {\r\n        var self = this;\r\n\r\n        if (self.isLoaderDeferredSet()) {\r\n            $.when(self.loaderDeferred.promise()).done(function () {\r\n                delete self.loaderDeferred;\r\n            }).fail(function () {\r\n                delete self.loaderDeferred;\r\n            });\r\n        }\r\n    },\r\n\r\n    useOrSetLoaderDeferred: function () {\r\n        var self = this;\r\n\r\n        if (!self.isLoaderDeferredSet()) {\r\n            self.setLoaderDeferred();\r\n        }\r\n    },\r\n\r\n    getLoaderPromise: function () {\r\n        var self = this;\r\n\r\n        if (self.isLoaderDeferredSet()) {\r\n            return self.loaderDeferred.promise();\r\n        } else {\r\n            return;\r\n        }\r\n    },\r\n\r\n    isLoaderDeferredSet: function () {\r\n        var self = this;\r\n\r\n        if (self.loaderDeferred) {\r\n            return true;\r\n        } else {\r\n            return false;\r\n        }\r\n    },\r\n\r\n    appendWaitForLoader: function (params) {\r\n        var self = this;\r\n        var promise = params.promise;\r\n        var create = params.create || false;\r\n\r\n        if (!self.isLoaderDeferredSet()) {\r\n            if (create) {\r\n                self.setLoaderDeferred();\r\n            } else {\r\n                return;\r\n            }\r\n        }\r\n\r\n        self.loaderDeferred = self.loaderDeferred.then(function () {\r\n            return (function () {\r\n                return promise;\r\n            })();\r\n        });\r\n    },\r\n\r\n    getResolveOrReject: function () {\r\n        var self = this;\r\n        var deferred = $.Deferred();\r\n\r\n        if (self.isLoaderDeferredSet()) {\r\n            $.when(self.loaderDeferred.promise()).done(function () {\r\n                deferred.resolve();\r\n            }).fail(function () {\r\n                deferred.resolve();\r\n            });\r\n        } else {\r\n            deferred.resolve();\r\n        }\r\n\r\n        return deferred.promise();\r\n    },\r\n\r\n\r\n    /*\r\n    *   Executes a single button action\r\n    */\r\n    processButton: function (buttonProperties) {\r\n        var self = this;\r\n        var defer = $.Deferred();\r\n        var properties = self.properties;\r\n        if (!buttonProperties.routing) {\r\n            bizagi.chrono.initAndStart(\"submitForm\");\r\n        }\r\n        bizagi.chrono.init(\"waiting\");\r\n\r\n        // First hide and clear validation box\r\n        self.validationController.clearValidationMessages();\r\n\r\n        // Resolve asynchronous tabItems\r\n        var form = self.getFormContainer();\r\n        var getAllTabs = form.getRenderByType(\"tabItem\");\r\n        var getAllTabsLength = getAllTabs.length;\r\n\r\n        form.innerTabsLoading = true;\r\n\r\n        self.useOrSetLoaderDeferred();\r\n\r\n        // Check\r\n        for (var i = 0; i < getAllTabsLength; i++) {\r\n            var render = getAllTabs[i];\r\n            // Resolve internal deferred\r\n            if (render.loadingDeferred && render.parent.container) {\r\n                render.loadingDeferred.resolve();\r\n            }\r\n        }\r\n\r\n        delete form.innerTabsLoading;\r\n\r\n        $.when(self.ready(), self.getResolveOrReject()).done(function () {\r\n            self.deleteLoaderDeferred();\r\n            // Validate the form\r\n            var valid = bizagi.util.parseBoolean(buttonProperties.validate) ? self.validationController.performValidations() : true;\r\n            if (valid) {\r\n\r\n                if ([\"save\", \"next\", \"back\", \"createnewcase\", \"nextWithoutValidations\"].includes(buttonProperties.action)) {\r\n                    $(document).data('auto-save', '');\r\n                }\r\n\r\n                // Check for user confirmation if configured and the button is configured to enroute\r\n                if (bizagi.util.parseBoolean(self.properties.needsUserConfirmation) && bizagi.util.parseBoolean(buttonProperties.routing)) {\r\n                    self.endLoading();\r\n                    $.when(bizagi.showConfirmationBox(properties.userConfirmationMessage, null, false)).done(function () {\r\n                        // Submits the form\r\n                        if (self.preProcessButton(buttonProperties)) {\r\n                            //Trigger the event after ProcessButton\r\n                            self.triggerGlobalHandler(\"renderActionButton\", buttonProperties);\r\n                            $.when(self.submitForm(buttonProperties)).done(function () {\r\n                                defer.resolve();\r\n                            }).fail(function () {\r\n                                defer.reject(arguments);\r\n                            });\r\n                        }\r\n                    }).fail(function () {\r\n                        defer.reject();\r\n                    });\r\n\r\n                } else {\r\n                    if (self.preProcessButton(buttonProperties)) {\r\n                        //Trigger the event after ProcessButton\r\n                        self.triggerGlobalHandler(\"renderActionButton\", buttonProperties);\r\n                        $.when(self.submitForm(buttonProperties)).done(function () {\r\n                            $(document).trigger(\"FORMACTION\", buttonProperties);\r\n                            defer.resolve();\r\n                        }).fail(function () {\r\n                            defer.reject(arguments);\r\n                        });\r\n                    }\r\n                }\r\n\r\n            } else {\r\n\r\n                self.endLoading();\r\n                if (buttonProperties.submitData) {\r\n                    $.when(self.submitData()).done(function () {\r\n                        defer.reject();\r\n                    });\r\n                } else {\r\n                    defer.reject();\r\n                }\r\n\r\n                self.validationController.expandNotificationBox();\r\n            }\r\n\r\n            var customHandler = self.getCustomHandler(\"afterFormButtonClick\");\r\n            if (customHandler) {\r\n                customHandler(buttonProperties);\r\n            }\r\n        });\r\n\r\n        return defer.promise();\r\n    },\r\n    /*\r\n    *   Public method to perform validations externally\r\n    */\r\n    validateForm: function () {\r\n        var self = this;\r\n\r\n        // First hide and clear validation box\r\n        self.validationController.clearValidationMessages();\r\n\r\n        // Validate the form\r\n        return self.validationController.performValidations();\r\n    },\r\n    /*\r\n    *   Submits all the form to the server and returns a deferred to check when the process finishes\r\n    */\r\n    saveForm: function () {\r\n        var self = this;\r\n\r\n        // Avoid the execution of server actions for mobile offline\r\n        if(bizagi.util.isNativeMobileDevice() && !this.allowOnlineActions()){\r\n            return $.when(function() {\r\n                return null;\r\n            });\r\n        }\r\n\r\n        // Check is offline form        \r\n        var isOfflineForm = bizagi.util.isOfflineForm({context: self});\r\n\r\n        // Collect data\r\n        var data = self.collectRenderValuesForSubmit();\r\n\r\n        // Check if there are deferreds to wait\r\n        var deferredsToWait = null;\r\n        if (data.deferreds) {\r\n            deferredsToWait = $.when.apply($, data.deferreds);\r\n            delete data.deferreds;\r\n        }\r\n\r\n        // Wait for deferreds\r\n        return $.when(deferredsToWait).pipe(function () {\r\n            self.startLoading();\r\n            \r\n            var saveParams = {\r\n                action: \"SAVE\",\r\n                data: data,\r\n                idCase: self.params.idCase,\r\n                idWorkitem: self.params.idWorkitem,\r\n                xpathContext: self.properties.xpathContext,\r\n                idPageCache: self.properties.idPageCache,\r\n                isOfflineForm: isOfflineForm || false\r\n            };\r\n\r\n            if (isOfflineForm){\r\n                saveParams.offlineType = self.params.offlineType;\r\n            }\r\n\r\n            // Submit the form\r\n            return $.when(self.dataService.submitData(saveParams))\r\n            .always(function () {\r\n                self.endLoading();\r\n            });\r\n        });\r\n    },\r\n    /*\r\n    *   Creates a json array with key values to send to the server\r\n    */\r\n    submitForm: function (buttonProperties) {\r\n        var self = this;\r\n        var defer = $.Deferred();\r\n\r\n        // Check is offline form                \r\n        var isOfflineForm = bizagi.util.isOfflineForm({context: self});\r\n\r\n        $.when(self.isReadyToSave())\r\n            .done(function () {\r\n                if (isOfflineForm) {\r\n                    self.internalSubmitFormOffline(buttonProperties);\r\n                    return;\r\n                }\r\n                $.when(self.internalSubmitForm(buttonProperties)).done(function () {\r\n                    defer.resolve();\r\n                }).fail(function () {\r\n                    defer.reject(arguments);\r\n                });\r\n\r\n            }).fail(function () {\r\n            self.endLoading();\r\n            bizagi.log(\"The form is not saved, no changes were found\");\r\n            defer.reject();\r\n        });\r\n        return defer.promise();\r\n    },\r\n    checkWidgetsData: function () {\r\n        //\r\n    },\r\n    isComplexGatewayPainted: function () {\r\n        return false;\r\n    },\r\n\r\n    /**\r\n     * Get last action button\r\n     * @returns {*}\r\n     */\r\n    getLastActionButton: function () {\r\n        return this.lastActionButton;\r\n    },\r\n\r\n    /**\r\n     * Internal - Creates a json array with key values to send to the database\r\n     * @param {} buttonProperties\r\n     * @returns {}\r\n     */\r\n    internalSubmitFormOffline: function (buttonProperties) {\r\n        var self = this;\r\n        var message = \"\";\r\n        var data;\r\n\r\n        // Check is offline form                \r\n        var isOfflineForm = bizagi.util.isOfflineForm({context: self});\r\n\r\n        if (isOfflineForm && (self.properties && !self.properties.idPageCache)) {\r\n            self.properties.idPageCache = \"\";\r\n        }\r\n\r\n        // Fill data hash\r\n        if (buttonProperties.submitData || buttonProperties.executeRule) {\r\n            // Collect data\r\n            data = self.collectRenderValuesForSubmit();\r\n        }\r\n\r\n        if (self.transitions) {\r\n            var transitions = [];\r\n            $.each(this.activeTransitions, function (key, value) {\r\n                (value) ? transitions.push(key) : \"\";\r\n            });\r\n\r\n            if (bizagi.util.countProps(transitions) == 0) {\r\n                bizagi.showMessageBox(\r\n                    bizagi.localization.getResource(\"render-widget-complexgateway-path\"),\r\n                    bizagi.localization.getResource(\"render-widget-complexgateway-error\"), \"info\", false\r\n                );\r\n                self.endLoading();\r\n                return \"\";\r\n            }\r\n        }\r\n\r\n        $.when(self.dataService.submitData({\r\n            action: buttonProperties.action,\r\n            data: data,\r\n            xpathContext: self.properties.xpathContext,\r\n            idPageCache: self.properties.idPageCache,\r\n            idForm: self.properties.id,\r\n            prepare: true,\r\n            transitions: transitions || \"\",\r\n            idCase: self.params.idCase,\r\n            idWorkitem: self.params.idWorkitem,\r\n            isOfflineForm: isOfflineForm || false,\r\n            offlineType: self.params.offlineType || \"\"\r\n        })).done(function (responses) {\r\n\r\n            if (!self.postProcessButton(responses, buttonProperties)) {\r\n                return;\r\n            }\r\n\r\n            //Offline action stored\r\n            var isSaveForDraft = self.params.offlineType !== \"task\" && buttonProperties.action === \"save\";\r\n            if (self.online && self.isOfflineFormsV2Supported && !isSaveForDraft) {\r\n                bizagi.loading.start();\r\n                var tryPushResponsePromise = new $.Deferred();\r\n                self.params.responsePromise = tryPushResponsePromise;\r\n                $(document).trigger(\"tryPushCase.offline\", self.params);\r\n            }\r\n            //Backward comp\r\n            if (!self.isOfflineFormsV2Supported) {\r\n                $(document).trigger(\"tryPushData.offline\");\r\n            }\r\n\r\n\r\n            $.when(tryPushResponsePromise)\r\n                .then(function (result) {\r\n                    bizagi.loading.stop();\r\n                    if (buttonProperties.routing) {\r\n                        if (!self.online && self.isOfflineFormsV2Supported) {\r\n                            self.triggerHandler(\"routing\", {\r\n                                offlineAction: buttonProperties.action,\r\n                                idCase: self.params.idCase,\r\n                                idWorkitem: self.params.idWorkitem\r\n                            });\r\n                        } else {\r\n                            self.triggerHandler(\"routing\", {\r\n                                idCase: result.IdCase,\r\n                                caseNumber: result.CaseNumber\r\n                            });\r\n                        }\r\n                    } else {\r\n                        if(self.online && isSaveForDraft){\r\n                            bizagi.util.recreateNativeButtons(self);\r\n                        }\r\n                        message = bizagi.util.isValidResource(\"workportal-mobile-offline-form-successful\")\r\n                            ? bizagi.localization.getResource(\"workportal-mobile-offline-form-successful\")\r\n                            : \"Saved\";\r\n\r\n                        bizagi.util.showNotification({text: message, type: \"success\"});\r\n                    }\r\n                })\r\n                .fail(function (error) {\r\n                    bizagi.loading.stop();\r\n                    bizagi.util.recreateNativeButtons(self);\r\n                    if ($.isArray(error)) {\r\n                        var responses = error;\r\n                        var bHasValidations;\r\n                        var alertMessage = \"\";\r\n                        $.each(responses, function (i, response) {\r\n                            var propertiesToDisplayMessages = self.validationToDisplayMessages(bHasValidations, response.result.type, response.result.messages, alertMessage);\r\n                            bHasValidations = propertiesToDisplayMessages.bHasValidations;\r\n                            alertMessage = propertiesToDisplayMessages.alertMessage;\r\n                        });\r\n                        if (bHasValidations && alertMessage !== \"\") {\r\n                            bizagi.modalError.show(alertMessage, 'workportal-general-word-information', false);\r\n                        }\r\n                    }\r\n                    self.failHandler(error);\r\n                });\r\n\r\n        }).fail(function (error) {\r\n            message = bizagi.util.isValidResource(\"workportal-mobile-offline-successful-fail\")\r\n                ? bizagi.localization.getResource(\"workportal-mobile-offline-successful-fail\")\r\n                : \"Not saved\";\r\n\r\n            bizagi.util.showNotification({text: message, type: \"error\"});\r\n        });\r\n    },\r\n\r\n    /*\r\n    *   Internal - Creates a json array with key values to send to the server\r\n    */\r\n    internalSubmitForm: function (buttonProperties) {\r\n        var self = this;\r\n        var defer = $.Deferred();\r\n        var data = {};\r\n\r\n        // Fill data hash\r\n        if (buttonProperties.submitData || buttonProperties.executeRule || buttonProperties.createnewcase || buttonProperties.back) {\r\n            // Collect data\r\n            data = self.collectRenderValuesForSubmit();\r\n        }\r\n\r\n        // Start asynchronous operation\r\n        $.when(self.startLoading()).done(function () {\r\n            $('html, body').animate({scrollTop: $('.ui-bizagi-loading-icon')}, 'slow');\r\n        });\r\n\r\n        var submitDataAction = null;\r\n        var executeButtonAction = null;\r\n        var performAction = null;\r\n        var checkpointAction = null;\r\n        var commitAction = null;\r\n        var waitingDeferreds = [];\r\n        var deferredsToWait = null;\r\n\r\n        // Prepare actions\r\n        if (buttonProperties.executeRule) {  // When the button has to execute any rule (MUST SUBMIT DATA BEFORE ALWAYS)\r\n\r\n            if (data.deferreds) {\r\n                deferredsToWait = $.when.apply($, data.deferreds);\r\n                waitingDeferreds.push(deferredsToWait);\r\n                delete data.deferreds;\r\n            }\r\n\r\n            submitDataAction = self.dataService.submitData({\r\n                action: \"SUBMITDATA\",\r\n                data: data,\r\n                xpathContext: self.properties.xpathContext,\r\n                idPageCache: self.properties.idPageCache,\r\n                prepare: true\r\n            });\r\n            submitDataAction.tag = \"submitData\";\r\n\r\n            checkpointAction = self.prepareCheckpointAction(buttonProperties.id);\r\n\r\n            // Reset data because when an execute rule operation has been performed, it saved already all the data\r\n            data = {};\r\n            executeButtonAction = self.dataService.executeButton({\r\n                idRender: buttonProperties.id,\r\n                xpathContext: self.properties.xpathContext || \"\",\r\n                idPageCache: self.properties.idPageCache,\r\n                prepare: true\r\n            });\r\n            executeButtonAction.tag = \"executeRule\";\r\n\r\n            commitAction = self.prepareCommitAction(buttonProperties.id);\r\n        }\r\n\r\n        if (buttonProperties.next || buttonProperties.back || buttonProperties.save || buttonProperties.createnewcase || buttonProperties.nextWithoutValidations) {\r\n            // Verify transitions\r\n            if (self.transitions) {\r\n                var transitions = [];\r\n                $.each(this.activeTransitions, function (key, value) {\r\n                    (value) ? transitions.push(key) : \"\";\r\n                });\r\n\r\n                if (bizagi.util.countProps(transitions) == 0) {\r\n                    bizagi.showMessageBox(bizagi.localization.getResource(\"render-widget-complexgateway-path\"), bizagi\r\n                        .localization.getResource(\"render-widget-complexgateway-error\"), \"info\", false);\r\n                    self.endLoading();\r\n                    defer.reject();\r\n                    return defer.promise();\r\n                }\r\n            }\r\n\r\n            if (data && data.deferreds) {\r\n                deferredsToWait = $.when.apply($, data.deferreds);\r\n                waitingDeferreds.push(deferredsToWait);\r\n                delete data.deferreds;\r\n            }\r\n\r\n\r\n            performAction = self.dataService.submitData({\r\n                action: self.getButtonAction(buttonProperties.action),\r\n                forcePlanCompletion: buttonProperties.forcePlanCompletion,\r\n                data: data,\r\n                xpathContext: self.properties.xpathContext,\r\n                idPageCache: self.properties.idPageCache,\r\n                prepare: true,\r\n                transitions: transitions || \"\",\r\n                contexttype: self.properties.contextType,\r\n                surrogatekey: self.properties.surrogateKey\r\n            });\r\n            performAction.tag = \"performAction\";\r\n        }\r\n\r\n        // Assemble the actions\r\n        var actions = [];\r\n\r\n        if (executeButtonAction) {\r\n            actions.push(submitDataAction);\r\n            actions.push(checkpointAction);\r\n            actions.push(executeButtonAction);\r\n            actions.push(commitAction);\r\n        }\r\n\r\n        if (performAction) {\r\n            actions.push(performAction);\r\n        }\r\n\r\n        // Execute the batch\r\n        bizagi.chrono.initAndStart(\"submitForm-ajax\");\r\n\r\n\r\n        //Evaluate if there are deferreds to evaluate, like inline add in grid, that must send a ADDRELATIONWITHDATA before to savedata\r\n        var flowControlDeferred = new $.Deferred();\r\n        if (data && data.deferreds) {\r\n            $.when.apply(this, data.deferreds)\r\n                .done(function (response) {\r\n                    flowControlDeferred.resolve(response);\r\n                })\r\n                .fail(function () {\r\n                    flowControlDeferred.reject();\r\n                    console.log(\"Error: It was not possible resolve async actions on form \")\r\n                })\r\n        } else {\r\n            flowControlDeferred.resolve();\r\n        }\r\n\r\n        waitingDeferreds.push(flowControlDeferred);\r\n\r\n        $.when.apply($, waitingDeferreds).done(function () {\r\n            $.when(self.dataService.multiaction().execute({actions: actions})).done(function (responses) {\r\n                bizagi.chrono.stop(\"submitForm-ajax\");\r\n                // End asynchronous operation\r\n                self.endLoading();\r\n                // Find validations\r\n                var bHasValidations;\r\n                var alertMessage = \"\";\r\n                $.each(responses, function (i, response) {\r\n\r\n                    var propertiesToDisplayMessages = self.validationToDisplayMessages(bHasValidations, response.result.type, response.result.messages, alertMessage);\r\n                    bHasValidations = propertiesToDisplayMessages.bHasValidations;\r\n                    alertMessage = propertiesToDisplayMessages.alertMessage;\r\n\r\n                });\r\n\r\n                if (!bHasValidations) {\r\n                    // Everything went ok .. succesfully response from the server\r\n                    if (!self.postProcessButton(responses, buttonProperties)) {\r\n                        return;\r\n                    }\r\n\r\n                    // After successfully response refresh the form\r\n                    if (buttonProperties.refresh) {\r\n                        self.refreshForm();\r\n                    }\r\n\r\n                    // If needs routing publish an event\r\n                    if (buttonProperties.routing) {\r\n                        bizagi.jqxhrList.abortAll(\"rendering_\" + self.dataService.guid);\r\n                        self.triggerHandler(\"routing\", {\r\n                            idCase: self.params.idCase,\r\n                            routingDisabled: buttonProperties.routingDisabled\r\n                        });\r\n                    }\r\n\r\n                    // Create case\r\n                    if (buttonProperties.createnewcase) {\r\n                        if (responses.length > 0) {\r\n                            bizagi.jqxhrList.abortAll(\"rendering_\" + self.dataService.guid);\r\n                            self.triggerHandler(\"routing\", {\r\n                                idCase: responses[0].result.IdCase,\r\n                                caseNumber: responses[0].result.CaseNumber\r\n                            });\r\n                        }\r\n                    }\r\n                } else {\r\n                    if (alertMessage !== \"\") { /*If there is an alertMessage show in a modal error*/\r\n                        bizagi.modalError.show(alertMessage, 'workportal-general-word-information', false);\r\n                    }\r\n                    if (buttonProperties.executeRule) {\r\n                        self.sendRollbackAction(buttonProperties.id);\r\n                    }\r\n                }\r\n\r\n                defer.resolve();\r\n            }).fail(function (_, _, response) {\r\n                if (buttonProperties.executeRule) {\r\n                    self.sendRollbackAction(buttonProperties.id);\r\n                }\r\n\r\n                if (response && response.error && (response.error.errorType === \"WaitForCompletionPlanException\" ||\r\n                    response.error.errorType === \"InvalidPlanStateException\" || response.error.errorType === \"CustomMessageException\")) {\r\n                    self.endLoading();\r\n                    $.when(bizagi.showConfirmationBox(bizagi.localization.getResource(response.error.message), null, false)).then(function () {\r\n                        return $.when(self.internalSubmitForm($.extend({}, buttonProperties, {forcePlanCompletion: true})));\r\n                    }).done(function () {\r\n                        defer.resolve();\r\n                    }).fail(function () {\r\n                        defer.reject();\r\n                    });\r\n                } else {\r\n                    self.failHandler(response);\r\n                    defer.reject(response);\r\n                }\r\n            });\r\n        });\r\n        return defer.promise();\r\n    },\r\n    validationToDisplayMessages: function (bHasValidations, messageType, message, alertMessage) {\r\n        var self = this;\r\n\r\n        if (messageType == \"validationMessages\") {\r\n            // Something went wrong, we gotta display messages in notifications grid\r\n            self.addValidationMessage(message);\r\n            bHasValidations = true;\r\n        }\r\n        if (bizagi.detectDevice() == \"desktop\" && messageType == \"alertMessages\") {\r\n            // Something went wrong, we gotta display alert message\r\n            if (alertMessage === \"\") {\r\n                alertMessage = message;\r\n            } else {\r\n                alertMessage = alertMessage + \"\\n\\n\" + message;\r\n            }\r\n\r\n            bHasValidations = true;\r\n        }\r\n\r\n        return {\"bHasValidations\": bHasValidations, \"alertMessage\": alertMessage};\r\n    },\r\n\r\n    /*\r\n    *   Add a validation message to the form\r\n    */\r\n    addValidationMessage: function (validationMessage, focus, icon, itemAdditionalClass, autofocus, type) {\r\n        var self = this;\r\n\r\n        // Clean messages for mobile offline\r\n        if (bizagi.util.isNativeMobileDevice() && !this.allowOnlineActions())\r\n            this.clearValidationMessages();\r\n\r\n        if (!self.validationController) {\r\n            self.validationController = new bizagi.command.controllers.validation(self);\r\n        }\r\n\r\n        if (typeof (validationMessage) == \"string\") {\r\n            self.validationController.showValidationMessage(validationMessage, focus, icon, itemAdditionalClass, type);\r\n        } else {\r\n            $.each(validationMessage, function (i, message) {\r\n                self.validationController.showValidationMessage(message, focus, icon, itemAdditionalClass, type);\r\n            });\r\n        }\r\n        self.validationController.expandNotificationBox(autofocus);\r\n    },\r\n    /*\r\n    *   Public method to perform validations externally\r\n    */\r\n    clearValidationMessages: function (params) {\r\n        var self = this;\r\n\r\n        // First hide and clear validation box\r\n        if (self.validationController) {\r\n            self.validationController.clearValidationMessages(params);\r\n        }\r\n\r\n    },\r\n    /*\r\n    *   Add an error message to the form\r\n    */\r\n    addErrorMessage: function (errorMessage) {\r\n        var self = this;\r\n\r\n        // Clean messages for mobile offline\r\n        if (bizagi.util.isNativeMobileDevice() && !this.allowOnlineActions())\r\n            this.clearValidationMessages();\r\n\r\n        self.validationController.showErrorMessage(errorMessage);\r\n        self.validationController.expandNotificationBox();\r\n    },\r\n    /*\r\n    *   Refresh the current form\r\n    */\r\n    refreshForm: function (focus) {\r\n        var self = this;\r\n        var properties = self.properties;\r\n        var deferred = $.Deferred();\r\n\r\n        focus = focus || self.getFocus();\r\n\r\n        // Normalize new focus structure if not present\r\n        if (focus && !focus.id) {\r\n            focus = {\r\n                id: focus\r\n            };\r\n        }\r\n\r\n        var options = {\r\n            idCase: self.params.idCase || \"\",\r\n            idWorkitem: self.params.idWorkitem || \"\",\r\n            idTask: self.params.idTask || \"\",\r\n            focus: focus,\r\n            selectedTabs: self.getSelectedTabs(),\r\n            xpathContext: properties.xpathContext,\r\n            idPageCache: properties.idPageCache,\r\n            isRefresh: true,\r\n            contextType: self.getContextType() || \"\",\r\n            action: self.getEndPointAction(),\r\n            idStartScope: self.properties.idStartScope || \"\"\r\n        };\r\n\r\n        // Notify the refresh event so the consumer takes the decision about what to do\r\n        self.startLoading();\r\n        $.when(self.triggerHandler(\"refresh\", options)).done(function () {\r\n            self.endLoading();\r\n            deferred.resolve();\r\n        }).fail(function () {\r\n            self.endLoading();\r\n            deferred.reject();\r\n        });\r\n        return deferred.promise();\r\n    },\r\n    /*\r\n    *   Get opened tabs configuration\r\n    */\r\n    getSelectedTabs: function () {\r\n        var self = this;\r\n        var tabContainers = self.getElementsByType(\"tab\");\r\n        var tabs = $.map(tabContainers, function (tabContainer) {\r\n            return {tab: tabContainer.properties.id, selected: tabContainer.activeTab};\r\n        });\r\n        var selectedTabs = {};\r\n        for (var i = 0, length = tabs.length; i < length; i++) {\r\n            selectedTabs[tabs[i].tab] = tabs[i].selected;\r\n        }\r\n        return selectedTabs;\r\n    },\r\n    /*\r\n    *   Template method to get the buttons objects\r\n    */\r\n    getButtons: function () {\r\n    },\r\n    /*\r\n    *   Adds an action on the fly to process the submit on change\r\n    */\r\n    addSubmitAction: function (xpath, action) {\r\n        var self = this;\r\n        self.actionController.processInternalSubmitAction(xpath, action);\r\n    },\r\n    /**\r\n     *   Adds an overlay to the form, and sets a waiting message\r\n     *\r\n     *   @argument {bool} delay Apply delay\r\n     */\r\n    startLoading: function () {\r\n        var self = this;\r\n        var waitingTemplate = self.renderFactory.getTemplate(\"form-waiting\");\r\n\r\n        if (self.waitingOverlay && self.waitingMessage)\r\n            return;\r\n\r\n        // This hack is only for desktop\r\n        if (!bizagi.util.isTabletDevice()) {\r\n            // Detect canvas parent with scroll\r\n            var isSharePoint = self.params.context === \"sharepoint\";\r\n            var canvas = self.params.canvas;\r\n            if (isSharePoint) {\r\n                canvas = bizagi.util.scrollTop(canvas);\r\n\r\n                if (!!!canvas.context) {\r\n                    canvas = $(\"body\", $(document));\r\n                }\r\n            } else {\r\n                canvas = $(\"body\", $(document));\r\n            }\r\n\r\n            // Configures overlay\r\n            var size = this.getSize();\r\n            var position = this.getOffset();\r\n            if (size.height == $(window).height()) {\r\n                position.top = 0;\r\n            }\r\n            self.waitingOverlay = $('<div class=\"ui-widget-overlay\" />').appendTo(canvas);\r\n            self.waitingMessage = $.tmpl(waitingTemplate).appendTo(canvas);\r\n            self.waitingOverlay.css({\r\n                \"height\": \"100%\",\r\n                \"width\": \"100%\",\r\n                \"min-height\": size.height,\r\n                \"min-width\": size.width\r\n            });\r\n            self.waitingMessage.css({\r\n                \"top\": (position.top + Math.ceil((size.height - self.waitingMessage.outerHeight()) / 2)) + \"px\",\r\n                \"left\": (Math.ceil((size.width - self.waitingMessage.outerWidth()) / 2)) + \"px\"\r\n            });\r\n            canvas.css(\"position\", \"relative\");\r\n\r\n        } else {\r\n            // Configures overlay\r\n            self.waitingOverlay = $('<div class=\"ui-widget-overlay\" />').appendTo(\"body\", $(document));\r\n            self.waitingMessage = $.tmpl(waitingTemplate).appendTo(\"body\", $(document));\r\n        }\r\n    },\r\n    /*\r\n    *   Removes the overlay and restores the form edition\r\n    */\r\n    endLoading: function () {\r\n        var self = this;\r\n        if (self.waitingOverlay && self.waitingMessage) {\r\n            self.waitingOverlay.remove();\r\n            self.waitingMessage.remove();\r\n            self.waitingOverlay = null;\r\n            self.waitingMessage = null;\r\n\r\n            var canvas = self.params.canvas;\r\n\r\n            if (canvas != undefined)\r\n                canvas.css(\"position\", \"\");\r\n        }\r\n    },\r\n    /*\r\n    *   Get the focused render in the current request\r\n    */\r\n    getFocusedElement: function () {\r\n        var self = this;\r\n        return self.focus;\r\n    },\r\n    /*\r\n    *   Set the focused render in the current request\r\n    */\r\n    setFocusedElement: function (focus) {\r\n        var self = this;\r\n        self.focus = focus;\r\n    },\r\n    /*\r\n    *   Publish a global event that the facade will replicate\r\n    */\r\n    triggerGlobalHandler: function (eventType, data) {\r\n        return this.triggerHandler(\"globalHandler\", {eventType: eventType, data: data});\r\n    },\r\n    /*\r\n    *   Generic handler to attach fail workflow for some operations\r\n    */\r\n    failHandler: function (error) {\r\n        var self = this;\r\n\r\n        // Check if the error is in multiaction format\r\n        try {\r\n            error = JSON.parse(error);\r\n        } catch (e) {\r\n        }\r\n\r\n        //This double validation has the purpose to get the real error object from two different levels ( error.error or error.error.error )\r\n        if (error & error.length && error.length > 1) error = error[0];\r\n        if (error.error) error = error.error;\r\n        if (error.error) error = error.error;\r\n\r\n        // Handle normal messages\r\n        if (typeof error == \"object\" && error.message) {\r\n            if (error.errorType === \"WaitForCompletionPlanException\" || error.errorType === \"InvalidPlanStateException\" || error.errorType === \"CustomMessageException\") {\r\n                error = bizagi.localization.getResource(error.message);\r\n            } else {\r\n                error = error.message;\r\n            }\r\n\r\n        } else if (typeof error == \"string\") {\r\n            // Parse to json\r\n            try {\r\n                var errorJson = JSON.parse(error);\r\n                if (errorJson.errorType === \"WaitForCompletionPlanException\" || errorJson.errorType === \"InvalidPlanStateException\" || error.errorType === \"CustomMessageException\") {\r\n                    errorJson.message = bizagi.localization.getResource(errorJson.message);\r\n                }\r\n                error = errorJson.message;\r\n            } catch (e) {\r\n            }\r\n        }\r\n\r\n        // Workflow engine error, we gotta show it with error\r\n        self.addErrorMessage(error);\r\n        self.endLoading();\r\n    },\r\n    /* \r\n    *   Resizes the element\r\n    */\r\n    resize: function (size) {\r\n        // Just save the size, for reference\r\n        this.setSize(size);\r\n    },\r\n    /*\r\n    *   Sets the internal size for the form\r\n    */\r\n    setSize: function (size) {\r\n        this.size = size;\r\n    },\r\n    /*\r\n    *   Gets the internal size for the form\r\n    */\r\n    getSize: function () {\r\n        if (this.size) {\r\n            return this.size;\r\n        }\r\n        var canvas = (this.params.canvas) ? this.params.canvas : this.getFormContainer().container;\r\n\r\n        var canvasWidth = canvas.width();\r\n        var canvasHeight = canvas.height();\r\n\r\n        return {\r\n            width: canvasWidth,\r\n            height: canvasHeight\r\n        };\r\n    },\r\n    getOffset: function () {\r\n        var canvas = this.getFormContainer().container;\r\n\r\n        return canvas.offset();\r\n    },\r\n\r\n    /**\r\n     * This function execute action to save all data of render, but\r\n     * the server service dont execute any rule on the server\r\n     */\r\n    submitData: function (args) {\r\n        var self = this;\r\n\r\n        // Avoid the execution of server actions for mobile offline\r\n        if (bizagi.util.isNativeMobileDevice() && !this.allowOnlineActions())\r\n            return;\r\n\r\n        // Collect data\r\n        var data = self.collectRenderValuesForSubmit();\r\n\r\n        // Check is offline form        \r\n        var isOfflineForm = bizagi.util.isOfflineForm({context: self});\r\n        if (isOfflineForm && (self.properties && !self.properties.idPageCache)) {\r\n            self.properties.idPageCache = \"\";\r\n        }\r\n\r\n        // Mark data collected as original values\r\n        $.each(data, function (key, value) {\r\n            var renders = self.getRenders(key);\r\n            $.each(renders, function (i, render) {\r\n                render.updateOriginalValue();\r\n            });\r\n        });\r\n\r\n        // Don't do anything if there is no data\r\n        if ($.isEmptyObject(data)) {\r\n            return;\r\n        }\r\n\r\n        // Call the service\r\n        if (isOfflineForm) {\r\n            return $.when(self.dataService.submitData({\r\n                action: \"save\",\r\n                data: data,\r\n                xpathContext: self.properties.xpathContext,\r\n                contexttype: self.properties.contexttype || \"\",\r\n                isOfflineForm: isOfflineForm,\r\n                offlineType: self.params.offlineType,\r\n                idCase: self.params.idCase,\r\n                idWorkitem: self.params.idWorkitem\r\n            })).fail(function (message) {\r\n                message = self.processFailMessage(message);\r\n            });\r\n        } else {\r\n            return $.when(self.dataService.multiaction().submitData({\r\n                action: \"SUBMITDATA\",\r\n                data: data,\r\n                idPageCache: self.properties.idPageCache,\r\n                xpathContext: self.properties.xpathContext,\r\n                contexttype: self.properties.contexttype || \"\"\r\n            })).fail(function (message) {\r\n                message = self.processFailMessage(message);\r\n            });\r\n        }\r\n\r\n    },\r\n\r\n    /**\r\n     * This function send a request to the server to execute a rule\r\n     */\r\n    executeRule: function (args) {\r\n        var self = this;\r\n        var properties = self.properties;\r\n        var xpathContext = args.xpathContext;\r\n        var deferred = $.Deferred();\r\n\r\n        // Concat inheritance context\r\n        if (properties.xpathContext !== \"\") {\r\n            xpathContext = (xpathContext !== \"\") ? properties.xpathContext + \".\" + xpathContext : properties.xpathContext;\r\n        }\r\n\r\n        // Perform the service\r\n        $.when(self.dataService.multiaction().executeRule({\r\n            idPageCache: properties.idPageCache,\r\n            rule: args.rule,\r\n            xpathContext: xpathContext,\r\n            contexttype: self.properties.contexttype || \"\"\r\n        })).done(function (message) {\r\n            var type = message && message.type ? message.type : \"\";\r\n            var form = self.getFormContainer();\r\n\r\n            // Check for validation messages\r\n            self.getFormContainer().clearValidationMessages({clearOnlyServer: true});\r\n\r\n            if ([\"validationMessages\", \"alertMessages\"].includes(type)) {\r\n                if (type === \"alertMessages\") {\r\n                    bizagi.modalError && bizagi.modalError.show(message.messages.join(\"\\n\\n\"), 'workportal-general-word-information', false);\r\n                } else {\r\n                    form.addValidationMessage.apply(self, [message.messages, undefined, undefined, undefined, false, \"serverMessage\"]);\r\n                }\r\n\r\n                deferred.reject(message);\r\n            } else {\r\n                deferred.resolve(message);\r\n            }\r\n        }).fail(function (message) {\r\n            message = self.processFailMessage(message);\r\n            deferred.reject(message);\r\n        });\r\n\r\n        return deferred.promise();\r\n    },\r\n\r\n    /**\r\n     * This function send a request to the server to execute an interface\r\n     */\r\n    executeInterface: function (args) {\r\n        var self = this;\r\n        var properties = self.properties;\r\n        var xpathContext = args.xpathContext;\r\n\r\n        if (properties.xpathContext != \"\") {\r\n            // Concat inheritance context\r\n            xpathContext = (xpathContext != \"\") ? properties.xpathContext + \".\" + xpathContext : properties.xpathContext;\r\n        }\r\n\r\n        // Perform the service\r\n        return $.when(self.dataService.multiaction().executeInterface({\r\n            idPageCache: properties.idPageCache,\r\n            interface: args.interface,\r\n            xpathContext: xpathContext,\r\n            contexttype: self.properties.contexttype || \"\"\r\n        })).done(function (message) {\r\n            // Check for validation messages\r\n            self.getFormContainer().clearValidationMessages();\r\n            if (message && message.type == \"validationMessages\") {\r\n                self.getFormContainer().addValidationMessage(message.messages);\r\n            }\r\n\r\n        }).fail(function (message) {\r\n            message = self.processFailMessage(message);\r\n        });\r\n    },\r\n    executeSAPConnector: function (args) {\r\n        var self = this;\r\n        var properties = self.properties;\r\n        var xpathContext = args.xpathContext;\r\n\r\n        if (properties.xpathContext != \"\") {\r\n            // Concat inheritance context\r\n            xpathContext = (xpathContext != \"\") ? properties.xpathContext + \".\" + xpathContext : properties.xpathContext;\r\n        }\r\n\r\n        // Perform the service\r\n        return $.when(self.dataService.multiaction().executeSAPConnector({\r\n            idPageCache: properties.idPageCache,\r\n            guidsap: args.guidsap,\r\n            xpathContext: xpathContext,\r\n            contexttype: self.properties.contexttype || \"\"\r\n        })).done(function (message) {\r\n            // Check for validation messages\r\n            self.getFormContainer().clearValidationMessages();\r\n            if (message && message.type == \"validationMessages\") {\r\n                self.getFormContainer().addValidationMessage(message.messages);\r\n            }\r\n\r\n        }).fail(function (message) {\r\n            message = self.processFailMessage(message);\r\n        });\r\n\r\n    },\r\n\r\n    executeConnector: function (args) {\r\n        var self = this;\r\n        var properties = self.properties;\r\n        var xpathContext = args.xpathContext;\r\n\r\n        if (properties.xpathContext != \"\") {\r\n            // Concat inheritance context\r\n            xpathContext = (xpathContext != \"\") ? properties.xpathContext + \".\" + xpathContext : properties\r\n                .xpathContext;\r\n        }\r\n\r\n        // Perform the service\r\n        return $.when(self.dataService.multiaction().executeConnector({\r\n            idPageCache: properties.idPageCache,\r\n            guidConnector: args.guidConnector,\r\n            xpathContext: xpathContext,\r\n            contexttype: self.properties.contexttype || \"\"\r\n        })).done(function (message) {\r\n            // Check for validation messages\r\n            self.getFormContainer().clearValidationMessages();\r\n            if (message && message.type == \"validationMessages\") {\r\n                self.getFormContainer().addValidationMessage(message.messages);\r\n            }\r\n\r\n        }).fail(function (message) {\r\n            message = self.processFailMessage(message);\r\n        });\r\n\r\n    },\r\n\r\n    /*\r\n    *   Re-binds pending actions that could not be set because the renders did not exist when the form loaded\r\n    */\r\n    refreshActions: function (actions) {\r\n        var self = this;\r\n        self.actionController.refreshActions(actions);\r\n    },\r\n\r\n    /***/\r\n    tryToExecuteFunction: function(xpath){\r\n        if (this.getMode() == \"execution\"){\r\n            this.actionController && this.actionController.tryToExecuteFunction(xpath);\r\n        }\r\n    },\r\n\r\n    /*\r\n    *   Re-binds pending actions that could not be set because the renders did not exist when the form loaded\r\n    */\r\n    removeActions: function () {\r\n        var self = this;\r\n        self.actionController.unbindActions();\r\n    },\r\n    /*\r\n    *   Iterate through all renders and collect the data to send, then update original values for each render\r\n    */\r\n    collectRenderValuesForSubmit: function (data) {\r\n        var self = this;\r\n        data = data || {};\r\n\r\n        // Collect data\r\n        self.collectRenderValues(data);\r\n\r\n        // Mark data collected as original values\r\n        $.each(data, function (key, value) {\r\n            var renders = self.getRenders(key);\r\n            $.each(renders, function (i, render) {\r\n                render.updateOriginalValue();\r\n            });\r\n        });\r\n\r\n        return data;\r\n    },\r\n\r\n    /**\r\n     *\r\n     * @param params {data, bRefreshForm,properties}\r\n     * @returns {*}\r\n     */\r\n    internalSubmitOnChange: function (params) {\r\n        params = params || {};\r\n        var self = this;\r\n        var properties = params.properties;\r\n        var defer = new $.Deferred();\r\n        var data = params.data || {};\r\n        var bRefreshForm = typeof (params.bRefreshForm) != \"undefined\" ? params.bRefreshForm : true;\r\n        var notCollect = params.notCollect ? params.notCollect : undefined;\r\n\r\n        // Collect data\r\n        if (!(notCollect && !$.isEmptyObject(data))) {\r\n            self.collectRenderValuesForSubmit(data);\r\n        }\r\n\r\n        self.startLoading();\r\n\r\n        var deferredsToWait = null;\r\n        if (data.deferreds) {\r\n            deferredsToWait = $.when.apply($, data.deferreds);\r\n            delete data.deferreds;\r\n        }\r\n\r\n        $.when(deferredsToWait).then(function () {\r\n            // Submit the form\r\n            self.dataService.multiaction().submitData({\r\n                action: \"SUBMITONCHANGE\",\r\n                data: data,\r\n                idRender: properties.id,\r\n                xpath: properties.xpath,\r\n                xpathContext: self.properties.xpathContext,\r\n                idPageCache: properties.idPageCache,\r\n                contexttype: properties.contexttype\r\n            }).done(function (response) {\r\n                // Cancel previous multiactions and process property value\r\n                self.cancelPreviousRequest();\r\n                // After successfully response refresh the form\r\n                self.endLoading();\r\n                // If response message has error in validation, do not refresh the form\r\n                // and show validation message\r\n                if (response && response.type == \"validationMessages\") {\r\n                    if (typeof self.clearValidationMessages == \"function\") {\r\n                        self.clearValidationMessages();\r\n                    }\r\n\r\n                    self.addValidationMessage(response.messages);\r\n                    defer.resolve();\r\n                } else if (bRefreshForm) {\r\n                    var focusIdentifier = {\r\n                        id: properties.id,\r\n                        xpath: properties.xpath\r\n                    };\r\n                    if (properties.idCase !== undefined) {\r\n                        $.extend(focusIdentifier, {\r\n                            idCaseObject: bizagi.cache.idCaseObject\r\n                        });\r\n                    }\r\n                    if (response.IdScope) {\r\n                        self.properties.idStartScope = response.IdScope;\r\n                    }\r\n                    $.when(self.refreshForm(focusIdentifier)).done(function () {\r\n                        defer.resolve();\r\n                    }).fail(function () {\r\n                        defer.resolve();\r\n                    });\r\n                } else {\r\n                    defer.resolve();\r\n                }\r\n            }).fail(function (message) {\r\n                self.endLoading();\r\n                var objMessage = typeof message == 'object' ? message.responseText ? JSON.parse(message.responseText) : message : {};\r\n                var strMessage = objMessage.message || message;\r\n                // Clear previous validations\r\n                self.validationController.clearValidationMessages();\r\n                if (objMessage.type == \"alert\") {\r\n                    self.validationController.showAlertMessage(strMessage);\r\n                } else {\r\n                    self.validationController.showErrorMessage(strMessage);\r\n                }\r\n                defer.resolve();\r\n            });\r\n        });\r\n\r\n        return defer.promise();\r\n    },\r\n\r\n    cancelPreviousRequest: function () {\r\n        if (bizagi.multiactionConnection && bizagi.multiactionConnection.length) {\r\n            var length = bizagi.multiactionConnection.length;\r\n            var i = 0, connection;\r\n            for (; i < length; i++) {\r\n                connection = bizagi.multiactionConnection.pop();\r\n                if (connection && connection.abort) {\r\n                    bizagi.showErrorAlertDialog = false;\r\n                    connection.abort();\r\n                }\r\n            }\r\n        }\r\n    },\r\n\r\n    prepareCheckpointAction: function (buttonId) {\r\n        var self = this;\r\n\r\n        var checkpointAction = self.dataService.sendCheckpoint({\r\n            url: self.properties.checkpointUrl,\r\n            idRender: buttonId,\r\n            xpath: \"\",\r\n            xpathContext: self.properties.xpathContext,\r\n            idPageCache: self.properties.idPageCache,\r\n            prepare: true\r\n        });\r\n\r\n        checkpointAction.tag = \"checkpoint\";\r\n\r\n        return checkpointAction;\r\n    },\r\n\r\n    prepareCommitAction: function (buttonId) {\r\n        var self = this;\r\n\r\n        var commitAction = self.dataService.commitLinkForm({\r\n            url: self.properties.commitUrl,\r\n            idRender: buttonId,\r\n            xpath: \"\",\r\n            xpathContext: self.properties.xpathContext,\r\n            idPageCache: self.properties.idPageCache,\r\n            prepare: true\r\n        });\r\n\r\n        commitAction.tag = \"commit\";\r\n\r\n        return commitAction;\r\n    },\r\n\r\n    sendRollbackAction: function (buttonId) {\r\n        var self = this;\r\n\r\n        self.dataService.rollbackLinkForm({\r\n            url: self.properties.rollbackUrl,\r\n            idRender: buttonId,\r\n            xpath: \"\",\r\n            xpathContext: self.properties.xpathContext,\r\n            idPageCache: self.properties.idPageCache\r\n        });\r\n    },\r\n\r\n    dispose: function () {\r\n        var self = this;\r\n        self.endLoading();\r\n\r\n        setTimeout(function () {\r\n            if (self.params) {\r\n                delete self.params.canvas;\r\n            }\r\n            delete self.params;\r\n            delete self.control;\r\n            if (self.validationController) {\r\n                self.unbind(\"rendervalidate\");\r\n                delete self.validationController;\r\n            }\r\n\r\n            if (self.actionController) {\r\n                self.actionController.unbindActions();\r\n                delete self.actionController;\r\n            }\r\n        }, bizagi.override.disposeTime || 50);\r\n\r\n        // Call base\r\n        self._super();\r\n    },\r\n    getButton: function (guid) {\r\n        return $(\".ui-bizagi-button[data-id='\" + guid + \"']\", this.container);\r\n    },\r\n\r\n    getFloatingButton: function (guid) {\r\n        return $(\"li[data-id='\" + guid + \"']\", this.container);\r\n    },\r\n\r\n    propagateExternalEvents: function (evt) {\r\n        // Menu-Overflow\r\n        var $menuOverflow = $(\".bz-overflow-menu\");\r\n        if ($menuOverflow)\r\n            $(document).trigger('click.overflow');\r\n\r\n        // ECM with preview image\r\n        var zoomIsOpen = $(\".jquery-image-zoom\") && $(\".jquery-image-zoom\").css(\"display\") == \"block\";\r\n\r\n        if (zoomIsOpen)\r\n            $(\"div.jquery-image-zoom a\").click();\r\n    },\r\n\r\n    getButtonAction: function (action) {\r\n        return this.allowValidateAndSaveAction && action === \"validate\" ? \"save\" : action;\r\n    },\r\n\r\n    /**\r\n     * Add handlers to network management\r\n     */\r\n    configureNetworkHandlers: function () {\r\n        var self = this;\r\n        self.online = bizagi.util.isConnected();\r\n        if(self.isOfflineForm && (bizagi.util.isMobileDevice() && (\"\" + BIZAGI_ENVIRONMENT).toLowerCase() === \"debug\")){\r\n            self.online = false;\r\n        }\r\n\r\n        // Update the online status based on connectivity\r\n        if (bizagi.util.isNativeMobileDevice() || (bizagi.util.isMobileDevice() && (\"\" + BIZAGI_ENVIRONMENT).toLowerCase() === \"debug\")) {\r\n            $(document).off(\"online.form\");\r\n            $(document).on(\"online.form\", this.handleConnectionChange.bind(self));\r\n\r\n            $(document).off(\"offline.form\");\r\n            $(document).on(\"offline.form\", this.handleConnectionChange.bind(self));\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Event handler\r\n     * @param event\r\n     */\r\n    handleConnectionChange: function (event) {\r\n        var form = this.getFormContainer();\r\n        if (bizagi.util.isMobileDevice() && (\"\" + BIZAGI_ENVIRONMENT).toLowerCase() === \"debug\"){\r\n            this.online = event.type === \"online\";\r\n        }\r\n        else{\r\n            this.online = bizagi.util.isConnected();\r\n        }\r\n\r\n        // You lost connection.\r\n        if (event.type === \"offline\") {\r\n            form.triggerHandler(\"offlineForm\");\r\n        }\r\n\r\n        // You are now back online.\r\n        if (event.type === \"online\") {\r\n            form.triggerHandler(\"onlineForm\");\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Check if allow to call the button actions\r\n     * @returns {boolean|*}\r\n     */\r\n    allowOnlineActions: function () {\r\n        if (typeof (this.online) === \"undefined\") return true;\r\n        return this.online || (!this.online && this.isOfflineForm);\r\n    }\r\n\r\n});\r\n","/**\r\n * Render a new type of form called template\r\n *\r\n * @author Edward Morales\r\n */\r\n$.Class.extend(\"bizagi.rendering.formTemplate\", {\r\n\r\n    /**\r\n     *   Constructor\r\n     */\r\n    init: function (params) {\r\n        this._super(params);\r\n        if(params.paramsRender && params.paramsRender.contextEvent){\r\n            self.contextEvent = params.paramsRender.contextEvent;\r\n        }\r\n    },\r\n\r\n\t/**\r\n\t * Process controls on template\r\n\t * @param template\r\n\t * @param controls\r\n\t * @return {*}\r\n\t */\r\n\tprocessTemplate: function(template, controls) {\r\n\t    var regexControl = /\\{\\{([\\w:]*)\\s*(\\{[\"':,-\\[\\]\\w\\s]*\\})\\}\\}/g;\r\n\t\tvar regexRepeater = /\\{\\{(((repeater)\\s*(\\{[\"':,-\\[\\]\\w\\s]*\\}))|([\\/repeater]+:item)|(\\/repeater)|(repeater)|(separator))\\}\\}/g;\r\n\r\n\t\t// Remove all repeaters key words\r\n\t\tvar processedTemplate = template.replace(regexRepeater, \"\");\r\n\r\n\t\t// replace controls\r\n\t\tprocessedTemplate = processedTemplate.replace(regexControl, function(match, g1, g2, offset, string) {\r\n\t\t    var parameters = JSON.parse(g2);\r\n            \r\n\t\t\treturn controls[parameters.id] || '';\r\n\t\t});\r\n\r\n\t    processedTemplate = processedTemplate.replace(/{{([\\w:]*)\\s*}}/g, function() {\r\n\t        return '';\r\n\t    });\r\n\r\n\r\n\t\treturn processedTemplate;\r\n\t},\r\n\r\n\t/**\r\n\t * Render layout container\r\n\t * @return {*}\r\n\t */\r\n\trenderContainer: function() {\r\n\t\tvar self = this;\r\n\t\tvar layoutCollection = self.getRenderByType(\"layout\");\r\n\t\tvar layout = (layoutCollection.length > 0) ? layoutCollection[0] : {};\r\n\t\tvar template = (typeof layout.getTemplate == \"function\") ? layout.getTemplate() : \"\";\r\n\t\tvar css = (typeof layout.getCss == \"function\") ? layout.getCss() : \"\";\r\n\t\tvar mode = self.getMode();\r\n\t\tvar layoutGuid = self.properties.layoutguid || Math.guid();\r\n\r\n\t\tvar controls = {};\r\n\r\n\t\t/**\r\n\t\t * Render all elements within first layout container\r\n\t\t */\r\n\t\tif(layout.children) {\r\n\t\t\t$.each(layout.children, function(i, child) {\r\n\t\t\t    // ignore layoutPlaceholder control in execution\r\n\t\t\t    if (!(mode == 'execution' && child.properties.type == 'layoutPlaceholder')) {\r\n\r\n\t\t\t        var type = child.getElementType();\r\n\t\t\t        if (type == bizagi.rendering.element.ELEMENT_TYPE_RENDER) {\r\n\t\t\t            controls[child.properties.id] = child.renderElement();\r\n\t\t\t        }\r\n\t\t\t        if (type == bizagi.rendering.element.ELEMENT_TYPE_CONTAINER) {\r\n\t\t\t            controls[child.properties.id] = child.renderContainerHtml();\r\n\t\t\t        }\r\n\t\t\t        self.childrenHash[child.properties.uniqueId] = child;\r\n\t\t\t    }\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\t// Load css\r\n\t\tbizagi.util.loadStyle(css, layoutGuid);\r\n\r\n\t\treturn self.processTemplate(template, controls);\r\n\t},\r\n\r\n    /**\r\n     * Get the context in which loads the formTemplate\r\n     *\r\n     */\r\n    getContextEvent: function(){\r\n        return self.contextEvent;\r\n    }\r\n});\r\n","$.Class.extend(\"bizagi.rendering.layout\", {}, {\r\n\r\n\t/**\r\n\t * Get html template\r\n\t * @return {*}\r\n\t */\r\n\tgetTemplate: function() {\r\n\t    var self = this;\r\n\t    var mode = self.getMode();\r\n\t    var html = self.properties.html || \"\";\r\n\r\n        // Add a container, this is important in design to calculate the scroll \r\n\t    if (mode == 'design' && html) {\r\n            html = \"<div class='bz-design-template'>\" + html + \"</div>\"\r\n\t    }\r\n\t\t\r\n\t\treturn bizagi.util.stripslashes(html);\r\n\t},\r\n\r\n\t/**\r\n\t * Get string css of layout container\r\n\t * @return {*}\r\n\t */\r\n\tgetCss: function() {\r\n\t    var self = this;\r\n\t\tvar css = self.properties.css || \"\";\r\n\r\n\t\tvar mode = self.getMode();\r\n\t\tif (mode == \"design\") {\r\n\t\t    css = css && css.desktop;\r\n\t\t}\r\n\r\n\t\treturn bizagi.util.stripslashes(css);\r\n\t},\r\n\r\n\r\n\t/*\r\n\t *   Template method to process each jquery object\r\n\t *   must be overriden in each container\r\n\t */\r\n\tpostRenderContainer: function(container) {\r\n\t\tvar self = this;\r\n\t\tvar mode = self.getMode();\r\n\r\n\t\t// Resolve rendering deferred\r\n\t\tif(self.renderingDeferred)\r\n\t\t\tself.renderingDeferred.resolve();\r\n\r\n\t\t// Process children elements\r\n\t\tself.container = container;\r\n\t\tself.executeChildrenPostRender(container);\r\n\r\n\t\tif(mode == \"execution\") {\r\n\t\t\t// Apply handlers\r\n\t\t\tself.configureHandlers();\r\n\t\t}\r\n\t\tif(mode == \"design\") {\r\n\t\t\t// Configure view\r\n\t\t\tself.configureDesignView();\r\n\t\t}\r\n\t\tif(mode == \"layout\") {\r\n\t\t\t// Configure view\r\n\t\t\tself.configureDesignView();\r\n\t\t\tself.configureLayoutView();\r\n\t\t}\r\n\t}\r\n});","/*\r\n*   Name: BizAgi Form Container Class\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will define a form container class that defines basic stuff regarding the device\r\n*/\r\n\r\n$.Class.extend(\"bizagi.rendering.mobileform\", {}, {\r\n    /*\r\n    *   Constructor\r\n    */ \r\n    init: function (params) {\r\n        var self = this;\r\n        var data = params.data;\r\n        var device = bizagi.util.detectDevice();\r\n\r\n        // Creates a hashtable to maintain references by id\r\n        self.rendersById = {};\r\n        self.rendersByXpath = {};\r\n        self.rendersByType = {};\r\n\r\n        // Set page cache id\r\n        self.idPageCache = data.pageCacheId;\r\n\r\n        // Set default mode\r\n        self.mode = params.mode || \"execution\";\r\n        self.focus = params.focus;\r\n\r\n        // Set rendering params\r\n        self.params = params;\r\n\r\n        // Call base\r\n        this._super(params);\r\n\r\n        // Define confirmation message \r\n        var message = \"\";\r\n\r\n        if (device !== \"desktop\") {\r\n            message = this.getResource(\"render-form-user-confirmation-message\").replace(/<br(\\/| \\/)>/g, \"\\n\");\r\n        } else {\r\n            message = this.getResource(\"render-form-user-confirmation-message\");\r\n        }\r\n\r\n        // Default properties\r\n        var properties = self.properties;\r\n        properties.sessionId = data.sessionId;\r\n        properties.displayAsReadOnly = bizagi.util.parseBoolean(data.displayAsReadOnly) || false;\r\n        properties.userConfirmationMessage = properties.userConfirmationMessage || message;\r\n        properties.orientation = properties.orientation || \"ltr\";\r\n        properties.hasRule = bizagi.util.parseBoolean(properties.hasRule) || false;\r\n        properties.contexttype = params.contexttype || \"\";\r\n        properties.paramsRender = params.paramsRender || {};\r\n        properties.processPath = params.data.processPath ? params.data.processPath.replaceAll(\"/\", \"  &rsaquo;  \") : \"\";\r\n        properties.breadCrumb = params.data.processPath ? params.data.processPath.split(\"/\") : [];\r\n\r\n        // Set validations & actions\r\n        this.validations = data.validations;\r\n        this.actions = data.actions;\r\n\r\n        // Initialize buttons\r\n        self.initializeButtons(data);\r\n\r\n        // Define transitions to Complex Gateway\r\n        if (data.transitions) {\r\n            self.transitions = data.transitions;\r\n        }\r\n\r\n        this.originalProcessButton = this.processButton;\r\n\r\n    },\r\n    /*\r\n    *   Initializes button metadata\r\n    */\r\n    initializeButtons: function (data) {\r\n        var self = this;\r\n\r\n        self.buttons = [];\r\n\r\n        // Process buttons\r\n        if (data.buttons) {\r\n            $.each(data.buttons, function (i, item) {\r\n                var button = item.button.properties;\r\n\r\n                // Process caption\r\n                button.caption = !bizagi.util.isEmpty(button.caption)\r\n                    && self.getResource(button.caption) != button.caption\r\n                    ? self.getResource(button.caption) : button.caption;\r\n\r\n                // Process actions\r\n                if (button.actions) {\r\n                    $.each(button.actions, function (i, action) {\r\n                        button[action] = true;\r\n                    });\r\n                }\r\n\r\n                // Add other properties\r\n                button.ordinal = i;\r\n                button.action = button.next ? \"next\" : button.submitData ? \"save\" : button.cancel\r\n                    ? \"cancel\" : button.back ? \"back\" : button.createnewcase ? \"createnewcase\" : button.validate ? \"validate\" : \"\";\r\n\r\n                // Explicit add save operation\r\n                button.save = (button.action == \"save\");\r\n\r\n                // Add inherent behaviours\r\n                if (button.next || button.back) {\r\n                    button.routing = true;\r\n                }\r\n                if (button.hasRule) {\r\n                    button.executeRule = true;\r\n                }\r\n\r\n                // Prepare button style\r\n                button.style = self.buildButtonStyle(button);\r\n\r\n                // Add to button array\r\n                if (self.properties.orientation === \"rtl\" && !self.properties.useCustomButtons) {\r\n                    self.buttons.unshift(button);\r\n                }\r\n                else {\r\n                    self.buttons.push(button);\r\n                }\r\n\r\n            });\r\n        }\r\n    },\r\n    /*\r\n    *   Get the original params used to fetch the form\r\n    */\r\n    getParams: function () {\r\n        return this.params;\r\n    },\r\n\r\n    setParam: function (property, value) {\r\n        if (this.params) {\r\n            this.params[property] = value;\r\n        }\r\n    },\r\n\r\n    /*\r\n    *   Get current rendering mode\r\n    */\r\n    getMode: function () {\r\n        return this.mode;\r\n    },\r\n    /*\r\n    *   Get the custom handlers set for this execution\r\n    */\r\n    getCustomHandlers: function () {\r\n        var self = this;\r\n        if (self.params) {\r\n            return self.params.customHandlers;\r\n        }\r\n    },\r\n    /*\r\n    * Method to index renders\r\n    */\r\n    registerRender: function (render) {\r\n        var self = this;\r\n\r\n        self.rendersById[render.properties.id] = render;\r\n        if (render.properties.xpath) {\r\n            if (!self.rendersByXpath[render.properties.xpath]) {\r\n                self.rendersByXpath[render.properties.xpath] = [];\r\n            }\r\n            self.rendersByXpath[render.properties.xpath].push(render);\r\n        }\r\n\r\n        if (!self.rendersByType[render.properties.type]) {\r\n            self.rendersByType[render.properties.type] = [];\r\n        }\r\n        self.rendersByType[render.properties.type].push(render);\r\n    },\r\n    /*\r\n    * Method to unregister render\r\n    */\r\n    unregisterRender: function (render) {\r\n        var self = this;\r\n\r\n        if (self.rendersById[render.properties.id]) {\r\n            delete self.rendersById[render.properties.id];\r\n        }\r\n\r\n        if (render.properties.xpath) {\r\n            if ($.isArray(self.rendersByXpath[render.properties.xpath])\r\n                && self.rendersByXpath[render.properties.xpath].length > 1) {\r\n                for (var i = 0, l = self.rendersByXpath[render.properties.xpath].length; i < l; i++) {\r\n                    var element = self.rendersByXpath[render.properties.xpath][i];\r\n                    if (element.properties.id === render.properties.id) {\r\n                        self.rendersByXpath[render.properties.xpath].splice(i, 1);\r\n                        break;\r\n                    }\r\n                }\r\n            } else {\r\n                delete self.rendersByXpath[render.properties.xpath];\r\n            }\r\n        }\r\n\r\n        // Unregister from renders by type\r\n        if (render.properties.type) {\r\n            var listRendesByType = self.getRenderByType(render.properties.type);\r\n            var listRendesByTypeLength = listRendesByType.length;\r\n            var renderKey = render.properties.id || render.properties.xpath;\r\n\r\n            for (var i = 0; i < listRendesByTypeLength; i++) {\r\n                var listRender = listRendesByType[i];\r\n                if ((typeof listRender.properties.id != \"undefined\" && listRender.properties.id == renderKey) ||\r\n                (typeof listRender.properties.xpath != \"undefined\" && listRender.properties.xpath == renderKey)) {\r\n                    // Unregister element\r\n                    self.rendersByType[render.properties.type].splice(i, 1);\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n    },\r\n    /*\r\n    * Method to access a render by id\r\n    */\r\n    getRenderById: function (id) {\r\n        var self = this;\r\n\r\n        return self.rendersById[id];\r\n    },\r\n    /*\r\n    *   Method to find all the renders matching an xpath inside the container\r\n    */\r\n    getRenders: function (xpath) {\r\n        var self = this;\r\n\r\n        // Remove [] filters for grid columns xpaths to fully identify the grid as the xpath target\r\n        if (xpath && xpath.indexOf)\r\n            if (xpath.indexOf(\"[\") > 0) {\r\n                xpath = xpath.substring(0, xpath.indexOf(\"[\"));\r\n            }\r\n\r\n        return self.rendersByXpath[xpath] ? self.rendersByXpath[xpath] : [];\r\n    },\r\n    /**\r\n    * Get all render with the same type\r\n    */\r\n    getRenderByType: function (type) {\r\n        var self = this;\r\n\r\n        // Check that type is defined\r\n        if (typeof type == \"string\" && type.length > 0) {\r\n            // Search controls by type\r\n            return (self.rendersByType[type]) ? self.rendersByType[type] : [];\r\n        }\r\n        return [];\r\n    },\r\n\r\n    /*\r\n    *   Build the container html\r\n    */\r\n    renderContainer: function () {\r\n        var self = this;\r\n        var properties = this.properties;\r\n        var template = self.renderFactory.getTemplate(\"form\");\r\n        var idCase = \"\";\r\n\r\n        // Render the form\r\n        var html = $.fasttmpl(template, {\r\n            buttons: self.buttons,\r\n            transitions: self.transitions,\r\n            uniqueId: properties.uniqueId,\r\n            helptext: properties.helpText,\r\n            mode: self.getMode(),\r\n            queryForm: self.getFormType() == \"queryForm\",\r\n            summaryForm: self.params.summaryForm || false,\r\n            globalForm: self.properties.displayAsReadOnly || false,\r\n            // activityForm: self.properties.xpathContext != \"\",\r\n            idCase: idCase,\r\n            displayName: self.params.displayName || idCase,\r\n            processPath: properties.processPath,\r\n            breadCrumb: properties.breadCrumb,\r\n            orientation: properties.orientation\r\n        });\r\n\r\n        // Render children\r\n        html = self.replaceChildrenHtml(html, self.renderChildrenHtml());\r\n        return html;\r\n    },\r\n    /*\r\n    *   Process the html rendering object\r\n    */\r\n    postRenderContainer: function (form) {\r\n        var self = this;\r\n        var mode = self.getMode();\r\n\r\n        // Add a mode class\r\n        form.addClass(\"ui-bizagi-rendering-mode-\" + mode);\r\n\r\n        // Call base\r\n        this._super(form);\r\n    },\r\n    /*\r\n    *   Template method to implement in each device to customize the container's behaviour to add handlers\r\n    */\r\n    configureHandlers: function () {\r\n        var self = this;\r\n        var complexGatewayContainer;\r\n        var form = self.container;\r\n\r\n        if (form.length > 1) {\r\n            $(form).each(function () {\r\n                if ($(this).hasClass('ui-bizagi-container-complexgateway')) {\r\n                    complexGatewayContainer = this;\r\n                }\r\n            });\r\n        } else {\r\n            complexGatewayContainer = $(\".ui-bizagi-container-complexgateway\", form);\r\n        }\r\n\r\n        // activeTransitions is used to store ids of activities in Complex Gateway\r\n        self.activeTransitions = {};\r\n\r\n        // Process buttons\r\n        self.processButtons(form);\r\n        // Check for dom included event\r\n        self.bind(\"ondomincluded\", function (e, mainForm) {\r\n            // Creates validation controller after the form is ready\r\n            self.validationController = new bizagi.command.controllers.validation(self, self.validations, mainForm);\r\n            // Creates action controller after the form is ready\r\n            self.actionController = new bizagi.command.controllers.action(self, self.actions);\r\n\r\n            // Resolve this deferred to start executing DOM dependant plugins\r\n            self.readyDeferred.resolve();\r\n        });\r\n\r\n        // Set events for complex gateway interface\r\n        $(complexGatewayContainer).find(\".ui-checkbox\").bind(\"click\", function () {\r\n            var checkboxLabel = $(\"label\", this);\r\n\r\n            var transitionId = checkboxLabel.data(\"value\") || \"\";\r\n            if (typeof self.activeTransitions[transitionId] == \"undefined\") {\r\n                self.activeTransitions[transitionId] = false;\r\n            }\r\n\r\n            if (bizagi.util.parseBoolean(checkboxLabel.data(\"checked\"))) {\r\n                // Uncheck element\r\n                checkboxLabel.removeClass(\"ui-checkbox-state-checked\");\r\n                checkboxLabel.removeClass(\"bz-check\").addClass(\"bz-full-ball\");\r\n                checkboxLabel.data(\"checked\", false);\r\n                self.activeTransitions[transitionId] = false;\r\n            } else {\r\n                // Check element\r\n                checkboxLabel.addClass(\"ui-checkbox-state-checked\");\r\n                checkboxLabel.addClass(\"bz-mo-icon\").addClass(\"bz-check\").removeClass(\"bz-full-ball\");\r\n                checkboxLabel.data(\"checked\", true);\r\n                self.activeTransitions[transitionId] = true;\r\n            }\r\n        });\r\n    },\r\n    /*\r\n    *   Template method to implement in each device to customize the render's behaviour when rendering in design mode\r\n    */\r\n    configureDesignView: function () {\r\n        var self = this;\r\n        var form = self.container;\r\n\r\n        // Check for dom included event\r\n        self.bind(\"ondomincluded\", function () {\r\n            // Resolve this deferred to start executing DOM dependant plugins\r\n            self.readyDeferred.resolve();\r\n        });\r\n    },\r\n    /*\r\n    *   Format form buttons to allow further customization\r\n    */\r\n    buildButtonStyle: function (button) {\r\n        var self = this;\r\n        var style = {};\r\n        if (button.format) {\r\n            if (button.format.size) {\r\n                if (button.format.size != \"0\") {\r\n                    var newFontSize = (100 + Number(button.format.size) * 10) + \"%\";\r\n                    style[\"font-size\"] = newFontSize + \" !important\";\r\n                }\r\n            }\r\n            if (button.format.bold) {\r\n                style[\"font-weight\"] = \"bold !important\";\r\n                if (bizagi.util.isIE()) {\r\n                    style[\"font-family\"] = \"'Open Sans', 'Helvetica Neue', Arial, Helvetica, sans-serif !important\";\r\n                }\r\n            }\r\n            if (button.format.italic) {\r\n                style[\"font-style\"] = \"italic !important\";\r\n            }\r\n            if (button.format.underline || button.format.strikethru) {\r\n                var strikethru = bizagi.util.parseBoolean(button.format.strikethru) ? \"line-through \" : \"\";\r\n                var underline = bizagi.util.parseBoolean(button.format.underline) ? \"underline \" : \"\";\r\n                style[\"text-decoration\"] = strikethru + underline + \" !important\";\r\n            }\r\n            if (button.format.background) {\r\n                style[\"background-color\"] = button.format.background + \" !important\";\r\n                style[\"background-image\"] = \"none !important\";\r\n            }\r\n            if (button.format.color) {\r\n                style[\"color\"] = button.format.color + \" !important\";\r\n            }\r\n        }\r\n\r\n        var strStyle = \"\";\r\n        for (key in style) {\r\n            strStyle += key + \":\" + style[key] + \";\";\r\n        }\r\n        return strStyle;\r\n    },\r\n    /*\r\n    *   Returns the in-memory processed element\r\n    *   Returns a promise\r\n    */\r\n    render: function () {\r\n        var self = this;\r\n\r\n        // Creates a deferred, so we can check when form has been included in dom\r\n        if (!self.readyDeferred)\r\n            self.readyDeferred = new $.Deferred();\r\n\r\n        // Call base\r\n        var result = this._super();\r\n\r\n        return result;\r\n    },\r\n    /*\r\n    *   Sets a promise that the form will be included in the DOM\r\n    *   so we can apply some tedious plugins that require that\r\n    */\r\n    ready: function () {\r\n        var self = this;\r\n\r\n        return self.readyDeferred.promise();\r\n    },\r\n    /*\r\n    *   Returns the xpath context of the element\r\n    */\r\n    getXpathContext: function () {\r\n        return this.properties.xpathContext || \"\";\r\n    },\r\n    /*\r\n    *  Return context type, when the parent form is entity\r\n    */\r\n    getContextType: function () {\r\n        return this.properties.contexttype || \"\";\r\n    },\r\n\r\n    /*\r\n    * Return the endpoint action, when the form will be refresh\r\n    */\r\n    getEndPointAction: function () {\r\n        var self = this,\r\n            properties = self.properties;\r\n\r\n        if (properties.formtype == \"startform\")\r\n            return \"LOADSTARTFORM\";\r\n\r\n        return undefined;\r\n\r\n    },\r\n\r\n    /*\r\n    *   Returns the page cache id for the element\r\n    */\r\n    getPageCache: function () {\r\n        return this.idPageCache;\r\n    },\r\n    /*\r\n    *   Returns the form containing the element\r\n    */\r\n    getFormContainer: function () {\r\n\r\n        return this;\r\n    },\r\n    /*\r\n    *   Method to process button actions in the form\r\n    */\r\n    processButtons: function () {\r\n        var self = this;\r\n        var buttons = self.getButtons();\r\n\r\n        // Don't process buttons if they are undefined in the template\r\n        if (!buttons || buttons.length == 0) {\r\n            return;\r\n        }\r\n\r\n        // Attach a handler for each button\r\n        buttons.on(\"click\", function (e) {\r\n            e.preventDefault();\r\n            e.stopImmediatePropagation();\r\n            self.startLoading();\r\n            var button = $(this);\r\n            var ordinal = button.attr(\"ordinal\");\r\n            var buttonProperties = self.buttons[ordinal];\r\n\r\n            self.lastActionButton = buttonProperties;\r\n\r\n            // Execute button\r\n            //QAF-1418 - add setTimeout\r\n            setTimeout(function () {\r\n                $.when(self.processButton(buttonProperties)).always(function () {\r\n                    self.processDefer = undefined;\r\n                    self.endLoading();\r\n                });\r\n            }, 100);\r\n        });\r\n    },\r\n    /*\r\n    * Execute codes just before sending information to server\r\n    */\r\n    preProcessButton: function (buttonProperties) {\r\n        return true;\r\n    },\r\n    /*\r\n    * Execute codes just after sending information to server\r\n    */\r\n    postProcessButton: function (responses, buttonProperties) {\r\n        return true; // true means continue\r\n    },\r\n    /*\r\n    *   Executes a single button action\r\n    */\r\n    processButton: function (buttonProperties) {\r\n        var self = this;\r\n        var defer = $.Deferred();\r\n        var properties = self.properties;\r\n        if (!buttonProperties.routing) {\r\n            bizagi.chrono.initAndStart(\"submitForm\");\r\n        }\r\n        bizagi.chrono.init(\"waiting\");\r\n\r\n        // First hide and clear validation box\r\n        self.validationController.clearValidationMessages();\r\n\r\n        // Resolve asynchronous tabItems\r\n        var form = self.getFormContainer();\r\n        var asyncTabsDef = $.Deferred();\r\n        var getAllTabs = form.getRenderByType(\"tabItem\");\r\n        var getAllTabsLength = getAllTabs.length;\r\n\r\n        form.innerTabsLoading = true;\r\n\r\n        // Check\r\n        for (var i = 0; i < getAllTabsLength; i++) {\r\n            var render = getAllTabs[i];\r\n            // Resolve internal deferred\r\n            if (render.loadingDeferred && render.parent.container) {\r\n                render.loadingDeferred.resolve();\r\n            }\r\n        }\r\n\r\n        delete form.innerTabsLoading;\r\n        // Resolve task deferred\r\n        asyncTabsDef.resolve();\r\n\r\n\r\n        $.when(self.ready(), asyncTabsDef.promise()).done(function () {\r\n            // Validate the form\r\n            var valid = bizagi.util.parseBoolean(buttonProperties.validate)\r\n                ? self.validationController.performValidations() : true;\r\n            if (valid) {\r\n\r\n                if (buttonProperties.action === \"save\" || buttonProperties.action == \"next\"\r\n                    || buttonProperties.action == \"back\" || buttonProperties.action == \"createnewcase\") {\r\n                    $(document).data('auto-save', '');\r\n                }\r\n\r\n                // Check for user confirmation if configured and the button is configured to enroute\r\n                if (bizagi.util.parseBoolean(self.properties.needsUserConfirmation) && bizagi.util.parseBoolean(buttonProperties.routing)) {\r\n                    self.endLoading();\r\n                    $.when(bizagi.showConfirmationBox(properties.userConfirmationMessage, null, false)).done(function () {\r\n                        // Submits the form\r\n                        if (self.preProcessButton(buttonProperties)) {\r\n                            //Trigger the event after ProcessButton\r\n                            self.triggerGlobalHandler(\"renderActionButton\", buttonProperties);\r\n                            $.when(self.submitForm(buttonProperties)).done(function () {\r\n                                defer.resolve();\r\n                            });\r\n                        }\r\n                    }).fail(function () {\r\n                        defer.reject();\r\n                    });\r\n\r\n                } else {\r\n                    if (self.preProcessButton(buttonProperties)) {\r\n                        //Trigger the event after ProcessButton\r\n                        self.triggerGlobalHandler(\"renderActionButton\", buttonProperties);\r\n                        $.when(self.submitForm(buttonProperties)).done(function(){\r\n                            $(document).trigger(\"FORMACTION\",buttonProperties);\r\n                            defer.resolve();\r\n                        }).fail(function () {\r\n                            defer.reject(arguments);\r\n                        });\r\n                    }\r\n                }\r\n\r\n            } else {\r\n\r\n                self.endLoading();\r\n                if (buttonProperties.submitData) {\r\n                    $.when(self.submitData()).done(function () {\r\n                        defer.reject();\r\n                    });\r\n                }\r\n\r\n                self.validationController.expandNotificationBox();\r\n            }\r\n\r\n            var customHandler = self.getCustomHandler(\"afterFormButtonClick\");\r\n            if (customHandler) {\r\n                customHandler(buttonProperties);\r\n            }\r\n        });\r\n\r\n        return defer.promise();\r\n    },\r\n    /*\r\n    *   Public method to perform validations externally\r\n    */\r\n    validateForm: function () {\r\n        var self = this;\r\n\r\n        // First hide and clear validation box\r\n        self.validationController.clearValidationMessages();\r\n\r\n        // Validate the form\r\n        return self.validationController.performValidations();\r\n    },\r\n    /*\r\n    *   Submits all the form to the server and returns a deferred to check when the process finishes\r\n    */\r\n    saveForm: function () {\r\n        var self = this;\r\n\r\n        // Check is offline form        \r\n        var isOfflineForm = bizagi.util.isOfflineForm({ context: self });\r\n\r\n        // Collect data\r\n        var data = self.collectRenderValuesForSubmit();\r\n\r\n        // Check if there are deferreds to wait\r\n        var deferredsToWait = null;\r\n        if (data.deferreds) {\r\n            deferredsToWait = $.when.apply($, data.deferreds);\r\n            delete data.deferreds;\r\n        }\r\n\r\n        // Wait for deferreds\r\n        return $.when(deferredsToWait).pipe(function () {\r\n            self.startLoading();\r\n\r\n            // Submit the form\r\n            return $.when(self.dataService.submitData({\r\n                  action: \"SAVE\",\r\n                  data: data,\r\n                  idCase: self.params.idCase,\r\n                  xpathContext: self.properties.xpathContext,\r\n                  idPageCache: self.properties.idPageCache,\r\n                  isOfflineForm: isOfflineForm || false\r\n              })).always(function () {\r\n                self.endLoading();\r\n            });\r\n        });\r\n    },\r\n    /*\r\n    *   Creates a json array with key values to send to the server\r\n    */\r\n    submitForm: function (buttonProperties) {\r\n        var self = this;\r\n        var defer = $.Deferred();\r\n\r\n        // Check is offline form                \r\n        var isOfflineForm = bizagi.util.isOfflineForm({ context: self });\r\n\r\n        $.when(self.isReadyToSave())\r\n            .done(function () {\r\n                if (isOfflineForm) {\r\n                    self.internalSubmitFormOffline(buttonProperties);\r\n                    return;\r\n                }\r\n                $.when(self.internalSubmitForm(buttonProperties)).done(function () {\r\n                    defer.resolve();\r\n                }).fail(function () {\r\n                    defer.reject(arguments);\r\n                });\r\n\r\n            }).fail(function () {\r\n                self.endLoading();\r\n                bizagi.log(\"The form is not saved, no changes were found\");\r\n                defer.reject();\r\n            });\r\n        return defer.promise();\r\n    },\r\n    checkWidgetsData: function () {\r\n        //\r\n    },\r\n    isComplexGatewayPainted: function () {\r\n        return false;\r\n    },\r\n\r\n    /**\r\n     * Get last action button\r\n     * @returns {*}\r\n     */\r\n    getLastActionButton: function () {\r\n        var self = this;\r\n        return self.lastActionButton;\r\n    },\r\n\r\n    /**\r\n     * Internal - Creates a json array with key values to send to the database\r\n     * @param {} buttonProperties \r\n     * @returns {} \r\n     */\r\n    internalSubmitFormOffline: function (buttonProperties) {\r\n        var self = this;\r\n        var message = \"\";\r\n        var data;\r\n\r\n        // Check is offline form                \r\n        var isOfflineForm = bizagi.util.isOfflineForm({ context: self });\r\n\r\n        if (isOfflineForm && (self.properties && !self.properties.idPageCache)) {\r\n            self.properties.idPageCache = \"\";\r\n        }\r\n\r\n        // Fill data hash\r\n        if (buttonProperties.submitData || buttonProperties.executeRule) {\r\n            // Collect data\r\n            data = self.collectRenderValuesForSubmit();\r\n        }\r\n\r\n        if (self.transitions) {\r\n            var transitions = [];\r\n            $.each(this.activeTransitions, function (key, value) {\r\n                (value) ? transitions.push(key) : \"\";\r\n            });\r\n\r\n            if (bizagi.util.countProps(transitions) == 0) {\r\n                bizagi.showMessageBox(bizagi.localization.getResource(\"render-widget-complexgateway-path\"),\r\n                    bizagi.localization.getResource(\"render-widget-complexgateway-error\"), \"info\", false);\r\n                self.endLoading();\r\n                return \"\";\r\n            }\r\n        }\r\n\r\n        $.when(self.dataService.submitData({\r\n            action: buttonProperties.action,\r\n            data: data,\r\n            xpathContext: self.properties.xpathContext,\r\n            idPageCache: self.properties.idPageCache,\r\n            prepare: true,\r\n            transitions: transitions || \"\",\r\n            idCase: self.params.idCase,\r\n            idWorkitem: self.params.idWorkitem,\r\n            isOfflineForm: isOfflineForm || false\r\n        })).done(function (responses) {\r\n\r\n            if (!self.postProcessButton(responses, buttonProperties)) {\r\n                return;\r\n            }\r\n\r\n            if (buttonProperties.routing) {\r\n                self.triggerHandler(\"routing\", {\r\n                    offlineAction: buttonProperties.action,\r\n                    idCase: self.params.idCase,\r\n                    idWorkitem: self.params.idWorkitem\r\n                });\r\n\r\n                $(document).trigger(\"tryPushData.offline\");\r\n            } else {\r\n                message = bizagi.util.isValidResource(\"workportal-mobile-offline-form-successful\")\r\n                    ? bizagi.localization.getResource(\"workportal-mobile-offline-form-successful\")\r\n                    : \"Saved\";\r\n\r\n                bizagi.util.showNotification({ text: message, type: \"success\" });\r\n            }\r\n\r\n        }).fail(function (error) {\r\n            message = bizagi.util.isValidResource(\"workportal-mobile-offline-successful-fail\")\r\n                ? bizagi.localization.getResource(\"workportal-mobile-offline-successful-fail\")\r\n                : \"Not saved\";\r\n\r\n            bizagi.util.showNotification({ text: message, type: \"error\" });\r\n        });\r\n    },\r\n\r\n    /*\r\n    *   Internal - Creates a json array with key values to send to the server\r\n    */\r\n    internalSubmitForm: function (buttonProperties) {\r\n        var self = this;\r\n        var defer = $.Deferred();\r\n        var data;\r\n\r\n        // Fill data hash\r\n        if (buttonProperties.submitData || buttonProperties.executeRule || buttonProperties.createnewcase) {\r\n            // Collect data\r\n            data = self.collectRenderValuesForSubmit();\r\n        }\r\n\r\n        // Start asynchronous operation\r\n        $.when(self.startLoading()).done(function () {\r\n            $('html, body').animate({ scrollTop: $('.ui-bizagi-loading-icon') }, 'slow');\r\n        });\r\n\r\n        var submitDataAction = null, executeButtonAction = null, performAction = null, checkpointAction = null, commitAction = null;\r\n\r\n        // Prepare actions\r\n        if (buttonProperties.executeRule) {  // When the button has to execute any rule (MUST SUBMIT DATA BEFORE ALWAYS)\r\n            \r\n            submitDataAction = self.dataService.submitData({\r\n                action: \"SUBMITDATA\",\r\n                data: data,\r\n                xpathContext: self.properties.xpathContext,\r\n                idPageCache: self.properties.idPageCache,\r\n                prepare: true\r\n            });\r\n            submitDataAction.tag = \"submitData\";\r\n\r\n            checkpointAction = self.prepareCheckpointAction(buttonProperties.id);\r\n\r\n            // Reset data because when an execute rule operation has been performed, it saved already all the data\r\n            data = {};\r\n            executeButtonAction = self.dataService.executeButton({\r\n                idRender: buttonProperties.id,\r\n                xpathContext: self.properties.xpathContext || \"\",\r\n                idPageCache: self.properties.idPageCache,\r\n                prepare: true\r\n            });\r\n            executeButtonAction.tag = \"executeRule\";\r\n\r\n            commitAction = self.prepareCommitAction(buttonProperties.id);\r\n        }\r\n\r\n        if (buttonProperties.next || buttonProperties.back || buttonProperties.save || buttonProperties.createnewcase){\r\n            // Verify transitions\r\n            if (self.transitions) {\r\n                var transitions = [];\r\n                $.each(this.activeTransitions, function (key, value) {\r\n                    (value) ? transitions.push(key) : \"\";\r\n                });\r\n\r\n                if (bizagi.util.countProps(transitions) == 0) {\r\n                    bizagi.showMessageBox(bizagi.localization.getResource(\"render-widget-complexgateway-path\"), bizagi\r\n                        .localization.getResource(\"render-widget-complexgateway-error\"), \"info\", false);\r\n                    self.endLoading();\r\n                    defer.reject();\r\n                    return defer.promise();\r\n                }\r\n            }\r\n\r\n            performAction = self.dataService.submitData({\r\n                action: buttonProperties.action,\r\n                forcePlanCompletion: buttonProperties.forcePlanCompletion,\r\n                data: data,\r\n                xpathContext: self.properties.xpathContext,\r\n                idPageCache: self.properties.idPageCache,\r\n                prepare: true,\r\n                transitions: transitions || \"\",\r\n                contexttype: self.properties.contextType,\r\n                surrogatekey: self.properties.surrogateKey\r\n            });\r\n            performAction.tag = \"performAction\";\r\n        }\r\n\r\n        // Assemble the actions\r\n        var actions = [];\r\n\r\n        if (executeButtonAction) {\r\n            actions.push(submitDataAction);\r\n            actions.push(checkpointAction);\r\n            actions.push(executeButtonAction);\r\n            actions.push(commitAction);\r\n        }\r\n\r\n        if (performAction) {\r\n            actions.push(performAction);\r\n        }\r\n\r\n        // Execute the batch\r\n        bizagi.chrono.initAndStart(\"submitForm-ajax\");\r\n\r\n\r\n        //Evaluate if there are deferreds to evaluate, like inline add in grid, that must send a ADDRELATIONWITHDATA before to savedata\r\n        var flowControlDeferred = new $.Deferred();\r\n        if(data && data.deferreds){\r\n            $.when.apply(this, data.deferreds)\r\n                .done(function(response){\r\n                    flowControlDeferred.resolve(response);\r\n                })\r\n                .fail(function(){\r\n                    flowControlDeferred.reject();\r\n                    console.log(\"Error: It was not possible resolve async actions on form \")\r\n                })\r\n        }else{\r\n            flowControlDeferred.resolve();\r\n        }\r\n\r\n        $.when(flowControlDeferred).done(function(){\r\n           $.when(self.dataService.multiaction().execute({ actions: actions })).done(function (responses) {\r\n            bizagi.chrono.stop(\"submitForm-ajax\");\r\n            // End asynchronous operation\r\n            self.endLoading();\r\n            // Find validations\r\n            var bHasValidations;\r\n            $.each(responses, function (i, response) {\r\n                if (response.result.type == \"validationMessages\") {\r\n                    // Something went wrong, we gotta display messages in notifications grid\r\n                    self.addValidationMessage(response.result.messages);\r\n                    bHasValidations = true;\r\n                }\r\n            });\r\n\r\n            if (!bHasValidations) {\r\n                // Everything went ok .. succesfully response from the server\r\n                if (!self.postProcessButton(responses, buttonProperties)) {\r\n                    return;\r\n                }\r\n\r\n                // After successfully response refresh the form\r\n                if (buttonProperties.refresh) {\r\n                    self.refreshForm();\r\n                }\r\n\r\n                // If needs routing publish an event\r\n                if (buttonProperties.routing) {\r\n                    self.triggerHandler(\"routing\", {\r\n                        idCase: self.params.idCase\r\n                    });\r\n                }\r\n\r\n                // Create case\r\n                if (buttonProperties.createnewcase) {\r\n                    if (responses.length > 0) {\r\n                        self.triggerHandler(\"routing\", {\r\n                            idCase: responses[0].result.IdCase,\r\n                            caseNumber: responses[0].result.CaseNumber\r\n                        });\r\n                    }\r\n                }\r\n            }\r\n            else {\r\n                if (buttonProperties.executeRule) {\r\n                    self.sendRollbackAction(buttonProperties.id);\r\n                }\r\n            }\r\n            defer.resolve();\r\n        }).fail(function (_, _, response) {\r\n            if (buttonProperties.executeRule) {\r\n                self.sendRollbackAction(buttonProperties.id);\r\n            }\r\n\r\n            if (response && response.error && (response.error.errorType === \"WaitForCompletionPlanException\" || \r\n                response.error.errorType === \"InvalidPlanStateException\" || response.error.errorType === \"CustomMessageException\")) {\r\n                self.endLoading();\r\n                $.when(bizagi.showConfirmationBox(bizagi.localization.getResource(response.error.message), null, false)).then(function () {\r\n                    return $.when(self.internalSubmitForm($.extend({}, buttonProperties, { forcePlanCompletion: true })));\r\n                }).done(function () {\r\n                    defer.resolve();\r\n                }).fail(function () {\r\n                    defer.reject();\r\n                });\r\n            } else {\r\n                self.failHandler(response);\r\n                defer.reject(response);\r\n            }\r\n        });\r\n        });\r\n        return defer.promise();\r\n    },\r\n\r\n    /*\r\n    *   Add a validation message to the form\r\n    */\r\n    addValidationMessage: function (validationMessage, focus, icon, itemAdditionalClass, autofocus, type) {\r\n        var self = this;\r\n\r\n        if (!self.validationController) {\r\n            self.validationController = new bizagi.command.controllers.validation(self);\r\n        }\r\n\r\n        if (typeof (validationMessage) == \"string\") {\r\n            self.validationController.showValidationMessage(validationMessage, focus, icon, itemAdditionalClass, type);\r\n        } else {\r\n            $.each(validationMessage, function (i, message) {\r\n                self.validationController.showValidationMessage(message, focus, icon, itemAdditionalClass, type);\r\n            });\r\n        }\r\n        self.validationController.expandNotificationBox(autofocus);\r\n    },\r\n    /*\r\n    *   Public method to perform validations externally\r\n    */\r\n    clearValidationMessages: function (params) {\r\n        var self = this;\r\n\r\n        // First hide and clear validation box\r\n        if (self.validationController) {\r\n            self.validationController.clearValidationMessages(params);\r\n        }\r\n\r\n    },\r\n    /*\r\n    *   Add an error message to the form\r\n    */\r\n    addErrorMessage: function (errorMessage) {\r\n        var self = this;\r\n\r\n        self.validationController.showErrorMessage(errorMessage);\r\n        self.validationController.expandNotificationBox();\r\n    },\r\n    /*\r\n    *   Refresh the current form\r\n    */\r\n    refreshForm: function (focus) {\r\n        var self = this;\r\n        var properties = self.properties;\r\n        var deferred = $.Deferred();\r\n\r\n        focus = focus || self.getFocus();\r\n\r\n        // Normalize new focus structure if not present\r\n        if (focus && !focus.id) {\r\n            focus = {\r\n                id: focus\r\n            };\r\n        }\r\n\r\n        var options = {\r\n            idCase: self.params.idCase || \"\",\r\n            idWorkitem: self.params.idWorkitem || \"\",\r\n            idTask: self.params.idTask || \"\",\r\n            focus: focus,\r\n            selectedTabs: self.getSelectedTabs(),\r\n            xpathContext: properties.xpathContext,\r\n            idPageCache: properties.idPageCache,\r\n            isRefresh: true,\r\n            contextType: self.getContextType() || \"\",\r\n            action: self.getEndPointAction(),\r\n            idStartScope: self.properties.idStartScope || \"\"\r\n        };\r\n\r\n        // Notify the refresh event so the consumer takes the decision about what to do\r\n        self.startLoading();\r\n        $.when(self.triggerHandler(\"refresh\", options)).done(function () {\r\n            self.endLoading();\r\n            deferred.resolve();\r\n        }).fail(function () {\r\n            self.endLoading();\r\n            deferred.reject();\r\n        });\r\n        return deferred.promise();\r\n    },\r\n    /*\r\n    *   Get opened tabs configuration\r\n    */\r\n    getSelectedTabs: function () {\r\n        var self = this;\r\n        var tabContainers = self.getElementsByType(\"tab\");\r\n        var tabs = $.map(tabContainers, function (tabContainer) {\r\n            return { tab: tabContainer.properties.id, selected: tabContainer.activeTab };\r\n        });\r\n        var selectedTabs = {};\r\n        for (var i = 0, length = tabs.length; i < length; i++) {\r\n            selectedTabs[tabs[i].tab] = tabs[i].selected;\r\n        }\r\n        return selectedTabs;\r\n    },\r\n    /*\r\n    *   Template method to get the buttons objects\r\n    */\r\n    getButtons: function () {\r\n    },\r\n    /*\r\n    *   Adds an action on the fly to process the submit on change\r\n    */\r\n    addSubmitAction: function (xpath, action) {\r\n        var self = this;\r\n        self.actionController.processInternalSubmitAction(xpath, action);\r\n    },\r\n    /**\r\n    *   Adds an overlay to the form, and sets a waiting message\r\n    *\r\n    *   @argument {bool} delay Apply delay\r\n    */\r\n    startLoading: function () {\r\n        var self = this;\r\n        var waitingTemplate = self.renderFactory.getTemplate(\"form-waiting\");\r\n\r\n        if (self.waitingOverlay && self.waitingMessage)\r\n            return;\r\n\r\n        // This hack is only for desktop\r\n        if (!bizagi.util.isTabletDevice()) {\r\n            // Detect canvas parent with scroll\r\n            var isSharePoint = self.params.context === \"sharepoint\";\r\n            var canvas = self.params.canvas;\r\n            if (isSharePoint) {\r\n                canvas = bizagi.util.scrollTop(canvas);\r\n\r\n                if (!!!canvas.context) {\r\n                    canvas = $(\"body\", $(document));\r\n                }\r\n            } else {\r\n                canvas = $(\"body\", $(document));\r\n            }\r\n\r\n            // Configures overlay\r\n            var size = this.getSize();\r\n            var position = this.getOffset();\r\n            if (size.height == $(window).height()) {\r\n                position.top = 0;\r\n            }\r\n            self.waitingOverlay = $('<div class=\"ui-widget-overlay\" />').appendTo(canvas);\r\n            self.waitingMessage = $.tmpl(waitingTemplate).appendTo(canvas);\r\n            self.waitingOverlay.css({\r\n                \"height\": \"100%\",\r\n                \"width\": \"100%\",\r\n                \"min-height\": size.height,\r\n                \"min-width\": size.width\r\n            });\r\n            self.waitingMessage.css({\r\n                \"top\": (position.top + Math.ceil((size.height - self.waitingMessage.outerHeight()) / 2)) + \"px\",\r\n                \"left\": (Math.ceil((size.width - self.waitingMessage.outerWidth()) / 2)) + \"px\"\r\n            });\r\n            canvas.css(\"position\", \"relative\");\r\n\r\n        } else {\r\n            // Configures overlay\r\n            self.waitingOverlay = $('<div class=\"ui-widget-overlay\" />').appendTo(\"body\", $(document));\r\n            self.waitingMessage = $.tmpl(waitingTemplate).appendTo(\"body\", $(document));\r\n        }\r\n    },\r\n    /*\r\n    *   Removes the overlay and restores the form edition\r\n    */\r\n    endLoading: function () {\r\n        var self = this;\r\n        if (self.waitingOverlay && self.waitingMessage) {\r\n            self.waitingOverlay.remove();\r\n            self.waitingMessage.remove();\r\n            self.waitingOverlay = null;\r\n            self.waitingMessage = null;\r\n\r\n            var canvas = self.params.canvas;\r\n\r\n            if (canvas != undefined)\r\n                canvas.css(\"position\", \"\");\r\n        }\r\n    },\r\n    /*\r\n    *   Get the focused render in the current request\r\n    */\r\n    getFocusedElement: function () {\r\n        var self = this;\r\n        return self.focus;\r\n    },\r\n    /*\r\n    *   Set the focused render in the current request\r\n    */\r\n    setFocusedElement: function (focus) {\r\n        var self = this;\r\n        self.focus = focus;\r\n    },\r\n    /*\r\n    *   Publish a global event that the facade will replicate\r\n    */\r\n    triggerGlobalHandler: function (eventType, data) {\r\n        return this.triggerHandler(\"globalHandler\", { eventType: eventType, data: data });\r\n    },\r\n    /*\r\n    *   Generic handler to attach fail workflow for some operations\r\n    */\r\n    failHandler: function (error) {\r\n        var self = this;\r\n\r\n        // Check if the error is in multiaction format\r\n        try {\r\n            error = JSON.parse(error);\r\n        } catch (e) {\r\n        }\r\n        if (error.length && error.length > 1) error = error[0];\r\n        if (error.error) error = error.error\r\n\r\n        // Handle normal messages\r\n        if (typeof error == \"object\" && error.message) {\r\n            if (error.errorType === \"WaitForCompletionPlanException\" || error.errorType === \"InvalidPlanStateException\" || error.errorType === \"CustomMessageException\") {\r\n                error = bizagi.localization.getResource(error.message);\r\n            }\r\n            else {\r\n                error = error.message;\r\n            }\r\n\r\n        } else if (typeof error == \"string\") {\r\n            // Parse to json\r\n            try {\r\n                var errorJson = JSON.parse(error);\r\n                if (errorJson.errorType === \"WaitForCompletionPlanException\" || errorJson.errorType === \"InvalidPlanStateException\" || error.errorType === \"CustomMessageException\") {\r\n                    errorJson.message = bizagi.localization.getResource(errorJson.message);\r\n                }\r\n                error = errorJson.message;\r\n            } catch (e) {\r\n            }\r\n        }\r\n\r\n        // Workflow engine error, we gotta show it with error\r\n        self.addErrorMessage(error);\r\n        self.endLoading();\r\n    },\r\n    /* \r\n    *   Resizes the element\r\n    */\r\n    resize: function (size) {\r\n        // Just save the size, for reference\r\n        this.setSize(size);\r\n    },\r\n    /*\r\n    *   Sets the internal size for the form\r\n    */\r\n    setSize: function (size) {\r\n        this.size = size;\r\n    },\r\n    /*\r\n    *   Gets the internal size for the form\r\n    */\r\n    getSize: function () {\r\n        if (this.size) {\r\n            return this.size;\r\n        }\r\n        var canvas = (this.params.canvas) ? this.params.canvas : this.getFormContainer().container;\r\n\r\n        var canvasWidth = canvas.width();\r\n        var canvasHeight = canvas.height();\r\n\r\n        return {\r\n            width: canvasWidth,\r\n            height: canvasHeight\r\n        };\r\n    },\r\n    getOffset: function () {\r\n        var canvas = this.getFormContainer().container;\r\n\r\n        return canvas.offset();\r\n    },\r\n    /**\r\n    * This function execute action to save all data of render, but\r\n    * the server service dont execute any rule on the server\r\n    */\r\n    submitData: function (args) {\r\n        var self = this;\r\n\r\n        // Collect data\r\n        var data = self.collectRenderValuesForSubmit();\r\n\r\n        // Check is offline form        \r\n        var isOfflineForm = bizagi.util.isOfflineForm({ context: self });\r\n\r\n        if (isOfflineForm && (self.properties && !self.properties.idPageCache)) {\r\n            self.properties.idPageCache = \"\";\r\n        }\r\n\r\n        // Mark data collected as original values\r\n        $.each(data, function (key, value) {\r\n            var renders = self.getRenders(key);\r\n            $.each(renders, function (i, render) {\r\n                render.updateOriginalValue();\r\n            });\r\n        });\r\n\r\n        // Don't do anything if there is no data\r\n        if ($.isEmptyObject(data)) {\r\n            return;\r\n        }\r\n\r\n        // Call the service\r\n        return $.when(self.dataService.multiaction().submitData({\r\n            action: \"SUBMITDATA\",\r\n            data: data,\r\n            idPageCache: self.properties.idPageCache,\r\n            xpathContext: self.properties.xpathContext,\r\n            contexttype: self.properties.contexttype || \"\"\r\n        })).fail(function (message) {\r\n            message = self.processFailMessage(message);\r\n        });\r\n    },\r\n    /**\r\n    * This function send a request to the server to execute a rule\r\n    */\r\n    executeRule: function (args) {\r\n        var self = this;\r\n        var properties = self.properties;\r\n        var xpathContext = args.xpathContext;\r\n\r\n        if (properties.xpathContext != \"\") {\r\n            // Concat inheritance context\r\n            xpathContext = (xpathContext != \"\") ? properties.xpathContext + \".\" + xpathContext : properties.xpathContext;\r\n        }\r\n\r\n\r\n        // Perform the service\r\n        return $.when(self.dataService.multiaction().executeRule({\r\n            idPageCache: properties.idPageCache,\r\n            rule: args.rule,\r\n            xpathContext: xpathContext,\r\n            contexttype: self.properties.contexttype || \"\"\r\n        })).done(function (message) {\r\n            // Check for validation messages\r\n            self.getFormContainer().clearValidationMessages({ clearOnlyServer: true });\r\n            if (message && message.type == \"validationMessages\") {\r\n                self.getFormContainer().addValidationMessage.apply(self, [message.messages, undefined, undefined, undefined, false, \"serverMessage\"]);\r\n            }\r\n\r\n        }).fail(function (message) {\r\n            message = self.processFailMessage(message);\r\n        });\r\n    },\r\n    /**\r\n    * This function send a request to the server to execute an interface\r\n    */\r\n    executeInterface: function (args) {\r\n        var self = this;\r\n        var properties = self.properties;\r\n        var xpathContext = args.xpathContext;\r\n\r\n        if (properties.xpathContext != \"\") {\r\n            // Concat inheritance context\r\n            xpathContext = (xpathContext != \"\") ? properties.xpathContext + \".\" + xpathContext : properties.xpathContext;\r\n        }\r\n\r\n        // Perform the service\r\n        return $.when(self.dataService.multiaction().executeInterface({\r\n            idPageCache: properties.idPageCache,\r\n            interface: args.interface,\r\n            xpathContext: xpathContext,\r\n            contexttype: self.properties.contexttype || \"\"\r\n        })).done(function (message) {\r\n            // Check for validation messages\r\n            self.getFormContainer().clearValidationMessages();\r\n            if (message && message.type == \"validationMessages\") {\r\n                self.getFormContainer().addValidationMessage(message.messages);\r\n            }\r\n\r\n        }).fail(function (message) {\r\n            message = self.processFailMessage(message);\r\n        });\r\n    },\r\n    executeSAPConnector: function (args) {\r\n        var self = this;\r\n        var properties = self.properties;\r\n        var xpathContext = args.xpathContext;\r\n\r\n        if (properties.xpathContext != \"\") {\r\n            // Concat inheritance context\r\n            xpathContext = (xpathContext != \"\") ? properties.xpathContext + \".\" + xpathContext : properties.xpathContext;\r\n        }\r\n\r\n        // Perform the service\r\n        return $.when(self.dataService.multiaction().executeSAPConnector({\r\n            idPageCache: properties.idPageCache,\r\n            guidsap: args.guidsap,\r\n            xpathContext: xpathContext,\r\n            contexttype: self.properties.contexttype || \"\"\r\n        })).done(function (message) {\r\n            // Check for validation messages\r\n            self.getFormContainer().clearValidationMessages();\r\n            if (message && message.type == \"validationMessages\") {\r\n                self.getFormContainer().addValidationMessage(message.messages);\r\n            }\r\n\r\n        }).fail(function (message) {\r\n            message = self.processFailMessage(message);\r\n        });\r\n\r\n    },\r\n\r\n    executeConnector: function (args) {\r\n        var self = this;\r\n        var properties = self.properties;\r\n        var xpathContext = args.xpathContext;\r\n\r\n        if (properties.xpathContext != \"\") {\r\n            // Concat inheritance context\r\n            xpathContext = (xpathContext != \"\") ? properties.xpathContext + \".\" + xpathContext : properties\r\n                .xpathContext;\r\n        }\r\n\r\n        // Perform the service\r\n        return $.when(self.dataService.multiaction().executeConnector({\r\n            idPageCache: properties.idPageCache,\r\n            guidConnector: args.guidConnector,\r\n            xpathContext: xpathContext,\r\n            contexttype: self.properties.contexttype || \"\"\r\n        })).done(function (message) {\r\n            // Check for validation messages\r\n            self.getFormContainer().clearValidationMessages();\r\n            if (message && message.type == \"validationMessages\") {\r\n                self.getFormContainer().addValidationMessage(message.messages);\r\n            }\r\n\r\n        }).fail(function (message) {\r\n            message = self.processFailMessage(message);\r\n        });\r\n\r\n    },\r\n\r\n    /*\r\n    *   Re-binds pending actions that could not be set because the renders did not exist when the form loaded\r\n    */\r\n    refreshActions: function (actions) {\r\n        var self = this;\r\n        self.actionController.refreshActions(actions);\r\n    },\r\n    /*\r\n    *   Re-binds pending actions that could not be set because the renders did not exist when the form loaded\r\n    */\r\n    removeActions: function () {\r\n        var self = this;\r\n        self.actionController.unbindActions();\r\n    },\r\n    /*\r\n    *   Iterate through all renders and collect the data to send, then update original values for each render\r\n    */\r\n    collectRenderValuesForSubmit: function (data) {\r\n        var self = this;\r\n        data = data || {};\r\n\r\n        // Collect data\r\n        self.collectRenderValues(data);\r\n\r\n        // Mark data collected as original values\r\n        $.each(data, function (key, value) {\r\n            var renders = self.getRenders(key);\r\n            $.each(renders, function (i, render) {\r\n                render.updateOriginalValue();\r\n            });\r\n        });\r\n\r\n        return data;\r\n    },\r\n\r\n    /**\r\n    *\r\n    * @param params {data, bRefreshForm,properties}\r\n    * @returns {*}\r\n    */\r\n    internalSubmitOnChange: function (params) {\r\n        params = params || {};\r\n        var self = this, idCase;\r\n        var properties = params.properties;\r\n        // var form = self.getFormContainer();\r\n        var defer = new $.Deferred();\r\n        var data = params.data || {};\r\n        var bRefreshForm = typeof (params.bRefreshForm) != \"undefined\" ? params.bRefreshForm : true;\r\n        var notCollect = params.notCollect ? params.notCollect : undefined;\r\n\r\n        // Collect data\r\n        if (!(notCollect && !$.isEmptyObject(data))) {\r\n            self.collectRenderValuesForSubmit(data);\r\n        }\r\n        self.startLoading();\r\n\r\n        //idCase = self.getCacheIdCase();\r\n\r\n        var deferredsToWait = null;\r\n        if (data.deferreds) {\r\n            deferredsToWait = $.when.apply($, data.deferreds);\r\n            delete data.deferreds;\r\n        }\r\n\r\n        $.when(deferredsToWait).then(function () {\r\n            // Submit the form\r\n            self.dataService.submitData({\r\n                action: \"SUBMITONCHANGE\",\r\n                data: data,\r\n                idRender: properties.id,\r\n                xpath: properties.xpath,\r\n                xpathContext: self.properties.xpathContext,\r\n                idPageCache: properties.idPageCache,\r\n                contexttype: properties.contexttype\r\n            }).done(function (response) {\r\n                // Cancel previous multiactions and process property value\r\n                self.cancelPreviousRequest();\r\n                // After successfully response refresh the form\r\n                self.endLoading();\r\n                // If response message has error in validation, do not refresh the form\r\n                // and show validation message\r\n                if (response && response.type == \"validationMessages\") {\r\n                    if (typeof self.clearValidationMessages == \"function\") {\r\n                        self.clearValidationMessages();\r\n                    }\r\n\r\n                    self.addValidationMessage(response.messages);\r\n                    defer.resolve();\r\n                } else if (bRefreshForm) {\r\n                    var focusIdentifier = {\r\n                        id: properties.id,\r\n                        xpath: properties.xpath\r\n                    };\r\n                    if (properties.idCase !== undefined) {\r\n                        $.extend(focusIdentifier, {\r\n                            idCaseObject: bizagi.cache.idCaseObject\r\n                        });\r\n                    }\r\n                    if (response.IdScope) {\r\n                        self.properties.idStartScope = response.IdScope;\r\n                    }\r\n                    $.when(self.refreshForm(focusIdentifier)).done(function () {\r\n                        defer.resolve();\r\n                    }).fail(function () {\r\n                        defer.resolve();\r\n                    });\r\n                } else {\r\n                    defer.resolve();\r\n                }\r\n            }).fail(function (message) {\r\n                self.endLoading();\r\n                var objMessage = JSON.parse((typeof message == 'object' && message.responseText) ? message.responseText : {}) || {};\r\n                var strMessage = objMessage.message || message;\r\n                // Clear previous validations\r\n                self.validationController.clearValidationMessages();\r\n                if (objMessage.type == \"alert\") {\r\n                    self.validationController.showAlertMessage(strMessage);\r\n                } else {\r\n                    self.validationController.showErrorMessage(strMessage);\r\n                }\r\n                defer.resolve();\r\n            });\r\n        });\r\n\r\n        return defer.promise();\r\n    },\r\n\r\n    cancelPreviousRequest: function () {\r\n        if (bizagi.multiactionConnection && bizagi.multiactionConnection.length) {\r\n            var length = bizagi.multiactionConnection.length;\r\n            var i = 0, connection;\r\n            for (; i < length; i++) {\r\n                connection = bizagi.multiactionConnection.pop();\r\n                if (connection && connection.abort) {\r\n                    bizagi.showErrorAlertDialog = false;\r\n                    connection.abort();\r\n                }\r\n            }\r\n        }\r\n    },\r\n\r\n    prepareCheckpointAction: function (buttonId) {\r\n        var self = this;\r\n\r\n        checkpointAction = self.dataService.sendCheckpoint({\r\n            url: self.properties.checkpointUrl,\r\n            idRender: buttonId,\r\n            xpath: \"\",\r\n            xpathContext: self.properties.xpathContext,\r\n            idPageCache: self.properties.idPageCache,\r\n            prepare: true\r\n        });\r\n\r\n        checkpointAction.tag = \"checkpoint\";\r\n\r\n        return checkpointAction;\r\n    },\r\n\r\n    prepareCommitAction: function (buttonId) {\r\n        var self = this;\r\n\r\n        var commitAction = self.dataService.commitLinkForm({\r\n            url: self.properties.commitUrl,\r\n            idRender: buttonId,\r\n            xpath: \"\",\r\n            xpathContext: self.properties.xpathContext,\r\n            idPageCache: self.properties.idPageCache,\r\n            prepare: true\r\n        });\r\n\r\n        commitAction.tag = \"commit\";\r\n\r\n        return commitAction;\r\n    },\r\n\r\n    sendRollbackAction: function (buttonId) {\r\n        var self = this;\r\n\r\n        self.dataService.rollbackLinkForm({\r\n            url: self.properties.rollbackUrl,\r\n            idRender: buttonId,\r\n            xpath: \"\",\r\n            xpathContext: self.properties.xpathContext,\r\n            idPageCache: self.properties.idPageCache\r\n        });\r\n    },\r\n\r\n    dispose: function () {\r\n        var self = this;\r\n        self.endLoading();\r\n\r\n        setTimeout(function () {\r\n            if (self.params) {\r\n                delete self.params.canvas;\r\n            }\r\n            delete self.params;\r\n            delete self.control;\r\n            if (self.validationController) {\r\n                self.unbind(\"rendervalidate\");\r\n                delete self.validationController;\r\n            }\r\n\r\n            if (self.actionController) {\r\n                self.actionController.unbindActions();\r\n                delete self.actionController;\r\n            }\r\n        }, bizagi.override.disposeTime || 50);\r\n\r\n        // Call base\r\n        self._super();\r\n    },\r\n    getButton: function (guid) {\r\n        var self = this;\r\n        return $(\".ui-bizagi-button[data-id='\" + guid + \"']\", self.container);\r\n    }\r\n});\r\n","/*\r\n*   Name: BizAgi Accordion Container Class\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will define a accordion container class for all devices\r\n*/\r\n\r\n$.Class.extend(\"bizagi.rendering.accordion\", {}, {\r\n\r\n    /*\r\n    *   Constructor\r\n    */\r\n    initializeData: function (params) {\r\n        var self = this;\r\n\r\n        // Call base\r\n        this._super(params);\r\n\r\n        // Enumerate the children appending a property\r\n        $.each(self.children, function (i, child) {\r\n            child.properties.ordinal = i;\r\n        });\r\n    },\r\n\r\n\r\n    /*\r\n    *   Render the container layout\r\n    */\r\n    renderContainer: function () {\r\n        var self = this;\r\n        var properties = self.properties;\r\n        var template = self.renderFactory.getTemplate(\"accordion\");\r\n\r\n        // Render the accordion\r\n        var html = $.fasttmpl(template, {\r\n            uniqueId: properties.uniqueId\r\n        });\r\n\r\n        // Render children\r\n        html = self.replaceChildrenHtml(html, self.renderChildrenHtml());\r\n        return html;\r\n    }\r\n\r\n});\r\n","/*\r\n*   Name: BizAgi Accordion Item Container Class\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will define a accordion item class for all devices\r\n*/\r\n\r\n$.Class.extend(\"bizagi.rendering.accordionItem\", {}, {\r\n\r\n    /*\r\n    *   Render the container layout\r\n    */\r\n    renderContainer: function () {\r\n        var self = this;\r\n        var properties = this.properties;\r\n        var template = self.renderFactory.getTemplate(\"accordionItem\");\r\n\r\n        // Render the accordionItem\r\n        var html = $.fasttmpl(template, {\r\n            id: properties.id,\r\n            ordinal: properties.ordinal,\r\n            displayName: properties.displayName,\r\n            orientation: properties.orientation,\r\n            uniqueId: properties.uniqueId\r\n        });\r\n\r\n        // Render children\r\n        html = self.replaceChildrenHtml(html, self.renderChildrenHtml());\r\n        return html;\r\n    },\r\n\r\n    /*\r\n    *   Fires when the accordionItem is selected \r\n    */\r\n    activate: function () {\r\n        var self = this;\r\n        self.active = true;\r\n    },\r\n\r\n    /*  \r\n    *   Return the current focuses container\r\n    */\r\n    getFocus: function () {\r\n        var self = this;\r\n        var focus = self._super();\r\n        if (bizagi.util.isEmpty(focus) && self.active) {\r\n            focus = self.properties.id;\r\n        }\r\n\r\n        return focus;\r\n    }\r\n\r\n\r\n});\r\n\r\n","/*\r\n*   Name: Bizagi Render CollectionNavigator\r\n*   Author: UI Forms Team\r\n*   Comments:\r\n*   -   This script will define basic stuff for collection navigator renders\r\n*/\r\n\r\n$.Class.extend(\"bizagi.rendering.collectionnavigator\", {}, {\r\n\r\n    initializeData: function (params) {\r\n        var self = this;\r\n\r\n        self._super(params);\r\n\r\n        var properties = self.properties;\r\n        properties.allowAdd = (typeof properties.allowAdd != \"undefined\") ? bizagi.util.parseBoolean(properties.allowAdd) : true;\r\n        properties.withAddForm = properties.withAddForm && properties.allowAdd;\r\n        properties.allowEdit = (typeof properties.allowEdit != \"undefined\") ? bizagi.util.parseBoolean(properties.allowEdit) : true;\r\n        properties.withEditForm = properties.withEditForm && properties.allowEdit;\r\n        properties.allowDetail = (typeof properties.allowDetail != \"undefined\") ? bizagi.util.parseBoolean(properties.allowDetail) : false;\r\n        properties.inlineAdd = (typeof properties.inlineAdd != \"undefined\") ? bizagi.util.parseBoolean(properties.inlineAdd) : true;\r\n        properties.inlineAdd = properties.inlineAdd && properties.allowAdd;\r\n        properties.inlineEdit = (typeof properties.inlineEdit != \"undefined\") ? bizagi.util.parseBoolean(properties.inlineEdit) : true;\r\n        properties.inlineEdit = properties.inlineEdit && properties.allowEdit;\r\n        properties.allowDelete = (typeof properties.allowDelete != \"undefined\") ? bizagi.util.parseBoolean(properties.allowDelete) : true;\r\n\r\n        self.orientation = self.properties.orientation || \"ltr\",\r\n        self.data = self.properties.data;\r\n        self.keys = self.data ? self.getKeys(self.data.rows) : [];\r\n        self.pointer = 0;\r\n        self.totalRows = 0;\r\n        self.inlineAddRecords = [];\r\n\r\n        if (self.data) {\r\n            self.totalRows = self.data.rows.length;\r\n        }\r\n    },\r\n    /*\r\n    * Normalize keys\r\n    */\r\n    getKeys: function (rows) {\r\n        rows = rows || [];\r\n        var keys = [];\r\n\r\n        for (var i = 0, l = rows.length; i < l; i++) {\r\n            var row = rows[i];\r\n            keys.push(row[0]);\r\n        }\r\n        return keys;\r\n    },\r\n\r\n    /*\r\n    *   Render the control\r\n    */\r\n    renderControl: function () {\r\n        var self = this;\r\n        var properties = this.properties;\r\n        var templateItem = \"collectionnavigator\";\r\n        var template = self.renderFactory.getTemplate(templateItem);\r\n        var mode = self.getMode();\r\n\r\n        // Render the container\r\n        var html = $.fasttmpl(template, {\r\n            uniqueId: properties.uniqueId,\r\n            displayName: properties.displayName ? properties.displayName : \"\",\r\n            id: properties.id,\r\n            guid: properties.guid,\r\n            showPreview: self.showPreview(),\r\n            mode: mode,\r\n            orientation: self.getFormContainer().properties.orientation\r\n        });\r\n\r\n        html = self.drawControls(html);\r\n\r\n        return html;\r\n    },\r\n\r\n    /*\r\n    * Render version readonly of control\r\n    */\r\n    renderReadOnly: function () {        \r\n        return this.renderControl();\r\n    },\r\n\r\n    /*\r\n    * Draw navigation controls\r\n    */\r\n    drawControls: function (html) {\r\n\r\n    },\r\n\r\n    /*\r\n    *  render several actions in the navigation palete\r\n    *  ex. save, cancel \r\n    */\r\n    drawActions: function (controls) {\r\n\r\n    },\r\n\r\n    /*\r\n    * Render navigation controls (next, previous, last, first. etc )\r\n    */\r\n    drawControl: function (controls) {\r\n\r\n    },\r\n\r\n    /*\r\n    * Draw forms options (add form, edit form, navigation form)\r\n    */\r\n    drawForms: function (controls) {\r\n\r\n    },\r\n\r\n    /*\r\n    * Draw a preview views, it will be show when the collection hasn't records\r\n    */\r\n    drawPreview: function () {\r\n        var self = this;\r\n        var mode = self.getMode();\r\n        var templateItem = (mode === \"execution\") ? \"collectionnavigator-execution\" : \"collectionnavigator-preview\";\r\n        var template = self.renderFactory.getTemplate(templateItem);\r\n        var html = $.tmpl(template);\r\n\r\n        self.canvas.append(html);\r\n\r\n    },\r\n\r\n    /*\r\n    * Returns true if the collection has data\r\n    */\r\n    hasData: function () {        \r\n        return this.getTotalRows() > 0;\r\n    },\r\n\r\n    /*\r\n    * Returns the key of current row\r\n    */\r\n    getRow: function () {        \r\n        return this.keys[this.pointer];\r\n    },\r\n\r\n    /*\r\n    * Returns the key of next row\r\n    */\r\n    getNextRow: function () {\r\n        var self = this;\r\n\r\n        if (self.getTotalRows() > (self.pointer + 1))\r\n            self.pointer += 1;\r\n\r\n        return self.getRow();\r\n    },\r\n\r\n    /*\r\n    * Returns the key of previous row\r\n    */\r\n    getPreviousRow: function() {\r\n        var self = this;\r\n\r\n        if (self.pointer > 0)\r\n            self.pointer -= 1;\r\n\r\n        return self.getRow();\r\n    },\r\n\r\n    /*\r\n    * Returns the key of first row\r\n    */\r\n    getFirstRow: function () {\r\n        var self = this;\r\n\r\n        self.pointer = 0;\r\n        return self.getRow();\r\n    },\r\n\r\n    /*\r\n    * Returns the key of last row\r\n    */\r\n    getLastRow: function () {\r\n        var self = this;\r\n\r\n        self.pointer = self.keys.length - 1;\r\n        return self.getRow();\r\n    },\r\n\r\n    /*\r\n    * Returns the total numbers of rows in collection\r\n    */\r\n    getTotalRows: function () {        \r\n        return this.keys.length;\r\n    },\r\n\r\n    getIndexes: function () {        \r\n        return this.properties.data.rows;\r\n    },\r\n\r\n    /*\r\n    * Sets the pointer to a specific position\r\n    */\r\n    setPointer: function (index) {        \r\n        this.pointer = index - 1;\r\n    },\r\n\r\n    /*\r\n    * Returns true is there is a inline row pending to save\r\n    */\r\n    isTherePendingInlineRow: function() {\r\n        return this.inlineAddRecords.length > 0;\r\n    },\r\n\r\n    /*\r\n    * Adds new row to collection\r\n    */\r\n    addKey: function (newId) {        \r\n        this.keys.push(newId);\r\n    },\r\n\r\n    /*\r\n    * Removes row in collection\r\n    */\r\n    removeKey: function () {\r\n        var self = this;\r\n        var index = self.pointer;\r\n\r\n        if (index >= 0) {\r\n            self.keys.splice(index, 1);\r\n\r\n            var totalRows = self.getTotalRows();\r\n            if (totalRows > 0 && index >= totalRows) {\r\n                self.setPointer(totalRows);\r\n            }\r\n        }\r\n    },\r\n\r\n    /*\r\n    * Returns true if the control should show the preview view\r\n    * ex. if the collection is empty \r\n    */\r\n    showPreview: function () {\r\n        var self = this;\r\n        var mode = self.getMode();\r\n        var properties = self.properties;\r\n\r\n        if (mode == \"execution\") {\r\n            return !self.hasData();\r\n        } else {\r\n            return !bizagi.util.parseBoolean(properties.navigationform);\r\n        }\r\n    },\r\n\r\n    /*\r\n    * Returns the parameters needed for the request\r\n    */\r\n    getParameters: function (params) {\r\n        var self = this;\r\n\r\n        var parameters = {};\r\n        var properties = self.properties;\r\n        var recordXpath = properties.xpath + \"[id=\" + params.id + \"]\";\r\n\r\n        parameters.idRender = properties.id;\r\n        parameters.recordXPath = recordXpath;\r\n        parameters.xpathContext = properties.xpathContext;\r\n        parameters.idPageCache = properties.idPageCache;\r\n        parameters.requestedForm = params.requestedForm;\r\n        parameters.contextType = properties.contextType || properties.contexttype;\r\n        parameters.url = params.url;\r\n        parameters.editable = params.editable;\r\n        orientation: properties.orientation || \"ltr\";\r\n\r\n\r\n        return parameters;\r\n    },\r\n\r\n    /*\r\n    *   Submits a collection navigator add record request\r\n    *   Returns a deferred when done, the server returns an id for the new record\r\n    */\r\n    submitAddRequest: function () {\r\n        var self = this;\r\n        var properties = self.properties;\r\n\r\n        var request = self.dataService.addGridRecord({\r\n            url: properties.addUrl,\r\n            idRender: properties.id,\r\n            xpath: properties.xpath,\r\n            xpathContext: properties.xpathContext,\r\n            contexttype: properties.contextType || properties.contexttype,\r\n            idPageCache: properties.idPageCache,\r\n            orientation: properties.orientation || \"ltr\"\r\n        });\r\n\r\n        var filterResponse = request.pipe(function (data) {\r\n            // Parses response\r\n            return data.idEntity;\r\n        });\r\n\r\n        return filterResponse.promise();\r\n    },\r\n\r\n    /*\r\n    *   Submits a edit record request for the given id \r\n    *   Returns a deferred\r\n    */\r\n    submitEditRequest: function (id) {\r\n        var self = this;\r\n        var properties = self.properties;\r\n        var xpath = properties.xpath + \"[id=\" + id + \"]\";\r\n\r\n        return self.dataService.editGridRecord({\r\n            url: properties.editUrl,\r\n            idRender: properties.id,\r\n            xpath: xpath,\r\n            xpathContext: properties.xpathContext,\r\n            idPageCache: properties.idPageCache,\r\n            contexttype: properties.contextType || properties.contexttype || '',\r\n            orientation: properties.orientation || \"ltr\"\r\n        });\r\n    },\r\n\r\n    /*\r\n    *   Submits a collection delete record request for the given id \r\n    *   Returns a deferred\r\n    */\r\n    submitDeleteRequest: function (id) {\r\n        var self = this;\r\n        var properties = self.properties;\r\n        var xpath = properties.xpath + \"[id=\" + id + \"]\";\r\n\r\n        return self.dataService.deleteGridRecord({\r\n            url: properties.deleteUrl,\r\n            idRender: properties.id,\r\n            xpath: xpath,\r\n            xpathContext: properties.xpathContext,\r\n            idPageCache: properties.idPageCache,\r\n            contexttype: properties.contextType || properties.contexttype\r\n        }).pipe(function (data) {\r\n            if (data.type == \"validationMessages\") {\r\n                var form = self.getFormContainer();\r\n                var message = data.messages.join(\" \");\r\n                form.failHandler({ message: message });\r\n            }\r\n\r\n            return data;\r\n        });\r\n    },\r\n\r\n    /*\r\n    *   Submits a collection navigator edit record request for the given id \r\n    *   Returns a deferred\r\n    */\r\n    submitSaveRequest: function (id, data) {\r\n        var self = this;\r\n        var properties = self.properties;\r\n        var defer = $.Deferred();\r\n\r\n        // Calculate xpath context\r\n        var xpathContext = properties.xpathContext.length > 0 ? properties.xpathContext + \".\" + properties.xpath + \"[id=\" + id + \"]\" : properties.xpath + \"[id=\" + id + \"]\";\r\n\r\n        var deferredsToWait = null;\r\n        if (data.deferreds) {\r\n            deferredsToWait = $.when.apply($, data.deferreds);\r\n            delete data.deferreds;\r\n        }\r\n\r\n        $.when(deferredsToWait).then(function() {\r\n\r\n            self.dataService.saveGridRecord({\r\n                url: properties.saveUrl,\r\n                idRender: properties.id,\r\n                xpath: properties.xpath,\r\n                xpathContext: xpathContext,\r\n                contexttype: properties.contextType || properties.contexttype || \"\",\r\n                submitData: data\r\n            }).done(function(response) {\r\n                defer.resolve(response);\r\n            }).fail(function (dataFail) {\r\n                var form = self.getFormContainer();\r\n                var message = (dataFail.responseText) ? dataFail.responseText : ((typeof dataFail == \"string\") ? dataFail : dataFail.toString());\r\n                //Convert String to object\r\n                if (typeof message == \"string\") {\r\n                    try {\r\n                        message = JSON.parse(message).message;\r\n                    } catch (e) {\r\n                        message = message.match(/\"message\":(.*)\",/)[0];\r\n                        message = message.substr(11, message.length - 13);\r\n                    }\r\n    \r\n                } else if (!message.message) {\r\n                    message = dataFail;\r\n                }\r\n                form.validateForm();\r\n                form.clearValidationMessages();\r\n                form.addValidationMessage(message);\r\n            });\r\n\r\n        });\r\n\r\n        return defer.promise();\r\n    },\r\n\r\n    /*\r\n    *   Submits a collection navigator rollback request\r\n    *   Returns a deferred when done\r\n    */\r\n    submitRollbackRequest: function (error) {\r\n        var self = this;\r\n        var properties = self.properties;\r\n\r\n        return self.dataService.rollbackGridAction({\r\n            url: properties.rollbackUrl,\r\n            idRender: properties.id,\r\n            xpath: properties.xpath,\r\n            xpathContext: properties.xpathContext,\r\n            idPageCache: error.idPageCache,\r\n            contexttype: self.properties.contexttype || \"\"\r\n        });\r\n    },\r\n    /*\r\n    *   Fetch the data into a deferred\r\n    */\r\n    getRemoteData: function (params) {\r\n        var self = this;\r\n        var properties = self.properties;\r\n\r\n        // Set params\r\n        params = params || {};\r\n        $.extend(params, {\r\n            url: properties.dataUrl,\r\n            xpath: properties.xpath,\r\n            idRender: properties.id,\r\n            xpathContext: properties.xpathContext,\r\n            contexttype: properties.contextType || properties.contexttype,\r\n            idPageCache: properties.idPageCache\r\n\r\n        });\r\n\r\n        return self.dataService.getData(params);\r\n    },\r\n\r\n    isValid: function (invalidElements) {\r\n        var form = this.form;\r\n\r\n        if (typeof (form) !== \"undefined\") {\r\n            (form.children || []).forEach(function (child) {\r\n                if (child.properties.visible) {\r\n                    if (child.getElementType() == bizagi.rendering.element.ELEMENT_TYPE_CONTAINER) {\r\n                        // Go though container\r\n                        child.isValid(invalidElements);\r\n\r\n                    } else if (child.getElementType() == bizagi.rendering.element.ELEMENT_TYPE_RENDER) {\r\n                        // Go to the render\r\n                        if (!child.isValid(invalidElements)) {\r\n                            var content = invalidElements[invalidElements.length - 1];\r\n                            invalidElements[invalidElements.length - 1] = $.extend(content, {\r\n                                id: child.properties.id\r\n                            });\r\n                        }\r\n                    }\r\n                }\r\n            });\r\n        }\r\n\r\n        return invalidElements.length === 0;\r\n    },\r\n\r\n    validateControls: function(invalidElements) {\r\n        if (!this.form) return false;\r\n        return this.form.validationController.performValidations(invalidElements);\r\n    }\r\n\r\n});","/*\r\n*   Name: Bizagi Group Container Class\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will define a group container class for all devices\r\n*/\r\n\r\n$.Class.extend(\"bizagi.rendering.group\", {}, {\r\n\r\n    /*\r\n    *   Constructor\r\n    */\r\n    initializeData: function (params) {\r\n        var self = this;\r\n\r\n        // Call base\r\n        self._super(params);\r\n\r\n        // Default properties\r\n        var properties = self.properties;\r\n\r\n        properties.helpText = properties.helpText || properties.displayName;\r\n\r\n        // Extend css property \r\n        properties.cssclass = properties.cssclass || \"cssClassContainer\";\r\n\r\n        properties.collapse = (typeof properties.collapse != \"undefined\" && bizagi.util.parseBoolean(properties.collapse)) ? true : false;\r\n    },\r\n\r\n    /*\r\n    *   Render the container layout\r\n    */\r\n    renderContainer: function () {\r\n        var self = this;\r\n        var properties = this.properties;\r\n        var template = self.renderFactory.getTemplate(\"group\");\r\n\r\n        // Define icons\r\n        self.expandedIcon = self.getExpandedIcon();\r\n        self.collapsedIcon = self.getCollapsedIcon();\r\n\r\n        // Render the panel\r\n        var html = $.fasttmpl(template, {\r\n            expandedClassIcon: self.expandedIcon,\r\n            displayName: properties.displayName,\r\n            editable: properties.editable,\r\n            orientation: properties.orientation,\r\n            uniqueId: properties.uniqueId,\r\n            collapse: properties.collapse,\r\n            isDesign: (self.getMode() !== \"execution\"),            \r\n            messageValidation: properties.messageValidation,\r\n            cssclass: properties.cssclass,\r\n            guid: properties.guid\r\n        });\r\n\r\n        // Render children\r\n        html = self.replaceChildrenHtml(html, self.renderChildrenHtml());\r\n        return html;\r\n    },\r\n\r\n    /*\r\n    *   Returns the expanded icon\r\n    */\r\n    getExpandedIcon: function () { },\r\n\r\n    /*\r\n    *   Returns the collapsed icon\r\n    */\r\n    getCollapsedIcon: function () { },\r\n\r\n    /* \r\n    *   Expands or collapse the container \r\n    */\r\n    toogleContainer: function (argument, bImmediate) { }\r\n\r\n});","/*\r\n*   Name: BizAgi Group Container Class\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will define a group container class for all devices\r\n*/\r\n\r\n$.Class.extend(\"bizagi.rendering.mobilegroup\", {}, {\r\n\r\n    /*\r\n    *   Constructor\r\n    */\r\n    initializeData: function (params) {\r\n        var self = this;\r\n\r\n        // Call base\r\n        this._super(params);\r\n\r\n        // Default properties\r\n        var properties = self.properties;\r\n        properties.helpText = properties.helpText || properties.displayName;\r\n\r\n        // Extend css property \r\n        properties.cssclass = properties.cssclass || \"cssClassContainer\";\r\n\r\n        properties.collapse = (typeof properties.collapse != \"undefined\" && bizagi.util.parseBoolean(properties.collapse)) ? true : false;\r\n    },\r\n\r\n    /*\r\n    *   Render the container layout\r\n    */\r\n    renderContainer: function () {\r\n        var self = this;\r\n        var properties = this.properties;\r\n        var template = self.renderFactory.getTemplate(\"group\");\r\n\r\n        // Define icons\r\n        self.expandedIcon = self.getExpandedIcon();\r\n        self.collapsedIcon = self.getCollapsedIcon();\r\n\r\n        // Render the panel\r\n        var html = $.fasttmpl(template, {\r\n            expandedClassIcon: self.expandedIcon,\r\n            displayName: properties.displayName,\r\n            editable: properties.editable,\r\n            orientation: properties.orientation,\r\n            uniqueId: properties.uniqueId,\r\n            collapse: properties.collapse,\r\n            isDesign: (self.getMode() === \"design\"),\r\n            messageValidation: properties.messageValidation,\r\n            cssclass: properties.cssclass,\r\n            guid: properties.guid\r\n        });\r\n\r\n        // Render children\r\n        html = self.replaceChildrenHtml(html, self.renderChildrenHtml());\r\n        return html;\r\n    },\r\n\r\n    /*\r\n    *   Returns the expanded icon\r\n    */\r\n    getExpandedIcon: function () { },\r\n\r\n    /*\r\n    *   Returns the collapsed icon\r\n    */\r\n    getCollapsedIcon: function () { },\r\n\r\n    /* \r\n    *   Expands or collapse the container \r\n    */\r\n    toogleContainer: function (argument, bImmediate) { }\r\n\r\n});","/*\r\n*   Name: BizAgi Horizontal Container Class\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will define a tab item class for all devices\r\n*/\r\n\r\n\r\n$.Class.extend(\"bizagi.rendering.horizontal\", {}, {\r\n\r\n    /*\r\n    *   Render the container layout\r\n    */\r\n    renderContainer: function () {\r\n        var self = this;\r\n        var properties = this.properties;\r\n        var template = self.renderFactory.getTemplate(\"horizontal\");\r\n\r\n        // Render the container\r\n        var html = $.fasttmpl(template, {\r\n            uniqueId: properties.uniqueId\r\n        });\r\n\r\n        // Render children\r\n        html = self.replaceChildrenHtml(html, self.renderChildrenHtml());\r\n        return html;\r\n    }\r\n\r\n});\r\n","/*\r\n*   Name: Bizagi Panel Container Class\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will define a panel container class for all devices\r\n*/\r\n\r\n$.Class.extend(\"bizagi.rendering.panel\", {}, {\r\n\r\n    /*\r\n    *   Constructor\r\n    */\r\n    initializeData: function(params) {\r\n        var self = this;\r\n\r\n        // Call base\r\n        self._super(params);\r\n\r\n        // Override properties\r\n        var properties = self.properties;\r\n        properties.displayName = properties.displayName || \"\";\r\n    },\r\n\r\n\r\n    /*\r\n    *   Render the container layout\r\n    */\r\n    renderContainer: function() {\r\n        var self = this;\r\n        var properties = this.properties;\r\n        var template = self.renderFactory.getTemplate(\"panel\");\r\n\r\n        // Render the panel\r\n        var html = $.fasttmpl(template, {\r\n            displayName: properties.displayName,\r\n            loading: properties.loading,\r\n            message: properties.message,\r\n            orientation: properties.orientation,\r\n            uniqueId: properties.uniqueId,\r\n            cssClass: properties.cssclass\r\n        });\r\n\r\n        // Render children\r\n        html = self.replaceChildrenHtml(html, self.renderChildrenHtml());\r\n        return html;\r\n    },\r\n\r\n    /*\r\n    *   Process the html rendering object\r\n    */\r\n    postRenderContainer: function(panel) {\r\n        var self = this;\r\n        var properties = self.properties;\r\n\r\n        // Set height\r\n        if (properties.height) {\r\n            panel.height(properties.height);\r\n        }\r\n\r\n        // Call base\r\n        self._super(panel);\r\n    }\r\n\r\n});","/*\r\n*   Name: Bizagi Panel Container Class\r\n*   Author: David Romero\r\n*   Comments:\r\n*   -   This script will define a panel container class for all devices\r\n*/\r\n\r\n$.Class.extend(\"bizagi.rendering.contentPanel\", {}, {\r\n\r\n    /*\r\n    *   Constructor\r\n    */\r\n    initializeData: function (params) {\r\n        var self = this;\r\n\r\n        // Call base\r\n        self._super(params);\r\n\r\n        // Override properties\r\n        var properties = self.properties;\r\n        properties.displayName = properties.displayName || \"\";\r\n    },\r\n\r\n\r\n    /*\r\n    *   Render the container layout\r\n    */\r\n    renderContainer: function () {\r\n        var self = this;\r\n        var properties = this.properties;\r\n        var template = self.renderFactory.getTemplate(\"contentPanel\");\r\n\r\n        // Render the panel\r\n        var html = $.fasttmpl(template, {\r\n            displayName: properties.displayName,\r\n            mode: self.getMode(),\r\n            uniqueId: properties.uniqueId,\r\n            isDesign: self.getMode() === \"design\",\r\n            messageValidation: properties.messageValidation,\r\n            cssClass: properties.cssclass,\r\n            guid: properties.guid\r\n        });\r\n\r\n        // Render children\r\n        html = self.replaceChildrenHtml(html, self.renderChildrenHtml());\r\n        return html;\r\n    },\r\n\r\n    /*\r\n    *   Process the html rendering object\r\n    */\r\n    postRenderContainer: function (panel) {\r\n        // Call base\r\n        this._super(panel);\r\n    }\r\n\r\n});","/**\r\n *   Name: Bizagi Panel Container Class\r\n *   Author: Bizagi UI Forms\r\n *   Comments:\r\n *   -   This script will define a panel container class for all devices\r\n */\r\n\r\n$.Class.extend(\"bizagi.rendering.searchForm\", {}, {\r\n\r\n    /*\r\n    *   Render the container layout\r\n    */\r\n    renderContainer: function () {\r\n        var self = this;\r\n        var properties = this.properties;\r\n        var template = self.renderFactory.getTemplate(\"searchForm\");\r\n\r\n        if (properties.contexttype !== \"entity\" && self.parent) {\r\n            properties.contexttype = (typeof self.parent.getContextType == 'function') ? self.parent.getContextType() : \"\";\r\n        }\r\n\r\n        // Render the panel\r\n        var html = $.fasttmpl(template, {\r\n            displayName: properties.displayName,\r\n            uniqueId: properties.uniqueId\r\n        });\r\n\r\n        // Render children\r\n        html = self.replaceChildrenHtml(html, self.renderChildrenHtml());\r\n\r\n        // Render result\r\n        html = html.replaceFirstWithoutPatterns(\"{{result}}\", self.renderResult());\r\n\r\n        return html;\r\n    },\r\n\r\n    /*\r\n    *   Perform a search and render the results\r\n    */\r\n    performSearch: function (searchParams) {\r\n        var properties = this.properties;\r\n\r\n        // Set parameter to search\r\n        properties.searchParams = searchParams;\r\n\r\n        // Submit the search to the server\r\n        this.submitSearch();\r\n    },\r\n\r\n    /*\r\n    *   Submits the query to the server\r\n    */\r\n    submitSearch: function () {\r\n        // Makes the results to update its contents\r\n        this.refreshResults();\r\n    },\r\n\r\n    /*\r\n    *   Returns a promise that will resolve when the element is ready\r\n    */\r\n    ready: function () {\r\n        return this.parent.ready();\r\n    },\r\n\r\n    /*\r\n    *   Method to fill the result data\r\n    *   (THIS IS CALLED WITHIN GRID RENDER SCOPE)\r\n    */\r\n    getRemoteData: function (params) {\r\n        var self = this;\r\n        var properties = self.properties;\r\n        var defer = new $.Deferred();\r\n\r\n        // Collect data\r\n        var data = self.collectSearchValues();\r\n\r\n        if (bizagi.util.isMapEmpty(data)) {\r\n            bizagi.showMessageBox(this.getResource(\"render-search-advanced-no-filters\"), this.getResource(\"render-form-dialog-box-search\"), \"error\");\r\n            return null;\r\n        }\r\n\r\n        params.rows = (properties.searchParams && properties.searchParams.maxRecords && properties.searchParams.maxRecords > 0) ? properties.searchParams.maxRecords : params.rows;\r\n\r\n        // The Grid only support one row per page in smartphone (DRAGON-41733 / QAF-3916)         \r\n        if (properties.searchParams && typeof (properties.searchParams.maxRows) !== \"undefined\") {\r\n            params.rows = properties.searchParams.maxRows || params.rows;\r\n        }\r\n\r\n        // Resolve with remote data\r\n        self.dataService.submitSearch($.extend(params, {\r\n            url: properties.dataUrl,\r\n            idRender: properties.idRender,\r\n            idPageCache: properties.idPageCache,\r\n            idSearchForm: properties.id,\r\n            allowFullSearch: (properties.searchParams.allowFullSearch ? properties.searchParams.allowFullSearch : null),\r\n            maxRecords: (properties.searchParams.maxRecords > 0 ? properties.searchParams.maxRecords : null),\r\n            criteria: data\r\n\r\n        })).done(function (response) {\r\n\r\n            // Resolve with fetched data    \r\n            properties.page = response.page;\r\n            properties.records = response.records;\r\n            properties.totalPages = response.totalPages || 0;\r\n\r\n            //In tablets are allowed about 10000 records as maximum\r\n            if (response.records > 10000) {\r\n                properties.deviceMaxRecordsExceeded = true;\r\n                response.deviceMaxRecordsExceeded = true;\r\n            } else {\r\n                delete properties.deviceMaxRecordsExceeded;\r\n            }\r\n\r\n            defer.resolve(response);\r\n\r\n            // Call virtual method\r\n            self.onSearchFinished();\r\n        }).fail(function (errorObject) {\r\n            bizagi.showErrorAlertDialog = false;\r\n            if (errorObject.responseText) {\r\n                try {\r\n                    var message = JSON.parse(errorObject.responseText).message;\r\n                    bizagi.showMessageBox(message, \"\", \"error\");\r\n                } catch (e) {\r\n                }\r\n            }\r\n            defer.reject();\r\n        });\r\n\r\n        return defer.promise();\r\n    },\r\n\r\n    /*\r\n    *   Iterate through all the renders in the container and fills the hashtable\r\n    *   - Overriden because server needs this in array\r\n    */\r\n    collectSearchValues: function () {\r\n        var self = this;\r\n\r\n        // Collect data\r\n        var data = {};\r\n        this.collectRenderValues(data);\r\n\r\n        // Changes to array\r\n        var submitArray = [];\r\n        for (key in data) {\r\n            var xpath = key;\r\n            var value = data[key];\r\n            var operation = self.getCriteriaOperation(self.getRender(xpath));\r\n            var criteriaData = {};\r\n            if (!bizagi.util.isEmpty(value)) {\r\n                criteriaData[\"xpath\"] = xpath;\r\n                criteriaData[\"value\"] = value;\r\n                criteriaData[\"operation\"] = operation;\r\n                submitArray.push(criteriaData);\r\n            }\r\n        }\r\n\r\n        return submitArray;\r\n    },\r\n\r\n    /*\r\n    *   This method find out the criterial operation to be executed according to\r\n    *   data type. Text renders use LIKE operation, but other data types such like\r\n    *   numerics use exact match operatiors\r\n    */\r\n    getCriteriaOperation: function (render) {\r\n        var self = this;\r\n        var properties = self.properties;\r\n\r\n        var operation = \"EQUALS\";\r\n        if (render.properties.dataType == \"15\") {\r\n            if (typeof render.properties.typeSearch === \"undefined\" || render.properties.typeSearch === \"approx\") {\r\n                if (properties.allowFullSearch) {\r\n                    operation = \"FULLLIKE\";\r\n                } else {\r\n                    operation = \"LIKE\";\r\n                }\r\n            }\r\n        }\r\n        return operation;\r\n    },\r\n\r\n    /*\r\n    *   Render the result controls for the query\r\n    *   Resolved in each device\r\n    */\r\n    renderResult: function () {\r\n    },\r\n\r\n    /*\r\n    *   Refresh the result panel, making it to query data with current criteria\r\n    */\r\n    refreshResults: function () {\r\n    },\r\n\r\n    /*\r\n    *   Function to parse the dataType\r\n    */\r\n    parseAdditionalProperties: function (dataType) {\r\n\r\n        // Number\r\n        if (dataType == 1 || dataType == 2 || dataType == 3 ||\r\n            dataType == 4 || dataType == 6 || dataType == 7 ||\r\n            dataType == 10 || dataType == 11) {\r\n            return {type: \"columnNumber\"};\r\n        }\r\n\r\n        // Oracle Number\r\n        if (dataType == 29) {\r\n            return {type: \"columnNumberScientificNotation\"};\r\n        }\r\n\r\n        // Money\r\n        if (dataType == 8) {\r\n            return {type: \"columnMoney\"};\r\n        }\r\n\r\n        // Date\r\n        if (dataType == 12 || dataType == 13) {\r\n            return {type: \"columnDate\"};\r\n        }\r\n\r\n        // Boolean\r\n        if (dataType == 5) {\r\n            return {type: \"columnBoolean\"};\r\n        }\r\n\r\n        // Text\r\n        return {type: \"columnText\"};\r\n    },\r\n\r\n    /*\r\n    *\r\n    */\r\n    onSearchFinished: function () {\r\n        // Empty function, overrided for Tablet version for now\r\n    }\r\n\r\n\r\n});\r\n\r\n","/*\r\n *   Name: BizAgi Tab Container Class\r\n *   Author: Diego Parra\r\n *   Comments:\r\n *   -   This script will define a tab container class for all devices\r\n */\r\n\r\n$.Class.extend(\"bizagi.rendering.tab\", {}, {\r\n\r\n    /*\r\n     *   Constructor\r\n     */\r\n    initializeData: function(params) {\r\n        var self = this;\r\n\r\n        // Call base\r\n        this._super(params);\r\n\r\n        // Default properties\r\n        var properties = self.properties;\r\n        properties.helpText = properties.helpText || properties.displayName;\r\n\r\n        // Extend css property\r\n        properties.cssclass = properties.cssclass || \"\";\r\n    },\r\n\r\n    /*\r\n     *   Render the container layout\r\n     */\r\n    renderContainer: function() {\r\n        var self = this;\r\n        var properties = this.properties;\r\n        var tabItems = $.map(self.children, function(child, key) {\r\n            child.properties.counter = key;\r\n            child.properties.tooltip =  child.properties.tooltip || child.properties.displayName || \"\";\r\n            return child.properties;\r\n        });\r\n        var template = self.renderFactory.getTemplate(\"tab\");\r\n        var mode = self.getMode();\r\n\r\n        // Render the tab\r\n        var html = $.fasttmpl(template, {\r\n            id: properties.id,\r\n            tabs: tabItems,\r\n            mode: mode,\r\n            isDesign: (self.getMode() !== \"execution\"),\r\n            editable: properties.editable,\r\n            tabOrientation: properties.orientation,\r\n            uniqueId: properties.uniqueId,\r\n            cssclass: properties.cssclass\r\n        });\r\n\r\n        // Get active container based on focus\r\n        var activeTab = self.activeTab = self.getActiveTab();\r\n\r\n        // Render children\r\n        for (var i = 0, length = self.children.length; i < length; i++) {\r\n            // Load on demand other tabs besides the first one\r\n            self.children[i].properties.loadOnDemand = (i != activeTab);\r\n        }\r\n        html = self.replaceChildrenHtml(html, self.renderChildrenHtml());\r\n        return html;\r\n    },\r\n\r\n    /*\r\n     *   Return the active tab containing the focus, or the first tab\r\n     */\r\n    getActiveTab: function() {\r\n        var self = this;\r\n        var properties = self.properties;\r\n        var formParams = this.getFormContainer().getParams();\r\n        var mode = self.getMode();\r\n\r\n        if (mode === \"execution\") {\r\n            if (!formParams.isRefresh && properties.activeTab) {\r\n                self.getFormContainer().setFocusedElement(properties.activeTab);\r\n            }\r\n        }\r\n\r\n        var selectedTabs = formParams && formParams.selectedTabs ? formParams.selectedTabs : {};\r\n\r\n        // Fetch from selected tabs collection\r\n        if (selectedTabs[self.properties.id] >= 0) {\r\n            return selectedTabs[self.properties.id];\r\n        }\r\n\r\n        // Check for focused elements\r\n        for (var i = 0, length = self.children.length; i < length; i++) {\r\n            // Load on demand other tabs besides the first one\r\n            if (self.children[i].containsFocusedElement()) return i;\r\n        }\r\n        return 0;\r\n    },\r\n\r\n    /**\r\n     * Update position of tab\r\n     * @param index\r\n     */\r\n    setActiveTab: function (index) {\r\n        var self = this;\r\n\r\n        self.triggerHandler(\"selected\", { index: index, tab: self.children[index] });\r\n\r\n        if (self.children[index]) {\r\n            var form = self.getFormContainer();\r\n\r\n            self.children[index].activate();\r\n            self.activeTab = index;\r\n\r\n            var selectedTab = {};\r\n            selectedTab[self.children[index].parent.properties.id] = index;\r\n            form.setParam(\"selectedTabs\", selectedTab);\r\n        }\r\n    }\r\n});\r\n","/**\r\n *   Name: Bizagi Tab Item Container Class\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define a tab item class for all devices\r\n */\r\n\r\n$.Class.extend(\"bizagi.rendering.tabItem\", {}, {\r\n\r\n    /*\r\n    *   Render the container layout\r\n    */\r\n    renderContainer: function () {\r\n        var self = this;\r\n        var properties = this.properties;\r\n        var template = self.renderFactory.getTemplate(\"tabItem\");\r\n\r\n        // Render the tabItem\r\n        var html = $.fasttmpl(template, {\r\n            id: properties.id,\r\n            uniqueId: properties.uniqueId,\r\n            counter: properties.counter,\r\n            tabOrientation: properties.orientation,\r\n            isDesign: (self.getMode() !== \"execution\")\r\n        });\r\n\r\n        // Render content\r\n        html = self.renderTabContent(html);\r\n\r\n        return html;\r\n    },\r\n\r\n    /*\r\n    * Renders the tab content\r\n    */\r\n    renderTabContent: function (html) {\r\n        // Render children\r\n        return this.replaceChildrenHtml(html, this.renderChildrenHtml());\r\n    },\r\n\r\n    /*\r\n    *   Fires when the tab is selected \r\n    */\r\n    activate: function () {\r\n        this.active = true;\r\n    },\r\n\r\n    /*  \r\n    *   Return the current focuses container\r\n    */\r\n    getFocus: function () {\r\n        var self = this;\r\n        var focus = self._super();\r\n        if (bizagi.util.isEmpty(focus) && self.active) {\r\n            focus = self.properties.id;\r\n        }\r\n\r\n        return focus;\r\n    },\r\n\r\n    /*\r\n    *   Return true if this tab contains the active focused element\r\n    */\r\n    containsFocusedElement: function () {\r\n        var self = this;\r\n        var focus = self.getFormContainer().getFocusedElement();\r\n\r\n        if (focus) {\r\n\r\n            // Locate element\r\n            if (focus.xpath) {\r\n                // Search by xpath and id\r\n                var elements = self.getFormContainer().getRenders(focus.xpath);\r\n                var element;\r\n\r\n                $.each(elements, function (i, item) {\r\n                    // Just select editable control\r\n                    if (item.properties.id == focus.id && item.properties.editable) {\r\n                        element = item;\r\n                    }\r\n                });\r\n            } else {\r\n                // Search just using id\r\n                var element = self.getFormContainer().getContainer(focus) || self.getFormContainer().getRenderById(focus);\r\n            }\r\n\r\n            // Search element parent\r\n            if (element) {\r\n                while (element.parent) {\r\n                    if (element.properties.id == self.properties.id || element.parent.properties.id == self.properties.id) return true;\r\n                    element = element.parent;\r\n                }\r\n            }\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n});\r\n\r\n","/*\r\n*   Name: BizAgi Nested Form Container Class\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will define a nested form container class for all devices\r\n*/\r\n\r\n$.Class.extend(\"bizagi.rendering.nestedForm\", {}, {\r\n\r\n});","/*\r\n*   Name: BizAgi Render Layout Render Class\r\n*   Author: Andrs Fernando Muoz\r\n*   Comments:\r\n*   -   This script will define a base layout render class with common stuff related to all renders\r\n*/\r\n\r\n$.Class.extend(\"bizagi.rendering.layoutRender\", {}, {\r\n\t/*\r\n\t *   Returns the html templated element\r\n\t */\r\n\trenderElement: function (template) {\r\n\t\tvar self = this;\r\n\t\tvar properties = self.properties;\r\n\t\tvar form = self.getFormContainer();\r\n\t\t// Start rendering deferred\r\n\t\tself.renderingDeferred = new $.Deferred();\r\n\r\n\t\t// Set render template\r\n\t\ttemplate = template || \"render-layout\";\r\n\t\tvar renderTemplate = self.renderFactory.getTemplate(template);\r\n\r\n\t\t// Resolve render label\r\n\t\tvar label = properties.displayName;\r\n\t\tif (typeof label == \"string\") {\r\n\t\t\tlabel = label.replaceAll(\"&\", \"&amp;\");\r\n\t\t\tlabel = label.replaceAll(\"$\", \"&#36;\");\r\n\t\t\tlabel = label.replaceAll(\"<\", \"&lt;\").replaceAll(\">\", \"&gt;\");\r\n\t\t\tlabel = label.replaceAll(\"\\\"\", \"&#34;\").replaceAll(\"'\", \"&#39;\").replaceAll(\"/\", \"&#47;\");\r\n\t\t\tlabel = label.replaceAll(\"\\\\n\", \"<br/>\");\r\n\t\t\tlabel = label.replaceAll(\"\\n\", \"<br/>\");\r\n\t\t}\r\n\r\n\t\t// Render template\r\n\t\tvar html = $.fasttmpl(renderTemplate, {\r\n\t\t\tlabel: label,\r\n\t\t\tisExtendedText: (properties.type == \"text\" && properties.isExtended),\r\n\t\t\torientation: properties.orientation,\r\n\t\t\tuniqueId: properties.uniqueId,\r\n\t\t\tid: properties.id,\r\n\t\t\tisDesign: self.getMode() === \"design\",\r\n\t\t\tmessageValidation: properties.messageValidation,\r\n\t\t\tprintVersion: form.params.printversion,\r\n\t\t\tcssClass: properties.cssclass || \"\",\r\n\t\t\thide: properties.hide\r\n\t\t});\r\n\r\n\t\t// Render internal control html\r\n\t\tvar result = self.internalRenderControl();\r\n\t\tif (!result) {\r\n\t\t\tresult = \"\";\r\n\t\t}\r\n\r\n\t\t// Check if this is an async element or not\r\n\t\tvar async = typeof (result) === \"object\" && result.done;\r\n\t\tif (!async) {\r\n\t\t\thtml = self.replaceControlHtml(html, result);\r\n\r\n\t\t} else {\r\n\t\t\tif (result.state() === \"resolved\") {\r\n\t\t\t\t// Fetch resolved result\r\n\t\t\t\thtml = self.replaceControlHtml(html, self.resolveResult(result));\r\n\t\t\t\tself.asyncRenderDeferred = null;\r\n\t\t\t} else {\r\n\t\t\t\t// Wait for result\r\n\t\t\t\tself.asyncRenderDeferred = result;\r\n\t\t\t\thtml = self.replaceControlHtml(html, \"\");\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn html;\r\n\t},\r\n\r\n    /*\r\n    *   Template method to get the control element\r\n    */\r\n\tgetControl: function () {\r\n\t\tvar self = this;\r\n\t\tif (!self.control || (self.control instanceof jQuery && self.control.length === 0)) {\r\n\t\t\tself.control = self.element;\r\n\t\t}\r\n\t\tif (!self.control || self.control.length == 0) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\treturn self.control;\r\n\t},\r\n\r\n    /*\r\n    * Customizes the font italic style *\r\n    */\r\n\tchangeFontItalic: function (italic) {\r\n\t\tif (bizagi.util.parseBoolean(italic)) {\r\n\t\t\tthis.getControl().css(\"font-style\", \"italic\", \"!important\");\r\n\t\t} else {\r\n\t\t\tthis.getControl().css(\"font-style\", \"normal\", \"!important\");\r\n\t\t}\r\n\t\treturn this;\r\n\t},\r\n\r\n    /*\r\n    * Customizes the font underline\r\n    */\r\n\tchangeFontUnderline: function (underline) {\r\n\t\tvar valueFormat = this.properties.valueFormat || {},\r\n\t\t\tvaluestrikethru = bizagi.util.parseBoolean(valueFormat.strikethru) ? \"line-through \" : \"\";\r\n\r\n\t\tif (bizagi.util.parseBoolean(underline)) {\r\n\t\t\tthis.getControl().css(\"text-decoration\", valuestrikethru + \"underline\", \"!important\");\r\n\t\t} else {\r\n\t\t\tthis.getControl().find(\"*\").each(function (i, element) {\r\n\t\t\t\t$(element).css(\"text-decoration\", valuestrikethru, \"!important\");\r\n\t\t\t});\r\n\t\t}\r\n\t\t\r\n\t\treturn this;\r\n\t}\r\n});","/*\r\n*   Name: BizAgi render layout Image Class\r\n*   Author: Andrs Fernando Muoz\r\n*   Comments:\r\n*   -   This script will define basic stuff for non editable image control inside templates\r\n*/\r\n\r\n$.Class.extend(\"bizagi.rendering.layoutImage\", { }, {\r\n    /*\r\n     * Constructor\r\n     */\r\n    init: function (params) {\r\n        // Call base\r\n        this._super(params);\r\n    },\r\n\r\n    /*\r\n     * Template method to implement in each children to customize each control\r\n     */\r\n    renderControl: function () {\r\n        var self = this,\r\n            mode = self.getMode(),\r\n            useDefaultImage = false,\r\n            valueObj = self.properties.value || {},\r\n            uri= \"\";\r\n\r\n        //\r\n        var templateUri = self.renderFactory.getTemplate(\"layout-image\");\r\n\r\n        //Solucion temporal mientras se ajusta la respuesta del servicio cambiar despues de demo de 21/07/2015\r\n        /*if (value.value && value.value !== \"\" && value.value.length > 100){\r\n            var template64 = self.renderFactory.getTemplate(\"layout-image64\");\r\n            return $.fasttmpl(template64, { url: value.value, useDefaultImage: useDefaultImage });\r\n        }*/\r\n\r\n        /* if (mode === 'execution' && valueObj.value && valueObj.value.length > 0) {\r\n            uri = self.getImageUri();\r\n        }\r\n        else{\r\n            useDefaultImage = true;\r\n        } */\r\n\r\n        return $.fasttmpl(templateUri, {useDefaultImage: true });\r\n    },\r\n\r\n    /**\r\n     * Gets the base 64 image, specify in each device in order to change the size\r\n     */\r\n    getImage64: function () {\r\n        var self = this;\r\n        //Gets the real value of the image\r\n        var params = {\r\n            xpath: self.properties.xpath,\r\n            entity: self.value.guid,\r\n            surrogateKey: self.value.surrogateKey,\r\n            width: 96,\r\n            height: 96\r\n        };\r\n\r\n        return self.dataService.getEntityImage64(params);\r\n    },\r\n\r\n    /**\r\n     * Gets the url to get the array image, specify in each device in order to change the size\r\n     */\r\n    getImageUri: function () {\r\n        var self = this;\r\n\r\n        var map = {\r\n            entity: self.value.guid,\r\n            surrogateKey: self.value.surrogateKey,\r\n            xpath: self.properties.xpath,\r\n            width: 96,\r\n            height: 96,\r\n            hash: self.value.value\r\n        };\r\n\r\n        return self.dataService.serviceLocator.getUrl(\"render-entity-layout-imageByteArray\").replaceMultiple(map);\r\n    }\r\n\r\n});","/*\r\n *   Name: BizAgi Render Layout Simple Link Class\r\n *   Author: Andrs Fernando Muoz\r\n *   Comments:\r\n *   -   This script will define basic stuff for non editable link renders inside templates\r\n */\r\n\r\n$.Class.extend(\"bizagi.rendering.layoutLink\", {}, {\r\n    /*\r\n     * Constructor\r\n     */\r\n    init: function (params) {\r\n        // Call base\r\n        this._super(params);\r\n    },\r\n\r\n    /*\r\n     * Template method to implement in each children to customize each control\r\n     */\r\n    renderControl: function () {\r\n        var self = this;\r\n        var template = self.renderFactory.getTemplate(\"layout-link\");\r\n        // Render template\r\n        var html = $.fasttmpl(template, {displayName: self.properties.displayName});\r\n        return html;\r\n    }\r\n});","/*\r\n *   Name: BizAgi Render Layout Label Class\r\n *   Author: Mauricio Snchez\r\n *   Comments:\r\n *   -   This script will define basic stuff for labels inside templates\r\n */\r\n\r\n$.Class.extend(\"bizagi.rendering.layoutLabel\", {}, {\r\n\r\n    /*\r\n     * Constructor\r\n     */\r\n    init: function (params) {\r\n        // Call base\r\n        this._super(params);\r\n\r\n        this.properties.required = false;\r\n\r\n        // Set properties\r\n        this.properties.displayType = \"label\";\r\n        this.properties.labelAlign = this.originalProperties.labelAlign || \"left\";\r\n\r\n        // Calculate layout properties\r\n        this.calculateInitialLayoutProperties();\r\n\r\n\r\n    },\r\n\r\n    /*\r\n     * Template method to implement in each children to customize each control\r\n     */\r\n    renderControl: function () {\r\n        var self = this;\r\n        var template = self.renderFactory.getTemplate(\"layout-label\");\r\n        var value = self.properties.displayName || self.properties.value || \"\";\r\n        // Render template\r\n        var html = $.fasttmpl(template, {value: value});\r\n        return html;\r\n    }\r\n});\r\n","/*\r\n*   Name: BizAgi Render Layout Text Class\r\n*   Author: Mauricio Sanchez\r\n*   Comments:\r\n*   -   This script will define basic stuff for text renders inside templates\r\n*/\r\n\r\n$.Class.extend(\"bizagi.rendering.layoutText\", {}, {\r\n    /*\r\n     * Constructor\r\n     */\r\n    init: function (params) {\r\n        // Call base\r\n        this._super(params);\r\n    },\r\n\r\n    initializeData: function (data) {\r\n        var self = this;\r\n        // Call base\r\n        this._super(data);\r\n\r\n        // Fill default properties\r\n        var properties = this.properties;\r\n        //properties.editable = false;\r\n    },\r\n\r\n    /*\r\n     * Template method to implement in each children to customize each control\r\n     */\r\n    renderControl: function () {\r\n        var self = this;\r\n        var template = self.renderFactory.getTemplate(\"layout-text\");\r\n        // Render template\r\n        var html = $.fasttmpl(template, {value: self.properties.value,editable: self.properties.editable});\r\n        return html;\r\n    },\r\n    /*\r\n     *   Method to render non editable values\r\n     */\r\n    renderReadOnly: function() {\r\n        var self = this;\r\n        // Executes the same template than normal render\r\n        return self.renderControl();\r\n    }\r\n});","/*\r\n *   Name: BizAgi Render Layout Simple Upload Class\r\n *   Author: Elkin Fernando Siabato Cruz\r\n *   Comments:\r\n *   -   This script will define basic stuff for non editable upload renders inside templates\r\n */\r\n\r\n$.Class.extend(\"bizagi.rendering.layoutUpload\", {\r\n   // Statics\r\n   BA_ACTION_PARAMETER_PREFIX: bizagi.render.services.service.BA_ACTION_PARAMETER_PREFIX,\r\n   BA_CONTEXT_PARAMETER_PREFIX: bizagi.render.services.service.BA_CONTEXT_PARAMETER_PREFIX,\r\n   BA_PAGE_CACHE: bizagi.render.services.service.BA_PAGE_CACHE\r\n}, {\r\n   /**\r\n    * Constructor\r\n    */\r\n   init: function (params) {\r\n      // Call base\r\n      this._super(params);\r\n   },\r\n\r\n   /**\r\n    *   Update or init the element data\r\n    */\r\n   initializeData: function (data) {\r\n      var self = this;\r\n      // Call base\r\n      this._super(data);\r\n\r\n      var form = self.getFormContainer();\r\n\r\n      // Fill default properties\r\n      var properties = this.properties;\r\n\r\n      properties.editable = true;\r\n      properties.allowDelete = true;\r\n\r\n      properties.contexttype = (form.params && form.params.data && form.params.data.contextType) ? form.params.data.contextType : \"\";\r\n      properties.allowSendInMail = properties.allowSendInMail || false;\r\n   },\r\n\r\n   /**\r\n    * Get value files by data\r\n    */\r\n   getValueFilesByData: function(properties){\r\n      var self = this;\r\n      var defer = $.Deferred();\r\n      var dataFiles;\r\n      if (properties.value.value) {//Normal entityTemplate in form QAF-2319\r\n          dataFiles = properties.value.value;\r\n      }\r\n      else {//QAF-2210\r\n          dataFiles = properties.value;\r\n      }\r\n      var valueAuxFiles;\r\n      try{\r\n         if(self.isContextContainerWidgetRender()){\r\n            valueAuxFiles = JSON.parse(\"{ \\\"files\\\": \" + dataFiles  + \"}\");\r\n            defer.resolve(properties, valueAuxFiles);\r\n         }\r\n         else{//context: my stuff\r\n            $.when(self.getDataFilesWithoutScope()).done(function(valueResult){\r\n               valueAuxFiles = JSON.parse(\"{ \\\"files\\\": \" + valueResult  + \"}\");\r\n               defer.resolve(properties, valueAuxFiles);\r\n            });\r\n         }\r\n      }\r\n      catch(err){\r\n         valueAuxFiles = JSON.parse(\"{ \\\"files\\\": []}\");\r\n         defer.resolve(properties, valueAuxFiles);\r\n         console.warn(\"Exception converting data files. Error: \", err);\r\n      }\r\n      return defer.promise();\r\n   },\r\n\r\n   isContextContainerWidgetRender: function(){\r\n      var self = this;\r\n\r\n      var formContainer = self.getFormContainer();\r\n      return formContainer.params.paramsRender && formContainer.params.paramsRender.idRender;\r\n   },\r\n\r\n\r\n   /**\r\n    * Get data files when access from My stuff\r\n    */\r\n   getDataFilesWithoutScope: function(){\r\n      var self = this;\r\n      //Gets the real value of the image\r\n      var params = {\r\n         xpath: self.properties.xpath,\r\n         entity: self.value.guid,\r\n         surrogateKey: self.value.surrogateKey\r\n      };\r\n\r\n      return self.dataService.getFilesDataForLayoutUploadControl(params);\r\n   },\r\n\r\n   /**\r\n    *   Returns the internal value\r\n    */\r\n   getValue: function () {\r\n      return this.files;\r\n   },\r\n\r\n   /**\r\n    *   Returns the xpath to be used\r\n    */\r\n   getUploadXpath: function () {\r\n      return this.properties.xpath;\r\n   }\r\n\r\n});","/*\r\n*   Name: BizAgi Render Layout Boolean Class\r\n*   Author: Alexander Mejia\r\n*   Comments:\r\n*   -   This script will define basic stuff for boolean renders inside templates\r\n*/\r\n\r\n$.Class.extend(\"bizagi.rendering.layoutBoolean\", {}, {\r\n    /*\r\n     * Constructor\r\n     */\r\n    init: function (params) {\r\n        // Call base\r\n        this._super(params);\r\n    },\r\n\r\n    initializeData: function (data) {\r\n        var self = this;\r\n        // Call base\r\n        this._super(data);\r\n\r\n        // Fill default properties\r\n        var properties = this.properties;\r\n        properties.editable = false;\r\n    },\r\n\r\n    /*\r\n     * Template method to implement in each children to customize each control\r\n     */\r\n    renderControl: function () {\r\n        var self = this;\r\n        var template = self.renderFactory.getTemplate(\"layout-boolean\");\r\n        // Render template\r\n        var html = $.fasttmpl(template, {value: this.properties.value});\r\n        return html;\r\n    },\r\n    /*\r\n     *   Method to render non editable values\r\n     */\r\n    renderReadOnly: function() {\r\n        var self = this;\r\n        // Executes the same template than normal render\r\n        return self.renderControl();\r\n    },\r\n\r\n    setValue: function (value, triggerEvents) {\r\n        if(value === null || value === \"\"){\r\n            this.properties.value = \"\";\r\n        }\r\n        else if (value.toString().toLowerCase() === \"true\" || value.toString().toLowerCase() === \"false\"){\r\n            this.properties.value = bizagi.util.parseBoolean(value) ? this.getResource(\"render-boolean-yes\") : this.getResource(\"render-boolean-no\");\r\n        }\r\n        this._super(this.properties.value, triggerEvents);\r\n    }\r\n});","/**\r\n * Name: BizAgi Render Layout DateTime Class\r\n * Author: Andres Fernando Muoz\r\n * Comments:\r\n * - This script will define basic stuff for text renders inside templates\r\n */\r\n\r\n$.Class.extend(\"bizagi.rendering.layoutDateTime\", {}, {\r\n    /**\r\n     * Constructor\r\n     */\r\n    init: function (params) {\r\n        // Call base\r\n        this._super(params);\r\n    },\r\n\r\n    /**\r\n     *\r\n     * @param data\r\n     */\r\n    initializeData: function (data) {\r\n        var self = this;\r\n        // Call base\r\n        self._super(data);\r\n\r\n        // Fill default properties\r\n        var properties = self.properties;\r\n        var dateFormat = self.getResource(\"dateFormat\");\r\n        var timeFormat = self.getResource(\"timeFormat\");\r\n\r\n        // We will hold here the value to display\r\n        properties.displayValue = \"\";\r\n        properties.showTime = properties.showTime !== undefined ? bizagi.util.parseBoolean(properties.showTime) : false;\r\n        properties.dateFormat = properties.dateFormat || dateFormat;\r\n        properties.timeFormat = properties.timeFormat || timeFormat;\r\n        properties.fullFormat = properties.dateFormat;\r\n\r\n        // Check if it has the showtime property\r\n        if (properties.showTime) {\r\n            if (properties.fullFormat.search(/[h|H]+/ig) === -1) {\r\n                properties.fullFormat = properties.fullFormat + ' ' + properties.timeFormat;\r\n            }\r\n        }\r\n        else{\r\n            var indexHour = properties.fullFormat.search(/[h|H]+/ig);\r\n            if (indexHour !== -1) {\r\n                properties.fullFormat = properties.fullFormat.substring(0, indexHour - 1);\r\n            }\r\n        }\r\n\r\n        // Read always parameter from server in invariant format\r\n        if (properties.value) {\r\n            var date = bizagi.util.dateFormatter.getDateFromInvariant(properties.value, properties.showTime);\r\n\r\n            // Format date to current format\r\n            if (date != 0) {\r\n                var datePickerRegional = bizagi.localization.getResource(\"datePickerRegional\");\r\n                self.value = properties.value; // Value must always hold the value with invariant format\r\n                properties.displayValue = bizagi.util.dateFormatter.formatDate(date, properties.fullFormat, datePickerRegional);\r\n            }\r\n            else {\r\n                self.value = null;\r\n            }\r\n        }\r\n        else {\r\n            self.value = null;\r\n            properties.value = \"\";\r\n            properties.displayValue = \"\";\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Template method to implement in each children to customize each control\r\n     */\r\n    renderControl: function () {\r\n        var self = this;\r\n        var template = self.renderFactory.getTemplate(\"layout-date-time\");\r\n        var value = (self.properties.value === null || self.properties.value === \"\") ?  \"\" : self.properties.value;\r\n\r\n        // Render template\r\n        return $.fasttmpl(template, {value: value});\r\n    },\r\n\r\n    /**\r\n     * Sets the value in the rendered control\r\n     */\r\n    setDisplayValue: function (value) {\r\n        var self = this, dateObj;\r\n        var properties = self.properties;\r\n        var dateControl = self.getDateControl();\r\n        var INVARIANT_FORMAT = \"MM/dd/yyyy H:mm:ss\";\r\n        self.i18n = bizagi.localization.getResource(\"datePickerRegional\");\r\n\r\n        if (value.length == INVARIANT_FORMAT.length || value.length == (INVARIANT_FORMAT.length + 1)) {\r\n            dateObj = bizagi.util.dateFormatter.getDateFromInvariant(value, true);\r\n        }\r\n        else {\r\n            dateObj = bizagi.util.dateFormatter.getDateFromInvariant(value);\r\n            if (dateObj && !isNaN(Date.parse(dateObj)) && !$.isNumeric(dateObj)) {\r\n                dateObj.setHours(0, 0, 0, 0);\r\n            }\r\n\r\n        }\r\n        // Set value in input\r\n        if (value && !isNaN(Date.parse(value))) {\r\n            var formattedDateTime = bizagi.util.dateFormatter.formatDate(dateObj, properties.fullFormat, self.i18n);\r\n            dateControl.text(formattedDateTime);\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Gets the date control\r\n     */\r\n    getDateControl: function () {\r\n        var self = this;\r\n        self.dateControl = $(\".ui-bizagi-render-date-time\", self.getControl());\r\n        return self.dateControl;\r\n    }\r\n});","/*\r\n*   Name: BizAgi Render Layout number Class\r\n*   Author: Andres Fernando Muoz\r\n*   Comments:\r\n*   -   This script will define basic stuff for text renders inside templates\r\n*/\r\n\r\n$.Class.extend(\"bizagi.rendering.layoutNumber\", {}, {\r\n    /*\r\n     * Constructor\r\n     */\r\n    init: function (params) {\r\n        // Call base\r\n        this._super(params);\r\n    },\r\n    /*\r\n     *   Update or init the element data\r\n     */\r\n    initializeData: function (data) {\r\n        var self = this;\r\n        // Call base\r\n        this._super(data);\r\n\r\n        // Fill default properties\r\n        var properties = this.properties;\r\n        var format = this.getResource(\"numericFormat\");\r\n\r\n        properties.allowDecimals = typeof (properties.allowDecimals) !== \"undefined\" ? bizagi.util.parseBoolean(properties.allowDecimals) : this.getDefaultAllowDecimals(properties.dataType);\r\n        properties.numDecimals = properties.allowDecimals ? (properties.numDecimals ? properties.numDecimals : (typeof (BIZAGI_DEFAULT_CURRENCY_INFO) !== \"undefined\" ? BIZAGI_DEFAULT_CURRENCY_INFO.decimalDigits : 2)) : 0;\r\n        properties.symbol = '';\r\n        properties.positiveFormat = format.positiveFormat;\r\n        properties.negativeFormat = format.negativeFormat;\r\n        properties.decimalSymbol = typeof (BIZAGI_DEFAULT_CURRENCY_INFO) !== \"undefined\" ? BIZAGI_DEFAULT_CURRENCY_INFO.decimalSeparator : format.decimalSymbol;\r\n        properties.digitGroupSymbol = typeof (BIZAGI_DEFAULT_CURRENCY_INFO) !== \"undefined\" ? BIZAGI_DEFAULT_CURRENCY_INFO.groupSeparator : format.digitGroupSymbol;\r\n        properties.groupDigits = this.getDefaultGroupDigits(properties.dataType);\r\n        properties.colorize = properties.colorizeOnNegative || false;\r\n    },\r\n\r\n    /*\r\n     * Template method to implement in each children to customize each control\r\n     */\r\n    renderControl: function () {\r\n        var self = this;\r\n        var template = self.renderFactory.getTemplate(\"layout-number\");\r\n        // Render template\r\n        var html = $.fasttmpl(template, {value: self.properties.value});\r\n        return html;\r\n    },\r\n    /*\r\n     *   Method to render non editable values\r\n     */\r\n    renderReadOnly: function() {\r\n        var self = this;\r\n        // Executes the same template than normal render\r\n        return self.renderControl();\r\n    },\r\n\r\n    /*\r\n     *   Returns the display value of the render\r\n     */\r\n    getDisplayValue: function (value) {\r\n        var self = this;\r\n        var properties = self.properties;\r\n        var control = self.getControl();\r\n\r\n        // Workaround to get the display value by the format currency plugin, because it requires a control\r\n        var label = $('<label/>').html(value);\r\n        var regExp2 = /[\\u20AC \\u0024\\u00A3]/;\r\n        if (!value.toString().match(regExp2)) {\r\n            label.formatCurrency(\r\n                {\r\n                    symbol: properties.symbol,\r\n                    positiveFormat: properties.positiveFormat,\r\n                    negativeFormat: properties.negativeFormat,\r\n                    decimalSymbol: properties.decimalSymbol,\r\n                    digitGroupSymbol: properties.digitGroupSymbol,\r\n                    groupDigits: properties.groupDigits,\r\n                    roundToDecimalPlace: properties.numDecimals,\r\n                    colorize: properties.colorize\r\n                });\r\n        }\r\n        return label.text();\r\n    },\r\n\r\n    /*\r\n     *   Return the allow decimals default property based on the datatype\r\n     */\r\n    getDefaultAllowDecimals: function (dataType) {\r\n        if (dataType) {\r\n            // Integer data types\r\n            if (dataType == 1 || dataType == 2 || dataType == 3 || dataType == 4 || dataType == 7) {\r\n                return false;\r\n            }\r\n            // Decimal data types\r\n            if (dataType == 6 || dataType == 8 || dataType == 10 || dataType == 11) {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    },\r\n    /*\r\n     *   Return the group digits default property based on the datatype\r\n     */\r\n    getDefaultGroupDigits: function (dataType) {\r\n        if (dataType) {\r\n            // Integer data types\r\n            if (dataType == 1 || dataType == 2 || dataType == 3 || dataType == 4 || dataType == 7) {\r\n                return false;\r\n            }\r\n            // Decimal data types\r\n            if (dataType == 6 || dataType == 8 || dataType == 10 || dataType == 11) {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n});","/*\r\n*   Name: BizAgi Render Layout Money Class\r\n*   Author: Andrs Fernando Muoz\r\n*   Comments:\r\n*   -   This script will define basic stuff for money renders inside templates\r\n*/\r\n\r\n$.Class.extend(\"bizagi.rendering.layoutMoney\", {}, {\r\n    /*\r\n     * Constructor\r\n     */\r\n    init: function (params) {\r\n        // Call base\r\n        this._super(params);\r\n    },\r\n\r\n    /*\r\n     *   Update or init the element data\r\n     */\r\n    initializeData: function (data) {\r\n        var self = this;\r\n        // Call base\r\n        this._super(data);\r\n\r\n        // Fill default properties\r\n        var properties = this.properties;\r\n        var format = this.getResource(\"numericFormat\");\r\n\r\n        // Configures symbol\r\n        properties.showsymbol = typeof (properties.showsymbol) !== \"undefined\" ? properties.showsymbol : true;\r\n\r\n        if (properties.showsymbol) {\r\n            properties.symbol = properties.currencySymbol ? properties.currencySymbol :\r\n                (typeof (BIZAGI_DEFAULT_CURRENCY_INFO) !== \"undefined\" ? BIZAGI_DEFAULT_CURRENCY_INFO.symbol : format.symbol);\r\n        }\r\n        else {\r\n            properties.symbol = \"\";\r\n        }\r\n        properties.groupDigits = true;\r\n    }\r\n});","/*\r\n *   Name: BizAgi Render Layout Label Class\r\n *   Author: Mauricio Snchez\r\n *   Comments:\r\n *   -   This script will define basic stuff for labels inside templates\r\n */\r\n\r\n$.Class.extend(\"bizagi.rendering.layoutPlaceholder\", {}, {\r\n\r\n    /*\r\n     * Constructor\r\n     */\r\n    init: function (params) {\r\n        // Call base\r\n        this._super(params);\r\n                \r\n    },\r\n\r\n    /*\r\n     *   Update or init the element data\r\n     */\r\n    initializeData: function (data) {\r\n        var self = this;\r\n        // Call base\r\n        this._super(data);\r\n\r\n        // Fill default properties\r\n        var properties = this.properties;\r\n             \r\n    },\r\n\r\n    /*\r\n     * Template method to implement in each children to customize each control\r\n     */\r\n    renderControl: function () {\r\n        var self = this;\r\n        var template = self.renderFactory.getTemplate(\"layout-placeholder\");\r\n        var value = self.properties.value || self.properties.displayName || \"\";\r\n        // Render template\r\n        var html = $.fasttmpl(template, {value: value});\r\n        return html;\r\n    }\r\n});\r\n","/**\r\n *   Name: Bizagi Render Combo Class\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define basic stuff for combo renders\r\n */\r\n\r\n$.Class.extend(\"bizagi.rendering.combo\", {}, {\r\n\r\n    /*\r\n    *   Update or init the element data\r\n    */\r\n    initializeData: function (data) {\r\n        var self = this;\r\n\r\n        // Call base\r\n        self._super(data);\r\n\r\n        // Fill default properties\r\n        var properties = this.properties;\r\n\r\n        properties.hasLocalData = properties.data || false;\r\n        // TODO: Review additional value in radio control\r\n        properties.value = properties.value && properties.value.length > 0 ? properties.value[0] : (properties.defaultValue && properties.defaultValue.length > 0 ? properties.defaultValue[0] : null);\r\n\r\n        if (typeof (properties.enableTyping) === \"undefined\") properties.enableTyping = true;\r\n        if (properties.value && properties.value.id === undefined) properties.value = null;\r\n        this.value = properties.value;\r\n\r\n        // Add empty node if configured\r\n        if (properties.hasLocalData) {\r\n            properties.data = this.complementData(properties.data);\r\n        }\r\n\r\n        // This line is to set a flag to fetch the data when rendering, or on demand, by default is false, overriding it on desktop implementation\r\n        properties.loadOnDemand = false;\r\n    },\r\n\r\n\r\n    /*\r\n    *   Template method to implement in each children to customize each control\r\n    */\r\n    renderControl: function () {\r\n        var self = this;\r\n        var params = {};\r\n        var renderType = bizagi.util.normalizeType(self.properties.type);\r\n\r\n        if (self.isDependant && self.properties && /^cascadingcombo$/i.test(renderType) && self.getParentCombo) {\r\n            var valueControl = self.getParentCombo().getValue();\r\n            if (valueControl && valueControl.id) {\r\n                params[self.Class.BA_ACTION_PARAMETER_PREFIX + \"parent\"] = valueControl.id;\r\n            }\r\n        }\r\n\r\n        return self.renderCombo(params);\r\n    },\r\n\r\n    /*\r\n    *   Renders the combo\r\n    */\r\n    renderCombo: function (params) {\r\n        var self = this;\r\n        var properties = self.properties;\r\n\r\n        if (properties.loadOnDemand) {\r\n            // Render the combo without data\r\n            var html = self.renderComboTemplate();\r\n            return html;\r\n        } else {\r\n\r\n            // Set data promise \r\n            var defer = new $.Deferred();\r\n            var dataPromise = self.getData(params);\r\n\r\n            // Attach callback \r\n            $.when(dataPromise).done(function (data) {\r\n                // Render combo\r\n                var html = self.renderComboTemplate(data);\r\n                self.properties.data = data;\r\n                defer.resolve(html);\r\n\r\n            }).fail(function (data) {\r\n                var html = self.renderComboTemplate({});\r\n                defer.resolve(html);\r\n            });\r\n\r\n            // Returns a promise so we can hold post-render method until this is done\r\n            return defer.promise();\r\n        }\r\n    },\r\n\r\n    renderComboTemplate: function (data) {\r\n        var self = this;\r\n        var properties = self.properties;\r\n        var template = self.renderFactory.getTemplate(self.getTemplateName());\r\n        var emptyValue = bizagi.override.emptyLabelForCombo || self.getResource(\"render-combo-empty-selection\");\r\n        var value = properties.value ? \"\" : emptyValue;\r\n        data = data || self.properties.data || {};\r\n\r\n        if (self.properties.type === \"columnCombo\" && value === \"\" && typeof properties.value === \"object\" && properties.value.id === \"\" && (properties.value.value === \"\" || properties.value.value === self.getResource(\"render-combo-empty-value\"))) {\r\n            value = self.getResource(\"render-combo-empty-selection\");\r\n        }\r\n\r\n        var html = $.fasttmpl(template, $.extend(self.getTemplateParams(), {\r\n            id: properties.id,\r\n            xpath: properties.xpath,\r\n            unique: bizagi.util.randomNumber(10000, 1000000),\r\n            idPageCache: properties.idPageCache,\r\n            items: data,\r\n            align: properties.valueAlign,\r\n            value: value,\r\n            editable: properties.editable\r\n        }));\r\n\r\n\r\n        return html;\r\n    },\r\n\r\n\r\n    /*\r\n    *   Template method to implement in each device to customize each render after processed in read-only mode\r\n    */\r\n    postRenderReadOnly: function () {\r\n        var self = this;\r\n        self._super();\r\n        var item = self.getValue();\r\n        var control = self.getControl();\r\n\r\n        if (self.control && self.control.parent()) {\r\n            self.control.parent().addClass(\"ui-bizagi-noneditable-\" + self.properties.displayType);\r\n        }\r\n        if (item) {\r\n\r\n            if (item.value != null && typeof (item.value) === \"boolean\") {\r\n                if (bizagi.util.parseBoolean(item.value) === true) {\r\n                    item.value = this.getResource(\"render-boolean-yes\");\r\n\r\n                } else if (bizagi.util.parseBoolean(item.value) == false) {\r\n                    item.value = this.getResource(\"render-boolean-no\");\r\n                }\r\n            }\r\n\r\n            // Returns the cached value from the properties to avoid server side fetching\r\n            if (self.getResource(\"render-combo-empty-value\") === item.value || self.getResource(\"render-combo-empty-selection\") === item.value) {\r\n                control.text(\"\");\r\n            } else {\r\n                control.html(\"<label class='readonly-control'>\" + self.formatItem(item.value) + \"</label>\");\r\n            }\r\n        } else {\r\n            // Render empty \r\n            control.text(\"\");\r\n        }\r\n    },\r\n\r\n    /*\r\n    *   Gets the template used by the combo render\r\n    *   can be overriden in subclasses to reuse logic and just change the template\r\n    */\r\n    getTemplateName: function () {\r\n        return \"combo\";\r\n    },\r\n\r\n    /*\r\n    *   Determines if we need to show the empty node or not\r\n    *   Can be overriden to change behaviour\r\n    */\r\n    showEmpty: function () {\r\n        return true;\r\n    },\r\n\r\n    /*\r\n    *   Determines if we need to show the current data regardless if it belongs to data or not\r\n    *   Can be overriden to change behaviour\r\n    */\r\n    showCurrentData: function () {\r\n        return true;\r\n    },\r\n\r\n    /*\r\n    *   Fetch the data into a deferred\r\n    */\r\n    getData: function (params) {\r\n        var self = this;\r\n        var properties = self.properties;\r\n        var defer = new $.Deferred();\r\n        var mode = self.getMode();\r\n        var isOfflineForm = bizagi.util.isOfflineForm({context: self});\r\n\r\n        // Just execute ajax calls when rendering in execution mode\r\n        if (mode !== \"execution\") return self.getDummyData();\r\n\r\n        if (properties.hasLocalData || isOfflineForm) {\r\n\r\n            // Resolve with local data    \r\n            defer.resolve(properties.data);\r\n\r\n        } else {\r\n            var renderType = bizagi.util.normalizeType(properties.type);\r\n\r\n            // Check if the data has been cached\r\n            if (properties.remoteDataLoaded && !(/^cascadingcombo$/i.test(renderType))) {\r\n                defer.resolve(properties.data);\r\n            } else {\r\n                // Go to server\r\n                self.dataService.multiaction().getData({\r\n                    url: properties.dataUrl,\r\n                    xpath: properties.xpath,\r\n                    idRender: properties.id,\r\n                    xpathContext: properties.xpathContext,\r\n                    idPageCache: properties.idPageCache,\r\n                    extra: params,\r\n                    contexttype: self.properties.contexttype || null\r\n                }).done(function (data) {\r\n\r\n                    // Resolve the data\r\n                    if (!properties.recalculate) {\r\n                        properties.remoteDataLoaded = true;\r\n                    }\r\n                    properties.data = self.complementData(data);\r\n                    defer.resolve(properties.data);\r\n\r\n                }).fail(function (data) {\r\n\r\n                    var allowActions = true;\r\n                    var form = self.getFormContainer();\r\n\r\n                    if (bizagi.util.isNativeMobileDevice() && typeof (form) !== \"undefined\")\r\n                        allowActions = form.allowOnlineActions();\r\n\r\n                    if (data.type === \"not-processed\" && allowActions)\r\n                        return;\r\n\r\n                    // Show error from server\r\n                    var msgObj = self.properties.displayName + \": \";\r\n\r\n                    if (typeof data === \"string\") {\r\n                        var auxMsg = JSON && JSON.parse(data) || $.parseJSON(data);\r\n                    } else {\r\n                        var auxMsg = data;\r\n                    }\r\n\r\n                    msgObj += auxMsg.message;\r\n\r\n                    form.addValidationMessage(msgObj);\r\n\r\n                    defer.reject(data);\r\n                });\r\n            }\r\n        }\r\n\r\n        return defer.promise();\r\n    },\r\n\r\n    /*\r\n    *   Creates a set of dummy data in order to display it when rendering in design or layout mode\r\n    */\r\n    getDummyData: function () {\r\n        var self = this;\r\n        var properties = self.properties;\r\n        if (properties.data) {\r\n            return properties.data;\r\n\r\n        } else {\r\n            properties.data = [];\r\n            properties.data = self.complementData(properties.data);\r\n\r\n            // Add another data\r\n            properties.data.push({id: \"\", value: \"Item 1\"});\r\n            properties.data.push({id: \"\", value: \"Item 2\"});\r\n\r\n            return properties.data;\r\n        }\r\n    },\r\n\r\n    /*\r\n    *   Resets the data in order to fetch it again when needed\r\n    */\r\n    resetData: function () {\r\n        var self = this;\r\n        var properties = self.properties;\r\n\r\n        properties.hasLocalData = false;\r\n        properties.data = null;\r\n        properties.remoteDataLoaded = false;\r\n    },\r\n\r\n    /* \r\n    *   Gets the display value of the render\r\n    */\r\n    getDisplayValue: function () {\r\n        var self = this;\r\n\r\n        if (self.combo && self.combo.length > 0) {\r\n            // When there is a combo painted, we fetch the selected value from it\r\n            return self.getSelectedValue();\r\n        } else {\r\n            var displayValue = \"\";\r\n            var item = self.getValue();\r\n\r\n            if (item) {\r\n                // Check on cached propert from server first if the key exists\r\n                displayValue = self.formatItem(item.value);\r\n            }\r\n\r\n            return displayValue;\r\n        }\r\n    },\r\n\r\n\r\n    /*\r\n    *   Returns the selected value in the template\r\n    */\r\n    getSelectedValue: function () {\r\n    },\r\n\r\n    /*\r\n    *   Adds custom parameters to process the template\r\n    */\r\n    getTemplateParams: function () {\r\n        return {};\r\n    },\r\n\r\n    /**\r\n     * Formats value of each item\r\n     * @param {string, boolean or array} value\r\n     * @example\r\n     * value = \"string\" => \"string\"\r\n     * value = true => \"yes\" or \"si\", the localized value\r\n     * value = false => \"no\", the localized value\r\n     * value = [\"string 1\", \"string 2\"] => \"string 1 - string 2\"\r\n     * @returns {string}\r\n     */\r\n    formatItem: function (value) {\r\n\r\n        if (value !== undefined && value !== null) {\r\n            if ($.isArray(value)) {\r\n\r\n                for (var i = 0, length = value.length; i < length; i++) {\r\n                    if (value[i] != null && typeof (value[i]) === \"boolean\") {\r\n                        if (bizagi.util.parseBoolean(value[i]) === true) {\r\n                            value[i] = this.getResource(\"render-boolean-yes\");\r\n                        } else if (bizagi.util.parseBoolean(value[i]) === false) {\r\n                            value[i] = this.getResource(\"render-boolean-no\");\r\n                        }\r\n                    }\r\n                }\r\n                return value.join(\" - \");\r\n            } else {\r\n                return value;\r\n            }\r\n        } else {\r\n            return \"\";\r\n        }\r\n    },\r\n\r\n    /*\r\n    *   Add the render data to the given collection in order to send data to the server\r\n    */\r\n    collectData: function (renderValues) {\r\n        var self = this;\r\n        var properties = self.properties;\r\n\r\n        // Add the render value\r\n        var xpath = properties.xpath;\r\n        var value = self.getValue();\r\n\r\n        if (self.controlValueIsChanged()) {\r\n            // Filter by valid xpaths and valid values\r\n            // Remove empty validation for value for combos        \r\n            if (!bizagi.util.isEmpty(xpath) && value !== null && typeof (value) !== \"undefined\") {\r\n                // Add a validation because sometimes value contains an empty not null object\r\n                if (typeof (value) === \"object\" && (value.id === undefined || value.id === \"\")) {\r\n                    renderValues[properties.xpath] = \"\";\r\n                } else {\r\n                    // Add the value to the server\r\n                    renderValues[properties.xpath] = typeof (value.id) !== \"undefined\" ? value.id : \"\";\r\n                }\r\n            }\r\n        }\r\n    },\r\n\r\n    controlValueIsChanged: function () {\r\n        var self = this;\r\n        var properties = self.properties;\r\n        var currentValue = self.getValue();\r\n        var originalValue = properties.originalValue;\r\n        var defaultValue = properties.defaultValue;\r\n\r\n        var result = true;\r\n\r\n        if ($.forceCollectData) {\r\n            return result;\r\n        }\r\n\r\n        currentValue = currentValue && currentValue.length !== undefined ? currentValue[0] : currentValue;\r\n        originalValue = originalValue && originalValue.length !== undefined ? originalValue[0] : originalValue;\r\n        defaultValue = defaultValue && defaultValue.length !== undefined ? defaultValue[0] : defaultValue;\r\n\r\n        currentValue = currentValue && currentValue.id !== undefined ? currentValue.id : currentValue;\r\n        originalValue = originalValue && originalValue.id !== undefined ? originalValue.id : originalValue;\r\n        defaultValue = defaultValue && defaultValue.id !== undefined ? defaultValue.id : defaultValue;\r\n\r\n        if (defaultValue !== undefined) {\r\n            if (defaultValue != originalValue || defaultValue != currentValue) {\r\n                result = true;\r\n            } else {\r\n                result = false;\r\n            }\r\n        } else {\r\n            result = currentValue != originalValue ? true : false;\r\n        }\r\n\r\n        return result;\r\n    },\r\n\r\n    /*\r\n    * Parses additional values info in order to format them correctly\r\n    */\r\n    parseAdditionalValues: function (data) {\r\n        var self = this;\r\n\r\n        return $.map(data, function (item) {\r\n            var value = item.value ? self.formatItem(item.value) : item;\r\n            var newItem = {id: item.id, value: value};\r\n\r\n            if (item.hidden) newItem.hidden = true;\r\n            return item;\r\n        });\r\n    },\r\n\r\n    /*\r\n    *   Complement data from server before control implementation\r\n    */\r\n    complementData: function (data) {\r\n        var self = this;\r\n        var properties = self.properties;\r\n\r\n        var bCurrentDataFound = false;\r\n        $.each(data, function (i, item) {\r\n\r\n            if (item.value !== undefined && item.value !== null) {\r\n                item.value = self.formatItem(item.value);\r\n                if (properties.value) {\r\n                    if (item.id == properties.value.id) {\r\n                        bCurrentDataFound = true;\r\n                    }\r\n                }\r\n            } else {\r\n                item.value = \"\";\r\n            }\r\n        });\r\n\r\n        // Add empty node if configured\r\n        if (self.showEmpty()) {\r\n            var emptyFound = false;\r\n            for (var i = 0, length = data.length; i < length; i++) {\r\n                if (data[i].id === \"\") {\r\n                    emptyFound = true;\r\n                    break;\r\n                }\r\n            }\r\n\r\n            if (!emptyFound) {\r\n                var dataValue = bizagi.override.emptyLabelForCombo || bizagi.localization.getResource(\"render-combo-empty-value\")\r\n                data.unshift({id: \"\", value: dataValue});\r\n            }\r\n        }\r\n\r\n        if (properties.value) {\r\n            if (!bCurrentDataFound && self.showCurrentData()) {\r\n                data.unshift({id: properties.value.id, value: properties.value.value, hidden: true});\r\n            }\r\n        }\r\n\r\n        // Add additional value\r\n        return self.parseAdditionalValues(data);\r\n    },\r\n\r\n    /*\r\n    *   Check if a render has no value for required validation\r\n    */\r\n    hasValue: function () {\r\n        var self = this;\r\n        var currentValue = self.getValue();\r\n\r\n        if (bizagi.util.isEmpty(currentValue)) return false;\r\n        if (Object.prototype.toString.apply(currentValue) === \"[object Object]\" && (bizagi.util.isEmpty(currentValue.id) || currentValue.id == 0)) return false;\r\n\r\n        // Else\r\n        return true;\r\n    },\r\n\r\n    /*\r\n    * Cleans current data\r\n    */\r\n    cleanData: function () {\r\n        var self = this;\r\n        var value = {id: \"\", label: \"\"};\r\n\r\n        self.setDisplayValue(value);\r\n        self.setValue(value, false);\r\n    },\r\n\r\n    beforeToRefresh: function () {\r\n        this.column && !this.column.comboData && this.getData();\r\n    },\r\n\r\n    isExtraItem: function () {\r\n        var self = this;\r\n        var data = self.value || {};\r\n        var value = data.value || \"\";\r\n\r\n        return value === \"\" || value === self.getResource(\"render-combo-empty-selection\") || value === self.getResource(\"render-combo-empty-value\");\r\n    },\r\n\r\n    escapeValue: function (value) {\r\n        if (bizagi.util.isString(value)) {\r\n            var valueToReturn = value.replaceAll(\"<\", \"&lt;\").replaceAll(\">\", \"&gt;\");\r\n            return valueToReturn;\r\n        } else {\r\n            return value;\r\n        }\r\n    },\r\n\r\n    /**\r\n     *  Maps the value, when this one comes from actions\r\n     * @param value\r\n     * @returns {*}\r\n     */\r\n    mapValue: function (value) {\r\n        if (value && value.fromAction) {\r\n            return {\r\n                id: value.value,\r\n                value: value.label,\r\n                label: value.label\r\n            }\r\n        }\r\n\r\n        return value;\r\n    },\r\n\r\n    validateValue: function (value) {\r\n        if ((value.id != undefined) && ((typeof value.id === \"number\" && value.id !== null) || (typeof value.id === \"string\" && value.id.length > 0))) {\r\n            if (value.value !== null && typeof value.value === \"boolean\") {\r\n                translated = true;\r\n                if (bizagi.util.parseBoolean(value.value) === true) {\r\n                    value.value = bizagi.localization.getResource(\"render-boolean-yes\");\r\n                } else if (bizagi.util.parseBoolean(value.value) === false) {\r\n                    value.value = bizagi.localization.getResource(\"render-boolean-no\");\r\n                }\r\n            } else if (value.value != null && typeof value.value === \"object\") {\r\n                for (var i = 0, length = value.value.length; i < length; i++) {\r\n                    if (value.value[i] != null && typeof (value.value[i]) === \"boolean\") {\r\n                        if (bizagi.util.parseBoolean(value.value[i]) === true) {\r\n                            value.value[i] = bizagi.localization.getResource(\"render-boolean-yes\");\r\n                        } else if (bizagi.util.parseBoolean(value.value[i]) === false) {\r\n                            value.value[i] = bizagi.localization.getResource(\"render-boolean-no\");\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        return value;\r\n    },\r\n\r\n    /**\r\n     * Finds an element in the combo data values by id\r\n     * @param {int} id\r\n     * @returns {Object}\r\n     */\r\n    findDataValueById: function (id) {\r\n        return (this.properties.data || []).find(function (e) {\r\n            return e.id == id;\r\n        });\r\n    }\r\n\r\n});","/**\r\n *   Name: Bizagi Render Check Class\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define basic stuff for check renders\r\n */\r\n\r\n$.Class.extend(\"bizagi.rendering.check\", {}, {\r\n\r\n    /**\r\n     * Update or init the element data\r\n     * @param {} data\r\n     */\r\n    initializeData: function (data) {\r\n        // Call base\r\n        this._super(data);\r\n\r\n        // Fill default properties\r\n        var properties = this.properties;\r\n        properties.value = typeof (properties.value) != \"undefined\" ? bizagi.util.parseBoolean(properties.value) : null;\r\n\r\n        properties.showLetters = (bizagi.override && bizagi.override.enableCheck === true) && !properties.editable;\r\n    },\r\n\r\n    /**\r\n     * Template method to implement in each children to customize each control\r\n     */\r\n    renderControl: function () {\r\n        var template = this.renderFactory.getTemplate(\"check\");\r\n        var randomId = bizagi.util.randomNumber(100, 10000000);\r\n\r\n        // Render template\r\n        var html = $.fasttmpl(template, {\r\n            id: randomId,\r\n            editable: this.properties.editable\r\n        });\r\n\r\n        return html;\r\n    },\r\n\r\n    /**\r\n     * Method to render non editable values\r\n     * @returns {*|jQuery}\r\n     */\r\n    renderReadOnly: function () {\r\n        return this.renderControl();\r\n    },\r\n\r\n    /**\r\n     * Template method to implement in each device to customize each render after processed\r\n     */\r\n    postRender: function () {\r\n        // Call base\r\n        this._super();\r\n    },\r\n\r\n    /**\r\n     * Gets the display value of the render\r\n     */\r\n    getDisplayValue: function () {\r\n        var value = this.getValue();\r\n\r\n        if (bizagi.util.parseBoolean(value) === true) {\r\n            return this.getResource(\"render-boolean-yes\");\r\n        } else if (bizagi.util.parseBoolean(value) === false) {\r\n            return this.getResource(\"render-boolean-no\");\r\n        } else {\r\n            return \"\";\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Check if a render has no value for required validation\r\n     */\r\n    hasValue: function () {\r\n        var value = this.getValue();\r\n\r\n        if (bizagi.util.isEmpty(value)) return false;\r\n\r\n        var booleanValue = bizagi.util.parseBoolean(value);\r\n\r\n        return !(booleanValue === false && this.properties.required);\r\n    }\r\n\r\n});","/*\r\n*   Name: Bizagi Render Number Class\r\n*   Author: UI Forms Team\r\n*   Comments:\r\n*   -   This script will define basic stuff for numbers\r\n*/\r\n\r\n$.Class.extend(\"bizagi.rendering.number\", {}, {\r\n\r\n    /**\r\n     * Update or init the element data\r\n     * @param data\r\n     */\r\n    initializeData: function (data) {\r\n        var self = this;\r\n\r\n        // Call base\r\n        self._super(data);\r\n\r\n        // Fill default properties\r\n        var properties = this.properties;\r\n        var format = this.getResource(\"numericFormat\");\r\n\r\n        properties.allowDecimals = (typeof (properties.allowDecimals) !== \"undefined\") ? bizagi.util.parseBoolean(properties.allowDecimals) : this.getDefaultAllowDecimals(properties.dataType);\r\n        properties.numDecimals = properties.allowDecimals ? (properties.numDecimals ? properties.numDecimals : (typeof (BIZAGI_DEFAULT_CURRENCY_INFO) !== \"undefined\" ? BIZAGI_DEFAULT_CURRENCY_INFO.decimalDigits : 2)) : 0;\r\n        properties.symbol = '';\r\n        properties.positiveFormat = format.positiveFormat;\r\n        properties.negativeFormat = format.negativeFormat;\r\n        properties.decimalSymbol = typeof (BIZAGI_DEFAULT_CURRENCY_INFO) !== \"undefined\" ? BIZAGI_DEFAULT_CURRENCY_INFO.decimalSeparator : format.decimalSymbol;\r\n        properties.digitGroupSymbol = typeof (BIZAGI_DEFAULT_CURRENCY_INFO) !== \"undefined\" ? BIZAGI_DEFAULT_CURRENCY_INFO.groupSeparator : format.digitGroupSymbol;\r\n        properties.groupDigits = this.setGroupDigits();\r\n        properties.colorize = properties.colorizeOnNegative || false;\r\n        properties.dataTypeMinValue = this.calculateMinValue(properties.dataType);\r\n        properties.dataTypeMaxValue = this.calculateMaxValue(properties.dataType);\r\n    },\r\n\r\n    /**\r\n     * Template method to implement in each children to customize each control\r\n     * @returns {*|jQuery}\r\n     */\r\n    renderControl: function () {\r\n        var self = this;\r\n        var template = self.renderFactory.getTemplate(\"number\");\r\n\r\n        // Render template\r\n        var html = $.fasttmpl(template, {\r\n            editable: self.properties.editable,\r\n            value: bizagi.isMobile() ? self.getDisplayValue() : \"\", // Only apply to mobile because in the template value is required (Bug: 11624)\r\n            type: bizagi.util.isAndroidDevice() ? \"tel\" : \"text\", // Change type control for android device\r\n            isDesign: self.getMode() !== \"execution\"\r\n        });\r\n\r\n        return html;\r\n    },\r\n\r\n    /**\r\n     * Template method to implement in each device to customize each render after processed\r\n     */\r\n    postRender: function () {\r\n        var self = this;\r\n\r\n        self._super();\r\n\r\n        var control = self.getControl();\r\n        var properties = self.properties;\r\n\r\n        self.numericInput = control.find(\"input\");\r\n\r\n        // Add numeric plugin to avoid invalid keystrokes\r\n        self.numericInput.numeric(self.properties.decimalSymbol);\r\n\r\n        // Attach event for retype double\r\n        if (properties.retype === \"double\") {\r\n            self.attachRetypeDouble();\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Method to customize the render's behaviour to add handlers\r\n     */\r\n    configureHandlers: function () {\r\n        // Attach Format Currency Plugin to format the input\r\n        this.attachFormatCurrency();\r\n    },\r\n\r\n    /**\r\n     * Removes Validation Messages\r\n     */\r\n    removeValidations: function () {\r\n        var form = this.getFormContainer().parent || this.getFormContainer();\r\n\r\n        form.clearValidationMessages();\r\n    },\r\n\r\n    /**\r\n     * Function virtual implements on children (desktop,smartphone...).\r\n     * @returns {}\r\n     */\r\n    attachRetypeDouble: function () {\r\n    },\r\n\r\n    /**\r\n     * Adds the format currency plugin\r\n     * @returns {}\r\n     */\r\n    attachFormatCurrency: function () {\r\n        var self = this;\r\n        var properties = self.properties;\r\n        var message = bizagi.localization.getResource(\"render-number-retype-fail\");\r\n        self.isValidRender = self.isValidRender || true;\r\n\r\n        // Extend formatCurrency language\r\n        if ($.formatCurrency.regions[bizagi.language] == null)\r\n            $.formatCurrency.regions[bizagi.language] = this.getResource(\"numericFormat\");\r\n\r\n        // Attach events\r\n        self.numericInput.blur(function () {\r\n            if (typeof (self.getFormContainer().validationController) == \"undefined\") self.getFormContainer().validationController = new bizagi.command.controllers.validation(self.getFormContainer(), self.validations);\r\n            var validationController = self.getFormContainer().validationController || self.getFormContainer().parent.validationController;\r\n            var decimalSeparator = \".\";\r\n            var digitGroupSeparator = \",\";\r\n            if (typeof (BIZAGI_DEFAULT_CURRENCY_INFO) == \"undefined\") {\r\n                decimalSeparator = self.getResource(\"numericFormat\").decimalSymbol || \".\";\r\n                digitGroupSeparator = self.getResource(\"numericFormat\").digitGroupSymbol || \",\";\r\n            }\r\n            else {\r\n                decimalSeparator = BIZAGI_DEFAULT_CURRENCY_INFO.decimalSeparator;\r\n                digitGroupSeparator = BIZAGI_DEFAULT_CURRENCY_INFO.groupSeparator;\r\n            }\r\n\r\n            var minValue = self.getMinValue();\r\n            var maxValue = self.getMaxValue();\r\n\r\n            if(properties.percentage)self.numericInput.val(self.numericInput.val().replace(\"%\", \"\"));\r\n            var inputValue = self.numericInput.val();\r\n            inputValue = (decimalSeparator == \",\") ? inputValue.replace(/\\,0+$/, '') : inputValue.replace(/\\.0+$/, '');\r\n            inputValue = inputValue.replace(properties.symbol, \"\");\r\n            //Replace all the ocurrences of the digitGroupSeparator\r\n            inputValue = bizagi.util.replaceAll(inputValue, digitGroupSeparator, \"\");\r\n            if (inputValue.toString().indexOf(decimalSeparator) != -1) {\r\n                if (decimalSeparator == \",\") inputValue = inputValue.replace(/([0-9]+(\\,[0-9]+[1-9])?)(\\,?0+$)/, '$1');\r\n                if (decimalSeparator == \".\") inputValue = inputValue.replace(/([0-9]+(\\.[0-9]+[1-9])?)(\\.?0+$)/, '$1');\r\n            }\r\n\r\n            if (inputValue != undefined && inputValue.length > 0) self.numericInput.val(inputValue);\r\n\r\n            if (/(.+)-$/.test(inputValue)) {\r\n                inputValue = inputValue.replace(/(.+)-$/, '-$1');\r\n                self.numericInput.val(inputValue);\r\n            }\r\n\r\n            var inputLength = inputValue.replace(/[^0-9]+/g, \"\").length;\r\n            var xPath = self.properties.xpath;\r\n            var oldVal = self.numericInput.val();\r\n\r\n\r\n            if ((self.isInvalidFormat != null && self.isInvalidFormat == true)\r\n                || (inputValue != \"\" && [\"$\", \"\", \"\", \"\", properties.symbol].indexOf(inputValue) != -1)) {\r\n                self.setValue(\"\");\r\n                self.getControl().find(\"input\").val(\"\");\r\n                self.numericInput.val(\"\");\r\n                return;\r\n            }\r\n\r\n            if (bizagi.util.trim(inputValue) == \"\") {\r\n                self.setValue(\"\");\r\n                return;\r\n            }\r\n\r\n            //The \",\" is changed to \".\" For the correct operation of \"parseFloat ()\"\r\n            var tempValue = parseFloat(inputValue.replace(\",\", \".\"));\r\n            if (isNaN(tempValue)) {\r\n                tempValue = self.numericInput.asNumber();\r\n            }\r\n\r\n            if (minValue !== undefined && minValue != null && tempValue < minValue) {\r\n                message = bizagi.localization.getResource(\"render-numeric-minimum-validation\")\r\n                    .replaceAll(\"#label#\", properties.displayName + \" (\" + oldVal + \")\")\r\n                    .replaceAll(\"#minValue#\", minValue.toString());\r\n            }\r\n            else if (maxValue !== undefined && maxValue !== null && tempValue > maxValue) {\r\n                message = bizagi.localization.getResource(\"render-numeric-maximum-validation\")\r\n                    .replaceAll(\"#label#\", properties.displayName + \" (\" + oldVal + \")\")\r\n                    .replaceAll(\"#maxValue#\", maxValue.toString());\r\n            } else\r\n                message = message + \" \" + oldVal + \"\";\r\n\r\n\r\n            // Do datatype validations\r\n            if (\r\n                (minValue !== undefined && minValue !== null && tempValue < minValue)\r\n                || (maxValue !== undefined && maxValue !== null && tempValue > maxValue)\r\n                || (self.properties.dataType == 10 && inputLength > 15)\r\n                || (self.properties.dataType == 1 && inputLength > 19)\r\n                || (self.properties.dataType == 11 && inputLength > 7)\r\n                || (self.properties.dataType == 11 && inputLength > 7)\r\n                || (oldVal.match(/[^$,-.()\\d]/))\r\n            ) {\r\n                if (typeof validationController != \"undefined\" && validationController != null) {\r\n                    self.removeValidations();\r\n\r\n                    var messageToShow = message;\r\n                    if(messageToShow.indexOf(oldVal) === -1){\r\n                        messageToShow = message + \" \" + oldVal + \"\";\r\n                    }\r\n\r\n                    validationController.showValidationMessage(messageToShow, xPath);\r\n                    self.isValidRender = false;\r\n                    self.isValidRenderMessage = messageToShow;\r\n                }\r\n                message = message.replace(oldVal, \"\");\r\n                return;\r\n            }\r\n            else {\r\n                self.isValidRender = true;\r\n                self.isValidRenderMessage = \"\";\r\n            }\r\n\r\n            // Fix decimals specially when it starts with 0 (0000234 -> 234, 00000 -> 0)\r\n            if (this.value.toString().length > 0 && !properties.allowDecimals && !properties.groupDigits) {\r\n                this.value = this.value.toString().replace(/^0+/, '');\r\n                if (properties.symbol.length > 0) this.value = this.value.toString().replace(properties.symbol + \"0\", properties.symbol);\r\n                this.value = this.value.toString().replace(/^0+/, '');\r\n                if (this.value.replaceAll('0', '').length == 0)\r\n                    this.value = properties.symbol + \"0\";\r\n                else if (this.value.toString() == parseInt(this.value)) this.value = properties.symbol + this.value;\r\n            } else {\r\n                //Fix type money when number start with 0 (0000234 -> 234, 00000 -> 0)\r\n                if(self.properties.type === \"money\" || self.properties.type === \"number\" || self.properties.type === \"columnMoney\" || self.properties.type === \"columnNumber\"){\r\n                    this.value = this.value.toString().replace(/^0+/, '');\r\n                    if(this.value === \"\"){\r\n                        this.value = 0;\r\n                    }\r\n                }\r\n            }\r\n            self.executeFormatCurrencyPlugin();\r\n\r\n            // Updates internal value\r\n            self.setValue(self.numericInput.asNumber({\r\n                symbol: properties.symbol,\r\n                positiveFormat: properties.positiveFormat,\r\n                negativeFormat: properties.negativeFormat,\r\n                decimalSymbol: properties.decimalSymbol,\r\n                digitGroupSymbol: properties.digitGroupSymbol,\r\n                groupDigits: properties.groupDigits\r\n            }));\r\n\r\n            if (properties.percentage) {\r\n                if (self.numericInput && self.numericInput.val().indexOf(\"%\") == -1)\r\n                    self.numericInput.val(self.numericInput.val() + '%');\r\n            }\r\n            message = message.replace(oldVal, \"\");\r\n        })\r\n\r\n        // Avoiding pasting invalid characters\r\n            .bind('paste', function (e) {\r\n                try {\r\n                    var tmpData = (bizagi.util.isIE() || bizagi.util.isIE11()) ? window.clipboardData.getData(\"text\") : e.originalEvent.clipboardData.getData(\"Text\");\r\n\r\n\r\n\r\n                    // Next lines checks if there is something different to numbers symbol, decimalSymbol and digitGroupSybol\r\n                    var totalVal = \"/[^0-9\";\r\n                    if (properties.decimalSymbol.length > 0) {\r\n                        totalVal += properties.decimalSymbol;\r\n                    }\r\n                    // Next lines only for currency type\r\n                    if (properties.dataType == 8) {\r\n                        if (properties.symbol.length > 0) {\r\n                            totalVal += properties.symbol;\r\n                        }\r\n                        if (properties.digitGroupSymbol.length > 0) {\r\n                            totalVal += properties.digitGroupSymbol;\r\n                        }\r\n                    }\r\n                    totalVal += \"\\\\-\\\\s]/gi\";\r\n                    try {\r\n                        if (tmpData.replace(eval(totalVal), '').length != tmpData.length)\r\n                            e.preventDefault();\r\n                    }\r\n                    catch (e) {\r\n                    }\r\n                }\r\n                catch (e) {\r\n                    bizagi.log(\"Error to pasting content\");\r\n                    self.isInvalidFormat = true;\r\n                }\r\n            })\r\n            // Now we implement keydown instead of keyup in order to include preventDefault\r\n            .keydown(function (e) {\r\n                self.previousValue = this.value;\r\n                e = (window.event && window.event.preventDefault) ? window.event : e;\r\n                var keyUnicode = e.charCode || e.keyCode;\r\n                // Validation for currency info\r\n                if (typeof (BIZAGI_DEFAULT_CURRENCY_INFO) != \"undefined\")\r\n                    if (BIZAGI_DEFAULT_CURRENCY_INFO.decimalDigits == 0) properties.allowDecimals = false;\r\n                if (properties.dataType < 5 || (properties.dataType == 8 && properties.allowDecimals == false))\r\n                    if (keyUnicode == 188 || keyUnicode == 190 || keyUnicode == 110)\r\n                        e.preventDefault();\r\n                if (this.value)\r\n                    if (e !== undefined && this.value.length > 0 && (properties.dataType == 8 || properties.dataType == 10)) {\r\n                        // Just numbers\r\n                        if (keyUnicode > 47 && keyUnicode < 58) {\r\n                            if (self.formatTimeout) {\r\n                                clearTimeout(self.formatTimeout);\r\n                            }\r\n\r\n                            var floatPart = this.value + \"\";\r\n                            //var  floatPart = stringPart.replaceAll(properties.digitGroupSymbol, \"\").replaceAll(properties.symbol,\"\").trim().replaceAll(properties.decimalSymbol,\".\");\r\n                            if (properties.digitGroupSymbol && properties.digitGroupSymbol.length > 0) {\r\n                                floatPart = floatPart.replaceAll(properties.digitGroupSymbol, \"\");\r\n                            }\r\n                            if (properties.symbol.length > 0) {\r\n                                floatPart = floatPart.replaceAll(properties.symbol, \"\");\r\n                            }\r\n\r\n                            floatPart = $.trim(floatPart);\r\n                            if (properties.decimalSymbol && properties.decimalSymbol.length > 0) {\r\n                                floatPart = floatPart.replaceAll(properties.decimalSymbol, \".\");\r\n                            }\r\n                            // If increasing one digit (x10) will overtake the maxValue\r\n                            if (floatPart * 10 > properties.dataTypeMaxValue) {\r\n                                e.preventDefault();\r\n                            }\r\n                        }                  \r\n                        else if (keyUnicode == 109 || keyUnicode == 189) {\r\n                            if (this.selectionStart != 0 || this.selectionEnd != this.value.length) {\r\n                                var currentPosition = this.selectionEnd;\r\n                                this.value = properties.symbol + \"-\" + this.value.replace(properties.symbol, \"\");\r\n                                this.selectionStart = this.selectionEnd = currentPosition + 1;\r\n                            } else if (this.selectionStart == 0 && this.selectionEnd == this.value.length) {\r\n                                this.value = \"-\";\r\n                                this.selectionStart = this.selectionEnd = this.value.length;\r\n                            }\r\n                        }\r\n                    }                    \r\n            })\r\n\r\n            .keyup(function (e) {\r\n                e = window.event || e;\r\n                var keyUnicode = e.charCode || e.keyCode;\r\n                if (e !== undefined) {\r\n                    switch (keyUnicode) {\r\n                        case 16:\r\n                            break; // Shift\r\n                        case 17:\r\n                            break; // Ctrl\r\n                        case 13:\r\n                            break; // Intro\r\n                        case 18:\r\n                            break; // Alt\r\n                        case 27:\r\n                            this.value = '';\r\n                            break; // Esc: clear entry\r\n                        case 35:\r\n                            break; // End\r\n                        case 36:\r\n                            break; // Home\r\n                        case 37:\r\n                            break; // cursor left\r\n                        case 38:\r\n                            break; // cursor up\r\n                        case 39:\r\n                            break; // cursor right\r\n                        case 40:\r\n                            break; // cursor down\r\n                        case 78:\r\n                            break; // N (Opera 9.63+ maps the \".\" from the number key section to the \"N\" key too!) (See: http://unixpapa.com/js/key.html search for \". Del\")\r\n                        case 110:\r\n                            break; // . number block (Opera 9.63+ maps the \".\" from the number block to the \"N\" key (78) !!!)\r\n                        case 188:\r\n                            break; // , comma\r\n                        case 190:\r\n                            break; // .\r\n                        default:\r\n                        {\r\n\r\n                        }\r\n                    }\r\n                }                \r\n            }).keypress(function (e) {\r\n            e = (window.event && window.event.preventDefault) ? window.event : e;\r\n            var keyUnicode = e.charCode || e.keyCode;\r\n            if (typeof (e) !== \"undefined\") {\r\n                if (keyUnicode == 35 || keyUnicode == 37 || keyUnicode == 39) {\r\n                    e.preventDefault();\r\n                } else if (properties.dataType != 8 && keyUnicode == 36) {\r\n                    e.preventDefault();\r\n                }\r\n\r\n                // When no decimals are permited\r\n                var character = String.fromCharCode(keyUnicode);\r\n                if (properties.allowDecimals === false && properties.numDecimals === 0 && character === properties.decimalSymbol)\r\n                    e.preventDefault();\r\n            }\r\n        });\r\n\r\n    },\r\n\r\n    executeFormatCurrencyPlugin: function () {\r\n        var self = this;\r\n        var properties = self.properties;\r\n\r\n        if (self.numericInput) {\r\n            self.numericInput.formatCurrency({\r\n                symbol: properties.symbol,\r\n                positiveFormat: properties.positiveFormat,\r\n                negativeFormat: properties.negativeFormat,\r\n                decimalSymbol: properties.decimalSymbol,\r\n                digitGroupSymbol: properties.digitGroupSymbol,\r\n                groupDigits: properties.groupDigits,\r\n                roundToDecimalPlace: properties.numDecimals,\r\n                colorize: properties.colorize\r\n            });\r\n        }\r\n\r\n        if (properties.dataType !== 8 && bizagi.override.removeTrailingZeros === true) {\r\n            var value = self.numericInput.val();\r\n            var positive = true;\r\n\r\n            if (value.indexOf(\")\") !== -1) {\r\n                positive = false;\r\n                value = value.replace(\"(\", \"\").replace(\")\", \"\")\r\n            }\r\n\r\n            var regExp = new RegExp(\"(\" + properties.decimalSymbol + \"\\\\d*?[1-9])0+$\", \"g\");\r\n            value = value.replace(regExp, \"$1\")\r\n\r\n            regExp = new RegExp(\"\\\\\" + properties.decimalSymbol + \"0+$\", \"g\");\r\n            value = value.replace(regExp, \"\");\r\n            self.numericInput.val(value);\r\n\r\n            if (!positive) self.numericInput.val(\"(\" + value + \")\");\r\n        }\r\n\r\n        if (properties.percentage)\r\n            self.numericInput.val(self.numericInput.val() + '%');\r\n    },\r\n\r\n    /**\r\n     * Returns the display value of the render\r\n     * @returns {*}\r\n     */\r\n    getDisplayValue: function () {\r\n        var self = this;\r\n        var properties = self.properties;\r\n        var control = self.getControl();\r\n        var value = self.getValue() !== undefined ? self.getValue() : $(\"input\", control).val() || \"\";\r\n\r\n        // Workaround to get the display value by the format currency plugin, because it requires a control\r\n        var label = $('<label/>').html(value);\r\n\r\n        label.formatCurrency({\r\n            symbol: properties.symbol,\r\n            positiveFormat: properties.positiveFormat,\r\n            negativeFormat: properties.negativeFormat,\r\n            decimalSymbol: properties.decimalSymbol,\r\n            digitGroupSymbol: properties.digitGroupSymbol,\r\n            groupDigits: properties.groupDigits,\r\n            roundToDecimalPlace: properties.numDecimals,\r\n            colorize: properties.colorize\r\n        });\r\n\r\n        if (properties.percentage)\r\n            label = $('<label/>').html(label.text() + '%');\r\n\r\n        // Removing unrequired zeros as requested by BA26331\r\n        if (!properties.editable && properties.dataType !== 8 && bizagi.override.removeTrailingZeros === true) {\r\n            value = label.text();\r\n            var positive = true;\r\n\r\n            if (value.toString().indexOf(\")\") !== -1) {\r\n                positive = false;\r\n                value = value.replace(\"(\", \"\").replace(\")\", \"\");\r\n            }\r\n\r\n            var re = new RegExp(\"(\" + properties.decimalSymbol + \"\\\\d*?[1-9])0+$\", \"g\");\r\n            value = value.replace(re, \"$1\");\r\n\r\n            re = new RegExp(\"\\\\\" + properties.decimalSymbol + \"0+$\", \"g\");\r\n            value = value.replace(re, \"\");\r\n\r\n            if (!positive) value = \"(\" + value + \")\";\r\n            return value;\r\n        }\r\n\r\n        return label.text();\r\n    },\r\n\r\n    /**\r\n     * Public method to determine if a value is valid or not\r\n     * @param invalidElements\r\n     * @returns {*}\r\n     */\r\n    isValid: function (invalidElements) {\r\n        var self = this;\r\n        var properties = self.properties;\r\n\r\n        // Call base\r\n        var bValid = this._super(invalidElements);\r\n        var value = self.getValue();\r\n        var message;\r\n        var minValue = self.getMinValue();\r\n        var maxValue = self.getMaxValue();\r\n\r\n        if (typeof (value) == \"string\" && value != \"\") {\r\n            value = Number(value);\r\n        }\r\n\r\n        // Check min value\r\n        if (self.hasValue()) {\r\n            if (!bizagi.util.isEmpty(minValue)) {\r\n                if (value < minValue) {\r\n                    message = this.getResource(\"render-numeric-minimum-validation\").replaceAll(\"#label#\", properties.displayName.toString() + \" (\" + value + \")\").replaceAll(\"#minValue#\", minValue.toString());\r\n                    invalidElements.push({xpath: properties.xpath, message: message});\r\n                    bValid = false;\r\n                }\r\n            }\r\n            // Check max value\r\n            if (!bizagi.util.isEmpty(maxValue)) {\r\n                if (value > maxValue) {\r\n                    message = this.getResource(\"render-numeric-maximum-validation\").replaceAll(\"#label#\", properties.displayName.toString() + \" (\" + value + \")\").replaceAll(\"#maxValue#\", maxValue.toString());\r\n                    invalidElements.push({xpath: properties.xpath, message: message});\r\n                    bValid = false;\r\n                }\r\n            }\r\n\r\n        }\r\n\r\n        if (self.isValidRender === false && !(bValid && bizagi.util.isMobileDevice())) {\r\n            bValid = false;\r\n            var validMessage = self.isValidRenderMessage ? self.isValidRenderMessage : \"error\";\r\n            invalidElements.push({xpath: properties.xpath, message: validMessage});\r\n        }\r\n\r\n        return bValid;\r\n    },\r\n\r\n    /**\r\n     * Get minimum value\r\n     * @returns {*}\r\n     */\r\n    getMinValue: function () {\r\n        var minValue = this.properties.minValue;\r\n\r\n        if (minValue !== undefined && minValue !== null)\r\n            return minValue;\r\n\r\n        return this.properties.dataTypeMinValue;\r\n    },\r\n\r\n    /**\r\n     * Get maximum value\r\n     * @returns {*}\r\n     */\r\n    getMaxValue: function () {\r\n        var maxValue = this.properties.maxValue;\r\n\r\n        if (maxValue !== undefined && maxValue !== null)\r\n            return maxValue;\r\n\r\n        return this.properties.dataTypeMaxValue;\r\n    },\r\n\r\n    /**\r\n     * Return the allow decimals default property based on the datatype\r\n     * @param dataType\r\n     * @returns {boolean}\r\n     */\r\n    getDefaultAllowDecimals: function (dataType) {\r\n        if (dataType) {\r\n            // Integer data types\r\n            if (dataType === 1 || dataType === 2 || dataType === 3 || dataType === 4 || dataType === 7) {\r\n                return false;\r\n            }\r\n            // Decimal and money data types\r\n            if (dataType === 6 || dataType === 8 || dataType === 10 || dataType === 11) {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    },\r\n    /**\r\n     * Return the group digits default property based on the datatype\r\n     * @param dataType\r\n     * @returns {boolean}\r\n     */\r\n    getDefaultGroupDigits: function (dataType) {\r\n        if (dataType) {\r\n            // Integer data types\r\n            if (dataType === 1 || dataType === 2 || dataType === 3 || dataType === 4 || dataType === 7) {\r\n                return false;\r\n            }\r\n\r\n            // Decimal data types\r\n            if (dataType === 6 || dataType === 8 || dataType === 10 || dataType === 11) {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    },\r\n\r\n    /**\r\n     * Return the group digits default property based on digitGroupSymbol\r\n     * @returns {*}\r\n     */\r\n    setGroupDigits: function () {\r\n        var self = this;\r\n        if (typeof (self.properties.thousands) !== \"undefined\") {\r\n            if (self.properties.digitGroupSymbol) { //some cultures\r\n                return bizagi.util.parseBoolean(self.properties.thousands);\r\n            } else {\r\n                return false;\r\n            }\r\n        } else if (self.properties.digitGroupSymbol) { //some cultures\r\n            return this.getDefaultGroupDigits(self.properties.dataType);\r\n        } else {\r\n            return false;\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Calculate Minimum Value\r\n     * @param dataType\r\n     * @returns {*}\r\n     */\r\n    calculateMinValue: function (dataType) {\r\n        if (dataType === 8 || dataType === 10) {\r\n            return -922337203685477; // Money\r\n        }\r\n        if (dataType === 4) {\r\n            return 0; // tinyint\r\n        }\r\n        if (dataType === 3) {\r\n            return -32768; // smallint\r\n        }\r\n        if (dataType === 2) {\r\n            return -2147483648; // int\r\n        }\r\n        if (dataType === 1) {\r\n            return -999999999999999; // bigint\r\n        }\r\n        return null;\r\n    },\r\n\r\n    /**\r\n     * Calculate Maximum Value\r\n     * @param dataType\r\n     * @returns {*}\r\n     */\r\n    calculateMaxValue: function (dataType) {\r\n        if (dataType === 8 || dataType === 10) {\r\n            return 922337203685477; // Money\r\n        }\r\n        if (dataType === 4) {\r\n            return 255; // tinyint\r\n        }\r\n        if (dataType === 3) {\r\n            return 32767; // smallint\r\n        }\r\n        if (dataType === 2) {\r\n            return 2147483647; // int\r\n        }\r\n        if (dataType === 1) {\r\n            return 999999999999999; // bigint\r\n        }\r\n        return null;\r\n    },\r\n\r\n    changeMinValue: function (value) {\r\n        var self = this;\r\n        var newValue = Number(value);\r\n\r\n        self.properties.minValue = self.properties.dataTypeMinValue = Number.isNaN(newValue) ? self.calculateMinValue(self.properties.dataType) : newValue;\r\n    },\r\n\r\n    changeMaxValue: function (value) {\r\n        var newValue = Number(value);\r\n\r\n        this.properties.maxValue = this.properties.dataTypeMaxValue = Number.isNaN(newValue) ? this.calculateMaxValue(this.properties.dataType) : newValue;\r\n    },\r\n\r\n    createTooltip: function (control, currentValue, currentTitle) {\r\n        control.data(\"oldValue\", currentValue);\r\n        control.val(\"\");\r\n\r\n        try {\r\n            // Destroy tooltips\r\n            control.tooltip(\"destroy\");\r\n        } catch (e) {\r\n        }\r\n\r\n        control.attr(\"title\", currentTitle);\r\n        control.tooltip();\r\n\r\n        var toolTipZindex = $.getMaxZindex();\r\n        control.tooltip().on(\"tooltipopen\", function (event, ui) {\r\n            ui.tooltip.zIndex(toolTipZindex);\r\n        });\r\n\r\n        // Create new tooltip\r\n        control.tooltip(\"open\");\r\n\r\n        setTimeout(function () {\r\n            control.focus();\r\n        }, 100);\r\n    }\r\n});\r\n\r\n","\r\n/*\r\n*   Name: Bizagi Render Number Scientific notation Class\r\n*   Author: Laura Ariza\r\n*   Comments:\r\n*   -   This script will define basic stuff for scientific notation numbers\r\n*/\r\n\r\n$.Class.extend(\"bizagi.rendering.numberScientificNotation\", {\r\n    /*\r\n     *   Update or init the element data\r\n     */\r\n    initializeData: function(data) {\r\n        var self = this;\r\n\r\n        // Call base\r\n        this._super(data);\r\n\r\n        // Fill default properties\r\n        var properties = self.properties;\r\n\r\n        properties.decimalSymbol = typeof (BIZAGI_DEFAULT_CURRENCY_INFO) !== \"undefined\"\r\n            ? BIZAGI_DEFAULT_CURRENCY_INFO.decimalSeparator : format.decimalSymbol;\r\n    },\r\n\r\n    renderControl: function() {\r\n        var self = this;\r\n        var template = self.renderFactory.getTemplate(\"numberScientificNotation\");\r\n\r\n        // Render template\r\n        var html = $.fasttmpl(template, {});\r\n        return html;\r\n    },\r\n\r\n    /*\r\n     * Template method to implement in each device to customize each render after processed\r\n     */\r\n    postRender: function() {\r\n        var self = this;\r\n        var control = self.getControl();\r\n        self.numericInput = control.find(\"input\");\r\n        // Add numeric plugin to avoid invalid keystrokes\r\n        self.numericInput.numericSN(self.properties.decimalSymbol);\r\n\r\n    },\r\n\r\n    getDisplayValue: function() {\r\n        var self = this;\r\n        return self.getValue().replace('.', self.properties.decimalSymbol);\r\n    },\r\n\r\n    setValue: function(value) {\r\n        var self = this;\r\n        value = (value || '').toString().replace(self.properties.decimalSymbol, '.');\r\n        self._super(value);\r\n    },\r\n    controlValueIsChanged: function() {\r\n        var self = this;\r\n        var properties = self.properties;\r\n        var value = self.getValue() || \"\";\r\n        var compareValue = properties.originalValue || \"\";\r\n        var result = true;\r\n\r\n        // Flag to force to collect data\r\n        if ($.forceCollectData) {\r\n            return true;\r\n        }\r\n        result = (compareValue.toLowerCase() == value.toLowerCase()) ? false : true;\r\n        return result;\r\n    }\r\n\r\n});","/*\r\n*   Name: BizAgi Render Date Class\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will define basic stuff for date renders\r\n*/\r\n\r\n$.Class.extend(\"bizagi.rendering.date\", {}, {\r\n\r\n    /*\r\n    *   Update or init the element data\r\n    */\r\n    initializeData: function (data) {\r\n        var self = this;\r\n        // Call base\r\n        this._super(data);\r\n\r\n        // Fill default properties\r\n        var properties = this.properties;\r\n        var dateFormat = this.getResource(\"dateFormat\");\r\n        var timeFormat = this.getResource(\"timeFormat\");\r\n\r\n        // We will hold here the value to display\r\n        properties.displayValue = \"\";\r\n        properties.showTime = properties.showTime !== undefined ? bizagi.util.parseBoolean(properties.showTime) : false;\r\n        properties.dateFormat = properties.dateFormat || dateFormat;\r\n        properties.timeFormat = properties.timeFormat || timeFormat;\r\n        properties.fullFormat = properties.dateFormat;\r\n\r\n        // Check if it has the showtime property\r\n        if (properties.showTime) {\r\n            if (properties.fullFormat.search(/[h|H]+/ig) === -1) {\r\n                properties.fullFormat = properties.fullFormat + ' ' + properties.timeFormat;\r\n            }\r\n        }\r\n\r\n        // Read always parameter from server in invariant format\r\n        if (properties.value) {\r\n\r\n            var date = bizagi.util.dateFormatter.getDateFromInvariant(properties.value, properties.showTime);\r\n            // Format date to current format\r\n            if (date != 0) {\r\n                // Value must always hold the value with invariant format\r\n                self.value = properties.value;\r\n                var datePickerRegional = bizagi.localization.getResource(\"datePickerRegional\");\r\n                properties.displayValue = bizagi.util.dateFormatter.formatDate(date, properties.fullFormat, datePickerRegional);\r\n            } else {\r\n                self.value = null;\r\n            }\r\n        }\r\n    },\r\n    \r\n    /*\r\n    *   Template method to implement in each children to customize each control\r\n    */\r\n    renderControl: function () {\r\n        var self = this;\r\n        var properties = self.properties;\r\n        var template = self.renderFactory.getTemplate(\"date\");\r\n        var indexDateTimeSeparation = properties.dateFormat.substring(0, properties.dateFormat.indexOf(\":\")).lastIndexOf(\" \");\r\n        var dateFormat = (indexDateTimeSeparation > 0) ? properties.dateFormat.substring(0, indexDateTimeSeparation) : properties.dateFormat;\r\n\r\n        // Render template\r\n        var html = $.fasttmpl(template, {\r\n            showTime: properties.showTime,\r\n            value: properties.value,\r\n            editable: properties.editable,\r\n            dateFormat: bizagi.override && bizagi.override.uppercaseDatePlaceholder === true ? dateFormat.toUpperCase() : dateFormat,\r\n            timeFormat: (properties.showTime && indexDateTimeSeparation > 0) ? properties.dateFormat.substring(indexDateTimeSeparation) : \"\",\r\n            rtl: (properties.orientation == \"rtl\")\r\n        });\r\n\r\n        return html;\r\n    },\r\n\r\n    /*\r\n    *   Template method to implement in each device to customize the render's behaviour to add handlers\r\n    */\r\n    configureHandlers: function (intHandler, isNow) {\r\n        var self = this;\r\n        var properties = self.properties;\r\n\r\n        // Set control references\r\n        var dateControl = self.getDateControl();\r\n        var timeControl = self.getTimeControl();\r\n\r\n        // Set mask\r\n        if (properties.mask) {\r\n            dateControl.mask({\r\n                mask: properties.mask\r\n            });\r\n        }\r\n\r\n        // Attach change event\r\n        dateControl.bind(\"change\", function () {\r\n            self.onChangeHandler();\r\n        });\r\n        if (properties.showTime) {\r\n            timeControl.bind(\"change\", function (e, isNow) {\r\n                if (self.updatingTime) {\r\n                    delete self.updatingTime;\r\n                    return;\r\n                }\r\n                self.onChangeHandler(isNow);\r\n            });\r\n        }\r\n    },\r\n\r\n    /* \r\n    *   Formats the date time value to the hidden control\r\n    */\r\n    onChangeHandler: function () {\r\n    },\r\n\r\n    getDisplayValue: function (value) {\r\n        var self = this;\r\n        var properties = self.properties;\r\n        var displayValue;\r\n\r\n        if (!properties.displayValue && value) {\r\n            var date = bizagi.util.dateFormatter.getDateFromInvariant(value, properties.showTime);\r\n            var datePickerRegional = bizagi.localization.getResource(\"datePickerRegional\");\r\n            displayValue = bizagi.util.dateFormatter.formatDate(date, properties.fullFormat, datePickerRegional);\r\n        } else {\r\n            displayValue = \"\";\r\n        }\r\n\r\n        // We can return the display value isntance\r\n        return properties.displayValue || displayValue || \"\";\r\n    },\r\n\r\n    /*\r\n    *   Add the render data to the given collection in order to send data to the server\r\n    */\r\n    collectData: function (renderValues) {\r\n        var self = this;\r\n        var properties = self.properties;\r\n\r\n        // Add the render value\r\n        var xpath = properties.xpath;\r\n        var value = self.getValue();\r\n\r\n        if (self.controlValueIsChanged()) {\r\n            // Filter by valid xpaths and valid values\r\n            if (!bizagi.util.isEmpty(xpath)) {\r\n                if (!bizagi.util.isEmpty(value)) {\r\n                    // Formats the value in full invariant (with time) in order to send to the server\r\n                    var date = bizagi.util.dateFormatter.getDateFromInvariant(value, properties.showTime);\r\n                    if (typeof (date) != \"undefined\")\r\n                        if (date !== 0) {\r\n                            if (!properties.showTime) {\r\n                                date.setHours(0, 0, 0, 0);\r\n                            }\r\n                            renderValues[properties.xpath] = bizagi.util.dateFormatter.formatInvariant(date, true);\r\n                        }\r\n                } else if (value === \"\") {\r\n                    renderValues[properties.xpath] = \"\";\r\n                }\r\n            }\r\n\r\n        }\r\n    },\r\n\r\n    /*\r\n    *   Gets the date control\r\n    */\r\n    getDateControl: function () { },\r\n\r\n    /*\r\n    *   Gets the time control\r\n    */\r\n    getTimeControl: function () { },\r\n\r\n    /* \r\n    * Public method to determine if a value is valid or not\r\n    */\r\n    isValid: function (invalidElements) {\r\n        var self = this,\r\n        properties = self.properties;\r\n\r\n        // Call base\r\n        var bValid = this._super(invalidElements);\r\n        var value = self.getValue();\r\n        if (value) {\r\n            if (bizagi.util.parseBoolean(properties.editable) === true) {\r\n                value = bizagi.util.dateFormatter.getDateFromInvariant(value, properties.showTime);\r\n                var message;\r\n\r\n                // Check that we have a valid data\r\n                if (value != 0) {\r\n                    // Clear seconds and milliseconds for validations\r\n                    value.setSeconds(0);\r\n                    value.setMilliseconds(0);\r\n\r\n                    // Check min value\r\n                    if (properties.minValue && (typeof properties.minValue === 'string' || typeof properties.minValue == 'number')) {\r\n                        var minValue = typeof properties.minValue == 'string' ? bizagi.util.dateFormatter.getDateFromInvariant(properties.minValue, properties.showTime) : new Date(properties.minValue);\r\n                        minValue.setSeconds(0);\r\n                        minValue.setMilliseconds(0);\r\n\r\n                        if (value < minValue) {\r\n                            message = this.getResource(\"render-date-minimum-validation\").replaceAll(\"#label#\", properties.displayName).replaceAll(\"#minValue#\", bizagi.util.dateFormatter.formatDate(minValue, properties.fullFormat));\r\n                            invalidElements.push({\r\n                                xpath: properties.xpath,\r\n                                message: message\r\n                            });\r\n                            bValid = false;\r\n                        }\r\n                    }\r\n\r\n                    // Check max value\r\n                    if (properties.maxValue && (typeof properties.maxValue == 'string' || typeof properties.maxValue == 'number')) {\r\n                        var maxValue = typeof properties.maxValue == 'string' ? bizagi.util.dateFormatter.getDateFromInvariant(properties.maxValue, properties.showTime) : new Date(properties.maxValue);\r\n                        maxValue.setSeconds(0);\r\n                        maxValue.setMilliseconds(0);\r\n\r\n                        if (value > maxValue) {\r\n                            message = this.getResource(\"render-date-maximum-validation\").replaceAll(\"#label#\", properties.displayName).replaceAll(\"#maxValue#\", bizagi.util.dateFormatter.formatDate(maxValue, properties.fullFormat));\r\n                            invalidElements.push({\r\n                                xpath: properties.xpath,\r\n                                message: message\r\n                            });\r\n                            bValid = false;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        // Check that both controls (data and time) are filled out\r\n        if (properties.showTime) {\r\n            if (bizagi.util.parseBoolean(properties.editable) === true) {\r\n                // Check required\r\n                if (properties.required && self.hasValue()) {\r\n\r\n                    // Check both controls\r\n                    var dateControl = self.getDateControl();\r\n                    var timeControl = self.getTimeControl();\r\n\r\n                    // If date is filled but time is not ... show validation\r\n                    if (dateControl.length > 0 && timeControl.length > 0) {\r\n                        if (dateControl.val().length > 0 && timeControl.val().length == 0) {\r\n                            message = self.getResource(\"render-required-text\").replaceAll(\"#label#\", properties.displayName);\r\n                            invalidElements.push({\r\n                                xpath: properties.xpath,\r\n                                message: message\r\n                            });\r\n                            return false;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        return bValid;\r\n    }\r\n\r\n});\r\n","/**\r\n *   Name: Bizagi Render Text Class\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define basic stuff for text renders\r\n */\r\n\r\n$.Class.extend(\"bizagi.rendering.extendedText\", {}, {\r\n\r\n    /**\r\n     * Update or init the element data\r\n     * @param {} data\r\n     */\r\n    initializeData: function (data) {\r\n        var self = this;\r\n\r\n        // Call base\r\n        self._super(data);\r\n\r\n        // Check if offline forms is supported\r\n        this.isOfflineForm = bizagi.util.isOfflineForm({context: self});\r\n        this.hasMaxLines = this.properties.maxLines ? true : false;\r\n\r\n        // Fill default properties\r\n        var properties = this.properties;\r\n\r\n        // Fill default properties\r\n        properties.maxLines = this.properties.maxLines || 6;\r\n\r\n        if (properties.regularExpressionExpression) {\r\n            var message = properties.regularExpressionMessage || self.getResource(\"render-text-regular-expression-default-message\");\r\n\r\n            properties.regularExpression = {\"expression\": properties.regularExpressionExpression, \"message\": message};\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Template method to implement in each children to customize each control\r\n     */\r\n    renderControl: function () {\r\n        var template = this.renderFactory.getTemplate(\"extendedText\");\r\n\r\n        // Render template\r\n        var html = $.fasttmpl(template, {\r\n            isEmptyField: typeof (this.properties.value) === \"undefined\",\r\n            editable: this.properties.editable\r\n        });\r\n\r\n        return html;\r\n    },\r\n\r\n    /**\r\n     * Template method to implement in each device to customize each render after processed\r\n     */\r\n    postRender: function () {\r\n        var self = this;\r\n        self._super();\r\n\r\n        var control = self.getControl();\r\n        self.textarea = control.find(\"textarea\");\r\n\r\n        // If is textarea, then enable resize element.\r\n        if (self.textarea) {\r\n            self.textarea.css({resize: \"both\"});\r\n        } else {\r\n            self.textarea.css({resize: \"none\"});\r\n        }\r\n\r\n        // Attach event for retype double\r\n        if (self.properties.retype === \"double\")\r\n            self.attachRetypeDouble();\r\n    },\r\n\r\n    /**\r\n     * Function virtual implements on children (desktop,samrtphone...).\r\n     */\r\n    attachRetypeDouble: function () {\r\n    },\r\n\r\n    /**\r\n     * Template method to implement in each device to customize the render's behaviour to add handlers\r\n     */\r\n    configureHandlers: function () {\r\n        var self = this;\r\n        var properties = self.properties;\r\n\r\n        // Set the default maxlength for the input if is 0 or undefined set to infinity\r\n        // this resolve issue with scope strings that don't have maxlength\r\n        if (properties.maxLength)\r\n            self.textarea.prop('maxlength', properties.maxLength);\r\n\r\n        if (properties.maxLines) {\r\n            self.textarea.prop('rows', properties.maxLines)\r\n        } else {\r\n            self.textarea.prop('rows', 6);\r\n        }\r\n\r\n        // Attach change event\r\n        self.textarea.bind(\"change\", function () {\r\n\r\n            // Updates internal value\r\n            self.setValue(self.textarea.val());\r\n\r\n            // Check that the value is valid\r\n            var validationMessages = [];\r\n            if (properties.retype !== \"duplicate\") {\r\n                if (self.isValid(validationMessages) || typeof (properties.regularExpression) === \"undefined\") {\r\n                    // Update value again triggering handlers\r\n                    self.setValue(self.textarea.val(), true);\r\n                } else {\r\n                    // Set error message\r\n                    var message = validationMessages[0].message;\r\n                    bizagi.showMessageBox(message, \"Bizagi\", \"error\");\r\n                }\r\n            }\r\n        });\r\n\r\n        // Attach blur event\r\n        self.textarea.bind(\"blur\", function () {\r\n            // Updates internal value\r\n            self.setValue(self.textarea.val());\r\n        });\r\n    },\r\n\r\n    /**\r\n     * Public method to determine if a value is valid or not\r\n     * @param {} invalidElements\r\n     * @returns {}\r\n     */\r\n    isValid: function (invalidElements) {\r\n        var self = this;\r\n        var properties = self.properties;\r\n        var message;\r\n\r\n        // Call base\r\n        var bValid = this._super(invalidElements);\r\n        var value = self.getValue();\r\n        var regEx = new RegExp(\".*?(<|\\\\u003C)(.+?)(>|\\\\u003E)(.?)|eval\\\\(|eval\\\\u0028\", \"g\");\r\n\r\n        // Offline capability\r\n        if (this.isOfflineForm && bizagi.util.isMobileDevice()) {\r\n            value = value && typeof (value) === \"object\" && value.value ? value.value : value;\r\n        }\r\n\r\n        // Check regular expression\r\n        if (properties.regularExpression) {\r\n\r\n            if (value && ((value.match(regEx)) || (!value.match(new RegExp(properties.regularExpression.expression)) && (self.properties && self.properties.xpath === \"userName\")))) {\r\n                message = properties.regularExpression.message;\r\n                invalidElements.push({xpath: properties.xpath, message: message});\r\n                bValid = false;\r\n            } else {\r\n                if (value && ((value.match(regEx)) || (!value.match(new RegExp(properties.regularExpression.expression))))) {\r\n                    message = properties.regularExpression.message;\r\n                    invalidElements.push({xpath: properties.xpath, message: message});\r\n                    bValid = false;\r\n                }\r\n            }\r\n        } else {\r\n            if (value && (value.match(new RegExp(\".*?eval\\\\(\", \"g\"))) && (value.match(new RegExp(\".*?eval\\\\u0028\", \"g\")))) {\r\n                if (properties.editable) {\r\n                    message = this.getResource(\"render-text-regular-expression-default-message\");\r\n                    invalidElements.push({xpath: properties.xpath, message: message});\r\n                    bValid = false;\r\n                }\r\n            }\r\n        }\r\n\r\n        return bValid;\r\n    },\r\n\r\n    /**\r\n     * Sets the value in the rendered control\r\n     * @param {} value\r\n     * @returns {}\r\n     */\r\n    setDisplayValue: function (value) {\r\n        var self = this;\r\n        var control = self.getControl();\r\n        var decodedValue = bizagi.util.decodeURI(value);\r\n\r\n        if (self.properties.editable == false) {\r\n            // Render as simple value\r\n            if (typeof (value) == \"string\") {\r\n\r\n                // Replace line breaks for html line breaks\r\n                var valueToDisplay = bizagi.util.decodedDisplayValue(self.getDisplayValue());\r\n\r\n                control.html(valueToDisplay);\r\n            }\r\n        }\r\n\r\n        // Set internal value\r\n        self.setValue(decodedValue, false);\r\n    },\r\n\r\n    /**\r\n     * Add the render data to the given collection in order to send data to the server\r\n     * @param {} renderValues\r\n     * @returns {}\r\n     */\r\n    collectData: function (renderValues) {\r\n        // Call base\r\n        this._super(renderValues);\r\n    },\r\n\r\n    /**\r\n     * Extend setValue to fix all encode data from database\r\n     * More information SUITE-9407\r\n     * @param {} value\r\n     * @returns {}\r\n     */\r\n    setValue: function (value) {\r\n        var decodedValue = bizagi.util.decodeURI(value);\r\n\r\n        this._super(decodedValue);\r\n    },\r\n\r\n    /**\r\n     * Helptext tooltip\r\n     * @param {} control\r\n     * @param {} currentValue\r\n     * @param {} currentTitle\r\n     */\r\n    createTooltip: function (control, currentValue, currentTitle) {\r\n        control.data(\"oldValue\", currentValue);\r\n        control.val(\"\");\r\n\r\n        if(control.data('ui-tooltip')) control.tooltip('destroy');  \r\n\r\n        control.attr(\"title\", currentTitle);\r\n        control.tooltip();\r\n\r\n        var toolTipZindex = $.getMaxZindex();\r\n        control.tooltip().on(\"tooltipopen\", function (event, ui) {\r\n            ui.tooltip.zIndex(toolTipZindex);\r\n        });\r\n\r\n        // Create new tooltip\r\n        control.tooltip(\"open\");\r\n\r\n        setTimeout(function () {\r\n            control.focus();\r\n        }, 100);\r\n    },\r\n\r\n    //#region No side effects functions\r\n    /**\r\n     * Gets the string with the correct size\r\n     * @param {string} value String value to validate\r\n     * @param {Int} maxLength Maximum size of the string\r\n     * @returns {string} String value validated\r\n     */\r\n    validateValue: function (value, maxLength) {\r\n        if(maxLength<1 || value.length<=maxLength)return value;\r\n        return value.substr(0, maxLength)\r\n    }\r\n    //#endregion No side effects functions\r\n});\r\n","/*\r\n *   Name: Bizagi Render Grid Class\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define basic stuff for grids\r\n */\r\n\r\n$.Class.extend(\"bizagi.rendering.grid\", {}, {\r\n\r\n    /*\r\n     *   Update or init the element data\r\n     */\r\n    initializeData: function (data) {\r\n        var self = this;\r\n\r\n        self.originalData = bizagi.clone(data.properties);\r\n        // Call base\r\n        this._super(data);\r\n\r\n        // Fill default properties\r\n        var properties = this.properties;\r\n\r\n        self.initProperties();\r\n\r\n        // Set columns\r\n        var areThereEditableColumns;\r\n        var areThereTotalizedColumns;\r\n        self.columns = [];\r\n        self.columnsIds = [];\r\n        self.enabledChecks = {};\r\n        self.exclusiveChanges = {};\r\n        self.originalEnabledChecks = [];\r\n        $.each(data.elements, function (i, column) {\r\n            var columnProperties = column.render.properties;\r\n\r\n            // the groupby property is taken of column\r\n            if (columnProperties.groupBy) {\r\n                properties.groupBy = columnProperties.xpath || \"\";\r\n                properties.allowGrouping = !bizagi.util.isEmpty(properties.groupBy) ? true : false;\r\n            }\r\n           //if (columnProperties.type === \"columnLabel\") {\r\n                //self.spliceRowData(data.properties.data, i + 1);\r\n            //}\r\n\r\n            if (columnProperties.type === \"columnBoolean\" && columnProperties.isExclusive) {\r\n                properties.hasExclusiveCheck = true;\r\n                self.enabledChecks[columnProperties.xpath] = [];                   \r\n            }\r\n                       \r\n            // If inlineEdit is false then all columns must be read only\r\n            if (!self.properties.inlineEdit) {\r\n                column.render.properties.editable = false;\r\n            }\r\n\r\n            // Create renderColumns\r\n            var columnRender = self.renderFactory.getColumn({\r\n                type: columnProperties.type,\r\n                data: column.render,\r\n                parent: self,\r\n                singleInstance: properties.singleInstance\r\n            });\r\n\r\n            self.columns.push(columnRender);\r\n            self.columnsIds.push(column.render.properties.id);\r\n\r\n            if (columnProperties.editable) {\r\n                areThereEditableColumns = true;\r\n            }\r\n\r\n            if (columnProperties.totalize && columnProperties.totalize.operation) {\r\n                areThereTotalizedColumns = true;\r\n\r\n                // Default summary format\r\n                columnProperties.totalize.format = columnProperties.totalize.format || {};\r\n                columnProperties.totalize.format.bold = columnProperties.totalize.format.bold !== undefined ? columnProperties.totalize.format.bold : true;\r\n            }\r\n        });\r\n\r\n        // Reverse columns when using right to left orientation\r\n        if (properties.orientation === \"rtl\")\r\n            self.columns = self.columns.reverse();\r\n\r\n        // Turn off inline edit if there are any editable columns        \r\n        if (properties.inlineEdit && !areThereEditableColumns) {\r\n            properties.inlineEdit = false;\r\n            properties.allowEdit = false;\r\n        }\r\n\r\n        // Check if the grid has totalizers\r\n        if (areThereTotalizedColumns) {\r\n            properties.showSummary = true;\r\n            properties.rowsPerPage = 0;\r\n        }\r\n    },\r\n\r\n    initProperties: function () {\r\n        var self = this;\r\n        var form = self.getFormContainer();\r\n        var properties = self.properties;\r\n\r\n        /** Edit properties\r\n         * @default editable true\r\n         */\r\n        properties.editable = bizagi.util.parseBoolean(properties.editable) || false;\r\n        properties.allowEdit = bizagi.util.parseBoolean(properties.allowEdit) != null ? bizagi.util.parseBoolean(properties.allowEdit) : true;\r\n        properties.inlineEdit = bizagi.util.parseBoolean(properties.inlineEdit) != null ? bizagi.util.parseBoolean(properties.inlineEdit) : true;\r\n        properties.withEditForm = bizagi.util.parseBoolean(properties.withEditForm) != null ? bizagi.util.parseBoolean(properties.withEditForm) : false;\r\n\r\n        /** Add properties\r\n         * @default  allowAdd true\r\n         */\r\n        properties.allowAdd = bizagi.util.parseBoolean(properties.allowAdd) != null ? bizagi.util.parseBoolean(properties.allowAdd) : true;\r\n        properties.inlineAdd = (properties.allowAdd) ? (bizagi.util.parseBoolean(properties.inlineAdd) != null) ? bizagi.util.parseBoolean(properties.inlineAdd) : true : false;\r\n\r\n        /* Define Delete properties */\r\n        properties.allowDelete = bizagi.util.parseBoolean(properties.allowDelete) != null ? bizagi.util.parseBoolean(properties.allowDelete) : true;\r\n\r\n        /* Define details properties*/\r\n        properties.allowDetail = bizagi.util.parseBoolean(properties.allowDetail) != null ? bizagi.util.parseBoolean(properties.allowDetail) : false;\r\n\r\n        /* Define general properties */\r\n        properties.keyColumn = \"\";\r\n        properties.data = properties.data || null;\r\n        properties.displayType = \"value\";\r\n        properties.skipInitialLoad = properties.skipInitialLoad || false;\r\n        properties.allowMore = bizagi.util.parseBoolean(properties.allowMore) || false;\r\n        properties.allowFilter = bizagi.util.parseBoolean(properties.allowFilter) || false;\r\n        properties.allowGrouping = false;\r\n        properties.groupBy = \"\";\r\n        properties.groupSummary = properties.groupSummary || null;\r\n        properties.groupText = this.getResource(\"render-grid-group-text\");\r\n        properties.groupCollapsed = bizagi.util.parseBoolean(properties.groupCollapsed) || false;\r\n        properties.groupOrder = properties.groupOrder || \"asc\";\r\n        properties.formShowMode = bizagi.util.parseBoolean(properties.formShowMode) || \"popup\";\r\n        properties.floatingHeader = bizagi.util.parseBoolean(properties.floatingHeader) || false;\r\n\r\n        properties.sortBy = properties.sortBy ? properties.sortBy : properties.data && properties.data.sort ? properties.data.sort : properties.keyColumn;\r\n        properties.sortOrder = properties.sortOrder !== undefined && properties.sortOrder !== null ? (properties.sortOrder === \"True\" ? \"asc\" : \"desc\") : properties.data && properties.data.order ? properties.data.order : \"asc\";\r\n        properties.sort = properties.sortBy + \" \" + properties.sortOrder;\r\n\r\n        properties.rowsPerPage = properties.allowGrouping ? 1000 : (properties.rowsPerPage || 20);\r\n        properties.page = 1;\r\n        properties.records = 0;\r\n        properties.totalPages = 0;\r\n\r\n        properties.addLabel = properties.addLabel || this.getResource(\"render-grid-add-label\") + properties.displayName;\r\n        properties.editLabel = properties.editLabel || $.trim(this.getResource(\"render-grid-edit-label\")) + \" \" + properties.displayName;\r\n        properties.deleteLabel = properties.deleteLabel || this.getResource(\"render-ecm-confirm-bt-delete\") + \" \" + properties.displayName;\r\n        properties.exportOptionsLabel = properties.exportOptionsLabel || this.getResource(\"render-grid-export-options-label\") + properties.displayName;\r\n        properties.detailLabel = properties.detailLabel || this.getResource(\"render-collection-navigator-details-form\");\r\n\r\n\r\n        // Apply style to entire table\r\n        properties.tableCssClass = properties.cssClass || \"\";\r\n\r\n        properties.alreadySaved = false;\r\n\r\n        // When grid open in modal window and the parent is entity\r\n        if (properties.contexttype != \"entity\") {\r\n            properties.contexttype = (typeof self.parent.getContextType == 'function') ? self.parent.getContextType() : \"\";\r\n        }\r\n\r\n        // Define if it is editable or not        \r\n        /* This part change all cells in the table to no editable,\r\n         * you must use it when the parent container has noeditable property,\r\n         * so this table is noeditable too.\r\n         */\r\n        try {\r\n            if ((self.parent && typeof self.parent.properties.editable == \"boolean\" && !self.parent.properties.editable) || !properties.editable) {\r\n                properties.allowAdd = false;\r\n                properties.allowEdit = false;\r\n                properties.allowDelete = false;\r\n                properties.inlineEdit = false;\r\n                properties.inlineAdd = false;\r\n                properties.editable = false;\r\n            }\r\n        } catch (e) {\r\n        }\r\n\r\n\r\n        // If grid has not allowEdit property in true, all fields within the grid\r\n        // must be no editables, so these lines changes this behavior\r\n        if (!properties.allowEdit || (!properties.inlineEdit && !properties.withEditForm)) {\r\n            properties.editable = false;\r\n        }\r\n\r\n        // Calculate render width\r\n        properties.labelWidth = 0;\r\n        properties.valueWidth = \"100%\";\r\n\r\n        // This property will be used to make custom grids with another data source\r\n        properties.overrideGetRemoteData = properties.overrideGetRemoteData || undefined;\r\n        //this property use to create a single decorated or a array of decorated\r\n        properties.singleInstance = bizagi.util.isEmpty(properties.singleInstance) ? true : properties.singleInstance;\r\n\r\n        // Check if the grid its opened whitin dialog form and has contextType\r\n        properties.contextType = (form.params && form.params.data && form.params.data.contextType) ? form.params.data.contextType : null;\r\n\r\n        // Create a collection to collect changes\r\n        self.changes = {};\r\n\r\n        // Create a collection to override properties per cell\r\n        self.cellOverrides = {};\r\n\r\n\r\n        // Check orientation and change order of data if its necesary (rtl)\r\n        if (self.isRTL() && properties.data != null) {\r\n            properties.data.rows = self.changeOrderData(properties.data.rows);\r\n        }\r\n    },\r\n\r\n    /*\r\n   *   Check if a render has no value for required validation\r\n   */\r\n    hasValue: function () {\r\n        return this.properties.data && this.properties.data.rows.length > 0;\r\n    },\r\n\r\n    isRTL: function () {\r\n        var properties = this.properties;\r\n        if (!properties) return true;\r\n        return (typeof properties.orientation == \"string\" && properties.orientation.toUpperCase() == \"RTL\") ? true : false;\r\n    },\r\n    changeOrderData: function (data) {\r\n        var reverseDataRows = [];\r\n        var rows = data || [];\r\n        var rowKey;\r\n\r\n        $.each(rows, function (key, value) {\r\n            // Extract row key\r\n            rowKey = value.shift();\r\n            reverseDataRows = value.reverse();\r\n            // add element in the start\r\n            reverseDataRows.unshift(rowKey);\r\n\r\n            rows[key] = reverseDataRows;\r\n        });\r\n\r\n        return rows;\r\n    },\r\n\r\n    /**\r\n     * Specific fix RTL with localizated\r\n     * @param data\r\n     * @returns {*|Array}\r\n     */\r\n    removeRemainingColumns: function (data, numColumns) {\r\n        var rows = data || [];\r\n        var remainingColumns = 0;\r\n        if (rows.length > 0) {\r\n            // \"- 1\" because the first column represent id row\r\n            remainingColumns = rows[0].length - numColumns - 1;\r\n        }\r\n        if (remainingColumns > 0) {\r\n            $.each(rows, function (key, value) {\r\n                // Remove remaining columns\r\n                for (var i = 0; i < remainingColumns; i++) {\r\n                    value.pop();\r\n                }\r\n            });\r\n        }\r\n        return rows;\r\n    },\r\n\r\n    /* \r\n     *   Gets a column definition by xpath\r\n     */\r\n    getColumn: function (xpath) {\r\n        var self = this;\r\n        var result = null;\r\n        $.each(self.columns, function (i, column) {\r\n            if (\r\n                column.properties.xpath == xpath || \r\n                column.properties.id == xpath ||\r\n                column.properties.xpath + \".\" + column.properties.id == xpath\r\n            ) {\r\n                result = column;\r\n            }\r\n        });\r\n\r\n        return result;\r\n    },\r\n\r\n    getColumnType: function (id) {\r\n        var self = this;\r\n        var columnIndex = self.columnsIds.indexOf(id);\r\n\r\n        if (columnIndex != -1) {\r\n            return self.columns[columnIndex].properties.type;\r\n        }\r\n\r\n        return null;\r\n    },\r\n\r\n    /*\r\n     *   Template method to implement in each children to customize each control\r\n     *   Returns a promise that will be resolved when all the columns has been loaded\r\n     */\r\n    renderControl: function () {\r\n        var self = this;\r\n        var properties = this.properties;\r\n        var defer = new $.Deferred();\r\n\r\n        // Set dummy data when not in execution mode\r\n        var mode = self.getMode();\r\n        if (mode !== \"execution\") {\r\n            properties.data = self.getDummyData();\r\n        }\r\n\r\n        var template = self.getGridTemplate();\r\n\r\n        // Render template\r\n        var html = self.applyTemplate(template);\r\n\r\n        // Initialize columns\r\n        var columnInitializers = [];\r\n        $.each(self.columns, function (i, column) {\r\n\r\n            // Add to column initializer array so we can synch out the promises\r\n            var result = column.initialize();\r\n            if (result)\r\n                columnInitializers.push(result);\r\n        });\r\n\r\n        // Resolve when all columns has been loaded\r\n        $.when.apply($, columnInitializers).done(function () {\r\n            defer.resolve(html);\r\n        });\r\n\r\n        return defer.promise();\r\n    },\r\n    /*\r\n     *   Template method to implement in each device to customize each render after processed\r\n     */\r\n    postRender: function () {\r\n        var self = this;\r\n        var control = self.getControl();\r\n\r\n        // Call base\r\n        this._super();\r\n\r\n        // Make control to behave as a block container\r\n        // TODO: Move to instances. This does not apply to mobiles\r\n        control.addClass(\"ui-bizagi-render-grid-container\")\r\n            .addClass(\"ui-bizagi-render-display-block\");\r\n    },\r\n\r\n    /*\r\n     *   Returns the grid template to be used\r\n     */\r\n    getGridTemplate: function () {\r\n        return this.renderFactory.getTemplate(\"grid\");\r\n    },\r\n\r\n    /*\r\n     *   Applies the template to the render and returns the resolved element\r\n     */\r\n    applyTemplate: function (template) {\r\n        var self = this,\r\n            properties = self.properties;\r\n        orientation = self.properties.orientation;\r\n\r\n        return $.fasttmpl(template, {\r\n            id: bizagi.util.encodeXpath(properties.xpath),\r\n            displayName: bizagi.util.encodeXpath(properties.displayName),\r\n            allowAdd: properties.allowAdd,\r\n            addLabel: properties.addLabel\r\n        });\r\n    },\r\n    /*\r\n     *   Method to render non editable values\r\n     *   Returns a promise that will be resolved when all the columns has been loaded\r\n     */\r\n    renderReadOnly: function () {\r\n        var self = this;\r\n\r\n        // Override read-only presets\r\n        //  properties.allowAdd = false;\r\n        // Render the same, just change some presets\r\n        return self.renderControl();\r\n    },\r\n    /*\r\n     *   Fetch the data into a deferred\r\n     */\r\n    getRemoteData: function (params) {\r\n        var self = this;\r\n        var properties = self.properties;\r\n\r\n        // Set params\r\n        params = params || {};\r\n        $.extend(params, {\r\n            url: properties.dataUrl,\r\n            xpath: properties.xpath,\r\n            idRender: properties.id,\r\n            xpathContext: properties.xpathContext,\r\n            contexttype: properties.contextType,\r\n            idPageCache: properties.idPageCache,\r\n            sort: properties.sortBy,\r\n            order: properties.sortType,\r\n            page: properties.page,\r\n            rows: properties.rowsPerPage,\r\n            searchFilter: properties.searchFilter,\r\n            orientation: properties.orientation || \"ltr\"\r\n        });\r\n\r\n        // Check if a custom method has been given\r\n        if (properties.overrideGetRemoteData) {\r\n            return properties.overrideGetRemoteData(params);\r\n        } else {\r\n            // Resolve with remote data\r\n            return self.dataService.multiaction().getGridData(params).then(function (data) {\r\n                self.originalData = self.originalData || {};\r\n                self.originalData.data = bizagi.clone(data);\r\n\r\n                // Resolve with fetched data\r\n                properties.page = data.page;\r\n                properties.records = data.records;\r\n                properties.totalPages = data.totalPages;\r\n\r\n                return data;\r\n            });\r\n        }\r\n    },\r\n    /*\r\n     insert a blank item in the selected column in the data matrix\r\n     */\r\n    spliceRowData: function (data, index) {\r\n        var self = this;\r\n        var mode = self.getMode();\r\n        if (mode === \"execution\" && (data && data.rows)) {\r\n            $.each(data.rows, function (key, value) {\r\n                var spliceIndex = index || data.rows[key].length;\r\n                data.rows[key].splice(spliceIndex, 0, \"\");\r\n            });\r\n        }\r\n    },\r\n\r\n    spliceRowDataVisible: function(data, index) {\r\n        var self = this;\r\n        var mode = self.getMode();\r\n        if (mode === \"execution\" && (data && data.visible)) {\r\n            $.each(data.visible, function (key, value) {\r\n                var spliceIndex = index || data.visible[key].length;\r\n                data.visible[key].splice(spliceIndex, 0, true);\r\n            });\r\n        }\r\n    },\r\n\r\n    spliceRowDataEditable: function(data, index) {\r\n        var self = this;\r\n        var mode = self.getMode();\r\n        if (mode === \"execution\" && (data && data.editable)) {\r\n            $.each(data.editable, function (key, value) {\r\n                var spliceIndex = index || data.editable[key].length;\r\n                data.editable[key].splice(spliceIndex, 0, true);\r\n            });\r\n        }\r\n    },\r\n\r\n    /*\r\n     *   Creates a set of dummy data in order to display it when rendering in design or layout mode\r\n     */\r\n    getDummyData: function () {\r\n        var self = this;\r\n        var properties = self.properties;\r\n        if (properties.data) {\r\n            return properties.data;\r\n\r\n        } else {\r\n            var rowTemplate = [\"1\"];\r\n\r\n            // Add a value for each column\r\n            for (var i = 0; i < self.columns.length; i++) {\r\n                rowTemplate.push(\"\");\r\n            }\r\n\r\n            var data = {\r\n                \"page\": 1,\r\n                \"total\": 1,\r\n                \"records\": 1,\r\n                \"rows\": [rowTemplate]\r\n            };\r\n\r\n            return data;\r\n        }\r\n    },\r\n    /*\r\n     *   Submits a grid edit record request for the given id\r\n     *   Returns a deferred\r\n     */\r\n    submitEditRequest: function (id) {\r\n        var self = this,\r\n            properties = self.properties;\r\n\r\n        var xpath = properties.xpath + self.buildCellXpathFilter(id);\r\n\r\n        return self.dataService.editGridRecord({\r\n            url: properties.editUrl,\r\n            idRender: properties.id,\r\n            xpath: xpath,\r\n            xpathContext: properties.xpathContext,\r\n            idPageCache: properties.idPageCache,\r\n            contexttype: properties.contextType\r\n        });\r\n    },\r\n    /*\r\n     *   Submits a grid edit record request for the given id\r\n     *   Returns a deferred\r\n     */\r\n    submitSaveRequest: function (id, data) {\r\n        var self = this,\r\n            properties = self.properties;\r\n\r\n        // Check if there are deferreds to wait\r\n        var deferredsToWait = null;\r\n        if (data.deferreds) {\r\n            deferredsToWait = $.when.apply($, data.deferreds);\r\n            delete data.deferreds;\r\n        }\r\n\r\n        // Calculate xpath context\r\n        var xpathContext = properties.xpathContext.length > 0 ? properties.xpathContext + \".\" + properties.xpath + self.buildCellXpathFilter(id) : properties.xpath + self.buildCellXpathFilter(id);\r\n\r\n        return $.when(deferredsToWait).pipe(function () {\r\n            self.startLoading();\r\n            return self.dataService.saveGridRecord({\r\n                url: properties.saveUrl,\r\n                idRender: properties.id,\r\n                xpath: properties.xpath,\r\n                xpathContext: xpathContext,\r\n                submitData: data,\r\n                contexttype: properties.contextType,\r\n                disableServerGridValidations: data.disableServerGridValidations || false\r\n            }).pipe(function (dataResp) {\r\n                self.endLoading();\r\n                return dataResp;\r\n            }).fail(function (dataFail) {\r\n                var form = self.getFormContainer();\r\n                var message = (dataFail.responseText) ? dataFail.responseText : ((typeof dataFail == \"string\") ? dataFail : dataFail.toString());\r\n                //Convert String to object\r\n                if (typeof message == \"string\") {\r\n                    try {\r\n                        message = JSON.parse(message).message;\r\n                    } catch (e) {\r\n                        message = message.match(/\"message\":(.*)\",/)[0];\r\n                        message = message.substr(11, message.length - 13);\r\n                    }\r\n\r\n                } else if (!message.message) {\r\n                    message = dataFail;\r\n                }\r\n                form.validateForm();\r\n                form.clearValidationMessages();\r\n                form.addValidationMessage(message);\r\n            });\r\n        });\r\n    },\r\n    /*\r\n     *   Submits a grid delete record request for the given id\r\n     *   Returns a deferred\r\n     */\r\n    submitDeleteRequest: function (id) {\r\n        var self = this,\r\n            properties = self.properties;\r\n\r\n        var xpath = properties.xpath + self.buildCellXpathFilter(id);\r\n\r\n        return self.dataService.deleteGridRecord({\r\n            url: properties.deleteUrl,\r\n            idRender: properties.id,\r\n            xpath: xpath,\r\n            xpathContext: properties.xpathContext,\r\n            idPageCache: properties.idPageCache,\r\n            contexttype: properties.contextType\r\n        }).pipe(function (data) {\r\n            if (data.type == \"validationMessages\") {\r\n                var form = self.getFormContainer();\r\n                var message = data.messages.join(\" \");\r\n                form.failHandler({message: message});\r\n            }\r\n\r\n            return data;\r\n        });\r\n    },\r\n    /*\r\n     *   Submits a grid add record request\r\n     *   Returns a deferred when done, the server returns an id for the new record\r\n     */\r\n    submitAddRequest: function () {\r\n        var self = this,\r\n            properties = self.properties;\r\n\r\n        var request = self.dataService.addGridRecord({\r\n            url: properties.addUrl,\r\n            idRender: properties.id,\r\n            xpath: properties.xpath,\r\n            xpathContext: properties.xpathContext,\r\n            contexttype: properties.contextType,\r\n            idPageCache: properties.idPageCache\r\n        });\r\n\r\n        var filterResponse = request.pipe(function (data) {\r\n            // Parses response\r\n            return data.idEntity;\r\n        });\r\n\r\n        return filterResponse.promise();\r\n    },\r\n    /*\r\n     *   Submits a grid rollback request\r\n     *   Returns a deferred when done\r\n     */\r\n    submitRollbackRequest: function (params) {\r\n        var self = this,\r\n            properties = self.properties;\r\n\r\n        return self.dataService.rollbackGridAction({\r\n            url: properties.rollbackUrl,\r\n            idRender: properties.id,\r\n            xpath: properties.xpath,\r\n            xpathContext: properties.xpathContext,\r\n            idPageCache: params ? params.idPageCache : properties.idPageCache,\r\n            contexttype: self.properties.contexttype || \"\"\r\n        });\r\n    },\r\n    /*\r\n     *   Collect a single cell change made in the grid to send the data when the user saves the form\r\n     */\r\n    collectGridChange: function (params) {\r\n        var self = this;\r\n        params = params || {};\r\n        var id = params.id;\r\n        var xpath = params.xpath;\r\n        var value = params.value;\r\n        var trigger = typeof (params.trigger) !== \"undefined\" ? params.trigger : true;\r\n        var isPressed = params.pressed || false;\r\n\r\n        self.changes[id] = self.changes[id] || {};\r\n        self.changes[id][xpath] = value;\r\n\r\n        if (trigger)\r\n            self.triggerRenderChange({key: id, column: xpath, pressed: isPressed});\r\n    },\r\n    /*\r\n     *   Configures a column to perform a submit on change when the user changes a cell\r\n     */\r\n    configureColumnSubmitOnChange: function (xpath) {\r\n        var self = this;\r\n        var properties = self.properties;\r\n\r\n        // Build action\r\n        var action = {\r\n            commands: [{\r\n                xpath: properties.xpath,\r\n                command: 'submit-value',\r\n                argument: 'all'\r\n            }],\r\n            conditions: {\r\n                operator: 'and',\r\n                expressions: [\r\n                    {\r\n                        simple: {\r\n                            operator: 'cell-change',\r\n                            xpath: properties.xpath + '[].' + xpath,\r\n                            argumentType: 'text',\r\n                            argument: xpath\r\n                        }\r\n                    }\r\n                ]\r\n            },\r\n            dependencies: [properties.xpath]\r\n        };\r\n\r\n        // Add action when form ends its rendering\r\n        $.when(self.ready())\r\n            .done(function () {\r\n                var form = self.getFormContainer();\r\n                form.addSubmitAction(xpath, action);\r\n            });\r\n    },\r\n    /*\r\n     *   Add the render data to the given collection in order to send data to the server\r\n     */\r\n    collectData: function (renderValues) {\r\n        var self = this;\r\n        var properties = self.properties;\r\n        var keysToDelete = [];\r\n\r\n        if (self.exclusiveChanges) {\r\n            //Add filter to parse all checks in tru to false. DON'T CHANGE CODE ORDER\r\n            for (var xpath in self.exclusiveChanges) {//Brings the xpath columns with changes\r\n                var columnExclusiveChanges = self.exclusiveChanges[xpath];\r\n                var columnEnabledChecks = self.enabledChecks[xpath];\r\n                if (columnExclusiveChanges && columnEnabledChecks) {\r\n                    // If there are any change, its needed to include as a change the filter to set all rows in false\r\n                    var xpathExclusiveFilter = properties.xpath + \"[\" + xpath + \"=true].\" + xpath;\r\n                    renderValues[xpathExclusiveFilter] = false;                    \r\n                }\r\n            }\r\n        }\r\n\r\n        for (var id in self.changes) {\r\n            // Dont collect data from totalizers \r\n            if (id != \"summary\") {\r\n                for (var columnXpath in self.changes[id]) {\r\n                    // Check if the render can submit data\r\n                    if (self.canColumnBeSent(id, columnXpath)) {\r\n                        var xpath = properties.xpath + self.buildCellXpathFilter(id) + \".\" + columnXpath;\r\n                        var value = self.changes[id][columnXpath];\r\n\r\n                        renderValues[xpath] = value;\r\n                    }\r\n                }\r\n            }\r\n\r\n            // Clean changes \r\n            keysToDelete.push(id);\r\n\r\n        }\r\n        //If any exclusive check is true, set the new value in renderValues. DON'T CHANGE CODE ORDER\r\n        if (self.exclusiveChanges) {\r\n            for (var xpath in self.exclusiveChanges) {//Brings the xpath columns with changes\r\n                var columnExclusiveChanges = self.exclusiveChanges[xpath];\r\n                var columnEnabledChecks = self.enabledChecks[xpath];\r\n                if (columnExclusiveChanges && columnEnabledChecks) {\r\n                    var checkedObject = self.exclusiveChanges[xpath];                    \r\n                    if (checkedObject && checkedObject.value){\r\n                        var columnSimpleXpathEnabled = properties.xpath + self.buildCellXpathFilter(checkedObject.key) + \".\" + xpath;                                                    \r\n                        renderValues[columnSimpleXpathEnabled] = checkedObject.value;                \r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        // Clean changes array in order to prevent duplicate data\r\n        // when execute SUBMITDATA in multiaction, that make and error\r\n        // in circular dependencies, specially when we add inline record\r\n        $.each(keysToDelete, function (key, v) {\r\n            delete self.changes[v];\r\n        });\r\n    },\r\n\r\n    hasChanged: function (result) {\r\n        var self = this;\r\n        if (!$.isEmptyObject(self.changes)) {\r\n            result.push(true);\r\n            return true;\r\n        } else {\r\n            if (!$.isEmptyObject(self.exclusiveChanges)) {\r\n                result.push(true);\r\n                return true;\r\n            } else {\r\n                return false;\r\n            }\r\n        }\r\n    },\r\n\r\n    /*\r\n     *   Check if a column data can be sent to the server\r\n     */\r\n    canColumnBeSent: function (id, columnXpath) {\r\n        var self = this, i, j, xpath;\r\n        for (i in self.columns) {\r\n            if (self.columns.hasOwnProperty(i)) {\r\n                var column = self.columns[i];\r\n                if (column.properties.type !== \"columnUserfield\") {\r\n                    if (column.properties.xpath == columnXpath) {\r\n                        var cellOverride = self.getCellOverride(id, column.columnIndex - 1);\r\n                        return column.canBeSent(id, cellOverride);\r\n                    }\r\n                } else {\r\n                    for (j in column.properties) {\r\n                        if (column.properties.hasOwnProperty(j)) {\r\n                            if (Object.prototype.toString.apply(column.properties[j]) === \"[object String]\") {\r\n                                xpath = column.properties[j].substr(column.properties[j].lastIndexOf(\".\") + 1);\r\n                                if (xpath === columnXpath) {\r\n                                    return true;\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n\r\n            }\r\n        }\r\n\r\n        return false;\r\n    },\r\n    /* \r\n     *  Method to determine if the render value can be sent to the server or not\r\n     */\r\n    canBeSent: function () {\r\n        var self = this;\r\n        var properties = self.properties;\r\n        var displayOnly = bizagi.util.parseBoolean(properties.displayOnly) || false;\r\n\r\n        // The render can be sent if it is \"display only\" and inline Edit is available\r\n        if (!displayOnly && (properties.inlineEdit || properties.inlineAdd || !$.isEmptyObject(self.changes))) {\r\n            return true;\r\n        }\r\n        return false;\r\n    },\r\n    /*\r\n     *   Return the value for a requested cell\r\n     */\r\n    getCellValue: function (key, xpath) {\r\n        var self = this;\r\n        var data = self.properties.data.rows;\r\n        for (var i = 0; i < data.length; i++) {\r\n            if (data[i][0] == key) {\r\n                for (var j = 0; j < self.columns.length; j++) {\r\n                    if (self.columns[j].properties.xpath == xpath) {\r\n                        var result = data[i][j + 1];\r\n                        return result;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        return null;\r\n    },\r\n    /*\r\n     *\r\n     */\r\n    getCellCurrentValue: function (key, xpath) {\r\n        var self = this;\r\n\r\n        var control = self.getControlCell(key, xpath);\r\n        if (control && typeof control.getValue === \"function\") {\r\n            return control.getValue();\r\n        }\r\n        return null;\r\n    },\r\n    /*\r\n     *   Gets control\r\n     */\r\n    getControlCell: function (key, xpath) {\r\n        var self = this;\r\n        var control = null;\r\n        if (typeof (self.columns) != \"undefined\")\r\n            for (var j = 0; j < self.columns.length; j++) {\r\n                if (\r\n                    self.columns[j].properties.xpath == xpath || \r\n                    self.columns[j].properties.id == xpath ||\r\n                    self.columns[j].properties.xpath + \".\" + self.columns[j].properties.id == xpath \r\n                ) {\r\n                    control = self.columns[j].getDecorated(key);\r\n                    break;\r\n                }\r\n            }\r\n\r\n\r\n        return control;\r\n    },\r\n\r\n    changeRequired: function (argument) {\r\n        this.properties.required = argument;\r\n        this.changeRequiredLabel(argument);\r\n    },\r\n\r\n    changeRequiredLabel: function (argument) {\r\n        var control = this.getControl();\r\n\r\n        if (control.length > 0) {\r\n            if (this.getMode() !== \"execution\") {\r\n                if (bizagi.util.parseBoolean(argument) == true && this.properties.editable) {\r\n                    control.addClass(\"grid-control-required\");\r\n                } else {\r\n                    control.removeClass(\"grid-control-required\");\r\n                }\r\n            } else {\r\n                if (bizagi.util.parseBoolean(argument) == true && !this.hasValue() && this.properties.editable) {\r\n                    control.addClass(\"grid-control-required\");\r\n                } else {\r\n                    control.removeClass(\"grid-control-required\");\r\n                }\r\n            }\r\n        }\r\n\r\n        this.triggerRenderValidate();\r\n    },\r\n\r\n    /*\r\n     *   Fetch the data again and updates the content\r\n     */\r\n    refresh: function () {\r\n    },\r\n    /*\r\n     *   Sets an error on the cell\r\n     */\r\n    setError: function (key, columnXpath) {\r\n    },\r\n    /*\r\n     *   Changes the background for a cell\r\n     */\r\n    changeCellBackgroundColor: function (key, xpath, argument) {\r\n    },\r\n    /*\r\n     *   Changes the background for a cell\r\n     */\r\n    changeCellColor: function (key, xpath, argument) {\r\n    },\r\n    /*\r\n     *   Changes the visibility for a cell\r\n     */\r\n    changeCellVisibility: function (key, xpath, argument) {\r\n    },\r\n    /*\r\n     *   Changes the editability for a cell\r\n     */\r\n    changeCellEditability: function (key, xpath, argument) {\r\n    },\r\n    /*\r\n     *  Changes the required for cell\r\n     */\r\n    changeCellRequired: function (key, xpath, argument) {\r\n    },\r\n    /*\r\n     *  Refresh behaviors of cell\r\n     */\r\n    changeCellProperties: function (key, xpath, argument) {\r\n\r\n    },\r\n    /*\r\n     *  Changes the max value for a cell\r\n     */\r\n    changeCellMaxValue: function (key, xpath, argument) {\r\n\r\n    },\r\n    /*\r\n     *  Changes the min value for a cell\r\n     */\r\n    changeCellMinValue: function (key, xpath, argument) {\r\n\r\n    },\r\n    /*\r\n     *  Clean data of cell\r\n     */\r\n    cleanCellData: function (key, xpath) {\r\n    },\r\n\r\n    changeEditability: function (argument) {\r\n        var self = this;\r\n        var control = self.getControl();\r\n\r\n        self.saveGrid().done(function () {\r\n\r\n            // Renders again\r\n            var tmpEditable = argument == \"Default\" ? self.originalProperties.editable: bizagi.util.parseBoolean(argument);\r\n            var properties = {properties: $.extend({editable: tmpEditable}, self.originalData)};\r\n\r\n            // Clears control\r\n            control.empty();\r\n\r\n            bizagi.rendering.render.prototype.initializeData.apply(self, [properties]);\r\n\r\n            self.initProperties();\r\n            self.changeColumnsEditability(argument);\r\n\r\n            if (typeof self.internalRenderControl == \"function\") {\r\n                $.when(self.internalRenderControl()).done(function (html) {\r\n                    control.append(html);\r\n                    self.postRenderElement(self.element);\r\n                });\r\n\r\n            }\r\n\r\n        });\r\n\r\n    },\r\n\r\n    saveGrid: function () {\r\n        var self = this;\r\n        var defer = $.Deferred();\r\n\r\n        var rows = $(\"[data-bizagi-component=rows]\", self.element).find(\"[data-new-row=true]\");\r\n        if (rows.length > 0) {\r\n            rows = $.map(rows, function (row, i) {\r\n                return $(row).data(\"business-key\");\r\n            });\r\n            self.saveInlineAddedRows(rows).done(function () {\r\n                defer.resolve();\r\n            });\r\n        } else {\r\n            defer.resolve();\r\n        }\r\n\r\n        return defer.promise();\r\n    },\r\n\r\n    changeColumnsEditability: function (value) {\r\n        var self = this;\r\n        var columns = self.columns || [];\r\n\r\n        $.each(columns, function (i, column) {\r\n            column.properties.editable = value == \"Default\" ? column.originalProperties.editable :  bizagi.util.parseBoolean(value);\r\n        });\r\n    },\r\n\r\n    /**\r\n     *   Refresh behaviors of cell\r\n     */\r\n    refreshCell: function (params) {\r\n        var self = this;\r\n        var properties = self.properties;\r\n        var key = params.key;\r\n        var column = params.column;\r\n        var xpathContext = (params.xpathContext !== \"\") ? params.xpathContext + \".\" + self.properties.xpath + self.buildCellXpathFilter(key) : self.properties.xpath + self.buildCellXpathFilter(key);\r\n        var cell = self.getControlCell(key, params.column);\r\n        var form = self.getFormContainer();\r\n        var idForm = form.properties.id;\r\n\r\n        if (!cell) {\r\n            return;\r\n        }\r\n\r\n        // Execute personalized stuff before to refresh it\r\n        cell.beforeToRefresh();\r\n\r\n        // Call service\r\n        return $.when(self.dataService.multiaction().refreshGridCell({\r\n            idRender: properties.id,\r\n            column: cell.properties.id,\r\n            idPageCache: properties.idPageCache,\r\n            xpathContext: xpathContext,\r\n            idForm: idForm,\r\n            typeRender: cell.properties.type\r\n        })).done(function (data) {\r\n            // Extract values\r\n            var getDepthData = function (target) {\r\n                if (target && typeof target == \"object\" && target.length >= 1) {\r\n                    return (target[0].length >= 1) ? target[0][0] : target[0];\r\n                }\r\n                return \"\";\r\n            };\r\n            var newValue = getDepthData(data.rows);\r\n            var editable = getDepthData(data.editable);\r\n            if (!bizagi.util.isBoolean(editable)) {\r\n                editable = editable || true;\r\n            }\r\n            var visible = getDepthData(data.visible);\r\n            if (!bizagi.util.isBoolean(visible)) {\r\n                visible = visible || true;\r\n            }\r\n            \r\n            // Change Visibility & Editability\r\n            self.changeCellVisibility(key, column, visible);\r\n            self.changeCellEditability(key, column, editable);\r\n\r\n            // Change control value\r\n            cell.setValue(newValue);\r\n            cell.setDisplayValue(newValue);\r\n\r\n            // Trigger grid change\r\n            self.triggerRenderChange({key: key, column: column, changed: false});\r\n\r\n            // Update the affected cell manually after a refresh\r\n            //TODO:temporary solution\r\n            //review the DRAGON-5982 \r\n            if (cell.column != undefined && bizagi.util.detectDevice() == \"desktop\") {\r\n                self.updateAffectedCellManually(key, newValue, cell.column.columnIndex);\r\n            }\r\n\r\n            // Execute personalized stuff after to refresh it\r\n            self.afterToRefresh({ action: \"refreshCell\" });\r\n        });\r\n    },\r\n\r\n    /*\r\n     *   Triggers the render change event\r\n     */\r\n    triggerRenderChange: function (params) {\r\n        var self = this;\r\n        params = params || {};\r\n        // Property to verify exporting updated grids\r\n        if (!bizagi.util.isEmpty(params) && params.changed != false)\r\n            self.properties.canBeExported = false;\r\n        self.triggerHandler(\"renderchange\", {\r\n            render: self,\r\n            surrogateKey: params.key,\r\n            column: params.column,\r\n            changed: params.changed,\r\n            rowDeleted: params.rowDeleted,\r\n            pressed: params.pressed\r\n        });\r\n    },\r\n\r\n    /*\r\n     *   Validate the grid\r\n     */\r\n    validate: function () {\r\n        this.isValid([]);\r\n    },\r\n    /* \r\n     * Public method to determine if a value is valid or not\r\n     */\r\n    isValid: function (invalidElements) {\r\n        var self = this;\r\n        var bValid = true;\r\n\r\n        // Clear error message\r\n        self.hasErrors = false;\r\n        self.setValidationMessage(\"\");\r\n\r\n        // Check for required columns and null values\r\n        if (self.properties.data && self.properties.data.rows) {\r\n            var newRows = self.getDataNewRows();\r\n            // Preserve elements in data.rows\r\n            // Check required\r\n            if (newRows.length == 0 && bizagi.util.parseBoolean(self.properties.required)) {\r\n                if (!self.hasValue()) {\r\n                    message = self.getResource(\"render-required-text\").replaceAll(\"#label#\", self.properties.displayName);\r\n                    invalidElements.push({\r\n                        xpath: self.properties.xpath,\r\n                        message: message\r\n                    });\r\n                    bValid = false;\r\n                }\r\n            }\r\n\r\n            var data = $.merge($.merge([], self.properties.data.rows), newRows);\r\n\r\n            for (var i = 0; i < self.columns.length; i++) {\r\n                var messages = [];\r\n                var uniqueMessages = {};\r\n\r\n                for (var j = 0; j < data.length; j++) {\r\n                    var value = data[j][i + 1];\r\n                    var key = data[j][0];\r\n                    var xpath = self.columns[i].properties.xpath;\r\n                    if (self.changes[key] !== undefined && self.changes[key][self.columns[i].properties.xpath] !== undefined) {\r\n                        value = self.changes[key][self.columns[i].properties.xpath];\r\n                    }\r\n\r\n                    // Check if the column is valid\r\n                    var valueValid = self.columns[i].isValueValid(key, value, messages, self.getCellOverride(key, i));\r\n                    if (!valueValid) {\r\n                        bValid = false;\r\n\r\n                        self.hasErrors = true;\r\n                        self.setError(key, self.columns[i].properties.xpath);\r\n                    }\r\n                }\r\n                for (var k = 0, messagesLength = messages.length; k < messagesLength; k++) {\r\n                    if (uniqueMessages[messages[k]] == null) {\r\n                        uniqueMessages[messages[k]] = messages[k];\r\n                    }\r\n                }\r\n\r\n                if (messages.length > 0) {\r\n                    var gridValidationMessage = self.getResource(\"render-grid-validation\").replaceAll(\"#grid#\", self.properties.displayName);\r\n                    for (key in uniqueMessages) {\r\n                        invalidElements.push({\r\n                            xpath: self.properties.xpath,\r\n                            message: gridValidationMessage + \" \" + key\r\n                        });\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        return bValid;\r\n    },\r\n    /*\r\n     *   Enables submit on change feature for the current render\r\n     */\r\n    configureSubmitOnChange: function () {\r\n        // Don't do anything we will trigger submit on change manually only when the grid add or edit form has been edited   \r\n    },\r\n    /*\r\n     *   Get cell override\r\n     */\r\n    getCellOverride: function (key, column) {\r\n        var self = this;\r\n\r\n        // Convert to numbers\r\n        key = Number(key);\r\n        column = Number(column);\r\n\r\n        // Find overrides\r\n        var columnProperties = self.columns[column].properties;\r\n        if (!self.cellOverrides[key])\r\n            self.cellOverrides[key] = {};\r\n        if (!self.cellOverrides[key][column]) {\r\n            self.cellOverrides[key][column] = {\r\n                visible: columnProperties.visible,\r\n                editable: columnProperties.editable,\r\n                required: columnProperties.required\r\n            };\r\n        }\r\n\r\n        return self.cellOverrides[key][column];\r\n    },\r\n\r\n    /*\r\n     * Set cell overrides based on the data\r\n     */\r\n    setCellOverrides: function (data, columns) {\r\n        var self = this;\r\n        var key;\r\n\r\n        // Init visibility overrides\r\n        if (data.visible) {\r\n            for (var i = 0, len = data.visible.length; i < len; i++) {\r\n                key = data.visible[i][0];\r\n                for (var j = 0, len_v = data.visible[i].length; j < len_v; j++) {\r\n                    // Skip key columns\r\n                    if (j > 0)\r\n                        self.getCellOverride(key, j - 1).visible = bizagi.util.parseBoolean(data.visible[i][j]);\r\n                }\r\n            }\r\n        }\r\n\r\n        // Init editability overrides\r\n        if (data.editable) {\r\n            for (var i = 0, len = data.editable.length; i < len; i++) {\r\n                key = data.editable[i][0];\r\n                for (var j = 0, len_v = data.editable[i].length; j < len_v; j++) {\r\n                    // Skip key columns\r\n                    if (j > 0) {\r\n                        var columnEditable = columns ? bizagi.util.parseBoolean(columns[j - 1].properties.editable) : true;\r\n                        self.getCellOverride(key, j - 1).editable = columnEditable ? bizagi.util.parseBoolean(data.editable[i][j]) : false;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        // Init required overrides\r\n        if (data.required) {\r\n            for (var i = 0, len = data.required.length; i < len; i++) {\r\n                key = data.required[i][0];\r\n                for (var j = 0, len_v = data.required[i].length; j < len_v; j++) {\r\n                    // Skip key columns\r\n                    if (j > 0)\r\n                        self.getCellOverride(key, j - 1).required = bizagi.util.parseBoolean(data.required[i][j]);\r\n                }\r\n            }\r\n        }\r\n    },\r\n    /*\r\n     *   Returns the row indexes for the data\r\n     */\r\n    getIndexes: function () {\r\n        var self = this;\r\n        var data = $.merge(self.properties.data.rows, self.getDataNewRows());\r\n        return $.map(data, function (item, i) {\r\n            return item[0];\r\n        });\r\n    },\r\n    /**\r\n     *  Return object with value of all new records unsaved within the grid\r\n     *  @return {object} all new records\r\n     */\r\n    getDataNewRows: function () {\r\n        var self = this;\r\n        var newRows = [];\r\n\r\n        if (typeof self.newRecords == \"object\" && !$.isEmptyObject(self.newRecords)) {\r\n            $.each(self.newRecords, function (rowKey) {\r\n                var cellValue = [];\r\n                cellValue.push(Number(rowKey));\r\n                for (var i = 0, length = self.columns.length; i < length; i++) {\r\n                    cellValue.push(self.getCellCurrentValue(rowKey, self.columns[i].properties.xpath));\r\n                }\r\n                // Add cell value row to new rows\r\n                newRows.push(cellValue);\r\n            });\r\n        }\r\n        return newRows;\r\n    },\r\n\r\n    /*\r\n     * Return the object with the required url to access the exported grid to the desired format\r\n     *  @return {object} render attributes, including id, xpathContext, idPagecache, disposition (inline or attachment), and exportType (XLS or PDF)\r\n     */\r\n    getGridExportUrl: function (params) {\r\n        var self = this;\r\n        var properties = self.properties;\r\n\r\n        return self.dataService.getGridExportUrl({\r\n            idRender: properties.id,\r\n            xpathContext: properties.xpathContext || \"\",\r\n            idPageCache: properties.idPageCache,\r\n            disposition: params.disposition,\r\n            exportType: params.exportType,\r\n            sort: properties.sort,\r\n            sessionId: self.getSessionId(),\r\n            idForm: self.getFormContainer().properties.id\r\n\r\n        });\r\n    },\r\n\r\n    submitForGridChange: function () {\r\n        var self = this;\r\n        return self.submitOnChange(null, false);\r\n    },\r\n\r\n    dispose: function () {\r\n        var self = this;\r\n\r\n        setTimeout(function () {\r\n            if (self.columns) {\r\n                $.each(self.columns, function (i, column) {\r\n                    column.dispose();\r\n                });\r\n            }\r\n        }, bizagi.override.disposeTime || 50);\r\n\r\n        // Call base\r\n        self._super();\r\n    },\r\n\r\n    getEnabledChecks: function (params) {\r\n        var self = this;\r\n        var properties = self.properties;\r\n        params = params || {};\r\n        $.extend(params, {\r\n            url: properties.dataUrl,\r\n            xpath: properties.xpath,\r\n            idRender: properties.id,\r\n            xpathContext: properties.xpathContext,\r\n            contexttype: properties.contextType,\r\n            idPageCache: properties.idPageCache,\r\n            rows: properties.rowsPerPage,\r\n            xpathfilter: params.xpath\r\n        });\r\n        // Default ajax call\r\n        var defer = new $.Deferred();\r\n        // Resolve with remote data\r\n        self.dataService.multiaction().getGridDataExclusivesSelected(params).done(function (data) {\r\n            // Resolve with fetched data\r\n            properties.page = data.page;\r\n            properties.records = data.records;\r\n            properties.totalPages = data.totalPages;\r\n\r\n            // Check RTL\r\n            if (self.isRTL()) {\r\n                data.rows = self.changeOrderData(data.rows);\r\n            }\r\n            defer.resolve(data);\r\n        });\r\n        return defer.promise();\r\n    },\r\n\r\n    buildCellXpathFilter: function (key) {\r\n        if (bizagi.util.isNumeric(key)) return \"[id=\" + key + \"]\";\r\n        return \"[id='\" + key + \"']\";\r\n    },\r\n\r\n    cleanNewRecords: function () {\r\n        // Mark it as saved\r\n        this.newRecords = {};\r\n    },\r\n\r\n    /**\r\n     *\r\n     * Customizes render background color\r\n     *\r\n     * This method is called when the backgroud color is setted by Form Designer\r\n     *\r\n     * @param color\r\n     */\r\n    changeBackgroundColor: function (color) {\r\n        this._super(color);\r\n\r\n        var control = this.getControl();\r\n        control.find(\".bz-rn-grid-header-title\").css(\"background-color\", color, \"!important\");\r\n        control.find(\".bz-rn-grid-container-foother\").css(\"background-color\", color, \"!important\");\r\n\r\n        return this;\r\n    },\r\n\r\n    /**\r\n     * Check has header format\r\n     * @returns {boolean}\r\n     */\r\n    hasColorHeader: function () {\r\n        var headerFormat = this.properties.headerFormat || {};\r\n\r\n        return headerFormat ? !bizagi.util.isEmpty(headerFormat.color) : false;\r\n    },\r\n\r\n    /**\r\n     * Check if the orientation is RTL\r\n     * @param parent\r\n     * @param orientation\r\n     * @returns {*|boolean|boolean}\r\n     */\r\n    isRTLOrientation: function(parent, orientation){\r\n        if ((!orientation || orientation === \"auto\") && parent) {\r\n            return this.isRTLOrientation(parent.parent, parent.properties.orientation);\r\n        }\r\n\r\n        return /^rtl$/i.test(orientation);\r\n    },\r\n\r\n    /**\r\n     * Check If has changes for send to server\r\n     * @returns {boolean}\r\n     */\r\n    canBeExport: function () {\r\n        var self = this;\r\n        var renderValues = {};\r\n\r\n        for (var id in self.changes) {\r\n            // Don't collect data from totalizers\r\n            if (id !== \"summary\") {\r\n                for (var columnXpath in self.changes[id]) {\r\n                    // Check if the render can submit data\r\n                    if (self.canColumnBeSent(id, columnXpath)) {\r\n                        var xpath = self.properties.xpath + self.buildCellXpathFilter(id) + \".\" + columnXpath;\r\n                        var value = self.changes[id][columnXpath];\r\n\r\n                        renderValues[xpath] = value;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        return Object.keys(renderValues).length === 0;\r\n    }, \r\n    getExclusiveChangeByRow: function(idRow){\r\n        var value = {};\r\n        for (var xpath in this.enabledChecks) {\r\n            if (this.enabledChecks.hasOwnProperty(xpath)) {\r\n                var obj = (this.enabledChecks[xpath] || []).find(function(el){\r\n                    return el.id == idRow && el.changed;\r\n                });\r\n                if (obj){\r\n                    value[xpath] = obj.value;\r\n                }\r\n            }\r\n        }\r\n        return value;\r\n    },\r\n\r\n});\r\n","/**\r\n *   Name: Bizagi Render Hidden Class\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define basic stuff for hiddens\r\n */\r\n\r\n$.Class.extend(\"bizagi.rendering.hidden\", {}, {\r\n\r\n    /**\r\n     * Returns the in-memory processed element\r\n     */\r\n    renderControl: function () {\r\n        if (this.getMode() === \"design\") {\r\n            return \"<div>\" + bizagi.localization.getResource(\"render-hidden-displayName\") + \"</div>\";\r\n        } else {\r\n            return \"<div />\";\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Template method to implement in each device to customize each render after processed\r\n     */\r\n    postRender: function () {\r\n        var properties = this.properties;\r\n\r\n        // Call base\r\n        this._super();\r\n\r\n        // Set the initial value\r\n        if (properties.value !== undefined) {\r\n            this.setDisplayValue(properties.value);\r\n        }\r\n    }\r\n\r\n});\r\n","/**\r\n *   Name: Bizagi Render Label Class\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define basic stuff for labels\r\n */\r\n$.Class.extend(\"bizagi.rendering.label\", {}, {\r\n\r\n    /**\r\n     * Update or init the element data\r\n     * @param {} data\r\n     * @returns {}\r\n     */\r\n    initializeData: function (data) {\r\n        var self = this;\r\n\r\n        // Call base\r\n        self._super(data);\r\n\r\n        // A label itself is never \"required\" as other controls\r\n        var properties = self.properties;\r\n        properties.required = false;\r\n\r\n        // Set properties\r\n        self.properties.displayType = \"label\";\r\n        //self.properties.labelAlign = self.originalProperties.labelAlign || \"left\";\r\n        self.properties.displayName = data.properties.displayName || \"\";\r\n\r\n        if (bizagi.util.parseBoolean(self.properties.allowDinamiclabel)) {\r\n            this.properties.displayName = data.properties.displayName || bizagi.localization.getResource(\"render-label-default-display-name\");\r\n        }\r\n\r\n        self.bindingValue();\r\n\r\n        // Calculate layout properties\r\n        self.calculateInitialLayoutProperties();\r\n    },\r\n\r\n    /**\r\n     * Template method to implement in each device to customize each render after processed\r\n     */\r\n    postRender: function () {\r\n        this._super();\r\n        // Just apply display-type: label, align it to the left\r\n        this.changeDisplayOption(\"label\");\r\n        //this.changeLabelAlign(this.properties.labelAlign || \"left\");\r\n\r\n        if (typeof this.configureHelpText == \"function\")\r\n            this.configureHelpText();\r\n    },\r\n\r\n    /**\r\n     * Template method to implement in each device to customize each render after processed in read-only mode\r\n     */\r\n    postRenderReadOnly: function () {\r\n        this._super();\r\n        // Just apply display-type: label, align it to the left\r\n        this.changeDisplayOption(\"label\");\r\n        this.changeLabelAlign(this.properties.labelAlign || \"left\");\r\n    },\r\n\r\n    /**\r\n     * Public method to determine if a value is valid or not\r\n     * @param {} invalidElements\r\n     */\r\n    isValid: function (invalidElements) {\r\n        // Automatically this render is valid, so we can't check a required label\r\n    },\r\n\r\n    /**\r\n     * Method to determine if the render value can be sent to the server or not\r\n     * @returns {}\r\n     */\r\n    canBeSent: function () {\r\n        // This render cannot be sent because it is full ajax\r\n        return false;\r\n    },\r\n\r\n    bindingValue: function () {\r\n        var self = this;\r\n\r\n        if (self.properties.allowDinamiclabel && self.properties.value) {\r\n            if (typeof (self.properties.value) === \"object\" && self.properties.value[0]) {\r\n                self.properties.displayName = self.properties.value[0].value;\r\n            } else if (typeof (self.properties.value) === \"string\" && self.properties.value !== \"\") {\r\n                self.properties.displayName = self.properties.value;\r\n            }\r\n        }\r\n    },\r\n\r\n    controlValueIsChanged: function(){\r\n        //Labels never change\r\n        return false;\r\n    }\r\n\r\n});\r\n","/*\r\n *   Name: Bizagi Render Search Class\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define basic stuff for search renders\r\n */\r\n\r\n$.Class.extend(\"bizagi.rendering.search\", {}, {\r\n    /**\r\n     * Update or init the element data\r\n     * @param {} data\r\n     * @returns {}\r\n     */\r\n    initializeData: function (data) {\r\n        var self = this;\r\n\r\n        // Call base\r\n        self._super(data);\r\n\r\n        // Fill default properties\r\n        var properties = this.properties;\r\n\r\n        properties.searchForms = properties.searchForms || [];\r\n\r\n        // Default maxRecords is 20\r\n        properties.maxRecords = Number(properties.maxRecords) || 20;\r\n        properties.advancedSearch = (bizagi.util.parseBoolean(properties.advancedSearch) === null) ? false : bizagi.util.parseBoolean(properties.advancedSearch);\r\n        properties.allowSuggest = bizagi.util.parseBoolean(properties.allowSuggest) !== null ? bizagi.util.parseBoolean(properties.allowSuggest) : false;\r\n        properties.allowFullSearch = properties.allowFullSearch || false;\r\n        properties.allowAdd = bizagi.util.parseBoolean(properties.allowAdd) || false;\r\n        properties.allowTyping = bizagi.util.parseBoolean(properties.allowTyping) !== null ? bizagi.util.parseBoolean(properties.allowTyping) : false;\r\n        properties.allowTyping = bizagi.util.parseBoolean(properties.allowSuggest) ? true : properties.allowTyping;\r\n        properties.allowClear = bizagi.util.parseBoolean(properties.allowClear) !== null ? bizagi.util.parseBoolean(properties.allowClear) : false;\r\n        properties.editable = bizagi.util.parseBoolean(properties.editable) !== null ? bizagi.util.parseBoolean(properties.editable) : true;\r\n\r\n        // This length defines the behavior of the suggest, 2 characters are used by default meaning after 2 characters are written the search will take place\r\n        properties.searchLength = properties.searchLength || 2;\r\n\r\n        // Expire local storage cache\r\n        properties.enableLocalStorage = false;\r\n        properties.expireCache = 1000 * 60 * 15; // 15 minutes\r\n\r\n        // QAF-3297 - Compatibility for old versions of advanced search where the \"submitOnChange\" property default is true\r\n        // New \"submitVersion\" property default is 2\r\n        if (properties.advancedSearch && self.getMode() === \"execution\") {\r\n            properties.submitOnChange = bizagi.util.parseBoolean(properties.submitOnChange) || false;\r\n            properties.submitOnChange = (properties.submitVersion || 1) > 1 ? properties.submitOnChange : true;\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Template method to implement in each children to customize each control\r\n     * @returns {}\r\n     */\r\n    renderControl: function () {\r\n        var self = this;\r\n        var properties = self.properties;\r\n        var template = self.renderFactory.getTemplate(\"search\");\r\n\r\n        return $.fasttmpl(template, {\r\n            id: properties.id,\r\n            xpath: properties.xpath,\r\n            allowTyping: properties.allowTyping,\r\n            advancedSearch: properties.advancedSearch,\r\n            allowSuggest: properties.allowSuggest,\r\n            editable: properties.editable,\r\n            allowClear: properties.allowClear,\r\n            hasValue: self.hasValue(),\r\n        });\r\n    },\r\n\r\n    /**\r\n     * Fetch the data into a deferred\r\n     * @param {} params\r\n     * @returns {}\r\n     */\r\n    getData: function (params) {\r\n        var self = this;\r\n        var properties = self.properties;\r\n        var defer = new $.Deferred();\r\n        var form = self.getFormContainer();\r\n        var contextType = form.getContextType() || form.params.contexttype || false;\r\n\r\n        params = params || {};\r\n\r\n        // Verify context type\r\n        if (self.properties.contexttype) {\r\n            params.h_contexttype = self.properties.contexttype;\r\n        } else if (contextType) {\r\n            params.h_contexttype = contextType;\r\n        }\r\n\r\n        params.h_contexttype = self.properties.enableQuerySuggestBehavior ? \"metadata\" : params.h_contexttype;\r\n\r\n        // QA-471 When the contexttype is metadata it does not send xpathcontext\r\n        if (params && params.h_contexttype && params.h_contexttype === 'metadata') {\r\n            properties.xpathContext = '';\r\n        }\r\n\r\n        // BA35025 - JFA\r\n        if (properties.term.indexOf(\"\\'\") > -1) {\r\n            var regexC = new RegExp(\"\\'\", \"g\");\r\n            properties.term = properties.term.replace(regexC, \"\\\\'\\\\'\");\r\n        }\r\n\r\n        // QAF-6448 - JFA\r\n        if (properties.term.indexOf(\"\\\"\") > -1) {\r\n            var regexC = new RegExp(\"\\\"\", \"g\");\r\n            properties.term = properties.term.replace(regexC, \"\\\"\");\r\n        }\r\n\r\n        // Resolve with remote data\r\n        self.dataService.multiaction().getSearchData({\r\n            url: properties.dataUrl,\r\n            contexttype: params.h_contexttype,\r\n            xpath: properties.xpath,\r\n            idRender: properties.id,\r\n            xpathContext: properties.xpathContext,\r\n            idPageCache: properties.idPageCache,\r\n            term: (properties.allowFullSearch) ? \"%\" + properties.term : properties.term,\r\n            extra: params\r\n        }).done(function (data) {\r\n            // Resolve with fetched data\r\n            properties.data = data;\r\n            defer.resolve(properties.data);\r\n        }).fail(function (data) {\r\n            var hideStatus = data.hideStatus || false;\r\n\r\n            defer.resolve({});\r\n\r\n            if (!hideStatus) {\r\n                self.trigger(\"onSearchError\", data);\r\n            }\r\n        });\r\n\r\n        return defer.promise(defer);\r\n    },\r\n\r\n    /**\r\n     * Sets the internal value\r\n     * @param {} value\r\n     * @param {} triggerEvents\r\n     * @returns {}\r\n     */\r\n    setValue: function (value, triggerEvents) {\r\n        var self = this;\r\n        triggerEvents = triggerEvents !== undefined ? triggerEvents : true;\r\n\r\n        self._super(value, triggerEvents);\r\n\r\n        if (value != undefined) {\r\n            this.value = value;\r\n            this.selectedValue = value.label;\r\n        } else {\r\n            this.value = null;\r\n            this.selectedValue = null;\r\n        }\r\n    },\r\n\r\n    /* Maps the value, when this one comes from actions*/\r\n    mapValue: function (value) {\r\n        if (value && value.fromAction) {\r\n            return {\r\n                id: value.value,\r\n                value: value.label,\r\n                label: value.label\r\n            }\r\n        }\r\n\r\n        return value;\r\n    },\r\n\r\n    /*\r\n    *   Add the render data to the given collection in order to send data to the server\r\n     */\r\n    collectData: function (renderValues) {\r\n        var self = this;\r\n        var xpath = self.properties.xpath;\r\n        var value = self.getValue();\r\n\r\n        if (self.controlValueIsChanged()) {\r\n            // Filter by valid xpaths and valid values\r\n            // Remove empty validation for value for combos\r\n            if (!bizagi.util.isEmpty(xpath) && value !== null && typeof (value) !== \"undefined\") {\r\n                // Add a validation because sometimes value contains an empty not null object\r\n                if (typeof (value) == \"object\" && value.id === undefined)\r\n                    return;\r\n                // Add the value to the server\r\n                renderValues[xpath] = value;\r\n            }\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Submits the selected data to the server in order to be saved\r\n     * @returns {}\r\n     */\r\n    submitData: function () {\r\n        var self = this;\r\n        var data = {};\r\n\r\n        // Add current data\r\n        if (!self.grid) {\r\n            data[self.properties.xpath] = self.getValue();\r\n        }\r\n\r\n        // Executes submit on change\r\n        self.submitOnChange(data, undefined, false);\r\n    },\r\n\r\n    /**\r\n     * Check if control is valid or not\r\n     * @param {} invalidElements\r\n     * @returns {}\r\n     */\r\n    isValid: function (invalidElements) {\r\n        return this._super(invalidElements);\r\n    },\r\n\r\n    hasValue: function () {\r\n        var value = this.getValue();\r\n\r\n        if (typeof (value) == \"undefined\" || value == null) return false;\r\n\r\n        if (typeof value === \"object\" && value.id !== \"\" && typeof (value.id) !== \"undefined\") return true;\r\n        return !bizagi.util.isEmpty(value);\r\n    },\r\n\r\n    /**\r\n     * Formats value of each item\r\n     * @param {string, boolean or array} value\r\n     * @example\r\n     * value = \"string\" => \"string\"\r\n     * value = true => \"yes\" or \"si\", the localized value\r\n     * value = false => \"no\", the localized value\r\n     * value = [\"string 1\", \"string 2\"] => \"string 1 - string 2\"\r\n     * @returns {string}\r\n     */\r\n    formatItem: function (value) {\r\n        return bizagi.util.formatItem(value);\r\n    }\r\n\r\n});\r\n","/**\r\n *   Name: Bizagi Render Text Class\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define basic stuff for text renders\r\n */\r\n\r\n$.Class.extend(\"bizagi.rendering.text\", {}, {\r\n\r\n    /**\r\n     * Update or init the element data\r\n     * @param data\r\n     */\r\n    initializeData: function (data) {\r\n        // Call base\r\n        this._super(data);\r\n\r\n        // Fill default properties\r\n        var properties = this.properties;\r\n\r\n        if (properties.regularExpressionExpression) {\r\n            var message = properties.regularExpressionMessage || this.getResource(\"render-text-regular-expression-default-message\");\r\n            properties.regularExpression = {\"expression\": properties.regularExpressionExpression, \"message\": message};\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Template method to implement in each children to customize each control\r\n     * @returns {*}\r\n     */\r\n    renderControl: function () {\r\n        var template = this.renderFactory.getTemplate(\"text\");\r\n\r\n        // Render template\r\n        var html = $.fasttmpl(template, {\r\n            value: this.properties.value,\r\n            isEmptyField: typeof (this.properties.value) === \"undefined\",\r\n            helpText: this.properties.helpText,\r\n            editable: this.properties.editable\r\n        });\r\n\r\n        return html;\r\n    },\r\n\r\n    /**\r\n     * Method to render non editable values\r\n     */\r\n    renderReadOnly: function () {\r\n        var template = this.renderFactory.getTemplate(\"text-read-only\");\r\n        var value = this.getValue();\r\n\r\n        if (bizagi.util.isString(value)) {\r\n            value = value.replaceAll(\"`\", \"&#96;\");\r\n        }\r\n\r\n        // Render template\r\n        return $.fasttmpl(template, {value: value, editable: this.properties.editable});\r\n    },\r\n\r\n    /**\r\n     * Template method to implement in each device to customize each render after processed\r\n     */\r\n    postRender: function () {\r\n        // Call base\r\n        this._super();\r\n\r\n        this.input = this.getControl().find(\"input\");\r\n\r\n        //Attach event for retype double\r\n        if (this.properties.retype === \"double\")\r\n            this.attachRetypeDouble();\r\n    },\r\n\r\n    /**\r\n     * function virtual implements on children (desktop,samrtphone...).\r\n     */\r\n    attachRetypeDouble: function () {\r\n    },\r\n\r\n    /**\r\n     * Template method to implement in each device to customize the render's behaviour to add handlers\r\n     */\r\n    configureHandlers: function () {\r\n        var self = this;\r\n        var properties = self.properties;\r\n\r\n        // Check mask property\r\n        if (properties.mask)\r\n            self.input.mask({mask: properties.mask});\r\n\r\n        // Attach change event\r\n        self.input.bind(\"change\", function () {\r\n\r\n            // Updates internal value\r\n            self.setValue(self.input.val(), false);\r\n\r\n            // Check that the value is valid\r\n            var validationMessages = [];\r\n            if (properties.retype !== \"duplicate\") {\r\n                if (self.isValid(validationMessages) || typeof (properties.regularExpression) === \"undefined\") {\r\n                    // Update value again triggering handlers\r\n                    self.setValue(self.input.val(), true);\r\n                }\r\n            }\r\n\r\n        }).keypress(function (e) {\r\n            e = window.event || e;\r\n            var keyUnicode = e.charCode || e.keyCode;\r\n\r\n            if (e !== undefined) {\r\n                if (keyUnicode == 13) {\r\n                    $(this).trigger(\"change\");\r\n                }\r\n            }\r\n        });\r\n    },\r\n\r\n    /**\r\n     * Public method to determine if a value is valid or not\r\n     * @param invalidElements\r\n     * @returns {*}\r\n     */\r\n    isValid: function (invalidElements) {\r\n        var self = this;\r\n        var properties = self.properties;\r\n        // Call base\r\n        var bValid = this._super(invalidElements);\r\n        var value = self.getValue();\r\n\r\n        // When the form have big data, block browser executing RegExp. QAF-1418.\r\n        // Check regular expression\r\n        if (typeof value == \"string\") {\r\n            if (properties.regularExpression) {\r\n                var regex = new RegExp(\"\");\r\n                try {\r\n                    regex = new RegExp(properties.regularExpression.expression);\r\n                } catch (e) {\r\n                    if (bizagi.override.showDesignValidations) {\r\n                        bizagi.log(e);\r\n                        invalidElements.push({xpath: properties.xpath, message: e.message});\r\n                        bValid = false;\r\n                    }\r\n                }\r\n\r\n                if (value && ((value.match(new RegExp(\".*?(<|\\\\u003C)(.+?)(>|\\\\u003E)(.?)|eval\\\\(|eval\\\\u0028\", \"g\"))) || (!value.match(regex) && self.properties && self.properties.xpath === \"userName\"))) {\r\n                    var message = properties.regularExpression.message;\r\n                    invalidElements.push({xpath: properties.xpath, message: message});\r\n                    bValid = false;\r\n                } else {\r\n                    if (value && ((value.match(new RegExp(\".*?(<|\\\\u003C)(.+?)(>|\\\\u003E)(.?)|eval\\\\(|eval\\\\u0028\", \"g\"))) || (!value.match(regex)))) {\r\n                        var message = properties.regularExpression.message;\r\n                        invalidElements.push({xpath: properties.xpath, message: message});\r\n                        bValid = false;\r\n                    }\r\n                }\r\n            } else {\r\n                // Strange behavior on IE. When matchs are united on IE have is very slow\r\n                // solution, divide matchs\r\n                //.*? means for more information search: \"Lazy matching regexp\"\r\n                if (value && (value.match(new RegExp(\".*?eval\\\\(\", \"g\"))) && (value.match(new RegExp(\".*?eval\\\\u0028\", \"g\")))) {\r\n                    if (properties.editable) {\r\n                        var message = this.getResource(\"render-text-regular-expression-default-message\");\r\n\r\n                        invalidElements.push({xpath: properties.xpath, message: message});\r\n                        bValid = false;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        return bValid;\r\n    },\r\n\r\n    /**\r\n     * Sets the value in the rendered control\r\n     * @param value\r\n     */\r\n    setDisplayValue: function (value) {\r\n        var self = this;\r\n        var control = self.getControl();\r\n        var decodedValue = bizagi.util.decodeURI(value);\r\n\r\n        if (!bizagi.util.parseBoolean(self.properties.editable)) {\r\n            // Render as simple value\r\n            if (typeof (value) === \"string\") {\r\n                // Replace line breaks for html line breaks\r\n                var valueToDisplay = bizagi.util.decodedDisplayValue(self.getDisplayValue());\r\n\r\n                control.html(\"<label class='readonly-control'>\" + valueToDisplay + \"</label>\");\r\n            } else {\r\n                if (bizagi.util.isNull(value)) {\r\n                    control.html(\"\");\r\n                }\r\n            }\r\n        }\r\n\r\n        // Set internal value\r\n        self.setValue(decodedValue, false);\r\n    },\r\n\r\n    /**\r\n     * Extend setValue to fix all encode data from database\r\n     * @param value\r\n     */\r\n    setValue: function (value) {\r\n        this._super(value);\r\n    },\r\n\r\n    /**\r\n     * Helptext tooltip\r\n     * @param {} control\r\n     * @param {} currentValue\r\n     * @param {} currentTitle\r\n     */\r\n    createTooltip: function (control, currentValue, currentTitle) {\r\n        control.data(\"oldValue\", currentValue);\r\n        control.val(\"\");\r\n        \r\n        if(control.data('ui-tooltip')) control.tooltip('destroy');  \r\n        \r\n        control.attr(\"title\", currentTitle);\r\n        control.tooltip();\r\n\r\n        var toolTipZindex = $.getMaxZindex();\r\n        control.tooltip().on(\"tooltipopen\", function (event, ui) {\r\n            ui.tooltip.zIndex(toolTipZindex);\r\n        });\r\n\r\n        // Create new tooltip\r\n        control.tooltip(\"open\");\r\n\r\n        setTimeout(function () {\r\n            control.focus();\r\n        }, 100);\r\n    },\r\n\r\n\r\n    //#region No side effects funtions    \r\n    /**\r\n     * Gets the string with the correct size\r\n     * @param {string} value String value to validate\r\n     * @param {Int} maxLength Maximum size of the string\r\n     * @returns {string} String value validated\r\n     */\r\n    validateValue: function (value, maxLength) {\r\n        if (maxLength < 1 || value.length <= maxLength) return value;\r\n        return value.substr(0, maxLength)\r\n    }\r\n    //#endregion No side effects funtions\r\n\r\n});","/*\r\n *   Name: BizAgi Render Radio Class\r\n *   Author: Ivan Ricardo Taimal Narvaez\r\n *   Comments:\r\n *   -   This script will define basic stuff for radio renders\r\n */\r\n\r\n$.Class.extend(\"bizagi.rendering.checkList\", {}, {\r\n\r\n    /*\r\n     *   Update or init the element data\r\n     */\r\n    initializeData: function (data) {\r\n        var self = this;\r\n        // Call base\r\n        this._super(data);\r\n\r\n        // Fill default properties\r\n        var properties = this.properties;\r\n        properties.horizontal = bizagi.util.parseBoolean(properties.horizontal) || false;\r\n        self.setValue(properties.items);\r\n        self.updateOriginalValue();\r\n    },\r\n\r\n    /*\r\n     *   Template method to implement in each device to customize each render after processed\r\n     */\r\n    postRender: function () {\r\n        var self = this;\r\n        var control = self.getControl();\r\n\r\n        // Call base\r\n        self._super();\r\n        self.checkListGroup = $(\".ui-bizagi-render-checkList .ui-bizagi-render-checkList-item\", control);\r\n    },\r\n\r\n    /*\r\n     *   Template method to implement in each children to customize each control\r\n     */\r\n    renderControl: function () {\r\n        var self = this;\r\n        var properties = self.properties;\r\n        var template = self.renderFactory.getTemplate(self.getTemplateName());\r\n        var items = self.properties.items || [];\r\n\r\n        var html = $.fasttmpl(template, $.extend(self.getTemplateParams(), {\r\n            id: properties.id,\r\n            xpath: properties.xpath,\r\n            unique: bizagi.util.randomNumber(10000, 1000000),\r\n            idPageCache: properties.idPageCache,\r\n            items: items\r\n        }));\r\n        return html;\r\n    },\r\n\r\n    /*\r\n     *   Gets the template used by the combo render\r\n     *   can be overriden in subclasses to reuse logic and just change the template\r\n     */\r\n    getTemplateName: function () {\r\n        return \"checkList\";\r\n    },\r\n\r\n    /*\r\n     *   Determines if we need to show the empty node or not\r\n     *   Can be overriden to change behaviour\r\n     */\r\n    showEmpty: function () {\r\n        return false;\r\n    },\r\n\r\n    /*\r\n     *   Determines if we need to show the current data regardless if it belongs to data or not\r\n     *   Can be overriden to change behaviour\r\n     */\r\n    showCurrentData: function () {\r\n        return false;\r\n    },\r\n\r\n    /*\r\n     *   Adds custom parameters to process the template\r\n     */\r\n    getTemplateParams: function () {\r\n        var self = this;\r\n        var properties = self.properties;\r\n\r\n        return {\r\n            vertical: !properties.horizontal\r\n        };\r\n    },\r\n    /*\r\n     * Cleans current data\r\n     */\r\n    cleanData: function () {\r\n\r\n    },\r\n\r\n    setValue: function (value) {;\r\n        this.value = bizagi.clone(value);\r\n    },\r\n\r\n    getValue: function (data) {;\r\n        return this.value || [];\r\n    }\r\n\r\n});\r\n\r\n","/**\r\n * Base definition of a range control\r\n *\r\n * @author: Andres Fernando Munoz\r\n */\r\n\r\n$.Class.extend(\"bizagi.rendering.range\", {}, {\r\n    /*\r\n     * Constructor\r\n     */\r\n    init: function(params) {\r\n        // Call base\r\n        this._super(params);\r\n    },\r\n\r\n    /*\r\n     * Initialize the control with data provided\r\n     */\r\n    initializeData: function(data) {\r\n        var self = this;\r\n        // Call base\r\n        this._super(data);\r\n    },\r\n\r\n\r\n    /*\r\n     * Template method to implement in each children to customize each control\r\n     */\r\n    renderControl: function() {\r\n        var self = this,\r\n            properties = self.properties;\r\n        var template;\r\n        var html = \"\";\r\n        // Render template\r\n        template = self.renderFactory.getTemplate(\"render-range\");\r\n        html = $.fasttmpl(template, {});\r\n        return html;\r\n    },\r\n    /**\r\n     * Sets the range controls in DOM\r\n     * @param minControl: min range control\r\n     * @param maxControl: max range control\r\n     */\r\n    setRanageControls: function (minControl, maxControl){\r\n        var self = this;\r\n        self.minControl = minControl || null;\r\n        self.maxControl = maxControl || null;\r\n        var control = self.getControl();\r\n\r\n        var $maxCanvas = $(\".bz-range-maximum\", control);\r\n        var $minCanvas = $(\".bz-range-minimum\", control);\r\n\r\n        //var $maxCanvas = $('<div>hola</div>');\r\n        //var $minCanvas = $('<div>hola</div>');\r\n\r\n        self.renderRangeControl($minCanvas, minControl);\r\n        self.renderRangeControl($maxCanvas, maxControl);\r\n    },\r\n\r\n    /*\r\n     *   Returns the internal value\r\n     */\r\n    getValue: function () {\r\n        var self = this;\r\n        var minValue = self.minControl.getValue();\r\n        var maxValue = self.maxControl.getValue();\r\n\r\n        var value = {\r\n            min: minValue,\r\n            max: maxValue\r\n        };\r\n        return value;\r\n    },\r\n\r\n    renderRangeControl: function ($canvas, control){\r\n        $.when(control.render(\"render\")).done(function (html) {\r\n            $canvas.empty().append(html);\r\n            control.postRenderElement($canvas);\r\n        });\r\n    }\r\n});\r\n","/**\r\n * Base definition of a range date control\r\n *\r\n * @author: Andres Fernando Munoz\r\n */\r\n\r\n$.Class.extend(\"bizagi.rendering.rangeDate\", {}, {\r\n\r\n    /**\r\n     * Defines de min date an de max date to the range control\r\n     */\r\n    defineRangeControl: function (params) {\r\n        var self = this;\r\n\r\n        var dateMin = bizagi.rendering.date.extend({\r\n            suscribe: function (control) {\r\n                this.observer = this.observer || [];\r\n                this.observer.push(control);\r\n            },\r\n\r\n            notify: function (value) {\r\n                for (var i = this.observer.length - 1 ; i >= 0; i--) {\r\n                    this.observer[i].changeMinValue(value);\r\n                }\r\n            },\r\n\r\n            setValue: function (value) {\r\n                value = value || \"\";\r\n                this._super(value);\r\n                this.notify(value);\r\n            }\r\n        });\r\n\r\n        var dateMax = bizagi.rendering.date.extend({\r\n            suscribe: function (control) {\r\n                this.observer = this.observer || [];\r\n                this.observer.push(control);\r\n            },\r\n\r\n            notify: function (value) {\r\n                for (var i = this.observer.length - 1; i >= 0; i--) {\r\n                    this.observer[i].changeMaxValue(value);\r\n                }\r\n            },\r\n\r\n            setValue: function (value) {\r\n                value = value || \"\";\r\n                this._super(value);\r\n                this.notify(value);\r\n            }\r\n        });\r\n\r\n\r\n        var minControl = new dateMin(self.getRenderProperties(\"min\"));\r\n        var maxControl = new dateMax(self.getRenderProperties(\"max\"));\r\n\r\n        minControl.suscribe(maxControl);\r\n        maxControl.suscribe(minControl);\r\n\r\n\r\n        self.setRanageControls(minControl, maxControl);\r\n    },\r\n\r\n    getRenderProperties: function (typeRangeControl) {\r\n        var self = this;\r\n        var form = self.getFormContainer();\r\n        var properties = self.properties;\r\n\r\n        var renderProperties = {\r\n            data: {\r\n                properties: {\r\n                    \"id\": properties.id,\r\n                    \"xpath\": properties.xpath + \"_\" + typeRangeControl,\r\n                    \"displayType\": \"value\"\r\n                }\r\n            },\r\n            mode: \"execute\",\r\n            parent: form,\r\n            renderFactory: self.renderFactory,\r\n            resources: bizagi.localization,\r\n            dataService: self.dataService\r\n        };\r\n\r\n        if (typeRangeControl === \"min\") {\r\n            renderProperties.data.properties.displayName = \"From\";\r\n        } else {\r\n            renderProperties.data.properties.displayName = \"To\";\r\n        }\r\n\r\n        return renderProperties;\r\n    }\r\n});\r\n","/**\r\n * Base definition of a range money control\r\n *\r\n * @author: Andres Fernando Munoz\r\n */\r\n\r\n$.Class.extend(\"bizagi.rendering.rangeMoney\", {}, {\r\n    \r\n    /**\r\n     * Defines de min money an de max money to the range control\r\n     */\r\n    defineRangeControl: function () {\r\n        var self = this;\r\n\r\n        var moneyMin = bizagi.rendering.money.extend({\r\n            suscribe: function (control) {\r\n                this.observer = this.observer || [];\r\n                this.observer.push(control);\r\n            },\r\n\r\n            notify: function (value) {\r\n                for (var i = this.observer.length - 1 ; i >= 0; i--) {\r\n                    this.observer[i].changeMinValue(value);\r\n                }\r\n            },\r\n\r\n            setValue: function (value) {\r\n                value = value || \"\";\r\n                this._super(value);\r\n                this.notify(value);\r\n            }\r\n        });\r\n\r\n        var moneyMax = bizagi.rendering.money.extend({\r\n            suscribe: function (control) {\r\n                this.observer = this.observer || [];\r\n                this.observer.push(control);\r\n            },\r\n\r\n            notify: function (value) {\r\n                for (var i = this.observer.length - 1; i >= 0; i--) {\r\n                    this.observer[i].changeMaxValue(value);\r\n                }\r\n            },\r\n\r\n            setValue: function (value) {\r\n                value = value || \"\";\r\n                this._super(value);\r\n                this.notify(value);\r\n            }\r\n        });\r\n\r\n        var minControl = new moneyMin(self.getRenderProperties(\"min\"));\r\n        var maxControl = new moneyMax(self.getRenderProperties(\"max\"));\r\n\r\n        minControl.suscribe(maxControl);\r\n        maxControl.suscribe(minControl);\r\n\r\n        self.setRanageControls(minControl, maxControl);\r\n    },\r\n\r\n\r\n    getRenderProperties: function (typeRangeControl){\r\n        var self = this;\r\n        var form = self.getFormContainer();\r\n        var properties = self.properties;\r\n\r\n        var renderProperties = {\r\n            data: {\r\n                properties: {\r\n                    \"id\": properties.id,\r\n                    \"xpath\": properties.xpath + \"_\" + typeRangeControl,\r\n                    \"displayType\": \"value\"\r\n                }\r\n            },\r\n            mode: \"execute\",\r\n            parent: form,\r\n            renderFactory: self.renderFactory,\r\n            resources: bizagi.localization,\r\n            dataService: self.dataService\r\n        };\r\n        return renderProperties;\r\n    }\r\n});\r\n","/**\r\n * Base definition of a range number control\r\n *\r\n * @author: Andres Fernando Munoz\r\n */\r\n\r\n $.Class.extend(\"bizagi.rendering.rangeNumber\", {}, {\r\n\r\n    /**\r\n    * Defines de min number an de max number to the range control\r\n    */\r\n    defineRangeControl: function () {\r\n        var self = this;\r\n\r\n        var numberMin = bizagi.rendering.number.extend({\r\n            suscribe: function (control) {\r\n                this.observer = this.observer || [];\r\n                this.observer.push(control);\r\n            },\r\n\r\n            notify: function (value) {\r\n                for (var i = this.observer.length - 1 ; i >= 0; i--) {\r\n                    this.observer[i].changeMinValue(value);\r\n                }\r\n            },\r\n\r\n            setValue: function (value) {\r\n                value = value || \"\";\r\n                this._super(value);\r\n                this.notify(value);\r\n            }\r\n        });\r\n\r\n        var numberMax = bizagi.rendering.number.extend({\r\n            suscribe: function (control) {\r\n                this.observer = this.observer || [];\r\n                this.observer.push(control);\r\n            },\r\n\r\n            notify: function (value) {\r\n                for (var i = this.observer.length - 1; i >= 0; i--) {\r\n                    this.observer[i].changeMaxValue(value);\r\n                }\r\n            },\r\n\r\n            setValue: function (value) {\r\n                value = value || \"\";\r\n                this._super(value);\r\n                this.notify(value);\r\n            }\r\n        });\r\n\r\n        var minControl = new numberMin(self.getRenderProperties(\"min\"));\r\n        var maxControl = new numberMax(self.getRenderProperties(\"max\"));\r\n\r\n        minControl.suscribe(maxControl);\r\n        maxControl.suscribe(minControl);\r\n\r\n        self.setRanageControls(minControl, maxControl);\r\n    },\r\n\r\n\r\n    getRenderProperties: function (typeRangeControl){\r\n        var self = this;\r\n        var form = self.getFormContainer();\r\n        var properties = self.properties;\r\n\r\n        var renderProperties = {\r\n            data: {\r\n                properties: {\r\n                    \"id\": properties.id,\r\n                    \"xpath\": properties.xpath + \"_\" + typeRangeControl,\r\n                    \"displayType\": \"value\"\r\n                }\r\n            },\r\n            mode: \"execute\",\r\n            parent: form,\r\n            renderFactory: self.renderFactory,\r\n            resources: bizagi.localization,\r\n            dataService: self.dataService\r\n        };\r\n\r\n        return renderProperties;\r\n    }\r\n});\r\n","/**\r\n * Base definition of Action Launcher and Entity template controls\r\n *\r\n * @author: Edward Morales\r\n */\r\n$.Class.extend(\"bizagi.rendering.actionLauncher\", {}, {\r\n\r\n    /*\r\n     * Initialize the control with data provided\r\n     */\r\n    initializeData: function (data) {\r\n        var self = this;\r\n        // Call base\r\n        this._super(data);\r\n        var form = self.getFormContainer();\r\n        this.typeForm = form.properties.typeForm || \"\";\r\n        var mode = self.getMode();\r\n        var properties = self.properties;\r\n\r\n        self.deferredActions = new $.Deferred();\r\n        self.deferredActions.promise();\r\n\r\n        if (mode == \"execution\") {\r\n            self.engine = new bizagi.templateEngine({\r\n                renderFactory: self.renderFactory,\r\n                cache: true,\r\n                autoGenerateData: false,\r\n                templateGuid: properties.selecttemplate\r\n            });\r\n        }\r\n\r\n        // Data of get process property value\r\n        self.processPropertyValueArgs = {\r\n            \"pcaseId\": self.getIdCase(),\r\n            \"pguidEntity\": self.properties.guidEntity,\r\n            \"idRender\": self.properties.id,\r\n            \"xpathContext\": form.properties.xpathContext,\r\n            \"idPageCache\": form.properties.idPageCache,\r\n            \"property\": \"data\",\r\n            \"psurrogatedKey\": self.properties.surrogatedKey,\r\n            \"ptags\": self.properties.tagslist || [],\r\n            \"pmaxitems\": self.properties.maxItems,\r\n            \"pactionXpath\": self.properties.xpathActions\r\n        };\r\n\r\n        self.processPropertyValueDataTmplArgs = {\r\n            \"pactionXpath\": self.properties.xpathActions,\r\n            \"idRender\": self.properties.id,\r\n            \"xpathContext\": form.properties.xpathContext,\r\n            \"idPageCache\": form.properties.idPageCache,\r\n            \"ptemplateGuid\": properties.selecttemplate,\r\n            \"property\": \"dataTemplate\",\r\n            \"xpathActions\": self.properties.xpathActions\r\n        };\r\n\r\n        self.properties.valueWidth = 100;\r\n        self.properties.displayType = \"value\";\r\n        var defaultAllowActions = data.properties.type === \"entityTemplate\" ? false : true;\r\n        self.properties.allowactions = (typeof data.properties.allowactions == \"undefined\")\r\n            ? defaultAllowActions : data.properties.allowactions;\r\n        self.properties.isHorizontal = (typeof data.properties.isHorizontal == \"undefined\")\r\n            ? true : data.properties.isHorizontal;\r\n        self.properties.allowSearch = (typeof data.properties.allowSearch == \"undefined\")\r\n            ? false : data.properties.allowSearch;\r\n        self.properties.selecttemplate = (typeof data.properties.selecttemplate == \"undefined\")\r\n            ? \"\" : data.properties.selecttemplate;\r\n        self.properties.templatetype = (typeof properties.templatetype != \"undefined\")\r\n            ? properties.templatetype : 'none';\r\n\r\n        self.properties.sessionId = form.params.data.sessionId;\r\n\r\n        if (!self.properties.value) {\r\n            self.properties.value = self.value = [];\r\n            self.properties.originalValue = [];\r\n        } else if (typeof self.properties.value == \"string\") {\r\n            self.properties.value = self.value = JSON.parse(self.properties.value);\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Send processpropertyvalue in order to execute an Action\r\n     * This method is used when this control stay in Summary form or Global form\r\n     * @param action\r\n     */\r\n    executeActionImmediately: function (action) {\r\n        var self = this;\r\n        //Execute action immediately\r\n        var form = self.getFormContainer();\r\n\r\n        var processPropertyValueExecuteAction = {\r\n            \"idRender\": self.properties.id,\r\n            \"xpathContext\": form.properties.xpathContext,\r\n            \"idPageCache\": form.properties.idPageCache,\r\n            \"property\": \"executeAction\",\r\n            \"psurrogatedKey\": self.properties.surrogatedKey,\r\n            \"pguidAction\": action.guidAction,\r\n            \"pparameters\": JSON.encode({\r\n                \"idStartScope\": action.idStartScope,\r\n                \"pactionXpath\": self.properties.xpathActions,\r\n                \"idPageCache\": action.idPageCache\r\n            })\r\n        };\r\n\r\n        self.dataService.executeActions(processPropertyValueExecuteAction).done(function (data) {\r\n            self.notifyExecution(data, action);\r\n        }).fail(function (error) {\r\n            // TODO: Create generic mechanism to send notifications\r\n            self.notifyExecution(\"Error\", action);\r\n        });\r\n    },\r\n\r\n    /**\r\n     * notify action execution status\r\n     * @param response\r\n     * @param actionName\r\n     */\r\n    notifyExecution: function (response, actionName) {\r\n        // To override in each device\r\n    },\r\n\r\n    /**\r\n     * Render control in read only mode: properties.editable = false\r\n     * @return {*}\r\n     */\r\n    renderReadOnly: function () {\r\n        return this.renderControl();\r\n    },\r\n\r\n    /**\r\n     * Make a postrender of readonly control\r\n     */\r\n    postRenderReadOnly: function () {\r\n        this.properties.readOnly = true;\r\n        this.postRender();\r\n    },\r\n\r\n    /**\r\n     * Template method to implement in each children to customize each control\r\n     * @return {string}\r\n     */\r\n    renderControl: function () {\r\n        var self = this;\r\n        var properties = self.properties;\r\n        var mode = self.getMode();\r\n        var template;\r\n        var html = \"\";\r\n\r\n        // Render template\r\n        if (mode == \"design\") {\r\n            template = self.renderFactory.getTemplate(\"render-actionLauncher-design\");\r\n            var params = {\r\n                type: properties.type,\r\n                isHorizontal: properties.isHorizontal,\r\n                allowSearch: properties.allowSearch,\r\n                templateDefined: properties.templatetype != 'none',\r\n                allowactions: properties.allowactions\r\n            };\r\n            html = $.fasttmpl(template, params);\r\n        } else if (properties.surrogatedKey) {\r\n            template = self.renderFactory.getTemplate(\"render-actionLauncher\");\r\n            html = $.fasttmpl(template, { allowactions: self.properties.allowactions });\r\n        }\r\n        return html;\r\n    },\r\n\r\n\r\n    /**\r\n     * Public method to determine if a value is valid or not\r\n     * @param invalidElements\r\n     * @return {*}\r\n     */\r\n    isValid: function (invalidElements) {\r\n        var self = this,\r\n            properties = self.properties;\r\n        var value = self.getValue();\r\n        var bValid = false;\r\n\r\n        // Don't check non-editable renders\r\n        if (bizagi.util.parseBoolean(properties.visible) == false) {\r\n            return true;\r\n        }\r\n        // Don't check non-editable renders\r\n        if (bizagi.util.parseBoolean(properties.editable) == false) {\r\n            return true;\r\n        }\r\n\r\n        // Check required\r\n        if (properties.required) {\r\n            if (self.value) {\r\n                if (self.value.length > 0)\r\n                    return true;\r\n                message = self.getResource(\"render-required-register-action\");\r\n                invalidElements.push({ xpath: properties.xpath, message: message });\r\n                return false;\r\n            }\r\n        }\r\n\r\n        return bValid;\r\n    },\r\n\r\n    /**\r\n     * Sets the value in the rendered control\r\n     * @param value\r\n     */\r\n    setDisplayValue: function (value) {\r\n        var self = this;\r\n        var control = self.getControl();\r\n        // TODO: write functionality\r\n        // Set internal value\r\n        self.setValue(value, false);\r\n    },\r\n\r\n    /**\r\n     * Process an action\r\n     * @param action\r\n     */\r\n    actionManager: function (action) {\r\n        var self = this;\r\n        var guidProcess = action.guidProcess || \"\";\r\n        var def = new $.Deferred();\r\n\r\n        action.recordXpath = self.getFormContainer().properties.recordXpath;\r\n\r\n        /**\r\n         * Check if action is a process\r\n         */\r\n        switch (action.actionType) {\r\n            case \"Process\":\r\n                // Verify if case has startform\r\n                var params = {\r\n                    guidWFClass: guidProcess\r\n                };\r\n\r\n                $.when(self.dataService.hasStartForm(params)).done(function (result) {\r\n                    if (result.hasStartForm) {\r\n                        // Open a dialog with startform and wait for Scope\r\n                        $.when(self.processStartForm({\r\n                            guidprocess: guidProcess,\r\n                            title: action.displayName,\r\n                            recordXpath: action.recordXpath\r\n                        })).done(function (idStartScope) {\r\n                            action.idStartScope = idStartScope;\r\n                            def.resolve(action);\r\n                        });\r\n                    } else {\r\n                        // Just add action to queue to be executed on nextEvent\r\n                        def.resolve(action);\r\n                    }\r\n                });\r\n\r\n                break;\r\n            case \"Rule\":\r\n                // Just add action to queue to be executed on nextEvent\r\n                def.resolve(action);\r\n                break;\r\n            case \"Form\":\r\n                // If it has additional xpath this action is a form of collection\r\n                if (action.xpathContext) {\r\n                    $.when(self.processActionFormCollection(action)).done(function (idStartScope) {\r\n                        action.idStartScope = idStartScope;\r\n                        def.resolve(action);\r\n                    });\r\n                } else {\r\n\r\n                    if (action.actionType === \"Form\") {\r\n                        action.xpathContext = undefined;\r\n                        action.contextType = \"entitytemplate\";\r\n                        action.guidEntity = action.guidEntity || self.properties.guidEntity;\r\n                    }\r\n\r\n                    $.when(self.processActionForm(action)).done(function (idStartScope) {\r\n                        action.idStartScope = idStartScope;\r\n                        def.resolve(action);\r\n                    });\r\n                }\r\n                break;\r\n        }\r\n\r\n        return def.promise();\r\n    },\r\n\r\n    /**\r\n     * Add actions within value object\r\n     * @param action\r\n     */\r\n    addActionToQueue: function (action) {\r\n        var self = this;\r\n        var actionsList = self.getValue();\r\n        var formParams = self.getFormContainer().getParams();\r\n\r\n        action.params = action.params || {};\r\n\r\n        var recordXpath = self.properties.xpathContext;\r\n\r\n        switch (action.actionType) {\r\n            case \"Process\":\r\n                action.params = {\r\n                    idStartScope: action.idStartScope,\r\n                    additionalXpaths: self.properties.additionalXpath.join(\",\"),\r\n                    idParentWorkitem: formParams.idWorkitem || bizagi.context.idWorkItem,\r\n                    recordXpath: recordXpath\r\n                };\r\n                break;\r\n            case \"Form\":\r\n                action.params = {\r\n                    idStartScope: action.idStartScope,\r\n                    additionalXpaths: self.properties.additionalXpath.join(\",\"),\r\n                    entityXpath: self.properties.xpathActions,\r\n                    idParentWorkitem: formParams.idWorkitem || bizagi.context.idWorkItem,\r\n                    idEntity: action.idEntity\r\n                };\r\n                break;\r\n            case \"Rule\":\r\n                action.params = {\r\n                    xpathActions: action.xpathActions || \"\",\r\n                    recordXpath: recordXpath\r\n                };\r\n                break;\r\n        }\r\n\r\n        var newValueActionsList = bizagi.clone(actionsList);\r\n        newValueActionsList.push(action);\r\n        self.setValue(newValueActionsList);\r\n        self.setDisplayValue(newValueActionsList);\r\n    },\r\n\r\n    /**\r\n     * Remove action within value object\r\n     * @param index\r\n     */\r\n    removeActionToQueue: function (index) {\r\n        var self = this;\r\n        var newValueActionsList = bizagi.clone(self.getValue());\r\n        newValueActionsList.splice(index, 1);\r\n        self.setValue(newValueActionsList);\r\n        self.setDisplayValue(newValueActionsList);\r\n    },\r\n    /**\r\n     * Add the render data to the given collection in order to send data to the server\r\n     * @param renderValues\r\n     */\r\n    collectData: function (renderValues) {\r\n        var self = this;\r\n        if (self.controlValueIsChanged()) {\r\n            var properties = self.properties;\r\n            var xpath = properties.xpath;\r\n            var controlValue = self.getValue();\r\n            var actions = [];\r\n            $.each(controlValue, function (index, value) {\r\n                var action = {};\r\n                action.params = value.params || {};\r\n                action.guidAction = value.guidAction;\r\n\r\n                actions.push(action);\r\n            });\r\n            renderValues[xpath] = (actions.length == 0) ? \"\" : JSON.encode(actions);\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Util to count how many actions are there\r\n     * @param action\r\n     * @return {number}\r\n     */\r\n    countSameActions: function (action) {\r\n        var self = this;\r\n        var value = self.getValue();\r\n        var count = 0;\r\n        $.each(value, function (key, value) {\r\n            if (value.guidAction == action.guidAction) {\r\n                count++;\r\n            }\r\n        });\r\n        return count;\r\n    },\r\n\r\n    /**\r\n    * Normalize action launcher control properties\r\n    * @param actionsLaucher\r\n    * @returns {*}\r\n    */\r\n    getPropertiesActionLaucher: function (actionsLaucher) {\r\n        var self = this;\r\n        var form = self.getFormContainer();\r\n        /**\r\n         * The properties of actionLaucher have to 7 properties mandatory\r\n         * 0: guidProcess\r\n         * 1: displayName\r\n         * 2: title\r\n         * 3: actionType\r\n         * 4: guidaction\r\n         * 5: xpathContext\r\n         * 6: readOnlyForm: default: false\r\n         */\r\n        for (var i = 0, length = actionsLaucher.length, j = length; i < j; i += 1) {\r\n            //some ocassions server return 6 or 7 items\r\n            //return 6 properties when launch form action from action launcher control.\r\n            //in this case dont return xpathContext.\r\n            // So, add item position 5, simulate xpathContext empty.\r\n            if (actionsLaucher[i].length === 6) {\r\n                actionsLaucher[i].splice(5, 0, \"\");\r\n\r\n                if (actionsLaucher[i][3] == \"Process\" && form.properties.xpathContext) {\r\n                    actionsLaucher[i][5] = form.properties.xpathContext;\r\n                }\r\n            }\r\n        }\r\n\r\n        return actionsLaucher;\r\n    }\r\n});\r\n","/**\r\n * Base definition of entity template\r\n *\r\n * @author: Andres Fernando Muoz\r\n * based on action launcher control\r\n */\r\n$.Class.extend(\"bizagi.rendering.entityTemplate\", {}, {\r\n    /**\r\n     * Constructor\r\n     */\r\n    init: function (params) {\r\n        // Call base\r\n        this._super(params);\r\n    },\r\n\r\n    /**\r\n     * Initialize the control with data provided\r\n     */\r\n    initializeData: function(data) {\r\n        var self = this;\r\n        // Call base\r\n        this._super(data);\r\n        var form = self.getFormContainer();\r\n\r\n        self.deferredActions = new $.Deferred();\r\n        self.deferredActions.promise();\r\n\r\n        // Data of get process property value\r\n        self.processPropertyValueArgs = {\r\n            \"pcaseId\": self.getIdCase(),\r\n            \"pguidEntity\": self.properties.guidEntity,\r\n            \"idRender\": self.properties.id,\r\n            \"xpathContext\": form.properties.xpathContext,\r\n            \"idPageCache\": form.properties.idPageCache,\r\n            \"property\": \"data\",\r\n            \"psurrogatedKey\": self.properties.surrogatedKey\r\n        };\r\n\r\n        self.properties.valueWidth = 100;\r\n        self.properties.displayType = \"value\";\r\n        self.properties.allowactions = (typeof data.properties.allowactions == \"undefined\") ? true : data.properties.allowactions;\r\n\r\n        if(!self.properties.value) {\r\n            self.properties.value = self.value = [];\r\n        } else if(typeof self.properties.value == \"string\") {\r\n            self.properties.value = self.value = JSON.parse(self.properties.value);\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Template method to implement in each children to customize each control\r\n     */\r\n    renderControl: function () {\r\n        var self = this;\r\n        var mode = self.getMode();\r\n        var template;\r\n        var html = \"\";\r\n        // Render template\r\n        if (mode == \"design\") {\r\n            template = self.renderFactory.getTemplate(\"render-entityTemplate-design\");\r\n            html = $.fasttmpl(template, {});\r\n        }\r\n        else if(self.properties.surrogatedKey) {\r\n            template = self.renderFactory.getTemplate(\"render-entityTemplate\");\r\n            html = $.fasttmpl(template, {allowactions: self.properties.allowactions});\r\n        }\r\n        return html;\r\n    },\r\n\r\n    /**\r\n     * Public method to determine if a value is valid or not\r\n     */\r\n    isValid: function (invalidElements) {\r\n        var self = this,\r\n            properties = self.properties;\r\n        // Call base\r\n        var bValid = this._super(invalidElements);\r\n        var value = self.getValue();\r\n        // TODO: write functionality\r\n        return bValid;\r\n    },\r\n\r\n    /**\r\n     * Sets the value in the rendered control\r\n     */\r\n    setDisplayValue: function (value) {\r\n        var self = this;\r\n        var control = self.getControl();\r\n        // TODO: write functionality\r\n        // Set internal value\r\n        self.setValue(value, false);\r\n    }\r\n});","/**\r\n * Base definition of Polymorphic launcher\r\n *\r\n * @author: Edward J Morales\r\n */\r\n\r\n$.Class.extend(\"bizagi.rendering.polymorphicLauncher\", {}, {\r\n\t/*\r\n\t * Constructor\r\n\t */\r\n\tinit: function(params) {\r\n\t\t// Call base\r\n\t\tthis._super(params);\r\n\t},\r\n\r\n\t/*\r\n\t * Initialize the control with data provided\r\n\t */\r\n\tinitializeData: function(data) {\r\n\t\tvar self = this;\r\n\t\t// Call base\r\n\t\tthis._super(data);\r\n\t\tvar form = self.getFormContainer();\r\n\t\tthis.typeForm = form.properties.typeForm || \"\";\r\n\t\tvar mode = self.getMode();\r\n\r\n\t\tself.deferredActions = new $.Deferred();\r\n\t\tself.deferredActions.promise();\r\n\r\n\t\tself.properties.valueWidth = 100;\r\n\t\tself.properties.displayType = \"value\";\r\n\t\tself.properties.allowSearch = (typeof data.properties.allowSearch == \"undefined\") ? false : data.properties.allowSearch;\r\n\t\tself.properties.additionalXpath = self.properties.additionalXpath || [];\r\n\r\n\t\tif(!self.properties.value) {\r\n\t\t\tself.properties.value = self.value = [];\r\n\t\t\tself.properties.originalValue = [];\r\n\t\t} else if(typeof self.properties.value == \"string\") {\r\n\t\t\tself.properties.value = self.value = JSON.parse(self.properties.value);\r\n\t\t}\r\n\r\n\t\t// Data of get process property value\r\n\t\tself.processPropertyValueArgs = {\r\n\t\t\t\"pcaseId\": self.getIdCase(),\r\n\t\t\t\"pguidEntity\": self.properties.guidEntity,\r\n\t\t\t\"idRender\": self.properties.id,\r\n\t\t\t\"xpathContext\": form.properties.xpathContext,\r\n\t\t\t\"idPageCache\": form.properties.idPageCache,\r\n\t\t\t\"property\": \"data\",\r\n\t\t\t\"ptags\": self.getTagList(self.properties.tagslist),\r\n\t\t\t\"additionalXpaths\": self.properties.additionalXpath\r\n\t\t};\r\n\t},\r\n\r\n\t/**\r\n\t * Send processpropertyvalue in order to execute an Action\r\n\t * This method is used when this control stay in Summary form or Global form\r\n\t * @param action\r\n\t */\r\n\texecuteActionImmediately: function(action) {\r\n\t\tvar self = this;\r\n\t\t//Execute action immediately\r\n\t\tvar form = self.getFormContainer();\r\n\r\n\t\tvar processPropertyValueExecuteConstructor = {\r\n\t\t\t\"idRender\": self.properties.id,\r\n\t\t\t\"xpathContext\": form.properties.xpathContext,\r\n\t\t\t\"idPageCache\": form.properties.idPageCache,\r\n\t\t\t\"property\": \"executeConstructor\",\r\n\t\t\t\"psurrogatedKey\": self.properties.surrogatedKey,\r\n\t\t\t\"pguidConstructor\": action.guidConstructor,\r\n\t\t\t\"pparameters\": JSON.encode({\r\n\t\t\t\t\"idStartScope\": action.idStartScope,\r\n\t\t\t\t\"pactionXpath\": self.properties.xpathActions,\r\n\t\t\t\t\"idPageCache\": action.idPageCache\r\n\t\t\t})\r\n\t\t};\r\n\r\n\t\tself.dataService.executeActions(processPropertyValueExecuteConstructor).done(function(data) {\r\n\t\t\tself.notifyExecution(data.response, action);\r\n\t\t}).fail(function(error) {\r\n\t\t\t// TODO: Create generic mechanism to send notifications\r\n\t\t\tself.notifyExecution(\"Error\", action);\r\n\t\t});\r\n\t},\r\n\r\n\t/**\r\n\t * notify action execution status\r\n\t * @param response\r\n\t */\r\n\tnotifyExecution: function(response, actionName) {\r\n\t\t// To override in each device\r\n\t},\r\n\r\n\t/**\r\n\t * Render control in read only mode: properties.editable = false\r\n\t * @return {*}\r\n\t */\r\n\trenderReadOnly: function() {\r\n\t\treturn this.renderControl();\r\n\t},\r\n\r\n\t/**\r\n\t * Make a postrender of readonly control\r\n\t */\r\n\tpostRenderReadOnly: function() {\r\n\t\tthis.properties.readOnly = true;\r\n\t\tthis.postRender();\r\n\t},\r\n\r\n\t/**\r\n\t * Template method to implement in each children to customize each control\r\n\t * @return {string}\r\n\t */\r\n\trenderControl: function() {\r\n\t\tvar self = this;\r\n\t\tvar properties = self.properties;\r\n\t\tvar mode = self.getMode();\r\n\t\tvar template;\r\n\t\tvar html = \"\";\r\n\r\n\t\t// Render template\r\n\t\tif(mode == \"design\") {\r\n\t\t\ttemplate = self.renderFactory.getTemplate(\"render-polymorphicLauncher-design\");\r\n\t\t\tvar params = {\r\n\t\t\t\ttype: properties.type,\r\n\t\t\t\tallowSearch: properties.allowSearch\r\n\t\t\t};\r\n\t\t\thtml = $.fasttmpl(template, params);\r\n\t\t} else if(properties.surrogatedKey) {\r\n\t\t\ttemplate = self.renderFactory.getTemplate(\"render-polymorphicLauncher\");\r\n\t\t\thtml = $.fasttmpl(template);\r\n\t\t}\r\n\t\treturn html;\r\n\t},\r\n\r\n\r\n\t/**\r\n\t * Public method to determine if a value is valid or not\r\n\t * @param invalidElements\r\n\t * @return {*}\r\n\t */\r\n\tisValid: function(invalidElements) {\r\n\t\tvar self = this,\r\n\t\t\tproperties = self.properties;\r\n\t\t// Call base\r\n\t\tvar bValid = this._super(invalidElements);\r\n\t\tvar value = self.getValue();\r\n\t\t// TODO: write functionality\r\n\t\treturn bValid;\r\n\t},\r\n\r\n\t/**\r\n\t * Sets the value in the rendered control\r\n\t * @param value\r\n\t */\r\n\tsetDisplayValue: function(value) {\r\n\t\tvar self = this;\r\n\t\t// Set internal value\r\n\t\tself.setValue(value, false);\r\n\t},\r\n\r\n\t/**\r\n\t * Process an action\r\n\t * @param action\r\n\t */\r\n\tactionManager: function(action) {\r\n\t\tvar self = this;\r\n\t\tvar guidProcess = action.guidObject || \"\";\r\n\t\tvar def = new $.Deferred();\r\n\r\n        action.recordXpath = self.getFormContainer().properties.recordXpath;\r\n\r\n\t\t/**\r\n\t\t/**\r\n\t\t * Check if action is a process\r\n\t\t */\r\n\t\tswitch(action.actionType) {\r\n\t\t\tcase \"Process\":\r\n\t\t\t\t// Verify if case has startform\r\n\t\t\t\tvar params = {\r\n\t\t\t\t\tguidWFClass: guidProcess\r\n\t\t\t\t};\r\n\r\n\t\t\t\t$.when(self.dataService.hasStartForm(params)).done(function(result) {\r\n\t\t\t\t\tif(result.hasStartForm) {\r\n\t\t\t\t\t\t// Open a dialog with startform and wait for Scope\r\n\t\t\t\t\t\t$.when(self.processStartForm({\r\n\t\t\t\t\t\t\tguidprocess: guidProcess,\r\n\t\t\t\t\t\t\ttitle: action.displayNamee,\r\n                            recordXpath: action.recordXpath\r\n\t\t\t\t\t\t})).done(function(idStartScope) {\r\n\t\t\t\t\t\t\taction.idStartScope = idStartScope;\r\n\t\t\t\t\t\t\tdef.resolve(action);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t// Just add action to queue to be executed on nextEvent\r\n\t\t\t\t\t\tdef.resolve(action);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"Rule\":\r\n\t\t\t\t// Just add action to queue to be executed on nextEvent\r\n\t\t\t\tdef.resolve(action);\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"Form\":\r\n\t\t\t\t$.when(self.processActionForm(action)).done(function(idStartScope) {\r\n\t\t\t\t\taction.idStartScope = idStartScope;\r\n\t\t\t\t\tdef.resolve(action);\r\n\t\t\t\t});\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\treturn def.promise();\r\n\t},\r\n\r\n\t/**\r\n\t * Add actions within value object\r\n\t * @param action\r\n\t */\r\n\taddActionToQueue: function(action) {\r\n\t\tvar self = this;\r\n\t\tvar actionsList = self.getValue();\r\n\t\tvar formParams = self.getFormContainer().getParams();\r\n\t\t\r\n\t\taction.params = action.params || {};\r\n\r\n        var recordXpath = self.properties.xpathContext;\r\n\r\n\t\tswitch(action.actionType) {\r\n\t\t\tcase \"Process\":\r\n\t\t\t\taction.params = {\r\n\t\t\t\t\tadditionalXpaths: self.properties.additionalXpath.join(\",\"),\r\n\t\t\t\t\tidParentWorkitem: formParams.idWorkitem || bizagi.context.idWorkItem,\r\n                    recordXpath: recordXpath\r\n\t\t\t\t};\r\n                if (typeof action.idStartScope !== \"undefined\") {\r\n                    action.params.idStartScope = action.idStartScope;\r\n                }\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"Form\":\r\n\t\t\t\taction.params = {\r\n\t\t\t\t\tidStartScope: action.idStartScope,\r\n\t\t\t\t\tadditionalXpaths: self.properties.additionalXpath.join(\",\"),\r\n\t\t\t\t\tentityXpath: self.properties.xpathActions,\r\n\t\t\t\t\tidParentWorkitem: formParams.idWorkitem || bizagi.context.idWorkItem,\r\n\t\t\t\t\tidEntity: action.idEntity,\r\n\t\t\t\t\tguidEntity: action.guidEntity\r\n\t\t\t\t};\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"Rule\":\r\n\t\t\t\t//TODO\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\tactionsList.push(action);\r\n\t\tself.setValue(actionsList);\r\n\t\tself.setDisplayValue(actionsList);\r\n\t},\r\n\r\n\t/**\r\n\t * Remove action within value object\r\n\t * @param index\r\n\t */\r\n\tremoveActionToQueue: function(index) {\r\n\t\tvar self = this;\r\n\t\tvar value = self.getValue();\r\n\t\tvalue.splice(index, 1);\r\n\t\tself.setValue(value);\r\n\t\tself.setDisplayValue(value);\r\n\t},\r\n\t/**\r\n\t * Add the render data to the given collection in order to send data to the server\r\n\t * @param renderValues\r\n\t */\r\n\tcollectData: function(renderValues) {\r\n\t\tvar self = this;\r\n\t\tif(self.controlValueIsChanged()) {\r\n\t\t\tvar properties = self.properties;\r\n\t\t\tvar xpath = properties.xpath;\r\n\t\t\tvar controlValue = self.getValue();\r\n\t\t\tvar actions = [];\r\n\t\t\t$.each(controlValue, function(index, value) {\r\n\t\t\t\tvar action = {};\r\n\t\t\t\taction.params = value.params || {};\r\n\t\t\t\taction.guidAction = value.guidObject || value.guidAction;\r\n\t\t\t\taction.displayName = value.displayName;\r\n\t\t\t\taction.guidConstructor = value.guidConstructor;\r\n\t\t\t\taction.actionType = value.actionType;\r\n\t\t\t\taction.xpathContext = value.xpathContext;\r\n\t\t\t\taction.guidEntity = value.guidEntity;\r\n\t\t\t\tactions.push(action);\r\n\t\t\t});\r\n\t\t\trenderValues[xpath] = (actions.length == 0) ? \"\" : JSON.encode(actions);\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t * Util to count how many actions are there\r\n\t * @param action\r\n\t * @return {number}\r\n\t */\r\n\tcountSameActions: function(action) {\r\n\t\tvar self = this;\r\n\t\tvar value = self.getValue();\r\n\t\tvar count = 0;\r\n\t\t$.each(value, function(key, value) {\r\n\t\t\tif(value.guidAction == action.guidAction) {\r\n\t\t\t\tcount++;\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn count;\r\n\t},\r\n\r\n\t/**\r\n\t * Get list of tags\r\n\t * @param taglist\r\n\t * @return {Array}\r\n\t */\r\n\tgetTagList: function(taglist) {\r\n\t\ttaglist = taglist || [];\r\n\t\tvar result = [];\r\n\r\n\t\tfor(var i = taglist.length; i > 0; i--) {\r\n\t\t\tresult.push(taglist[i - 1].value);\r\n\t\t}\r\n\t\treturn (result.length > 0) ? result : \"\";\r\n\t}\r\n});","/**\r\n *   Name: Bizagi Render Button Class\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define basic stuff for button renders\r\n */\r\n\r\n$.Class.extend(\"bizagi.rendering.button\", {}, {\r\n\r\n    /**\r\n     * Update or init the element data\r\n     * @param {} data\r\n     * @returns {}\r\n     */\r\n    initializeData: function (data) {\r\n        // Call base\r\n        this._super(data);\r\n\r\n        // Fill default properties\r\n        var properties = this.properties;\r\n        properties.caption = properties.caption || \"\";\r\n\r\n        // set default value from normal to value\r\n        properties.displayType = \"value\";\r\n\r\n        // A button cannot be required\r\n        properties.required = false;\r\n\r\n        // This flag enable/disable default behaviors of buttons\r\n        // auto save and execute rule\r\n        properties.preventDefault = properties.preventDefault || false;\r\n    },\r\n\r\n    /**\r\n     * Template method to implement in each children to customize each control\r\n     * @returns {}\r\n     */\r\n    renderControl: function () {\r\n        var self = this;\r\n        var template = self.renderFactory.getTemplate(\"button\");\r\n\r\n        // Render template\r\n        return $.fasttmpl(template, {\r\n            caption: self.properties.caption,\r\n            cssClass: self.properties.cssclass || \"\",\r\n            editable: self.properties.editable\r\n        });\r\n    },\r\n\r\n    /**\r\n     * Method to render non editable values\r\n     * @returns {}\r\n     */\r\n    renderReadOnly: function () {\r\n        // Executes the same template than normal render\r\n        return this.renderControl();\r\n    },\r\n\r\n    /**\r\n     * Template method to implement in each device to customize each render after processed in read-only mode\r\n     */\r\n    postRenderReadOnly: function () {\r\n        // call base\r\n        this._super();\r\n\r\n        this.getLabel().addClass('bz-form-label--hidden');\r\n    },\r\n\r\n    /**\r\n     * Template method to implement in each device to customize the render behaviour after to be processed\r\n     */\r\n    postRender: function () {\r\n        // call base\r\n        this._super();\r\n\r\n        this.getLabel().addClass('bz-form-label--hidden');\r\n    },\r\n\r\n    /**\r\n     * Saves the form\r\n     * @returns {}\r\n     */\r\n    saveForm: function () {\r\n        var form = this.getFormContainer();\r\n        return form.saveForm();\r\n    },\r\n\r\n    /**\r\n     * Executes the button action\r\n     * @returns {}\r\n     */\r\n    executeButton: function () {\r\n        var self = this;\r\n        var properties = self.properties;\r\n        var xpathContext = properties.xpathContext || \"\";\r\n\r\n        if (properties.submitOnChangexpathContextRow) {\r\n            xpathContext = xpathContext ? xpathContext + \".\" + properties.submitOnChangexpathContextRow : properties.submitOnChangexpathContextRow;\r\n        }\r\n\r\n        // Set the loading feedback\r\n        self.getFormContainer().startLoading();\r\n\r\n        return self.dataService.multiaction().executeButton({\r\n            idRender: properties.id,\r\n            xpath: properties.xpath || \"\",\r\n            xpathContext: xpathContext || \"\",\r\n            idPageCache: properties.idPageCache\r\n        }).always(function () {\r\n            self.getFormContainer().endLoading();\r\n            return arguments ? arguments[0] : undefined;\r\n        });\r\n    },\r\n\r\n    /**\r\n     * Refresh the current form\r\n     * @returns {}\r\n     */\r\n    refreshForm: function () {\r\n        var form = this.getFormContainer();\r\n        form.refreshForm(this.properties.id);\r\n    },\r\n\r\n    /**\r\n     * Process the button actions workflow\r\n     * @returns {}\r\n     */\r\n    processButton: function () {\r\n        var self = this;\r\n\r\n        if (self.properties.editable) {\r\n            // Save the form prior opening the dialog\r\n            self.runButtonAction();\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Triggers the render change event\r\n     * @param {} params\r\n     * @returns {}\r\n     */\r\n    triggerRenderChange: function (params) {\r\n        var self = this;\r\n        params = params || {};\r\n\r\n        var pressed = params.pressed || false;\r\n\r\n        self.triggerHandler(\"renderchange\", {render: self, pressed: pressed});\r\n    },\r\n\r\n    /**\r\n     * Run button actions\r\n     * @returns {}\r\n     */\r\n    runButtonAction: function () {\r\n        var self = this;\r\n\r\n        // Save the form prior opening the dialog\r\n        self.getFormContainer().clearValidationMessages();\r\n\r\n        self.saveForm().pipe(function () {\r\n            return self.executeButton();\r\n        }).done(function (result) {\r\n\r\n            if (result == null || result == true || result.result === \"success\" || result.type === \"success\") {\r\n                return self.refreshForm();\r\n            } else if (result.type === \"validationMessages\") {\r\n                try {\r\n                    // Add validation messages\r\n                    self.getFormContainer().addValidationMessage(result.messages);\r\n                } catch (e) {\r\n                }\r\n            }\r\n        }).fail(function (error) {\r\n\r\n            try {\r\n                // Add error messages\r\n                var error_obj = bizagi.util.getErrorFormatted(error);\r\n                var message = typeof (error_obj) === \"undefined\" ? {\r\n                    \"message\": bizagi.localization.getResource(\"workportal-general-error\")\r\n                } : error_obj;\r\n\r\n                self.getFormContainer().failHandler(message);\r\n            } catch (e) {\r\n            }\r\n\r\n        });\r\n\r\n    },\r\n\r\n    processLayout: function (isLabelFormat, format) {\r\n        if (isLabelFormat) {\r\n            this.changeBackgroundColor(format.background);\r\n            this._super(!isLabelFormat, format);\r\n        }\r\n    },\r\n\r\n    changeBackgroundColor: function (color) {\r\n        if (typeof color === \"undefined\") return this;\r\n\r\n        if (color !== \"none\") {\r\n            this.getElementsToStylize(this.getControl()).style(\"background\", color, \"important\");\r\n        } else {\r\n            this.getElementsToStylize(this.getControl()).css(\"background\", \"\");\r\n        }\r\n\r\n        return this;\r\n    },\r\n\r\n    getElementsToStylize: function ($context) {\r\n        return $(\"input\", $context);\r\n    },\r\n\r\n    /**\r\n     *  Method to determine if the render value can be sent to the server or not\r\n     * @returns {}\r\n     */\r\n    canBeSent: function () {\r\n        // This render cannot be sent because it is full ajax\r\n        return false;\r\n    }\r\n});","/*\r\n *   Name: BizAgi Render Fileprint Class\r\n *   Author: Christian Collazos\r\n *   Comments:\r\n *   -   This script will define basic stuff for fileprint renders\r\n */\r\n\r\n$.Class.extend(\"bizagi.rendering.fileprint\", {}, {\r\n\r\n    /*\r\n    *   Update or init the element data\r\n    */\r\n    initializeData: function (data) {\r\n        var self = this;\r\n        // Call base\r\n        this._super(data);\r\n\r\n        // Fill default properties\r\n        var properties = this.properties;\r\n        properties.caption = (properties.caption && properties.caption != \" \")? properties.caption : \"render-fileprint-property-caption\";\r\n        properties.filesCount = properties.filesCount ? properties.filesCount : 0;\r\n\r\n        // set default value from normal to value\r\n        properties.displayType = \"value\";\r\n\r\n        // Calculate layout properties\r\n        this.calculateInitialLayoutProperties();\r\n\r\n        // A button cannot be required\r\n        properties.required = false;\r\n    },\r\n    /*\r\n    *   Template method to implement in each children to customize each control\r\n    */\r\n    renderControl: function () {\r\n        var self = this;\r\n        var properties = self.properties;\r\n        var template = self.renderFactory.getTemplate(\"fileprint\");\r\n\r\n        return $.fasttmpl(template, {\r\n            caption: properties.caption\r\n        });\r\n    },\r\n    /*\r\n    *   Method to render non editable values\r\n    */\r\n    renderReadOnly: function () {\r\n        var self = this;\r\n\r\n        // Executes the same template than normal render\r\n        return self.renderControl();\r\n    },\r\n\r\n    /*\r\n    *   get the fileprint url\r\n    */\r\n    getFilePrintUrl: function (disposition) {\r\n        var self = this;\r\n        var properties = self.properties;\r\n\r\n        return self.dataService.getFilePrintUrl({\r\n            idRender: properties.id,\r\n            xpathContext: properties.xpathContext || \"\",\r\n            idPageCache: properties.idPageCache,\r\n            disposition: disposition,\r\n            sessionId: self.getSessionId()\r\n        });\r\n\r\n    },\r\n\r\n    /*\r\n    *   Refresh the current form\r\n    */\r\n    refreshForm: function () {\r\n        var self = this;\r\n        var properties = self.properties;\r\n\r\n        var form = self.getFormContainer();\r\n        form.refreshForm(properties.id);\r\n    },\r\n\r\n     /*\r\n    *   Saves the form\r\n    */\r\n    saveForm: function () {\r\n        var self = this;\r\n        var form = self.getFormContainer();\r\n        return form.saveForm();\r\n    }\r\n});","/**\r\n *   Name: Bizagi Render Simple Link Class\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define basic stuff for link renders\r\n */\r\n\r\n$.Class.extend(\"bizagi.rendering.link\", {}, {\r\n\r\n    /**\r\n     * Update or init the element data\r\n     * @param {} data\r\n     * @returns {}\r\n     */\r\n    initializeData: function (data) {\r\n        // Call base\r\n        this._super(data);\r\n\r\n        // Set properties\r\n        var properties = this.properties;\r\n        properties.required = false;\r\n        properties.displayType = \"value\";\r\n\r\n        // Calculate layout properties\r\n        this.calculateInitialLayoutProperties();\r\n    },\r\n\r\n    /**\r\n     * Template method to implement in each children to customize each control\r\n     * @returns {}\r\n     */\r\n    renderControl: function () {\r\n        var self = this;\r\n        var template = self.renderFactory.getTemplate(\"link\");\r\n\r\n        // Render template\r\n        return $.fasttmpl(template, {\r\n            displayName: self.properties.displayName,\r\n            align: self.properties.valueAlign,\r\n            editable: self.properties.editable\r\n        });\r\n    },\r\n\r\n    /**\r\n     * Template method to implement in each device to customize each render after processed\r\n     */\r\n    postRender: function () {\r\n        this._super();\r\n        this.getLabel().addClass(\"bz-form-label--hidden\");\r\n    },\r\n\r\n    /**\r\n     * Method to render non editable values\r\n     * @returns {*}\r\n     */\r\n    renderReadOnly: function () {\r\n        // Executes the same template than normal render\r\n        return this.renderControl();\r\n    },\r\n\r\n    /**\r\n     * Template method to implement in each device to customize each render after processed in read-only mode\r\n     */\r\n    postRenderReadOnly: function () {\r\n        this._super();\r\n        this.getLabel().addClass(\"bz-form-label--hidden\");\r\n    },\r\n\r\n    /**\r\n     * Public method to determine if a value is valid or not\r\n     * @param invalidElements\r\n     */\r\n    isValid: function (invalidElements) {\r\n        // Automatically this render is valid, so we can't check a required link\r\n    },\r\n\r\n    /**\r\n     * Sets the value in the rendered control\r\n     * @param value\r\n     */\r\n    setDisplayValue: function (value) {\r\n        // Do nothing\r\n    },\r\n\r\n    /**\r\n     * Method to determine if the render value can be sent to the server or not\r\n     * @returns {boolean}\r\n     */\r\n    canBeSent: function () {\r\n        return false;\r\n    }\r\n\r\n});","/**\r\n *   Name: Bizagi Render Geolocation control\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define basic stuff for geolocation renders\r\n */\r\n\r\n$.Class.extend(\"bizagi.rendering.geolocation\", {}, {\r\n\r\n    /**\r\n     * Constructor\r\n     * @param {} data\r\n     */\r\n    init: function (data) {\r\n        // Call base\r\n        this._super(data);\r\n        this.geolocation = window.navigator.geolocation;\r\n\r\n        var properties = this.properties;\r\n        properties.allowUpdate = bizagi.util.parseBoolean(properties.allowUpdate) === true;\r\n\r\n    },\r\n\r\n    /**\r\n     * Template method to implement in each children to customize each control\r\n     */\r\n    renderControl: function () {\r\n        var self = this;\r\n        var template = self.renderFactory.getTemplate(\"geolocation\");\r\n\r\n        // Render template\r\n        var html = $.fasttmpl(template, self.properties);\r\n        return html;\r\n    },\r\n\r\n    /**\r\n     * Public method to determine if a value is valid or not\r\n     * @param {} invalidElements\r\n     */\r\n    isValid: function (invalidElements) {\r\n        // Call base\r\n        return this._super(invalidElements);\r\n    },\r\n\r\n    /**\r\n     * Sets the value in the rendered control\r\n     * @param {} value\r\n     * @returns {}\r\n     */\r\n    setDisplayValue: function (value) {\r\n        // Set internal value\r\n        this.setValue(value, false);\r\n    },\r\n\r\n    /**\r\n     * Template method to implement in each device to customize the render's behaviour to add handlers\r\n     * @returns {}\r\n     */\r\n    configureHandlers: function () {\r\n\r\n    },\r\n\r\n    /**\r\n     * Sets the value in the rendered control\r\n     * @param {} succes_callback\r\n     * @param {} fail_callback\r\n     */\r\n    getCurrentPosition: function (succes_callback, fail_callback) {\r\n        var self = this;\r\n\r\n        if (typeof (self.geolocation) === \"undefined\") {\r\n            if (fail_callback)\r\n                fail_callback(bizagi.localization.getResource(\"render-control-unsuported-by-browser\").replace(\"{0}\", self.properties.type));\r\n            return;\r\n        }\r\n\r\n        var onSuccess = function (position) {\r\n            if (succes_callback)\r\n                succes_callback(position);\r\n        };\r\n\r\n        var onError = function (error) {\r\n            var strMessage = self.getErrorMessage(error);\r\n\r\n            if (fail_callback)\r\n                fail_callback(strMessage);\r\n        };\r\n\r\n        return self.geolocation.getCurrentPosition(onSuccess, onError);\r\n    },\r\n\r\n    /**\r\n     * Get message of error\r\n     * @param error\r\n     * @returns {*|string}\r\n     */\r\n    getErrorMessage: function (error) {\r\n        var strMessage = \"\";\r\n\r\n        // Check for known errors\r\n        switch (error.code) {\r\n            case error.PERMISSION_DENIED:\r\n            case 1:\r\n                strMessage = bizagi.localization.getResource(\"render-geolocation-permission-denied\");\r\n                break;\r\n            case error.POSITION_UNAVAILABLE:\r\n            case 2:\r\n                strMessage = bizagi.localization.getResource(\"render-geolocation-position-unavailable\");\r\n                break;\r\n            case error.TIMEOUT:\r\n            case 3:\r\n                strMessage = bizagi.localization.getResource(\"render-geolocation-timeout\");\r\n                break;\r\n            default:\r\n                strMessage = \"WD: \" + bizagi.localization.getResource(\"render-geolocation-permission-denied\");\r\n                break;\r\n        }\r\n\r\n        return strMessage;\r\n    },\r\n\r\n    /**\r\n     * Change precision number of coordinates\r\n     * @param data\r\n     * @returns {*}\r\n     */\r\n    performPrecision: function (data) {\r\n        var geolocation = data.split(\" \") || \"\";\r\n\r\n        if (!geolocation) return data;\r\n\r\n        try {\r\n            var latitude = parseFloat(geolocation[0].trim());\r\n            var longitude = parseFloat(geolocation[1].trim());\r\n\r\n            return latitude.toPrecision(10) + \" \" + longitude.toPrecision(10);\r\n        } catch (e) {\r\n            return data;\r\n        }\r\n    }\r\n\r\n});\r\n","/*\r\n*   Name: BizAgi Render Association Class\r\n*   Author: Edward Morales\r\n*   Comments:\r\n*   -   This script will define basic stuff for association renders\r\n*/\r\n\r\n$.Class.extend(\"bizagi.rendering.association\", {}, {\r\n\r\n    /*\r\n    *   Update or init the element data\r\n    */\r\n    initializeData: function (data) {\r\n        var self = this;\r\n\r\n        // Call base\r\n        self._super(data);\r\n\r\n        var properties = self.properties;\r\n\r\n        // Fill default properties\r\n        properties.property = \"flipped\";\r\n        properties.idRender = self.properties.id;\r\n        properties.allowFlip = (typeof properties.allowFlip != \"undefined\") ? bizagi.util.parseBoolean(properties.allowFlip) : true;\r\n        properties.flipped = (typeof properties.flipped != \"undefined\") ? bizagi.util.parseBoolean(properties.flipped) : false;\r\n        properties.flipstate = properties.flipped;\r\n\r\n\r\n        // data of entities (left and right)\r\n        properties.leftData = properties.leftData || [];\r\n        properties.rightData = properties.rightData || [];\r\n\r\n        if (properties.value) {\r\n            self.processPropertyValue();\r\n        }\r\n    },\r\n\r\n\r\n\r\n    /*\r\n    *   Template method to implement in each children to customize each control\r\n    */\r\n    renderControl: function () {\r\n        var self = this;\r\n        var template = self.renderFactory.getTemplate(\"association\");\r\n        var def = new $.Deferred();\r\n\r\n        self.properties.property = \"flipped\";\r\n        self.properties.idRender = self.properties.id;\r\n\r\n        // Define flipped\r\n        $.when(self.getFlipAssociation())\r\n            .done(function (flip) {\r\n\r\n                // Make json base, create self.properties.formatJson\r\n                self.makeJsonBase();\r\n\r\n                self.properties.flipped = bizagi.util.parseBoolean(flip) || false;\r\n\r\n                var html = $.fasttmpl(template, self.properties, {\r\n                    getColumnData: self.getColumnData,\r\n                    getRightAssociation: self.getRightAssociation\r\n                });\r\n\r\n                /* by default need set self.properties.formatJson */\r\n                self.setValue(JSON.encode(self.properties.formatJson));\r\n\r\n                def.resolve(html);\r\n            });\r\n\r\n        return def.promise();\r\n    },\r\n\r\n\r\n    /*\r\n    * Returns the flip state\r\n    */\r\n    getFlipAssociation: function () {\r\n        var self = this;\r\n        var mode = self.getMode();\r\n\r\n        if (mode == \"execution\")\r\n            return self.dataService.getFlipAssociation(self.properties);\r\n\r\n        return false;\r\n    },\r\n\r\n    /* \r\n    *   Gets the display value of the render\r\n    */\r\n    getDisplayValue: function () {\r\n        var self = this;\r\n        var value = self.getValue();\r\n\r\n        return value;\r\n    },\r\n\r\n    /*\r\n    *   Get the template \r\n    */\r\n    getTemplateName: function () {\r\n        return \"association\";\r\n    },\r\n\r\n\r\n    /**\r\n    * Get Left Data, verify if flipper flags sets true\r\n    * \r\n    * @param column {'0'||'1'}\r\n    */\r\n    getColumnData: function () {\r\n        var self = this;\r\n        var properties = self.data;\r\n        var data = [];\r\n        var associationData = properties.flipped ? properties.rightData : properties.leftData;\r\n\r\n        $.each(associationData, function(key, item) {\r\n            data.push({ id: item.id, value: item.value });\r\n        });\r\n\r\n        return data;\r\n    },\r\n\r\n    /**\r\n    * Association of right elements\r\n    */\r\n    getRightAssociation: function (leftId) {\r\n        var self = this;\r\n        var properties = self.data;\r\n        var association = [];\r\n\r\n\r\n        var isChecked = function (leftId, idRight) {\r\n            var checked = false;\r\n            $.each(properties.formatJson.value, function (key, value) {\r\n                if (!checked && value.id == leftId && value.value.indexOf(idRight) >= 0) {\r\n                    checked = true;\r\n                }\r\n            });\r\n\r\n            return checked;\r\n        };\r\n\r\n        // create association and check element\r\n        if (properties.flipped) {\r\n            // left element\r\n            $.each(properties.leftData, function (key, data) {\r\n                association.push({\r\n                    id: data.id,\r\n                    name: data.value,\r\n                    checked: isChecked(data.id, leftId)\r\n                });\r\n\r\n            });\r\n        } else {\r\n            $.each(properties.rightData, function (key, data) {\r\n                association.push({\r\n                    id: data.id,\r\n                    name: data.value,\r\n                    checked: isChecked(leftId, data.id)\r\n                });\r\n            });\r\n        }\r\n\r\n        return association;\r\n    },\r\n\r\n\r\n    removeElement: function (leftId, rightId) {\r\n        var self = this;\r\n\r\n        $.each(self.properties.formatJson.value, function (key, data) {\r\n            if (self.properties.flipped) {\r\n                if (data.id == rightId) {\r\n                    // Remove right element from left panel\r\n                    $.each(self.properties.formatJson.value[key][\"value\"], function (removeKey, removeValue) {\r\n                        if (leftId == removeValue) {\r\n                            // Splice from array\r\n                            self.properties.formatJson.value[key][\"value\"].splice(removeKey, 1);\r\n                        }\r\n                    });\r\n                }\r\n            } else if (data.id == leftId) {\r\n                // Remove right element from left panel\r\n                $.each(self.properties.formatJson.value[key][\"value\"], function (removeKey, removeValue) {\r\n                    if (rightId == removeValue) {\r\n                        // Splice from array\r\n                        self.properties.formatJson.value[key][\"value\"].splice(removeKey, 1);\r\n                    }\r\n                });\r\n            }\r\n        });\r\n        self.setValue(JSON.encode(self.properties.formatJson));\r\n    },\r\n\r\n\r\n    addElement: function (leftId, rightId) {\r\n        var self = this;\r\n\r\n        $.each(self.properties.formatJson.value, function (key, data) {\r\n            if (self.properties.flipped) {\r\n                if (data.id == rightId) {\r\n                    // Add right element to left panel\r\n                    self.properties.formatJson.value[key][\"value\"].push(leftId);\r\n                }\r\n            } else if (data.id == leftId) {\r\n                // Add right element to left panel\r\n                self.properties.formatJson.value[key][\"value\"].push(rightId);\r\n            }\r\n        });\r\n        self.setValue(JSON.encode(self.properties.formatJson));\r\n    },\r\n\r\n    makeJsonBase: function () {\r\n        var self = this;\r\n        self.properties.formatJson = self.properties.formatJson || {\r\n            leftXpath: self.properties.leftXpath,\r\n            rightXpath: self.properties.rightXpath,\r\n            leftFactName: self.properties.leftFactName,\r\n            rightFactName: self.properties.rightFactName,\r\n            value: self.properties.value\r\n        };\r\n    },\r\n\r\n\r\n    /*\r\n    *   Check if a render has no value for required validation\r\n    */\r\n    hasValue: function () {\r\n        var self = this;\r\n\r\n        if (self.properties.formatJson) {\r\n            var values = self.properties.formatJson.value;\r\n        } else {            \r\n            values = self.properties.value;\r\n        }\r\n       \r\n\r\n        for (var i = 0, l = values.length; i < l; i++) {\r\n            var data = values[i];\r\n            if (data && data.value.length > 0) {\r\n                return true;\r\n            }\r\n        }\r\n\r\n        return false;\r\n    },\r\n\r\n    /*\r\n    * This method process the value.\r\n    * changes the format to send request\r\n    */\r\n    processPropertyValue: function () {\r\n        var self = this;\r\n        var properties = self.properties;\r\n        var values = properties.value;\r\n        var result = [];\r\n\r\n        for (var i = 0, l = values.length; i < l; i++) {\r\n            var value = values[i];\r\n            result.push({ id: value[0], value: value[1] });\r\n        }\r\n\r\n        properties.value = result;\r\n    }\r\n});","/**\r\n *   Name: Bizagi Render Upload Class\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define basic stuff for uploads\r\n */\r\n\r\n$.Class.extend(\"bizagi.rendering.upload\", {}, {\r\n    /***\r\n     * Update or init the element data\r\n     * @param data\r\n     */\r\n    initializeData: function (data) {\r\n        var self = this;\r\n\r\n        // Call base\r\n        self._super(data);\r\n\r\n        var form = self.getFormContainer();\r\n\r\n        // Fill default properties\r\n        var properties = this.properties;\r\n\r\n        var maxFileSizeOfProperty = Number(properties.maxSize) || 0;\r\n        var maxFileSizeOfUser = typeof (BIZAGI_SETTINGS) !== \"undefined\" && typeof (BIZAGI_SETTINGS.UploadMaxFileSize) !== \"undefined\" ? Number(BIZAGI_SETTINGS.UploadMaxFileSize) : 4091904;\r\n\r\n        properties.maxSize = maxFileSizeOfProperty || maxFileSizeOfUser;\r\n        properties.maxfiles = Number(properties.maxfiles) || 999;\r\n        properties.validExtensions = properties.validExtensions || \"\";\r\n\r\n        if (properties.validExtensions.length > 0 && properties.validExtensions.indexOf(\".\") < 0) {\r\n            var singleExtensions = properties.validExtensions.replace(/\\ /gi, '').split(\";\");\r\n            var defExtensions = [];\r\n\r\n            for (var i = 0; i < singleExtensions.length; i++) {\r\n                if (singleExtensions[i].length > 0) {\r\n                    defExtensions.push(\"*.\" + singleExtensions[i]);\r\n                } else {\r\n                    //Removes the empty element\r\n                    var index = singleExtensions.indexOf(singleExtensions[i]);\r\n                    singleExtensions.splice(i, 1);\r\n                }\r\n            }\r\n\r\n            properties.validExtensions = defExtensions.join(\";\");\r\n        }\r\n\r\n        properties.addUrl = properties.addUrl || self.dataService.getUploadAddUrl();\r\n        properties.deleteUrl = properties.deleteUrl || undefined;\r\n        properties.editable = bizagi.util.parseBoolean(properties.editable) || false;\r\n        properties.allowDelete = (bizagi.util.parseBoolean(properties.allowDelete) !== null && properties.editable) ? bizagi.util.parseBoolean(properties.allowDelete) : false;\r\n\r\n        properties.contexttype = (form.params && form.params.data && form.params.data.contextType) ? form.params.data.contextType : \"\";\r\n        properties.allowSendInMail = properties.allowSendInMail || false;\r\n\r\n        // Set files property\r\n        self.files = properties.value || [];\r\n        self.filesCount = self.files.length;\r\n    },\r\n\r\n    /**\r\n     * Template method to implement in each children to customize each control\r\n     * @returns {*|jQuery}\r\n     */\r\n    renderControl: function () {\r\n        var self = this;\r\n        var properties = self.properties;\r\n        var template = self.renderFactory.getTemplate(\"upload\");\r\n\r\n        // Render template\r\n        var html = $.fasttmpl(template, {\r\n            xpath: bizagi.util.encodeXpath(self.getUploadXpath()),\r\n            editable: properties.editable,\r\n            haveFiles: self.filesCount !== 0,\r\n            noFiles: self.filesCount === 0,\r\n            allowSendInMail: properties.allowSendInMail\r\n        });\r\n\r\n        // Render current children\r\n        var items = \"\";\r\n        for (var i = 0; i < self.filesCount; i++) {\r\n            var file = {id: self.files[i][0], fileName: self.files[i][1]};\r\n            var item = self.renderUploadItem(file);\r\n\r\n            items += item;\r\n        }\r\n\r\n        html = self.replaceFilesHtml(html, items);\r\n        return html;\r\n    },\r\n\r\n    /**\r\n     * Method to render non editable values\r\n     * @returns {*|*|jQuery}\r\n     */\r\n    renderReadOnly: function () {\r\n        return this.renderControl();\r\n    },\r\n\r\n    /**\r\n     * Renders a single upload item\r\n     * @param file\r\n     * @returns {jQuery|*}\r\n     */\r\n    renderUploadItem: function (file) {\r\n        var self = this;\r\n        var mode = self.getMode();\r\n        var itemTemplate = self.getTemplateItemName();\r\n        var template = self.renderFactory.getTemplate(itemTemplate);\r\n\r\n        // Don't render urls when not running in execution mode\r\n        var url = !self.isExecutionMode() ? \"\" : self.buildItemUrl(file); // TODO: Review if need it: javascript:void(0);\r\n\r\n        var html = $.fasttmpl(template, {\r\n            id: file.id,\r\n            mode: mode,\r\n            url: url,\r\n            allowDelete: self.properties.allowDelete,\r\n            filename: file.fileName,\r\n            editable: self.properties.editable\r\n        });\r\n\r\n        return html;\r\n    },\r\n\r\n    /**\r\n     * Builds the upload item url\r\n     * @param file\r\n     * @returns {*}\r\n     */\r\n    buildItemUrl: function (file) {\r\n        var self = this;\r\n        var properties = self.properties;\r\n        var form = self.getFormContainer();\r\n\r\n        return self.dataService.getUploadFileUrl({\r\n            idRender: properties.id,\r\n            xpath: self.getUploadXpath(),\r\n            xpathContext: properties.xpathContext,\r\n            idPageCache: properties.idPageCache,\r\n            fileId: file.id,\r\n            sessionId: form.properties.sessionId,\r\n            contexttype: properties.contexttype\r\n        });\r\n    },\r\n\r\n    /**\r\n     * Replaces a {{files}} tag in the container for the specified \"replace\" element\r\n     * @param html\r\n     * @param replace\r\n     * @returns {*}\r\n     */\r\n    replaceFilesHtml: function (html, replace) {\r\n        return html.replace(\"{{files}}\", replace);\r\n    },\r\n\r\n    /**\r\n     * Removes a file from the upload control\r\n     * @param item\r\n     * @param fileId\r\n     * @returns {*} Returns a deferred\r\n     */\r\n    deleteUploadItem: function (item, fileId) {\r\n        var self = this;\r\n        var properties = self.properties;\r\n        var xpath = self.getUploadXpath() + (bizagi.util.isNumeric(fileId) ? \"[id=\" + fileId + \"]\" : \"[id='\" + fileId + \"']\");\r\n\r\n        return self.dataService.deleteUploadFile({\r\n            url: properties.deleteUrl,\r\n            idRender: properties.id,\r\n            xpath: xpath,\r\n            xpathContext: properties.xpathContext,\r\n            idPageCache: properties.idPageCache,\r\n            contexttype: properties.contexttype\r\n        }).pipe(function () {\r\n\r\n            // Subtract counter\r\n            self.filesCount = self.filesCount - 1;\r\n\r\n            // Remove from local collection\r\n            self.files = $.grep(self.files, function (fileItem) {\r\n                return fileItem[0] != fileId;\r\n            });\r\n        });\r\n    },\r\n\r\n    /**\r\n     * Method to determine if the render value can be sent to the server or not\r\n     * @returns {boolean}\r\n     */\r\n    canBeSent: function () {\r\n        // This render cannot be sent because it is full ajax\r\n        return false;\r\n    },\r\n\r\n    /**\r\n     * Sets the internal value\r\n     * @param value\r\n     * @param triggerEvents\r\n     */\r\n    setValue: function (value, triggerEvents) {\r\n        var self = this;\r\n\r\n        // Set files property\r\n        self.files = value || []; // Dont remove this line\r\n        self.filesCount = self.files.length;\r\n\r\n        // Call base\r\n        self._super(value, triggerEvents);\r\n    },\r\n\r\n    /**\r\n     * Returns the internal value\r\n     * @returns {*}\r\n     */\r\n    getValue: function () {\r\n        return this.files;\r\n    },\r\n\r\n    /**\r\n     * Public method to determine if a value is valid or not\r\n     * @param invalidElements\r\n     * @returns {boolean}\r\n     */\r\n    isValid: function (invalidElements) {\r\n        var self = this;\r\n        var properties = self.properties;\r\n        var message;\r\n        var bValid = true;\r\n\r\n        // Clear error message\r\n        self.setValidationMessage(\"\");\r\n\r\n        // Check required\r\n        if (properties.required && properties.editable) {\r\n            var newRow = self.grid && self.grid.isFromCreatedRow.apply(self);\r\n\r\n            if (self.filesCount <= 0 && !newRow) {\r\n                var inlineEdit = self.grid ? self.grid.properties.inlineEdit : true;\r\n\r\n                if (inlineEdit) {\r\n                    message = self.getResource(\"render-required-upload\").replaceAll(\"#label#\", properties.displayName);\r\n                    invalidElements.push({xpath: properties.xpath, message: message});\r\n                    bValid = false;\r\n                }\r\n            }\r\n        }\r\n\r\n        return bValid;\r\n    },\r\n\r\n    /**\r\n     * Build add params to send to the server\r\n     */\r\n    buildAddParams: function () {\r\n        var self = this;\r\n        var properties = self.properties;\r\n        var form = self.getFormContainer();\r\n        var data = {};\r\n        var prefix = self.Class.BA_CONTEXT_PARAMETER_PREFIX;\r\n\r\n        data[prefix + \"xpath\"] = self.getUploadXpath();\r\n        data[prefix + \"idRender\"] = properties.id;\r\n        data[prefix + \"xpathContext\"] = properties.xpathContext;\r\n        data[prefix + self.Class.BA_PAGE_CACHE] = properties.idPageCache;\r\n        data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"sessionId\"] = form.properties.sessionId;\r\n        data[prefix + \"contexttype\"] = properties.contexttype;\r\n\r\n        try {\r\n            if (typeof (BIZAGI_SESSION_NAME) !== \"undefined\") {\r\n                data[BIZAGI_SESSION_NAME] = form.properties.sessionId\r\n            } else {\r\n                data[\"JSESSIONID\"] = form.properties.sessionId;\r\n            }\r\n        } catch (e) {\r\n            data[\"JSESSIONID\"] = form.properties.sessionId;\r\n        }\r\n\r\n        return data;\r\n    },\r\n\r\n    /**\r\n     * Returns the xpath to be used\r\n     * @returns {*}\r\n     */\r\n    getUploadXpath: function () {\r\n        return this.properties.xpath;\r\n    },\r\n\r\n    checkRequired: function (invalidElements) {\r\n        var self = this;\r\n        var properties = self.properties;\r\n\r\n        if (bizagi.util.parseBoolean(properties.required)) {\r\n            if (self.grid && self.grid.properties.inlineAdd === true) {\r\n                if (!self.hasValue() && !(self.getControl().parents(\"tr\").data(\"new-row\"))) {\r\n                    self.setRenderRequired(invalidElements, properties);\r\n                    return false;\r\n                }\r\n            } else {\r\n                if (!self.hasValue()) {\r\n                    self.setRenderRequired(invalidElements, properties);\r\n                    return false;\r\n                }\r\n            }\r\n        }\r\n\r\n        return true;\r\n    },\r\n\r\n    setRenderRequired: function (invalidElements, properties) {\r\n        var self = this;\r\n        var message = self.getResource(\"render-required-text\").replaceAll(\"#label#\", properties.displayName);\r\n        invalidElements.push({xpath: properties.xpath, message: message});\r\n    },\r\n\r\n    /**\r\n     * Templates\r\n     */\r\n    getTemplateItemName: function () {\r\n        return \"uploadItem\";\r\n    }\r\n});","/**\r\n *   Name: Bizagi Render ECM upload control\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define basic stuff for ECM Control\r\n */\r\n\r\n$.Class.extend(\"bizagi.rendering.ecm\", {}, {\r\n\r\n    /**\r\n     * Update or init the element data\r\n     * @param data\r\n     */\r\n    initializeData: function (data) {\r\n        var self = this;\r\n        // Call base\r\n        this._super(data);\r\n\r\n        var self = this;\r\n        var properties = self.properties;\r\n\r\n        properties.maxSize = Number(properties.maxSize) || (typeof (BIZAGI_SETTINGS) !== \"undefined\" && typeof (BIZAGI_SETTINGS.UploadMaxFileSize) !== \"undefined\" ? Number(BIZAGI_SETTINGS.UploadMaxFileSize) : properties.maxSize = Number(properties.maxSize) || 4091904);\r\n        properties.maxFiles = Number(properties.maxfiles) || 999;\r\n        properties.validExtensions = properties.validExtensions || \"\";\r\n\r\n        if (properties.validExtensions.length > 0 && properties.validExtensions.indexOf(\".\") < 0) {\r\n            var singleExtensions = properties.validExtensions.split(\";\");\r\n            for (var i = 0; i < singleExtensions.length; i++) {\r\n                singleExtensions[i] = \"*.\" + singleExtensions[i];\r\n            }\r\n            properties.validExtensions = singleExtensions.join(\";\");\r\n        }\r\n\r\n        properties.addUrl = self.dataService.serviceLocator.getUrl(\"render-ecm-upload-url\") + \"?action=uploadECMFile\";\r\n        properties.editUrl = self.dataService.serviceLocator.getUrl(\"render-ecm-upload-url\") + \"?action=updateECMFileContent\";\r\n        properties.deleteUrl = properties.deleteUrl || undefined;\r\n        properties.allowDelete = bizagi.util.parseBoolean(properties.allowDelete) !== null ? bizagi.util.parseBoolean(properties.allowDelete) : true;\r\n        properties.q_xpath = bizagi.util.encodeXpath(properties.xpath);\r\n        properties.showMetadata = properties.showMetadata === undefined || properties.showMetadata === null ? true : bizagi.util.parseBoolean(properties.showMetadata);\r\n\r\n        var dateFormat = this.getResource(\"dateFormat\");\r\n        var timeFormat = this.getResource(\"timeFormat\");\r\n\r\n        // We will hold here the value to display\r\n        properties.displayValue = \"\";\r\n        properties.showTime = properties.showTime !== undefined ? bizagi.util.parseBoolean(properties.showTime) : false;\r\n        properties.dateFormat = properties.dateFormat || dateFormat;\r\n        properties.timeFormat = properties.timeFormat || timeFormat;\r\n        properties.fullFormat = properties.dateFormat;\r\n\r\n        // Set files property\r\n        self.files = properties.value || [];\r\n        self.filesCount = self.files.length;\r\n\r\n        properties.xpathContext = this.parent.properties.xpathContext || properties.xpathContext || \"\";\r\n\r\n    },\r\n\r\n    /**\r\n     * Template method to implement in each children to customize each control\r\n     * @param listControl\r\n     * @param fileProperties\r\n     * @returns {*}\r\n     */\r\n    renderControl: function (listControl, fileProperties) {\r\n        var self = this;\r\n        var properties = self.properties;\r\n        var template = self.renderFactory.getTemplate(\"ecm\");\r\n        var mode = self.getMode();\r\n        var defer = new $.Deferred();\r\n\r\n        properties.value = (fileProperties) ? [[fileProperties.idFileUpload, fileProperties.fileName]] : self.value;\r\n        var html = $.fasttmpl(template, properties, {\r\n            getFileExtension: self.getFileExtension,\r\n            isImage: self.isImage\r\n        });\r\n\r\n        if (self.properties.value != undefined) {\r\n\r\n            var lengthValues = self.properties.value.length;\r\n\r\n            if (lengthValues === 0) {\r\n                defer.resolve(html);\r\n            }\r\n\r\n            $.each(self.properties.value, function (key, value) {\r\n                var data = {};\r\n\r\n                data.idFileUpload = value[0];\r\n                data.fileName = value[1];\r\n                data.idPageCache = self.properties.idPageCache;\r\n                data.xpathContext = self.getXpathContext();\r\n                data.xPath = self.properties.xpath;\r\n                data.editable = self.properties.editable;\r\n                data.idAttrib = self.properties.idAttrib;\r\n\r\n                var form = self.getFormContainer();\r\n                if (form && form.properties && form.properties.sessionId) {\r\n                    data.sessionId = form.properties.sessionId;\r\n                }\r\n\r\n                if (mode === \"execution\") {\r\n                    $.when(self.renderFileLayout(data, fileProperties)).done(function (item) {\r\n                        lengthValues--;\r\n\r\n                        if (bizagi.loader.productBuildToAbout && bizagi.loader.productBuildToAbout.indexOf(\"10.4\") === 0) {\r\n                            item = item.replaceAll(\"Handlers/MetadataFile\", \"Handlers/Metadata\");\r\n                        }\r\n\r\n                        html = self.replaceItemHtml(html, self.properties.id + \"-\" + data.idFileUpload, item);\r\n                        if (lengthValues === 0) {\r\n                            defer.resolve(html);\r\n                        }\r\n                    });\r\n\r\n                }\r\n            });\r\n        } else {\r\n            defer.resolve(html);\r\n        }\r\n        return defer.promise();\r\n    },\r\n\r\n    replaceItemHtml: function (html, id, replace) {\r\n        return html.replace(\"{{\" + id + \"}}\", replace);\r\n    },\r\n\r\n    renderFileLayout: function (data, fileProperties) {\r\n        var self = this;\r\n        var form = self.getFormContainer();\r\n        var metadataTemplate = self.renderFactory.getTemplate(\"ecm-metadata\");\r\n\r\n        var deferred = $.Deferred();\r\n\r\n        $.when(self.dataService.getECMMetadata(data),\r\n            (fileProperties) ? [fileProperties] : self.dataService.getFileProperties(data)\r\n        ).done(function (metaData, fileProperties) {\r\n\r\n            fileProperties[0].data = data;\r\n\r\n            // Make xpath context\r\n            fileProperties[0].xpathContext = fileProperties[0].xpathContext || form.properties.xpathContext || \"\";\r\n            fileProperties[0].xpath = self.properties.xpath;\r\n\r\n            metaData[0].filename = data.fileName;\r\n            metaData[0].url = self.buildItemUrl(fileProperties[0]);\r\n\r\n            // Define File Properties\r\n            metaData[0].ecm_ecmStatus = fileProperties[0].ecmStatus;\r\n            metaData[0].ecm_isVisible = fileProperties[0].isVisible;\r\n            metaData[0].ecm_allowUpdateMetadata = fileProperties[0].allowUpdateMetadata;\r\n            metaData[0].ecm_allowDelete = fileProperties[0].allowDelete;\r\n            metaData[0].ecm_allowUpdateContent = fileProperties[0].allowUpdateContent;\r\n            metaData[0].ecm_allowView = fileProperties[0].allowView;\r\n            metaData[0].ecm_allowCheckOut = fileProperties[0].allowCheckOut;\r\n            metaData[0].ecm_allowCancelCheckOut = fileProperties[0].allowCancelCheckOut;\r\n            metaData[0].ecm_allowEdit = data.editable && fileProperties[0].allowEdit;\r\n            metaData[0].ecm_ecmStatus = fileProperties[0].ecmStatus;\r\n            metaData[0].idFileUploads = fileProperties[0].idFileUpload;\r\n            metaData[0].xpath = fileProperties[0].xpath;\r\n            metaData[0].value = bizagi.util.parseBoolean(fileProperties[0].value);\r\n            metaData[0].deviceType = bizagi.detectDevice();\r\n\r\n            var html = $.fasttmpl(metadataTemplate, metaData[0]);\r\n            deferred.resolve(html);\r\n        });\r\n\r\n        return deferred.promise();\r\n    },\r\n\r\n    isImage: function (file) {\r\n        var extension = this.getFileExtension(file);\r\n        var image = [\"JPG\", \"JPEG\", \"GIF\", \"PNG\", \"BMP\"];\r\n\r\n        return (image.indexOf(extension.toUpperCase()) > -1) ? true : false;\r\n    },\r\n\r\n    replaceFilesHtml: function (html, replace) {\r\n        return html.replace(\"{{files}}\", replace);\r\n    },\r\n\r\n    /**\r\n     * Method to render non editable values\r\n     * @returns {*}\r\n     */\r\n    renderReadOnly: function () {\r\n        return this.renderControl();\r\n    },\r\n\r\n    /**\r\n     * Method to determine if the render value can be sent to the server or not\r\n     * @returns {boolean}\r\n     */\r\n    canBeSent: function () {\r\n        // This render cannot be sent because it is full ajax\r\n        return false;\r\n    },\r\n\r\n    /**\r\n     * Builds the upload item url\r\n     * @param file\r\n     * @returns {*}\r\n     */\r\n    buildItemUrl: function (file) {\r\n        var self = this;\r\n        var p_sessionId = bizagi.cookie(\"JSESSIONID\");\r\n\r\n        if(!file.data) {\r\n            file.data = {fileName: file.fileName, idAttrib: file.idAttrib}\r\n        }\r\n\r\n        return self.dataService.getECMFileUrl({\r\n            idFileUpload: file.idFileUpload,\r\n            xPath: file.xpath || file.xPath,\r\n            xpathContext: file.xpathContext,\r\n            idAttrib: file.data.idAttrib,\r\n            idPageCache: self.properties.idPageCache,\r\n            fileName: file.data.fileName.replace(/ /g, \"_\"),\r\n            p_sessionId: p_sessionId,\r\n            sessionId: file.data.sessionId || \"\"\r\n        });\r\n    },\r\n\r\n    buildAddParams: function () {\r\n        var self = this;\r\n        var properties = self.properties;\r\n        var data = {};\r\n\r\n        // data.fileExt = properties.validExtensions;\r\n        // data.fileDesc = properties.validExtensions ? self.getResource(\"render-upload-allowed-extensions\") + properties.validExtensions : \"\";\r\n        data.xPath = properties.xpath;\r\n        data.idAttrib = properties.idAttrib;\r\n        data.xpathContext = properties.xpathContext;\r\n        data.metaValues = [];\r\n        data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = properties.idPageCache;\r\n\r\n        return data;\r\n    },\r\n\r\n    /**\r\n     * Get name of file extension\r\n     * @param fileName\r\n     * @returns {*}\r\n     */\r\n    getFileExtension: function (fileName) {\r\n        fileName = fileName || \"\";\r\n        return fileName.split(\".\").pop();\r\n    },\r\n\r\n    /**\r\n     * Sets the internal value\r\n     * @param value\r\n     * @param triggerEvents\r\n     */\r\n    setValue: function (value, triggerEvents) {\r\n        var self = this;\r\n        var properties = self.properties;\r\n\r\n        // Call base\r\n        self._super(value, triggerEvents);\r\n\r\n        // Set files property\r\n        self.files = properties.value || [];\r\n        self.filesCount = (self.files.length) ? self.files.length : properties.value;\r\n    },\r\n\r\n    /**\r\n     * Gets xpath context\r\n     * @returns {*|string}\r\n     */\r\n    getXpathContext: function () {\r\n        return this.properties.xpathContext || \"\";\r\n    },\r\n\r\n    /**\r\n     * Returns the xpath to be used\r\n     * @returns {*}\r\n     */\r\n    getUploadXpath: function () {\r\n        return this.properties.xpath;\r\n    },\r\n\r\n    /**\r\n     * Removes a file from the ECM control\r\n     * @param item\r\n     * @param fileId\r\n     * @returns {*} Returns a deferred\r\n     */\r\n    deleteUploadItem: function (item, fileId) {\r\n        var self = this;\r\n        var properties = self.properties;\r\n\r\n        var params = {\r\n            idFileUpload: fileId,\r\n            xPath: properties.xpath,\r\n            idAttrib: properties.idAttrib,\r\n            idPageCache: properties.idPageCache,\r\n            xpathContext: self.getXpathContext()\r\n        };\r\n\r\n        return self.dataService.deleteECMFile(params).pipe(function () {\r\n\r\n            // Subtract counter\r\n            self.filesCount = self.filesCount - 1;\r\n\r\n            // Remove from local collection\r\n            self.files = $.grep(self.files, function (fileItem) {\r\n                return fileItem[0] != fileId;\r\n            });\r\n        });\r\n    },\r\n\r\n    /**\r\n     * Lock a file from the ECM control\r\n     * @param item\r\n     * @param fileId\r\n     * @returns {*} Returns a deferred\r\n     */\r\n    lockUploadItem: function (fileId) {\r\n        var self = this;\r\n        var properties = self.properties;\r\n\r\n        var params = {\r\n            idFileUpload: fileId,\r\n            xPath: properties.xpath,\r\n            idAttrib: properties.idAttrib,\r\n            idPageCache: properties.idPageCache,\r\n            xpathContext: self.getXpathContext()\r\n        };\r\n\r\n        return self.dataService.checkOutFile(params);\r\n    },\r\n\r\n    /**\r\n     * Unlock a file from the ECM control\r\n     * @param item\r\n     * @param fileId\r\n     * @returns {*} Returns a deferred\r\n     */\r\n    unlockUploadItem: function (fileId) {\r\n        var self = this;\r\n        var properties = self.properties;\r\n\r\n        var params = {\r\n            idFileUpload: fileId,\r\n            xPath: properties.xpath,\r\n            idAttrib: properties.idAttrib,\r\n            idPageCache: properties.idPageCache,\r\n            xpathContext: self.getXpathContext()\r\n        };\r\n\r\n        return self.dataService.cancelCheckOut(params);\r\n    }\r\n\r\n});","/**\r\n *   Name: Bizagi Render Yes-no Class\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define basic stuff for yes-no renders\r\n */\r\n\r\n$.Class.extend(\"bizagi.rendering.yesno\", {}, {\r\n\r\n    /**\r\n     * Update or init the element data\r\n     * @param {} data\r\n     */\r\n    initializeData: function (data) {\r\n        // Call base\r\n        this._super(data);\r\n\r\n        // Fill default properties\r\n        var properties = this.properties;\r\n        properties.value = typeof (properties.value) != \"undefined\" ? bizagi.util.parseBoolean(properties.value) : null;\r\n    },\r\n\r\n    /**\r\n     * Template method to implement in each children to customize each control\r\n     */\r\n    renderControl: function () {\r\n        var template = this.renderFactory.getTemplate(\"yesno\");\r\n        var randomId = bizagi.util.randomNumber(100, 10000000);\r\n\r\n        // Render template\r\n        var html = $.fasttmpl(template, {\r\n            id: randomId,\r\n            editable: this.properties.editable\r\n        });\r\n\r\n        return html;\r\n    },\r\n\r\n    /**\r\n     * Gets the display value of the render\r\n     */\r\n    getDisplayValue: function () {\r\n        var value = this.getValue();\r\n\r\n        if (bizagi.util.parseBoolean(value) === true) {\r\n            return this.getResource(\"render-boolean-yes\");\r\n        } else if (bizagi.util.parseBoolean(value) === false) {\r\n            return this.getResource(\"render-boolean-no\");\r\n        } else {\r\n            return \"\";\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Check if a render has no value for required validation\r\n     * @returns {boolean}\r\n     */\r\n    hasValue: function () {\r\n        var value = this.getValue();\r\n\r\n        if (bizagi.util.isEmptyValue(value)) return false;\r\n        return bizagi.util.parseBoolean(value) !== null;\r\n    }\r\n\r\n});\r\n","/**\r\n *   Name: Bizagi Render Letter Class\r\n*   Author: Diego Parra\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define basic stuff for letter renders\r\n */\r\n\r\n$.Class.extend(\"bizagi.rendering.letter\", {}, {\r\n\r\n    /**\r\n     * Update or init the element data\r\n     * @param {} data\r\n     */\r\n    initializeData: function (data) {\r\n        // Call base\r\n        this._super(data);\r\n\r\n        // Create a variable to check if the letter has been opened when editable\r\n        this.letterOpened = false;\r\n    },\r\n\r\n\r\n    /**\r\n     * Template method to implement in each children to customize each control\r\n     * @returns {}\r\n     */\r\n    renderControl: function () {\r\n        var template = this.renderFactory.getTemplate(\"letter\");\r\n\r\n        // Render template\r\n        return $.fasttmpl(template);\r\n    },\r\n\r\n\r\n    /**\r\n     * Method to render non editable values\r\n     */\r\n    renderReadOnly: function () {\r\n        var template = this.renderFactory.getTemplate(\"letter.readonly\");\r\n\r\n        // Render template\r\n        return $.fasttmpl(template);\r\n    },\r\n\r\n    /**\r\n     * Returns the letter content from the server\r\n     */\r\n    getLetterContent: function () {\r\n        // Set flag to true\r\n        this.letterOpened = true;\r\n\r\n        return this.dataService.getLetterContent({\r\n            url: this.properties.getUrl,\r\n            idRender: this.properties.id,\r\n            xpath: this.getXpath(),\r\n            xpathContext: this.getContextXpath(),\r\n            idPageCache: this.properties.idPageCache\r\n        });\r\n    },\r\n\r\n    /**\r\n     * Sends the content to the server in order to save\r\n     * @param {} content\r\n     */\r\n    saveLetterContent: function (content) {\r\n        return this.dataService.saveLetterContent({\r\n            url: this.properties.saveUrl,\r\n            idRender: this.properties.id,\r\n            xpath: this.getXpath(),\r\n            xpathContext: this.getContextXpath(),\r\n            idPageCache: this.properties.idPageCache,\r\n            content: content\r\n        });\r\n    },\r\n\r\n    /**\r\n     * Returns the letter content from the server\r\n     */\r\n    getCanGenerateLetter: function () {\r\n        return this.dataService.getCanGenerateLetter({\r\n            idRender: this.properties.id,\r\n            xpath: this.getXpath(),\r\n            xpathContext: this.getContextXpath(),\r\n            idPageCache: this.properties.idPageCache\r\n        });\r\n    },\r\n\r\n    /**\r\n     * Saves the form\r\n     */\r\n    saveForm: function () {\r\n        var self = this;\r\n        var form = self.getFormContainer();\r\n        return form.saveForm();\r\n    },\r\n\r\n    isValid: function (invalidElements) {\r\n        var self = this;\r\n        var properties = self.properties;\r\n        var message;\r\n\r\n        // Don't check non-editable renders\r\n        if (bizagi.util.parseBoolean(properties.visible) == false) return true;\r\n\r\n        // Don't check non-editable renders\r\n        if (bizagi.util.parseBoolean(properties.editable) == false) return true;\r\n\r\n        // Clear error message\r\n        self.setValidationMessage(\"\");\r\n\r\n        // Check required\r\n        if (properties.required) {\r\n            if (self.letterOpened == false) {\r\n                message = self.getResource(\"render-letter-required-text\").replaceAll(\"#label#\", properties.displayName);\r\n                invalidElements.push({xpath: properties.xpath, message: message});\r\n                return false;\r\n            }\r\n        }\r\n\r\n        return true;\r\n    },\r\n\r\n    /**\r\n     * Returns the current xpath\r\n     */\r\n    getXpath: function () {\r\n        return this.properties.xpath;\r\n    },\r\n\r\n    /**\r\n     * Returns the current context xpath\r\n     */\r\n    getContextXpath: function () {\r\n        return this.properties.xpathContext;\r\n    }\r\n\r\n});\r\n","/**\r\n *   Name: Bizagi Render Form Link Class\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define basic stuff for form link renders\r\n */\r\n\r\n$.Class.extend(\"bizagi.rendering.formLink\", {}, {\r\n\r\n    /**\r\n     * Update or init the element data\r\n     * @param data\r\n     */\r\n    initializeData: function (data) {\r\n        // Call base\r\n        this._super(data);\r\n\r\n        // Set properties\r\n        var properties = this.properties;\r\n\r\n        properties.displayType = \"value\";\r\n        properties.maximized = bizagi.util.parseBoolean(this.properties.maximized) != null ? bizagi.util.parseBoolean(this.properties.maximized) : false;\r\n\r\n        // Calculate layout properties\r\n        this.calculateInitialLayoutProperties();\r\n    },\r\n\r\n    /**\r\n     * Template method to implement in each children to customize each control\r\n     * @returns {*|jQuery}\r\n     */\r\n    renderControl: function () {\r\n        var self = this;\r\n        var properties = self.properties;\r\n        var template = self.renderFactory.getTemplate(\"formLink\");\r\n\r\n        // Render template\r\n        return $.fasttmpl(template, {\r\n            id: properties.id,\r\n            align: properties.valueAlign,\r\n            displayName: properties.displayName,\r\n            value: properties.value,\r\n            editable: properties.editable,\r\n            likeButton: bizagi.util.parseBoolean(properties.likeButton) || false\r\n        });\r\n    },\r\n\r\n    /**\r\n     * Method to render non editable values\r\n     * @returns {*|*|jQuery}\r\n     */\r\n    renderReadOnly: function () {\r\n        // Executes the same template than normal render\r\n        return this.renderControl();\r\n\r\n    },\r\n\r\n    /**\r\n     * Method to customize each render after processed\r\n     */\r\n    postRender: function () {\r\n        this._super();\r\n        this.getLabel().addClass(\"bz-form-label--hidden\");\r\n    },\r\n\r\n    /**\r\n     * Method to customize each render after processed in read-only mode\r\n     */\r\n    postRenderReadOnly: function () {\r\n        this._super();\r\n        this.getLabel().addClass(\"bz-form-label--hidden\");\r\n    },\r\n\r\n    /**\r\n     * Submits a edit request for a link display form\r\n     * @returns {*} Returns a deferred\r\n     */\r\n    submitEditRequest: function () {\r\n        var self = this;\r\n        var properties = self.properties;\r\n\r\n        // Don't send request when the link is not editable\r\n        if (!properties.editable && !properties.value)\r\n            return null;\r\n\r\n        return self.dataService.editLinkForm({\r\n            url: properties.editUrl,\r\n            idRender: properties.id,\r\n            xpath: self.getFormLinkXpath(),\r\n            xpathContext: properties.xpathContext,\r\n            idPageCache: properties.idPageCache\r\n        });\r\n    },\r\n\r\n    /**\r\n     * Submits a link save request for the displayed form\r\n     * @param data\r\n     * @returns {*} Returns a deferred\r\n     */\r\n    submitSaveRequest: function (data) {\r\n        var self = this;\r\n        var properties = self.properties;\r\n\r\n        // Don't send request when the link is not editable\r\n        if (!properties.editable && !properties.value)\r\n            return null;\r\n\r\n        var xpath = self.getFormLinkXpath();\r\n        var xpathContext = xpath;\r\n\r\n        if (typeof (properties.xpathContext) !== \"undefined\" && properties.xpathContext !== \"\") {\r\n            xpathContext = xpath ? properties.xpathContext + \".\" + xpath : properties.xpathContext;\r\n        }\r\n\r\n        return self.dataService.saveLinkForm({\r\n            url: properties.saveUrl,\r\n            idRender: properties.id,\r\n            xpathContext: xpathContext,\r\n            submitData: data\r\n        }).done(function (response) {\r\n            var executeSubmitOnChange = true;\r\n\r\n            if (response && response.type === \"validationMessages\")\r\n                executeSubmitOnChange = false;\r\n\r\n            if (executeSubmitOnChange)\r\n                self.submitOnChange({});\r\n        });\r\n    },\r\n\r\n    /**\r\n     * Submits a rollback request\r\n     * @param params\r\n     * @returns {*} Returns a deferred when done\r\n     */\r\n    submitRollbackRequest: function (params) {\r\n        var self = this;\r\n        var properties = self.properties;\r\n\r\n        return $.when(function(){\r\n            // Don't send request when the link is not editable\r\n            if (!properties.editable && !properties.value){\r\n                return null;\r\n            }\r\n            else{\r\n                return self.dataService.rollbackLinkForm({\r\n                    url: properties.rollbackUrl,\r\n                    idRender: properties.id,\r\n                    xpath: self.getFormLinkXpath(),\r\n                    xpathContext: properties.xpathContext,\r\n                    idPageCache: params ? params.idPageCache : properties.idPageCache\r\n                });\r\n            }\r\n        }());\r\n    },\r\n\r\n    /**\r\n     * Submits a commit request\r\n     * @returns {*} Returns a deferred when done\r\n     */\r\n    submitCommitRequest: function () {\r\n        var self = this;\r\n        var properties = self.properties;\r\n\r\n        return $.when(function(){\r\n            // Don't send request when the link is not editable\r\n            if (!properties.editable && !properties.value){\r\n                return null;\r\n            } else {\r\n                return self.dataService.commitLinkForm({\r\n                    url: properties.commitUrl,\r\n                    idRender: properties.id,\r\n                    xpath: self.getFormLinkXpath(),\r\n                    xpathContext: properties.xpathContext,\r\n                    idPageCache: properties.idPageCache\r\n                });\r\n            }\r\n        }());\r\n    },\r\n\r\n    /**\r\n     * Submits a checkpoint request\r\n     * @returns {*} Returns a deferred when done\r\n     */\r\n    submitCheckpointRequest: function () {\r\n        var self = this;\r\n        var properties = self.properties;\r\n\r\n        return $.when(function(){\r\n            // Don't send request when the link is not editable\r\n            if (!properties.editable && !properties.value){\r\n                return null;\r\n            } else {\r\n                return self.dataService.sendCheckpoint({\r\n                    url: properties.checkpointUrl,\r\n                    idRender: properties.id,\r\n                    xpath: self.getFormLinkXpath(),\r\n                    xpathContext: properties.xpathContext,\r\n                    idPageCache: properties.idPageCache\r\n                });\r\n            }\r\n        }());\r\n    },\r\n\r\n    /**\r\n     * Submits a submitData request\r\n     * @returns {*} Returns a deferred when done\r\n     */\r\n    submitDataRequest: function () {\r\n        var self = this;\r\n        var properties = self.properties;\r\n\r\n        return $.when(function () {\r\n            // Don't send request when the link is not editable\r\n            if (!properties.editable && !properties.value) {\r\n                return null;\r\n            } else {\r\n\r\n\r\n                return self.dataService.submitData({\r\n                    url: properties.checkpointUrl,\r\n                    action: \"SUBMITDATA\",\r\n                    idRender: properties.id,\r\n                    xpath: self.getFormLinkXpath(),\r\n                    xpathContext: properties.xpathContext,\r\n                    idPageCache: properties.idPageCache\r\n                });\r\n            }\r\n        }());\r\n    },\r\n\r\n    /**\r\n     * Public method to determine if a value is valid or not\r\n     * @param invalidElements\r\n     */\r\n    isValid: function (invalidElements) {\r\n        // Automatically this render is valid, so we can't check a required link\r\n    },\r\n\r\n    /**\r\n     * Get Form Link xpath to use\r\n     * @returns {*}\r\n     */\r\n    getFormLinkXpath: function () {\r\n        return this.properties.xpath;\r\n    },\r\n\r\n    /**\r\n     * Method to determine if the render value can be sent to the server or not\r\n     * @returns {boolean}\r\n     */\r\n    canBeSent: function () {\r\n        return false;\r\n    },\r\n\r\n    /**\r\n     * Sets the value in the rendered control\r\n     * @param value\r\n     */\r\n    setDisplayValue: function (value) {\r\n        // Don't do anything\r\n    }\r\n\r\n});\r\n\r\n","/*\r\n*   Name: Bizagi Render Cascading Combo Class\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will define basic stuff for cascading combo renders\r\n*/\r\n\r\n$.Class.extend(\"bizagi.rendering.cascadingCombo\", {\r\n    // Statics\r\n    BA_ACTION_PARAMETER_PREFIX: bizagi.render.services.service.BA_ACTION_PARAMETER_PREFIX,\r\n    BA_CONTEXT_PARAMETER_PREFIX: bizagi.render.services.service.BA_CONTEXT_PARAMETER_PREFIX\r\n}, {\r\n\r\n    /*\r\n    *   Constructor\r\n    */\r\n    init: function (params) {\r\n        var self = this;\r\n\r\n        // Call base\r\n        self._super(params);\r\n\r\n        // Create dependency collection\r\n        self.dependants = [];\r\n        self.isDependant = false;\r\n    },\r\n\r\n    /*\r\n    *   Update or init the element data\r\n    */\r\n    initializeData: function (data) {\r\n        var self = this;\r\n\r\n        // Call base\r\n        self._super(data);\r\n\r\n        // Fill default properties\r\n        var properties = this.properties;\r\n        properties.hasLocalData = bizagi.util.isEmpty(properties.parentCombo) ? properties.hasLocalData : false;\r\n\r\n        if (properties.value && properties.value.id === undefined)\r\n            properties.value = null;\r\n\r\n        self.value = properties.value;\r\n\r\n        // Add empty node if configured\r\n        if (properties.hasLocalData)\r\n            properties.data = self.complementData(properties.data);\r\n    },\r\n\r\n    /*\r\n    *   Template method to implement in each children to customize each control\r\n    */\r\n    renderControl: function () {\r\n        var self = this;\r\n        var mode = self.getMode();\r\n\r\n        // Check if this is a dependant combo\r\n        var parentCombo = self.parentCombo = self.getParentCombo();\r\n        if (parentCombo != null) {\r\n            var renderType = bizagi.util.normalizeType(parentCombo.properties.type);\r\n\r\n            if (/^cascadingcombo$/i.test(renderType)) {\r\n                self.isDependant = true;\r\n            }\r\n        }\r\n\r\n        // Apply element plugin, set a flag to avoid dependant combo ajax requests\r\n        self.initializingCascadingCombo = true;\r\n\r\n        // Call base\r\n        var result = this._super();\r\n\r\n        if (mode !== \"execution\") {\r\n            self.initializingCascadingCombo = false;\r\n        }\r\n\r\n        return result;\r\n    },\r\n\r\n    /*\r\n    *   Template method to implement in each device to customize the render's behaviour to add handlers\r\n    */\r\n    configureHandlers: function () {\r\n        var self = this;\r\n        self.initializingCascadingCombo = false;\r\n\r\n        // Bind with parent combo\r\n        if (self.isDependant) {\r\n            self.parentCombo.bindDependantCombo(self);\r\n        }\r\n    },\r\n\r\n    configureReadOnlyHandlers: function () {\r\n        var self = this;\r\n        self.initializingCascadingCombo = false;\r\n\r\n        // Bind with parent combo\r\n        if (self.isDependant) {\r\n            self.parentCombo.bindDependantCombo(self);\r\n        }\r\n    },\r\n    /*\r\n    *   Refresh the combo, after it has been painted\r\n    */\r\n    refresh: function (params, isInitialValue) {\r\n        var self = this;\r\n\r\n        // Wait until current element is rendered\r\n        $.when(self.isRendered()).done(function () {\r\n\r\n            // Unbind previous handler\r\n            // self.parentCombo.unbindDependantCombo(self);\r\n\r\n            // Clear current control\r\n            var control = self.getControl();\r\n            var mode = self.getMode();\r\n            control.empty();\r\n\r\n            // Render combo again\r\n            $.when(self.renderCombo(params)).then(function (html) {\r\n                // Append new element\r\n                control.html(html);\r\n\r\n                // Post-render method\r\n                self.postRender();\r\n\r\n                if (mode == \"execution\") {\r\n                    self.configureHandlers();\r\n                }\r\n\r\n                // Set current value\r\n                if (self.getValue() !== undefined) {\r\n                    self.setDisplayValue(self.getValue());\r\n                }\r\n\r\n                if (self.deferredVisible) {\r\n                    self.deferredVisible.resolve();\r\n                }\r\n\r\n                self.trigger(\"select\", [self.value, isInitialValue]);\r\n\r\n            });\r\n        });\r\n    },\r\n\r\n    /*\r\n    *   Fetch the data into a deferred\r\n    */\r\n    getData: function (params) {\r\n        var self = this;\r\n        var mode = self.getMode();\r\n\r\n        // Just execute ajax calls when rendering in execution mode\r\n        if (mode != \"execution\") return self.getDummyData();\r\n\r\n        // Do not load dependant combos when there are no parent id\r\n        if (self.isDependant) {\r\n            if (self.parentCombo && params) {\r\n                self.properties.remoteDataLoaded = false;\r\n            }\r\n\r\n            // Return an empty array when there are no parent defined when the combo is dependant\r\n\r\n            var parentValue = (self.parentCombo.selectedValue) ? self.parentCombo.selectedValue.id : '';\r\n\r\n            if (parentValue != '') {\r\n                return this._super(params);\r\n            } else {\r\n                return [];\r\n            }\r\n        }\r\n\r\n        return this._super(params);\r\n    },\r\n\r\n\r\n    /* \r\n    *   Bind the combos to create the cascading feature\r\n    */\r\n    bindDependantCombo: function (dependantCombo) {\r\n        var self = this;\r\n        var renderType = bizagi.util.normalizeType(dependantCombo.properties.type);\r\n\r\n        // Check it is a cascading combo\r\n        if (/^cascadingcombo$/i.test(renderType)) {\r\n\r\n            // Append to dependant combos\r\n            self.dependants.push(dependantCombo);\r\n\r\n            // When this combo is selected we need to make the other combo to auto fill with an extra filter\r\n            dependantCombo.onChangeFunction = function (event, item, isInitialValue) {\r\n                // Fill items for next combo\r\n                self.refreshDependantCombo(dependantCombo, item.id, self.focusDependant, isInitialValue);\r\n\r\n                //if initial value is true, it prevents deleting the next combo\r\n                if (!isInitialValue) {\r\n                    // Clean next inputs\r\n                    dependantCombo.cleanInput();\r\n                }\r\n            };\r\n\r\n            if (!self.isEventBinded(\"select\")) {\r\n                self.bind(\"select\", dependantCombo.onChangeFunction);\r\n            }\r\n\r\n            // After the event binding has been made, we need to fill the new dependant render if this instance (the parent) has a value\r\n            if (!bizagi.util.isEmpty(self.getValue())) {\r\n\r\n                // Auto fill dependant items with current value\r\n                if (self.properties.hasLocalData) {\r\n                    self.refreshDependantCombo(dependantCombo, self.getValue().id);\r\n                }\r\n\r\n            }\r\n        }\r\n    },\r\n    isEventBinded: function (event) {\r\n        if (typeof $._data(this.observableElement.get(0), \"events\") === \"undefined\") {\r\n            return false;\r\n        } else {\r\n            if (typeof $._data(this.observableElement.get(0), \"events\")[event] === \"undefined\") {\r\n                return false;\r\n            } else {\r\n                return true;\r\n            }\r\n        }\r\n    },\r\n\r\n\r\n    /* \r\n    *   Unbind the combos that are being redrawn\r\n    */\r\n    unbindDependantCombo: function (dependantCombo) {\r\n        // When this combo is selected we need to make the other combo to auto fill with an extra filter\r\n        this.unbind(\"select\", dependantCombo.onChangeFunction);\r\n    },\r\n\r\n    /*\r\n    *   Fills the next dependant combo based on the given value\r\n    */\r\n    refreshDependantCombo: function (dependant, parentValue, focus, isInitialValue) {\r\n        var self = this;\r\n        var params = {};\r\n        params[self.Class.BA_ACTION_PARAMETER_PREFIX + \"parent\"] = parentValue;\r\n\r\n        dependant.deferredVisible = $.Deferred();\r\n\r\n        if (!isInitialValue) {\r\n            // Clear dependant value\r\n            dependant.setValue(\"\", false);\r\n        }\r\n\r\n        dependant.refresh(params, isInitialValue);\r\n\r\n        if (focus) {\r\n            $.when(dependant.deferredVisible.promise()).done(function () {\r\n                dependant.inputCombo.trigger(\"click\");\r\n            });\r\n        }\r\n    },\r\n\r\n    /*\r\n    *   Empty html when render from action\r\n     */\r\n\r\n    emptyControlByChangeEditability: function () {\r\n        var control = this.getControl();\r\n        control.empty();\r\n    },\r\n\r\n    /* \r\n    *   Cleans the combo value\r\n    */\r\n    cleanInput: function () {\r\n        this.triggerHandler(\"select\", {id: 0});\r\n    },\r\n\r\n    /*\r\n    *   Search for the other cascading combo refering this one, by idRender\r\n    */\r\n    getParentCombo: function () {\r\n        var self = this;\r\n        var properties = self.properties;\r\n\r\n        // Check if parentCombo is defined\r\n        if (properties.parentCombo === undefined)\r\n            return null;\r\n\r\n        // Get form reference\r\n        var form = self.getFormContainer();\r\n        var renderType = bizagi.util.normalizeType(self.properties.type);\r\n        var controls = /^cascadingcombo$/i.test(renderType) ? form.getRenderByType(properties.type) : [];\r\n\r\n        var i = 0;\r\n        var j = 0;\r\n        var parents = [];\r\n\r\n        var control = null;\r\n\r\n        for (; i < controls.length; i++) {\r\n            if (properties.parentCombo === controls[i].properties.id) {\r\n                parents.push({control: controls[i], index: i});\r\n            }\r\n        }\r\n\r\n        if (parents.length > 1) {\r\n            var parentLength, parent, xpathParent, parentArray;\r\n\r\n            for (; j < parents.length; j++) {\r\n                parent = parents[j].control;\r\n                xpathParent = parent.properties.xpath;\r\n                parentArray = xpathParent.split(\".\");\r\n                parentLength = parentArray.length;\r\n                xpathParent = parentArray.slice(0, parentLength - 1).join(\".\");\r\n\r\n                if (xpathParent === properties.xpath) {\r\n                    control = controls[parents[j].index];\r\n                    break;\r\n                }\r\n            }\r\n        } else {\r\n            control = form.getRenderById(properties.parentCombo);\r\n        }\r\n\r\n        // Return parent combo\r\n        return control;\r\n    },\r\n\r\n    /* \r\n    *  Method to determine if the render value can be sent to the server or not\r\n    */\r\n    canBeSent: function () {\r\n        var self = this;\r\n\r\n        // If the render has dependants we can't send to the server\r\n        return self._super() && bizagi.util.isMapEmpty(self.dependants);\r\n    },\r\n\r\n    /*\r\n    *   Determines if we need to show the current data regardless if it belongs to data or not\r\n    *   Can be overriden to change behaviour\r\n    */\r\n    showCurrentData: function () {\r\n        var mode = this.getMode();\r\n\r\n        if (mode != \"execution\") return true;\r\n        return false;\r\n    },\r\n\r\n    /*\r\n    *   Enables submit on change feature for the current render\r\n    */\r\n    configureSubmitOnChange: function () {\r\n        var self = this;\r\n\r\n        if (!self.configured) {\r\n            // Call super\r\n            self._super();\r\n            self.configured = true;\r\n        }\r\n    },\r\n\r\n    internalSubmitOnChange: function (data, bRefreshForm) {\r\n        var self = this;\r\n        var defer = new $.Deferred();\r\n\r\n        if (self.isDependant && self.canBeSent() && self.itemSelected !== undefined)\r\n            return self._super(data, bRefreshForm);\r\n        return defer.resolve();\r\n    },\r\n    /*\r\n    *   Sets the initial value for the renders\r\n    */\r\n    internalSetInitialValue: function () {\r\n        var self = this;\r\n        // Call original method\r\n        self._super();\r\n\r\n        if (self.value && self.isDependant == false) {\r\n            self.internalSetInitialValueFlag = true;\r\n            self.trigger(\"select\", [self.value, true]);\r\n        }\r\n\r\n        self.internalSetInitialValueFlag = false;\r\n    }\r\n\r\n});\r\n","/*\r\n*   Name: Bizagi Render List Class\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will define basic stuff for list renders\r\n*/\r\n\r\n$.Class.extend(\"bizagi.rendering.list\", {}, {\r\n\r\n    /**\r\n     * Update or init the element data\r\n     * @param {} data \r\n     * @returns {} \r\n     */\r\n    initializeData: function(data) {      \r\n        // Call base\r\n        this._super(data);\r\n\r\n        // Fill default properties\r\n        var properties = this.properties;\r\n        properties.listSize = properties.listSize || 0;\r\n    },\r\n\r\n    /**\r\n     * Gets the template used by the combo render can be overriden in subclasses\r\n     * to reuse logic and just change the template\r\n     * @returns {} \r\n     */\r\n    getTemplateName: function() {\r\n        return \"list\";\r\n    },\r\n\r\n    /**\r\n     * Determines if we need to show the current data regardless if it belongs\r\n     * to data or not Can be overriden to change behaviour    \r\n     * @returns {} \r\n     */\r\n    showCurrentData: function() {\r\n        return false;\r\n    }\r\n\r\n});","/**\r\n *   Name: Bizagi Render MultiSelect Class\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define basic stuff for multiselect renders\r\n */\r\n\r\n$.Class.extend(\"bizagi.rendering.multiSelect\", {}, {\r\n\r\n    /**\r\n     * Update or init the element data\r\n     * @param data\r\n     */\r\n    initializeData: function (data) {\r\n        // Call base\r\n        this._super(data);\r\n        if (Array.isArray(this.value)) {\r\n            this.value = this.properties.value = JSON.encode({\"value\": this.value});\r\n            this.properties.originalValue = this.properties.previousValue = this.value;\r\n        }\r\n        // Fill default properties\r\n        var properties = this.properties;\r\n        properties.editable = bizagi.util.parseBoolean(properties.editable) !== null ? bizagi.util.parseBoolean(properties.editable) : true;\r\n        properties.maxRecords = Number(properties.maxRecords) || 20;\r\n    },\r\n\r\n    /**\r\n     * Template method to implement in each children to customize each control\r\n     * @returns {*|jQuery}\r\n     */\r\n    renderControl: function () {\r\n        var self = this;\r\n        var properties = self.properties;\r\n        var template = self.renderFactory.getTemplate(\"list-multiselect\");\r\n\r\n        return $.fasttmpl(template, {\r\n            id: properties.id,\r\n            xpath: properties.xpath,\r\n            editable: properties.editable,\r\n            align: properties.valueAlign\r\n        }, {\r\n            formatItem: self.formatItem\r\n        });\r\n    },\r\n\r\n    /**\r\n     * Method to render non editable values\r\n     */\r\n    renderReadOnly: function () {\r\n        var self = this;\r\n        var properties = self.properties;\r\n        var template = self.renderFactory.getTemplate(\"list-multiselect\");\r\n\r\n        return $.fasttmpl(template, {\r\n            id: properties.id,\r\n            xpath: properties.xpath,\r\n            editable: properties.editable,\r\n            align: properties.valueAlign\r\n        }, {\r\n            formatItem: self.formatItem\r\n        });\r\n    },\r\n\r\n    /**\r\n     * Fetch the data into a deferred\r\n     * @returns {*[]}\r\n     */\r\n    getData: function () {\r\n        var self = this;\r\n        var defer = new $.Deferred();\r\n        var properties = this.properties;\r\n\r\n        // Go to server\r\n        self.dataService.multiaction().getData({\r\n            url: properties.dataUrl,\r\n            xpath: properties.xpath,\r\n            idRender: properties.id,\r\n            xpathContext: properties.xpathContext,\r\n            contexttype: properties.contexttype || null,\r\n            idPageCache: properties.idPageCache\r\n        }).done(function (data) {\r\n            properties.data = self.normalizeData(data);\r\n\r\n            defer.resolve(properties.data);\r\n\r\n        }).fail(function (data) {\r\n            if (data.type === \"not-processed\")\r\n                return;\r\n\r\n            // Show error from server\r\n            var auxMsg = \"\";\r\n            var form = self.getFormContainer();\r\n            var msgObj = self.properties.displayName + \": \";\r\n\r\n            if (typeof data == \"string\") {\r\n                auxMsg = JSON && JSON.parse(data) || $.parseJSON(data);\r\n            } else {\r\n                auxMsg = data;\r\n            }\r\n\r\n            msgObj += auxMsg.message;\r\n\r\n            form.addValidationMessage(msgObj);\r\n\r\n            defer.reject(data);\r\n        });\r\n\r\n        return defer.promise();\r\n    },\r\n\r\n    /**\r\n     * Sets the internal value\r\n     * @param value\r\n     * @param triggerEvents\r\n     */\r\n    setValue: function (value, triggerEvents) {\r\n        triggerEvents = triggerEvents !== undefined ? triggerEvents : true;\r\n\r\n        if(Array.isArray(value)){\t\t\r\n\t\t\tvalue = JSON.encode({\"value\": value});\r\n\t\t} else {\r\n\t\t\tvalue = value;\r\n\t\t}\r\n\r\n        this._super(value, triggerEvents);\r\n    },\r\n\r\n    /**\r\n     * Sets the value in the rendered control\r\n     * @param value\r\n     */\r\n    setDisplayValue: function (value) {\r\n        var self = this;\r\n\r\n        // Set internal value\r\n        self.setValue(value, false);\r\n    },\r\n\r\n    /**\r\n     * Method to determine if the render value can be sent to the server or not\r\n     * @returns {boolean}\r\n     */\r\n    canBeSent: function () {\r\n        return true;\r\n    },\r\n\r\n    /**\r\n     * Returns the internal value\r\n     * @returns {*|Array}\r\n     */\r\n    getValue: function () {\r\n        return this.value || [];\r\n    },\r\n\r\n    /**\r\n     * Get list of data\r\n     * @returns {*|Array}\r\n     */\r\n    getDataValue: function () {\r\n        var list;\r\n\r\n        try {\r\n            list = JSON.parse(this.value);\r\n\r\n            return list.value || [];\r\n        } catch (e) {\r\n            return [];\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Check if a render has no value for required validation\r\n     * @returns {*|Array|boolean}\r\n     */\r\n    hasValue: function () {\r\n        var values = this.getDataValue();\r\n\r\n        return values && values.length > 0;\r\n    },\r\n\r\n    getElementsToStylize: function (context) {\r\n        return $(\".bz-multiselect .bz-multiselect__tag:not(.bz-multiselect__plus)\", context);\r\n    },\r\n\r\n    /**\r\n     * Add elements to global value\r\n     * @param value\r\n     */\r\n    addElement: function (value) {\r\n        var newValue = this.getDataValue();\r\n\r\n        newValue.push(value);\r\n\r\n        this.setValue(newValue);\r\n    },\r\n\r\n    /**\r\n     * Remove elements to global value\r\n     * @param value\r\n     */\r\n    removeElement: function (value) {\r\n        var idToRemove = value.id;\r\n        var newValue = this.getDataValue()\r\n            .filter(function (item) {\r\n                return item.id !== idToRemove;\r\n            });\r\n\r\n        this.setValue(newValue);\r\n    },\r\n\r\n    /**\r\n     * Submit the selected data to the server in order to be saved\r\n     */\r\n    submitData: function () {\r\n        var data = {};\r\n\r\n        // Add current data\r\n        data[this.properties.xpath] = this.getValue();\r\n\r\n        // Executes submit on change\r\n        this.submitOnChange(data);\r\n    },\r\n\r\n    /**\r\n     * Mark a item how checked\r\n     * @param id\r\n     * @returns {*}\r\n     */\r\n    markAsChecked: function (id) {\r\n        var self = this;\r\n\r\n        return self.selected.some(function (item, index) {\r\n            var found = item.id === id;\r\n\r\n            if (found) self.selected.splice(index, 1);\r\n            return found;\r\n        });\r\n    },\r\n\r\n    isChecked: function (values, id) {\r\n        return values.some(function (item) {\r\n            return item.id == id;\r\n        });\r\n    },\r\n\r\n    /**\r\n     * Method to verify if can add more items\r\n     * @param $tagsContainer\r\n     * @returns {boolean}\r\n     */\r\n    canAddMoreItems: function ($tagsContainer) {\r\n        var self = this;\r\n        var containerWidth = parseInt($tagsContainer.css(\"width\"));\r\n        var $children = $tagsContainer.children();\r\n\r\n        var childrenWidth = $children\r\n            .toArray()\r\n            .reduce(function (acc, child) {\r\n                acc += self.getElementWidth(child);\r\n                return acc;\r\n            }, 0);\r\n\r\n        return containerWidth > (childrenWidth + self.Class.MORE_OPTION_WIDTH)\r\n\r\n    },\r\n\r\n    /**\r\n     * getElementWidth\r\n     * @param element\r\n     * @returns {*}\r\n     */\r\n    getElementWidth: function (element) {\r\n        var styles = window.getComputedStyle(element);\r\n        var outerWidth = $(element).outerWidth();\r\n        return outerWidth + [\r\n            \"padding-left\",\r\n            \"padding-right\",\r\n            \"margin-left\",\r\n            \"margin-right\"\r\n        ].reduce(function (acc, property) {\r\n            acc += parseInt(styles[property]);\r\n            return acc;\r\n        }, 0);\r\n    },\r\n\r\n    /**\r\n     * Filtering list of elements\r\n     * @param query\r\n     * @param $container\r\n     */\r\n    filterList: function (query, $container) {\r\n\r\n        $container.filter(function () {\r\n            var stringContainer = $(this).text().toUpperCase();\r\n            var stringToSearch = query.toUpperCase();\r\n\r\n            if (stringContainer.indexOf(stringToSearch) >= 0) {\r\n                return $(this);\r\n            } else {\r\n                $(this).hide();\r\n            }\r\n        }).show();\r\n\r\n    },\r\n\r\n    /**\r\n     * addSelectedElements\r\n     */\r\n    addSelectedElements: function () {\r\n    },\r\n\r\n    /**\r\n     * Find item by id\r\n     * @param id\r\n     * @returns {[]}\r\n     */\r\n    findItemById: function (id) {\r\n        return (this.properties.data || []).find(function (item) {\r\n            return item.id == id;\r\n        });\r\n    },\r\n\r\n    /**\r\n     * Formats value of each item\r\n     * @param {string, boolean or array} value\r\n     * @example\r\n     * value = \"string\" => \"string\"\r\n     * value = true => \"yes\" or \"si\", the localized value\r\n     * value = false => \"no\", the localized value\r\n     * value = [\"string 1\", \"string 2\"] => \"string 1 - string 2\"\r\n     * @returns {string}\r\n     */\r\n    formatItem: function (value) {\r\n        return bizagi.util.formatItem(value);\r\n    },\r\n\r\n    /**\r\n     * Complement data from server before control implementation\r\n     * @param data\r\n     */\r\n    normalizeData: function (data) {\r\n        (data || []).forEach(function (item) {\r\n            item.value = typeof (item.value) !== \"undefined\" && item.value !== null ? item.value : \"\";\r\n        });\r\n\r\n        return data;\r\n    }\r\n\r\n});\r\n","/*\r\n*   Name: Bizagi Render Search List Control\r\n*   Author: UI Forms Team\r\n*/\r\n\r\n$.Class.extend(\"bizagi.rendering.searchList\", {}, {\r\n\r\n    /**\r\n     * Update or init the element data\r\n     * @param {} data \r\n     * @returns {} \r\n     */\r\n    initializeData: function(data) {\r\n        var self = this;\r\n\r\n        // Call base\r\n        self._super(data);\r\n\r\n        // Fill default properties\r\n        var properties = this.properties;\r\n        properties.maxRecords = Number(properties.maxRecords) || 20;\r\n        properties.editable = bizagi.util.parseBoolean(properties.editable) !== null ? bizagi.util.parseBoolean(properties.editable) : true;\r\n\r\n        // Set value\r\n        self.setValue(properties.value);\r\n    },\r\n\r\n    /**\r\n     * Template method to implement in each children to customize each control\r\n     * @returns {} \r\n     */\r\n    renderControl: function() {\r\n        var self = this;\r\n        var properties = self.properties;\r\n        var template = self.renderFactory.getTemplate(\"searchList\");\r\n\r\n        return $.fasttmpl(template, {\r\n            id: properties.id,\r\n            xpath: properties.xpath,\r\n            value: properties.value,\r\n            allowTyping: properties.allowTyping,\r\n            items: properties.value,\r\n            hasSearchForm: properties.searchForms ? true : false,\r\n            editable: properties.editable\r\n        }, {\r\n            formatItem: self.formatItem\r\n        });\r\n    },\r\n\r\n    /**\r\n     * Method to render non editable values\r\n     * @returns {} \r\n     */\r\n    renderReadOnly: function() {\r\n        return this.renderControl();\r\n    },\r\n\r\n    /**\r\n     * Sets the internal value\r\n     * @param {} value \r\n     * @returns {} \r\n     */\r\n    setValue: function(value) {\r\n        this.value = JSON.encode({ \"value\": value });\r\n        this.triggerRenderChange();\r\n    },\r\n\r\n    /**\r\n     * Add elements to global value\r\n     * @param value = { id:integer,value:[string || array] }\r\n     * @returns {} \r\n     */\r\n    addElement: function(value) {\r\n        var list = JSON.parse(this.value);\r\n\r\n        list.value.push(value);\r\n\r\n        this.setValue(list.value);\r\n    },\r\n\r\n    /**\r\n     * Remove elements to global value\r\n     * @param value = { id:integer }\r\n     * @returns {} \r\n     */\r\n    removeElement: function(value) {\r\n        var list = JSON.parse(this.value);\r\n        var result = [];\r\n\r\n        $.each(list.value, function(key, val) {\r\n            if (val.id != value.id) {\r\n                result.push({ id: val.id, value: val.value });\r\n            }\r\n        });\r\n\r\n        this.setValue(result);\r\n    },\r\n\r\n    /**\r\n     * Remove last element to global value\r\n     * @returns {} \r\n     */\r\n    removeLastElement: function() {\r\n        var list = JSON.parse(this.value);\r\n\r\n        if (list.value.length > 0) {\r\n            list.value.pop();\r\n            this.setValue(list.value);\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Fetch the data into a deferred\r\n     * @param {} params \r\n     * @returns {} \r\n     */\r\n    getData: function(params) {\r\n        var self = this;\r\n        var properties = self.properties;\r\n        var defer = new $.Deferred();\r\n\r\n        // Resolve with remote data\r\n        self.dataService.getSearchData({\r\n            url: properties.dataUrl,\r\n            xpath: properties.xpath,\r\n            idRender: properties.id,\r\n            xpathContext: properties.xpathContext,\r\n            idPageCache: properties.idPageCache,\r\n            term: properties.term,\r\n            extra: params\r\n        }).done(function(data) {\r\n            // Resolve with fetched data\r\n            properties.data = data;\r\n            defer.resolve(properties.data);\r\n        }).fail(function(data) {\r\n            var hideStatus = data.hideStatus || false;\r\n\r\n            defer.resolve({});\r\n\r\n            if (!hideStatus) {\r\n                self.trigger(\"onSearchError\", data);\r\n            }\r\n        });\r\n\r\n        return defer.promise();\r\n    },\r\n\r\n    /**\r\n     * Submits the selected data to the server in order to be saved\r\n     * @returns {} \r\n     */\r\n    submitData: function() {\r\n        var data = {};\r\n\r\n        // Add current data\r\n        data[this.properties.xpath] = this.getValue();\r\n\r\n        // Executes submit on change\r\n        this.submitOnChange(data);\r\n    },\r\n\r\n    /**\r\n     * Method to determine if the render value can be sent to the server or not\r\n     * @returns {} \r\n     */\r\n    canBeSent: function() {\r\n        return true;\r\n    },\r\n\r\n    /**\r\n     * Check if the control has value\r\n     * @returns {} \r\n     */\r\n    hasValue: function() {\r\n        var list = this.getListItems();\r\n\r\n        return list.length > 0;\r\n    },\r\n\r\n    getListItems: function(){\r\n        var value = this.getValue();\r\n        var finalValue = typeof (value) === \"string\" ? JSON.parse(value).value : value.value;\r\n\r\n        return finalValue || [];\r\n    },\r\n    \r\n    /**\r\n     * Formats value of each item\r\n     * @param {string, boolean or array} value\r\n     * @example\r\n     * value = \"string\" => \"string\"\r\n     * value = true => \"yes\" or \"si\", the localized value\r\n     * value = false => \"no\", the localized value\r\n     * value = [\"string 1\", \"string 2\"] => \"string 1 - string 2\"\r\n     * @returns {string}\r\n     */\r\n    formatItem: function (value) {\r\n        return bizagi.util.formatItem(value);\r\n    }\r\n\r\n});\r\n","/**\r\n *   Name: Bizagi Render Money Class\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define basic stuff for money numbers\r\n */\r\n\r\n$.Class.extend(\"bizagi.rendering.money\", {}, {\r\n\r\n    /**\r\n     * Update or init the element data\r\n     * @param {} data\r\n     * @returns {}\r\n     */\r\n    initializeData: function (data) {\r\n        var self = this;\r\n\r\n        // Call base\r\n        self._super(data);\r\n\r\n        // Fill default properties\r\n        var properties = self.properties;\r\n        var format = this.getResource(\"numericFormat\");\r\n\r\n        // Configures symbol\r\n        properties.showsymbol = typeof (properties.showsymbol) !== \"undefined\" ? properties.showsymbol : true;\r\n\r\n        if (properties.showsymbol) {\r\n            var symbol = typeof (BIZAGI_DEFAULT_CURRENCY_INFO) !== \"undefined\" ? BIZAGI_DEFAULT_CURRENCY_INFO.symbol : format.symbol;\r\n            properties.symbol = properties.currencySymbol ? properties.currencySymbol : symbol;\r\n        } else {\r\n            properties.symbol = \"\";\r\n        }\r\n\r\n        properties.groupDigits = true;\r\n    }\r\n\r\n});\r\n","/**\r\n *   Name: Bizagi Render Radio Class\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define basic stuff for radio renders\r\n */\r\n\r\n$.Class.extend(\"bizagi.rendering.radio\", {}, {\r\n\r\n    /**\r\n     * Update or init the element data\r\n     * @param data\r\n     */\r\n    initializeData: function (data) {\r\n        var self = this;\r\n        // Call base\r\n        this._super(data);\r\n\r\n        // Fill default properties\r\n        var properties = this.properties;\r\n        properties.horizontal = bizagi.util.parseBoolean(properties.horizontal) || false;\r\n\r\n        // Set a random identifier to fix a problem when using radio buttons inside grids and the plugin mismatch the elements because all of them have the same name\r\n        properties.unique = bizagi.util.randomNumber(1000, 1000000);\r\n    },\r\n\r\n    /**\r\n     * Gets the template used by the combo render\r\n     * Can be overridden in subclasses to reuse logic and just change the template\r\n     * @returns {string}\r\n     */\r\n    getTemplateName: function () {\r\n        return \"radio\";\r\n    },\r\n\r\n    /**\r\n     * Determines if we need to show the empty node or not\r\n     * Can be overridden to change behaviour\r\n     * @returns {boolean}\r\n     */\r\n    showEmpty: function () {\r\n        return false;\r\n    },\r\n\r\n    /**\r\n     * Determines if we need to show the current data regardless if it belongs to data or not\r\n     * Can be overridden to change behaviour\r\n     * @returns {boolean}\r\n     */\r\n    showCurrentData: function () {\r\n        return false;\r\n    },\r\n\r\n    /**\r\n     * Adds custom parameters to process the template\r\n     * @returns {{vertical: boolean}}\r\n     */\r\n    getTemplateParams: function () {\r\n        var self = this;\r\n        var properties = self.properties;\r\n\r\n        return {\r\n            vertical: !properties.horizontal,\r\n            horizontal: properties.horizontal\r\n        };\r\n    },\r\n\r\n    /**\r\n     * Cleans current data\r\n     */\r\n    cleanData: function () {\r\n        var self = this;\r\n        var value = {id: \"\", label: \"\"};\r\n        var selectedItem = self.element.find(\".ui-radio-state-checked\");\r\n\r\n        selectedItem.removeClass(\"ui-radio-state-checked\");\r\n        self.setDisplayValue(value);\r\n        self.setValue(value, false);\r\n        self.clearDisplayValue();\r\n    },\r\n\r\n    /**\r\n     * Check value of control is changed\r\n     * @returns {boolean}\r\n     */\r\n    controlValueIsChanged: function () {\r\n        var self = this;\r\n        var properties = self.properties;\r\n\r\n        var value = self.getValue();\r\n        var compareValue = properties.originalValue;\r\n        var baseValue = properties.defaultValue;\r\n\r\n        var result = true;\r\n\r\n        if (value && value.length !== undefined) {\r\n            value = value[0];\r\n        }\r\n        if (compareValue && compareValue.length !== undefined) {\r\n            compareValue = compareValue[0];\r\n        }\r\n        if (baseValue && baseValue.length !== undefined) {\r\n            baseValue = baseValue[0];\r\n        }\r\n\r\n        value = value && value.id !== undefined ? value.id : value;\r\n        compareValue = compareValue && compareValue.id !== undefined ? compareValue.id : compareValue;\r\n        baseValue = baseValue && baseValue.id !== undefined ? baseValue.id : baseValue;\r\n\r\n        if (baseValue !== undefined) {\r\n            if ((baseValue == value) && (value == compareValue)) {\r\n                result = false;\r\n            } else {\r\n                if ((value === null || value === \"\") && (compareValue === null || compareValue === \"\")) {\r\n                    result = false;\r\n                } else {\r\n                    result = (compareValue == value) ? false : true;\r\n                }\r\n            }\r\n        } else {\r\n            if ((value === null || value === \"\") && (compareValue === null || compareValue === \"\")) {\r\n                result = false;\r\n            } else {\r\n                result = (compareValue == value) ? false : true;\r\n            }\r\n        }\r\n\r\n        return result;\r\n    },\r\n    /**\r\n     * Clean html because some scenarios render twice\r\n     */\r\n    emptyControlByAsyncRenderDeferred: function () {\r\n        var control = this.getControl();\r\n        control.empty();\r\n    }\r\n});\r\n\r\n","/**\r\n*   Name: Bizagi Render Image Class\r\n*   Author: UI Forms Team\r\n*   Comments:\r\n*   -   This script will define basic stuff for image control\r\n*/\r\n\r\n$.Class.extend(\"bizagi.rendering.image\", {\r\n    // Statics\r\n    BA_ACTION_PARAMETER_PREFIX: bizagi.render.services.service.BA_ACTION_PARAMETER_PREFIX,\r\n    BA_CONTEXT_PARAMETER_PREFIX: bizagi.render.services.service.BA_CONTEXT_PARAMETER_PREFIX,\r\n    BA_PAGE_CACHE: bizagi.render.services.service.BA_PAGE_CACHE\r\n}, {\r\n\r\n    /**\r\n     * Update or init the element data\r\n     * @param data\r\n     */\r\n    initializeData: function (data) {\r\n        var self = this;\r\n\r\n        // Call base\r\n        self._super(data);\r\n\r\n        // Fill default properties\r\n        var properties = this.properties;\r\n        var maxSize = 4091904;\r\n\r\n        if(properties.maxSize) {\r\n            maxSize = Number(properties.maxSize);\r\n        } else if (typeof (BIZAGI_SETTINGS) !== \"undefined\" && typeof (BIZAGI_SETTINGS.UploadMaxFileSize) !== \"undefined\") {\r\n            maxSize = Number(BIZAGI_SETTINGS.UploadMaxFileSize);\r\n        }\r\n\r\n        properties.maxSize = maxSize;\r\n        properties.editable = bizagi.util.parseBoolean(properties.editable) === true;\r\n        properties.validExtensions = properties.validExtensions || \"\";\r\n\r\n        if (properties.validExtensions.length > 0 && properties.validExtensions.indexOf(\".\") < 0) {\r\n            var singleExtensions = properties.validExtensions.replace(/\\ /gi, '').split(\";\");\r\n\r\n            for (var i = 0; i < singleExtensions.length; i++) {\r\n                if (singleExtensions[i].length != 0) {\r\n                    singleExtensions[i] = \"*.\" + singleExtensions[i].replaceAll(\" \", \"\");\r\n                } else {\r\n                    //Removes the empty element\r\n                    var index = singleExtensions.indexOf(singleExtensions[i]);\r\n                    singleExtensions.splice(i, 1);\r\n                }\r\n            }\r\n\r\n            properties.validExtensions = singleExtensions.join(\";\");\r\n        }\r\n\r\n        properties.addUrl = properties.addUrl || self.dataService.getUploadAddFileUrl(properties.isUserPreference);\r\n        properties.allowDelete = bizagi.util.parseBoolean(properties.allowDelete) !== null;\r\n\r\n        properties.isAutoWidth = false;\r\n        properties.isAutoHeight = false;\r\n\r\n        if (properties.width === -1) {\r\n            properties.width = \"100%\";\r\n            properties.isAutoWidth = true;\r\n        } else {\r\n            properties.width = properties.width + \"px\";\r\n        }\r\n\r\n        if (properties.height === -1) {\r\n            properties.height = \"auto\";\r\n            properties.isAutoHeight = true;\r\n        } else {\r\n            properties.height = properties.height + \"px\";\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Template method to implement in each children to customize each control\r\n     * @returns {*}\r\n     */\r\n    renderControl: function () {\r\n        var self = this;\r\n        var def = new $.Deferred(); //design\r\n        var template = self.renderFactory.getTemplate(\"image\");        \r\n\r\n        $.when(self.buildItemUrl()).done(function (dataUrl) {\r\n            if (!self.isDisposed()) {\r\n                self.properties.url = dataUrl !== \"\" ? dataUrl : \"\";\r\n                self.properties.value = self.value = self.properties.url.length > 0 ? [self.properties.url] : null;\r\n                self.setValue(self.properties.value);                \r\n\r\n                var html = $.fasttmpl(template, { url: self.properties.url });\r\n                def.resolve(html);\r\n            }\r\n        }).fail(function (error) {\r\n           def.reject(error)\r\n        });\r\n\r\n        return def.promise();\r\n    },\r\n\r\n    /**\r\n     * Method to render non editable values\r\n     * @returns {*}\r\n     */\r\n    renderReadOnly: function () {\r\n        var template = this.renderFactory.getTemplate(\"image-readonly\");\r\n        var html = $.fasttmpl(template);\r\n\r\n        return html;\r\n    },\r\n\r\n    /**\r\n     * This method return the name of template of items, please make a override in each device\r\n     * @returns {*}\r\n     */\r\n    getTemplateItem: function () {\r\n        return this.renderFactory.getTemplate(\"image-item\");\r\n    },\r\n\r\n    /**\r\n     * Renders a single upload item\r\n     * @param file\r\n     * @returns {*}\r\n     */\r\n    renderUploadItem: function (file) {\r\n        var self = this;\r\n        var mode = self.getMode();        \r\n        var def = new $.Deferred();\r\n        var template = self.getTemplateItem();\r\n\r\n        $.when(self.buildItemUrl()).done(function (dataUrl) {\r\n            var url = dataUrl || \"\";\r\n\r\n            var html = $.fasttmpl(template, {\r\n                url: url,\r\n                allowDelete: self.properties.allowDelete,\r\n                editable: self.properties.editable,\r\n                mode: mode,                \r\n            });\r\n\r\n            self.properties.url = url;\r\n            self.properties.value = url.length > 0 ? [url] : null;\r\n\r\n            def.resolve(html);\r\n        });\r\n\r\n        return def.promise();\r\n    },\r\n\r\n    /**\r\n     * Builds the upload item url\r\n     * @param params\r\n     * @returns {*}\r\n     */\r\n    buildItemUrl: function (params) {\r\n        var self = this;\r\n        var properties = self.properties;\r\n        var def = new $.Deferred();\r\n        var url = \"\";\r\n\r\n        if (!this.isExecutionMode()) {\r\n            url = \"\"; // TODO: Review the use of \"javascript:void(0);\";\r\n            def.resolve(url);\r\n        } else {\r\n            var parameters = {\r\n                url: properties.dataUrl,\r\n                xpath: properties.xpath,\r\n                idRender: properties.id,\r\n                xpathContext: properties.xpathContext,\r\n                idPageCache: properties.idPageCache,\r\n                property: params && params.property ? params.property : \"fileContent\",\r\n                dataType: \"text\"\r\n            };\r\n\r\n            if (properties.contexttype) {\r\n                parameters.contexttype = properties.contexttype;\r\n            }\r\n\r\n            if (properties.isUserPreference) {\r\n                self.currentUser = bizagi.currentUser.idUser;\r\n                parameters.xpathContext = \"@Context.Users[id == \" + self.currentUser + \"]\";\r\n                parameters.contexttype = \"entity\";\r\n                parameters.surrogatekey = self.currentUser;\r\n            }\r\n\r\n            self.dataService.multiaction().getPropertyData(parameters, \"text\")\r\n                .done(function (data) {\r\n                    if (data.charAt(0) === \"\\\"\") {\r\n                        data = data.slice(1, -1);\r\n                    }\r\n\r\n                    if (data !== \"\") {\r\n                        url = \"data:image/png;base64,\" + data;\r\n                    }\r\n\r\n                    def.resolve(url);\r\n                }).fail(function (error) {\r\n                def.reject(error);\r\n            });\r\n        }\r\n\r\n        return def.promise();\r\n    },\r\n\r\n    buildItemUrlOffline: function(parameters){\r\n        var def = new $.Deferred();\r\n        var self = this;\r\n        var properties = self.properties;\r\n        var formParams = self.getFormParams();\r\n        var loadImageFromForm = true;\r\n        var imageId = properties.xpath;\r\n        if( properties.offlineImageId ){\r\n            imageId = properties.offlineImageId;\r\n            loadImageFromForm = false;\r\n        }\r\n        var parameters = {\r\n            idCase: formParams.idCase,\r\n            idWorkitem: formParams.idWorkitem,\r\n            id: imageId,\r\n            offlineType: formParams.offlineType,\r\n            loadImageFromForm: loadImageFromForm\r\n        }\r\n        $.when(self.dataService.getOfflineImage(parameters, \"base64\"))\r\n        .done( function(imageValue){\r\n            properties.value = imageValue;\r\n            def.resolve(bizagi.util.getDataUrl(properties));\r\n        });\r\n        return def.promise();\r\n    },\r\n\r\n    /**\r\n     * Create an image offline\r\n     * @param path File in Browser or Path in Mobile Devices\r\n     * @param promise Promise to be resolved when save is completed\r\n     */\r\n    saveImageOffline: function (path) {\r\n        var self = this; \r\n        var def = new $.Deferred();       \r\n        var blobPromise = new $.Deferred();\r\n        var offlineImageId = self.properties.xpath + '-' + bizagi.util.randomNumber();\r\n\r\n        if(self.isNative){\r\n            var fileName = self.fileProperties.name;            \r\n            if (!bizagi.util.isAndroidDevice()) {\r\n                path = bizagi.util.media.normalizeIOSFilePath(path);\r\n            }\r\n            else{\r\n                // Fix android 4.4 getting images from recent folder\r\n                path = bizagi.util.media.getImagePath(path);\r\n            }\r\n            \r\n            var errorHandler = function (error) {\r\n                bizagi.log('error converting path to blob', error);  \r\n                blobPromise.reject(error);\r\n            };\r\n    \r\n            window.resolveLocalFileSystemURL(path, function (fileEntry) {\r\n                fileEntry.file(function (file) {    \r\n                    var reader = new FileReader();\r\n                    reader.onloadend = function () {\r\n                        var blob = new Blob([this.result], {type: file.type});\r\n                        blob.name = fileName;\r\n                        blobPromise.resolve(blob);\r\n                    }    \r\n                    reader.readAsArrayBuffer(file);\r\n                }, errorHandler);\r\n            }, errorHandler);\r\n        }\r\n        else {\r\n            blobPromise.resolve(path);\r\n        }        \r\n\r\n        $.when(blobPromise)\r\n        .done( function(blobImage) {\r\n            // Save the image as attachment \r\n            var formParams = self.getFormParams();\r\n            var parameters = {\r\n                idCase: formParams.idCase,\r\n                idWorkitem: formParams.idWorkitem,\r\n                id: offlineImageId,\r\n                operationType: \"edition\",\r\n                offlineType: formParams.offlineType\r\n            }\r\n\r\n            $.when(self.dataService.saveOfflineImage(parameters, blobImage))\r\n            .done( function() {\r\n                self.properties.offlineImageId = offlineImageId;\r\n                def.resolve();\r\n            })\r\n            .fail( function(err){\r\n                def.reject(err);\r\n            });\r\n        })\r\n        .fail( function(blobError){\r\n            def.reject(blobError);\r\n        });\r\n\r\n        return def.promise();\r\n    },\r\n\r\n    /**\r\n     * Builds the upload item url in real size\r\n     * @returns {*}\r\n     */\r\n    buildFullItemUrl: function () {\r\n        var def = new $.Deferred();\r\n\r\n        $.when(this.buildItemUrl({\"property\": \"fileFullContent\"}))\r\n            .done(function (dataUrl) {\r\n                def.resolve(dataUrl);\r\n            }).fail(function (error) {\r\n            def.reject(error);\r\n        });\r\n\r\n        return def.promise();\r\n    },\r\n\r\n    /**\r\n     * Method to determine if the render value can be sent to the server or not\r\n     * @returns {boolean}\r\n     */\r\n    canBeSent: function () {\r\n        // This render cannot be sent because it is full ajax\r\n        return false;\r\n    },\r\n\r\n    /**\r\n     * Sets the internal value\r\n     * @param value\r\n     * @param triggerEvents\r\n     */\r\n    setValue: function (value, triggerEvents) {\r\n        // Call base\r\n        this._super(value, triggerEvents);\r\n    },\r\n\r\n    /**\r\n     * Returns the internal value\r\n     * @returns {*|Array}\r\n     */\r\n    getValue: function () {\r\n        return this.properties.value || [];\r\n    },\r\n\r\n    /**\r\n     * Check if control is valid or not\r\n     * @param invalidElements\r\n     * @returns {boolean}\r\n     */\r\n    isValid: function (invalidElements) {\r\n        var self = this;\r\n\r\n        // Don't check non-editable renders\r\n        if (bizagi.util.parseBoolean(self.properties.visible) === false) {\r\n            return true;\r\n        }\r\n\r\n        // Don't check non- editable renders\r\n        if (bizagi.util.parseBoolean(self.properties.editable) === false) {\r\n            return true;\r\n        }\r\n\r\n        // Clear error message\r\n        self.setValidationMessage(\"\");\r\n\r\n        // Check required\r\n        if (self.properties.required) {\r\n            var newRow = self.grid && self.grid.isFromCreatedRow.apply(self);\r\n\r\n            if (!newRow) {\r\n                var value = self.getValue();\r\n\r\n                if (value.length === 0) {\r\n                    var message = self.getResource(\"render-required-text\").replaceAll(\"#label#\", self.properties.displayName);\r\n                    invalidElements.push({ xpath: self.properties.xpath, message: message });\r\n                    return false;\r\n                }\r\n            }\r\n        }\r\n\r\n        return true;\r\n    },\r\n\r\n    /**\r\n     * Build add params to send to the server\r\n     */\r\n    buildAddParams: function () {\r\n        var self = this;\r\n        var properties = self.properties;\r\n        var form = self.getFormContainer();\r\n        var data = {};\r\n\r\n        data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpath\"] = self.getUploadXpath();\r\n        data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"idRender\"] = properties.id;\r\n        data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"xpathContext\"] = properties.xpathContext;\r\n        data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = properties.idPageCache;\r\n        data[self.Class.BA_ACTION_PARAMETER_PREFIX + \"sessionId\"] = form.properties.sessionId;\r\n        data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"action\"] = 'savefile';\r\n\r\n        if (properties.contexttype) {\r\n            data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + \"contexttype\"] = properties.contexttype;\r\n        }\r\n\r\n        try {\r\n            if (typeof (BIZAGI_SESSION_NAME) !== \"undefined\") {\r\n                data[BIZAGI_SESSION_NAME] = form.properties.sessionId;\r\n            } else {\r\n                data[\"JSESSIONID\"] = form.properties.sessionId;\r\n            }\r\n        } catch (e) {\r\n            data[\"JSESSIONID\"] = form.properties.sessionId;\r\n        }\r\n\r\n        return data;\r\n    },\r\n\r\n    /**\r\n     * Returns the xpath to be used\r\n     * @returns {*}\r\n     */\r\n    getUploadXpath: function () {\r\n        return this.properties.xpath;\r\n    },\r\n\r\n    /**\r\n     * Clean html because some scenarios render twice\r\n     */\r\n    emptyControlByAsyncRenderDeferred: function () {\r\n        var $control = this.getControl();\r\n        $control.empty();\r\n    }\r\n});","/*\r\n*   Name: BizAgi User field render\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will define the basic behavior for userfields\r\n*/\r\n$.Class.extend(\"bizagi.rendering.userfieldDefinition\", {}, {\r\n\r\n    /*************************************************************/\r\n    /* Private section of the userfield                          */\r\n    /*************************************************************/\r\n\r\n    /*\r\n    *   Method to be overriden by userfields in order to ensure that custom files are loaded before the execution\r\n    */\r\n    getFileDependencies: function () {\r\n        return null;\r\n    },\r\n\r\n    postRender: function () {\r\n        var self = this;\r\n\r\n        // Call base\r\n        self._super();\r\n\r\n        var defer = $.Deferred();\r\n        var fileDependencies = self.getFileDependencies();\r\n        if (fileDependencies && fileDependencies.length > 0) {\r\n            bizagi.loader.loadFile(fileDependencies)\r\n\t\t\t.then(function () {\r\n\t\t\t    // After all dependencies has been resolved\r\n\t\t\t    self.internalRenderControl();\r\n\t\t\t    defer.resolve();\r\n\t\t\t});\r\n\r\n        } else {\r\n            $.when( self.renderUserfieldControl()).done(function () {\r\n                defer.resolve();\r\n            });\r\n        }\r\n\r\n        return defer.promise();\r\n    },\r\n\r\n    renderUserfieldControl: function () {\r\n        var self = this;\r\n        var control = self.getControl();\r\n        var properties = self.properties;\r\n        var def = new $.Deferred();\r\n\r\n        if (properties.extendedData && properties.extendedData.length > 0) {\r\n            self.extendedData = bizagi.services.ajax.parseJSON(properties.extendedData);\r\n        } else {\r\n            self.extendedData = {};\r\n        }\r\n\r\n\r\n        var loadUserfield = function () {\r\n            var userEditableControl = self.getEditableControl();\r\n            if (userEditableControl) {\r\n                self.input = control.html(userEditableControl);\r\n            }\r\n            self.renderComplex();\r\n            def.resolve();\r\n        };\r\n\r\n        \r\n            loadUserfield();\r\n    \r\n        \r\n        return def.promise();\r\n    },\r\n\r\n    postRenderReadOnly: function () {\r\n        var self = this;\r\n        var control = self.getControl();\r\n        var properties = self.properties;\r\n\r\n        if (properties.extendedData && properties.extendedData.length > 0) {\r\n            self.extendedData = bizagi.services.ajax.parseJSON(properties.extendedData);\r\n        } else {\r\n            self.extendedData = {};\r\n        }\r\n\r\n        var loadUserfieldReadOnly = function () {\r\n            try {\r\n                var userReadOnlyControl = self.getReadonlyControl();\r\n                if (userReadOnlyControl) {\r\n                    self.input = control.html(userReadOnlyControl);\r\n                }                                                 \r\n                self.renderComplex();\r\n                \r\n            } catch (error) {\r\n                var displayName = self.properties.displayName || \"Widget\";\r\n                control.html(\"<h6>\" + displayName  + \"</h6>\")\r\n            }\r\n            \r\n        };\r\n\r\n        if (self.ready) {\r\n            self.ready().done(function () {\r\n                loadUserfieldReadOnly();\r\n            });\r\n        } else {\r\n            loadUserfieldReadOnly();\r\n        }\r\n    },\r\n\r\n    getDisplayValue: function () {\r\n        var self = this;\r\n        return self.getReadonlyValue();\r\n    },\r\n\r\n    /*\r\n    *   Sets the value in the rendered control \r\n    */\r\n    setDisplayValue: function (value) {\r\n        var self = this;\r\n\r\n        // Call base\r\n        self.setValue(value);\r\n\r\n        // Set editable value in control\r\n        self.setEditableValue(value);\r\n    },\r\n\r\n    getValue: function () {\r\n        var self = this;\r\n        return self.getEditableValue();\r\n    },\r\n\r\n    getPropertyValue: function (propertyName, params) {\r\n        var self = this;\r\n        var properties = self.properties;\r\n        var defer = new $.Deferred();\r\n        self.dataService.multiaction().getPropertyData({\r\n            url: properties.dataUrl,\r\n            xpath: properties.xpath,\r\n            idRender: properties.id,\r\n            xpathContext: properties.xpathContext,\r\n            idPageCache: properties.idPageCache,\r\n            property: propertyName,\r\n            extra: params,\r\n            dataType: params ? params.dataType : null\r\n        }).done(function (data) {\r\n            if (data.type == \"error\") {\r\n                // Workflow engine error, we gotta show it with error\r\n                self.getFormContainer().addErrorMessage(data.message);\r\n                defer.reject(data);\r\n            } else {\r\n                defer.resolve(data);\r\n            }\r\n        }).fail(function (jqXHR, textStatus, errorThrown) {\r\n            defer.reject(jqXHR, textStatus, errorThrown);\r\n        });\r\n\r\n        return defer.promise();\r\n    },\r\n\r\n    /*\r\n    *   Saves the form\r\n    */\r\n    saveForm: function () {\r\n        var self = this;\r\n        var form = self.getFormContainer();\r\n        return form.saveForm();\r\n    },\r\n\r\n    /**\r\n    * Returns all the elements that match the given xpath\r\n    */\r\n    getRenderElements: function (xpath) {\r\n        var self = this;\r\n        var result = $();\r\n        var controls = self.getFormContainer().getRenders(xpath);\r\n        $.each(controls, function (i, item) {\r\n            result = result.add($(item.element));\r\n        });\r\n\r\n        return result;\r\n    },\r\n\r\n    getServerResourceURL: function (resource) {\r\n        var self = this;\r\n        var url = \"Rest/Userfields/{0}/resource/{1}/{2}\";\r\n        url = url.replace(\"{0}\", self.properties.userfieldGuid);\r\n        resource = resource.replace(\"\\\\\", \"__\").replace(\"/\", \"__\");\r\n        var device = bizagi.util.detectDevice();\r\n        url = url.replace(\"{1}\", device);\r\n        url = url.replace(\"{2}\", resource);\r\n        //Rest/Userfields/{0}/resource/desktop/{1}\r\n        return url;\r\n    },\r\n\r\n    /**\r\n    * Returns all the elements that match the given xpath\r\n    */\r\n    getRenderValue: function (xpath) {\r\n        var self = this;\r\n        var controls = self.getFormContainer().getRenders(xpath);\r\n        var control;\r\n        $.each(controls, function (index, item) {\r\n            if (!control || item.properties.editable) {\r\n                control = item;\r\n            }\r\n        });\r\n        if (control) {\r\n            return control.getValue();\r\n        } else {\r\n            return null;\r\n        }\r\n    },\r\n\r\n    /*\r\n    *   Refresh the current form\r\n    */\r\n    refreshForm: function () {\r\n        var self = this;\r\n        var properties = self.properties;\r\n\r\n        var form = self.getFormContainer();\r\n        form.refreshForm(properties.id);\r\n    },\r\n\r\n    /*\r\n    * Shows a jquery dialog\r\n    */\r\n    showDialog: function (url, params) {\r\n        bizagi.util.mustImplement(\"Must implement the showDialog method\");\r\n    },\r\n\r\n    /*\r\n    *   Shows a browser popup\r\n    */\r\n    showPopup: function (url, params) {\r\n        bizagi.util.mustImplement(\"Must implement the showPopup method\");\r\n    },\r\n\r\n    updateOriginalValue: function () {\r\n        var self = this;\r\n        self.properties.originalValue = self.value = self.properties.value;\r\n    }\r\n\r\n\r\n});\r\n\r\n\r\n$.Class.extend(\"bizagi.rendering.basicUserField\", {}, {\r\n\r\n    /*************************************************************/\r\n    /* methods to be overriden by the implementations            */\r\n    /*************************************************************/\r\n    getEditableControl: function () {\r\n    },\r\n\r\n    renderComplex: function () {\r\n    },\r\n\r\n    // Returns the value of the control\r\n    getEditableValue: function () {\r\n        return bizagi.rendering.render.prototype.getValue.apply(this, arguments);\r\n    },\r\n\r\n    // \r\n    setEditableValue: function (value) {\r\n        return bizagi.rendering.render.prototype.setValue.apply(this, arguments);\r\n    },\r\n\r\n    getReadonlyControl: function () {\r\n    },\r\n\r\n    getReadonlyValue: function () {\r\n        // if the method is not overriden then call the parent method \r\n        return bizagi.rendering.render.prototype.getDisplayValue.apply(this, arguments);\r\n    },\r\n\r\n    dispose: function () {\r\n        var self = this;\r\n\r\n        // Call base\r\n        self._super();\r\n    }\r\n\r\n});\r\n\r\n/*\r\n*   This control will wrap any userfield in order to load the code remotely, \r\n*   when executing renderControl, which is an async method\r\n*/\r\n$.Class.extend(\"bizagi.rendering.userfieldWrapper\", {}, {\r\n\r\n    /*\r\n    *   Constructor\r\n    */\r\n    init: function (params) {\r\n        var self = this;\r\n\r\n        // Call base\r\n        self._super(params);\r\n        // Save userfield guid and name\r\n        self.initialParams = params;\r\n        self.userfieldGuid = this.properties.userfieldGuid;\r\n        self.userfieldName = this.properties.control;\r\n    },\r\n\r\n    /*\r\n    *   Returns the in-memory processed element\r\n    */\r\n    internalPostRender: function () {\r\n        var self = this;\r\n        $.when(self.getUserfieldControl())\r\n        .done(function (control) {\r\n            control.element = self.element;\r\n\r\n            // Add grid and surrogatekey properties if the userfield is a column userfield\r\n            if (self.column) {\r\n                control.isColumn = true;\r\n                control.grid = self.grid;\r\n                control.surrogateKey = self.surrogateKey;\r\n                control.properties.xpathContext = self.getControlXpathContext(control);\r\n                control.getControl = self.column.getControl;\r\n            }\r\n\r\n            return control.internalPostRender();\r\n        });\r\n    },\r\n\r\n    /*\r\n    *   Helper for userfields to fetch the xpathContext\r\n    */\r\n    getControlXpathContext: function (control) {\r\n        var self = this;\r\n        var properties = control.properties;\r\n\r\n        if (control.isColumn) {\r\n            return properties.xpathContext.length > 0 ? properties.xpathContext + \".\" + control.grid.properties.xpath + \"[id=\" + control.surrogateKey + \"]\" : control.grid.properties.xpath + \"[id=\" + control.surrogateKey + \"]\";\r\n        }\r\n\r\n        return properties.xpathContext;\r\n    },\r\n\r\n\r\n    getUserFieldInstance: function(params){\r\n        console.log(\"not implemented\");\r\n    },\r\n\r\n    /*\r\n    *   Replicate all userfield methods to this instance in order to create a proxy\r\n    */\r\n    replicateUserfieldMethods: function (control) {\r\n        var self = this;\r\n        for (var key in control.Class.prototype) {\r\n            // Omit the folowing methods\r\n            if (key == \"init\" || key == \"constructor\" || key == \"Class\" || key == \"subscribe\" || key == \"unsubscribe\" ||\r\n                key == \"publish\" || key == \"render\" || key == \"triggerHandler\" || key == \"dispose\") continue;\r\n\r\n            // Replicate instance methods\r\n            self[key] = eval('var tmp = function(){ if (this.userfieldInstance) return this.userfieldInstance.' + key + '.apply(this.userfieldInstance, arguments); return null;};tmp');\r\n        }\r\n\r\n        // Replicate properties and value\r\n        control.properties = self.properties;\r\n        control.value = self.value;\r\n    },\r\n\r\n    dispose: function () {\r\n        var self = this;\r\n\r\n        setTimeout(function () {\r\n            if (self.userfieldInstance) {\r\n                self.userfieldInstance.unbind(\"renderchange\");\r\n                self.userfieldInstance.dispose();\r\n            }\r\n        }, bizagi.override.disposeTime || 50);\r\n\r\n        // Call base\r\n        self._super();\r\n    }\r\n});\r\n\r\n","/**\r\n *   Name: Bizagi Render Document Generator\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define basic stuff for document generator render\r\n */\r\n\r\n$.Class.extend(\"bizagi.rendering.document\", {}, {\r\n\r\n    /**\r\n     * Update or init the element data\r\n     * @param data\r\n     */\r\n    initializeData: function (data) {\r\n        // Call base\r\n        this._super(data);\r\n\r\n        var properties = this.properties;\r\n\r\n        properties.validate = bizagi.util.parseBoolean(properties.validate) != null ? bizagi.util.parseBoolean(properties.validate) : false;\r\n        properties.downloadalldocuments = properties.downloadalldocuments ? properties.downloadalldocuments : false;\r\n        properties.allowGenerate = properties.allowGenerate !== undefined ? properties.allowGenerate : true;\r\n        properties.append = properties.append ? properties.append : false;\r\n\r\n        if (properties.caption) {\r\n            properties.caption = bizagi.util.trim(properties.caption);\r\n\r\n            if (properties.caption.length === 0) {\r\n                properties.caption = this.getResource(\"render-documentgenerator-button-label\");\r\n            }\r\n        } else {\r\n            properties.caption = this.getResource(\"render-documentgenerator-button-label\");\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Template method to implement in each children to customize each control\r\n     * @returns {*}\r\n     */\r\n    renderControl: function () {\r\n        var self = this;\r\n\r\n        self.preRenderControl();\r\n\r\n        var properties = self.properties;\r\n        var mode = self.getMode();\r\n        var downloadAllDocuments = properties.downloadalldocuments;\r\n        var allowGenerate = properties.allowGenerate;\r\n        var template = self.renderFactory.getTemplate(self.getTemplate());\r\n        var documents = properties.value || [];\r\n        var noFiles = documents ? (documents.length === 0) : true;\r\n\r\n        // Render template\r\n        var html = self.getControlHtml(template, mode, downloadAllDocuments, allowGenerate, properties, noFiles);\r\n\r\n        // Render current children\r\n        var items = this.renderDocumentsHtml(documents);\r\n        items += this.renderActionsHtml(documents, noFiles, downloadAllDocuments);\r\n\r\n        html = self.replaceFilesHtml(html, items);\r\n        return html;\r\n    },\r\n\r\n    /**\r\n     * Template method to implement in each children to customize each control\r\n     * @param template\r\n     * @param mode\r\n     * @param downloadAllDocuments\r\n     * @param allowGenerate\r\n     * @param properties\r\n     * @param noFiles\r\n     * @returns {*|jQuery}\r\n     */\r\n    getControlHtml: function (template, mode, downloadAllDocuments, allowGenerate, properties, noFiles) {\r\n        var self = this;\r\n\r\n        return $.fasttmpl(template, {\r\n            noActivateButton: false,\r\n            editable: mode !== \"execution\",\r\n            mode: mode,\r\n            downloadalldocuments: downloadAllDocuments,\r\n            required: properties.required,\r\n            allowgenerate: allowGenerate,\r\n            xpath: self.getXpath(properties.xpath),\r\n            append: properties.append,\r\n            caption: properties.caption,\r\n            noFiles: noFiles,\r\n            allowSendInMail: properties.allowSendInMail\r\n        });\r\n    },\r\n\r\n    /**\r\n     * Template method to implement in each children to customize each control\r\n     * @param xpath\r\n     * @returns {*}\r\n     */\r\n    getXpath: function (xpath) {\r\n        return xpath;\r\n    },\r\n\r\n    /**\r\n     * Template method to implement in each children to customize each control\r\n     */\r\n    preRenderControl: function () {\r\n    },\r\n\r\n    /**\r\n     * Template method to implement in each children to customize each control\r\n     * @returns {boolean}\r\n     */\r\n    activateButton: function () {\r\n        return true;\r\n    },\r\n\r\n    /**\r\n     * Returns the xpath to be used\r\n     * @param xpath\r\n     * @returns {*}\r\n     */\r\n    getDocumentXpath: function (xpath) {\r\n        return xpath;\r\n    },\r\n\r\n    /**\r\n     * Returns the xpath to be used\r\n     * @returns {*}\r\n     */\r\n    getContextXpath: function () {\r\n        return this.properties.xpathContext;\r\n    },\r\n\r\n    /**\r\n     * Renders a single document item\r\n     * @param file\r\n     * @returns {*|jQuery}\r\n     */\r\n    renderDocumentItem: function (file) {\r\n        var self = this;\r\n        var mode = self.getMode();\r\n        var template = self.renderFactory.getTemplate(self.getTemplateItem());\r\n        var url = self.buildItemUrl(file);\r\n\r\n        // Don't render urls when not running in execution mode\r\n        if (mode !== \"execution\") url = \"javascript:void(0);\";\r\n\r\n        var html = $.fasttmpl(template, {\r\n            url: url,\r\n            allowDelete: self.properties.allowDelete,\r\n            filename: file.fileName,\r\n            mode: mode,\r\n            editable: self.properties.editable,\r\n            joined: false\r\n        });\r\n\r\n        return html;\r\n    },\r\n\r\n    /**\r\n     * Builds the upload item url\r\n     * @param file\r\n     * @returns {*}\r\n     */\r\n    buildItemUrl: function (file) {\r\n        var self = this;\r\n        var properties = self.properties;\r\n\r\n        return self.dataService.getUploadFileUrl({\r\n            idRender: properties.id,\r\n            xpath: self.getDocumentXpath(properties.xpath),\r\n            xpathContext: self.getContextXpath(),\r\n            idPageCache: properties.idPageCache,\r\n            fileId: file.id,\r\n            sessionId: self.getSessionId()\r\n        });\r\n    },\r\n\r\n    /**\r\n     * Builds the download all items item url\r\n     * @returns {*}\r\n     */\r\n    buildAllDocumentsUrl: function () {\r\n        var self = this;\r\n        var properties = self.properties;\r\n\r\n        var returnLink = self.dataService.getAllDocumentsDownloadUrl({\r\n            xpath: self.getDocumentXpath(properties.xpath),\r\n            xpathContext: self.getContextXpath(),\r\n            idPageCache: properties.idPageCache,\r\n            idCase: properties.caseId,\r\n            idWorkItem: properties.workitemId,\r\n            sessionId: self.getSessionId()\r\n        });\r\n\r\n        return returnLink;\r\n    },\r\n\r\n    /**\r\n     * Template method to implement in each device to customize each render after processed (Virtual method)\r\n     * @returns {string}\r\n     */\r\n    postRender: function () {\r\n        // Call base\r\n        this._super();\r\n\r\n        return \"<div></div>\";\r\n    },\r\n\r\n    /**\r\n     * Template method to implement in each device to customize each render after processed in read-only mode\r\n     */\r\n    postRenderReadOnly: function () {\r\n        var self = this;\r\n        var mode = self.getMode();\r\n\r\n        if (mode !== \"design\") {\r\n            var control = self.getControl();\r\n            var htmlControl = self.renderControl();\r\n\r\n            control.append(htmlControl);\r\n\r\n            self.updateControlForPrintMode(control);\r\n\r\n            // Execute the same as post-render\r\n            self.postRender();\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Saves the form before the document generation\r\n     * @returns {*}\r\n     */\r\n    validateContainer: function () {\r\n        // Check if the form is valid, then generate\r\n        var form = this.getFormContainer();\r\n        return form.validateForm();\r\n    },\r\n\r\n    /**\r\n     * Saves the form before the document generation\r\n     * @returns {*}\r\n     */\r\n    save: function () {\r\n        var form = this.getFormContainer();\r\n\r\n        return form.saveForm();\r\n    },\r\n\r\n    /**\r\n     * Replaces a {{files}} tag in the container for the specified \"replace\" element\r\n     * @param html\r\n     * @param replace\r\n     * @returns {*}\r\n     */\r\n    replaceFilesHtml: function (html, replace) {\r\n        return html.replace(\"{{files}}\", replace);\r\n    },\r\n\r\n    /**\r\n     * Replaces a {{actions}} tag in the container for the specified \"replace\" element\r\n     * @param html\r\n     * @param replace\r\n     * @returns {*}\r\n     */\r\n    replaceActionsHtml: function (html, replace) {\r\n        return html.replace(\"{{actions}}\", replace);\r\n    },\r\n\r\n    /**\r\n     * Method to determine if the render value can be sent to the server or not\r\n     * @returns {boolean}\r\n     */\r\n    canBeSent: function () {\r\n        // This render cannot be sent because it is full ajax\r\n        return false;\r\n    },\r\n\r\n    /**\r\n     * Method to determine if the render value can be sent to the server or not\r\n     * @param invalidElements\r\n     * @returns {boolean}\r\n     */\r\n    isValid: function (invalidElements) {\r\n        var self = this,\r\n            properties = self.properties,\r\n            message;\r\n\r\n        // Don't check non-editable renders\r\n        if (bizagi.util.parseBoolean(properties.visible) === false) {\r\n            return true;\r\n        }\r\n        // Don't check non-editable renders\r\n        if (bizagi.util.parseBoolean(properties.editable) === false) {\r\n            return true;\r\n        }\r\n\r\n        // Clear error message\r\n        self.setValidationMessage(\"\");\r\n\r\n        // Check required\r\n        if (properties.required && !properties.buttonExecuted) {\r\n            if (self.value) {\r\n                if (self.value.length > 0) return true;\r\n                message = self.getResource(\"render-document-required-text\");\r\n                invalidElements.push({xpath: properties.xpath, message: message});\r\n                return false;\r\n            }\r\n        }\r\n\r\n        return true;\r\n    },\r\n\r\n    /**\r\n     * Template method to implement in each device to customize the render's behaviour to add handlers\r\n     */\r\n    configureHandlers: function () {\r\n        var self = this;\r\n        var control = self.getControl();\r\n        var mode = self.getMode();\r\n\r\n        // Call base\r\n        self._super();\r\n\r\n        // Attach handler\r\n        var generateLink = $(\".ui-bizagi-button-documentgenerator\", control);\r\n        if (mode === \"execution\") {\r\n            generateLink.click(function (e) {\r\n                if (e.isPropagationStopped()) return;\r\n                e.stopPropagation();\r\n\r\n                self.properties.buttonExecuted = true;\r\n\r\n                if (self.properties.validate) {\r\n                    // Check if the form is valid, then generate\r\n                    var isValid = self.validateContainer();\r\n                    if (isValid) {\r\n                        self.documentTemplateGenerate();\r\n                    }\r\n                } else {\r\n                    // Just generate the form\r\n                    self.documentTemplateGenerate();\r\n                }\r\n\r\n                self.properties.buttonExecuted = false;\r\n            });\r\n        }\r\n\r\n        // Configure preview handler\r\n        $(\".ui-bizagi-document-preview\", control).click(function (e) {\r\n            if (e.isPropagationStopped()) return;\r\n            e.stopPropagation();\r\n\r\n            self.showDocumentPreview($(this).data(\"url\"), $(this).data(\"filename\"));\r\n        });\r\n\r\n        // Configure preview handler\r\n        $(\".ui-bizagi-container-documents-item-delete\", control).click(function (e) {\r\n            if (e.isPropagationStopped()) return;\r\n            e.stopPropagation();\r\n\r\n            self.deleteDocumentTemplate($(this).data(\"filename\"));\r\n        });\r\n    },\r\n\r\n    /**\r\n     * Creates the event of generation of templates.\r\n     * @param filename\r\n     */\r\n    deleteDocumentTemplate: function (filename) {\r\n        var self = this;\r\n        var params = {\r\n            xpath: self.properties.xpath + \"[fileName='\" + filename + \"']\",\r\n            idRender: self.properties.id,\r\n            xpathContext: self.getContextXpath(),\r\n            idPageCache: self.properties.idPageCache\r\n        };\r\n\r\n        self.startLoading();\r\n\r\n        $.when(self.dataService.deleteUploadFile(params))\r\n            .done(function () {\r\n                $.when(self.dataService.multiaction().getPropertyData({\r\n                    xpath: self.properties.xpath,\r\n                    idRender: self.properties.id,\r\n                    xpathContext: self.getContextXpath(),\r\n                    idPageCache: self.properties.idPageCache,\r\n                    property: \"value\"\r\n                })).done(function (documents) {\r\n                    self.resolveDeleteDocumentTemplate(documents, false, self.properties.downloadalldocuments);\r\n\r\n                    // Finish loading\r\n                    self.endLoading();\r\n                });\r\n            });\r\n    },\r\n\r\n    /**\r\n     * Creates the event of generation of templates.\r\n     */\r\n    documentTemplateGenerate: function () {\r\n        var self = this;\r\n        var properties = self.properties;\r\n\r\n        self.startLoading();\r\n\r\n        //Get the context xPath\r\n        properties.xpathcontext = self.getContextXpath();\r\n        properties.xpath = self.getDocumentXpath(properties.xpath);\r\n\r\n        self.save().done(function () {\r\n\r\n            bizagi.showErrorAlertDialog = false;\r\n\r\n            $.when(self.dataService.generateDocumentTemplate(properties))\r\n                .done(function () {\r\n\r\n                    // Fetch again the value property\r\n                    $.when(self.dataService.multiaction().getPropertyData({\r\n                        xpath: properties.xpath,\r\n                        idRender: properties.id,\r\n                        xpathContext: self.getContextXpath(),\r\n                        idPageCache: properties.idPageCache,\r\n                        property: \"value\"\r\n                    })).done(function (documents) {\r\n                        self.resolveDocumentTemplateGenerate(documents, false, properties.downloadalldocuments);\r\n\r\n                        // Finish loading\r\n                        self.endLoading();\r\n                    });\r\n\r\n                }).fail(function (error) {\r\n                self.endLoading();\r\n\r\n                // Add error messages\r\n                self.showErrorMessage(error);\r\n            });\r\n        }).fail(function (message) {\r\n            self.endLoading();\r\n\r\n            // Add error messages\r\n            self.showErrorMessage(message);\r\n        });\r\n    },\r\n\r\n    /**\r\n     * Show the error message when something went wrong with the service.\r\n     * @param error\r\n     */\r\n    showErrorMessage: function (error) {\r\n        var self = this;\r\n        var form = self.getFormContainer();\r\n        var messageText = self.resources.getResource('render-upload-alert-maxsize').replace(\"{0}\", BIZAGI_SETTINGS.UploadMaxFileSize);\r\n\r\n        try {\r\n            messageText = error && typeof (error.responseText) !== \"undefined\" ? JSON.parse(error.responseText).message : error;\r\n        } catch (e) {\r\n        }\r\n\r\n        form.addErrorMessage(messageText);\r\n        form.endLoading();\r\n    },\r\n\r\n    /**\r\n     * Shows the document if the flag is set. (virtual Function)\r\n     */\r\n    autoOpenDocuments: function () {\r\n    },\r\n\r\n    /**\r\n     * Template method to implement in each device to customize each render after processed (Virtual method)\r\n     * @param url\r\n     * @param filename\r\n     */\r\n    showDocumentPreview: function (url, filename) {\r\n    },\r\n\r\n    /**\r\n     * Identifies the extension of the file in a simpler way that ECM does\r\n     * @param file\r\n     * @returns {string}\r\n     */\r\n    returnCssTypeFile: function (file) {\r\n\r\n        if (file == undefined || file.lenght === 0) {\r\n            return \"ui-bizagi-document-upload-item-generic-file\";\r\n        }\r\n\r\n        var extension = file.substr((file.lastIndexOf('.') + 1));\r\n\r\n        switch (extension) {\r\n            case 'docx':\r\n                return \"ui-bizagi-document-upload-item-doc\";\r\n            case 'pdf':\r\n                return \"ui-bizagi-document-upload-item-pdf\";\r\n            case 'xlsx':\r\n                return \"ui-bizagi-document-upload-item-xls\";\r\n            default:\r\n                return \"ui-bizagi-document-upload-item-generic-file\";\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Redraw documents when needed\r\n     * @param documents\r\n     * @param noFiles\r\n     * @param downloadAllDocuments\r\n     */\r\n    redrawDocuments: function (documents, noFiles, downloadAllDocuments) {\r\n        var self = this;\r\n        var control = self.getControl();\r\n        var html = \"\";\r\n        var documentContainer = $(\"[data-component='files']\", control);\r\n\r\n        // Clear current links\r\n        documentContainer.empty();\r\n\r\n        // Draw links again\r\n        html += this.renderDocumentsHtml(documents);\r\n\r\n        // Check if there are documents and the flag to download all are available to show the link.\r\n        html += this.renderActionsHtml(documents, noFiles, downloadAllDocuments);\r\n\r\n        documentContainer.append(html);\r\n\r\n        //Set value\r\n        self.setValue(documents);\r\n    },\r\n\r\n    /**\r\n     * This method must be implemented by the specific class of each device. (Virtual method)\r\n     * @param file\r\n     * @returns {*|*|*}\r\n     */\r\n    renderAllDocumentDownload: function (file) {\r\n        var self = this;\r\n        var properties = self.properties;\r\n        var mode = self.getMode();\r\n\r\n        var template = self.renderFactory.getTemplate(self.getTemplateItem());\r\n        var url = self.buildAllDocumentsUrl();\r\n\r\n        // Don't render urls when not running in execution mode\r\n        if (mode !== \"execution\") url = \"javascript:void(0);\";\r\n\r\n        var html = $.fasttmpl(template, {\r\n            url: url,\r\n            allowDelete: properties.allowDelete,\r\n            filename: file.fileName,\r\n            mode: mode,\r\n            joined: true\r\n        });\r\n\r\n        return self.removeDeleteButton(html);\r\n    },\r\n\r\n    /**\r\n     * removeDeleteButton\r\n     * @param html\r\n     * @returns {*}\r\n     */\r\n    removeDeleteButton: function (html) {\r\n        var startIndex = html.indexOf(\"<span class=\\\"ui-bizagi-container-documents-item-delete\");\r\n\r\n        if (startIndex > 0) {\r\n            var restOfWord = html.substring(startIndex);\r\n            var finishIndex = restOfWord.indexOf(\"</span>\") + 7;\r\n\r\n            return html.substring(0, startIndex) + restOfWord.substring(finishIndex);\r\n        } else {\r\n            return html;\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Process request of DeleteDocumentTemplate action\r\n     * @param documents\r\n     * @param noFiles\r\n     * @param downloadAllDocuments\r\n     */\r\n    resolveDocumentTemplateGenerate: function (documents, noFiles, downloadAllDocuments) {\r\n        // Redraw documents\r\n        this.redrawDocuments(documents, noFiles, downloadAllDocuments);\r\n        this.value = documents;\r\n\r\n        // This does not apply for mobile.\r\n        this.autoOpenDocuments();\r\n        this.configureHandlers();\r\n    },\r\n\r\n    /**\r\n     * Process request of DocumentTemplateGenerate action\r\n     * @param documents\r\n     * @param noFiles\r\n     * @param downloadAllDocuments\r\n     */\r\n    resolveDeleteDocumentTemplate: function (documents, noFiles, downloadAllDocuments) {\r\n        // Redraw documents\r\n        this.redrawDocuments(documents, noFiles, downloadAllDocuments);\r\n        this.value = documents;\r\n\r\n        // This does not apply for mobile.\r\n        this.configureHandlers();\r\n    },\r\n\r\n    /**\r\n     * Method to renders the documents\r\n     * @param documents\r\n     * @returns {string}\r\n     */\r\n    renderDocumentsHtml: function (documents) {\r\n        var items = \"\";\r\n\r\n        for (var i = 0; i < documents.length; i++) {\r\n            var document = {id: documents[i][0], fileName: documents[i][1]};\r\n            var item = this.renderDocumentItem(document);\r\n\r\n            items += item;\r\n        }\r\n\r\n        return items;\r\n    },\r\n\r\n    /**\r\n     * Methos to renders action of document\r\n     * @param documents\r\n     * @param noFiles\r\n     * @param downloadAllDocuments\r\n     * @returns {string}\r\n     */\r\n    renderActionsHtml: function (documents, noFiles, downloadAllDocuments) {\r\n        var actions = \"\";\r\n\r\n        if (downloadAllDocuments && (!noFiles && documents.length > 0)) {\r\n            var downloadAllDocumentsLink = {fileName: this.getResource(\"render-document-downloadalldocuments\")};\r\n            var action = this.renderAllDocumentDownload(downloadAllDocumentsLink);\r\n\r\n            actions += action;\r\n        }\r\n\r\n        return actions;\r\n    },\r\n\r\n    getTemplate: function () {\r\n        return \"document\";\r\n    },\r\n\r\n    getTemplateItem: function () {\r\n        return \"document-item\";\r\n    },\r\n\r\n    getErrorTemplate: function () {\r\n        return \"form-error\";\r\n    },\r\n\r\n    getTemplateDownload: function () {\r\n        return \"document-download\";\r\n    },\r\n\r\n    getTemplateReadonly: function () {\r\n        return \"document-readonly\";\r\n    }\r\n\r\n});","/*\r\n *   Name: BizAgi Render Column Decorator Class\r\n *   Author: Diego Parra\r\n *   Comments:\r\n *   -   This script will define basic stuff for Columns\r\n */\r\n\r\nbizagi.rendering.element.extend(\"bizagi.rendering.columns.column\", {}, {\r\n    /*\r\n    *   Constructor\r\n    */\r\n    init: function (params) {\r\n        // Call base\r\n        this._super(params);\r\n\r\n        this.decoratedClass = params.decorated;\r\n        this.data = params.data;\r\n        if (params.singleInstance) {\r\n            this.decorated = new this.decoratedClass({\r\n                data: this.data,\r\n                parent: this.parent,\r\n                renderFactory: this.renderFactory,\r\n                dataService: this.dataService\r\n            });\r\n            this.decorated.getControl = this.getControl;\r\n            params.decorated = this.decorated;\r\n            this.decorated.properties.isColumn = true;\r\n        } else {\r\n            this.decorateRenders = [];\r\n        }\r\n        this.grid = params.parent;\r\n\r\n        // Set base column styles\r\n        var properties = this.properties;\r\n        properties.columnVisible = bizagi.util.parseBoolean(properties.columnVisible) != null ? bizagi.util.parseBoolean(properties.columnVisible) : true;\r\n        properties.align = properties.align || 'center';\r\n        properties.textFormat = properties.textFormat || {};\r\n        properties.submitOnChange = (typeof properties.submitOnChange != \"undefined\") ? bizagi.util.parseBoolean(properties.submitOnChange) : false;\r\n        properties.singleInstance = params.singleInstance;\r\n        properties.editable = (typeof properties.editable != \"undefined\") ? bizagi.util.parseBoolean(properties.editable) : true;\r\n        properties.visible = (typeof properties.visible != \"undefined\") ? bizagi.util.parseBoolean(properties.visible) : true;\r\n        properties.required = (typeof properties.required != \"undefined\") ? bizagi.util.parseBoolean(properties.required) : false;\r\n        properties.showColumn = (typeof properties.showColumn != \"undefined\") ? bizagi.util.parseBoolean(properties.showColumn) : true;\r\n\r\n        // Define if it is editable or not        \r\n        try {\r\n            if (params.parent && typeof params.parent.properties.editable == \"boolean\" && !params.parent.properties.editable) {\r\n                properties.editable = false;\r\n            }\r\n        } catch (e) {\r\n        }\r\n\r\n        // Define if the column is readonly\r\n        this.readonly = properties.readonly !== undefined ? properties.readonly : false;\r\n        if (this.readonly) properties.editable = required = false;\r\n\r\n        // Save original properties\r\n        this.originalProperties = JSON.parse(JSON.encode(properties));\r\n    },\r\n\r\n    /*\r\n    *   Return true if the column is read-only, so we can make a quick render\r\n    */\r\n    isReadonly: function () {\r\n        return false;\r\n    },\r\n\r\n\r\n    /*\r\n    *   Method to retrieve the decorated control\r\n    */\r\n    getControl: function () {\r\n        var self = this;\r\n        return $(\".ui-bizagi-render-control\", self.element || self.observableElement);\r\n    },\r\n    /*\r\n    *   Returns the decorated cell instance to use\r\n    */\r\n    getDecorated: function (surrogateKey) {\r\n        var self = this;\r\n        var properties = self.properties;\r\n        if (properties.singleInstance) {\r\n            return self.decorated;\r\n        }\r\n        else {\r\n            var decorated = self.decorateRenders[surrogateKey];\r\n            if (decorated == undefined) {\r\n                if (typeof self.decorateRenders != \"object\") {\r\n                    self.decorateRenders = [];\r\n                }\r\n                var instanceDecoratedClass = new this.decoratedClass({\r\n                    data: bizagi.clone(this.data),\r\n                    parent: this.parent,\r\n                    renderFactory: this.renderFactory,\r\n                    dataService: this.dataService\r\n                });\r\n                decorated = instanceDecoratedClass;\r\n                self.decorateRenders[surrogateKey] = instanceDecoratedClass;\r\n\r\n                // Set surrogate key to all controls\r\n                decorated.surrogateKey = surrogateKey;\r\n\r\n                // Execute decorated overrides\r\n                self.applyOverrides(decorated);\r\n\r\n                // Also override setDisplayValue on summary row for non numeric columns\r\n                if (surrogateKey == \"summary\" && decorated.properties.type != \"columnMoney\" && decorated.properties.type != \"columnNumber\") {\r\n\r\n                    decorated.setDisplayValue = function (value) {\r\n                        var control = this.getControl();\r\n\r\n                        // Replace line breaks for html line breaks\r\n                        control.html(value);\r\n                    };\r\n                }\r\n            }\r\n            return decorated;\r\n        }\r\n    },\r\n    /*\r\n    *   Set a ready function to execute when the render has been inserted in the dom\r\n    */\r\n    ready: function () {\r\n        return this.readyDeferred.promise();\r\n    },\r\n    /*\r\n    *   Load stuff needed for the column\r\n    *   It could return a promise if the column need to load async stuff\r\n    */\r\n    initialize: function () {\r\n        // Override to do any stuff needed here\r\n    },\r\n    /* \r\n    *  Method to determine if the render value can be sent to the server or not\r\n    */\r\n    canBeSent: function (surrogateKey, cellOverrides) {\r\n        var self = this;\r\n        var decorated = self.getDecorated(surrogateKey);\r\n\r\n        if (cellOverrides) {\r\n            decorated.properties.visible = cellOverrides.visible;\r\n            decorated.properties.editable = cellOverrides.editable;\r\n        }\r\n        return decorated.canBeSent() || (!self.properties.editable && self.hasChanged()) || (!decorated.properties.editable && self.hasChanged()) || (decorated.properties.editabilityEnabled);\r\n    },\r\n    /*\r\n    *   Method to check if a value is valid or not in this render\r\n    */\r\n    isValueValid: function (surrogateKey, value, messages, propertyOverrides) {\r\n        var self = this;\r\n        var decorated = self.getDecorated(surrogateKey);\r\n        var invalidElements = [];\r\n\r\n        if (propertyOverrides.visible) {\r\n            self.setValue(surrogateKey, value);\r\n\r\n            // Override properties\r\n            decorated.properties = $.extend(decorated.properties, propertyOverrides);\r\n\r\n            if (self.grid && typeof(decorated.grid) === \"undefined\") {\r\n                decorated.grid = self.grid;\r\n            }\r\n\r\n            // Validate field\r\n            decorated.isValid(invalidElements);\r\n        }\r\n\r\n        if (invalidElements.length > 0) {\r\n            $.each(invalidElements, function (i, invalidElement) {\r\n                messages.push(invalidElement.message);\r\n            });\r\n            return false;\r\n        }\r\n\r\n        return true;\r\n    },\r\n    /*\r\n    *   Apply custom overrides to each decorated instance\r\n    */\r\n    applyOverrides: function (decorated) {\r\n    },\r\n    /*\r\n    *   Returns the in-memory processed element \r\n    *   so the caller could append it to any place\r\n    */\r\n    render: function (surrogateKey, value) {\r\n        var self = this;\r\n        var properties = self.properties;\r\n        // Set grid and id references to the control in order to render the content\r\n        var decorated = self.getDecorated(surrogateKey);\r\n        decorated.grid = self.grid;\r\n        decorated.column = this;\r\n        decorated.surrogateKey = surrogateKey;\r\n\r\n        // Set cell value\r\n        self.setValue(surrogateKey, value);\r\n\r\n        // Override render properties\r\n        self.overrideDecoratedRenderProperties(surrogateKey);\r\n\r\n        // Set flag to check when a render has changed\r\n        self.changed = false;\r\n\r\n        // If the render is not editable return the readonly version of the column\r\n        //Fix: Uncaught RangeError: Maximum call stack size exceeded\r\n        if (!properties.editable && arguments[3] !== \"CALLER_RENDER_READ_ONLY_COLUMNSLINK\")\r\n            return self.renderReadOnly.apply(self, arguments);\r\n\r\n        // Returns the decorated render inside a custom layout for columns\r\n        self.readyDeferred = new $.Deferred();\r\n        var cell = decorated.render(\"cell\");\r\n\r\n        // If the render changes set the flag on\r\n        decorated.bind(\"renderchange\", function () {\r\n            self.changed = true;\r\n        });\r\n\r\n        self.bind(\"rendered\", function () {\r\n            self.readyDeferred.resolve();\r\n        });\r\n\r\n        return cell;\r\n    },\r\n    /*\r\n    *   Post process the element after it has been rendered\r\n    */\r\n    postRender: function (surrogateKey, cell) {\r\n        var self = this;\r\n        var decorated = self.getDecorated(surrogateKey);\r\n        decorated.postRenderElement(cell);\r\n    },\r\n    /*\r\n    *   Returns the in-memory processed element when the element is read-only\r\n    */\r\n    renderReadOnly: function (surrogateKey, value) {\r\n        var self = this;\r\n        // Set grid and id references to the control in order to render the content\r\n        var decorated = self.getDecorated(surrogateKey);\r\n        decorated.grid = self.grid;\r\n        decorated.column = this;\r\n        decorated.surrogateKey = surrogateKey;\r\n\r\n        // Set cell value\r\n        self.setValue(surrogateKey, value);\r\n\r\n        // Override render properties\r\n        self.overrideDecoratedRenderProperties(surrogateKey);\r\n\r\n        // Changes editable to false to render read-only\r\n        decorated.properties.editable = false;\r\n\r\n        // Perform the internal render\r\n        self.readyDeferred = new $.Deferred();\r\n        var result = decorated.render(\"cell.readonly\");\r\n\r\n        self.bind(\"rendered\", function () {\r\n            self.readyDeferred.resolve();\r\n        });\r\n\r\n        // Returns the decorated render inside a custom layout for columns\r\n        return result;\r\n    },\r\n\r\n    /*\r\n    *  Returns the html template to draw the summary cell\r\n    */\r\n    renderSummary: function (key, value) {\r\n        var self = this;\r\n        var result = self.renderFactory.getTemplate(\"cell.summary\")\r\n        return $.tmpl(result).html();\r\n    },\r\n\r\n    /*\r\n    *   Post process the element after it has been rendered\r\n    */\r\n    postRenderReadOnly: function (surrogateKey, cell) {\r\n        var self = this;\r\n        var decorated = self.getDecorated(surrogateKey);\r\n        var editable = self.properties.editable;\r\n        decorated.properties.editable = false;\r\n        if (self.properties.singleInstance) {\r\n            decorated.element = cell;\r\n        }\r\n        decorated.postRenderElement(cell);\r\n        decorated.properties.editable = editable;\r\n    },\r\n\r\n    /*\r\n    * Return false to all columns that doesn't need special treatment (like number or currency)\r\n    */\r\n    postRenderSummary: function () {\r\n        return false;\r\n    },\r\n\r\n    /*\r\n    *   Returns the cell html to be inserted in the table\r\n    */\r\n    getCell: function () {\r\n        return this.decorated.getDisplayValue();\r\n    },\r\n    /*\r\n    *   Sets the surrogate key for this row\r\n    */\r\n    setSurrogateKey: function (key) {\r\n        this.surrogateKey = key;\r\n    },\r\n    /*\r\n    *   Sets the internal value, only must be called internally\r\n    */\r\n    setValue: function (surrogateKey, value) {\r\n        var self = this;\r\n\r\n        var decorated = self.getDecorated(surrogateKey);\r\n        if (decorated != \"undefined\" && decorated != null) {\r\n\r\n            decorated.properties.originalValue = value;\r\n            decorated.properties.previousValue = value;\r\n\r\n             if ((value === null || value === undefined) && (self.properties.defaultvalue !== undefined || self.properties.defaultValue !== undefined) && decorated.grid != undefined) {\r\n                value = self.setDefaultValue(surrogateKey, decorated);\r\n            }\r\n\r\n            decorated.properties.value = value;\r\n            decorated.setValue(value, false);\r\n        }\r\n    },\r\n\r\n    /*\r\n    * Set the cell default value and make this action as a change to send it to server\r\n    */\r\n    setDefaultValue: function (surrogateKey, decorated) {\r\n        var self = this;\r\n        var value = self.properties.defaultvalue || self.properties.defaultValue;\r\n\r\n        decorated.grid.changes[surrogateKey] = decorated.grid.changes[surrogateKey] || {};\r\n        decorated.grid.changes[surrogateKey][self.properties.xpath] = value;\r\n\r\n        return value;\r\n    },\r\n    /*\r\n    *   Gets the internal value\r\n    */\r\n    getValue: function (surrogateKey) {\r\n        var self = this;\r\n        var decorated = self.getDecorated(surrogateKey);\r\n        return decorated.getValue();\r\n    },\r\n    /*\r\n    *   Gets the composite value (applies for non-standard render values)\r\n    */\r\n    getCompositeValue: function (surrogateKey) {\r\n        return this.getValue(surrogateKey);\r\n    },\r\n    /*\r\n    *   Returns the element type\r\n    */\r\n    getElementType: function () {\r\n        return bizagi.rendering.element.ELEMENT_TYPE_COLUMN;\r\n    },\r\n    /*\r\n    *   Determines if a render has changed its value\r\n    */\r\n    hasChanged: function () {\r\n        return this.changed;\r\n    },\r\n    /*\r\n    *   Triggers an event inside the control\r\n    */\r\n    trigger: function (eventType, data) {\r\n        if (this.decorated)\r\n            this.decorated.trigger(eventType, data);\r\n    },\r\n    /*\r\n    *   Triggers an event handler inside the control\r\n    */\r\n    triggerHandler: function (eventType, data) {\r\n        if (this.decorated)\r\n            this.decorated.triggerHandler(eventType, data);\r\n    },\r\n    /*\r\n    *   Binds to an event\r\n    */\r\n    bind: function (eventType, fn) {\r\n        if (this.decorated)\r\n            this.decorated.bind(eventType, fn);\r\n    },\r\n    /*\r\n    *   Unbinds to an event\r\n    */\r\n    unbind: function (eventType, fn) {\r\n        if (this.decorated)\r\n            this.decorated.unbind(eventType, fn);\r\n    },\r\n    /*\r\n    *   Override decorated properties\r\n    */\r\n    overrideDecoratedRenderProperties: function (surrogateKey) {\r\n        var self = this;\r\n        var decorated = self.getDecorated(surrogateKey);\r\n\r\n        // Override decorated control properties\r\n        decorated.properties.editable = this.properties.editable;\r\n        decorated.properties.visible = this.properties.visible;\r\n        decorated.properties.required = this.properties.required;\r\n    },\r\n\r\n    overrideProperties: function (properties) {\r\n        var self = this;\r\n\r\n        self.properties.editable = properties.editable || self.properties.editable;\r\n        self.properties.visible = properties.visible || self.properties.visible;\r\n        self.properties.required = properties.required || self.properties.required;\r\n    },\r\n\r\n    /*\r\n    *   Returns the xpath used to sort the grid\r\n    */\r\n    getSortName: function () {\r\n        var self = this;\r\n\r\n        // Check if there is an override for the default behaviour \r\n        var decorated = self.getAnyDecoratedInstance();\r\n        if (decorated && decorated.getSortColumn) {\r\n            return decorated.getSortColumn();\r\n        }\r\n\r\n        // Default behaviour\r\n        return self.properties.xpath;\r\n    },\r\n\r\n    /*\r\n    *   Returns any of the decorated instances, if there are none, return null\r\n    */\r\n    getAnyDecoratedInstance: function () {\r\n        var self = this;\r\n        var first;\r\n\r\n        // Get the first key for the hash\r\n        for (first in this.decorateRenders) break;\r\n\r\n        // Return the first decorated render\r\n        if (first) return this.decorateRenders[first];\r\n\r\n        return null;\r\n    },\r\n\r\n    dispose: function () {\r\n        var self = this;\r\n\r\n        setTimeout(function () {\r\n            if (self.decorated) {\r\n                self.decorated.unbind(\"renderchange\");\r\n                self.decorated.dispose();\r\n            }\r\n        \r\n            if (self.decorateRenders) {\r\n                bizagi.util.arrayEach(self.decorateRenders, function (key, render) {\r\n                    if (render) {\r\n                        render.unbind(\"renderchange\");\r\n                        render.dispose();\r\n                    }\r\n                });\r\n            }\r\n        }, bizagi.override.disposeTime || 50);\r\n        \r\n        // Call base\r\n        self._super();\r\n    }\r\n});\r\n\r\n","/*\r\n *   Name: BizAgi Render Column ReadOnlyDecorator Class\r\n *   Author: Diego Parra\r\n *   Comments:\r\n *   -   This script will define basic stuff for readonly-columns\r\n */\r\n\r\n// Extends itself\r\n$.Class.extend(\"bizagi.rendering.columns.readonly\", {}, {\r\n\r\n    /*\r\n    *   Constructor\r\n    */\r\n    init: function (params) {\r\n        // Call base\r\n        this._super(params);\r\n\r\n        // Set base column styles\r\n        var properties = this.properties;\r\n\r\n        // Define the column as readonly\r\n        properties.editable = required = false;\r\n    },\r\n\r\n    /*\r\n    *   Return true if the column is read-only, so we can make a quick render\r\n    */\r\n    isReadonly: function () {\r\n        return true;\r\n    },\r\n\r\n    /*\r\n    *   Returns the in-memory processed element \r\n    *   so the caller could append it to any place\r\n    */\r\n    render: function (surrogateKey, value) {\r\n        if (typeof value === \"string\") {\r\n            value = bizagi.util.sanitizeHTML(value);\r\n            var valueToDisplay = value.replaceAll(\"\\\\n\", \"<br/>\").replaceAll(\"\\n\", \"<br/>\");\r\n            return valueToDisplay;\r\n        }\r\n        else if (value === null){\r\n            return \"\";\r\n        }\r\n\r\n        return value;\r\n    },\r\n\r\n    /*\r\n    *   Post process the element after it has been rendered\r\n    */\r\n    postRender: function (surrogateKey, cell) {\r\n        // DON'T DO ANYTHING\r\n    },\r\n\r\n    /*\r\n    *   Returns the in-memory processed element when the element is read-only\r\n    */\r\n    renderReadOnly: function (surrogateKey, value) {\r\n        return this.render(surrogateKey, value);\r\n    },\r\n\r\n    /*\r\n    *   Post process the element after it has been rendered\r\n    */\r\n    postRenderReadOnly: function (surrogateKey, cell) {\r\n        // DON'T DO ANYTHING\r\n    },\r\n    \r\n    /*\r\n    *   Method to check if a value is valid or not in this render\r\n    */\r\n    isValueValid: function () {\r\n        // It is always valid because the column is readonly\r\n        return true;\r\n    }\r\n});\r\n\r\n","/*\r\n*   Name: BizAgi Render Combo Column Decorator Class\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will define basic stuff for Combo Columns\r\n*/\r\n\r\n$.Class.extend(\"bizagi.rendering.columns.combo\", {}, {\r\n\r\n    /*\r\n    *   Constructor\r\n    */\r\n    init: function (params) {\r\n        // Call base\r\n        this._super(params);\r\n\r\n        // Set base column styles\r\n        var properties = this.properties;\r\n        properties.recalculate = bizagi.util.parseBoolean(properties.recalculate) || false;\r\n    },\r\n\r\n\r\n    /*\r\n    *   Apply custom overrides to each decorated instance\r\n    */\r\n    applyOverrides: function (decorated) {\r\n        var properties = this.properties;\r\n\r\n        this._super(decorated);\r\n\r\n        if (!properties.recalculate) {\r\n            decorated.originalGetData = decorated.getData;\r\n            decorated.getData = this.getDataForAllCells;\r\n            decorated.findDataById = this.findDataById;\r\n        }\r\n    },\r\n\r\n    findDataById: function (id) {\r\n        var self = this;\r\n        var result = {};\r\n        if (this.column && this.column.comboData) {\r\n            $.each(this.column.comboData, function (key, value) {\r\n                if (value.id == id) {\r\n                    result = value;\r\n                }\r\n            });\r\n        }\r\n\r\n        return result;\r\n    },\r\n\r\n    /*\r\n    *   Single data fetch for all the cells\r\n    */\r\n    getDataForAllCells: function (params) {\r\n        var column = this.column;\r\n        if (column.comboData) return column.comboData;\r\n        if (column.fetchingData) return column.dataPromise;\r\n\r\n        // Start fetching\r\n        column.fetchingData = true;\r\n        column.dataPromise = $.when(this.originalGetData(params))\r\n        .pipe(function (result) {\r\n            column.comboData = result;\r\n            column.fetchingData = false;\r\n            return result;\r\n        });\r\n\r\n        return column.dataPromise;\r\n    },\r\n\r\n    /*\r\n    *   Sets the internal value\r\n    */\r\n    setValue: function(surrogateKey, value) {\r\n        var self = this;\r\n        var decorated = self.getDecorated(surrogateKey);\r\n        if (decorated === null) {\r\n            return;\r\n        }\r\n\r\n        // Perform default set value when rendering summary row\r\n        if (surrogateKey == \"summary\") return self._super(surrogateKey, value);\r\n\r\n        if (value && bizagi.util.isString(value)) {        \r\n            self._super(surrogateKey, value);\r\n        } else if (value && value.length > 0) {\r\n            // Create the value property\r\n            var newValue = {\r\n                id: value[0][0],\r\n                value: value[0].length > 2 ? $.grep(value[0], function(item, i) { return i != 0; }) : value[0][1]\r\n            };\r\n            // Call base\r\n            self._super(surrogateKey, newValue);\r\n            decorated.selectedValue = newValue.value;\r\n        } else if (value && value.id && value.value) {\r\n            self._super(surrogateKey, value);\r\n            decorated.selectedValue = value.value;\r\n        } else if (self.properties.type == \"columnRadio\") {\r\n            self._super(surrogateKey, null);\r\n            decorated.selectedValue = value;\r\n        } else if (value && typeof (value) == \"number\") {\r\n            self._super(surrogateKey, value);\r\n        } else {\r\n            // Set null values when the entry array is null\r\n            self._super(surrogateKey, null);\r\n            decorated.selectedValue = \"\";\r\n        }\r\n    },\r\n\r\n    /*\r\n    * Set the cell default value and make this action as a change to send it to server\r\n    */\r\n   setDefaultValue: function (surrogateKey, decorated) {\r\n        var self = this;\r\n        var value = self.properties.defaultValue[0];\r\n\r\n        decorated.grid.changes[surrogateKey] = decorated.grid.changes[surrogateKey] || {};\r\n        decorated.grid.changes[surrogateKey][self.properties.xpath] = value.id;\r\n\r\n        return value;\r\n    },\r\n\r\n    /*\r\n    *   Gets the internal value\r\n    */\r\n    getCompositeValue: function (surrogateKey) {\r\n        var self = this;\r\n        var decorated = self.getDecorated(surrogateKey);\r\n        var value = decorated.getValue();\r\n        var label = decorated.getSelectedValue();\r\n\r\n        // Build value for grid data\r\n        var valueForGrid = [];\r\n        if (value && (value.id > 0 || bizagi.util.isString(value.id))) {\r\n            valueForGrid.push([]);\r\n            valueForGrid[0].push(value.id);\r\n            valueForGrid[0].push(label);\r\n        } else {\r\n            valueForGrid.push([]);\r\n        }\r\n\r\n        return valueForGrid;\r\n    },\r\n\r\n    /*\r\n    *   Gets the internal value\r\n    */\r\n    getValue: function (surrogateKey) {\r\n        var self = this;\r\n        var decorated = self.getDecorated(surrogateKey);\r\n        var value = decorated.getValue();\r\n        if (value) return value.id;\r\n        return value;\r\n    },\r\n\r\n    /*\r\n    *   Returns the in-memory processed element \r\n    *   so the caller could append it to any place\r\n    */\r\n    render: function (surrogateKey, value, tableCell) {\r\n        var self = this;\r\n        var decorated = self.getDecorated(surrogateKey);\r\n        var properties = self.properties;\r\n\r\n        // If the control needs to recalculate data, reset it on the decorated render\r\n        if (properties.recalculate) {\r\n            decorated.resetData();\r\n        }\r\n\r\n        // Change the xpath context\r\n        var xpathContext = properties.xpathContext.length > 0 ? properties.xpathContext + \".\" + self.grid.properties.xpath + \"[id=\" + surrogateKey + \"]\" : self.grid.properties.xpath + \"[id=\" + surrogateKey + \"]\";\r\n        decorated.properties.xpathContext = xpathContext;\r\n\r\n        // Render the control\r\n        var result = this._super(surrogateKey, value, tableCell);\r\n\r\n        return result;\r\n    },\r\n\r\n    renderReadOnly: function (key, value) {\r\n        var self = this;\r\n        var decorated = self.getDecorated(key);\r\n        var properties = self.properties;\r\n\r\n        // Change the xpath context\r\n        var xpathContext = properties.xpathContext.length > 0 ? properties.xpathContext + \".\" + self.grid.properties.xpath + \"[id=\" + key + \"]\" : self.grid.properties.xpath + \"[id=\" + key + \"]\";\r\n        decorated.properties.xpathContext = xpathContext;\r\n\r\n        // Render the control\r\n        var result = this._super(key, value);\r\n\r\n        return result;\r\n    }\r\n\r\n});\r\n","/*\r\n*   Name: BizAgi Render Date Column Decorator Class\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will define basic stuff for Date Columns\r\n*/\r\n\r\n\r\n$.Class.extend(\"bizagi.rendering.columns.date\", {}, {\r\n\r\n    /*\r\n    *   Sets the internal value\r\n    */\r\n    setValue: function (surrogateKey, value) {\r\n        var self = this;\r\n        var decorated = self.getDecorated(surrogateKey);\r\n        if (decorated === null) return;\r\n\r\n        self._super(surrogateKey, value);\r\n        if ((value === null || value === undefined) && self.properties.defaultvalue !== undefined) {\r\n            value = self.setDefaultValue(surrogateKey, decorated);\r\n        }\r\n\r\n        // Perform default set value when rendering summary row\r\n        if (surrogateKey === \"summary\") return self._super(surrogateKey, value);\r\n\r\n        if (value == null) {\r\n            decorated.setValue(value, false);\r\n            decorated.properties.displayValue = \"\";\r\n        }\r\n\r\n        var date = bizagi.util.dateFormatter.getDateFromInvariant(value, decorated.properties.showTime);\r\n\r\n        if (date === 0) {\r\n            // force another attempt in order to check invariant format for the value with time or without time (reverse option)\r\n            date = bizagi.util.dateFormatter.getDateFromInvariant(value, !decorated.properties.showTime);\r\n        }\r\n        // Format date to current format\r\n        if (date !== 0) {\r\n            var datePickerRegional = bizagi.localization.getResource(\"datePickerRegional\");\r\n            var formattedDate = bizagi.util.dateFormatter.formatDate(date, decorated.properties.fullFormat, datePickerRegional);\r\n\r\n            // Set formatted value in display value property\r\n            decorated.properties.displayValue = formattedDate;\r\n\r\n            // Send original value to decorated control, because it must be with invariant format\r\n            decorated.setValue(value, false);\r\n        }\r\n    },\r\n\r\n    /*\r\n    * Set the cell default value and make this action as a change to send it to server\r\n    */\r\n    setDefaultValue: function (surrogateKey, decorated) {\r\n        var self = this;\r\n        var value = self.properties.defaultvalue;\r\n\r\n        decorated.grid.changes[surrogateKey] = decorated.grid.changes[surrogateKey] || {};\r\n\r\n        value = bizagi.util.dateFormatter.getDateFromInvariant(value, decorated.properties.showTime || false);\r\n\r\n        value = bizagi.util.dateFormatter.formatInvariant(value, true);\r\n        decorated.grid.changes[surrogateKey][self.properties.xpath] = value;\r\n\r\n        return value;\r\n    }\r\n});\r\n\r\n","/**\r\n *   Name: BizAgi Render Combo Column Decorator Class\r\n *   Author: Diego Parra\r\n *   Comments:\r\n *   -   This script will define basic stuff for Combo Columns\r\n */\r\n\r\n$.Class.extend(\"bizagi.rendering.columns.search\", {}, {\r\n    /*\r\n    *   Constructor\r\n    */\r\n    init: function (params) {\r\n        // Call base\r\n        this._super(params);\r\n\r\n        // Set base column styles\r\n        var properties = this.properties;\r\n\r\n        if (properties.advancedSearch && this.getMode() === \"execution\") {\r\n            properties.submitOnChange = bizagi.util.parseBoolean(properties.submitOnChange) || false;\r\n            properties.submitOnChange = (properties.submitVersion || 1) > 1 ? properties.submitOnChange : true;\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Apply custom overrides to each decorated instance\r\n     * @param decorated\r\n     */\r\n    applyOverrides: function (decorated) {\r\n        this._super(decorated);\r\n\r\n        // Change the xpath context\r\n        var xpathContext;\r\n\r\n        if (this.properties.xpathContext.length > 0) {\r\n            xpathContext = this.properties.xpathContext + \".\" + this.grid.properties.xpath + \"[id=\" + decorated.surrogateKey + \"]\";\r\n        } else {\r\n            xpathContext = this.grid.properties.xpath + \"[id=\" + decorated.surrogateKey + \"]\";\r\n        }\r\n\r\n        decorated.properties.xpathContext = xpathContext;\r\n    },\r\n\r\n    /*\r\n    *   Returns the in-memory processed element\r\n    *   so the caller could append it to any place\r\n    */\r\n    render: function (surrogateKey, value, tableCell) {\r\n        var self = this;\r\n        var decorated = self.getDecorated(surrogateKey);\r\n        var properties = self.properties;\r\n\r\n        // If the control needs to recalculate data, reset it on the decorated render\r\n        if (properties.recalculate) {\r\n            decorated.resetData();\r\n        }\r\n\r\n        // Render the control\r\n        var result = this._super(surrogateKey, value, tableCell);\r\n\r\n        return result;\r\n    },\r\n\r\n    /*\r\n    *   Gets the internal value\r\n    */\r\n    getValue: function (surrogateKey) {\r\n        var self = this;\r\n        var decorated = self.getDecorated(surrogateKey);\r\n        var value = decorated.getValue();\r\n        if (value && typeof (value) == \"object\") return value.id;\r\n\r\n        return value;\r\n    },\r\n\r\n    setValue: function (surrogateKey, value) {\r\n        var self = this;\r\n        var decorated = self.getDecorated(surrogateKey);\r\n        if (decorated === null) {\r\n            return;\r\n        }\r\n\r\n        // Perform default set value when rendering summary row\r\n        if (surrogateKey == \"summary\") return self._super(surrogateKey, value);\r\n\r\n        if (value && value.length > 0) {\r\n            // Create the value property\r\n            var newValue = {\r\n                id: value[0][0],\r\n                value: value[0].length > 2 ? $.grep(value[0], function (item, i) {\r\n                    return i != 0;\r\n                }) : value[0][1]\r\n            };\r\n            // Call base\r\n            self._super(surrogateKey, newValue);\r\n            decorated.selectedValue = newValue.value;\r\n        } else if (value && value.id && value.value) {\r\n            self._super(surrogateKey, value);\r\n            decorated.selectedValue = value.value;\r\n        } else if (value && value.id && value.label) {\r\n            self._super(surrogateKey, value);\r\n            decorated.selectedValue = value.label;\r\n        } else {\r\n            self._super(surrogateKey, value);\r\n            decorated.selectedValue = \"\";\r\n        }\r\n    }\r\n\r\n});\r\n","/**\r\n *   Name: Bizagi Tablet slide view implementation\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   Serves as an slide form that can render a inner form\r\n */\r\n\r\n// Extends itself\r\n$.Class.extend(\"bizagi.rendering.tablet.slide.view\", {}, {\r\n    /* CONSTRUCTOR\r\n     =====================================================*/\r\n    init: function (dataService, renderFactory, slideFormParams) {\r\n        var self = this;\r\n\r\n        // Define instance variables\r\n        self.dataService = dataService;\r\n        self.renderFactory = renderFactory;\r\n        self.slideFormParams = slideFormParams || {};\r\n        self.slideFormDeferred = new $.Deferred();\r\n        self.container = self.slideFormParams.navigation.createRenderContainer({title: self.slideFormParams.title});\r\n    },\r\n\r\n    buttons: [],\r\n\r\n    processButtons: function (form) {\r\n        var self = this;\r\n\r\n        var onSaveClick = function onSaveClick() {\r\n            if (form) {\r\n                // Perform validations\r\n                if (form.validateForm()) {\r\n\r\n                    // Collect data\r\n                    var data = {};\r\n                    form.collectRenderValues(data);\r\n\r\n                    if (self.slideFormParams.allowGetOriginalFormValues) {\r\n                        data.formValues = form.children;\r\n                    }\r\n\r\n                    // Add page cache for this form\r\n                    data.idPageCache = form.getPageCache();\r\n\r\n                    // Call user callback\r\n                    if (self.slideFormParams.onSave) {\r\n                        $.when(self.slideFormParams.onSave(data))\r\n                            .done(function (result) {\r\n                                if (!result || result === true || result.type === \"success\") {\r\n                                    // Close slide\r\n                                    self.goBack();\r\n\r\n                                    // Resolve deferred\r\n                                    self.slideFormDeferred.resolve(data);\r\n\r\n                                } else if (result.type === \"validationMessages\") {\r\n                                    // Add validation messages\r\n                                    form.addValidationMessage(result.messages);\r\n                                } else if (result.type === \"error\") {\r\n                                    // Add error messages\r\n                                    form.addErrorMessage(result.message);\r\n                                }\r\n                            }).fail(function (dataFail) {\r\n\r\n                            var message = (dataFail.responseText) ? dataFail.responseText : ((typeof dataFail === \"string\") ? dataFail : dataFail.toString());\r\n\r\n                            // Convert String to object\r\n                            if (typeof message === \"string\") {\r\n                                try {\r\n                                    message = JSON.parse(message).message;\r\n                                } catch (e) {\r\n                                    message = message.match(/\"message\":(.*)\",/)[0];\r\n                                    message = message.substr(11, message.length - 13);\r\n                                }\r\n\r\n                            } else if (!message.message) {\r\n                                message = dataFail;\r\n                            }\r\n\r\n                            form.validateForm();\r\n                            form.clearValidationMessages();\r\n                            form.addValidationMessage(message);\r\n\r\n                            // Close slide\r\n                            self.goBack();\r\n\r\n                            //reject defered\r\n                            self.slideFormDeferred.resolve(data);\r\n                        });\r\n\r\n                    } else {\r\n                        // Close slide\r\n                        self.goBack();\r\n\r\n                        //reject defered\r\n                        self.slideFormDeferred.reject();\r\n                    }\r\n                }\r\n            }\r\n        };\r\n\r\n        var onCancelClick = function onCancelClick() {\r\n            // Close slide\r\n            self.goBack();\r\n            //reject defered\r\n            self.slideFormDeferred.reject();\r\n        };\r\n\r\n        form.buttons = [$.extend(form.buttons[0] || {},\r\n            {\r\n                \"caption\": bizagi.localization.getResource(\"render-form-dialog-box-save\"),\r\n                \"actions\": [\"submitData\", \"refresh\"],\r\n                \"submitData\": true,\r\n                \"refresh\": true,\r\n                \"ordinal\": 0,\r\n                \"action\": \"save\",\r\n                \"save\": true,\r\n                \"style\": \"\",\r\n                callback: onSaveClick\r\n            }),\r\n            $.extend(form.buttons[1] || {}, {\r\n                \"caption\": bizagi.localization.getResource(\"render-form-dialog-box-close\"),\r\n                \"actions\": [\"submitData\", \"refresh\"],\r\n                \"submitData\": true,\r\n                \"refresh\": true,\r\n                \"ordinal\": 1,\r\n                \"action\": \"back\",\r\n                \"save\": true,\r\n                \"style\": \"\",\r\n                callback: onCancelClick\r\n            })\r\n        ];\r\n\r\n        // If form is editable, add \"save\" button\r\n        if (!self.slideFormParams.showSaveButton) {\r\n            form.buttons.shift();\r\n        }\r\n\r\n        //self._renderButtons(form);\r\n    },\r\n\r\n    /*\r\n     *   Render the form\r\n     *   The params are the same that will be send to the ajax service\r\n     *   Returns a deferred\r\n     */\r\n    render: function (params) {\r\n        var self = this;\r\n\r\n        // Fill content\r\n        self.renderSlideForm(self.slideForm, params);\r\n\r\n        // Return promise\r\n        return self.slideFormDeferred.promise();\r\n    },\r\n\r\n    /* RENDERS slideForm\r\n     =====================================================*/\r\n    renderSlideForm: function (slideForm, params) {\r\n\r\n        var self = this;\r\n        var defer = new $.Deferred();\r\n\r\n        bizagi.loading.start();\r\n\r\n        // Load template and data\r\n        $.when(self.dataService.getFormData(params))\r\n            .then(function (data) {\r\n                /*** SUCCESS FILTER **/\r\n                if (params.recordXPath) {\r\n                    data.form.properties.recordXpath = params.recordXPath;\r\n                }\r\n\r\n                // Apply editable param\r\n                if (!self.slideFormParams.showSaveButton || params.editable === false) {\r\n                    data.form.properties.editable = false;\r\n                }\r\n\r\n                if (typeof (data.form.properties) !== \"undefined\") {\r\n                    data.form.properties.orientation = self.slideFormParams.orientation || \"ltr\";\r\n                }\r\n\r\n                // Render dialog template\r\n                self.form = self.renderFactory.getContainer({\r\n                    type: \"form\",\r\n                    data: data.form,\r\n                    navigation: self.slideFormParams.navigation,\r\n                    view_container: self.container\r\n                });\r\n\r\n                self.form.params = params.formParams;\r\n\r\n                self.processButtons(self.form);\r\n\r\n                // Return rendering promise\r\n                return self.form.render();\r\n\r\n            }).done(function (element) {\r\n\r\n            // Append form in the slide view\r\n            self.container.element.html(element);\r\n\r\n            if (!params.isRefresh) {\r\n                self.slideFormParams.navigation.navigate(self.container.id);\r\n            }\r\n\r\n            self.container.setNavigationButtons(self.form);\r\n\r\n            // Remove default form buttons\r\n            $(\".ui-bizagi-button-container .action-button\", self.form.container).remove();\r\n            // Add Button\r\n            $(\".ui-bizagi-button-container\", self.form.container).append(self.buttonContainer);\r\n\r\n            // Publish an event to check if the form has been set in the DOM\r\n            self.form.triggerHandler(\"ondomincluded\");\r\n\r\n            // Attach a refresh handler to recreate all the form\r\n            self.form.bind(\"refresh\", function (data, refreshParams) {\r\n                refreshParams.formParams = refreshParams.params || self.form.params;\r\n                self.render(refreshParams);\r\n            });\r\n        }).fail(function (message) {\r\n            /*** Form load failure ***/\r\n\r\n            var errorTemplate = self.renderFactory.getCommonTemplate(\"form-error\");\r\n            var error_message = message.message || \"Error\";\r\n\r\n            $.fasttmpl(errorTemplate, {message: error_message}).appendTo(self.container.element);\r\n            // Navigate on view\r\n            self.slideFormParams.navigation.navigate(self.container.id);\r\n        }).always(function () {\r\n            bizagi.loading.stop();\r\n        });\r\n\r\n        return defer.promise();\r\n    },\r\n\r\n    // Go back and destroy\r\n    goBack: function () {\r\n        this.container.destroy();\r\n    },\r\n\r\n    /**\r\n     * Process render buttons\r\n     */\r\n    _renderButtons: function (form) {\r\n        var self = this;\r\n        var content = $(\"<div class='bz-slide-button-container'></div>\");\r\n\r\n        $.each(form.buttons, function (ui, value) {\r\n            $(\"<div class='action-button'>\" + value.caption + \"</div>\").click(\r\n                value.callback\r\n            ).appendTo(content);\r\n        });\r\n\r\n        self.buttonContainer = content;\r\n    }\r\n});\r\n","/**\r\n *   Name: Bizagi Tablet slide form implementation\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   Serves as an slide form that can render a inner form\r\n */\r\n\r\n// Extends itself\r\n$.Class.extend('bizagi.rendering.tablet.slide.form', {}, {\r\n\r\n    /* CONSTRUCTOR\r\n     =====================================================*/\r\n    init: function (dataService, renderFactory, slideFormParams) {\r\n\r\n        var self = this;\r\n\r\n        // Define instance variables\r\n        self.dataService = dataService;\r\n        self.renderFactory = renderFactory;\r\n        self.slideFormParams = slideFormParams || {};\r\n\r\n        if (self.slideContainer && self.slideContainer.destroy) {\r\n            self.slideContainer.destroy();\r\n        }\r\n\r\n        // Create container\r\n        self.slideContainer = self.slideFormParams.navigation.createRenderContainer({title: self.slideFormParams.title});\r\n        self.configureViewHandlers();\r\n    },\r\n\r\n    /**\r\n     * Go back and destroy\r\n     * @returns {}\r\n     */\r\n    goBack: function () {\r\n        var self = this;\r\n        self.slideContainer.destroy();\r\n    },\r\n\r\n    /**\r\n     * Handlers de la vista de kendo\r\n     * @returns {}\r\n     */\r\n    configureViewHandlers: function () {\r\n        var self = this;\r\n    },\r\n\r\n    /**\r\n     * Render the form\r\n     * The params are the same that will be send to the ajax service\r\n     * @param {} params\r\n     * @returns {} Returns a deferred\r\n     */\r\n    render: function (params) {\r\n        var self = this;\r\n        // Fill content\r\n        self.renderSlideForm(params);\r\n    },\r\n\r\n    /* RENDERS slideForm\r\n     =====================================================*/\r\n    renderSlideForm: function (params) {\r\n\r\n        var self = this;\r\n\r\n        var defer = new $.Deferred();\r\n\r\n        // Load template and data\r\n        $.when(self.dataService.getFormData(params)).then(function (data) {\r\n            /*** SUCCESS FILTER **/\r\n            // Apply editable param\r\n            if (params.editable === false) {\r\n                data.form.properties.editable = false;\r\n            }\r\n\r\n            // Render dialog template\r\n            // Extends from container tblet base\r\n            var formClass = bizagi.rendering.tablet.form.extend({\r\n                submitForm: function () {\r\n                    if (self.form) {\r\n                        this.endLoading();\r\n                        // Perform validations\r\n                        if (self.form.validateForm()) {\r\n                            // Collect data\r\n                            var data = {};\r\n\r\n                            self.form.collectRenderValues(data);\r\n\r\n                            // Add page cache for this form\r\n                            data.idPageCache = self.form.getPageCache();\r\n\r\n                            // Call user callback\r\n                            if (self.slideFormParams.onSave) {\r\n                                $.when(self.slideFormParams.onSave(data))\r\n                                    .done(function (result) {\r\n                                        if (result === null || result === true || result.type === \"success\") {\r\n                                            defer.resolve();\r\n                                            self.goBack();\r\n                                        } else if (result.type === \"validationMessages\") {\r\n                                            // Add validation messages\r\n                                            self.form.addValidationMessage(result.messages);\r\n                                            // Update original value to use as reference to other futures changes in the dialogBox\r\n                                            $.each(data, function (key, value) {\r\n                                                var renders = self.form.getRenders(key);\r\n                                                $.each(renders, function (i, render) {\r\n                                                    render.updateOriginalValue();\r\n                                                });\r\n                                            });\r\n                                        } else if (result.type === \"error\") {\r\n                                            // Add error messages\r\n                                            self.form.addErrorMessage(result.message);\r\n                                        }\r\n                                    });\r\n\r\n                            } else {\r\n                                defer.resolve();\r\n                                self.goBack();\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            });\r\n\r\n            var containerParams = $.extend({\r\n                type: \"form\",\r\n                data: data.form,\r\n                navigation: self.slideFormParams.navigation,\r\n                view_container: self.slideContainer\r\n            }, {\r\n                renderFactory: self.renderFactory,\r\n                dataService: self.renderFactory.dataService\r\n            });\r\n\r\n            // Stop creating forms like there's no tomorrow\r\n            if (!self.form) {\r\n                self.form = new formClass(containerParams);\r\n            }\r\n\r\n            // Return rendering promise\r\n            return self.form.render();\r\n        }).done(function (element) {\r\n            // Append form  in the view\r\n            self.slideContainer.element.html(element);\r\n\r\n            // Navigate on view\r\n            self.slideFormParams.navigation.navigate(self.slideContainer.id);\r\n\r\n            $(\".ui-bizagi-button-container div\", self.form.container).remove();\r\n\r\n            $(\".ui-bizagi-button-container\", self.form.container)\r\n                .append('<div ordinal=\"0\" id=\"formButton0\" class=\"action-button ui-bizagi-form-button\">Save</div>')\r\n                .delegate('div[ordinal=\"0\"]', \"click\", function () {\r\n                    self.form.submitForm();\r\n                });\r\n\r\n            $(\".ui-bizagi-button-container\", self.form.container)\r\n                .append('<div ordinal=\"1\" id=\"formButton1\" class=\"action-button ui-bizagi-form-button\">'\r\n                    + bizagi.localization.getResource(\"render-form-dialog-box-cancel\") + \"</div>\")\r\n                .delegate('div[ordinal=\"1\"]', \"click\", function () {\r\n                    self.slideFormParams.onCancel && self.slideFormParams.onCancel();\r\n                    self.goBack();\r\n                });\r\n\r\n            // Publish an event to check if the form has been set in the DOM\r\n            self.form.triggerHandler(\"ondomincluded\");\r\n\r\n            // Attach a refresh handler to recreate all the form\r\n            self.form.bind(\"refresh\", function () {\r\n                self.renderSlideForm(params);\r\n            });\r\n        }).fail(function (xhr, errorType, message) {\r\n            /*** FAIL FILTER **/\r\n            var errorTemplate = self.renderFactory.getCommonTemplate(\"form-error\");\r\n            var error_message = message.message || \"Error\";\r\n\r\n            $.fasttmpl(errorTemplate, {message: error_message}).appendTo(self.slideContainer.element);\r\n            // Navigate on view\r\n            self.slideFormParams.navigation.navigate(self.slideContainer.id);\r\n        });\r\n\r\n        return defer.promise();\r\n    }\r\n});","/**\r\n *   Name: Bizagi Tablet slide grid view implementation\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   Serves as an slide view that will show hidden columns for a grid\r\n */\r\n\r\n// Extends itself\r\n$.Class.extend(\"bizagi.rendering.tablet.slide.grid\", {}, {\r\n\r\n    /* CONSTRUCTOR\r\n     =====================================================*/\r\n    init: function (dataService, renderFactory, slideFormParams) {\r\n\r\n        var self = this;\r\n\r\n        // Define instance variables\r\n        this.dataService = dataService;\r\n        this.renderFactory = renderFactory;\r\n        this.slideFormDeferred = new $.Deferred();\r\n        this.slideFormParams = slideFormParams || {};\r\n\r\n        // Create container\r\n        self.container = self.slideFormParams.navigation.createRenderContainer({title: self.slideFormParams.title});\r\n    },\r\n\r\n    /**\r\n     * Render the grid view form\r\n     * The params are the same that will be send to the ajax service\r\n     * @param {} params\r\n     * @returns {} Returns a deferred\r\n     */\r\n    render: function (params) {\r\n        var self = this;\r\n\r\n        // Fill content\r\n        self.renderSlideForm(self.slideForm, params);\r\n\r\n        self.slideFormDeferred.resolve();\r\n\r\n        // Return promise\r\n        return self.slideFormDeferred.promise();\r\n    },\r\n\r\n    /* RENDERS slideForm\r\n     =====================================================*/\r\n    renderSlideForm: function (slideForm, params) {\r\n\r\n        var self = this;\r\n        var data = self.transformData(params);\r\n\r\n        // Load template and data\r\n        self.form = self.renderFactory.getContainer({\r\n            type: \"form\",\r\n            data: data.form,\r\n            navigation: self.slideFormParams.navigation,\r\n            view_container: self.container\r\n        });\r\n\r\n        self.form.buttons = [$.extend(self.form.buttons[0] || {},\r\n            {\r\n                \"caption\": bizagi.localization.getResource(\"render-form-dialog-box-save\"),\r\n                \"actions\": [\"submitData\", \"refresh\"],\r\n                \"submitData\": true,\r\n                \"refresh\": true,\r\n                \"ordinal\": 0,\r\n                \"action\": \"save\",\r\n                \"save\": true,\r\n                \"style\": \"\",\r\n                // This callback avoid to call the default processButton in the form\r\n                callback: function () {\r\n                    self.goBack();\r\n                    // Resolve deferred with form data\r\n                    var data = {};\r\n                    self.form.collectRenderValues(data);\r\n                    self.slideFormDeferred.resolve(data);\r\n                }\r\n            }),\r\n            $.extend(self.form.buttons[1] || {},\r\n                {\r\n                    \"caption\": bizagi.localization.getResource(\"render-form-dialog-box-close\"),\r\n                    \"actions\": [\"submitData\", \"refresh\"],\r\n                    \"submitData\": true,\r\n                    \"refresh\": true,\r\n                    \"ordinal\": 1,\r\n                    \"action\": \"back\",\r\n                    \"save\": true,\r\n                    \"style\": \"\",\r\n                    //This callback avoid to call the default processButton in the form\r\n                    callback: function () {\r\n                        // Close slide\r\n                        self.goBack();\r\n                        self.slideFormDeferred.reject();\r\n                    }\r\n                })\r\n        ];\r\n\r\n        // Add save button if the form is editable\r\n        if (!self.slideFormParams.allowEdition) {\r\n            self.form.buttons.shift();\r\n        }\r\n\r\n        //self._renderButtons(self.form);\r\n\r\n        $.when(self.form.render())\r\n            .done(function (element) {\r\n\r\n                // Append form in the slide view\r\n                self.container.element.html(element);\r\n\r\n                self.slideFormParams.navigation.navigate(self.container.id);\r\n\r\n                self.container.setNavigationButtons(self.form);\r\n\r\n                // Remove default form buttons\r\n                $(\".ui-bizagi-button-container .action-button\", self.form.container).remove();\r\n\r\n                // Add Button\r\n                $(\".ui-bizagi-button-container\", self.form.container).append(self.buttonContainer);\r\n\r\n                // Publish an event to check if the form has been set in the DOM\r\n                self.form.triggerHandler(\"ondomincluded\");\r\n            });\r\n    },\r\n\r\n    /**\r\n     * Transform data into a JSON standard rendering format\r\n     * @param {} params\r\n     * @returns {}\r\n     */\r\n    transformData: function (params) {\r\n        var self = this;\r\n        var row = params.row;\r\n        var columns = params.columns;\r\n\r\n        // Set xpath context\r\n        var xpathContext = params.xpathContext.length > 0\r\n            ? params.xpathContext + \".\" + params.xpath + \"[\" + params.row[0] + \"]\"\r\n            : params.xpath + \"[id=\" + params.row[0] + \"]\";\r\n\r\n        var data = {\r\n            type: \"form\",\r\n            form: {\r\n                elements: [],\r\n                pageCacheId: params.pageCacheId,\r\n                sessionId: params.sessionId,\r\n                properties: {\r\n                    xpathContext: xpathContext\r\n                },\r\n                actions: self.transformActions(params.xpath, params.actions),\r\n                validations: self.transformValidations(params.xpath, params.validations)\r\n            }\r\n        };\r\n\r\n        $.each(row, function (i, item) {\r\n\r\n            // Skip first data (key not need to be rendered)\r\n            if (i > 0) {\r\n                var element = {render: {properties: $.extend({}, columns[i - 1].properties)}};\r\n\r\n                // Hack properties\r\n                element.render.properties.type = self.mapRenderType(element.render.properties.type);\r\n                element.render.properties.displayType = 'both';\r\n                if (self.slideFormParams.allowEdition == false) element.render.properties.editable = false;\r\n                element.render.properties.value = self.mapValue(element.render.properties.type, item);\r\n                if (element.render.properties.recalculate) element.render.properties.data = null;\r\n\r\n                // Check columnVisible property\r\n                if (typeof (element.render.properties.columnVisible) != \"undefined\") {\r\n                    element.render.properties.visible = element.render.properties.columnVisible;\r\n                }\r\n\r\n                // Fix upload columns\r\n                if (element.render.properties.type == \"upload\") {\r\n                    element.render.properties.isColumn = true;\r\n                }\r\n\r\n                // Fix search columns\r\n                if (element.render.properties.type == \"search\") {\r\n                    var value = element.render.properties.value;\r\n                    if (value.length > 0) {\r\n                        value = [].concat(value[0]);\r\n                        element.render.properties.value = {\r\n                            id: value[0],\r\n                            label: value[1],\r\n                            additionallabel: value[2] || undefined\r\n                        }\r\n                    }\r\n                }\r\n\r\n\r\n                // Add element\r\n                data.form.elements.push(element);\r\n            }\r\n        });\r\n\r\n        return data;\r\n    },\r\n\r\n    /**\r\n     * Map column renderType into normal render\r\n     * @param {} type\r\n     * @returns {}\r\n     */\r\n    mapRenderType: function (type) {\r\n        type = type.replaceAll(\"tablet\", \"\").replaceAll(\"column\", \"\");\r\n\r\n        //some exceptions\r\n        if (type === \"FormLink\") {\r\n            return \"formLink\";\r\n        }\r\n\r\n        type = type.toLowerCase();\r\n        return type;\r\n    },\r\n\r\n    /**\r\n     * Method to traslate grid values into render values\r\n     * @param {} type\r\n     * @param {} value\r\n     * @returns {}\r\n     */\r\n    mapValue: function (type, value) {\r\n        if ([\"combo\", \"radio\", \"list\"].includes(type)) {\r\n            if (value && value.length > 0) {\r\n\r\n                // Transform the value property\r\n                return [{\r\n                    id: value[0][0],\r\n                    value: value[0].length > 2 ? $.grep(value[0], function (item, i) {\r\n                        return i !== 0;\r\n                    }) : value[0][1]\r\n                }];\r\n\r\n            } else {\r\n                return null;\r\n            }\r\n        }\r\n\r\n        // Else: Don't do anything\r\n        return value;\r\n    },\r\n\r\n    /**\r\n     * Parse form actions into just grid form actions\r\n     * @param {} xpath\r\n     * @param {} actions\r\n     * @returns {}\r\n     */\r\n    transformActions: function (xpath, actions) {\r\n        var self = this;\r\n        var gridActions = [];\r\n\r\n        if (bizagi.util.isEmpty(actions)) return gridActions;\r\n\r\n        $.each(actions, function (i, action) {\r\n            var bDependencyFound = false;\r\n            for (var i = 0; i < action.dependencies.length; i++) {\r\n                if (action.dependencies[i].indexOf(xpath) != -1) {\r\n                    bDependencyFound = true;\r\n                }\r\n            }\r\n\r\n            if (bDependencyFound) {\r\n                var newAction = JSON.parse(JSON.encode(action));\r\n\r\n                // Replace dependencies\r\n                for (var i = 0; i < newAction.dependencies.length; i++) {\r\n                    newAction.dependencies[i] = newAction.dependencies[i].replaceAll(xpath + \"[].\", \"\");\r\n                }\r\n\r\n                // Replace conditions\r\n                self.transformConditions(xpath, newAction.conditions);\r\n\r\n                // Replace commands\r\n                self.transformCommands(xpath, newAction.commands);\r\n                self.transformCommands(xpath, newAction.elseCommands);\r\n\r\n                // Add to grid actions\r\n                gridActions.push(newAction);\r\n            }\r\n        });\r\n\r\n        return gridActions;\r\n    },\r\n\r\n    /*\r\n     *   Parse form validations into just grid form validations\r\n     */\r\n    transformValidations: function (xpath, validations) {\r\n        var self = this;\r\n        var gridValidations = [];\r\n\r\n        if (bizagi.util.isEmpty(validations)) return gridValidations;\r\n\r\n        $.each(validations, function (i, validation) {\r\n            var newValidation = JSON.parse(JSON.encode(validation));\r\n\r\n            // Replace conditions\r\n            self.transformConditions(xpath, newValidation.conditions);\r\n\r\n            // Add to grid actions\r\n            gridValidations.push(newValidation);\r\n\r\n        });\r\n\r\n        return gridValidations;\r\n    },\r\n\r\n    /**\r\n     * Parse a single condition or a complex condition in order to prepare a grid action/validation\r\n     * @param {} xpath\r\n     * @param {} condition\r\n     * @returns {}\r\n     */\r\n    transformConditions: function (xpath, condition) {\r\n        var self = this;\r\n\r\n        if (condition.expressions) {\r\n            for (i in condition.expressions) {\r\n                self.transformConditions(xpath, condition.expressions[i]);\r\n            }\r\n\r\n        } else if (condition.simple) {\r\n            self.transformConditions(xpath, condition.simple);\r\n\r\n        } else if (condition.complex) {\r\n            self.transformConditions(xpath, condition.complex);\r\n\r\n        } else {\r\n            if (condition.xpath) {\r\n                condition.xpath = condition.xpath.replaceAll(xpath + \"[].\", \"\");\r\n                if (condition.argumentType == 'xpath') {\r\n                    condition.argument = condition.argument.replaceAll(xpath + \"[].\", \"\");\r\n                }\r\n            }\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Parse a command action to prepare a grid action\r\n     * @param {} xpath\r\n     * @param {} commands\r\n     * @returns {}\r\n     */\r\n    transformCommands: function (xpath, commands) {\r\n        var self = this;\r\n        var refreshIndex = null;\r\n        if (commands == null || commands.length === 0) return;\r\n\r\n        for (var i = 0; i < commands.length; i++) {\r\n            if (commands[i].command === \"refresh\") {\r\n                refreshIndex = i;\r\n            } else {\r\n                if (commands[i].xpath) {\r\n                    commands[i].xpath = commands[i].xpath.replaceAll(xpath + \"[].\", \"\");\r\n                }\r\n                if (commands[i].argumentType === 'xpath') {\r\n                    commands[i].argument = commands[i].argument.replaceAll(xpath + \"[].\", \"\");\r\n                }\r\n            }\r\n        }\r\n\r\n        if (refreshIndex != null) {\r\n            commands.splice(i, 1);\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Go back and destroy\r\n     * @returns {}\r\n     */\r\n    goBack: function () {\r\n        var self = this;\r\n        self.container.destroy();\r\n    },\r\n\r\n    /**\r\n     * Process render buttons\r\n     * @param {} options\r\n     * @returns {}\r\n     */\r\n    _renderButtons: function (form) {\r\n        var self = this;\r\n        var content = $(\"<div class='bz-slide-button-container'></div>\");\r\n\r\n        $.each(form.buttons, function (ui, value) {\r\n            var button = $(\"<div class='action-button'>\" + value.caption + \"</div>\").click(\r\n                value.callback\r\n            ).appendTo(content);\r\n        });\r\n\r\n        self.buttonContainer = content;\r\n    }\r\n\r\n});","/**\r\n *   Name: Bizagi Tablet slide form implementation\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   Serves as an slide form that can render a inner form\r\n */\r\n\r\n// Extends itself\r\n$.Class.extend('bizagi.rendering.tablet.slide.adhocForm', {}, {\r\n\r\n   /* CONSTRUCTOR\r\n     =====================================================*/\r\n     init: function (renderFactory, slideFormParams) {\r\n\r\n        var self = this;\r\n\r\n        // Define instance variables\r\n        this.renderFactory = renderFactory;\r\n        this.slideFormDeferred = new $.Deferred();\r\n        this.slideFormParams = slideFormParams || {};\r\n\r\n        // Create container\r\n        self.container = self.slideFormParams.navigation.createRenderContainer({title: self.slideFormParams.title});\r\n    },\r\n\r\n    /**\r\n     * Render the grid view form\r\n     * The params are the same that will be send to the ajax service\r\n     * @param {} params\r\n     * @returns {} Returns a deferred\r\n     */\r\n    render: function (params) {\r\n        var self = this;\r\n\r\n        // Fill content\r\n        self.renderSlideForm(params);\r\n        // Return promise\r\n        return self.slideFormDeferred.promise();\r\n    },\r\n\r\n    /* RENDERS slideForm\r\n     =====================================================*/\r\n    renderSlideForm: function (params) {\r\n\r\n        var self = this;\r\n        var data = self.transformData(params);\r\n\r\n        // Load template and data\r\n        self.form = self.renderFactory.getContainer({\r\n            type: \"form\",\r\n            data: data.form,\r\n            navigation: this.slideFormParams.navigation\r\n        });\r\n\r\n        self.form.buttons = [$.extend(self.form.buttons[0] || {},\r\n            {\r\n                \"caption\": bizagi.localization.getResource(\"render-form-dialog-box-save\"),\r\n                \"actions\": [\"submitData\", \"refresh\"],\r\n                \"submitData\": true,\r\n                \"refresh\": true,\r\n                \"ordinal\": 0,\r\n                \"action\": \"save\",\r\n                \"save\": true,\r\n                \"style\": \"\",\r\n                // This callback avoid to call the default processButton in the form\r\n                callback: function () {\r\n                    if(self.form.validateForm()) {\r\n                        self.goBack();\r\n                        // Resolve deferred with form data\r\n                        var data = {};\r\n                        self.form.collectRenderValues(data);\r\n                        self.slideFormDeferred.resolve(data);\r\n                    }\r\n                }\r\n            }),\r\n            $.extend(self.form.buttons[1] || {},\r\n                {\r\n                    \"caption\": bizagi.localization.getResource(\"render-form-dialog-box-close\"),\r\n                    \"actions\": [\"submitData\", \"refresh\"],\r\n                    \"submitData\": true,\r\n                    \"refresh\": true,\r\n                    \"ordinal\": 1,\r\n                    \"action\": \"back\",\r\n                    \"save\": true,\r\n                    \"style\": \"\",\r\n                    //This callback avoid to call the default processButton in the form\r\n                    callback: function () {\r\n                        // Close slide\r\n                        self.goBack();\r\n                        self.slideFormDeferred.reject();\r\n                    }\r\n                })\r\n        ];\r\n\r\n        // Add save button if the form is editable\r\n        if (!self.slideFormParams.allowEdition) {\r\n            self.form.buttons.shift();\r\n        }\r\n\r\n        //self._renderButtons(self.form);\r\n\r\n        $.when(self.form.render())\r\n            .done(function (element) {\r\n\r\n                // Append form in the slide view\r\n                self.container.element.html(element);\r\n\r\n                self.slideFormParams.navigation.navigate(self.container.id);\r\n\r\n                self.container.setNavigationButtons(self.form);\r\n\r\n                // Remove default form buttons\r\n                $(\".ui-bizagi-button-container .action-button\", self.form.container).remove();\r\n\r\n                // Add Button\r\n                $(\".ui-bizagi-button-container\", self.form.container).append(self.buttonContainer);\r\n\r\n                // Publish an event to check if the form has been set in the DOM\r\n                self.form.triggerHandler(\"ondomincluded\");\r\n            });\r\n    },\r\n\r\n    /**\r\n     * Transform data into a JSON standard rendering format\r\n     * @param {} params\r\n     * @returns {}\r\n     */\r\n    transformData: function (params) {\r\n        var self = this;\r\n        var row = params.row;\r\n        var columns = params.columns;\r\n        var isAddForm = false;\r\n\r\n        // Set xpath context\r\n        var xpathContext = params.xpathContext.length > 0\r\n            ? params.xpathContext + \".\" + params.xpath + \"[\" + params.row[0] + \"]\"\r\n            : params.xpath + \"[id=\" + params.row[0] + \"]\";\r\n\r\n        var data = {\r\n            type: \"form\",\r\n            form: {\r\n                elements: [],\r\n                pageCacheId: params.pageCacheId,\r\n                sessionId: params.sessionId,\r\n                properties: {\r\n                    xpathContext: xpathContext\r\n                },\r\n                actions: self.transformActions(params.xpath, params.actions),\r\n                validations: self.transformValidations(params.xpath, params.validations)\r\n            }\r\n        };\r\n\r\n\r\n        if(row[0] == \"mock_id\") {\r\n            isAddForm = true;\r\n        }\r\n\r\n        $.each(row, function (i, item) {\r\n\r\n            // Skip first data (key not need to be rendered)\r\n            if (i > 0) {\r\n                var element = {render: {properties: $.extend({}, columns[i - 1].properties)}};\r\n\r\n                // Hack properties\r\n                element.render.properties.type = self.mapRenderType(element.render.properties.type);\r\n                element.render.properties.displayType = 'both';\r\n                if (self.slideFormParams.allowEdition == false) element.render.properties.editable = false;\r\n                element.render.properties.value = self.mapValue(element.render.properties.type, item);\r\n                if (element.render.properties.recalculate) element.render.properties.data = null;\r\n\r\n                // Check columnVisible property\r\n                if (typeof (element.render.properties.columnVisible) != \"undefined\") {\r\n                    element.render.properties.visible = element.render.properties.columnVisible;\r\n                }\r\n\r\n                // Fix upload columns\r\n                if (element.render.properties.type == \"upload\") {\r\n                    element.render.properties.isColumn = true;\r\n                }\r\n                // Fix upload columns\r\n                if (element.render.properties.type == \"readonly\") {\r\n                    element.render.properties.type = \"text\"\r\n                    element.render.properties.editable = false;\r\n                }\r\n\r\n\r\n                // Fix search columns\r\n                if (element.render.properties.type == \"search\") {\r\n                    var value = element.render.properties.value;\r\n                    if (value == null) {\r\n                        element.render.properties.value = {};\r\n                    } else if (value.length > 0) {\r\n                        value = [].concat(value[0]);\r\n                        element.render.properties.value = {\r\n                            id: value[0],\r\n                            label: value[1],\r\n                            additionallabel: value[2] || undefined\r\n                        }\r\n                    }\r\n                }\r\n\r\n                if (isAddForm && [\"document\", \"formLink\", \"upload\", \"uploadecm\", \"image\", \"search\"].includes(element.render.properties.type)) {\r\n                    element.render.properties.editable = false;\r\n                }\r\n\r\n\r\n                // Add element\r\n                data.form.elements.push(element);\r\n            }\r\n        });\r\n\r\n        return data;\r\n    },\r\n\r\n    /**\r\n     * Map column renderType into normal render\r\n     * @param {} type\r\n     * @returns {}\r\n     */\r\n    mapRenderType: function (type) {\r\n        type = type.replaceAll(\"tablet\", \"\").replaceAll(\"column\", \"\");\r\n\r\n        //some exceptions\r\n        if (type === \"FormLink\") {\r\n            return \"formLink\";\r\n        }\r\n\r\n        type = type.toLowerCase();\r\n        return type;\r\n    },\r\n\r\n    /**\r\n     * Method to traslate grid values into render values\r\n     * @param {} type\r\n     * @param {} value\r\n     * @returns {}\r\n     */\r\n    mapValue: function (type, value) {\r\n        if ([\"combo\", \"radio\", \"list\"].includes(type)) {\r\n            if (value && value.length > 0) {\r\n\r\n                // Transform the value property\r\n                return [{\r\n                    id: value[0][0],\r\n                    value: value[0].length > 2 ? $.grep(value[0], function (item, i) {\r\n                        return i !== 0;\r\n                    }) : value[0][1]\r\n                }];\r\n\r\n            } else {\r\n                return null;\r\n            }\r\n        }\r\n\r\n        // Else: Don't do anything\r\n        return value;\r\n    },\r\n\r\n    /**\r\n     * Parse form actions into just grid form actions\r\n     * @param {} xpath\r\n     * @param {} actions\r\n     * @returns {}\r\n     */\r\n    transformActions: function (xpath, actions) {\r\n        var self = this;\r\n        var gridActions = [];\r\n\r\n        if (bizagi.util.isEmpty(actions)) return gridActions;\r\n\r\n        $.each(actions, function (i, action) {\r\n            var bDependencyFound = false;\r\n            for (var i = 0; i < action.dependencies.length; i++) {\r\n                if (action.dependencies[i].indexOf(xpath) != -1) {\r\n                    bDependencyFound = true;\r\n                }\r\n            }\r\n\r\n            if (bDependencyFound) {\r\n                var newAction = JSON.parse(JSON.encode(action));\r\n\r\n                // Replace dependencies\r\n                for (var i = 0; i < newAction.dependencies.length; i++) {\r\n                    newAction.dependencies[i] = newAction.dependencies[i].replaceAll(xpath + \"[].\", \"\");\r\n                }\r\n\r\n                // Replace conditions\r\n                self.transformConditions(xpath, newAction.conditions);\r\n\r\n                // Replace commands\r\n                self.transformCommands(xpath, newAction.commands);\r\n                self.transformCommands(xpath, newAction.elseCommands);\r\n\r\n                // Add to grid actions\r\n                gridActions.push(newAction);\r\n            }\r\n        });\r\n\r\n        return gridActions;\r\n    },\r\n\r\n    /*\r\n     *   Parse form validations into just grid form validations\r\n     */\r\n    transformValidations: function (xpath, validations) {\r\n        var self = this;\r\n        var gridValidations = [];\r\n\r\n        if (bizagi.util.isEmpty(validations)) return gridValidations;\r\n\r\n        $.each(validations, function (i, validation) {\r\n            var newValidation = JSON.parse(JSON.encode(validation));\r\n\r\n            // Replace conditions\r\n            self.transformConditions(xpath, newValidation.conditions);\r\n\r\n            // Add to grid actions\r\n            gridValidations.push(newValidation);\r\n\r\n        });\r\n\r\n        return gridValidations;\r\n    },\r\n\r\n    /**\r\n     * Parse a single condition or a complex condition in order to prepare a grid action/validation\r\n     * @param {} xpath\r\n     * @param {} condition\r\n     * @returns {}\r\n     */\r\n    transformConditions: function (xpath, condition) {\r\n        var self = this;\r\n\r\n        if (condition.expressions) {\r\n            for (i in condition.expressions) {\r\n                self.transformConditions(xpath, condition.expressions[i]);\r\n            }\r\n\r\n        } else if (condition.simple) {\r\n            self.transformConditions(xpath, condition.simple);\r\n\r\n        } else if (condition.complex) {\r\n            self.transformConditions(xpath, condition.complex);\r\n\r\n        } else {\r\n            if (condition.xpath) {\r\n                condition.xpath = condition.xpath.replaceAll(xpath + \"[].\", \"\");\r\n                if (condition.argumentType == 'xpath') {\r\n                    condition.argument = condition.argument.replaceAll(xpath + \"[].\", \"\");\r\n                }\r\n            }\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Parse a command action to prepare a grid action\r\n     * @param {} xpath\r\n     * @param {} commands\r\n     * @returns {}\r\n     */\r\n    transformCommands: function (xpath, commands) {\r\n        var self = this;\r\n        var refreshIndex = null;\r\n        if (commands == null || commands.length === 0) return;\r\n\r\n        for (var i = 0; i < commands.length; i++) {\r\n            if (commands[i].command === \"refresh\") {\r\n                refreshIndex = i;\r\n            } else {\r\n                if (commands[i].xpath) {\r\n                    commands[i].xpath = commands[i].xpath.replaceAll(xpath + \"[].\", \"\");\r\n                }\r\n                if (commands[i].argumentType === 'xpath') {\r\n                    commands[i].argument = commands[i].argument.replaceAll(xpath + \"[].\", \"\");\r\n                }\r\n            }\r\n        }\r\n\r\n        if (refreshIndex != null) {\r\n            commands.splice(i, 1);\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Go back and destroy\r\n     * @returns {}\r\n     */\r\n    goBack: function () {\r\n        var self = this;\r\n        self.container.destroy();\r\n    },\r\n\r\n    /**\r\n     * Process render buttons\r\n     * @param {} options\r\n     * @returns {}\r\n     */\r\n    _renderButtons: function (form) {\r\n        var self = this;\r\n        var content = $(\"<div class='bz-slide-button-container'></div>\");\r\n\r\n        $.each(form.buttons, function (ui, value) {\r\n            var button = $(\"<div class='action-button'>\" + value.caption + \"</div>\").click(\r\n                value.callback\r\n            ).appendTo(content);\r\n        });\r\n\r\n        self.buttonContainer = content;\r\n    }\r\n});","/**\r\n *   Name: Bizagi Tablet Search Slide view Implementation\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will shows a sliding search form  order to edit\r\n */\r\n\r\n// Extends itself\r\n$.Class.extend(\"bizagi.rendering.tablet.slide.searchForm\", {}, {\r\n    /*\r\n    *   Constructor\r\n    */\r\n    init: function (dataService, renderFactory, searchForms, searchParams, slideParams) {\r\n        var self = this;\r\n\r\n        self.dataService = dataService;\r\n        self.renderFactory = renderFactory;\r\n        self.searchForms = searchForms;\r\n        self.searchParams = searchParams;\r\n        self.slideParams = slideParams;\r\n        self.slideDeferred = new $.Deferred();\r\n        self.extraButtons = (slideParams.hasOwnProperty(\"buttons\")) ? slideParams.buttons : false;\r\n\r\n        // Create container\r\n        self.container = self.slideParams.navigation.createRenderContainer({title: self.slideParams.title});\r\n\r\n        self.processButtons()\r\n            .done(function (data) {\r\n                self.slideDeferred.resolve(data);\r\n            }).fail(function () {\r\n            self.slideDeferred.reject();\r\n        });\r\n\r\n        self.configureViewHandlers();\r\n    },\r\n\r\n    /**\r\n     * Render the form\r\n     * The params are the same that will be send to the ajax service\r\n     * @param {} params\r\n     * @returns {} Returns a deferred\r\n     */\r\n    render: function (params) {\r\n        this.properties = params;\r\n\r\n        //Render the search form\r\n        this.renderSearchDialog(params);\r\n\r\n        // Return promise\r\n        return this.slideDeferred.promise();\r\n    },\r\n\r\n    /**\r\n     * Render the search form\r\n     * @param {} params\r\n     * @returns {}\r\n     */\r\n    renderSearchDialog: function (params) {\r\n        var self = this;\r\n\r\n        bizagi.loading.start();\r\n\r\n        // Creates a dialog\r\n        $.when(self.getSearchContainerData(params)).then(function (data) {\r\n            if (data.form.properties) {\r\n                data.form.properties.orientation = self.searchParams.orientation || \"ltr\";\r\n            }\r\n\r\n            // Render dialog form\r\n            var form = self.renderFactory.getContainer({\r\n                type: \"form\",\r\n                data: data.form,\r\n                navigation: self.slideParams.navigation,\r\n                view_container: self.container\r\n            });\r\n\r\n            form.buttons = [\r\n                {\r\n                    ordinal: 1,\r\n                    action: \"search\",\r\n                    caption: bizagi.localization.getResource(\"render-form-dialog-box-search\"),\r\n                    callback: function () {\r\n                        self.currentSearchForm.performSearch(self.searchParams);\r\n                    },\r\n                },\r\n                {\r\n                    ordinal: 2,\r\n                    action: \"cancel\",\r\n                    caption: \"cancel\",\r\n                    callback: function () {\r\n                        // Close slide\r\n                        self.goBack();\r\n                    },\r\n                },\r\n                {\r\n                    ordinal: 3,\r\n                    action: \"add\",\r\n                    caption: bizagi.localization.getResource(\"render-form-dialog-box-add\"),\r\n                    callback: function () {\r\n                        var params = {\r\n                            idCase: self.slideParams.idCase,\r\n                            idRender: self.properties.idRender,\r\n                            displayName: self.properties.displayName,\r\n                            idPageCache: self.properties.idPageCache\r\n                        };\r\n\r\n                        self.renderAddForm(params);\r\n                    },\r\n                },\r\n            ];\r\n\r\n            if (!self.slideParams.allowNew) {\r\n                form.buttons.pop();\r\n            }\r\n\r\n            // Save form reference\r\n            self.form = form;\r\n\r\n            // Return rendering promise\r\n            return form.render();\r\n        }).done(function (element) {\r\n            // Append form in the slide view\r\n            self.container.element.html(element);\r\n\r\n            self.slideParams.navigation.navigate(self.container.id);\r\n\r\n            // Add Button\r\n            $(\".ui-bizagi-button-container\", self.form.container).append(self.buttonContainer);\r\n\r\n            // Hide title of html content\r\n            self.searchResultContainer = $(\".bz-container__search-results\", element);\r\n            self.searchResultContainer.hide();\r\n\r\n            // Publish an event to check if the form has been set in the DOM\r\n            self.form.triggerHandler(\"ondomincluded\");\r\n\r\n            // Set currents search form\r\n            self.currentSearchForm = self.form.firstChild();\r\n            self.currentSearchForm.triggerHandler(\"ondomincluded\");\r\n\r\n            self.currentSearchForm.bind(\"instancerefresh\", function () {\r\n                // Show search results container\r\n                self.searchResultContainer.show();\r\n            });\r\n\r\n            self.form.bind(\"refresh\", function (_, refreshParams) {\r\n                refreshParams.scrollTop = self.form.container.parent().scrollTop();\r\n                refreshParams = $.extend({\r\n                    focus: focus,\r\n                    selectedTabs: self.form.getSelectedTabs(),\r\n                    isRefresh: true,\r\n                    contextType: self.properties.contextType || \"\",\r\n                    navigation: self.searchFormParams.navigation,\r\n                    view_container: self.container\r\n                }, refreshParams);\r\n\r\n                return self.renderSearchDialog(refreshParams);\r\n            });\r\n\r\n            // Add row selected handlers to resolve the deferred\r\n            self.currentSearchForm.bind(\"instanceSelected\", function (ev, ui) {\r\n                // Close slide\r\n                self.goBack();\r\n\r\n                self.slideBoxDeferred.resolve({id: ui.id, label: \"\"});\r\n            });\r\n            // if is any modal view displayed, hide it to allow this search form been displayed\r\n            self.handleSearchFormZindex(\"show\");\r\n\r\n            self.containerSearchCriteria = self.currentSearchForm.container.find(\".bz-container__search-criteria\");\r\n        }).fail(function (error_obj) {\r\n            if (self.hasSessionFormException(error_obj)) {\r\n                self.goToStartPage(error_obj);\r\n            } else {\r\n                var errorTemplate = self.renderFactory.getCommonTemplate(\"form-error\");\r\n                var message = error_obj && error_obj.message ? error_obj.message : error_obj;\r\n\r\n                $($.fasttmpl(errorTemplate, {message: message}))\r\n                    .appendTo(self.container.element);\r\n\r\n                self.slideParams.navigation.navigate(self.container.id);\r\n            }\r\n        }).always(function () {\r\n            bizagi.loading.stop();\r\n        });\r\n    },\r\n\r\n    /**\r\n     * Get the addform and show it\r\n     * @param {} params\r\n     * @returns {}\r\n     */\r\n    renderAddForm: function (params) {\r\n        var self = this;\r\n        params = params || {};\r\n        var properties = self.properties;\r\n\r\n        if (typeof self.addContainer === \"undefined\") {\r\n            self.addContainer =\r\n                self.slideParams.navigation.createRenderContainer({\r\n                    title: bizagi.localization.getResource(\"render-dialog-entity\")\r\n                });\r\n        }\r\n\r\n        var isRefresh = params.isRefresh || false;\r\n\r\n        var getFormParams = {\r\n            idPageCache: params.idPageCache,\r\n            guidEntity: properties.entity,\r\n            contextType: \"entity\"\r\n        };\r\n\r\n        if (isRefresh) {\r\n            getFormParams.isRefresh = true;\r\n            getFormParams.idStartScope = params.idStartScope;\r\n        } else {\r\n            getFormParams.idRender = properties.idRender;\r\n            getFormParams.requestedForm = \"addForm\";\r\n        }\r\n\r\n        bizagi.loading.start();\r\n\r\n        //Get the addform\r\n        $.when(self.dataService.getFormData(getFormParams)).then(function (data) {\r\n            if (params.editable === false) {\r\n                data.form.properties.editable = false;\r\n            }\r\n\r\n            if (data.form.properties) {\r\n                data.form.properties.orientation = self.searchParams.orientation || \"ltr\";\r\n            }\r\n\r\n            data.form.contextType = \"entity\";\r\n\r\n            var form = self.renderFactory.getContainer($.extend({}, self.addFormParams, {\r\n                type: \"form\",\r\n                data: data.form,\r\n                focus: params.focus || false,\r\n                selectedTabs: params.selectedTabs,\r\n                isRefresh: isRefresh,\r\n                requestedForm: params.requestedForm,\r\n                navigation: self.slideParams.navigation,\r\n                view_container: self.addContainer\r\n\r\n            }));\r\n\r\n            form.buttons = [\r\n                $.extend(\r\n                    self.form.buttons[0] || {},\r\n                    {\r\n                        \"caption\": bizagi.localization.getResource(\"render-form-dialog-box-save\"),\r\n                        \"actions\": [\"submitData\", \"refresh\"],\r\n                        \"submitData\": true,\r\n                        \"refresh\": true,\r\n                        \"ordinal\": 0,\r\n                        \"action\": \"save\",\r\n                        \"save\": true,\r\n                        \"style\": \"\",\r\n                    },\r\n                    {\r\n                        //This callback avoid to call the default processButton in the form\r\n                        callback: function () {\r\n                            // When the data is saved then\r\n                            self.saveDataAddForm(form).done(function () {\r\n\r\n                                self.addContainer.destroy();\r\n                                delete self.addContainer;\r\n\r\n                                // Force a search after a new item is created!\r\n                                self.currentSearchForm.performSearch(self.searchParams);\r\n                            });\r\n                        }\r\n                    }),\r\n                $.extend(\r\n                    self.form.buttons[1] || {},\r\n                    {\r\n                        \"caption\": bizagi.localization.getResource(\"render-form-dialog-box-close\"),\r\n                        \"actions\": [\"submitData\", \"refresh\"],\r\n                        \"submitData\": true,\r\n                        \"refresh\": true,\r\n                        \"ordinal\": 1,\r\n                        \"action\": \"back\",\r\n                        \"save\": true,\r\n                        \"style\": \"\"\r\n                    },\r\n                    {\r\n                        // This callback avoid to call the default processButton in the form\r\n                        callback: function () {\r\n                            self.addContainer.destroy();\r\n                            delete self.addContainer;\r\n                        }\r\n                    }),\r\n            ];\r\n\r\n            $.extend(form, {\r\n                processButtons: function () {\r\n                    //not send information set in memory and save\r\n\r\n                    $.each(form.buttons, function (index, element) {\r\n                        switch (element[\"ordinal\"]) {\r\n                            case 1:\r\n                                // Next button will behave as a cancel button\r\n                                $(form.getButtons()[index]).click(function () {\r\n                                    self.addContainer.destroy();\r\n                                    delete self.addContainer;\r\n                                });\r\n\r\n                                form.getButtons()[index].innerHTML = bizagi.localization.getResource(\"render-form-dialog-box-close\");\r\n                                form.buttons[index].caption = bizagi.localization.getResource(\"render-form-dialog-box-close\");\r\n                                form.buttons[index].action = \"back\";\r\n\r\n                                break;\r\n\r\n                            default:\r\n                                $(form.getButtons()[index]).click(function () {\r\n                                    self.saveDataAddForm(form);\r\n\r\n                                    self.addContainer.destroy();\r\n                                    delete self.addContainer;\r\n                                });\r\n                                break;\r\n                        }\r\n                    });\r\n                }\r\n            });\r\n\r\n            (Object.keys(form.children) || [])\r\n                .map(function (indicator) {\r\n                    form.children[indicator].params = $.extend({}, form.children[indicator].params, self.addFormParams);\r\n                });\r\n\r\n            return $.when(form.render()).done(function (element) {\r\n                // Set currents search form\r\n                self.currentAddForm = form.firstChild();\r\n                self.addContainer.element.html(element);\r\n\r\n                if (!isRefresh) {\r\n                    self.slideParams.navigation.navigate(self.addContainer.id, \"overlay:up\");\r\n                }\r\n\r\n                self.addContainer.setNavigationButtons(form);\r\n\r\n                form.triggerHandler(\"ondomincluded\");\r\n\r\n                // if is any modal view displayed, hide it to allow this search form been displayed\r\n                self.handleSearchFormZindex(\"show\");\r\n\r\n                form.bind(\"refresh\", function (_, refreshParams) {\r\n                    refreshParams.scrollTop = self.form.container.parent().scrollTop();\r\n                    refreshParams = $.extend({\r\n                        focus: focus,\r\n                        selectedTabs: self.form.getSelectedTabs(),\r\n                        isRefresh: true,\r\n                        contextType: self.properties.contextType || \"\",\r\n                        navigation: self.slideParams.navigation,\r\n                        view_container: self.addContainer\r\n                    }, refreshParams);\r\n\r\n                    return self.renderAddForm(refreshParams);\r\n                });\r\n            });\r\n        }).fail(function (error) {\r\n            var error_obj = bizagi.util.getErrorFormatted(error);\r\n\r\n            if (self.hasSessionFormException(error_obj)) {\r\n                self.goToStartPage(error_obj);\r\n            } else {\r\n                self.addContainer.destroy();\r\n                delete self.addContainer;\r\n            }\r\n        }).always(function () {\r\n            bizagi.loading.stop();\r\n        });\r\n    },\r\n\r\n    /**\r\n     * Save data to add form\r\n     * @param {} form\r\n     * @returns {}\r\n     */\r\n    saveDataAddForm: function (form) {\r\n        var self = this;\r\n        var defer = $.Deferred();\r\n        if (form.validateForm()) {\r\n            var data = {};\r\n            $.forceCollectData = true;\r\n\r\n            form.collectRenderValues(data);\r\n            data.idPageCache = form.idPageCache;\r\n\r\n            var params = {\r\n                action: \"SAVE\",\r\n                data: data,\r\n                idPageCache: data.idPageCache,\r\n                guidEntity: form.properties.entity,\r\n                contexttype: \"entity\",\r\n            };\r\n\r\n            // Check if the add form has data\r\n            var formData = {};\r\n\r\n            form.collectRenderValuesForSubmit(formData);\r\n\r\n            // Turn off flag\r\n            $.forceCollectData = false;\r\n\r\n            if (!bizagi.util.isMapEmpty(formData)) {\r\n\r\n                bizagi.loading.start();\r\n\r\n                $.when(self.dataService.submitData(params)).done(function () {\r\n                    function dataHasXpath(xpath) {\r\n                        var render = self.currentSearchForm.getRender(xpath);\r\n                        if (typeof render === \"object\" && render !== null)\r\n                            return {\"found\": true, \"obj\": render};\r\n                        return {\"found\": false, \"obj\": {}};\r\n                    }\r\n\r\n                    for (var i in formData) {\r\n                        var mapping = dataHasXpath(i);\r\n                        if (mapping.found) {\r\n                            mapping.obj.setValue(formData[i]);\r\n                            self.setDisplayValueToControl(mapping.obj, form, i, formData);\r\n                        }\r\n                    }\r\n\r\n                    defer.resolve();\r\n                }).fail(function (error) {\r\n                    var error_obj = bizagi.util.getErrorFormatted(error);\r\n\r\n                    if (self.hasSessionFormException(error_obj)) {\r\n                        self.goToStartPage(error_obj);\r\n                    } else {\r\n                        var message = error_obj.message || bizagi.localization.getResource(\"workportal-general-error\");\r\n\r\n                        form.addValidationMessage(message);\r\n                    }\r\n\r\n                    defer.reject();\r\n                }).always(function () {\r\n                    bizagi.loading.stop();\r\n                });\r\n            } else {\r\n                // Form has not data\r\n                bizagi.showMessageBox(bizagi.localization.getResource(\"render-search-advanced-no-filters\"));\r\n                defer.reject();\r\n            }\r\n        } else {\r\n            defer.reject();\r\n        }\r\n        return defer;\r\n    },\r\n\r\n    /***\r\n     * Set display value by control type, when add new record\r\n     * @param renderControlSearchForm\r\n     * @param addForm\r\n     * @param xpath\r\n     * @param formData\r\n     */\r\n    setDisplayValueToControl: function (renderControlSearchForm, addForm, xpath, formData) {\r\n        if (renderControlSearchForm.properties.type === \"searchSuggest\") {\r\n            renderControlSearchForm.setDisplayValue(addForm.getRender(xpath).getDisplayValue());\r\n        } else {\r\n            renderControlSearchForm.setDisplayValue(formData[xpath]);\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Shows the dialog box in the browser\r\n     * @returns {} Returns a promise that the dialog will be closed\r\n     */\r\n    processButtons: function () {\r\n        var self = this;\r\n        self.slideBoxDeferred = new $.Deferred();\r\n\r\n        // Create buttons object\r\n        var slideOptions = {buttons: []};\r\n\r\n        // Add search button by default\r\n        slideOptions.buttons.push({\r\n            text: bizagi.localization.getResource(\"render-form-dialog-box-search\"),\r\n            click: function () {\r\n                self.currentSearchForm.performSearch(self.searchParams);\r\n            }\r\n        });\r\n\r\n        if (self.slideParams.allowNew) {\r\n            slideOptions.buttons.push({\r\n                text: bizagi.localization.getResource(\"render-form-dialog-box-add\"),\r\n                click: function () {\r\n                    var params = {\r\n                        \"idCase\": self.slideParams.idCase,\r\n                        \"idRender\": self.properties.idRender,\r\n                        \"displayName\": self.properties.displayName,\r\n                        \"idPageCache\": self.properties.idPageCache\r\n                    };\r\n\r\n                    self.renderAddForm(params);\r\n                }\r\n            });\r\n        }\r\n\r\n        slideOptions.buttons.push({\r\n            text: bizagi.localization.getResource(\"render-form-dialog-box-cancel\"),\r\n            click: function () {\r\n                // Close slide\r\n                self.goBack();\r\n            }\r\n        });\r\n\r\n        // Apply slide plugin\r\n        slideOptions = $.extend(slideOptions, self.slideParams);\r\n        self._renderButtons(slideOptions);\r\n\r\n        // Return promise\r\n        return self.slideBoxDeferred.promise();\r\n    },\r\n\r\n    /**\r\n     * Creates the search dialog sub-containers\r\n     * @param {} params\r\n     * @returns {}\r\n     */\r\n    getSearchContainerData: function (params) {\r\n        var self = this;\r\n        var deferred = new $.Deferred();\r\n        var data = {\r\n            form: {\r\n                properties: {},\r\n                elements: []\r\n            }\r\n        };\r\n\r\n        var container = data.form;\r\n        var searchFormToLoad = self.searchForms[0];\r\n\r\n        // When there are more than one search form, render a tab container\r\n        if (self.searchForms.length > 1) {\r\n\r\n            var tabContainer = {\r\n                properties: {\r\n                    type: \"tab\"\r\n                },\r\n                elements: []\r\n            };\r\n\r\n            var otherElements = [];\r\n\r\n            $.each(self.searchForms, function (i, searchForm) {\r\n                var isDefault = searchForm[\"default\"] || false;\r\n\r\n                // Create tab item\r\n                var tab = {\r\n                    properties: {\r\n                        id: i,\r\n                        type: \"tabItem\",\r\n                        displayName: searchForm.caption\r\n                    },\r\n                    elements: []\r\n                };\r\n\r\n                // Append children\r\n                if (isDefault) {\r\n\r\n                    tabContainer.elements.push({container: tab});\r\n\r\n                    // Set properties to load default container\r\n                    container = tab;\r\n                    searchFormToLoad = self.searchForms[0];\r\n\r\n                } else {\r\n                    otherElements.push({container: tab});\r\n                }\r\n            });\r\n\r\n            // Append no defaults elements\r\n            $.each(otherElements, function (i, element) {\r\n                tabContainer.elements.push(element);\r\n            });\r\n\r\n            data.form.elements.push({\r\n                container: tabContainer\r\n            });\r\n        }\r\n\r\n        bizagi.loading.start();\r\n\r\n        // Loads default form\r\n        $.when(self.getSearchFormData(params, searchFormToLoad))\r\n            .done(function (searchFormData) {\r\n                container.elements.push(searchFormData);\r\n                container.properties.id = Math.guid();\r\n\r\n                // Resolve deferred\r\n                deferred.resolve(data);\r\n            }).fail(function (error) {\r\n            var message = bizagi.util.getErrorFormatted(error);\r\n            deferred.reject(message);\r\n        }).always(function () {\r\n            bizagi.loading.stop();\r\n        });\r\n\r\n        return deferred.promise();\r\n    },\r\n\r\n    /**\r\n     * Loads a search form\r\n     * @param {} params\r\n     * @param {} searchForm\r\n     * @returns {}\r\n     */\r\n    getSearchFormData: function (params, searchForm) {\r\n        var self = this;\r\n        return self.dataService.getSearchFormData($.extend(params, {\r\n            idSearchForm: searchForm.id,\r\n            url: searchForm.url\r\n        })).pipe(function (data) {\r\n            // Append search render properties\r\n            data.form.properties.idRender = params.idRender;\r\n\r\n            return data;\r\n        });\r\n    },\r\n\r\n    /**\r\n     * Go back and destroy\r\n     * @returns {}\r\n     */\r\n    goBack: function () {\r\n        this.handleSearchFormZindex(\"hide\");\r\n        this.container.destroy();\r\n    },\r\n\r\n    /**\r\n     * Handlers kendo view\r\n     * @returns {}\r\n     */\r\n    configureViewHandlers: function () {\r\n    },\r\n\r\n    /**\r\n     * Process render buttons\r\n     * @param {} options\r\n     * @returns {}\r\n     */\r\n    _renderButtons: function (options) {\r\n        var self = this;\r\n        var content = $(\"<div class='bz-slide-button-container'></div>\");\r\n\r\n        $.each(options.buttons, function (ui, value) {\r\n            $(\"<div class='action-button'>\" + value.text + \"</div>\").click(\r\n                value.click\r\n            ).appendTo(content);\r\n        });\r\n\r\n        self.buttonContainer = content;\r\n    },\r\n\r\n    handleSearchFormZindex: function (option) {\r\n        // If there is an open modal, change z-index to make searchForm visible\r\n        var modalViewDisplayed = jQuery.grep($(\".km-modalview-root\"), function (n) {\r\n            return ($(n).css(\"display\") === \"block\");\r\n        });\r\n\r\n        if (modalViewDisplayed.length > 0) {\r\n            var index = option === \"show\" ? 0 : 10001;\r\n            $(modalViewDisplayed).css(\"z-index\", index);\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Idle timer expired exception\r\n     * @param error\r\n     * @returns {boolean}\r\n     */\r\n    hasSessionFormException: function (error) {\r\n        return typeof (error) !== \"undefined\" && error.code === \"AUTH_ERROR\";\r\n    },\r\n\r\n    /**\r\n     * Navigate to main page\r\n     * @param error\r\n     */\r\n    goToStartPage: function (error) {\r\n        if (this.slideParams.navigation) {\r\n            this.slideParams.navigation.goToStartPage(error);\r\n        }\r\n    }\r\n});\r\n","/**\r\n *   Name: Bizagi Tablet slide view Upload implementation\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   Serves as an slide view that will show an upload file without exiting the application\r\n */\r\n\r\n// Extends itself\r\n$.Class.extend('bizagi.rendering.tablet.slide.upload', {}, {\r\n\r\n    /* CONSTRUCTOR\r\n    =====================================================*/\r\n    init: function (dataService, renderFactory, slideFormParams) {\r\n\r\n        var self = this;\r\n\r\n        // Define instance variables\r\n        this.dataService = dataService;\r\n        this.renderFactory = renderFactory;\r\n        this.slideFormDeferred = new $.Deferred();\r\n        this.slideFormParams = slideFormParams || {};\r\n\r\n        // Create container    \t\r\n        self.slideContainer = self.slideFormParams.navigation.createRenderContainer({title: self.slideFormParams.title});\r\n\r\n        self.processButtons()\r\n            .done(function (data) {\r\n                self.slideFormDeferred.resolve(data);\r\n            }).fail(function () {\r\n            self.slideFormDeferred.reject();\r\n        });\r\n    },\r\n\r\n    /**\r\n     * Shows the slideForm form container in the browser\r\n     * @returns {} Returns a promise that the dialog will be closed\r\n     */\r\n    processButtons: function () {\r\n        var self = this;\r\n        var dfd = new $.Deferred();\r\n\r\n        // Create buttons object\r\n        var slideOptions = {buttons: []};\r\n\r\n        // Add cancel button by default\r\n        var onClose = function onClose() {\r\n            // Close slide\r\n            self.goBack();\r\n            //reject defered\r\n            dfd.reject();\r\n        };\r\n        slideOptions.buttons.push({\r\n            text: bizagi.localization.getResource(\"workportal-case-dialog-box-close\"),\r\n            caption: bizagi.localization.getResource(\"render-form-dialog-box-close\"),\r\n            actions: [\"submitData\", \"refresh\"],\r\n            submitData: false,\r\n            refresh: false,\r\n            ordinal: 0,\r\n            action: \"back\",\r\n            save: true,\r\n            style: \"\",\r\n            //This callback avoid to call the default processButton in the form\r\n            callback: onClose,\r\n            click: onClose,\r\n        });\r\n\r\n        // Apply dialog plugin\r\n        this.slideFormParams = $.extend(slideOptions, this.slideFormParams);\r\n        self._renderButtons(this.slideFormParams);\r\n\r\n        // Return promise\r\n        return dfd.promise();\r\n    },\r\n\r\n    /**\r\n     * Render the grid view form\r\n     * The params are the same that will be send to the ajax service\r\n     * @param {} params\r\n     * @returns {} Returns a deferred\r\n     */\r\n    render: function (params) {\r\n        var self = this;\r\n\r\n        // Fill content\r\n        self.renderUploadFile(self.slideForm, params);\r\n\r\n        // Return promise\r\n        return self.slideFormDeferred.promise();\r\n    },\r\n\r\n    /* Render the file inside a frame\r\n    =====================================================*/\r\n    renderUploadFile: function (slideForm, params) {\r\n        var self = this;\r\n        var template = self.renderFactory.getCommonTemplate(\"uploadSlide\");\r\n\r\n        // Render template\r\n        var content = $.fasttmpl(template, {url: params.url});\r\n\r\n        // Append content in the slide view\r\n        self.slideContainer.element.html(content);\r\n\r\n        // Navigate on view\r\n        self.slideFormParams.navigation.navigate(self.slideContainer.id);\r\n        // Add Button\r\n        // $(\".ui-bizagi-button-container\", self.slideContainer).append(self.buttonContainer);\r\n\r\n        // No need to create a real form cause it just shows the back button\r\n        var virtualForm = $.extend({\r\n            originalProperties: {\r\n                uniqueId: 101,\r\n                id: 101,\r\n            },\r\n        }, self.slideFormParams);\r\n        virtualForm.container = self.slideContainer.element;\r\n\r\n        self.slideFormParams.navigation.setNavigationButtons(virtualForm);\r\n\r\n        content.find(\".ui-slide-upload-link\").click(function () {\r\n            $.when(bizagi.showConfirmationBox(bizagi.localization.getResource(\"render-tablet-slide-upload-confirmation\")))\r\n                .done(function () {\r\n                    window.location.href = params.url;\r\n                });\r\n        });\r\n    },\r\n\r\n    /**\r\n     * Go back and destroy\r\n     * @returns {}\r\n     */\r\n    goBack: function () {\r\n        var self = this;\r\n\r\n        self.slideContainer.destroy();\r\n    },\r\n\r\n    /**\r\n     * Process render buttons\r\n     * @param {} options\r\n     * @returns {}\r\n     */\r\n    _renderButtons: function (options) {\r\n        var self = this;\r\n        var content = $(\"<div class=\\\"bz-slide-button-container\\\"></div>\");\r\n\r\n        $.each(options.buttons, function (ui, value) {\r\n            $(\"<div class=\\\"action-button\\\">\" + value.text + \"</div>\").click(\r\n                value.click\r\n            ).appendTo(content);\r\n        });\r\n\r\n        self.buttonContainer = content;\r\n    }\r\n});","/**\r\n *   Name: Bizagi Tablet slide form implementation\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   Serves as an slide form that can render a inner form\r\n */\r\n\r\n// Extends itself\r\n$.Class.extend('bizagi.rendering.tablet.startForm', {}, {\r\n\r\n    /* CONSTRUCTOR\r\n     =====================================================*/\r\n    init: function (dataService, renderFactory, slideFormParams) {\r\n\r\n        var self = this;\r\n\r\n        // Define instance variables\r\n        self.dataService = dataService;\r\n        self.renderFactory = renderFactory;\r\n        self.slideFormParams = slideFormParams || {};\r\n\r\n        // Create container        \r\n        self.slideContainer = self.slideFormParams.navigation.createRenderContainer({title: self.slideFormParams.title});\r\n        self.configureViewHandlers();\r\n    },\r\n\r\n    /**\r\n     * Handlers kendo view\r\n     * @returns {}\r\n     */\r\n    configureViewHandlers: function () {\r\n        var self = this;\r\n    },\r\n\r\n    /**\r\n     * Go back and destroy\r\n     * @returns {}\r\n     */\r\n    goBack: function () {\r\n        var self = this;\r\n        self.slideContainer.destroy();\r\n    },\r\n\r\n    /**\r\n     * Render the form\r\n     * The params are the same that will be send to the ajax service\r\n     * @param {} params\r\n     * @returns {} Returns a deferred\r\n     */\r\n    render: function (params) {\r\n        var self = this;\r\n        // Fill content\r\n        self.renderSlideForm(params);\r\n    },\r\n\r\n    /* RENDERS slideForm\r\n     =====================================================*/\r\n    renderSlideForm: function (params) {\r\n\r\n        var self = this;\r\n\r\n        var defer = new $.Deferred();\r\n\r\n        // Load template and data\r\n        $.when(self.dataService.getStartForm(params)).then(function (data) {\r\n            /*** SUCCESS FILTER **/\r\n            // Apply editable param\r\n            if (params.editable === false) {\r\n                data.form.properties.editable = false;\r\n            }\r\n\r\n            // Render dialog template\r\n            var formClass = bizagi.rendering.tablet.form.extend({\r\n                submitForm: function () {\r\n                    if (self.form) {\r\n                        this.endLoading();\r\n                        // Perform validations\r\n                        if (self.form.validateForm()) {\r\n                            // Collect data\r\n                            var data = {};\r\n\r\n                            self.form.collectRenderValues(data);\r\n\r\n                            // Add page cache for this form\r\n                            data.idPageCache = self.form.getPageCache();\r\n\r\n                            // Call user callback\r\n                            if (self.slideFormParams.onSave) {\r\n                                $.when(self.slideFormParams.onSave(data))\r\n                                    .done(function (result) {\r\n                                        if (result == null || result == true || result.type == \"success\") {\r\n                                            defer.resolve();\r\n                                            self.goBack();\r\n                                        } else if (result.type == \"validationMessages\") {\r\n                                            // Add validation messages\r\n                                            self.form.addValidationMessage(result.messages);\r\n                                            // Update original value to use as reference to other futures changes in the dialogBox\r\n                                            $.each(data, function (key, value) {\r\n                                                var renders = self.form.getRenders(key);\r\n                                                $.each(renders, function (i, render) {\r\n                                                    render.updateOriginalValue();\r\n                                                });\r\n                                            });\r\n                                        } else if (result.type == \"error\") {\r\n                                            // Add error messages\r\n                                            self.form.addErrorMessage(result.message);\r\n                                        }\r\n                                    });\r\n\r\n                            } else {\r\n                                defer.resolve();\r\n                                self.goBack();\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            });\r\n\r\n            var containerParams = $.extend({\r\n                type: \"form\",\r\n                data: data.form,\r\n                navigation: self.slideFormParams.navigation,\r\n                view_container: self.slideContainer\r\n            }, {\r\n                renderFactory: self.renderFactory,\r\n                dataService: self.renderFactory.dataService\r\n            });\r\n\r\n            self.form = new formClass(containerParams);\r\n\r\n\r\n            // Attach a refresh handler to recreate all the form\r\n            self.form.bind(\"refresh\", function (_, refreshParams) {\r\n                refreshParams = $.extend({\r\n                    selectedTabs: self.form.getSelectedTabs(),\r\n                    isRefresh: true\r\n                }, params, refreshParams, {idStartScope: self.form.properties.idStartScope});\r\n\r\n                self.renderSlideForm(refreshParams);\r\n            });\r\n\r\n            self.form.buttons = [\r\n                $.extend(\r\n                    self.form.buttons[0] || {},\r\n                    {\r\n                        \"caption\": self.slideFormParams.saveButtonLabel,\r\n                        \"actions\": [\"submitData\", \"refresh\"],\r\n                        \"submitData\": true,\r\n                        \"refresh\": true,\r\n                        \"ordinal\": 0,\r\n                        \"action\": \"save\",\r\n                        \"save\": true,\r\n                        \"style\": \"\",\r\n                    })];\r\n\r\n            // Return rendering promise\r\n            return self.form.render();\r\n        }).done(function (element) {\r\n            // Append form  in the view\r\n            self.slideContainer.element.html(element);\r\n\r\n            if (!params.isRefresh) {\r\n                self.slideFormParams.navigation.navigate(self.slideContainer.id);\r\n            }\r\n\r\n            $('.ui-bizagi-button-container div', self.form.container).remove();\r\n\r\n            $('.ui-bizagi-button-container', self.form.container).append('<div ordinal=\"0\" id=\"formButton0\" class=\"action-button ui-bizagi-form-button\">' + (self.slideFormParams.saveButtonLabel ? self.slideFormParams.saveButtonLabel : bizagi.localization.getResource(\"render-form-dialog-box-save\")) + '</div>').delegate('div[ordinal=\"0\"]', 'click', function () {\r\n                self.form.submitForm();\r\n            });\r\n\r\n            $('.ui-bizagi-button-container', self.form.container).append('<div ordinal=\"1\" id=\"formButton1\" class=\"action-button ui-bizagi-form-button\">' + bizagi.localization.getResource(\"render-form-dialog-box-cancel\") + '</div>').delegate('div[ordinal=\"1\"]', 'click', function () {\r\n                self.slideFormParams.onCancel && self.slideFormParams.onCancel();\r\n                self.goBack();\r\n            });\r\n\r\n            //self.view.scroller.reset();\r\n            // Publish an event to check if the form has been set in the DOM\r\n            self.form.triggerHandler(\"ondomincluded\");\r\n        }).fail(function (xhr, errorType, message) {\r\n            /*** FAIL FILTER **/\r\n            var errorTemplate = self.renderFactory.getCommonTemplate(\"form-error\");\r\n            var error_message = message.message || \"Error\";\r\n\r\n            $.fasttmpl(errorTemplate, {message: error_message}).appendTo(self.slideContainer.element);\r\n            // Navigate on view\r\n            self.slideFormParams.navigation.navigate(self.slideContainer.id);\r\n        });\r\n\r\n        return defer.promise();\r\n    }\r\n});","/**\r\n *   Name: Bizagi tablet ECM Slide Implementation\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will shows a ECM form\r\n */\r\n$.Class.extend(\"bizagi.rendering.tablet.slide.ecm\", {}, {\r\n\r\n    /**\r\n     * Constructor\r\n     * @param dataService\r\n     * @param renderFactory\r\n     * @param slideFormParams\r\n     */\r\n    init: function (dataService, renderFactory, slideFormParams) {\r\n        var self = this;\r\n\r\n        // Define instance variables\r\n        self.dataService = dataService;\r\n        self.renderFactory = renderFactory;\r\n\r\n        self.slideFormParams = slideFormParams || {};\r\n        self.slideFormDeferred = new $.Deferred();\r\n\r\n        // Create container\r\n        self.container = self.slideFormParams.navigation.createRenderContainer({title: self.slideFormParams.title});\r\n    },\r\n\r\n    /**\r\n     * Render the form\r\n     * @param params\r\n     */\r\n    render: function (params) {\r\n\r\n        // Fill content\r\n        this.renderSlideForm(params);\r\n\r\n        // Return promise\r\n        return this.slideFormDeferred.promise();\r\n    },\r\n\r\n    renderSlideForm: function (params) {\r\n        var self = this;\r\n        var data = self.getMetadataForm(params);\r\n\r\n        // Load template and data\r\n        self.form = self.renderFactory.getContainer({\r\n            type: \"form\",\r\n            data: data.form,\r\n            navigation: self.slideFormParams.navigation,\r\n            view_container: self.container\r\n        });\r\n\r\n        // Binds the view close event\r\n       /* self.container.element.bind(\"close\", function () {\r\n            // delete self.container;\r\n            console.log(\"closed!\");\r\n        });*/\r\n\r\n        $.when(self.form.render())\r\n            .done(function ($renderEdition) {\r\n\r\n                // Append form in the slide view\r\n                self.container.element.html($renderEdition);\r\n\r\n                self.slideFormParams.navigation.navigate(self.container.id);\r\n\r\n                self.processButtons(self.form, params);\r\n                self.container.setNavigationButtons(self.form);\r\n\r\n                // Publish an event to check if the form has been set in the DOM\r\n                self.form.triggerHandler(\"ondomincluded\");\r\n\r\n                // Attach a refresh handler to recreate all the form\r\n                /*self.form.bind(\"refresh\", function () {\r\n                    // self.renderSlideForm(params);\r\n                });*/\r\n\r\n            }).always(function () {\r\n            self.slideFormDeferred.resolve();\r\n        });\r\n\r\n    },\r\n\r\n    /**\r\n     * Shows the slideForm form container in the browser\r\n     * @returns {} Returns a promise that the dialog will be closed\r\n     */\r\n    processButtons: function (form, params) {\r\n        var self = this;\r\n\r\n        form.buttons = [\r\n            {\r\n                ordinal: 0,\r\n                action: \"save\",\r\n                caption: bizagi.localization.getResource(\"render-form-dialog-box-save\"),\r\n                callback: self.onSaveDataMetadataForm.bind(self, params.fileData)\r\n            },\r\n            {\r\n                ordinal: 1,\r\n                action: \"back\",\r\n                caption: bizagi.localization.getResource(\"render-form-dialog-box-close\"),\r\n                callback: function () {\r\n                    self.slideFormParams.onCancel({});\r\n                    self.goBack();\r\n                }\r\n            }\r\n        ];\r\n\r\n        // Add save button if the form is editable\r\n        if (!self.slideFormParams.editable) {\r\n            form.buttons.shift();\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Process render data\r\n     * @param params\r\n     * @returns {{form: *, type: string}}\r\n     */\r\n    getMetadataForm: function (params) {\r\n        var self = this;\r\n        var data = {\r\n            type: \"form\",\r\n            form: {\r\n                elements: [],\r\n                pageCacheId: params.pageCacheId,\r\n                sessionId: params.sessionId,\r\n                properties: {\r\n                    id: 101,\r\n                    xpathContext: params.xpathContext,\r\n                    editable: self.slideFormParams.editable,\r\n                    orientation: self.slideFormParams.orientation || \"ltr\"\r\n                }\r\n            }\r\n        };\r\n\r\n        // Mapping metadata to render\r\n        $.each(params.metadata, function (index, item) {\r\n            var renderType = self.getRenderType(item.metadataType);\r\n\r\n            var newRender = Object.assign({\r\n                \"id\": (index + 1),\r\n                \"xpath\": item.metadataId,\r\n                \"displayName\": item.description,\r\n                \"required\": bizagi.util.parseBoolean(item.required) === true,\r\n                \"editable\": bizagi.util.parseBoolean(item.readOnly) === false,\r\n                \"value\": item.value\r\n            }, renderType);\r\n\r\n            data.form.elements.push({\"render\": {\"properties\": newRender}});\r\n        });\r\n\r\n        return data;\r\n    },\r\n\r\n    /**\r\n     * Get type of render\r\n     * @param type\r\n     * @returns {*}\r\n     */\r\n    getRenderType: function (type) {\r\n        switch (type.toUpperCase()) {\r\n            case \"INTEGER\":\r\n                return {\r\n                    type: \"number\",\r\n                    dataType: 2,\r\n                    allowDecimals: false,\r\n                    thousands: false\r\n                };\r\n            case \"DECIMAL\":\r\n                return {\r\n                    type: \"number\",\r\n                    dataType: 10,\r\n                    allowDecimals: true,\r\n                    thousands: true\r\n                };\r\n            case \"DATETIME\":\r\n                return {type: \"date\", dataType: 12};\r\n            case \"BOOL\":\r\n                return {type: \"boolean\", dataType: 5};\r\n            case \"STRING\":\r\n            default:\r\n                return {\r\n                    type: \"text\",\r\n                    dataType: 15,\r\n                    maxLength: 50,\r\n                    autoExtend: false\r\n                };\r\n\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Save data to ECM form\r\n     * @returns {jQuery}\r\n     * @param fileData\r\n     */\r\n    onSaveDataMetadataForm: function (fileData) {\r\n        var self = this;\r\n        var deferred = $.Deferred();\r\n\r\n        if (self.form.validateForm()) {\r\n            // Check if the add form has data\r\n            var formData = {};\r\n            self.form.collectRenderValuesForSubmit(formData);\r\n\r\n            // Turn off flag\r\n            $.forceCollectData = false;\r\n\r\n            if (!bizagi.util.isMapEmpty(formData)) {\r\n\r\n                var metadataValues = Object.keys(formData)\r\n                    .map(function (key, index) {\r\n                        return {\"idMetadata\": key, \"value\": formData[key]};\r\n                    });\r\n\r\n                var params = {\r\n                    \"idFileUpload\": fileData.idFileUpload,\r\n                    \"fileName\": fileData.fileName,\r\n                    \"idPageCache\": fileData.idPageCache,\r\n                    \"xpathContext\": fileData.xpathContext,\r\n                    \"xPath\": fileData.xpath,\r\n                    \"idAttrib\": fileData.idAttrib\r\n                };\r\n\r\n                params.metaValues = JSON.encode({metadataValues: metadataValues});\r\n                bizagi.loading.start();\r\n\r\n                $.when(self.dataService.updateECMMetadata(params))\r\n                    .done(function (fileProperties) {\r\n                        if (fileProperties && fileProperties.idFileUpload) {\r\n\r\n                            self.slideFormParams.onSave({\r\n                                update: true,\r\n                                idFileUpload: fileProperties.idFileUpload,\r\n                                fileName: fileData.fileName\r\n                            });\r\n\r\n                            deferred.resolve({update: true});\r\n                        }\r\n\r\n                        self.goBack();\r\n\r\n                    }).fail(function (message) {\r\n                    self.form.addValidationMessage(message.message);\r\n                    deferred.reject();\r\n                }).always(function () {\r\n                    bizagi.loading.stop();\r\n                });\r\n            } else {\r\n                self.slideFormParams.onSave({update: false});\r\n                deferred.resolve({update: false});\r\n                self.goBack();\r\n            }\r\n        }\r\n\r\n        deferred.promise();\r\n    },\r\n\r\n    /**\r\n     * Go back and destroy\r\n     */\r\n    goBack: function () {\r\n        this.container.destroy();\r\n    }\r\n});\r\n","/**\r\n *   Name: Bizagi Tablet Form Extension\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will redefine the container class to adjust to tablet devices\r\n *   -   Will apply a desktop form template\r\n */\r\n\r\n// Extends from container tablet base\r\nbizagi.rendering.tablet.container.extend(\"bizagi.rendering.tablet.form\", bizagi.rendering.form.prototype);\r\n// Auto extend\r\nbizagi.rendering.tablet.form.extend(\"bizagi.rendering.tablet.form\", {}, {\r\n\r\n    /**\r\n     * CONSTRUCTOR\r\n     *\r\n     * @param {} params\r\n     * @returns {}\r\n     */\r\n    init: function (params) {\r\n        var self = this;\r\n        params = params || {};\r\n        // Define variables\r\n        self.warnings = {};\r\n        self.errors = {};\r\n\r\n        // Call base\r\n        this._super(params);\r\n    },\r\n\r\n    /*\r\n    *   Template method to implement in each device to customize the container's behaviour to add handlers\r\n    */\r\n    configureHandlers: function () {\r\n        var self = this;\r\n        var form = self.container;\r\n\r\n        // Process complex-gateway\r\n        self.configureComplexGateway();\r\n\r\n        // Process buttons\r\n        self.processButtons(form);\r\n\r\n        // Check for dom included event\r\n        self.bind(\"ondomincluded\", function () {\r\n            // Creates validation controller after the form is ready\r\n            self.validationController = new bizagi.command.controllers.validation(self, self.validations);\r\n            // Creates action controller after the form is ready\r\n            self.actionController = new bizagi.command.controllers.action(self, self.actions);\r\n\r\n            // Resolve this deferred to start executing DOM dependant plugins\r\n            self.readyDeferred.resolve();\r\n        });\r\n\r\n\r\n        //Event to notify the native code the form will be showing a modal view \r\n        self.bind(\"modalViewDidAppear\", function () {\r\n            self.params.navigation.modalViewDidAppear();\r\n        });\r\n\r\n        self.bind(\"closeModalValidationMessage\", function () {\r\n            self.validationController.clearValidationMessages();\r\n        });\r\n\r\n        //Event to notify the native code the form will be hiding a modal view \r\n        self.bind(\"modalViewDidDisappear\", function () {\r\n            self.params.navigation.modalViewDidDisappear();\r\n        });\r\n\r\n        // Add network listener\r\n        self.configureNetworkHandlers();\r\n        \r\n    },\r\n\r\n    /**\r\n     * Template method to implement in each device to customize each container after processed\r\n     *\r\n     * @param {} container\r\n     * @returns {}\r\n     */\r\n    postRenderContainer: function (container) {\r\n        var self = this;\r\n        var properties = self.properties;\r\n        self._super(container);\r\n        var buttons = self.getButtons();\r\n\r\n        //disable overflow-scrolling touch untill the form is loaded QA-2178\r\n        if (bizagi.util.isiOSTabletDevice()) {\r\n            $(\".km-native-scroller\").css(\"-webkit-overflow-scrolling\", \"inherit\");\r\n        }\r\n\r\n        // Show warnings\r\n        if (!bizagi.util.isObjectEmpty(self.warnings)) {\r\n            var warningContainer = $('<ul class=\"ui-bizagi-form-warnings\"></ul>');\r\n            for (var key in self.warnings) {\r\n                warningContainer.append($('<li>' + key + '</li>'));\r\n            }\r\n\r\n            // Add button\r\n            $(\"<button>\" + \"X\" + \"</button>\").appendTo(warningContainer);\r\n\r\n            // Append to body \r\n            warningContainer.prependTo(self.container);\r\n            warningContainer.click(function () {\r\n                warningContainer.detach();\r\n            });\r\n        }\r\n\r\n        // Show errors\r\n        if (!bizagi.util.isObjectEmpty(self.errors)) {\r\n            var errorContainer = $('<ul class=\"ui-bizagi-form-errors\"></ul>');\r\n            for (var ekey in self.errors) {\r\n                errorContainer.append($('<li>' + ekey + '</li>'));\r\n            }\r\n\r\n            // Add button\r\n            $(\"<button>\" + \"X\" + \"</button>\").prependTo(errorContainer);\r\n\r\n            // Append to body \r\n            errorContainer.appendTo(self.container);\r\n            errorContainer.click(function () {\r\n                errorContainer.detach();\r\n            });\r\n\r\n            // Hide routing buttons when an error was found\r\n            $.each(properties.buttons, function (i, button) {\r\n                if (button.routing) {\r\n                    self.getButtons().eq(i).prop(\"disabled\", true);\r\n                }\r\n            });\r\n        }\r\n\r\n        //Set button length\r\n        var lengthButtons = (buttons) ? buttons.length : 0;\r\n\r\n        if (lengthButtons) {\r\n\r\n            $(document).data(\"auto-save\", \"auto-save\");\r\n\r\n            //bind event auto-save\r\n            $(document).unbind(\"save-form\").bind(\"save-form\", function (e, deferredSave) {\r\n                if (self.allowOnlineActions()) {\r\n                    self.autoSaveEvents(deferredSave);\r\n                } else {\r\n                    deferredSave.resolve();\r\n                }\r\n            });\r\n\r\n            //bind event beforeunload\r\n            $(window).unbind('beforeunload').bind('beforeunload', function (e) {\r\n                var newData = {};\r\n                self.collectRenderValues(newData);\r\n\r\n                //if there are changes in the form show a message\r\n                if (!$.isEmptyObject(newData) && $(document).data('auto-save'))\r\n                    return bizagi.localization.getResource(\"confirmation-savebox-message2\");\r\n\r\n                return;\r\n            });\r\n\r\n        }\r\n\r\n        //enable overflow-scrolling touch to avoid black frame over the form QA-2178\r\n        if (bizagi.util.isiOSTabletDevice()) {\r\n            setTimeout(function () {\r\n                $(\".km-native-scroller\").css(\"-webkit-overflow-scrolling\", \"touch\");\r\n            }, 1000);\r\n        }\r\n\r\n    },\r\n    /**\r\n     * Auto Save Events\r\n     *\r\n     * @param {} deferredSave\r\n     * @param {} saveBox\r\n     * @returns {}\r\n     */\r\n    autoSaveEvents: function (deferredSave, saveBox) {\r\n        var self = this;\r\n        var data = {};\r\n\r\n        self.collectRenderValues(data);\r\n\r\n        if (!$.isEmptyObject(data)) {\r\n\r\n            $.when(bizagi.showSaveBox(bizagi.localization.getResource(\"confirmation-savebox-message1\"), \"Bizagi\", \"warning\"))\r\n            .done(function () {\r\n                $.when(self.saveForm())\r\n                .always( function() {\r\n                    deferredSave.resolve();\r\n                });\r\n            }).fail(function () {\r\n                deferredSave.resolve();\r\n            });\r\n\r\n        } else {\r\n            deferredSave.resolve();\r\n        }\r\n    },\r\n\r\n    internalSubmitForm: function (buttonProperties) {\r\n        var self = this;\r\n        // Assemble the actions\r\n        var actions = [];\r\n        var defer = $.Deferred();\r\n        var submitDataAction = null, executeButtonAction = null, performAction = null, checkpointAction = null,\r\n            commitAction = null;\r\n        var data;\r\n\r\n        // Fill data hash\r\n        if (buttonProperties.submitData || buttonProperties.executeRule || buttonProperties.createnewcase) {\r\n            // Collect data\r\n            data = self.collectRenderValuesForSubmit();\r\n        }\r\n\r\n        // Start asynchronous operation\r\n        $.when(self.startLoading()).done(function () {\r\n            $('html, body').animate({scrollTop: $('.ui-bizagi-loading-icon')}, 'slow');\r\n        });\r\n\r\n        // Prepare actions\r\n        if (buttonProperties.executeRule) {  // When the button has to execute any rule (MUST SUBMIT DATA BEFORE ALWAYS)\r\n\r\n            submitDataAction = self.dataService.submitData({\r\n                action: \"SUBMITDATA\",\r\n                data: data,\r\n                xpathContext: self.properties.xpathContext,\r\n                idPageCache: self.properties.idPageCache,\r\n                prepare: true\r\n            });\r\n            submitDataAction.tag = \"submitData\";\r\n\r\n            checkpointAction = self.prepareCheckpointAction(buttonProperties.id);\r\n\r\n            // Reset data because when an execute rule operation has been performed, it saved already all the data\r\n            data = {};\r\n            executeButtonAction = self.dataService.executeButton({\r\n                idRender: buttonProperties.id,\r\n                xpathContext: self.properties.xpathContext || \"\",\r\n                idPageCache: self.properties.idPageCache,\r\n                prepare: true\r\n            });\r\n            executeButtonAction.tag = \"executeRule\";\r\n\r\n            commitAction = self.prepareCommitAction(buttonProperties.id);\r\n        }\r\n\r\n        if (buttonProperties.next || buttonProperties.back || buttonProperties.save || buttonProperties.createnewcase || buttonProperties.nextWithoutValidations) {\r\n            // Verify transitions\r\n            if (self.transitions) {\r\n                var transitions = [];\r\n                $.each(this.activeTransitions, function (key, value) {\r\n                    (value) ? transitions.push(key) : \"\";\r\n                });\r\n\r\n                if (bizagi.util.countProps(transitions) == 0) {\r\n                    bizagi.showMessageBox(bizagi.localization.getResource(\"render-widget-complexgateway-path\"), bizagi\r\n                        .localization.getResource(\"render-widget-complexgateway-error\"), \"info\", false);\r\n                    self.endLoading();\r\n                    defer.reject();\r\n                    return defer.promise();\r\n                }\r\n            }\r\n\r\n            performAction = self.dataService.submitData({\r\n                action: buttonProperties.action,\r\n                forcePlanCompletion: buttonProperties.forcePlanCompletion,\r\n                data: data,\r\n                xpathContext: self.properties.xpathContext,\r\n                idPageCache: self.properties.idPageCache,\r\n                prepare: true,\r\n                transitions: transitions || \"\",\r\n                contexttype: self.properties.contextType,\r\n                surrogatekey: self.properties.surrogateKey\r\n            });\r\n\r\n            performAction.tag = \"performAction\";\r\n        }\r\n\r\n        if (executeButtonAction) {\r\n            actions.push(submitDataAction);\r\n\r\n            //Validates if the method CHECKPOINT is supported\r\n            if (checkpointAction) {\r\n                actions.push(checkpointAction);\r\n            }\r\n\r\n            actions.push(executeButtonAction);\r\n\r\n            ///Validates if the method COMMIT is supported\r\n            if (commitAction) {\r\n                actions.push(commitAction);\r\n            }\r\n\r\n            actions.push(executeButtonAction);\r\n        }\r\n\r\n        if (performAction) {\r\n            actions.push(performAction);\r\n        }\r\n\r\n        // Execute the batch\r\n        bizagi.chrono.initAndStart(\"submitForm-ajax\");\r\n\r\n        //Evaluate if there are deferreds to evaluate, like inline add in grid, that must send a ADDRELATIONWITHDATA before to savedata\r\n        var flowControlDeferred = new $.Deferred();\r\n        if (data && data.deferreds) {\r\n            $.when.apply(this, data.deferreds)\r\n                .done(function (response) {\r\n                    flowControlDeferred.resolve(response);\r\n                })\r\n                .fail(function () {\r\n                    flowControlDeferred.reject();\r\n                    console.log(\"Error: It was not possible resolve async actions on form \")\r\n                });\r\n        } else {\r\n            flowControlDeferred.resolve();\r\n        }\r\n\r\n        $.when(flowControlDeferred).done(function () {\r\n            bizagi.util.tablet.startLoading();\r\n            $.when(self.dataService.multiaction().execute({actions: actions})).done(function (responses) {\r\n                bizagi.chrono.stop(\"submitForm-ajax\");\r\n                // Find validations\r\n                var bHasValidations;\r\n                $.each(responses, function (i, response) {\r\n                    if (response.result.type == \"validationMessages\") {\r\n                        // Something went wrong, we gotta display messages in notifications grid\r\n                        self.addValidationMessage(response.result.messages);\r\n                        bHasValidations = true;\r\n                    }\r\n                });\r\n\r\n                if (!bHasValidations) {\r\n                    // Everything went ok .. succesfully response from the server\r\n                    if (!self.postProcessButton(responses, buttonProperties)) {\r\n                        return;\r\n                    }\r\n\r\n                    // After successfully response refresh the form\r\n                    if (buttonProperties.refresh) {\r\n                        self.refreshForm();\r\n                    }\r\n\r\n                    // If needs routing publish an event\r\n                    if (buttonProperties.routing) {\r\n                        self.triggerHandler(\"routing\", {\r\n                            idCase: self.params.idCase\r\n                        });\r\n                    }\r\n\r\n                    // Create case\r\n                    if (buttonProperties.createnewcase) {\r\n                        if (responses.length > 0) {\r\n                            self.triggerHandler(\"routing\", {\r\n                                idCase: responses[0].result.IdCase,\r\n                                caseNumber: responses[0].result.CaseNumber\r\n                            });\r\n                        }\r\n                    }\r\n                } else {\r\n                    if (buttonProperties.executeRule) {\r\n                        self.sendRollbackAction(buttonProperties.id);\r\n                    }\r\n                }\r\n\r\n                //Removes the nonSupportedMethods to prevent further iterations\r\n                delete self.nonSupportedMethods;\r\n\r\n                defer.resolve();\r\n            }).fail(function (_, _, response) {\r\n                if (buttonProperties.executeRule) {\r\n                    self.sendRollbackAction(buttonProperties.id);\r\n                }\r\n\r\n                if (response && response.error && (response.error.errorType === \"WaitForCompletionPlanException\" ||\r\n                    response.error.errorType === \"InvalidPlanStateException\" || response.error.errorType === \"CustomMessageException\")) {\r\n                    self.endLoading();\r\n                    $.when(bizagi.showConfirmationBox(bizagi.localization.getResource(response.error.message), null, false)).then(function () {\r\n                        return $.when(self.internalSubmitForm($.extend({}, buttonProperties, {forcePlanCompletion: true})));\r\n                    }).done(function () {\r\n                        defer.resolve();\r\n                    }).fail(function () {\r\n                        defer.reject();\r\n                    });\r\n                } else {\r\n                    self.failHandler({\"error\": typeof (response) === \"undefined\" ? bizagi.localization.getResource(\"workportal-general-error\") : response});\r\n                    defer.reject(response);\r\n                }\r\n            }).always(function () {\r\n                bizagi.util.tablet.stopLoading();\r\n            });\r\n        }).always(function () {\r\n            bizagi.util.tablet.stopLoading();\r\n        });\r\n        return defer.promise();\r\n    },\r\n\r\n    prepareCheckpointAction: function (id) {\r\n        return bizagi.util.validateFeatureSupport(\"commitRollbackActions\") ? this._super(id) : null;\r\n    },\r\n\r\n    prepareCommitAction: function (id) {\r\n        return bizagi.util.validateFeatureSupport(\"commitRollbackActions\") ? this._super(id) : null;\r\n    },\r\n\r\n    /**\r\n     * Retorna el pane donde se pint la forma para facilitar navegacion de kendo\r\n     * @returns {*}\r\n     */\r\n    getPane: function () {\r\n        var self = this;\r\n        return self.pane;\r\n    },\r\n\r\n    /* TEMPLATE METHOD TO GET THE BUTTONS OBJECTS\r\n     ======================================================*/\r\n    getButtons: function () {\r\n        var self = this;\r\n\r\n        if (self.getParams() && (handler = self.getParams().getButtons))\r\n            handler(self);\r\n\r\n        return $(\".ui-bizagi-button-container :button\", self.container);\r\n    },\r\n\r\n    processButtons: function () {\r\n        var self = this;\r\n        var params = self.getParams();\r\n\r\n        //si no es con un if es con un publish\r\n        if (params && params.processButtons) {\r\n            var handler = params.processButtons;\r\n            handler(self);\r\n        }\r\n\r\n        var properties = self.properties;\r\n        var buttons = self.getButtons();\r\n\r\n        properties.buttons = self.buttons || buttons;\r\n\r\n        //to cache a submit Data Buttom if exist\r\n        self.saveButton = null;\r\n        self.nextButton = null;\r\n\r\n        //Set saveButton and nextButton if exist\r\n        for (var i = 0, length = properties.buttons.length; i < length; i++) {\r\n            if (properties.buttons[i].action == 'save') {\r\n                self.saveButton = properties.buttons[i];\r\n            } else if (properties.buttons[i].action == 'next') {\r\n                self.nextButton = properties.buttons[i];\r\n            }\r\n        }\r\n\r\n        var navigation = self.getNavigation();\r\n\r\n        if (typeof (navigation) !== \"undefined\") {\r\n            //si tiene un viewConteiner sera proque es una forma dentro de container de edicion\r\n            var view_container = self.getViewContainer();\r\n            if (typeof view_container !== \"undefined\") {\r\n                view_container.setNavigationButtons(self);\r\n            } else {\r\n                navigation.setNavigationButtons(self);\r\n            }\r\n        }\r\n\r\n        self._super();\r\n    },\r\n\r\n    /*\r\n     *   Refresh the current form\r\n     */\r\n    refreshForm: function (focus) {\r\n        var self = this;\r\n        var properties = self.properties;\r\n        var params = self.getParams();\r\n        var deferred = $.Deferred();\r\n        var options;\r\n\r\n        focus = focus || self.getFocus();\r\n\r\n        // Normalize new focus structure if not present\r\n        if (focus && !focus.id) {\r\n            focus = {\r\n                id: focus\r\n            };\r\n        }\r\n\r\n        options = {\r\n            idCase: self.params.idCase || \"\",\r\n            idWorkitem: self.params.idWorkitem || \"\",\r\n            idTask: self.params.idTask || \"\",\r\n            focus: focus,\r\n            selectedTabs: self.getSelectedTabs(),\r\n            xpathContext: properties.xpathContext,\r\n            idPageCache: properties.idPageCache,\r\n            isRefresh: true,\r\n            action: self.getEndPointAction(),\r\n            idStartScope: self.properties.idStartScope || \"\",\r\n            navigation: params.navigation,\r\n            view_container: params.view_container\r\n        };\r\n\r\n        if (params.postRenderEdit || params.processButtons) {\r\n            options.isOfflineForm = self.params.isOfflineForm || false;\r\n            options.formsRenderVersion = self.params.formsRenderVersion || 0;\r\n            options.postRenderEdit = params.postRenderEdit;\r\n            options.processButtons = params.processButtons;\r\n            options.originalParams = params.originalParams || {};\r\n            options.getButtons = params.getButtons;\r\n        }\r\n\r\n        $(\".km-native-scroller\").css(\"-webkit-overflow-scrolling\", \"inherit\");\r\n\r\n        // Notify the refresh event so the consumer takes the decision about what to do\r\n        self.startLoading();\r\n        $.when(self.triggerHandler(\"refresh\", options)).done(function () {\r\n            self.endLoading();\r\n\r\n            setTimeout(function () {\r\n                $(\".km-native-scroller\").css(\"-webkit-overflow-scrolling\", \"touch\");\r\n            }, 1000);\r\n\r\n            deferred.resolve();\r\n        }).fail(function () {\r\n            self.endLoading();\r\n            deferred.reject();\r\n        });\r\n        return deferred.promise();\r\n    },\r\n\r\n    checkWidgetsData: function () {\r\n        var popupResponse = null;\r\n        if (bizagi.workportal.tablet.popup) {\r\n            if (bizagi.workportal.tablet.popup.instance) {\r\n                if (bizagi.workportal.tablet.popup.instance.getResponseValues) {\r\n                    popupResponse = bizagi.workportal.tablet.popup.instance.getResponseValues(bizagi.workportal.tablet.popup.instance.getResponseValuesParams);\r\n                    if (popupResponse === null) {\r\n                        bizagi.showMessageBox(bizagi.localization.getResource(\"workportal-widget-complexgateway-path\"),\r\n                            bizagi.localization.getResource(\"workportal-widget-complexgateway-error\"));\r\n                        return -1;\r\n                    } else {\r\n                        bizagi.workportal.tablet.popup.instance.dontClose = false;\r\n                        bizagi.workportal.tablet.popup.instance.close();\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        return popupResponse;\r\n    },\r\n\r\n    repaintComplexGateway: function () {\r\n        var self = this;\r\n        if (self.focus !== undefined) {\r\n            if (self.focus.idCaseObject !== undefined) {\r\n                if (self.focus.idCaseObject.isComplex !== undefined) {\r\n                    self.dataService.getWorkitems({\r\n                        idCase: self.focus.idCaseObject.idCase\r\n                    }).done(function (data) {\r\n                        if (data.workItems.length == 1) {\r\n                            if (data.workItems[0].taskType == \"ComplexGateway\") {\r\n                                var transitions = data.workItems[0].transitions;\r\n\r\n                                self.currentPopup = \"complexgateway\";\r\n                                $(document).triggerHandler(\"popupWidget\", {\r\n                                    widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_COMPLEXGATEWAY,\r\n                                    options: {\r\n                                        transitions: transitions,\r\n                                        sourceElement: \".ui-bizagi-form\",\r\n                                        insertAfter: \".ui-bizagi-form .ui-bizagi-button-container\",\r\n                                        height: 'auto',\r\n                                        offset: \"8 0\", //x y\r\n                                        activeScroll: false,\r\n                                        dontClose: true,\r\n                                        closed: function () {\r\n                                            self.currentPopup = null;\r\n                                        }\r\n                                    }\r\n                                });\r\n                            }\r\n                        }\r\n                    });\r\n                }\r\n            }\r\n        }\r\n    },\r\n\r\n    /* METHOD TO ADD WARNINGS TO THE FORM\r\n    ======================================================*/\r\n    addWarning: function (message) {\r\n        var self = this;\r\n        self.warnings[message] = message;\r\n    },\r\n\r\n    /* METHOD TO ADD ERRORS TO THE FORM\r\n    ======================================================*/\r\n    addError: function (message) {\r\n        var self = this;\r\n        self.errors[message] = message;\r\n    },\r\n\r\n    /*  Executes a single button action\r\n    ======================================================= */\r\n    processButton: function (buttonProperties) {\r\n        var self = this;\r\n        var deferred = $.Deferred();\r\n\r\n        // Disable routing button\r\n        if (!bizagi.util.isObjectEmpty(self.errors)) {\r\n            deferred.resolve();\r\n            if (bizagi.util.parseBoolean(buttonProperties.routing))\r\n                return deferred.promise();\r\n        }\r\n\r\n        // Call base\r\n        return this._super(buttonProperties);\r\n    },\r\n\r\n\r\n    getNavigation: function () {\r\n        var params = this.getFormContainer().getParams();\r\n        return params.navigation;\r\n    },\r\n\r\n    getViewContainer: function () {\r\n        var params = this.getFormContainer().getParams();\r\n        return params.view_container;\r\n    },\r\n\r\n    isFloatingButtonsEnabled: function () {\r\n        var navigation = this.getNavigation();\r\n        return navigation && navigation.isFloatingButtonsEnabled();\r\n    },\r\n\r\n    isFormButtonsEnabled: function () {\r\n        var navigation = this.getNavigation();\r\n        return navigation && navigation.isFormButtonsEnabled();\r\n    },\r\n\r\n    /**\r\n     *   Adds an overlay to the form, and sets a waiting message\r\n     *\r\n     *   @argument {bool} delay Apply delay\r\n     */\r\n    startLoading: function () {\r\n        bizagi.loading.start();\r\n    },\r\n\r\n    /*\r\n    *   Removes the overlay and restores the form edition\r\n    */\r\n    endLoading: function () {\r\n        bizagi.loading.stop();\r\n    },\r\n\r\n    dispose: function (params) {\r\n        var self = this;\r\n\r\n        // Active refresh on tablet\r\n        if (typeof (params) === \"undefined\" || (typeof (params.isRefresh) === \"undefined\" || params.isRefresh == false)) {\r\n            self._super();\r\n        }\r\n    },\r\n\r\n    failHandler: function (error) {\r\n        var self = this;\r\n        self._super(error);\r\n\r\n        var error_obj = {};\r\n        try {\r\n            error_obj = JSON.parse(error) || {};\r\n        } catch (e) {\r\n            error_obj = (error.length && error.length > 1) ? error[0] : error;\r\n        } finally {\r\n\r\n            //This double validation has the purpose to get the real error object from two different levels ( error.error or error.error.error )\r\n            if (error_obj.error) error_obj = error_obj.error;\r\n            if (error_obj.error) error_obj = error_obj.error;\r\n\r\n            //trigger the routing event in order to refresh the case\r\n            if (typeof error_obj.code !== \"undefined\" && error_obj.code === \"AUTH_ERROR\") {\r\n\r\n                $.notifier.add({\r\n                    title: bizagi.localization.getResource(\"workportal-sessiontimeout-expired-title\", \"Your session has expired\"),\r\n                    text: bizagi.localization.getResource(\"render-idle-expired-error\", \"Idle timer expired. For safety reasons this view will be refreshed automatically in 5 seconds. Note that any unsaved data is lost.\").replace(\"%s\", \"5\"),\r\n                    sticky: false,\r\n                    time: 5000\r\n                });\r\n\r\n                setTimeout(function () {\r\n                    self.triggerHandler(\"routing\", {\r\n                        idCase: self.params.idCase,\r\n                        idWorkitem: self.params.idWorkitem\r\n                    });\r\n                }, 5000);\r\n            }\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Build the container html\r\n     * @returns {*|jQuery}\r\n     */\r\n    renderContainer: function () {\r\n        var self = this;\r\n        var properties = this.properties;\r\n        var template = self.renderFactory.getTemplate(\"form\");\r\n        var idCase = \"\";\r\n\r\n        // Render the form\r\n        var html = $.fasttmpl(template, {\r\n            buttons: self.buttons,\r\n            transitions: self.transitions,\r\n            uniqueId: properties.uniqueId,\r\n            helptext: properties.helpText,\r\n            mode: self.getMode(),\r\n            queryForm: self.getFormType() == \"queryForm\",\r\n            summaryForm: self.params.summaryForm || false,\r\n            globalForm: self.properties.displayAsReadOnly || false,\r\n            idCase: idCase,\r\n            displayName: self.params.displayName || idCase,\r\n            processPath: properties.processPath,\r\n            breadCrumb: properties.breadCrumb,\r\n            orientation: properties.orientation\r\n        });\r\n\r\n        // Render children\r\n        html = self.replaceChildrenHtml(html, self.renderChildrenHtml());\r\n        return html;\r\n    },\r\n\r\n    /**\r\n     * Publish a global event that the facade will replicate, also will be triggered in the form\r\n     */\r\n    triggerGlobalHandler: function (eventType, data) {\r\n        var self = this;\r\n\r\n        if (!self.parent) {\r\n            if (self.observableElement) {\r\n                self.observableElement.trigger(eventType, data);\r\n            }\r\n        } else {\r\n            self.parent.triggerGlobalHandler(eventType, data);\r\n        }\r\n\r\n        return self._super(eventType, data);\r\n    },\r\n\r\n    /**\r\n     * Configure actions to complex-gateway\r\n     */\r\n    configureComplexGateway: function () {\r\n        var self = this;\r\n        var complexGatewayContainer;\r\n        var form = self.container;\r\n\r\n        if (form.length > 1) {\r\n            $(form.children()).each(function () {\r\n                if ($(this).hasClass('.bz-complex-gateway'))\r\n                    complexGatewayContainer = this;\r\n            });\r\n        } else {\r\n            complexGatewayContainer = $(\".bz-complex-gateway\", form);\r\n        }\r\n\r\n        // activeTransitions is used to store ids of activities in Complex Gateway\r\n        self.activeTransitions = {};\r\n\r\n        // Set events for complex gateway interface\r\n        $(\".bz-checkbox__input\", complexGatewayContainer).on(\"click\", function () {\r\n            var $selected = $(this);\r\n            var transitionId = $selected.data(\"value\") || \"\";\r\n\r\n            if (typeof self.activeTransitions[transitionId] == \"undefined\") {\r\n                self.activeTransitions[transitionId] = false;\r\n            }\r\n\r\n            self.activeTransitions[transitionId] = $selected.is(':checked') || false;\r\n\r\n        });\r\n    }\r\n\r\n});","/**\r\n *   Name: Bizagi tablet Panel Extension\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will redefine the container class to adjust to tablet devices\r\n */\r\n\r\n// Extends from container tablet base\r\nbizagi.rendering.tablet.container.extend(\"bizagi.rendering.tablet.panel\", bizagi.rendering.panel.prototype);\r\n// Extends itself\r\nbizagi.rendering.tablet.panel.extend(\"bizagi.rendering.tablet.panel\", {}, {});\r\n","/**\r\n *   Name: Bizagi Tablet ContentPanel Extension\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will redefine the content panel class to adjust to tablet devices\r\n */\r\n\r\n// Extends from container tablet base\r\nbizagi.rendering.tablet.container.extend(\"bizagi.rendering.tablet.contentPanel\", bizagi.rendering.contentPanel.prototype);\r\n// Extends itself\r\nbizagi.rendering.tablet.contentPanel.extend(\"bizagi.rendering.tablet.contentPanel\", {}, {});\r\n","/*\r\n*   Name: Bizagi tablet Nested Form Extension\r\n*   Author: UI Forms Team\r\n*   Comments:\r\n*   -   This script will define a nested form container class for tablet devices\r\n*/\r\n\r\n// Extends from panel tablet base\r\nbizagi.rendering.tablet.panel.extend(\"bizagi.rendering.tablet.nestedForm\", {}, {\r\n\r\n});","/**\r\n *   Name: Bizagi Tablet Tab Container Extension\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will redefine the container class to adjust to tablet devices\r\n */\r\n\r\n// Extends from container tablet base\r\nbizagi.rendering.tablet.container.extend(\"bizagi.rendering.tablet.tab\", bizagi.rendering.tab.prototype);\r\n// Auto extend\r\nbizagi.rendering.tablet.tab.extend(\"bizagi.rendering.tablet.tab\", {}, {\r\n\r\n    /* POST RENDER CONTAINER ACTIONS\r\n    =================================================*/\r\n    postRenderContainer: function (container) {\r\n        var self = this;\r\n\r\n        this._super(container);\r\n\r\n        container.material_bizagi_tabs({\r\n            direction: this.properties.orientation,\r\n            active_index_tab: this.activeTab\r\n        }).on(\"updateActive\", function (ev, info) {\r\n            ev.stopPropagation();\r\n\r\n            self.setActiveTab(info.index);\r\n\r\n        });\r\n\r\n        $(\"> .bz-tabs > .bz-tab\", container).rippleEffect();\r\n    }\r\n});\r\n","/**\r\n *   Name: Bizagi Tablet Panel Extension\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will redefine the container class to adjust to tablet devices\r\n */\r\n\r\n// Extends from container tablet base\r\nbizagi.rendering.tablet.container.extend(\"bizagi.rendering.tablet.tabItem\", bizagi.rendering.tabItem.prototype);\r\n// Extends itself\r\nbizagi.rendering.tablet.tabItem.extend(\"bizagi.rendering.tablet.tabItem\", {}, {\r\n    /**\r\n     * Change selected item\r\n     *\r\n     * @param {} argument\r\n     * @returns {}\r\n     */\r\n    setAsActiveContainer: function (argument) {\r\n        var self = this;\r\n\r\n        $.when(self.ready()).done(function () {\r\n            var tabItem = $(\"[data-reference='#ui-bizagi-tab-\" + self.properties.id + \"']\", self.parent.tabs);\r\n\r\n            tabItem.css(\"display\", \"\");\r\n            tabItem.click();\r\n        });\r\n    },\r\n    /* \r\n    *   Focus on container\r\n    */\r\n    focus: function () {\r\n        // Activate the tab if it hasn't been loaded\r\n        this.activate();\r\n\r\n        // Set this tab as an active container\r\n        this.setAsActiveContainer();\r\n\r\n        // Call base\r\n        this._super();\r\n    },\r\n\r\n    /**\r\n     *  Hides / Show container\r\n     *\r\n     * @param {} argument\r\n     * @returns {}\r\n     */\r\n    changeVisibility: function (argument) {\r\n        var self = this;\r\n\r\n        // Store in properties\r\n        self.properties.visible = bizagi.util.parseBoolean(argument);\r\n\r\n        $.when(self.ready()).done(function () {\r\n            var tabItem = $(\"[data-reference='#ui-bizagi-tab-\" + self.properties.id + \"']\", self.parent.tabs);\r\n            var activeTab = self.parent.container.material_bizagi_tabs(\"getActiveTab\");\r\n\r\n            // Hide - show the render\r\n            if (self.properties.visible) {\r\n                self.container.css(\"display\", \"\");\r\n                tabItem.css(\"display\", \"\");\r\n\r\n\r\n                if (self.properties.counter === activeTab.index) {\r\n                    tabItem.css(\"display\", \"\");\r\n                    self.setAsActiveContainer();\r\n                } else {\r\n                    self.container.css(\"display\", \"none\");\r\n                }\r\n            } else {\r\n                self.container.css(\"display\", \"none\");\r\n                tabItem.css(\"display\", \"none\");\r\n\r\n                // If we are focus in the same tab is going to be invisible\r\n                activeTab = self.parent.container.material_bizagi_tabs(\"getActiveTab\");\r\n\r\n                if (self.properties.counter === activeTab.index) {\r\n                    self.parent.container.material_bizagi_tabs(\"moveToNextTab\");\r\n                } else {\r\n                    self.parent.container.material_bizagi_tabs(\"refreshPositions\");\r\n                }\r\n            }\r\n        });\r\n    }\r\n});\r\n","/*\r\n*   Name: BizAgi tablet Horizontal Container Extension\r\n*   Author: UI Forms Team\r\n*   Comments:\r\n*   -   This script will redefine the horizontal container class to adjust to tablet devices\r\n*/\r\n\r\n// Extends from container tablet base\r\nbizagi.rendering.tablet.container.extend(\"bizagi.rendering.tablet.horizontal\", bizagi.rendering.horizontal.prototype);\r\n// Auto extend\r\nbizagi.rendering.tablet.horizontal.extend(\"bizagi.rendering.tablet.horizontal\", {}, {\r\n\r\n});\r\n","/*\r\n*   Name: Bizagi tablet Layout Extension\r\n*   Author: UI Forms Team\r\n*   Comments:\r\n*   -   This script will redefine the layout class to adjust to tablet devices\r\n*/\r\n\r\n// Extends from container desktop base\r\nbizagi.rendering.tablet.container.extend(\"bizagi.rendering.tablet.layout\", bizagi.rendering.layout.prototype);\r\n// Extends itself\r\nbizagi.rendering.tablet.layout.extend(\"bizagi.rendering.tablet.layout\", {}, {\r\n\r\n});\r\n","/*\r\n*   Name: Bizagi Tablet Accordion Container Extension\r\n*   Author: UI Forms Team\r\n*   Comments:\r\n*   -   This script will redefine the container class to adjust to tablet devices\r\n*/\r\n\r\n// Extends from container tablet base\r\nbizagi.rendering.tablet.container.extend(\"bizagi.rendering.tablet.accordion\", bizagi.rendering.accordion.prototype);\r\n// Extends itself\r\nbizagi.rendering.tablet.accordion.extend(\"bizagi.rendering.tablet.accordion\", {}, {\r\n\r\n})","/*\r\n*   Name: BizAgi Tablet Panel Extension\r\n*   Author: UI Forms Team\r\n*   Comments:\r\n*   -   This script will redefine the container class to adjust to tablet devices\r\n*/\r\n\r\n// Extends from container tablet base\r\nbizagi.rendering.tablet.container.extend(\"bizagi.rendering.tablet.accordionItem\", bizagi.rendering.accordionItem.prototype);\r\n// Extends itself\r\nbizagi.rendering.tablet.accordionItem.extend(\"bizagi.rendering.tablet.accordionItem\", {}, {\r\n\r\n\r\n    /* \r\n    *   Change selected item \r\n    */\r\n    setAsActiveContainer: function (argument) {\r\n        \r\n    },\r\n\r\n    /* \r\n    *   Focus on container\r\n    */\r\n    focus: function () {        \r\n        this.setAsActiveContainer();\r\n\r\n        // Call base\r\n        this._super();\r\n    }        \r\n});\r\n","/*\r\n *   Name: Bizagi Tablet Group Extension\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will redefine the group class to adjust to tablet devices\r\n */\r\n\r\n// Extends from container tablet base\r\nbizagi.rendering.tablet.container.extend(\"bizagi.rendering.tablet.group\", bizagi.rendering.group.prototype);\r\n// Auto extend\r\nbizagi.rendering.tablet.group.extend(\"bizagi.rendering.tablet.group\", {}, {\r\n\r\n    /**\r\n    * Method to customize the container's behaviour to add handlers\r\n    */\r\n    configureHandlers: function () {\r\n        var self = this;\r\n        $(\">h5.bz-collapsible__header\", self.container).bind(\"click\", function () {\r\n            $(self.container).toggleClass(\"bz-collapsible--collapsed\");\r\n        });\r\n    },\r\n\r\n    /**\r\n     * Template method to implement in each device to customize each container after processeds\r\n     * @param {} group      \r\n     */\r\n    postRenderContainer: function (group) {\r\n        // Call base\r\n        this._super(group);\r\n        if (this.properties.collapse) {\r\n            this.collapse();\r\n        }\r\n    },\r\n\r\n    /**\r\n    * Check if group its open\r\n    * \r\n    * @return boolean\r\n    */\r\n    isOpen: function () {\r\n        return this.container.hasClass(\"bz-collapsible--collapsed\") ? false : true;\r\n    },\r\n\r\n    /**\r\n     * Focus on container     \r\n     */\r\n    focus: function () {\r\n        // Expand container\r\n        this.expand();\r\n\r\n        // Call base\r\n        this._super();\r\n    },\r\n\r\n    /**\r\n     * Expands group container \r\n     * @returns {} \r\n     */\r\n    expand: function () {\r\n        if (!this.isOpen()) {\r\n            $(\">h5.bz-collapsible__header\", this.container).trigger(\"click\");\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Collapses group container \r\n     * @returns {} \r\n     */\r\n    collapse: function () {\r\n        if (this.isOpen()) {\r\n            $(\">h5.bz-collapsible__header\", this.container).trigger(\"click\");\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Expands or collapse the container from actions\r\n     * @param {} argument      \r\n     */\r\n    toogleContainer: function (argument) {\r\n        if (argument) {\r\n            this.expand();\r\n        } else {\r\n            this.collapse();\r\n        }\r\n    }\r\n\r\n});\r\n","/**\r\n *   Name: Bizagi tablet Search Form Extension\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will redefine the container class to adjust to tablet devices\r\n */\r\n\r\nbizagi.rendering.tablet.form.extend(\"bizagi.rendering.tablet.searchForm\", bizagi.rendering.searchForm.prototype);\r\n// Extends itself\r\nbizagi.rendering.tablet.searchForm.extend(\"bizagi.rendering.tablet.searchForm\", {}, {\r\n    /*\r\n    *   Render the results of the query\r\n    *   Resolved in each device\r\n    */\r\n    renderResult: function () {\r\n        var self = this;\r\n        var properties = self.properties;\r\n\r\n        // Creates grid definition\r\n        var data = {};\r\n        data.properties = {\r\n            displayName: self.getResource(\"render-search-advanced-results-label\"),\r\n            type: \"grid\",\r\n            xpath: \"searchForm\" + properties.id,\r\n            id: properties.id,\r\n            skipInitialLoad: true,\r\n            rowsPerPage: 10,\r\n            visible: false,\r\n            sortBy: properties.sortBy,\r\n            sortOrder: properties.sortOrder,\r\n            overrideGetRemoteData: function (params) {\r\n                return self.getRemoteData(params);\r\n            }\r\n        };\r\n\r\n        data.elements = [];\r\n\r\n        // Creates columns\r\n        var columns = properties.columns;\r\n        $.each(columns, function (i) {\r\n            var column = {\r\n                render: {}\r\n            };\r\n\r\n            column.render.properties = {\r\n                displayName: columns[i].caption,\r\n                xpath: columns[i].xpath,\r\n                editable: false\r\n            };\r\n\r\n            $.extend(column.render.properties, self.parseAdditionalProperties(columns[i].dataType));\r\n\r\n            // Next conditional added to print only columns and not labels\r\n            // if type = label then column is not rendered on the results table\r\n            if (columns[i].dataType == 0)\r\n                column.render.properties.columnVisible = false;\r\n\r\n            // if column is number or monetary push allowDecimals property\r\n            if (columns[i].dataType == 7 || columns[i].dataType == 8)\r\n                column.render.properties.allowDecimals = columns[i].allowDecimals;\r\n\r\n            // if column is real or float set allowDecimals property to true\r\n            if (columns[i].dataType == 10 || columns[i].dataType == 11)\r\n                column.render.properties.allowDecimals = true;\r\n\r\n            // if column is date push showtime property\r\n            if (columns[i].dataType == 12)\r\n                column.render.properties.showTime = columns[i].showTime;\r\n\r\n            data.elements.push(column);\r\n        });\r\n\r\n        var grid = self.renderFactory.getRender({\r\n            type: \"grid\",\r\n            data: data,\r\n            parent: self,\r\n            mode: self.getMode()\r\n        });\r\n\r\n        grid.properties.inlineAdd = false;\r\n        grid.properties.allowDelete = false;\r\n        grid.properties.allowAdd = false;\r\n        grid.properties.allowEdit = false;\r\n\r\n        // Saves reference\r\n        self.resultsGrid = grid;\r\n\r\n        return grid.render();\r\n    },\r\n\r\n    /*\r\n    *   Template method to implement in each device to customize each container after processed\r\n    */\r\n    postRenderContainer: function (container) {\r\n        var self = this;\r\n        var searchCriteria = container.find(\".bz-container__search-criteria\");\r\n        var results = container.find(\".bz-container__search-results\");\r\n        var childrenElements = searchCriteria.children();\r\n        var mode = self.getMode();\r\n\r\n        // Process children elements\r\n        self.container = container;\r\n        $.each(childrenElements, function (i, childElement) {\r\n            childElement = $(childElement);\r\n            var id = Number(childElement.data(\"unique-id\"));\r\n            if (id) {\r\n                var child = self.childrenHash[id];\r\n                if (child) {\r\n                    var type = child.getElementType();\r\n                    if (type == bizagi.rendering.element.ELEMENT_TYPE_RENDER) child.postRenderElement(childElement);\r\n                    if (type == bizagi.rendering.element.ELEMENT_TYPE_CONTAINER) child.postRenderContainer(childElement);\r\n                }\r\n            }\r\n        });\r\n\r\n        // Process result\r\n        var grid = $(results.children()[0]);\r\n        self.resultsGrid.postRenderElement(grid);\r\n\r\n        // Apply handlers\r\n        if (mode == \"execution\") {\r\n            self.configureHandlers();\r\n        }\r\n\r\n    \t// Configure view\r\n        if (mode == \"design\") {\r\n            self.configureDesignView();\r\n        }\r\n\r\n        // Configure view\r\n        if (mode == \"layout\") {\r\n\r\n            self.configureDesignView();\r\n            self.configureLayoutView();\r\n        }\r\n\r\n    },\r\n\r\n    /*\r\n    *   Customize the container's behaviour to add handlers\r\n    */\r\n    configureHandlers: function () {\r\n        var self = this;\r\n\r\n        // Saves reference\r\n        self.criteriaContainer = $(\".bz-container__search-criteria\", self.container);\r\n        self.resultsContainer = $(\".bz-container__search-results\", self.container);\r\n\r\n        // Bind to grid row select event\r\n        self.resultsGrid.bind(\"rowSelected\", function (e, ui) {\r\n            if (self.properties.searchParams.hasOwnProperty(\"multiSelect\")) {\r\n                self.trigger(\"multiSelect\", ui);\r\n            } else {\r\n                // Trigger event to bubble up to main container\r\n                self.trigger(\"instanceSelected\", ui);\r\n            }\r\n        });\r\n    },\r\n\r\n    /*\r\n    *   Refresh the result panel, making it to query data with current criteria\r\n    */\r\n    refreshResults: function () {\r\n        var self = this;\r\n\r\n        self.trigger(\"instancerefresh\");\r\n        self.resultsGrid.refresh();\r\n    },\r\n\r\n    /*\r\n    * Method added for IPAD version. Before showing search results form\r\n    */\r\n    onSearchFinished: function () {\r\n        var self = this;\r\n\r\n        if (!self.properties.deviceMaxRecordsExceeded) {\r\n\r\n            // Next line returns visibility with the results of the search\r\n            self.resultsGrid.changeVisibility(true);\r\n\r\n            if (self.properties)\r\n                if (self.properties.records == 0) {\r\n                    $(\".bz-container__search-results label\", self.container).hide();\r\n                } else {\r\n                    $(\".bz-container__search-results label\", self.container).show();\r\n                }\r\n        }\r\n    }\r\n});\r\n","/**\r\n *   Name: Bizagi Tablet Render Text Extension\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will redefine the text render class to adjust to tablet devices\r\n */\r\n\r\n// Extends from render tablet base\r\nbizagi.rendering.tablet.render.extend(\"bizagi.rendering.tablet.text\", bizagi.rendering.text.prototype);\r\n// Extends itself\r\nbizagi.rendering.tablet.text.extend(\"bizagi.rendering.tablet.text\", {}, {\r\n\r\n    //#region Side effects functions\r\n\r\n    /**\r\n     * Template method to implement in each device to customize each render after processed\r\n     */\r\n    postRender: function () {\r\n        // Call base\r\n        this._super();\r\n\r\n        // Set the default maxlenght for the input\r\n        if (this.properties.maxLength > 0) {\r\n            this.input.attr('maxlength', this.properties.maxLength);\r\n        }\r\n    },\r\n\r\n    renderReadOnly: function () {\r\n        var template = this.renderFactory.getTemplate(\"text-readOnly\");\r\n        var value = this.getValue();\r\n        value = (typeof value !== \"undefined\" && value !== null) ? bizagi.util.sanitizeHTML(value) : \"\";\r\n\r\n        var data = {\r\n            value: value,\r\n            editable: this.properties.editable\r\n        };\r\n\r\n        return $.fasttmpl(template, data);\r\n    },\r\n\r\n    /**\r\n     * Sets the value in the rendered control\r\n     * @param {} value\r\n     */\r\n    setDisplayValue: function (value) {\r\n        var self = this;\r\n        var decodedValue = bizagi.util.decodeURI(value);\r\n        value = this.validateValue((typeof (decodedValue) == \"string\" ? decodedValue : \"\"), self.properties.maxLength);\r\n\r\n        // Set internal value\r\n        self.setValue(value, false);\r\n\r\n        if (value) {\r\n            value = $.br2nl(value).replaceAll('\\\\n', '\\n');\r\n        }\r\n\r\n        // Set value in input\r\n        if (self.properties.editable) {\r\n            self.input.val(value);\r\n        } else {\r\n            $(\".bz-text-readonly\", self.getControl()).html(bizagi.util.sanitizeHTML(value));\r\n        }\r\n    },\r\n\r\n    attachRetypeDouble: function () {\r\n        var self = this;\r\n        var element = self.element;\r\n\r\n        var input = $(\"input\", element);\r\n        if (!input || input.length === 0) return;\r\n\r\n        // Apply blur handler to check value\r\n        input.blur(function () {\r\n            var control = $(this);\r\n            self.retypeDouble(control);\r\n        });\r\n    },\r\n\r\n    /**\r\n     * Retype actions\r\n     * @param {} control\r\n     */\r\n    retypeDouble: function (control) {\r\n        var self = this;\r\n        var currentValue = control.val();\r\n        var isVisible = $(control).attr(\"type\") !== \"hidden\" && $(control).css(\"display\") !== \"none\" && $(control).css(\"visibility\") !== \"hidden\";\r\n\r\n        if (isVisible) {\r\n            if (!control.data(\"oldValue\") || $(this).data(\"oldValue\") === \"\") {\r\n\r\n                // Check that there is something in the value or if a value has already been set\r\n                if (currentValue === \"\" || currentValue === control.attr(\"newValue\")) return;\r\n\r\n                self.createTooltip(control, currentValue, self.getResource(\"render-number-retype\"))\r\n\r\n            } else {\r\n                // Check that there is something in the value\r\n                if (currentValue === \"\") return;\r\n\r\n                if (currentValue !== control.data(\"oldValue\")) {\r\n                    self.setValue(\"\");\r\n\r\n                    self.setValidationMessage(self.getResource(\"render-text-retype-error\"));\r\n                    control.val(\"\");\r\n\r\n                    setTimeout(function () {\r\n                        control.focus();\r\n                    }, 100);\r\n\r\n                } else {\r\n                    control.data(\"newValue\", currentValue);\r\n                }\r\n                control.data(\"oldValue\", \"\");\r\n                if (control.data('ui-tooltip')) control.tooltip('destroy');\r\n            }\r\n        }\r\n    },\r\n\r\n    getElementsToStylize: function ($context) {\r\n        return this.properties.editable ? $(\"input\", $context) : $(\".bz-text-readonly\", $context);\r\n    },\r\n\r\n    /**\r\n     * Helptext tooltip\r\n     * @param {} control\r\n     * @param {} currentValue\r\n     * @param {} currentTitle\r\n     */\r\n    createTooltip: function (control, currentValue, currentTitle) {\r\n        this._super(control, currentValue, currentTitle);\r\n\r\n        $('body').bind('touchmove', function (e) {\r\n            $('body').unbind('touchmove');\r\n            if (control.data('ui-tooltip')) control.tooltip('destroy');\r\n        });\r\n    },\r\n\r\n    setValidationMessage: function (message) {\r\n        // Call base\r\n        this._super(message);\r\n        if (this.cloneRender) {\r\n            this.cloneRender.setValidationMessage(message);\r\n        }\r\n    },\r\n\r\n    //#endregion Side effects functions\r\n\r\n});\r\n","/**\r\n *   Name: Bizagi Tablet Render Text Extension\r\n *   Author: UI Forms Team\r\n *   Comments: Extended text implementation\r\n */\r\n\r\n// Extends from render tablet base\r\nbizagi.rendering.tablet.render.extend(\"bizagi.rendering.tablet.extendedText\", bizagi.rendering.extendedText.prototype);\r\n// Extends itself\r\nbizagi.rendering.tablet.extendedText.extend(\"bizagi.rendering.tablet.extendedText\", {\r\n    minLines: 2,\r\n    maxLines: 8,\r\n    maxCharactersToShow: 200\r\n}, {\r\n\r\n    //#region Side effects functions\r\n\r\n    /**\r\n     * Template method to implement in each device to customize each render after processed\r\n     */\r\n    postRender: function () {\r\n        var self = this;\r\n        self._super();\r\n        self.textarea = self.getControl().find(\"textarea\");\r\n        if (self.textarea) self.textarea.css({resize: \"vertical\"});\r\n    },\r\n\r\n\r\n    /**\r\n     * Update or init the element data\r\n     * @param {} data\r\n     */\r\n    initializeData: function (data) {\r\n        // Call base\r\n        this._super(data);\r\n        var maxLines = this.properties.maxLines;\r\n        this.properties.maxLines = maxLines > this.Class.maxLines ? this.Class.maxLines : (maxLines < this.Class.minLines ? this.Class.minLines : maxLines);\r\n\r\n        // Check if offline forms is supported\r\n        this.isOfflineForm = bizagi.util.isOfflineForm({context: this});\r\n    },\r\n\r\n    /**\r\n     * Method to render non editable values\r\n     */\r\n    renderReadOnly: function () {\r\n        var template = this.renderFactory.getTemplate(\"extendedText-readOnly\");\r\n        var value = this.getValue();\r\n        value = (typeof value !== \"undefined\" && value !== null) ? bizagi.util.sanitizeHTML(value) : \"\";\r\n        var showChar = this.Class.maxCharactersToShow;\r\n\r\n        var startString = value.substr(0, showChar);\r\n        var endString = value.substr(showChar - 1, value.length - showChar);\r\n\r\n        var data = {\r\n            \"value\": value,\r\n            \"startString\": startString,\r\n            \"endString\": endString\r\n        };\r\n\r\n        return $.fasttmpl(template, data);\r\n    },\r\n\r\n    /**\r\n     * Sets the value in the redered control\r\n     * @param {} value\r\n     */\r\n    setDisplayValue: function (value) {\r\n        var self = this;\r\n        var decodedValue = bizagi.util.decodeURI(value);\r\n        decodedValue = (!bizagi.util.isEmpty(decodedValue) && typeof (decodedValue) !== \"string\") ? decodedValue.toString() : decodedValue;\r\n        value = self.validateValue(typeof (decodedValue) == \"string\" ? decodedValue : \"\", self.properties.maxLength);\r\n\r\n        // Call base        \r\n        self.setValue(value, false);\r\n\r\n        if (value) {\r\n            value = $.br2nl(value).replaceAll('\\\\n', '\\n');\r\n        }\r\n\r\n        // Set value in input\r\n        if (self.properties.editable) {\r\n            self.textarea.val(value);\r\n        } else {\r\n            $(\".bz-textarea-readonly\", self.getControl()).html(bizagi.util.sanitizeHTML(value));\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Method to customize the render's behaviour to add handlers\r\n     */\r\n    configureHandlers: function () {\r\n        var self = this;\r\n\r\n        // Call base\r\n        self._super();\r\n\r\n        // Define max length of element\r\n        if (self.properties.maxLength > 0) {\r\n            self.textarea.attr(\"maxlength\", self.properties.maxLength);\r\n            self.actualMaxLength = self.properties.maxLength;\r\n        }\r\n        $(self.textarea).bind(\"focus keyup paste\", function (e) {\r\n            if (e.which === 8 || e.which === 46) {\r\n                var currentRow = self.textarea.prop(\"rows\");\r\n                if (currentRow > self.properties.maxLines) {\r\n                    self.textarea.prop(\"rows\", self.properties.maxLines);\r\n                }\r\n            }\r\n            self.updateTextareaSize(this);\r\n        });\r\n\r\n        $(self.textarea).bind(\"blur\", function (e) {\r\n            self.textarea.prop(\"rows\", self.properties.maxLines);\r\n        });\r\n    },\r\n\r\n    /**\r\n     * Sets the functions when the control is readonly\r\n     */\r\n    configureHandlersReadOnly: function () {\r\n        var self = this;\r\n\r\n        var $control = this.getControl();\r\n        $(\".bz-textarea-readonly\", $control).on(\"click\", \".bz-read-more\", function (e) {\r\n            if ($(e.delegateTarget).hasClass(\"bz-textarea-readonly--active\")) {\r\n                $(e.delegateTarget).removeClass(\"bz-textarea-readonly--active\");\r\n                $(this).html(self.getResource(\"workportal-project-discussion-comment-viewmore\"));\r\n            } else {\r\n                $(e.delegateTarget).addClass(\"bz-textarea-readonly--active\");\r\n                $(this).html(self.getResource(\"workportal-project-discussion-comment-viewless\"));\r\n            }\r\n            return false;\r\n        });\r\n    },\r\n\r\n    /**\r\n     * Changes control's height when it's auto extended\r\n     * @param {Object} control HTML Object\r\n     */\r\n    updateTextareaSize: function (textarea) {\r\n        if (this.properties.autoExtend) {\r\n            var currentRows = $(textarea).prop(\"rows\");\r\n            if (textarea.scrollHeight > textarea.offsetHeight && currentRows >= this.Class.minLines && currentRows < this.Class.maxLines) {\r\n                //Extend the rows\r\n                $(textarea).prop(\"rows\", (currentRows + 1));\r\n                this.updateTextareaSize(textarea);\r\n            }\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Handler of retype double actions\r\n     */\r\n    attachRetypeDouble: function () {\r\n        var self = this;\r\n        var element = self.element;\r\n\r\n        var input = $(\"input, textarea\", element);\r\n        if (!input || input.length === 0) return;\r\n\r\n        // Apply blur handler to check value\r\n        input.blur(function () {\r\n            var control = $(this);\r\n            var previousValue = self.previousValue;\r\n            var value = self.value;\r\n\r\n            if (previousValue != null && value != previousValue) {\r\n                if ($(this).data(\"newValue\") != undefined && control.val() != $(this).data(\"newValue\")) {\r\n                    $(this).data().newValue = undefined;\r\n                }\r\n            }\r\n\r\n            self.retypeDouble(control);\r\n        });\r\n    },\r\n\r\n    /**\r\n     * Retype actions\r\n     * @param {} control\r\n     */\r\n    retypeDouble: function (control) {\r\n        var self = this;\r\n        var currentValue = control.val();\r\n        var isVisible = $(control).attr(\"type\") !== \"hidden\" && $(control).css(\"display\") !== \"none\" && $(control).css(\"visibility\") !== \"hidden\";\r\n\r\n        if (isVisible) {\r\n            if (!control.data(\"oldValue\") || $(this).data(\"oldValue\") === \"\") {\r\n\r\n                // Check that there is something in the value or if a value has already been set\r\n                if (currentValue === \"\" || currentValue === control.attr(\"newValue\")) return;\r\n\r\n                self.createTooltip(control, currentValue, self.getResource(\"render-number-retype\"))\r\n\r\n            } else {\r\n                // Check that there is something in the value\r\n                if (currentValue === \"\") return;\r\n\r\n                if (currentValue !== control.data(\"oldValue\")) {\r\n                    self.setValue(\"\");\r\n\r\n                    self.setValidationMessage(self.getResource(\"render-text-retype-error\"));\r\n                    control.val(\"\");\r\n\r\n                    setTimeout(function () {\r\n                        control.focus();\r\n                    }, 100);\r\n\r\n                } else {\r\n                    control.data(\"newValue\", currentValue);\r\n                }\r\n                control.data(\"oldValue\", \"\");\r\n                if (control.data('ui-tooltip')) control.tooltip('destroy');\r\n            }\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Gets jQuery Object to stylize\r\n     * @param {jQuery Object} $context jQuery Object\r\n     */\r\n    getElementsToStylize: function ($context) {\r\n        return this.properties.editable ? $(\"textarea\", $context) : $(\".bz-textarea-readonly\", $context);\r\n    },\r\n\r\n    /**\r\n     * Helptext tooltip\r\n     * @param {} control\r\n     * @param {} currentValue\r\n     * @param {} currentTitle\r\n     */\r\n    createTooltip: function (control, currentValue, currentTitle) {\r\n        this._super(control, currentValue, currentTitle);\r\n\r\n        $('body').bind('touchmove', function (e) {\r\n            $('body').unbind('touchmove');\r\n            if (control.data('ui-tooltip')) control.tooltip('destroy');\r\n        });\r\n    },\r\n\r\n    setValidationMessage: function (message) {\r\n        // Call base\r\n        this._super(message);\r\n\r\n        if (this.cloneRender) {\r\n            this.cloneRender.setValidationMessage(message);\r\n        }\r\n    }\r\n\r\n    //#endregion Side effects functions\r\n});","/**\r\n *   Name: Bizagi Tablet Render Label Extension\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will redefine the label render class to adjust to tablet devices\r\n */\r\n\r\n// Extends from render tablet base\r\nbizagi.rendering.tablet.render.extend(\"bizagi.rendering.tablet.label\", bizagi.rendering.label.prototype);\r\n// Extends itself\r\nbizagi.rendering.tablet.label.extend(\"bizagi.rendering.tablet.label\", {}, {});","/**\r\n *   Name: Bizagi Tablet Render Number Extension\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will redefine the number render class to adjust to tablet devices\r\n */\r\n\r\n// Extends from render tablet base\r\nbizagi.rendering.tablet.render.extend(\"bizagi.rendering.tablet.number\", bizagi.rendering.number.prototype);\r\n// Extends itself\r\nbizagi.rendering.tablet.number.extend(\"bizagi.rendering.tablet.number\", {}, {\r\n\r\n    /**\r\n     * Method to customize each render after processed in read-only mode\r\n     * @returns {*|jQuery}\r\n     */\r\n    renderReadOnly: function () {\r\n        var self = this;\r\n        var template = self.renderFactory.getTemplate(\"number\");\r\n\r\n        return $.fasttmpl(template, {\r\n            value: self.getDisplayValue(),\r\n            editable: self.properties.editable,\r\n            type: \"text\",\r\n            isDesign: self.getMode() !== \"execution\"\r\n        });\r\n    },\r\n\r\n    /**\r\n     * Sets the value in the rendered control\r\n     * @param value\r\n     */\r\n    setDisplayValue: function (value) {\r\n        var self = this;\r\n\r\n        // Call base\r\n        self.setValue(value, false);\r\n\r\n        // Set value in input\r\n        if (value != null && self.properties.editable) {\r\n            self.numericInput.val(value);\r\n\r\n            self.value = self.properties.value = value;\r\n\r\n            // Formats the input\r\n            self.executeFormatCurrencyPlugin();\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Retype function\r\n     */\r\n    attachRetypeDouble: function () {\r\n        var self = this;\r\n        var element = self.element;\r\n\r\n        var input = $(\"input\", element);\r\n        if (!input || input.length === 0) return;\r\n\r\n        // Apply blur handler to check value\r\n        input.blur(function () {\r\n            var control = $(this);\r\n            var previousValue = self.previousValue;\r\n            var value = self.value;\r\n            var typeControl = self.parent.properties.type;\r\n\r\n            if (typeControl === \"grid\") {\r\n                if (previousValue != null && value !== previousValue) {\r\n                    if ($(this).data(\"newValue\") !== undefined && control.val() !== $(this).data(\"newValue\"))\r\n                        $(this).data().newValue = undefined;\r\n                }\r\n\r\n                self.retypeDouble(control);\r\n            } else {\r\n                self.retypeDouble(control);\r\n            }\r\n        });\r\n    },\r\n\r\n    /**\r\n     * Retype function\r\n     * @param control\r\n     */\r\n    retypeDouble: function (control) {\r\n        var self = this;\r\n        var currentValue = control.val();\r\n        var isVisible = $(control).attr(\"type\") !== \"hidden\" && $(control).css(\"display\") !== \"none\" &&\r\n            $(control).css(\"visibility\") !== \"hidden\";\r\n\r\n        if (isVisible && $(this).data(\"newValue\") == undefined) {\r\n\r\n            if (!control.data(\"oldValue\") || $(this).data(\"oldValue\") === \"\") {\r\n\r\n                // Check that there is something in the value or if a value has already been set\r\n                if (currentValue === \"\" || currentValue === control.attr(\"newValue\")) return;\r\n\r\n                self.createTooltip(control, currentValue, self.getResource(\"render-number-retype\"))\r\n\r\n            } else {\r\n                // Check that there is something in the value\r\n                if (currentValue === \"\") return;\r\n\r\n                if (currentValue !== control.data(\"oldValue\")) {\r\n                    self.setValue(\"\");\r\n\r\n                    self.createTooltip(control, \"\", self.getResource(\"render-text-retype-error\"))\r\n                } else {\r\n\r\n                    control.data(\"newValue\", currentValue);\r\n                    control.data(\"oldValue\", \"\");\r\n\r\n                    // Destroy tooltips\r\n                    control.tooltip(\"destroy\");\r\n                }\r\n            }\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Context to apply styles\r\n     * @param context\r\n     * @returns {jQuery|HTMLElement}\r\n     */\r\n    getElementsToStylize: function ($context) {\r\n        return $(\"input\", $context); \r\n    }\r\n\r\n});\r\n","/**\r\n *   Name: Bizagi Tablet Render Money Extension\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will redefine the money render class to adjust to tablet devices\r\n */\r\n\r\n// Extends from render tablet base\r\nbizagi.rendering.tablet.render.extend(\"bizagi.rendering.tablet.money\", bizagi.rendering.number.prototype);\r\n// Extends itself\r\nbizagi.rendering.tablet.money.extend(\"bizagi.rendering.tablet.money\", bizagi.rendering.money.prototype);\r\n// Extends itself\r\nbizagi.rendering.tablet.money.extend(\"bizagi.rendering.tablet.money\", {}, {\r\n\r\n    /**\r\n     * Method to customize each render after processed in read-only mode\r\n     * @returns {*|jQuery}\r\n     */\r\n    renderReadOnly: function () {\r\n        var self = this;\r\n        var template = self.renderFactory.getTemplate(\"number\");\r\n\r\n        return $.fasttmpl(template, {\r\n            value: self.getDisplayValue(),\r\n            editable: self.properties.editable,\r\n            type: \"text\",\r\n            isDesign: self.getMode() !== \"execution\"\r\n        });\r\n    },\r\n\r\n    /**\r\n     * Sets the value in the rendered control\r\n     * @param {} value\r\n     * @returns {}\r\n     */\r\n    setDisplayValue: function (value) {\r\n        var self = this;\r\n\r\n        // Call base\r\n        self.setValue(value, false);\r\n\r\n        // Set value in input\r\n        if (value !== undefined && value !== null && self.properties.editable) {\r\n            self.numericInput.val(value);\r\n\r\n            // Formats the input\r\n            self.executeFormatCurrencyPlugin();\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Context to apply styles\r\n     * @param context\r\n     * @returns {jQuery|HTMLElement}\r\n     */\r\n    getElementsToStylize: function ($context) {\r\n        return $(\"input\", $context); \r\n    }\r\n});\r\n","/*\r\n *   Name: Bizagi Rendering Tablet numberScientificNotation\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define a base class to define the Scientific number notation\r\n */\r\n\r\n// Extends from render tablet base\r\nbizagi.rendering.tablet.render.extend(\"bizagi.rendering.tablet.numberScientificNotation\", bizagi.rendering.numberScientificNotation.prototype);\r\n// Extends itself\r\nbizagi.rendering.tablet.numberScientificNotation.extend(\"bizagi.rendering.tablet.numberScientificNotation\", {}, {    \r\n\r\n    /*\r\n     * Template method to implement in each device to customize each render after processed\r\n     */\r\n    postRender: function () {\r\n        var self = this;\r\n        var control = self.getControl();\r\n\r\n        self.inputDisplay = $('input', control).first();\r\n        self.numericInput = self.input = $('input', control).last();\r\n\r\n        // Add numeric plugin to avoid invalid keystrokes\r\n        self.numericInput.numericSN(self.properties.decimalSymbol);\r\n\r\n        // Attach Format Currency Plugin to format the input\r\n        self.attachFormatSientificNotation();\r\n\r\n    },\r\n\r\n    setDisplayValue: function(value) {\r\n        var self = this;\r\n        var properties = self.properties;\r\n        var value = bizagi.util.scientificNotationFormat(value, properties.decimalSymbol, 38);\r\n        var displayValue = bizagi.util.scientificNotationFormat(value, properties.decimalSymbol, 20);\r\n\r\n\r\n        this._super(displayValue);\r\n\r\n        // Set value in input\r\n        if (value != null && properties.editable) {\r\n            self.numericInput.val(value);\r\n            self.inputDisplay.val(displayValue);\r\n        }\r\n\r\n    },\r\n\r\n    attachFormatSientificNotation: function () {\r\n        var self = this;\r\n\r\n        self.inputDisplay.focus(function(){\r\n            $(this).val(self.getDisplayValue());\r\n        });\r\n\r\n        // Attach events\r\n        self.inputDisplay.blur(function () {\r\n            if (typeof (self.getFormContainer().validationController) == \"undefined\") self.getFormContainer().validationController = new bizagi.command.controllers.validation(self.getFormContainer(), self.validations);\r\n\r\n            var scientificNotationNumber = bizagi.util.scientificNotationFormat(self.inputDisplay.val(), self.properties.decimalSymbol,  38);\r\n            var scientificNotationNumberDisplay = bizagi.util.scientificNotationFormat(self.inputDisplay.val(), self.properties.decimalSymbol,  20);\r\n\r\n            self.numericInput.val(scientificNotationNumber);\r\n            self.inputDisplay.val(scientificNotationNumberDisplay);\r\n            // Updates internal value\r\n            self.setValue(scientificNotationNumber);\r\n        });\r\n    }\r\n});","/**\r\n *   Name: Bizagi Tablet Render Date Extension\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will redefine the Date render class to adjust to tablet devices\r\n */\r\n\r\n// Extends from render tablet base\r\nbizagi.rendering.tablet.render.extend(\"bizagi.rendering.tablet.date\", bizagi.rendering.date.prototype);\r\n// Extends itself\r\nbizagi.rendering.tablet.date.extend(\"bizagi.rendering.tablet.date\", {\r\n    MAX_YEARS_DISPLAY: 100\r\n}, {\r\n\r\n    initializeData: function (data) {\r\n        // Call base\r\n        this._super(data);\r\n    },\r\n\r\n    /**\r\n     * Method to render non editable values\r\n     * @returns {*|jQuery}\r\n     */\r\n    renderReadOnly: function () {\r\n        var value = this.getFormattedDate(this.getValue(), this.properties.showTime, true)\r\n        value = bizagi.util.dateFormatter.formatDate(value, this.properties.fullFormat);\r\n        var data = {value: value, editable: this.properties.editable};\r\n        var template = this.renderFactory.getTemplate(\"readonly\");\r\n        return $.fasttmpl(template, data);\r\n    },\r\n\r\n    /**\r\n     * Method to customize each render after processed in read-only mode\r\n     */\r\n    postRenderReadOnly: function () {\r\n        this.input = $(\"input\", this.getDateControl());\r\n    },\r\n\r\n    /**\r\n     * To configure the mobiscroll plugin\r\n     */\r\n    postRender: function () {\r\n        // Call base\r\n        this._super();\r\n        this.input = $(\"input\", this.getDateControl());\r\n    },\r\n\r\n    configureHandlers: function () {\r\n        var self = this;\r\n        var controlElements = self.properties.showTime ? [\"calendar\", \"time\"] : [\"calendar\"];\r\n\r\n        var defaultDateControl = self.getFormattedDate(self.properties.value, self.properties.showTime, true);\r\n        var minDateControl = self.getFormattedDate(self.properties.minValue, self.properties.showTime, false);\r\n        var maxDateControl = self.getFormattedDate(self.properties.maxValue, self.properties.showTime, false);\r\n\r\n        var timeFormat = self.properties.showTime ? self.getTimeFormat() : \"\";\r\n\r\n        // Adds a gap of years to show if the user doest not include min years\r\n        if (isNaN(Date.parse(minDateControl))) {\r\n            minDateControl = new Date();\r\n            minDateControl.setFullYear(minDateControl.getFullYear() - self.Class.MAX_YEARS_DISPLAY);\r\n            minDateControl.setHours(0, 0, 0, 0);\r\n        }\r\n\r\n        // Adds a gap of years to show if the user doest not include min years\r\n        if (isNaN(Date.parse(maxDateControl))) {\r\n            maxDateControl = new Date();\r\n            maxDateControl.setFullYear(maxDateControl.getFullYear() + self.Class.MAX_YEARS_DISPLAY);\r\n            maxDateControl.setHours(23, 59, 59);\r\n        }\r\n\r\n        $(\".bz-input-icon\", this.getControl()).mobiscroll().calendar({\r\n            mode: \"mixed\", // Specify scroller mode like: mode: 'mixed' or omit setting to use default\r\n            display: \"bottom\", // Specify display mode like: display: 'bottom' or omit setting to use default\r\n            controls: controlElements,\r\n            min: minDateControl,\r\n            max: maxDateControl,\r\n            defaultValue: defaultDateControl,\r\n            timeFormat: timeFormat,\r\n            showScrollArrows: true,\r\n            lang: bizagi.util.languages[BIZAGI_LANGUAGE] || \"en\",\r\n            headerText: \"{value}\",\r\n            buttons: [\r\n                \"set\",\r\n                {\r\n                    text: this.getResource(\"render-plugin-search-users-clear-button-name\"),\r\n                    handler: function (e, inst) {\r\n                        self.date = undefined;\r\n                        self.time = undefined;\r\n                        self.timeS = undefined;\r\n                        self.onChangeHandler(true);\r\n                        inst.clear();\r\n                    }\r\n                },\r\n                \"cancel\"\r\n            ],\r\n            onSet: function (valueText, inst) {\r\n                var data = inst.getVal();\r\n                self.date = {\"day\": data.getDate(), \"month\": data.getMonth(), \"year\": data.getFullYear()};\r\n\r\n                //Checks if its has time, and included it\r\n                if (self.properties.showTime) {\r\n                    self.time = {\"hours\": data.getHours(), \"minutes\": data.getMinutes()};\r\n                    if (!self.is24h) {\r\n                        self.timeS = data.getHours() < 12 ? \"am\" : \"pm\";\r\n                    }\r\n                }\r\n\r\n                self.onChangeHandler();\r\n            },\r\n            onBeforeShow: function (event, inst) {\r\n                // Your custom event handler goes here\r\n                self.triggerGlobalHandler(\"closeModalValidationMessage\", {});\r\n                self.triggerGlobalHandler(\"modalViewDidAppear\", {});\r\n\r\n                self.changeMinValue(self.properties.minValue);\r\n                self.changeMaxValue(self.properties.maxValue);\r\n\r\n                //TODO temporal fix in ios tablet when a notification container is already displayed (QAF-6385 / MOB-171), review mobiscroll.min versions\r\n                if (bizagi.util.isiOSDevice()) {\r\n                    $(\".ui-bizagi-notifications-container\").css(\"display\", \"none\");\r\n                }\r\n            },\r\n            onClose: function (event, inst) {\r\n                // Your custom event handler goes here\r\n                self.triggerGlobalHandler(\"modalViewDidDisappear\", {});\r\n                $(\".mbsc-fr-scroll\").css(\"overflow-y\", \"auto\");\r\n            },\r\n            onShow: function (event, inst) {\r\n                $(\".mbsc-fr-scroll\").css(\"overflow-y\", \"hidden\");\r\n            }\r\n        });\r\n\r\n        // Bind event for change value\r\n        this.input.on(\"focus\", function (e) {\r\n            e.preventDefault();\r\n            e.stopPropagation();\r\n\r\n            if (bizagi.util.isCordovaSupported() && bizagi.util.isAndroidDevice()) {\r\n                cordova.plugins.Keyboard.disableScroll(true);\r\n                cordova.plugins.Keyboard.close();\r\n            }\r\n        });\r\n\r\n        //Set input displayValue if it has default value\r\n        if (self.properties.displayValue === \"\" && self.properties.value) {\r\n            var date = self.getFormattedDate(self.properties.value, self.properties.showTime, true, false);\r\n            if (typeof (date) !== \"undefined\") {\r\n                var displayValue = bizagi.util.dateFormatter.formatDate(date, self.properties.fullFormat);\r\n                this.input.prop(\"value\", displayValue);\r\n            }\r\n        }\r\n\r\n        this.input.attr(\"keyboard\", \"disable\");\r\n    },\r\n\r\n    /**\r\n     * Configure the timeformat\r\n     */\r\n    getTimeFormat: function () {\r\n        if (this.properties.timeFormat.indexOf(\"H\") !== -1 || this.properties.timeFormat.indexOf(\"HH\") !== -1) {\r\n            this.is24h = true;\r\n            return \"HH:ii\";\r\n        } else {\r\n            this.is24h = false;\r\n            return \"hh:ii A\";\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Get Date whit the Invariant and ISO Format applied.\r\n     */\r\n    getFormattedDate: function (date, showTime, initializer) {\r\n        var self = this;\r\n\r\n        if (!date || bizagi.util.isObjectEmpty(date)) return;\r\n        date = (typeof date != \"string\") ? date.toString() : date;\r\n        //There are some dates that haven't time,... actions and validations for example or when we have to put a initial value (default value without time),\r\n        //in that cases we should identify the case and if the date haven't the time value, we have to add (00:00:00) it to can apply the format (getDateFromInvariant).\r\n        var time = (showTime && (self.getTime() === \"0:0\" || initializer)) ? \" \" + date.substr(date.length - 8, date.length) : \"\";\r\n\r\n        var currentDate = (initializer && showTime && time.split(\"/\").length > 1) || (date.split(\":\").length === 1) ? date += \" 00:00:00\" : date;\r\n        date = bizagi.util.dateFormatter.getDateFromInvariant(currentDate, showTime);\r\n\r\n        var currentTime = showTime ? time !== \"\" ? time : \" \" + self.getTime() : \" 00:00\";\r\n        var fullDateFormated = self.setHour(self.getFullFormatedDate(date, currentTime));\r\n\r\n        fullDateFormated = bizagi.util.dateFormatter.getDateFromISO(fullDateFormated, true);\r\n\r\n        return fullDateFormated;\r\n    },\r\n\r\n    /**\r\n     * Changes the render min value\r\n     * @param {} value\r\n     */\r\n    changeMinValue: function (value) {\r\n        var self = this;\r\n        var properties = self.properties;\r\n        var dateControl = self.getDateControl();\r\n\r\n        // Set value in control\r\n        if (value && self.properties.editable) {\r\n            if (typeof (value) === \"number\") {\r\n                value = new Date(value);\r\n                dateControl.mobiscroll('option', {min: value});\r\n                value = bizagi.util.dateFormatter.formatInvariant(value, properties.showTime); // Set as invariant\r\n            } else {\r\n                dateControl.mobiscroll('option', {min: bizagi.util.dateFormatter.getDateFromInvariant(value, true)});\r\n            }\r\n\r\n            properties.minValue = value;\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Changes the render max value\r\n     * @param {} value\r\n     */\r\n    changeMaxValue: function (value) {\r\n        var self = this;\r\n        var properties = self.properties;\r\n        var dateControl = self.getDateControl();\r\n\r\n        // Set value in control\r\n        if (value && self.properties.editable) {\r\n            if (typeof (value) === \"number\") {\r\n                value = new Date(value);\r\n                dateControl.mobiscroll('option', {max: value});\r\n                value = bizagi.util.dateFormatter.formatInvariant(value, properties.showTime); // Set as invariant\r\n            } else {\r\n                dateControl.mobiscroll('option', {max: bizagi.util.dateFormatter.getDateFromInvariant(value, true)});\r\n            }\r\n\r\n            properties.maxValue = value;\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Set the display value on input\r\n     */\r\n    setDisplayValue: function (value) {\r\n        var self = this;\r\n        var date = self.getFormattedDate(value, self.properties.showTime, false);\r\n        var displayValue = self.preprocessDateValue(date);\r\n\r\n        self.input = self.input ? self.input : self.getDateControl();\r\n\r\n        if (self.properties.editable === false) {\r\n            // Render as simple value\r\n            if (typeof (displayValue) === \"string\" || typeof (displayValue) === \"number\") {\r\n                self.input.html(displayValue);\r\n            }\r\n        } else {\r\n            self.input.prop(\"value\", displayValue);\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Get the DOM Control\r\n     */\r\n    getDateControl: function () {\r\n        return $(\".bz-input-icon\", this.getControl());\r\n    },\r\n\r\n    /**\r\n     * Get Time from mobiscroll\r\n     */\r\n    getTime: function () {\r\n        var self = this;\r\n\r\n        //Converting the time in 24h format.\r\n        if (self.properties.showTime && (self.time && self.time[\"minutes\"] !== \"\")) {\r\n            var time = self.time[\"hours\"] + \":\" + self.time[\"minutes\"];\r\n            time += self.timeS;\r\n\r\n            if (time.indexOf(\"am\") != -1 && self.time[\"hours\"] == 12) {\r\n                time = time.replace(\"12\", \"0\");\r\n            }\r\n\r\n            if (time.indexOf(\"pm\") != -1 && self.time[\"hours\"] < 12) {\r\n                time = time.replace(self.time[\"hours\"], (parseInt(self.time[\"hours\"]) + 12));\r\n            }\r\n\r\n            return time.replace(/(am|pm)/, '');\r\n        } else {\r\n            return \"\";\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Get Date from mobiscroll\r\n     * */\r\n    getDate: function () {\r\n        if (this.date && this.date[\"month\"] !== \"\") {\r\n            return this.date[\"year\"] + \"-\" + (parseInt(this.date[\"month\"]) + 1) + \"-\" + this.date[\"day\"];\r\n        } else {\r\n            return \"\";\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Set the control value when the control change\r\n     */\r\n    onChangeHandler: function (isClearButton) {\r\n        var self = this;\r\n        var properties = self.properties;\r\n        var currentDate = self.getDate();\r\n        var currentTime = (properties.showTime) ? \" \" + self.getTime() : \" 0:00\";\r\n\r\n        // If curren date is empty reset actual value\r\n        if ((currentDate === \"\" && !properties.showTime) || (currentDate === \"\" && currentTime === \"\") || (isClearButton)) {\r\n            self.setValue(\"\");\r\n            self.input.prop('value', \"\");\r\n            properties.displayValue = \"\";\r\n        } else {\r\n            var formatedFullDate = self.setHour(self.getFullFormatedDate(currentDate, currentTime));\r\n\r\n            formatedFullDate = bizagi.util.dateFormatter.getDateFromISO(formatedFullDate, true);\r\n\r\n            if (!formatedFullDate || formatedFullDate == 0) return;\r\n\r\n            // Set date value\r\n            self.setNewDateValue(formatedFullDate, properties.showTime);\r\n\r\n            var displayValue = self.preprocessDateValue(formatedFullDate);\r\n            properties.displayValue = displayValue;\r\n\r\n            self.input.prop(\"value\", self.properties.displayValue);\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Apply the final format that will be showed on the input\r\n     */\r\n    getFullFormatedDate: function (currentDate, currentTime) {\r\n        var fullDate = \"\";\r\n\r\n        if (currentDate.length > 0) {\r\n            fullDate = currentDate;\r\n        } else if (currentDate !== undefined) {\r\n            fullDate = bizagi.util.dateFormatter.formatISO(currentDate, false);\r\n        } else {\r\n            fullDate = bizagi.util.dateFormatter.formatISO(new Date(), false);\r\n        }\r\n\r\n        fullDate += currentTime;\r\n        var dateFromFormat = bizagi.util.dateFormatter.getDateFromFormat(fullDate, \"yyyy-MM-dd H:m\");\r\n\r\n        return bizagi.util.dateFormatter.formatDate(dateFromFormat !== 0 ? dateFromFormat : currentDate, \"yyyy-MM-dd H:mm:ss\");\r\n    },\r\n\r\n    /**\r\n     * Set the control value\r\n     */\r\n    setNewDateValue: function (formatedFullDate, showTime) {\r\n        var value = \"\";\r\n\r\n        if (formatedFullDate != \"\")\r\n            value = bizagi.util.dateFormatter.formatInvariant(formatedFullDate, showTime);\r\n\r\n        this.setValue(value);\r\n    },\r\n\r\n    /**\r\n     * Removing the time when be necesary\r\n     */\r\n    applyDateFormat: function (date, showTime) {\r\n        if (!showTime) {\r\n            var initIndexTime = null;\r\n\r\n            if (date.indexOf(\"00:00\") != -1) {\r\n                initIndexTime = date.indexOf(\"00:00\");\r\n            } else if (date.indexOf(\"0:00\") != -1) {\r\n                initIndexTime = date.indexOf(\"0:00\");\r\n            } else if (date.indexOf(\"12:00\") != -1) {\r\n                initIndexTime = date.indexOf(\"12:00\");\r\n            } else {\r\n                initIndexTime = \"-1\";\r\n            }\r\n\r\n            var endIndexTime = initIndexTime + 8;\r\n            date = initIndexTime === -1 ? date : date.replace(date.substring(initIndexTime, endIndexTime), \"\").replace(\" am\", \"\").replace(\" pm\", \"\");\r\n        }\r\n\r\n        return date;\r\n    },\r\n\r\n    /*\r\n     *  Checks if the date could be localized using site language\r\n     */\r\n    preprocessDateValue: function (date) {\r\n        return bizagi.util.dateFormatter.formatDate(date, this.properties.fullFormat);\r\n    },\r\n\r\n    /**\r\n     * Public method to determine if a value is valid or not\r\n     */\r\n    isValid: function (invalidElements) {\r\n        var self = this;\r\n        var properties = self.properties;\r\n        var bValid = true;\r\n        var value = self.getValue();\r\n\r\n        if (value) {\r\n            if (bizagi.util.parseBoolean(properties.editable)) {\r\n                value = bizagi.util.dateFormatter.getDateFromInvariant(value);\r\n\r\n                if (value != 0) {\r\n                    // Clear time for validations\r\n                    value.setHours(0, 0, 0, 0);\r\n\r\n                    // Check min value and max value\r\n                    if (properties.minValue && typeof (properties.minValue) === 'string') {\r\n                        bValid = self.validateMinAndMaxValue(value, true, properties, invalidElements) ? false : bValid;\r\n                    }\r\n\r\n                    if (properties.maxValue && typeof (properties.maxValue) === 'string') {\r\n                        bValid = self.validateMinAndMaxValue(value, false, properties, invalidElements) ? false : bValid;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        if (bizagi.util.parseBoolean(properties.editable)) {\r\n            // Check required\r\n            if (properties.required && !self.hasValue()) {\r\n                self.showMandatoryMessage(properties, invalidElements);\r\n            }\r\n        }\r\n\r\n        if (bValid) {\r\n            // Clear error message\r\n            self.setValidationMessage(\"\");\r\n        }\r\n\r\n        return bValid;\r\n    },\r\n\r\n    /**\r\n     * To validate the min and max values\r\n     * @param {} value\r\n     * @param {} isMinValue\r\n     * @param {} properties\r\n     * @param {} invalidElements\r\n     */\r\n    validateMinAndMaxValue: function (value, isMinValue, properties, invalidElements) {\r\n        var vValue = bizagi.util.dateFormatter.getDateFromInvariant(isMinValue ? properties.minValue : properties.maxValue);\r\n\r\n        //In case the value from the minValue or maxValue are assigned from a Date control that does not have the option  \"showTime!\r\n        if (vValue == 0) {\r\n            var resultValue = \"\";\r\n            if (properties.timeFormat.indexOf(\":ss\") == -1) {\r\n                if (isMinValue) {\r\n                    resultValue = properties.minValue + \":00\";\r\n                } else {\r\n                    resultValue = properties.maxValue + \":00\";\r\n                }\r\n            }\r\n\r\n            vValue = bizagi.util.dateFormatter.getDateFromFormat(resultValue, properties.fullFormat + \":ss\");\r\n        }\r\n\r\n        vValue.setHours(0, 0, 0, 0);\r\n\r\n        if ((isMinValue && value < vValue) || (!isMinValue && value > vValue)) {\r\n            var formatedDate = bizagi.util.dateFormatter.formatDate(vValue, properties.fullFormat);\r\n            var message = \"\";\r\n\r\n            if (isMinValue) {\r\n                message = this.getResource(\"render-date-minimum-validation\").replaceAll(\"#label#\", properties.displayName).replaceAll(\"#minValue#\", formatedDate);\r\n            } else {\r\n                message = this.getResource(\"rendr-date-maximum-validation\").replaceAll(\"#label#\", propertiee).replaceAll(\"#maxValue#\", formatedDate);\r\n            }\r\n\r\n            invalidElements.push({xpath: properties.xpath, message: message});\r\n            return true;\r\n        }\r\n\r\n        return false;\r\n    },\r\n\r\n    /**\r\n     * To show the mandatory values message\r\n     * */\r\n    showMandatoryMessage: function (properties, invalidElements) {\r\n        var self = this;\r\n        var message = self.getResource(\"render-required-text\").replaceAll(\"#label#\", properties.displayName);\r\n\r\n        invalidElements.push({xpath: properties.xpath, message: message});\r\n\r\n        return false;\r\n    },\r\n\r\n    setHour: function (date) {\r\n        return date.replace(\" 0:\", \" 00:\").replace(\" 1:\", \" 01:\").replace(\" 2:\", \" 02:\").replace(\" 3:\", \" 03:\").replace(\" 4:\", \" 04:\").replace(\" 5:\", \" 05:\").replace(\" 6:\", \" 06:\").replace(\" 7:\", \" 07:\").replace(\" 8:\", \" 08:\").replace(\" 9:\", \" 09:\");\r\n    },\r\n\r\n    /**\r\n     * Cleans the control fields as it requires\r\n     */\r\n    clearDisplayValue: function () {\r\n        var self = this;\r\n\r\n        self.date = undefined;\r\n        self.time = undefined;\r\n        self.timeS = undefined;\r\n        self.onChangeHandler(true);\r\n        self.setDisplayValue('');\r\n    },\r\n    isValidMinMaxValue: function () {\r\n        var self = this;\r\n        var isValid = true;\r\n        var value = self.getValue();\r\n\r\n        if (value) {\r\n            value = bizagi.util.dateFormatter.getDateFromInvariant(value);\r\n\r\n            if (value !== 0) {\r\n                // Clear time for validations\r\n                value.setHours(0, 0, 0, 0);\r\n\r\n                // Check min value and max value\r\n                if (self.properties.minValue && typeof (self.properties.minValue) === 'string')\r\n                    isValid = self.validateMinAndMaxValue(value, true);\r\n\r\n                if (self.properties.maxValue && typeof (self.properties.maxValue) === 'string')\r\n                    isValid = self.validateMinAndMaxValue(value, false);\r\n            }\r\n        }\r\n\r\n        return isValid;\r\n    },\r\n\r\n    validateMinAndMaxValue: function (currentDate, isMinValue) {\r\n        var self = this;\r\n        var date = isMinValue ? self.properties.minValue : self.properties.maxValue;\r\n        var formattedDate = bizagi.util.dateFormatter.getDateFromInvariant(date);\r\n\r\n        formattedDate.setHours(0, 0, 0, 0);\r\n\r\n        return !((isMinValue && currentDate < formattedDate) || (!isMinValue && currentDate > formattedDate));\r\n\r\n    },\r\n\r\n    getElementsToStylize: function ($context) {\r\n        return $(\"input\", $context);\r\n    }\r\n});","/**\r\n *   Name: Bizagi Tablet Render Yes-No Extension\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will redefine the Yes-No render class to adjust to tablet devices\r\n */\r\n\r\n// Extends from render tablet base\r\nbizagi.rendering.tablet.render.extend(\"bizagi.rendering.tablet.yesno\", bizagi.rendering.yesno.prototype);\r\n// Extends itself\r\nbizagi.rendering.tablet.yesno.extend(\"bizagi.rendering.tablet.yesno\", {}, {\r\n\r\n    /**\r\n     * Method to customize each render after processed\r\n     */\r\n    postRender: function () {\r\n        var $control = this.getControl();\r\n        this.radio = $control.find(\"input[type=radio]\");\r\n\r\n        if (this.properties.editable && (this.value == null || this.value === undefined) && this.properties.value != null) {\r\n            this.value = this.properties.value;\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Method to render non editable values\r\n     * @returns {*|jQuery}\r\n     */\r\n    renderReadOnly: function () {\r\n        var template = this.renderFactory.getTemplate(\"readonly\");\r\n\r\n        return $.fasttmpl(template, {value: this.getDisplayValue()});\r\n    },\r\n\r\n    /**\r\n     * Method to customize each render after processed in read-only mode\r\n     */\r\n    postRenderReadOnly: function () {\r\n        var $control = this.getControl();\r\n        this.radio = $control.find(\"input\");\r\n\r\n        // Call base\r\n        this._super();\r\n    },\r\n\r\n\r\n    /**\r\n     * Sets the value in the rendered control\r\n     * @param {} value\r\n     */\r\n    setDisplayValue: function (value) {\r\n        var $control = this.getControl();\r\n        var parsedValue = bizagi.util.parseBoolean(value);\r\n\r\n        this.setValue(parsedValue, false);\r\n        if (this.properties.editable) {\r\n            if (parsedValue) {\r\n                $control.find(\"input[value=true]\").prop('checked', true);\r\n                $control.find(\"input[value=false]\").prop('checked', false);\r\n            } else {\r\n                $control.find(\"input[value=false]\").prop('checked', true);\r\n                $control.find(\"input[value=true]\").prop('checked', false);\r\n            }\r\n        } else {\r\n            this.radio.val((this.getDisplayValue()));\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Method to customize the render's behaviour to add handlers\r\n     */\r\n    configureHandlers: function () {\r\n        var self = this;\r\n\r\n        self.radio.change(function () {\r\n            var $selected = $(this);\r\n            var value = $selected.prop('value');\r\n\r\n            if (self.value !== value) {\r\n                self.setValue(value);\r\n            }\r\n        });\r\n    },\r\n\r\n    /**\r\n     * Context to apply styles\r\n     * @param context\r\n     * @returns {jQuery|HTMLElement}\r\n     */\r\n    getElementsToStylize: function (context) {\r\n        return $(\"label.bz-radio__label\", context);\r\n    },\r\n\r\n    /**\r\n     * Cleans current data\r\n     */\r\n    cleanData: function () {\r\n        var value = {id: \"\", label: \"\"};\r\n        this.setValue(value, false);\r\n\r\n        this.clearDisplayValue();\r\n    },\r\n\r\n    /**\r\n     * Sets the value in the rendered control\r\n     */\r\n    clearDisplayValue: function () {\r\n        if (this.properties.editable) {\r\n            this.radio.prop('checked', false);\r\n        } else {\r\n            this.radio.val(this.getDisplayValue());\r\n        }\r\n    }\r\n\r\n});\r\n","/**\r\n *   Name: Bizagi Tablet Render Check\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will redefine the Check render class to adjust to tablet devices\r\n */\r\n\r\n// Extends from render tablet base\r\nbizagi.rendering.tablet.render.extend(\"bizagi.rendering.tablet.check\", bizagi.rendering.check.prototype);\r\n// Extends itself\r\nbizagi.rendering.tablet.check.extend(\"bizagi.rendering.tablet.check\", {}, {\r\n\r\n    /**\r\n     * Template method to implement in each device to customize each render after processed\r\n     */\r\n    postRender: function () {\r\n        var $control = this.getControl();\r\n        this.check = $control.find(\"input\");\r\n\r\n        // Call base\r\n        this._super();\r\n    },\r\n\r\n    /**\r\n     * Method to render non editable values\r\n     * @returns {*|jQuery}\r\n     */\r\n    renderReadOnly: function () {\r\n        var template = this.renderFactory.getTemplate(\"readonly\");\r\n\r\n        return $.fasttmpl(template, {value: this.getDisplayValue()});\r\n    },\r\n\r\n    /**\r\n     * Method to customize each render after processed in read-only mode\r\n     */\r\n    postRenderReadOnly: function () {\r\n        var $control = this.getControl();\r\n        this.check = $control.find(\"input\");\r\n\r\n        // Call base\r\n        this._super();\r\n    },\r\n\r\n    /**\r\n     * Sets the value in the rendered control\r\n     * @param {} value\r\n     */\r\n    setDisplayValue: function (value) {\r\n        // Render as simple value\r\n        var displayValue = bizagi.util.parseBoolean(value);\r\n\r\n        // Set internal value\r\n        this.setValue(displayValue, false);\r\n\r\n        if (this.properties.editable) {\r\n            if (displayValue) {\r\n                this.check.attr(\"checked\", \"checked\");\r\n            } else {\r\n                this.check.removeAttr(\"checked\");\r\n            }\r\n        } else {\r\n            this.check.val((this.getDisplayValue()));\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Method to customize the render's behaviour to add handlers\r\n     */\r\n    configureHandlers: function () {\r\n        var self = this;\r\n\r\n        this.check.on(\"click\", function (evt) {\r\n            var isCheck = $(this).is(':checked');\r\n\r\n            self.setValue(isCheck, true);\r\n\r\n        });\r\n    },\r\n\r\n    /**\r\n     * Cleans current data\r\n     */\r\n    cleanData: function () {\r\n        this.setDisplayValue(false);\r\n        this.setValue(false, false);\r\n    }\r\n\r\n});","/**\r\n *   Name: Bizagi Tablet Render option select\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   Renders an option html input with attached handlers\r\n */\r\n\r\n// Extends from render tablet base\r\nbizagi.rendering.tablet.render.extend(\"bizagi.rendering.tablet.combo\", bizagi.rendering.combo.prototype);\r\n// Extends itself\r\nbizagi.rendering.tablet.combo.extend(\"bizagi.rendering.tablet.combo\", {\r\n    /*\r\n     *   Template method to implement in each children to customize each control\r\n     */\r\n    renderControl: function () {\r\n        var template = this.renderFactory.getTemplate(\"combo\");\r\n\r\n        return $.fasttmpl(template, {\r\n            editable: this.properties.editable,\r\n            value: this.getDisplayValue()\r\n        });\r\n\r\n    },\r\n\r\n    postRender: function() {\r\n        var $control = this.getControl();\r\n\r\n        this._super();\r\n\r\n        this.combo = $control.find(\"input\");\r\n        this.itemSelected = undefined;\r\n    },\r\n\r\n    /**\r\n     * Method to render non editable values\r\n     * @returns {*|jQuery}\r\n     */\r\n    renderReadOnly: function () {\r\n        var template = this.renderFactory.getTemplate(\"readonly\");\r\n\r\n        return $.fasttmpl(template, {value: this.getDisplayValue()});\r\n    },\r\n\r\n    /**\r\n     * Method to customize each render after processed in read-only mode\r\n     */\r\n    postRenderReadOnly: function () {\r\n        var $control = this.getControl();\r\n        this.combo = $control.find(\"input\");\r\n    },\r\n\r\n    /**\r\n     * Add event handlers to the combo control\r\n     */\r\n    configureHandlers: function () {\r\n        var self = this;\r\n        var control = self.getControl();\r\n\r\n        if (self.getMode() !== \"execution\") {\r\n            return;\r\n        }\r\n\r\n        $(\".bz-form-combo\", control).bind(\"click\", function () {\r\n\r\n            $(this).mobileView({\r\n                customHeader: $.fasttmpl(self.renderFactory.getTemplate(\"modal-header-search\"), {}),\r\n                displayName: self.properties.displayName || \"\",\r\n                orientation: self.properties.orientation || \"\",\r\n                contentTemplate: \"\",\r\n                style: \"width: 80%; height: 70%\",\r\n                close: function () {\r\n                    self.triggerGlobalHandler(\"modalViewDidDisappear\", {});\r\n                },\r\n\r\n                open: function () {\r\n                    self.triggerGlobalHandler(\"closeModalValidationMessage\", {});\r\n                    self.triggerGlobalHandler(\"modalViewDidAppear\", {});\r\n                },\r\n\r\n                configureActions: function (context) {\r\n                    var params = {};\r\n\r\n                    if (self.isDependant && self.properties && (/cascadingcombo/i.test(self.properties.type)) && self.getParentCombo) {\r\n                        var parentValue = self.getParentCombo().getValue();\r\n                        if (parentValue && parentValue.id) {\r\n                            params[self.Class.BA_ACTION_PARAMETER_PREFIX + \"parent\"] = parentValue.id;\r\n                        }\r\n                    }\r\n\r\n                    $.when(self.renderCombo(params)).done(function (list) {\r\n                        $(\".bz-modal-view__content\", context.content).html(list);\r\n                        self.configureModalViewHandlers(context);\r\n                    })\r\n                }\r\n            });\r\n        });\r\n\r\n    },\r\n\r\n    processComboData: function (data) {\r\n        var self = this;\r\n        data.forEach(function (value) {\r\n            self.validateValue(value);\r\n        });\r\n    },\r\n\r\n    /**\r\n     * Setting the display value, always you call a setDisplayValue yor are performinng a setValue under the hood.\r\n     * */\r\n    setDisplayValue: function (value) {\r\n        var comboValue = \"\";\r\n\r\n        value = this.mapValue(value);\r\n\r\n        if (value && (typeof value === \"object\" && typeof value.label !== \"undefined\")) {\r\n\r\n            if (value.label !== \"\" && !bizagi.util.isNumeric(value.label)) {\r\n                comboValue = value.label;\r\n            } else {\r\n                var selected = this.findDataValueById(value.value);\r\n                comboValue = selected ? selected.value : \"\";\r\n            }\r\n\r\n            if ($.isArray(comboValue)) {\r\n                comboValue = comboValue.join(\" - \");\r\n            }\r\n\r\n            value = ({\"id\": value.id, \"value\": comboValue});\r\n        }\r\n\r\n        this.combo.val(this.formatItem(value.value));\r\n\r\n        //Set Value\r\n        this.selectedValue = value;\r\n        this.setValue(value);\r\n    },\r\n\r\n    /**\r\n     * Set the handlers for the modal elements\r\n     * @param {kendoModalObject} context full modal object\r\n     */\r\n    configureModalViewHandlers: function (context) {\r\n        var self = this;\r\n\r\n        $(\".bz-list__item\", context.content).on(\"click\", function () {\r\n            var valueObjet = {\r\n                \"id\": $(this).data(\"value\"),\r\n                \"value\": $(this).text()\r\n            };\r\n\r\n            if (valueObjet.id == \"\") {\r\n                valueObjet.value = \"\";\r\n            }\r\n            \r\n            self.itemSelected = true; //must be before the setDisplayValue\r\n            self.setDisplayValue(valueObjet);\r\n            self.trigger(\"select\", [valueObjet, false]);\r\n            context.close();\r\n        });\r\n\r\n        var $elementsList = $(\".bz-list li\", context.content);\r\n        var $clearButton = $(\".bz-modal-view__clear\", context.header);\r\n        var $searchInput = $(\".bz-modal-view__search\", context.header);\r\n\r\n        $(\"[data-action=close]\", context.header).bind(\"click\", function () {\r\n            context.close();\r\n        });\r\n\r\n        if(!this.properties.enableTyping) {\r\n            $searchInput.prop(\"disabled\", true);\r\n            $searchInput.attr(\"placeholder\", \"\");\r\n        } else {\r\n            $clearButton.bind(\"click\", function () {\r\n                $searchInput.val(\"\").trigger(\"change\");\r\n            });\r\n            // Filtering list\r\n            $searchInput.bind(\"change keyup\", function () {\r\n                if (this.value == \"\") {\r\n                    $clearButton.removeClass(\"bz-modal-view__clear--visible\");\r\n                } else {\r\n                    $clearButton.addClass(\"bz-modal-view__clear--visible\");\r\n                }\r\n                self.filterList(this.value, $elementsList);\r\n            }).focus();\r\n        }\r\n    },\r\n\r\n    cleanData: function () {\r\n        var self = this;\r\n        var value = {id: \"\", label: \"\"};\r\n\r\n        self.setDisplayValue(value);\r\n    },\r\n    \r\n    /**\r\n     * Filtering list of elements\r\n     * @returns {}\r\n     */\r\n    filterList: function (search, $li) {\r\n\r\n        $li.filter(function () {\r\n            var stringContainer = $(this).text().toUpperCase();\r\n            var stringToSearch = search.toUpperCase();\r\n\r\n            if (stringContainer.indexOf(stringToSearch) >= 0) {\r\n                return $(this);\r\n            } else {\r\n                $(this).hide();\r\n            }\r\n        }).show();\r\n    },\r\n\r\n    /**\r\n     * Print the list of elements to show in the modal\r\n     * @param {object} data list of elements to print\r\n     */\r\n    renderComboTemplate: function (data) {\r\n        var template = this.renderFactory.getTemplate(\"combo-list\");\r\n        var value = this.getValue();\r\n        value = (value !== null && typeof value !== \"undefined\") ? value : {\"id\": \"\", \"value\": \"\"};\r\n\r\n        return $.fasttmpl(template, {\r\n            \"items\": data,\r\n            \"selectedId\": value.id,\r\n            \"hasItems\": data.length > 0\r\n        }, {\r\n            \"validateItem\": this.validateValue\r\n        });\r\n    },\r\n\r\n    /**\r\n     * Returns the selected value in the template\r\n     * @returns {{id: *, value: *}}\r\n     */\r\n    getSelectedValue: function () {\r\n        return this.selectedValue;\r\n    },\r\n\r\n    getElementsToStylize: function ($context) {\r\n        return this.properties.editable ? $(\"input\", $context) : $(\".readonly-control\", $context);\r\n    }\r\n});\r\n","/**\r\n *   Name: Bizagi Tablet Render upload Extension\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will redefine the upload render class to adjust to tablet devices\r\n */\r\n\r\n// Extends from render tablet base\r\nbizagi.rendering.tablet.render.extend(\"bizagi.rendering.tablet.upload\", {\r\n    // Statics\r\n    BA_ACTION_PARAMETER_PREFIX: bizagi.render.services.service.BA_ACTION_PARAMETER_PREFIX,\r\n    BA_CONTEXT_PARAMETER_PREFIX: bizagi.render.services.service.BA_CONTEXT_PARAMETER_PREFIX,\r\n    BA_PAGE_CACHE: bizagi.render.services.service.BA_PAGE_CACHE\r\n}, bizagi.rendering.upload.prototype);\r\n\r\n// Extends itself\r\nbizagi.rendering.tablet.upload.extend(\"bizagi.rendering.tablet.upload\", {\r\n    QUALITY_PICTURE: 50,\r\n    LIMIT: 1, // The maximum number of media in the device user can record in a single capture operation.\r\n    EXTENSIONSIMG: [\"image/jpeg\", \"jpeg\", \"image\", \"png\", \"jpg\", \"bmp\"],\r\n    EXTENSIONSFILE: [\"doc\", \"docx\", \"xls\", \"xlsx\", \"ppt\", \"pptx\", \"pdf\", \"zip\", \"rar\", \"txt\"],\r\n    EXTENSIONSVIDEO: [\"video/quicktime\", \"quicktime\", \"qt\", \"mov\"],\r\n    EXTENSIONSAUDIO: [\"audio/wav\", \"audio\", \"wav\", \"mp3\"]\r\n}, {\r\n    /**\r\n     * Whether or not is a native device\r\n     * @var isNative boolean\r\n     */\r\n    isNative: false,\r\n\r\n    /**\r\n     * Whether or not we are offline\r\n     * @var isOfflineForm boolean\r\n     */\r\n    isOfflineForm: false,\r\n\r\n    /**\r\n     * Update or init the element data\r\n     * @param {} data\r\n     */\r\n    initializeData: function (data) {\r\n        // Call base\r\n        this._super(data);\r\n\r\n        // Check if offline forms is supported\r\n        this.isOfflineForm = bizagi.util.isOfflineForm({context: this});\r\n        this.isNative = bizagi.util.isCordovaSupported();\r\n    },\r\n\r\n    /**\r\n     * Template method to implement in each children to customize each control\r\n     * @returns {}\r\n     */\r\n    renderControl: function () {\r\n        var template = this.renderFactory.getTemplate(\"upload\");\r\n\r\n        return this.renderItem(template, {});\r\n    },\r\n\r\n    /**\r\n     * Method to render non editable values\r\n     * @returns {*|jQuery}\r\n     */\r\n    renderReadOnly: function () {\r\n        var template = this.renderFactory.getTemplate(\"upload-readonly\");\r\n        var data = {\r\n            noFiles: this.filesCount === 0\r\n        };\r\n\r\n        return this.renderItem(template, data);\r\n    },\r\n\r\n    /**\r\n     * Method to render items\r\n     * @returns {*|jQuery}\r\n     */\r\n    renderItem: function (template, data) {\r\n        var self = this;\r\n        var items = \"\";\r\n\r\n        // Render template\r\n        var html = $.fasttmpl(template, data);\r\n\r\n        // Render current children\r\n        for (var i = 0; i < self.filesCount; i++) {\r\n            var file = {id: self.files[i][0], fileName: self.files[i][1]};\r\n            var item = self.renderUploadItem(file);\r\n            items += item;\r\n        }\r\n\r\n        html = self.replaceFilesHtml(html, items);\r\n\r\n        return html;\r\n    },\r\n\r\n    /**\r\n     * Template method to implement in each device to customize each render after processed\r\n     */\r\n    postRender: function () {\r\n        var $control = this.getControl();\r\n\r\n        this.$contentFile = $(\".bz-file-upload__container\", $control);\r\n        this.$inputFile = $(\".bz-file-upload__input\", $control);\r\n        this.$nativeFile = $(\".bz-file-upload__native\", $control);        \r\n    },\r\n\r\n    /**\r\n     * Add action handlers\r\n     */\r\n    configureHandlers: function () {\r\n        this.checkFileExtensions();\r\n        this.attachEvents();\r\n    },\r\n\r\n    /**\r\n     * Method to customize the render's behaviour to add handlers when the control is readonly\r\n     */\r\n    configureHandlersReadOnly: function () {\r\n        var self = this;\r\n        var $control = self.getControl();\r\n\r\n        // Handler to download a file\r\n        $(\"ul.bz-readonly-lists\", $control).on(\"click\", \".bz-file .bz-file-name\", function () {\r\n            var item = $(this).parent(\".bz-file\");\r\n            var file = item.data();\r\n\r\n            bizagi.loading.start();\r\n\r\n            $.when(bizagi.util.media.downloadFile(file.url, file.title)).fail(function (error) {\r\n                self.executeFormFailHandler(error);\r\n            }).always(function () {\r\n                bizagi.loading.stop();\r\n            });\r\n        });\r\n    },\r\n\r\n    /**\r\n     * Method to configure the actions with control\r\n     * @return {}\r\n     */\r\n    attachEvents: function () {\r\n        var self = this;\r\n        var $control = self.getControl();\r\n        var counterChoseFiles = 0;\r\n        // Attach all events\r\n        this.$contentFile.off(\"click\").on(\"click\", function (evt) {\r\n            if(!self.isNative || counterChoseFiles > 0){                \r\n                self.chooseFile();             \r\n            }else{\r\n                bizagi.showMessageBox(bizagi.localization.getResource(\"render-upload-error-files-extension-supported-app\", \"You can only add images or videos.\"), 'Userfield error');\r\n            }  \r\n        });\r\n        \r\n        // Handler to download the file\r\n        $(\"ul.bz-files\", $control).on(\"click\", \".bz-file .bz-file-name\", function () {\r\n            var item = $(this).parent(\".bz-file\");\r\n            var file = item.data();\r\n\r\n            bizagi.loading.start();\r\n\r\n            $.when(bizagi.util.media.downloadFile(file.url, file.title)).fail(function (error) {\r\n                self.executeFormFailHandler(error);\r\n            }).always(function () {\r\n                bizagi.loading.stop();\r\n            });\r\n        });\r\n\r\n        // Attach delete option & Removes a file from the upload control\r\n        $(\"ul.bz-files\", $control).on(\"click\", \".bz-file .bz-icn\", function () {\r\n            var item = $(this).parent(\".bz-file\");\r\n            var file = item.data();\r\n\r\n            self.removeFile(item, file.id);\r\n        });\r\n\r\n        if (self.isNative) {\r\n            // Upload files\r\n            var actions = self.getUploadChoices();\r\n            counterChoseFiles = actions.length;\r\n            this.$nativeFile.off(\"click\").actionSheet({\r\n                actions: actions,\r\n                actionClicked: function (action) {\r\n                    self.handlerUploadFile(action.guid);\r\n                },\r\n                appear: function (action) {\r\n                    self.triggerGlobalHandler(\"closeModalValidationMessage\", {});\r\n                    self.triggerGlobalHandler(\"modalViewDidAppear\", {});\r\n                },\r\n                cancelClicked: function (action) {\r\n                    self.triggerGlobalHandler(\"modalViewDidDisappear\", {});\r\n                }\r\n            });\r\n\r\n            // Resolution upload\r\n            $(\".bz-file-upload__resolution\", $control).off(\"click\").actionSheet({\r\n                actions: bizagi.util.media.getImageResolutionSizes(),\r\n                withoutCancel: true,\r\n                actionClicked: function (action) {\r\n                    bizagi.loading.start();\r\n\r\n                    $.when(self.handlerResolutionUpload(action.guid)).always(function () {\r\n                        bizagi.loading.stop();\r\n                    });\r\n                },\r\n                appear: function (action) {\r\n                    self.triggerGlobalHandler(\"closeModalValidationMessage\", {});\r\n                    self.triggerGlobalHandler(\"modalViewDidAppear\", {});\r\n                },\r\n                cancelClicked: function (action) {\r\n                    self.triggerGlobalHandler(\"modalViewDidDisappear\", {});\r\n                }\r\n            });\r\n        } else {\r\n\r\n            // Attach event to web upload-control\r\n            this.$inputFile.off(\"change\").on(\"change\", function () {\r\n                self.addFile();\r\n                this.value = \"\";\r\n            });\r\n\r\n            // Just in case\r\n            this.$inputFile.off(\"click\").on(\"click\", function (evt) {\r\n                evt.stopPropagation();\r\n            });\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Handler of upload files\r\n     * @param {} ordinal\r\n     * @returns {}\r\n     */\r\n    handlerUploadFile: function (ordinal) {\r\n        var self = this;\r\n        var actionSelected = ordinal || 0;\r\n\r\n        switch (actionSelected) {\r\n            case 2:\r\n\r\n                navigator.camera.getPicture(function (dataImage) {\r\n                    self.dataImage = dataImage;\r\n                    var extensions = self.Class.EXTENSIONSIMG.concat(self.Class.EXTENSIONSVIDEO);\r\n\r\n                    bizagi.loading.start();\r\n\r\n                    $.when(bizagi.util.media.checkMaxSize(dataImage, self.properties))\r\n                        .then(function () {\r\n                            //Gets the real properties for the file\r\n                            return $.when(bizagi.util.media.getFileDataInfo(self.dataImage))\r\n                                .then(function (fileData) {\r\n                                    self.fileProperties = fileData;\r\n\r\n                                    if (bizagi.util.media.checkFileTypes(fileData, self.properties, extensions)) {\r\n                                        // \"new Blob\" constructor is not supported in android version 4.2.2\r\n                                        var version = bizagi.util.getAndroidVersion();\r\n\r\n                                        if (!bizagi.util.isAndroid()) {\r\n                                            return $.when(bizagi.util.media.modalResolutionUpload()).then(function (buttonIndex) {\r\n                                                if (buttonIndex <= bizagi.util.media.getImageResolutionItems().length) {\r\n                                                    return self.handlerResolutionUpload(buttonIndex);\r\n                                                }\r\n                                            });\r\n\r\n                                        } else {\r\n                                            // Force click to show actionSheet menu\r\n                                            $(\".bz-file-upload__resolution\", self.getControl()).click();\r\n                                        }\r\n                                    }\r\n                                });\r\n                        }).always(function () {\r\n                        bizagi.loading.stop();\r\n                    });\r\n\r\n                }, self.onFail.bind(self), {\r\n                    quality: self.Class.QUALITY_PICTURE,\r\n                    sourceType: Camera.PictureSourceType.PHOTOLIBRARY,\r\n                    correctOrientation: true\r\n                });\r\n                break;\r\n            case 1:\r\n                navigator.camera.getPicture(function (dataImage) {\r\n                        bizagi.loading.start();\r\n\r\n                        $.when(bizagi.util.media.checkMaxSize(dataImage, self.properties)).then(function () {\r\n                            return $.when(bizagi.util.media.getFileDataInfo(dataImage)).then(function (fileData) {\r\n                                self.fileProperties = fileData;\r\n                                return self.saveImage(dataImage);\r\n                            });\r\n                        }).always(function () {\r\n                            bizagi.loading.stop();\r\n                        });\r\n                    },\r\n                    self.onFail.bind(self), {\r\n                        quality: self.Class.QUALITY_PICTURE,\r\n                        sourceType: navigator.camera.PictureSourceType.CAMERA,\r\n                        mediaType: navigator.camera.MediaType.PICTURE,\r\n                        destinationType: Camera.DestinationType.FILE_URI,\r\n                        correctOrientation: true,\r\n                        targetWidth: 1280,\r\n                        targetHeight: 960\r\n                    });\r\n                break;\r\n            case 3:\r\n                navigator.device.capture.captureVideo(function (dataVideo) {\r\n                    bizagi.loading.start();\r\n\r\n                    $.when(bizagi.util.media.checkMaxSizeVideo(dataVideo, self.properties))\r\n                        .then(function () {\r\n                            return self.saveVideo(dataVideo);\r\n                        }).always(function () {\r\n                        bizagi.loading.stop();\r\n                    });\r\n\r\n                }, self.onFail.bind(self), {limit: self.Class.LIMIT});\r\n                break;\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Handler of resolution upload\r\n     * @param {} ordinal\r\n     * @returns {}\r\n     */\r\n    handlerResolutionUpload: function (ordinal) {\r\n        var self = this;\r\n        var actionSelected = ordinal || 0;\r\n\r\n        // If original, save image normally, if not, reduce quality and size\r\n        if (actionSelected === bizagi.util.media.ResolutionType.ORIGINAL) {\r\n            return self.saveImage(self.dataImage);\r\n        } else {\r\n            var resolution = bizagi.util.media.getImageResolution(actionSelected);\r\n\r\n            return $.when(bizagi.util.media.transformImageSize(self.dataImage, resolution)).then(function (result) {\r\n                self.editedImageURL = result.localUrl;\r\n                self.properties.url = result.base64Image;\r\n\r\n                return self.saveImage(self.dataImage);\r\n            });\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Send image using HTTP\r\n     * @param {} dataImage\r\n     */\r\n    saveImage: function (dataImage) {\r\n        var self = this;\r\n        var dataItem = \"\";\r\n\r\n        if (self.editedImageURL) {\r\n            dataItem = self.editedImageURL;\r\n        } else if (self.fileProperties) {\r\n            dataItem = self.fileProperties.url;\r\n        }\r\n\r\n        // Fix android 4.4 getting images from recent folder\r\n        var dataFile = bizagi.util.media.getImagePath(dataItem);\r\n        var data = {\r\n            dataFile: dataFile,\r\n            fileName: self.fileProperties.name,\r\n            mimeType: \"image/jpeg\"\r\n        };\r\n\r\n        // Cleans variables related previous uploads\r\n        self.editedImageURL = null;\r\n        self.fileProperties = null;\r\n\r\n        return this.uploadFile(data);\r\n    },\r\n\r\n    /**\r\n     * Method to save a video file\r\n     * @param {} dataVideo\r\n     * @returns {}\r\n     */\r\n    saveVideo: function (dataVideo) {\r\n        var data = {\r\n            dataFile: dataVideo[0].fullPath,\r\n            fileName: dataVideo[0].name,\r\n            mimeType: \"video/quicktime\"\r\n        };\r\n\r\n        return this.uploadFile(data);\r\n    },\r\n\r\n    /**\r\n     * Method to save a file\r\n     * @param data\r\n     * @returns {*|void}\r\n     */\r\n    uploadFile: function (data) {\r\n        var self = this;\r\n        var params = {};\r\n        var addParams = self.buildAddParams();\r\n        addParams.queueID = \"q_\" + bizagi.util.encodeXpath(self.getUploadXpath());\r\n\r\n        params.data = addParams;\r\n        params.options = new FileUploadOptions();\r\n        params.options.fileKey = \"file\";\r\n        params.options.fileName = data.fileName;\r\n        params.options.uploadKey = {key: addParams[\"h_xpath\"]};\r\n        params.options.addUrl = self.properties.addUrl;\r\n        params.dataFile = data.dataFile;\r\n\r\n        if (data.mimeType)\r\n            params.options.mimeType = data.mimeType;\r\n\r\n        return $.when(bizagi.util.media.uploadFile(params)).then(function (result) {\r\n            var response = JSON.parse(decodeURIComponent(result.response));\r\n\r\n            if (response.type === \"error\") {\r\n                bizagi.showMessageBox(response.message, response.errorType);\r\n            } else {\r\n                self.onUploadFileCompleted(response);\r\n            }\r\n        }).fail(function (error) {\r\n            self.executeFormFailHandler(error);\r\n        });\r\n    },\r\n\r\n    /**\r\n     * onFail\r\n     * @param {} error\r\n     */\r\n    onFail: function (error) {\r\n        var messageError = bizagi.util.processFailMessage(error);\r\n\r\n        bizagi.loading.stop();\r\n\r\n        if (messageError && typeof (messageError) === \"string\" && messageError.indexOf(\"No Activity found to handle Intent\") !== -1) {\r\n            var hasResource = bizagi.util.isValidResource(\"render-upload-error-media-app\");\r\n            var message = hasResource ? bizagi.localization.getResource(\"render-upload-error-media-app\") : \"Your device does not have an app to execute this action.\";\r\n\r\n            bizagi.showMessageBox(message);\r\n        }\r\n    },\r\n\r\n    /**\r\n     * onUploadFileCompleted\r\n     * @param {} result\r\n     */\r\n    onUploadFileCompleted: function (result) {\r\n        var self = this;\r\n        var $wrapper = $(\".bz-files\", self.getControl());\r\n\r\n        if (result.id && result.fileName) {\r\n            // Locate it before the upload wrapper\r\n            var newItem = self.renderUploadItem(result);\r\n            $wrapper.append(newItem);\r\n\r\n            // Increment counter\r\n            self.filesCount = self.filesCount + 1;\r\n\r\n            // Copy the files value but not its reference\r\n            var files = self.files.slice();\r\n\r\n            //Add the new item to this temporal array\r\n            files.push([result.id, result.fileName]);\r\n\r\n            // Update value\r\n            self.setValue(files, true);\r\n\r\n            // Check maxFiles\r\n            self.checkMaxFiles();\r\n\r\n            self.editedImageURL = null;\r\n        } else {\r\n            bizagi.showMessageBox(result.message, \"Error\");\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Check maximum number of files\r\n     */\r\n    checkMaxFiles: function () {\r\n        if (this.isMaxFilesReached()) {\r\n            $(this.$contentFile).addClass(\"bz-file-upload__container--hidden\");\r\n        } else {\r\n            $(this.$contentFile).removeClass(\"bz-file-upload__container--hidden\");\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Check if the maximum number of files than can be uploaded has been reached\r\n     * @returns {}\r\n     */\r\n    isMaxFilesReached: function () {\r\n        var maxFiles = this.properties.maxfiles;\r\n        var actualFiles = this.properties.value ? this.properties.value.length : 0;\r\n\r\n        return maxFiles !== 0 && (this.filesCount >= maxFiles && actualFiles >= maxFiles);\r\n    },\r\n\r\n    /**\r\n     * Check allow extensions and define possible choices\r\n     * @returns {}\r\n     */\r\n    checkFileExtensions: function () {\r\n        var self = this;\r\n        var validExtensions = self.properties.validExtensions || \"\";\r\n\r\n        self.validOptions = {video: false, image: false, file: false};\r\n\r\n        // Preprocess the extensions string\r\n        validExtensions = validExtensions.replace(/\\s+/g, \"\").toLowerCase();\r\n\r\n        if (typeof (validExtensions) === \"undefined\" || validExtensions === \"\") {\r\n            self.validOptions = {video: true, image: true, file: true};\r\n        } else {\r\n            validExtensions = validExtensions.split(\";\");\r\n\r\n            if (validExtensions.length === 1 && validExtensions[0].indexOf(\"*.*\") !== -1) {\r\n                self.validOptions.video = true;\r\n                self.validOptions.image = true;\r\n            } else {\r\n                for (var i = 0, length = validExtensions.length; i < length; i++) {\r\n                    validExtensions[i] = validExtensions[i].replace(\"*.\", \"\");\r\n\r\n                    if (self.Class.EXTENSIONSFILE.toString().indexOf(validExtensions[i]) >= 0) {\r\n                        self.validOptions.file = true;\r\n                    } else if (self.Class.EXTENSIONSIMG.toString().indexOf(validExtensions[i]) >= 0) {\r\n                        self.validOptions.image = true;\r\n                    } else if (self.Class.EXTENSIONSVIDEO.toString().indexOf(validExtensions[i]) >= 0) {\r\n                        self.validOptions.video = true;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        // Media is not supported then upload control is disabled\r\n        if (!self.validOptions.file && !self.validOptions.image && !self.validOptions.video) {\r\n            $(self.$contentFile).addClass(\"bz-file-upload__container--hidden\");\r\n        }\r\n\r\n        // Limit of files is reached then upload control is disabled\r\n        if (self.isMaxFilesReached() || (!self.isNative && (!bizagi.util.media.fileAPISupported() || self.isOfflineForm))) {\r\n            $(this.$contentFile).addClass(\"bz-file-upload__container--hidden\");\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Build add params to send to the server\r\n     * @param {} dataFile\r\n     */\r\n    buildAddFileParams: function (dataFile) {\r\n        var self = this;\r\n        var prefix = self.Class.BA_CONTEXT_PARAMETER_PREFIX;\r\n\r\n        // Get form data for POSTing\r\n        var formData = new FormData();\r\n        var form = self.getFormContainer();\r\n\r\n        // Build add params to send to the server\r\n        formData.append(prefix + \"xpath\", self.getUploadXpath());\r\n        formData.append(prefix + \"idRender\", self.properties.id);\r\n        formData.append(prefix + \"xpathContext\", self.properties.xpathContext);\r\n        formData.append(prefix + self.Class.BA_PAGE_CACHE, self.properties.idPageCache);\r\n        formData.append(self.Class.BA_ACTION_PARAMETER_PREFIX + \"sessionId\", form.properties.sessionId);\r\n        formData.append(self.properties.xpath, dataFile);\r\n\r\n        if (self.properties.contexttype)\r\n            formData.append(prefix + \"contexttype\", self.properties.contexttype);\r\n\r\n        try {\r\n            if (typeof (BIZAGI_SESSION_NAME) !== \"undefined\") {\r\n                formData.append(BIZAGI_SESSION_NAME, form.properties.sessionId);\r\n            } else {\r\n                formData.append(\"JSESSIONID\", form.properties.sessionId);\r\n            }\r\n        } catch (e) {\r\n            formData.append(\"JSESSIONID\", form.properties.sessionId);\r\n        }\r\n\r\n        return formData;\r\n    },\r\n\r\n    /**\r\n     * Process an upload file into the server\r\n     * @param {} dataFile\r\n     * @returns {}\r\n     */\r\n    processUploadFile: function (dataFile) {\r\n        var data = {\r\n            url: this.properties.addUrl,\r\n            formData: this.buildAddFileParams(dataFile)\r\n        };\r\n\r\n        return this.dataService.processUploadFile(data);\r\n    },\r\n\r\n    /**\r\n     * Remove data of file upload\r\n     */\r\n    clearDisplayValue: function () {\r\n        var self = this;\r\n        var items = $(\".bz-files\", self.getControl());\r\n\r\n        $(\".bz-file\", items).each(function (index, item) {\r\n            item = $(item);\r\n            var file = item.data();\r\n\r\n            self.removeFile(item, file.id);\r\n        });\r\n    },\r\n\r\n    /**\r\n     * Add upload options\r\n     */\r\n    getUploadChoices: function () {\r\n        var self = this;\r\n        var itemsUpload = [];\r\n\r\n        // Take photo, Choose photo\r\n        if (self.validOptions.image) {\r\n            itemsUpload.push({\r\n                \"guid\": 1,\r\n                \"displayName\": bizagi.localization.getResource(\"workportal-actionsheet-upload-take-photo\")\r\n            });\r\n            itemsUpload.push({\r\n                \"guid\": 2,\r\n                \"displayName\": bizagi.localization.getResource(\"workportal-actionsheet-upload-choose-photo\")\r\n            });\r\n        }\r\n\r\n        // Take video\r\n        if (self.validOptions.video) {\r\n            itemsUpload.push({\r\n                \"guid\": 3,\r\n                \"displayName\": bizagi.localization.getResource(\"workportal-actionsheet-upload-take-video\")\r\n            });\r\n        }\r\n\r\n        // Stores the upload options        \r\n        return [].concat(itemsUpload);\r\n    },\r\n\r\n    /**\r\n     * Call the form failhandler with an specific error\r\n     * @param {} error\r\n     * @returns {}\r\n     */\r\n    executeFormFailHandler: function (error) {\r\n        var errorResponse = \"\";\r\n\r\n        if (error && error.responseText) {\r\n            errorResponse = error.responseText;\r\n        } else {\r\n            errorResponse = bizagi.localization.getResource(\"workportal-general-error\");\r\n        }\r\n\r\n        this.getFormContainer().failHandler(errorResponse);\r\n    },\r\n\r\n    /**\r\n     * Method to add new file from native or hybrid environment\r\n     */\r\n    chooseFile: function () {\r\n        if (this.isNative) {\r\n            this.$nativeFile.click();\r\n        } else if (bizagi.util.media.fileAPISupported() && !this.isOfflineForm) {\r\n            this.$inputFile.click();\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Method to add new file\r\n     */\r\n    addFile: function () {\r\n        var self = this;\r\n        var dataFile = this.$inputFile[0].files[0];\r\n        var extensions = self.Class.EXTENSIONSIMG.concat(self.Class.EXTENSIONSFILE, self.Class.EXTENSIONSVIDEO);\r\n\r\n        dataFile.fullPath = this.$inputFile[0].value;\r\n        bizagi.loading.start();\r\n\r\n        if (bizagi.util.media.checkMaxSizeFile(dataFile, self.properties) && bizagi.util.media.checkFileTypes(dataFile, self.properties, extensions)) {\r\n\r\n            $.when(self.processUploadFile(dataFile))\r\n                .then(function (result) {\r\n                    self.onUploadFileCompleted(JSON.parse(decodeURIComponent(result)));\r\n                }).fail(function (error) {\r\n                self.executeFormFailHandler(error);\r\n            }).always(function () {\r\n                bizagi.loading.stop();\r\n            });\r\n        } else {\r\n            bizagi.loading.stop();\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Method to remove item\r\n     * @param item\r\n     * @param id\r\n     */\r\n    removeFile: function (item, id) {\r\n        var self = this;\r\n\r\n        $.when(self.deleteUploadItem(item, id)).done(function () {\r\n            // Remove item\r\n            item.hide();\r\n            item.remove();\r\n\r\n            // Update value\r\n            self.setValue(self.files, false);\r\n\r\n            // Check maxFiles\r\n            self.checkMaxFiles();\r\n\r\n            // Trigger change\r\n            self.triggerRenderChange();\r\n        });\r\n    },\r\n\r\n    /**\r\n     * Template for upload items\r\n     */\r\n    getTemplateItemName: function () {\r\n        return \"upload-item\";\r\n    },\r\n\r\n    getElementsToStylize: function(context){\r\n        return $(\".bz-input-icon__input\", context);\r\n    }\r\n\r\n});","/**\r\n *   Name: Bizagi Tablet Render upload Extension\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will redefine the label render class to adjust to tablets devices\r\n */\r\n\r\n// Extends itself\r\nbizagi.rendering.tablet.upload.extend(\"bizagi.rendering.tablet.upload.offline\", {\r\n    QUALITY_PICTURE: 50,\r\n    LIMIT: 1, // The maximum number of media in the device user can record in a single capture operation.\r\n    EXTENSIONSIMG: [\"image/jpeg\", \"jpeg\", \"image\", \"png\", \"jpg\", \"bmp\"],\r\n    EXTENSIONSFILE: [\"doc\", \"docx\", \"xls\", \"xlsx\", \"ppt\", \"pptx\", \"pdf\", \"zip\", \"rar\", \"txt\"],\r\n    EXTENSIONSVIDEO: [\"video/quicktime\", \"quicktime\", \"qt\", \"mov\"],\r\n    EXTENSIONSAUDIO: [\"audio/wav\", \"audio\", \"wav\", \"mp3\"]\r\n}, {\r\n\r\n    /**\r\n     * Update or init the element data\r\n     * @param {} data\r\n     */\r\n    initializeData: function (data) {\r\n        // Call base\r\n        var self = this;\r\n        this._super(data);\r\n\r\n        var maxFileSizeOfProperty = Number(this.properties.maxSize) || 1048576;\r\n        var maxFileSizeOfUser = typeof (BIZAGI_SETTINGS) !== \"undefined\" && typeof (BIZAGI_SETTINGS.UploadMaxFileSize) !== \"undefined\" ? Number(BIZAGI_SETTINGS.UploadMaxFileSize) : 1048576;\r\n\r\n        this.properties.maxSize = maxFileSizeOfProperty < maxFileSizeOfUser ? maxFileSizeOfProperty : maxFileSizeOfUser;\r\n\r\n        this.updateFilesCount();\r\n    },\r\n    /**\r\n     * Method to render items\r\n     * @returns {*|jQuery}\r\n     */\r\n    renderItem: function (template, data) {\r\n        var self = this;\r\n        var items = \"\";\r\n\r\n        // Render template\r\n        var html = $.fasttmpl(template, data);\r\n\r\n        // Render current children\r\n        for (var i = 0; i < self.files.length; i++) {\r\n            var file = self.files[i];\r\n            if(file.status && file.status !== \"deleted\" && file.status !== \"new-deleted\"){\r\n                var item = self.renderUploadItem(file, i);\r\n                items += item;\r\n            }\r\n        }\r\n\r\n        html = self.replaceFilesHtml(html, items);\r\n\r\n        return html;\r\n    },\r\n\r\n    /**\r\n     * Method to customize the render's behaviour to add handlers when the control is readonly\r\n     */\r\n    configureHandlersReadOnly: function () {\r\n        var self = this;\r\n        var $control = self.getControl();\r\n\r\n        // Handler to download the file\r\n        $(\"ul.bz-files\", $control).on(\"click\", \".bz-file .bz-file-name\", function () {\r\n            var item = $(this).parent(\".bz-file\");\r\n            self.openOfflineFile(item);\r\n        });\r\n    },\r\n\r\n    /**\r\n     * Method to configure the actions with control\r\n     * @return {}\r\n     */\r\n    attachEvents: function () {\r\n        var self = this;\r\n        var $control = self.getControl();\r\n\r\n        // Attach all events\r\n        this.$contentFile.off(\"click\").on(\"click\", function (evt) {\r\n            if(self.isNative)\r\n                self.$nativeFile.click();\r\n            else\r\n                self.$inputFile.click();\r\n                self.$inputFile.off(\"change\").on(\"change\", function(){\r\n                    self.handlerWebUploadFile();\r\n                });\r\n        });\r\n\r\n        // Handler to download the file\r\n        $(\"ul.bz-files\", $control).on(\"click\", \".bz-file .bz-file-name\", function () {\r\n            var item = $(this).parent(\".bz-file\");\r\n            self.openOfflineFile(item);\r\n        });\r\n\r\n        // Attach delete option & Removes a file from the upload control\r\n        $(\"ul.bz-files\", $control).on(\"click\", \".bz-file .bz-icn\", function () {\r\n            var item = $(this).parent(\".bz-file\");\r\n            self.removeOfflineFile(item);\r\n        });\r\n\r\n        if (self.isNative) {\r\n            // Upload files\r\n            this.$nativeFile.off(\"click\").actionSheet({\r\n                actions: self.getUploadChoices(),\r\n                actionClicked: function (action) {\r\n                    // this.getBoundingClientRect()\r\n                    self.handlerUploadFile(action.guid);\r\n                },\r\n                appear: function (action) {\r\n                    self.triggerGlobalHandler(\"closeModalValidationMessage\", {});\r\n                    self.triggerGlobalHandler(\"modalViewDidAppear\", {});\r\n                },\r\n                cancelClicked: function (action) {\r\n                    self.triggerGlobalHandler(\"modalViewDidDisappear\", {});\r\n                }\r\n            });\r\n        }\r\n    },\r\n\r\n    //Only should be used for testing purposes\r\n    handlerWebUploadFile: function(){\r\n        var self = this;\r\n        var dataFile = self.$inputFile[0].files[0];\r\n        \r\n        var fileId = bizagi.util.randomNumber();\r\n        var fileName, mimeType;\r\n        \r\n        $.when(self.getBlobFromPath(dataFile))\r\n        .then( function(blob){            \r\n            bizagi.loading.start();\r\n            mimeType = blob.type;\r\n            fileName = blob.name;\r\n            return self.saveOfflineFile(blob, fileId, mimeType);\r\n        }).then( function(saveResponse){\r\n            self.onUploadOfflineFileCompleted(fileName, mimeType, fileId);\r\n        }).always( function(){\r\n            bizagi.loading.stop();\r\n        })\r\n        self.$inputFile[0].value = \"\";\r\n    },\r\n\r\n    /**\r\n     * Handler of upload image\r\n     * @param {} ordinal\r\n     * @returns {}\r\n     */\r\n    handlerUploadFile: function (ordinal) {\r\n        var self = this;\r\n        var actionSelected = ordinal || 0;\r\n        switch (actionSelected) {\r\n            case 2:\r\n                navigator.camera.getPicture(function (dataImage) {\r\n                    self.dataImage = dataImage;\r\n                    var extensions = self.Class.EXTENSIONSIMG.concat(self.Class.EXTENSIONSVIDEO);\r\n\r\n                    bizagi.loading.start();\r\n\r\n                    $.when(bizagi.util.media.checkMaxSize(dataImage, self.properties))\r\n                        .then(function () {\r\n                            //Gets the real properties for the file\r\n                            return $.when(bizagi.util.media.getFileDataInfo(self.dataImage))\r\n                                .then(function (fileData) {\r\n                                    self.fileProperties = fileData;\r\n                                    if (bizagi.util.media.checkFileTypes(fileData, self.properties, extensions)) {\r\n                                        return self.saveImage(self.dataImage);\r\n                                    }\r\n                                });\r\n                        }).always(function () {\r\n                        bizagi.loading.stop();\r\n                    });\r\n\r\n                }, self.onFail.bind(self), {\r\n                    quality: self.Class.QUALITY_PICTURE,\r\n                    sourceType: Camera.PictureSourceType.PHOTOLIBRARY,\r\n                    correctOrientation: true\r\n                });\r\n                break;\r\n            case 1:\r\n                navigator.camera.getPicture(function (dataImage) {\r\n                        bizagi.loading.start();\r\n\r\n                        $.when(bizagi.util.media.checkMaxSize(dataImage, self.properties)).then(function () {\r\n                            return $.when(bizagi.util.media.getFileDataInfo(dataImage)).then(function (fileData) {\r\n                                self.fileProperties = fileData;\r\n                                return self.saveImage(dataImage);\r\n                            });\r\n                        }).always(function () {\r\n                            bizagi.loading.stop();\r\n                        });\r\n                    },\r\n                    self.onFail.bind(self), {\r\n                        quality: self.Class.QUALITY_PICTURE,\r\n                        sourceType: navigator.camera.PictureSourceType.CAMERA,\r\n                        mediaType: navigator.camera.MediaType.PICTURE,\r\n                        destinationType: Camera.DestinationType.FILE_URI,\r\n                        correctOrientation: true,\r\n                        targetWidth: 1280,\r\n                        targetHeight: 960\r\n                    });\r\n                break;\r\n            default:\r\n                console.log(\"The option is not supported!\")\r\n                break;\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Add the interactions to the upload control items\r\n     * @return {}\r\n     */\r\n    addInteractions: function () {\r\n        var self = this;\r\n        var control = self.getControl();\r\n\r\n        // Attach delete option & Removes a file from the upload control\r\n        $(\"ul.bz-files\", control).on(\"click\", \".bz-file .bz-file__delete\", function () {\r\n            var item = $(this).parent(\".bz-file\");\r\n            self.removeOfflineFile(item);\r\n        });\r\n    },\r\n\r\n    /**\r\n     * Collect Data\r\n     * @param {} renderValues\r\n     * @returns {}\r\n     */\r\n    collectData: function (renderValues) {\r\n        var self = this;\r\n\r\n        if (self.properties.originalValue === self.files) {\r\n            return;\r\n        }\r\n\r\n        if (self.filesCount > 0) {\r\n            renderValues[self.properties.xpath] = self.files;\r\n        } else if (self.properties.method === \"delete\") {\r\n            renderValues[self.properties.xpath] = [];\r\n            delete self.properties.method;\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Send image using HTTP\r\n     * @param {} dataImage\r\n     */\r\n    saveImage: function (dataImage) {\r\n        var self = this;\r\n        bizagi.loading.start();\r\n\r\n        var fileId = bizagi.util.randomNumber();\r\n        var fileName = self.fileProperties.name\r\n        var mimeType;\r\n\r\n        //TODO: SWAT Check if the file already exists\r\n        $.when(self.getBlobFromPath(dataImage))\r\n        .always( function(){\r\n            bizagi.loading.stop();\r\n        })\r\n        .then( function(blob){\r\n            mimeType = blob.type;\r\n            fileName = blob.name;\r\n            return self.saveOfflineFile(blob, fileId, mimeType);\r\n        }).then( function(saveResponse){            \r\n            self.onUploadOfflineFileCompleted(fileName, mimeType, fileId);            \r\n        });\r\n        self.$inputFile[0].value = \"\";\r\n    },\r\n\r\n    /**\r\n     * Check allow extensions and define possible choices\r\n     * Only support to image in offline capability\r\n     * @returns {}\r\n     */\r\n    checkFileExtensions: function () {\r\n        var self = this;\r\n        var validExtensions = self.properties.validExtensions || \"\";\r\n\r\n        self.validOptions = {video: false, image: false, file: false};\r\n\r\n        // Preprocess the extensions string\r\n        validExtensions = validExtensions.replace(/\\s+/g, \"\").toLowerCase();\r\n\r\n        if (typeof (validExtensions) === \"undefined\" || validExtensions === \"\") {\r\n            self.validOptions.image = true;\r\n        } else {\r\n            validExtensions = validExtensions.split(\";\");\r\n\r\n            if (validExtensions.length === 1 && validExtensions[0].indexOf(\"*.*\") !== -1) {\r\n                self.validOptions.image = true;\r\n            } else {\r\n                for (var i = 0, length = validExtensions.length; i < length; i++) {\r\n                    validExtensions[i] = validExtensions[i].replace(\"*.\", \"\");\r\n\r\n                    if (self.Class.EXTENSIONSIMG.toString().indexOf(validExtensions[i]) >= 0) {\r\n                        self.validOptions.image = true;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        // Media is not supported then upload control is disabled\r\n        if (!self.validOptions.image) {\r\n            $(self.$contentFile).addClass(\"bz-file-upload__container--hidden\");\r\n        }\r\n\r\n        // Limit of files is reached then upload control is disabled\r\n        if (self.isMaxFilesReached() || !bizagi.util.media.fileAPISupported() ) {\r\n            $(this.$contentFile).addClass(\"bz-file-upload__container--hidden\");\r\n        }\r\n    },\r\n\r\n    /**\r\n     * onUploadOfflineFileCompleted\r\n     * @param {} result\r\n     */\r\n    onUploadOfflineFileCompleted: function (fileName, mimeType, fileId) {\r\n        var self = this;\r\n        var $wrapper = $(\".bz-files\", self.getControl());\r\n\r\n        var fileUploaded = {\r\n            id: fileId,\r\n            fileName: fileName,\r\n            mimeType: mimeType,\r\n            status: \"new\"\r\n        };\r\n\r\n        // Locate it before the upload wrapper\r\n        var newItem = self.renderUploadItem(fileUploaded, self.files.length);\r\n        $wrapper.append(newItem);\r\n\r\n        // Increment counter\r\n        self.filesCount = self.filesCount + 1;\r\n\r\n        // Copy the files value but not its reference\r\n        var files = self.files.slice();\r\n\r\n        //Add the new item to this temporal array\r\n        files.push(fileUploaded);\r\n\r\n        // Update value\r\n        self.setValue(files, false);\r\n\r\n        // Check maxFiles\r\n        self.checkMaxFiles(); \r\n    },\r\n\r\n    /**\r\n     * Renders a single upload item\r\n     * @param file\r\n     * @returns {*|jQuery}\r\n     */\r\n    renderUploadItem: function (file, index) {\r\n        var self = this;\r\n        var itemTemplate = self.getTemplateItemName();\r\n        var template = self.renderFactory.getTemplate(itemTemplate);\r\n\r\n        var html = $.fasttmpl(template, {\r\n            url: \"javascript:void(0);\",\r\n            id: file.id,\r\n            allowDelete: self.properties.allowDelete || false,\r\n            filename: file.fileName,\r\n            index: index\r\n        });\r\n\r\n        return html;\r\n    },\r\n\r\n    /**\r\n     * This render cannot be sent because it is full ajax\r\n     * @returns {}\r\n     */\r\n    canBeSent: function () {\r\n        return true;\r\n    },\r\n\r\n    /**\r\n     * Fail action\r\n     * @param {} evt\r\n     * @returns {}\r\n     */\r\n    failReadFile: function (evt) {\r\n        try {\r\n            bizagi.log(\"Error code: \" + evt.target.error.code);\r\n        } catch (e) {\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Fail action\r\n     * @param {} error\r\n     * @returns {}\r\n     */\r\n    onFail: function (error) {\r\n        this._super(error);\r\n    },\r\n\r\n    /**\r\n     * Method to remove item\r\n     * @param item\r\n     * @param id\r\n     */\r\n    removeOfflineFile: function (item) {\r\n        var self = this;\r\n        var file = item.data();\r\n        var fileIndex = file.index;\r\n\r\n        // Mark the file as deleted\r\n        var fileValue = self.files[fileIndex];\r\n        if( !fileValue){\r\n            //Nothing to do\r\n            return;\r\n        }\r\n        if(fileValue.status !== \"new\"){\r\n            fileValue.status = \"deleted\";\r\n        }\r\n        else {\r\n            fileValue.status = \"new-deleted\";\r\n        }        \r\n\r\n        // Remove item\r\n        item.hide();\r\n        item.remove();\r\n\r\n        // Update value\r\n        self.setValue(self.files, false);\r\n\r\n        // Check maxFiles\r\n        self.checkMaxFiles();\r\n\r\n        // Trigger change\r\n        self.triggerRenderChange();\r\n    },\r\n\r\n    /**\r\n     * Update the filesCount attribute based on the status (new|deleted) of each file\r\n     */\r\n    updateFilesCount: function(){\r\n        var self = this;\r\n        var files = this.properties.value;\r\n\r\n        for(var i=0; i < files.length; i++){\r\n            var status = files[i].status;\r\n            if( status && status.includes(\"deleted\") ) {\r\n                self.filesCount= self.filesCount - 1;\r\n            }\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Sets the internal value\r\n     * @param value\r\n     * @param triggerEvents\r\n     */\r\n    setValue: function (value, triggerEvents) {\r\n        var self = this;\r\n        self._super(value, triggerEvents);\r\n        self.updateFilesCount();\r\n        if (self.filesCount === 0) {\r\n            self.properties.method = \"delete\";\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Check if the maximum number of files than can be uploaded has been reached\r\n     * @returns {}\r\n     */\r\n    isMaxFilesReached: function () {\r\n        var maxFiles = this.properties.maxfiles;\r\n        return maxFiles !== 0 && (this.filesCount >= maxFiles);\r\n    },\r\n\r\n    openOfflineFile: function(item) {\r\n        var self = this;\r\n        var file = item.data();\r\n        var dataIndex = file.index;\r\n        var selectedValue = typeof (dataIndex) == \"number\" ? self.properties.value[dataIndex] : null;\r\n        if (selectedValue) {\r\n            var formParams = self.getFormParams();\r\n            var getFileParams = {\r\n                idCase: formParams.idCase,\r\n                idWorkitem: formParams.idWorkitem,\r\n                id: self.properties.xpath + '.' + selectedValue.id,\r\n                offlineType: formParams.offlineType\r\n            }\r\n            bizagi.loading.start();\r\n            $.when(self.dataService.getOfflineFile( getFileParams, \"blob\", selectedValue.mimeType))\r\n            .done( function(binaryFile){\r\n                var fileName = file.title;\r\n                bizagi.util.media.handleBinaryFile( binaryFile, fileName);\r\n            })\r\n            .fail( function(error){\r\n                console.log(\"Error opening offline file\", error);\r\n            })\r\n            .always( function() {\r\n                bizagi.loading.stop();\r\n            });\r\n        }\r\n    },\r\n\r\n    getBlobFromPath: function(path){\r\n        var blobPromise = new $.Deferred();\r\n        var self = this;\r\n\r\n        if(self.isNative){\r\n            var fileName = self.fileProperties.name;            \r\n            if (!bizagi.util.isAndroidDevice()) {\r\n                path = bizagi.util.media.normalizeIOSFilePath(path);\r\n            }\r\n            else{\r\n                // Fix android 4.4 getting images from recent folder\r\n                path = bizagi.util.media.getImagePath(path);\r\n            }\r\n            \r\n            var errorHandler = function (error) {\r\n                console.log('Error converting path to blob', error);  \r\n                blobPromise.reject(error);\r\n            };\r\n    \r\n            window.resolveLocalFileSystemURL(path, function (fileEntry) {\r\n                fileEntry.file(function (file) {    \r\n                    var reader = new FileReader();\r\n                    reader.onloadend = function () {\r\n                        var blob = new Blob([this.result], {type: file.type});\r\n                        blob.name = fileName;\r\n                        blobPromise.resolve(blob);\r\n                    }\r\n                    reader.readAsArrayBuffer(file);\r\n                }, errorHandler);\r\n            }, errorHandler);\r\n        }\r\n        else {\r\n            //In browser is the File\r\n            blobPromise.resolve(path);\r\n        }\r\n        return blobPromise;\r\n    },\r\n\r\n    saveOfflineFile: function(blobFile, fileId, mimeType){\r\n        var self = this;\r\n        var formParams = self.getFormParams();\r\n        var parameters = {\r\n            idCase: formParams.idCase,\r\n            idWorkitem: formParams.idWorkitem,\r\n            id: self.properties.xpath + '.' + fileId,\r\n            operationType: \"edition\",\r\n            offlineType: formParams.offlineType\r\n        }        \r\n        return self.dataService.saveOfflineFile(parameters, blobFile, mimeType);\r\n    }\r\n});\r\n","/**\r\n *   Name: Bizagi Tablet Render upload Extension\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will redefine the label render class to adjust to tablets devices\r\n */\r\n\r\n// Extends itself\r\nbizagi.rendering.tablet.upload.extend(\"bizagi.rendering.tablet.upload.offline.old\", {\n    QUALITY_PICTURE: 50,\r\n    LIMIT: 1, // The maximum number of media in the device user can record in a single capture operation.\r\n    EXTENSIONSIMG: [\"image/jpeg\", \"jpeg\", \"image\", \"png\", \"jpg\", \"bmp\"],\r\n    EXTENSIONSFILE: [\"doc\", \"docx\", \"xls\", \"xlsx\", \"ppt\", \"pptx\", \"pdf\", \"zip\", \"rar\", \"txt\"],\r\n    EXTENSIONSVIDEO: [\"video/quicktime\", \"quicktime\", \"qt\", \"mov\"],\r\n    EXTENSIONSAUDIO: [\"audio/wav\", \"audio\", \"wav\", \"mp3\"]\r\n}, {\r\n\r\n    /**\r\n     * Update or init the element data\r\n     * @param {} data\r\n     */\r\n    initializeData: function (data) {\r\n        // Call base\r\n        this._super(data);\r\n\r\n        var maxFileSizeOfProperty = Number(this.properties.maxSize) || 1048576;\r\n        var maxFileSizeOfUser = typeof (BIZAGI_SETTINGS) !== \"undefined\" && typeof (BIZAGI_SETTINGS.UploadMaxFileSize) !== \"undefined\" ? Number(BIZAGI_SETTINGS.UploadMaxFileSize) : 1048576;\r\n\r\n        this.properties.maxSize = maxFileSizeOfProperty < maxFileSizeOfUser ? maxFileSizeOfProperty : maxFileSizeOfUser;\r\n    },\r\n    /**\r\n     * Method to render items\r\n     * @returns {*|jQuery}\r\n     */\r\n    renderItem: function (template, data) {\r\n        var self = this;\r\n        var items = \"\";\r\n\r\n        // Render template\r\n        var html = $.fasttmpl(template, data);\r\n\r\n        // Render current children\r\n        for (var i = 0; i < self.filesCount; i++) {\r\n            var item = self.renderUploadItem(self.files[i], i);\r\n            items += item;\r\n        }\r\n\r\n        html = self.replaceFilesHtml(html, items);\r\n\r\n        return html;\r\n    },\r\n\r\n    /**\r\n     * Method to customize the render's behaviour to add handlers when the control is readonly\r\n     */\r\n    configureHandlersReadOnly: function () {\r\n        var self = this;\r\n        var $control = self.getControl();\r\n\r\n        // Handler to download the file\r\n        $(\"ul.bz-files\", $control).on(\"click\", \".bz-file .bz-file-name\", function () {\r\n            var item = $(this).parent(\".bz-file\");\r\n\r\n            self.openOfflineFile(item);\r\n        });\r\n    },\r\n\r\n    /**\r\n     * Method to configure the actions with control\r\n     * @return {}\r\n     */\r\n    attachEvents: function () {\r\n        var self = this;\r\n        var $control = self.getControl();\r\n\r\n        // Attach all events\r\n        this.$contentFile.off(\"click\").on(\"click\", function (evt) {\r\n            self.$nativeFile.click();\r\n        });\r\n\r\n        // Handler to download the file\r\n        $(\"ul.bz-files\", $control).on(\"click\", \".bz-file .bz-file-name\", function () {\r\n            var item = $(this).parent(\".bz-file\");\r\n\r\n            self.openOfflineFile(item);\r\n        });\r\n\r\n        // Attach delete option & Removes a file from the upload control\r\n        $(\"ul.bz-files\", $control).on(\"click\", \".bz-file .bz-icn\", function () {\r\n            var item = $(this).parent(\".bz-file\");\r\n\r\n            self.removeOfflineFile(item);\r\n\r\n        });\r\n\r\n        if (self.isNative) {\r\n            // Upload files\r\n            this.$nativeFile.off(\"click\").actionSheet({\r\n                actions: self.getUploadChoices(),\r\n                actionClicked: function (action) {\r\n                    // this.getBoundingClientRect()\r\n                    self.handlerUploadFile(action.guid);\r\n                },\r\n                appear: function (action) {\r\n                    self.triggerGlobalHandler(\"modalViewDidAppear\", {});\r\n                },\r\n                cancelClicked: function (action) {\r\n                    self.triggerGlobalHandler(\"modalViewDidDisappear\", {});\r\n                }\r\n            });\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Handler of upload image\r\n     * @param {} ordinal\r\n     * @returns {}\r\n     */\r\n    handlerUploadFile: function (ordinal) {\r\n        var self = this;\r\n        var actionSelected = ordinal || 0;\r\n\r\n        switch (actionSelected) {\r\n            case 2:\r\n\r\n                navigator.camera.getPicture(function (dataImage) {\r\n                    self.dataImage = dataImage;\r\n                    var extensions = self.Class.EXTENSIONSIMG.concat(self.Class.EXTENSIONSVIDEO);\r\n\r\n                    bizagi.loading.start();\r\n\r\n                    $.when(bizagi.util.media.checkMaxSize(dataImage, self.properties))\r\n                        .then(function () {\r\n                            //Gets the real properties for the file\r\n                            return $.when(bizagi.util.media.getFileDataInfo(self.dataImage))\r\n                                .then(function (fileData) {\r\n                                    self.fileProperties = fileData;\r\n\r\n                                    if (bizagi.util.media.checkFileTypes(fileData, self.properties, extensions)) {\r\n                                        return self.saveImage(self.dataImage);\r\n                                    }\r\n                                });\r\n                        }).always(function () {\r\n                        bizagi.loading.stop();\r\n                    });\r\n\r\n                }, self.onFail.bind(self), {\r\n                    quality: self.Class.QUALITY_PICTURE,\r\n                    sourceType: Camera.PictureSourceType.PHOTOLIBRARY\r\n                });\r\n                break;\r\n            case 1:\r\n                navigator.camera.getPicture(function (dataImage) {\r\n                        bizagi.loading.start();\r\n\r\n                        $.when(bizagi.util.media.checkMaxSize(dataImage, self.properties)).then(function () {\r\n                            return $.when(bizagi.util.media.getFileDataInfo(dataImage)).then(function (fileData) {\r\n                                self.fileProperties = fileData;\r\n                                return self.saveImage(dataImage);\r\n                            });\r\n                        }).always(function () {\r\n                            bizagi.loading.stop();\r\n                        });\r\n                    },\r\n                    self.onFail.bind(self), {\r\n                        quality: self.Class.QUALITY_PICTURE,\r\n                        sourceType: navigator.camera.PictureSourceType.CAMERA,\r\n                        mediaType: navigator.camera.MediaType.PICTURE,\r\n                        destinationType: Camera.DestinationType.FILE_URI,\r\n                        correctOrientation: true,\r\n                        targetWidth: 1280,\r\n                        targetHeight: 960\r\n                    });\r\n                break;\r\n            default:\r\n                bizagi.log(\"The option is not supported!\")\r\n                break;\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Add the interactions to the upload control items\r\n     * @return {}\r\n     */\r\n    addInteractions: function () {\r\n        var self = this;\r\n        var control = self.getControl();\r\n\r\n        // Attach delete option & Removes a file from the upload control\r\n        $(\"ul.bz-files\", control).on(\"click\", \".bz-file .bz-file__delete\", function () {\r\n            var context = $(this);\r\n            var item = $(this).parent(\".bz-file\");\r\n            var file = item.data();\r\n            var fileIndex = item.index();\r\n\r\n            // Substract counter\r\n            self.filesCount = self.filesCount - 1;\r\n\r\n            if (self.filesCount === 0) {\r\n                self.properties.method = \"delete\";\r\n            }\r\n\r\n            // Remove from local collection\r\n            self.files = $.grep(self.files, function (fileItem, index) {\r\n                return (index !== fileIndex && fileItem !== file.name);\r\n            });\r\n\r\n            // Remove item\r\n            item.hide();\r\n            item.remove();\r\n\r\n            // Update value\r\n            self.setValue(self.files, false);\r\n\r\n            // Check maxFiles\r\n            self.checkMaxFiles();\r\n\r\n            // Trigger change\r\n            self.triggerRenderChange();\r\n        });\r\n    },\r\n\r\n    /**\r\n     * Collect Data\r\n     * @param {} renderValues\r\n     * @returns {}\r\n     */\r\n    collectData: function (renderValues) {\r\n        var self = this;\r\n\r\n        if (self.filesCount > 0) {\r\n            renderValues[self.properties.xpath] = self.files;\r\n        } else if (self.properties.method === \"delete\") {\r\n            renderValues[self.properties.xpath] = [];\r\n\r\n            delete self.properties.method;\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Send image using HTTP\r\n     * @param {} dataImage\r\n     */\r\n    saveImage: function (dataImage) {\r\n        var self = this;\r\n\r\n        // Fix android 4.4 getting images from recent folder\r\n        dataImage = bizagi.util.media.getImagePath(dataImage);\r\n\r\n        // Load image\r\n        self.getDataUri(dataImage, function (dataUrl) {\r\n            var fileExtension = self.fileProperties ? self.fileProperties.extension : \"\";\r\n            var fileName = bizagi.util.uniqueID() + fileExtension;\r\n\r\n            self.onUploadOfflineFileCompleted(fileName, dataUrl);\r\n        });\r\n    },\r\n\r\n    /**\r\n     * Check allow extensions and define possible choices\r\n     * Only support to image in offline capability\r\n     * @returns {}\r\n     */\r\n    checkFileExtensions: function () {\r\n        var self = this;\r\n        var validExtensions = self.properties.validExtensions || \"\";\r\n\r\n        self.validOptions = {video: false, image: false, file: false};\r\n\r\n        // Preprocess the extensions string\r\n        validExtensions = validExtensions.replace(/\\s+/g, \"\").toLowerCase();\r\n\r\n        if (typeof (validExtensions) === \"undefined\" || validExtensions === \"\") {\r\n            self.validOptions.image = true;\r\n        } else {\r\n            validExtensions = validExtensions.split(\";\");\r\n\r\n            if (validExtensions.length === 1 && validExtensions[0].indexOf(\"*.*\") !== -1) {\r\n                self.validOptions.image = true;\r\n            } else {\r\n                for (var i = 0, length = validExtensions.length; i < length; i++) {\r\n                    validExtensions[i] = validExtensions[i].replace(\"*.\", \"\");\r\n\r\n                    if (self.Class.EXTENSIONSIMG.toString().indexOf(validExtensions[i]) >= 0) {\r\n                        self.validOptions.image = true;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        // Media is not supported then upload control is disabled\r\n        if (!self.validOptions.image) {\r\n            $(self.$contentFile).addClass(\"bz-file-upload__container--hidden\");\r\n        }\r\n\r\n        // Limit of files is reached then upload control is disabled\r\n        if (self.isMaxFilesReached() || (!self.isNative && (!bizagi.util.media.fileAPISupported() || self.isOfflineForm))) {\r\n            $(this.$contentFile).addClass(\"bz-file-upload__container--hidden\");\r\n        }\r\n    },\r\n\r\n    /**\r\n     * onUploadOfflineFileCompleted\r\n     * @param {} result\r\n     */\r\n    onUploadOfflineFileCompleted: function (name, dataImage) {\r\n        var self = this;\r\n        var $wrapper = $(\".bz-files\", self.getControl());\r\n        var dataUrlToSave = dataImage.replace(/^data:.*;base64,/, \"\");\r\n        var dataMimeType = dataImage.match(/data:([a-zA-Z0-9]+\\/[a-zA-Z0-9-.+]+).*,.*/);\r\n        dataMimeType = (dataMimeType && dataMimeType.length) ? dataMimeType[1] : \"image/jpeg\";\r\n\r\n        var fileToSave = [\r\n            {xpath: \"fileName\", DataType: \"15\", value: name},\r\n            {xpath: \"data\", DataType: \"19\", value: dataUrlToSave},\r\n            {xpath: \"mimeType\", DataType: \"15\", value: dataMimeType}\r\n        ];\r\n\r\n        // Locate it before the upload wrapper\r\n        var newItem = self.renderUploadItem(fileToSave, self.filesCount);\r\n        $wrapper.append(newItem);\r\n\r\n        // Increment counter\r\n        self.filesCount = self.filesCount + 1;\r\n\r\n        // Copy the files value but not its reference\r\n        var files = self.files.slice();\r\n\r\n        //Add the new item to this temporal array\r\n        files.push(fileToSave);\r\n\r\n        // Update value\r\n        self.setValue(files, false);\r\n\r\n        // Check maxFiles\r\n        self.checkMaxFiles();\r\n    },\r\n\r\n    /**\r\n     * Renders a single upload item\r\n     * @param file\r\n     * @returns {*|jQuery}\r\n     */\r\n    renderUploadItem: function (file, index) {\r\n        var self = this;\r\n        var itemTemplate = self.getTemplateItemName();\r\n        var template = self.renderFactory.getTemplate(itemTemplate);\r\n\r\n        var html = $.fasttmpl(template, {\r\n            url: \"javascript:void(0);\",\r\n            id: bizagi.util.randomNumber(),\r\n            allowDelete: self.properties.allowDelete || false,\r\n            filename: file[0].value,\r\n            index: index\r\n        });\r\n\r\n        return html;\r\n    },\r\n\r\n    /**\r\n     * This render cannot be sent because it is full ajax\r\n     * @returns {}\r\n     */\r\n    canBeSent: function () {\r\n        return true;\r\n    },\r\n\r\n    /**\r\n     * Fail action\r\n     * @param {} evt\r\n     * @returns {}\r\n     */\r\n    failReadFile: function (evt) {\r\n        try {\r\n            bizagi.log(\"Error code: \" + evt.target.error.code);\r\n        } catch (e) {\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Fail action\r\n     * @param {} error\r\n     * @returns {}\r\n     */\r\n    onFail: function (error) {\r\n        this._super(error);\r\n    },\r\n\r\n    /**\r\n     * Create an offline image\r\n     * @param {} context\r\n     * @param {} url\r\n     * @param {} callback\r\n     */\r\n    getDataUri: function (path, callback) {\r\n        var xhr = new XMLHttpRequest();\r\n\r\n        try {\r\n\r\n            xhr.onload = function () {\r\n                var reader = new FileReader();\r\n\r\n                reader.onloadend = function () {\r\n                    var content = reader.result;\r\n                    callback(content);\r\n                }\r\n                reader.readAsDataURL(xhr.response);\r\n            };\r\n\r\n            xhr.open(\"GET\", path);\r\n            xhr.responseType = \"blob\";\r\n            xhr.send();\r\n\r\n        } catch (error) {\r\n            callback(\"\");\r\n        }\r\n    },\r\n\r\n\r\n    /**\r\n     * Method to remove item\r\n     * @param item\r\n     * @param id\r\n     */\r\n    removeOfflineFile: function (item) {\r\n        var self = this;\r\n        var file = item.data();\r\n        var fileIndex = item.index();\r\n\r\n        // Subtract counter\r\n        self.filesCount = self.filesCount - 1;\r\n\r\n        if (self.filesCount === 0) {\r\n            self.properties.method = \"delete\";\r\n        }\r\n\r\n        // Remove from local collection\r\n        self.files = $.grep(self.files, function (fileItem, index) {\r\n            return (index !== fileIndex && fileItem !== file.name);\r\n        });\r\n\r\n        // Remove item\r\n        item.hide();\r\n        item.remove();\r\n\r\n        // Update value\r\n        self.setValue(self.files, false);\r\n\r\n        // Check maxFiles\r\n        self.checkMaxFiles();\r\n\r\n        // Trigger change\r\n        self.triggerRenderChange();\r\n    },\r\n\r\n    openOfflineFile: function(item) {\r\n        var self = this;\r\n        var file = item.data();\r\n        var dataIndex = file.index;\r\n        var selectedValue = typeof (dataIndex) == \"number\" ? self.properties.value[dataIndex] : null;\r\n\r\n        if (selectedValue) {\r\n            var fileData = selectedValue[1] ? selectedValue[1].value : \"\";\r\n            var fileMimeType = selectedValue[2] ? selectedValue[2].value : \"image/jpeg\";\r\n\r\n            bizagi.loading.start();\r\n            $.when(bizagi.util.media.openOfflineFile(fileData, fileMimeType, file.title)).fail(function (error) {\r\n                bizagi.showMessageBox(self.getResource(\"workportal-widget-admin-language-error\"));\r\n            }).always(function () {\r\n                bizagi.loading.stop();\r\n            });\r\n        }\r\n    }\r\n});\r\n","/**\r\n *   Name: Bizagi Tablet Render Grid Extension\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will redefine the grid render class to adjust to tablet devices\r\n */\r\n\r\n// Extends from render tablet base\r\nbizagi.rendering.tablet.render.extend(\"bizagi.rendering.tablet.grid\", bizagi.rendering.grid.prototype);\r\n// Extends itself\r\nbizagi.rendering.tablet.grid.extend(\"bizagi.rendering.tablet.grid\", {\r\n    GRID_PAGE_SIZE: 10\r\n}, {\r\n    /**\r\n     * Constructor\r\n     * @param params\r\n     */\r\n    init: function (params) {\r\n        var self = this;\r\n        var data = params.data;\r\n\r\n        // Create a single instance for each cell\r\n        data.properties.singleInstance = false;\r\n\r\n        // Call base\r\n        this._super(params);\r\n\r\n        // Create a data-structure to keep track of each cell properties\r\n        this.cellMetadata = {};\r\n\r\n        // Check if offline forms is supported\r\n        this.isOfflineForm = bizagi.util.isOfflineForm({context: self});\r\n\r\n        // Fill default properties\r\n        var properties = this.properties;\r\n        var form = self.getFormContainer();\r\n\r\n        // If not helptext configured, Just apply display-type: vertical, align it to the left\r\n        if (self.properties.helpText && self.properties.helpText != null && self.properties.helpText != \"\") {\r\n            properties.displayType = \"value\";\r\n        } else {\r\n            properties.displayType = \"vertical\";\r\n        }\r\n\r\n        properties.labelAlign = \"left\";\r\n\r\n        if (properties.groupBy || properties.groupSummary) {\r\n            // Add warning\r\n            form.addWarning(self.getResource(\"render-tablet-warning-grid\"));\r\n        }\r\n    },\r\n\r\n    /* method overrides\r\n    *  from base or virtual\r\n    */\r\n\r\n    /**\r\n     * Update or init the element data\r\n     * @param data\r\n     */\r\n    initializeData: function (data) {\r\n\r\n        // Create a single instance for each cell\r\n        data.properties.singleInstance = false;\r\n\r\n        // Call base\r\n        this._super(data);\r\n    },\r\n\r\n    /**\r\n     * Updates manually the affected cell\r\n     */\r\n    updateAffectedCellManually: function () {\r\n    },\r\n\r\n    /**\r\n     * Get the row index using the key as a reference\r\n     */\r\n    getRowIndexByKey: function () {\r\n    },\r\n\r\n    /**\r\n     * Template method to implement in each device to customize each render after processed\r\n     */\r\n    postRender: function () {\r\n        var self = this;\r\n        var properties = self.properties;\r\n        var control = self.getControl();\r\n\r\n        self.initialLoadDone = false;\r\n\r\n        // Call base \r\n        self._super();\r\n\r\n        // Find component holder\r\n        self.grid = $(\">div\", control);\r\n\r\n        // Hide common label\r\n        self.getLabel().hide();\r\n\r\n        // Grid plugin\r\n        self.applyGridPlugin();\r\n\r\n        // Set initial data\r\n        if (properties.data) {\r\n\r\n            self.updateData(properties.data);\r\n\r\n            // Trigger change in order to start up the actions when the controls is ready\r\n            $.when(self.ready())\r\n                .done(function () {\r\n                    self.triggerRenderChange({changed: false});\r\n                });\r\n        }\r\n\r\n        // Execute pending actions\r\n        self.initialLoadDone = true;\r\n\r\n        for (var i in self.pendingActions) {\r\n            if (self.pendingActions.hasOwnProperty(i)) {\r\n                self.pendingActions[i].method.apply(self, self.pendingActions[i].arguments);\r\n            }\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Method to render non editable values\r\n     * @returns {}\r\n     */\r\n    applyGridPlugin: function () {\r\n        var self = this;\r\n        var properties = self.properties;\r\n        var mode = self.getMode();\r\n        var grid = self.grid;\r\n\r\n        // Build column metadata\r\n        var columns = self.buildColumnModel();\r\n\r\n        var columnsTotalizers = (columns || []).filter(function (item) {\r\n            return (item.summarizeBy);\r\n        });\r\n\r\n        // Apply grid plugin\r\n        grid.bizagi_grid_tablet({\r\n            columns: columns,\r\n            subType: properties.subType || grid,\r\n            title: properties.displayName,\r\n            isOfflineForm: self.isOfflineForm || false,\r\n            mode: mode,\r\n            template: {\r\n                grid: self.renderFactory.getTemplate(\"bizagi.grid.grid\"),\r\n                waiting: self.renderFactory.getTemplate(\"bizagi.grid.waiting\"),\r\n                table: self.renderFactory.getTemplate(\"bizagi.grid.table\"),\r\n                emptyTable: self.renderFactory.getTemplate(\"bizagi.grid.table.empty\"),\r\n                column: self.renderFactory.getTemplate(\"bizagi.grid.column\"),\r\n                specialColumn: self.renderFactory.getTemplate(\"bizagi.grid.column.special\"),\r\n                row: self.renderFactory.getTemplate(\"bizagi.grid.row\"),\r\n                rowButtons: self.renderFactory.getTemplate(\"bizagi.grid.row.buttons\"),\r\n                cell: self.renderFactory.getTemplate(\"bizagi.grid.cell\"),\r\n                specialCell: self.renderFactory.getTemplate(\"bizagi.grid.cell.special\"),\r\n                pager: self.renderFactory.getTemplate(\"bizagi.grid.pager\"),\r\n                buttons: self.renderFactory.getTemplate(\"bizagi.grid.buttons\"),\r\n                dynamicPager: self.renderFactory.getTemplate(\"bizagi.grid.dynamicpager\"),\r\n                totalizer: self.renderFactory.getTemplate(\"bizagi.grid.totalizer\")\r\n            },\r\n            actions: {\r\n                add: properties.allowAdd, //|| properties.inlineAdd,\r\n                edit: (properties.allowEdit && properties.withEditForm && properties.data != null) || (properties.subType === \"adhocGrid\" && properties.allowEdit),\r\n                details: properties.allowDetail,\r\n                remove: properties.allowDelete,\r\n                inlineAdd: false, //properties.inlineAdd,\r\n                allowMore: properties.allowMore,\r\n                enableXlsExport: false,\r\n                enablePdfExport: false,\r\n                hasTotalizer: columnsTotalizers && columnsTotalizers.length > 0 && properties.data.rows.length > 0\r\n            },\r\n            pageRequested: function (ui) {\r\n                if (!self.isExecutionMode()) return;\r\n                if ((self.changes && Object.keys(self.changes).length >= 1)|| (self.exclusiveChanges && Object.keys(self.exclusiveChanges).length >= 1)){\r\n                    $.when(self.getFormContainer().saveForm()).done(function () {\r\n                        self.fetchData(ui.page, ui.sortBy, ui.sortType);\r\n                    });\r\n                } else {\r\n                    self.fetchData(ui.page, ui.sortBy, ui.sortType);\r\n                }\r\n                \r\n            },\r\n            sortRequested: function (ui) {\r\n                if (!self.isExecutionMode()) return;\r\n                self.fetchData(ui.page, ui.sortBy, ui.sortType);\r\n            },\r\n            drawCell: function (ui) {\r\n                return self.drawCell(ui.column, ui.key, ui.value, ui.isNewRow);\r\n            },\r\n            cellReady: function (ui) {\r\n                return self.onCellReady(ui.column, ui.key, ui.cell, ui.isNewRow);\r\n            },\r\n            rowSelected: function (ui) {\r\n                if (!self.isExecutionMode()) return;\r\n                self.triggerHandler(\"rowSelected\", {id: ui.key, data: ui});\r\n            },\r\n            addRow: function (ui) {\r\n                if (!self.isExecutionMode()) return;\r\n                if (self.properties.subType === \"adhocGrid\" || self.properties.inlineAdd) {\r\n                    self.addVirtualRow();\r\n                } else {\r\n                    self.addRow();\r\n                }\r\n            },\r\n            editRow: function (ui) {\r\n                if (!self.isExecutionMode()) return;\r\n                if (self.properties.subType === \"adhocGrid\") {\r\n                    self.editVirtualRow(ui.key);\r\n                } else {\r\n                    self.editRow(ui.key);\r\n                }\r\n            },\r\n            deleteRow: function (ui) {\r\n                if (!self.isExecutionMode()) return;\r\n                self.deleteRow(ui.key);\r\n            },\r\n            moreRows: function (ui) {\r\n                if (!self.isExecutionMode()) return;\r\n                self.moreRows(ui);\r\n            },\r\n            showFormDetails: function (ui) {\r\n                self.showDetailForm(ui.key);\r\n            },\r\n            showMore: function (ui) {\r\n                if (!self.isExecutionMode()) return;\r\n                self.showMore(ui.key);\r\n            },\r\n            totalData: function (ui) {\r\n                if (!self.isExecutionMode()) return;\r\n                self.onTotalData();\r\n            }\r\n        });\r\n\r\n    },\r\n\r\n    /**\r\n     * Method to render non editable values\r\n     */\r\n    postRenderReadOnly: function () {\r\n        // Do the same as the post-render            \r\n        this.postRender();\r\n    },\r\n\r\n    /**\r\n     *   Creates the column model required to initialize the grid plugin\r\n     */\r\n    buildColumnModel: function () {\r\n        var self = this;\r\n        var columns = self.columns;\r\n\r\n        // Create id column first\r\n        var keyColumn = {\r\n            name: \"id\",\r\n            index: 0,\r\n            label: \"id\",\r\n            hidden: true,\r\n            align: \"center\",\r\n            required: false,\r\n            key: true\r\n        };\r\n\r\n        // Add to column model\r\n        var columnModel = [];\r\n        columnModel.push(keyColumn);\r\n\r\n        $.each(columns, function (index, column) {\r\n\r\n            // Set grid column\r\n            column.columnIndex = index + 1;\r\n            var columnLabel = !bizagi.util.isEmpty(column.properties.displayName) ? column.properties.displayName : \" \";\r\n            var gridColumn = {\r\n                name: column.properties.xpath,\r\n                index: index + 1,\r\n                label: columnLabel,\r\n                required: column.properties.required || false,\r\n                key: false,\r\n                hidden: (!column.properties.visible || column.properties.type == \"columnHidden\" || column.properties.columnVisible == false),\r\n                summarizeBy: (column.properties.totalize && column.properties.totalize.operation ? column.properties.totalize.operation : undefined),\r\n                bizAgiProperties: column.properties\r\n            };\r\n\r\n            columnModel.push(gridColumn);\r\n        });\r\n\r\n        return columnModel;\r\n    },\r\n\r\n    /**\r\n     * Makes the grid to refresh\r\n     */\r\n    refresh: function () {\r\n        this.fetchData();\r\n    },\r\n\r\n    /*\r\n    *   Holds the execution until the grid data is ready after a load operation\r\n    */\r\n    dataReady: function () {\r\n        return this.dataReadyDeferred != null ? this.dataReadyDeferred.promise() : null;\r\n    },\r\n\r\n    /*\r\n    * Update data from local changes\r\n    */\r\n    loadChanges: function (rows) {\r\n        var self = this;\r\n\r\n        // Get data from the rows\r\n        for (var rowIndex = 0; rowIndex < rows.length; rowIndex++) {\r\n            var rowChanges = self.changes[rows[rowIndex][0]];\r\n            if (self.exclusiveChanges) {\r\n                rowChanges = $.extend(rowChanges || {}, self.getExclusiveChangeByRow(rows[rowIndex][0]));\r\n            }\r\n            // Search for changes\r\n            if (rowChanges !== undefined) {\r\n                // Update all rowChanges in data\r\n                for (var xpath in rowChanges) {\r\n                    if (rowChanges.hasOwnProperty(xpath)) {\r\n                        var columnData = self.getColumn(xpath);\r\n                        rows[rowIndex][columnData.columnIndex] = self.mapChangeValue(columnData.properties.type, rowChanges[xpath], columnData.comboData);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    },\r\n\r\n   \r\n    /**\r\n     * Mapper to data changes\r\n     * @param type\r\n     * @param change\r\n     * @param data\r\n     * @returns {(*|number)[][]}\r\n     */\r\n    mapChangeValue: function (type, change, data) {\r\n        data = data || [];\r\n        var value = change;\r\n\r\n        if (change !== null && typeof change !== \"undefined\") {\r\n            if (type === \"columnCombo\" || type === \"columnRadio\") {\r\n                if (!bizagi.util.isArray(change)) {\r\n                    var item = data.find(function (el) {\r\n                        return el.id == change;\r\n                    });\r\n\r\n                    if (item) {\r\n                        value = [[item.id, item.value]];\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        return value;\r\n    },\r\n\r\n    /*\r\n    *   Method to set data and update the grid\r\n    */\r\n    updateData: function (data) {\r\n        var self = this;\r\n        var grid = self.grid;\r\n        var columns = self.columns;\r\n\r\n        // Set value in control\r\n        if (data) {\r\n            self.properties.data = data;\r\n\r\n            self.setCellOverrides(data, columns);\r\n            self.triggerGridPluginHandler(\"setData\", data);\r\n        }\r\n    },\r\n\r\n    /*\r\n    *   Method to fetch data from the server and then update the data\r\n    */\r\n    fetchData: function (page, sortBy, sortType) {\r\n        var self = this;\r\n        var properties = self.properties;\r\n\r\n        self.dataReadyDeferred = new $.Deferred();\r\n\r\n        // Define defaults\r\n        page = page || (properties.page || 1);\r\n        sortBy = sortBy || (properties.sortBy || \"\");\r\n        sortType = sortType || (properties.sortOrder || \"asc\");\r\n\r\n        // Update control properties\r\n        properties.page = page;\r\n        properties.sortBy = sortBy;\r\n        properties.sortType = sortType;\r\n        properties.sort = sortBy + \" \" + sortType;\r\n\r\n        // Start loading to avoid multiple calls to the server\r\n        self.startLoading();\r\n\r\n        $.when(self.getRemoteData())\r\n            .then(function (data) {\r\n                if (data) {\r\n                    if (data.deviceMaxRecordsExceeded) {\r\n                        bizagi.showMessageBox(bizagi.localization.getResource(\"render-search-maximum-records-allowed\"));\r\n                    } else {\r\n                        if (self.isRTL()) {\r\n                            data.rows = self.changeOrderData(data.rows);\r\n                        }\r\n\r\n                        self.loadChanges(data.rows);\r\n                        self.updateData(data);\r\n\r\n                        self.triggerRenderChange({changed: false});\r\n\r\n                        self.dataReadyDeferred.resolve();\r\n                    }\r\n                }\r\n            }).always(function () {\r\n            self.endLoading();\r\n        });\r\n    },\r\n\r\n\r\n    /*\r\n    *   Add the render data to the given collection in order to send data to the server\r\n    */\r\n    collectData: function (renderValues) {\r\n        var self = this;\r\n        var grid = self.grid;\r\n\r\n        // Save pending inline add rows\r\n        if (self.grid && (self.properties.inlineAdd || self.properties.inlineEdit)) {\r\n            var newKeys = grid.bizagi_grid_tablet.hasOwnProperty(\"getNewRowKeys\") ? grid.bizagi_grid_tablet(\"getNewRowKeys\") : [];\r\n\r\n            // Save new rows then save the whole screen\r\n            if (newKeys.length > 0 && !self.properties.alreadySaved && self.isValid()) {\r\n                var saveDeferred = self.saveInlineAddedRows(newKeys, true);\r\n\r\n                // Add to deferred collections in order to sync when saving\r\n                renderValues.deferreds = renderValues.deferreds || [];\r\n                renderValues.deferreds.push(saveDeferred);\r\n            }\r\n\r\n            // Remove adding keys from current changes\r\n            for (var i = 0; i < newKeys.length; i++) {\r\n                if (self.changes[newKeys[i]]) {\r\n                    delete self.changes[newKeys[i]];\r\n                }\r\n            }\r\n        }\r\n\r\n        // Call base method\r\n        self._super(renderValues);\r\n    },\r\n\r\n    /*\r\n    *   Customizes the content drawing inside the cell\r\n    */\r\n    drawCell: function (column, key, value, isNewRow) {\r\n        var self = this;\r\n        if (column.key) return value;\r\n\r\n        self.newRecords = self.newRecords || {};\r\n        // Get render column\r\n        var columnIndex = column.index - 1;\r\n        var renderColumn = self.columns[columnIndex];\r\n\r\n        // Get cell properties\r\n        if (!self.cellMetadata[key]) self.cellMetadata[key] = {};\r\n        if (!self.cellMetadata[key][columnIndex]) self.cellMetadata[key][columnIndex] = {};\r\n\r\n        var properties = self.cellMetadata[key][columnIndex].properties || renderColumn.originalProperties;\r\n        properties.editable = bizagi.util.parseBoolean(properties.editable) || false;\r\n        var visible = properties.visible !== undefined ? properties.visible : true;\r\n        var editable = properties.editable !== undefined ? properties.editable : true;\r\n\r\n\r\n        // Show editable cell when we are performing inline add operation\r\n        if (isNewRow) editable = true;\r\n\r\n        renderColumn.properties.displayType = 'value';\r\n        renderColumn.setSurrogateKey(key);\r\n\r\n        if (key === \"summary\") {\r\n            editable = false;\r\n        }\r\n\r\n        renderColumn.properties.labelAlign = \"default\";\r\n        if (renderColumn.properties.columntitlealign) {\r\n            renderColumn.properties.labelAlign = renderColumn.properties.columntitlealign;\r\n        }\r\n\r\n        renderColumn.properties.valueAlign = \"default\";\r\n        if (renderColumn.properties.columnAlign) {\r\n            renderColumn.properties.valueAlign = renderColumn.properties.columnAlign;\r\n        }\r\n\r\n        if (properties.visible) {\r\n            if (editable) {\r\n                return self.drawEditableCell(renderColumn, properties, key, value, isNewRow);\r\n            } else {\r\n                return self.drawReadonlyCell(renderColumn, properties, key, value);\r\n            }\r\n        } else {\r\n            return \"\";\r\n        }\r\n    },\r\n\r\n    /*\r\n    *   Executes when the cell is ready and inserted into the DOM\r\n    */\r\n    onCellReady: function (column, key, cell, isNewRow) {\r\n        var self = this;\r\n\r\n        // Get render column\r\n        var columnIndex = column.index - 1;\r\n        var renderColumn = self.columns[columnIndex];\r\n        var properties = ((self.cellMetadata[key][columnIndex] != undefined) ? self.cellMetadata[key][columnIndex].properties : undefined) || renderColumn.originalProperties;\r\n        var visible = properties.visible !== undefined ? properties.visible : true;\r\n        var editable = properties.editable !== undefined ? properties.editable : true;\r\n\r\n        // Show editable cell when we are performing inline add operation\r\n        if (isNewRow) editable = true;\r\n        else editable = false;\r\n        if (visible) {\r\n            if (editable) {\r\n                // Set editable\r\n                var originalEditable = renderColumn.properties.editable;\r\n                renderColumn.properties.editable = editable;\r\n\r\n                if (renderColumn.properties.submitOnChange) {\r\n                    var control = renderColumn.getDecorated(key);\r\n                    if (control) {\r\n                        control.properties.submitOnChangexpathContext = self.properties.xpath + \"[]\";\r\n                    }\r\n                }\r\n\r\n\r\n                // Execute cell post render\r\n                renderColumn.postRender(key, cell);\r\n\r\n                // Restore editable\r\n                renderColumn.properties.editable = originalEditable;\r\n            } else {\r\n                renderColumn.postRenderReadOnly(key, cell);\r\n            }\r\n        }\r\n    },\r\n\r\n    /**\r\n     *  Adds a row to the grid\r\n     */\r\n    addRow: function () {\r\n        var self = this;\r\n        var properties = self.properties;\r\n        var form = self.getFormContainer();\r\n        var formParams = self.getFormParams();\r\n\r\n        // Start loading\r\n        self.startLoading();\r\n\r\n        // Send add request\r\n        $.when(self.submitAddRequest())\r\n            .done(function (newid) {\r\n\r\n                // Show a slide with new form after that\r\n                var slideView = new bizagi.rendering.tablet.slide.view(self.dataService, self.renderFactory, {\r\n                    title: self.properties.displayName || \"\",\r\n                    container: form.container,\r\n                    formParams: formParams,\r\n                    navigation: formParams.navigation,\r\n                    showSaveButton: true,\r\n                    onSave: function (data) {                 \r\n                        self.addExclusiveChange(newid, data);\r\n                        return self.submitSaveRequest(newid, data);\r\n                    }\r\n                });\r\n\r\n                // End Loading\r\n                self.endLoading();\r\n\r\n                var recordXpath = properties.xpath + \"[id=\" + newid + \"]\";\r\n\r\n                slideView.render({\r\n                    idRender: properties.id,\r\n                    recordXPath: recordXpath,\r\n                    xpathContext: properties.xpathContext,\r\n                    idPageCache: properties.idPageCache,\r\n                    requestedForm: \"addForm\",\r\n                    url: properties.addPage,\r\n                    formParams: formParams,\r\n                    navigation: formParams.navigation\r\n                }).done(function () {\r\n                    if (!properties.submitOnChange) {\r\n                        // Reload grid\r\n                        self.fetchData();\r\n                    } else {\r\n                        // Submits the entire form\r\n                        self.submitOnChange();\r\n                    }\r\n\r\n                }).fail(function () {\r\n                    self.submitRollbackRequest();\r\n                }).always(function () {\r\n                    self.endLoading();\r\n                })\r\n            }).always(function () {\r\n            self.endLoading();\r\n        });\r\n\r\n    },\r\n\r\n    addVirtualRow: function () {\r\n        var self = this;\r\n        var properties = self.properties;\r\n        var form = self.getFormContainer();\r\n        var formParams = self.getFormParams();\r\n\r\n        // Create mock row\r\n        var currentRow = [\"mock_id\"];\r\n        self.columns.forEach(function () {\r\n            currentRow.push(null);\r\n        });\r\n\r\n        // Render grid view\r\n        var slideView = new bizagi.rendering.tablet.slide.adhocForm(self.renderFactory, {\r\n            title: self.properties.displayName || \"\",\r\n            allowEdition: true,\r\n            navigation: formParams.navigation\r\n        });\r\n\r\n        slideView.render({\r\n            row: currentRow,\r\n            columns: self.columns,\r\n            pageCacheId: properties.idPageCache,\r\n            xpath: properties.xpath,\r\n            xpathContext: properties.xpathContext,\r\n            sessionId: form.properties.sessionId,\r\n            actions: form.actions\r\n        }).done(function (data) {\r\n            $.when(self.saveAddedRow(data)).done(function () {\r\n                if (!properties.submitOnChange) {\r\n                    // Reload grid\r\n                    self.fetchData();\r\n                } else {\r\n                    // Submits the entire form\r\n                    self.submitOnChange();\r\n                }\r\n            });\r\n        });\r\n    },\r\n\r\n    /*\r\n    *   Prepares the add action\r\n    */\r\n    saveAddedRow: function (data) {\r\n        var self = this;\r\n        var properties = self.properties;\r\n\r\n        return self.dataService.multiaction().addGridRecordData({\r\n            url: properties.addUrl,\r\n            idRender: properties.id,\r\n            xpath: properties.xpath,\r\n            xpathContext: properties.xpathContext,\r\n            contexttype: properties.contexttype,\r\n            idPageCache: properties.idPageCache,\r\n            submitData: data\r\n        });\r\n    },\r\n\r\n    /**\r\n     *  Edits a row in the grid\r\n     */\r\n    editRow: function (id) {\r\n\r\n        if (id == 0) {\r\n            bizagi.showMessageBox(bizagi.localization.getResource(\"render-grid-message-no-selected-row\"), bizagi.localization.getResource(\"render-grid-header-no-selected-row\"));\r\n            return;\r\n        }\r\n\r\n        var self = this;\r\n        var properties = self.properties;\r\n\r\n        // Use tablet inline edit when there are no edit form\r\n        if (properties.inlineEdit == true && properties.allowEdit == false) {\r\n            self.editInline(id);\r\n            return;\r\n        }\r\n\r\n        if (self.cleanActionChanges && self.cleanActionChanges[id] !== undefined) {\r\n\r\n            self.changes = self.cleanActionChanges;\r\n            var data = $.extend(self.changes[id], {});\r\n            data.idPageCache = properties.idPageCache;\r\n\r\n            $(\".ui-tooltip\").remove();\r\n\r\n            $.when(self.submitSaveRequest(id, data)).done(function () {\r\n                // Set loading status\r\n                self.startLoading();\r\n\r\n                if (!properties.submitOnChange) {\r\n                    // Reload grid\r\n                    self.endLoading();\r\n\r\n                    self.fetchData();\r\n                } else {\r\n                    // Submits the entire form\r\n                    self.submitForGridChange().always(function () {\r\n                        self.endLoading();\r\n\r\n                        // Send edit request\r\n                        self.executeSubmitEditRequest(id, function(data){\r\n                            self.addExclusiveChange(id, data);\r\n                        });\r\n                    });\r\n                }\r\n            });\r\n        } else {\r\n            self.executeSubmitEditRequest(id, function(data){\r\n                self.addExclusiveChange(id, data);\r\n            });\r\n        }\r\n    },\r\n    editVirtualRow: function (id) {\r\n        var self = this;\r\n        var data = self.properties.data;\r\n        var properties = self.properties;\r\n        var form = self.getFormContainer();\r\n        var formParams = self.getFormParams();\r\n        // Search row\r\n        var currentRow = [];\r\n        for (var i = 0, length = data.rows.length; i < length; i++) {\r\n            if (data.rows[i][0] == id) {\r\n                currentRow = data.rows[i];\r\n                break;\r\n            }\r\n        }\r\n        // Render grid view\r\n        var slideView = new bizagi.rendering.tablet.slide.adhocForm(self.renderFactory, {\r\n            title: self.properties.displayName || \"\",\r\n            allowEdition: true,\r\n            navigation: formParams.navigation\r\n        });\r\n        slideView.render({\r\n            row: currentRow,\r\n            columns: self.columns,\r\n            pageCacheId: properties.idPageCache,\r\n            xpath: properties.xpath,\r\n            xpathContext: properties.xpathContext,\r\n            sessionId: form.properties.sessionId,\r\n            actions: form.actions\r\n        }).done(function (formData) {\r\n            // This code is executed when the user press save on the slide\r\n            // Update internal data\r\n            for (xpath in formData) {\r\n                self.collectGridChange({id: id, xpath: xpath, value: formData[xpath], trigger: false});\r\n            }\r\n            // Prepare grid data\r\n            var dataToSend = {};\r\n            self.collectData(dataToSend);\r\n            // Send the data\r\n            self.dataService.submitData({\r\n                action: \"SUBMITONCHANGE\",\r\n                data: dataToSend,\r\n                idRender: properties.id,\r\n                xpath: properties.xpath,\r\n                xpathContext: properties.xpathContext,\r\n                idPageCache: properties.idPageCache\r\n            }).done(function () {\r\n                // After successfully response refresh the grid\r\n                self.fetchData();\r\n            });\r\n        });\r\n    },\r\n\r\n    executeSubmitEditRequest: function (id, callback) {\r\n        var self = this;\r\n        var properties = self.properties;\r\n        var form = self.getFormContainer();\r\n        var formParams = self.getFormParams();\r\n\r\n\r\n        var slideView = new bizagi.rendering.tablet.slide.view(self.dataService, self.renderFactory, {\r\n            title: self.properties.displayName || \"\",\r\n            container: form.container,\r\n            formParams: formParams,\r\n            navigation: formParams.navigation,\r\n            showSaveButton: true,\r\n            onSave: function (data) {\r\n                if(callback){\r\n                    callback(data);\r\n                }                \r\n                return self.submitSaveRequest(id, data);\r\n            }\r\n        });\r\n\r\n        self.startLoading();\r\n\r\n        $.when(self.submitEditRequest(id))\r\n            .done(function () {\r\n\r\n                // Show dialog with new form after that\r\n                var recordXpath = properties.xpath + \"[id=\" + id + \"]\";\r\n\r\n                slideView.render({\r\n                    idRender: properties.id,\r\n                    recordXPath: recordXpath,\r\n                    xpathContext: properties.xpathContext,\r\n                    idPageCache: properties.idPageCache,\r\n                    requestedForm: \"editForm\",\r\n                    url: properties.editPage,\r\n                    formParams: formParams,\r\n                    navigation: formParams.navigation\r\n                }).done(function () {\r\n                    if (!properties.submitOnChange) {\r\n                        // Reload grid\r\n                        self.fetchData();\r\n\r\n                    } else {\r\n                        // Submits the entire form\r\n                        self.submitOnChange();\r\n                    }\r\n                }).fail(function () {\r\n                    self.startLoading();\r\n                    $.when(self.submitRollbackRequest()).always(function () {\r\n                        self.endLoading();\r\n                    });\r\n                });\r\n            }).always(function () {\r\n            self.endLoading();\r\n        });\r\n    },\r\n\r\n    showDetailForm: function (id) {\r\n        var self = this;\r\n        var properties = self.properties;\r\n        var form = self.getFormContainer();\r\n        var formParams = self.getFormParams();\r\n\r\n        var slideView = new bizagi.rendering.tablet.slide.view(self.dataService, self.renderFactory, {\r\n            title: self.properties.displayName || \"\",\r\n            container: form.container,\r\n            formParams: formParams,\r\n            navigation: formParams.navigation,\r\n            showSaveButton: false\r\n        });\r\n\r\n        // Show dialog with new form after that\r\n        var recordXpath = properties.xpath + \"[id=\" + id + \"]\";\r\n\r\n        slideView.render({\r\n            idRender: properties.id,\r\n            recordXPath: recordXpath,\r\n            xpathContext: properties.xpathContext,\r\n            idPageCache: properties.idPageCache,\r\n            requestedForm: \"detailForm\",\r\n            url: properties.editPage,\r\n            formParams: formParams,\r\n            navigation: formParams.navigation\r\n        });\r\n    },\r\n    /**\r\n     *  Deletes  a row to the grid\r\n     */\r\n    deleteRow: function (id) {\r\n        if (id === 0) {\r\n            bizagi.showMessageBox(\r\n                bizagi.localization.getResource(\"render-grid-message-no-selected-row\"),\r\n                bizagi.localization.getResource(\"render-grid-header-no-selected-row\")\r\n            );\r\n            return;\r\n        }\r\n\r\n        var self = this;\r\n\r\n        bizagi.showConfirmationBox(this.getResource(\"render-grid-delete-confirmation\"))\r\n            .done(function () {\r\n                // Do a grid record deletion\r\n                $.when(self.submitDeleteRequest(id))\r\n                    .done(function (data) {\r\n                        // Reload grid\r\n                        self.fetchData();\r\n\r\n                        if (data.type === \"success\") {\r\n                            // Trigger the event\r\n                            //'key' must be included to trigger a single call to actions and validations\r\n                            //line 310 bizagi.command.controllers.action\r\n                            self.triggerRenderChange({rowDeleted: true, changed: false, key: id});\r\n                        }\r\n                    });\r\n            });\r\n    },\r\n\r\n    moreRows: function (ui) {\r\n        var self = this;\r\n        var properties = self.properties;\r\n\r\n        if (typeof properties.originalrowsPerPage === \"undefined\") {\r\n            properties.originalrowsPerPage = properties.rowsPerPage;\r\n        }\r\n\r\n        properties.rowsPerPage += properties.originalrowsPerPage;\r\n\r\n        var dataToSend = {};\r\n        self.collectData(dataToSend);\r\n\r\n        self.startLoading();\r\n\r\n        if ($.isEmptyObject(dataToSend)) {\r\n            self.moreRowsCommon(ui);\r\n            return;\r\n        }\r\n\r\n        // Send the data\r\n        self.dataService.submitData({\r\n            action: \"SUBMITONCHANGE\",\r\n            data: dataToSend,\r\n            idRender: properties.id,\r\n            xpath: properties.xpath,\r\n            xpathContext: properties.xpathContext,\r\n            idPageCache: properties.idPageCache\r\n        }).done(function () {\r\n\r\n            self.endLoading();\r\n\r\n            self.moreRowsCommon(ui);\r\n        });\r\n\r\n    },\r\n\r\n    moreRowsCommon: function (ui) {\r\n        var self = this;\r\n        var properties = self.properties;\r\n\r\n        self.fetchData(ui.page, ui.sortBy, ui.sortType);\r\n\r\n        $.when(self.dataReadyDeferred).done(function () {\r\n\r\n            if (properties.records != 0)\r\n                if (properties.records + 1 <= properties.rowsPerPage) {\r\n                    $(\".ui-bizagi-grid-dynamic-pager\", self.getControl()).hide();\r\n                }\r\n\r\n        });\r\n    },\r\n\r\n    /**\r\n     *  Shows more info about a grid row\r\n     */\r\n    showMore: function (id) {\r\n        var self = this;\r\n        var data = self.properties.data;\r\n        var properties = self.properties;\r\n        var form = self.getFormContainer();\r\n        var formParams = self.getFormParams();\r\n\r\n        // Search row\r\n        var currentRow = [];\r\n        for (var i = 0, length = data.rows.length; i < length; i++) {\r\n            if (data.rows[i][0] == id) {\r\n                currentRow = data.rows[i];\r\n                break;\r\n            }\r\n        }\r\n\r\n        // Render grid view\r\n        var slideView = new bizagi.rendering.tablet.slide.grid(self.dataService, self.renderFactory, {\r\n            title: self.properties.displayName || \"\",\r\n            container: form.container,\r\n            allowEdition: false,\r\n            formParams: formParams,\r\n            navigation: formParams.navigation\r\n        });\r\n\r\n        self.startLoading();\r\n\r\n        slideView.render({\r\n            row: currentRow,\r\n            columns: self.columns,\r\n            pageCacheId: properties.idPageCache,\r\n            xpath: properties.xpath,\r\n            xpathContext: properties.xpathContext,\r\n            sessionId: form.properties.sessionId,\r\n            actions: form.actions,\r\n            formParams: formParams,\r\n            navigation: formParams.navigation\r\n        }).done(function () {\r\n            self.endLoading();\r\n        });\r\n    },\r\n\r\n    /**\r\n     *  Edits the entire row (inline) in another slide\r\n     */\r\n    editInline: function (id) {\r\n        var self = this;\r\n        var data = self.properties.data;\r\n        var properties = self.properties;\r\n        var form = self.getFormContainer();\r\n        var formParams = self.getFormParams();\r\n\r\n        // Search row\r\n        var currentRow = [];\r\n        for (var i = 0, length = data.rows.length; i < length; i++) {\r\n            if (data.rows[i][0] == id) {\r\n                currentRow = data.rows[i];\r\n                break;\r\n            }\r\n        }\r\n\r\n        // Render grid view\r\n        var slideView = new bizagi.rendering.tablet.slide.grid(self.dataService, self.renderFactory, {\r\n            title: self.properties.displayName || \"\",\r\n            container: form.container,\r\n            formParams: formParams,\r\n            navigation: formParams.navigation,\r\n            allowEdition: true\r\n        });\r\n\r\n        // Render the editable view\r\n        $.when(slideView.render({\r\n            row: currentRow,\r\n            columns: self.columns,\r\n            pageCacheId: properties.idPageCache,\r\n            xpath: properties.xpath,\r\n            xpathContext: properties.xpathContext,\r\n            sessionId: form.properties.sessionId,\r\n            actions: form.actions,\r\n            validations: form.validations,\r\n            formParams: formParams,\r\n            navigation: formParams.navigation\r\n        })).done(function (data) {\r\n            // This code is executed when the user press save on the slide\r\n\r\n            // Update internal data\r\n            for (xpath in data) {\r\n                self.collectGridChange({id: id, xpath: xpath, value: data[xpath], trigger: false});\r\n            }\r\n\r\n            // Prepare grid data\r\n            var dataToSend = {};\r\n            self.collectData(dataToSend);\r\n\r\n            // Send the data\r\n            self.dataService.submitData({\r\n                action: \"SUBMITONCHANGE\",\r\n                data: dataToSend,\r\n                idRender: properties.id,\r\n                xpath: properties.xpath,\r\n                xpathContext: properties.xpathContext,\r\n                idPageCache: properties.idPageCache\r\n            }).done(function () {\r\n                // After successfully response refresh the grid\r\n                self.fetchData();\r\n            });\r\n        });\r\n    },\r\n\r\n    /*\r\n    *   Changes the background for a cell\r\n    */\r\n    changeCellBackgroundColor: function (key, xpath, argument) {\r\n        var self = this;\r\n\r\n        if (self.initialLoadDone) {\r\n            for (var j = 0; j < self.columns.length; j++) {\r\n                var isVisible = self.getCellOverride(key, j).visible;\r\n                var columnProperties = self.columns[j].properties;\r\n\r\n                if (self.isValidXPathId(columnProperties.xpath, columnProperties.id, xpath) && isVisible) {\r\n                    var cell = self.grid.bizagi_grid_tablet('getCell', key, xpath, j);\r\n\r\n                    if (self.properties.editable) {\r\n                        var cellInput = cell.find(\".bz-input-icon\");\r\n                        if(columnProperties.type == \"columnRadio\" || columnProperties.type == \"columnBoolean\") {\r\n                            cell = cell.find(\".bz-radio-list\");\r\n                        } else if(cellInput.length != 0) {\r\n                            cell = cellInput;\r\n                        } else {\r\n                            cell = cell.find(\"input\");\r\n                        }\r\n                    }\r\n\r\n                    cell.css(\"background-color\", argument);\r\n                    break;\r\n                }\r\n            }\r\n\r\n        } else {\r\n            if (self.pendingActions) {\r\n                self.pendingActions.push({\r\n                    method: self.changeCellBackgroundColor,\r\n                    arguments: arguments\r\n                });\r\n            }\r\n        }\r\n    },\r\n\r\n    /*\r\n    *   Changes the background for a cell\r\n    */\r\n    changeCellColor: function (key, xpath, argument) {\r\n        var self = this;\r\n\r\n        if (self.initialLoadDone) {\r\n            for (var j = 0; j < self.columns.length; j++) {\r\n                var columnProperties = self.columns[j].properties;\r\n\r\n                if (self.isValidXPathId(columnProperties.xpath, columnProperties.id, xpath)) {\r\n                    var cell = self.grid.bizagi_grid_tablet('getCell', key, xpath, j);\r\n\r\n                    if (self.properties.editable) {\r\n                        cell = cell.find(\"input\");\r\n                    }\r\n\r\n                    cell.css(\"color\", argument);\r\n                    break;\r\n                }\r\n            }\r\n        } else {\r\n            if (self.pendingActions) {\r\n                self.pendingActions.push({\r\n                    method: self.changeCellColor,\r\n                    arguments: arguments\r\n                });\r\n            }\r\n        }\r\n    },\r\n\r\n    /*\r\n    *   Changes the visibility for a cell\r\n    */\r\n    changeCellVisibility: function (key, xpath, argument) {\r\n        var self = this;\r\n\r\n        if (self.initialLoadDone) {\r\n\r\n            var index = (self.columns || [])\r\n                .findIndex(function (item) {\r\n                    return self.isValidXPathId(item.properties.xpath, item.properties.id, xpath);\r\n                }) || 0;\r\n\r\n            var cell = self.grid.bizagi_grid_tablet('getCell', key, xpath, index);\r\n            if (cell) {\r\n                // Change visibility\r\n                if (argument == true) {\r\n                    cell.css(\"visibility\", \"visible\");\r\n                    cell.css(\"display\", \"\");\r\n\r\n                    self.element && self.element.show();\r\n                } else {\r\n                    cell.css(\"visibility\", \"hidden\");\r\n                }\r\n            }\r\n\r\n            self.cellOverrides[key] = self.cellOverrides[key] || {};\r\n            self.getCellOverride(key, index).visible = argument;\r\n\r\n        } else {\r\n            if (self.pendingActions) {\r\n                self.pendingActions.push({\r\n                    method: self.changeCellVisibility,\r\n                    arguments: arguments\r\n                });\r\n            }\r\n        }\r\n    },\r\n\r\n    /*\r\n    *  Changes the required for cell\r\n    */\r\n    changeCellValue: function (key, xpath, argument) {\r\n        var self = this;\r\n\r\n        if (self.initialLoadDone) {\r\n            var control = self.getControlCell(key, xpath);\r\n            if (control) {\r\n                control.setDisplayValue(argument);\r\n\r\n                var renderColumn = control.column;\r\n\r\n                if (renderColumn) {\r\n                    var _value = renderColumn.getValue(key);\r\n                    var compositeValue = renderColumn.getCompositeValue(key);\r\n\r\n                    _value = self.getCellValueFormatted(renderColumn, _value);\r\n\r\n                    control.setDisplayValue(argument);\r\n                    control.triggerHandler(\"renderchange\", {render: self, changed: true});\r\n\r\n                    self.collectGridChange({\r\n                        id: key,\r\n                        xpath: xpath,\r\n                        value: _value,\r\n                        compositeValue: compositeValue,\r\n                        columnIndex: renderColumn,\r\n                        trigger: false\r\n                    });\r\n                }\r\n            }\r\n        } else {\r\n            if (self.pendingActions) {\r\n                self.pendingActions.push({\r\n                    method: self.setDisplayValue,\r\n                    arguments: arguments\r\n                });\r\n            }\r\n        }\r\n    },\r\n\r\n    changeCellRequired: function (key, xpath, argument) {\r\n        var self = this;\r\n\r\n        if (self.initialLoadDone) {\r\n            var control = self.getControlCell(key, xpath);\r\n            if (control) {\r\n                control.changeCellRequired(argument);\r\n                for (var j = 0; j < self.columns.length; j++) {\r\n                    if (\r\n                        self.columns[j].properties.xpath == xpath ||\r\n                        self.columns[j].properties.id == xpath ||\r\n                        self.columns[j].properties.xpath + \".\" + self.columns[j].properties.id  == xpath\r\n                    ){\r\n                        break;\r\n                    }                    \r\n                }\r\n                self.cellOverrides[key] = self.cellOverrides[key] || {};\r\n                self.getCellOverride(key, j).required = argument;\r\n            }\r\n        } else {\r\n            self.pendingActions.push({method: self.changeCellRequired, arguments: arguments});\r\n        }\r\n    },\r\n\r\n    /*\r\n    *   Sets an error on the cell\r\n    */\r\n    setError: function (key, xpath) {\r\n        var self = this;\r\n\r\n        if (self.initialLoadDone) {\r\n            for (var j = 0; j < self.columns.length; j++) {\r\n                var isVisible = self.getCellOverride(key, j).visible;\r\n                var columnProperties = self.columns[j].properties;\r\n\r\n                if (self.isValidXPathId(columnProperties.xpath, columnProperties.id, xpath) && isVisible) {\r\n                    var cell = self.grid.bizagi_grid_tablet('getCell', key, xpath, j);\r\n                    cell.parent().addClass(\"ui-bizagi-render-grid-cell-error\");\r\n                    break;\r\n                }\r\n            }\r\n\r\n        } else {\r\n            if (self.pendingActions) {\r\n                self.pendingActions.push({\r\n                    method: self.setError,\r\n                    arguments: arguments\r\n                });\r\n            }\r\n        }\r\n    },\r\n\r\n    /*\r\n    *   Returns a promise that will resolve when the element is ready\r\n    */\r\n    ready: function () {\r\n        var self = this;\r\n        var parentPromise = self._super();\r\n        var inlineAddPromise = self.inlineAddDeferred ? self.inlineAddDeferred.promise() : null;\r\n        return $.when(parentPromise, inlineAddPromise);\r\n    },\r\n\r\n    /*\r\n    *   Method to start loading for ajax data and update the ui\r\n    */\r\n    startLoading: function (bUseTimeout) {\r\n        var self = this;\r\n\r\n        bizagi.loading.start();\r\n\r\n        self._super(bUseTimeout);\r\n    },\r\n\r\n    /*\r\n    *   Method to remove the loading message\r\n    */\r\n    endLoading: function () {\r\n        bizagi.loading.stop();\r\n        this._super();\r\n    },\r\n\r\n    cleanCellData: function (key, xpath) {\r\n        var self = this;\r\n\r\n        if (self.initialLoadDone) {\r\n            var control = self.getControlCell(key, xpath);\r\n            if (control) {\r\n                control.cleanData();\r\n                for (var j = 0; j < self.columns.length; j++) {\r\n                    var columnProperties = self.columns[j].properties;\r\n\r\n                    if (self.isValidXPathId(columnProperties.xpath, columnProperties.id, xpath)) {\r\n                        break;\r\n                    }\r\n                }\r\n\r\n                var rows = self.properties.data.rows;\r\n                var i = 0;\r\n                var rowLength = rows.length;\r\n\r\n                for (; i < rowLength; i++) {\r\n                    if (Number(key) === rows[i][0]) {\r\n                        rows[i][j + 1] = [[\"\", \"\"]];\r\n                        break;\r\n                    }\r\n                }\r\n                self.cellOverrides[key] = self.cellOverrides[key] || {};\r\n                self.getCellOverride(key, j).value = null;\r\n\r\n                if (!self.cleanActionChanges) {\r\n                    self.cleanActionChanges = {};\r\n                }\r\n                if (!self.cleanActionChanges[key]) {\r\n                    self.cleanActionChanges[key] = {};\r\n                }\r\n                self.cleanActionChanges[key][xpath] = \"\";\r\n            }\r\n        } else {\r\n            self.pendingActions.push({\r\n                method: self.cleanData,\r\n                arguments: \"\"\r\n            });\r\n        }\r\n    },\r\n\r\n    onTotalData: function (ui) {\r\n        var self = this;\r\n        var properties = self.properties;\r\n        var data = properties.data || {};\r\n        var rows = data.rows;\r\n        var rowsLength = rows.length;\r\n        var showTotal = [];\r\n        var columnsModel = self.buildColumnModel();\r\n        var result;\r\n\r\n        bizagi.util.tablet.startLoading();\r\n\r\n        columnsModel.forEach(function callback(column, columnIndex) {\r\n            if (column.bizAgiProperties) {\r\n                operationState = column.bizAgiProperties.totalize.operation;\r\n\r\n                switch (operationState) {\r\n                    case \"sum\":\r\n                        result = rows.sum(function (row) {\r\n                            var return_value = row[columnIndex] !== null ? row[columnIndex] : column.bizAgiProperties.defaultvalue;\r\n                            return Number(return_value)\r\n                        }, columnIndex);\r\n                        break;\r\n\r\n                    case \"count\":\r\n                        result = rows.count(function (row) {\r\n                            //Checks if there is a DefaultValue, so assign it to the returnedvalu in case it doesn't have value\r\n                            var return_value = row[columnIndex] !== null ? row[columnIndex] : column.bizAgiProperties.defaultvalue;\r\n\r\n                            if (!bizagi.util.isArray(return_value)) {\r\n                                return return_value;\r\n                            }\r\n\r\n                            if (bizagi.util.isArray(return_value) && return_value.length > 0) {\r\n                                return return_value; //If the returned value is not undefined, neither null, it will count +1\r\n                            }\r\n                        }, column, columnIndex);\r\n\r\n                        break;\r\n\r\n                    case \"max\":\r\n                        result = rows.max(function (row) {\r\n                            var return_value = row[columnIndex] !== null ? row[columnIndex] : column.bizAgiProperties.defaultvalue;\r\n                            return Number(return_value)\r\n                        }, columnIndex);\r\n\r\n                        break;\r\n\r\n                    case \"min\":\r\n                        result = rows.min(function (row) {\r\n                            var return_value = row[columnIndex] !== null ? row[columnIndex] : column.bizAgiProperties.defaultvalue;\r\n                            return Number(return_value);\r\n                        }, columnIndex);\r\n                        break;\r\n\r\n                    case \"avg\":\r\n                        result = rows.avg(function (row) {\r\n                            var return_value = row[columnIndex] !== null ? row[columnIndex] : column.bizAgiProperties.defaultvalue;\r\n                            return Number(return_value);\r\n                        }, columnIndex);\r\n\r\n                        result = result.toFixed(2);\r\n                        break;\r\n                }\r\n\r\n                if (operationState) {\r\n                    result = self.formatTotalizedResult(operationState, column.bizAgiProperties.type, result);\r\n                    showTotal.push({label: column.label, total: result});\r\n                }\r\n            }\r\n        });\r\n        self.showTotals(showTotal);\r\n        bizagi.loading.stop();\r\n    },\r\n\r\n    formatTotalizedResult: function (operation, controlType, value) {\r\n        switch (operation) {\r\n            case 'sum':\r\n            case 'avg':\r\n            case 'min':\r\n            case 'max':\r\n                if (controlType == \"columnMoney\" || controlType == \"money\") {\r\n                    return bizagi.util.formatMonetaryCell(value);\r\n                }\r\n                break;\r\n        }\r\n\r\n        return value || 0;\r\n    },\r\n\r\n    showTotals: function (params) {\r\n        var self = this;\r\n        var content = $.fasttmpl(self.renderFactory.getTemplate('bizagi.grid.totalizer'), {items: params});\r\n\r\n        self.grid.mobileView({\r\n            displayName: bizagi.localization.getResource(\"render-grid-totalizer\"),\r\n            orientation: self.properties.orientation,\r\n            style: \"width: 80%; height: 70%\",\r\n            transition: \"fade:in\",\r\n            cssClass: \"bz-modal-view--totalizer\",\r\n            showBorder: true,\r\n            contentTemplate: content\r\n        });\r\n    },\r\n\r\n    changeBackgroundColor: function (color) {\r\n        var control = this.getControl();\r\n        if (control) {\r\n            if (color !== 'none') {\r\n                $(\".bz-tablet-grid\", control).css(\"background-color\", color);\r\n            } else {\r\n                $(\".bz-tablet-grid\", control).css(\"background-color\", \"\");\r\n            }\r\n        }\r\n\r\n        return this;\r\n    },\r\n\r\n    /**\r\n     * Get Cell value with format\r\n     * @param renderColumn\r\n     * @param _value\r\n     * @returns {string}\r\n     */\r\n    getCellValueFormatted: function (renderColumn, _value) {\r\n        var dataType = renderColumn.properties.type;\r\n        var formatted = _value;\r\n\r\n        if (dataType === \"columnDate\") {\r\n            var columnProperties = renderColumn.data.properties;\r\n\r\n            if (!bizagi.util.isEmpty(formatted)) {\r\n                // Formats the value in full invariant (with time) in order to send to the server\r\n                var date = bizagi.util.dateFormatter.getDateFromInvariant(formatted, columnProperties.showTime);\r\n\r\n                if (typeof (date) != \"undefined\" && date !== 0) {\r\n                    if (!columnProperties.showTime) {\r\n                        date.setHours(0, 0, 0, 0);\r\n                    }\r\n\r\n                    formatted = bizagi.util.dateFormatter.formatInvariant(date, true);\r\n                }\r\n            } else if (_value === \"\") {\r\n                formatted = \"\";\r\n            }\r\n        }\r\n\r\n        return formatted;\r\n    },\r\n\r\n    /**\r\n     * Defines the handler when a cell changes its value\r\n     * @param renderColumn\r\n     * @param cell\r\n     * @param key\r\n     * @param args\r\n     */\r\n    onCellChange: function (renderColumn, cell, key, args) {\r\n        var self = this;\r\n        var _value = renderColumn.getValue(key);\r\n        var compositeValue = renderColumn.getCompositeValue(key);\r\n        var dataType = renderColumn.properties.type;\r\n\r\n        try {\r\n            if (dataType === \"columnDate\") {\r\n                if (!bizagi.util.isEmpty(_value)) {\r\n                    var date = bizagi.util.dateFormatter.getDateFromInvariant(_value, true);\r\n                    date.setSeconds(0);\r\n                    date.setMilliseconds(0);\r\n\r\n                    _value = bizagi.util.dateFormatter.formatInvariant(date, true);\r\n                } else if (_value === \"\") {\r\n                    _value = \"\";\r\n                }\r\n            }\r\n\r\n            var isExclusiveControl = dataType === \"columnBoolean\" && renderColumn.properties.isExclusive;\r\n\r\n            if (!isExclusiveControl && (self.properties.allowEdit)) {\r\n                self.collectGridChange($.extend(args, {\r\n                    id: key,\r\n                    xpath: renderColumn.properties.xpath || renderColumn.properties.id,\r\n                    value: _value,\r\n                    compositeValue: compositeValue,\r\n                    columnIndex: renderColumn.columnIndex,\r\n                    trigger: true\r\n                }));\r\n            }\r\n\r\n            // Update change in grid's component data\r\n            self.triggerGridPluginHandler(\"changeCellValue\", key, renderColumn.columnIndex, _value);\r\n\r\n        } catch (e) {\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Draws the editable version for the cell\r\n     * @param renderColumn\r\n     * @param properties\r\n     * @param key\r\n     * @param value\r\n     * @param isNewRow\r\n     */\r\n    drawEditableCell: function (renderColumn, properties, key, value, isNewRow) {\r\n        var self = this;\r\n        var defer = new $.Deferred();\r\n\r\n        // Set editable\r\n        var originalEditable = renderColumn.properties.editable;\r\n        renderColumn.properties.editable = true;\r\n\r\n        // Fix problem when required property lose\r\n        renderColumn.overrideProperties({required: properties.required});\r\n\r\n        // Render cell\r\n        $.when(renderColumn.render(key, value)).done(function (cell) {\r\n\r\n            // Register array with new records\r\n            (self.column || []).forEach(function (item, index) {\r\n                var visible = true;\r\n\r\n                self.cellOverrides[key] = self.cellOverrides[key] || {};\r\n\r\n                if (typeof (self.getCellOverride(key, index).visible) !== \"undefined\") {\r\n                    visible = self.getCellOverride(key, index).visible;\r\n                }\r\n\r\n                self.getCellOverride(key, index).visible = visible;\r\n            });\r\n\r\n            // Add change handler\r\n            renderColumn.getDecorated(key).bind(\"renderchange\", function (render, args) {\r\n                self.onCellChange(renderColumn, cell, key, args);\r\n            });\r\n\r\n            // Resolve cell\r\n            defer.resolve(cell);\r\n        });\r\n\r\n        // Restore editable\r\n        renderColumn.properties.editable = originalEditable;\r\n\r\n        // Return promise\r\n        return defer.promise();\r\n    },\r\n\r\n    /**\r\n     * Draws the readonly version for the cell\r\n     * @param renderColumn\r\n     * @param properties\r\n     * @param key\r\n     * @param value\r\n     */\r\n    drawReadonlyCell: function (renderColumn, properties, key, value) {\r\n        var self = this;\r\n        var defer = new $.Deferred();\r\n\r\n        $.when(renderColumn.renderReadOnly(key, value)).done(function (cell) {\r\n            // Register array with new records\r\n            (self.column || []).forEach(function (item, index) {\r\n                var visible = true;\r\n\r\n                self.cellOverrides[key] = self.cellOverrides[key] || {};\r\n\r\n                if (typeof (self.getCellOverride(key, index).visible) !== \"undefined\") {\r\n                    visible = self.getCellOverride(key, index).visible;\r\n                }\r\n\r\n                self.getCellOverride(key, index).visible = visible;\r\n            });\r\n\r\n            // Resolve cell\r\n            defer.resolve(cell);\r\n        });\r\n\r\n        return defer.promise();\r\n    },\r\n\r\n    /**\r\n     * Check If xpath or id of column is valid\r\n     * @param columnXpath\r\n     * @param columnId\r\n     * @param xpath\r\n     * @returns {boolean}\r\n     */\r\n    isValidXPathId: function(columnXpath, columnId, xpath){\r\n        return columnXpath == xpath || columnId == xpath || columnXpath + \".\" + columnId == xpath;\r\n    },\r\n\r\n    /**\r\n     * Triggers the grid plugin event\r\n     * @returns {*}\r\n     */\r\n    triggerGridPluginHandler: function () {\r\n        try {\r\n            var args = Array.prototype.slice.call(arguments, 0);\r\n            return this.grid.bizagi_grid_tablet.apply(this.grid, args);\r\n        } catch (e) {\r\n        }\r\n    },\r\n    addExclusiveChange : function(id, data){\r\n        if(this.properties.hasExclusiveCheck){\r\n            for(xpath in data){\r\n                 var column = this.columns.find(function(el){\r\n                     return el.properties.xpath == xpath;\r\n                 });\r\n                 // Check if some of the changes from the edit or add form match with the exclusive controls in the grid\r\n                 var value = data[xpath];\r\n                 if(column && column.properties.isExclusive && value){\r\n                     this.exclusiveChanges[xpath] =  {\r\n                         xpath : xpath,\r\n                         simpleXpath: xpath,\r\n                         value : value,\r\n                         key:id\r\n                     }\r\n                 }\r\n            }                    \r\n        }\r\n    }\r\n\r\n});\r\n","/**\r\n *   Name: Bizagi Tablet Render Grid Extension\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will redefine the offline grid render class to adjust to tablet devices\r\n */\r\n\r\n// Extends itself\r\nbizagi.rendering.tablet.grid.extend(\"bizagi.rendering.tablet.grid.offline\", {}, {\r\n    /*\r\n    *   Constructor\r\n    */\r\n    init: function (params) {\r\n        var self = this;\r\n\r\n        // Call base\r\n        this._super(params);\r\n\r\n        // Fill default properties\r\n        var form = self.getFormContainer();\r\n        var properties = this.properties;\r\n        properties.data.originalRows = bizagi.clone(properties.data.rows);        \r\n    \r\n        properties.isTaskForm = form.properties.isTaskForm\r\n        //Preload new lines previously added offline and prepare deletions\r\n        self.newRecords = {};\r\n        if(properties[\"new-records\"]) {            \r\n            var newRowKeys = Object.keys(properties[\"new-records\"]);\r\n            for(var k = 0; k< newRowKeys.length;k++) {\r\n                self.newRecords[newRowKeys[k]] = {} \r\n                self.changes[newRowKeys[k]] = properties[\"new-records\"][newRowKeys[k]];\r\n                self.newRecords[newRowKeys[k]].createdOffline = true\r\n            }\r\n        }\r\n        self[\"deleted-records\"] = properties[\"deleted-records\"] ? properties[\"deleted-records\"] : {};\r\n\r\n        // Just apply display-type: vertical, align it to the left\r\n        properties.displayType = \"vertical\";\r\n        properties.labelAlign = \"left\";\r\n\r\n        if (properties.groupBy || properties.groupSummary) {\r\n            // Add warning\r\n            form.addWarning(self.getResource(\"render-tablet-warning-grid\"));\r\n        }\r\n    },\r\n\r\n    /*\r\n    *   Template method to implement in each device to customize each render after processed\r\n    */\r\n    postRender: function () {\r\n        var self = this;\r\n        var properties = self.properties;\r\n        var control = self.getControl();\r\n\r\n        self.initialLoadDone = false;\r\n\r\n        // Find component holder\r\n        self.grid = $(\">div\", control);\r\n\r\n        // Hide common label\r\n        self.getLabel().hide();\r\n\r\n        // Grid plugin\r\n        self.applyGridPlugin();\r\n\r\n        // Set initial data\r\n        if (properties.data) {\r\n\r\n            self.updateData(properties.data);\r\n\r\n            // Trigger change in order to start up the actions when the controls is ready\r\n            $.when(self.ready()).done(function () {\r\n                    self.triggerRenderChange({changed: false});\r\n                });\r\n        }\r\n\r\n        // Execute pending actions\r\n        self.initialLoadDone = true;\r\n\r\n        for (var i in self.pendingActions) {\r\n            self.pendingActions[i].method.apply(self, self.pendingActions[i].arguments);\r\n        }\r\n    },\r\n\r\n    /*\r\n    *   Method to render non editable values\r\n    */\r\n    postRenderReadOnly: function () {\r\n        var self = this;\r\n\r\n        // Do the same as the post-render            \r\n        self.postRender();\r\n    },\r\n\r\n    /*\r\n    *   Method to render non editable values\r\n    */\r\n    applyGridPlugin: function () {\r\n        var self = this;\r\n        var properties = self.properties;\r\n        var grid = self.grid;\r\n        var mode = self.getMode();\r\n\r\n        // Build column metadata\r\n        var columns = self.buildColumnModel();\r\n\r\n        // Apply grid plugin\r\n        grid.bizagi_grid_tablet({\r\n            columns: columns,\r\n            title: properties.displayName,\r\n            isOfflineForm: this.isOfflineForm || false,\r\n            mode: self.getMode(),\r\n            template: {\r\n                grid: self.renderFactory.getTemplate(\"bizagi.grid.grid\"),\r\n                waiting: self.renderFactory.getTemplate(\"bizagi.grid.waiting\"),\r\n                table: self.renderFactory.getTemplate(\"bizagi.grid.table\"),\r\n                emptyTable: self.renderFactory.getTemplate(\"bizagi.grid.table.empty\"),\r\n                column: self.renderFactory.getTemplate(\"bizagi.grid.column\"),\r\n                specialColumn: self.renderFactory.getTemplate(\"bizagi.grid.column.special\"),\r\n                row: self.renderFactory.getTemplate(\"bizagi.grid.row\"),\r\n                cell: self.renderFactory.getTemplate(\"bizagi.grid.cell\"),\r\n                pager: self.renderFactory.getTemplate(\"bizagi.grid.pager\"),\r\n                dynamicPager: self.renderFactory.getTemplate(\"bizagi.grid.dynamicpager\"),\r\n                buttons: self.renderFactory.getTemplate(\"bizagi.grid.offline.buttons\"),\r\n                rowButtons: self.renderFactory.getTemplate(\"bizagi.grid.offline.row.buttons\"),\r\n                specialCell: self.renderFactory.getTemplate(\"bizagi.grid.offline.cell.special\"),\r\n            },\r\n            actions: {\r\n                add: properties.allowAdd,\r\n                edit: (properties.allowEdit && properties.withEditForm && properties.data != null),\r\n                remove: properties.allowDelete,\r\n                details: false,\r\n                inlineAdd: !properties.editable ? properties.inlineAdd: true,\r\n                allowMore: false,\r\n                enableXlsExport: false,\r\n                enablePdfExport: false,\r\n                hasTotalizer: false\r\n            },\r\n            isValid: function () {\r\n                return self.isValidGrid();\r\n            },\r\n            pageRequested: function (ui) {\r\n                if (mode !== \"execution\") return;\r\n                self.fetchData(ui.page, ui.sortBy, ui.sortType);\r\n            },\r\n            drawCell: function (ui) {\r\n                return self.drawCell(ui.column, ui.key, ui.value, ui.isNewRow);\r\n            },\r\n            cellReady: function (ui) {\r\n                return self.onCellReady(ui.column, ui.key, ui.cell, ui.isNewRow);\r\n            },\r\n            rowSelected: function (ui) {\r\n                if (mode !== \"execution\") return;\r\n                self.triggerHandler(\"rowSelected\", {id: ui.key, data: ui});\r\n            },\r\n            addRow: function (ui) {\r\n                if (mode !== \"execution\") return;\r\n                self.addRow();\r\n            },\r\n            editRow: function (ui) {\r\n                if (mode !== \"execution\") return;\r\n                self.editRow(ui.key);\r\n            },\r\n            deleteRow: function (ui) {\r\n                if (mode !== \"execution\") return;\r\n                self.deleteRow(ui.key);\r\n            },\r\n            saveAddedRows: function (ui) {\r\n                self.saveInlineAddedRows(ui.keys);\r\n            },\r\n            beforeInlineAdd: function () {\r\n                self.inlineAddDeferred = new $.Deferred();\r\n            },\r\n            afterInlineAdd: function () {\r\n                if (self.inlineAddDeferred) {\r\n                    self.inlineAddDeferred.resolve();\r\n                }\r\n            },\r\n            cancelEdition: function (ui) {\r\n                self.removeNewRecords(ui);\r\n            },\r\n            removeNewRecords: function (ui) {\r\n                self.removeNewRecords(ui);\r\n            }\r\n        });\r\n    },\r\n\r\n    /*\r\n    *   Method to fetch data from the server and then update the data\r\n    */\r\n    fetchData: function (page, sortBy, sortType) {\r\n        var self = this;\r\n\r\n        self.dataReadyDeferred = new $.Deferred();\r\n\r\n        // Start loading to avoid multiple calls to the server\r\n        self.startLoading();\r\n\r\n        $.when(self.getRemoteData()).then(function (data) {\r\n            self.endLoading();\r\n            if (data) {\r\n                self.updateData(data);\r\n                self.triggerRenderChange();\r\n                self.dataReadyDeferred.resolve();\r\n            }\r\n        });\r\n    },\r\n\r\n    processChanges: function () {\r\n        return [];\r\n    },\r\n\r\n    collectOfflineTaskData: function(renderValues) {\r\n        var self = this;        \r\n        var properties = self.properties;\r\n        var errorsMessage = [];\r\n        var internalRedersValues = [];\r\n        var data = self.properties.data;\r\n        var temporalNew = {};\r\n            // Save pending inline add rows\r\n            if (self.isValid(errorsMessage)) {\r\n                for (var id in self.changes) {\r\n                    var sortArray = [];\r\n                    var currentChanges = {};                    \r\n                    for (var columnXpath in self.changes[id]) {\r\n                        \r\n                        if (self.canColumnBeSent(id, columnXpath)) {\r\n                            var columnNumber = self.getColumn(columnXpath).columnIndex - 1;\r\n                            var value = self.changes[id][columnXpath];\r\n\r\n                            if (typeof value === \"string\") {\r\n                                if (value.match(/\\n/gm) !== null) {\r\n                                    value = value.replaceAll(\"\\n\", \"\\\\n\");\r\n                                }\r\n                            }\r\n\r\n                            sortArray[columnNumber] = value;                                  \r\n                            var xpath = properties.xpath + self.buildCellXpathFilter(id) + \".\" + columnXpath;\r\n                            var columnValue = self.changes[id][columnXpath];\r\n                            var value = columnValue && columnValue.value ? columnValue.value : columnValue;\r\n                            renderValues[xpath] = value;\r\n                            //Changes are store to delete them if the row is new, the rest of changes can be saved by xpath\r\n                            currentChanges[xpath] = value;\r\n                        }\r\n                    }\r\n                    //If new record store action data\r\n                    if(self.newRecords[id]) {\r\n                        //Use - to avoid issues with possible xpaths in renderValues used both in new and deleted records                        \r\n                        var addRowData = {\r\n                            url: properties.addUrl,\r\n                            idRender: properties.id,\r\n                            xpath: properties.xpath,\r\n                            xpathContext: properties.xpathContext,\r\n                            contexttype: properties.contexttype,\r\n                            idPageCache: properties.idPageCache,\r\n                            submitData: self.changes[id],\r\n                            prepare: true,\r\n                            idRow: parseInt(id+'')\r\n                        }\r\n                        temporalNew[id] = addRowData;\r\n                        for(change in currentChanges) {\r\n                            delete renderValues[change];\r\n                        }\r\n                        var details = {};\r\n                        details.idRow = parseInt(id+'');    \r\n                        details.isNew = true;\r\n                        details.changes = self.changes[id];\r\n                        sortArray.push(details);\r\n                        if (!self.newRecords[id].createdOffline)                         \r\n                            internalRedersValues[internalRedersValues.length] = sortArray;                                            \r\n                    }                                                                \r\n                }\r\n            }\r\n            // Get data\r\n            if (JSON.stringify(data.rows) !== JSON.stringify(data.originalRows) || internalRedersValues.length > 0) {\r\n                renderValues[properties.xpath] = renderValues[properties.xpath]? renderValues[properties.xpath]: {}\r\n                if (typeof (data.rows) !== \"undefined\" && internalRedersValues.length > 0) {\r\n                    //Merge new and edited rows only saved for future edition\r\n                    renderValues[properties.xpath].rows = $.merge($.merge([], self.processOldRows(data.rows)),\r\n                        internalRedersValues);\r\n                } else if (typeof (data.rows) !== \"undefined\" && data.rows.length > 0) {\r\n                    renderValues[properties.xpath].rows = self.processOldRows(data.rows);\r\n                } else {\r\n                    renderValues[properties.xpath].rows = internalRedersValues;\r\n                }\r\n                if(self[\"deleted-records\"] && Object.keys(self[\"deleted-records\"]).length > 0 )\r\n                    renderValues[properties.xpath][\"deleted-records\"] = self[\"deleted-records\"];\r\n                if(temporalNew && Object.keys(temporalNew).length > 0)\r\n                    renderValues[properties.xpath][\"new-records\"] = temporalNew;\r\n            }                                                \r\n            \r\n    },\r\n\r\n    /*\r\n    * Old Method that collects data only for Offline start forms and prepares data for AsyncWorkItem\r\n    */\r\n    collectOfflineStartData: function(renderValues){\r\n        var self = this;\r\n        var errorsMessage = [];\r\n        var internalRedersValues = [];\r\n        var properties = self.properties;\r\n        var data = self.properties.data;\r\n        // Save pending inline add rows\r\n        if (self.isValid(errorsMessage)) {\r\n            for (var id in self.changes) {\r\n                var sortArray = [];\r\n                for (var columnXpath in self.changes[id]) {\r\n                    // Check if the render can submit data\r\n                    if (self.canColumnBeSent(id, columnXpath)) {\r\n                        var columnNumber = self.getColumn(columnXpath).columnIndex - 1;\r\n                        var value = self.changes[id][columnXpath];\r\n                        if (typeof value === \"string\") {\r\n                            if (value.match(/\\n/gm) !== null) {\r\n                                value = value.replaceAll(\"\\n\", \"\\\\n\");\r\n                            }\r\n                        }\r\n                        sortArray[columnNumber] = {\r\n                            value: value,\r\n                            xpath: columnXpath,\r\n                            DataType: self.getColumn(columnXpath).properties.dataType\r\n                        };\r\n                    }\r\n                }\r\n                if (typeof (self.properties.data.rows) !== \"undefined\" && self.properties.data.rows.length > 0) {\r\n                    // Search row\r\n                    var currentRow = [];\r\n                    for (var i = 0; i < data.rows.length; i++) {\r\n                        if (data.rows[i][0] == id) {\r\n                            currentRow = data.rows[i];\r\n                            // Delete current data\r\n                            data.rows.splice(i, 1);\r\n                            i--;\r\n                            // Mixed data\r\n                            currentRow = self.processRow(currentRow);\r\n                            sortArray = $.extend(true, currentRow, sortArray);\r\n                            break;\r\n                        }\r\n                    }\r\n                }\r\n                internalRedersValues[internalRedersValues.length] = sortArray;\r\n            }\r\n        }\r\n\r\n\r\n        // Get data\r\n        if (JSON.stringify(data.rows) !== JSON.stringify(data.originalRows) || internalRedersValues.length > 0) {\r\n            if (typeof (data.rows) !== \"undefined\" && internalRedersValues.length > 0) {\r\n                renderValues[properties.xpath].rows = $.merge($.merge([], self.processOldRows(data.rows)),\r\n                    internalRedersValues);\r\n            } else if (typeof (data.rows) !== \"undefined\" && data.rows.length > 0) {\r\n                renderValues[properties.xpath].rows = self.processOldRows(data.rows);\r\n            } else {\r\n                renderValues[properties.xpath].rows = internalRedersValues;\r\n            }\r\n        }\r\n    },\r\n\r\n    /*\r\n    *   Add the render data to the given collection in order to send data to the server\r\n    */\r\n   collectData: function(renderValues) {\r\n        var self = this;\r\n        self.collectOfflineTaskData(renderValues);       \r\n    },\r\n\r\n    /*\r\n    *   Delete field id array objects\r\n    */\r\n    processOldRows: function (rows) {\r\n        var newRows = [];\r\n        var tempRows = rows;\r\n        var self = this;\r\n        for (var col = 0, leng = tempRows.length; col < leng; col++) {\r\n            var temp = tempRows[col];\r\n            newRows[col] = $.grep(temp, function (n, i) {\r\n                return i > 0;\r\n            });\r\n            \r\n            var details = {};\r\n            details.idRow = parseInt(temp[0]+'');    \r\n            details.isNew = self.newRecords[temp[0]]? true : false;\r\n            details.changes = self.changes[temp[0]] ? self.changes[temp[0]] : {};\r\n            newRows[col].push(details);\r\n        }\r\n\r\n        return newRows;\r\n    },\r\n    /*\r\n    *   Delete field id array\r\n    */\r\n    processRow: function (row) {\r\n        return $.grep(row, function (n, i) {\r\n            return i > 0;\r\n        });\r\n    },\r\n    /*\r\n    *   Customizes the content drawing inside the cell\r\n    */\r\n    drawCell: function (column, key, value, isNewRow) {\r\n        var self = this;\r\n\r\n        if (column.key) return value;\r\n\r\n        if (typeof (value) === \"object\" && value!==null && !isNewRow) {\r\n            value = value.hasOwnProperty(\"value\") ? value.value : value;\r\n        }\r\n\r\n        // Get render column                \r\n        var columnIndex = column.index - 1;\r\n        var renderColumn = self.columns[columnIndex];\r\n        var cellOverride = self.getCellOverride(key, column.index - 1);\r\n\r\n        self.newRecords = self.newRecords || {};\r\n\r\n        // Get cell properties\r\n        if (!self.cellMetadata[key]) self.cellMetadata[key] = {};\r\n        if (!self.cellMetadata[key][columnIndex]) self.cellMetadata[key][columnIndex] = {};\r\n        var properties = self.cellMetadata[key][columnIndex].properties || renderColumn.originalProperties;\r\n\r\n        var visible = properties.visible !== undefined ? properties.visible : true;\r\n        var editable = properties.editable !== undefined ? properties.editable : true;\r\n\r\n        // Apply overrides from cellOverrides\r\n        visible = cellOverride.visible;\r\n        editable = properties.editable ? cellOverride.editable : false;\r\n\r\n        // Show editable cell when we are performing inline add operation\r\n        if (isNewRow) editable = true;\r\n\r\n        // If the cell we are drawing is the summary cell, we need to make it readonly\r\n        if (key === \"summary\") editable = false;\r\n\r\n        renderColumn.properties.displayType = 'value';\r\n        renderColumn.setValue(key, value);\r\n        renderColumn.setSurrogateKey(key);\r\n        renderColumn.properties.data = renderColumn.properties.data || [];\r\n\r\n        // Column search\r\n        if (renderColumn.properties.type === \"columnSearch\" && value != null) {\r\n            for (var i = 0, len = renderColumn.properties.data.length; i < len; i++) {\r\n                if (renderColumn.properties.data[i].id == value) {\r\n                    value = {id: renderColumn.properties.data[i].id, label: renderColumn.properties.data[i].value};\r\n                }\r\n            }\r\n        }\r\n\r\n        if ((renderColumn.properties.type === \"columnCombo\" || renderColumn.properties.type === \"columnList\") && value != null) { //|| renderColumn.properties.type == \"columnRadio\"\r\n            for (var i = 0, len = renderColumn.properties.data.length; i < len; i++) {\r\n                if (renderColumn.properties.data[i].id == value) {\r\n                    value = [[renderColumn.properties.data[i].id, renderColumn.properties.data[i].value]];\r\n                }\r\n            }\r\n        }\r\n\r\n        // Column text\r\n        if (renderColumn.properties.type === \"columnText\" && bizagi.util.isEmpty(value) && value != null) {\r\n            value = \"\";\r\n        }\r\n\r\n        // Do the render\r\n        if (visible) {\r\n            if (editable) {\r\n                return self.drawEditableCell(renderColumn, properties, key, value, isNewRow);\r\n            } else {\r\n                return self.drawReadonlyCell(renderColumn, properties, key, value);\r\n            }\r\n        } else {\r\n            return \"\";\r\n        }\r\n    },\r\n\r\n    /*\r\n    *   Draws the editable version for the cell\r\n    */\r\n    drawEditableCell: function (renderColumn, properties, key, value, isNewRow) {\r\n        var self = this;\r\n        var defer = new $.Deferred();\r\n\r\n        // Set editable\r\n        var originalEditable = renderColumn.properties.editable;\r\n        renderColumn.properties.editable = true;\r\n\r\n        // Fix problem when required property lose\r\n        renderColumn.overrideProperties({required: properties.required});\r\n\r\n        // Render cell\r\n        $.when(renderColumn.render(key, value)).done(function (cell) {\r\n            // Register array with new records, just when this is a new-record\r\n            if (isNewRow && !self.newRecords[key]) {\r\n                self.newRecords[key] = {};\r\n            }\r\n\r\n            // convert all row visible\r\n            for (var j = 0; j < self.columns.length; j++) {\r\n                self.cellOverrides[key] = self.cellOverrides[key] || {};\r\n                self.getCellOverride(key, j).visible = (self.getCellOverride(key, j).visible != undefined) ? self.getCellOverride(key, j).visible : true;\r\n            }\r\n\r\n            // Add change handler  \r\n            renderColumn.getDecorated(key).bind(\"renderchange\", function (render) {\r\n                self.onCellChange(renderColumn, cell, key);\r\n            });\r\n\r\n            // Resolve cell\r\n            defer.resolve(cell);\r\n        });\r\n\r\n        // Restore editable\r\n        renderColumn.properties.editable = originalEditable;\r\n\r\n        // Return promise\r\n        return defer.promise();\r\n    },\r\n\r\n    /*\r\n    *   Draws the readonly version for the cell\r\n    */\r\n    drawReadonlyCell: function (renderColumn, properties, key, value) {\r\n        var result = \"\";\r\n\r\n        // Use totalizer format when printing summary row\r\n        if (key === \"summary\") {\r\n            var originalFormat = renderColumn.properties.textFormat;\r\n            if (renderColumn.properties.totalize) {\r\n                renderColumn.properties.textFormat = renderColumn.properties.totalize.format;\r\n            }\r\n\r\n            result = renderColumn.renderSummary(key, value);\r\n\r\n            // Restore column format\r\n            renderColumn.properties.textFormat = originalFormat;\r\n        } else {\r\n            result = renderColumn.renderReadOnly(key, value);\r\n        }\r\n        return result;\r\n    },\r\n\r\n    /*\r\n    *   Defines the handler when a cell changes its value\r\n    */\r\n    onCellChange: function (renderColumn, cell, key) {\r\n\r\n        var self = this;\r\n        var _value = renderColumn.getValue(key);\r\n        var compositeValue = renderColumn.getCompositeValue(key);\r\n\r\n        if (renderColumn.properties.type === \"columnDate\" && renderColumn.data.properties.showTime == true) {\r\n\r\n            if (!bizagi.util.isEmpty(_value)) {\r\n                var date = bizagi.util.dateFormatter.getDateFromInvariant(_value, true);\r\n                _value = bizagi.util.dateFormatter.formatInvariant(date, true);\r\n            } else if (_value === \"\") {\r\n                _value = \"\";\r\n            }\r\n        } else if (renderColumn.properties.type === \"columnDate\") {\r\n\r\n            if (!bizagi.util.isEmpty(_value)) {\r\n                var date = bizagi.util.dateFormatter.getDateFromInvariant(_value, false);\r\n                date.setHours(0, 0, 0, 0);\r\n                _value = bizagi.util.dateFormatter.formatInvariant(date, true);\r\n            } else if (_value === \"\") {\r\n                _value = \"\";\r\n            }\r\n        }\r\n\r\n        if (self.properties.allowEdit || self.grid.bizagi_grid_tablet(\"isNewRecord\", key)) {\r\n            var trigger = self.grid.bizagi_grid_tablet(\"isNewRecord\", key) ? false : true;\r\n            self.collectGridChange({\r\n                id: key,\r\n                xpath: renderColumn.properties.xpath,\r\n                value: _value,\r\n                compositeValue: compositeValue,\r\n                columnIndex: renderColumn.columnIndex,\r\n                trigger: trigger\r\n            });\r\n        }\r\n\r\n        // Update change in grid's component data\r\n        self.grid.bizagi_grid_tablet(\"changeCellValue\", key, renderColumn.columnIndex, _value);\r\n\r\n        // If the column has totalizers then we need to refresh the summary\r\n        if (renderColumn.properties.totalize && renderColumn.properties.totalize.operation) {\r\n            self.grid.bizagi_grid_tablet(\"refreshSummary\", renderColumn.columnIndex);\r\n        }\r\n    },\r\n    /*\r\n    *   Collect a single cell change made in the grid to send the data when the user saves the form\r\n    */\r\n    collectGridChange: function (params) {\r\n        var self = this;\r\n        params = params || {};\r\n        var id = params.id;\r\n        var xpath = params.xpath;\r\n        var value = params.value;\r\n        var trigger = typeof (params.trigger) !== \"undefined\" ? params.trigger : true;\r\n\r\n        self.changes[id] = self.changes[id] || {};\r\n        self.changes[id][xpath] = value;\r\n\r\n        if (trigger)\r\n            self.triggerRenderChange({key: id, column: xpath});\r\n    },\r\n    /*\r\n    *   Executes when the cell is ready and inserted into the DOM\r\n    */\r\n    onCellReady: function (column, key, cell, isNewRow) {\r\n        // Available editable\r\n        isNewRow = true;\r\n        bizagi.rendering.tablet.grid.prototype.onCellReady.apply(this, arguments);\r\n    },\r\n\r\n    /**\r\n     *  Adds a row to the grid\r\n     */\r\n    addRow: function () {\r\n        bizagi.showMessageBox(bizagi.localization.getResource(\"render-tablet-error-userfield\"), bizagi.localization.getResource(\"render-tablet-error-userfield\"));\r\n    },\r\n\r\n    /**\r\n     *  Edits a row in the grid\r\n     */\r\n    editRow: function (id) {\r\n    },\r\n\r\n    /**\r\n     *  Deletes a row to the grid\r\n     */\r\n    deleteRow: function (id) {\r\n        var self = this;\r\n\r\n        if (!id || id == 0) {\r\n            bizagi.showMessageBox(bizagi.localization.getResource(\"render-grid-message-no-selected-row\"), bizagi.localization.getResource(\"render-grid-header-no-selected-row\"));\r\n            return;\r\n        }\r\n\r\n        bizagi.showConfirmationBox(this.getResource(\"render-grid-delete-confirmation\")).done(function () {\r\n            // Do a grid record deletion\r\n            $.when(self.submitDeleteRequest(id))\r\n                .done(function () {\r\n                    // Reload grid\r\n                    self.fetchData();\r\n                });\r\n        });\r\n    },\r\n\r\n    /**\r\n     *  Edits the entire row (inline) in another slide\r\n     */\r\n    editInline: function (id) {\r\n    },\r\n    /*\r\n    *   Retrieve the data for the new rows and push them into the server\r\n    */\r\n    saveInlineAddedRows: function (keys, bRefresh) {\r\n        var self = this;\r\n        var rows = self.processChanges();\r\n\r\n        if (!bizagi.util.isEmpty(rows)) {\r\n            self.properties.data.rows = $.merge(self.properties.data.rows, rows);\r\n        }\r\n    },\r\n\r\n    /*\r\n    * Removes invalid records \r\n    */\r\n    removeNewRecords: function (ui) {\r\n        var self = this;\r\n\r\n        if (ui && ui.keys) {\r\n            $.each(ui.keys, function (_, key) {\r\n                if (self.newRecords[key]) {\r\n                    delete self.newRecords[key];\r\n                    delete self.changes[key]; \r\n                }\r\n            });\r\n        }\r\n    },\r\n\r\n    /*\r\n    *   Fetch the data into a deferred\r\n    */\r\n    getRemoteData: function (params) {\r\n        var self = this;\r\n        var properties = self.properties;\r\n\r\n        // Set params\r\n        params = params || {};\r\n\r\n        // Check if a custom method has been given\r\n        if (properties.overrideGetRemoteData) {\r\n            var result = properties.overrideGetRemoteData(params);\r\n            return result != null ? result.promise() : null;\r\n        }\r\n\r\n        // Default ajax call\r\n        var defer = new $.Deferred();\r\n\r\n        // Resolve with remote data\r\n        var data = properties.data;\r\n\r\n        // Resolve with fetched data    \r\n        properties.page = data.page;\r\n        properties.records = data.records;\r\n        properties.totalPages = data.totalPages;\r\n\r\n        // Check RTL\r\n        if (self.isRTL()) {\r\n            data.rows = self.changeOrderData(data.rows);\r\n        }\r\n\r\n        defer.resolve(data);\r\n\r\n        return defer.promise();\r\n    },\r\n    /*\r\n    *   Submits a grid delete record request for the given id \r\n    *   Returns a deferred\r\n    */\r\n    submitDeleteRequest: function (id) {\r\n        var self = this;\r\n        var properties = self.properties;\r\n        var data = self.properties.data;\r\n        var statusAction = false;            \r\n        // Found row by id\r\n        var currentRow = [];\r\n        for (var i = 0, length = data.rows.length; i < length; i++) {\r\n            if (data.rows[i][0] == id) {\r\n                currentRow = data.rows[i];\r\n\r\n                data.rows.splice(i, 1);\r\n                i--;\r\n\r\n                data.records--;\r\n                statusAction = true;\r\n                if(!self.newRecords[id])\r\n                {\r\n                    var xpath = properties.xpath + self.buildCellXpathFilter(id);\r\n\r\n                    var delInfo = {\r\n                        url: properties.deleteUrl,\r\n                        idRender: properties.id,\r\n                        xpath: xpath,\r\n                        xpathContext: properties.xpathContext,\r\n                        idPageCache: properties.idPageCache,\r\n                        contexttype: properties.contextType,\r\n                        prepare: true\r\n                    }\r\n                    self[\"deleted-records\"][id] = delInfo;\r\n                }\r\n                else {\r\n                    delete self.newRecords[id];\r\n                }\r\n                delete self.changes[id];\r\n                break;\r\n            }\r\n        }\r\n\r\n        return (data.rows);\r\n    },\r\n\r\n    isValidGrid: function () {\r\n        var self = this;\r\n        var errorsMessage = [];\r\n        var form = self.getFormContainer();\r\n\r\n        if (typeof (form.validationController) !== \"undefined\")\r\n            form.validationController.clearValidationMessages();\r\n\r\n        self.isValid(errorsMessage);\r\n\r\n        if (errorsMessage.length > 0) {\r\n            if (typeof (form.validationController) !== \"undefined\") {\r\n                for (var index = 0; index < errorsMessage.length; index++) {\r\n                    form.validationController.showValidationMessage(errorsMessage[index].message, errorsMessage[index].xpath);\r\n                }\r\n            }\r\n\r\n            return false;\r\n        } else {\r\n            return true;\r\n        }\r\n    }\r\n});","/**\r\n *   Name: Bizagi Tablet Render Grid Extension\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will redefine the offline grid render class to adjust to tablet devices\r\n */\r\n\r\n// Extends itself\r\nbizagi.rendering.tablet.grid.extend(\"bizagi.rendering.tablet.grid.offline.old\", {\r\n    MAX_ROWS_SUPPORTED: 4\r\n}, {\r\n    /*\r\n    *   Constructor\r\n    */\r\n    init: function (params) {\r\n        var self = this;\r\n\r\n        // Call base\r\n        this._super(params);\r\n\r\n        // Fill default properties\r\n        var form = self.getFormContainer();\r\n        var properties = this.properties;\r\n        properties.data.originalRows = bizagi.clone(properties.data.rows);\r\n\r\n        // Just apply display-type: vertical, align it to the left\r\n        properties.displayType = \"vertical\";\r\n        properties.labelAlign = \"left\";\r\n\r\n        if (properties.groupBy || properties.groupSummary) {\r\n            // Add warning\r\n            form.addWarning(self.getResource(\"render-tablet-warning-grid\"));\r\n        }\r\n    },\r\n\r\n    /*\r\n    *   Template method to implement in each device to customize each render after processed\r\n    */\r\n    postRender: function () {\r\n        var self = this;\r\n        var properties = self.properties;\r\n        var control = self.getControl();\r\n\r\n        self.initialLoadDone = false;\r\n\r\n        // Find component holder\r\n        self.grid = $(\">div\", control);\r\n\r\n        // Hide common label\r\n        self.getLabel().hide();\r\n\r\n        // Grid plugin\r\n        self.applyGridPlugin();\r\n\r\n        // Set initial data\r\n        if (properties.data) {\r\n\r\n            self.updateData(properties.data);\r\n\r\n            // Trigger change in order to start up the actions when the controls is ready\r\n            $.when(self.ready()).done(function () {\r\n                    self.triggerRenderChange({changed: false});\r\n                });\r\n        }\r\n\r\n        // Execute pending actions\r\n        self.initialLoadDone = true;\r\n\r\n        for (var i in self.pendingActions) {\r\n            self.pendingActions[i].method.apply(self, self.pendingActions[i].arguments);\r\n        }\r\n    },\r\n\r\n    /*\r\n    *   Method to render non editable values\r\n    */\r\n    postRenderReadOnly: function () {\r\n        var self = this;\r\n\r\n        // Do the same as the post-render            \r\n        self.postRender();\r\n    },\r\n\r\n    /*\r\n    *   Method to render non editable values\r\n    */\r\n    applyGridPlugin: function () {\r\n        var self = this;\r\n        var properties = self.properties;\r\n        var grid = self.grid;\r\n        var mode = self.getMode();\r\n\r\n        // Build column metadata\r\n        var columns = self.buildColumnModel();\r\n\r\n        // Apply grid plugin\r\n        grid.bizagi_grid_tablet({\r\n            columns: columns,\r\n            maxColumns: self.Class.MAX_ROWS_SUPPORTED,\r\n            title: properties.displayName,\r\n            isOfflineForm: this.isOfflineForm || false,\r\n            mode: self.getMode(),\r\n            template: {\r\n                grid: self.renderFactory.getTemplate(\"bizagi.grid.grid\"),\r\n                waiting: self.renderFactory.getTemplate(\"bizagi.grid.waiting\"),\r\n                table: self.renderFactory.getTemplate(\"bizagi.grid.table\"),\r\n                emptyTable: self.renderFactory.getTemplate(\"bizagi.grid.table.empty\"),\r\n                column: self.renderFactory.getTemplate(\"bizagi.grid.column\"),\r\n                specialColumn: self.renderFactory.getTemplate(\"bizagi.grid.column.special\"),\r\n                row: self.renderFactory.getTemplate(\"bizagi.grid.row\"),\r\n                cell: self.renderFactory.getTemplate(\"bizagi.grid.cell\"),\r\n                pager: self.renderFactory.getTemplate(\"bizagi.grid.pager\"),\r\n                dynamicPager: self.renderFactory.getTemplate(\"bizagi.grid.dynamicpager\"),\r\n                buttons: self.renderFactory.getTemplate(\"bizagi.grid.offline.buttons\"),\r\n                rowButtons: self.renderFactory.getTemplate(\"bizagi.grid.offline.row.buttons\"),\r\n                specialCell: self.renderFactory.getTemplate(\"bizagi.grid.offline.cell.special\"),\r\n            },\r\n            actions: {\r\n                add: properties.allowAdd,\r\n                edit: (properties.allowEdit && properties.withEditForm && properties.data != null),\r\n                remove: properties.allowDelete,\r\n                details: false,\r\n                inlineAdd: !properties.editable ? properties.inlineAdd: true,\r\n                allowMore: false,\r\n                enableXlsExport: false,\r\n                enablePdfExport: false,\r\n                hasTotalizer: false\r\n            },\r\n            isValid: function () {\r\n                return self.isValidGrid();\r\n            },\r\n            pageRequested: function (ui) {\r\n                if (mode !== \"execution\") return;\r\n                self.fetchData(ui.page, ui.sortBy, ui.sortType);\r\n            },\r\n            drawCell: function (ui) {\r\n                return self.drawCell(ui.column, ui.key, ui.value, ui.isNewRow);\r\n            },\r\n            cellReady: function (ui) {\r\n                return self.onCellReady(ui.column, ui.key, ui.cell, ui.isNewRow);\r\n            },\r\n            rowSelected: function (ui) {\r\n                if (mode !== \"execution\") return;\r\n                var data = ui;\r\n                self.triggerHandler(\"rowSelected\", {id: ui.key, data: ui});\r\n            },\r\n            addRow: function (ui) {\r\n                if (mode !== \"execution\") return;\r\n                self.addRow();\r\n            },\r\n            editRow: function (ui) {\r\n                if (mode !== \"execution\") return;\r\n                self.editRow(ui.key);\r\n            },\r\n            deleteRow: function (ui) {\r\n                if (mode !== \"execution\") return;\r\n                self.deleteRow(ui.key);\r\n            },\r\n            saveAddedRows: function (ui) {\r\n                self.saveInlineAddedRows(ui.keys);\r\n            },\r\n            beforeInlineAdd: function () {\r\n                self.inlineAddDeferred = new $.Deferred();\r\n            },\r\n            afterInlineAdd: function () {\r\n                if (self.inlineAddDeferred) {\r\n                    self.inlineAddDeferred.resolve();\r\n                }\r\n            },\r\n            cancelEdition: function (ui) {\r\n                self.removeNewRecords(ui);\r\n            },\r\n            removeNewRecords: function (ui) {\r\n                self.removeNewRecords(ui);\r\n            }\r\n        });\r\n    },\r\n\r\n    /*\r\n    *   Method to fetch data from the server and then update the data\r\n    */\r\n    fetchData: function (page, sortBy, sortType) {\r\n        var self = this;\r\n\r\n        self.dataReadyDeferred = new $.Deferred();\r\n\r\n        // Start loading to avoid multiple calls to the server\r\n        self.startLoading();\r\n\r\n        $.when(self.getRemoteData()).then(function (data) {\r\n            self.endLoading();\r\n            if (data) {\r\n                self.updateData(data);\r\n                self.triggerRenderChange();\r\n                self.dataReadyDeferred.resolve();\r\n            }\r\n        });\r\n    },\r\n\r\n    processChanges: function () {\r\n        var self = this;\r\n        var rowsList = [];\r\n        var data = self.properties.data;\r\n\r\n        // Save pending inline add rows\r\n        for (var id in self.changes) {\r\n            var sortArray = [];\r\n\r\n            for (var columnXpath in self.changes[id]) {\r\n\r\n\r\n                // Check if the render can submit data\r\n                if (self.canColumnBeSent(id, columnXpath)) {\r\n                    var columnNumber = self.getColumn(columnXpath).columnIndex - 1;\r\n                    var value = self.changes[id][columnXpath].value ? self.changes[id][columnXpath].value: self.changes[id][columnXpath];\r\n\r\n                    if (typeof value === \"string\") {\r\n                        if (value.match(/\\n/gm) !== null) {\r\n                            value = value.replaceAll(\"\\n\", \"\\\\n\");\r\n                        }\r\n                    }\r\n\r\n                    sortArray[columnNumber] = {\r\n                        value: value,\r\n                        xpath: columnXpath,\r\n                        DataType: self.getColumn(columnXpath).properties.dataType\r\n                    };\r\n                }\r\n            }\r\n\r\n            if (typeof (self.properties.data.rows) !== \"undefined\" && self.properties.data.rows.length > 0) {\r\n                // Search row\r\n                var currentRow = [];\r\n                for (var i = 0; i < data.rows.length; i++) {\r\n                    if (data.rows[i][0] == id) {\r\n                        currentRow = data.rows[i];\r\n\r\n                        // Delete current data\r\n                        data.rows.splice(i, 1);\r\n                        i--;\r\n\r\n                        // Mixed data\r\n                        currentRow = self.processRow(currentRow);\r\n                        sortArray = $.extend(true, currentRow, sortArray);\r\n\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n            sortArray.unshift(id);\r\n            rowsList.push(sortArray);\r\n        }\r\n\r\n        return rowsList;\r\n    },\r\n\r\n    /*\r\n    *   Add the render data to the given collection in order to send data to the server\r\n    */\r\n    collectData: function (renderValues) {\r\n        var self = this;\r\n        var errorsMessage = [];\r\n        var internalRedersValues = [];\r\n        var properties = self.properties;\r\n        var data = self.properties.data;\r\n        var editedRows = {};\r\n        // Save pending inline add rows\r\n        if (self.isValid(errorsMessage)) {\r\n            for (var id in self.changes) {\r\n                var sortArray = [];\r\n\r\n                for (var columnXpath in self.changes[id]) {\r\n\r\n                    // Check if the render can submit data\r\n                    if (self.canColumnBeSent(id, columnXpath)) {\r\n                        var columnNumber = self.getColumn(columnXpath).columnIndex - 1;\r\n                        var value = self.changes[id][columnXpath].value ? self.changes[id][columnXpath].value: self.changes[id][columnXpath];\r\n\r\n                        if (typeof value === \"string\") {\r\n                            if (value.match(/\\n/gm) !== null) {\r\n                                value = value.replaceAll(\"\\n\", \"\\\\n\");\r\n                            }\r\n                        }\r\n\r\n                        sortArray[columnNumber] = {\r\n                            value: value,\r\n                            xpath: columnXpath,\r\n                            DataType: self.getColumn(columnXpath).properties.dataType\r\n                        };\r\n                    }\r\n                }\r\n\r\n                if (typeof (self.properties.data.rows) !== \"undefined\" && self.properties.data.rows.length > 0) {\r\n                    // Search row\r\n                    var currentRow = [];\r\n                    for (var i = 0; i < data.rows.length; i++) {\r\n                        if (data.rows[i][0] == id) {\r\n                            currentRow = data.rows[i];\r\n\r\n                            // Delete current data\r\n                            data.rows.splice(i, 1);\r\n                            i--;\r\n                            // Mixed data\r\n                            currentRow = self.processRow(currentRow);\r\n                            sortArray = $.extend(true, currentRow, sortArray);\r\n                            //Store for data.rows\r\n                            editedRows[id] = {\r\n                                values: sortArray,\r\n                                idRow: id,\r\n                                position: i\r\n                            };\r\n                            break;\r\n                        }\r\n                    }\r\n                }\r\n\r\n                internalRedersValues[internalRedersValues.length] = sortArray;\r\n            }\r\n        }\r\n\r\n        // Get data\r\n        if (JSON.stringify(data.rows) !== JSON.stringify(data.originalRows) || internalRedersValues.length > 0) {\r\n            if (typeof (data.rows) !== \"undefined\" && internalRedersValues.length > 0) {\r\n                renderValues[properties.xpath] = $.merge($.merge([], self.processOldRows(data.rows)), internalRedersValues);\r\n            } else if (typeof (data.rows) !== \"undefined\" && data.rows.length > 0) {\r\n                renderValues[properties.xpath] = self.processOldRows(data.rows);\r\n            } else {\r\n                renderValues[properties.xpath] = internalRedersValues;\r\n            }\r\n        }\r\n\r\n        //Restore data.rows\r\n        if(internalRedersValues.length > 0) {\r\n            var editedKeys = Object.keys(editedRows);\r\n            for(var k = 0; k< editedKeys.length;k++) {\r\n                var editedRow = editedRows[editedKeys[k]];\r\n                //Bring back id\r\n                var valueCopy = $.merge([], editedRow.values);\r\n                valueCopy.unshift(editedRow.idRow) ; \r\n                data.rows.splice( editedRow.position, 0, valueCopy); // at index position 1, remove 0 elements, then add \"baz\" to that position\r\n            }\r\n        }\r\n        \r\n    },\r\n\r\n    /*\r\n    *   Delete field id array objects\r\n    */\r\n    processOldRows: function (rows) {\r\n        var newRows = [];\r\n        var tempRows = rows;\r\n\r\n        for (var col = 0, leng = tempRows.length; col < leng; col++) {\r\n            var temp = tempRows[col];\r\n            newRows[col] = $.grep(temp, function (n, i) {\r\n                return i > 0;\r\n            });\r\n        }\r\n\r\n        return newRows;\r\n    },\r\n    /*\r\n    *   Delete field id array\r\n    */\r\n    processRow: function (row) {\r\n        return $.grep(row, function (n, i) {\r\n            return i > 0;\r\n        });\r\n    },\r\n    /*\r\n    *   Customizes the content drawing inside the cell\r\n    */\r\n    drawCell: function (column, key, value, isNewRow) {\r\n        var self = this;\r\n\r\n        if (column.key) return value;\r\n\r\n        if (typeof (value) === \"object\" && !isNewRow) {\r\n            value = value.hasOwnProperty(\"value\") ? value.value : value;\r\n        }\r\n\r\n        // Get render column                \r\n        var columnIndex = column.index - 1;\r\n        var renderColumn = self.columns[columnIndex];\r\n        var cellOverride = self.getCellOverride(key, column.index - 1);\r\n\r\n        self.newRecords = self.newRecords || {};\r\n\r\n        // Get cell properties\r\n        if (!self.cellMetadata[key]) self.cellMetadata[key] = {};\r\n        if (!self.cellMetadata[key][columnIndex]) self.cellMetadata[key][columnIndex] = {};\r\n        var properties = self.cellMetadata[key][columnIndex].properties || renderColumn.originalProperties;\r\n\r\n        var visible = properties.visible !== undefined ? properties.visible : true;\r\n        var editable = properties.editable !== undefined ? properties.editable : true;\r\n\r\n        // Apply overrides from cellOverrides\r\n        visible = cellOverride.visible;\r\n        editable = properties.editable ? cellOverride.editable : false;\r\n\r\n        // Show editable cell when we are performing inline add operation\r\n        if (isNewRow) editable = true;\r\n\r\n        // If the cell we are drawing is the summary cell, we need to make it readonly\r\n        if (key === \"summary\") editable = false;\r\n\r\n        renderColumn.properties.displayType = 'value';\r\n        renderColumn.setValue(key, value);\r\n        renderColumn.setSurrogateKey(key);\r\n        renderColumn.properties.data = renderColumn.properties.data || [];\r\n\r\n        // Column search\r\n        if (renderColumn.properties.type === \"columnSearch\" && value != null) {\r\n            for (var i = 0, len = renderColumn.properties.data.length; i < len; i++) {\r\n                if (renderColumn.properties.data[i].id == value) {\r\n                    value = {id: renderColumn.properties.data[i].id, label: renderColumn.properties.data[i].value};\r\n                }\r\n            }\r\n        }\r\n\r\n        if ((renderColumn.properties.type === \"columnCombo\" || renderColumn.properties.type === \"columnList\") && value != null) { //|| renderColumn.properties.type == \"columnRadio\"\r\n            for (var i = 0, len = renderColumn.properties.data.length; i < len; i++) {\r\n                if (renderColumn.properties.data[i].id == value) {\r\n                    value = [[renderColumn.properties.data[i].id, renderColumn.properties.data[i].value]];\r\n                }\r\n            }\r\n        }\r\n\r\n        // Do the render\r\n        if (visible) {\r\n            if (editable) {\r\n                return self.drawEditableCell(renderColumn, properties, key, value, isNewRow);\r\n            } else {\r\n                return self.drawReadonlyCell(renderColumn, properties, key, value);\r\n            }\r\n        } else {\r\n            return \"\";\r\n        }\r\n    },\r\n\r\n    /*\r\n    *   Draws the editable version for the cell\r\n    */\r\n    drawEditableCell: function (renderColumn, properties, key, value, isNewRow) {\r\n        var self = this;\r\n        var defer = new $.Deferred();\r\n\r\n        // Set editable\r\n        var originalEditable = renderColumn.properties.editable;\r\n        renderColumn.properties.editable = true;\r\n\r\n        // Fix problem when required property lose\r\n        renderColumn.overrideProperties({required: properties.required});\r\n\r\n        // Render cell\r\n        $.when(renderColumn.render(key, value)).done(function (cell) {\r\n            // Register array with new records, just when this is a new-record\r\n            if (isNewRow && !self.newRecords[key]) {\r\n                self.newRecords[key] = {};\r\n            }\r\n\r\n            // convert all row visible\r\n            for (var j = 0; j < self.columns.length; j++) {\r\n                self.cellOverrides[key] = self.cellOverrides[key] || {};\r\n                self.getCellOverride(key, j).visible = (self.getCellOverride(key, j).visible != undefined) ? self.getCellOverride(key, j).visible : true;\r\n            }\r\n\r\n            // Add change handler  \r\n            renderColumn.getDecorated(key).bind(\"renderchange\", function (render) {\r\n                self.onCellChange(renderColumn, cell, key);\r\n            });\r\n\r\n            // Resolve cell\r\n            defer.resolve(cell);\r\n        });\r\n\r\n        // Restore editable\r\n        renderColumn.properties.editable = originalEditable;\r\n\r\n        // Return promise\r\n        return defer.promise();\r\n    },\r\n\r\n    /*\r\n    *   Draws the readonly version for the cell\r\n    */\r\n    drawReadonlyCell: function (renderColumn, properties, key, value) {\r\n        var result = \"\";\r\n\r\n        // Use totalizer format when printing summary row\r\n        if (key === \"summary\") {\r\n            var originalFormat = renderColumn.properties.textFormat;\r\n            if (renderColumn.properties.totalize) {\r\n                renderColumn.properties.textFormat = renderColumn.properties.totalize.format;\r\n            }\r\n\r\n            result = renderColumn.renderSummary(key, value);\r\n\r\n            // Restore column format\r\n            renderColumn.properties.textFormat = originalFormat;\r\n        } else {\r\n            result = renderColumn.renderReadOnly(key, value);\r\n        }\r\n        return result;\r\n    },\r\n\r\n    /*\r\n    *   Defines the handler when a cell changes its value\r\n    */\r\n    onCellChange: function (renderColumn, cell, key) {\r\n\r\n        var self = this;\r\n        var _value = renderColumn.getValue(key);\r\n        var compositeValue = renderColumn.getCompositeValue(key);\r\n\r\n        if (renderColumn.properties.type === \"columnDate\" && renderColumn.data.properties.showTime == true) {\r\n\r\n            if (!bizagi.util.isEmpty(_value)) {\r\n                var date = bizagi.util.dateFormatter.getDateFromInvariant(_value, true);\r\n                _value = bizagi.util.dateFormatter.formatInvariant(date, true);\r\n            } else if (_value === \"\") {\r\n                _value = \"\";\r\n            }\r\n        } else if (renderColumn.properties.type === \"columnDate\") {\r\n\r\n            if (!bizagi.util.isEmpty(_value)) {\r\n                var date = bizagi.util.dateFormatter.getDateFromInvariant(_value, false);\r\n                date.setHours(0, 0, 0, 0);\r\n                _value = bizagi.util.dateFormatter.formatInvariant(date, true);\r\n            } else if (_value === \"\") {\r\n                _value = \"\";\r\n            }\r\n        }\r\n\r\n        if (self.properties.allowEdit || self.grid.bizagi_grid_tablet(\"isNewRecord\", key)) {\r\n            var trigger = self.grid.bizagi_grid_tablet(\"isNewRecord\", key) ? false : true;\r\n            self.collectGridChange({\r\n                id: key,\r\n                xpath: renderColumn.properties.xpath,\r\n                value: _value,\r\n                compositeValue: compositeValue,\r\n                columnIndex: renderColumn.columnIndex,\r\n                trigger: trigger\r\n            });\r\n        }\r\n\r\n        // Update change in grid's component data\r\n        self.grid.bizagi_grid_tablet(\"changeCellValue\", key, renderColumn.columnIndex, _value);\r\n\r\n        // If the column has totalizers then we need to refresh the summary\r\n        if (renderColumn.properties.totalize && renderColumn.properties.totalize.operation) {\r\n            self.grid.bizagi_grid_tablet(\"refreshSummary\", renderColumn.columnIndex);\r\n        }\r\n    },\r\n    /*\r\n    *   Collect a single cell change made in the grid to send the data when the user saves the form\r\n    */\r\n    collectGridChange: function (params) {\r\n        var self = this;\r\n        params = params || {};\r\n        var id = params.id;\r\n        var xpath = params.xpath;\r\n        var value = params.value;\r\n        var trigger = typeof (params.trigger) !== \"undefined\" ? params.trigger : true;\r\n\r\n        self.changes[id] = self.changes[id] || {};\r\n        self.changes[id][xpath] = value;\r\n\r\n        if (trigger)\r\n            self.triggerRenderChange({key: id, column: xpath});\r\n    },\r\n    /*\r\n    *   Executes when the cell is ready and inserted into the DOM\r\n    */\r\n    onCellReady: function (column, key, cell, isNewRow) {\r\n        // Available editable\r\n        isNewRow = true;\r\n        bizagi.rendering.tablet.grid.prototype.onCellReady.apply(this, arguments);\r\n    },\r\n\r\n    /**\r\n     *  Adds a row to the grid\r\n     */\r\n    addRow: function () {\r\n        bizagi.showMessageBox(bizagi.localization.getResource(\"render-tablet-error-userfield\"), bizagi.localization.getResource(\"render-tablet-error-userfield\"));\r\n    },\r\n\r\n    /**\r\n     *  Edits a row in the grid\r\n     */\r\n    editRow: function (id) {\r\n    },\r\n\r\n    /**\r\n     *  Deletes a row to the grid\r\n     */\r\n    deleteRow: function (id) {\r\n        var self = this;\r\n\r\n        if (!id || id == 0) {\r\n            bizagi.showMessageBox(bizagi.localization.getResource(\"render-grid-message-no-selected-row\"), bizagi.localization.getResource(\"render-grid-header-no-selected-row\"));\r\n            return;\r\n        }\r\n\r\n        bizagi.showConfirmationBox(this.getResource(\"render-grid-delete-confirmation\")).done(function () {\r\n            // Do a grid record deletion\r\n            $.when(self.submitDeleteRequest(id))\r\n                .done(function () {\r\n                    // Reload grid\r\n                    self.fetchData();\r\n                });\r\n        });\r\n    },\r\n\r\n    /**\r\n     *  Edits the entire row (inline) in another slide\r\n     */\r\n    editInline: function (id) {\r\n    },\r\n    /*\r\n    *   Retrieve the data for the new rows and push them into the server\r\n    */\r\n    saveInlineAddedRows: function (keys, bRefresh) {\r\n        var self = this;\r\n        var rows = self.processChanges();\r\n\r\n        if (!bizagi.util.isEmpty(rows)) {\r\n            self.properties.data.rows = $.merge(self.properties.data.rows, rows);\r\n        }\r\n    },\r\n\r\n    /*\r\n    * Removes invalid records \r\n    */\r\n    removeNewRecords: function (ui) {\r\n        var self = this;\r\n\r\n        if (ui && ui.keys) {\r\n            $.each(ui.keys, function (_, key) {\r\n                if (self.newRecords[key]) {\r\n                    delete self.newRecords[key];\r\n                    delete self.changes[key];\r\n                }\r\n            });\r\n        }\r\n    },\r\n\r\n    /*\r\n    *   Fetch the data into a deferred\r\n    */\r\n    getRemoteData: function (params) {\r\n        var self = this;\r\n        var properties = self.properties;\r\n\r\n        // Set params\r\n        params = params || {};\r\n\r\n        // Check if a custom method has been given\r\n        if (properties.overrideGetRemoteData) {\r\n            var result = properties.overrideGetRemoteData(params);\r\n            return result != null ? result.promise() : null;\r\n        }\r\n\r\n        // Default ajax call\r\n        var defer = new $.Deferred();\r\n\r\n        // Resolve with remote data\r\n        var data = properties.data;\r\n\r\n        // Resolve with fetched data    \r\n        properties.page = data.page;\r\n        properties.records = data.records;\r\n        properties.totalPages = data.totalPages;\r\n        if(!data.columns) {\r\n            data.columns = [];\r\n            for (var i = 0; i < self.columns.length; i++) {\r\n                data.columns.push(self.columns[i].properties.xpath);\r\n            }\r\n        }\r\n        var lengthColumns = data.columns.length;\r\n        var lengthRows = data.rows.length;\r\n        var filledRows = [];\r\n        for (var row = 0; row < lengthRows; row++) {\r\n            // Add random value\r\n            var idRow = data.rows[row][0];\r\n            data.rows[row].splice(0, 1);\r\n            var rowItem = data.rows[row];\r\n            var tempRow = [];\r\n            for (var col = 0; col < lengthColumns; col++) {\r\n                var index = typeof (rowItem[col]) !== \"undefined\" ? data.columns.indexOf(rowItem[col].xpath) : -1;\r\n\r\n                if (index != -1) {\r\n                    tempRow[index] = rowItem[col];\r\n                }\r\n\r\n                tempRow[col] = (typeof (tempRow[col]) === \"undefined\") ? {} : tempRow[col];\r\n            }\r\n\r\n            filledRows.push($.merge([idRow], tempRow));\r\n        }\r\n        data.rows = filledRows;\r\n        // Check RTL\r\n        if (self.isRTL()) {\r\n            data.rows = self.changeOrderData(data.rows);\r\n        }\r\n\r\n        defer.resolve(data);\r\n\r\n        return defer.promise();\r\n    },\r\n    /*\r\n    *   Submits a grid delete record request for the given id \r\n    *   Returns a deferred\r\n    */\r\n    submitDeleteRequest: function (id) {\r\n        var self = this;\r\n        var data = self.properties.data;\r\n        var statusAction = false;\r\n\r\n        // Found row by id\r\n        var currentRow = [];\r\n        for (var i = 0, length = data.rows.length; i < length; i++) {\r\n            if (data.rows[i][0] == id) {\r\n                currentRow = data.rows[i];\r\n\r\n                data.rows.splice(i, 1);\r\n                i--;\r\n\r\n                data.records--;\r\n                statusAction = true;\r\n                break;\r\n            }\r\n        }\r\n        delete self.newRecords[id];\r\n        delete self.changes[id];\r\n\r\n        // verified status action\r\n       /* if (!statusAction) {\r\n            bizagi.showMessageBox(this.getResource(\"workportal-general-no-records-found\"));\r\n        }*/\r\n\r\n        return (data.rows);\r\n    },\r\n\r\n    isValidGrid: function () {\r\n        var self = this;\r\n        var errorsMessage = [];\r\n        var form = self.getFormContainer();\r\n\r\n        if (typeof (form.validationController) !== \"undefined\")\r\n            form.validationController.clearValidationMessages();\r\n\r\n        self.isValid(errorsMessage);\r\n\r\n        if (errorsMessage.length > 0) {\r\n            if (typeof (form.validationController) !== \"undefined\") {\r\n                for (var index = 0; index < errorsMessage.length; index++) {\r\n                    form.validationController.showValidationMessage(errorsMessage[index].message, errorsMessage[index].xpath);\r\n                }\r\n            }\r\n\r\n            return false;\r\n        } else {\r\n            return true;\r\n        }\r\n    }\r\n});","/**\r\n *   Name: Bizagi Tablet Render Grouped Grid Extension\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will redefine the Grouped Grid render class to adjust to tablet devices\r\n */\r\n\r\n// Extends from Grid Tablet base\r\nbizagi.rendering.tablet.grid.extend(\"bizagi.rendering.tablet.grid.grouped\", {}, {\r\n\r\n    /**\r\n     * Method to customize each render after processed\r\n     */\r\n    postRender: function () {\r\n        this.getControlFiller().addClass(\"bz-form-item__control--hidden\");\r\n    },\r\n\r\n    /**\r\n     * Method to customize each render after processed in read-only mode\r\n     */\r\n    postRenderReadOnly: function () {\r\n        this.getControlFiller().addClass(\"bz-form-item__control--hidden\");\r\n    }\r\n\r\n});","/**\r\n *   Name: Bizagi Render CollectionNavigator\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define basic stuff for collection navigator renders\r\n */\r\n\r\n// Extends from render tablet base\r\nbizagi.rendering.tablet.render.extend(\"bizagi.rendering.tablet.collectionnavigator\", bizagi.rendering.collectionnavigator.prototype);\r\n// Extends itself\r\nbizagi.rendering.tablet.collectionnavigator.extend(\"bizagi.rendering.tablet.collectionnavigator\", {}, {\r\n\r\n    /**\r\n     * Method to customize each render after processed\r\n     */\r\n    postRender: function () {\r\n        this.getControlFiller().addClass(\"bz-form-item__control--hidden\");\r\n    },\r\n\r\n    /**\r\n     * Method to customize each render after processed in read-only mode\r\n     */\r\n    postRenderReadOnly: function () {\r\n        this.getControlFiller().addClass(\"bz-form-item__control--hidden\");\r\n    }\r\n\r\n});","/**\r\n *   Name: Bizagi Tablet Render Search Extension\r\n *   Author: Bizagi UI Forms\r\n *   Comments:\r\n *   -   This script will redefine the Search render class to adjust to tablet devices\r\n */\r\n\r\n// Extends from render tablet base\r\nbizagi.rendering.tablet.render.extend(\"bizagi.rendering.tablet.search\", bizagi.rendering.search.prototype);\r\n// Extends itself\r\nbizagi.rendering.tablet.search.extend(\"bizagi.rendering.tablet.search\", {\r\n    ADVANCED_SEARCH_ID: -1,\r\n    ADVANCED_ADDITION_ID: -2,\r\n    CLEAR_SEARCH_ID: -3,\r\n    NO_RESULTS_SEARCH_ID: -4,\r\n    DEFAULT_SEARCH_ID: \"\",\r\n    SEARCH_MIN_LENGTH: 3,\r\n    SEARCH_DELAY: 250,\r\n    SEARCH_MAX_RECORDS: 50\r\n}, {\r\n\r\n    /**\r\n     * Update or init the element data\r\n     * @param {} data submitData\r\n     * @returns {}\r\n     */\r\n    initializeData: function (data) {\r\n        var self = this;\r\n\r\n        // Call base\r\n        self._super(data);\r\n\r\n        // Check if offline forms is supported\r\n        this.isOfflineForm = bizagi.util.isOfflineForm({context: this});\r\n        this.properties.submitOnChange = this.isOfflineForm ? false : this.properties.submitOnChange;\r\n\r\n        // Store reference of all ajax request in order to run only one instance of them\r\n        this.deferredReference = null;\r\n    },\r\n\r\n    renderReadOnly: function () {\r\n        var template = this.renderFactory.getTemplate(\"readonly\");\r\n        var value = this.getDisplayValue();\r\n        var label = value.label || value.value;\r\n\r\n        if (typeof label != \"undefined\") {\r\n            if (typeof label == \"object\")\r\n                label = label.join(\" - \");\r\n        } else {\r\n            label = \"\";\r\n        }\r\n\r\n        if (typeof label == \"string\") {\r\n            if (value.additionallabel) {\r\n                label += \" - \" + value.additionallabel;\r\n            }\r\n\r\n            label = bizagi.util.sanitizeHTML(label);\r\n        }\r\n\r\n        return $.fasttmpl(template, {\r\n            value: label,\r\n            editable: this.properties.editable\r\n        });\r\n    },\r\n\r\n    /**\r\n     * Template method to implement in each device to customize each render after processed\r\n     * @returns {}\r\n     */\r\n    postRender: function () {\r\n        this.searchInput = $(\".bz-input-icon\", this.getControl());\r\n    },\r\n\r\n    postRenderReadOnly: function () {\r\n        this.searchInput = $(\".bz-input-icon\", this.getControl());\r\n    },\r\n\r\n    /**\r\n     * Template method to implement in each device to customize the render's behaviour\r\n     * to add handlers\r\n     * @returns {}\r\n     */\r\n    configureHandlers: function () {\r\n        var self = this;\r\n        var control = self.getControl();\r\n\r\n        // Select new item\r\n        $(\".bz-input-icon\", control).on(\"click\", function () {\r\n            if (!self.properties.advancedSearch || self.isOfflineForm) {\r\n                self._simplySearchView();\r\n            } else {\r\n                self._advanceSearchView();\r\n            }\r\n        });\r\n\r\n        $(\".bz-icn--clear\", control).bind(\"click\", function (event) {\r\n            // Change display icon\r\n            $(\".bz-input-icon\", control).addClass(\"bz-input-icon--empty\");\r\n\r\n            // Call clean data\r\n            self.cleanData();\r\n\r\n            // Submit info to server\r\n            self.readyActionExecution().done(function () {\r\n                if (self.properties.submitOnChange) {\r\n                    self.submitData();\r\n                }\r\n            });\r\n\r\n            event.stopPropagation();\r\n        });\r\n\r\n    },\r\n\r\n    /**\r\n     * Configure the modalView Handlers for the new suggest control\r\n     * @param {} inputContainer\r\n     * @returns {}\r\n     */\r\n    configureModalViewHandlers: function (modalView) {\r\n        var self = this;\r\n\r\n        // Configuring list as a selectable element\r\n        self.modalViewList = $(\".bz-list\", modalView.content);\r\n\r\n        // Suggest\r\n        var suggestFilter = bizagi.util.debounce(function (value) {\r\n            self.autoCompleteSearchResults($.trim(value));\r\n        }, self.Class.SEARCH_DELAY);\r\n\r\n        $(\"[data-action=close]\", modalView.header).bind(\"click\", function () {\r\n            modalView.close();\r\n        });\r\n\r\n        var $clearButton = $(\".bz-modal-view__clear\", modalView.header);\r\n        var $searchInput = $(\".bz-modal-view__search\", modalView.header);\r\n\r\n        $clearButton.bind(\"click\", function () {\r\n            $searchInput.val(\"\").trigger(\"clean\");\r\n        });\r\n\r\n        // Setting the initial selected display value\r\n        $(\".bz-list\", modalView.content).on(\"click\", \"li\", function () {\r\n            var item = $.data(this).item;\r\n\r\n            if (!item || (item && item.id == self.Class.NO_RESULTS_SEARCH_ID))\r\n                return\r\n\r\n            self.selectItem(item);\r\n\r\n            modalView.close();\r\n        });\r\n\r\n        // Filtering list\r\n        $searchInput.bind(\"clean keyup\", function () {\r\n            if (this.value == \"\") {\r\n                $clearButton.removeClass(\"bz-modal-view__clear--visible\");\r\n            } else {\r\n                $clearButton.addClass(\"bz-modal-view__clear--visible\");\r\n            }\r\n            suggestFilter(this.value);\r\n        }).on(\"focus\", function () {\r\n            modalView.header.addClass(\"bz-modal-view__header--active\");\r\n        }).on(\"blur\", function () {\r\n            modalView.header.removeClass(\"bz-modal-view__header--active\");\r\n        });\r\n    },\r\n\r\n\r\n    /**\r\n     * Opens the search slide\r\n     * @private\r\n     */\r\n    _advanceSearchView: function () {\r\n        var self = this;\r\n        var properties = self.properties;\r\n        var formSearchParams = $.extend({}, self.getParams(), {\r\n            container: self.getFormContainer().container,\r\n            title: properties.displayName || \"\",\r\n            allowNew: properties.allowNew\r\n        });\r\n\r\n        // Create slide search object\r\n        var searchForm = new bizagi.rendering.tablet.slide.searchForm(\r\n            self.dataService,\r\n            self.renderFactory,\r\n            properties.searchForms, {\r\n                allowFullSearch: properties.allowFullSearch,\r\n                maxRecords: properties.maxRecords,\r\n                idRender: properties.id,\r\n                navigation: self.getParams().navigation,\r\n                idPageCache: properties.idPageCache,\r\n                orientation: properties.orientation || \"ltr\",\r\n                editable: properties.editable\r\n            }, formSearchParams);\r\n\r\n        // Render the search form\r\n        searchForm.render({\r\n            idRender: properties.id,\r\n            xpath: properties.xpath,\r\n            xpathContext: properties.xpathContext,\r\n            idPageCache: properties.idPageCache\r\n        }).done(function (item) {\r\n            // Set data\r\n            self.setValue(item);\r\n\r\n            self.readyActionExecution().done(function () {\r\n                var form = self.getFormContainer();\r\n\r\n                if (!self.properties.submitOnChange) {\r\n                    $.when(form.submitData()).done(function () {\r\n                        self.refreshControl();\r\n                    });\r\n                }\r\n            });\r\n        });\r\n    },\r\n\r\n    /**\r\n     * Simply search autocomplete\r\n     * @private\r\n     */\r\n    _simplySearchView: function () {\r\n        var self = this;\r\n        var content = self.getContentTemplate();\r\n\r\n        self.searchInput.mobileView({\r\n            customHeader: $.fasttmpl(self.renderFactory.getTemplate(\"modal-header-search\"), {}),\r\n            orientation: self.properties.orientation || \"\",\r\n            contentTemplate: content,\r\n            style: \"width: 80%; height: 70%\",\r\n            close: function () {\r\n                self.triggerGlobalHandler(\"modalViewDidDisappear\", {});\r\n            },\r\n            afterOpenAnimation: function (event) {\r\n                $(\".bz-modal-view__search\", event.view.header).focus();\r\n            },\r\n            open: function (event) {\r\n                self.triggerGlobalHandler(\"closeModalValidationMessage\", {});\r\n                self.triggerGlobalHandler(\"modalViewDidAppear\", {});\r\n            },\r\n            configureActions: function (context) {\r\n                self.configureModalViewHandlers(context);\r\n            }\r\n        });\r\n    },\r\n\r\n    autoCompleteSearchResults: function (currentValue) {\r\n        var self = this;\r\n\r\n        $.when(self.processRequest({term: currentValue}))\r\n            .done(function (response) {\r\n\r\n                self.modalViewList.find(\"li\").remove();\r\n\r\n                for (var i = 0, length = response.length; i < length; i++) {\r\n                    var searchItem = self.renderSearchItem(response[i]);\r\n\r\n                    searchItem.appendTo(self.modalViewList);\r\n                }\r\n            });\r\n    },\r\n\r\n    renderSearchItem: function (item) {\r\n        var self = this;\r\n        var template = self.renderFactory.getTemplate(\"search.item\");\r\n\r\n        var searchItem = $.tmpl(template, {\r\n            id: item.id,\r\n            label: item.label,\r\n            value: item.value\r\n        });\r\n\r\n        searchItem.data(\"item\", item);\r\n\r\n        return searchItem;\r\n    },\r\n\r\n    processRequest: function (req) {\r\n        var self = this;\r\n        var properties = self.properties;\r\n        var deferred = new $.Deferred();\r\n\r\n        // Create array for response objects\r\n        var suggestions = [];\r\n\r\n        if (self.properties.allowSuggest && (req.term.length >= self.properties.searchLength)) {\r\n\r\n            // Update term property to reflect the search\r\n            properties.term = req.term;\r\n\r\n            var getSuggestData = self.isOfflineForm ? self.getOfflineData() : self.getData();\r\n\r\n            // Cancel previous request in order to improve the performance\r\n            if (self.deferredReference && typeof (self.deferredReference.reject) === \"function\" && self.deferredReference.state() !== \"resolved\") {\r\n                self.deferredReference.reject({hideStatus: true});\r\n            }\r\n\r\n            self.deferredReference = getSuggestData.done(function (data) {\r\n                if (data && data.length > 0) {\r\n                    data = data.slice(0, properties.maxRecords);\r\n\r\n                    if (data.length > self.Class.SEARCH_MAX_RECORDS) {\r\n                        data = data.slice(0, self.Class.SEARCH_MAX_RECORDS);\r\n\r\n                        suggestions.push({\r\n                            id: self.Class.NO_RESULTS_SEARCH_ID,\r\n                            label: self.getResource(\"render-search-maximum-records-allowed\"),\r\n                            value: \"\"\r\n                        });\r\n\r\n\r\n                    } else {\r\n                        data = data.slice(0, properties.maxRecords);\r\n                    }\r\n\r\n                    // Default value\r\n                    suggestions.push({\r\n                        id: self.Class.DEFAULT_SEARCH_ID,\r\n                        label: self.getResource(\"render-combo-empty-value\"),\r\n                        value: \"\"\r\n                    });\r\n\r\n                    $.each(data, function (i, val) {\r\n                        if (properties.maxRecords === 0 || i < properties.maxRecords) {\r\n                            var parseValue = bizagi.util.highlightMatches(val, req.term);\r\n\r\n                            suggestions.push({id: val.id, label: parseValue, value: val.value});\r\n                        }\r\n                    });\r\n\r\n                } else {\r\n                    suggestions.push({\r\n                        id: self.Class.NO_RESULTS_SEARCH_ID,\r\n                        label: self.getResource(\"render-grid-no-records\"),\r\n                        value: \"\"\r\n                    });\r\n                }\r\n\r\n                deferred.resolve(suggestions);\r\n\r\n            }).fail(function () {\r\n                deferred.reject();\r\n            });\r\n        } else {\r\n            deferred.resolve(suggestions);\r\n        }\r\n\r\n        return deferred.promise();\r\n    },\r\n\r\n    /**\r\n     * Sets the value to show and calls the method to sets the control value\r\n     * @param {object} value\r\n     * @param {int} value.id\r\n     * @param {string} value.label\r\n     * @param {string=} value.additionallabel\r\n     * @example\r\n     *   value = {\r\n     *     id: 123,\r\n     *     label: \"xx\",\r\n     *     additionallabel: \"yyyy\"\r\n     *   }\r\n     */\r\n    setDisplayValue: function (value) {\r\n        var self = this;\r\n        var label = \"\";\r\n\r\n        value = self.mapValue(value);\r\n\r\n        if (value !== null && typeof value !== \"undefined\" && typeof value.id !== \"undefined\") {\r\n            if (value.additionallabel && value.label) {\r\n                label = value.label + \" - \" + value.additionallabel;\r\n            } else if (value.label) {\r\n                label = value.label;\r\n            } else {\r\n                label = \"\";\r\n            }\r\n\r\n            var inputText = self.searchInput.find(\"input\");\r\n            inputText.val(label);\r\n            inputText.attr(\"id\", value.id);\r\n\r\n            if (value.id !== \"\" && self.properties.allowClear) {\r\n                $(\".bz-input-icon\", self.getControl()).removeClass(\"bz-input-icon--empty\");\r\n            }\r\n\r\n            if (self.properties.editable) {\r\n                self.setValue(value, true);\r\n            }\r\n        }\r\n    },\r\n\r\n    /**\r\n     * on the tablet only sends the id to submit in the tablet it send the id and the value\r\n     * @returns {}\r\n     */\r\n    submitData: function () {\r\n        var self = this;\r\n        var data = {};\r\n\r\n        // Add current data\r\n        data[self.properties.xpath] = self.getValue();\r\n\r\n        // Executes submit on change\r\n        if (self.properties.submitOnChange && data[self.properties.xpath].id != undefined)\r\n            self.submitOnChange(data, true);\r\n    },\r\n\r\n    /**\r\n     * Cleans the control's data\r\n     * @returns {}\r\n     */\r\n    cleanData: function () {\r\n        var value = {id: \"\", value: \"\"};\r\n\r\n        if(bizagi.util.isEmpty(this.value)) \r\n            value ={};\r\n\r\n        this.setValue(value);\r\n        this.setDisplayValue(value);\r\n    },\r\n\r\n    getContentTemplate: function () {\r\n        var template = this.renderFactory.getTemplate(\"search.items\");\r\n        var content = $.fasttmpl(template, {});\r\n\r\n        return $.trim(content);\r\n    },\r\n\r\n    selectItem: function (item) {\r\n        var self = this;\r\n        var previousValue = self.hasValue();\r\n        var label = Array.isArray(item.value) ? item.value.join(\" - \") : item.value;\r\n\r\n        self.setDisplayValue({id: item.id, label: label});\r\n\r\n        if (self.properties.allowClear) {\r\n\r\n            if (item.id === self.Class.DEFAULT_SEARCH_ID) {\r\n                self.searchInput.find(\".gn-bz-search__clear\").addClass(\"gn-bz-search--hidden\");\r\n                self.searchInput.find(\".gn-bz-search__icon\").removeClass(\"gn-bz-search--hidden\");\r\n            } else {\r\n                if (!previousValue && item.id !== self.Class.DEFAULT_SEARCH_ID) {\r\n                    self.searchInput.find(\".gn-bz-search__clear\").removeClass(\"gn-bz-search--hidden\");\r\n                    self.searchInput.find(\".gn-bz-search__icon\").addClass(\"gn-bz-search--hidden\");\r\n                }\r\n            }\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Get offline data for request\r\n     * @param request\r\n     */\r\n    getOfflineData: function () {\r\n        var self = this;\r\n        var dataList = self.properties.data || [];\r\n        var filter = (self.properties.term || \"\").toLowerCase();\r\n\r\n        return $.when(filter.startsWith(\"%%\") ? dataList : dataList.filter(function (item) {            \r\n            var value = item && item.value ? item.value : \"\";\r\n            if(typeof(value) === \"object\"){\r\n                value = value.toString();\r\n            }\r\n            return value.toLowerCase().indexOf(filter) > -1;\r\n        }));\r\n    }\r\n\r\n});\r\n","/**\r\n *   Name: Bizagi Tablet Render Letter Extension\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will redefine the letter render class to adjust to tablet devices\r\n */\r\n\r\n// Extends from render tablet base\r\nbizagi.rendering.tablet.render.extend(\"bizagi.rendering.tablet.letter\", bizagi.rendering.letter.prototype);\r\n// Extends itself\r\nbizagi.rendering.tablet.label.extend(\"bizagi.rendering.tablet.letter\", {}, {});\r\n","/**\r\n *   Name: Bizagi Tablet Render Button Extension\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will redefine the button render class to adjust to tablet devices\r\n */\r\n\r\n// Extends from render tablet base\r\nbizagi.rendering.tablet.render.extend(\"bizagi.rendering.tablet.button\", bizagi.rendering.button.prototype);\r\n// Extends itself\r\nbizagi.rendering.tablet.button.extend(\"bizagi.rendering.tablet.button\", {}, {\r\n\r\n    /**\r\n     * Template method to implement in each device to customize the render's behaviour to add handlers\r\n     * @returns {}\r\n     */\r\n    configureHandlers: function () {\r\n        var self = this;\r\n\r\n        $(\":button\", self.getControl()).on(\"click\", function () {\r\n            self.processButton();\r\n        });\r\n    },\r\n\r\n    /**\r\n     * Process the button actions workflow\r\n     * @returns {}\r\n     */\r\n    processButton: function () {\r\n        var self = this;\r\n\r\n        if (self.properties.editable) {\r\n\r\n            // Check if action need conformation\r\n            if (self.properties.needsUserConfirmation) {\r\n                $.when(bizagi.showConfirmationBox(self.properties.userConfirmationMessage, \"Bizagi\", \"warning\"))\r\n                    .done(function () {\r\n                        // Trigger change\r\n                        self.triggerRenderChange({pressed: true});\r\n                    });\r\n            } else {\r\n                if (!self.properties.preventDefault)\r\n                    self.runButtonAction();\r\n\r\n                // Trigger change\r\n                self.triggerRenderChange({pressed: true});\r\n            }\r\n        }\r\n    },\r\n    \r\n    getElementsToStylize: function($context){\r\n        return  $(\"button\", $context);         \r\n    }\r\n});\r\n","/*\r\n *   Name: Bizagi Tablet Render fileprint Extension\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will redefine the fileprint render class to adjust to tablet devices\r\n */\r\n\r\n// Extends from render tablet base\r\nbizagi.rendering.tablet.render.extend(\"bizagi.rendering.tablet.fileprint\", bizagi.rendering.fileprint.prototype);\r\n// Extends itself\r\nbizagi.rendering.tablet.fileprint.extend(\"bizagi.rendering.tablet.fileprint\", {}, {\r\n\r\n    /**\r\n     * Template method to implement in each device to customize each render after processed \r\n     */\r\n    postRender: function () {        \r\n        this.getControl().parent().hide();\r\n    }\r\n\r\n});\r\n","/**\r\n *   Name: Bizagi Tablet Render Link Extension\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will redefine the link render class to adjust to tablet devices\r\n */\r\n\r\n// Extends from render tablet base\r\nbizagi.rendering.tablet.render.extend(\"bizagi.rendering.tablet.link\", bizagi.rendering.link.prototype);\r\n// Extends itself\r\nbizagi.rendering.tablet.link.extend(\"bizagi.rendering.tablet.link\", {}, {\r\n\r\n    /**\r\n     * Template method to implement in each device to customize each render after processed\r\n     * @returns {}\r\n     */\r\n    postRender: function () {\r\n        var $control = this.getControl();\r\n        this.link = $control.find(\".bz-link\");\r\n\r\n        this._super();\r\n\r\n        this.preventDefaultForAnchorTag();\r\n    },\r\n\r\n    /**\r\n     * Method to customize each render after processed in read-only mode\r\n     */\r\n    postRenderReadOnly: function () {\r\n        var $control = this.getControl();\r\n        this.link = $control.find(\".bz-link\");\r\n\r\n        this._super();\r\n    },\r\n\r\n    /**\r\n     * Sets the value in the rendered control\r\n     * @param {} value\r\n     * @returns {}\r\n     */\r\n    setDisplayValue: function (value) {\r\n        // Set internal value\r\n        this.setValue(value, false);\r\n\r\n        if (this.isValidValue()) {\r\n            // Get the decoded version of the URL\r\n            value = getFullyDecodedURI($.trim(value));\r\n\r\n            this.link.attr(\"href\", value);\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Template method to implement in each device to customize the render's behaviour to add handlers\r\n     * @returns {}\r\n     */\r\n    configureHandlers: function () {\r\n        this.attachEvents();\r\n    },\r\n\r\n    /**\r\n     * Template method to implement in each device to customize the render's behaviour\r\n     * to add handlers when the control is readonly\r\n     */\r\n    configureHandlersReadOnly: function () {\r\n        this.attachEvents();\r\n    },\r\n\r\n    /**\r\n     * Configure event handlers\r\n     */\r\n    attachEvents: function () {\r\n        var self = this;\r\n\r\n        if (self.isValidValue()) {\r\n            self.link.on(\"click\", function (evt) {\r\n                evt.preventDefault();\r\n                evt.stopPropagation();\r\n\r\n                var linkEncode = encodeURI(this.getAttribute(\"href\"));\r\n\r\n                self.linkSolver(linkEncode, self.properties.linktarget);\r\n            });\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Checks if the value is a valid url (http/https valid urls)\r\n     * TODO: Check if this validation is necessary\r\n     * @param {} value\r\n     * @returns {}\r\n     */\r\n    isValidValue: function () {\r\n        if (!this.hasValue()) return false;\r\n        var value = $.trim(this.getValue() || \"\");\r\n\r\n        return (value.toLowerCase().match(/^(http|https):\\/\\//) !== null) || false;\r\n    },\r\n\r\n    /**\r\n     * Executes the link\r\n     * @param {} linkEncode\r\n     * @param {} linkTarget\r\n     * @returns {}\r\n     */\r\n    linkSolver: function (linkEncode, linkTarget) {\r\n        if (linkTarget === \"newwindow\" || bizagi.util.isCordovaSupported()) {\r\n            window.open(linkEncode, \"_system\", \"location=yes\");\r\n        } else {\r\n            window.open(linkEncode, \"_system\");\r\n        }\r\n    },\r\n\r\n    processLayout: function (isLabelFormat) {\r\n        if(!isLabelFormat){\r\n             this._super(isLabelFormat, this.properties.textFormat);\r\n        } else {\r\n            if(typeof this.properties.textFormat.background !== \"undefined\"){\r\n                this._super(isLabelFormat, { background: this.properties.textFormat.background });\r\n            }\r\n        }\r\n    },\r\n\r\n    getElementsToStylize: function($context){\r\n        return $(\".bz-link\", $context); \r\n    }\r\n});\r\n","/**\r\n *   Name: Bizagi Tablet Render Form Link Extension\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will redefine the link render class to adjust to tablet devices\r\n */\r\n\r\n// Extends from render tablet base\r\nbizagi.rendering.tablet.render.extend(\"bizagi.rendering.tablet.formLink\", {\r\n    BA_ACTION_PARAMETER_PREFIX: \"p_\",\r\n    BA_CONTEXT_PARAMETER_PREFIX: \"h_\",\r\n    BA_PAGE_CACHE: \"pageCacheId\"\r\n}, bizagi.rendering.formLink.prototype);\r\n// Extends itself\r\nbizagi.rendering.tablet.formLink.extend(\"bizagi.rendering.tablet.formLink\", {}, {\r\n\r\n    /**\r\n     * Template method to implement in each device to customize the render's behaviour to add handlers\r\n     * @returns {}\r\n     */\r\n    configureHandlers: function () {\r\n        this.attachEvents();\r\n    },\r\n\r\n    /**\r\n     * Template method to implement in each device to customize the render's behaviour\r\n     * to add handlers when the control is readonly\r\n     */\r\n    configureHandlersReadOnly: function () {\r\n        this.attachEvents();\r\n    },\r\n\r\n    /**\r\n     * Open link display from inside a dialog\r\n     */\r\n    openLink: function () {\r\n        var self = this;\r\n\r\n        // Send edit request\r\n        $.when(self.submitEditRequest())\r\n            .done(function () {\r\n                bizagi.loading.start();\r\n\r\n                $.when(self.paintFormLink()).done(function () {\r\n                    bizagi.loading.stop();\r\n\r\n                }).fail(function () {\r\n                    // Executes Rollback action paintForm\r\n                    bizagi.loading.start();\r\n                    self.rollbackForm();\r\n                }).always(function () {\r\n                    bizagi.loading.stop();\r\n                });\r\n\r\n            }).always(function () {\r\n            bizagi.loading.stop();\r\n        });\r\n    },\r\n\r\n    openLinkRule: function (property) {\r\n        var self = this;\r\n        var def = new $.Deferred();\r\n\r\n        bizagi.loading.start();\r\n\r\n        self.getPropertyValue(property, {})\r\n            .done(function (dataRuleResp) {\r\n\r\n                dataRuleResp = dataRuleResp || {};\r\n\r\n                if (typeof dataRuleResp.messages !== \"undefined\" && dataRuleResp.messages !== null) {\r\n                    var message = dataRuleResp.messages[0];\r\n                    var form = self.getFormContainer();\r\n\r\n                    form.validationController.showErrorMessage(message);\r\n                    def.reject();\r\n                } else {\r\n                    if (property === \"entryrule\") {\r\n                        self.openLink();\r\n                    }\r\n                }\r\n\r\n                def.resolve();\r\n            }).fail(function () {\r\n            def.reject();\r\n        }).always(function () {\r\n            bizagi.loading.stop();\r\n        });\r\n\r\n        return def.promise();\r\n    },\r\n\r\n    paintFormLink: function () {\r\n        var self = this;\r\n        var properties = self.properties;\r\n        var form = self.getFormContainer();\r\n        var formParams = self.getFormParams();\r\n\r\n        var deferred = $.Deferred();\r\n\r\n        // Instantiate slide form object\r\n        var slideView = new bizagi.rendering.tablet.slide.view(self.dataService, self.renderFactory, {\r\n            title: self.properties.displayName || \"\",\r\n            container: form.container,\r\n            navigation: self.getParams().navigation,\r\n            showSaveButton: properties.editable,\r\n            orientation: properties.orientation || \"ltr\",\r\n            onSave: function (data) {\r\n                // When the data is saved then\r\n                return self.actionSave(data).then(function (result) {\r\n                    //Process the result\r\n                    return self.submitForm(result)\r\n                        .done(function () {\r\n                            deferred.resolve(result);\r\n                        }).fail(function () {\r\n                            deferred.reject();\r\n                        });\r\n                }).fail(function (result) {\r\n                    deferred.reject(result);\r\n                });\r\n            },\r\n            goBack: function () {\r\n                self.rollbackForm();\r\n            }\r\n        });\r\n\r\n        slideView.render({\r\n            idRender: properties.id,\r\n            xpathContext: properties.xpathContext,\r\n            idPageCache: properties.idPageCache,\r\n            recordXPath: self.getFormLinkXpath(),\r\n            requestedForm: \"linkform\",\r\n            editable: properties.editable,\r\n            formParams: formParams,\r\n            url: properties.editPage\r\n        }).fail(function () {\r\n            // Sends a rollback request to delete checkpoints\r\n            deferred.reject();\r\n        });\r\n\r\n        return deferred.promise();\r\n    },\r\n\r\n    getPropertyValue: function (propertyName, params) {\r\n        var self = this;\r\n        var properties = self.properties;\r\n        var defer = new $.Deferred();\r\n\r\n        self.dataService.multiaction().getPropertyData({\r\n            url: properties.dataUrl,\r\n            xpath: properties.xpath,\r\n            idRender: properties.id,\r\n            xpathContext: properties.xpathContext,\r\n            idPageCache: properties.idPageCache,\r\n            property: propertyName,\r\n            extra: params,\r\n            dataType: params ? params.dataType : null\r\n        }).done(function (data) {\r\n            if (data.type === \"error\") {\r\n                // Workflow engine error, we gotta show it with error\r\n                var form = self.getFormContainer();\r\n\r\n                form.validationController.showErrorMessage(data.message);\r\n                defer.reject(data);\r\n            } else {\r\n                defer.resolve(data);\r\n            }\r\n        }).fail(function (jqXHR, textStatus, errorThrown) {\r\n            // Add error messages\r\n            var form = self.getFormContainer();\r\n\r\n            form.validationController.showErrorMessage(jqXHR.message);\r\n\r\n            defer.reject(jqXHR, textStatus, errorThrown);\r\n        });\r\n\r\n        return defer.promise();\r\n    },\r\n\r\n    actionSave: function (data) {\r\n        var self = this;\r\n        var deferred = $.Deferred();\r\n\r\n        $.when(self.submitSaveRequest(data)).done(function (result) {\r\n            try {\r\n                if (result.type === \"validationMessages\") {\r\n                    // Add validation messages\r\n                    self.form.addValidationMessage(result.messages);\r\n                } else if (result.type === \"error\") {\r\n                    // Add error messages\r\n                    deferred.reject(result);\r\n                }\r\n\r\n                deferred.resolve(result);\r\n            } catch (ex) {\r\n                deferred.reject({noAction: true});\r\n            }\r\n        }).fail(function (data) {\r\n            deferred.reject(data);\r\n        });\r\n\r\n        return deferred.promise();\r\n    },\r\n\r\n    submitSaveRequest: function (data) {\r\n        var self = this;\r\n        var properties = self.properties;\r\n\r\n        // Don't send request when the link is not editable\r\n        if (properties.editable === false && !properties.value) {\r\n            return null;\r\n        }\r\n\r\n        var xpath = self.getFormLinkXpath();\r\n        var xpathContext = xpath;\r\n\r\n        if (properties.xpathContext !== undefined && properties.xpathContext !== \"\") {\r\n            xpathContext = xpath ? properties.xpathContext + \".\" + xpath : properties.xpathContext;\r\n        }\r\n\r\n        return self.dataService.saveLinkForm({\r\n            url: properties.saveUrl,\r\n            idRender: properties.id,\r\n            xpathContext: xpathContext,\r\n            submitData: data\r\n        });\r\n    },\r\n\r\n    submitForm: function (result) {\r\n        var self = this;\r\n        var deferred = $.Deferred();\r\n\r\n        var executeSubmitOnChange = true;\r\n\r\n        if (result && result.type === \"validationMessages\") {\r\n            executeSubmitOnChange = false;\r\n        }\r\n\r\n        if (self.properties.hasexitrule) {\r\n            self.closeExitRule().done(function () {\r\n                if (executeSubmitOnChange) {\r\n                    // All commits must be resolved before the submitOnChange is executed\r\n                    self.submitCommitRequest().done(function () {\r\n                        if (self.properties.hasentryrule) {\r\n                            self.submitCommitRequest().done(function () {\r\n                                $.when(self.submitOnChange()).done(function () {\r\n                                    deferred.resolve(result);\r\n                                });\r\n                            });\r\n                        } else {\r\n                            $.when(self.submitOnChange()).done(function () {\r\n                                deferred.resolve(result);\r\n                            });\r\n                        }\r\n                    });\r\n                }\r\n            }).fail(function () {\r\n                deferred.reject();\r\n            });\r\n\r\n        } else if (executeSubmitOnChange) {\r\n            if (executeSubmitOnChange) {\r\n                //  commits must be resolved before the submitOnChange is executed\r\n                self.submitCommitRequest().done(function () {\r\n                    if (self.properties.hasentryrule) {\r\n                        self.submitCommitRequest().done(function () {\r\n                            $.when(self.submitOnChange()).done(function () {\r\n                                deferred.resolve(result);\r\n                            });\r\n                        });\r\n                    } else {\r\n                        $.when(self.submitOnChange()).done(function () {\r\n                            deferred.resolve(result);\r\n                        });\r\n                    }\r\n                }).fail(function () {\r\n                    deferred.reject();\r\n                });\r\n            }\r\n        }\r\n\r\n        return deferred.promise();\r\n    },\r\n\r\n    closeExitRule: function () {\r\n        var self = this;\r\n        var properties = self.properties;\r\n        var def = new $.Deferred();\r\n\r\n        if (properties.hasexitrule) {\r\n            $.when(self.openLinkRule(\"exitrule\")).done(function (result) {\r\n                def.resolve(result);\r\n            }).fail(function () {\r\n                def.reject();\r\n            });\r\n        }\r\n\r\n        return def.promise();\r\n    },\r\n\r\n    rollbackForm: function () {\r\n        var self = this;\r\n        var form = self.form || self.getFormContainer();\r\n\r\n        $.when(self.submitRollbackRequest({idPageCache: form.idPageCache})).done(function () {\r\n            // Sends additional rollback request to delete checkpoint from entry rule\r\n            if (self.properties.hasentryrule) {\r\n                self.submitRollbackRequest({idPageCache: form.idPageCache});\r\n            }\r\n        });\r\n    },\r\n\r\n    getFormLinkXpathContext: function () {\r\n        var xpathContext = this.properties.xpathContext;\r\n        var parentXpathContext = this.getXpathContext();\r\n\r\n        if (parentXpathContext && xpathContext) {\r\n            return xpathContext.indexOf(parentXpathContext) === 0 ? xpathContext : parentXpathContext + \".\" + xpathContext;\r\n        } else {\r\n            return xpathContext;\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Configure event handlers\r\n     */\r\n    attachEvents: function () {\r\n        var self = this;\r\n        var $control = self.getControl();\r\n\r\n        // Bind click event\r\n        $(\"[data-action=open]\", $control).on(\"click\", function () {\r\n            // Open the link inside a slideForm\r\n            if (self.properties.hasentryrule) {\r\n                var form = self.getFormContainer();\r\n\r\n                $.when(form.saveForm()).done(function () {\r\n                    self.submitCheckpointRequest().done(function () {\r\n                        return self.openLinkRule(\"entryrule\");\r\n                    });\r\n                });\r\n            } else {\r\n                self.openLink();\r\n            }\r\n        });\r\n    },\r\n\r\n    processLayout: function (isLabelFormat) {\r\n        if(!isLabelFormat){\r\n             this._super(isLabelFormat, this.properties.textFormat);\r\n        } else {\r\n            if(typeof this.properties.textFormat.background !== \"undefined\"){\r\n                this._super(isLabelFormat, { background: this.properties.textFormat.background });\r\n            }\r\n        }\r\n    },\r\n\r\n    getElementsToStylize: function($context){\r\n        return $(\".bz-link\", $context); \r\n    }\r\n});","/**\r\n *   Name: Bizagi Tablet Render Hidden Extension\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will redefine the hidden render class to adjust to tablet devices\r\n */\r\n\r\n// Extends from render tablet base\r\nbizagi.rendering.tablet.render.extend(\"bizagi.rendering.tablet.hidden\", bizagi.rendering.hidden.prototype);\r\n// Extends itself\r\nbizagi.rendering.tablet.hidden.extend(\"bizagi.rendering.tablet.hidden\", {}, {});\r\n","/**\r\n *   Name: Bizagi Tablet Render list Extension\r\n *   Author: Bizagi UI Forms\r\n *   Comments:\r\n *   -   This script will redefine the list render class to adjust to tablet devices\r\n */\r\n\r\n// Extends from render tablet base\r\nbizagi.rendering.tablet.render.extend(\"bizagi.rendering.tablet.radio\", bizagi.rendering.combo.prototype);\r\n// Extends itself\r\nbizagi.rendering.tablet.radio.extend(\"bizagi.rendering.tablet.radio\", bizagi.rendering.radio.prototype);\r\n// Extends itself\r\nbizagi.rendering.tablet.radio.extend(\"bizagi.rendering.tablet.radio\", {}, {\r\n\r\n    /**\r\n     * Template method to implement in each device to customize each render after processed\r\n     */\r\n    postRender: function () {\r\n        var $control = this.getControl();\r\n        this.radio = $control.find(\"input[type=radio]\");\r\n\r\n        if (this.properties.editable && (this.value == null || this.value === undefined) && (this.properties.value != null)) {\r\n            this.value = this.properties.value;\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Method to render non editable values\r\n     * @returns {*|jQuery}\r\n     */\r\n    renderReadOnly: function () {\r\n        var template = this.renderFactory.getTemplate(\"readonly\");\r\n\r\n        return $.fasttmpl(template, {value: this.getDisplayValue()});\r\n    },\r\n\r\n    /**\r\n     * Method to customize each render after processed in read-only mode\r\n     */\r\n    postRenderReadOnly: function () {\r\n        var $control = this.getControl();\r\n        this.radio = $control.find(\"input\");\r\n    },\r\n\r\n    /**\r\n     * Sets the value in the rendered control\r\n     * @param value\r\n     */\r\n    setDisplayValue: function (value) {\r\n        var self = this;\r\n        var $control = self.getControl();\r\n\r\n        // Map data from actions\r\n        value = self.mapValue(value);\r\n\r\n        // Set internal value\r\n        self.setValue(value, false);\r\n\r\n        if (value !== undefined && value.id != null && value.id !== \"\") {\r\n\r\n            if (this.properties.editable) {\r\n\r\n                var radioItem = $control\r\n                    .find('input[type=\"radio\"][value=\"' + value.id + '\"]');\r\n\r\n                radioItem.prop('checked', 'checked');\r\n            } else {\r\n                self.radio.val((this.getDisplayValue()));\r\n                self.radio.attr(\"id\", value.id);\r\n            }\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Add action handlers\r\n     */\r\n    configureHandlers: function () {\r\n        var self = this;\r\n\r\n        this.radio.change(function () {\r\n            var $selected = $(this);\r\n            var newValue = {\r\n                id: $selected.prop('value'),\r\n                value: $.trim($selected.siblings(\"label\").text())\r\n            };\r\n\r\n            self.setValue(newValue);\r\n        });\r\n    },\r\n\r\n    /**\r\n     * Context to apply styles\r\n     * @param context\r\n     * @returns {jQuery|HTMLElement}\r\n     */\r\n    getElementsToStylize: function (context) {\r\n        return $(\"label.bz-radio__label\", context);\r\n    },\r\n\r\n    /**\r\n     * Cleans current data\r\n     */\r\n    cleanData: function () {\r\n        var value = {id: \"\", label: \"\"};\r\n        this.setValue(value, false);\r\n\r\n        this.clearDisplayValue();\r\n    },\r\n\r\n    /**\r\n     * Sets the value in the rendered control\r\n     */\r\n    clearDisplayValue: function () {\r\n        if (this.properties.editable) {\r\n            this.radio.prop('checked', false);\r\n        } else {\r\n            this.radio.val(this.getDisplayValue());\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Returns the selected value in the template\r\n     * @returns {*}\r\n     */\r\n    getSelectedValue: function () {\r\n        return this.selectedValue;\r\n    }\r\n});\r\n","/**\r\n *   Name: BizAgi Tablet Render Cascading combo Extension\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will redefine the cascading combo render class to adjust to tablet devices\r\n */\r\n\r\n// Extends from render tablet base\r\nbizagi.rendering.tablet.render.extend(\"bizagi.rendering.tablet.cascadingCombo\", bizagi.rendering.combo.prototype);\r\n// Extends itself\r\nbizagi.rendering.tablet.cascadingCombo.extend(\"bizagi.rendering.tablet.cascadingCombo\", bizagi.rendering.cascadingCombo.prototype);\r\n// Extends itself\r\nbizagi.rendering.tablet.cascadingCombo.extend(\"bizagi.rendering.tablet.cascadingCombo\", {\r\n    // Statics\r\n    BA_ACTION_PARAMETER_PREFIX: bizagi.render.services.service.BA_ACTION_PARAMETER_PREFIX,\r\n    BA_CONTEXT_PARAMETER_PREFIX: bizagi.render.services.service.BA_CONTEXT_PARAMETER_PREFIX\r\n}, {\r\n\r\n    /*\r\n       *   Template method to implement in each children to customize each control\r\n       */\r\n    renderControl: function () {\r\n        var mode = this.getMode();\r\n\r\n        // Check if this is a dependant combo\r\n        this.parentCombo = this.getParentCombo();\r\n        if (this.parentCombo != null) {\r\n\r\n            if ((/cascadingcombo/i.test(this.parentCombo.properties.type))) {\r\n                this.isDependant = true;\r\n            }\r\n        }\r\n\r\n        // Apply element plugin, set a flag to avoid dependant combo ajax requests\r\n        this.initializingCascadingCombo = true;\r\n\r\n        if (mode != \"execution\") {\r\n            this.initializingCascadingCombo = false;\r\n        }\r\n\r\n        return bizagi.rendering.tablet.combo.prototype.renderControl.apply(this, arguments);\r\n    },\r\n    /*\r\n    *   Template method to implement in each device to customize each render after processed\r\n    */\r\n    postRender: function () {\r\n        bizagi.rendering.tablet.combo.prototype.postRender.apply(this, arguments);\r\n    },\r\n\r\n    /*\r\n          *   Template method to implement in each device to customize the render's behaviour to add handlers\r\n          */\r\n    configureHandlers: function () {\r\n        // Call base\r\n        this._super();\r\n\r\n        // Call desktop.combo method\r\n        bizagi.rendering.tablet.combo.prototype.configureHandlers.apply(this, arguments);\r\n    },\r\n\r\n    /**\r\n     * Override to avoid the trigguer\r\n     */\r\n    cleanData: function () {\r\n        bizagi.rendering.tablet.combo.prototype.cleanData.apply(this, arguments);\r\n    },\r\n\r\n    /*\r\n    *   Refresh the combo, after it has been painted\r\n    */\r\n    refresh: function (params, isInitialValue) {\r\n        var self = this;\r\n        // Wait until current element is rendered\r\n        $.when(self.isRendered()).done(function () {\r\n            // Clear current control\r\n            var control = self.getControl();\r\n            var mode = self.getMode();\r\n            control.empty();\r\n\r\n            // Render combo again\r\n            $.when(self.renderControl()).then(function (html) {\r\n                // Append new element\r\n                control.html(html);\r\n                // Post-render method\r\n                self.postRender();\r\n\r\n                if (mode == \"execution\") {\r\n                    self.configureHandlers();\r\n                }\r\n\r\n                // Set current value\r\n                if (isInitialValue) {\r\n                    self.setDisplayValue(self.getValue());\r\n                } else {\r\n                    self.setDisplayValue({\r\n                        \"id\": \"\",\r\n                        \"value\": \"\"\r\n                    });\r\n                }\r\n\r\n                if (self.deferredVisible) {\r\n                    self.deferredVisible.resolve();\r\n                }\r\n\r\n                self.trigger(\"select\", [self.getValue(), isInitialValue]);\r\n            });\r\n        });\r\n    },\r\n    /*\r\n    *   Sets the value in the rendered control\r\n    */\r\n    setDisplayValue: function (value) {\r\n        bizagi.rendering.tablet.combo.prototype.setDisplayValue.apply(this, arguments);\r\n    },\r\n\r\n    processComboData: function () {\r\n        bizagi.rendering.tablet.combo.prototype.processComboData.apply(this, arguments);\r\n    },\r\n\r\n    validateValue: function () {\r\n        return bizagi.rendering.tablet.combo.prototype.validateValue.apply(this, arguments);\r\n    },\r\n\r\n    renderComboTemplate: function () {\r\n        return bizagi.rendering.tablet.combo.prototype.renderComboTemplate.apply(this, arguments);\r\n    },\r\n\r\n    configureModalViewHandlers: function () {\r\n        bizagi.rendering.tablet.combo.prototype.configureModalViewHandlers.apply(this, arguments);\r\n    },\r\n\r\n    configureCombo: function () {\r\n        bizagi.rendering.tablet.combo.prototype.configureCombo.apply(this, arguments);\r\n    },\r\n\r\n    changeCombo: function (valueItem, valueObjet) {\r\n        bizagi.rendering.tablet.combo.prototype.changeCombo.apply(this, arguments);\r\n    },\r\n\r\n    /*\r\n    *   Returns the selected value in the template\r\n    */\r\n    getSelectedValue: function () {\r\n        return bizagi.rendering.tablet.combo.prototype.getSelectedValue.call(this, arguments);\r\n    },\r\n\r\n    getTemplateName: function () {\r\n        return \"combo\";\r\n    },\r\n    /**\r\n     * Filtering list of elements\r\n     * @returns {}\r\n     */\r\n    filterList: function (search, $li) {\r\n        return bizagi.rendering.tablet.combo.prototype.filterList.call(this, search, $li);\r\n    }\r\n});\r\n","/**\r\n *   Name: Bizagi Tablet Render list Extension\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will redefine the list render class to adjust to tablet devices\r\n */\r\n\r\n// Extends from render tablet base\r\nbizagi.rendering.tablet.render.extend(\"bizagi.rendering.tablet.list\", bizagi.rendering.combo.prototype);\r\n// Extends itself\r\nbizagi.rendering.tablet.list.extend(\"bizagi.rendering.tablet.list\", bizagi.rendering.list.prototype);\r\n// Extends itself\r\nbizagi.rendering.tablet.list.extend(\"bizagi.rendering.tablet.list\", {}, {\r\n\r\n    /*\r\n      *   Template method to implement in each children to customize each control\r\n      */\r\n    renderControl: function () {\r\n        var template = this.renderFactory.getTemplate(\"list\");\r\n\r\n        return $.fasttmpl(template, {\r\n            editable: this.properties.editable,\r\n            value: this.getDisplayValue()\r\n        });\r\n\r\n    },\r\n\r\n    /**\r\n     * Method to render non editable values\r\n     * @returns {*|jQuery}\r\n     */\r\n    postRenderReadOnly: function () {\r\n        // Prevent call base\r\n    },\r\n\r\n    /**\r\n     * Add event handlers to the combo control\r\n     */\r\n    configureHandlers: function () {\r\n        var self = this;\r\n        var control = self.getControl();\r\n\r\n        if (self.getMode() !== \"execution\") {\r\n            return;\r\n        }\r\n\r\n        $(\".bz-form-list\", control).bind(\"click\", function () {\r\n\r\n            $(this).mobileView({\r\n                customHeader: $.fasttmpl(self.renderFactory.getTemplate(\"modal-header-search\"), {}),\r\n                displayName: self.properties.displayName || \"\",\r\n                orientation: self.properties.orientation || \"\",\r\n                contentTemplate: \"\",\r\n                style: \"width: 80%; height: 70%\",\r\n                close: function () {\r\n                    self.triggerGlobalHandler(\"modalViewDidDisappear\", {});\r\n                },\r\n\r\n                open: function () {\r\n                    self.triggerGlobalHandler(\"closeModalValidationMessage\", {});\r\n                    self.triggerGlobalHandler(\"modalViewDidAppear\", {});\r\n                },\r\n\r\n                configureActions: function (context) {\r\n                    $.when(self.renderCombo({})).done(function (list) {\r\n                        $(\".bz-modal-view__content\", context.content).html(list);\r\n                        self.configureModalViewHandlers(context);\r\n                    })\r\n                }\r\n            });\r\n        });\r\n\r\n    },\r\n\r\n    processComboData: function (data) {\r\n        var self = this;\r\n        data.forEach(function (value) {\r\n            self.validateValue(value);\r\n        });\r\n    },\r\n\r\n    /**\r\n     * Setting the display value, always you call a setDisplayValue yor are performinng a setValue under the hood.\r\n     * */\r\n    setDisplayValue: function (value) {\r\n        var comboValue;\r\n        var control = this.getControl();\r\n\r\n        value = this.mapValue(value);\r\n\r\n        if (value && (typeof value === \"object\" && typeof value.label !== \"undefined\")) {\r\n\r\n            if (value.label !== \"\" && !bizagi.util.isNumeric(value.label)) {\r\n                comboValue = value.label;\r\n            } else {\r\n                var selected = this.findDataValueById(value.value);\r\n                comboValue = selected ? selected.value : \"\";\r\n            }\r\n\r\n            if ($.isArray(comboValue)) {\r\n                comboValue = comboValue.join(\" - \");\r\n            }\r\n\r\n            value = ({\"id\": value.id, \"value\": comboValue});\r\n        }\r\n\r\n        $(\"input\", control).val(this.formatItem(value.value));\r\n\r\n        //Set Value\r\n        this.selectedValue = value;\r\n        this.setValue(value);\r\n    },\r\n\r\n    /**\r\n     * Set the handlers for the modal elements\r\n     * @param {kendoModalObject} context full modal object\r\n     */\r\n    configureModalViewHandlers: function (context) {\r\n        var self = this;\r\n\r\n        $(\".bz-list__item\", context.content).on(\"click\", function () {\r\n            var valueObjet = {\r\n                \"id\": $(this).data(\"value\"),\r\n                \"value\": $(this).text()\r\n            };\r\n\r\n            if (valueObjet.id == \"\") {\r\n                valueObjet.value = \"\";\r\n            }\r\n\r\n            self.setDisplayValue(valueObjet);\r\n            self.trigger(\"select\", [valueObjet, false]);\r\n            context.close();\r\n        });\r\n\r\n        var $elementsList = $(\".bz-list li\", context.content);\r\n        var $clearButton = $(\".bz-modal-view__clear\", context.header);\r\n        var $searchInput = $(\".bz-modal-view__search\", context.header);\r\n\r\n        $(\"[data-action=close]\", context.header).bind(\"click\", function () {\r\n            context.close();\r\n        });\r\n\r\n        $clearButton.bind(\"click\", function () {\r\n            $searchInput.val(\"\").trigger(\"change\");\r\n        });\r\n        // Filtering list\r\n        $searchInput.bind(\"change keyup\", function () {\r\n            if (this.value == \"\") {\r\n                $clearButton.removeClass(\"bz-modal-view__clear--visible\");\r\n            } else {\r\n                $clearButton.addClass(\"bz-modal-view__clear--visible\");\r\n            }\r\n            self.filterList(this.value, $elementsList);\r\n        }).focus();\r\n    },\r\n\r\n    /**\r\n     * Filtering list of elements\r\n     * @returns {}\r\n     */\r\n    filterList: function (search, $li) {\r\n\r\n        $li.filter(function () {\r\n            var stringContainer = $(this).text().toUpperCase();\r\n            var stringToSearch = search.toUpperCase();\r\n\r\n            if (stringContainer.indexOf(stringToSearch) >= 0) {\r\n                return $(this);\r\n            } else {\r\n                $(this).hide();\r\n            }\r\n        }).show();\r\n    },\r\n\r\n    /**\r\n     * Print the list of elements to show in the modal\r\n     * @param {object} data list of elements to print\r\n     */\r\n    renderComboTemplate: function (data) {\r\n        var template = this.renderFactory.getTemplate(\"list-items\");\r\n        var value = this.getValue();\r\n        value = (value !== null && typeof value !== \"undefined\") ? value : {\"id\": \"\", \"value\": \"\"};\r\n\r\n        return $.fasttmpl(template, {\r\n            \"items\": data,\r\n            \"selectedId\": value.id,\r\n            \"hasItems\": data.length > 0\r\n        }, {\r\n            \"validateItem\": this.validateValue\r\n        });\r\n    },\r\n\r\n    getElementsToStylize: function ($context) {\r\n        return this.properties.editable ? $(\"input\", $context) : $(\".readonly-control\", $context);\r\n    }\r\n});\r\n","/*\r\n *   Name: Bizagi Tablet Render Yes-No Extension\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will redefine the multiSelect render class to adjust to tablet devices\r\n */\r\n\r\n// Extends from render tablet base\r\nbizagi.rendering.tablet.render.extend(\"bizagi.rendering.tablet.multiSelect\", bizagi.rendering.multiSelect.prototype);\r\n// Extends itself\r\nbizagi.rendering.tablet.multiSelect.extend(\"bizagi.rendering.tablet.multiSelect\", {\r\n    MORE_OPTION_WIDTH: 40,\r\n    SEARCH_MIN_LENGTH: 1\r\n}, {\r\n\r\n    renderReadOnly: function () {\r\n        var self = this;\r\n        var template = self.renderFactory.getTemplate(\"searchList.readonly\");\r\n\r\n        // Render template\r\n        var content = $.fasttmpl(template, {\r\n            items: self.properties.value || {},\r\n            editable: self.properties.editable || true\r\n        }, {\r\n            formatItem: self.formatItem\r\n        });\r\n\r\n        return content;\r\n    },\r\n\r\n    /**\r\n     * Template method to implement in each device to customize each render after processed\r\n     */\r\n    postRender: function () {\r\n        var self = this;\r\n\r\n        if (this.isExecutionMode()) {\r\n            this.getData().done(function (data) {\r\n                self.properties.data = data;\r\n            });\r\n        }\r\n\r\n        // Call base\r\n        this._super();\r\n    },\r\n\r\n    configureHandlers: function () {\r\n        var self = this;\r\n        var $control = self.getControl();\r\n        $(\"[data-action=modal]\", $control).bind(\"click\", function () {\r\n            self.openModalView();\r\n        });\r\n    },\r\n\r\n    /**\r\n     * Sets the value and display, avoid to include setValue in this method.\r\n     */\r\n    setDisplayValue: function(value){\r\n        var self = this;\r\n        this._super(value);\r\n\r\n        if (value !== undefined) {\r\n            $(\".bz-input-icon__input\", this.getControl()).html(value.map(function(el){\r\n                return self.formatItem(el.value);\r\n            }).join(\", \"));\r\n        }\r\n    },\r\n     /**\r\n     * Opens the modal view\r\n     */\r\n    openModalView: function () {\r\n        var self = this;\r\n        self.getData().done(function (result) {\r\n            var template_content = self.renderFactory.getTemplate('multiselect-list');\r\n            var value = self.getValue();\r\n            if (!$.isArray(value)){\r\n                value = typeof (value) === \"string\" ? JSON.parse(value).value : value.value;\r\n            }\r\n\r\n            var data = {\r\n                values: result,\r\n                isChecked: function (id) {\r\n                    return self.isChecked(value, id);\r\n                }\r\n            };\r\n\r\n            var content = $.fasttmpl(template_content, data, {\r\n                formatItem: self.formatItem\r\n            });\r\n            var template_footer = self.renderFactory.getTemplate(\"modal-footer-done\");\r\n            var footer = $.fasttmpl(template_footer, {});\r\n\r\n            self.getControl().mobileView({\r\n                customHeader: $.fasttmpl(self.renderFactory.getTemplate(\"modal-header-search\"), {}),\r\n                // displayName: self.properties.displayName || \"\",\r\n                orientation: self.properties.orientation || \"\",\r\n                contentTemplate: content,\r\n                footerTemplate: footer,  \r\n                style: \"width: 80%; height: 70%\",\r\n                close: function () {\r\n                    self.triggerGlobalHandler(\"modalViewDidDisappear\", {});\r\n                },\r\n                afterOpenAnimation: function(event){\r\n                    $(\".bz-modal-view__search\", event.view.header).focus();\r\n                },\r\n                open: function () {\r\n                    self.triggerGlobalHandler(\"closeModalValidationMessage\", {});\r\n                    self.triggerGlobalHandler(\"modalViewDidAppear\", {});\r\n                },\r\n                configureActions: function (modalView) {\r\n                    self.configureModalViewHandlers(modalView);\r\n                }\r\n            });\r\n\r\n            \r\n        });\r\n    },\r\n\r\n    /**\r\n     * Configure the modalView Handlers for the new combo control.\r\n     * */\r\n    configureModalViewHandlers: function (modalView) {\r\n        var self = this;\r\n        \r\n        var $listContainer = $(\".bz-checkbox-list li\", modalView.content);\r\n        //clear button\r\n        var $clearButton = $(\".bz-modal-view__clear\", modalView.header);\r\n        // Suggest input\r\n        var $suggestInput = $(\".bz-modal-view__search\", modalView.header);\r\n\r\n        $suggestInput.on(\"change keyup\", function(){\r\n            if (this.value == \"\"){\r\n                $clearButton.removeClass(\"bz-modal-view__clear--visible\");\r\n            } else {\r\n                $clearButton.addClass(\"bz-modal-view__clear--visible\");\r\n            }\r\n            self.filterList(this.value, $listContainer);\r\n        }).on(\"focus\", function(){\r\n            modalView.header.addClass(\"bz-modal-view__header--active\");\r\n        }).on(\"blur\", function(){\r\n            modalView.header.removeClass(\"bz-modal-view__header--active\");\r\n        });\r\n\r\n        //Clear the search\r\n        $clearButton.on(\"click\", function () {\r\n            $suggestInput.val(\"\").trigger(\"change\");\r\n        });\r\n\r\n        $(\"[data-action=close]\", modalView.header).on(\"click\", function () {\r\n            modalView.close();\r\n        });\r\n\r\n        $(modalView.footer).on(\"click\", \"[data-action=save]\", function (evt) {\r\n            // Create a temporal array\r\n            var newList = [];\r\n\r\n            $.each.call(this, $listContainer, function (index, item) {\r\n                var check = item.querySelector(\"input\");\r\n\r\n                if (check.checked){\r\n                    var id = check.getAttribute(\"data-id\");\r\n                    var element = this.findItemById(id);\r\n                    var value = element.value;\r\n                    newList.push({id: id, value: value});\r\n                }\r\n            }.bind(self));\r\n\r\n            self.setDisplayValue(newList);\r\n\r\n            modalView.close();\r\n        });\r\n    }\r\n\r\n});\r\n","/*\r\n*   Name: Bizagi Tablet Render Association\r\n*   Author: UI Forms Team\r\n*   Comments: Defines the association control\r\n*/\r\n\r\n// Extends from render tablet base\r\nbizagi.rendering.tablet.render.extend(\"bizagi.rendering.tablet.association\", bizagi.rendering.association.prototype);\r\n// Extends itself\r\nbizagi.rendering.tablet.association.extend(\"bizagi.rendering.tablet.association\", {}, {\r\n /**\r\n     * Template method to implement in each children to customize each control\r\n     * \r\n     * @returns {} \r\n     */\r\n    renderControl: function () {\r\n        var self = this;\r\n        var template = self.renderFactory.getTemplate(\"association\");\r\n        var def = new $.Deferred();\r\n\r\n        self.properties.property = \"flipped\";\r\n        self.properties.idRender = self.properties.id;\r\n\r\n        // Define flipped\r\n        $.when(self.getFlipAssociation()).done(function (flip) {\r\n            // Make json base, create self.properties.formatJson\r\n            self.makeJsonBase();\r\n\r\n            self.properties.flipped = bizagi.util.parseBoolean(flip) || false;\r\n\r\n            var columnData = self.getColumnData();\r\n\r\n            var html = $.fasttmpl(template, $.extend(self.properties, { columnData: columnData }), {\r\n                getColumnData: self.getColumnData,\r\n                getRightAssociation: self.getRightAssociation\r\n            });\r\n\r\n            /* by default need set self.properties.formatJson */\r\n            self.setValue(JSON.encode(self.properties.formatJson));\r\n\r\n            def.resolve(html);\r\n        });\r\n\r\n        return def.promise();\r\n    },\r\n\r\n\r\n\r\n    /**\r\n     * Get Left Data, verify if flipper flags sets true\r\n     *\r\n     * @param column {'0'||'1'}\r\n     */\r\n    getColumnData: function () {\r\n        var self = this;\r\n        var properties = self.properties;\r\n        var data = [];\r\n\r\n        self.data = properties;\r\n\r\n        var dataAssociation = properties.flipped ? properties.rightData : properties.leftData;\r\n\r\n        $.each(dataAssociation, function (key, item) {\r\n            data.push({\r\n                id: item.id,\r\n                value: item.value,\r\n                association: self.getRightAssociation(item.id)\r\n            });\r\n        });\r\n\r\n        return data;\r\n    },\r\n\r\n    postRender: function () {\r\n        var self = this;\r\n        var isExecution = self.getMode() === \"execution\";\r\n        var $control = self.getControl();\r\n\r\n        // Cache control\r\n        self.association = $(\".bz-association\", $control);\r\n       \r\n        // Add Events at Association Control\r\n        if (isExecution) {self.addEventControl(); }\r\n               \r\n        self.showDefaultGroupList();\r\n    },\r\n\r\n    showDefaultGroupList: function(){\r\n        var self = this;\r\n        var $control = self.getControl();\r\n        var $groups = $('.bz-association-group', $control);\r\n\r\n        if($groups.length > 0){\r\n            $(\"[data-action='collapse']\", $groups[0]).toggleClass(\"bz-icn--expanded\")\r\n\r\n            $(\".bz-association-group__list\", $groups[0])\r\n                .slideDown(300, function(){                                               \r\n                    $(this).toggleClass(\"bz-association-group__list--hidden\")\r\n                });           \r\n        }\r\n    },\r\n\r\n    /**\r\n     * Add event to control\r\n     * @returns {} \r\n     */\r\n    addEventControl: function () {\r\n        var self = this;\r\n        var template = self.renderFactory.getTemplate(\"association\");\r\n        var control = self.getControl();\r\n\r\n        // Bind check toggle\r\n        self.association\r\n            .on(\"change\", \"input:checkbox\", function () {\r\n                var $input = $(this);\r\n                var parentId = $input.data(\"parent-id\");\r\n                var id = $input.data(\"id\");\r\n\r\n                if ($input.prop(\"checked\")) { self.addElement(parentId, id);} \r\n                else { self.removeElement(parentId, id);}\r\n            });\r\n\r\n        // Bind flip actions\r\n        self.association\r\n            .find(\"[data-action='flip']\")\r\n            .click(function () {\r\n                $(control).empty();\r\n\r\n                // Define flipped\r\n                self.properties.flipped = !self.properties.flipped;\r\n\r\n                // Send flip data to server\r\n                self.properties.flipstate = self.properties.flipped;\r\n\r\n                self.dataService.getFlipAssociation(self.properties);\r\n\r\n                var columnData = self.getColumnData();\r\n\r\n                // Render template\r\n                $($.fasttmpl(template, $.extend(self.properties, { columnData: columnData }), {\r\n                    getColumnData: self.getColumnData,\r\n                    getRightAssociation: self.getRightAssociation\r\n                })).appendTo(control);\r\n\r\n                self.postRender();\r\n            });\r\n\r\n            self.association.on(\"click\",  \"[data-action='collapse']\", function(){\r\n                var $element = $(this); \r\n                var $groupList = \r\n                    $element\r\n                        .parents('.bz-association-group')\r\n                        .find(\".bz-association-group__list\");\r\n                                \r\n                self.closeAccordionSection();\r\n                if ($groupList.hasClass(\"bz-association-group__list--hidden\")) {\r\n    \r\n                    $element.toggleClass(\"bz-icn--expanded\");\r\n    \r\n                    $groupList.slideDown(300, function(){                    \r\n                        $(this).toggleClass(\"bz-association-group__list--hidden\");\r\n                    });        \r\n                }                                               \r\n            });\r\n    },\r\n\r\n    closeAccordionSection: function(active){\r\n        var self = this;\r\n        var $control = self.getControl();\r\n\r\n        $(\"[data-action='collapse']\", $control).removeClass('bz-icn--expanded'); \r\n\r\n        $(\".bz-association-group__list\", $control)\r\n            .slideUp(300, function(){\r\n                $(this).addClass(\"bz-association-group__list--hidden\");    \r\n            });\r\n    },\r\n\r\n    renderReadOnly: function () {\r\n        var self = this;\r\n\r\n        return self.renderControl();\r\n    },\r\n\r\n    /**\r\n     * Render for readonly\r\n     * @returns {} \r\n     */\r\n    postRenderReadOnly: function () {\r\n        this.postRender();       \r\n    },\r\n    \r\n    /* SET-DISPLAY-VALUE\r\n     =====================================================*/\r\n    setDisplayValue: function (value) {        \r\n        // Set internal value\r\n        this.setValue(value, false);\r\n    },\r\n\r\n    getLabel: function () {\r\n        if (!this.label) {\r\n            var label = $(\"> .bz-form-label\", this.element || this.observableElement);\r\n\r\n            if (label.length > 0)\r\n                this.label = label;\r\n\r\n            return label;\r\n        }\r\n\r\n        return this.label;\r\n    }\r\n});","/**\r\n *   Name: Bizagi Tablet Render ECM Extension\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will redefine the ecm render class to adjust to tablet devices\r\n */\r\n\r\n// Extends from render tablet base\r\nbizagi.rendering.tablet.render.extend(\"bizagi.rendering.tablet.ecm\", {\r\n    // Statics\r\n    BA_ACTION_PARAMETER_PREFIX: bizagi.render.services.service.BA_ACTION_PARAMETER_PREFIX,\r\n    BA_CONTEXT_PARAMETER_PREFIX: bizagi.render.services.service.BA_CONTEXT_PARAMETER_PREFIX,\r\n    BA_PAGE_CACHE: bizagi.render.services.service.BA_PAGE_CACHE\r\n}, bizagi.rendering.ecm.prototype);\r\n\r\n// Extends itself\r\nbizagi.rendering.tablet.ecm.extend(\"bizagi.rendering.tablet.ecm\", {\r\n    QUALITY_PICTURE: 50,\r\n    LIMIT: 1, // The maximum number of media in the device user can record in a single capture operation.\r\n    EXTENSIONSIMG: [\"image/jpeg\", \"jpeg\", \"image\", \"png\", \"jpg\", \"bmp\"],\r\n    EXTENSIONSFILE: [\"doc\", \"docx\", \"xls\", \"xlsx\", \"ppt\", \"pptx\", \"pdf\", \"zip\", \"rar\", \"txt\"],\r\n    EXTENSIONSVIDEO: [\"video/quicktime\", \"quicktime\", \"qt\", \"mov\"],\r\n    EXTENSIONSAUDIO: [\"audio/wav\", \"audio\", \"wav\", \"mp3\"],\r\n    ERROR_ECM_NO_AVAILABLE: 3,\r\n    ACTION_DETAILS: \"details\",\r\n    ACTION_EDIT: \"edit\"\r\n}, {\r\n\r\n    /**\r\n     * Whether or not is a native device\r\n     * @var isNative boolean\r\n     */\r\n    isNative: false,\r\n\r\n    /**\r\n     * Update or init the element data\r\n     * @param {} data\r\n     */\r\n    initializeData: function (data) {\r\n        // Call base\r\n        this._super(data);\r\n\r\n        this.isNative = bizagi.util.isCordovaSupported();\r\n        this.fileData = [];\r\n    },\r\n\r\n    /**\r\n     * Method to customize each control\r\n     * @returns {}\r\n     */\r\n    renderControl: function () {\r\n        var self = this;\r\n        var template = this.renderFactory.getTemplate(\"ecm\");\r\n\r\n        // Set files property\r\n        self.files = self.properties.value || [];\r\n        self.filesCount = self.files.length;\r\n\r\n        return this.renderItem(template, {});\r\n    },\r\n\r\n    /**\r\n     * Method to render non editable values\r\n     * @returns {*|jQuery}\r\n     */\r\n    renderReadOnly: function () {\r\n        var template = this.renderFactory.getTemplate(\"ecm-readonly\");\r\n         var data = {\r\n             noFiles: this.filesCount === 0\r\n         };\r\n\r\n        return this.renderItem(template, data);\r\n    },\r\n\r\n    /**\r\n     * Method to render items\r\n     * @returns {*|jQuery}\r\n     */\r\n    renderItem: function (template, data) {\r\n        var self = this;\r\n        var items = \"\";\r\n        var html = $.fasttmpl(template, data);\r\n\r\n        // Render current children\r\n        for (var i = 0; i < self.filesCount; i++) {\r\n            var item = self.renderUploadItem(self.files[i]);\r\n\r\n            items += item;\r\n        }\r\n\r\n        html = self.replaceFilesHtml(html, items);\r\n\r\n        return html;\r\n    },\r\n\r\n    /**\r\n     * Renders a single upload item\r\n     * @param file\r\n     * @returns {*}\r\n     */\r\n    renderUploadItem: function (file) {\r\n        var self = this;\r\n        var template = self.renderFactory.getTemplate(\"ecm-item\");\r\n        var form = self.getFormContainer();\r\n\r\n        var data = {\r\n            id: self.properties.id,\r\n            idFileUpload: file[0],\r\n            fileName: file[1],\r\n            editable: self.properties.editable,\r\n            xPath: self.properties.xpath,\r\n            xpathContext: self.getXpathContext() || form.properties.xpathContext || \"\",\r\n            idPageCache: self.properties.idPageCache,\r\n            idAttrib: self.properties.idAttrib,\r\n            sessionId: form.properties.sessionId\r\n        };\r\n\r\n        // Builds the upload item url\r\n        var originalData = $.extend({}, data);\r\n        data.url = self.buildItemUrl(originalData);\r\n\r\n        // Define File Properties\r\n        file.getFileProperties = $.when(self.renderFileLayout(data));\r\n\r\n        var html = $.fasttmpl(template, data);\r\n\r\n        return html;\r\n    },\r\n\r\n    /**\r\n     * Method to get properties and metadata of ECM item\r\n     * @param data\r\n     * @returns {*}\r\n     */\r\n    renderFileLayout: function (data) {\r\n        var self = this;\r\n        var form = self.getFormContainer();\r\n        var deferred = new $.Deferred();\r\n\r\n        var originalData = $.extend({}, data);\r\n\r\n        $.when(\r\n            self.dataService.metadataECMMultiaction().getECMMetadata(data),\r\n            self.dataService.metadataECMMultiaction().getFileProperties(originalData)\r\n        ).done(function (metaData, fileProperties) {\r\n\r\n            if (Array.isArray(fileProperties)) {\r\n                fileProperties = fileProperties[0];\r\n            }\r\n\r\n            if (Array.isArray(metaData)) {\r\n                metaData = metaData[0];\r\n            }\r\n\r\n            fileProperties.idAttrib = self.properties.idAttrib;\r\n            fileProperties.showMetadata = self.properties.showMetadata;\r\n            fileProperties.xpathContext = self.getXpathContext() || form.properties.xpathContext || \"\";\r\n            fileProperties.xpath = self.properties.xpath;\r\n            fileProperties.fileName = data.fileName;\r\n            fileProperties.idPageCache = self.properties.idPageCache;\r\n            fileProperties.fileData = originalData;\r\n\r\n            var result = $.extend({}, fileProperties, metaData);\r\n\r\n            deferred.resolve(result);\r\n\r\n        });\r\n\r\n        return deferred.promise();\r\n    },\r\n\r\n    /**\r\n     * Replaces a {{files}} tag in the container for the specified \"replace\" element\r\n     * @param html\r\n     * @param replace\r\n     * @returns {*}\r\n     */\r\n    replaceFilesHtml: function (html, replace) {\r\n        return html.replace(\"{{files}}\", replace);\r\n    },\r\n\r\n    /**\r\n     * Template method to implement in each device to customize each render after processed\r\n     */\r\n    postRender: function () {\r\n        var $control = this.getControl();\r\n\r\n        this.$contentFile = $(\".bz-file-upload__container\", $control);\r\n        this.$inputFile = $(\".bz-file-upload__input\", $control);\r\n        this.$nativeFile = $(\".bz-file-upload__native\", $control);       \r\n    },\r\n\r\n    configureHandlers: function () {\r\n        this.checkFileExtensions();\r\n        this.attachEvents();\r\n    },\r\n\r\n    /**\r\n     * Method to customize the render's behaviour to add handlers when the control is readonly\r\n     */\r\n    configureHandlersReadOnly: function () {\r\n        var self = this;\r\n        var $control = self.getControl();\r\n        // Handler to download the file\r\n        $(\"ul.bz-readonly-lists\", $control).on(\"click\", \".bz-file .bz-file-name\", function () {\r\n            var item = $(this).parent(\".bz-file\");\r\n            var file = item.data();\r\n            bizagi.loading.start();\r\n            $.when(bizagi.util.media.downloadFile(file.url, file.title)).fail(function (error) {\r\n                self.executeFormFailHandler(error);\r\n            }).always(function () {\r\n                bizagi.loading.stop();\r\n            });\r\n        });\r\n    },\r\n\r\n    /**\r\n     * Send image using HTTP\r\n     */\r\n    saveImage: function () {\r\n        var self = this;\r\n        var dataItem = \"\";\r\n\r\n        if (self.editedImageURL) {\r\n            dataItem = self.editedImageURL;\r\n        } else if (self.fileProperties) {\r\n            dataItem = self.fileProperties.url;\r\n        }\r\n\r\n        // Fix android 4.4 getting images from recent folder\r\n        var dataFile = bizagi.util.media.getImagePath(dataItem);\r\n        var data = {\r\n            dataFile: dataFile,\r\n            fileName: self.fileProperties.name,\r\n            mimeType: \"image/jpeg\"\r\n        };\r\n\r\n        // Cleans variables related previous uploads\r\n        self.editedImageURL = null;\r\n        self.fileProperties = null;\r\n\r\n        return this.uploadFile(data);\r\n    },\r\n\r\n    /**\r\n     * Method to save a video file\r\n     * @param {} dataVideo\r\n     * @returns {}\r\n     */\r\n    saveVideo: function (dataVideo) {\r\n        var data = {\r\n            dataFile: dataVideo[0].fullPath,\r\n            fileName: dataVideo[0].name,\r\n            mimeType: \"video/quicktime\"\r\n        };\r\n\r\n        return this.uploadFile(data);\r\n    },\r\n\r\n    /**\r\n     * Method to save a file\r\n     * @param data\r\n     * @returns {*|void}\r\n     */\r\n    uploadFile: function (data) {\r\n        var self = this;\r\n        var params = {};\r\n        var addParams = self.buildAddParams();\r\n\r\n        addParams.queueID = \"q_\" + bizagi.util.encodeXpath(self.getUploadXpath());\r\n        addParams[\"xPath\"] = addParams[\"xPath\"];\r\n        addParams.Filename = data.fileName;\r\n\r\n        params.data = addParams;\r\n        params.options = new FileUploadOptions();\r\n        params.options.fileKey = \"file\";\r\n        params.options.fileName = data.fileName;\r\n        params.options.uploadKey = {key: \"Filedata\"};\r\n        params.options.addUrl = self.properties.addUrl;\r\n        params.dataFile = data.dataFile;\r\n\r\n        if (data.mimeType)\r\n            params.options.mimeType = data.mimeType;\r\n\r\n        return $.when(bizagi.util.media.uploadFile(params)).then(function (result) {\r\n            self.onUploadFileCompleted(JSON.parse(decodeURIComponent(result.response)));\r\n        }).fail(function (error) {\r\n            self.executeFormFailHandler(error);\r\n        });\r\n    },\r\n\r\n    /**\r\n     * Method to configure the actions with control\r\n     * @return {}\r\n     */\r\n    attachEvents: function () {\r\n        var self = this;\r\n        var $control = self.getControl();\r\n\r\n        // Handlers to management of menu actions\r\n        $.each(self.files, function (i, file) {\r\n            self.attackMenuEvents(file);\r\n        });\r\n\r\n        // Attach all events\r\n        this.$contentFile.off(\"click\").on(\"click\", function (evt) {\r\n            self.chooseFile();\r\n        });\r\n\r\n        // Handler to download the file\r\n        $(\"ul.bz-files\", $control).on(\"click\", \".bz-file .bz-file-name\", function () {\r\n            var item = $(this).parent(\".bz-file\");\r\n            var file = item.data();\r\n\r\n            bizagi.loading.start();\r\n\r\n            $.when(bizagi.util.media.downloadFile(file.url, file.title)).fail(function (error) {\r\n                self.executeFormFailHandler(error);\r\n            }).always(function () {\r\n                bizagi.loading.stop();\r\n            });\r\n        });\r\n\r\n\r\n        if (self.isNative) {\r\n            // Upload files\r\n            this.$nativeFile.off(\"click\").actionSheet({\r\n                actions: self.getUploadChoices(),\r\n                actionClicked: function (action) {\r\n                    self.handlerUploadFile(action.guid);\r\n                },\r\n                appear: function (action) {\r\n                    self.triggerGlobalHandler(\"closeModalValidationMessage\", {});\r\n                    self.triggerGlobalHandler(\"modalViewDidAppear\", {});\r\n                },\r\n                cancelClicked: function (action) {\r\n                    self.triggerGlobalHandler(\"modalViewDidDisappear\", {});\r\n                }\r\n            });\r\n\r\n            // Resolution upload\r\n            $(\".bz-file-upload__resolution\", $control).off(\"click\").actionSheet({\r\n                actions: bizagi.util.media.getImageResolutionSizes(),\r\n                withoutCancel: true,\r\n                actionClicked: function (action) {\r\n                    bizagi.loading.start();\r\n\r\n                    $.when(self.handlerResolutionUpload(action.guid)).always(function () {\r\n                        bizagi.loading.stop();\r\n                    });\r\n                },\r\n                appear: function (action) {\r\n                    self.triggerGlobalHandler(\"closeModalValidationMessage\", {});\r\n                    self.triggerGlobalHandler(\"modalViewDidAppear\", {});\r\n                },\r\n                cancelClicked: function (action) {\r\n                    self.triggerGlobalHandler(\"modalViewDidDisappear\", {});\r\n                }\r\n            });\r\n        } else {\r\n\r\n            // Attach event to web upload-control\r\n            this.$inputFile.off(\"change\").on(\"change\", function () {\r\n                self.addFile();\r\n                this.value = \"\";\r\n            });\r\n\r\n            // Just in case\r\n            this.$inputFile.off(\"click\").on(\"click\", function (evt) {\r\n                evt.stopPropagation();\r\n            });\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Update menu options\r\n     * @param $fileItem\r\n     * @param fileProperties\r\n     */\r\n    addMenuEvents: function ($fileItem, fileProperties) {\r\n        var self = this;\r\n        var viewMore = $fileItem.find(\".bz-file-menu\");\r\n        var items = [];\r\n\r\n        if (fileProperties.showMetadata) {\r\n            items.push({\r\n                name: self.getResource(\"render-collection-navigator-details-form\"),\r\n                fn: function () {\r\n                    self.processActionByType(self.Class.ACTION_DETAILS, fileProperties, $fileItem);\r\n                }\r\n            });\r\n        }\r\n\r\n        if (fileProperties.showMetadata && fileProperties.allowUpdateMetadata)\r\n            items.push({\r\n                name: self.getResource(\"render-collection-navigator-edit-form\"),\r\n                fn: function () {\r\n                    self.processActionByType(self.Class.ACTION_EDIT, fileProperties, $fileItem);\r\n                }\r\n            });\r\n\r\n        if (fileProperties.allowCheckOut) {\r\n            items.push({\r\n                name: self.getResource(\"render-ecm-bt-lock\"),\r\n                fn: function () {\r\n                    self.lockECMFile($fileItem, fileProperties);\r\n                }\r\n            });\r\n        }\r\n\r\n        if (fileProperties.allowCancelCheckOut) {\r\n            items.push({\r\n                name: self.getResource(\"render-ecm-bt-unlock\"),\r\n                fn: function () {\r\n                    self.unlockECMFile($fileItem, fileProperties);\r\n                }\r\n            });\r\n        }\r\n\r\n        /*if (fileProperties.allowUpdateContent) {\r\n            items.push({\r\n                name: self.getResource(\"render-ecm-bt-upgrade\"),\r\n                fn: function () {\r\n                    self.processActionByType(\"upgrade\", fileProperties);\r\n                }\r\n            });\r\n        }*/\r\n\r\n        if (fileProperties.allowDelete) {\r\n            items.push({\r\n                name: self.getResource(\"render-ecm-bt-delete\"),\r\n                fn: function () {\r\n                    self.deleteECMFile($fileItem, fileProperties.idFileUpload);\r\n                }\r\n            });\r\n        }\r\n\r\n        // TODO: Check items has data\r\n        viewMore.overflowMenu({items: items});\r\n    },\r\n\r\n    /**\r\n     * Removes a file from the ECM control\r\n     * @param $fileItem\r\n     * @param fileId\r\n     */\r\n    deleteECMFile: function ($fileItem, fileId) {\r\n        var self = this;\r\n\r\n        bizagi.showConfirmationBox(this.getResource(\"render-ecm-confirm-message\"))\r\n            .done(function () {\r\n                $.when(self.deleteUploadItem($fileItem, fileId))\r\n                    .done(function () {\r\n                        // Detach item\r\n                        $fileItem.hide();\r\n                        $fileItem.remove();\r\n\r\n                        // Update value\r\n                        self.setValue(self.files, false);\r\n\r\n                        // Check maxFiles\r\n                        self.checkMaxFiles();\r\n\r\n                        // Trigger change\r\n                        self.triggerRenderChange();\r\n                    });\r\n            });\r\n    },\r\n\r\n    /**\r\n     * Check maximum number of files\r\n     */\r\n    checkMaxFiles: function () {\r\n        if (this.isMaxFilesReached()) {\r\n            $(this.$contentFile).addClass(\"bz-file-upload__container--hidden\");\r\n        } else {\r\n            $(this.$contentFile).removeClass(\"bz-file-upload__container--hidden\");\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Check if the maximum number of files than can be uploaded has been reached\r\n     * @returns {}\r\n     */\r\n    isMaxFilesReached: function () {\r\n        var maxFiles = this.properties.maxfiles;\r\n        var actualFiles = this.properties.value ? this.properties.value.length : 0;\r\n\r\n        return maxFiles !== 0 && (this.filesCount >= maxFiles && actualFiles >= maxFiles);\r\n    },\r\n\r\n    /**\r\n     * Call the form failhandler with an specific error\r\n     * @param {} error\r\n     * @returns {}\r\n     */\r\n    executeFormFailHandler: function (error) {\r\n        var errorResponse = \"\";\r\n\r\n        if (error && error.code === this.Class.ERROR_ECM_NO_AVAILABLE) {\r\n            errorResponse = this.getResource(\"render-ecm-service-not-available\");\r\n        } else if (error && error.responseText) {\r\n            errorResponse = error.responseText;\r\n        } else {\r\n            errorResponse = this.getResource(\"render-ecm-service-general-error\");\r\n        }\r\n\r\n        this.getFormContainer().failHandler(errorResponse);\r\n    },\r\n\r\n    lockECMFile: function ($fileItem, fileProperties) {\r\n        var self = this;\r\n\r\n        $.when(self.lockUploadItem(fileProperties.idFileUpload)).done(\r\n            function (result) {\r\n                var file = [result.idFileUpload, fileProperties.fileName];\r\n                var newItem = self.renderUploadItem(file);\r\n\r\n                $fileItem.replaceWith(newItem);\r\n                self.attackMenuEvents(file);\r\n            });\r\n    },\r\n\r\n    unlockECMFile: function ($fileItem, fileProperties) {\r\n        var self = this;\r\n\r\n        $.when(self.unlockUploadItem(fileProperties.idFileUpload))\r\n            .done(function (result) {\r\n                var file = [result.idFileUpload, fileProperties.fileName];\r\n                var newItem = self.renderUploadItem(file);\r\n\r\n                $fileItem.replaceWith(newItem);\r\n                self.attackMenuEvents(file);\r\n            });\r\n    },\r\n\r\n    /**\r\n     * Method to add new file from native or hybrid environment\r\n     */\r\n    chooseFile: function () {\r\n        if (this.isNative) {\r\n            this.$nativeFile.click();\r\n        } else if (bizagi.util.media.fileAPISupported()) {\r\n            this.$inputFile.click();\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Check allow extensions and define possible choices\r\n     * @returns {}\r\n     */\r\n    checkFileExtensions: function () {\r\n        var self = this;\r\n        var validExtensions = self.properties.validExtensions || \"\";\r\n\r\n        self.validOptions = {video: false, image: false, file: false};\r\n\r\n        // Preprocess the extensions string\r\n        validExtensions = validExtensions.replace(/\\s+/g, \"\").toLowerCase();\r\n\r\n        if (typeof (validExtensions) === \"undefined\" || validExtensions === \"\") {\r\n            self.validOptions = {video: true, image: true, file: true};\r\n        } else {\r\n            validExtensions = validExtensions.split(\";\");\r\n\r\n            if (validExtensions.length === 1 && validExtensions[0].indexOf(\"*.*\") !== -1) {\r\n                self.validOptions.video = true;\r\n                self.validOptions.image = true;\r\n            } else {\r\n                for (var i = 0, length = validExtensions.length; i < length; i++) {\r\n                    validExtensions[i] = validExtensions[i].replace(\"*.\", \"\");\r\n\r\n                    if (self.Class.EXTENSIONSFILE.toString().indexOf(validExtensions[i]) >= 0) {\r\n                        self.validOptions.file = true;\r\n                    } else if (self.Class.EXTENSIONSIMG.toString().indexOf(validExtensions[i]) >= 0) {\r\n                        self.validOptions.image = true;\r\n                    } else if (self.Class.EXTENSIONSVIDEO.toString().indexOf(validExtensions[i]) >= 0) {\r\n                        self.validOptions.video = true;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        // Media is not supported then upload control is disabled\r\n        if (!self.validOptions.file && !self.validOptions.image && !self.validOptions.video) {\r\n            $(self.$contentFile).addClass(\"bz-file-upload__container--hidden\");\r\n        }\r\n\r\n        // Limit of files is reached then upload control is disabled\r\n        if (self.isMaxFilesReached() || (!self.isNative && !bizagi.util.media.fileAPISupported())) {\r\n            $(this.$contentFile).addClass(\"bz-file-upload__container--hidden\");\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Add upload options\r\n     */\r\n    getUploadChoices: function () {\r\n        var self = this;\r\n        var itemsUpload = [];\r\n\r\n        // Take photo, Choose photo\r\n        if (self.validOptions.image) {\r\n            itemsUpload.push({\r\n                \"guid\": 1,\r\n                \"displayName\": bizagi.localization.getResource(\"workportal-actionsheet-upload-take-photo\")\r\n            });\r\n            itemsUpload.push({\r\n                \"guid\": 2,\r\n                \"displayName\": bizagi.localization.getResource(\"workportal-actionsheet-upload-choose-photo\")\r\n            });\r\n        }\r\n\r\n        // Take video\r\n        if (self.validOptions.video) {\r\n            itemsUpload.push({\r\n                \"guid\": 3,\r\n                \"displayName\": bizagi.localization.getResource(\"workportal-actionsheet-upload-take-video\")\r\n            });\r\n        }\r\n\r\n        // Stores the upload options\r\n        return [].concat(itemsUpload);\r\n    },\r\n\r\n    /**\r\n     * Handler of upload files\r\n     * @param {} ordinal\r\n     * @returns {}\r\n     */\r\n    handlerUploadFile: function (ordinal) {\r\n        var self = this;\r\n        var actionSelected = ordinal || 0;\r\n\r\n        switch (actionSelected) {\r\n            case 2:\r\n\r\n                navigator.camera.getPicture(function (dataImage) {\r\n                    self.dataImage = dataImage;\r\n                    var extensions = self.Class.EXTENSIONSIMG.concat(self.Class.EXTENSIONSVIDEO);\r\n\r\n                    bizagi.loading.start();\r\n\r\n                    $.when(bizagi.util.media.checkMaxSize(dataImage, self.properties))\r\n                        .then(function () {\r\n                            // Gets the real properties for the file\r\n                            return $.when(bizagi.util.media.getFileDataInfo(self.dataImage))\r\n                                .then(function (fileData) {\r\n                                    self.fileProperties = fileData;\r\n\r\n                                    if (bizagi.util.media.checkFileTypes(fileData, self.properties, extensions)) {\r\n                                        if (!bizagi.util.isAndroid()) {\r\n                                            return $.when(bizagi.util.media.modalResolutionUpload()).then(function (buttonIndex) {\r\n                                                if (buttonIndex <= bizagi.util.media.getImageResolutionItems().length) {\r\n                                                    return self.handlerResolutionUpload(buttonIndex);\r\n                                                }\r\n                                            });\r\n\r\n                                        } else {\r\n                                            // Force click to show actionsheet menu\r\n                                            $(\".bz-file-upload__resolution\", self.getControl()).click();\r\n                                        }\r\n                                    }\r\n                                });\r\n                        }).always(function () {\r\n                        bizagi.loading.stop();\r\n                    });\r\n\r\n                }, self.onFail.bind(self), {\r\n                    quality: self.Class.QUALITY_PICTURE,\r\n                    sourceType: Camera.PictureSourceType.PHOTOLIBRARY\r\n                });\r\n                break;\r\n            case 1:\r\n                navigator.camera.getPicture(function (dataImage) {\r\n                        bizagi.loading.start();\r\n\r\n                        $.when(bizagi.util.media.checkMaxSize(dataImage, self.properties)).then(function () {\r\n                            return $.when(bizagi.util.media.getFileDataInfo(dataImage)).then(function (fileData) {\r\n                                self.fileProperties = fileData;\r\n                                return self.saveImage(dataImage);\r\n                            });\r\n                        }).always(function () {\r\n                            bizagi.loading.stop();\r\n                        });\r\n                    },\r\n                    self.onFail.bind(self), {\r\n                        quality: self.Class.QUALITY_PICTURE,\r\n                        sourceType: navigator.camera.PictureSourceType.CAMERA,\r\n                        mediaType: navigator.camera.MediaType.PICTURE,\r\n                        destinationType: Camera.DestinationType.FILE_URI,\r\n                        correctOrientation: true,\r\n                        targetWidth: 1280,\r\n                        targetHeight: 960\r\n                    });\r\n                break;\r\n            case 3:\r\n                navigator.device.capture.captureVideo(function (dataVideo) {\r\n                    bizagi.loading.start();\r\n\r\n                    $.when(bizagi.util.media.checkMaxSizeVideo(dataVideo, self.properties))\r\n                        .then(function () {\r\n                            return self.saveVideo(dataVideo);\r\n                        }).always(function () {\r\n                        bizagi.loading.stop();\r\n                    });\r\n\r\n                }, self.onFail.bind(self), {limit: self.Class.LIMIT});\r\n                break;\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Catch errors\r\n     * @param {} error\r\n     */\r\n    onFail: function (error) {\r\n        var messageError = bizagi.util.processFailMessage(error);\r\n\r\n        bizagi.loading.stop();\r\n\r\n        if (messageError && typeof (messageError) === \"string\" && messageError.indexOf(\"No Activity found to handle Intent\") !== -1) {\r\n            var hasResource = bizagi.util.isValidResource(\"render-upload-error-media-app\");\r\n            var message = hasResource ? bizagi.localization.getResource(\"render-upload-error-media-app\") : \"Your device does not have an app to execute this action.\";\r\n\r\n            self.performValidationMessage(message);\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Adds a validation message to the render\r\n     * @param message\r\n     */\r\n    performValidationMessage: function (message) {\r\n        var fail = bizagi.util.processFailMessage(message);\r\n\r\n        bizagi.showMessageBox(fail);\r\n    },\r\n\r\n    /**\r\n     * Handler of resolution upload\r\n     * @param {} ordinal\r\n     * @returns {}\r\n     */\r\n    handlerResolutionUpload: function (ordinal) {\r\n        var self = this;\r\n        var actionSelected = ordinal || 0;\r\n\r\n        // If original, save image normally, if not, reduce quality and size\r\n        if (actionSelected === bizagi.util.media.ResolutionType.ORIGINAL) {\r\n            return self.saveImage(self.dataImage);\r\n        } else {\r\n            var resolution = bizagi.util.media.getImageResolution(actionSelected);\r\n\r\n            return $.when(bizagi.util.media.transformImageSize(self.dataImage, resolution)).then(function (result) {\r\n\r\n                self.editedImageURL = result.localUrl;\r\n                self.properties.url = result.base64Image;\r\n\r\n                return self.saveImage(self.dataImage);\r\n            });\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Method to add new file\r\n     */\r\n    addFile: function () {\r\n        var self = this;\r\n        var dataFile = this.$inputFile[0].files[0];\r\n        var extensions = self.Class.EXTENSIONSIMG.concat(self.Class.EXTENSIONSFILE, self.Class.EXTENSIONSVIDEO);\r\n\r\n        dataFile.fullPath = this.$inputFile[0].value;\r\n        bizagi.loading.start();\r\n\r\n        if (bizagi.util.media.checkMaxSizeFile(dataFile, self.properties) && bizagi.util.media.checkFileTypes(dataFile, self.properties, extensions)) {\r\n\r\n            $.when(self.processUploadFile(dataFile)).done(function (result) {\r\n                if (!bizagi.util.isFailResponse(result)) {\r\n                    self.onUploadFileCompleted(JSON.parse(decodeURIComponent(result)));\r\n                } else {\r\n                    self.performValidationMessage(result)\r\n                }\r\n            }).fail(function (error) {\r\n                self.executeFormFailHandler(error);\r\n            }).always(function () {\r\n                bizagi.loading.stop();\r\n            });\r\n        } else {\r\n            bizagi.loading.stop();\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Build add params to send to the server\r\n     * @param {} dataFile\r\n     */\r\n    buildAddFileParams: function (dataFile) {\r\n        var self = this;\r\n        var prefix = self.Class.BA_CONTEXT_PARAMETER_PREFIX;\r\n\r\n        // Get form data for POSTing\r\n        var formData = new FormData();\r\n        var form = self.getFormContainer();\r\n        var data = self.buildAddParams();\r\n\r\n        // Build add params to send to the server\r\n        var keys = Object.keys(data);\r\n\r\n        keys.map(function (key) {\r\n            formData.append(key, data[key]);\r\n        });\r\n\r\n        formData.append(\"Filedata\", dataFile);\r\n        formData.append(\"Filename\", dataFile.name.substr(dataFile.name.replace(/([\\\\\\/]+)/g, \"/\").lastIndexOf(\"/\") + 1));\r\n        formData.append(self.Class.BA_ACTION_PARAMETER_PREFIX + \"sessionId\", form.properties.sessionId);\r\n\r\n        if (self.properties.contexttype)\r\n            formData.append(prefix + \"contexttype\", self.properties.contexttype);\r\n\r\n        try {\r\n            if (typeof (BIZAGI_SESSION_NAME) !== \"undefined\") {\r\n                formData.append(BIZAGI_SESSION_NAME, form.properties.sessionId);\r\n            } else {\r\n                formData.append(\"JSESSIONID\", form.properties.sessionId);\r\n            }\r\n        } catch (e) {\r\n            formData.append(\"JSESSIONID\", form.properties.sessionId);\r\n        }\r\n\r\n        return formData;\r\n    },\r\n\r\n    /**\r\n     * Process an upload file into the server\r\n     * @param {} dataFile\r\n     * @returns {}\r\n     */\r\n    processUploadFile: function (dataFile) {\r\n        var data = {\r\n            url: this.properties.addUrl,\r\n            formData: this.buildAddFileParams(dataFile)\r\n        };\r\n\r\n        return this.dataService.processUploadFile(data);\r\n    },\r\n\r\n    /**\r\n     * onUploadFileCompleted\r\n     * @param {} result\r\n     */\r\n    onUploadFileCompleted: function (result) {\r\n        var self = this;\r\n        var $wrapper = $(\".bz-files\", self.getControl());\r\n\r\n        if (result.idFileUpload && result.fileName) {\r\n            var file = [result.idFileUpload, result.fileName];\r\n            var newItem = self.renderUploadItem(file);\r\n\r\n            // Locate it before the upload wrapper\r\n            $wrapper.append(newItem);\r\n\r\n            // Copy the files value but not its reference\r\n            var files = self.files.slice();\r\n\r\n            //Add the new item to this temporal array\r\n            files.push(file);\r\n\r\n            // Update value\r\n            self.setValue(files, true);\r\n\r\n            // Check maxFiles\r\n            self.checkMaxFiles();\r\n            self.attackMenuEvents(file);\r\n\r\n            self.editedImageURL = null;\r\n        } else {\r\n            self.performValidationMessage(result.message);\r\n        }\r\n    },\r\n\r\n    attackMenuEvents: function (file) {\r\n        var self = this;\r\n        var $control = self.getControl();\r\n\r\n        if (file && file.getFileProperties) {\r\n            $.when(file.getFileProperties).done(function (fileProperties) {\r\n                // TODO: Fail scenario...\r\n                var $fileItem = $(\".\" + self.properties.id + \"-\" + fileProperties.idFileUpload, $control);\r\n\r\n                self.fileData[fileProperties.idFileUpload] = fileProperties.metadata || [];\r\n                self.addMenuEvents($fileItem, fileProperties);\r\n            });\r\n        }\r\n    },\r\n\r\n    processActionByType: function (type, fileData, $fileItem) {\r\n        var self = this;\r\n        var properties = self.properties;\r\n        var form = self.getFormContainer();\r\n\r\n        bizagi.loading.start();\r\n\r\n        // Instantiate slide form object\r\n        var slideView = new bizagi.rendering.tablet.slide.ecm(self.dataService, self.renderFactory, {\r\n            title: self.properties.displayName || \"\",\r\n            container: form.container,\r\n            navigation: self.getParams().navigation,\r\n            editable: properties.editable && type !== self.Class.ACTION_DETAILS,\r\n            orientation: properties.orientation || \"ltr\",\r\n            onSave: function (result) {\r\n                if (result.update) {\r\n                    var file = [result.idFileUpload, result.fileName];\r\n                    var newItem = self.renderUploadItem(file);\r\n\r\n                    $fileItem.replaceWith(newItem);\r\n                    self.attackMenuEvents(file);\r\n                }\r\n            },\r\n            onCancel: function () {\r\n                // console.log(\"CANCEL\");\r\n            }\r\n        });\r\n\r\n        slideView.render({metadata: fileData.metadata, fileData: fileData})\r\n            .always(function () {\r\n                bizagi.loading.stop();\r\n            });\r\n\r\n    }\r\n\r\n});\r\n","/*\r\n *   Name: BizAgi Tablet Render Search List Extension\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will redefine the search-list render class to adjust to tablet devices\r\n */\r\n\r\n// Extends from render tablet base\r\nbizagi.rendering.tablet.render.extend(\"bizagi.rendering.tablet.searchList\", bizagi.rendering.searchList.prototype);\r\n// Extends itself\r\nbizagi.rendering.tablet.searchList.extend(\"bizagi.rendering.tablet.searchList\", {\r\n    SEARCH_MIN_LENGTH: 2,\r\n    SEARCH_MAX_RECORDS: 50,\r\n    SEARCH_DELAY: 250,\r\n    SEARCH_ELEMENTS: {}\r\n}, {\r\n\r\n    renderControl: function() {\r\n        var self = this;\r\n        var properties = self.properties;\r\n        var template = self.renderFactory.getTemplate(\"searchList\");\r\n\r\n        return $.fasttmpl(template, {\r\n            id: properties.id,\r\n            value: properties.value.map(function(el){\r\n                return self.formatItem(el.value);\r\n            }).join(\", \")\r\n        });\r\n    },\r\n\r\n    /**\r\n     * Template method to implement in each device to customize each render after processed\r\n     * @returns {}\r\n     */\r\n    postRender: function () {\r\n        this.searchListInput = $(\".bz-search-list__input\", this.getControl());\r\n    },\r\n\r\n    postRenderReadOnly: function () {\r\n        this.searchListInput = $(\".bz-search-list__input\", this.getControl());\r\n    },\r\n\r\n    renderReadOnly: function () {\r\n        var self = this;\r\n        var template = self.renderFactory.getTemplate(\"searchList.readonly\");\r\n\r\n        // Render template\r\n        var content = $.fasttmpl(template, {\r\n            items: self.properties.value || {},\r\n            editable: self.properties.editable || true\r\n        }, {\r\n            formatItem: self.formatItem\r\n        });\r\n\r\n        return content;\r\n    },\r\n\r\n    /**\r\n     * Template method to implement in each device to customize the render's behaviour\r\n     * to add handlers\r\n     * @returns {}\r\n     */\r\n    configureHandlers: function () {\r\n        var self = this;\r\n\r\n        // Select new item\r\n        self.searchListInput.on(\"click\", function (evt) {\r\n            var parent = $(evt.target).parent() || {};\r\n            if (parent.hasClass('bz-pill')) return;\r\n\r\n            self._searchListViewModal();\r\n        });\r\n    },\r\n\r\n    _searchListViewModal: function () {\r\n        var self = this;\r\n        var header = self.getHeaderTemplate();\r\n        var content = self.getContentTemplate();\r\n        var footer = self.getFooterTemplate();\r\n\r\n        self.searchListInput.mobileView({\r\n            customHeader: header,\r\n            orientation: self.properties.orientation || \"\",\r\n            cssClassHeader: \"bz-modal-view__header-multiple\",\r\n            contentTemplate: content,\r\n            footerTemplate: footer,\r\n            style: \"width: 80%; height: 70%\",\r\n            close: function () {\r\n                $(window).unbind(\"resize\");\r\n                self.triggerGlobalHandler(\"modalViewDidDisappear\", {});\r\n            },\r\n            afterOpenAnimation: function(event){\r\n                $(\".bz-modal-view__search\", event.view.header).focus();\r\n            },\r\n            open: function () {\r\n                self.triggerGlobalHandler(\"closeModalValidationMessage\", {});\r\n                self.triggerGlobalHandler(\"modalViewDidAppear\", {});\r\n            },\r\n            configureActions: function (context) {\r\n                self.adjustResize();\r\n                self.configureModalViewHandlers(context);\r\n            }\r\n        });\r\n    },\r\n\r\n    /**\r\n     * Sets the value in the rendered control\r\n     * @param {} value\r\n     * @returns {}\r\n     */\r\n    setDisplayValue: function (value) {\r\n        var self = this;\r\n        var finalValue = typeof (value) === \"string\" ? JSON.parse(value).value : value.value;\r\n\r\n        // Set internal value\r\n        self.setValue(finalValue);\r\n\r\n        if (value !== undefined) {\r\n            if (self.properties.editable) {\r\n                self.searchListInput.html(finalValue.map(function(el){\r\n                    return self.formatItem(el.value);\r\n                }).join(\", \"));\r\n            }\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Remove a item from the list\r\n     * @param {} element\r\n     * @returns {}\r\n     */\r\n    deleteItem: function (element) {\r\n        var self = this;\r\n        var item = element.parent('div');\r\n\r\n        // Remove from main memory and set the new value\r\n        self.removeElement({ id: item.data(\"id\") });\r\n\r\n        // Remove list element\r\n        item.remove();\r\n    },\r\n\r\n    selectItem: function (item) {\r\n        var templateItem = this.getTagTemplate(item, this.properties.editable);\r\n        this.modalViewTagList.append(templateItem);\r\n    },\r\n\r\n    /**\r\n     * Configure the modalView Handlers for the new suggest control\r\n     * @param {} inputContainer\r\n     * @returns {}\r\n     */\r\n    configureModalViewHandlers: function (modalView) {\r\n        var self = this;\r\n        var modalFooter = modalView.footer;\r\n        var modalHeader = modalView.header;\r\n\r\n        // Initialize data\r\n        var elements = {};\r\n\r\n        if (self.hasValue()) {\r\n            var list = self.getListItems();\r\n            $.each(list, function (index, item) {\r\n                elements[item.id] = item;\r\n            });\r\n        }\r\n\r\n        // Configuring list as a selectable element\r\n        self.modalViewList = $(\".bz-list\", modalView.content);\r\n        self.modalViewTagList = $(\".bz-search-pill__results\", modalHeader);\r\n\r\n        var $clearButton = $(\".bz-modal-view__clear\", modalHeader);\r\n\r\n        // Suggest\r\n        var $suggestInput = $(\".bz-modal-view__search\", modalHeader);\r\n        var suggestFilter = bizagi.util.debounce(function () {\r\n            if (this.value === \"\") {\r\n                $clearButton.removeClass(\"bz-modal-view__clear--visible\");\r\n            } else {\r\n                $clearButton.addClass(\"bz-modal-view__clear--visible\");\r\n            }\r\n            self.autoCompleteSearchResults($.trim(this.value));\r\n        }, this.Class.SEARCH_DELAY);\r\n\r\n        $suggestInput.on(\"change keyup\", suggestFilter).on(\"focus\", function(){\r\n            modalView.header.addClass(\"bz-modal-view__header--active\");\r\n        }).on(\"blur\", function(){\r\n            modalView.header.removeClass(\"bz-modal-view__header--active\");\r\n        });\r\n\r\n        //Clear the search\r\n        $clearButton.bind(\"click\", function(){\r\n            $suggestInput.val(\"\").trigger(\"change\");\r\n        });\r\n\r\n        $(\"[data-action=close]\", modalView.header).bind(\"click\", function () {\r\n            modalView.close();\r\n        });\r\n\r\n\r\n        // Add tags to list\r\n        self.modalViewList.on(\"click\", \"li\", function () {\r\n            var item = $.data(this).item;\r\n\r\n            // Prevent duplicate elements\r\n            if (!item || (item && elements[item.id])) return;\r\n            elements[item.id] = item;\r\n\r\n            // Update state of button\r\n            $(modalFooter).find('.bz-btn').removeClass(\"bz-btn--secundary\");\r\n            $(modalFooter).find('.bz-btn').addClass(\"bz-btn--primary\");\r\n\r\n            // Update list\r\n            if ((Object.keys(elements) || []).length === 1) {\r\n                $(modalHeader).find(\".bz-search-pill__selected \")\r\n                    .removeClass(\"bz-search-pill__selected--hidden\");\r\n            }\r\n            self.selectItem(item);\r\n        });\r\n\r\n        // Remove tags of list\r\n        self.modalViewTagList.on(\"click\", '.bz-pill > .bz-btn-icn', function (evt) {\r\n            evt.preventDefault();\r\n            evt.stopPropagation();\r\n\r\n            var element = $(this);\r\n            var tag = element.parent('div');\r\n\r\n            // Update state of button\r\n            $(modalFooter).find('.bz-btn').removeClass(\"bz-btn--secundary\");\r\n            $(modalFooter).find('.bz-btn').addClass(\"bz-btn--primary\");\r\n\r\n            // Remove from main memory and set the new value\r\n            delete elements[tag.data(\"id\")];\r\n\r\n            // Remove list element\r\n            tag.remove();\r\n            // Update list\r\n            if ((Object.keys(elements) || []).length === 0) {\r\n                $(modalHeader).find(\".bz-search-pill__selected \")\r\n                    .addClass(\"bz-search-pill__selected--hidden\");\r\n            }\r\n        });\r\n\r\n        $(modalFooter).delegate(\"[data-action=save]\", \"click\", function (evt) {\r\n            // Create a temporal array\r\n            var newList = [];\r\n            $.each(elements, function (index, item) {\r\n                newList.push(item);\r\n            });\r\n\r\n            self.setDisplayValue({ value: newList });\r\n\r\n            modalView.close();\r\n        });\r\n    },\r\n\r\n    autoCompleteSearchResults: function (currentValue) {\r\n        var self = this;\r\n\r\n        $.when(self.processRequest({ term: currentValue }))\r\n            .done(function (response) {\r\n\r\n                self.modalViewList.find(\"li\").remove();\r\n\r\n                for (var i = 0, length = response.length; i < length; i++) {\r\n                    var searchItem = self.renderSearchItem(response[i]);\r\n\r\n                    searchItem.appendTo(self.modalViewList);\r\n                }\r\n            });\r\n    },\r\n\r\n    renderSearchItem: function (item) {\r\n        var self = this;\r\n        var template = self.renderFactory.getTemplate(\"searchList.item\");\r\n\r\n        var searchItem = $.tmpl(template, {\r\n            id: item.id,\r\n            label: item.label,\r\n            value: this.formatItem(item.value)\r\n        });\r\n\r\n        searchItem.data(\"item\", item);\r\n\r\n        return searchItem;\r\n    },\r\n\r\n    /**\r\n     * Process the request data for the autocomplete control\r\n     * @param {} req\r\n     * @returns {}\r\n     */\r\n    processRequest: function (req) {\r\n        var self = this;\r\n        var properties = self.properties;\r\n        var deferred = new $.Deferred();\r\n\r\n        // Create array for response objects   \r\n        var suggestions = [];\r\n\r\n        if (req.term.length >= this.Class.SEARCH_MIN_LENGTH) {\r\n\r\n            // Update term property to reflect the search\r\n            properties.term = req.term;\r\n\r\n            // Cancel previous request in order to improve the performance\r\n            if (self.deferredReference && typeof (self.deferredReference.reject) === \"function\" &&\r\n                self.deferredReference.state() !== \"resolved\") {\r\n                self.deferredReference.reject({ hideStatus: true });\r\n            }\r\n\r\n            self.deferredReference = self.getData().done(function (data) {\r\n                if (data && data.length > 0) {\r\n                    data = data.slice(0, properties.maxRecords);\r\n\r\n                    if (data.length > self.Class.SEARCH_MAX_RECORDS) {\r\n                        data = data.slice(0, self.Class.SEARCH_MAX_RECORDS);\r\n\r\n                        suggestions.push({\r\n                            id: self.Class.NO_RESULTS_SEARCH_ID,\r\n                            label: self.getResource(\"render-search-maximum-records-allowed\"),\r\n                            value: \"\"\r\n                        });\r\n\r\n\r\n                    } else {\r\n                        data = data.slice(0, properties.maxRecords);\r\n                    }\r\n\r\n                    $.each(data, function (i, val) {\r\n                        if (properties.maxRecords === 0 || i < properties.maxRecords) {\r\n                            var parseValue = bizagi.util.highlightMatches(val, req.term);\r\n\r\n                            suggestions.push({ id: val.id, label: parseValue, value: val.value });\r\n                        }\r\n                    });\r\n\r\n                } else {\r\n                    suggestions.push({\r\n                        id: self.Class.NO_RESULTS_SEARCH_ID,\r\n                        label: self.getResource(\"render-grid-no-records\"),\r\n                        value: \"\"\r\n                    });\r\n                }\r\n\r\n                deferred.resolve(suggestions);\r\n\r\n            }).fail(function () {\r\n                deferred.reject();\r\n            });\r\n\r\n        } else {\r\n            deferred.resolve(suggestions);\r\n        }\r\n\r\n        return deferred.promise();\r\n    },\r\n\r\n    getContentTemplate: function () {\r\n        var self = this;\r\n        var value = self.getValue();\r\n        var finalValue = typeof (value) === \"string\" ? JSON.parse(value).value : value.value;\r\n\r\n        var template = this.renderFactory.getTemplate(\"searchList.items\");\r\n        var content = $.fasttmpl(template, {\r\n            items: finalValue || {},\r\n            editable: self.properties.editable || true\r\n        },{\r\n            formatItem: self.formatItem\r\n        });\r\n\r\n        return $.trim(content);\r\n    },\r\n\r\n    getFooterTemplate: function () {\r\n        var self = this;\r\n        var template = self.renderFactory.getTemplate(\"searchList.actions\");\r\n        var content = $.fasttmpl(template, {\r\n            items: self.properties.value || {},\r\n            editable: self.properties.editable || true\r\n        });\r\n\r\n        return $.trim(content);\r\n    },\r\n\r\n    getTagTemplate: function (item, editable) {\r\n        var template = this.renderFactory.getTemplate(\"searchList.tag\");\r\n        var content = $.fasttmpl(template, {\r\n            id: item.id,\r\n            label: item.label,\r\n            value: this.formatItem(item.value),\r\n            editable: editable\r\n        });\r\n        return $.trim(content);\r\n    },\r\n\r\n    adjustResize: function () {\r\n        var self = this;\r\n        var initialScreenSize = window.innerHeight;\r\n\r\n        $(window).off(\"resize\").on(\"resize\", bizagi.util.debounce(function () {\r\n            var that = $(this);\r\n\r\n            // Hide the footer\r\n            if (that.height() < initialScreenSize) {\r\n                $(\".bz-mobile-view__footer_content\").addClass(\"bz-hidden\");\r\n            } else {\r\n                $(\".bz-mobile-view__footer_content\").removeClass(\"bz-hidden\");\r\n            }\r\n        }, self.Class.SEARCH_DELAY));\r\n    },\r\n\r\n    getHeaderTemplate: function () {\r\n        var self = this;\r\n        var value = self.getValue();\r\n        var finalValue = typeof (value) === \"string\" ? JSON.parse(value).value : value.value;\r\n        var template = this.renderFactory.getTemplate(\"searchList-modal-header\");\r\n\r\n        var content = $.fasttmpl(template, {\r\n            items: finalValue || {},\r\n            editable: self.properties.editable || true,\r\n            emptyItems: (finalValue || []).length === 0,\r\n        }, {\r\n            formatItem: self.formatItem\r\n        });\r\n\r\n        return $.trim(content);\r\n    }\r\n});\r\n","/**\r\n *   Name: Bizagi User Field render tablet Extension\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define the basic behaviour for userfields\r\n */\r\n\r\nbizagi.rendering.tablet.render.extend(\"bizagi.rendering.tablet.userfieldWrapper\", bizagi.rendering.userfieldWrapper.prototype);\r\nbizagi.rendering.tablet.userfieldWrapper.extend(\"bizagi.rendering.tablet.userfieldWrapper\", {}, {\r\n\r\n    /**\r\n     *   Load userfield\r\n     */\r\n    getUserfieldControl: function () {\r\n        var self = this;\r\n        var sControl = self.userfieldName;\r\n        var mode = self.getMode();\r\n        var exists = (mode !== \"execution\") || eval(\"bizagi.rendering.tablet.\" + sControl + \" !== undefined\");\r\n        var def = new $.Deferred();\r\n\r\n        if (exists) {\r\n            // Creates the userfield instance\r\n            // Set true argument for tabItem\r\n            $.when(self.parent.ready()).done(function () {\r\n                def.resolve(self.createUserfieldInstance(sControl));\r\n            });\r\n\r\n        } else {\r\n            // Call ajax service in order to retrieve user field definitions\r\n            $.when(self.dataService.getUserfieldDefinition({\r\n                userfield: self.userfieldGuid,\r\n                device: \"tablet\"\r\n            })).pipe(function (data) {\r\n                // Load userfield in memory\r\n                self.loadUserfield(data);\r\n\r\n                // Creates the userfield instance\r\n                def.resolve(self.createUserfieldInstance(sControl));\r\n            });\r\n        }\r\n\r\n        return def.promise();\r\n    },\r\n\r\n    /**\r\n     * Creates the userfield instance when the userfield prototype is loaded in memory\r\n     */\r\n    createUserfieldInstance: function (sControl) {\r\n        var self = this;\r\n        var control;\r\n        try {\r\n            // Create a dynamic function to avoid problem with eval calls when minifying the code\r\n            var dynamicFunction = \"var baDynamicFn = function(renderParams){ \\r\\n\";\r\n            dynamicFunction += \"return new bizagi.rendering.tablet.\" + sControl + \"(renderParams);\\r\\n\";\r\n            dynamicFunction += \"}\\r\\n\";\r\n            dynamicFunction += \"baDynamicFn\";\r\n            dynamicFunction = eval(dynamicFunction);\r\n\r\n            // Call the dynamic function\r\n            control = dynamicFunction(self.initialParams);\r\n        } catch (e) {\r\n            // If the call fails, return the default user field\r\n            control = self.getUserFieldInstance(self.initialParams);\r\n        }\r\n\r\n        control.properties.isUserField = true;\r\n\r\n        // Save userfield instance\r\n        self.userfieldInstance = control;\r\n\r\n        // Create proxy methods from the wrapper to the userfield instance\r\n        self.replicateUserfieldMethods(control);\r\n\r\n        // Replicate renderchange event from wrapped element to grid if applies\r\n        self.userfieldInstance.bind(\"renderchange\", function () {\r\n            self.triggerHandler(\"renderchange\", arguments);\r\n        });\r\n\r\n        return control;\r\n    },\r\n\r\n    /**\r\n     * Load userfield into memory\r\n     */\r\n    loadUserfield: function (data) {\r\n        var self = this;\r\n        var styleContent = \"\";\r\n\r\n        self.properties.styleGuid = self.properties.styleGuid || Math.guid();\r\n\r\n        try {\r\n            // Parse data\r\n            try {\r\n                data = eval(data);\r\n            } catch (e) {\r\n                bizagi.log(\"Could not parse result userfield \" + self.userfieldName, e.message);\r\n            }\r\n\r\n            // Iterate elements\r\n            $.each(data, function (index, val) {\r\n                if (val.type === \"js\") {\r\n                    try {\r\n\r\n                        function replaceWithDevice(str) {\r\n                            return str.replace(/bizagi.rendering/gi, \"bizagi.rendering.tablet\");\r\n                        }\r\n\r\n                        val.content = val.content.replace(/bizagi\\.rendering\\.[^\\s]+\\.extend(\\s|\\n|\\s)*\\((\\s|\\n|\\s)*\\\"bizagi\\.rendering\\.[^\\s]+\\\"/gmi, replaceWithDevice);\r\n                        window.eval(val.content);\r\n                    } catch (ex) {\r\n                        bizagi.log(\"Could not parse result userfield3 \" + self.userfieldName, ex.message);\r\n                    }\r\n                }\r\n\r\n                if (val.type === \"css\") {\r\n                    styleContent += val.content;\r\n                }\r\n            });\r\n\r\n            if ($.trim(styleContent) !== \"\") {\r\n                bizagi.util.loadStyle(styleContent, self.properties.styleGuid);\r\n            }\r\n\r\n            // Replicate userfield methods to the wrapper\r\n            var control = eval(\"bizagi.rendering.\" + self.userfieldName);\r\n\r\n        } catch (e) {\r\n            bizagi.log(\"Could not parse result userfield \" + self.userfieldName, e.message);\r\n        }\r\n    },\r\n\r\n\r\n    getUserFieldInstance: function (params) {\r\n        var mode = this.getMode();\r\n\r\n        // If the call fails, return the default user field\r\n        return (mode === \"execution\") ?\r\n            new bizagi.rendering.tablet.defaultUserField(params) :\r\n            new bizagi.rendering.tablet.designUserField(params);\r\n    }\r\n});\r\n\r\n// Auto-extension\r\nbizagi.rendering.tablet.render.extend(\"bizagi.rendering.tablet.basicUserField\", bizagi.rendering.userfieldDefinition.prototype);\r\nbizagi.rendering.tablet.basicUserField.extend(\"bizagi.rendering.tablet.basicUserField\", bizagi.rendering.basicUserField.prototype);\r\nbizagi.rendering.tablet.basicUserField.extend(\"bizagi.rendering.tablet.basicUserField\", {}, {\r\n\r\n    /*\r\n    *   Constructor\r\n    */\r\n    init: function (params) {\r\n        var self = this;\r\n\r\n        // Call base\r\n        this._super(params);\r\n\r\n        // Check if the userfield is supported\r\n        if (!this.isSupported()) {\r\n            var form = self.getFormContainer();\r\n            form.addError(self.getResource(\"render-tablet-error-userfield\"));\r\n        }\r\n    },\r\n\r\n    /*\r\n    *   Template method to implement in each device to customize each render after processed\r\n    */\r\n    getEditableControl: function () {\r\n        if (!this.isSupported()) {\r\n            return bizagi.rendering.defaultUserField.prototype.getEditableControl.apply(this, arguments);\r\n        }\r\n    },\r\n\r\n    /*\r\n    *   Template method to implement in each device to customize each render after processed\r\n    */\r\n    getReadonlyControl: function () {\r\n        if (!this.isSupported()) {\r\n            return bizagi.rendering.defaultUserField.prototype.getReadonlyControl.apply(this, arguments);\r\n        }\r\n    },\r\n\r\n    /*\r\n    *   Returns if the userfield is supported in this device\r\n    */\r\n    isSupported: function () {\r\n        return true;\r\n    }\r\n});\r\n\r\n/*\r\n*   Default implementation for user fields\r\n*/\r\nbizagi.rendering.tablet.basicUserField.extend(\"bizagi.rendering.tablet.defaultUserField\", {}, {\r\n\r\n    /*\r\n    *   Template method to implement in each device to customize each render after processed\r\n    */\r\n    getEditableControl: function () {\r\n        var self = this;\r\n        var control = self.getControl();\r\n        var properties = self.properties;\r\n        var controlName = properties.control.replace(/column/g, \"\");\r\n\r\n        self.input = $(\"<label>Userfield: \" + controlName + \" not found</label>\").appendTo(control);\r\n        self.input.addClass(\"ui-bizagi-render-userfield-notSupported\");\r\n\r\n        return self.input;\r\n    },\r\n\r\n    /*\r\n    *   Template method to implement in each device to customize each render after processed\r\n    */\r\n    getReadonlyControl: function () {\r\n        return this.getEditableControl();\r\n    },\r\n\r\n    /*\r\n\t*  Dont send the data to the server\r\n\t*/\r\n    collectData: function (renderValues) {\r\n    }\r\n\r\n});","/**\r\n *   Name: Bizagi Render Image Class\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will redefine the image render class to adjust to tablet devices\r\n */\r\n\r\n// Extends from render tablet base\r\nbizagi.rendering.tablet.render.extend(\"bizagi.rendering.tablet.image\", {\r\n    // Statics\r\n    BA_ACTION_PARAMETER_PREFIX: bizagi.render.services.service.BA_ACTION_PARAMETER_PREFIX,\r\n    BA_CONTEXT_PARAMETER_PREFIX: bizagi.render.services.service.BA_CONTEXT_PARAMETER_PREFIX,\r\n    BA_PAGE_CACHE: bizagi.render.services.service.BA_PAGE_CACHE\r\n}, bizagi.rendering.image.prototype);\r\n\r\n// Extends itself\r\nbizagi.rendering.tablet.image.extend(\"bizagi.rendering.tablet.image\", {\r\n    QUALITY_PICTURE: 80,\r\n    EXTENSIONSIMG: [\"jpeg\", \"jpg\", \"png\"]\r\n}, {\r\n\r\n    /**\r\n     * DOM input to handle HTML uploads\r\n     * @var $inputFile jQuery DOM\r\n     */\r\n    $inputFile: null,\r\n    /**\r\n     * Whether or not is a native device 'Just a shortcut\r\n     * @var isNative boolean\r\n     */\r\n    isNative: false,\r\n\r\n    /**\r\n     * Whether or not we are offline 'Just a shortcut\r\n     * @var isOfflineForm boolean\r\n     */\r\n    isOfflineForm: false,\r\n\r\n    /**\r\n     * Update or init the element data\r\n     * @param {} data\r\n     */\r\n    initializeData: function (data) {\r\n        // Call base\r\n        this._super(data);\r\n\r\n        // Check if offline forms is supported\r\n        this.isOfflineForm = bizagi.util.isOfflineForm({context: this});\r\n        this.isNative = bizagi.util.isCordovaSupported();\r\n\r\n        if (this.isOfflineForm) {\r\n            var maxFileSizeOfProperty = Number(this.properties.maxSize) || 1048576;\r\n            var maxFileSizeOfUser = typeof (BIZAGI_SETTINGS) !== \"undefined\" && typeof (BIZAGI_SETTINGS.UploadMaxFileSize) !== \"undefined\" ? Number(BIZAGI_SETTINGS.UploadMaxFileSize) : 1048576;\r\n\r\n            this.properties.maxSize = maxFileSizeOfProperty < maxFileSizeOfUser ? maxFileSizeOfProperty : maxFileSizeOfUser;\r\n            var originalValue = this.properties.originalValue;\r\n            if ( originalValue && originalValue.value !== undefined ){\r\n                this.properties.offlineImageId = originalValue.value;\r\n                this.properties.originalOfflineImageId = this.properties.offlineImageId;\r\n            }\r\n        }\r\n    },\r\n\r\n    /**\r\n     * This method tries to get the HTML template an render the current object inside\r\n     * @return {jQuery} $.Deferred()\r\n     */\r\n    renderControl: function () {\r\n        var template = this.renderFactory.getTemplate(\"image\");\r\n\r\n        return $.fasttmpl(template, {url: \"\"});\r\n    },\r\n\r\n    getElementsToStylize: function (context) {\r\n        return $({});\r\n    },\r\n\r\n    /**\r\n     * There is no difference when rendering a readonly image, so...\r\n     * @return {jQuery} $.Deferred()\r\n     */\r\n    renderReadOnly: function () {\r\n        var self = this;\r\n        var template = this.renderFactory.getTemplate(\"image-readonly\");\r\n        var def = new $.Deferred();\r\n\r\n        $.when(self.buildItemUrl()).done(function (dataUrl) {\r\n            var url = dataUrl || \"\";\r\n\r\n            if (!self.isDisposed()) {\r\n                self.properties.url = url;\r\n                self.properties.value = url.length > 0 ? [url] : null;\r\n\r\n                self.setValue(self.properties.value);\r\n\r\n                var html = $.fasttmpl(template, {url: self.properties.url});\r\n                def.resolve(html);\r\n            }\r\n        });\r\n\r\n        return def.promise();\r\n    },\r\n\r\n    /**\r\n     * After rendering element\r\n     */\r\n    postRender: function () {\r\n        var $control = this.getControl();\r\n        this.$inputFile = $(\".bz-image__input\", $control);\r\n        this.$nativeFile = $(\".bz-image__native\", $control);\r\n\r\n        if (!this.isDesignMode())\r\n            this.showAsyncImage();       \r\n    },\r\n    /**\r\n     * Add action handlers\r\n     */\r\n    configureHandlers: function () {\r\n        var self = this;\r\n        var $control = this.getControl();\r\n\r\n        // Attach all events\r\n        $control.on(\"click\", \"[data-action=upload]\", function (evt) {\r\n            self.choosePhoto();\r\n        });\r\n\r\n        if (this.isNative) {\r\n            // Upload Image Options\r\n            this.$nativeFile.off(\"click\").actionSheet({\r\n                actions: self.getUploadChoices(),\r\n                actionClicked: function (action) {\r\n                    switch (action.guid) {\r\n                        case 1:\r\n                            self.imageAdd();\r\n                            break;\r\n                        case 2:\r\n                            self.imageAdd(true);\r\n                            break;\r\n                        default:\r\n                    }\r\n                },\r\n                appear: function (action) {\r\n                    self.triggerGlobalHandler(\"closeModalValidationMessage\", {});\r\n                    self.triggerGlobalHandler(\"modalViewDidAppear\", {});\r\n                },\r\n                cancelClicked: function (action) {\r\n                    self.triggerGlobalHandler(\"modalViewDidDisappear\", {});\r\n                }\r\n            });\r\n\r\n            $(\".bz-image__resolution\", $control).off(\"click\").actionSheet({\r\n                actions: bizagi.util.media.getImageResolutionSizes(),\r\n                withoutCancel: true,\r\n                actionClicked: function (action) {\r\n                    bizagi.loading.start();\r\n\r\n                    $.when(self.resolutionButtonHandler(action.guid))\r\n                        .always(function () {\r\n                            bizagi.loading.stop();\r\n                        });\r\n\r\n                },\r\n                appear: function (action) {\r\n                    self.triggerGlobalHandler(\"closeModalValidationMessage\", {});\r\n                    self.triggerGlobalHandler(\"modalViewDidAppear\", {});\r\n                },\r\n                cancelClicked: function (action) {\r\n                    self.triggerGlobalHandler(\"modalViewDidDisappear\", {});\r\n                }\r\n            });\r\n        } else {\r\n\r\n            // Image change (Hybrid only)\r\n            this.$inputFile.off(\"change\").on(\"change\", function () {\r\n                self.imageAdd();\r\n                this.value = \"\";\r\n            });\r\n\r\n            // Just in case\r\n            this.$inputFile.off(\"click\").on(\"click\", function (evt) {\r\n                evt.stopPropagation();\r\n            });\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Template method to implement in each device to customize the render's behaviour\r\n     * to add handlers when the control is readonly\r\n     */\r\n    configureHandlersReadOnly: function () {\r\n        var self = this;\r\n        var $control = this.getControl();\r\n\r\n        $control.on(\"click\", \".bz-image\", function () {\r\n            self.imagePreview();\r\n        })\r\n    },\r\n\r\n    /**\r\n     * Add an image\r\n     * @param useCamera boolean Whether or not to use device's camera\r\n     */\r\n    imageAdd: function (useCamera) {\r\n        var self = this;\r\n\r\n        if (!this.isNative) {\r\n            var extensions = this.Class.EXTENSIONSIMG;\r\n            var dataFile = this.$inputFile[0].files[0];\r\n\r\n            dataFile.fullPath = this.$inputFile[0].value;\r\n\r\n            bizagi.loading.start();\r\n\r\n            if (bizagi.util.media.checkMaxSizeFile(dataFile, self.properties) && bizagi.util.media.checkFileTypes(dataFile, self.properties, extensions)) {\r\n\r\n                $.when(self.performUploadFile(dataFile))\r\n                    .always(function () {\r\n                        bizagi.loading.stop();\r\n                    });\r\n\r\n            } else {\r\n                bizagi.loading.stop();\r\n            }\r\n        } else {\r\n\r\n            var options = {\r\n                quality: self.Class.QUALITY_PICTURE,\r\n                targetWidth: 1280,\r\n                targetHeight: 960,\r\n                correctOrientation: true\r\n            };\r\n\r\n            if (!useCamera) {\r\n                var coordinates = self.getControl()[0].getBoundingClientRect();\r\n\r\n                options = {\r\n                    quality: self.Class.QUALITY_PICTURE,\r\n                    sourceType: Camera.PictureSourceType.PHOTOLIBRARY,\r\n                    popoverOptions: new CameraPopoverOptions(coordinates.left, coordinates.top - 20, 200, 100, 4),\r\n                    destinationType: navigator.camera.DestinationType.FILE_URI,\r\n                    correctOrientation: true\r\n                };\r\n            }\r\n\r\n            navigator.camera.getPicture(function (dataImage) {\r\n\r\n                bizagi.loading.start();\r\n\r\n                $.when(bizagi.util.media.checkMaxSize(dataImage, self.properties)).then(function () {\r\n                    return $.when(bizagi.util.media.getFileDataInfo(dataImage)).then(function (fileData) {\r\n                        if (bizagi.util.media.checkFileTypes(fileData, self.properties, self.Class.EXTENSIONSIMG)) {\r\n\r\n                            self.dataImage = dataImage;\r\n                            self.fileProperties = fileData;\r\n\r\n                            // \"new Blob\" constructor is not supported in android version 4.2.2\r\n                            var version = bizagi.util.getAndroidVersion();\r\n                            if ((version && version <= 4.2) || self.isOfflineForm) {\r\n\r\n                                return $.when(self.performUploadFile(self.dataImage))\r\n                                    .always(function () {\r\n                                        bizagi.loading.stop();\r\n                                    });\r\n\r\n                            } else {\r\n\r\n                                if (!bizagi.util.isAndroid()) {\r\n                                    return $.when(bizagi.util.media.modalResolutionUpload())\r\n                                        .then(function (buttonIndex) {\r\n                                            if (buttonIndex <= bizagi.util.media.getImageResolutionItems().length) {\r\n                                                return self.resolutionButtonHandler(buttonIndex);\r\n                                            }\r\n                                        });\r\n\r\n                                } else {\r\n                                    // Force click to show actionsheet menu\r\n                                    $(\".bz-image__resolution\", self.getControl()).click();\r\n                                }\r\n                            }\r\n                        }\r\n                    });\r\n\r\n                }).always(function () {\r\n                    bizagi.loading.stop();\r\n                });\r\n            }, self.onFail, options);\r\n        }\r\n    },\r\n\r\n    /**\r\n     * onFail\r\n     * @param {} error\r\n     * @returns {}\r\n     */\r\n    onFail: function (error) {\r\n        bizagi.loading.stop();\r\n    },\r\n\r\n    /**\r\n     * Remove the current image\r\n     */\r\n    imageDelete: function () {\r\n        var self = this;\r\n\r\n        bizagi.showConfirmationBox(self.getResource(\"render-grid-delete-confirmation\"))\r\n            .done(function () {\r\n                bizagi.loading.start();\r\n\r\n                $.when(self.dataService.deleteImage({\r\n                    url: self.properties.deleteUrl,\r\n                    idRender: self.properties.id,\r\n                    xpath: self.properties.xpath,\r\n                    xpathContext: self.properties.xpathContext,\r\n                    idPageCache: self.properties.idPageCache,\r\n                    contexttype: self.properties.contexttype\r\n                })).done(function () {\r\n                    self.uploadFileCompleted();\r\n                }).fail(function (msg) {\r\n                    var message;\r\n                    var responseText = msg.responseText;\r\n\r\n                    try {\r\n                        message = JSON.parse(responseText);\r\n                        message = message.message || responseText;\r\n                    } catch (e) {\r\n                        message = responseText;\r\n                    }\r\n\r\n                    self.setValidationMessage(message);\r\n\r\n                }).always(function () {\r\n                    bizagi.loading.stop();\r\n                });\r\n            });\r\n    },\r\n\r\n    /**\r\n     * Send file using HTTP\r\n     * @param dataFile\r\n     * @return {jQuery} $.Deferred()\r\n     */\r\n    uploadFile: function (dataFile) {\r\n        var self = this;\r\n        var defer = new $.Deferred();\r\n\r\n        if (!this.isOfflineForm) {\r\n            if (this.isNative) {\r\n\r\n                var params = {};\r\n                var addParams = self.buildAddParams();\r\n                var fileName = self.fileProperties.name;\r\n\r\n                if (self.editedImageURL) {\r\n                    params.dataFile = self.editedImageURL;\r\n                } else if (self.fileProperties) {\r\n                    params.dataFile = self.fileProperties.url;\r\n                }\r\n\r\n                addParams.queueID = \"q_\" + bizagi.util.encodeXpath(self.getUploadXpath());\r\n\r\n                params.data = addParams;\r\n                params.options = new FileUploadOptions();\r\n                params.options.fileKey = \"file\";\r\n                params.options.fileName = fileName;\r\n                params.options.mimeType = \"image/jpeg\";\r\n                params.options.uploadKey = {key: addParams[\"h_xpath\"]};\r\n                params.options.addUrl = self.properties.addUrl;\r\n\r\n                //Cleans variables related previous uploads\r\n                self.editedImageURL = null;\r\n                self.fileProperties = null;\r\n\r\n                // Fix android 4.4 getting images from recent folder\r\n                params.dataFile = bizagi.util.media.getImagePath(params.dataFile);\r\n\r\n                $.when(bizagi.util.media.uploadFile(params)).done(function (response) {\r\n                    var response = JSON.parse(decodeURIComponent(response.response));\r\n\r\n                    if (response.type === \"error\") {\r\n                        defer.reject(response);\r\n                    } else {\r\n                        defer.resolve(response);\r\n                    }\r\n                }).fail(function (error) {\r\n                    defer.reject(error);\r\n                });\r\n            } else {\r\n\r\n                if (bizagi.util.media.checkMaxSizeFile(dataFile, self.properties) &&\r\n                    bizagi.util.media.checkFileTypes(dataFile, self.properties, self.Class.EXTENSIONSIMG)) {\r\n\r\n                    self.dataService.processUploadFile({\r\n                        url: self.properties.addUrl,\r\n                        formData: self.buildAddFileParams(dataFile)\r\n                    }).done(function (response) {\r\n                        defer.resolve(response);\r\n                    }).fail(function (error) {\r\n                        defer.reject(error);\r\n                    });\r\n                } else {\r\n                    defer.reject();\r\n                }\r\n            }\r\n        } else {\r\n            // Save the image\r\n            $.when(self.saveImageOffline(dataFile))\r\n            .then( function(){\r\n                // Enables canbesent on offline mode\r\n                // In order to evaluate the xpath in synchronization phase\r\n                self.canBeSent = function () {\r\n                    return true;\r\n                };\r\n                defer.resolve();\r\n            })\r\n            .fail( function(saveOfflineError){\r\n                defer.reject();\r\n            });\r\n        }\r\n\r\n        return defer.promise();\r\n    },\r\n\r\n    /**\r\n     * File upload is done\r\n     * @param context\r\n     */\r\n    uploadFileCompleted: function () {\r\n        try {\r\n            this.showAsyncImage();\r\n            this.editedImageURL = null;\r\n        } catch (error) {\r\n            // TODO: Review scenario\r\n            this.getFormContainer().refreshForm();\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Show async image\r\n     * */\r\n    showAsyncImage: function () {\r\n        var self = this;\r\n        var $control = self.getControl();\r\n        var $wrapper = $(\".bz-input-icon\", $control);\r\n\r\n        $.when(self.renderUploadItem()).done(function (htmlImage) {\r\n            if (!self.isDisposed()) {\r\n\r\n                // Empty container and add new image\r\n                $wrapper.empty();\r\n                $wrapper.append(htmlImage);\r\n\r\n                var action = self.hasValue() ? \"update\" : \"upload\";\r\n\r\n                $wrapper.attr(\"data-action\", action);\r\n                self.setValue(self.properties.value);\r\n\r\n                // Attack events to overflow-menu\r\n                if (self.hasValue()) {\r\n                    self.configureMenu();\r\n                }\r\n            }\r\n        });\r\n    },\r\n\r\n    /**\r\n     * resolutionButtonHandler\r\n     * @param ordinal\r\n     */\r\n    resolutionButtonHandler: function (ordinal) {\r\n        var self = this;\r\n        var actionSelected = ordinal || 0;\r\n\r\n        // If original, save image normally, if not, reduce quality and size\r\n        if (actionSelected === bizagi.util.media.ResolutionType.ORIGINAL) {\r\n            return self.performUploadFile(self.dataImage);\r\n        } else {\r\n\r\n            var resolution = bizagi.util.media.getImageResolution(actionSelected);\r\n\r\n            return $.when(bizagi.util.media.transformImageSize(self.dataImage, resolution)).then(function (result) {\r\n\r\n                self.editedImageURL = result.localUrl;\r\n                self.properties.url = result.base64Image;\r\n\r\n                return self.performUploadFile(self.dataImage);\r\n            });\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Render edition view\r\n     * @returns {}\r\n     */\r\n    imagePreview: function () {\r\n        var self = this;\r\n        var baseParams = self.getParams();\r\n        var container = baseParams.navigation.createRenderContainer({\r\n            title: self.properties.displayName,\r\n            view: {\r\n                zoom: true,\r\n                useNativeScrolling: false\r\n            }\r\n        });\r\n\r\n        var template = self.renderFactory.getTemplate(\"image-preview\");\r\n        var imageData = {\"url\": self.value && self.value[0] !== \"\" ? self.value[0] : \"\"};\r\n        var img = $.fasttmpl(template, imageData);\r\n\r\n        container.element.css(\"display\", \"none\");\r\n        self.inputEdition = container.element.html(img);\r\n        baseParams.navigation.navigate(container.id);\r\n\r\n        if (self.isOfflineForm) {\r\n            container.element.on(\"close\", self.onPreviewActionBack.bind(self));\r\n        }\r\n\r\n        bizagi.loading.start();\r\n\r\n        // TODO: Review fail scenario, should it call the forms.failHandler method?\r\n        $.when(self.buildFullItemUrl()).done(function (dataUrl) {\r\n            container.element.css(\"display\", \"block\");\r\n\r\n            if (dataUrl.indexOf(\"error\") < 0) {\r\n                var $preview = $(\".bz-image__preview-item:first\", container.element).attr(\"src\", dataUrl);\r\n                var originalImageWidth = $preview.css(\"width\");\r\n\r\n                originalImageWidth = Number(originalImageWidth.substring(0, originalImageWidth.length - 2));\r\n\r\n                if (self.properties.width !== -1 && self.properties.width < originalImageWidth) {\r\n                    $preview.css(\"width\", \"100%\");\r\n                }\r\n            }\r\n        }).always(function () {\r\n            bizagi.loading.stop();\r\n        });\r\n    },\r\n\r\n    /**\r\n     * Build add params to send to the server\r\n     * @param {} dataFile\r\n     * @returns {}\r\n     */\r\n    buildAddFileParams: function (dataFile) {\r\n        var self = this;\r\n        var properties = self.properties;\r\n        var prefix = self.Class.BA_CONTEXT_PARAMETER_PREFIX;\r\n\r\n        // Get form data for POSTing\r\n        var formData = new FormData();\r\n        var form = self.getFormContainer();\r\n\r\n        // Build add params to send to the server\r\n        formData.append(prefix + \"xpath\", properties.xpath);\r\n        formData.append(prefix + \"idRender\", properties.id);\r\n        formData.append(prefix + \"xpathContext\", properties.xpathContext);\r\n        formData.append(prefix + self.Class.BA_PAGE_CACHE, properties.idPageCache);\r\n        formData.append(self.Class.BA_ACTION_PARAMETER_PREFIX + \"sessionId\", form.properties.sessionId);\r\n        formData.append(prefix + \"action\", \"savefile\");\r\n        formData.append(self.properties.xpath, dataFile);\r\n\r\n        if (properties.contexttype) {\r\n            formData.append(prefix + \"contexttype\", properties.contexttype);\r\n        }\r\n\r\n        try {\r\n            if (typeof (BIZAGI_SESSION_NAME) !== \"undefined\") {\r\n                formData.append(BIZAGI_SESSION_NAME, form.properties.sessionId);\r\n            } else {\r\n                formData.append(\"JSESSIONID\", form.properties.sessionId);\r\n            }\r\n        } catch (e) {\r\n            formData.append(\"JSESSIONID\", form.properties.sessionId);\r\n        }\r\n\r\n        return formData;\r\n    },\r\n\r\n    /**\r\n     * Call the form failhandler with an specific error\r\n     * @param {} error\r\n     * @returns {}\r\n     */\r\n    executeFormFailHandler: function (error) {\r\n        var self = this;\r\n        var errorResponse = error.responseText ? error.responseText : bizagi.localization.getResource(\"workportal-general-error\");\r\n\r\n        self.getFormContainer().failHandler(errorResponse);\r\n    },\r\n\r\n    /**\r\n     * Execute upload file\r\n     * @param {} context\r\n     * @param {} dataImage\r\n     * @returns {}\r\n     */\r\n    performUploadFile: function (dataImage) {\r\n        var self = this;\r\n\r\n        return $.when(self.uploadFile(dataImage))\r\n            .done(function (result) {\r\n                self.uploadFileCompleted();\r\n            }).fail(function (error) {\r\n                self.executeFormFailHandler(error);\r\n            });\r\n    },\r\n\r\n    /**\r\n     * Choose photo\r\n     */\r\n    choosePhoto: function () {\r\n        if (this.isNative) {\r\n            this.$nativeFile.click();\r\n        } else if (bizagi.util.media.fileAPISupported()) {\r\n            this.$inputFile.click();\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Process an action in order to do something with the image\r\n     */\r\n    configureMenu: function () {\r\n        var self = this;\r\n        var items = [];\r\n        var $control = this.getControl();\r\n        var $viewMore = $(\".bz-input-icon__input + .bz-icn\", $control);\r\n        var allowDelete = self.isOfflineForm ? false : self.properties.allowDelete && self.properties.editable;\r\n\r\n        items.push({\r\n            name: bizagi.localization.getResource(\"workportal-actionsheet-upload-image-preview\"),\r\n            fn: function () {\r\n                self.imagePreview();\r\n            }\r\n        });\r\n\r\n        items.push({\r\n            name: bizagi.localization.getResource(\"workportal-actionsheet-upload-choose-photo\"),\r\n            fn: function () {\r\n                self.choosePhoto();\r\n            }\r\n        });\r\n\r\n        if (allowDelete) {\r\n            items.push({\r\n                name: bizagi.localization.getResource(\"workportal-actionsheet-upload-remove-photo\"),\r\n                fn: function () {\r\n                    self.imageDelete();\r\n                }\r\n            });\r\n        }\r\n\r\n        $viewMore.overflowMenu({items: items});\r\n    },\r\n\r\n    /**\r\n     * Add upload options\r\n     */\r\n    getUploadChoices: function () {\r\n        return [\r\n            {\"guid\": 1, \"displayName\": bizagi.localization.getResource(\"workportal-actionsheet-upload-choose-photo\")},\r\n            {\"guid\": 2, \"displayName\": bizagi.localization.getResource(\"workportal-actionsheet-upload-take-photo\")}\r\n        ];\r\n    },\r\n\r\n    /**\r\n     * Builds the upload item url\r\n     * @param params\r\n     * @returns {*}\r\n     */\r\n    buildItemUrl: function (params) {\r\n        var self = this;\r\n        if (self.isOfflineForm) {\r\n            return self.buildItemUrlOffline(params);\r\n        }\r\n\r\n        var properties = self.properties;\r\n        var def = new $.Deferred();\r\n        var url = \"\";\r\n\r\n        if (!this.isExecutionMode()) {\r\n            url = \"\";\r\n            def.resolve(url);\r\n        } else {\r\n            var parameters = {\r\n                url: properties.dataUrl,\r\n                xpath: properties.xpath,\r\n                idRender: properties.id,\r\n                xpathContext: properties.xpathContext,\r\n                idPageCache: properties.idPageCache,\r\n                property: params && params.property ? params.property : \"fileContent\",\r\n                dataType: \"text\"\r\n            };\r\n\r\n            if (properties.contexttype) {\r\n                parameters.contexttype = properties.contexttype;\r\n            }\r\n\r\n            if (properties.isUserPreference) {\r\n                self.currentUser = bizagi.currentUser.idUser;\r\n                parameters.xpathContext = \"@Context.Users[id == \" + self.currentUser + \"]\";\r\n                parameters.contexttype = \"entity\";\r\n                parameters.surrogatekey = self.currentUser;\r\n            }\r\n\r\n            self.dataService.multiaction().getPropertyData(parameters, \"text\")\r\n                .done(function (data) {\r\n                    if (data.charAt(0) === \"\\\"\") {\r\n                        data = data.slice(1, -1);\r\n                    }\r\n\r\n                    if (data !== \"\") {\r\n                        url = \"data:image/png;base64,\" + data;\r\n                    }\r\n\r\n                    def.resolve(url);\r\n                }).fail(function (error) {\r\n                def.reject(error);\r\n            });\r\n        }\r\n\r\n        return def.promise();\r\n    },\r\n\r\n    /**\r\n     * Refresh data\r\n     * @param {} event\r\n     */\r\n    onPreviewActionBack: function (event) {\r\n        var self = this;\r\n        var dataUrl = $(\".bz-image__preview-item\", event.target).attr(\"src\") || \"\";\r\n\r\n        var dataUrlToSave = dataUrl.length > 0 ? [].concat(dataUrl) : null;\r\n        self.setValue(dataUrlToSave);\r\n    },\r\n\r\n    collectData: function (renderValues) {\r\n        var self = this;\r\n        if(self.isOfflineForm && bizagi.util.isOfflineFormsV2Supported()){\r\n            var imageId = self.properties.offlineImageId;\r\n            var originalImageId = self.properties.originalOfflineImageId;\r\n            if(imageId === originalImageId){\r\n                return;\r\n            }\r\n            var xpath = self.properties.xpath;\r\n            var imageId = self.properties.offlineImageId;\r\n            if (!bizagi.util.isEmpty(xpath)){\r\n                if(!bizagi.util.isEmpty(imageId)){\r\n                    renderValues[xpath] = imageId;\r\n                }\r\n                else {\r\n                    delete renderValues[xpath];\r\n                }\r\n            }\r\n        }\r\n        else{\r\n            $._super(renderValues);\r\n        }\r\n    }\r\n\r\n});\r\n\r\n","/**\r\n *   Name: Bizagi Render Image Class\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will redefine the image render class to adjust to tablet devices\r\n */\r\n\r\n// Extends from render tablet base\r\nbizagi.rendering.tablet.render.extend(\"bizagi.rendering.tablet.image.old\", {\r\n    // Statics\r\n    BA_ACTION_PARAMETER_PREFIX: bizagi.render.services.service.BA_ACTION_PARAMETER_PREFIX,\r\n    BA_CONTEXT_PARAMETER_PREFIX: bizagi.render.services.service.BA_CONTEXT_PARAMETER_PREFIX,\r\n    BA_PAGE_CACHE: bizagi.render.services.service.BA_PAGE_CACHE\r\n}, bizagi.rendering.image.prototype);\r\n\r\n// Extends itself\r\nbizagi.rendering.tablet.image.extend(\"bizagi.rendering.tablet.image.old\", {\r\n    QUALITY_PICTURE: 80,\r\n    EXTENSIONSIMG: [\"jpeg\", \"jpg\", \"png\"]\r\n}, {\r\n\r\n    /**\r\n     * DOM input to handle HTML uploads\r\n     * @var $inputFile jQuery DOM\r\n     */\r\n    $inputFile: null,\r\n    /**\r\n     * Whether or not is a native device 'Just a shortcut\r\n     * @var isNative boolean\r\n     */\r\n    isNative: false,\r\n\r\n    /**\r\n     * Whether or not we are offline 'Just a shortcut\r\n     * @var isOfflineForm boolean\r\n     */\r\n    isOfflineForm: false,\r\n\r\n    /**\r\n     * Update or init the element data\r\n     * @param {} data\r\n     */\r\n    initializeData: function (data) {\r\n        // Call base\r\n        this._super(data);\r\n\r\n        // Check if offline forms is supported\r\n        this.isOfflineForm = bizagi.util.isOfflineForm({context: this});\r\n        this.isNative = bizagi.util.isCordovaSupported();\r\n\r\n        if (this.isOfflineForm) {\r\n            var maxFileSizeOfProperty = Number(this.properties.maxSize) || 1048576;\r\n            var maxFileSizeOfUser = typeof (BIZAGI_SETTINGS) !== \"undefined\" && typeof (BIZAGI_SETTINGS.UploadMaxFileSize) !== \"undefined\" ? Number(BIZAGI_SETTINGS.UploadMaxFileSize) : 1048576;\r\n\r\n            this.properties.maxSize = maxFileSizeOfProperty < maxFileSizeOfUser ? maxFileSizeOfProperty : maxFileSizeOfUser;\r\n        }\r\n    },\r\n\r\n    /**\r\n     * This method tries to get the HTML template an render the current object inside\r\n     * @return {jQuery} $.Deferred()\r\n     */\r\n    renderControl: function () {\r\n        var template = this.renderFactory.getTemplate(\"image\");\r\n\r\n        return $.fasttmpl(template, {url: \"\"});\r\n    },\r\n\r\n    getElementsToStylize: function (context) {\r\n        return $({});\r\n    },\r\n\r\n    /**\r\n     * There is no difference when rendering a readonly image, so...\r\n     * @return {jQuery} $.Deferred()\r\n     */\r\n    renderReadOnly: function () {\r\n        var self = this;\r\n        var template = this.renderFactory.getTemplate(\"image-readonly\");\r\n        var def = new $.Deferred();\r\n\r\n        $.when(self.buildItemUrl()).done(function (dataUrl) {\r\n            var url = dataUrl || \"\";\r\n\r\n            if (!self.isDisposed()) {\r\n                self.properties.url = url;\r\n                self.properties.value = url.length > 0 ? [url] : null;\r\n\r\n                self.setValue(self.properties.value);\r\n\r\n                var html = $.fasttmpl(template, {url: self.properties.url});\r\n                def.resolve(html);\r\n            }\r\n        });\r\n\r\n        return def.promise();\r\n    },\r\n\r\n    /**\r\n     * After rendering element\r\n     */\r\n    postRender: function () {\r\n        var $control = this.getControl();\r\n        this.$inputFile = $(\".bz-image__input\", $control);\r\n        this.$nativeFile = $(\".bz-image__native\", $control);\r\n\r\n        if (!this.isDesignMode())\r\n            this.showAsyncImage();\r\n    },\r\n    /**\r\n     * Add action handlers\r\n     */\r\n    configureHandlers: function () {\r\n        var self = this;\r\n        var $control = this.getControl();\r\n\r\n        // Attach all events\r\n        $control.on(\"click\", \"[data-action=upload]\", function (evt) {\r\n            self.choosePhoto();\r\n        });\r\n\r\n        if (this.isNative) {\r\n            // Upload Image Options\r\n            this.$nativeFile.off(\"click\").actionSheet({\r\n                actions: self.getUploadChoices(),\r\n                actionClicked: function (action) {\r\n                    switch (action.guid) {\r\n                        case 1:\r\n                            self.imageAdd();\r\n                            break;\r\n                        case 2:\r\n                            self.imageAdd(true);\r\n                            break;\r\n                        default:\r\n                    }\r\n                },\r\n                appear: function (action) {\r\n                    self.triggerGlobalHandler(\"closeModalValidationMessage\", {});\r\n                    self.triggerGlobalHandler(\"modalViewDidAppear\", {});\r\n                },\r\n                cancelClicked: function (action) {\r\n                    self.triggerGlobalHandler(\"modalViewDidDisappear\", {});\r\n                }\r\n            });\r\n\r\n            $(\".bz-image__resolution\", $control).off(\"click\").actionSheet({\r\n                actions: bizagi.util.media.getImageResolutionSizes(),\r\n                withoutCancel: true,\r\n                actionClicked: function (action) {\r\n                    bizagi.loading.start();\r\n\r\n                    $.when(self.resolutionButtonHandler(action.guid))\r\n                        .always(function () {\r\n                            bizagi.loading.stop();\r\n                        });\r\n\r\n                },\r\n                appear: function (action) {\r\n                    self.triggerGlobalHandler(\"closeModalValidationMessage\", {});\r\n                    self.triggerGlobalHandler(\"modalViewDidAppear\", {});\r\n                },\r\n                cancelClicked: function (action) {\r\n                    self.triggerGlobalHandler(\"modalViewDidDisappear\", {});\r\n                }\r\n            });\r\n        } else {\r\n\r\n            // Image change (Hybrid only)\r\n            this.$inputFile.off(\"change\").on(\"change\", function () {\r\n                self.imageAdd();\r\n                this.value = \"\";\r\n            });\r\n\r\n            // Just in case\r\n            this.$inputFile.off(\"click\").on(\"click\", function (evt) {\r\n                evt.stopPropagation();\r\n            });\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Template method to implement in each device to customize the render's behaviour\r\n     * to add handlers when the control is readonly\r\n     */\r\n    configureHandlersReadOnly: function () {\r\n        var self = this;\r\n        var $control = this.getControl();\r\n\r\n        $control.on(\"click\", \".bz-image\", function () {\r\n            self.imagePreview();\r\n        })\r\n    },\r\n\r\n    /**\r\n     * Add an image\r\n     * @param useCamera boolean Whether or not to use device's camera\r\n     */\r\n    imageAdd: function (useCamera) {\r\n        var self = this;\r\n\r\n        if (!this.isNative) {\r\n            var extensions = this.Class.EXTENSIONSIMG;\r\n            var dataFile = this.$inputFile[0].files[0];\r\n\r\n            dataFile.fullPath = this.$inputFile[0].value;\r\n\r\n            bizagi.loading.start();\r\n\r\n            if (bizagi.util.media.checkMaxSizeFile(dataFile, self.properties) && bizagi.util.media.checkFileTypes(dataFile, self.properties, extensions)) {\r\n\r\n                $.when(self.performUploadFile(dataFile))\r\n                    .always(function () {\r\n                        bizagi.loading.stop();\r\n                    });\r\n\r\n            } else {\r\n                bizagi.loading.stop();\r\n            }\r\n        } else {\r\n\r\n            var options = {\r\n                quality: self.Class.QUALITY_PICTURE,\r\n                targetWidth: 1280,\r\n                targetHeight: 960,\r\n                correctOrientation: true\r\n            };\r\n\r\n            if (!useCamera) {\r\n                var coordinates = self.getControl()[0].getBoundingClientRect();\r\n\r\n                options = {\r\n                    quality: self.Class.QUALITY_PICTURE,\r\n                    sourceType: Camera.PictureSourceType.PHOTOLIBRARY,\r\n                    popoverOptions: new CameraPopoverOptions(coordinates.left, coordinates.top - 20, 200, 100, 4),\r\n                    destinationType: navigator.camera.DestinationType.FILE_URI,\r\n                    correctOrientation: true\r\n                };\r\n            }\r\n\r\n            navigator.camera.getPicture(function (dataImage) {\r\n\r\n                bizagi.loading.start();\r\n\r\n                $.when(bizagi.util.media.checkMaxSize(dataImage, self.properties)).then(function () {\r\n                    return $.when(bizagi.util.media.getFileDataInfo(dataImage)).then(function (fileData) {\r\n                        if (bizagi.util.media.checkFileTypes(fileData, self.properties, self.Class.EXTENSIONSIMG)) {\r\n\r\n                            self.dataImage = dataImage;\r\n                            self.fileProperties = fileData;\r\n\r\n                            // \"new Blob\" constructor is not supported in android version 4.2.2\r\n                            var version = bizagi.util.getAndroidVersion();\r\n                            if ((version && version <= 4.2) || self.isOfflineForm) {\r\n\r\n                                return $.when(self.performUploadFile(self.dataImage))\r\n                                    .always(function () {\r\n                                        bizagi.loading.stop();\r\n                                    });\r\n\r\n                            } else {\r\n\r\n                                if (!bizagi.util.isAndroid()) {\r\n                                    return $.when(bizagi.util.media.modalResolutionUpload())\r\n                                        .then(function (buttonIndex) {\r\n                                            if (buttonIndex <= bizagi.util.media.getImageResolutionItems().length) {\r\n                                                return self.resolutionButtonHandler(buttonIndex);\r\n                                            }\r\n                                        });\r\n\r\n                                } else {\r\n                                    // Force click to show actionsheet menu\r\n                                    $(\".bz-image__resolution\", self.getControl()).click();\r\n                                }\r\n                            }\r\n                        }\r\n                    });\r\n\r\n                }).always(function () {\r\n                    bizagi.loading.stop();\r\n                });\r\n            }, self.onFail, options);\r\n        }\r\n    },\r\n\r\n    /**\r\n     * onFail\r\n     * @param {} error\r\n     * @returns {}\r\n     */\r\n    onFail: function (error) {\r\n        bizagi.loading.stop();\r\n    },\r\n\r\n    /**\r\n     * Remove the current image\r\n     */\r\n    imageDelete: function () {\r\n        var self = this;\r\n\r\n        bizagi.showConfirmationBox(self.getResource(\"render-grid-delete-confirmation\"))\r\n            .done(function () {\r\n                bizagi.loading.start();\r\n\r\n                $.when(self.dataService.deleteImage({\r\n                    url: self.properties.deleteUrl,\r\n                    idRender: self.properties.id,\r\n                    xpath: self.properties.xpath,\r\n                    xpathContext: self.properties.xpathContext,\r\n                    idPageCache: self.properties.idPageCache,\r\n                    contexttype: self.properties.contexttype\r\n                })).done(function () {\r\n                    self.uploadFileCompleted();\r\n                }).fail(function (msg) {\r\n                    var message;\r\n                    var responseText = msg.responseText;\r\n\r\n                    try {\r\n                        message = JSON.parse(responseText);\r\n                        message = message.message || responseText;\r\n                    } catch (e) {\r\n                        message = responseText;\r\n                    }\r\n\r\n                    self.setValidationMessage(message);\r\n\r\n                }).always(function () {\r\n                    bizagi.loading.stop();\r\n                });\r\n            });\r\n    },\r\n\r\n    /**\r\n     * Send file using HTTP\r\n     * @param dataFile\r\n     * @return {jQuery} $.Deferred()\r\n     */\r\n    uploadFile: function (dataFile) {\r\n        var self = this;\r\n        var defer = new $.Deferred();\r\n\r\n        if (!this.isOfflineForm) {\r\n            if (this.isNative) {\r\n\r\n                var params = {};\r\n                var addParams = self.buildAddParams();\r\n                var fileName = self.fileProperties.name;\r\n\r\n                if (self.editedImageURL) {\r\n                    params.dataFile = self.editedImageURL;\r\n                } else if (self.fileProperties) {\r\n                    params.dataFile = self.fileProperties.url;\r\n                }\r\n\r\n                addParams.queueID = \"q_\" + bizagi.util.encodeXpath(self.getUploadXpath());\r\n\r\n                params.data = addParams;\r\n                params.options = new FileUploadOptions();\r\n                params.options.fileKey = \"file\";\r\n                params.options.fileName = fileName;\r\n                params.options.mimeType = \"image/jpeg\";\r\n                params.options.uploadKey = {key: addParams[\"h_xpath\"]};\r\n                params.options.addUrl = self.properties.addUrl;\r\n\r\n                //Cleans variables related previous uploads\r\n                self.editedImageURL = null;\r\n                self.fileProperties = null;\r\n\r\n                // Fix android 4.4 getting images from recent folder\r\n                params.dataFile = bizagi.util.media.getImagePath(params.dataFile);\r\n\r\n                $.when(bizagi.util.media.uploadFile(params)).done(function (response) {\r\n                    var response = JSON.parse(decodeURIComponent(response.response));\r\n\r\n                    if (response.type === \"error\") {\r\n                        defer.reject(response);\r\n                    } else {\r\n                        defer.resolve(response);\r\n                    }\r\n                }).fail(function (error) {\r\n                    defer.reject(error);\r\n                });\r\n            } else {\r\n\r\n                if (bizagi.util.media.checkMaxSizeFile(dataFile, self.properties) &&\r\n                    bizagi.util.media.checkFileTypes(dataFile, self.properties, self.Class.EXTENSIONSIMG)) {\r\n\r\n                    self.dataService.processUploadFile({\r\n                        url: self.properties.addUrl,\r\n                        formData: self.buildAddFileParams(dataFile)\r\n                    }).done(function (response) {\r\n                        defer.resolve(response);\r\n                    }).fail(function (error) {\r\n                        defer.reject(error);\r\n                    });\r\n                } else {\r\n                    defer.reject();\r\n                }\r\n            }\r\n        } else {\r\n            // Load image\r\n            self.saveImageOffline(dataFile, function (dataUrl) {\r\n                var dataUrltoSave = dataUrl.replace(/^data:.*;base64,/, \"\");\r\n\r\n                self.setValue(dataUrltoSave);\r\n                defer.resolve();\r\n            });\r\n\r\n            // Enables canbesent on offline mode\r\n            self.canBeSent = function () {\r\n                $.forceCollectData = true;\r\n                return true;\r\n            };\r\n        }\r\n\r\n        return defer.promise();\r\n    },\r\n\r\n    /**\r\n     * File upload is done\r\n     * @param context\r\n     */\r\n    uploadFileCompleted: function () {\r\n        try {\r\n            this.showAsyncImage();\r\n            this.editedImageURL = null;\r\n        } catch (error) {\r\n            // TODO: Review scenario\r\n            this.getFormContainer().refreshForm();\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Show async image\r\n     * */\r\n    showAsyncImage: function () {\r\n        var self = this;\r\n        var $control = self.getControl();\r\n        var $wrapper = $(\".bz-input-icon\", $control);\r\n\r\n        $.when(self.renderUploadItem()).done(function (htmlImage) {\r\n            if (!self.isDisposed()) {\r\n\r\n                // Empty container and add new image\r\n                $wrapper.empty();\r\n                $wrapper.append(htmlImage);\r\n\r\n                var action = self.hasValue() ? \"update\" : \"upload\";\r\n\r\n                $wrapper.attr(\"data-action\", action);\r\n                self.setValue(self.properties.value);\r\n\r\n                // Attack events to overflow-menu\r\n                if (self.hasValue()) {\r\n                    self.configureMenu();\r\n                }\r\n            }\r\n        });\r\n    },\r\n\r\n    /**\r\n     * resolutionButtonHandler\r\n     * @param ordinal\r\n     */\r\n    resolutionButtonHandler: function (ordinal) {\r\n        var self = this;\r\n        var actionSelected = ordinal || 0;\r\n\r\n        // If original, save image normally, if not, reduce quality and size\r\n        if (actionSelected === bizagi.util.media.ResolutionType.ORIGINAL) {\r\n            return self.performUploadFile(self.dataImage);\r\n        } else {\r\n\r\n            var resolution = bizagi.util.media.getImageResolution(actionSelected);\r\n\r\n            return $.when(bizagi.util.media.transformImageSize(self.dataImage, resolution)).then(function (result) {\r\n\r\n                self.editedImageURL = result.localUrl;\r\n                self.properties.url = result.base64Image;\r\n\r\n                return self.performUploadFile(self.dataImage);\r\n            });\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Render edition view\r\n     * @returns {}\r\n     */\r\n    imagePreview: function () {\r\n        var self = this;\r\n        var baseParams = self.getParams();\r\n        var container = baseParams.navigation.createRenderContainer({\r\n            title: self.properties.displayName,\r\n            view: {\r\n                zoom: true,\r\n                useNativeScrolling: false\r\n            }\r\n        });\r\n\r\n        var template = self.renderFactory.getTemplate(\"image-preview\");\r\n        var imageData = {\"url\": self.value && self.value[0] !== \"\" ? self.value[0] : \"\"};\r\n        var img = $.fasttmpl(template, imageData);\r\n\r\n        container.element.css(\"display\", \"none\");\r\n        self.inputEdition = container.element.html(img);\r\n        baseParams.navigation.navigate(container.id);\r\n\r\n        if (self.isOfflineForm) {\r\n            container.element.on(\"close\", self.onPreviewActionBack.bind(self));\r\n        }\r\n\r\n        bizagi.loading.start();\r\n\r\n        // TODO: Review fail scenario, should it call the forms.failHandler method?\r\n        $.when(self.buildFullItemUrl()).done(function (dataUrl) {\r\n            container.element.css(\"display\", \"block\");\r\n\r\n            if (dataUrl.indexOf(\"error\") < 0) {\r\n                var $preview = $(\".bz-image__preview-item:first\", container.element).attr(\"src\", dataUrl);\r\n                var originalImageWidth = $preview.css(\"width\");\r\n\r\n                originalImageWidth = Number(originalImageWidth.substring(0, originalImageWidth.length - 2));\r\n\r\n                if (self.properties.width !== -1 && self.properties.width < originalImageWidth) {\r\n                    $preview.css(\"width\", \"100%\");\r\n                }\r\n            }\r\n        }).always(function () {\r\n            bizagi.loading.stop();\r\n        });\r\n    },\r\n\r\n    /**\r\n     * Build add params to send to the server\r\n     * @param {} dataFile\r\n     * @returns {}\r\n     */\r\n    buildAddFileParams: function (dataFile) {\r\n        var self = this;\r\n        var properties = self.properties;\r\n        var prefix = self.Class.BA_CONTEXT_PARAMETER_PREFIX;\r\n\r\n        // Get form data for POSTing\r\n        var formData = new FormData();\r\n        var form = self.getFormContainer();\r\n\r\n        // Build add params to send to the server\r\n        formData.append(prefix + \"xpath\", properties.xpath);\r\n        formData.append(prefix + \"idRender\", properties.id);\r\n        formData.append(prefix + \"xpathContext\", properties.xpathContext);\r\n        formData.append(prefix + self.Class.BA_PAGE_CACHE, properties.idPageCache);\r\n        formData.append(self.Class.BA_ACTION_PARAMETER_PREFIX + \"sessionId\", form.properties.sessionId);\r\n        formData.append(prefix + \"action\", \"savefile\");\r\n        formData.append(self.properties.xpath, dataFile);\r\n\r\n        if (properties.contexttype) {\r\n            formData.append(prefix + \"contexttype\", properties.contexttype);\r\n        }\r\n\r\n        try {\r\n            if (typeof (BIZAGI_SESSION_NAME) !== \"undefined\") {\r\n                formData.append(BIZAGI_SESSION_NAME, form.properties.sessionId);\r\n            } else {\r\n                formData.append(\"JSESSIONID\", form.properties.sessionId);\r\n            }\r\n        } catch (e) {\r\n            formData.append(\"JSESSIONID\", form.properties.sessionId);\r\n        }\r\n\r\n        return formData;\r\n    },\r\n\r\n    /**\r\n     * Call the form failhandler with an specific error\r\n     * @param {} error\r\n     * @returns {}\r\n     */\r\n    executeFormFailHandler: function (error) {\r\n        var self = this;\r\n        var errorResponse = error.responseText ? error.responseText : bizagi.localization.getResource(\"workportal-general-error\");\r\n\r\n        self.getFormContainer().failHandler(errorResponse);\r\n    },\r\n\r\n    /**\r\n     * Execute upload file\r\n     * @param {} context\r\n     * @param {} dataImage\r\n     * @returns {}\r\n     */\r\n    performUploadFile: function (dataImage) {\r\n        var self = this;\r\n\r\n        return $.when(self.uploadFile(dataImage))\r\n            .done(function (result) {\r\n                self.uploadFileCompleted();\r\n            }).fail(function (error) {\r\n                self.executeFormFailHandler(error);\r\n            });\r\n    },\r\n\r\n    /**\r\n     * Choose photo\r\n     */\r\n    choosePhoto: function () {\r\n        if (this.isNative) {\r\n            this.$nativeFile.click();\r\n        } else if (bizagi.util.media.fileAPISupported() && !self.isOfflineForm) {\r\n            this.$inputFile.click();\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Process an action in order to do something with the image\r\n     */\r\n    configureMenu: function () {\r\n        var self = this;\r\n        var items = [];\r\n        var $control = this.getControl();\r\n        var $viewMore = $(\".bz-input-icon__input + .bz-icn\", $control);\r\n        var allowDelete = self.isOfflineForm ? false : self.properties.allowDelete && self.properties.editable;\r\n\r\n        items.push({\r\n            name: bizagi.localization.getResource(\"workportal-actionsheet-upload-image-preview\"),\r\n            fn: function () {\r\n                self.imagePreview();\r\n            }\r\n        });\r\n\r\n        items.push({\r\n            name: bizagi.localization.getResource(\"workportal-actionsheet-upload-choose-photo\"),\r\n            fn: function () {\r\n                self.choosePhoto();\r\n            }\r\n        });\r\n\r\n        if (allowDelete) {\r\n            items.push({\r\n                name: bizagi.localization.getResource(\"workportal-actionsheet-upload-remove-photo\"),\r\n                fn: function () {\r\n                    self.imageDelete();\r\n                }\r\n            });\r\n        }\r\n\r\n        $viewMore.overflowMenu({items: items});\r\n    },\r\n\r\n    /**\r\n     * Add upload options\r\n     */\r\n    getUploadChoices: function () {\r\n        return [\r\n            {\"guid\": 1, \"displayName\": bizagi.localization.getResource(\"workportal-actionsheet-upload-choose-photo\")},\r\n            {\"guid\": 2, \"displayName\": bizagi.localization.getResource(\"workportal-actionsheet-upload-take-photo\")}\r\n        ];\r\n    },\r\n\r\n    /**\r\n     * Builds the upload item url\r\n     * @param params\r\n     * @returns {*}\r\n     */\r\n    buildItemUrl: function (params) {\r\n        var self = this;\r\n        var properties = self.properties;\r\n        var def = new $.Deferred();\r\n        var url = \"\";\r\n\r\n        if (!this.isExecutionMode()) {\r\n            url = \"\";\r\n            def.resolve(url);\r\n        } else {\r\n            var parameters = {\r\n                url: properties.dataUrl,\r\n                xpath: properties.xpath,\r\n                idRender: properties.id,\r\n                xpathContext: properties.xpathContext,\r\n                idPageCache: properties.idPageCache,\r\n                property: params && params.property ? params.property : \"fileContent\",\r\n                dataType: \"text\"\r\n            };\r\n\r\n            if (properties.contexttype) {\r\n                parameters.contexttype = properties.contexttype;\r\n            }\r\n\r\n            if (properties.isUserPreference) {\r\n                self.currentUser = bizagi.currentUser.idUser;\r\n                parameters.xpathContext = \"@Context.Users[id == \" + self.currentUser + \"]\";\r\n                parameters.contexttype = \"entity\";\r\n                parameters.surrogatekey = self.currentUser;\r\n            }\r\n\r\n            if (this.isOfflineForm) {\r\n                def.resolve(bizagi.util.getDataUrl(properties));\r\n            } else {\r\n                self.dataService.multiaction().getPropertyData(parameters, \"text\")\r\n                    .done(function (data) {\r\n                        if (data.charAt(0) === \"\\\"\") {\r\n                            data = data.slice(1, -1);\r\n                        }\r\n\r\n                        if (data !== \"\") {\r\n                            url = \"data:image/png;base64,\" + data;\r\n                        }\r\n\r\n                        def.resolve(url);\r\n                    });\r\n            }\r\n        }\r\n\r\n        return def.promise();\r\n    },\r\n\r\n    /**\r\n     * Create an image offline\r\n     * @param context\r\n     * @param url\r\n     * @param callback\r\n     */\r\n    saveImageOffline: function (path, callback) {\r\n        var self = this;\r\n\r\n        // Fix android 4.4 getting images from recent folder\r\n        var dataImage = bizagi.util.media.getImagePath(path);\r\n        var xhr = new XMLHttpRequest();\r\n\r\n        try {\r\n\r\n            xhr.onload = function () {\r\n                var reader = new FileReader();\r\n\r\n                reader.onloadend = function () {\r\n                    var content = reader.result;\r\n                    callback(content);\r\n                }\r\n                reader.readAsDataURL(xhr.response);\r\n            };\r\n\r\n            xhr.open(\"GET\", dataImage);\r\n            xhr.responseType = \"blob\";\r\n            xhr.send();\r\n\r\n        } catch (error) {\r\n            callback(\"\");\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Refresh data\r\n     * @param {} event\r\n     */\r\n    onPreviewActionBack: function (event) {\r\n        var self = this;\r\n        var dataUrl = $(\".bz-image__preview-item\", event.target).attr(\"src\") || \"\";\r\n\r\n        var dataUrlToSave = dataUrl.length > 0 ? [].concat(dataUrl) : null;\r\n        self.setValue(dataUrlToSave);\r\n    },\r\n\r\n});\r\n\r\n","/**\r\n *   Name: Bizagi Tablet Render Document Generator Extension\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will redefine the document generator render class to adjust to tablet devices\r\n */\r\n\r\n// Extends from render tablet base\r\nbizagi.rendering.tablet.render.extend(\"bizagi.rendering.tablet.document\", bizagi.rendering.document.prototype);\r\n// Extends itself\r\nbizagi.rendering.tablet.document.extend(\"bizagi.rendering.tablet.document\", {\r\n    ACTION_SHOW: \"show\",\r\n    ACTION_DOWNLOAD: \"download\",\r\n    ACTION_DELETE: \"delete\"\r\n}, {\r\n\r\n    /**\r\n     * This method tries to get the HTML template an render the current object inside\r\n     * @return {jQuery} $.Deferred()\r\n     */\r\n    renderControl: function () {\r\n        var self = this;\r\n        var template = this.renderFactory.getTemplate(self.getTemplate());\r\n        var documents = this.properties.value || [];\r\n\r\n        var data = {\r\n            downloadalldocuments: this.properties.downloadalldocuments,\r\n            allowgenerate: this.properties.allowGenerate,\r\n            noFiles: documents ? (documents.length === 0) : true,\r\n            append: this.properties.append,\r\n            caption: this.properties.caption\r\n        };\r\n\r\n        // Render template\r\n        var html = $.fasttmpl(template, data);\r\n\r\n        // Render current children\r\n        var items = this.renderDocumentsHtml(documents);\r\n        html = this.replaceFilesHtml(html, items);\r\n\r\n        // Render current children\r\n        var actions = this.renderActionsHtml(documents, data.noFiles, data.downloadalldocuments);\r\n        html = this.replaceActionsHtml(html, actions);\r\n\r\n        return html;\r\n    },\r\n\r\n    /**\r\n     * Method to customize each render after processed\r\n     */\r\n    postRender: function () {\r\n        var $control = this.getControl();\r\n\r\n        this.$inputDocument = $(\".bz-document-template__container\", $control);\r\n        this.$listDocuments = $(\"[data-component=files]\", $control);\r\n        this.$listActions = $(\"[data-component=actions]\", $control);\r\n\r\n        this._super();\r\n    },\r\n\r\n    /**\r\n     * Method to render non editable values\r\n     * @returns {*|jQuery}\r\n     */\r\n    renderReadOnly: function () {\r\n        var self = this;\r\n        var template = this.renderFactory.getTemplate(self.getTemplateReadonly());\r\n        var documents = this.properties.value || [];\r\n        var noFiles = documents ? (documents.length === 0) : true;\r\n\r\n        // Render template\r\n        var html = $.fasttmpl(template, {noFiles: noFiles});\r\n\r\n        // Render current children\r\n        var items = this.renderDocumentsHtml(documents);\r\n        html = this.replaceFilesHtml(html, items);\r\n\r\n        return html;\r\n    },\r\n\r\n    /**\r\n     * Method to customize each render after processed in read-only mode\r\n     */\r\n    postRenderReadOnly: function () {\r\n        var $control = this.getControl();\r\n\r\n        this.$listDocuments = $(\"[data-component=files]\", $control);\r\n    },\r\n\r\n    /**\r\n     * TMethod to customize the render's behaviour to add handlers\r\n     */\r\n    configureHandlers: function () {\r\n        var self = this;\r\n\r\n        // Attach handler\r\n        this.$inputDocument.on(\"click\", function (evt) {\r\n            self.properties.buttonExecuted = true;\r\n\r\n            if (self.properties.validate) {\r\n                // Check if the form is valid, then generate\r\n                if (self.validateContainer()) self.documentTemplateGenerate();\r\n            } else {\r\n                // Just generate the form\r\n                self.documentTemplateGenerate();\r\n            }\r\n\r\n            self.properties.buttonExecuted = false;\r\n        });\r\n\r\n        // Configure delete and preview handler\r\n        this.$listDocuments.on(\"click\", \"[data-action]\", function (evt) {\r\n            var $context = $(this);\r\n\r\n            var item = $context.parent(\".bz-document\");\r\n            var documentFile = item.data();\r\n            var action = $context.data(\"action\");\r\n\r\n            self.processAction(action, documentFile);\r\n        });\r\n\r\n        // Configure delete and download handler\r\n        self.$listActions.on(\"click\", \"[data-action]\", function (evt) {\r\n            var $context = $(this);\r\n\r\n            var item = $context.parent(\".bz-document__download\");\r\n            var documentFile = item.data();\r\n            var action = $context.data(\"action\");\r\n\r\n            self.processAction(action, documentFile);\r\n        });\r\n    },\r\n\r\n    /**\r\n     * Method to customize the render's behaviour to add handlers when the control is readonly\r\n     */\r\n    configureHandlersReadOnly: function () {\r\n        var self = this;\r\n\r\n        // Configure delete and preview handler\r\n        this.$listDocuments.on(\"click\", \"[data-action]\", function (evt) {\r\n            var $context = $(this);\r\n\r\n            var item = $context.parent(\".bz-document\");\r\n            var documentFile = item.data();\r\n            var action = $context.data(\"action\");\r\n\r\n            self.processAction(action, documentFile);\r\n        });\r\n    },\r\n    \r\n    /**\r\n     * This method must be implemented by the specific class of each device. (Virtual method)\r\n     * @param file\r\n     * @returns {*|*|*}\r\n     */\r\n    renderAllDocumentDownload: function (file) {\r\n        var self = this;\r\n        var template = self.renderFactory.getTemplate(self.getTemplateDownload());\r\n        var url = self.buildAllDocumentsUrl();\r\n\r\n        // Don't render urls when not running in execution mode\r\n        if (!this.isExecutionMode()) url = \"javascript:void(0);\";\r\n\r\n        var html = $.fasttmpl(template, {\r\n            url: url,\r\n            filename: file.fileName,\r\n            joined: true\r\n        });\r\n\r\n        return html;\r\n    },\r\n\r\n    /**\r\n     * Redraw documents when needed\r\n     * @param documents\r\n     * @param noFiles\r\n     * @param downloadAllDocuments\r\n     */\r\n    redrawDocuments: function (documents, noFiles, downloadAllDocuments) {\r\n        var self = this;\r\n        var $control = self.getControl();\r\n        var $documentContainer = $(\"[data-component='files']\", $control);\r\n        var $actionContainer = $(\"[data-component='actions']\", $control);\r\n\r\n        // Clear current links\r\n        $documentContainer.empty();\r\n        $actionContainer.empty();\r\n\r\n        // Draw links again\r\n        var items = this.renderDocumentsHtml(documents);\r\n        $documentContainer.append(items);\r\n\r\n        // Check if there are documents and the flag to download all are available to show the link.\r\n        var actions = this.renderActionsHtml(documents, noFiles, downloadAllDocuments);\r\n        $actionContainer.append(actions);\r\n\r\n        //Set value\r\n        self.setValue(documents);\r\n    },\r\n\r\n    /**\r\n     * Method to customize each render after processed (Virtual method)\r\n     * @param url\r\n     * @param filename\r\n     */\r\n    showDocumentPreview: function (url, filename) {\r\n        bizagi.loading.start();\r\n\r\n        $.when(bizagi.util.media.downloadFile(url, filename))\r\n            .fail(function (error) {\r\n                if (error.responseText) {\r\n                    self.getFormContainer().failHandler(error.responseText);\r\n                }\r\n            }).always(function () {\r\n            bizagi.loading.stop();\r\n        });\r\n    },\r\n\r\n    /**\r\n     * Process request of DocumentTemplateGenerate action\r\n     * @param documents\r\n     * @param noFiles\r\n     * @param downloadAllDocuments\r\n     */\r\n    resolveDocumentTemplateGenerate: function (documents, noFiles, downloadAllDocuments) {\r\n        // Redraw documents\r\n        this.redrawDocuments(documents, noFiles, downloadAllDocuments);\r\n        this.value = documents;\r\n    },\r\n\r\n    /**\r\n     * Process request of DocumentTemplateGenerate action\r\n     * @param documents\r\n     * @param noFiles\r\n     * @param downloadAllDocuments\r\n     */\r\n    resolveDeleteDocumentTemplate: function (documents, noFiles, downloadAllDocuments) {\r\n        // Redraw documents\r\n        this.redrawDocuments(documents, noFiles, downloadAllDocuments);\r\n        this.value = documents;\r\n    },\r\n\r\n    processAction: function (action, documentFile) {\r\n        if (action === this.Class.ACTION_DELETE) {\r\n            this.deleteDocumentTemplate(documentFile.filename);\r\n        } else if (action === this.Class.ACTION_SHOW) {\r\n            this.showDocumentPreview(documentFile.url, documentFile.filename);\r\n        } else if (action === this.Class.ACTION_DOWNLOAD) {\r\n            this.showDocumentPreview(documentFile.url, documentFile.filename);\r\n        }\r\n    }\r\n});\r\n","/*\r\n*   Name: Bizagi Render Geolocation control\r\n*   Author: UI Forms Team\r\n*   Comments:\r\n*   -   This script will redefine the geolocation render class to adjust to tablet devices\r\n*/\r\n\r\n// Extends from render tablet base\r\nbizagi.rendering.tablet.render.extend(\"bizagi.rendering.tablet.geolocation\", bizagi.rendering.geolocation.prototype);\r\n// Extends itself\r\nbizagi.rendering.tablet.geolocation.extend(\"bizagi.rendering.tablet.geolocation\", {\r\n    ALLOW_UPDATE: \"update\"\r\n}, {\r\n\r\n\r\n    /**\r\n     * Template method to implement in each device to customize each render after processed\r\n     */\r\n    postRender: function () {\r\n        var $control = this.getControl();\r\n        this.coordinate = $control.find(\"input\");\r\n\r\n        // Call base\r\n        this._super();\r\n    },\r\n\r\n    /**\r\n     * Method to render non editable values\r\n     * @returns {*|jQuery}\r\n     */\r\n    renderReadOnly: function () {\r\n        var template = this.renderFactory.getTemplate(\"readonly\");\r\n\r\n        return $.fasttmpl(template, {value: this.getDisplayValue()});\r\n    },\r\n\r\n    /**\r\n     * Method to customize each render after processed in read-only mode\r\n     */\r\n    postRenderReadOnly: function () {\r\n        var $control = this.getControl();\r\n        this.coordinate = $control.find(\"input\");\r\n\r\n        // Call base\r\n        this._super();\r\n    },\r\n\r\n    /**\r\n     * Template method to implement in each device to customize the render's behaviour to add handlers\r\n     * @returns {}\r\n     */\r\n    configureHandlers: function () {\r\n        var self = this;\r\n        var $control = self.getControl();\r\n\r\n        // If the control doesn't have a value set the position\r\n        if (self.value == null) {\r\n            self.updateDisplayValue();\r\n        }\r\n\r\n        $control.on(\"click\", \"[data-action=\" + self.Class.ALLOW_UPDATE + \"]\", self.processAction.bind(self));\r\n\r\n    },\r\n\r\n    /**\r\n     * Sets the value in the rendered control\r\n     * @param {} value\r\n     * @returns {}\r\n     */\r\n    setDisplayValue: function (value) {\r\n        var self = this;\r\n        var def = new $.Deferred();\r\n\r\n        if (value != null && value !== \"\") {\r\n            if (self.coordinate)\r\n                self.coordinate.val(self.performPrecision(value));\r\n\r\n            // Set internal value\r\n            self.setValue(value, false);\r\n            def.resolve();\r\n        } else {\r\n            var onSuccess = function (position) {\r\n                var coordinates = position.coords.latitude + \" \" + position.coords.longitude;\r\n\r\n                self.coordinate.val(self.performPrecision(coordinates));\r\n\r\n                // Set internal value\r\n                self.setValue(coordinates, false);\r\n                def.resolve();\r\n            };\r\n\r\n            var onFail = function (message) {\r\n                def.reject(message);\r\n            };\r\n\r\n            if (bizagi.util.isCordovaSupported() && bizagi.util.isiOSDevice()) {\r\n                navigator.geolocation.getCurrentPosition(onSuccess, onFail);\r\n            } else {\r\n                self.getCurrentPosition(onSuccess, onFail);\r\n            }\r\n        }\r\n\r\n        return def.promise();\r\n    },\r\n\r\n\r\n    updateDisplayValue: function () {\r\n        var self = this;\r\n\r\n        self.setDisplayValue().then(function () {\r\n            self.setValidationMessage(\"\");\r\n        }).fail(function (message) {\r\n            self.coordinate.val(\"\");\r\n            self.setValidationMessage(message);\r\n        });\r\n    },\r\n\r\n    /**\r\n     * Process an action in order to do something with the geolocation\r\n     */\r\n    processAction: function () {\r\n        this.coordinate.empty();\r\n        this.updateDisplayValue();\r\n    },\r\n\r\n    getElementsToStylize: function ($context) {\r\n        return this.properties.editable ? $(\"input\", $context) : $(\".readonly-control\", $context); \r\n    }\r\n});","/**\r\n * Tablet definition of Action Launcher\r\n *\r\n * @author: Ricardo Prez\r\n */\r\n\r\n// Extends from render tablet base\r\nbizagi.rendering.tablet.render.extend(\"bizagi.rendering.tablet.actionLauncher\", bizagi.rendering.actionLauncher.prototype);\r\n// Extends itself\r\nbizagi.rendering.tablet.actionLauncher.extend(\"bizagi.rendering.tablet.actionLauncher\", {}, {\r\n /**\r\n     * Render a specific implementation for Desktop device\r\n     */\r\n    postRender: function () {\r\n        if (this.getMode() == \"design\"){\r\n            return;\r\n        }\r\n\r\n        var self = this;\r\n        var properties = self.properties;\r\n        var control = self.getControl();\r\n        self.actions = [];\r\n        self.startLoading();\r\n        // Define params to get list of actions        \r\n        $.when(self.dataService.multiaction().getActions(self.processPropertyValueArgs))\r\n            .then(function (response) {\r\n                response = self.getPropertiesActionLaucher(response);\r\n                self.actions = response;\r\n                self.deferredActions.resolve(response);\r\n\r\n                if (self.actions.length > 0) {\r\n                    $(\"[data-element='actions-add-btn']\", control).show();\r\n                }\r\n                else{\r\n                    $(\"[data-element='actions-add-btn']\", control).hide();\r\n                }\r\n\r\n                if (properties.isHorizontal) {\r\n                    if (properties.templatetype != \"none\") {\r\n                        return self.dataService.multiaction().getPropertyData(self.processPropertyValueDataTmplArgs)\r\n                            .then(function (templateData) {\r\n                                return self.engine.render($.extend(templateData, {\r\n                                    isDefaultTemplate: properties.templatetype === \"default\",\r\n                                    sessionId: self.properties.sessionId\r\n                                }), self.processPropertyValueDataTmplArgs);\r\n                            }).then(function (tmpl) {\r\n                                template = self.renderFactory.getTemplate(\"render-actionLauncher-horizontal\");\r\n                                var html = $($.fasttmpl(template, {\r\n                                    template: true\r\n                                }));\r\n\r\n                                $(\".bz-template\", html.wrap(\"<div>\").parent()).append(tmpl);\r\n                                return html;\r\n                            });\r\n                    }\r\n                }\r\n                else{\r\n                    template = self.renderFactory.getTemplate(\"render-actionLauncher-horizontal\");\r\n                    return $.fasttmpl(template, {\r\n                        template: false\r\n                    });\r\n                }\r\n            }).done(function (html) {\r\n                $(\"[data-element='template-container']\", control).append(html);\r\n                self.configureActionsHandlers();\r\n                self.configureTemplateHandlers();\r\n            }).always(function () {\r\n                self.endLoading();\r\n            });\r\n    },\r\n\r\n\r\n    /**\r\n     * Validates if the action launcher control contains a valid value\r\n     * @returns {boolean}\r\n     */\r\n    hasValue: function () {\r\n        var value = this.getValue();\r\n        return typeof value !== \"undefined\" && value !== null && value.length > 0;\r\n    },\r\n\r\n    /**\r\n     * Add binding to html elements\r\n     */\r\n    configureActionsHandlers: function () {\r\n        var self = this;\r\n        var control = self.getControl();\r\n        var actionLauncherControls = $(\".action-launcher-control\", control);\r\n\r\n        //Binding for click action on buttons\r\n        actionLauncherControls.on(\"click\", function () {\r\n            var item = self.actions[parseInt($(this).data(\"index\"))];\r\n            var action = {\r\n                guidProcess: item[0],\r\n                guidAction: item[4],\r\n                displayName: item[1],\r\n                actionType: item[3],\r\n                xpathContext: typeof item[5] !== \"undefined\" && item[5] === \"true\",\r\n                readOnlyForm: item[6] || false,\r\n                guidEntity: self.properties.guidEntity,\r\n                xpathActions: self.properties.xpathActions || \"\"\r\n            };\r\n\r\n            self.processAction(action);\r\n        });\r\n\r\n        var actions = [];\r\n        for (var i = 0, length = self.actions.length; i < length; i++) {\r\n            actions.push({\r\n                guid: self.actions[i][0],\r\n                displayName: self.actions[i][1]\r\n            });\r\n        }\r\n\r\n\r\n        //Binding for click action sheet\r\n        $(\"[data-element='actions-add-btn']\", control).actionSheet({\r\n            actions: actions,\r\n            actionClicked: function (action) {\r\n                var item = self.actions.find(function (element) {\r\n                    return element[0] == action.guid;\r\n                });\r\n\r\n                self.processAction({\r\n                    guidProcess: item[0],\r\n                    guidAction: item[4],\r\n                    displayName: item[1],\r\n                    actionType: item[3],\r\n                    xpathContext: typeof item[5] !== \"undefined\" && item[5] === \"true\",\r\n                    readOnlyForm: item[6] || false,\r\n                    xpathActions: self.properties.xpathActions || \"\"\r\n                });\r\n            }\r\n        });\r\n\r\n        //Catch the typed text in the search field and filter the action list\r\n        $.expr[\":\"].FilterAction = function (entity, i, array) {\r\n            var search = array[3];\r\n            if (!search) {\r\n                return false;\r\n            }\r\n            return new RegExp(search, \"i\").test($(entity).text());\r\n        };\r\n        $(\"input#ui-bizagi-render-action-launcher-filter-input\", control).keyup(function () {\r\n            var search = $(this).val();\r\n            $(\".action-launcher-control\", control).show();\r\n            if (search) {\r\n                $(\".action-launcher-control\", control)\r\n                    .not(\":FilterAction(\" + search + \")\").hide();\r\n            }\r\n        });\r\n    },\r\n    /**\r\n     *\r\n     */\r\n    configureTemplateHandlers: function () {\r\n        var self = this;\r\n        var control = self.getControl();\r\n\r\n        //Catch the event from the layout link\r\n        self.engine.subscribe(\"onLoadDataNavigation\", function (ev, params) {\r\n            params.filters = [];\r\n            self.triggerGlobalHandler(\"dataNavigation\", params);\r\n        });\r\n\r\n        $(\".bz-template-more-or-less\", control).bind(\"click\", function(){\r\n            $(\".bz-template\", control).toggleClass(\"bz-template--collapsed\");\r\n        });\r\n    },\r\n    /**\r\n     *\r\n     * @param action\r\n     */\r\n    processAction: function (action) {\r\n        var self = this;\r\n        var control = self.getControl();\r\n        var properties = self.properties;\r\n        var multipleSelection = (typeof properties.multipleSelection == \"undefined\") ? true : properties.multipleSelection;\r\n\r\n        if (multipleSelection) {\r\n            // If this is a form and has been queued, so open it\r\n            if (action.actionType == \"Form\" && self.countSameActions(action) >= 1 && !action.xpathContext) {\r\n                //Open action\r\n                $(\".action-to-execute-control[data-guidaction='\" + action.guidAction + \"'] label\", control).click();\r\n            } else {\r\n                $.when(self.actionManager(action)).done(function (act) {\r\n                    self.executeAction(act);\r\n                });\r\n            }\r\n        } else if (self.getValue().length > 0) {\r\n            self.showConfirmationDialog(action);\r\n        } else {\r\n            $.when(self.actionManager(action)).done(function (act) {\r\n                self.executeAction(act);\r\n            });\r\n        }\r\n    },\r\n\r\n    /**\r\n     *\r\n     * @param data\r\n     * @param action\r\n     */\r\n    notifyExecution: function (data, action) {\r\n        var self = this;\r\n\r\n        if (data.response == \"success\") {\r\n            $.notifier.add({\r\n                class_name: \"success\",\r\n                title: action.displayName,\r\n                text: self.getResource(\"render-action-launcher-success-excecution\").replace('%s', action.displayName),\r\n                sticky: false\r\n            });\r\n        } else {\r\n            $.notifier.add({\r\n                class_name: \"error\",\r\n                title: action.displayName,\r\n                text: self.getResource(\"render-action-launcher-failed-excecution\").replace('%s', action.displayName),\r\n                sticky: false\r\n            });\r\n        }\r\n    },\r\n    /**\r\n     *\r\n     * @param action\r\n     * @returns {*}\r\n     */\r\n    processActionForm: function (action) {\r\n        var self = this;\r\n        var properties = self.properties;\r\n        var formParams = self.getParams();\r\n\r\n        var additionalXpaths = self.properties.additionalXpath.join(\",\");\r\n        var xpathContext = (action.xpathContext) ? self.properties.xpathActions + \".\" + action.xpathContext : self.properties.xpathActions;\r\n        var def = new $.Deferred();\r\n\r\n        // Show dialog with new form after that\r\n        var slideForm = new bizagi.rendering.tablet.slide.form(self.dataService, self.renderFactory, {\r\n            title: properties.detailLabel || bizagi.localization.getResource(\"render-grid-details-form\"),\r\n            navigation: formParams.navigation,\r\n            showSaveButton: true,\r\n            cancelButtonLabel: bizagi.localization.getResource(\"render-form-dialog-box-close\"),\r\n            onSave: function (data) {\r\n                // Submit the form\r\n                return self.dataService.multiaction().submitData({\r\n                    action: \"SAVE\",\r\n                    data: data,\r\n                    xpathContext: slideForm.form.properties.xpathContext,\r\n                    idPageCache: data.idPageCache,\r\n                    isOfflineForm: false,\r\n                    isActionStartForm: true\r\n                }).done(function (savedData) {\r\n                    if (!action.editMode && self.countSameActions(action) === 0) {\r\n                        action.idStartScope = savedData.IdScope;\r\n                    }\r\n                    def.resolve(savedData.IdScope);\r\n                });\r\n            },\r\n            onCancel: function (data) {\r\n\r\n            }\r\n        });\r\n\r\n        var renderParams = {\r\n            \"idForm\": action.guidProcess,\r\n            \"contextType\": \"start\",\r\n            \"idCase\": self.properties.caseId,\r\n            \"idWorkitem\": self.typeForm != \"SummaryForm\" ? formParams.idWorkitem : undefined,\r\n            \"additionalXpaths\": additionalXpaths,\r\n            \"xpathContext\": xpathContext,\r\n            \"idStartScope\": action.idStartScope,\r\n            \"surrogateKey\": self.properties.surrogatedKey,\r\n            \"readOnlyForm\": action.readOnlyForm,\r\n            \"recordXpath\": action.recordXpath\r\n        };\r\n\r\n        if (action.actionType === \"Form\") {\r\n            renderParams.contextType = \"entitytemplate\";\r\n            renderParams.xpathContext = undefined;\r\n            renderParams.guidEntity = action.guidEntity;\r\n            renderParams.rewriteContextType = true;\r\n        }\r\n\r\n        slideForm.render(renderParams);\r\n\r\n        return def.promise();\r\n    },\r\n    /**\r\n     *\r\n     * @param action\r\n     * @returns {*}\r\n     */\r\n    processActionFormCollection: function (action) {\r\n        var self = this;\r\n        var properties = self.properties;\r\n        var form = self.getFormContainer();\r\n        var additionalXpaths = self.properties.additionalXpath.join(\",\");\r\n        var def = new $.Deferred();\r\n        var xpathContext = (action.xpathContext) ? self.properties.xpathActions + \".\" + action.xpathContext : self.properties.xpathActions;\r\n        var xpathPattern = \"%s[id=%s]\";\r\n        var xpathPatternWithoutkey = \"%s[]\";\r\n        var xpathContextWithKey = (xpathContext !== \"\") ? printf(xpathPattern, xpathContext, action.idEntity) : xpathContext;\r\n        var xpathContextWithoutKey = (xpathContext !== \"\") ? printf(xpathPatternWithoutkey, xpathContext) : xpathContext;\r\n        var formParams = form.getParams();\r\n\r\n        var slideForm = new bizagi.rendering.tablet.slide.form(self.dataService, self.renderFactory, {\r\n            title: properties.detailLabel || bizagi.localization.getResource(\"render-grid-details-form\"),\r\n            navigation: formParams.navigation,\r\n            showSaveButton: true,\r\n            cancelButtonLabel: bizagi.localization.getResource(\"render-form-dialog-box-close\"),\r\n            onSave: function (data) {\r\n                if (action.editMode) {\r\n                    return self.dataService.multiaction().submitData({\r\n                        action: \"SAVE\",\r\n                        data: data,\r\n                        xpathContext: xpathContextWithKey,\r\n                        idPageCache: data.idPageCache,\r\n                        isOfflineForm: false,\r\n                        isActionStartForm: true\r\n                    }).done(function (savedData) {\r\n                        def.resolve(savedData.IdScope);\r\n                    });\r\n                } else {\r\n                    return self.dataService.addGridRecordData({\r\n                        idRender: properties.id,\r\n                        //xpath: properties.xpath,\r\n                        xpathContext: xpathContext,\r\n                        contexttype: \"start\",\r\n                        idPageCache: data.idPageCache,\r\n                        submitData: data\r\n                    }).done(function (savedData) {\r\n                        action.idStartScope = savedData.IdScope;\r\n                        action.idEntity = savedData.IdEntity;\r\n                        self.addActionToQueue(action);\r\n                        def.resolve(savedData.IdScope);\r\n                    });\r\n                }\r\n            },\r\n            onCancel: function (data) {\r\n\r\n            }\r\n        });\r\n\r\n        slideForm.render({\r\n            \"idForm\": action.guidProcess,\r\n            \"contextType\": \"start\",\r\n            \"idCase\": formParams.idCase,\r\n            \"additionalXpaths\": additionalXpaths,\r\n            \"xpathContext\": (action.editMode) ? xpathContextWithKey : xpathContextWithoutKey,\r\n            \"idStartScope\": action.idStartScope,\r\n            \"surrogateKey\": self.properties.surrogatedKey,\r\n            \"readOnlyForm\": action.readOnlyForm,\r\n            \"recordXpath\": action.recordXpath\r\n        });\r\n\r\n        return def.promise();\r\n    },\r\n    /**\r\n     * Process a start form\r\n     * @param args\r\n     * @return {*}\r\n     */\r\n    processStartForm: function (args) {\r\n        var self = this;\r\n        var def = new $.Deferred();\r\n        args = args || {};\r\n        var formParams = self.getFormContainer().getParams();\r\n\r\n        // Show dialog\r\n        var slideForm = new bizagi.rendering.tablet.startForm(self.dataService, self.renderFactory, {\r\n            title: args.title || \"\",\r\n            navigation: formParams.navigation,\r\n            saveButtonLabel: (self.typeForm == \"GlobalForm\" || self.typeForm == \"SummaryForm\")\r\n                ? bizagi.localization.getResource(\"render-form-button-create\")\r\n                : bizagi.localization.getResource(\"render-form-dialog-box-save\"),\r\n            onSave: function (data) {\r\n                // Submit the form\r\n                return self.dataService.multiaction().submitData({\r\n                    action: \"SAVE\",\r\n                    data: data,\r\n                    xpathContext: self.properties.xpathContext,\r\n                    idPageCache: data.idPageCache,\r\n                    isOfflineForm: false,\r\n                    isActionStartForm: true\r\n                }).done(function (savedData) {\r\n                    def.resolve(savedData.IdScope);\r\n                });\r\n            }\r\n        });\r\n        // Render the search form\r\n        slideForm.render({\r\n            guidprocess: args.guidprocess,\r\n            idStartScope: args.idStartScope,\r\n            idCase: self.properties.caseId,\r\n            idWorkitem: self.typeForm != \"SummaryForm\" ? formParams.idWorkitem : undefined,\r\n            additionalXpaths: self.properties.additionalXpath.join(\",\"),\r\n            surrogatedKey: self.properties.surrogatedKey,\r\n            recordXpath: args.recordXpath,\r\n            mappingstakeholders: true\r\n        });\r\n\r\n        return def.promise();\r\n    },\r\n    /**\r\n     *\r\n     * @param action\r\n     */\r\n    executeAction: function (action) {\r\n        var self = this;\r\n\r\n        if (self.typeForm == \"GlobalForm\" || self.typeForm == \"SummaryForm\") {\r\n            var message = bizagi.localization.getResource(\"render-action-launcher-immediatly-action-confirmation\");\r\n\r\n            $.when(bizagi.showConfirmationBox(message, \"Bizagi\", \"info\"))\r\n                .done(function () {\r\n                    self.executeActionImmediately(action);\r\n                });\r\n        } else {\r\n            self.addActionToQueue(action);\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Show the confirmation dialog\r\n     * bizagi.createOkCancelPopup\r\n     * @param action\r\n     * */\r\n    showConfirmationDialog: function (action) {\r\n        var self = this;\r\n        var message = bizagi.localization.getResource(\"render-action-launcher-single-action-confirmation\");\r\n\r\n        $.when(bizagi.showConfirmationBox(message, \"Bizagi\", \"info\"))\r\n            .done(function () {\r\n                self.setValue([]);\r\n\r\n                $.when(self.actionManager(action)).done(function (act) {\r\n                    self.executeAction(act);\r\n                });\r\n            });\r\n    },\r\n\r\n    /**\r\n     * Render actual value of control and set events\r\n     * @param data\r\n     */\r\n    setDisplayValue: function (data) {\r\n        var self = this;\r\n        var control = self.getControl();\r\n        var actionsToExecuteContainer = $(\"[data-element='actions-container']\", control);\r\n        var template = self.renderFactory.getTemplate(\"render-actionLauncher-actions-to-execute\");\r\n\r\n        self.configureQueueVisibility();\r\n\r\n        $.when(self.deferredActions).done(function (listOfActions) {\r\n            var getMappingAction = function (guidAction) {\r\n                var mapping = [];\r\n                $.each(listOfActions, function (key, value) {\r\n                    if (value[4] == guidAction) {\r\n                        mapping = value;\r\n                    }\r\n                });\r\n\r\n                return mapping;\r\n\r\n            };\r\n\r\n            $.each(data, function (key, value) {\r\n                var mapping = getMappingAction(value.guidAction);\r\n                data[key].displayName = mapping[1];\r\n                data[key].guidProcess = mapping[0];\r\n                data[key].actionType = mapping[3];\r\n                data[key].xpathContext = mapping[5];\r\n                data[key].readOnlyForm = mapping[6];\r\n\r\n                if (data[key].params && data[key].params.idStartScope) {\r\n                    data[key].idStartScope = data[key].params.idStartScope;\r\n                }\r\n                if (data[key].params && data[key].params.idPageCache) {\r\n                    data[key].idPageCache = data[key].params.idPageCache;\r\n                }\r\n                if (data[key].params && data[key].params.idEntity) {\r\n                    data[key].idEntity = data[key].params.idEntity;\r\n                }\r\n            });\r\n\r\n            if (data.length > 0){\r\n                $.when($.fasttmpl(template, { actions: data })).done(function (html) {\r\n                    actionsToExecuteContainer.empty();\r\n                    actionsToExecuteContainer.append(html);\r\n\r\n                    var removeActionSelector = $(\".bz-actions-to-execute .bz-btn-icn\", actionsToExecuteContainer);\r\n                    var openActionSelector = $(\"label\", actionsToExecuteContainer);\r\n\r\n                    removeActionSelector.on(\"click\", function () {\r\n                        var index = $(this).parent().data(\"index\");\r\n                        self.removeActionToQueue(index);\r\n                    });\r\n\r\n                    openActionSelector.on(\"click\", function () {\r\n                        var target = $(this).parent();\r\n                        var type = target.data(\"actiontype\");\r\n                        var guidprocess = target.data(\"guidprocess\");\r\n                        var idStartScope = target.data(\"idstartscope\");\r\n                        var title = target.data(\"title\");\r\n                        // When undefined return string \"undefined\" instead of type \"undefined\"\r\n                        var xpathContext = target.data(\"xpathcontext\");\r\n                        var readOnlyForm = target.data(\"readonlyform\") || false;\r\n                        var idEntity = target.data(\"identity\") || \"\";\r\n                        var guidAction = target.data(\"guidaction\");\r\n                        var recordXpath = xpathContext || self.properties.xpathContext;\r\n                        switch (type) {\r\n                            case \"Process\":\r\n                                if (idStartScope) {\r\n                                    self.processStartForm({\r\n                                        guidprocess: guidprocess,\r\n                                        idStartScope: idStartScope,\r\n                                        title: title,\r\n                                        xpathContext: xpathContext,\r\n                                        recordXpath: recordXpath\r\n                                    });\r\n                                }\r\n                                break;\r\n                            case \"Form\":\r\n                                var action = {\r\n                                    guidProcess: guidprocess,\r\n                                    idStartScope: idStartScope,\r\n                                    editMode: true,\r\n                                    xpathContext: xpathContext,\r\n                                    readOnlyForm: readOnlyForm,\r\n                                    idEntity: idEntity,\r\n                                    recordXpath: recordXpath\r\n                                };\r\n\r\n                                if (action.xpathContext) {\r\n                                    self.processActionFormCollection(action);\r\n                                } else {\r\n                                    // Convert string \"undefined\" into type \"undefined\"\r\n                                    action.xpathContext = undefined;\r\n\r\n                                    // Add parameters if action form\r\n                                    var extraParams = {};\r\n                                    var dataAction = self.value.filter(function (item) {\r\n                                        return item.guidAction == guidAction;\r\n                                    });\r\n\r\n                                    if (dataAction.length > 0) {\r\n                                        extraParams = {\r\n                                            actionType: \"Form\",\r\n                                            contextType: \"entitytemplate\",\r\n                                            guidEntity: self.properties.guidEntity || dataAction[0].guidEntity\r\n                                        }\r\n                                    }\r\n\r\n                                    self.processActionForm($.extend(action, extraParams));\r\n                                }\r\n                                break;\r\n                            case \"Rule\":\r\n                                // Rules dont have forms or something like that\r\n                                break;\r\n                        }\r\n                    });\r\n                });\r\n            }else{\r\n                actionsToExecuteContainer.empty();\r\n            }\r\n\r\n        });\r\n    },\r\n    /**\r\n     * Show container if it has actions\r\n     */\r\n    configureQueueVisibility: function () {\r\n        var self = this;\r\n        var control = self.getControl();\r\n        var actionsToExecuteContainer = $(\".bz-action-launcher-actions-to-execute-container\", control);\r\n        var actionsToExecuteTitle = $(\".action-to-execute-label\", control);\r\n\r\n        if (self.getValue().length > 0) {\r\n            actionsToExecuteContainer.show();\r\n            actionsToExecuteTitle.show();\r\n        } else {\r\n            actionsToExecuteContainer.hide();\r\n            actionsToExecuteTitle.hide();\r\n        }\r\n    }\r\n});","/**\r\n * Tablet definition of entity template\r\n *\r\n * @author: Ricardo Prez\r\n */\r\n\r\nbizagi.rendering.tablet.actionLauncher.extend(\"bizagi.rendering.tablet.entityTemplate\", {}, {\r\n /**\r\n     * Render a specific implementation for tablet device\r\n     */\r\n    postRender: function() {\r\n        if (this.getMode() == \"design\"){\r\n            return;\r\n        }\r\n\r\n        var self = this;\r\n        var properties = self.properties;\r\n        var control = self.getControl();\r\n        self.actions = [];\r\n        self.configureQueueVisibility();\r\n        self.startLoading();\r\n\r\n        // Define params to get template               \r\n        self.dataService.multiaction().getPropertyData(self.processPropertyValueDataTmplArgs)\r\n            .then(function(templateData) {\r\n                return self.engine.render(templateData, self.processPropertyValueDataTmplArgs)\r\n                    .then(function(tmpl) {\r\n                        var template = self.renderFactory.getTemplate(\"render-actionLauncher-horizontal\")\r\n                        var html = $($.fasttmpl(template, { template: true }));\r\n                        $(\".bz-template\", html.wrap(\"<div>\").parent()).append(tmpl);\r\n\r\n                        if (properties.allowactions) {\r\n                           return self.dataService.multiaction().getActions(self.processPropertyValueArgs)\r\n                                .then(function(response) {\r\n                                    self.deferredActions.resolve(response);\r\n                                    self.actions = response;\r\n\r\n                                    if (self.actions.length > 0) {\r\n                                        $(\"[data-element='actions-add-btn']\", control).show();\r\n                                    }\r\n                                    else{\r\n                                        $(\"[data-element='actions-add-btn']\", control).hide();\r\n                                    }\r\n                                    return html;\r\n                                });\r\n                        }\r\n                        else{\r\n                            return html;    \r\n                        }\r\n                    });\r\n                    \r\n            }).done(function(html) {\r\n                $(\"[data-element='template-container']\", control).append(html);\r\n                self.configureActionsHandlers();\r\n                self.configureTemplateHandlers();\r\n            }).always(function() {\r\n                self.endLoading();\r\n            });\r\n    },\r\n\r\n    /**\r\n     * Add binding to html elements\r\n     */\r\n    configureActionsHandlers: function() {\r\n        var self = this;\r\n        var control = self.getControl();\r\n        var entityTemplateControls = $(\".action-launcher-control\", control);\r\n\r\n        /**\r\n         * Binding for click action on buttons\r\n         */\r\n        entityTemplateControls.on(\"click\", function() {\r\n            var item = self.actions[parseInt($(this).data(\"index\"))];\r\n            var action = {\r\n                guidProcess: item[0],\r\n                guidAction: item[4],\r\n                displayName: item[1],\r\n                actionType: item[3],\r\n                xpathContext: (typeof item[5] !== \"undefined\" && item[5] === \"true\"),\r\n                xpathActions: self.properties.xpathActions || \"\"\r\n            };\r\n\r\n            if (action.actionType === \"Form\") {\r\n                action.xpathContext = undefined;\r\n                action.contextType = \"entitytemplate\";\r\n                action.guidEntity = self.properties.guidEntity;\r\n            }\r\n\r\n            self.processAction(action);\r\n        });\r\n\r\n        var actions = [];\r\n        for (var i = 0, len = self.actions.length; i < len; i++) {\r\n            actions.push({\r\n                guid: self.actions[i][0],\r\n                displayName: self.actions[i][1]\r\n            });\r\n        }\r\n\r\n        /**\r\n         * Binding for click action sheet\r\n         */\r\n        $(\"[data-element='actions-add-btn']\", control).actionSheet({\r\n            actions: actions,\r\n            actionClicked: function(action) {\r\n                var item = self.actions.find(function(e) {\r\n                    return e[0] == action.guid;\r\n                });\r\n                self.processAction({\r\n                    guidProcess: item[0],\r\n                    guidAction: item[4],\r\n                    displayName: item[1],\r\n                    actionType: item[3],\r\n                    xpathContext: (typeof item[5] !== \"undefined\" && item[5] === \"true\")\r\n                });\r\n            }\r\n        });\r\n\r\n    },\r\n\r\n    configureTemplateHandlers: function() {\r\n        var self = this;\r\n        var control = self.getControl();\r\n        /**\r\n         * Catch the event from the layout link\r\n         */\r\n        self.engine.subscribe(\"onLoadDataNavigation\", function(ev, params) {\r\n            params.filters = [];\r\n            params.calculateFilters = params.calculateFilters || true;\r\n\r\n            self.triggerGlobalHandler(\"dataNavigation\", params);\r\n        });\r\n\r\n        $(\".bz-template-more-or-less\", control).bind(\"click\", function(){\r\n            $(\".bz-template\", control).toggleClass(\"bz-template--collapsed\");\r\n        });\r\n    }\r\n});","/**\r\n * Device definition of Polymorphic launcher\r\n *\r\n * @author: Ricardo Perez\r\n */\r\n\r\n// Extends from render tablet base\r\nbizagi.rendering.tablet.render.extend(\"bizagi.rendering.tablet.polymorphicLauncher\", bizagi.rendering.polymorphicLauncher.prototype);\r\n// Extends itself\r\nbizagi.rendering.tablet.polymorphicLauncher.extend(\"bizagi.rendering.tablet.polymorphicLauncher\", {}, {\r\n    /**\r\n        * Render a specific implementation for Tablet device\r\n        */\r\n    postRender: function () {\r\n        var self = this;\r\n        var properties = self.properties;\r\n        var mode = self.getMode();\r\n        var html, template;\r\n\r\n        if (mode == \"design\" || !self.properties.surrogatedKey) {\r\n            return \"\";\r\n        }\r\n\r\n        self.configureQueueVisibility();\r\n\r\n\t\t/**\r\n\t\t * Define params to get list of actions\r\n\t\t */\r\n        return $.when(self.dataService.multiaction().getPolymorphicActions(self.processPropertyValueArgs)).done(function (response) {\r\n            // Convert default response to tree data structure\r\n            response = self.dataService.serializePolymorphicActions(response);\r\n            self.totalActions = bizagi.clone(response);\r\n            var actions = bizagi.clone(response);\r\n            self.lessActions = bizagi.clone(actions);\r\n\r\n            // NOTE: Code extracted\r\n            var templateArguments = {\r\n                actions: actions,\r\n                allowSearch: properties.allowSearch,\r\n                treeActionsList: self.getTreeItems(actions)\r\n            };\r\n            template = self.renderFactory.getTemplate(\"render-polymorphicLauncher-vertical-tree\");\r\n\r\n            var control = self.getControl();\r\n            var actionsContainer = $(\".bz-polymorphic-launcher__constructors\", control);\r\n            actionsContainer.append($.fasttmpl(template, templateArguments));\r\n            self.bindHandlers();\r\n        });\r\n    },\r\n\r\n\t/**\r\n\t * Get rendered html of each node of constructors\r\n\t * @param actions\r\n\t * @param level\r\n\t * @return {string}\r\n\t */\r\n    getTreeItems: function (actions, level) {\r\n        var self = this;\r\n        var item = \"<ul>\";\r\n        var templateTreeItem = self.renderFactory.getTemplate(\"render-polymorphicLauncher-vertical-tree-item\");\r\n        actions = actions || {};\r\n        level = level || 1;\r\n\r\n        $.each(actions, function (key, value) {\r\n            item += $.fasttmpl(templateTreeItem, value);\r\n\r\n            if (value.children) {\r\n                item += self.getTreeItems(value.children, level + 1);\r\n            }\r\n        });\r\n        item += \"</ul>\";\r\n        return item;\r\n    },\r\n\r\n\t/**\r\n\t * Add binding to html elements\r\n\t */\r\n    bindHandlers: function () {\r\n        var self = this;\r\n        var control = self.getControl();\r\n        var actionLauncherControls = $(\".bz-polymorphic-launcher__constructors li span\", control);\r\n\r\n        //Binding for click action on buttons\r\n        actionLauncherControls.on(\"click\", function () {\r\n            var $targetData = $(this).parent();\r\n            var action = {\r\n                guidEntity: $targetData.data(\"guidentity\"),\r\n                guidObject: $targetData.data(\"guidobject\"),\r\n                guidConstructor: $targetData.data(\"guidconstructor\"),\r\n                displayName: $targetData.data(\"display-name\"),\r\n                actionType: $targetData.data(\"action-type\"),\r\n                xpathContext: $targetData.data(\"xpathcontext\")\r\n            };\r\n            self.onActionClicked(action);\r\n        });\r\n        //Catch the typed text in the search field and filter the action list\r\n        $.expr[\":\"].FilterAction = function (entity, i, array) {\r\n            var search = array[3];\r\n            if (!search) {\r\n                return false;\r\n            }\r\n            return new RegExp(search, \"i\").test($(entity).text());\r\n        };\r\n        $(\"input[data-action=search]\", control).keyup(function () {\r\n            var search = $(this).val();\r\n            $(\".bz-polymorphic-launcher__constructors li\", control).show();\r\n            if (search) {\r\n                $(\".bz-polymorphic-launcher__constructors li\", control).not(\":FilterAction(\" + search + \")\").hide();\r\n            }\r\n        });\r\n\r\n    },\r\n\t/**\r\n\t * Execute an Action\r\n\t * @param action\r\n\t */\r\n    onActionClicked: function (action) {\r\n        var self = this;\r\n\r\n        $.when(self.actionManager(action)).done(function (act) {\r\n            self.executeAction(act);\r\n        });\r\n    },\r\n\t/**\r\n\t * Show a message when action has been executed\r\n\t * @param status\r\n\t * @param action\r\n\t */\r\n    notifyExecution: function (status, action) {\r\n        var self = this;\r\n        if (status == \"success\") {\r\n            $.notifier.add({\r\n                class_name: \"success\",\r\n                title: action.displayName,\r\n                text: self.getResource(\"render-action-launcher-success-excecution\").replace('%s', action.displayName),\r\n                sticky: false\r\n            });\r\n\r\n        } else {\r\n            $.notifier.add({\r\n                class_name: \"error\",\r\n                title: action.displayName,\r\n                text: self.getResource(\"render-action-launcher-failed-excecution\").replace('%s', action.displayName),\r\n                sticky: false\r\n            });\r\n        }\r\n    },\r\n\t/**\r\n\t * Show a dialog with a form\r\n\t * @param action\r\n\t * @return {*}\r\n\t */\r\n    processActionForm: function (action) {\r\n        var self = this;\r\n        var properties = self.properties;\r\n        var form = self.getFormContainer();\r\n        var additionalXpaths = self.properties.additionalXpath.join(\",\");\r\n        var def = new $.Deferred();\r\n        var xpathContext = action.xpathContext || \"\";\r\n        var formParams = form.getParams();\r\n\r\n        var recordXpath = self.properties.recordXpath;\r\n\r\n        // Show dialog with new form after that\r\n        var slideForm = new bizagi.rendering.tablet.slide.form(self.dataService, self.renderFactory, {\r\n            title: properties.detailLabel || bizagi.localization.getResource(\"render-grid-details-form\"),\r\n            navigation: formParams.navigation,\r\n            showSaveButton: true,\r\n            cancelButtonLabel: bizagi.localization.getResource(\"render-form-dialog-box-close\"),\r\n            onSave: function (data) {\r\n                var pageCache = data.idPageCache;\r\n                data.idPageCache = null;\r\n                // Submit the form\r\n                return self.dataService.multiaction().submitData({\r\n                    action: \"SAVE\",\r\n                    data: data,\r\n                    xpathContext: slideForm.form.properties.xpathContext, //self.properties.xpathContext,\r\n                    idPageCache: pageCache,\r\n                    isOfflineForm: false,\r\n                    isActionStartForm: true\r\n                }).done(function (savedData) {\r\n                    if (!action.editMode && self.countSameActions(action) == 0) {\r\n                        action.idStartScope = savedData.IdScope;\r\n                    }\r\n                    def.resolve(savedData.IdScope);\r\n                });\r\n            },\r\n            onCancel: function (data) {\r\n\r\n            }\r\n        });\r\n\r\n        slideForm.render({\r\n            \"idForm\": action.guidObject,\r\n            \"contextType\": \"entity\",\r\n            \"guidEntity\": action.guidEntity,\r\n            \"idCase\": self.properties.caseId,\r\n            \"idWorkitem\": self.typeForm != \"SummaryForm\" ? formParams.idWorkitem : undefined,\r\n            \"additionalXpaths\": additionalXpaths,\r\n            //\"xpathContext\": xpathContext,\r\n            \"idStartScope\": action.idStartScope,\r\n            \"surrogateKey\": self.properties.surrogatedKey,\r\n            \"recordXpath\": recordXpath\r\n        });\r\n\r\n        return def.promise();\r\n    },\r\n\r\n\t/**\r\n\t * Process a start form\r\n\t * @param args\r\n\t * @return {*}\r\n\t */\r\n    processStartForm: function (args) {\r\n        var self = this;\r\n        var properties = self.properties;\r\n        var form = self.getFormContainer();\r\n        var def = new $.Deferred();\r\n        var formParams = form.getParams();\r\n        args = args || {};\r\n\r\n\r\n        var slideForm = new bizagi.rendering.tablet.startForm(self.dataService, self.renderFactory, {\r\n            //showSaveButton: properties.editable,\r\n            maximized: properties.maximized,\r\n            title: args.title || \"\",\r\n            navigation: formParams.navigation,\r\n            saveButtonLabel: (self.typeForm == \"GlobalForm\" || this.typeForm == \"SummaryForm\") ? bizagi.localization.getResource(\"render-form-button-create\") : bizagi.localization.getResource(\"render-form-dialog-box-save\"),\r\n            onSave: function (data) {\r\n                form.startLoading();\r\n\r\n                // Submit the form\r\n                return self.dataService.multiaction().submitData({\r\n                    action: \"SAVE\",\r\n                    data: data,\r\n                    xpathContext: self.properties.xpathContext,\r\n                    idPageCache: data.idPageCache,\r\n                    isOfflineForm: false,\r\n                    isActionStartForm: true\r\n                }).done(function (savedData) {\r\n                    form.endLoading();\r\n                    def.resolve(savedData.IdScope);\r\n                });\r\n            }\r\n        });\r\n\r\n        slideForm.render({\r\n            guidprocess: args.guidprocess,\r\n            idStartScope: args.idStartScope,\r\n            idCase: self.properties.caseId,\r\n            idWorkitem: self.typeForm != \"SummaryForm\" ? formParams.idWorkitem : undefined,\r\n            additionalXpaths: self.properties.additionalXpath.join(\",\"),\r\n            surrogatedKey: self.properties.surrogatedKey,\r\n            recordXpath: args.recordXpath,\r\n            mappingstakeholders: true\r\n        });\r\n\r\n        return def.promise();\r\n    },\r\n\t/**\r\n\t * Execute and action if a form is global form or summary, or send to queue\r\n\t * @param action\r\n\t */\r\n    executeAction: function (action) {\r\n        var self = this;\r\n\r\n        if (self.typeForm == \"GlobalForm\" || self.typeForm == \"SummaryForm\") {\r\n            var message = bizagi.localization.getResource(\"render-action-launcher-immediatly-action-confirmation\");\r\n\r\n            $.when(bizagi.showConfirmationBox(message, \"Bizagi\", \"info\"))\r\n                .done(function () {\r\n                    self.executeActionImmediately(action);\r\n                });\r\n        } else {\r\n            self.addActionToQueue(action);\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Show confirmation dialog\r\n     * @param action\r\n     */\r\n    showConfirmationDialog: function (action) {\r\n        var self = this;\r\n        var message = bizagi.localization.getResource(\"render-action-launcher-single-action-confirmation\");\r\n\r\n        $.when(bizagi.showConfirmationBox(message, \"Bizagi\", \"info\"))\r\n            .done(function () {\r\n                self.setValue([]);\r\n\r\n                $.when(self.actionManager(action))\r\n                    .done(function (act) {\r\n                        self.executeAction(act);\r\n                    });\r\n            });\r\n    },\r\n\r\n\t/**\r\n\t * Render actual value of control and set events\r\n\t * @param data\r\n\t */\r\n    setDisplayValue: function (data) {\r\n        var self = this;\r\n        var control = self.getControl();\r\n        var actionsToExecuteContainer = $(\".bz-polymorphic-launcher-constructors-to-execute-container\", control);\r\n        var template = self.renderFactory.getTemplate(\"render-polymorphicLauncher-actions-to-execute\");\r\n        self.configureQueueVisibility();\r\n\r\n        $.when($.fasttmpl(template, { actions: data })).done(function (html) {\r\n            actionsToExecuteContainer.empty();\r\n            actionsToExecuteContainer.append(html);\r\n            var removeActionSelector = $(\".bz-pill .bz-btn-icn\", actionsToExecuteContainer);\r\n            var openActionSelector = $(\".bz-pill__label\", actionsToExecuteContainer);\r\n            removeActionSelector.on(\"click\", function () {\r\n                var index = $(this).parent().data(\"index\");\r\n                self.removeActionToQueue(index);\r\n            });\r\n            openActionSelector.bind(\"click\", function () {\r\n                var $target = $(this).parent();\r\n                var type = $target.data(\"actiontype\");\r\n                var guidprocess = $target.data(\"guidprocess\");\r\n                var idStartScope = $target.data(\"idstartscope\");\r\n                var title = $target.data(\"title\");\r\n                var xpathContext = $target.data(\"xpathcontext\");\r\n                var idEntity = $target.data(\"identity\") || \"\";\r\n                var guidEntity = $target.data(\"guidentity\");\r\n                var recordXpath = xpathContext || self.properties.xpathContext;\r\n\r\n                switch (type) {\r\n                    case \"Process\":\r\n                        if (idStartScope) {\r\n                            self.processStartForm({\r\n                                guidprocess: guidprocess,\r\n                                idStartScope: idStartScope,\r\n                                title: title,\r\n                                xpathContext: xpathContext,\r\n                                recordXpath: recordXpath\r\n                            });\r\n                        }\r\n                        break;\r\n                    case \"Form\":\r\n                        var action = {\r\n                            guidProcess: guidprocess,\r\n                            idStartScope: idStartScope,\r\n                            editMode: true,\r\n                            xpathContext: xpathContext,\r\n                            idEntity: idEntity,\r\n                            guidEntity: guidEntity,\r\n                            guidObject: guidprocess\r\n                        };\r\n\r\n                        self.processActionForm(action);\r\n                        break;\r\n                    case \"Rule\":\r\n                        // Rules dont have forms or something like that\r\n                        break;\r\n                }\r\n            });\r\n        });\r\n    },\r\n\t/**\r\n\t * Show container if it has actions\r\n\t */\r\n    configureQueueVisibility: function () {\r\n        var self = this;\r\n        var control = self.getControl();\r\n        var actionsToExecuteContainer = $(\".bz-polymorphic-launcher-constructors-to-execute-container\", control);\r\n        var actionsToExecuteTitle = $(\".bz-polymorphic-launcher__title\", control);\r\n        if (self.getValue().length > 0) {\r\n            actionsToExecuteContainer.show();\r\n            actionsToExecuteTitle.show();\r\n        } else {\r\n            actionsToExecuteContainer.hide();\r\n            actionsToExecuteTitle.hide();\r\n        }\r\n    }\r\n});","/*  \r\n *   Name: BizAgi Tablet Render list Extension\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will redefine the list render class to adjust to desktop devices\r\n */\r\n\r\n// Extends from render tablet base\r\nbizagi.rendering.tablet.render.extend(\"bizagi.rendering.tablet.checkList\", bizagi.rendering.checkList.prototype);\r\n// Extends itself\r\nbizagi.rendering.tablet.checkList.extend(\"bizagi.rendering.tablet.checkList\", {}, {\r\n/**\r\n     *   Template method to implement in each device to customize each render after processed\r\n     */\r\n    postRender: function () {\r\n        this._super();        \r\n        this.properties.unique = Math.ceil(Math.random() * 1000);        \r\n        this.properties.required = true;\r\n    },\r\n\r\n    /**\r\n     *   Template method to implement in each device to customize the render's behaviour to add handlers\r\n     */\r\n    configureHandlers: function () {\r\n        var self = this;\r\n        // Call base\r\n        self._super();\r\n        $(\"input[type=checkbox]\", self.getControl()).bind(\"change\", function () {\r\n            var itemId = $(this).data(\"item-guid\");\r\n            self.onCheckListGroupChange(itemId, this.checked);\r\n        });\r\n    },\r\n\r\n    onCheckListGroupChange: function (itemId, checked) {\r\n        var self = this;\r\n        var item;\r\n        var items = $.grep(self.properties.items, function (element, index) {\r\n            return element.guid === itemId;\r\n        });\r\n        if (items && items.length > 0) {\r\n            item = items[0];\r\n        }\r\n        item.checked = checked;\r\n    },\r\n\r\n    /**\r\n     *   Sets the value in the rendered control\r\n     */\r\n    clearDisplayValue: function () {\r\n        $(\"input[type=checkbox]\", this.getControl()).removeAttr(\"checked\");\r\n    },\r\n\r\n    setDisplayValue : function (value){\r\n        var self = this;\r\n    }\r\n});\r\n","/*  \r\n *   Name: BizAgi Desktop Render list Extension\r\n *   Author: Ivn Ricardo Taimal Narvez\r\n *   Comments:\r\n *   -   This script will redefine the list render class to adjust to desktop devices\r\n */\r\n\r\n// Extends from base list\r\nbizagi.rendering.tablet.checkList.extend(\"bizagi.rendering.tablet.activityCheckList\", {}, {\r\n   /**\r\n     * Update or init the element data\r\n     * @param data\r\n     */\r\n    initializeData: function (data) {\r\n        // Call base\r\n        this._super(data);\r\n        var goal = (this.properties.activityDescription && this.properties.activityDescription !== \"\") \r\n        ?  bizagi.localization.getResource(\"workportal-project-plan-activity-goal\") + \": \" + this.properties.activityDescription : \"\";\r\n        this.properties.displayName = (goal !== \"\") ? goal : bizagi.localization.getResource(\"workportal-project-plan-activity-work-title\");\r\n        this.properties.displayType = \"vertical\";\r\n    },\r\n    /*\r\n     *   Template method to implement in each device to customize each render after processed\r\n     */\r\n    postRender: function () {\r\n        var self = this;\r\n        var $control = self.getControl();\r\n        // Call base\r\n        this._super();\r\n\r\n        self.newItemName = $(\".bz-checkList__input\", $control);\r\n        self.addEditButton = $(\".add-edit-item-button-checklist\", $control);\r\n        self.cancelEditButton = $(\".cancel-edit-item-button-checklist\", $control);\r\n\r\n        self.additionalElements();\r\n        self.notifyLoadItems();        \r\n    },\r\n\r\n    notifyLoadItems: function(){\r\n        var self = this;\r\n        setTimeout(function(){\r\n            var resolvedItems = self.properties.items.filter(function(i){\r\n                return i.resolved\r\n            }).length;\r\n            bizagi.util.setItemLocalStorage(\"newChanges\", JSON.stringify({\r\n                'hasChanges': true,\r\n                'idActivity': self.properties.idActivity,\r\n                'itemsResolved': resolvedItems,\r\n                'items': self.properties.items,\r\n                'progress': self.properties.activityWork\r\n            }));\r\n\r\n            bizagi.webpart.publish(\"onLoadDataItemsFromFormActivityPlan\", { \"items\": self.properties.items, \"activityWork\": self.properties.activityWork });\r\n        }, 100);\r\n    },\r\n\r\n    additionalElements: function () {\r\n        var self = this;\r\n\r\n        if (self.addEditButton && self.addEditButton.length > 0) {\r\n            self.addEditButton.hide();\r\n        }\r\n        if (self.cancelEditButton && self.cancelEditButton.length > 0) {\r\n            self.cancelEditButton.hide();\r\n        }\r\n        //control.parent().addClass(\"render-activity-check\");\r\n    },\r\n\r\n    configureHandlers: function() {\r\n        var self = this;\r\n        var control = self.getControl();\r\n        this._super();\r\n        $(\"[data-action=add]\", control).unbind(\"click\").click(function() {\r\n            var itemSelected = $(\".bz-checkList__item.bz-checkList__item--selected\", self.control);\r\n            if (itemSelected.length <= 0) {\r\n                self.prepareNewItem();\r\n            } else {\r\n                $(\".bz-checkList__input\", itemSelected).focus();\r\n            }\r\n        });\r\n\r\n        $(\"[data-action=delete]\", self.control).bind(\"click\", function() {\r\n            var that = this;\r\n            var message = bizagi.localization.getResource(\"workportal-widget-reports-confirm\");\r\n            var contentHolder = $(this).closest(\".bz-checkList__item\");\r\n\r\n            contentHolder.addClass(\"ui-bizagi-to-remove\");\r\n           \r\n            $.when(bizagi.showConfirmationBox(message, \"Bizagi\", \"info\"))\r\n                .done(function() {\r\n\r\n                    var itemId = $(that).closest(\".bz-checkList__item\").data(\"item-guid\");\r\n\r\n                    self.deleteItem(itemId);\r\n                }).fail(function() {\r\n                    contentHolder.removeClass(\"ui-bizagi-to-remove\");\r\n                });\r\n        });\r\n\r\n        $(\"label[data-action=edit-item]\", self.control).bind(\"click\", function() {\r\n            var element = $(this).closest(\".bz-checkList__item\");\r\n            var itemId = element.data(\"item-guid\");\r\n            var itemPosition = element.data(\"item-position\");\r\n\r\n            self.selectItem(itemId, itemPosition);\r\n        });\r\n    },\r\n\r\n    selectItem: function(itemId) {\r\n        var self = this;\r\n\r\n        for (var i = 0, length = self.properties.items.length; i < length; i++) {\r\n            if (self.properties.items[i].guid === itemId) {\r\n                self.properties.items[i].selected = true;\r\n            } else {\r\n                self.properties.items[i].selected = false;\r\n            }\r\n        }\r\n\r\n        self.repaintControl();\r\n\r\n        var itemSelected = $(\".bz-checkList__item.bz-checkList__item--selected\", self.getControl());\r\n        var itemSelectedName = $(\".bz-checkList__input\", itemSelected);\r\n        var itemContent = itemSelectedName.val();\r\n\r\n        itemSelectedName.focus();\r\n        itemSelectedName[0].setSelectionRange(itemContent.length, itemContent.length);\r\n\r\n        self.addSelectedHandlers();\r\n    },\r\n\r\n    deleteItem: function(itemId) {\r\n        var self = this;\r\n\r\n        for (var i = 0, length = self.properties.items.length; i < length; i++) {\r\n            if (self.properties.items[i].guid === itemId) {\r\n                self.properties.items.splice(i, 1);\r\n                break;\r\n            }\r\n        }\r\n\r\n        self.setValue(self.properties.items);\r\n        self.repaintControl();\r\n        self.addSelectedHandlers();\r\n    },\r\n\r\n    prepareNewItem: function () {\r\n        var self = this;\r\n        var newItem = {\r\n            guid: Math.guid(),\r\n            resolved: false,\r\n            name: \"\",\r\n            selected: true\r\n        };\r\n\r\n        self.properties.items.push(newItem);\r\n        self.repaintControl();\r\n        self.newItemName.focus();\r\n\r\n        self.newItemName.blur(function () {\r\n             var itemSelected = $(\".bz-checkList__item.bz-checkList__item--selected\", self.control);\r\n             var itemSelectedName = $(\".bz-checkList__input\", itemSelected);\r\n             var valueInput = itemSelectedName.val();\r\n\r\n             if(valueInput === \"\" && self.properties.items && self.properties.items.length >= 1\r\n                    && self.properties.items.slice(-1)[0].name === \"\"){\r\n                self.properties.items.pop();\r\n             }\r\n         });\r\n        self.addSelectedHandlers();\r\n        self.newItemName.keypress(function (event) {\r\n            if (event.which == 13) {\r\n                event.preventDefault();\r\n                self.addItem();\r\n                self.prepareNewItem();\r\n            }\r\n        });\r\n    },\r\n\r\n    addSelectedHandlers: function () {\r\n        var self = this;\r\n        var itemSelected = $(\".bz-checkList__item.bz-checkList__item--selected\", self.control);\r\n        var itemSelectedName = $(\".bz-checkList__input\", itemSelected);\r\n        itemSelectedName.focus();\r\n        $(\"[data-action=accept-edit]\", itemSelected).bind(\"click\", function () {\r\n            var newItemName = itemSelectedName.val();\r\n            if (newItemName && newItemName !== \"\") {\r\n                self.addItem();\r\n            }\r\n        });\r\n\r\n        \r\n        $(\"[data-action=cancel-edit]\", itemSelected).bind(\"click\", function (e) {\r\n            var newItemName = itemSelectedName.val();\r\n            var element = $(this).closest(\".bz-checkList__item\");\r\n            var itemPosition = element.data(\"item-position\");\r\n            var guidItem = element.data(\"item-guid\");\r\n\r\n            if (newItemName && newItemName !== \"\" && self.properties.items[itemPosition].name !== \"\") {\r\n                self.properties.items[itemPosition].selected = false;\r\n            }\r\n            if (newItemName === \"\" || self.properties.items[itemPosition].name === \"\") {\r\n                self.deleteItem(guidItem);\r\n            }\r\n            //self.addButton.show();\r\n            self.repaintControl();\r\n        });\r\n    },\r\n\r\n    addItem: function () {\r\n        var self = this;\r\n        var $control = self.getControl();\r\n\r\n        var itemSelected = $(\".bz-checkList__item.bz-checkList__item--selected\", $control);\r\n        var itemSelectedName = $(\".bz-checkList__input\", itemSelected);\r\n        var newItemName = itemSelectedName.val();\r\n\r\n        $.each(self.properties.items, function (index, item) {\r\n            if (item.selected) {\r\n                item.name = newItemName;\r\n                item.selected = false;\r\n            }\r\n        });\r\n        self.updateOriginalValue();\r\n        self.setValue(self.properties.items);\r\n        self.repaintControl();\r\n    },\r\n\r\n    repaintControl: function () {\r\n        var self = this;\r\n        var checkListHtml = self.renderControl();\r\n        $(\"[data-component=checkList]\", self.control).replaceWith(checkListHtml);\r\n        self.postRender();\r\n        self.configureHandlers();\r\n    },\r\n\r\n    onCheckListGroupChange: function (itemId, checked) {\r\n        var self = this;\r\n        var item;\r\n        var items = $.grep(self.properties.items, function (element, index) {\r\n            return element.guid === itemId;\r\n        });\r\n        if (items && items.length > 0) {\r\n            item = items[0];\r\n        }\r\n        item.resolved = checked;\r\n        self.setValue(self.properties.items);\r\n        self.refreshValue(self.properties.items);\r\n    },\r\n\r\n    refreshValue: function(items){\r\n        var self = this,\r\n            length = items.length,\r\n            completed = 0;\r\n\r\n        for (var i = 0; i < length; i++) {\r\n            if (items[i].resolved) {\r\n                completed += 1;\r\n            }\r\n        }\r\n\r\n        if (length > 0) {\r\n            self.properties.activityWork = Math.floor(100 * completed / length);\r\n        }\r\n        else {\r\n            self.properties.activityWork = 100;\r\n        }\r\n\r\n        self.notifyLoadItems();\r\n    },\r\n\r\n    getValue: function () {\r\n        var self = this;\r\n        return self.value || [];\r\n    },\r\n\r\n    controlValueIsChanged: function () {\r\n        var self = this;\r\n        var originalValue = JSON.stringify(self.properties.originalValue);\r\n        var newValue = JSON.stringify(self.value);\r\n        return originalValue !== newValue;\r\n    },\r\n\r\n    /*\r\n     *   Updates original value for some comparisons\r\n     */\r\n    updateOriginalValue: function () {\r\n        var self = this;\r\n        self.properties.originalValue = bizagi.clone(self.value);\r\n    },\r\n\r\n    /*\r\n     *   Add the render data to the given collection in order to send data to the server\r\n     */\r\n    collectData: function (renderValues) {\r\n        var self = this;\r\n        var properties = self.properties;\r\n\r\n        // Add the render value\r\n        var xpath = properties.xpath;\r\n        var value = self.getValue();\r\n        var idActivity = self.properties.idActivity;\r\n\r\n        if (self.controlValueIsChanged()) {\r\n            // Filter by valid xpaths and valid values\r\n            if (!bizagi.util.isEmpty(xpath) && !bizagi.util.isEmpty(idActivity)) {\r\n                if (Array.isArray(value)) {\r\n                    renderValues[properties.xpath] = {\r\n                        idActivity: idActivity,\r\n                        items: value\r\n                    };\r\n                } else if (value === \"\") {\r\n                    renderValues[properties.xpath] = \"\";\r\n                }\r\n            }\r\n        }else{\r\n            bizagi.util.setItemLocalStorage(\"newChanges\", JSON.stringify({\r\n                'hasChanges': false\r\n            }));\r\n        }\r\n    },\r\n\r\n    isValid: function (invalidElements) {\r\n        var self = this,\r\n            properties = self.properties,\r\n            message;\r\n        var items = self.getValue();\r\n        message = self.getResource(\"render-activity-check-list-validation\");\r\n        for (var i = 0; i < items.length; i+=1) {\r\n            var item = items[i];\r\n            if (!item.resolved) {\r\n                invalidElements.push({\r\n                    xpath: properties.xpath,\r\n                    message: message\r\n                });\r\n                break;\r\n            }\r\n        }\r\n    }\r\n});\r\n","/*  \r\n *   Name: Bizagi Tablet Range Extension\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will redefine the range render class to adjust to tablet devices\r\n */\r\n\r\n// Extends from render Tablet base\r\nbizagi.rendering.tablet.render.extend(\"bizagi.rendering.tablet.range\", bizagi.rendering.range.prototype);\r\n// Extends itself\r\nbizagi.rendering.tablet.range.extend(\"bizagi.rendering.tablet.range\", {}, {\r\n\r\n    /**\r\n     * Render a specific implementation for tablet device\r\n     */\r\n    postRender: function() {        \r\n        var properties = this.properties;\r\n    },\r\n    /**\r\n     * Render actual value of control and set events\r\n     * @param data\r\n     */\r\n    setDisplayValue: function(data) {\r\n        var control = this.getControl();\r\n    }\r\n\r\n});","/*  \r\n *   Name: Bizagi Tablet Range Date Extension\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will redefine the range date render class to adjust to tablet devices\r\n */\r\n\r\n// Extends from range tablet base\r\nbizagi.rendering.tablet.range.extend(\"bizagi.rendering.tablet.rangeDate\", bizagi.rendering.rangeDate.prototype);\r\n// Extends itself\r\nbizagi.rendering.tablet.rangeDate.extend(\"bizagi.rendering.tablet.rangeDate\", {}, {\r\n\r\n    /**\r\n     * Render actual value of control and set events\r\n     * @param data\r\n     */\r\n    setDisplayValue: function (data) {        \r\n        var control = this.getControl();\r\n    }\r\n});","/*  \r\n *   Name: Bizagi Tablet Range Date Extension\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will redefine the range date render class to adjust to tablet devices\r\n */\r\n\r\n// Extends from range tablet base\r\nbizagi.rendering.tablet.range.extend(\"bizagi.rendering.tablet.rangeMoney\", bizagi.rendering.rangeMoney.prototype);\r\n// Extends itself\r\nbizagi.rendering.tablet.rangeMoney.extend(\"bizagi.rendering.tablet.rangeMoney\", {}, {\r\n\r\n\t/**\r\n\t * Render a specific implementation for Desktop device\r\n\t */\r\n\tpostRender: function() {\r\n\t\tvar minControl = new bizagi.rendering.money(this.getRenderProperties(\"min\"));\r\n\t\tvar maxControl = new bizagi.rendering.money(this.getRenderProperties(\"max\"));\r\n\r\n\t    this.setRanageControls(minControl, maxControl);\r\n\t},\r\n\r\n\tgetRenderProperties: function (typeRangeControl){\r\n\t\tvar self = this;\r\n\t\tvar form = self.getFormContainer();\r\n\t\tvar properties = self.properties;\r\n\r\n\t\tvar renderProperties = {\r\n\t\t\tdata: {\r\n\t\t\t\tproperties: {\r\n\t\t\t\t\t\"id\": properties.id,\r\n\t\t\t\t\t\"xpath\": properties.xpath\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tmode: \"execute\",\r\n\t\t\tparent: form,\r\n\t\t\trenderFactory: self.renderFactory,\r\n\t\t\tresources: bizagi.localization,\r\n\t\t\tdataService: self.dataService\r\n\t\t};\r\n\r\n\t\tif (typeRangeControl === \"min\"){\r\n\t\t\trenderProperties.data.properties.displayName = \"From\";\r\n\t\t}else{\r\n\t\t\trenderProperties.data.properties.displayName = \"To\";\r\n\t\t}\r\n\r\n\t\treturn renderProperties;\r\n\t},\r\n\r\n\t/**\r\n\t * Render actual value of control and set events\r\n\t * @param data\r\n\t */\r\n\tsetDisplayValue: function(data) {\r\n\t\tvar self = this;\r\n\t\tvar control = self.getControl();\r\n\t}\r\n});","/*  \r\n *   Name: Bizagi Tablet Range Date Extension\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will redefine the range date render class to adjust to tablet devices\r\n */\r\n\r\n// Extends from range tablet base\r\nbizagi.rendering.tablet.range.extend(\"bizagi.rendering.tablet.rangeNumber\", bizagi.rendering.rangeNumber.prototype);\r\n// Extends itself\r\nbizagi.rendering.tablet.rangeNumber.extend(\"bizagi.rendering.tablet.rangeNumber\", {}, {\r\n\r\n\t/**\r\n\t * Render a specific implementation for Desktop device\r\n\t */\r\n\tpostRender: function() {\r\n\t\tvar self = this;\r\n\r\n\t\tvar minControl = new bizagi.rendering.number(self.getRenderProperties(\"min\"));\r\n\t\tvar maxControl = new bizagi.rendering.number(self.getRenderProperties(\"max\"));\r\n\r\n\t\tself.setRanageControls(minControl, maxControl);\r\n\t},\r\n\r\n\tgetRenderProperties: function (typeRangeControl){\r\n\t\tvar self = this;\r\n\t\tvar form = self.getFormContainer();\r\n\t\tvar properties = self.properties;\r\n\r\n\t\tvar renderProperties = {\r\n\t\t\tdata: {\r\n\t\t\t\tproperties: {\r\n\t\t\t\t\t\"id\": properties.id,\r\n\t\t\t\t\t\"xpath\": properties.xpath\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tmode: \"execute\",\r\n\t\t\tparent: form,\r\n\t\t\trenderFactory: self.renderFactory,\r\n\t\t\tresources: bizagi.localization,\r\n\t\t\tdataService: self.dataService\r\n\t\t};\r\n\r\n\t\tif (typeRangeControl === \"min\"){\r\n\t\t\trenderProperties.data.properties.displayName = \"From\";\r\n\t\t}else{\r\n\t\t\trenderProperties.data.properties.displayName = \"To\";\r\n\t\t}\r\n\r\n\t\treturn renderProperties;\r\n\t},\r\n\r\n\t/**\r\n\t * Render actual value of control and set events\r\n\t * @param data\r\n\t */\r\n\tsetDisplayValue: function(data) {\r\n\t\tvar self = this;\r\n\t\tvar control = self.getControl();\r\n\t}\r\n});","/*\r\n*   Name: BizAgi Desktop Render Template Text Extension\r\n*   Author: Andrs Fernando Muoz\r\n*   Comments:\r\n*   -   This script will redefine the layout render class to adjust to desktop devices\r\n*/\r\n\r\nbizagi.rendering.tablet.render.extend(\"bizagi.rendering.tablet.layoutRender\", bizagi.rendering.layoutRender.prototype);","/*\r\n *   Name: BizAgi Render Layout Image Class\r\n *   Author: Ricardo Prez\r\n *   Comments:\r\n *   -   This script will define basic stuff for non editable image control inside templates\r\n *   -   This control is based on the image no flash render control\r\n */\r\n\r\n\r\nbizagi.rendering.tablet.layoutRender.extend(\"bizagi.rendering.tablet.layoutImage\", bizagi.rendering.layoutImage.prototype);\r\n// Extends itself\r\nbizagi.rendering.tablet.layoutImage.extend(\"bizagi.rendering.tablet.layoutImage\", {\r\n    \r\n    renderControl: function () {\r\n        var self = this;\r\n        var templateUri = self.renderFactory.getTemplate(\"layout-image\");\r\n        self.control = self.getControl();\r\n        return $.fasttmpl(templateUri, {});\r\n    },\r\n\r\n    postRender: function () {\r\n        var self = this;\r\n        var control = self.getControl();\r\n\r\n        if (self.value && typeof self.value.value !== \"undefined\" && self.value.value !== \"\" && self.value.value !== null) {\r\n            //Get image of customer in binary format\r\n            var url = self.getImageUri();\r\n            $.ajax({\r\n                url: url,\r\n                type: \"GET\",\r\n                dataType: \"binary\",\r\n                processData: false,\r\n                success: function (blob) {\r\n\r\n                    if (typeof blob == \"string\") {\r\n                        var xhr = arguments[2];\r\n                        var contentType = xhr.getResponseHeader('Content-type');\r\n                        blob = bizagi.util.media.byteArrayToBlob(bizagi.util.media.stringToByteArray(blob), contentType);\r\n                    }\r\n\r\n                    var urlCreator = window.URL || window.webkitURL;\r\n                    var imageUrl = urlCreator.createObjectURL(blob);\r\n\r\n                    $(control).find('img').attr(\"src\", imageUrl);\r\n                }\r\n            });\r\n        }\r\n    },\r\n    /**\r\n     * Gets the url to get the array image\r\n     */\r\n    getImageUri: function () {\r\n        var self = this;\r\n        var templateControl = self.parent.parent;\r\n        var renderParams = templateControl.properties.paramsRender || {};\r\n\r\n        var map = {\r\n            entity: self.value.guid,\r\n            surrogateKey: self.value.surrogateKey,\r\n            xpath: self.properties.xpath,\r\n            width: 96,\r\n            height: 96,\r\n            hash: self.value.value,\r\n            idcase: renderParams.idRender ? renderParams.formParams.idCase : \"_\",\r\n            idworkitem: renderParams.idRender ? renderParams.formParams.idWorkitem : \"_\",\r\n            contextxpath: renderParams.idRender ? renderParams.xpathActions : \"_\"\r\n        };\r\n\r\n        return self.dataService.serviceLocator.getUrl(\"render-entity-layout-imageByteArray\").replaceMultiple(map);\r\n    },\r\n    /**\r\n     *   Sets the value in the rendered control\r\n     */\r\n    getDisplayValue: function () {\r\n        var self = this;\r\n        return [self.value];\r\n    }\r\n});","/*\r\n *   Name: BizAgi Render Layout Label Class\r\n *   Author: Mauricio Snchez\r\n *   Comments:\r\n *   -   This script will define basic stuff for labels inside templates\r\n */\r\n\r\nbizagi.rendering.tablet.layoutRender.extend(\"bizagi.rendering.tablet.layoutPlaceholder\", bizagi.rendering.layoutPlaceholder.prototype);\r\n","/*\r\n*   Name: BizAgi Render Layout Boolean Class\r\n*   Author: Alexander Mejia\r\n*   Comments:\r\n*   -   This script will define basic stuff for boolean renders inside templates\r\n*/\r\n\r\nbizagi.rendering.tablet.layoutRender.extend(\"bizagi.rendering.tablet.layoutBoolean\", bizagi.rendering.layoutBoolean.prototype);","/*\r\n *   Name: BizAgi Render Layout Simple Link Class\r\n *   Author: Ricardo Prez\r\n *   Comments:\r\n *   -   This script will define basic stuff for non editable link renders inside templates\r\n *   -   This control is based on the link render control\r\n */\r\n\r\nbizagi.rendering.tablet.layoutRender.extend(\"bizagi.rendering.tablet.layoutLink\", bizagi.rendering.layoutLink.prototype);\r\n// Extends itself\r\nbizagi.rendering.tablet.layoutLink.extend(\"bizagi.rendering.tablet.layoutLink\", {\r\n\r\n    /*\r\n     *   Template method to implement in each children to customize each control\r\n     */\r\n    render: function () {\r\n        var self = this;\r\n        var container = self.getContainerRender();\r\n        container.addClass(\"bz-command-not-edit\");\r\n    },\r\n\r\n    postRender: function () {\r\n        var self = this;\r\n        var element = self.element;\r\n        if (element) {\r\n            element.on(\"click\", $.proxy(self.onClickElement, self));\r\n        }\r\n    },\r\n\r\n    onClickElement: function () {\r\n        var self = this;\r\n        var params = {\r\n            'displayName': self.properties.displayName,\r\n            'navigateFromRender': false,\r\n            'reference': self.properties.reference,\r\n            'referenceType': self.properties.referenceType,\r\n            'xpath': self.properties.xpath\r\n        };\r\n\r\n        if (bizagi.kendoMobileApplication && bizagi.kendoMobileApplication.view().id === \"#renderSplitView\") {\r\n            params.navigateFromRender = true;\r\n        }\r\n\r\n        self.triggerGlobalHandler(\"DATA-NAVIGATION\", params);\r\n    }\r\n});","/*\r\n*   Name: BizAgi Render Layout Label Class\r\n*   Author: Ricardo Prez\r\n*   Comments:\r\n*   -   This script will define basic stuff for labels inside templates\r\n*/\r\n\r\nbizagi.rendering.tablet.layoutRender.extend(\"bizagi.rendering.tablet.layoutLabel\", bizagi.rendering.layoutLabel.prototype);\r\n// Extends itself\r\nbizagi.rendering.tablet.layoutLabel.extend(\"bizagi.rendering.tablet.layoutLabel\", {\r\n    setValue: function (val, triggerEvents) {\r\n        var self = this;\r\n        self.properties.displayName = val;\r\n        this._super(val, triggerEvents);\r\n        var control = self.getControl();\r\n\r\n        if (control) {\r\n            $(\".ui-bizagi-render-label\", control).text(val);\r\n        }\r\n    }\r\n});\r\n","/*\r\n*   Name: BizAgi Render Layout Text Class\r\n*   Author: Ricardo Prez\r\n*   Comments:\r\n*   -   This script will define basic stuff for text renders inside templates\r\n*/\r\n\r\nbizagi.rendering.tablet.layoutRender.extend(\"bizagi.rendering.tablet.layoutText\", bizagi.rendering.layoutText.prototype);\r\n// Extends itself\r\nbizagi.rendering.tablet.layoutText.extend(\"bizagi.rendering.tablet.layoutText\", {});","/*\r\n*   Name: BizAgi Desktop Render Template dateTime Extension\r\n*   Author: Andres Fernando Muoz\r\n*   Comments:\r\n*   -   This script will redefine the date time render class inside templates to adjust to desktop devices\r\n*/\r\n\r\nbizagi.rendering.tablet.layoutRender.extend(\"bizagi.rendering.tablet.layoutDateTime\", bizagi.rendering.layoutDateTime.prototype);\r\n// Extends itself\r\nbizagi.rendering.tablet.layoutDateTime.extend(\"bizagi.rendering.tablet.layoutDateTime\", {});","/*\r\n *   Name: BizAgi Desktop Render Template number Extension\r\n *   Author: Mauricio Sanchez\r\n *   Comments:\r\n *   -   This script will redefine the number render class inside templates to adjust to desktop devices\r\n */\r\n\r\nbizagi.rendering.tablet.layoutRender.extend(\"bizagi.rendering.tablet.layoutNumber\", bizagi.rendering.layoutNumber.prototype);\r\n// Extends itself\r\nbizagi.rendering.tablet.layoutNumber.extend(\"bizagi.rendering.tablet.layoutNumber\", {\r\n    /*\r\n    *   Sets the value in the rendered control\r\n    */\r\n    setValue: function (value, triggerEvents) {\r\n        var self = this;\r\n        value = value ? self.getDisplayValue(value) : self.getDisplayValue(0);\r\n        self.properties.displayName = value;\r\n        this._super(value, triggerEvents);\r\n        var control = self.getControl();\r\n        if(control) {\r\n            $(\".ui-bizagi-render-number\", control).text(value);\r\n        }\r\n    }\r\n});","/**\r\n *   Name: Bizagi Tablet Render Template Money Extension\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will redefine the money render class inside templates to adjust to tablet devices\r\n */\r\n\r\nbizagi.rendering.tablet.layoutRender.extend(\"bizagi.rendering.tablet.layoutMoney\", bizagi.rendering.layoutNumber.prototype);\r\n// Extends itself\r\nbizagi.rendering.tablet.layoutMoney.extend(\"bizagi.rendering.tablet.layoutMoney\", bizagi.rendering.layoutMoney.prototype);\r\nbizagi.rendering.tablet.layoutMoney.extend(\"bizagi.rendering.tablet.layoutMoney\", {\r\n    /*\r\n     *   Sets the value in the rendered control\r\n     */\r\n    setValue: function (value, triggerEvents) {\r\n        var self = this;\r\n        value = value ? self.getDisplayValue(value) : self.getDisplayValue(0);\r\n        self.properties.displayName = value;\r\n        this._super(value, triggerEvents);\r\n        var control = self.getControl();\r\n        if (control) {\r\n            $(\".ui-bizagi-render-number\", control).text(value);\r\n        }\r\n    }\r\n});","/*\r\n *   Name: BizAgi Desktop Render Layout Upload\r\n *   Author: Bizagi\r\n *   Comments:\r\n *   -   This script will define the upload on entity template\r\n */\r\n\r\nbizagi.rendering.tablet.layoutRender.extend(\"bizagi.rendering.tablet.layoutUpload\", bizagi.rendering.layoutUpload.prototype);\r\n// Extends itself\r\nbizagi.rendering.tablet.layoutUpload.extend(\"bizagi.rendering.tablet.layoutUpload\", {\r\n\t/**\r\n     *   Template method to implement in each children to customize each control\r\n     */\r\n    renderControl: function () {\r\n        var self = this,\r\n            properties = self.properties,\r\n            defer = $.Deferred();\r\n\r\n        $.when(self.getValueFilesByData(bizagi.clone(properties))).done(function(properties, valueResult){\r\n            self.properties = properties;\r\n            self.files = valueResult.files;\r\n            defer.resolve(self.getHTMLFiles());\r\n        });\r\n\r\n        return defer.promise();\r\n    },\r\n\r\n    getHTMLFiles: function(){\r\n        var self = this;\r\n        var files = $.map(self.files, function(el){\r\n            var file = {\"id\": el[0], \"filename\": el[1]};\r\n            file.url =  self.buildItemUrl(file);\r\n            return file;\r\n        });\r\n\r\n        var template = self.renderFactory.getTemplate(\"layout-upload\");\r\n        return $.fasttmpl(template, {\"files\": files});\r\n    },\r\n\r\n    postRender: function () {\r\n        var self = this;\r\n        var control = self.getControl();\r\n\r\n        var filesLinkElements = control.find(\".ui-bizagi-render-layout-upload-item a\");\r\n\r\n        filesLinkElements.on(\"click\", function () {\r\n            bizagi.loading.start();\r\n            $.when(bizagi.util.media.downloadFile($(this).attr(\"data-url\"), this.title)).fail(function (error) {\r\n                if (error.responseText){\r\n                    self.getFormContainer().failHandler(error.responseText);\r\n                }\r\n            }).always(function(){\r\n                bizagi.loading.stop();\r\n            });\r\n        });\r\n    },\r\n\r\n    /**\r\n     *   Builds the upload item url\r\n     */\r\n    buildItemUrl: function (file) {\r\n        var self = this,\r\n            properties = self.properties;\r\n\r\n        var form = self.getFormContainer();\r\n\r\n        return self.dataService.getUploadFileEntityUrl({\r\n            isContextContainerWidgetRender: self.isContextContainerWidgetRender(),\r\n            xpath: self.getUploadXpath(),\r\n            fileId: file.id,\r\n            idRender: form.properties.paramsRender.idRender || \"undefined\",\r\n            xpathContext: properties.xpathContext,\r\n            idPageCache: form.properties.paramsRender.idPageCache || \"undefined\",\r\n            xpathActions: form.properties.paramsRender.xpathActions || \"undefined\",\r\n            sessionId: form.properties.sessionId,\r\n            surrogatekey: self.properties.value.surrogateKey,\r\n            guidentity: self.properties.value.guid\r\n        });\r\n    }\r\n});","/*\r\n*   Name: BizAgi Tablet Column Decorator Extension\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will redefine the column decorator class to adjust to tablet devices\r\n*/\r\n\r\n// Extends itself\r\nbizagi.rendering.columns.column.extend(\"bizagi.rendering.tablet.columns.column\", {}, {\r\n\r\n    /*\r\n    *   Apply custom overrides to each decorated instance\r\n    */\r\n    applyOverrides: function (decorated) {\r\n        // Hacks the getControl method in the decorated render to add features\r\n        if (decorated && decorated.getControl) {\r\n            this.originalGetControl = decorated.getControl;\r\n            decorated.getControl = this.getControl;\r\n        }\r\n    },\r\n\r\n    /*\r\n    *   Template method to get the control element\r\n    *   This code runs under the decorated element context\r\n    */\r\n    getControl: function () {\r\n        var self = this;\r\n        var result = this._super();\r\n\r\n        if (!result || result.length == 0) {\r\n            result = $(self.element || self.observableElement);\r\n        }\r\n\r\n        return result;\r\n    },\r\n\r\n    /*\r\n    *   Returns the in-memory processed element \r\n    *   so the caller could append it to any place\r\n    */\r\n    render: function (surrogateKey, value, tableCell) {\r\n        var result = this._super(surrogateKey, value, tableCell);\r\n        var decorated = this.getDecorated(surrogateKey);\r\n        if (decorated.element) {\r\n            // Clean all display types\r\n            decorated.element.removeClass(\"ui-bizagi-render-display-normal ui-bizagi-render-display-vertical ui-bizagi-render-display-reversed\")\r\n                          .removeClass(\"ui-bizagi-render-display-vertical-reversed ui-bizagi-render-display-label ui-bizagi-render-display-value\");\r\n        }\r\n\r\n        return result;\r\n    },\r\n\r\n    /*\r\n    *   Returns the cell html to be inserted in the table\r\n    */\r\n   /* renderReadOnly: function (surrogateKey, value, tableCell) {\r\n        var self = this;\r\n        var decorated = this.getDecorated(surrogateKey);\r\n        var cell = this._super(surrogateKey, value, tableCell);\r\n\r\n        // Just draw render if the cell layout has been filled\r\n        if (cell && cell.length > 0) {\r\n\r\n            // Add display value\r\n            $(\".ui-bizagi-cell-readonly\", cell).html(decorated.getDisplayValue());\r\n\r\n            // Apply styles to cell\r\n            self.applyColumnStyles(cell);\r\n\r\n            // Return just content\r\n            return cell;\r\n        }\r\n\r\n        return \"\";\r\n    },*/\r\n\r\n    postRenderReadOnly: function (surrogateKey, cell) {\r\n\r\n        var self = this;\r\n        var decorated = self.getDecorated(surrogateKey);\r\n        var editable = self.properties.editable;\r\n        decorated.properties.editable = false;\r\n\r\n        if (decorated.grid == undefined) {\r\n            decorated.grid = self.grid;\r\n        }\r\n        if (self.properties.singleInstance) {\r\n            decorated.element = cell;\r\n        }\r\n        decorated.postRenderElement(cell);\r\n        decorated.properties.editable = editable;\r\n\r\n        /*var self = this;\r\n        var properties = self.properties;\r\n\r\n        // Call base\r\n\r\n        // var decorated = this.getDecorated(surrogateKey);\r\n        this._super(key, cell);\r\n\r\n        // Just draw render if the cell layout has been filled\r\n        if (cell && cell.length > 0) {\r\n        var cellIcon = $(\".ui-bizagi-cell-icon\", cell);\r\n        if (!properties.editable) cellIcon.detach();\r\n\r\n        // Apply styles to cell\r\n        self.applyColumnStyles(cell);\r\n\r\n        if (properties.align == \"left\") {\r\n        cellIcon.addClass(\"ui-bizagi-cell-icon-right\");\r\n        }\r\n        }*/\r\n    },\r\n\r\n    /*\r\n    *   Apply column styles to a specified element\r\n    */\r\n    applyColumnStyles: function (element) {\r\n        var self = this;\r\n        var properties = self.properties;\r\n        element = $(element);\r\n        // Set cell alignment\r\n        element.css(\"-webkit-box-pack\", properties.align);\r\n\r\n        // Set cell back color\r\n        if (properties.textFormat.background) {\r\n            element.css(\"background-color\", properties.textFormat.background);\r\n            element.css(\"background-image\", \"none\");\r\n        }\r\n    },\r\n\r\n    isValueValid: function(surrogateKey, value, messages, propertyOverrides){\r\n        var isValid = this._super(surrogateKey, value, messages, propertyOverrides);\r\n        var decorated = this.getDecorated(surrogateKey);\r\n        if (!isValid) \r\n            decorated.element.addClass(\"bz-form-item--error\");\r\n        else \r\n            decorated.element.removeClass(\"bz-form-item--error\");\r\n        return isValid;\r\n    },\r\n});","/*\r\n*   Name: BizAgi Tablet Column Decorator Extension\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will redefine the column decorator class to adjust to tablet devices\r\n*/\r\n\r\n\r\nbizagi.rendering.tablet.columns.column.extend(\"bizagi.rendering.tablet.columns.combo\", {}, bizagi.rendering.columns.combo.prototype );\r\n// Extends itself\r\nbizagi.rendering.tablet.columns.combo.extend(\"bizagi.rendering.tablet.columns.combo\", {}, {\r\n    /*\r\n    *   Sets the internal value\r\n    */\r\n    setValue: function(surrogateKey, value) {\r\n        var self = this;\r\n        var decorated = self.getDecorated(surrogateKey);\r\n        // Check is offline form\t    \r\n        var isOfflineForm = bizagi.util.isOfflineForm({ context: self });\r\n\r\n        if (decorated === null) {\r\n            return;\r\n        }\r\n\r\n        // Perform default set value when rendering summary row\r\n        if (surrogateKey == \"summary\") return self._super(surrogateKey, value);\r\n\r\n        if(isOfflineForm && (typeof (value) == \"number\" || typeof (value) == \"string\")){\r\n            var newValue =  typeof (self.properties.data) == \"object\" ? self.properties.data.find(function(item){ return item.id == value }) : value;\r\n\r\n            self._super(surrogateKey, newValue);\r\n            decorated.selectedValue = value;\r\n        } else if (self.properties.type == \"columnRadio\") {\r\n            self._super(surrogateKey, value);\r\n            decorated.selectedValue = value;\r\n        } else if (value && value.length > 0) {\r\n\r\n            // Create the value property\r\n            var newValue = {\r\n                id: value[0][0],\r\n                value: value[0].length > 2 ? $.grep(value[0], function (item, i) { return i != 0; }) : value[0][1]\r\n            };\r\n            // Call base\r\n            self._super(surrogateKey, newValue);\r\n            decorated.selectedValue = newValue.value;\r\n        } else if (value && value.id && value.value) {\r\n            self._super(surrogateKey, value);\r\n            decorated.selectedValue = value.value;\r\n        } else if (value && typeof (value) == \"number\") {\r\n            self._super(surrogateKey, value);\r\n        } else if (isOfflineForm && (value !== null && typeof (value) === \"object\" && value.value)) {\r\n            self._super(surrogateKey, value.value);\r\n            decorated.selectedValue = value.value;\r\n        } else {\r\n            // Set null values when the entry array is null\r\n            self._super(surrogateKey, null);\r\n            decorated.selectedValue = \"\";\r\n        }\r\n    }\r\n});\r\n","/**\r\n *   Name: Bizagi Tablet Render Document Generator Extension\r\n *   Author: Bizagi UI Forms\r\n *   Comments:\r\n *   -   This script will redefine the document generator render class to adjust to tablet devices\r\n */\r\n\r\n// Extends itself\r\nbizagi.rendering.tablet.columns.column.extend(\"bizagi.rendering.tablet.columns.document\", {}, {\r\n\r\n    /**\r\n     * Apply custom overrides to each decorated instance\r\n     * @param decorated\r\n     */\r\n    applyOverrides: function (decorated) {\r\n        var self = this;\r\n        var mode = self.getMode();\r\n\r\n        self._super(decorated);\r\n\r\n        if (mode !== \"design\") {\r\n            self.surrogateKey = decorated.surrogateKey;\r\n\r\n            decorated.getXpath = this.getXpath;\r\n            decorated.getDocumentXpath = this.getDocumentXpath;\r\n            decorated.getContextXpath = this.getContextXpath;\r\n            decorated.documentTemplateGenerate = this.documentTemplateGenerate;\r\n            decorated.preRenderControl = this.preRenderControl;\r\n            decorated.deleteDocumentTemplate = this.deleteDocumentTemplate;\r\n            decorated.properties.xpathContext = self.getContextXpath();\r\n        }\r\n    },\r\n\r\n    /**\r\n     * This method tries to get the HTML template an render the current object inside\r\n     * @return {jQuery} $.Deferred()\r\n     */\r\n    renderControl: function () {\r\n        this.preRenderControl();\r\n\r\n        return this._super();\r\n    },\r\n\r\n    /**\r\n     * Creates the event of generation of templates.\r\n     */\r\n    documentTemplateGenerate: function () {\r\n        var self = this;\r\n        var properties = self.properties;\r\n\r\n        self.startLoading();\r\n\r\n        //Get the context xPath\r\n        properties.xpathcontext = self.getContextXpath();\r\n        properties.xpath = self.getDocumentXpath(properties.xpath);\r\n\r\n        var grid = self.parent;\r\n        var form = self.getFormContainer();\r\n\r\n        $.when(form.submitData()).done(function () {\r\n            $.when(self.dataService.generateDocumentTemplate(properties)).done(function (response) {\r\n                $.when(grid.refresh()).done(function () {\r\n                    self.autoOpenDocuments();\r\n                });\r\n\r\n                self.endLoading();\r\n            }).fail(function () {\r\n                self.showErrorMessage();\r\n                self.endLoading();\r\n            });\r\n        }).fail(function (message) {\r\n            // Add error messages\r\n            self.getFormContainer().addErrorMessage(message);\r\n            self.endLoading();\r\n        });\r\n    },\r\n\r\n    /**\r\n     * Apply custom overrides to each decorated instance\r\n     * @param xpath\r\n     * @returns {string}\r\n     */\r\n    getXpath: function (xpath) {\r\n        var xpathPath = xpath;\r\n        var index = xpathPath.indexOf(this.grid.properties.xpath);\r\n\r\n        if (index !== -1) {\r\n            xpathPath = xpathPath.substr(index + this.grid.properties.xpath.length + 1);\r\n        }\r\n\r\n        return this.grid.properties.xpath + \"[id=\" + this.surrogateKey + \"].\" + xpathPath;\r\n    },\r\n\r\n    /**\r\n     * Returns the xpath to be used\r\n     * @param xpath\r\n     * @returns {*|string}\r\n     */\r\n    getDocumentXpath: function (xpath) {\r\n        var xpathPath = xpath;\r\n        var index = xpathPath.indexOf(this.grid.properties.xpath);\r\n\r\n        if (index !== -1) {\r\n            xpathPath = xpathPath.substr(index + this.grid.properties.xpath.length + 1);\r\n        }\r\n\r\n        return xpathPath;\r\n    },\r\n\r\n    /**\r\n     * Post process the element after it has been rendered\r\n     * @param surrogateKey\r\n     * @param cell\r\n     * @param tableCell\r\n     */\r\n    postRenderReadOnly: function (surrogateKey, cell, tableCell) {\r\n        // Call base\r\n        this._super(surrogateKey, cell, tableCell);\r\n    },\r\n\r\n    /**\r\n     * Returns the xpath to be used\r\n     * @returns {string}\r\n     */\r\n    getContextXpath: function () {\r\n        var self = this;\r\n        var form = self.getFormContainer();\r\n        var xpathContext = (form.properties.xpathContext) ? form.properties.xpathContext + \".\" : \"\";\r\n        return xpathContext + this.grid.properties.xpath + \"[id=\" + this.surrogateKey + \"]\";\r\n    },\r\n\r\n    /**\r\n     * Template method to implement in each children to customize each control\r\n     */\r\n    preRenderControl: function () {\r\n        if (this.value != undefined && this.properties.value != undefined) {\r\n            this.properties.value = this.value;\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Creates the event of generation of templates.\r\n     * @param filename\r\n     */\r\n    deleteDocumentTemplate: function (filename) {\r\n        var self = this;\r\n        var grid = self.parent;\r\n        var params = {};\r\n\r\n        params.xpath = self.properties.xpath + \"[fileName='\" + filename + \"']\";\r\n        params.idRender = self.properties.id;\r\n        params.xpathContext = self.getContextXpath();\r\n        params.idPageCache = self.properties.idPageCache;\r\n\r\n        $.when(self.dataService.deleteUploadFile(params)).done(function () {\r\n            grid.refresh();\r\n        });\r\n    }\r\n\r\n});\r\n","/*\r\n*   Name: BizAgi Desktop Date Column Decorator Extension\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will redefine the date column decorator class to adjust to desktop devices\r\n*/\r\n\r\n// Extends itself\r\nbizagi.rendering.tablet.columns.column.extend(\"bizagi.rendering.tablet.columns.date\", {}, {\r\n    /*\r\n    *   Apply custom overrides to each decorated instance\r\n    */\r\n    applyOverrides: function (decorated) {\r\n        this._super(decorated);\r\n    }   \r\n});","/*\r\n*   Name: BizAgi Tablet Text Column Decorator Extension\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will redefine the text column decorator class to adjust to tablet devices\r\n*/\r\n\r\n// Extends from column\r\nbizagi.rendering.tablet.columns.column.extend(\"bizagi.rendering.tablet.columns.text\", {}, {});\r\n","/*\r\n*   Name: BizAgi Tablet Number Column Decorator Extension\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will redefine the number column decorator class to adjust to tablet devices\r\n*/\r\n\r\n// Extends from column\r\nbizagi.rendering.tablet.columns.column.extend(\"bizagi.rendering.tablet.columns.number\", {}, {});\r\n","\r\n/*\r\n *   Name: Bizagi Column Rendering Tablet numberScientificNotation\r\n *   Author: Luis Cabarique - LuisCE\r\n *   Comments:\r\n *   -   This script will define a base class to define the Column Scientific number notation\r\n */\r\n\r\nbizagi.rendering.tablet.columns.column.extend(\"bizagi.rendering.tablet.columns.numberScientificNotation\", {}, {\r\n    /*\r\n     *   Post process the element after it has been rendered\r\n     */\r\n    postRender: function (surrogateKey, cell) {\r\n        // Call base\r\n        this._super(surrogateKey, cell);\r\n        // Apply styles to input\r\n        var input = $(\"input\", cell);\r\n        this.applyColumnStyles(input);\r\n    },\r\n\r\n    renderSummary: function (key, value) {\r\n        var self = this;\r\n        return self.renderReadOnly(key, value);\r\n    },\r\n\r\n    postRenderSummary: function (key, value) {\r\n        var self = this;\r\n        self.postRenderReadOnly(key, value);\r\n        return true;\r\n    }\r\n});","/**\r\n *   Name: Bizagi Tablet Column Decorator Extension\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will redefine the column decorator class to adjust to tablet devices\r\n */\r\n\r\n// Extends itself\r\nbizagi.rendering.tablet.columns.column.extend(\"bizagi.rendering.tablet.columns.image\", {}, {\r\n\r\n    applyOverrides: function (decorated) {\r\n        var self = this;\r\n        var properties = self.properties;\r\n        this._super(decorated);\r\n\r\n        // decorated.getUploadXpath = this.getUploadXpath;\r\n        decorated.properties.xpathContext = properties.xpathContext.length > 0 ?\r\n                    properties.xpathContext + \".\" + self.grid.properties.xpath + \"[id=\" + decorated.surrogateKey + \"]\" :\r\n                    self.grid.properties.xpath + \"[id=\" + decorated.surrogateKey + \"]\";\r\n    },\r\n\r\n    /*\r\n    *   Returns the xpath to be used  \r\n    */\r\n    /*getUploadXpath: function () {\r\n        return (this.grid.properties.xpath || this.properties.xpath ) + \"[id=\" + this.surrogateKey + \"].\" + this.properties.xpath;\r\n    }*/\r\n\r\n});\r\n","/*\r\n*   Name: BizAgi Tablet Text Column Decorator Extension\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will redefine the text column decorator class to adjust to tablet devices\r\n*/\r\n\r\n// Extends from column\r\nbizagi.rendering.tablet.columns.column.extend(\"bizagi.rendering.tablet.columns.upload\", {}, {\r\n\r\n     applyOverrides: function (decorated) {\r\n        this._super(decorated);\r\n    \r\n        decorated.getUploadXpath = this.getUploadXpath;\r\n        // hack apply upload plugin method in order to execute it only when the control is inserted in the DOM\r\n         var originalMethod = decorated.applyUploadPlugin;\r\n\r\n            decorated.getXpathContext = function () {\r\n                var surrogateKey = this.surrogateKey || \"\";\r\n                var self = this;\r\n                var properties = self.properties;\r\n                return properties.xpathContext.length > 0 ? properties.xpathContext + \".\" + self.grid.properties.xpath + \"[id=\" + self.surrogateKey + \"]\" : self.grid.properties.xpath + \"[id=\" + self.surrogateKey + \"]\";\r\n            };\r\n\r\n            decorated.buildItemUrl = function (file) {\r\n                var self = this;\r\n                var properties = self.properties;\r\n\r\n                var form = self.getFormContainer();\r\n                var xpathContext = self.getXpathContext();\r\n                var contextXpath = \"\";\r\n\r\n                return self.dataService.getUploadFileUrl({\r\n                    idRender: properties.id,\r\n                    xpath: properties.xpath,\r\n                    xpathContext: xpathContext,\r\n                    idPageCache: properties.idPageCache,\r\n                    fileId: file.id,\r\n                    sessionId: form.properties.sessionId,\r\n                    contexttype: properties.contexttype\r\n                });\r\n            };\r\n   },\r\n\r\n   getUploadXpath: function () {\r\n        return this.grid.properties.xpath + \"[id=\" + this.surrogateKey + \"].\" + this.properties.xpath;\r\n    }\r\n    \r\n});\r\n","/**\r\n *   Name: Bizagi Tablet Link Column Decorator Extension\r\n *   Author: Bizagi UI Forms\r\n *   Comments:\r\n *   -   This script will redefine the link column decorator class to adjust to tablet devices\r\n */\r\n\r\n// Extends from column\r\nbizagi.rendering.tablet.columns.column.extend(\"bizagi.rendering.tablet.columns.link\", {}, {\r\n\r\n    applyOverrides: function (decorated) {\r\n        var self = this;\r\n        var mode = self.getMode();\r\n\r\n        self._super(decorated);\r\n\r\n        if (mode !== \"design\" && mode !== \"layout\") {\r\n            self.surrogateKey = decorated.surrogateKey;\r\n\r\n            decorated.getXpath = self.getXpath;\r\n            decorated.properties.xpathContext = self.grid.properties.xpath + \"[id=\" + self.surrogateKey + \"]\";\r\n\r\n            if (self.grid.properties.xpathContext && decorated.properties.xpathContext.indexOf(self.grid.properties.xpathContext) === -1)\r\n                decorated.properties.xpathContext = self.grid.properties.xpathContext + \".\" + decorated.properties.xpathContext;\r\n        }\r\n\r\n        if (decorated.properties.type === \"columnFormLink\") {\r\n            decorated.getFormLinkXpath = this.getFormLinkXpath;\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Apply custom overrides to each decorated instance\r\n     * @param xpath\r\n     * @returns {string}\r\n     */\r\n    getXpath: function (xpath) {\r\n        var self = this;\r\n        var xpathPath = xpath;\r\n        var index = xpathPath.indexOf(self.grid.properties.xpath);\r\n\r\n        if (index !== -1) {\r\n            xpathPath = xpathPath.substr(index + self.grid.properties.xpath.length + 1);\r\n        }\r\n\r\n        return self.grid.properties.xpath + \"[id=\" + self.surrogateKey + \"].\" + xpathPath;\r\n    },\r\n\r\n    /**\r\n     * Returns the xpath to be used\r\n     * @returns {string}\r\n     */\r\n    getContextXpath: function () {\r\n        return this.grid.properties.xpath + \"[id=\" + this.surrogateKey + \"]\";\r\n    },\r\n\r\n    /**\r\n     * Get Form Link xpath to use\r\n     * @returns {*}\r\n     */\r\n    getFormLinkXpath: function () {\r\n        // Calculate layout properties to maximized property\r\n        this.properties.maximized = bizagi.util.parseBoolean(this.properties.maximized) != null ? bizagi.util.parseBoolean(this.properties.maximized) : false;\r\n        this.calculateInitialLayoutProperties();\r\n\r\n        if (!this.properties.xpath) return;\r\n        return this.properties.xpath;\r\n    }\r\n});\r\n","/*\r\n*   Name: BizAgi Desktop Text Column Decorator Extension\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will redefine the text column decorator class to adjust to desktop devices\r\n*/\r\n\r\n// Extends from column\r\nbizagi.rendering.tablet.columns.column.extend(\"bizagi.rendering.tablet.columns.uploadecm\", {}, {\r\n    /*\r\n    *   Apply custom overrides to each decorated instance\r\n    */\r\n    applyOverrides: function(decorated) {\r\n        var self = this;\r\n        self._super(decorated);\r\n\r\n        if (decorated && decorated.getControl) {\r\n            self.originalGetControl = decorated.getControl;\r\n            decorated.getControl = self.getControl;\r\n        }\r\n\r\n        decorated.getUploadXpath = this.getUploadXpath;\r\n\r\n        decorated.buildItemUrl = function(file) {\r\n            var self = this;\r\n            var properties = self.properties;\r\n\r\n            var form = self.getFormContainer();\r\n\r\n            var columnXpath = self.getUploadXpath(self.surrogateKey);\r\n            columnXpath = columnXpath.split(\".\");\r\n            var nameFile = columnXpath[columnXpath.length - 1];\r\n            var xpathContext = self.getXpathContext(self.surrogateKey);\r\n\r\n            return self.dataService.getUploadFileUrl({\r\n                idRender: properties.id,\r\n                xpath: nameFile,\r\n                xpathContext: xpathContext,\r\n                idPageCache: properties.idPageCache,\r\n                fileId: file.idFileUpload,\r\n                sessionId: form.properties.sessionId,\r\n                contexttype: properties.contexttype\r\n            });\r\n        };\r\n\r\n        decorated.buildAddParams = function() {\r\n            var self = this;\r\n            var properties = self.properties;\r\n            var form = self.getFormContainer();            \r\n            var columnXpath = self.getUploadXpath(self.surrogateKey);\r\n\r\n            columnXpath = columnXpath.split(\".\");\r\n            var nameFile = columnXpath[columnXpath.length - 1];\r\n            var xpathContext = self.getXpathContext(self.surrogateKey);\r\n\r\n            var data = {\r\n                url: properties.addUrl,\r\n                xpath: properties.xpath,\r\n                idAttrib: properties.idAttrib,\r\n                xpathContext: xpathContext,\r\n                metaValues: [],\r\n                idSession: form.properties.sessionId,\r\n                contexttype: \"entity\",\r\n                validExtensions: properties.validExtensions,\r\n                maxSize: properties.maxSize\r\n            };\r\n\r\n            data[self.Class.BA_CONTEXT_PARAMETER_PREFIX + self.Class.BA_PAGE_CACHE] = properties.idPageCache;\r\n\r\n            return data;\r\n        };\r\n\r\n        decorated.getXpathContext = function() {\r\n            var self = this;\r\n            var properties = self.properties;\r\n            return properties.xpathContext.length > 0\r\n                ? properties.xpathContext + \".\" + self.grid.properties.xpath + \"[id=\" + self.surrogateKey + \"]\"\r\n                : self.grid.properties.xpath + \"[id=\" + self.surrogateKey + \"]\";\r\n        };\r\n    },\r\n    /*\r\n    *   Returns the in-memory processed element when the element is read-only\r\n    */\r\n    renderReadOnly: function(surrogateKey, value) {\r\n        var self = this;\r\n        var cell = \"<div></div>\";\r\n\r\n        var decorated = this.getDecorated(surrogateKey);\r\n        decorated.setValue(value);\r\n        self.setValue(surrogateKey, value);\r\n        self.setSurrogateKey(surrogateKey);\r\n\r\n        self.applyOverrides(decorated);\r\n        // Set grid and id references to the control in order to render the content\r\n        decorated.grid = this.grid;\r\n        decorated.column = this;\r\n        decorated.surrogateKey = surrogateKey;\r\n\r\n        // Set ready deferred\r\n        self.readyDeferred = new $.Deferred();\r\n\r\n        // We need to render the inner control as read-only\r\n        if (decorated.files.length > 0) {\r\n            // Changes editable to false to render read-only\r\n            var editable = this.properties.editable;\r\n            decorated.properties.editable = false;\r\n            cell = decorated.render(\"cell.upload\");\r\n        }\r\n        return cell;\r\n    },\r\n\r\n    /*\r\n    *   Post process the element after it has been rendered\r\n    */\r\n    getUploadXpath: function(surrogateKey) {\r\n        surrogateKey = this.surrogateKey || surrogateKey || \"\";\r\n        return this.grid.properties.xpath + \"[id=\" + surrogateKey + \"].\" + this.properties.xpath;\r\n    },\r\n\r\n    getControl: function() {\r\n        var self = this;\r\n        var result = self._super();\r\n        //TODO: Tablet validar si esto es realmente necesario asi como esta\r\n        if (!result || result.length == 0) {\r\n            return $(\".ui-bizagi-cell-readonly\", self.element || self.observableElement);\r\n        } else {\r\n            return $(\".bz-form-item\", self.element || self.observableElement);\r\n        }\r\n    }\r\n\r\n});\r\n","/**\r\n* Grid control Column Button\r\n*\r\n* @author Ricardo Prez\r\n*/\r\nbizagi.rendering.tablet.columns.column.extend(\"bizagi.rendering.tablet.columns.button\", {}, {\r\n\r\n});","/**\r\n *   Name: Bizagi Tablet Radio Column Decorator Extension\r\n *   Author: Bizagi UI Forms\r\n *   Comments:\r\n *   -   This script will redefine the text column decorator class to adjust to tablet devices\r\n */\r\n\r\n// Extends from column\r\nbizagi.rendering.tablet.columns.combo.extend(\"bizagi.rendering.tablet.columns.radio\", {}, {});\r\n","/*\r\n*   Name: Bizagi Tablet Readonly Column Decorator Extension\r\n*   Author: UI Forms Team\r\n*   Comments:\r\n*   -   This script will redefine the readonly column decorator class to adjust to tablet devices\r\n*/\r\n\r\n// Extends from column\r\nbizagi.rendering.tablet.columns.column.extend(\"bizagi.rendering.tablet.columns.readonly\", {}, bizagi.rendering.columns.readonly.prototype );\r\n// Extends itself\r\nbizagi.rendering.tablet.columns.readonly.extend(\"bizagi.rendering.tablet.columns.readonly\",{}, {\r\n    \r\n});","/**\r\n *   Name: Bizagi Tablet Column Decorator Extension\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will redefine the column decorator class to adjust to tablet devices\r\n */\r\n\r\n// Extends itself\r\nbizagi.rendering.tablet.columns.column.extend(\"bizagi.rendering.tablet.columns.search\", {}, bizagi.rendering.columns.search.prototype );\r\n// Extends itself\r\nbizagi.rendering.tablet.columns.search.extend(\r\n  \"bizagi.rendering.tablet.columns.search\",\r\n  {},\r\n  {\r\n    renderReadOnly: function(surrogateKey, value) {\r\n      if (value && value.length > 0) {\r\n        value = [].concat(value[0]);\r\n        return this._super(surrogateKey, {\r\n          id: value[0],\r\n          label: value[1],\r\n          additionallabel: value[2] || undefined\r\n        });\r\n      } else {\r\n        return this._super(surrogateKey, value);\r\n      }\r\n    },\r\n\r\n    render: function(surrogateKey, value) {\r\n      var self = this;\r\n      if (value && value.length > 0) {\r\n        value = [].concat(value[0]);\r\n        return self._super(surrogateKey, {\r\n          id: value[0],\r\n          label: value[1],\r\n          additionallabel: value[2] || undefined\r\n        });\r\n      } else {\r\n        return self._super(surrogateKey, value);\r\n      }\r\n    },\r\n\r\n    /*\r\n     *   Post process the element after it has been rendered\r\n     */\r\n    postRender: function(surrogateKey, cell) {\r\n      // Call base\r\n      this._super(surrogateKey, cell);\r\n\r\n      var decorated = this.getDecorated(surrogateKey);\r\n      decorated.refreshControl = this.refreshControl;\r\n    },\r\n\r\n    refreshControl: function() {\r\n      this.grid.refreshCell({\r\n        key: this.surrogateKey,\r\n        column: this.properties.xpath,\r\n        xpathContext: this.getFormContainer().properties.xpathContext\r\n      });\r\n    }\r\n  }\r\n);","/*\r\n*   Name: BizAgi Tablet Column Decorator Extension\r\n*   Author: RicharU\r\n*   Comments:\r\n*   -   This script will redefine the column decorator class to adjust to tablet devices\r\n*/\r\n\r\n// Extends itself\r\nbizagi.rendering.tablet.columns.combo.extend(\"bizagi.rendering.tablet.columns.list\", {}, {});\r\n","/*\r\n*   Name: BizAgi tablet exclusiveCheck Column Decorator Extension\r\n*   Author: RicharU\r\n*   Comments:\r\n*   -   This script will redefine the check column to adjust to tablet devices\r\n*/\r\n\r\n// Extends from column\r\nbizagi.rendering.tablet.columns.column.extend(\"bizagi.rendering.tablet.columns.exclusiveCheck\", {}, {\r\n    /*\r\n     *   Returns the in-memory processed element\r\n     *   so the caller could append it to any place\r\n     */\r\n    render: function (surrogateKey, value) {\r\n\r\n        var self = this;\r\n        // Set flag to check when a render has changed\r\n        self.changed = false;\r\n        var properties = self.properties;\r\n        // Set grid and id references to the control in order to render the content\r\n        var decorated = self.getDecorated(surrogateKey);\r\n        decorated.grid = self.grid;\r\n        decorated.column = this;\r\n        decorated.surrogateKey = surrogateKey;\r\n\r\n        // Set cell value\r\n\r\n       \r\n        self.setValue(surrogateKey, value || false);\r\n        var tmpCheck = self.grid.enabledChecks[self.properties.xpath].find(function(el){ \r\n            return el.id == surrogateKey;\r\n        });\r\n        if(typeof tmpCheck == \"undefined\"){                         \r\n           self.grid.enabledChecks[self.properties.xpath].push({                \r\n               id: surrogateKey,\r\n               value : value || false,\r\n               originalValue : value || false,\r\n               changed : false\r\n           });    \r\n        }\r\n        \r\n        if (value == null){\r\n            self.changed = true;\r\n            var obj = {};\r\n            obj[self.properties.xpath] = self.getValue(surrogateKey);\r\n            self.grid.changes[surrogateKey] = obj;\r\n        }\r\n       \r\n        // Override render properties\r\n        self.overrideDecoratedRenderProperties(surrogateKey);\r\n\r\n\r\n        // If the render is not editable return the readonly version of the column\r\n        if (!properties.editable)\r\n            return self.renderReadOnly.apply(self, arguments);\r\n\r\n        // Returns the decorated render inside a custom layout for columns\r\n        self.readyDeferred = new $.Deferred();\r\n        var cell = decorated.render(\"cell\");\r\n\r\n        // If the render changes set the flag on\r\n        decorated.bind(\"renderchange\", function () {\r\n            self.changed = true;\r\n            var checkList = self.grid.enabledChecks[self.properties.xpath];\r\n\r\n            checkList.forEach(function (el) {\r\n                if (el.id == surrogateKey) {\r\n                    el.value = decorated.value;\r\n                    el.changed = true;\r\n                }\r\n                else if (decorated.value && el.value){\r\n                    var tmpDecorated = self.getDecorated(el.id);\r\n                    tmpDecorated.setDisplayValue(false);\r\n                    self.setValue(el.id, false);\r\n                    el.value = false;\r\n                    el.changed = true;\r\n                }\r\n            });\r\n            \r\n            var simpleXpathArray = self.properties.xpath.split(\".\");\r\n            self.grid.exclusiveChanges[self.properties.xpath] = {\r\n                xpath: self.properties.xpath,\r\n                simpleXpath: simpleXpathArray[simpleXpathArray.length - 1],\r\n                value: self.getValue(surrogateKey),\r\n                key: surrogateKey\r\n            };\r\n        });\r\n\r\n        self.bind(\"rendered\", function () {\r\n            self.readyDeferred.resolve();\r\n        });\r\n\r\n\r\n        return cell;\r\n    },\r\n\r\n    /*\r\n     *   Post process the element after it has been rendered\r\n     */\r\n    postRender: function (surrogateKey, cell) {\r\n        // Call base\r\n        this._super(surrogateKey, cell);\r\n\r\n        var self = this;\r\n        var mode = self.getMode();\r\n\r\n        this.setSurrogateKey(surrogateKey);\r\n        if (mode == \"execution\") {\r\n\r\n            var decorated = this.getDecorated(surrogateKey);\r\n            var control = decorated.getControl();\r\n\r\n            // Check if its new row\r\n            if (control.parents(\"tr\").data(\"new-row\")) {\r\n                // Show a disabled check box\r\n                control.html('<input type=\"checkbox\" name=\"exclusiveCheck\" title=\"' + bizagi.localization.getResource('render-grid-column-button-mandatory-key') + '\" disabled=\"disabled\" style=\"width:16.5px;height:16.5px;\">');\r\n\r\n                //Set the column with this attribute, so when the control is evaluated in isValid(), validated\r\n                //also if it is required, and belongs from a new row\r\n                self.isNewRow = true;\r\n            } else {\r\n                self.isNewRow = false;\r\n            }\r\n        }\r\n    },\r\n\r\n    isValueValid: function(surrogateKey, value, invalidElements, propertyOverrides){\r\n        self = this;\r\n        self.grid.enabledChecks = self.grid.enabledChecks || {};\r\n        var checkedValues =  (self.grid.enabledChecks[self.properties.xpath] || []).filter(function (el){ \r\n            return el.value;\r\n        });\r\n\r\n        if (checkedValues.length > 1) {\r\n            var message = self.getResource(\"render-exclusive-column-check-error\").replaceAll(\"#label#\", self.properties.displayName);\r\n            /* var messageData = {xpath: self.properties.xpath, message: message}; */\r\n            invalidElements.push(message);\r\n            return false;\r\n        } else {\r\n            return true;\r\n        }\r\n\r\n    }\r\n\r\n});","/*\r\n *   Name: Bizagi Base Render Factory\r\n *   Author: Diego Parra\r\n *   Comments:\r\n *   -   This script will define an abstract render factory in order to do common stuff for all device factories\r\n */\r\n\r\n$.Class.extend(\"bizagi.rendering.base.factory\", {}, {\r\n    /* \r\n    *   Constructor\r\n    */\r\n    init: function (dataService) {\r\n        this.templates = {};\r\n        this.dataService = dataService;        \r\n    },\r\n\r\n    /**\r\n    * Load client resources in order to override a default behavior\r\n    */\r\n    loadOverrides: function () {\r\n    },\r\n    /*\r\n    *   This function will load asynchronous stuff needed in the module\r\n    */\r\n    initAsyncStuff: function() {\r\n        return $.when.apply($, [this.loadOverrides(), this.loadTemplates()]);\r\n    },\r\n    /*\r\n    *   Load all the templates used for rendering\r\n    */\r\n    loadTemplates: function () {\r\n    },\r\n    /*\r\n    *   Load one template and save it internally\r\n    */\r\n    loadTemplate: function(template, templateDestination) {\r\n        var self = this;\r\n\r\n        // Go fetch the template\r\n        return bizagi.templateService.getTemplate(templateDestination, template)\r\n                .done(function (resolvedTemplate) {\r\n                self.templates[template] = resolvedTemplate;\r\n            });\r\n    },\r\n    /*\r\n    * Returns a common  used template for the framework\r\n    */\r\n    getCommonTemplate: function (template) {        \r\n        return this.templates[template];\r\n    },\r\n    /*\r\n    *   Returns the appropiate container based on the container type\r\n    */\r\n    getContainer: function (params) {\r\n        // TODO: REMOVE IMPLEMENTATION\r\n\r\n        var type = params.type;\r\n        var data = params.data;\r\n        var containerParams = $.extend(params, {\r\n            renderFactory: this,\r\n            dataService: params.dataService || this.dataService\r\n        });\r\n\r\n        if (type == \"form\") {\r\n            return new bizagi.rendering.form(containerParams);\r\n        }\r\n\r\n        if (type == \"mobileform\") {\r\n            return new bizagi.rendering.mobileform(containerParams);\r\n        }\r\n\r\n        if (type == \"template\") {\r\n            return new bizagi.rendering.formTemplate(containerParams);\r\n        }\r\n\r\n        if (type == \"queryForm\") {\r\n            return new bizagi.rendering.queryForm(containerParams);\r\n        }\r\n\r\n        if (type == \"layout\") {\r\n            return new bizagi.rendering.layout(containerParams);\r\n        }\r\n\r\n        if (type == \"usersForm\") {\r\n            return new bizagi.rendering.usersForm(containerParams);\r\n        }\r\n\r\n        if (type == \"panel\") {\r\n            return new bizagi.rendering.panel(containerParams);\r\n        }\r\n\r\n        if (type == \"contentPanel\" || type == \"contentpanel\") {\r\n            return new bizagi.rendering.contentPanel(containerParams);\r\n        }\r\n\r\n        if (type.toLowerCase() == \"nestedform\") {\r\n            return new bizagi.rendering.nestedForm(containerParams);\r\n        }\r\n\r\n        if (type == \"tab\") {\r\n            return new bizagi.rendering.tab(containerParams);\r\n        }\r\n\r\n        if (type == \"tabItem\" || type == \"tabitem\") {\r\n            return new bizagi.rendering.tabItem(containerParams);\r\n        }\r\n\r\n        if (type == \"horizontal\") {\r\n            return new bizagi.rendering.horizontal(containerParams);\r\n        }\r\n\r\n        if (type == \"accordion\") {\r\n            return new bizagi.rendering.accordion(containerParams);\r\n        }\r\n\r\n        if (type == \"accordionItem\") {\r\n            return new bizagi.rendering.accordionItem(containerParams);\r\n        }\r\n\r\n        if (type == \"group\") {\r\n            return new bizagi.rendering.group(containerParams);\r\n        }\r\n\r\n        if (type == \"mobilegroup\") {\r\n            return new bizagi.rendering.mobilegroup(containerParams);\r\n        }\r\n\r\n        if (type == \"searchForm\") {\r\n            containerParams.context = \"search\";\r\n            containerParams.contexttype = \"metadata\";\r\n            return new bizagi.rendering.searchForm(containerParams);\r\n        }\r\n\r\n        // No type supported\r\n        bizagi.log(type + \" not supported in render factory\", data, \"error\");\r\n        return null;\r\n    },\r\n    /*\r\n    *   Returns the appropiate render based on the render type\r\n    */\r\n    getRender: function (params) {\r\n\r\n        // TODO: REMOVE IMPLEMENTATION\r\n        var type = params.type;\r\n        var data = params.data;\r\n        var renderParams = $.extend(params, {\r\n            renderFactory: this,\r\n            dataService: params.dataService || this.dataService\r\n        });\r\n\r\n        if (!type)\r\n            type = \"label\";\r\n\r\n        if (type == \"text\") {\r\n            var isExtended = bizagi.util.parseBoolean(data.properties.isExtended) || false;\r\n\r\n            if (isExtended) {\r\n                // Creates one extended render\r\n                return new bizagi.rendering.extendedText(renderParams);\r\n            }\r\n\r\n            // Creates one normal text render\r\n            return new bizagi.rendering.text(renderParams);\r\n        }\r\n        if (type == \"mobiletext\") {\r\n            return new bizagi.rendering.mobiletext(renderParams);\r\n        }\r\n\r\n        if (type == \"association\") {\r\n            return new bizagi.rendering.association(renderParams);\r\n        }\r\n\r\n        if (type == \"label\") {\r\n            return new bizagi.rendering.label(renderParams);\r\n        }\r\n\r\n        if (type == \"hidden\") {\r\n            return new bizagi.rendering.hidden(renderParams);\r\n        }\r\n\r\n        if (type == \"number\") {\r\n            return new bizagi.rendering.number(renderParams);\r\n        }\r\n\r\n        if (type == \"money\") {\r\n            return new bizagi.rendering.money(renderParams);\r\n        }\r\n\r\n        if (type == \"date\") {\r\n            return new bizagi.rendering.date(renderParams);\r\n        }\r\n\r\n        if (type == \"boolean\") {\r\n            var display = data.properties.display || \"option\";\r\n\r\n            if (display == \"check\") {\r\n                // Creates one check render\r\n                return new bizagi.rendering.check(renderParams);\r\n            }\r\n\r\n            // Creates one yes-no render\r\n            return new bizagi.rendering.yesno(renderParams);\r\n        }\r\n\r\n        if (type == \"combo\") {\r\n            return new bizagi.rendering.combo(renderParams);\r\n        }\r\n\r\n        if (/^cascadingcombo$/i.test(type)) {\r\n            return new bizagi.rendering.cascadingCombo(renderParams);\r\n        }\r\n\r\n        if (type == \"list\") {\r\n            return new bizagi.rendering.list(renderParams);\r\n        }\r\n\r\n        if (type == \"multiSelect\") {\r\n            return new bizagi.rendering.multiSelect(renderParams);\r\n        }\r\n\r\n        if (type == \"radio\") {\r\n            return new bizagi.rendering.radio(renderParams);\r\n        }\r\n\r\n        if (type == \"image\") {\r\n            // Override for test purposes\r\n            return new bizagi.rendering.image(renderParams);\r\n        }\r\n        if (type == \"uploadecm\") {\r\n            // Check if its ECM file            \r\n            return new bizagi.rendering.ecm(renderParams);\r\n        }\r\n\r\n        if (type == \"upload\") {\r\n            return new bizagi.rendering.upload(renderParams);\r\n        }\r\n        if (type == \"grid\") {\r\n            return new bizagi.rendering.grid(renderParams);\r\n        }\r\n\r\n        if (type == \"groupedgrid\") {\r\n            return new bizagi.rendering.grid(renderParams);\r\n        }\r\n\r\n        if (type == \"search\") {\r\n            return new bizagi.rendering.search(renderParams);\r\n        }\r\n\r\n        if (type == \"suggest\") {\r\n            renderParams.data.properties.enableQuerySuggestBehavior = true;\r\n            return new bizagi.rendering.search(renderParams);\r\n        }\r\n\r\n        if (type == \"searchList\") {\r\n            return new bizagi.rendering.searchList(renderParams);\r\n        }\r\n\r\n        if (type == \"letter\") {\r\n            return new bizagi.rendering.letter(renderParams);\r\n        }\r\n\r\n        if (type == \"button\") {\r\n            return new bizagi.rendering.button(renderParams);\r\n        }\r\n\r\n        if (type == \"formLink\") {\r\n            return new bizagi.rendering.formLink(renderParams);\r\n        }\r\n\r\n        if (type == \"link\") {\r\n            return new bizagi.rendering.link(renderParams);\r\n        }\r\n\r\n        if (type == \"layoutImage\") {\r\n            return new bizagi.rendering.layoutImage(renderParams);\r\n        }\r\n\r\n        if (type == \"layoutLink\") {\r\n            return new bizagi.rendering.layoutLink(renderParams);\r\n        }\r\n\r\n        if (type == \"layoutLabel\") {\r\n            return new bizagi.rendering.layoutLabel(renderParams);\r\n        }\r\n\r\n        if (type == \"layoutText\") {\r\n            return new bizagi.rendering.layoutText(renderParams);\r\n        }\r\n\r\n        if (type == \"layoutDateTime\") {\r\n            return new bizagi.rendering.layoutDateTime(renderParams);\r\n        }\r\n\r\n        if (type == \"layoutNumber\") {\r\n            return new bizagi.rendering.layoutNumber(renderParams);\r\n        }\r\n\r\n        if (type == \"layoutMoney\") {\r\n            return new bizagi.rendering.layoutMoney(renderParams);\r\n        }\r\n\r\n        if (type == \"layoutPlaceholder\") {\r\n            return new bizagi.rendering.layoutPlaceholder(renderParams);\r\n        }\r\n\r\n        if (type == \"actionLauncher\") {\r\n            return new bizagi.rendering.actionLauncher(renderParams);\r\n        }\r\n\r\n        if (type == \"layoutBoolean\") {\r\n            return new bizagi.rendering.layoutBoolean(renderParams);\r\n        }\r\n\r\n        if (type == \"layoutUpload\") {\r\n            return new bizagi.rendering.layoutUpload(renderParams);\r\n        }\r\n\r\n        if (type == \"entityTemplate\") {\r\n            return new bizagi.rendering.entityTemplate(renderParams);\r\n        }\r\n\r\n        if (type == \"polymorphicLauncher\") {\r\n            return new bizagi.rendering.polymorphicLauncher(renderParams);\r\n        }\r\n\r\n        if (type == \"userfield\") {\r\n            return new bizagi.rendering.userfieldWrapper(renderParams);\r\n        }\r\n\r\n        // Check search renders (starts with \"search\")\r\n        if (type.indexOf(\"search\") == 0) {\r\n            return this.getSearchRender(params);\r\n        }\r\n\r\n        if (type.indexOf(\"query\") == 0) {\r\n            return this.getQueryRender(params);\r\n        }\r\n\r\n        if (type == \"document\") {\r\n            return new bizagi.rendering.document(renderParams);\r\n        }\r\n\r\n        if (type == \"image\") {\r\n            return new bizagi.rendering.image(renderParams);\r\n        }\r\n        if (type == \"fileprint\") {\r\n            return new bizagi.rendering.fileprint(renderParams);\r\n        }\r\n        if (type == \"geolocation\") {\r\n            return new bizagi.rendering.geolocation(renderParams);\r\n        }\r\n\r\n        if (type == \"collectionnavigator\") {\r\n            return new bizagi.rendering.collectionnavigator(renderParams);\r\n        }\r\n\r\n        if (type == \"getUser\") {\r\n            return new bizagi.rendering.getUser(renderParams);\r\n        }\r\n\r\n        if (type == \"rangeDate\") {\r\n            return new bizagi.rendering.rangeDate(renderParams);\r\n        }\r\n\r\n        if (type == \"rangeMoney\") {\r\n            return new bizagi.rendering.rangeMoney(renderParams);\r\n        }\r\n\r\n        if (type == \"rangeNumber\") {\r\n            return new bizagi.rendering.rangeNumber(renderParams);\r\n        }\r\n\r\n        if (type == \"activityCheckList\") {\r\n            return new bizagi.rendering.activityCheckList(renderParams);\r\n        }\r\n\r\n        // No type supported\r\n        bizagi.log(type + \" not supported in render factory\", data, \"error\");\r\n        return null;\r\n    },\r\n    /*\r\n    *   Returns the appropiate column based on the render type\r\n    */\r\n    getColumn: function (params) {\r\n        var type = params.type;\r\n        var data = params.data;\r\n        var columnParams = $.extend(params, {\r\n            renderFactory: this,\r\n            dataService: params.dataService || this.dataService,\r\n            singleInstance: bizagi.util.isEmpty(params.singleInstance) ? true : params.singleInstance\r\n        });\r\n\r\n        if (type == \"columnText\") {\r\n            var isExtended = bizagi.util.parseBoolean(data.properties.isExtended) || false;\r\n\r\n            if (isExtended) {\r\n                // Creates one extended render\r\n                columnParams.decorated = bizagi.rendering.extendedText;\r\n            } else {\r\n                // Creates one normal text render\r\n                columnParams.decorated = bizagi.rendering.text;\r\n            }\r\n            return new bizagi.rendering.columns.text(columnParams);\r\n        }\r\n\r\n        if (type == \"columnSearchList\") {\r\n            columnParams.decorated = bizagi.rendering.searchList;\r\n            return new bizagi.rendering.columns.searchList(columnParams);\r\n        }\r\n\r\n        if (type == \"columnNumber\") {\r\n            columnParams.decorated = bizagi.rendering.number;\r\n            return new bizagi.rendering.columns.number(columnParams);\r\n        }\r\n\r\n        if (type == \"columnMoney\") {\r\n            columnParams.decorated = bizagi.rendering.money;\r\n            return new bizagi.rendering.columns.number(columnParams);\r\n        }\r\n\r\n        if (type == \"columnDate\") {\r\n            columnParams.decorated = bizagi.rendering.date;\r\n            return new bizagi.rendering.columns.date(columnParams);\r\n        }\r\n\r\n        if (type == \"columnBoolean\") {\r\n            var display = data.properties.display || \"option\";\r\n\r\n            if (display == \"check\") {\r\n                // Creates one check render\r\n                columnParams.decorated = bizagi.rendering.check;\r\n                if (params.data.properties.isExclusive) {\r\n                    return new bizagi.rendering.columns.exclusiveCheck(columnParams);\r\n                }\r\n            } else {\r\n                // Creates one yes-no render\r\n                columnParams.decorated = bizagi.rendering.yesno;\r\n            }\r\n            return new bizagi.rendering.columns.column(columnParams);\r\n        }\r\n\r\n        if (type == \"columnCombo\") {\r\n            columnParams.decorated = bizagi.rendering.combo;\r\n            return new bizagi.rendering.columns.combo(columnParams);\r\n        }\r\n\r\n        if (type == \"columnRadio\") {\r\n            columnParams.decorated = bizagi.rendering.radio;\r\n            return new bizagi.rendering.columns.radio(columnParams);\r\n        }\r\n\r\n        if (type == \"columnList\") {\r\n            columnParams.decorated = bizagi.rendering.list;\r\n            return new bizagi.rendering.columns.list(columnParams);\r\n        }\r\n\r\n        if (type == \"columnHidden\") {\r\n            columnParams.decorated = bizagi.rendering.hidden;\r\n            return new bizagi.rendering.columns.column(columnParams);\r\n        }\r\n\r\n        if (type == \"columnUpload\") {\r\n            columnParams.decorated = bizagi.rendering.upload;\r\n            return new bizagi.rendering.columns.upload(columnParams);\r\n        }\r\n\r\n        if (type == \"columnImage\") {\r\n            columnParams.decorated = bizagi.rendering.image;\r\n            return new bizagi.rendering.columns.image(columnParams);\r\n        }\r\n\r\n        if (type == \"columnUploadEcm\") {\r\n            columnParams.decorated = bizagi.rendering.ecm;\r\n            return new bizagi.rendering.columns.uploadecm(columnParams);\r\n        }\r\n        if (type == \"columnLink\") {\r\n            columnParams.decorated = bizagi.rendering.link;\r\n            return new bizagi.rendering.columns.link(columnParams);\r\n        }\r\n\r\n        if (type == \"columnFormLink\") {\r\n            columnParams.decorated = bizagi.rendering.formLink;\r\n            return new bizagi.rendering.columns.link(columnParams);\r\n        }\r\n\r\n        if (type == \"columnUserfield\") {\r\n            columnParams.decorated = bizagi.rendering.userfieldWrapper;\r\n            return new bizagi.rendering.columns.column(columnParams);\r\n        }\r\n\r\n        if (type == \"columnSearch\") {\r\n            columnParams.decorated = bizagi.rendering.search;\r\n            return new bizagi.rendering.columns.search(columnParams);\r\n        }\r\n\r\n        if (type == \"columnLabel\") {\r\n            columnParams.decorated = bizagi.rendering.label;\r\n            return new bizagi.rendering.columns.column(columnParams);\r\n        }\r\n\r\n        if (type == \"columnReadonly\") {\r\n            columnParams.decorated = bizagi.rendering.label;\r\n            return new bizagi.rendering.columns.readonly(columnParams);\r\n        }\r\n\r\n        if (type == \"columnDocument\") {\r\n            columnParams.decorated = bizagi.rendering.document;\r\n            return new bizagi.rendering.columns.document(columnParams);\r\n        }\r\n\r\n        if (type == \"columnLetter\") {\r\n            columnParams.decorated = bizagi.rendering.letter;\r\n            return new bizagi.rendering.columns.letter(columnParams);\r\n        }\r\n\r\n        if (type == \"columnButton\") {\r\n            columnParams.decorated = bizagi.rendering.button;\r\n            return new bizagi.rendering.columns.button(columnParams);\r\n        }\r\n\r\n        // No type supported\r\n        bizagi.log(type + \" not supported in render factory\", data, \"error\");\r\n        return null;\r\n    },\r\n    /*\r\n    *   Returns the appropiate search render based on the type\r\n    */\r\n    getSearchRender: function (params) {\r\n        var type = params.type;\r\n        var data = params.data;\r\n        var searchParams = $.extend(params, {\r\n            renderFactory: this,\r\n            dataService: params.dataService || this.dataService\r\n        });\r\n\r\n        if (type == \"searchText\") {\r\n            var isExtended = bizagi.util.parseBoolean(data.properties.isExtended) || false;\r\n\r\n            if (isExtended) {\r\n                // Creates one extended render\r\n                return new bizagi.rendering.extendedText(searchParams);\r\n            }\r\n\r\n            // Creates one normal text render\r\n            return new bizagi.rendering.text(searchParams);\r\n        }\r\n\r\n        if (type == \"searchBoolean\") {\r\n            var display = data.properties.display || \"option\";\r\n\r\n            if (display == \"check\") {\r\n                // Creates one check render\r\n                return new bizagi.rendering.check(searchParams);\r\n            }\r\n\r\n            // Creates one yes-no render\r\n            return new bizagi.rendering.yesno(searchParams);\r\n        }\r\n\r\n        if (type == \"searchNumber\") {\r\n            if (data.properties.dataType == 29) {\r\n                //Creates a Scientific Notation render\r\n                return new bizagi.rendering.numberScientificNotation(searchParams);\r\n            }\r\n            return new bizagi.rendering.number(searchParams);\r\n        }\r\n\r\n        if (type == \"searchMoney\") {\r\n            return new bizagi.rendering.money(searchParams);\r\n        }\r\n\r\n        if (type == \"searchDate\") {\r\n            return new bizagi.rendering.date(searchParams);\r\n        }\r\n\r\n        if (type == \"searchCombo\") {\r\n            return new bizagi.rendering.combo(searchParams);\r\n        }\r\n\r\n        if (type == \"searchSuggest\") {\r\n            return new bizagi.rendering.search(searchParams);\r\n        }\r\n\r\n        if (type == \"searchLabel\") {\r\n            return new bizagi.rendering.label(searchParams);\r\n        }\r\n\r\n        // No type supported\r\n        bizagi.log(type + \" not supported in render factory\", data, \"error\");\r\n        return null;\r\n    },\r\n    /*\r\n    *   Returns the appropiate search render based on the type\r\n    */\r\n    getQueryRender: function (params) {\r\n        var type = params.type;\r\n        var data = params.data;\r\n        var searchParams = $.extend(params, {\r\n            renderFactory: this,\r\n            dataService: params.dataService || this.dataService\r\n        });\r\n\r\n        if (type == \"queryText\") {\r\n            var isExtended = bizagi.util.parseBoolean(data.properties.isExtended) || false;\r\n\r\n            if (isExtended) {\r\n                // Creates one extended render\r\n                return new bizagi.rendering.queryExtendedText(searchParams);\r\n            }\r\n\r\n            // Creates one normal text render\r\n            return new bizagi.rendering.queryText(searchParams);\r\n        }\r\n\r\n        if (type == \"queryBoolean\") {\r\n            var display = data.properties.display || \"option\";\r\n\r\n            if (display == \"check\") {\r\n                // Creates one check render\r\n                return new bizagi.rendering.queryCheck(searchParams);\r\n            }\r\n\r\n            // Creates one yes-no render\r\n            return new bizagi.rendering.queryYesNo(searchParams);\r\n        }\r\n\r\n        if (type == \"queryNumber\") {\r\n\r\n            return new bizagi.rendering.queryNumber(searchParams);\r\n        }\r\n\r\n        if (type == \"queryMoney\") {\r\n            return new bizagi.rendering.queryMoney(searchParams);\r\n        }\r\n\r\n        if (type == \"queryDate\") {\r\n            return new bizagi.rendering.queryDate(searchParams);\r\n        }\r\n\r\n        if (type == \"queryCombo\") {\r\n            return new bizagi.rendering.queryCombo(searchParams);\r\n        }\r\n\r\n        if (type == \"queryCascadingCombo\") {\r\n            return new bizagi.rendering.queryCascadingCombo(searchParams);\r\n        }\r\n\r\n        if (type == \"querySuggest\") {\r\n            return new bizagi.rendering.querySuggest(searchParams);\r\n        }\r\n\r\n        if (type == \"queryLabel\") {\r\n            return new bizagi.rendering.queryLabel(searchParams);\r\n        }\r\n\r\n        if (type == \"queryList\") {\r\n            return new bizagi.rendering.queryList(searchParams);\r\n        }\r\n        \r\n        if (type == \"queryMultiSelect\") {\r\n            return new bizagi.rendering.queryMultiSelect(searchParams);\r\n        }\r\n\r\n        if (type == \"querySearch\") {\r\n            return new bizagi.rendering.querySearch(searchParams);\r\n        }\r\n\r\n        if (type == \"queryRadio\") {\r\n            return new bizagi.rendering.queryRadio(searchParams);\r\n        }\r\n\r\n        if (type == \"queryState\") {\r\n            return new bizagi.rendering.queryState(searchParams);\r\n        }\r\n\r\n        if (type == \"queryCaseState\") {\r\n            return new bizagi.rendering.queryCaseState(searchParams);\r\n        }\r\n\r\n        if (type == \"queryProcess\") {\r\n            return new bizagi.rendering.queryProcess(searchParams);\r\n        }\r\n\r\n        if (type == \"querySearchUser\") {\r\n            return new bizagi.rendering.querySearchUser(searchParams);\r\n        }\r\n\r\n        if (type == \"queryHidden\") {\r\n            return new bizagi.rendering.hidden(searchParams);\r\n        }\r\n\r\n        // No type supported\r\n        bizagi.log(type + \" not supported in render factory\", data, \"error\");\r\n        return null;\r\n    },\r\n    /*\r\n    *   Method to fetch templates from a private dictionary\r\n    */\r\n    getTemplate: function (template) {\r\n        var self = this;\r\n        return self.templates[template];\r\n    }\r\n});\r\n","/**\r\n *   Name: Bizagi Tablet Render Factory\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will define a render factory to create tablet versions of each render type\r\n */\r\n\r\nbizagi.rendering.base.factory.extend(\"bizagi.rendering.tablet.factory\", {}, {\r\n\r\n    /**\r\n     * Load all the templates used for rendering     \r\n     */\r\n    loadTemplates: function () {\r\n        var self = this;\r\n        var defer = new $.Deferred();\r\n\r\n        $.when(\r\n\r\n            // Icons\r\n            self.loadTemplate(\"icons\", self.getFileTemplate(\"common.bizagi.rendering.icons\")),\r\n\r\n            // Common\r\n            self.loadTemplate(\"form-error\", self.getFileTemplate(\"bizagi.rendering.tablet.form-error\")),\r\n        \tself.loadTemplate(\"form-waiting\", self.getFileTemplate(\"bizagi.rendering.tablet.form-waiting\")),\r\n\r\n            // Containers\r\n            self.loadTemplate(\"form\", self.getFileTemplate(\"bizagi.rendering.tablet.form\") + \"#bz-form-container\"),\r\n            self.loadTemplate(\"complexgateway\", self.getFileTemplate(\"bizagi.rendering.tablet.form\") + \"#bz-form-complex-gateway\"),\r\n\r\n            self.loadTemplate(\"panel\", self.getFileTemplate(\"bizagi.rendering.tablet.panel\")),\r\n            self.loadTemplate(\"tab\", self.getFileTemplate(\"bizagi.rendering.tablet.tab\")),\r\n            self.loadTemplate(\"tabItem\", self.getFileTemplate(\"bizagi.rendering.tablet.tabItem\")),\r\n            self.loadTemplate(\"horizontal\", self.getFileTemplate(\"bizagi.rendering.tablet.horizontal\")),\r\n            self.loadTemplate(\"accordion\", self.getFileTemplate(\"bizagi.rendering.tablet.accordion\")),\r\n            self.loadTemplate(\"accordionItem\", self.getFileTemplate(\"bizagi.rendering.tablet.accordionItem\")),\r\n            self.loadTemplate(\"group\", self.getFileTemplate(\"bizagi.rendering.tablet.group\")),\r\n            self.loadTemplate(\"searchForm\", self.getFileTemplate(\"bizagi.rendering.tablet.searchForm\")),\r\n            self.loadTemplate(\"contentPanel\", self.getFileTemplate(\"bizagi.rendering.tablet.contentPanel\")),\r\n\r\n            // Renders\r\n            self.loadTemplate(\"render\", self.getFileTemplate(\"bizagi.rendering.tablet.render\")),\r\n            self.loadTemplate(\"readonly\", self.getFileTemplate(\"bizagi.rendering.tablet.readonly\")),\r\n            self.loadTemplate(\"text\", self.getFileTemplate(\"bizagi.rendering.tablet.text\")+ \"#bz-render-text\"),\r\n            self.loadTemplate(\"text-readOnly\", self.getFileTemplate(\"bizagi.rendering.tablet.text\")+ \"#bz-render-text-readonly\"),\r\n            self.loadTemplate(\"extendedText\", self.getFileTemplate(\"bizagi.rendering.tablet.extendedText\") + \"#bz-render-extended-text\"),\r\n            self.loadTemplate(\"extendedText-readOnly\", self.getFileTemplate(\"bizagi.rendering.tablet.extendedText\") + \"#bz-render-extended-text-readonly\"),\r\n\r\n            self.loadTemplate(\"number\", self.getFileTemplate(\"bizagi.rendering.tablet.number\")),\r\n            self.loadTemplate(\"numberScientificNotation\", self.getFileTemplate(\"bizagi.rendering.tablet.numberScientificNotation\")),\r\n            self.loadTemplate(\"date\", self.getFileTemplate(\"bizagi.rendering.tablet.date\")),\r\n            self.loadTemplate(\"yesno\", self.getFileTemplate(\"bizagi.rendering.tablet.yesno\")),\r\n            self.loadTemplate(\"check\", self.getFileTemplate(\"bizagi.rendering.tablet.check\")),\r\n            self.loadTemplate(\"checkList\", self.getFileTemplate(\"bizagi.rendering.tablet.checkList\")),\r\n            \r\n            self.loadTemplate(\"combo\", self.getFileTemplate(\"bizagi.rendering.tablet.combo\") + \"#bz-combo-control\"),\r\n            self.loadTemplate(\"combo-readonly\", self.getFileTemplate(\"bizagi.rendering.tablet.combo\") + \"#bz-combo-control-readonly\"),\r\n            self.loadTemplate(\"combo-list\", self.getFileTemplate(\"bizagi.rendering.tablet.combo\") + \"#bz-combo-control-list\"), \r\n\r\n            self.loadTemplate(\"modal-header-search\", self.getFileTemplate(\"bizagi.rendering.tablet.modal\") + \"#bz-modal-view-header-search\"), \r\n            self.loadTemplate(\"modal-footer-done\", self.getFileTemplate(\"bizagi.rendering.tablet.modal\") + \"#bz-modal-view-footer-done\"),             \r\n\r\n            self.loadTemplate(\"list\", self.getFileTemplate(\"bizagi.rendering.tablet.list\") + \"#bz-render-list\"),            \r\n            self.loadTemplate(\"list-items\", self.getFileTemplate(\"bizagi.rendering.tablet.list\") + \"#bz-render-list-items\"),\r\n\r\n            self.loadTemplate(\"radio\", self.getFileTemplate(\"bizagi.rendering.tablet.radio\")),            \r\n\r\n            self.loadTemplate(\"image\", self.getFileTemplate(\"bizagi.rendering.tablet.image\") + \"#bz-render-image\"),\r\n            self.loadTemplate(\"image-item\", self.getFileTemplate(\"bizagi.rendering.tablet.image\") + \"#bz-render-image-item\"),\r\n            self.loadTemplate(\"image-preview\", self.getFileTemplate(\"bizagi.rendering.tablet.image\") + \"#bz-render-image-preview\"),\r\n            self.loadTemplate(\"image-readonly\", self.getFileTemplate(\"bizagi.rendering.tablet.image\") + \"#bz-render-image-readonly\"),\r\n            \r\n            self.loadTemplate(\"uploadSlide\", self.getFileTemplate(\"bizagi.rendering.tablet.slide.upload\")),\r\n\r\n            self.loadTemplate(\"upload\", self.getFileTemplate(\"bizagi.rendering.tablet.upload\") + \"#bz-render-upload\"),\r\n            self.loadTemplate(\"upload-item\", self.getFileTemplate(\"bizagi.rendering.tablet.upload\") + \"#bz-render-upload-item\"),\r\n            self.loadTemplate(\"upload-readonly\", self.getFileTemplate(\"bizagi.rendering.tablet.upload\") + \"#bz-render-upload-readonly\"),\r\n\r\n            self.loadTemplate(\"grid\", self.getFileTemplate(\"bizagi.rendering.tablet.grid\")),\r\n            self.loadTemplate(\"cell\", self.getFileTemplate(\"bizagi.rendering.tablet.cell\")),\r\n        \tself.loadTemplate(\"cell.readonly\", self.getFileTemplate(\"bizagi.rendering.tablet.cell.readonly\")),\r\n            self.loadTemplate(\"cell.upload\", self.getFileTemplate(\"bizagi.rendering.tablet.cell.upload\")),\r\n            \r\n            self.loadTemplate(\"search\", self.getFileTemplate(\"bizagi.rendering.tablet.search\") + \"#bz-render-search\"),\r\n            self.loadTemplate(\"search.item\", self.getFileTemplate(\"bizagi.rendering.tablet.search\") + \"#bz-render-search-item\"),\r\n            self.loadTemplate(\"search.items\", self.getFileTemplate(\"bizagi.rendering.tablet.search\") + \"#bz-render-search-items\"),      \r\n\r\n            self.loadTemplate(\"searchItem\", self.getFileTemplate(\"bizagi.rendering.tablet.searchItem\")),\r\n\r\n            self.loadTemplate('searchList', self.getFileTemplate('bizagi.rendering.tablet.searchList') + \"#bz-render-search-list\"),\r\n            self.loadTemplate(\"searchList.item\", self.getFileTemplate(\"bizagi.rendering.tablet.searchList\") + \"#bz-render-search-list-item\"),\r\n            self.loadTemplate(\"searchList.items\", self.getFileTemplate(\"bizagi.rendering.tablet.searchList\") + \"#bz-render-search-list-items\"),            \r\n            self.loadTemplate(\"searchList.actions\", self.getFileTemplate(\"bizagi.rendering.tablet.searchList\") + \"#bz-render-search-list-actions\"),\r\n            self.loadTemplate(\"searchList.tag\", self.getFileTemplate(\"bizagi.rendering.tablet.searchList\") + \"#bz-render-search-list-tag\"),\r\n            self.loadTemplate(\"searchList.readonly\", self.getFileTemplate(\"bizagi.rendering.tablet.searchList\") + \"#bz-render-search-list-readonly\"),\r\n            self.loadTemplate(\"searchList-modal-header\", self.getFileTemplate(\"bizagi.rendering.tablet.searchList\") + \"#bz-render-search-list-modal-header\"),\r\n            \r\n            self.loadTemplate(\"letter\", self.getFileTemplate(\"bizagi.rendering.tablet.letter\")),\r\n            self.loadTemplate(\"letter.readonly\", self.getFileTemplate(\"bizagi.rendering.tablet.letter.readonly\")),\r\n            self.loadTemplate(\"letter.dialog\", self.getFileTemplate(\"bizagi.rendering.tablet.dialog-letter\")),\r\n            self.loadTemplate(\"button\", self.getFileTemplate(\"bizagi.rendering.tablet.button\")),\r\n            self.loadTemplate(\"link\", self.getFileTemplate(\"bizagi.rendering.tablet.link\")),\r\n            self.loadTemplate(\"formLink\", self.getFileTemplate(\"bizagi.rendering.tablet.formLink\")),\r\n            self.loadTemplate(\"geolocation\", self.getFileTemplate(\"bizagi.rendering.tablet.geolocation\")),\r\n            self.loadTemplate('association', self.getFileTemplate('bizagi.rendering.tablet.association')),\r\n\r\n            self.loadTemplate(\"ecm\", self.getFileTemplate(\"bizagi.rendering.tablet.ecm\") + \"#bz-render-ecm\"),\r\n            self.loadTemplate(\"ecm-item\", self.getFileTemplate(\"bizagi.rendering.tablet.ecm\") + \"#bz-render-ecm-item\"),\r\n            self.loadTemplate(\"ecm-readonly\", self.getFileTemplate(\"bizagi.rendering.tablet.ecm\") + \"#bz-render-ecm-readonly\"),\r\n\r\n            self.loadTemplate(\"list-multiselect\", self.getFileTemplate(\"bizagi.rendering.tablet.multiSelect\") + \"#bz-multiselect\"),\r\n            self.loadTemplate(\"multiselect-list\", self.getFileTemplate(\"bizagi.rendering.tablet.multiSelect\") + \"#bz-multiselect-list\"),\r\n\r\n            self.loadTemplate(\"document\", self.getFileTemplate(\"bizagi.rendering.tablet.document\") + \"#bz-document-generator\"),\r\n            self.loadTemplate(\"document-item\", self.getFileTemplate(\"bizagi.rendering.tablet.document\") + \"#bz-document-generator-item\"),\r\n            self.loadTemplate(\"document-readonly\", self.getFileTemplate(\"bizagi.rendering.tablet.document\") + \"#bz-document-generator-readonly\"),\r\n            self.loadTemplate(\"document-download\", self.getFileTemplate(\"bizagi.rendering.tablet.document\") + \"#bz-document-generator-download\"),\r\n\r\n            // Action launcher\r\n            self.loadTemplate(\"render-actionLauncher\", self.getFileTemplate(\"bizagi.rendering.tablet.actionLauncher\") + \"#bz-rendering-actionLauncher\"),\r\n            self.loadTemplate(\"render-actionLauncher-horizontal\", self.getFileTemplate(\"bizagi.rendering.tablet.actionLauncher\") + \"#bz-rendering-actionLauncher-horizontal\"),\r\n            self.loadTemplate(\"render-actionLauncher-vertical\", self.getFileTemplate(\"bizagi.rendering.tablet.actionLauncher\") + \"#bz-rendering-actionLauncher-vertical\"),\r\n            self.loadTemplate(\"render-actionLauncher-actions-to-execute\", self.getFileTemplate(\"bizagi.rendering.tablet.actionLauncher\") + \"#bz-rendering-actionLauncher-actions-to-execute\"),\r\n            self.loadTemplate(\"render-actionLauncher-design\", self.getFileTemplate(\"bizagi.rendering.tablet.actionLauncher\") + \"#bz-rendering-actionLauncher-design\"),\r\n\r\n            // Polymorphic launcher\r\n            self.loadTemplate(\"render-polymorphicLauncher\", self.getFileTemplate(\"bizagi.rendering.tablet.polymorphicLauncher\") + \"#bz-rendering-polymorphicLauncher\"),\r\n            self.loadTemplate(\"render-polymorphicLauncher-vertical-tree\", self.getFileTemplate(\"bizagi.rendering.tablet.polymorphicLauncher\") + \"#bz-rendering-polymorphicLauncher-vertical-tree\"),\r\n            self.loadTemplate(\"render-polymorphicLauncher-vertical-tree-item\", self.getFileTemplate(\"bizagi.rendering.tablet.polymorphicLauncher\") + \"#bz-rendering-polymorphicLauncher-vertical-tree-item\"),\r\n            self.loadTemplate(\"render-polymorphicLauncher-actions-to-execute\", self.getFileTemplate(\"bizagi.rendering.tablet.polymorphicLauncher\") + \"#bz-rendering-polymorphicLauncher-actions-to-execute\"),\r\n            self.loadTemplate(\"render-polymorphicLauncher-confirm\", self.getFileTemplate(\"bizagi.rendering.tablet.polymorphicLauncher\") + \"#bz-rendering-polymorphicLauncher-confirm\"),\r\n            self.loadTemplate(\"render-polymorphicLauncher-design\", self.getFileTemplate(\"bizagi.rendering.tablet.polymorphicLauncher\") + \"#bz-rendering-polymorphicLauncher-design\"),\r\n\r\n            //Renders Layouts\r\n            self.loadTemplate(\"render-layout\", self.getFileTemplate(\"bizagi.rendering.tablet.layout.render\")),\r\n            self.loadTemplate(\"layout-image\", self.getFileTemplate(\"bizagi.rendering.tablet.layout.image\") + \"#ui-bizagi-render-layout-image\"),\r\n            self.loadTemplate(\"layout-image64\", self.getFileTemplate(\"bizagi.rendering.tablet.layout.image\") + \"#ui-bizagi-render-layout-image64\"),\r\n            self.loadTemplate(\"layout-label\", self.getFileTemplate(\"bizagi.rendering.tablet.layout.label\")),\r\n            self.loadTemplate(\"layout-link\", self.getFileTemplate(\"bizagi.rendering.tablet.layout.link\")),\r\n            self.loadTemplate(\"layout-text\", self.getFileTemplate(\"bizagi.rendering.tablet.layout.text\")),\r\n            self.loadTemplate(\"layout-date-time\", self.getFileTemplate(\"bizagi.rendering.tablet.layout.dateTime\")),\r\n            self.loadTemplate(\"layout-money\", self.getFileTemplate(\"bizagi.rendering.tablet.layout.money\")),\r\n            self.loadTemplate(\"layout-number\", self.getFileTemplate(\"bizagi.rendering.tablet.layout.number\")),\r\n            self.loadTemplate(\"layout-upload\", self.getFileTemplate(\"bizagi.rendering.tablet.layout.upload\")),\r\n             \r\n            // Grid plugin stuff\r\n            self.loadTemplate(\"bizagi.grid.grid\", self.getFileTemplate(\"bizagi.rendering.tablet.grid.component\") + \"#ui-bizagi-grid\"),\r\n            self.loadTemplate(\"bizagi.grid.waiting\", self.getFileTemplate(\"bizagi.rendering.tablet.grid.component\") + \"#ui-bizagi-grid-waiting\"),\r\n            self.loadTemplate(\"bizagi.grid.table\", self.getFileTemplate(\"bizagi.rendering.tablet.grid.component\") + \"#ui-bizagi-grid-table\"),\r\n            self.loadTemplate(\"bizagi.grid.table.empty\", self.getFileTemplate(\"bizagi.rendering.tablet.grid.component\") + \"#ui-bizagi-grid-table-empty\"),\r\n            self.loadTemplate(\"bizagi.grid.column\", self.getFileTemplate(\"bizagi.rendering.tablet.grid.component\") + \"#ui-bizagi-grid-column\"),\r\n            self.loadTemplate(\"bizagi.grid.column.special\", self.getFileTemplate(\"bizagi.rendering.tablet.grid.component\") + \"#ui-bizagi-grid-column-special\"),\r\n            self.loadTemplate(\"bizagi.grid.row\", self.getFileTemplate(\"bizagi.rendering.tablet.grid.component\") + \"#ui-bizagi-grid-row\"),\r\n            self.loadTemplate(\"bizagi.grid.row.buttons\", self.getFileTemplate(\"bizagi.rendering.tablet.grid.component\") + \"#ui-bizagi-grid-row-buttons\"),\r\n            self.loadTemplate(\"bizagi.grid.cell\", self.getFileTemplate(\"bizagi.rendering.tablet.grid.component\") + \"#ui-bizagi-grid-cell\"),\r\n            self.loadTemplate(\"bizagi.grid.cell.special\", self.getFileTemplate(\"bizagi.rendering.tablet.grid.component\") + \"#ui-bizagi-grid-cell-special\"),\r\n            self.loadTemplate(\"bizagi.grid.pager\", self.getFileTemplate(\"bizagi.rendering.tablet.grid.component\") + \"#ui-bizagi-grid-pager\"),\r\n            self.loadTemplate(\"bizagi.grid.buttons\", self.getFileTemplate(\"bizagi.rendering.tablet.grid.component\") + \"#ui-bizagi-grid-buttons\"),\r\n            self.loadTemplate(\"bizagi.grid.dynamicpager\", self.getFileTemplate(\"bizagi.rendering.tablet.grid.component\") + \"#ui-bizagi-grid-dynamic-pager\"),\r\n            self.loadTemplate(\"bizagi.grid.totalizer\", self.getFileTemplate(\"bizagi.rendering.tablet.grid.component\") + \"#ui-bizagi-grid-totalizer\"),\r\n\r\n            // Grid Offline\r\n            self.loadTemplate(\"bizagi.grid.offline.buttons\", self.getFileTemplate(\"bizagi.rendering.tablet.grid.component\") + \"#bz-grid-offline-buttons\"),\r\n            self.loadTemplate(\"bizagi.grid.offline.row.buttons\", self.getFileTemplate(\"bizagi.rendering.tablet.grid.component\") + \"#bz-grid-offline-row-buttons\"),\r\n            self.loadTemplate(\"bizagi.grid.offline.cell.special\", self.getFileTemplate(\"bizagi.rendering.tablet.grid.component\") + \"#bz-grid-offline-cell-special\")\r\n\r\n        ).done(function () {\r\n            var tmplIcons = $.fasttmpl(self.getTemplate(\"icons\"));\r\n            var svgStoreCounter = $(\"head\").find('#genome-forms-icons').length;\r\n\r\n            if (svgStoreCounter === 0)\r\n                $(\"head\").append(tmplIcons);\r\n\r\n            // Resolve when all templates are loaded\r\n            defer.resolve();\r\n        });\r\n\r\n        return defer.promise();\r\n    },\r\n\r\n    getFileTemplate: function(src, onDemand){\r\n        var device = bizagi.detectDevice();\r\n        return bizagi.getTemplate(src, onDemand, device == \"desktop\" ? \"tablet_ios\" : device);\r\n    },\r\n    /**\r\n     * Returns the appropiate container based on the container type    \r\n     */\r\n    getContainer: function (params) {\r\n        var self = this;\r\n        var type = params.type;        \r\n        var containerParams = $.extend(params, {\r\n            renderFactory: this,\r\n            dataService: params.dataService || this.dataService\r\n        });\r\n\r\n        type = type.replace(/tablet/, '');    \r\n\r\n        if (type == \"form\")\r\n            return new bizagi.rendering.tablet.form(containerParams);\r\n\r\n        if (type == \"template\")\r\n            return new bizagi.rendering.tablet.formTemplate(containerParams);\r\n\r\n        if (type == \"queryForm\")\r\n            return new bizagi.rendering.tablet.queryForm(containerParams);\r\n\r\n        if (type == \"layout\")\r\n            return new bizagi.rendering.tablet.layout(containerParams);\r\n\r\n        if (type == \"usersForm\")\r\n            return new bizagi.rendering.tablet.usersForm(containerParams);\r\n\r\n        if (type == \"panel\")\r\n            return new bizagi.rendering.tablet.panel(containerParams);\r\n\r\n        if (type == \"contentPanel\" || type == \"contentpanel\")\r\n            return new bizagi.rendering.tablet.contentPanel(containerParams);\r\n\r\n        if (type == \"nestedForm\")\r\n            return new bizagi.rendering.tablet.nestedForm(containerParams);\r\n\r\n        if (type == \"tab\")\r\n            return new bizagi.rendering.tablet.tab(containerParams);\r\n\r\n        if (type == \"tabItem\" || type == \"tabitem\")\r\n            return new bizagi.rendering.tablet.tabItem(containerParams);\r\n\r\n        if (type == \"horizontal\")\r\n            return new bizagi.rendering.tablet.horizontal(containerParams);\r\n\r\n        if (type == \"accordion\")\r\n            return new bizagi.rendering.tablet.accordion(containerParams);\r\n\r\n        if (type == \"accordionItem\")\r\n            return new bizagi.rendering.tablet.accordionItem(containerParams);\r\n\r\n        if (type == \"group\")\r\n            return new bizagi.rendering.tablet.group(containerParams);\r\n\r\n        if (type == \"searchForm\") {\r\n            containerParams.context = \"search\";\r\n            containerParams.contexttype = \"metadata\";\r\n            return new bizagi.rendering.tablet.searchForm(containerParams);\r\n        }\r\n\r\n        if (type == \"mobileform\")\r\n            return new bizagi.rendering.mobileform(containerParams);\r\n\r\n        if (type == \"mobilegroup\")\r\n            return new bizagi.rendering.mobilegroup(containerParams);       \r\n\r\n        // No type supported\r\n        bizagi.log(type + \" not supported in render factory\", params.data, \"error\");\r\n\r\n        return null;\r\n    },   \r\n\r\n    /**\r\n     * Returns the appropiate column based on the render type     \r\n     */\r\n    getColumn: function (params) {\r\n        var type = params.type;\r\n        var data = params.data;\r\n        var columnParams = $.extend(params, {\r\n            renderFactory: this,\r\n            dataService: params.dataService || this.dataService,\r\n            singleInstance: bizagi.util.isEmpty(params.singleInstance) ? true : params.singleInstance\r\n        });\r\n\r\n        type = type.replace(/tablet/, '');    \r\n\r\n        if (type == \"columnText\") {\r\n            var isExtended = bizagi.util.parseBoolean(data.properties.isExtended) || false;\r\n\r\n            if (isExtended) {\r\n                // Creates one extended render\r\n                columnParams.decorated = bizagi.rendering.tablet.extendedText;\r\n            } else {\r\n                // Creates one normal text render\r\n                columnParams.decorated = bizagi.rendering.tablet.text;\r\n            }\r\n\r\n            return new bizagi.rendering.tablet.columns.text(columnParams);\r\n        }\r\n\r\n        if (type == \"columnSearchList\") {\r\n            columnParams.decorated = bizagi.rendering.tablet.searchList;\r\n            return new bizagi.rendering.tablet.columns.searchList(columnParams);\r\n        }\r\n\r\n        if (type == \"columnNumber\") {\r\n            columnParams.decorated = bizagi.rendering.tablet.number;\r\n            return new bizagi.rendering.tablet.columns.number(columnParams);\r\n        }\r\n\r\n        if (type == \"columnMoney\") {\r\n            columnParams.decorated = bizagi.rendering.tablet.money;\r\n            return new bizagi.rendering.tablet.columns.number(columnParams);\r\n        }\r\n\r\n        if (type == \"columnDate\") {\r\n            columnParams.decorated = bizagi.rendering.tablet.date;\r\n            return new bizagi.rendering.tablet.columns.date(columnParams);\r\n        }\r\n\r\n        if (type == \"columnBoolean\") {\r\n            var display = data.properties.display || \"option\";\r\n\r\n            if (display == \"check\") {\r\n                // Creates one check render\r\n                columnParams.decorated = bizagi.rendering.tablet.check;\r\n                if (params.data.properties.isExclusive) {\r\n                    return new bizagi.rendering.tablet.columns.exclusiveCheck(columnParams);\r\n                }\r\n            } else {\r\n                // Creates one yes-no render\r\n                columnParams.decorated = bizagi.rendering.tablet.yesno;\r\n            }\r\n            return new bizagi.rendering.tablet.columns.column(columnParams);\r\n        }\r\n\r\n        if (type == \"columnCombo\") {\r\n            columnParams.decorated = bizagi.rendering.tablet.combo;\r\n            return new bizagi.rendering.tablet.columns.combo(columnParams);\r\n        }\r\n\r\n        if (type == \"columnRadio\") {\r\n            columnParams.decorated = bizagi.rendering.tablet.radio;\r\n            return new bizagi.rendering.tablet.columns.radio(columnParams);\r\n        }\r\n\r\n        if (type == \"columnList\") {\r\n            columnParams.decorated = bizagi.rendering.tablet.list;\r\n            return new bizagi.rendering.tablet.columns.list(columnParams);\r\n        }\r\n\r\n        if (type == \"columnHidden\") {\r\n            columnParams.decorated = bizagi.rendering.tablet.hidden;\r\n            return new bizagi.rendering.tablet.columns.column(columnParams);\r\n        }\r\n\r\n        if (type == \"columnUpload\") {\r\n            columnParams.decorated = bizagi.rendering.tablet.upload;\r\n            return new bizagi.rendering.tablet.columns.upload(columnParams);\r\n        }\r\n\r\n        if (type == \"columnImage\") {\r\n            columnParams.decorated = bizagi.rendering.tablet.image;\r\n            return new bizagi.rendering.tablet.columns.image(columnParams);\r\n        }\r\n\r\n        if (type == \"columnUploadEcm\") {\r\n            columnParams.decorated = bizagi.rendering.tablet.ecm;\r\n            return new bizagi.rendering.tablet.columns.uploadecm(columnParams);\r\n        }\r\n\r\n        if (type == \"columnLink\") {\r\n            columnParams.decorated = bizagi.rendering.tablet.link;\r\n            return new bizagi.rendering.tablet.columns.link(columnParams);\r\n        }\r\n\r\n        if (type == \"columnFormLink\") {\r\n            columnParams.decorated = bizagi.rendering.tablet.formLink;\r\n            return new bizagi.rendering.tablet.columns.link(columnParams);\r\n        }\r\n\r\n        if (type == \"columnUserfield\") {\r\n            columnParams.decorated = bizagi.rendering.tablet.userfieldWrapper;\r\n            return new bizagi.rendering.tablet.columns.column(columnParams);\r\n        }\r\n\r\n        if (type == \"columnSearch\") {\r\n            columnParams.decorated = bizagi.rendering.tablet.search;\r\n            return new bizagi.rendering.tablet.columns.search(columnParams);\r\n        }\r\n\r\n        if (type == \"columnLabel\") {\r\n            columnParams.decorated = bizagi.rendering.tablet.label;\r\n            return new bizagi.rendering.tablet.columns.column(columnParams);\r\n        }\r\n\r\n        if (type == \"columnReadonly\") {\r\n            columnParams.decorated = bizagi.rendering.tablet.label;\r\n            return new bizagi.rendering.tablet.columns.readonly(columnParams);\r\n        }\r\n\r\n        if (type == \"columnDocument\") {\r\n            columnParams.decorated = bizagi.rendering.tablet.document;\r\n            return new bizagi.rendering.tablet.columns.document(columnParams);\r\n        }\r\n\r\n        /*\r\n        Not supported\r\n         if (type == \"columnLetter\") {\r\n            columnParams.decorated = bizagi.rendering.letter;\r\n            return new bizagi.rendering.columns.letter(columnParams);\r\n        } */\r\n\r\n        if (type == \"columnButton\") {\r\n            columnParams.decorated = bizagi.rendering.tablet.button;\r\n            return new bizagi.rendering.tablet.columns.button(columnParams);\r\n        }\r\n\r\n        // No type supported\r\n        bizagi.log(type + \" not supported in render factory\", data, \"error\");\r\n        return null;\r\n    },\r\n\r\n    getRender: function (params) {\r\n        var self = this;\r\n        var type = params.type;\r\n        var data = params.data;\r\n        var properties = data.properties;\r\n        var renderParams = $.extend(params, {\r\n            renderFactory: this,\r\n            dataService: params.dataService || this.dataService\r\n        });\r\n\r\n        // Check is offline form        \r\n        var isOfflineForm = bizagi.util.isOfflineForm({ container: params.parent });\r\n\r\n        if (!type)\r\n            type = \"label\";\r\n\r\n        type = type.replace(/tablet/, '');        \r\n\r\n        if (type == \"text\") {\r\n            var isExtended = bizagi.util.parseBoolean(data.properties.isExtended) || false;\r\n\r\n            // Creates one extended render\r\n            if (isExtended) {\r\n                return new bizagi.rendering.tablet.extendedText(renderParams);\r\n            }\r\n\r\n            // Creates one normal text render\r\n            return new bizagi.rendering.tablet.text(renderParams);\r\n        }\r\n\r\n        if (type == \"association\") {\r\n            return new bizagi.rendering.tablet.association(renderParams);\r\n        }\r\n\r\n        if (type == \"label\") {\r\n            return new bizagi.rendering.tablet.label(renderParams);\r\n        }\r\n\r\n        if (type == \"hidden\") {\r\n            return new bizagi.rendering.tablet.hidden(renderParams);\r\n        }\r\n\r\n        if (type == \"number\") {\r\n            // Number Scientific Notation\r\n            if (properties && properties.dataType === 29) {\r\n                return new bizagi.rendering.tablet.numberScientificNotation(renderParams);\r\n            }\r\n\r\n            return new bizagi.rendering.tablet.number(renderParams);\r\n        }\r\n\r\n        if (type == \"money\") {\r\n            return new bizagi.rendering.tablet.money(renderParams);\r\n        }\r\n\r\n        if (type == \"date\") {\r\n            return new bizagi.rendering.tablet.date(renderParams);\r\n        }\r\n\r\n        if (type == \"boolean\") {\r\n            var display = data.properties.display || \"option\";\r\n\r\n            // Creates one check render\r\n            if (display == \"check\") {\r\n                return new bizagi.rendering.tablet.check(renderParams);\r\n            }\r\n\r\n            // Creates one yes-no render\r\n            return new bizagi.rendering.tablet.yesno(renderParams);\r\n        }\r\n\r\n        if (type == \"combo\") {\r\n            return new bizagi.rendering.tablet.combo(renderParams);\r\n        }\r\n\r\n        if (/^cascadingcombo$/i.test(type)) {\r\n            return new bizagi.rendering.tablet.cascadingCombo(renderParams);\r\n        }\r\n\r\n        if (type == \"list\") {\r\n            return new bizagi.rendering.tablet.list(renderParams);\r\n        }\r\n\r\n        if (type == \"radio\") {\r\n            return new bizagi.rendering.tablet.radio(renderParams);\r\n        }\r\n\r\n        if (type == \"image\") {\r\n            if( isOfflineForm && !bizagi.util.isOfflineFormsV2Supported()){\r\n                return new bizagi.rendering.tablet.image.old(renderParams);\r\n            } \r\n            else {\r\n                return new bizagi.rendering.tablet.image(renderParams);\r\n            }\r\n            \r\n        }\r\n\r\n        if (type == \"uploadecm\") {\r\n            return new bizagi.rendering.tablet.ecm(renderParams);\r\n        }\r\n\r\n        if (type == \"upload\") {\r\n            // Review the offline status or context              \r\n            if (isOfflineForm) {\r\n                if(!bizagi.util.isOfflineFormsV2Supported()){\r\n                    return new bizagi.rendering.tablet.upload.offline.old(renderParams);\r\n                }\r\n                else{\r\n                    return new bizagi.rendering.tablet.upload.offline(renderParams);\r\n                }\r\n            } else {\r\n                return new bizagi.rendering.tablet.upload(renderParams);\r\n            }\r\n        }\r\n\r\n        if (type == \"grid\") {\r\n            // Review the offline status or context             \r\n            if (isOfflineForm) {\r\n                if(!bizagi.util.isOfflineFormsV2Supported()){\r\n                    return new bizagi.rendering.tablet.grid.offline.old(renderParams);\r\n                }\r\n                else{\r\n                    return new bizagi.rendering.tablet.grid.offline(renderParams);\r\n                }\r\n            } else {\r\n                return new bizagi.rendering.tablet.grid(renderParams);\r\n            }\r\n        }\r\n\r\n        if (type == \"groupedgrid\") {\r\n            // return new bizagi.rendering.tablet.grid.grouped(renderParams);\r\n            return new bizagi.rendering.tablet.grid(renderParams); // Not supported. Nonetheless, all entries are shown.\r\n        }\r\n\r\n        if (type == \"search\") {\r\n            return new bizagi.rendering.tablet.search(renderParams);\r\n        }\r\n\r\n        if (type == \"suggest\") {\r\n            renderParams.data.properties.enableQuerySuggestBehavior = true;\r\n            return new bizagi.rendering.tablet.search(renderParams);\r\n        }\r\n\r\n        if (type == \"searchList\") {\r\n            return new bizagi.rendering.tablet.searchList(renderParams);\r\n        }\r\n\r\n        if (type == \"multiSelect\") {\r\n            return new bizagi.rendering.tablet.multiSelect(renderParams);\r\n        }\r\n\r\n        if (type == \"button\") {\r\n            return new bizagi.rendering.tablet.button(renderParams);\r\n        }\r\n\r\n        if (type == \"formLink\") {\r\n            return new bizagi.rendering.tablet.formLink(renderParams);\r\n        }\r\n\r\n        if (type == \"link\") {\r\n            return new bizagi.rendering.tablet.link(renderParams);\r\n        }\r\n\r\n        if (type == \"actionLauncher\") {\r\n           return new bizagi.rendering.tablet.actionLauncher(renderParams);\r\n        }\r\n\r\n        if (type == \"entityTemplate\") {\r\n           return new bizagi.rendering.tablet.entityTemplate(renderParams);\r\n        }\r\n\r\n        if (type == \"polymorphicLauncher\") {\r\n           return new bizagi.rendering.tablet.polymorphicLauncher(renderParams);\r\n        }\r\n\r\n        if (type == \"userfield\") {\r\n            return new bizagi.rendering.tablet.userfieldWrapper(renderParams);\r\n        }\r\n\r\n        // Check query renders (starts with \"query\")\r\n        //if (type.indexOf(\"query\") == 0) {\r\n        //    return this.getQueryRender(params);\r\n        //}\r\n\r\n        // Check search renders (starts with \"search\")\r\n        if (type.indexOf(\"search\") == 0) {\r\n            return this.getSearchRender(params);\r\n        }\r\n\r\n        if (type == \"document\") {\r\n            return new bizagi.rendering.tablet.document(renderParams);\r\n        }\r\n\r\n        if (type == \"image\") {\r\n            return new bizagi.rendering.tablet.image(renderParams);\r\n        }\r\n\r\n        if (type == \"fileprint\") {\r\n            return new bizagi.rendering.tablet.fileprint(renderParams);\r\n        }\r\n\r\n        if (type == \"geolocation\") {\r\n            return new bizagi.rendering.tablet.geolocation(renderParams);\r\n        }\r\n\r\n        if (type == \"collectionnavigator\") {\r\n            return new bizagi.rendering.tablet.collectionnavigator(renderParams);\r\n        }\r\n\r\n        // Check layout renders (starts with \"layout\")\r\n        if (type.indexOf(\"layout\") === 0) {\r\n            return self.getLayoutRender(params);\r\n        }\r\n\r\n        // Check range renders (starts with \"range\")\r\n        if (type.indexOf(\"range\") === 0) {\r\n            return self.getRangeRender(params);\r\n        }\r\n\r\n        //if (type == \"getUser\") {\r\n        //    return new bizagi.rendering.tablet.getUser(renderParams);\r\n        //}\r\n\r\n        if (type == \"activityCheckList\") {\r\n           return new bizagi.rendering.tablet.activityCheckList(renderParams);\r\n        }\r\n\r\n        if (type == \"mobiletext\")\r\n            return new bizagi.rendering.mobiletext(renderParams);\r\n\r\n        // Deprecated control\r\n        if (type == \"letter\")\r\n            return new bizagi.rendering.tablet.letter(renderParams);\r\n\r\n        // No type supported\r\n        //bizagi.log(type + \" not supported in render factory\", data, \"error\");\r\n        //return null;\r\n        return this._super(params);\r\n    },\r\n\r\n    /**\r\n  * Returns the appropiatelayout render based on the type   \r\n  */\r\n    getLayoutRender: function (params) {\r\n        var type = params.type;        \r\n        var renderParams = $.extend(params, {\r\n            renderFactory: this,\r\n            dataService: params.dataService || this.dataService\r\n        });\r\n\r\n        if (type == \"layoutImage\")\r\n            return new bizagi.rendering.tablet.layoutImage(renderParams);\r\n\r\n        if (type == \"layoutLink\")\r\n            return new bizagi.rendering.tablet.layoutLink(renderParams);\r\n\r\n        if (type == \"layoutLabel\")\r\n            return new bizagi.rendering.tablet.layoutLabel(renderParams);\r\n\r\n        if (type == \"layoutText\")\r\n            return new bizagi.rendering.tablet.layoutText(renderParams);\r\n\r\n        if (type == \"layoutDateTime\")\r\n            return new bizagi.rendering.tablet.layoutDateTime(renderParams);\r\n\r\n        if (type == \"layoutNumber\")\r\n            return new bizagi.rendering.tablet.layoutNumber(renderParams);\r\n\r\n        if (type == \"layoutMoney\")\r\n            return new bizagi.rendering.tablet.layoutMoney(renderParams);\r\n\r\n        if (type == \"layoutPlaceholder\")\r\n            return new bizagi.rendering.tablet.layoutPlaceholder(renderParams);\r\n\r\n        if (type == \"layoutBoolean\")\r\n            return new bizagi.rendering.tablet.layoutBoolean(renderParams);\r\n\r\n        if (type == \"layoutUpload\")\r\n            return new bizagi.rendering.tablet.layoutUpload(renderParams);\r\n\r\n        return this._super(params);\r\n    },\r\n\r\n    /**\r\n     * Returns the appropiate search render based on the type     \r\n     */\r\n    getRangeRender: function (params) {\r\n        var type = params.type;        \r\n        var renderParams = $.extend(params, {\r\n            renderFactory: this,\r\n            dataService: params.dataService || this.dataService\r\n        });\r\n\r\n        if (type === \"rangeDate\")\r\n            return new bizagi.rendering.tablet.rangeDate(renderParams);\r\n\r\n        if (type === \"rangeMoney\")\r\n            return new bizagi.rendering.tablet.rangeMoney(renderParams);\r\n\r\n        if (type === \"rangeNumber\")\r\n            return new bizagi.rendering.tablet.rangeNumber(renderParams);\r\n\r\n        // No type supported\r\n        bizagi.log(type + \" not supported in render factory\", params.data, \"error\");\r\n        return null;\r\n    },\r\n\r\n    /**\r\n     * Returns the appropiate search render based on the type         \r\n     */\r\n    getSearchRender: function (params) {\r\n        var type = params.type;\r\n        var data = params.data;\r\n        var searchParams = $.extend(params, {\r\n            renderFactory: this,\r\n            dataService: params.dataService || this.dataService\r\n        });\r\n\r\n        type = type.replace(/tablet/, '');    \r\n\r\n        if (type == \"searchText\") {\r\n            var isExtended = bizagi.util.parseBoolean(data.properties.isExtended) || false;\r\n\r\n            // Creates one extended render\r\n            if (isExtended)\r\n                return new bizagi.rendering.tablet.extendedText(searchParams);\r\n\r\n            // Creates one normal text render\r\n            return new bizagi.rendering.tablet.text(searchParams);\r\n        }\r\n\r\n        if (type == \"searchBoolean\") {\r\n            var display = data.properties.display || \"option\";\r\n\r\n            // Creates one check render\r\n            if (display == \"check\")\r\n                return new bizagi.rendering.tablet.check(searchParams);\r\n\r\n            // Creates one yes-no render\r\n            return new bizagi.rendering.tablet.yesno(searchParams);\r\n        }\r\n\r\n        if (type == \"searchNumber\") {\r\n            // Creates a Scientific Notation render\r\n            if (data.properties.dataType == 29)\r\n                return new bizagi.rendering.tablet.numberScientificNotation(searchParams);\r\n\r\n            return new bizagi.rendering.tablet.number(searchParams);\r\n        }\r\n\r\n        if (type == \"searchMoney\")\r\n            return new bizagi.rendering.tablet.money(searchParams);\r\n\r\n        if (type == \"searchDate\")\r\n            return new bizagi.rendering.tablet.date(searchParams);\r\n\r\n        if (type == \"searchCombo\")\r\n            return new bizagi.rendering.tablet.combo(searchParams);\r\n\r\n        if (type == \"searchSuggest\")\r\n            return new bizagi.rendering.tablet.search(searchParams);\r\n\r\n        if (type == \"searchLabel\")\r\n            return new bizagi.rendering.tablet.label(searchParams);\r\n\r\n        // No type supported\r\n        bizagi.log(type + \" not supported in render factory\", data, \"error\");\r\n        return null;\r\n    }\r\n});\r\n","/*\r\n*   Name: Bizagi Device Render Factory\r\n*   Author: UI Forms Team\r\n*   Comments:\r\n*   -   This script will detect the current device and then will load the appropriate factory on demand\r\n*/\r\n\r\n$.Class.extend(\"bizagi.rendering.device.factory\", {}, {\r\n\r\n    /**\r\n     * Constructor, detects the device\r\n     * @param params\r\n     */\r\n    init: function (params) {\r\n        this.execution_device = bizagi.util.detectDevice();\r\n        this.cachedFactory = {};\r\n    },\r\n\r\n    /**\r\n     * Returns the appropriate render factory based on the device detection\r\n     * Because it loads the scripts on demand it must return a promise\r\n     * @param dataService\r\n     * @param device\r\n     * @returns {*}\r\n     */\r\n    getRenderFactory: function (dataService, device) {\r\n        var self = this;\r\n        device = device || \"desktop\";\r\n        var defer = new $.Deferred();\r\n\r\n        if (typeof self.cachedFactory[device] !== \"undefined\") {\r\n            // Reset print version value\r\n            self.cachedFactory[device].printVersion = false;\r\n            // Resolve with cached factory                \r\n            defer.resolve(self.cachedFactory[device]);\r\n        } else {\r\n            // If factory is not cached then build it\r\n            if (device === \"print\") {\r\n\r\n                // Load print version references\r\n                self.cachedFactory[device] = new bizagi.rendering.print.factory(dataService);\r\n\r\n                // Wait for async loading\r\n                self.cachedFactory[device].initAsyncStuff()\r\n                    .done(function () {\r\n                        // Resolve operation\r\n                        defer.resolve(self.cachedFactory[device]);\r\n                    });\r\n\r\n            } else if (device === \"desktop\") {\r\n\r\n                // Load desktop references\r\n                self.cachedFactory[device] = new bizagi.rendering.desktop.factory(dataService);\r\n\r\n                // Wait for async loading\r\n                self.cachedFactory[device].initAsyncStuff()\r\n                    .done(function () {\r\n                        // Resolve operation\r\n                        defer.resolve(self.cachedFactory[device]);\r\n                    });\r\n\r\n            } else if (bizagi.util.isTabletDevice(device)) {\r\n\r\n                // Load tablet references\r\n                self.cachedFactory[device] = new bizagi.rendering.tablet.factory(dataService);\r\n\r\n                // Wait for async loading\r\n                self.cachedFactory[device].initAsyncStuff()\r\n                    .done(function () {\r\n                        // Resolve operation\r\n                        defer.resolve(self.cachedFactory[device]);\r\n                    });\r\n            } else if (bizagi.util.isSmartphoneDevice(device)) {\r\n\r\n                // Load tablet references\r\n                self.cachedFactory[device] = new bizagi.rendering.smartphone.factory(dataService);\r\n\r\n                // Wait for async loading\r\n                self.cachedFactory[device].initAsyncStuff()\r\n                    .done(function () {\r\n\r\n                        // Resolve operation\r\n                        defer.resolve(self.cachedFactory[device]);\r\n                    });\r\n            } else {\r\n                // if no device suuported\r\n                bizagi.showMessageBox(\"Not supported device: \" + device);\r\n                defer.reject(\"Not supported device: \" + device);\r\n            }\r\n        }\r\n\r\n        return defer.promise();\r\n    },\r\n\r\n    /**\r\n     * Returns the current data service being used\r\n     * @returns {*}\r\n     */\r\n    getDataService: function () {\r\n        return this.dataService;\r\n    }\r\n\r\n});\r\n","/**\r\n *   Name: Bizagi tablet queryForm Extension\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will redefine the container class to adjust to tablet devices\r\n *   -   Will apply a desktop form template\r\n */\r\n\r\n// Extends from form tablet base\r\nbizagi.rendering.tablet.form.extend(\"bizagi.rendering.tablet.queryForm\", {}, {});","/**\r\n *   Name: Bizagi tablet FormTemplate Extension\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script will redefine the form template class to adjust to tablet devices\r\n */\r\n\r\n// Extends from form tablet base\r\nbizagi.rendering.tablet.form.extend(\"bizagi.rendering.tablet.formTemplate\", bizagi.rendering.formTemplate.prototype);\r\n// Extends itself\r\nbizagi.rendering.tablet.formTemplate.extend(\"bizagi.rendering.tablet.formTemplate\", {}, {});\r\n","/**\r\n *   Name: Bizagi Rendering Users Form\r\n *   Author: UI Forms Team\r\n *   Comments:\r\n *   -   This script override rendering.form to create and update users\r\n */\r\n\r\n// Extends from form tablet base\r\nbizagi.rendering.tablet.form.extend(\"bizagi.rendering.tablet.usersForm\", {}, {});","/*\r\n *   Name: BizAgi Rendering\r\n *   Author: Diego Parra\r\n *   Comments:\r\n *   -   This script will process a rendering page by calling an ajax service to retrieve the model,\r\n *       and then process it to create base layout, and then call the device render factory\r\n */\r\n\r\n// Define BizAgi Rendering namespace\r\nbizagi.rendering = bizagi.rendering || {};\r\n\r\n/*\r\n *   This class will define a method to process the page\r\n *   1. Fetch the data\r\n *   2. Call the device factory to appropriately render the content\r\n */\r\n$.Class.extend(\"bizagi.rendering.facade\", {\r\n    form: undefined,\r\n    executionDeferred: new $.Deferred()\r\n}, {\r\n    /*\r\n    *   Constructor\r\n    */\r\n    init: function (params) {\r\n        params = params || {};\r\n\r\n        // Set observable element\r\n        this.observableElement = $({});\r\n\r\n        // Injection of Device, only for print version purpose\r\n        var device = params.device || \"\";\r\n\r\n        // Defines a device factory for all rendering\r\n        this.deviceFactory = new bizagi.rendering.device.factory();\r\n\r\n        // Creates a data service instance\r\n        this.dataService = new bizagi.render.services.service(params);\r\n\r\n        // Retrieves the render factory\r\n        this.renderFactory = this.deviceFactory.getRenderFactory(this.dataService, device);\r\n    },\r\n    getFactory: function () {\r\n        var self = this;\r\n        return {\r\n            deviceFactory: self.deviceFactory,\r\n            dataService: self.dataService,\r\n            renderFactory: self.renderFactory\r\n        };\r\n    },\r\n    /*\r\n    *   Subscribe method\r\n    */\r\n    subscribe: function () {\r\n        this.observableElement.bind.apply(this.observableElement, arguments);\r\n    },\r\n    /*\r\n    *   Unsubscribe method\r\n    */\r\n    unsubscribe: function () {\r\n        this.observableElement.unbind.apply(this.observableElement, arguments);\r\n    },\r\n    /*\r\n    *   Publish method\r\n    */\r\n    publish: function () {\r\n        return this.observableElement.triggerHandler.apply(this.observableElement, arguments);\r\n    },\r\n    /*\r\n    *   This method will re-execute the process\r\n    */\r\n    update: function (params) {\r\n        var self = this;\r\n\r\n        // Update rendering mode\r\n        if (params.mode)\r\n            self.mode = params.mode;\r\n\r\n        // Enable form buttons on desktop view\r\n        return self.execute($.extend({\r\n            canvas: self.canvas,\r\n            mode: self.mode\r\n        }, params));\r\n    },\r\n    /*\r\n    *   Start point method to use in the main javascript pages\r\n    *   This method will process everything and attach the html directly to the dom\r\n    */\r\n    execute: function (params) {\r\n        var self = this;\r\n        var doc = this.ownerDocument;\r\n        var body = $(\"body\", doc);\r\n        params = params || {};\r\n\r\n        // Creates ready deferred\r\n        if (self.executionDeferred && self.executionDeferred.state) {\r\n            if (self.executionDeferred.state() == \"resolved\") {\r\n                self.executionDeferred = $.Deferred();\r\n            }\r\n        } else {\r\n            self.executionDeferred = $.Deferred();\r\n        }\r\n\r\n        // Performance measurement stuff\r\n        bizagi.chrono.initAndStart(\"rendering+data\", true);\r\n        bizagi.rendering.render.startOptimization();\r\n\r\n        // Override mode\r\n        if (typeof (params.mode) === \"undefined\") {\r\n            if (!bizagi.util.isEmpty(window.location.search)) {\r\n                var queryString = bizagi.util.getQueryString();\r\n                params.mode = queryString[\"mode\"];\r\n            }\r\n        }\r\n\r\n        // If the canvas is not given, we need to create one\r\n        var canvas = self.canvas = params.canvas = params.canvas || $(\"<div />\").appendTo(body);\r\n        self.mode = params.mode;\r\n\r\n        self.process(params).done(function (form) {\r\n\r\n            // Clear canvas    \r\n            if (!params.refreshing) {\r\n                canvas.empty();\r\n            }\r\n\r\n            // Append content\r\n            canvas.append(form.container);\r\n\r\n            // Include process path\r\n            $(form.pathProcess).insertBefore(form.container);\r\n\r\n            // Keep reference in class\r\n            self.form = form;\r\n            self.form.setSize({width: self.lastWidth, height: self.lastHeight});\r\n\r\n            // Save window size variables\r\n            setTimeout(function () {\r\n                self.lastWidth = $(window).width();\r\n                self.lastHeight = $(window).height();\r\n                if (window.self !== window.top)\r\n                    self.resizeInPopUpHTML();\r\n            }, 2000);\r\n\r\n            // Publish an event to check if the form has been set in the DOM\r\n            form.triggerHandler(\"ondomincluded\");\r\n\r\n            // Notify to module users that the form has been rendered\r\n            self.publish(\"rendering-formRendered\", {});\r\n\r\n            // Configure handlers\r\n            self.configureRefresh(form, canvas);\r\n            self.configureRouting(form, canvas);\r\n            self.configureRenderError(form, canvas);\r\n            self.configureResize(form);\r\n            self.configureGlobalHandlers(form);\r\n\r\n            // Check if it is a summary form\r\n            if (params.summaryForm) {\r\n                form.container.addClass(\"ui-bizagi-summary-form\");\r\n            }\r\n\r\n            // Ends main timer and log everything\r\n            bizagi.chrono.stopAndLog(\"rendering\");\r\n            bizagi.chrono.stopAndLog(\"rendering+data\");\r\n            bizagi.chrono.stopAndLog(\"submitForm\");\r\n            bizagi.chrono.stopAndLog(\"submitForm-ajax\");\r\n            bizagi.chrono.stopAndLog(\"waiting\");\r\n\r\n            // Resolves deferred\r\n            bizagi.rendering.render.stopOptimization();\r\n\r\n            // Expose public reference of form\r\n            if (bizagi.override.enableE2EInterface) {\r\n                self.Class.form = self.form;\r\n                self.Class.executionDeferred.resolve(self.form);\r\n            }\r\n\r\n            self.executionDeferred.resolve(self.form);\r\n\r\n        }).fail(function (message, errorType) {\r\n\r\n            $.when(self.renderFactory)\r\n                .done(function (renderFactory) {\r\n\r\n                    if (typeof message === \"undefined\" || message === \"\") {\r\n                        message = bizagi.localization.getResource(\"render-error-unknown\");\r\n                    }\r\n\r\n                    var errorTemplate = renderFactory.getCommonTemplate(\"form-error\");\r\n                    // Fill canvas\r\n                    canvas.empty();\r\n                    canvas.append($.tmpl(errorTemplate, {\r\n                        message: message\r\n                    }));\r\n                    self.publish(\"rendering-formRenderedError\", message);\r\n                    self.canvas.triggerHandler(\"errorform\", message);\r\n                    // Ends main timer and log everything\r\n                    bizagi.chrono.stopAndLog(\"rendering\");\r\n                    bizagi.chrono.stopAndLog(\"rendering+data\");\r\n\r\n                    self.executionDeferred.reject();\r\n                });\r\n        });\r\n\r\n        return self.executionDeferred.promise();\r\n    },\r\n    /*\r\n    *   Returns the execution deferred to determine if the component is ready or not\r\n    */\r\n    ready: function () {\r\n        return this.executionDeferred.promise();\r\n    },\r\n    /*\r\n    *   Loads data and render factory in order to process the form\r\n    *   Returns a deferred to set callbacks when the process is done\r\n    */\r\n    process: function (params) {\r\n        var self = this;\r\n        var defer = new $.Deferred();\r\n\r\n        // Call get form data service\r\n        var dataPromise = self.dataService.getFormData(params);\r\n\r\n        var canvas = self.canvas || params.canvas;\r\n\r\n        bizagi.showErrorAlertDialog = false;\r\n        // Set callback when requests have been done\r\n        $.when(dataPromise, self.renderFactory)\r\n            .done(function (data, renderFactory) {\r\n                bizagi.showErrorAlertDialog = true;\r\n\r\n                // When there is no data trigger an event\r\n                if (bizagi.util.isEmpty(data)) {\r\n                    self.publish(\"no-data-found\");\r\n                    defer.fail();\r\n                    return;\r\n                }\r\n\r\n                if (data && data.type == \"reload\") {\r\n                    var form = self.form;\r\n                    if (form) {\r\n                        form.endLoading();\r\n                        form.dispose();\r\n                    }\r\n                    // Trigger handler on canvas\r\n                    canvas.triggerHandler(\"routing\");\r\n\r\n                } else if (data && data.type == \"suspended\") {\r\n                    var errorTemplate = renderFactory.getTemplate(\"info-message\");\r\n                    var message = bizagi.localization.getResource(\"render-case-suspended\");\r\n                    var errorHtml = $.tmpl(errorTemplate, {\r\n                        message: message\r\n                    });\r\n                    // Remove loading icon from summary container\r\n                    errorHtml.appendTo(canvas);\r\n\r\n                    defer.fail();\r\n\r\n                } else if (data && data.type != \"error\") {\r\n                    if (params.hasOwnProperty('printversion')) {\r\n                        data = self.transformGridControl(data);\r\n                        data.form.properties.editable = \"False\";\r\n                    }\r\n\r\n                    bizagi.chrono.initAndStart(\"rendering\");\r\n                    params.type = (data.form && data.form.properties.type) || params.type;\r\n                    var form = self.processForm(data.form, renderFactory, params);\r\n\r\n                    // Resolve deferred\r\n                    defer.resolve(form);\r\n\r\n                } else {\r\n                    self.getFailDeferred(data, defer);\r\n                }\r\n            }).fail(function (errorMessage) {\r\n            self.getFailDeferred(errorMessage, defer);\r\n        });\r\n\r\n        return defer.promise();\r\n    },\r\n    /**\r\n     * In the print version widget when grid control was rendered, the main render has broken\r\n     * Is necesary change id of grid control to fixed these  problems\r\n     */\r\n    transformGridControl: function (data) {\r\n        var self = this;\r\n        if (data == null) {\r\n            return data;\r\n        }\r\n\r\n        if (data.hasOwnProperty('type') && data.type == 'grid') {\r\n            data.id = data.id + \"-print\";\r\n            data.allowAdd = \"False\";\r\n            data.allowDelete = \"False\";\r\n            data.allowEdit = \"False\";\r\n            data.allowGrouping = \"False\";\r\n            data.allowMore = \"False\";\r\n            data.allowSearch = \"False\";\r\n        } else {\r\n            $.each(data, function (key, value) {\r\n                if (typeof (value) == 'object') {\r\n                    data[key] = self.transformGridControl(data[key]);\r\n                }\r\n            });\r\n        }\r\n        return data;\r\n    },\r\n    /**\r\n     * Resolve deferred\r\n     */\r\n    getFailDeferred: function (errorMessage, defer) {\r\n        var self = this;\r\n        var message = \"\";\r\n        var jsonErrorMessage = {};\r\n        try {\r\n            jsonErrorMessage = JSON.parse(errorMessage.responseText);\r\n        } catch (e) {\r\n            jsonErrorMessage = {message: errorMessage.responseText, errorType: \"ERRORUNKNOWN\"};\r\n        }\r\n\r\n\r\n        if (jsonErrorMessage.message) {\r\n            message += \"<br>Error Type: \" + jsonErrorMessage.errorType;\r\n            message += \"<br>Error Message: \" + jsonErrorMessage.message;\r\n        } else {\r\n            if (jsonErrorMessage.errorType == \"JSharpNotSupportedException\") {\r\n                message += \"<br>Error Message: \" + bizagi.localization.getResource(\"jsharp-required\");\r\n            }\r\n        }\r\n\r\n        // Error in metadata InvalidFormMetadata\r\n        if (jsonErrorMessage.errorType == 'ERRORUNKNOWN') {\r\n            defer.reject(message, jsonErrorMessage.errorType);\r\n        } else {\r\n\r\n            defer.reject(message);\r\n        }\r\n    },\r\n    /*\r\n    *   Process the form\r\n    */\r\n    processForm: function (data, renderFactory, params) {\r\n        var form = renderFactory.getContainer($.extend(params, {\r\n            type: params.type || \"form\",\r\n            data: data\r\n        }));\r\n\r\n        //Orientation RTL - OrderButtons\r\n        if (typeof BIZAGI_ORIENTATION != \"undefined\") {\r\n            if ((form.properties.orientation == \"rtl\" || BIZAGI_ORIENTATION == 'rtl') && form.buttons.length > 0) {\r\n                var buttonsForm = form.buttons[0];\r\n\r\n                form.buttons.splice(0, 1);\r\n                form.buttons.push(buttonsForm);\r\n            }\r\n        }\r\n\r\n        // Render the full form\r\n        form.render();\r\n\r\n        return form;\r\n    },\r\n    /*\r\n    *   Performs a resize\r\n    */\r\n    resize: function (args) {\r\n        var self = this;\r\n        if (self.form) {\r\n            self.form.trigger(\"renderresize\", args);\r\n        }\r\n    },\r\n    /*\r\n    *   Binds a refresh handler to detect when the whole form needs to fetch all data from server\r\n    */\r\n    configureRefresh: function (form, canvas) {\r\n        var self = this;\r\n\r\n        // Attach a refresh handler to recreate all the form\r\n        form.bind(\"refresh\", function (_, refreshParams) {\r\n\r\n            // Find the scroll top\r\n            var parent = form.container.parent();\r\n            parent = bizagi.util.scrollTop(parent);\r\n            var scrollTop = parent.scrollTop();\r\n\r\n            $(self.form).trigger(\"onRefreshStarted\");\r\n\r\n            //Dispose current form\r\n            form.dispose(refreshParams);\r\n            canvas.fastEmpty();\r\n            var canvasParent = canvas.parent();\r\n            if (canvasParent.find(\".ui-bizagi-button-container\").length > 0) {\r\n                canvasParent.find(\".ui-bizagi-button-container\").remove();\r\n            }\r\n\r\n            if (self.executionDeferred && self.executionDeferred.state) {\r\n                if (self.executionDeferred.state() == \"resolved\") {\r\n                    self.executionDeferred = $.Deferred();\r\n                }\r\n            }\r\n\r\n            var formParams = self.form.getParams();\r\n            // Re-execute process\r\n            $.when(self.execute($.extend(refreshParams, {\r\n                canvas: canvas,\r\n                refreshing: true,\r\n                idCase: formParams.idCase,\r\n                displayName: formParams.displayName\r\n            }))).done(function () {\r\n\r\n                // Restore scroll at same position\r\n                setTimeout(function () {\r\n                    parent.scrollTop(scrollTop);\r\n                    $(self.form).trigger(\"onRefreshFinished\");\r\n                }, 100);\r\n            });\r\n\r\n            return self.executionDeferred.promise();\r\n        });\r\n    },\r\n    /*\r\n    *   Binds a resize hanlder to configure the resize behaviour\r\n    */\r\n    configureResize: function (form) {\r\n        var self = this;\r\n\r\n        // Attach resize handler\r\n        form.bind(\"renderresize\", function (_, args) {\r\n            args = args || {};\r\n            // Just allow one resize at a time\r\n            if (self.resizeTimeout)\r\n                return;\r\n            var resizeFn = function () {\r\n                // Call resize event in form\r\n                var width = $(window).width();\r\n                var height = $(window).height();\r\n                if (args.forceResize || width != self.lastWidth) {\r\n\r\n                    // Logging stuff\r\n                    bizagi.chrono.initAndStart(\"resize\");\r\n\r\n                    // Perform resize\r\n                    form.resize({\r\n                        width: width,\r\n                        height: height\r\n                    });\r\n                    self.lastWidth = width;\r\n                    self.lastHeight = height;\r\n\r\n                    // Logging stuff\r\n                    bizagi.chrono.stopAndLog(\"resize\");\r\n                    bizagi.chrono.log(\"resize\");\r\n                }\r\n\r\n                self.resizeTimeout = null;\r\n                clearTimeout(self.resizeTimeout);\r\n            };\r\n            self.resizeTimeout = setTimeout(resizeFn, 0);\r\n\r\n        });\r\n        self.resize();\r\n    },\r\n    /*\r\n    *   Binds a routing handler to detect when the workportal need to enroute the case\r\n    */\r\n    configureRouting: function (form, canvas) {\r\n        // Attach a routing handler to notify to the caller\r\n        form.bind(\"routing\", function (context, triggerParams) {\r\n            //Dispose current form\r\n            form.dispose();\r\n\r\n            // Trigger handler on canvas\r\n            canvas.triggerHandler(\"routing\", triggerParams);\r\n        });\r\n    },\r\n    /*\r\n    *   Binds a generic handler that will be replicated to facade instantiators\r\n    */\r\n    configureGlobalHandlers: function (form) {\r\n        var self = this;\r\n\r\n        // Attach a routing handler to notify to the caller\r\n        form.bind(\"globalHandler\", function (_, args) {\r\n            // Trigger handler on canvas\r\n            return self.publish(args.eventType, args.data);\r\n        });\r\n    },\r\n    /*\r\n    * Binds error form handler to detect when the render element nop posible get information or error in server\r\n    */\r\n    configureRenderError: function (form, canvas) {\r\n        var self = this;\r\n\r\n        form.bind(\"formRenderingError\", function (event, errorMessage) {\r\n            $.when(self.renderFactory)\r\n                .done(function (renderFactory) {\r\n                    var message = \"<br>Error: \";\r\n\r\n                    errorMessage = errorMessage.replace(/(\\r\\n|\\n|\\r)/gm, \"\");\r\n\r\n                    var jsonErrorMessage = JSON.parse(errorMessage);\r\n                    if (jsonErrorMessage.message) {\r\n                        message += jsonErrorMessage.message;\r\n                        message += \"<br>Error Type: \" + jsonErrorMessage.errorType;\r\n                    }\r\n                    var errorTemplate = renderFactory.getCommonTemplate(\"form-error\");\r\n                    // Fill canvas\r\n                    canvas.empty();\r\n                    canvas.append($.tmpl(errorTemplate, {\r\n                        message: message\r\n                    }));\r\n                    //send the type error to differentiate between a form and an item for render\r\n                    self.canvas.triggerHandler(\"errorform\", \"renderItemError\");\r\n                    // Ends main timer and log everything\r\n                    bizagi.chrono.stopAndLog(\"rendering+data\");\r\n                    bizagi.chrono.stopAndLog(\"rendering\");\r\n                });\r\n        });\r\n    },\r\n\r\n    dispose: function () {\r\n        var self = this;\r\n        if (self.form) {\r\n            self.form.dispose();\r\n        }\r\n        bizagi.util.dispose(self);\r\n    },\r\n\r\n    resizeInPopUpHTML: function () {\r\n        if ($(\".activitiFormContainer\").length > 0 && bizagi.util.getQueryString().type != \"cases\") {\r\n            var heightActivitiFormContainer = $(\".activitiFormContainer\").height() || 0;\r\n            var renderForm = $(\".activitiFormContainer #ui-bizagi-webpart-render-container\");\r\n            var buttonContainer = $(\".ui-bizagi-button-container\", \".activitiFormContainer\");\r\n            var heightButtonContainer = buttonContainer.outerHeight() || 0;\r\n            var renderBehavior = bizagi.util.getQueryString().renderBehavior || \"\";\r\n            renderBehavior = renderBehavior.replace(\"#\", \"\");\r\n\r\n            if (renderBehavior == \"PopUp\") {\r\n                if (typeof (self.postMessageSocket) == \"undefined\") {\r\n                    var heightCanvas = $(\".activitiFormContainer\").height() - 50 || 396;\r\n                    $(\"#render-canvas\").height(heightCanvas);\r\n                    $(\"#render-canvas\").css(\"overflowY\", \"scroll\");\r\n                } else $(\".activitiFormContainer\").height($(\".activitiFormContainer\").height() + $(\".ui-bizagi-button-container\").height() + 30);\r\n                $(\".ui-bizagi-button-container\").css(\"position\", \"absolute\");\r\n                $(\".ui-bizagi-button-container\").appendTo(\".activitiFormContainer\");\r\n                if ($(\".ui-bizagi-button-container\").length > 1) {\r\n                    $(\".ui-bizagi-button-container:first\").hide();\r\n                    renderForm.css(\"marginTop\", \"-17px\");\r\n                }\r\n            }\r\n            if (buttonContainer.length > 0) {\r\n                //display buttons\r\n                renderForm.height(heightActivitiFormContainer - 97 - heightButtonContainer);\r\n            }\r\n            if ($(\".ui-bizagi-button-container\").children().length == 0)\r\n                $(\"#render-canvas\").height($(\"#render-canvas\").height() + heightButtonContainer);\r\n            else {\r\n                buttonContainer.width(\"100%\");\r\n                buttonContainer.css(\"marginLeft\", 0);\r\n                buttonContainer.css(\"bottom\", 0);\r\n            }\r\n        } else if (bizagi.util.getQueryString().type == \"render\") {\r\n            $(\"html\").css(\"overflowX\", \"hidden\");\r\n            ($(\"#render\").height() <= window.innerHeight + 5) ? $(\"html\").css(\"overflowY\", \"hidden\")\r\n                : $(\"html\").css(\"overflowY\", \"scroll\");\r\n            $(\".ui-widget-overlay\").height(650);\r\n        }\r\n    }\r\n\r\n});"]}