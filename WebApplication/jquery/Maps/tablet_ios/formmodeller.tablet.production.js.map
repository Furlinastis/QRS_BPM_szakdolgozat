{"version":3,"sources":["jquery/editor/component/renderingview/js/base/bizagi.hacks.rendering.element.js","jquery/editor/component/renderingview/js/tablet/bizagi.hacks.rendering.tablet.container.js","jquery/editor/component/renderingview/js/tablet/bizagi.hacks.rendering.tablet.form.js","jquery/editor/component/renderingview/js/tablet/bizagi.hacks.rendering.tablet.render.js","jquery/editor/component/renderingview/js/tablet/bizagi.hacks.rendering.tablet.group.js","jquery/editor/component/renderingview/js/tablet/bizagi.hacks.rendering.tablet.contentPanel.js","jquery/editor/component/renderingview/js/tablet/bizagi.hacks.rendering.tablet.tab.js","jquery/editor/component/renderingview/js/tablet/bizagi.hacks.rendering.tablet.tabitem.js","jquery/editor/component/renderingview/js/tablet/bizagi.hacks.rendering.tablet.search.js","jquery/editor/component/renderingview/js/tablet/bizagi.hacks.rendering.tablet.image.js","jquery/editor/component/renderingview/js/tablet/bizagi.hacks.rendering.tablet.collectionnavigator.js","jquery/editor/component/renderingview/js/tablet/bizagi.hacks.rendering.tablet.nestedform.js","jquery/editor/component/renderingview/js/tablet/bizagi.hacks.rendering.tablet.date.js","jquery/editor/component/renderingview/js/tablet/bizagi.hacks.rendering.tablet.widget.js"],"names":["bizagi","rendering","element","original","$","extend","prototype","isContainedInNestedForm","self","this","parent","properties","type","isContainedInCollectionNavigator","getFormContainer","isNavigationForm","isContainedInGrid","undefined","column","isReadOnlyForm","isReadOnly","findElement","guid","selectElement","unselectElement","tablet","container","postRenderContainer","apply","arguments","getFormType","click","ev","onClickCanvas","hasClass","sortable","addClass","addDraggableClassToContainer","isContainerSortable","data","display","displayName","form","modeler","params","reviewMode","setTimeout","configureSortablePlugin","isClickEventAllowed","mousedown","onMouseDown","onClick","messageValidation","showValidationMessage","selectElementByGuid","guids","i","l","length","foundElement","IsOnClickEvent","children","disableSortablePlugin","position","offset","width","outerWidth","height","outerHeight","triggerGlobalHandler","removeClass","mainPanel","formModelerSelector","bind","args","onSortStart","onSortFinish","onScrollingForm","ui","currentDragSource","getDragSource","item","items","revert","connectWith","distance","cursorAt","top","left","placeholder","delay","cancel","getMode","containment","helper","event","$template","sortableHelper","$container","start","stop","beforeStop","window","x3","disableSelection","loadHelperTemplate","setConnectWith","classConnect","isContainerDraggable","$containerPanel","each","$child","append","mouseenter","mouseleave","normalizeType","isElementSortAllowed","mode","includes","sortableElement","helperTemplate","toLowerCase","id","caption","icon","mainContainer","tmpl","wrapperMainScroll","appendTo","css","zIndex","widthTotal","parseFloat","eq","when","templateService","getTemplate","concat","pipe","result","toolbar","xpathNavigator","layout","parents","first","changeVisibility","argument","visible","util","parseBoolean","hasChildren","$mainPanel","index","sourceContainer","sortContainerTimeout","finalPosition","not","targetContainer","initialPosition","source","stopImmediatePropagation","button","ctrlIsPressed","x","clientX","y","clientY","preventDefault","stopPropagation","replace","messages","message","split","setValidationMessage","getContainerMessage","containerMessage","next","uniqueId","$message","attr","text","$form","localization","getResource","removeAttr","allowButtons","remove","messageElement","createMessageValidationElement","prepend","resource","mainElement","boundingClient","getBoundingClientRect","clientTopY","clientButtonY","bottom","isInTop","Math","abs","factor","scrollTop","scrollHeight","offsetHeight","delta","render","postRenderElement","configureLayoutElement","setMouseDownEvent","renderSearch","labelElement","getLabelGrid","getLabel","onRenderClick","dblclick","onLabelDoubleClick","resetStyle","configureDroppablePlugin","configureDraggablePlugin","find","onRemoveElement","setDeleteLayoutItem","hoverElement","hoverRestoreElement","closest","hover","detach","draggable","opacity","droppable","hoverClass","tolerance","activeClass","greedy","drop","activate","show","deactivate","hide","on","onDrop","el","colorText","backgroundColor","options","isInternal","isColumn","e","document","activeElement","is","trigger","presenter","editor","component","editableLabel","label","value","subscribe","showElementLabelEditor","$sourceElement","$helperElement","helperData","xpathValue","utilities","buildComplexXpath","xpath","contextScope","isScopeAttribute","guidRelatedEntity","property","renderType","nodeSubtype","sourceGuid","isLayoutElement","group","header","isInNestedform","lastElementInserted","contentPanel","$panel","$header","done","getElement","adjustEditLabel","background-color","border-radius","margin-left","right","tab","$tab","$addButton","$offsetLeft","$offsetRigth","wrap","before","after","info","currentTarget","updatePositions","updateErrorPositions","htmlTabELement","scrollLeft","tabItem","$tabHeader","setTabHeader","axis","sortStart","sortFinish","$htmlTabELement","get","scrollWidth","clientWidth","$currentTabItem","isEditableLabelActive","editDisplayName","redraw","tabHeader","editableLabelPresenter","measureString","dropRender","originalEvent","isObject","search","postRender","advancedSearch","image","control","getControl","containerType","thumbnail","widthWrapper","containerHeight","totalImagesInSameContainer","containerChildsSize","getChildreCount","containerChildsHeightSum","getChildrenSumHeight","countByRenderTypeWithParams","changeImageSize","imageWidth","imageHeight","executeTriggerHandler","widthValue","heightValue","slice","collectionnavigator","isRendered","canvas","navigationform","nestedForm","configureDesignView","title","formDisplayName","date","setDisplayValue","dateControl","getDateControl","inputPlaceholder","valueFormat","color","nameNewClass","fullNewClass","loadStyle","strikethru","underline","basicUserField","getEditableControl","$control","input","collectData","renderValues","getDisplayValue","getReadonlyControl"],"mappings":"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","sourcesContent":["\r\n/*\r\n*   @tittle: BizAgi FormModeler Editor Hacks Rendering Render\r\n*   @authors: Alexander Mejia\r\n\t@date: 06-mar-12\r\n*   @Comments:\r\n*   -   This script will define basic stuff for enable the rendering render\r\n*\t\tin the formModeler\r\n*/\r\n\r\nbizagi.rendering.element.original = $.extend( true, {}, bizagi.rendering.element.prototype );\r\n$.extend(bizagi.rendering.element.prototype, {\r\n        /*\r\n    *   Check if the current element is inside a nested form\r\n    */\r\n    isContainedInNestedForm: function () {\r\n        var self = this;\r\n\r\n        // If the element has no parent, we are in the root element\r\n        if (!self.parent) return false;\r\n\r\n        // If the parent is nested form, this element is contained in a nested form\r\n        if (self.parent.properties.type === \"nestedForm\") return true;\r\n\r\n        // If the parent is collectionnavigator, this element is contained in a collectionnavigator control\r\n        if (self.parent.properties.type === \"collectionnavigator\") return true;\r\n\r\n        // If the element has a parent, then check in parent recursively\r\n        return self.parent.isContainedInNestedForm();\r\n    },\r\n\r\n\r\n    /*\r\n    *   Check if the current element is inside a collection navigator\r\n    */\r\n    isContainedInCollectionNavigator: function () {\r\n        var self = this;\r\n\r\n        var form = self.getFormContainer();\r\n        var properties = form.properties;\r\n\r\n        return properties.isNavigationForm || false;\r\n    },\r\n\r\n    /*\r\n    * Returns true if the element is a column of a grid \r\n    */\r\n    isContainedInGrid: function () {\r\n        var self = this,\r\n            column = self.column;\r\n\r\n        return (column != undefined);\r\n\r\n    },\r\n\r\n\r\n    /*\r\n    * This method returns true if the current form is read only\r\n    */\r\n    isReadOnlyForm: function () {\r\n        var self = this;\r\n\r\n        var form = self.getFormContainer() || {};\r\n        var properties = form.properties || {};\r\n        if (properties.isReadOnly) {\r\n            return true;\r\n        }\r\n\r\n        return false;\r\n    },\r\n\r\n    /*\r\n    *   Finds an element by guid\r\n    */\r\n    findElement: function (guid) {\r\n        var self = this;\r\n        if (!guid) { return null; }\r\n\r\n        if (self.properties.guid === guid) {\r\n            // Element found\r\n            return this;\r\n        }\r\n\r\n        // Element not found\r\n        return null;\r\n    },\r\n\r\n    /*\r\n    *  Selects the current element\r\n    */\r\n    selectElement: function () { },\r\n\r\n    /*\r\n    *  Un-selects the current element\r\n    */\r\n    unselectElement: function () { }\r\n\r\n});","/*\r\n*   @tittle: BizAgi FormModeler Editor Hacks Rendering Container\r\n*   @authors: David Montoya\r\n\t@date: 02-mar-12\r\n*   @Comments:\r\n*   -   This script will define basic stuff for enable the rendering Container\r\n*\t\tin the formModeler\r\n*/\r\n\r\nbizagi.rendering.tablet.container.original = $.extend( true, {}, bizagi.rendering.tablet.container.prototype );\r\n$.extend(bizagi.rendering.tablet.container.prototype, {\r\n    /*\r\n    *   Renders the current container\r\n    *   Also adds sortable behaviour\r\n    */\r\n   postRenderContainer: function (container) {\r\n        var self = this;\r\n\r\n        // Call original post-render\r\n        bizagi.rendering.tablet.container.original.postRenderContainer.apply(this, arguments);\r\n\r\n        // If the current form is readonly return;\r\n        if (self.isReadOnlyForm()) {\r\n            return container;\r\n        }\r\n\r\n        if (self.getFormType() == 'template') {\r\n            if (self.properties.type == 'template') {\r\n                container.click(function (ev) {\r\n                    self.onClickCanvas(ev);\r\n                });\r\n            }\r\n\r\n            return container;\r\n        }\r\n\r\n       // Configure sortable\r\n        if (container.hasClass('ui-sortable')) { container.sortable('destroy'); }\r\n        container.addClass(\"ui-bizagi-itemfordrag\");\r\n        self.addDraggableClassToContainer();\r\n\r\n        if (self.isContainerSortable()) {\r\n\r\n            // Populate element data \r\n            container.data({\r\n                guid: self.properties.guid,\r\n                display: self.properties.displayName,\r\n                type: self.properties.type\r\n            });\r\n\r\n            if(!bizagi.form.modeler.params.reviewMode){\r\n                // Configure sortable plugin\r\n                setTimeout(function () {\r\n                    self.configureSortablePlugin(container);\r\n                }, 100);                \r\n            }\r\n        }\r\n\r\n        // Process clicks\r\n        if (self.isClickEventAllowed()) {\r\n            if (self.properties.type !== undefined &&\r\n                self.properties.type !== \"searchForm\" &&\r\n                self.properties.type !== \"form\" &&\r\n                self.properties.type !== \"queryForm\") {\r\n                container.mousedown(function (ev) { self.onMouseDown(ev); });\r\n                container.click(function (ev) {\r\n                    self.onClick(ev);\r\n                });\r\n            } else {\r\n                container.click(function (ev) {\r\n                    self.onClickCanvas(ev);\r\n                });\r\n            }\r\n        }\r\n       \r\n        if (self.properties.messageValidation) {\r\n            self.showValidationMessage(self.properties.messageValidation);\r\n        }\r\n        \r\n        return container;\r\n    },\r\n\r\n    /*\r\n    *   Selects an element in order to keep consistency between renderings\r\n    */\r\n    selectElementByGuid: function (guids) {\r\n        var self = this;\r\n\r\n        for (var i = 0, l = guids.length; i < l; i++) {\r\n            var guid = guids[i];\r\n            var foundElement = self.findElement(guid);\r\n            if (foundElement) {\r\n                // If the element has been found, then select that element\r\n                foundElement.selectElement({ IsOnClickEvent: false });\r\n            }\r\n        }\r\n    },\r\n\r\n    /*\r\n    *   Finds an element by guid\r\n    */\r\n    findElement: function (guid) {\r\n        var self = this;\r\n        if (!guid) { return null; }\r\n\r\n        if (self.properties.guid === guid) {\r\n            // Element found\r\n            return this;\r\n        } else {\r\n            // Find in children\r\n            for (var i = 0; i < self.children.length; i++) {\r\n                var foundElement = self.children[i].findElement(guid);\r\n                if (foundElement) return foundElement;\r\n            }\r\n        }\r\n\r\n        // Element not found\r\n        return null;\r\n    },\r\n\r\n    /*\r\n    *   Disable sortable plugin\r\n    */\r\n    disableSortablePlugin: function () {\r\n        var self = this;\r\n\r\n        if (self.container && self.container.hasClass('ui-sortable')) {\r\n            if (self.container.data()[\"ui-sortable\"]) {\r\n                self.container.sortable('destroy');\r\n            }\r\n        }\r\n\r\n        for (var i = 0, l = self.children.length; i < l; i = i + 1) {\r\n            if (self.children[i].container) {\r\n                self.children[i].disableSortablePlugin();\r\n            }\r\n        }\r\n    },\r\n\r\n    /*\r\n    *  Selects the current element\r\n    */\r\n    selectElement: function (params) {\r\n        var self = this;\r\n        var container = self.container;\r\n\r\n        // Add selected class\r\n        container.addClass(\"ui-bizagi-container-selected\");\r\n\r\n        // Get current element boundaries for select element event\r\n        var position = container.offset();\r\n        $.extend(position, {\r\n            width: container.outerWidth(),\r\n            height: container.outerHeight()\r\n        });\r\n\r\n        // Trigger select element handler\r\n        self.triggerGlobalHandler(\"selectelement\", $.extend(params, { position: position, guid: self.properties.guid, element: container, type: self.properties.type }));\r\n    },\r\n\r\n    /*\r\n    *  Un-selects the current element\r\n    */\r\n    unselectElement: function (params) {\r\n        var self = this;\r\n        var container = self.container;\r\n\r\n        container.removeClass(\"ui-bizagi-container-selected\");\r\n\r\n        if (params) {\r\n            $.extend(params, { guid: self.properties.guid });\r\n        }\r\n\r\n        // Trigger unselect element handler\r\n        self.triggerGlobalHandler(\"unselectelement\", params);\r\n    },\r\n\r\n    /*\r\n    *   \r\n    */\r\n    configureSortablePlugin: function (container) {\r\n        var self = this;\r\n        var mainPanel = self.triggerGlobalHandler(\"getMainPanel\", {});\r\n        var viewID = self.triggerGlobalHandler(\"getViewID\");\r\n\r\n        var formModelerSelector = 'form-modeler[id=\"' + viewID + '\"]'\r\n       \r\n        // Decorate with class to allow sortable connections\r\n        container.addClass(\"ui-bizagi-container-connectedSortable\");\r\n\r\n        // Define handlers\r\n        container.bind(\"sortstart\", function (ev, args) { self.onSortStart(args); });\r\n        container.bind(\"sortstop\", function (ev, args) { self.onSortFinish(args); });\r\n        container.bind( \"sort\", function(ev) { self.onScrollingForm(mainPanel, ev);});\r\n        container.bind(\"sortactivate\", function (ev, ui) {\r\n            self.currentDragSource = self.getDragSource(ui.item);\r\n        });\r\n\r\n        var items = \"> .ui-bizagi-draggable-item\";\r\n        \r\n        // Apply sortable plugin\r\n        container.sortable({\r\n            items: items,\r\n            revert: false,\r\n            connectWith: formModelerSelector + \" .ui-bizagi-container-connectedSortable:not(.ui-sortable-helper)\",\r\n            distance: 10,\r\n            cursorAt: { top: 0, left: 0 },\r\n            placeholder: \"ui-bizagi-placeholder\",\r\n            delay: 10,\r\n            cancel: (self.getMode() === \"layout\" ? \".bz-form-item, .ui-bizagi-input-editable\" : \".ui-bizagi-input-editable, .ui-bizagi-grid-cell\"),            \r\n            containment: mainPanel,\r\n\r\n            helper: function (event, ui) { \r\n                var $template = self.sortableHelper(ui);\r\n                var $container = $(this);\r\n                setTimeout(function() {\r\n                    $container.sortable(\"refreshPositions\");\r\n                }, 10);\r\n\r\n                return $template;\r\n            },\r\n            start: function () {\r\n                mainPanel && mainPanel.addClass('ui-start-drag');\r\n            },\r\n            stop: function () {\r\n                mainPanel && mainPanel.removeClass('ui-start-drag');\r\n            },\r\n            beforeStop: function () {\r\n                window.x3 = $('#mtool-container-helper');\r\n            }\r\n        }).disableSelection();\r\n\r\n        // Load helper template\r\n        self.loadHelperTemplate();\r\n    },\r\n\r\n    /*\r\n    *   Connects to another sortable container\r\n    */\r\n    setConnectWith: function (parent, guid) {\r\n        var self = this,\r\n                classConnect;\r\n\r\n        if (typeof parent === \"undefined\") {\r\n            return;\r\n        }\r\n\r\n        classConnect = \".ui-bizagi-container-connectedSortable\";\r\n        classConnect = classConnect + \"[id!= \" + guid + \"]\";\r\n        if (parent.container && parent.container.hasClass(\"ui-sortable\")) {\r\n            if (parent.container.data()[\"ui-sortable\"]) {\r\n                parent.container.sortable(\"option\", \"connectWith\", classConnect);\r\n            }\r\n        }\r\n\r\n\r\n        self.setConnectWith(parent.parent, guid);\r\n    },\r\n\r\n    /*\r\n    *   Add draggable class, and styles\r\n    */\r\n    addDraggableClassToContainer: function () {\r\n        var self = this;\r\n\r\n        // Check if the container is draggable or not\r\n        if (self.isContainerDraggable()) {\r\n            // Add container draggable styles\r\n            self.container.addClass(\"ui-bizagi-draggable-item\");\r\n            self.container.addClass('ui-dashed-layout');\r\n            var conteinerType = self.properties.type;\r\n            \r\n            if (conteinerType === \"horizontal\") { \r\n                var $containerPanel = $('> .bz-layout-col', self.container);\r\n\r\n                $.each($containerPanel, function() {\r\n                    var $child = $(this);                                \r\n                    if ($child.children().length === 0) {  $child.append('<div class=\"children\"></div>'); }\r\n                })            \r\n    \r\n            }\r\n            \r\n            if (self.container.hasClass('ui-dashed-layout')) {\r\n                self.container.data('display', 'Layout');\r\n                self.container.data('type', 'layout');\r\n            }\r\n\r\n\r\n                // Add hovering style\r\n            $('> .ui-bizagi-container-panel', self.container).mouseenter(function () { $(this).addClass('ui-col-hover'); }).mouseleave(function () { $(this).removeClass('ui-col-hover'); });\r\n        }\r\n    },\r\n\r\n    /*\r\n    *   Check if the container can be draggable or not\r\n    */\r\n    isContainerDraggable: function () {\r\n        var self = this;\r\n\r\n        // Don't allow draggable when the item is inside a nested form\r\n        if (self.isContainedInNestedForm() || self.isContainedInCollectionNavigator()) return false;\r\n\r\n        // Allow draggable in the following containers\r\n        var type = self.properties.type || \"form\";\r\n        type = self.normalizeType(type);\r\n        if (type == \"group\" || type == \"nestedForm\" || type == \"tab\" ||\r\n            type == \"horizontal\" || type == \"contentPanel\" || type == \"collectionnavigator\") {\r\n            return true;\r\n        }\r\n\r\n        return false;\r\n    },\r\n\r\n    /*\r\n    *   Check if the container can be sortable or not\r\n    */\r\n    isContainerSortable: function () {\r\n        var self = this;\r\n\r\n        // Don't allow sortable when the item is inside a nested form\r\n        if (self.isContainedInNestedForm() || self.isContainedInCollectionNavigator()) return false;\r\n\r\n        // Allow sortable in the following containers\r\n        var type = self.properties.type || \"form\";\r\n        type = self.normalizeType(type);\r\n        if (type == \"form\" || type == \"group\" || type == \"panel\" || type == \"tabItem\" || type == \"queryForm\" ||\r\n            type == \"searchForm\" || type == \"contentPanel\" || type == \"offlineForm\" || type == \"adhocForm\") { return true; }\r\n\r\n        return false;\r\n    },\r\n\r\n    /*\r\n    *   Filter sortable depending current execution mode\r\n    */\r\n    isElementSortAllowed: function (item) {\r\n        var self = this,\r\n            mode = self.getMode();\r\n\r\n        if (mode === \"design\") {\r\n            if (item.hasClass('ui-bizagi-container-horizontal')) { return false; }\r\n\r\n        } else if (mode === \"layout\") {\r\n            if (item.hasClass('bz-form-item')) { return false; }\r\n        }\r\n\r\n        return true;\r\n    },\r\n\r\n    /*\r\n    *   Check if this container can be clicked or not depending the execution mode\r\n    */\r\n    isClickEventAllowed: function () {\r\n        var self = this,\r\n                mode = self.getMode(),\r\n                result = true;\r\n\r\n        // Don't allow clicks when the item is inside a nested form\r\n        if (self.isContainedInNestedForm() || self.isContainedInCollectionNavigator()) return false;\r\n\r\n        var type = self.properties.type || \"form\";\r\n        type = self.normalizeType(type);\r\n        if (mode == \"design\") {\r\n            // Check in design mode\r\n            //if (type == \"form\" || type == \"horizontal\" || type == \"panel\" || type == \"searchForm\") { return false; }\r\n            if (type == \"panel\") { return false; }\r\n\r\n        } else if (mode === \"layout\") {\r\n            // Check in layout mode\r\n            if ([\"form\", \"group\", \"panel\", \"tab\", \"tabItem\", \"contentPanel\"].includes(type)) { return false; }\r\n        }\r\n\r\n        return result;\r\n    },\r\n\r\n    /*\r\n    *   Draws the sortable helper when draggin a container\r\n    */\r\n    sortableHelper: function (sortableElement) {\r\n        var self = this;\r\n\r\n        // Makes sure the helper template has been loaded\r\n        if (!self.helperTemplate) return null;\r\n\r\n        // Decorate current dragging element with a class\r\n        sortableElement.addClass('ui-dragging');\r\n\r\n        // Extract data from element\r\n        var data = sortableElement.data();\r\n        var type = data.type ? data.type.toLowerCase() : \"render\";\r\n        var id = data.guid;\r\n        var caption = data.display;\r\n\r\n        var icon = self.triggerGlobalHandler(\"getControlIcon\", { type: type, id: id });\r\n        var mainContainer = self.triggerGlobalHandler(\"getMainContainer\", {});\r\n\r\n\r\n        if (!caption || caption === '') {\r\n            caption = type;\r\n        }\r\n\r\n        // Draw the helper\r\n        var element = $.tmpl(self.helperTemplate, { id: type, caption: caption, icon: icon });\r\n        var wrapperMainScroll = $('.wrapper-main-scroll', mainContainer);\r\n        var sortableHelper = element.appendTo(wrapperMainScroll).css({ 'zIndex': 900 });\r\n\r\n        // Adjust size\r\n        var widthLabel = parseFloat($('label', sortableHelper).width());\r\n        var widthIcon = parseFloat($('.biz-ico', sortableHelper).eq(0).width());\r\n        var widthTotal = widthLabel + widthIcon + 40 + 'px';\r\n        sortableHelper.css('width', widthTotal);\r\n\r\n        return sortableHelper;\r\n    },\r\n\r\n    /*\r\n    *   Loads the helper template\r\n    */\r\n    loadHelperTemplate: function () {\r\n        var self = this;\r\n\r\n        // Load helper template and return deferred\r\n        return $.when(\r\n            bizagi.templateService.getTemplate(bizagi.getTemplate(\"bizagi.editor.component.renderingview\").concat(\"#bizagi-render-drag-helper\"))\r\n        ).pipe(function (tmpl) {\r\n            self.helperTemplate = tmpl;\r\n            return self.helperTemplate;\r\n        });\r\n    },\r\n\r\n    /*\r\n    *   Evaluates the drag source based on the item\r\n    */\r\n    getDragSource: function (item) {\r\n        var result = {\r\n            container: false,\r\n            toolbar: false,\r\n            xpathNavigator: false,\r\n            layout: false,\r\n            data: null\r\n        };\r\n\r\n        if ($(item).hasClass(\"ui-bizagi-render\") || $(item).hasClass(\"ui-bizagi-container\")) {\r\n            // Render source\r\n            result.container = true;\r\n            result.data = { guid: $(item).parents(\".ui-bizagi-container\").first().data(\"guid\") };\r\n\r\n        } else if ($(item).hasClass(\"mtool-item\")) {\r\n            // Controls navigator source\r\n            result.toolbar = true;\r\n            result.data = $(item).data(\"render\");\r\n\r\n        } else if ($(item).hasClass(\"bizagi_editor_xpathnavigator_data\")) {\r\n            // Xpath navigator source\r\n            result.xpathNavigator = true;\r\n            result.data = $(item).data();\r\n\r\n        } else if ($(item).hasClass(\"bz-fm-layout-navigator-item\")) {\r\n            // layout navigator source\r\n            result.layout = true;\r\n            result.data = $(item).data(\"id\");\r\n        }\r\n\r\n        return result;\r\n    },\r\n\r\n    /* \r\n    *   Hides / Show container \r\n    */\r\n    changeVisibility: function (argument) {\r\n        var self = this;\r\n        var properties = self.properties;\r\n\r\n        // Store in properties\r\n        properties.visible = bizagi.util.parseBoolean(argument);\r\n\r\n        // Hide - show the render\r\n        if (properties.visible) {\r\n            $(self.container).removeClass(\"ui-state-disabled\");\r\n\r\n        } else {\r\n            $(self.container).addClass(\"ui-state-disabled\");\r\n        }\r\n    },\r\n\r\n    /*\r\n    * Return true if the container isn't empty\r\n    */\r\n    hasChildren: function() {\r\n        return this.children.length > 0;\r\n    },\r\n\r\n\r\n    /*\r\n    *   EVENT HANDLERS\r\n    */\r\n    onScrollingForm:function($mainPanel, ev){\r\n\r\n    },\r\n\r\n    /*\r\n    *   Manages sort start event\r\n    */\r\n    onSortStart: function (ui) {\r\n        var self = this;\r\n\r\n        // Save drag position\r\n        var index = $(ui.item).parent().children(\".ui-bizagi-itemfordrag\").index(ui.item);\r\n        ui.item.data(\"start-position\", index);\r\n\r\n        // Save parent source        \r\n        var sourceContainer = $(ui.item).parents(\".bz-container\").first().data(\"guid\") ||\r\n                            self.triggerGlobalHandler(\"getparentid\", { guid: $(ui.item).data(\"guid\") });\r\n\r\n        ui.item.data(\"sourceContainer\", sourceContainer);\r\n\r\n        if (index >= 0) {\r\n            // Trigger event to callers\r\n            self.triggerGlobalHandler(\"sortstart\");\r\n        }\r\n    },\r\n\r\n    /*\r\n    *   Manages sort finish event\r\n    */\r\n    onSortFinish: function (ui) {\r\n        var self = this;\r\n\r\n\r\n        // Set a timer to avoid multiple drop bug at the same time\r\n        if (bizagi.sortContainerTimeout != null) {\r\n            return;\r\n        }\r\n        bizagi.sortContainerTimeout = setTimeout(function () {\r\n            bizagi.sortContainerTimeout = null;\r\n        }, 100);\r\n\r\n\r\n        var finalPosition = $(ui.item).parent().children(\".ui-bizagi-itemfordrag\").not(\".ui-sortable-placeholder\").index(ui.item),\r\n            targetContainer = $(ui.item).parents(\".bz-container\").first().data(\"guid\") || self.triggerGlobalHandler(\"getparentid\", { guid: $(ui.item).data(\"guid\") }),\r\n            initialPosition = ui.item.data(\"start-position\"),\r\n            sourceContainer = ui.item.data(\"sourceContainer\");\r\n\r\n        // Check if sort finish operation is available\r\n        if (self.isElementSortAllowed($(ui.item)) == false) {\r\n            self.container.sortable('cancel');\r\n            return false;\r\n        };\r\n\r\n        if (finalPosition >= 0) {\r\n            // Trigger sort finish event\r\n            self.triggerGlobalHandler(\"sortfinish\", {\r\n                source: self.currentDragSource,\r\n                initialPosition: initialPosition,\r\n                finalPosition: finalPosition,\r\n                sourceContainer: sourceContainer,\r\n                targetContainer: targetContainer\r\n            });\r\n        }\r\n\r\n        return true;\r\n    },\r\n\r\n    onClickCanvas: function (ev) {\r\n        var self = this;\r\n\r\n        // Cancel bubble\r\n        ev.stopImmediatePropagation();\r\n    \r\n        $(\".bz-form-item\").removeClass(\"ui-state-active\");\r\n        $(\".ui-bizagi-grid-cell\").removeClass(\"ui-state-active\");\r\n        $(\".bz-container\").removeClass(\"ui-bizagi-container-selected\");\r\n        self.unselectElement();\r\n\r\n        if (ev.button == 0 || ev.button == 1) {\r\n            self.triggerGlobalHandler(\"selectcontainerform\", {});\r\n        }\r\n    },\r\n\r\n\r\n    /*\r\n    *   Manages container click\r\n    */\r\n    onClick: function (ev) {\r\n        var self = this,\r\n            container = self.container;\r\n\r\n        // Cancel bubble\r\n        ev.stopImmediatePropagation();\r\n\r\n        var isCtrlPressed = self.triggerGlobalHandler(\"checkCtrlKey\", {});\r\n        if (isCtrlPressed) {\r\n            // Toggle selection\r\n            if (container.hasClass(\"ui-bizagi-container-selected\")) {\r\n                self.unselectElement({ ctrlIsPressed: true });\r\n            } else {\r\n                self.selectElement({\r\n                    IsOnClickEvent: true,\r\n                    ctrlIsPressed: true\r\n                });\r\n            }\r\n        } else {\r\n            if (ev.button == 0 || ev.button == 1) {\r\n                // Remove selected style to any render\r\n                $(\".bz-form-item\").removeClass(\"ui-state-active\");\r\n                $(\".bz-container\").not(container).removeClass(\"ui-bizagi-container-selected\");\r\n\r\n                // Toggle selection\r\n                if (container.hasClass(\"ui-bizagi-container-selected\")) {\r\n                    self.unselectElement();\r\n                } else {\r\n                    self.selectElement({ IsOnClickEvent: true });\r\n                }\r\n            }\r\n        }\r\n    },\r\n\r\n    /*\r\n    *   Manages mouse down event \r\n    */\r\n    onMouseDown: function (ev) {\r\n        var self = this;\r\n\r\n\r\n        if (ev.button == 0 || ev.button == 1) {\r\n            self.setConnectWith(self.parent, self.container.data(\"guid\"));      \r\n\r\n        } else if (ev.button == 2) {\r\n            // Trigger element right click event\r\n            self.triggerGlobalHandler(\"elementrightclick\", { guid: self.properties.guid, position: { x: ev.clientX, y: ev.clientY} });\r\n\r\n            // Prevent default behaviour\r\n            ev.preventDefault();\r\n            ev.stopPropagation();\r\n            return false;\r\n        }\r\n    },\r\n\r\n    normalizeType: function(type){\r\n        return type\r\n                .replace(/smartphone/, '')\r\n                .replace(/tablet/, '')\r\n                .replace(/offline/, '');\r\n    },\r\n\r\n    /*\r\n    *   Show validation messages\r\n    */\r\n   showValidationMessage: function (messages) {\r\n        var self = this;\r\n        var message = messages.split('</br>')[0];\r\n        if (message) { self.setValidationMessage(message); }\r\n    },\r\n\r\n    getContainerMessage: function () {\r\n        if (!this.containerMessage)\r\n            this.containerMessage = $(\".bz-container-message__text\", this.container.next(\"[data-parent=\" + this.properties.uniqueId + \"]\"));\r\n\r\n        return this.containerMessage;\r\n    },\r\n\r\n    setValidationMessage: function (message) {\r\n        var self = this;\r\n\r\n        if (typeof this.container !== \"undefined\") {\r\n            var $message = self.getContainerMessage();\r\n\r\n            if (message && message.length > 0) {\r\n                message = message.replace(/<\\w+>([^<]*)<\\/\\w+>/g, \"$1\");\r\n\r\n                $message.attr(\"data-error\", message);\r\n                $message.text(message);\r\n                this.container.addClass(\"bz-container--error\");\r\n            } else {\r\n                $message.text(\"\");\r\n                this.container.removeClass(\"bz-container--error\");\r\n            }\r\n        }\r\n    }\r\n\r\n});","\r\n/*\r\n*   @tittle: Bizagi FormModeler Editor Hacks Rendering Form\r\n*   @authors: UI Forms Team\r\n*   @Comments:\r\n*   -   This script will define basic stuff for enable the rendering Form\r\n*\t\tin the formModeler (delete div button container)\r\n*/\r\n\r\n\r\nbizagi.rendering.tablet.form.original = $.extend( true, {}, bizagi.rendering.tablet.form.prototype );\r\n$.extend(bizagi.rendering.tablet.form.prototype, {\r\n    /*\r\n     *   Renders the current container\r\n     *   Removes buttons from original rendering\r\n     */\r\n    postRenderContainer: function (form) {\r\n        var self = this;\r\n        var $form = form;\r\n\r\n        (self.children.length === 0) ? $form.attr(\"drophere\", bizagi.localization.getResource(\"formmodeler-component-editor-layout-drophere-containers\"))\r\n                                     : $form.removeAttr(\"drophere\");                    \r\n        \r\n        // Call original rendering\r\n        bizagi.rendering.tablet.form.original.postRenderContainer.apply(this, arguments);\r\n        \r\n                       \r\n        // Remove button container\r\n        var allowButtons = typeof (self.params.allowButtons) !== undefined ? self.params.allowButtons : false;\r\n        if (!allowButtons) {\r\n            $(\".ui-bizagi-button-container\", form).remove();\r\n        }\r\n\r\n        if (self.properties.messageValidation && self.properties.messageValidation.length > 0) {\r\n            var messageElement = self.createMessageValidationElement(self.properties.messageValidation);\r\n            form.prepend(messageElement);\r\n        }\r\n\r\n        return form;\r\n    },\r\n\r\n    createMessageValidationElement: function (message) {\r\n        var self = this;\r\n        var resource = bizagi.localization.getResource(\"formmodeler-validations-form\");\r\n\r\n        var messageElement = $('<div class=\"ui-message-validation\"/>');\r\n        $('<span>' + resource + '<i class=\"biz-ico bz-studio bz-warning-red_16x16_standard\" title=\"' + message + '\"></i></span>').appendTo(messageElement);\r\n        $(messageElement, \"div\").click(function () {\r\n            self.triggerGlobalHandler(\"showPropertiesForm\");\r\n        });\r\n\r\n        return messageElement;\r\n    },\r\n\r\n    /*\r\n    *   Manages scrolling  event\r\n    */   \r\n    onScrollingForm:function( $mainPanel, ev){                \r\n        var mainElement = $mainPanel[0];               \r\n        var boundingClient = mainElement.getBoundingClientRect();\r\n        var clientTopY = boundingClient.top;\r\n        var clientButtonY = boundingClient.bottom\r\n       \r\n        function isInTop(){\r\n            return Math.abs(ev.clientY - clientTopY) <= 20;\r\n        }\r\n        \r\n        function isInBottom(){\r\n            return Math.abs(clientButtonY - ev.clientY) <= 30;    \r\n        }\r\n\r\n        function move(){            \r\n            var factor = isInTop() ? -1 : 1;                        \r\n            var scrollTop = $mainPanel.scrollTop();\r\n            \r\n            if (factor === 1) {                                \r\n                if (scrollTop > (mainElement.scrollHeight - mainElement.offsetHeight)){\r\n                    return;\r\n                }\r\n            }\r\n            \r\n            var delta = scrollTop + (40 * factor)                \r\n            $mainPanel.scrollTop(delta);                                    \r\n        }      \r\n\r\n        // Top border\r\n        if (isInTop() || isInBottom()){                           \r\n            setTimeout(move, 100);   \r\n        }           \r\n    }\r\n});\r\n   ","\r\n/*\r\n*   @tittle: BizAgi FormModeler Editor Hacks Rendering Render\r\n*   @authors: Alexander Mejia\r\n\t@date: 06-mar-12\r\n*   @Comments:\r\n*   -   This script will define basic stuff for enable the rendering render\r\n*\t\tin the formModeler\r\n*/\r\n\r\nbizagi.rendering.tablet.render.original = $.extend( true, {}, bizagi.rendering.tablet.render.prototype );\r\n$.extend(bizagi.rendering.tablet.render.prototype, {\r\n\r\n    /*\r\n    *   Renders the current element\r\n    *   Also adds draggable behaviour, and selection handlers\r\n    */\r\n   postRenderElement: function (element) {\r\n    var self = this,\r\n        properties = self.properties;\r\n\r\n    // Call original method\r\n    bizagi.rendering.tablet.render.original.postRenderElement.apply(this, arguments);\r\n\r\n    // If the current form is readonly return;\r\n    if (self.isReadOnlyForm()) {\r\n        return element;\r\n    }\r\n\r\n    // Add guid to DOM\r\n    element.attr(\"guid\", self.properties.guid);\r\n\r\n    if (self.getFormType() == 'template') {\r\n        return self.configureLayoutElement(element);\r\n    }\r\n                \r\n    // If the render is inside a nested form don't allow any events\r\n    if (!self.isContainedInNestedForm() && !self.isContainedInCollectionNavigator()) {\r\n\r\n        // Add mouse down handler\r\n        self.setMouseDownEvent(element);\r\n\r\n        // Add dragabble class\r\n        if (!self.isContainedInGrid()) {\r\n            element.addClass(\"ui-bizagi-draggable-item\");\r\n            element.addClass(\"ui-bizagi-itemfordrag\");\r\n        }\r\n\r\n        var renderSearch = $('.ui-bizagi-render-search', element);\r\n        if (renderSearch.length > 0) {\r\n            renderSearch.parent().addClass('ui-bizagi-display-as-search');\r\n        }\r\n\r\n        if (self.isClickEventAllowed()) {\r\n            var labelElement;\r\n            var type = self.properties.type || \"\";\r\n            type = type.replace('tablet', '');\r\n\r\n            if (self.getMode() == \"design\" && type == \"grid\") {\r\n                labelElement = self.getLabelGrid();\r\n            } else {\r\n                labelElement = self.getLabel();\r\n            }\r\n\r\n            // Add click handlers\r\n            element.click(function (ev) {\r\n                self.onRenderClick(ev, element);\r\n            });\r\n            \r\n            if(!bizagi.form.modeler.params.reviewMode){\r\n                labelElement && labelElement.dblclick(function () {\r\n                    self.onLabelDoubleClick(labelElement);\r\n                });\r\n            }\r\n        }\r\n    }\r\n\r\n    if (self.properties.messageValidation) {\r\n        self.showValidationMessage(self.properties.messageValidation);\r\n    }\r\n\r\n    element.data({\r\n        guid: self.properties.guid,\r\n        display: self.properties.displayName,\r\n        type: self.properties.type\r\n    });\r\n\r\n    return self.resetStyle(element);\r\n},\r\n\r\n\r\n    /*\r\n    * Set several options used in template mode\r\n    */\r\n    configureLayoutElement: function (element) {\r\n        var self = this;\r\n\r\n        self.configureDroppablePlugin(element);\r\n        self.configureDraggablePlugin(element);\r\n\r\n        // Add click handlers\r\n        element.click(function (ev) {\r\n            self.onRenderClick(ev, element);\r\n        });\r\n            \r\n        element.dblclick(function () {\r\n            self.onLabelDoubleClick(element);\r\n        });\r\n    \r\n        element\r\n            .find('.biz-template-editor-render-hide-control')\r\n            .click(function (ev) {\r\n                self.onRemoveElement(ev, element);\r\n            });\r\n\r\n        self.setDeleteLayoutItem(element);        \r\n        \r\n        return element;\r\n    },\r\n\r\n    /*\r\n    * Enable handler to allow delete an repeteable item or o layout item\r\n    */\r\n    setDeleteLayoutItem: function(element){\r\n        var self = this,\r\n            type = self.properties.type,\r\n            hoverElement = $(\"<span class='biz-icon biz-tmpl-delete pull-right bz-studio bz-delete_16x16_standard'></span>\"),\r\n            hoverRestoreElement = $(\"<span class='biz-icon biz-tmpl-delete pull-right bz-studio bz-undo_16x16_black'></span>\"),\r\n            parent = element.closest('[id]');\r\n        \r\n\r\n        // Wait to template is rendered\r\n        setTimeout(function () {\r\n            // If the element \r\n            if (parent.length == 0 && self.triggerGlobalHandler(\"isDeleteOptionAllowed\", { guid: self.properties.guid })) {\r\n                element.addClass('hover-applied');\r\n            \r\n\r\n                element.hover(function () {\r\n                    $(this).append(hoverRestoreElement);\r\n                }, function () {\r\n                    $(this).find(\"span.biz-tmpl-delete\").detach();\r\n                });\r\n\r\n                (function() {\r\n                    hoverRestoreElement.click(function () {\r\n                        // Trigger element right click event\r\n                        self.triggerGlobalHandler(\"restoreItem\", { guid: self.properties.guid });\r\n                    });\r\n                })();\r\n            }\r\n                // if the elements is a repeater item\r\n            else {\r\n                if (parent.attr('id') == undefined) { return; }\r\n                if (parent.hasClass('hover-applied')) { return; }\r\n\r\n                parent.addClass('hover-applied');\r\n                parent.hover(function () {\r\n                    $(this).append(hoverElement);\r\n                }, function () {\r\n                    $(this).find(\"span.biz-tmpl-delete\").detach();\r\n                });\r\n\r\n                (function(parent) {\r\n                    hoverElement.click(function() {\r\n                        // Trigger element right click event\r\n                        self.triggerGlobalHandler(\"deleteRepeaterItem\", { guid: parent.attr('id') });\r\n                    });\r\n                })(parent);\r\n            }\r\n        }, 10);\r\n        \r\n    },\r\n\r\n    /*\r\n    * Apply draggable plugin\r\n    */\r\n    configureDraggablePlugin: function (element) {\r\n        var self = this;\r\n\r\n        element.draggable({\r\n            helper: 'clone',\r\n            zIndex: 9999,\r\n            opacity: 0.75,\r\n            cursorAt: { left: 5 },\r\n            containment: 'document',\r\n            cancel: '.biz-template-editor-render-placeholder',            \r\n            start: function (event, ui) {\r\n                $(ui.helper).data('isLayoutElement', true);\r\n            }            \r\n        });\r\n    },\r\n\r\n\r\n    /*\r\n    * Apply droppable plugin\r\n    */\r\n    configureDroppablePlugin: function (element) {\r\n        var self = this;\r\n\r\n        element.droppable({\r\n            hoverClass: \"ui-state-highlight\",\r\n            tolerance: \"pointer\",\r\n            activeClass: 'ui-editor-highlight',\r\n            greedy: true,\r\n            drop: function (event, ui) {\r\n                $(this).addClass('ui-state-highlight');\r\n            },\r\n            activate: function () {                \r\n                self.getFormContainer()\r\n                        .container\r\n                        .find(\"[noShow='true']\")\r\n                        .show();\r\n            },\r\n            deactivate: function () {                \r\n                self.getFormContainer()\r\n                    .container\r\n                    .find(\"[noShow='true']\")\r\n                    .hide();\r\n            }\r\n        });\r\n\r\n        element.on(\"drop\", function (ev, ui) { self.onDrop(ui); });\r\n    },\r\n\r\n\r\n    getLabelGrid: function () {\r\n        return $(\".bz-mobile-grid__header-title\", this.element);\r\n    },\r\n\r\n    resetStyle: function (el) {\r\n        var element = el, self = this;\r\n        var colorText = element.css('color');\r\n        var backgroundColor = element.css('background-color');\r\n\r\n        if (colorText == 'black') { element.css('color', ''); }\r\n        if (backgroundColor == 'white') { element.css('background-color', ''); }\r\n\r\n        return element;\r\n    },\r\n\r\n    /*\r\n    *  Selects the current element\r\n    */\r\n    selectElement: function (params) {\r\n        var self = this, options;\r\n        var properties = self.properties;\r\n\r\n        if(self.element) {\r\n            // Add selected class\r\n            self.element.addClass(\"ui-state-active\");\r\n\r\n            // Get current element boundaries for select element event\r\n            var position = self.element.offset();\r\n            $.extend(position, {\r\n                width: self.element.outerWidth(),\r\n                height: self.element.outerHeight()\r\n            });\r\n\r\n            // Trigger select element handler\r\n            options = $.extend(params, {\r\n                position: position,\r\n                guid: self.properties.guid,\r\n                element: self.element,\r\n                type: self.properties.type,\r\n                isInternal: properties.isInternal\r\n            });\r\n            self.triggerGlobalHandler(\"selectelement\", options);\r\n        }\r\n    },\r\n\r\n    /*\r\n    *  Un-selects the current element\r\n    */\r\n    unselectElement: function (params) {\r\n        var self = this;\r\n\r\n        // Remove selected class\r\n        self.element.removeClass(\"ui-state-active\");\r\n\r\n        if (params) {\r\n            $.extend(params, { guid: self.properties.guid });\r\n        }\r\n\r\n        // Trigger unselect element handler\r\n        self.triggerGlobalHandler(\"unselectelement\", params);        \r\n    },\r\n\r\n\r\n    /*\r\n    *   Check if this container can be clicked or not depending the execution mode\r\n    */\r\n    isClickEventAllowed: function () {\r\n        var self = this;\r\n        var mode = self.getMode();\r\n\r\n        // If is design and not a column\r\n        if (mode === \"design\" && !(self.column || self.isColumn)) return true;\r\n        return false;\r\n    },\r\n\r\n\r\n\r\n    /*\r\n    *   Configure mouse down handler\r\n    */\r\n    setMouseDownEvent: function (element) {\r\n        var self = this;\r\n\r\n\r\n        if (self.isClickEventAllowed()) {\r\n\r\n            // Add mouse down handler\r\n            element.bind('mousedown.contextmenu', function (e) {\r\n                if (e.button == 2) {\r\n                    // Trigger element right click event\r\n                    self.triggerGlobalHandler(\"elementrightclick\", {\r\n                        guid: self.properties.guid,\r\n                        position: {\r\n                            x: e.clientX,\r\n                            y: e.clientY\r\n                        }\r\n                    });\r\n\r\n                    // Prevent default behaviour\r\n                    e.preventDefault();\r\n                    e.stopPropagation();\r\n                    return false;\r\n                }\r\n\r\n                return true;\r\n            });\r\n        }\r\n    },\r\n\r\n    /*\r\n    *   Overrides visibility change to avoid hiding the element when not visible\r\n    */\r\n    changeVisibility: function (argument) {\r\n        var self = this,\r\n            properties = self.properties;\r\n\r\n        if (bizagi.util.parseBoolean(argument) == true) {\r\n            $(self.element).removeClass(\"ui-state-disabled\");\r\n        } else {\r\n            $(self.element).addClass(\"ui-state-disabled\");\r\n        }\r\n\r\n        // Update properties\r\n        properties.visible = argument;\r\n    },\r\n\r\n    /*\r\n    *   Show validation messages\r\n    */\r\n    showValidationMessage: function (messages) {\r\n        var self = this;\r\n        var message = messages.split('</br>')[0];\r\n        if (message) { self.setValidationMessage(message); }\r\n    },\r\n\r\n    /*\r\n    *   Manages render clicks\r\n    */\r\n    onRenderClick: function (ev, element) {\r\n        var self = this;\r\n\r\n        // Stop bubbling and default behaviour\r\n        ev.stopPropagation();\r\n        ev.preventDefault();\r\n            \r\n        // Enable / disable selected style\r\n        var isCtrlPressed = self.triggerGlobalHandler(\"checkCtrlKey\", {});\r\n        if (isCtrlPressed) {\r\n            // Toggle selection\r\n            if (element && element.hasClass(\"ui-state-active\")) {\r\n                self.unselectElement({ ctrlIsPressed: true });\r\n            } else {\r\n                // fix for SUITE-7498\r\n                if ($(document.activeElement).is(\"input\") && $(document.activeElement).closest(\".bizagi_editor_component_properties\").length > 0) {\r\n                    $(document.activeElement).trigger(\"blur\");\r\n                    $(\".bizagi_editor_component_properties\").hide();\r\n                }\r\n\r\n                self.selectElement({\r\n                    IsOnClickEvent: true,\r\n                    ctrlIsPressed: true\r\n                });\r\n            }\r\n        } else {\r\n            if (ev.button == 0 || ev.button == 1) {\r\n                // Remove all render selections\r\n                $(\".bz-form-item\").not(element).removeClass(\"ui-state-active\");\r\n                $(\".ui-bizagi-grid-cell\").not(element).removeClass(\"ui-state-active\");\r\n                $(\".ui-bizagi-button\").not(element).removeClass(\"bz-state-active\");\r\n                $(\".bz-container\").removeClass(\"ui-bizagi-container-selected\");\r\n                $(\".ui-bizagi-render-layout\").not(element).removeClass(\"ui-state-active\");\r\n            }\r\n\r\n            // Toggle selection\r\n            if (element && element.hasClass(\"ui-state-active\")) {\r\n                self.unselectElement();\r\n            } else {\r\n                // fix for SUITE-7498\r\n                if ($(document.activeElement).is(\"input\") && $(document.activeElement).closest(\".bizagi_editor_component_properties\").length > 0) {\r\n                    $(document.activeElement).trigger(\"blur\");\r\n                    $(\".bizagi_editor_component_properties\").hide();\r\n                }\r\n\r\n                self.selectElement({ IsOnClickEvent: true });\r\n            }\r\n        }\r\n    },\r\n\r\n    /*\r\n    *   Manages label double click event\r\n    */\r\n    onLabelDoubleClick: function (labelElement) {\r\n        var self = this;\r\n\r\n        // In template context there are some elements (ex image) that can't change the label\r\n        if (self.triggerGlobalHandler(\"canChangeLabel\", { guid: self.properties.guid })) {\r\n\r\n            // Publish label edition event\r\n            self.triggerGlobalHandler(\"startlabeledition\");\r\n\r\n            // Create editable label component\r\n            var presenter = new bizagi.editor.component.editableLabel.presenter({\r\n                label: labelElement,\r\n                value: self.properties.displayName\r\n            });\r\n\r\n            // Bind change event\r\n            presenter.subscribe(\"change\", function (ev, args) {\r\n                self.triggerGlobalHandler(\"changelabel\", { guid: self.properties.guid, value: args.value });\r\n            });\r\n\r\n            presenter.subscribe(\"finish\", function(){\r\n                self.triggerGlobalHandler(\"finishlabeledition\");\r\n            });\r\n\r\n            // Render label\r\n            presenter.render();\r\n        }\r\n    },\r\n\r\n    /*\r\n    *   Manages hide click event for layout elements\r\n    */\r\n    onRemoveElement: function (ev, element) {\r\n        var self = this;\r\n\r\n        self.triggerGlobalHandler(\"hideElement\", { guid: self.properties.guid });\r\n    },\r\n\r\n    /*\r\n    *   Show the label editor and update the element\r\n    */\r\n    showElementLabelEditor: function () {\r\n        var self = this;\r\n\r\n        if (!(self.element.find(\".ui-bizagi-container-input-editable > input.ui-bizagi-input-editable\").length > 0)) {\r\n            $('label', self.element).trigger('dblclick');\r\n        }\r\n    },\r\n\r\n    /*\r\n    *   Manages drop event\r\n    */\r\n    onDrop: function (ui) {\r\n        var self = this;\r\n\r\n        var $sourceElement = $(ui.draggable);\r\n        var $helperElement = $(ui.helper);\r\n        var data = $sourceElement.data();\r\n        var helperData = $helperElement.data();\r\n\r\n        var xpathValue = bizagi.editor.utilities.buildComplexXpath(data.xpath, data.contextScope, data.isScopeAttribute, data.guidRelatedEntity)\r\n\r\n        // Trigger sort finish event\r\n        self.triggerGlobalHandler(\"dropfinish\", {\r\n            guid: self.properties.guid,\r\n            property: 'xpath',\r\n            value: xpathValue,\r\n            renderType: data.nodeSubtype,\r\n            sourceGuid: (helperData && helperData.isLayoutElement) ? $helperElement.attr('guid') : false\r\n        });\r\n    }    \r\n});","/**\r\n *   Name: Bizagi Form Modeler Group Extension\r\n *   Author: Alexander Mejia\r\n *   Comments:\r\n *   -   This script will redefine the group class to adjust to form modeler\r\n */\r\n\r\nbizagi.rendering.tablet.group.original = $.extend( true, {}, bizagi.rendering.tablet.group.prototype );\r\n$.extend(bizagi.rendering.tablet.group.prototype, {\r\n\r\n    /**\r\n     * Template method to implement in each device to customize each container after processed\r\n     * @param {} group \r\n     * @returns {} \r\n     */\r\n    postRenderContainer: function (group) {\r\n        var self = this;\r\n\r\n        // Call original method        \r\n        bizagi.rendering.tablet.group.original.postRenderContainer.apply(this, arguments);\r\n        \r\n        if (\r\n            !self.hasChildren() &&\r\n            !self.isContainedInNestedForm() &&\r\n            !self.isContainedInCollectionNavigator()\r\n        ) {\r\n            var $content = $('.bz-collapsible__content', group);\r\n            $content.append('<div class=\"children\"></div>');\r\n        }\r\n        \r\n        // If the current form is readonly return;\r\n        if (self.isReadOnlyForm()) return;\r\n\r\n        // Bind header double click\r\n        var header = group.find(\".bz-collapsible__header\");\r\n\r\n        if (!self.isInNestedform()) {\r\n            header.dblclick(function () {\r\n                // Publish label edition event\r\n                self.triggerGlobalHandler(\"startlabeledition\");\r\n\r\n                // Create editable label component\r\n                var presenter =\r\n                    new bizagi.editor.component.editableLabel.presenter({\r\n                        label: header,\r\n                        value: self.properties.displayName\r\n                    });\r\n\r\n                // Bind change event\r\n                presenter.subscribe(\"change\", function (ev, args) {\r\n                    self.triggerGlobalHandler(\"changelabel\", { guid: self.properties.guid, value: args.value });\r\n                });\r\n\r\n                presenter.subscribe(\"finish\", function(){\r\n                    self.triggerGlobalHandler(\"finishlabeledition\");\r\n                });\r\n                // Render label\r\n                presenter.render();\r\n            });\r\n        }\r\n\r\n        var guid = self.properties.guid;\r\n        setTimeout(function () {\r\n            var lastElementInserted = self.triggerGlobalHandler(\"getLastInsertedElement\");\r\n\r\n            if (guid == lastElementInserted) {\r\n                self.showElementLabelEditor();\r\n                self.triggerGlobalHandler(\"setLastInsertedElement\", null);\r\n            }\r\n        }, 0);\r\n    },\r\n\r\n    /**\r\n     * Disable sortable plugin\r\n     * @returns {} \r\n     */\r\n    disableSortablePlugin: function () {\r\n        var self = this;\r\n        var container = self.container.find('> .bz-collapsible__content');\r\n\r\n        if (container && container.hasClass('ui-sortable')) {\r\n            if (container.data()[\"ui-sortable\"]) {\r\n                container.sortable('destroy');\r\n            }\r\n        }\r\n\r\n        for (var i = 0, l = self.children.length; i < l; i = i + 1) {\r\n            if (self.children[i].container) {\r\n                self.children[i].disableSortablePlugin();\r\n            }\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Configure  sortable plugin\r\n     * @param {} container \r\n     * @returns {} \r\n     */\r\n    configureSortablePlugin: function (container) {\r\n        container = container.find('> .bz-collapsible__content');\r\n\r\n        return bizagi.rendering.tablet.group.original.configureSortablePlugin.apply(this, arguments);      \r\n    },\r\n\r\n    /**\r\n     * Check is in Nestedform\r\n     * Fix for SUITE-6665\r\n     * @returns {} \r\n     */\r\n    isInNestedform: function () {\r\n        var self = this;\r\n        var parent = self.parent;\r\n        var properties = self.properties;\r\n        var result = false;\r\n\r\n        do {\r\n            if (properties.type === \"nestedForm\" || properties.type === \"collectionnavigator\") {\r\n                result = true;\r\n                break;\r\n            } else {\r\n                properties = parent.properties;\r\n                parent = parent.parent;\r\n            }\r\n        } while (parent !== undefined);\r\n\r\n        return result;\r\n    },\r\n\r\n    /**\r\n     * Show the label editor and update the element\r\n     * @returns {} \r\n     */\r\n    showElementLabelEditor: function () {\r\n        var self = this;\r\n\r\n        var $header = self.container.find(\".bz-collapsible__header\");       \r\n        $header.trigger('dblclick');       \r\n    }\r\n\r\n});","/*\r\n*   Name: Bizagi Form Modeler Panel Extension\r\n*   Author: UI Forms Team\r\n*   Comments:\r\n*   -   This script will redefine the panel class to adjust to form modeler\r\n*/\r\n\r\n\r\nbizagi.rendering.tablet.contentPanel.original = $.extend(true, {}, bizagi.rendering.tablet.contentPanel.prototype);\r\n$.extend(bizagi.rendering.tablet.contentPanel.prototype, {\r\n\r\n    /**\r\n     * Template method to implement in each device to customize each container after processed\r\n     */\r\n    postRenderContainer: function ($panel) {\r\n        var self = this;\r\n\r\n        // Call original post-render\r\n        bizagi.rendering.tablet.contentPanel.original.postRenderContainer.apply(this, arguments);\r\n\r\n        if (\r\n            !self.hasChildren() &&\r\n            !self.isContainedInNestedForm() &&\r\n            !self.isContainedInCollectionNavigator()\r\n        ) {            \r\n            $panel.append('<div class=\"children\"></div>');\r\n        }\r\n\r\n\r\n        // Add custom class just for form modeler\r\n        $panel.addClass(\"ui-bizagi-container-contentpanel-formmodeler\");\r\n\r\n        $panel.prepend('<div class=\"ui-bizagi-container-contentpanel-header-container\"><span class=\"ui-bizagi-container-contentpanel-header\">' + self.properties.displayName + '</span></div>');\r\n        //bind header double click\r\n        var $header = $panel.find(\".ui-bizagi-container-contentpanel-header\");\r\n\r\n        $header.dblclick(function () {\r\n\r\n            $header.hide();\r\n\r\n            // Publish label edition event\r\n            self.triggerGlobalHandler(\"startlabeledition\");\r\n\r\n            // Create editable label component\r\n            var presenter = new bizagi.editor.component.editableLabel.presenter({\r\n                label: $header,\r\n                value: self.properties.displayName\r\n            });\r\n\r\n            // Bind change event\r\n            presenter.subscribe(\"change\", function (ev, args) {\r\n                self.triggerGlobalHandler(\"changelabel\", {guid: self.properties.guid, value: args.value});\r\n            });\r\n\r\n            presenter.subscribe(\"finish\", function(){\r\n                self.triggerGlobalHandler(\"finishlabeledition\");\r\n            });\r\n\r\n            // Render label\r\n            $.when(presenter.render()).done(function () {\r\n                if (self.getElement().find(\".ui-bizagi-container-input-editable\").length == 0) {\r\n                    setTimeout(function () {\r\n                        $header.hide();\r\n                        self.adjustEditLabel();\r\n                    }, 100);\r\n                } else {\r\n                    self.adjustEditLabel();\r\n                }\r\n            });\r\n        });\r\n    },\r\n\r\n    /**\r\n     * Disable sortable plugin\r\n     */\r\n    disableSortablePlugin: function () {\r\n        var self = this;\r\n        var container = self.container.find('.ui-bizagi-container-contentpanel-wrapper');\r\n\r\n        if (container && container.hasClass('ui-sortable')) {\r\n            if (container.data()[\"ui-sortable\"]) {\r\n                container.sortable('destroy');\r\n            }\r\n        }\r\n\r\n        for (var i = 0, l = self.children.length; i < l; i++) {\r\n            if (self.children[i].container) {\r\n                self.children[i].disableSortablePlugin();\r\n            }\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Adjust edit label\r\n     */\r\n    adjustEditLabel: function () {\r\n        var self = this;\r\n\r\n        self.getElement().find(\".ui-bizagi-container-input-editable\").css({\r\n            \"width\": \"95%\",\r\n            \"background-color\": \"orange\",\r\n            \"top\": \"-18px\",\r\n            \"border-radius\": \"10px\"\r\n        });\r\n\r\n        self.getElement().find(\".ui-bizagi-container-input-editable input\").css({\r\n            \"margin-left\": \"5px\",\r\n            \"width\": \"90%\"\r\n        });\r\n\r\n        self.getElement().find(\".ui-bizagi-render-confirmation\").css({\r\n            \"right\": \"10px\",\r\n            \"top\": \"5px\"\r\n        });\r\n    },\r\n\r\n    /**\r\n     * Show label editor\r\n     */\r\n    showElementLabelEditor: function () {\r\n        var self = this;\r\n\r\n        if (!(self.container.find(\".ui-bizagi-container-input-editable > input.ui-bizagi-input-editable\").length > 0)) {\r\n            self.container.find(\"span:first\").trigger('dblclick');\r\n        }\r\n    }\r\n\r\n});","/*\r\n*   Name: BizAgi Form Modeler Tab Extension\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will redefine the tab class to adjust to form modeler\r\n*/\r\n\r\n\r\nbizagi.rendering.tablet.tab.original = $.extend(true, {}, bizagi.rendering.tablet.tab.prototype);\r\n$.extend(bizagi.rendering.tablet.tab.prototype, {\r\n    /* \r\n    *   Template method to implement in each device to customize each container after processed\r\n    */\r\n    postRenderContainer: function ($tab) {\r\n        var self = this;\r\n        var properties = self.properties;\r\n\r\n        // Call original method        \r\n        bizagi.rendering.tablet.tab.original.postRenderContainer.apply(this, arguments);\r\n\r\n        // If the current form is readonly return;\r\n        if (self.isReadOnlyForm()) {\r\n            return;\r\n        }\r\n\r\n        var $addButton = $('<div class=\"bz-tab--add\"><svg class=\"ico_16x16\"><use xlink:href=\"#icon-plus\"></use></svg></div>');\r\n        var $offsetLeft = $('<div style=\"display: none;\"><svg class=\"ico_16x16 offset__left-indicator\"><use xlink:href=\"#icon-arrow-left\"></svg></div>');\r\n        var $offsetRigth = $('<div style=\"display: none;\"><svg class=\"ico_16x16 offset__right-indicator\"><use xlink:href=\"#icon-arrow-rigth\"></svg></div>');\r\n        var $tabContainer = $('.bz-tabs', $tab).first();\r\n\r\n        $tabContainer\r\n            .wrap('<div class=\"bz__tabs--container\"></div>')\r\n            .before($offsetLeft)\r\n            .after($addButton)\r\n            .after($offsetRigth)\r\n            .on('updatePositions', function (ev, info) {\r\n                setTimeout(function () {\r\n                    var $container = $(ev.currentTarget);\r\n\r\n                    self.updatePositions($offsetLeft, $offsetRigth);\r\n                    self.updateErrorPositions($container);\r\n\r\n                }, 100);\r\n            });\r\n\r\n        $offsetLeft.click(function (event) {\r\n            event.stopPropagation();\r\n            var htmlTabELement = $('.bz-tabs', self.container);\r\n            htmlTabELement.scrollLeft(htmlTabELement.scrollLeft() - 15);\r\n            self.updatePositions($offsetLeft, $offsetRigth);\r\n        });\r\n\r\n        $offsetRigth.click(function (event) {\r\n            event.stopPropagation();\r\n            var htmlTabELement = $('.bz-tabs', self.container);\r\n            htmlTabELement.scrollLeft(htmlTabELement.scrollLeft() + 15);\r\n            self.updatePositions($offsetLeft, $offsetRigth);\r\n        });\r\n\r\n        // Add handlers if the tab isn't contained in a nested form\r\n        if (!self.isContainedInNestedForm() && !self.isContainedInCollectionNavigator()) {\r\n\r\n\r\n            // Add handler\r\n            $addButton.click(function (ev) {\r\n                ev.stopImmediatePropagation();\r\n                // Publish addtab event to the view\r\n                self.triggerGlobalHandler(\"addtab\", {guid: properties.guid});\r\n                return false;\r\n            });\r\n\r\n            // Assign tab headers to children\r\n            $.each(self.children, function (i, tabItem) {\r\n                var $tabHeader = $(\"li[data-reference= #ui-bizagi-tab-\" + tabItem.properties.guid + \"]\", $tab);\r\n                tabItem.setTabHeader($tabHeader);\r\n            });\r\n\r\n            // Make headers sortable\r\n            var header = $(\".bz-tabs\", $tab);\r\n            header.sortable({\r\n                items: \"li[data-reference]\",\r\n                revert: true,\r\n                distance: 10,\r\n                axis: \"x\",\r\n                cursorAt: {top: 0, left: 0},\r\n                placeholder: \"bz-tab-placeholder\",\r\n                delay: 150,\r\n                start: function (e, ui) {\r\n                    self.sortStart(e, ui);\r\n                },\r\n                tolerance: \"pointer\",\r\n                stop: function (e, ui) {\r\n                    self.sortFinish(e, ui);\r\n                }\r\n            });\r\n        }\r\n\r\n        $tab.data({\r\n            guid: self.properties.guid,\r\n            display: self.properties.displayName,\r\n            type: self.properties.type\r\n        });\r\n\r\n        $tab.on(\"tabsload\", function (event, ui) {\r\n            self.triggerGlobalHandler(\"controlRefreshCanvas\", {});\r\n        }).on(\"tabsactivate\", function (event, ui) {\r\n            self.triggerGlobalHandler(\"controlRefreshCanvas\", {});\r\n        });\r\n\r\n        setTimeout(function () {\r\n            self.updatePositions($offsetLeft, $offsetRigth);\r\n        }, 100);\r\n\r\n        var item = (self.children || []).find(function (item) {\r\n            if (item.properties && item.properties.messageValidation) return item;\r\n        });\r\n\r\n        if (item && (item.properties && item.properties.messageValidation)) {\r\n            self.showValidationMessage(item.properties.messageValidation);\r\n        }\r\n    },\r\n\r\n    updatePositions: function ($offsetLeft, $offsetRigth) {\r\n        var $htmlTabELement = $('.bz-tabs', this.container).get(0);\r\n\r\n        $offsetLeft.css({display: \"none\"});\r\n        $offsetRigth.css({display: \"none\"});\r\n\r\n        if ($htmlTabELement.scrollLeft > 0) {\r\n            $offsetLeft.css({display: \"flex\"});\r\n        }\r\n\r\n        if ($htmlTabELement.scrollWidth > ($htmlTabELement.clientWidth + $htmlTabELement.scrollLeft + 30)) {\r\n            $offsetRigth.css({display: \"flex\"});\r\n        }\r\n    },\r\n\r\n    /*\r\n    *   Manages the drag start event when sorting the header tabs\r\n    */\r\n    sortStart: function (event, ui) {\r\n        var self = this;\r\n\r\n        var index = $(ui.item).parent().children(\"li[data-reference]\").not(\".bz-tab-placeholder\").index(ui.item);\r\n        ui.item.data(\"start-position\", index);\r\n        self.initialPosition = index;\r\n        return true;\r\n    },\r\n\r\n    /*\r\n    *   Manages the drag end event when sorting the header tabs\r\n    */\r\n    sortFinish: function (event, ui) {\r\n        var self = this;\r\n        var index = $(ui.item).parent().children(\"li[data-reference]\").not(\".bz-tab-placeholder\").index(ui.item);\r\n\r\n        // Trigger sort finish event\r\n        self.triggerGlobalHandler(\"sortfinish\", {\r\n            source: {},\r\n            initialPosition: ui.item.data(\"start-position\") || self.initialPosition,\r\n            finalPosition: index,\r\n            sourceContainer: self.properties.guid,\r\n            targetContainer: self.properties.guid\r\n        });\r\n        return true;\r\n    },\r\n\r\n    updateErrorPositions: function ($container) {\r\n        var $currentTabItem = $container.find(\"li.active\");\r\n\r\n        $(\".bz-indicator-bar\", $container).removeClass(\"bz-indicator-bar--error\");\r\n\r\n        if ($currentTabItem && $currentTabItem.hasClass(\"bz-tab--error\")) {\r\n            $(\".bz-indicator-bar\", $container).addClass(\"bz-indicator-bar--error\");\r\n        }\r\n    }\r\n});","/*\r\n*   Name: BizAgi Form Modeler Tab Item Extension\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will redefine the tab item class to adjust to form modeler\r\n*/\r\n\r\nbizagi.rendering.tablet.tabItem.original = $.extend(true, {}, bizagi.rendering.tablet.tabItem.prototype);\r\n$.extend(bizagi.rendering.tablet.tabItem.prototype, {\r\n\r\n    /*\r\n   *   Renders the current container\r\n   *   Also adds sortable behaviour\r\n   */\r\n    postRenderContainer: function ($container) {\r\n        var self = this;\r\n\r\n        // Call original postrRenderContainer\r\n        bizagi.rendering.tablet.tabItem.original.postRenderContainer.apply(this, arguments);\r\n\r\n        if (!self.hasChildren()) {\r\n            $container.append('<div class=\"children\"></div>');\r\n        }\r\n\r\n        $container.addClass('bz-tab-item');\r\n    },\r\n\r\n    /*\r\n    *   Renders the current container\r\n    *   Also adds sortable behaviour\r\n    */\r\n    setTabHeader: function ($tabHeader) {\r\n        var self = this,\r\n            properties = self.properties;\r\n\r\n        // Add handlers if the tabitem isn't contained in a nested form\r\n        if (!self.isContainedInNestedForm() && !self.isContainedInCollectionNavigator()) {\r\n\r\n            // Delete handler\r\n            $(\".tab--delete\", $tabHeader).click(function () {\r\n                // Publish deletetab event to the view\r\n                self.triggerGlobalHandler(\"deletetab\", {guid: properties.guid});\r\n                return false;\r\n            });\r\n\r\n\r\n            $tabHeader.dblclick(function () {\r\n                if (!self.isEditableLabelActive()) {\r\n                    self.editDisplayName($tabHeader);\r\n                }\r\n            }).click(function (ev) {\r\n                if (!self.isEditableLabelActive()) {\r\n                    self.triggerGlobalHandler(\"showProperties\", {guid: self.properties.guid, redraw: true});\r\n                }\r\n            }).mousedown(function (ev) {\r\n                if (ev.button === 2) {\r\n                    ev.stopImmediatePropagation();\r\n                    if (!self.isEditableLabelActive()) {\r\n                        self.triggerGlobalHandler(\"elementrightclick\", {\r\n                            guid: self.properties.guid,\r\n                            position: {x: ev.clientX, y: ev.clientY}\r\n                        });\r\n                    }\r\n                }\r\n            });\r\n\r\n\r\n            // Allow sortable connections between tabs\r\n            /* tabHeader.droppable({\r\n                accept: \".ui-bizagi-draggable-item\",\r\n                hoverClass: \"ui-bizagi-tab-drop-hover\",\r\n                tolerance: \"pointer\",\r\n                drop: function (event, ui) { self.dropRender(event, ui); },\r\n                activate: function (event, ui) {\r\n                    self.currentDragSource = self.getDragSource(ui.draggable);\r\n                }\r\n\r\n            }); */\r\n\r\n        }\r\n    },\r\n\r\n    /*\r\n    *   Change selected item\r\n    */\r\n    activate: function () {\r\n        var self = this;\r\n\r\n        // Call base\r\n        bizagi.rendering.tablet.tabItem.original.activate.apply(this, arguments);\r\n\r\n        // Publish activatetab event to the view\r\n        self.triggerGlobalHandler(\"activatetab\", {guid: self.properties.guid});\r\n    },\r\n\r\n    /*\r\n    * Edit the current display name\r\n    */\r\n    editDisplayName: function (tabHeader) {\r\n        var self = this;\r\n        var label = $(\"a\", tabHeader);\r\n\r\n        // Publish label edition event\r\n        self.triggerGlobalHandler(\"startlabeledition\");\r\n\r\n        // Create editable label component\r\n        var presenter = self.editableLabelPresenter = new bizagi.editor.component.editableLabel.presenter({\r\n            label: label,\r\n            value: self.properties.displayName\r\n        });\r\n\r\n        // Bind change event\r\n        presenter.subscribe(\"change\", function (ev, args) {\r\n            self.triggerGlobalHandler(\"changelabel\", {guid: self.properties.guid, value: args.value});\r\n        });\r\n        \r\n        presenter.subscribe(\"finish\", function(){\r\n            self.triggerGlobalHandler(\"finishlabeledition\");\r\n        });\r\n        // Bind keyup event\r\n        presenter.subscribe(\"keyup\", function (ev, args) {\r\n            // Extend tab header\r\n            tabHeader.find(\".ui-bizagi-container-input-editable\").width(bizagi.measureString(args.value) + 100);\r\n        });\r\n\r\n        // Render label\r\n        presenter.render();\r\n\r\n    },\r\n\r\n    /*\r\n    * Returns true if the editable label component is active\r\n    */\r\n    isEditableLabelActive: function () {\r\n        var self = this;\r\n\r\n        if (self.editableLabelPresenter && self.editableLabelPresenter.editableLabel) {\r\n            return true;\r\n        }\r\n        return false;\r\n    },\r\n\r\n    /*\r\n    *   Handles renders drop finish operation\r\n    */\r\n    dropRender: function (e, ui) {\r\n        var self = this;\r\n\r\n        // If the original event isn't mouseup returns\r\n        if (e.originalEvent.type !== \"mouseup\") {\r\n            return;\r\n        }\r\n\r\n        var finalPosition = self.children.length;\r\n        var targetContainer = self.properties.guid;\r\n        var initialPosition = ui.draggable ? ui.draggable.data(\"start-position\") : null;\r\n        var sourceContainer = ui.draggable ? ui.draggable.data(\"sourceContainer\") : null;\r\n        var source = self.currentDragSource;\r\n\r\n        if (bizagi.editor.utilities.isObject(source)) {\r\n\r\n            // Set a timer to avoid multiple drop bug at the same time\r\n            if (bizagi.sortContainerTimeout != null) {\r\n                return;\r\n            }\r\n            bizagi.sortContainerTimeout = setTimeout(function () {\r\n                bizagi.sortContainerTimeout = null;\r\n            }, 100);\r\n\r\n            // Trigger sort finish event\r\n            self.triggerGlobalHandler(\"sortfinish\", {\r\n                source: source,\r\n                initialPosition: initialPosition,\r\n                finalPosition: finalPosition,\r\n                sourceContainer: sourceContainer,\r\n                targetContainer: targetContainer\r\n            });\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Show validation messages\r\n     * @param messages\r\n     */\r\n    showValidationMessage: function (messages) {\r\n        // Prevent propagation\r\n    }\r\n});\r\n ","/*\r\n*   Name: BizAgi Form Modeler Tab Extension\r\n*   Author: Alexander Mejia\r\n*   Comments:\r\n*   -   This script will redefine the search class to adjust to form modeler\r\n*/\r\n\r\n\r\nbizagi.rendering.tablet.search.original = $.extend( true, {}, bizagi.rendering.tablet.search.prototype );\r\n$.extend(bizagi.rendering.tablet.search.prototype, {\r\n    /*\r\n    *   Template method to implement in each device to customize each render after processed\r\n    */\r\n    postRender: function () {\r\n        var self = this;\r\n\r\n        // Call original method        \r\n        bizagi.rendering.tablet.search.original.postRender.apply(this, arguments);\r\n\r\n        // If the current form is readonly return;\r\n        if (self.isReadOnlyForm()) {\r\n            return;\r\n        }\r\n\r\n        if (self.advancedSearch && !self.isContainedInNestedForm()) {\r\n            self.advancedSearch.click(function (ev) {\r\n                ev.stopPropagation();\r\n                // Publish showSearchForm event to the view\r\n                self.triggerGlobalHandler(\"showsearchform\", {\r\n                    guid: self.properties.guid\r\n                });\r\n            });\r\n        }\r\n    }\r\n});","/*\r\n*   Name: BizAgi Form Modeler Image Extension\r\n*   Author: Christian Collazos\r\n*   Comments:\r\n*   -   This script will redefine the image class to adjust to form modeler\r\n*/\r\n\r\nbizagi.rendering.tablet.image.original = $.extend( true, {}, bizagi.rendering.tablet.image.prototype );\r\n$.extend(bizagi.rendering.tablet.image.prototype, {\r\n/*\r\n    * Extend original method\r\n    */\r\n    postRender: function () {\r\n        var self = this;\r\n        var control = self.getControl();\r\n        var width = self.properties.width;\r\n        var containerType = self.parent.properties.type;\r\n\r\n        // Call original method        \r\n        bizagi.rendering.tablet.image.original.postRender.apply(this, arguments);\r\n\r\n        setTimeout(function () {\r\n            if (width === -1) {\r\n\r\n                var thumbnail = $(\".resizable_img\", control);\r\n                var widthWrapper = control.width();\r\n                var height = control.height();\r\n                var containerHeight = 0;\r\n                var totalImagesInSameContainer = 0;\r\n\r\n                if (containerType == \"grid\") {\r\n                    containerHeight = $(\".resizable_img\", control).closest(\"td\").height();\r\n                }\r\n                else {\r\n                    if (self.parent.properties.id == self.getFormContainer().properties.id) {\r\n                        containerHeight = 50;\r\n                    } else {\r\n                        var containerChildsSize = self.parent.getChildreCount();\r\n                        var containerChildsHeightSum = self.parent.getChildrenSumHeight(\"image\");\r\n                        containerHeight = $(\".resizable_img\", control).closest(\".ui-bizagi-container\").height() - 17;\r\n                        containerHeight = containerHeight < 50 ? 50 : containerHeight;\r\n                        totalImagesInSameContainer = self.parent.countByRenderTypeWithParams(\"image\", -1);\r\n\r\n                        if (containerChildsSize > 1) {\r\n                            containerHeight = containerHeight - (containerChildsHeightSum);\r\n                        }\r\n                    }\r\n                }\r\n\r\n                thumbnail.width(widthWrapper);\r\n\r\n                if (totalImagesInSameContainer > 1) {\r\n                    if (null != containerHeight && containerHeight > 0) {\r\n                        $(\".resizable_img\",self.parent.container).height(containerHeight / totalImagesInSameContainer + \"px\");\r\n                    } else {\r\n                        $(\".resizable_img\",control).height(height + \"px\");\r\n                    }\r\n                } else {\r\n                    if (null != containerHeight && containerHeight > 0) {\r\n                        thumbnail.height(containerHeight + \"px\");\r\n                    } else {\r\n                        thumbnail.height(height + \"px\");\r\n                    }\r\n                }\r\n            }\r\n\r\n            self.triggerGlobalHandler(\"controlRefreshCanvas\");\r\n\r\n        }, 160);\r\n\r\n    },\r\n\r\n    /*\r\n    * Get image width and height and send them to modeler \r\n    */\r\n    changeImageSize: function (imageWidth, imageHeight) {\r\n        var self = this;\r\n        var control = self.getControl();\r\n\r\n        self.executeTriggerHandler(control, imageWidth, imageHeight, \"string\");\r\n\r\n    },\r\n\r\n    /*\r\n    * Update control definition\r\n    */\r\n    executeTriggerHandler: function (control, imageWidth, imageHeight, type) {\r\n        var self = this;\r\n        var widthValue = \"\";\r\n        var heightValue = \"\";\r\n\r\n        if (type == \"string\") {\r\n            widthValue = imageWidth.slice(0, -2);\r\n            heightValue = imageHeight.slice(0, -2);\r\n        } else {\r\n            widthValue = imageWidth;\r\n            heightValue = imageHeight;\r\n        }\r\n        self.triggerGlobalHandler(\"resizeImage\", {\r\n            guid: self.properties.guid,\r\n            properties: [{\r\n                property: \"thumbnail.width\",\r\n                value: widthValue\r\n            },\r\n            {\r\n                property: \"thumbnail.height\",\r\n                value: heightValue\r\n            }]\r\n        });\r\n    }\r\n});","/*\r\n*   Name: BizAgi Form Modeler Collection Navigator Extension\r\n*   Author: Alexander Mejia\r\n*   Date: 02-12-213\r\n*   Comments:\r\n*   -   This script will redefine the collection navigator class to adjust to form modeler\r\n*/\r\n \r\n\r\nbizagi.rendering.tablet.collectionnavigator.original = $.extend(true, {}, bizagi.rendering.tablet.collectionnavigator.prototype);\r\n$.extend(bizagi.rendering.tablet.collectionnavigator.prototype,  {\r\n\r\n    postRender: function () {\r\n        var self = this;\r\n     \r\n        // Call original method\r\n        bizagi.rendering.tablet.collectionnavigator.original.postRender.apply(this, arguments);\r\n\r\n        $.when(self.isRendered())\r\n            .done(function () {\r\n                var properties = self.properties;\r\n                var control = self.getControl();\r\n                var canvas = control.find(\".bz-collectionnavigator-navigationform\");\r\n\r\n                if (properties.navigationform) {\r\n                    setTimeout(function () {\r\n                        self.triggerGlobalHandler(\"refreshControl\", {\r\n                            guid: properties.guid,\r\n                            canvas: canvas\r\n                        });\r\n                    }, 0);\r\n                }\r\n            });\r\n    }\r\n});\r\n","\r\n\r\nbizagi.rendering.tablet.nestedForm.original = $.extend(true, {}, bizagi.rendering.tablet.nestedForm.prototype);\r\n$.extend(bizagi.rendering.tablet.nestedForm.prototype,  {\r\n    /*\r\n    *   Template method to implement in each device to customize the render's behaviour when rendering in design mode\r\n    */\r\n   configureDesignView: function () {\r\n        var self = this;\r\n        var properties = self.properties;\r\n        var $container = self.container;\r\n\r\n        $container.removeClass(\"ui-bizagi-container-panel\");\r\n        $container.addClass(\"ui-bizagi-container-nestedform\");\r\n        \r\n        var title = $(\"<span class= 'ui-bizagi-container-nestedform-title'/>\");\r\n        title.text(\"Nested Form: \" + properties.formDisplayName);\r\n        $container.prepend(title);        \r\n    }    \r\n});\r\n","/*\r\n*   Name: BizAgi Form Modeler Group Extension\r\n*   Author: Ivan Avila\r\n*   Comments:\r\n*   -   This script will redefine the group class to adjust to form modeler\r\n*/\r\n\r\nbizagi.rendering.tablet.date.original = $.extend( true, {}, bizagi.rendering.tablet.date.prototype );\r\n$.extend(bizagi.rendering.tablet.date.prototype, {\r\n        /* \r\n    *   Template method to implement in each device to customize each container after processed\r\n    */\r\n   setDisplayValue: function (value) {\r\n        var self = this;\r\n        \r\n        // Call original method\r\n        bizagi.rendering.tablet.date.original.setDisplayValue.apply(this, arguments);\r\n    \r\n        //Apply format\r\n        var properties = self.properties;\r\n        var dateControl = self.getDateControl().parent();\r\n        var inputPlaceholder = $(\".ui-bizagi-render-date\", dateControl);\r\n\r\n        if (properties.valueFormat.color && properties.valueFormat.color.length > 0) {\r\n            var nameNewClass = \"bz-\" + properties.valueFormat.color.replace('#', '') + \"-placeholder\";\r\n            var fullNewClass = \".\" + nameNewClass + \"::-webkit-input-placeholder{color:\" + properties.valueFormat.color + \"}\";\r\n            bizagi.util.loadStyle(fullNewClass, nameNewClass);\r\n            inputPlaceholder.addClass(nameNewClass);\r\n        }\r\n\r\n        if (properties.valueFormat.strikethru && properties.valueFormat.underline) {\r\n            inputPlaceholder.addClass(\"biz-modify-placeholder-through-underline\");\r\n        } else {\r\n            inputPlaceholder.removeClass(\"biz-modify-placeholder-through-underline\");\r\n\r\n            if (properties.valueFormat.strikethru) {\r\n                inputPlaceholder.addClass(\"biz-modify-placeholder-through\");\r\n            } else {\r\n                inputPlaceholder.removeClass(\"biz-modify-placeholder-through\");\r\n            }\r\n\r\n            if (properties.valueFormat.underline) {\r\n                inputPlaceholder.addClass(\"biz-modify-placeholder-underline\");\r\n            } else {\r\n                inputPlaceholder.removeClass(\"biz-modify-placeholder-underline\");\r\n            }\r\n        }\r\n    }\r\n});","/*\r\n*   Default implementation for user fields\r\n*/\r\nbizagi.rendering.tablet.basicUserField.extend(\"bizagi.rendering.tablet.designUserField\", {}, {\r\n\r\n    /*\r\n    *   Template method to implement in each device to customize each render after processed\r\n    */\r\n    getEditableControl: function () {\r\n        var self = this;\r\n        var $control = self.getControl();\r\n        var properties = self.properties;\r\n        var controlName = properties.control + ' Custom control';\r\n        var tmpl = '<div class=\"bz-input-icon bz-widget--fake\"><input class=\"bz-input-icon__input bz-space--inline-s\" placeholder=\"' + controlName + '\"/><svg class=\"bz-icn bz-space--inline-s\" width=\"32px\" height=\"32px\"><use xlink:href=\"#gear\" /></svg></div>';\r\n\r\n        $control.addClass(\"bz-widget__control--fake\");\r\n        \r\n        self.input = $(tmpl).appendTo($control);\r\n    },\r\n\r\n    /*\r\n\t*  Dont send the data to the server\r\n\t*/\r\n    collectData: function (renderValues) {\r\n    },\r\n\r\n    getDisplayValue: function () {\r\n        var self = this;\r\n        var properties = self.properties;\r\n        var controlName = properties.control;\r\n        return \"Userfield in design mode: \" + controlName ;\r\n    },\r\n\r\n    getReadonlyControl: function () {\r\n        var self = this;\r\n        var $control = self.getControl();\r\n        var properties = self.properties;\r\n        var controlName = properties.control + ' Custom control';\r\n        var tmpl = '<div class=\"bz-input-icon bz-widget--fake\"><input class=\"bz-input-icon__input bz-space--inline-s\" placeholder=\"' + controlName + '/><svg class=\"bz-icn bz-space--inline-s\" width=\"32px\" height=\"32px\"><use xlink:href=\"#gear\" /></svg></div>';\r\n\r\n        $control.addClass(\"bz-widget__control--fake\");\r\n        \r\n        var myControl = $(tmpl).appendTo($control);\r\n        return myControl;\r\n    }\r\n});"]}