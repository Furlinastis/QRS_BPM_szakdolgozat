{"version":3,"sources":["jquery/common/bizagi.ui.controls/jquery.ui.controls.definition.js","jquery/workportal/js/base/command/bizagi.workportal.command.security.js","jquery/workportal/js/base/command/bizagi.workportal.command.printform.js","jquery/workportal/js/base/bizagi.workportal.controllers.controller.js","jquery/workportal/js/base/bizagi.workportal.controllers.main.js","jquery/workportal/js/base/bizagi.workportal.controllers.menu.js","jquery/workportal/js/base/bizagi.workportal.controllers.workarea.js","jquery/workportal/js/bizagi.workportal.webpart.helper.js","jquery/workportal/js/base/webpart/bizagi.workportal.webparts.webpart.js","jquery/workportal/js/base/action/bizagi.workportal.actions.action.js","jquery/workportal/js/base/action/bizagi.workportal.actions.routing.js","jquery/workportal/js/base/action/bizagi.workportal.actions.search.js","jquery/workportal/js/base/widget/bizagi.workportal.widgets.widget.js","jquery/workportal/js/base/widget/bizagi.workportal.widgets.webpart.js","jquery/workportal/js/base/widget/bizagi.workportal.widgets.print.js","jquery/workportal/js/base/widget/bizagi.workportal.widgets.fontsize.js","jquery/workportal/js/base/widget/bizagi.workportal.widgets.routing.js","jquery/workportal/js/base/widget/bizagi.workportal.widgets.render.js","jquery/workportal/js/base/widget/bizagi.workportal.widgets.startForm.js","jquery/workportal/js/base/widget/bizagi.workportal.widgets.MySearchList.js","jquery/workportal/js/base/widget/bizagi.workportal.widgets.loadForm.js","jquery/workportal/js/base/widget/bizagi.workportal.widgets.subMenu.js","jquery/workportal/js/base/widget/bizagi.workportal.widgets.search.js","jquery/workportal/js/base/widget/bizagi.workportal.widgets.page.js","jquery/workportal/js/base/widget/bizagi.workportal.widgets.renderForm.js","jquery/workportal/js/base/widget/bizagi.workportal.widgets.genericiframe.js","jquery/workportal/js/base/widget/bizagi.workportal.widgets.oldrenderintegration.js","jquery/workportal/js/desktop/widget/bizagi.workportal.desktop.widgets.fontsize.js","jquery/workportal/js/desktop/bizagi.workportal.desktop.controllers.main.js","jquery/workportal/js/desktop/bizagi.workportal.desktop.controllers.menu.js","jquery/workportal/js/desktop/bizagi.workportal.desktop.controllers.workarea.js","jquery/workportal/js/desktop/bizagi.workportal.desktop.popup.js","jquery/workportal/js/desktop/widget/bizagi.workportal.desktop.widgets.print.js","jquery/workportal/js/desktop/widget/bizagi.workportal.desktop.widgets.popup.js","jquery/workportal/desktop/widget/homeportal/bizagi.workportal.desktop.widgets.homeportal.js","jquery/workportal/desktop/widget/dialognav/bizagi.workportal.desktop.widgets.dialognav.js","jquery/workportal/js/desktop/widget/bizagi.workportal.desktop.widgets.routing.js","jquery/workportal/js/desktop/widget/bizagi.workportal.desktop.widgets.render.js","jquery/workportal/js/desktop/widget/bizagi.workportal.desktop.widgets.startForm.js","jquery/workportal/js/desktop/widget/bizagi.workportal.desktop.widgets.renderForm.js","jquery/workportal/js/desktop/widget/bizagi.workportal.desktop.widgets.mySearchList.js","jquery/workportal/js/desktop/widget/bizagi.workportal.desktop.widgets.loadForm.js","jquery/workportal/js/desktop/widget/bizagi.workportal.desktop.widgets.subMenu.js","jquery/workportal/js/desktop/widget/bizagi.workportal.desktop.widgets.genericiframe.js","jquery/workportal/js/desktop/widget/bizagi.workportal.desktop.widgets.search.js","jquery/workportal/js/desktop/widget/bizagi.workportal.desktop.widgets.oldrenderintegration.js","jquery/workportal/desktop/widget/createcase/bizagi.workportal.desktop.widgets.createcase.js","jquery/workportal/desktop/widget/updateform/bizagi.workportal.desktop.widgets.updateform.js","jquery/workportal/desktop/widget/templateEngine/bizagi.workportal.desktop.widgets.templateEngine.js","jquery/workportal/js/bizagi.workportal.override.helper.js","jquery/common/bizagi.ui.controls/jquery.ui.controls.loadtmpls.js","jquery/common/bizagi.dragScroll/js/bizagi.dragScroll.js","jquery/common/bizagi.internals/bizagi.workportal.desktop.overrides.js","jquery/workportal/desktop/widget/dashboard/bizagi.workportal.desktop.widgets.dashboard.js","jquery/workportal/desktop/widget/stuff/bizagi.workportal.desktop.widgets.stuff.js","jquery/workportal/desktop/widget/project.base/bizagi.workportal.desktop.widgets.project.base.js","jquery/workportal/desktop/widget/decontextualized.plans/bizagi.workportal.desktop.widgets.decontextualized.plans.js","jquery/workportal/desktop/widget/navigator/bizagi.workportal.desktop.widgets.navigator.js","jquery/workportal/desktop/widget/sidebarhome/bizagi.workportal.desktop.widgets.sidebarhome.js","jquery/workportal/desktop/widget/usersummary/bizagi.workportal.desktop.widgets.usersummary.js","jquery/workportal/desktop/widget/shortcuts/bizagi.workportal.desktop.widgets.shortcuts.js","jquery/workportal/desktop/widget/rightsidebar/bizagi.workportal.desktop.widgets.rightsidebar.js","jquery/workportal/desktop/widget/leftsidebar/bizagi.workportal.desktop.widgets.leftsidebar.js","jquery/workportal/desktop/widget/dummy/bizagi.workportal.desktop.widgets.dummy.js","jquery/workportal/desktop/widget/sidebar/bizagi.workportal.desktop.widgets.sidebar.js","jquery/workportal/js/base/widget/admin/admin.cases.js","jquery/workportal/js/base/widget/admin/admin.caseSearch.js","jquery/workportal/js/desktop/widget/bizagi.workportal.desktop.widgets.adhoc.create.process.js","jquery/workportal/desktop/widget/profly/bizagi.workportal.desktop.widgets.profly.js","jquery/workportal/desktop/widget/sessionTimeout/bizagi.workportal.desktop.widgets.sessionTimeout.js","jquery/workportal/desktop/widget/sessionTimeout/expired/bizagi.workportal.desktop.widgets.sessionTimeoutExpired.js","jquery/workportal/desktop/widget/user.privacy/bizagi.workportal.desktop.widgets.user.privacy.js","jquery/workportal/desktop/widget/users.modal/bizagi.workportal.desktop.widgets.users.modal.js","jquery/workportal/desktop/widget/accessDenied/bizagi.workportal.desktop.widgets.accessDenied.js","jquery/plugins/jsgrid/js/jsgrid.js","jquery/common/bizagi/js/bizagi.users.adapter.js","jquery/webparts/desktop/SharePoint/workitemSummary/task.options/bizagi.workportal.desktop.widgets.task.options.js"],"names":["$","bizagi","ui","controls","uitable","namespace","availableComponents","css","tmpl","tmpl2","tmpl3","uicombo","uicheckbox","uiradio","uitreeview","uimultiselect","Class","init","dataService","this","rawData","getSecurity","self","def","Deferred","security","jsonSecurityList","menuSecurity","resolve","when","getMenuAuthorization","done","data","currentUser","associatedStakeholders","length","permissions","push","convertSecurityData","each","key","value","authMenu","document","trigger","promise","permsMenu","getRecursivePerms","perms","checkSecurityPerm","module","deferred","bind","getRawData","renderFactory","print","properties","printParams","extend","triggerHandler","widgetName","workportal","widgets","widget","BIZAGI_WORKPORTAL_WIDGET_PRINT","modalParameters","title","localization","getResource","refreshInbox","params","referrer","hasOwnProperty","referrerParams","buttons","text","click","selfButton","frameTemplate","getTemplate","headerTemplate","executePrintWidgetAction","objFrame","strFrameName","Date","getTime","jFrame","printID","jFrameHeader","environment","loader","productBuild","productBuildToAbout","build","appendTo","util","isIE","window","frames","i","name","objDoc","contentWindow","open","objDocStr","innerHTML","html","write","close","win","styleLoading","setTimeout","focus","remove","removeAttr","attr","workportalFacade","resources","componentContainers","subscribers","disposed","templatesDeferred","getWorkportal","publish","eventName","subscribe","callback","event","subscribeOneTime","one","unsubscribe","unbind","render","defer","renderingDeferred","areTemplatedLoaded","pipe","renderContent","postRender","getContent","content","getComponentSelector","component","getComponentContainer","resizeLayout","performResizeLayout","dispose","item","override","disposeTime","loadTemplates","templates","tmplPromises","useNewEngine","undefined","loadTemplate","path","apply","templateService","getTemplateWidget","isRendered","controllers","controller","componentRegex","_super","e","p","liveSave","autoSave","liveProcessesEvents","saveEvent","saveLivePromise","BIZAGI_WORKPORTAL_WIDGET_INBOX_GRID","BIZAGI_WORKPORTAL_WIDGET_INBOX","cookie","expires","setContext","setWidget","addDialogToDialogStack","showDialogWidget","closeCurrentDialog","closeAllDialogs","popupWidget","popWidget","pushWidget","executeAction","disposeWidget","appendWidgetTo","NotificationDispatcher","dispatch","notification","type","refreshQueryFormShortCut","template","workarea","getWorkareaController","menu","getMenuController","resize","currentWidget","currentWidgetParams","getMenu","assert","isEmpty","renderWorkarea","action","actions","BIZAGI_WORKPORTAL_ACTION_ROUTING","start","then","getAction","execute","BIZAGI_WORKPORTAL_ACTION_SEARCH","workareaContainer","cleanWidgets","empty","loadWidgetFromFacade","getWidget","widgetController","renderedContent","dialog","resizeContainer","height","container","containerHeight","adjustableChildren","children","adjustableContainersHeight","fixedContentHeight","element","hasClass","overflowY","addClass","marginTop","Number","replace","finalHeight","overflow-y","find","closest","show","getCurrentUser","loadPreferences","preferencesWP","customPreferencesObj","services","preferences","customFormats","customPreferencesValues","getPreferences","windowMaintenance","datepicker","setDefaults","currencyInfo","decimalSymbol","decimalSeparator","symbol","digitGroupSymbol","thousandSeparator","groupSeparator","setResource","BIZAGI_DEFAULT_CURRENCY_INFO","decimalDigits","uploadMaxFileSize","BIZAGI_SETTINGS","UploadMaxFileSize","changeData","overrideUserPreferences","command","enableFeatureDisplayOptions","DisplayOptions","base64image","themeLogo","photo","userPicture","hasPicture","initials","userFullName","getInitials","showQrMobileMenu","fail","logout","getPreferencesWorkportalCurrentUser","resp","overrideLocalization","changeWidget","adjustMenuWP","buttonMenuContainer","toleranceFor","Jelement","changeWidth","sign","end","searchInputWidth","outerWidth","widthComponentsWithoutResponsive","limitWidth","width","selectorMenuButtons","indexButtonToHide","indexLastButton","thereIsAButtonOverlaped","position","top","eq","hide","clean","webpart","hideCasesColumn","columnName","columns","visible","transformCasesInfo","old","imageColumn","newData","transformed","column","displayName","cases","columnTitle","oldColumn","fieldName","dataType","parseBoolean","isOrdered","orderBy","orderType","rows","oldRow","newRow","id","j","fields","totalPages","page","drawGridView","pages","number","active","filters","getCaseId","row","getEntityId","splitHeaderName","finalDispName","dispNameParts","split","getWorkItems","workitemsData","workitems","wi","wiInfo","idWorkItem","idTask","drawThumbnailsView","imageLabelColumn","getImage","files","getFileImage","getEmptyFile","getFile","removeWaitContainer","addWaitContainer","removeClass","templateDestination","resolvedRemplate","getFailServerErrorDeferred","errorTemplateName","errorMessage","message","remoteSeverURL","sharepointProxyPrefix","indexOf","substr","eTemplate","address","helpAddress","msg","getPaginationTemplate","publishShowRenderEvent","alert","deferRet","console","log","isWebpartInIFrame","displayWebPartPopUpExternalIframe","webpartName","postMessageSocket","canvas","whenInitialized","webPartToDraw","iframeidentifier","send","displayWebPartPopUpinIFrame","mask","createElement","className","style","popUpParams","preClosePopUp","ev","eventPhase","closePopUp","addEventListener","attachEvent","closeCanvas","appendChild","webpartCanvasDiv","pathiFrame","location","href","substring","queryStringParams","toString","idCase","idWorkitem","idWfClass","iframe","postmessageSocket","postmessage","remoteServer","destination","origin","receive","parentNode","src","removeChild","iframeclosemsg","resizeInPopUp","heightActivitiFormContainer","body","displayWebPartPopUp","webpartObject","canHide","showCasesMSG","readQueryString","parent","destroy","webpartParams","adjustButtonsToContent","startWaiting","executeWebpart","result","onclick","displayWebPartDialog","dialogParams","showCloseButton","a","webparts","addConfigurationMessage","messageResourceName","doc","ownerDocument","errorTemplate","whenCreated","fullname","whenExecuted","helper","project","isVisible","BIZAGI_IFRAME_IDENTIFIER","shortName","webPartDestine","startReceiving","sendDimensionsiFrame","mandatorysend","canvasobject","onresize","sendDimensionsiFramePostMessage","addResizeListener","iframeDimentions","iframeName","iframeHeight","iframeWidth","notFireToIframe","refresh","prepareForRefresh","newContent","contains","replaceSelector","creating","createWebpart","manageError","canvasError","errorMsg","responseText","endWaiting","append","onWaiting","getElementById","hideParent","routing","getRoute","route","deferredDialogOpened","isOfflineForm","moduleParams","formsRenderVersion","guid","BIZAGI_WORKPORTAL_WIDGET_RENDER","BIZAGI_WORKPORTAL_WIDGET_OLDRENDERINTEGRATION","BIZAGI_WORKPORTAL_WIDGET_ASYNC","BIZAGI_WORKPORTAL_WIDGET_PROJECT_DASHBOARD","enableWorkPortalMenu","validateIfRouteShouldBeGoToInbox","getPreference","hasWorkItems","goToInbox","BIZAGI_WORKPORTAL_WIDGET_START_FORM","parameters","onClose","dialogOpened","closeVisible","dialogClass","response","widgetReference","BIZAGI_WORKPORTAL_WIDGET_ROUTING","isThereAsync","asyncWidget","routeModuleParams","getWidgetByCookie","notifier","injector","get","messageWhenGoToInbox","messageForm","showSucessMessage","goToInboxPreference","widgetReferrer","workItems","index","isAsynch","radNumber","trim","idWorkflow","taskState","onlyFavorites","order","orderFieldName","group","bizagiConfig","getCustomizedColumnsData","lstIdCases","key2","value2","isArray","TaskName","State","IsFavorite","IsOpen","BIZAGI_WORKPORTAL_WIDGET_SEARCH","showNoResults","showSearch","requestGlobalForm","referrerBackButton","context","isTabletDevice","originarlColor","detectDevice","noresults","redirectToProcess","onlyUserWorkItems","formatRequest","formatCategories","isDate","state","slash","getYear","BIZAGI_WORKPORTAL_WIDGET_INTEGRATION","BIZAGI_WORKPORTAL_WIDGET_WEBPART","BIZAGI_WORKPORTAL_WIDGET_ADVANCE_SEARCH","BIZAGI_WORKPORTAL_WIDGET_HOMEPORTAL","BIZAGI_WORKPORTAL_WIDGET_ACTIVITY","BIZAGI_WORKPORTAL_WIDGET_RENDERFORM","BIZAGI_WORKPORTAL_WIDGET_NEWCASE","BIZAGI_WORKPORTAL_WIDGET_QUERIES","BIZAGI_WORKPORTAL_WIDGET_QUERIES_DEFINITION","BIZAGI_WORKPORTAL_WIDGET_QUERIES_SHORTCUT","BIZAGI_WORKPORTAL_WIDGET_QUERYFORM","BIZAGI_WORKPORTAL_WIDGET_LISTCASES","BIZAGI_WORKPORTAL_WIDGET_GENERICIFRAME","BIZAGI_WORKPORTAL_WIDGET_SUBMENU","BIZAGI_WORKPORTAL_WIDGET_FONTSIZE","BIZAGI_WORKPORTAL_WIDGET_PAGE","BIZAGI_WORKPORTAL_WIDGET_ENTITIES","BIZAGI_WORKPORTAL_WIDGET_REPORTS","BIZAGI_WORKPORTAL_WIDGET_REPORTS_MENU","BIZAGI_WORKPORTAL_WIDGET_REPORTS_CHART","BIZAGI_WORKPORTAL_WIDGET_SMARTFOLDERS","BIZAGI_WORKPORTAL_WIDGET_ADMIN_CASES","BIZAGI_WORKPORTAL_WIDGET_REASSIGN_CASE","BIZAGI_WORKPORTAL_WIDGET_ASYNCECM_UPLOAD","BIZAGI_WORKPORTAL_WIDGET_PROCESS_TREE","BIZAGI_WORKPORTAL_WIDGET_ENTITIES_TREE","BIZAGI_WORKPORTAL_WIDGET_USERS_TABLE","BIZAGI_WORKPORTAL_WIDGET_ACTIVITY_LOG","BIZAGI_WORKPORTAL_WIDGET_AUTHENTICATION_LOG","BIZAGI_WORKPORTAL_WIDGET_ADMIN_ENTITIES","BIZAGI_WORKPORTAL_WIDGET_ADMIN_ENCRYPT_PASSWORDS","BIZAGI_WORKPORTAL_WIDGET_ADMIN_USERS_REQUESTS","BIZAGI_WORKPORTAL_WIDGET_ADMIN_CASE_SEARCH","BIZAGI_WORKPORTAL_WIDGET_ADMIN_ASYNC_ACTIVITIES","BIZAGI_WORKPORTAL_WIDGET_ADMIN_DEFAULTS_ASSIGNATION_USER","BIZAGI_WORKPORTAL_WIDGET_ADMIN_TRANSFER_CASE_SECURITY_PERMISSIONS","BIZAGI_WORKPORTAL_WIDGET_ADMIN_USER_PROFILES","BIZAGI_WORKPORTAL_WIDGET_ADMIN_ALARMS","BIZAGI_WORKPORTAL_WIDGET_ADMIN_USER_LICENSES","BIZAGI_WORKPORTAL_WIDGET_ADMIN_DIMENSIONS","BIZAGI_WORKPORTAL_WIDGET_ADMIN_DOCUMENT_TEMPLATES","BIZAGI_WORKPORTAL_WIDGET_ADMIN_PROCESSES","BIZAGI_WORKPORTAL_WIDGET_START_PROCESS","BIZAGI_WORKPORTAL_WIDGET_ADMIN_BUSINESS_POLICIES","BIZAGI_WORKPORTAL_WIDGET_ADMIN_LANGUAGE","BIZAGI_WORKPORTAL_WIDGET_ADMIN_BUSINESS_POLICIES_DECISION_TABLE","BIZAGI_WORKPORTAL_WIDGET_ADMIN_BUSINESS_POLICIES_POLITICS","BIZAGI_WORKPORTAL_WIDGET_ADMIN_BUSINESS_POLICIES_RULES","BIZAGI_WORKPORTAL_WIDGET_ADMIN_BUSINESS_POLICIES_TABS","BIZAGI_WORKPORTAL_WIDGET_ADMIN_BUSINESS_POLICIES_VOCABULARIES","BIZAGI_WORKPORTAL_WIDGET_ADMIN_PREFERENCES","BIZAGI_WORKPORTAL_WIDGET_ADMIN_DISPLAY_OPTIONS","BIZAGI_WORKPORTAL_WIDGET_TREE","BIZAGI_WORKPORTAL_WIDGET_GRAPHIC_QUERY","BIZAGI_WORKPORTAL_WIDGET_PROCESS_MODELER_VIEW","BIZAGI_WORKPORTAL_WIDGET_ADMIN_USERS_ADMINISTRATION","BIZAGI_WORKPORTAL_WIDGET_ADMIN_USERS_DELEGATION","BIZAGI_WORKPORTAL_WIDGET_ADMIN_USERS_DELEGATION_SEARCH_USER","BIZAGI_WORKPORTAL_WIDGET_ADMIN_STAKEHOLDERS","BIZAGI_WORKPORTAL_WIDGET_BIZAGI_EVENTS","BIZAGI_WORKPORTAL_WIDGET_BIZAGI_RELEASE","BIZAGI_WORKPORTAL_WIDGET_PROJECT_PROCESS_DIAGRAM_HELPER","BIZAGI_WORKPORTAL_WIDGET_PROJECT_ACTIVITY_MAP_TOOLTIP","BIZAGI_WORKPORTAL_WIDGET_PROJECT_USERSUMMARY","BIZAGI_WORKPORTAL_WIDGET_MYSEARCHLIST","BIZAGI_WORKPORTAL_WIDGET_LOADFORM","BIZAGI_WORKPORTAL_WIDGET_TEMPLATE_ENGINE","BIZAGI_WORKPORTAL_WIDGET_DIALOGNAV","BIZAGI_WORKPORTAL_WIDGET_ADMIN_HOLIDAYS","BIZAGI_WORKPORTAL_WIDGET_ADMIN_PROJECTNAME","BIZAGI_WORKPORTAL_WIDGET_ADMIN_OAUTH2APPLICATIONS","BIZAGI_WORKPORTAL_WIDGET_ADMIN_ADHOC_PROCESSES","BIZAGI_WORKPORTAL_WIDGET_TIMELINE","BIZAGI_WORKPORTAL_WIDGET_ADHOC_PROCESS_MODELER","BIZAGI_WORKPORTAL_WIDGET_ADMIN_ADHOC_ENTITIES","BIZAGI_WORKPORTAL_WIDGET_ADMIN_ADHOC_USER_GROUPS","BIZAGI_WORKPORTAL_WIDGET_ADMIN_ADHOC_CREATE_PROCESS","BIZAGI_WORKPORTAL_WIDGET_ADMIN_ADHOC_BOOLEAN_EXP","BIZAGI_WORKPORTAL_WIDGET_ADHOC_CREATE_PROCESS","BIZAGI_WORKPORTAL_WIDGET_PROFLY","BIZAGI_WORKPORTAL_WIDGET_SESSION_TIMEOUT","BIZAGI_WORKPORTAL_WIDGET_SESSION_TIMEOUT_EXPIRED","BIZAGI_WORKPORTAL_WIDGET_USER_PRIVACY","BIZAGI_WORKPORTAL_WIDGET_ACCESS_DENIED","BIZAGI_WORKPORTAL_WIDGET_ADMIN_BUSINESS_POLICES","BIZAGI_WORKPORTAL_WIDGET_USERS_MODAL","BIZAGI_WORKPORTAL_WIDGET_QUERIES_MANAGEMENT","BIZAGI_WORKPORTAL_WIDGET_ADMIN_USER_PERMISSION_REPORT","observableElement","widgetReadyDeferred","isBlocked","getWidgetName","widgetParams","actionName","actionParams","showGraphicQuery","isAdhoc","maximizeOnly","desktop","dialogStack","pop","isProcessOnTheFlyCase","showTimeLine","startAndThen","showSelectUser","maximize","userLinkLabel","parentDef","showBackButton","reject","userId","userName","routingExecute","val","eventAsTasks","fullName","sub","off","arguments","on","unsub","pub","pubDeadLockDetection","pubDef","queueDef","Array","events","_data","isReady","setWidgetReady","checkProcess","checkWorkItems","getCaseSubprocesses","process","subProcessPersonalized","forEach","workitem","formatDate","formatDateFromInvariantStringDate","estimatedSolutionDate","hash","search","queryString","getQueryString","isConfiguredFromHash","hashParams","getHashParams","details","summaryDeferred","currentInboxView","summaryCaseDetails","caseNumber","releaseCurrentActivity","grep","currentState","activity","allowReleaseActivity","renderSummary","parents","renderForm","withOutGlobalForm","cache","htmlContent","showComments","PrintableVersion","StateLog","GraphicQuery","printableVersion","stateLog","graphicQuery","summary","caseSummaryTemplate","formatInvariantDate","delegate","tabs","create","activate","commentsFocus","newPanel","prop","comments","readOnly","tab","renderComments","summarySubProcess","subprocess","subProcesses","custData","caseSummaryTemplateSubprocess","summaryAssigness","assignees","eventsUniqueList","el","inArray","join","activitiesUniqueList","activities","caseSummaryTemplateAssigness","summaryCaseEvents","caseSummaryTemplateEvents","summaryActivities","fullFormat","caseSummaryTemplateActivities","resultRender","renderContainer","getMessageFromNetworkState","online","proxyPrefix","serviceLocator","database","rendering","facade","triggerparams","fromTask","fromWorkItemId","oldrenderevent","eventMethod","eventer","stopPropagation","renderingFacade","idProcess","startForm","concat","form","IsDisposed","searchCriteriasApplied","preProcessValue","control","formClass","createRenderElement","rangeQuery","xpath","processForm","containerParams","getRenderById","setValue","queryFormParams","h_action","h_contexttype","h_idForm","guidForm","getQueryForm","processedForm","match","g1","offset","string","toLowerCase","JSON","parse","contextType","renderingParams","renderStaticForm","BIZAGI_WORKPORTAL_WIDGET_RENDER_FORM","idForm","idEntity","surrogateKey","genericiframe","widgetURL","url","fontsize","sizeSelected","fontsizeTemplate","fontButton","textSize","main","showOldWindow","session-timeout","session-timeout-expired","getIEVersion","renderIENotCompatibleTemplate","BIZAGI_PATH_TO_BASE","renderWidget","closeQuirksModePopup","iDialog","iTotalDialog","popup","options","closed","extendQueryString","showQuirksModePopup","windowParameters","instance","dontClose","innerDialog","queries","shortcut","renderStoredQueries","searchContent","iconsTemplate","menuContent","sec","reportsSecurity","getWidgetByDataUser","siblings","LogOut","preventDefault","Search","setActiveSection","Inbox","showWidgetsPopup","showNewCasePopup","enableMySearch","showMySearchPopup","home","actualWidget","storeWidget","inbox","grid","homeportal","isFunction","resetNavigatorInfo","showQueriesPopup","renderAdminMenu","renderQuickProcessMenu","renderReportsMenu","getUrl","endPoint","showUserProfileMenu","showQRCodePopup","inputSearchField","renderFontMenu","CURRENT_THEME_REMOVE_IT","showAboutPopup","keyCode","searchValue","emptyNavigatorInfo","$userProfile","target","is","ajax","success","popupContent","modal","allowmaximize","maximized","resizable","draggable","showMenuPopup","sourceElement","buttonSelector","my","at","currentPopup","closePopupInstance","showUserPopup","max-height","activeScroll","disableFrankensteinQueryForms","argsTemplate","currentYear","currentYearVersion","hostName","checkRootCategory","getsRootCategory","getSubMenuData","category","k","v","categoryKey","categoryName","categoryUrl","menuData","menuValidator","AdhocProcessAdmin","AdhocUserGroupAdmin","isIE8","renderSubMenu","menuButton","submenu","categoryClassName","customClickHandler","showEntitiesPopup","arrowPosition","insertAfter","scrollElement","closeDeferred","after","showPopup","popupWidth","popupHeight","display","float","left","z-index","of","collision","printversion","p_all_rows","formatTabs","formatGroups","appendCaseDetails","formatECM","formatButton","formatGrid","formatRenderContainer","formatContent","tabElement","ul","labels","$caseDetails","setProcess","createdBy","Name","creationDate","idPlan","getPlan","responsePlan","processPath","prepend","containerText","cont","image","file","button","parentContainer","tableControl","pageContent","closeButton","register","registerCallback","contexts","HOME","dashboard","layout","stuff","plans","navigator","sidebar","usersummary","myshortcuts","rightSidebar","empty1","empty2","nav","level","belongs","toLeftSidebarCD","toRightSidebarCD","toTaskSidebarCD","TEMPLATEENGINE-VIEW","paginator","sortbar","mysearchfilter","ENTITY-ENGINE-VIEW","SEARCH-ENGINE-VIEW","mysearchcriteria","CASES-TEMPLATE-VIEW","proccesseslist","filtercases","PLANS-VIEW","topmenu","manager","ACTIVITY","leftSidebar","contentDashboard","caseState","activityDescription","activityState","processState","users","subprocesses","relatedPlan","OVERVIEW","overview","refreshLastItemBreadcrumb","COMMENTS","discussions","discussionSidebar","FILES","filesPreview","PROCESSMAP","processMap","LOG","TIMELINE","timeline","timelineSidebar","PLANCREATE","plan","PLANOVERVIEW","planActivities","planSidebar","planAction","planState","planProgress","planTime","planParent","planUsers","PLANACTIVITIES","PLANFILES","empty3","empty4","empty5","empty6","empty7","PLANCOMMENTS","PLANTIMELINE","PLANSIDEBAR","EDITACTIVITY","activitiesForm","ACTIVITYPLAN","activitySidebar","activityAction","activityTime","activityProgress","activityParent","activityUsers","ACTIVITYPLANCREATE","ACTIVITYPLANOVERVIEW","ACTIVITYPLANCOMMENTS","ACTIVITYPLANFILES","ACTIVITYPLANPROCESSMAP","ACTIVITYPLANLOG","ACTIVITYPLANTIMELINE","REFRESHALL","CONTEXT_HOME","supportNav","setContextsByNotifyEvents","proxy","onNotifyChange","registerInstance","contextsSidebarActivity","contextsWithoutLeftSidebarCaseDashboard","contextsLeftSidebarCaseDashboard","contextsWithoutRightSidebarCaseDashboard","contextsRightSidebarCaseDashboard","d","necesaryClean","setLayout","servicesPD","behaviors","projectDashboard","getContextToShow","dataPD","responseGetCaseSummaryDetails","hasAccessToCase","currentContext","contextToShow","themesEnabled","getCurrentTheme","theme","loadContext","setCurrentTheme","histName","hasGlobalForm","updateView","args","showContextByMenuDashboard","isValidContext","removeCurrentTheme","emit","newInstance","dialognavdata","BIZAGI_WORKPORTAL_DIALOGNAV","paramsData","eventType","fromActionLauncher","guidEntityCurrent","reference","referenceType","showDateNavigator","classContext","workOnITActivitySelector","workOnITProcessSelector","showWorkitem","showAsyncWidget","inbox-common-case-summary-subprocess","inbox-common-case-summary-assignees","inbox-common-case-summary-events","inbox-common-case-summary-activities","render-case-summary","paginationTemplate","summaryDisplayed","bizagiScrollbar","autohide","configureSlider","configureHeader","identicalObjects","scrollabletab","tooltipNext","tooltipPrevious","getBackCase","getNextCase","restoreStatus","queryFormAction","urlParameters","getCasesByFolder","customized","casesGroupedByFolder","idFolder","hover","lastQueryFullKey","idtask","printFormCommand","printform","summaryContainer","hideSummary","showSummary","animate","renderPanel","sliderPanel","panelArrow","forceResize","windowWidth","openOldWorkportalForm","getListKey","renderform","afterLoad","backURL","mySearchList","mySearchListWrapper","loadtemplates","renderSearchLists","mySearchListTmpl","getSearchLists","searchLists","$searchLists","configureHandlers","closeModal","onListItemClick","keypress","$target","currentTarget","guidform","displayname","guidEntity","publishParams","summaryDecorator","Object","keys","validateForm","renderValues","forceCollectData","collectRenderValuesQueryForm","filterObject","metadataFilters","getRenders","getFilterControl","defineFilterObject","filter","displayValue","getDisplayValue","editable","performQuery","guidSearch","pageSize","calculateFilters","onlyLocalResults","cleanContext","dataParams","homeportalInstance","_context","itemFilter","searchTypeFilter","searchType","toUpperCase","typeSearch","loadForm","subMenu","renderSubMenuContent","scrollVertical","listTemplate","isAdminMenu","listContainer","callBack","ThemeBuilder","windowOpenBlank","asyncECMUpload","showWidgetPopup","enableMultipleCasesReassigment","CaseAdmin","enableAsyncECMUploadJobs","authorized","getSubItemsAuthorized","deleteMenuOption","features","enableOldBusinessPoliciesAdministration","enableNewBusinessPoliciesAdministration","unshift","typeIcon","isEnableFeature","BIZAGI_WORKPORTAL_WIDGET_ADMIN_UNLOCK_FORMS","UserAdmin","StakeholderAdmin","AuthenticationLogQuery","EncryptionAdmin","UserPendingRequests","UnlockFormsAdmin","AsynchronousWorkitemRetries","UserDefaultAssignation","Profiles","AlarmAdmin","Licenses","GRDimensionAdmin","DocumentTemplates","ProcessAdmin","LanguageAdmin","EntityAdmin","AdhocEntityAdmin","AdhocCreateProcess","showCustomWidgetPopup","UserPermissionReport","Holidays","OAuthApplications","ProjectName","UsersDelegation","BusinessPolicies","showContentPopup","Vocabularies","loadBusinessPolicesWidget","getCathegoriesMenuList","showBreadCrumb","eventHandlerGoBackBreadCrumb","checkIsAlive","eventHandlerCategoryGroupsParent","eventHandlerCategoryGroupsChildrenWithoutCustomClick","Jparent","categoryDisplayName","menuList","categoriesGroupsChildrenList","getCategoriesGroupsChildren","getMenuList","isIE11","isEdge","localStorage","setItem","sessionStorage","bizagiAuthentication","startLoading","loadDashboardQuickProcess","childrenList","groupCategoryChildren1","groupCategoryChildren2","groupCategoryChildren3","groupCategoryChildren4","sortChildList","list","sort","b","sortParentList","menulist","groupCategory1","getItemMenuList","groupCategory2","groupCategory3","groupCategory4","listmenu_children","groupCategory","routeEvents","dispatchEvent","newLiveProcess","widgetParameters","needsQuicksMode","getPageHacks","hackParams","openBACase","sHref","routingAction","changeToWidget","stopLoading","hack","getInternetExplorerVersion","injectCss","afterLoadParams","defaultWidth","splice","idUser","fromDate","now","toDate","getEffectiveDuration","load","fadeIn","callInside","cssList","getStyle","iframeContent","contents","$self","inputClasses","isAdhocProcess","adhocIds","inbox-grid-cases","inbox-common-case-summary","inbox-common-case-summary-oldrender","search-details","contentDetails","pdata","pageSelector","actualPage","caseId","processId","idAdhocProcess","enableTimelineByProcessType","isAvailableTimelineByProcessType","searchTemplate","searchDetailsTemplate","searchPagination","timeLine","TimeLine","enableFeatureShowTimelineButton","groupByCaseNumber","setFormat","formatValue","getRadNumberColumnIndex","l","showColumn","columnIndex","createGroupedHeader","rowIndex","getRadNumber","parseInt","isComplex","tooltip","first","showCase","elmnt","idObject","favoriteType","addFavorite","delFavorite","itemSelector","confirmationMsg","showConfirmationBox","dissasociateCaseFromFolder","pagination","pageToshow","pageNumber","previousPage","nextPage","paginationHtml","bizagiPagination","maxElemShow","listElement","clickCallBack","smartfoldersParameters","caseSummaryContainer","hasComments","renderedTemplate","caseSummaryDialog","isPropagationStopped","getWorkitems","iframeOldRender","getCaseFormsRenderVersion","formsVersion","renderSummaryForm","preview","currentWorkitemId","workitemCaseId","summaryForm","cssLocation","browser","mozilla","webkit","oldrenderintegration","icoTaskState","integration-old-render","insertIframeOldRender","getInjectJavaScript","getInjectJS","_processId","_mapping","mapping","_idParentCase","idParentCase","_mappingstakeholders","mappingstakeholders","_guidprocess","guidprocess","createcase","$content","getStartForm","_getServiceParams","_getRenderingFacade","_getCanvasForm","_rendering","RPproxyPrefix","getMapping","map","stringify","$canvas","onCaseCreated","_guidForm","_entityGuid","entityGuid","_surrogateKey","_readonlyform","readonlyform","updateform","getEntityForm","_overrideHandlers","idPageCache","originalProcessButton","processButton","buttonProperties","endLoading","actionService","casetoolbar","usersCasesService","actionsEventsService","accumulatedcontext","processActionService","templateEngine","templateEngineElement","templateEngineTooltip","templateEmptyData","selectorCheckboxItems","_currentPage","entitiesSelected","onEntityChecked","getCommonActions","updateData","setValues","onFormActionExecuted","onFormRuleExecuted","onFormExecuted","_referrer","_page","_totalRecords","totalRecords","_filters","_defaultFilterApplied","defaultFilterApplied","_guidSearch","_fromActionLauncher","_reference","_referenceType","_xpath","_guidEntityCurrent","_pageSize","_onlyLocalResults","entityDataParams","filtersAppliedCounter","getEntityData","deferProcessEntities","clone","processEntities","entitiesData","checkAll","renderEntities","commonActions","getTemplateEngine","renderDataService","service","factory","initAsyncStuff","router","addContext","getLevelNavigator","currentLevelNavigator","contextEvent","appliedFilters","getSearchData","setFiltersData","getCollectionEntityData","getFiltersEntityData","filtersData","processFiltersData","updateCounterFiltersApplied","hideSortBar","appliedFilter","count","defaultValues","applied","attribute","filtersApplied","templateType","engine","entities","entity","entityId","entityData","isDefaultTemplate","guidTemplate","paramsRender","makeArray","requestRepeat","idCasesOfProcessEntitiesPromise","lastParamsSendit","getIdCasesOfProcessEntities","generalDefer","collectionDeferreds","$dataViewList","entitiesLength","$elementsTmpl","$template","renderTemplate","getEmptyDataMessage","isRefresh","$templateData","isChecked","collectionGetActionsDeferred","idCases","$cardWrapper","$casetoolbar","getCaseToolbar","casetoolbarData","idcase","always","getEntityActionsAndEvents","$footer","actionData","loadEvents","delay","overlay","getActionsView","responseActions","$actionsView","actionsView","actionsData","$item","getCheckBox","showCheckItem","removeCheckItem","model","surrogateKeys","itemsSelected","guidentity","$inputs","input","refreshRegister","idBox","$templateBox","operator","replaceWith","outerHTML","counterFilterParams","customWorkportalHandlers","customizeWorkportalHandler","handler","newUrl","original","prototype","customizeWorkportalWidget","extensionMethod","widgetImplementation","getWidgetImplementation","eval","customButtons","addCustomMenuButton","customButtonTemplate","menuButtonContainer","isAvailable","customButton","addDataService","functionName","fn","extensionObject","tmpls","templatesMap","arrPromises","_create","clicked","curYPos","curXPos","cursor","$scrollable","pageY","pageX","scrollLeft","scrollTop","_move","x","y","moveX","moveY","Widget","call","jQuery","enableFolder","enableSmartFolders","enableListOfRecentProcesses","enableCustomizeReports","enablePrintFromEditForm","enableDebug","enableE2EInterface","disableOldInbox","enableBatchRequest","forceBatchRequest","showAssignees","enableSecurityCaseDashBoard","enableQueriesClassicMenu","disableAbortCases","enableAdhocProcess","enableCCBCCFeatureOnLiveProcesses","enableReviewModeFeatureOnLiveProcesses","enableFilterByProcessGroupOnLiveProcesses","enableLocalizationInModelerOnLiveProcesses","enablePredefinedPerformersOnLiveProcesses","enableMaximizeModalsOption","enableStartPageDisplayOption","enablePing","enableECMMetadataMultiaction","validateGridsOnButtonClick","enableCustomFormats","enableShareActivity","enableFormatMoneyColumnQueryResult","enableGridRefreshAfterCellRefresh","enableExecuteRefreshAction","items","iconclass","icon","getData","slice","onShowCases","$route","$title","idworkflow","collections","onClickEntity","selectItem","getUserStuff","buildModel","lf","Math","differenceMillisecondsServer","uploadMaxFilesSize","supportFileExt","getDateServer","dateFormatter","getDifferenceBetweenDates","date","mergePropertiesActivitiesWithWorkitems","workItemFilter","workItem","guidActivity","startDate","wiEntryDate","finishDate","wiSolutionDate","workItemState","estimatedFinishDate","wiEstimatedSolutionDate","base","description","decontextualized.plans","Plans","getServerDateDifference","resolveGetDateServer","onClickCard","flowContext","isOpen","decontextualized","flagDisplayDate","fromClickBreadCrumb","showReleaseButton","caseLink","taskOptionsWidget","task","child","popup-release","releaseDialogBox","getDataObj","info","_level","printCase","goToBack","actionButtonEvent","formContent","$container","updateLastCrumbParamsInfo","getLevel","goToPreviousCrumb","crumbEvent","plugins","popupRelease","buttonAccept","buttonCancel","onClickAcceptRelease","onClickCancelRelease","getBreadCrumbInfo","setBreadCrumbInfo","drawBreadCrumb","breadCrumbInfo","showSteps","crumbItem","crumbContent","drawCrumb","itemCrumb","isPrincipalHome","goToCrumb","crumb","skipRefresh","contextActivity","getParentContext","cutContext","deleteRemainingCrumbs","pathSize","crumbBack","resetBreadCrumb","copyDataObjectWithoutReference","updateInfo","lastCrumb","secondLastCrumb","cleanBreadCumb","firstCrumb","factCrumbItem","hasGuidEntityInBreadCrumb","newFactCrumbItem","hasXpathInBreadCrumb","steps","drawDateNavigator","onDisplayDate","recalculateHomeNavbar","setWidthToNavigationPanel","navigationPanel","isFromModal","panelWidth","setEnabledLeftSidebar","setEnabledRightSidebar","setEnabledBreadCrumb","setEnabledBackButton","setPropertiesForEngineTemplate","getActivityName","setStateBarNavigator","queryForm","actionForm","notMigratedUrl","queryParams","pageToShow","recalculateQueryForm","reports","fromBackButton","sidebarData","isFromQueriesBackButton","activityName","taskOptions","getButtonForActivityAction","showButtonPrintForm","showUrlHelp","regional","currentDate","dayNames","getDay","monthNames","getMonth","getDate","getFullYear","$wrapperButtonPrint","$wrapperUrlHelp","helpUrl","validateUrlWellFormed","textForButton","buttonOption","buttonContainer","getTaskOptions","showRelease","showTakeOwnership","destroyReleaseDialogBox","actionTakeOwnership","detach","launchReleaseActivity","releaseActivity","status","taskReleased","showMessageBox","waitForLoadCompletely","takeOwnershipActivity","refreshAllWidgets","timeOut","ol","il","$date","sidebarhome","showStakeholders","$tooltip","getInfoToUser","stakeholders","totalStakeholders","stakeholdersToShow","stakeholdersHidden","showMore","user","orgArray","requestsInProgressProcessGuid","shortcuts","onClickShortcut","getMyShortcutsByCategory","actionsHasStartForm","hasStartForm","showConfirmation","executeProcessAction","actionCreateCase","launchActionsAfterCreateCase","includeRadicationPhase","showErrorMessage","printf","behaviorCollapsiblePanels","right-sidebar","enableOrDisableRightSidebar","eventsHandler","addBottomPadding","onCollapsePanel","addClassesCollapseSideBar","disableSidebar","enableSidebar","openRightSidebar","closeRightSidebar","collapseSideBar","setDisabledSidebar","right","left-sidebar","showTooltip","classArrow","textTooltip","tooltipClass","classSuffix","dummy","adhoc.create.process","addEventHandlers","isValidForm","next","nameValidation","onClickCancel","onSubmitFormCreateProcess","paramsNewProcess","showErrorAlertDialog","createNewAdhocProcess","isIE10OrLower","error","project-filespreview-wrapper","argumentsTemplate","paramsURL","encodeURI","generalTmpl","reload","currentFile","filesNumber","profly","sessionTimeoutService","_onClickMinValue","keepSessionOpen","removeXClose","sessionTimeout","redirectToLogoutPage","sessionTimeoutExpired","user-privacy","onDownloadReport","downloadReportUser","privacy","usuarios","showActivityInfo","isActivity","users-modal","clickArrow","contentItemSelected","access-denied","accessDenied","JSGRID_DATA_KEY","JSGRID_ROW_DATA_KEY","JSGRID_EDIT_ROW_DATA_KEY","SORT_ORDER_ASC","getOrApply","defaultController","loadData","noop","insertItem","updateItem","deleteItem","Grid","config","$element","_container","_editingRow","_sortField","_sortOrder","_firstDisplayingPage","_init","updateOnResize","rowClass","rowRenderer","rowClick","editing","editItem","rowDoubleClick","noDataContent","noDataRowClass","heading","headerRowRenderer","headerRowClass","headerCellClass","filtering","filterRowRenderer","filterRowClass","inserting","insertRowRenderer","insertRowClass","editRowRenderer","editRowClass","confirmDeleting","deleteConfirm","selecting","selectedRowClass","oddRowClass","evenRowClass","cellClass","sorting","sortableClass","sortAscClass","sortDescClass","paging","pagerContainer","pageIndex","pageButtonCount","pagerFormat","pagePrevText","pageNextText","pageFirstText","pageLastText","pageNavigatorNextText","pageNavigatorPrevText","pagerContainerClass","pagerClass","pagerNavButtonClass","pagerNavButtonInactiveClass","pageClass","currentPageClass","customLoading","pageLoading","autoload","loadIndication","loadIndicationDelay","loadMessage","loadShading","invalidMessage","invalidNotify","messages","errors","onInit","onRefreshing","onRefreshed","onPageChanged","onItemDeleting","onItemDeleted","onItemInserting","onItemInserted","onItemEditing","onItemUpdating","onItemUpdated","onItemInvalid","onDataLoading","onDataLoaded","onOptionChanging","onOptionChanged","onError","invalidClass","containerClass","tableClass","gridHeaderClass","gridBodyClass","_initLoadStrategy","_initController","_initFields","_attachWindowLoadResize","_attachWindowResizeCallback","_callEventHandler","loadStrategy","jsGrid","loadStrategies","PageLoadingStrategy","DirectLoadingStrategy","_loadStrategy","_controller","source","loadIndicator","LoadIndicator","validation","Validation","field","isPlainObject","Field","_grid","_refreshSize","_detachWindowResizeCallback","option","optionChangingEventArgs","optionChangedEventArgs","oldValue","newValue","_handleOptionChange","fieldOption","_normalizeField","_renderGrid","_refreshContent","_refreshPager","openPage","cancelEdit","_clear","removeData","_createHeader","_createBody","_pagerContainer","_createPagerContainer","_loadIndicator","_createLoadIndicator","_validation","_createValidation","shading","clearTimeout","_loadingTimer","$headerRow","_headerRow","_createHeaderRow","$filterRow","_filterRow","_createFilterRow","$insertRow","_insertRow","_createInsertRow","$headerGrid","_headerGrid","_header","_scrollBarWidth","_content","$bodyGrid","_bodyGrid","_body","_eachField","$result","$th","_prepareCell","cell","cssprop","align","filterTemplate","insertTemplate","eventParams","reset","_resetSorting","_resetPager","_setPage","_clearSortingCss","_refreshHeading","_refreshFiltering","_refreshInserting","toggle","_createNoDataRow","indexFrom","firstDisplayIndex","indexTo","lastDisplayIndex","itemIndex","_createRow","amountOfFields","_renderCells","_getRowClasses","_attachRowHover","classes","$row","_createCell","fieldValue","_getItemFieldValue","cellRenderer","itemTemplate","props","shift","_setItemFieldValue","current","_setSortingParams","_setSortingCss","_reversedSortOrder","isNumeric","f","fieldIndex","_visibleFieldIndex","_sortData","sortFactor","_sortFactor","sortField","item1","item2","sortingFunc","_itemsCount","itemsCount","_pagesCount","floor","$pagerContainer","_createPager","showPager","pagerRenderer","pageCount","_createPagerByFormat","itemCount","pagerParts","pagerPart","_createPages","_createPagerNavButton","firstDisplayingPage","_createPagerPageNavButton","showPrevPages","_createPagerCurrentPage","_createPagerPage","showNextPages","isActive","_createPagerButton","$link","_refreshHeight","_refreshWidth","$ghostContainer","$ghostContent","innerWidth","widthExcludingScrollBar","nonBodyHeight","outerHeight","_controllerCall","method","param","isCanceled","doneCallback","_showLoading","Error","_errorHandler","_hideLoading","getFilter","loadParams","_sortingParams","cancel","loadedData","finishLoad","filterValue","sortOrder","getSorting","sortingParams","clearFilter","insertingItem","_getValidatedInsertItem","insertedItem","finishInsert","_getInsertItem","_validateItem","insertValue","validationErrors","_rowIndex","validate","rules","_setCellValidity","invalidArgs","$cell","toggleClass","clearInsert","insertRow","rowByItem","_editRow","jquery","nodeType","_itemIndex","$editRow","_createEditRow","insertBefore","editTemplate","editedItem","_getValidatedEditedItem","_updateRow","_getEditedItem","_getEditRow","$updatingRow","updatingItem","updatingItemIndex","previousItem","updatedItem","$updatedRow","_finishUpdate","updatedItemIndex","editValue","confirm","_deleteRow","deletingItem","deletingItemIndex","finishDelete","methodArgs","methodResult","locales","setLocale","obj","localeConfig","componentPrototype","locale","lang","version","zIndex","shaderClass","loadPanelClass","_initContainer","_initShader","_initLoadPanel","_shader","bottom","_loadPanel","$loadPanel","actualWidth","actualHeight","marginLeft","min","deletedItem","deletedItemIndex","isDefined","sortStrategies","str1","str2","localeCompare","n1","n2","dt1","dt2","numberAsString","parseFloat","_normalizeRules","_","rule","validator","_normalizeRule","_applyNamedValidator","validatorName","validators","required","rangeLength","minLength","maxLength","pattern","RegExp","test","range","max","_getSortingFunc","sorter","_value","TextField","autosearch","filterControl","_createTextBox","which","insertControl","editControl","NumberField","TextAreaField","_createTextArea","textarea","numberValueType","stringValueType","SelectField","selectedIndex","valueField","textField","firstItemValue","valueType","resultItem","_createSelect","select","CheckboxField","_createCheckbox","checked","disabled","indeterminate","$cb","checkbox","ControlField","_configInitialized","buttonClass","modeButtonClass","modeOnButtonClass","searchModeButtonClass","insertModeButtonClass","editButtonClass","deleteButtonClass","searchButtonClass","clearFilterButtonClass","insertButtonClass","updateButtonClass","cancelEditButtonClass","searchModeButtonTooltip","insertModeButtonTooltip","editButtonTooltip","deleteButtonTooltip","searchButtonTooltip","clearFilterButtonTooltip","insertButtonTooltip","updateButtonTooltip","cancelEditButtonTooltip","editButton","deleteButton","clearFilterButton","modeSwitchButton","_initConfig","_hasFiltering","_hasInserting","hasFiltering","hasInserting","_createFilterSwitchButton","_createInsertSwitchButton","_createModeSwitchButton","add","_createEditButton","_createDeleteButton","_createSearchButton","_createClearFilterButton","_createInsertButton","_createUpdateButton","_createCancelEditButton","_createOnOffSwitchButton","cssClass","isOnInitially","isOn","updateButtonState","$button","_createGridButton","isInserting","cls","clickHandler","usersAdapter","matchExtendedInfo","usersWithExtendedInfo","uuser","u","extendedInfo","createJsonUserInfo","userAssigned","username","picture","email","isAssignee","owner","participant","isParticipant","isAnonymized","anonymizedUserInformation","matchUsersForExtendedInfoCase","casee","justAssignees","pipeResponse","request","allowTakeOwnership","allowRelease"],"mappings":"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","sourcesContent":["if(!$.bizagi){\r\n\t$.bizagi = {ui:{}};\r\n}\r\n\r\n$.bizagi.ui = {\r\n\tcontrols:{\r\n\t\t\tuitable:{\r\n\t\t\t\tnamespace : 'bizagi.ui.controls.uitable',\r\n\t\t\t\tavailableComponents:['uicombo','uiradio', 'uicheckbox'],\r\n\t\t\t\tcss:'biz-ui-controls-table',\r\n\t\t\t\ttmpl: 'bizagi.ui.controls.table.template',\r\n\t\t\t\ttmpl2: 'bizagi.ui.controls.table.tr.template',\r\n\t\t\t\ttmpl3: 'bizagi.ui.controls.table.list.template'\r\n\t\t\t},\r\n\t\t\tuicombo:{\r\n\t\t\t\tnamespace: 'bizagi.ui.controls.uicombo',\r\n\t\t\t\tcss: 'biz-ui-controls-combo',\r\n\t\t\t\ttmpl: 'bizagi.ui.controls.combo.template',\r\n\t\t\t\ttmpl2: 'bizagi.ui.controls.combo.list.template'\r\n\t\t\t},\r\n\t\t\tuicheckbox:{\r\n\t\t\t\tnamespace: 'bizagi.ui.controls.uicheckbox',\r\n\t\t\t\tcss: 'biz-ui-controls-checkbox',\r\n\t\t\t\ttmpl: 'bizagi.ui.controls.checkbox.template'\r\n\t\t\t},\r\n\t\t\tuiradio:{\r\n\t\t\t\tnamespace: 'bizagi.ui.controls.uiradio',\r\n\t\t\t\tcss: 'biz-ui-controls-radio',\r\n\t\t\t\ttmpl: 'bizagi.ui.controls.radio.template'\r\n\t\t\t},\r\n\t\t\tuitreeview: {\r\n\t\t\t\tnamespace: 'bizagi.ui.controls.uitreeview',\r\n\t\t\t\tcss: 'biz-ui-controls-treeview',\r\n\t\t\t\ttmpl: 'bizagi.ui.controls.treeview.template'\r\n\t\t\t},\r\n\t\t\tuimultiselect: {\r\n\t\t\t\tnamespace: 'bizagi.ui.controls.multiselect',\r\n\t\t\t\tcss: 'biz-ui-controls-multiselect',\r\n\t\t\t\ttmpl: 'bizagi.ui.controls.multiselect.template'\r\n\t\t\t}\r\n\t\t}\r\n};","/*\r\n*   Name: BizAgi Workportal Security Command\r\n*   Author: Edward Morales\r\n*   Comments:\r\n*   -   This script will define a common class to access the security data\r\n*/\r\n\r\n\r\n$.Class(\"bizagi.workportal.command.security\", {}, {\r\n\r\n\r\n    init: function (dataService) {\r\n        var self = this;\r\n        self.dataService = dataService;\r\n        self.rawData = {};\r\n    },\r\n\r\n    getSecurity: function () {\r\n        var self = this;\r\n        var def = new $.Deferred();\r\n        self.security = {};\r\n        self.jsonSecurityList = {};\r\n\r\n        if (bizagi.menuSecurity) {\r\n            def.resolve(bizagi.menuSecurity);\r\n        } else {\r\n            \r\n            $.when(self.dataService.getMenuAuthorization()).done(function (data) {\r\n                if(bizagi.currentUser.associatedStakeholders && bizagi.currentUser.associatedStakeholders.length > 0){\r\n                    data.permissions.push({\"associatedStakeholders\": []});\r\n                }\r\n                self.rawData = data;\r\n                bizagi.menuSecurity = self.convertSecurityData(data);\r\n                self.jsonSecurityList = data;\r\n                $.each(self.security, function (key, value) {\r\n                    authMenu[key] = value;\r\n                });\r\n\r\n                $(document).trigger(\"securityLoaded\", {});\r\n\r\n                def.resolve(bizagi.menuSecurity);\r\n            });\r\n        }\r\n\r\n        return def.promise();\r\n    },\r\n\r\n\r\n    convertSecurityData: function (data) {\r\n        var permsMenu = {};\r\n        var getRecursivePerms = function (perms) {\r\n            $.each(perms, function (key, value) {\r\n                if (typeof value == 'object') {\r\n                    if (typeof key != \"number\") {\r\n                        permsMenu[key] = true;\r\n                    }\r\n                    getRecursivePerms(value);\r\n                } else {\r\n                    permsMenu[value] = true;\r\n                }\r\n            });\r\n        };\r\n        getRecursivePerms(data.permissions);\r\n        return permsMenu;\r\n    },\r\n\r\n    checkSecurityPerm: function (module) {\r\n        var self = this;\r\n        module = module || \"\";\r\n        var deferred = $.Deferred();\r\n\r\n        if (!bizagi.menuSecurity) {\r\n            $(document).bind(\"securityLoaded\", function () {\r\n                deferred.resolve(!!bizagi.menuSecurity[module]);\r\n            });\r\n        } else {\r\n            deferred.resolve(!!bizagi.menuSecurity[module]);\r\n        }\r\n\r\n        return deferred.promise();\r\n    },\r\n\r\n    getRawData: function () {\r\n        return this.rawData;\r\n    }\r\n});","/*\r\n*   Name: BizAgi Workportal Security Command\r\n*   Author: David Andres Niño\r\n*   Comments:\r\n*   -   This script will define a common class to print forms, and edit mode forms\r\n*/\r\n\r\n\r\n$.Class(\"bizagi.workportal.command.printform\", {}, {\r\n\r\n    init: function (renderFactory) {\r\n        var self = this;\r\n\r\n        self.renderFactory = renderFactory;\r\n    },\r\n\r\n    print: function (properties) {\r\n\r\n        var self = this;\r\n\r\n        var printParams = $.extend({}, properties);\r\n        \r\n        $(document).triggerHandler(\"showDialogWidget\", {\r\n            widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_PRINT,\r\n            modalParameters: {\r\n                title: bizagi.localization.getResource(\"render-actions-print\"),\r\n                refreshInbox: false\r\n            },\r\n            params: printParams,\r\n            referrer: (bizagi.hasOwnProperty('referrerParams') && bizagi.referrerParams.hasOwnProperty('referrer')) ? bizagi.referrerParams.referrer : \"inboxGrid\",\r\n            buttons: [\r\n                {\r\n                    text: bizagi.localization.getResource(\"workportal-widget-dialog-box-print\"),\r\n                    click: function () {\r\n                        var selfButton = $(this);\r\n\r\n                        var frameTemplate = self.renderFactory.getTemplate(\"print-frame\");\r\n                        var headerTemplate = self.renderFactory.getTemplate(\"print-frame-header\");\r\n\r\n                        var executePrintWidgetAction = function() {\r\n\r\n                            /**/\r\n                            // Create a random name for the print frame.\r\n                            var strFrameName = (\"printer-\" + (new Date()).getTime());\r\n\r\n                            var jFrame = $.tmpl(frameTemplate, { printID: strFrameName });\r\n                            var jFrameHeader = $.tmpl(headerTemplate, { environment: bizagi.loader.environment, productBuild: bizagi.loader.productBuildToAbout, build: bizagi.loader.build });\r\n\r\n\r\n                            jFrame.appendTo($(\"body:first\"));\r\n\r\n                            // Get a FRAMES reference to the new frame.\r\n                            var objFrame;\r\n\r\n                            if (bizagi.util.isIE()) {\r\n                                objFrame = window.frames[strFrameName];\r\n                                if(!objFrame) {\r\n                                    var i = 0;\r\n                                    var length = window.frames.length;\r\n                                    for(; i < length; i++) {\r\n                                        if(window.frames[i] && window.frames[i].name == strFrameName) {\r\n                                            objFrame = window.frames[i];\r\n                                            break;\r\n                                        }\r\n                                    }\r\n                                }\r\n                            } else {\r\n                                objFrame = window.frames[strFrameName];\r\n                            }\r\n\r\n                            // Get a reference to the DOM in the new frame.\r\n                            var objDoc = objFrame.document || objFrame.contentWindow.document;\r\n\r\n                            // Write the HTML for the document. In this, we will\r\n                            // write out the HTML of the current element.\r\n                            objDoc.open();\r\n                            var objDocStr = \"<!DOCTYPE html PUBLIC \\\"-//W3C//DTD XHTML 1.0 Transitional//EN\\\" \\\"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd\\\">\";\r\n\r\n                            objDocStr += \"<html style='overflow: visible !important'> <head> <title> </title>\";\r\n\r\n                            objDocStr += jFrameHeader[0].innerHTML;\r\n\r\n                            objDocStr += \"</head> <body class='bz-wp-widget-print bz-wp-widget-print-load' style='overflow: visible !important'>\";\r\n\r\n                            objDocStr += $(\".bz-wp-widget-print\").html();\r\n\r\n                            objDocStr += \"</body></html>\";\r\n\r\n\r\n                            objDoc.write(objDocStr);\r\n\r\n                            objDoc.close();\r\n                            $(\".ui-bizagi-cell-readonly\", objDoc).css(\"maxHeight\", \"100%\");\r\n                            if (bizagi.util.isIE()) {\r\n                                var win = window.open(\"\", \"\", \"top=0,left=0,width=10,height=10\");\r\n\r\n                                var styleLoading = '';\r\n                                styleLoading += '<style>';\r\n                                styleLoading += 'html{background: #293f55; color: #fff; text-align: center;}';\r\n                                styleLoading += '</style>';\r\n\r\n                                var textStyle = 'padding:10px auto; width:100%; text-align:center; font-family:Arial; font-size:12px;';\r\n\r\n                                win.document.open();\r\n                                win.document.write(styleLoading + '<div id=\"loading-emp\" style=\"' + textStyle + '\">' + bizagi.localization.getResource(\"webpart-render-loading\") + '</div>');\r\n                                win.document.close();\r\n\r\n                                win.document.open();\r\n                                win.document.write(objDocStr);\r\n                                win.document.close();\r\n\r\n                                win.print();\r\n                                setTimeout(function() {\r\n                                    win.close();\r\n                                }, 10000);\r\n                            }\r\n                            else {\r\n                                objFrame.focus();\r\n                                setTimeout(function() {\r\n                                    objFrame.print();\r\n                                }, 500);\r\n                            }\r\n\r\n                            // Have the frame remove itself in about a minute so that\r\n                            // we don't build up too many of these frames.\r\n                            setTimeout(function() {\r\n                                jFrame.remove();\r\n                            }, 1000);\r\n\r\n                            selfButton.removeAttr('disabled');\r\n                        };\r\n\r\n                        selfButton.attr('disabled', 'disabled');\r\n\r\n\r\n                        if ($('#bz-wp-widget-print').length === 0) {\r\n                            setTimeout(function () {\r\n                                executePrintWidgetAction();\r\n                            }, 1000);\r\n                        } else {\r\n                            executePrintWidgetAction();\r\n                        }\r\n                    }\r\n                }\r\n            ]\r\n        });\r\n    }\r\n});","/*\r\n*   Name: BizAgi Workportal Main Controller\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will define a base class to handle workportal layouts for any device\r\n*/\r\n\r\n$.Class.extend(\"bizagi.workportal.controllers.controller\", {}, {\r\n\r\n    /**\r\n    *   Constructor\r\n    */\r\n    init: function (workportalFacade, dataService) {\r\n        // Set workportal facade\r\n        this.workportalFacade = workportalFacade;\r\n\r\n        // Set data service\r\n        this.dataService = dataService;\r\n\r\n        // Set l10n service\r\n        this.resources = bizagi.localization;\r\n\r\n        // Set a component container hash to use with templates\r\n        this.componentContainers = {};\r\n\r\n        // Define an object to hold the subscribe collection\r\n        this.subscribers = [];\r\n\r\n        // Flag to check if the element is disposed\r\n        this.disposed = false;\r\n\r\n        // Define an object to hold the templates used in the widget\r\n        this.tmpl = {};\r\n\r\n        //Define deferred to know if the templates were loaded\r\n        this.templatesDeferred = null;\r\n    },\r\n\r\n    /*\r\n    *   Returns the current workportal\r\n    */\r\n    getWorkportal: function () {\r\n        return this.workportalFacade.workportal;\r\n    },\r\n\r\n    /**\r\n    *   Publish an event so any controller can subscribe to it\r\n    */\r\n    publish: function (eventName, params) {\r\n        if (this.disposed) return null;\r\n        return $(document).triggerHandler(eventName, params);\r\n    },\r\n\r\n    /**\r\n    *   Subscribe to an event that any controller could trigger\r\n    */\r\n    subscribe: function (eventName, callback) {\r\n        if (this.disposed) return null;\r\n        $(document).bind(eventName, callback);\r\n        this.subscribers.push({ event: eventName });\r\n    },\r\n\r\n    /**\r\n    *   Subscribe to one time event that any controller could trigger\r\n    */\r\n    subscribeOneTime: function (eventName, callback) {\r\n        if (this.disposed) return null;\r\n        $(document).one(eventName, callback);\r\n        this.subscribers.push({ event: eventName });\r\n    },\r\n\r\n    /**\r\n    *   Un Subscribe to an event that any controller could trigger in this document\r\n    */\r\n    unsubscribe: function (eventName, callback) {\r\n        if (this.disposed) return null;\r\n        if (callback) {\r\n            $(document).unbind(eventName, callback);\r\n        }\r\n        else { $(document).unbind(eventName); }\r\n    },\r\n\r\n    /**\r\n    *   Makes the base processing of the layout (mix templates + data)\r\n    *   after all that processing will call a post-render method to\r\n    *   be implemented in each device to apply custom plugins\r\n    *   Returns a promise because the rendering could be asynchronous\r\n    */\r\n    render: function () {\r\n        var self = this;\r\n        var defer = new $.Deferred();\r\n        self.renderingDeferred = new $.Deferred();\r\n\r\n        // Render content\r\n        $.when(self.areTemplatedLoaded())\r\n        .pipe(function () {\r\n            return self.renderContent();\r\n        })\r\n        .done(function () {\r\n\r\n            // Call post-render method\r\n            self.postRender();\r\n\r\n            // Resolve deferred\r\n            defer.resolve(self.getContent());\r\n            self.renderingDeferred.resolve();\r\n        });\r\n\r\n        return defer.promise();\r\n    },\r\n\r\n    /*\r\n    *   Returs the rendered content\r\n    */\r\n    getContent: function () {\r\n        return this.content;\r\n    },\r\n\r\n    /*\r\n    *   Returns the mapped resource\r\n    */\r\n    getResource: function (key) {\r\n        return this.resources.getResource(key);\r\n    },\r\n\r\n    /*\r\n    *   Renders the content for the current controller\r\n    *\r\n    */\r\n    renderContent: function () {\r\n        // Override on implementations\r\n        return \"\";\r\n    },\r\n\r\n\r\n    /*\r\n    *   To be overriden in each device to apply layouts\r\n    */\r\n    postRender: function () { },\r\n\r\n    /*\r\n    *   Returns the component replaced tag selector\r\n    */\r\n    getComponentSelector: function (component) {\r\n        return \"[data-bizagi-component=\" + component + \"]\";\r\n    },\r\n\r\n    /*\r\n    *   Returns the component replaced tag selector\r\n    */\r\n    getComponentContainer: function (component) {\r\n        var self = this;\r\n        var content = self.getContent();\r\n        if (!content || content.length == 0) return null;\r\n\r\n        // Find component parent and cache it\r\n        //var componentElement = self.componentContainers[component];\r\n        //if (componentElement == null) {\r\n            // Find the component inside the main content\r\n            //componentElement = $(self.getComponentSelector(component), content);\r\n\r\n            // If still not found, try to check if content element is the component\r\n          //  if (componentElement.length == 0 && content.is(self.getComponentSelector(component))) {\r\n          //      componentElement = content;\r\n          //  }\r\n\r\n            // Cache the component\r\n           // self.componentContainers[component] = componentElement;\r\n        //}\r\n        //return self.componentContainers[component];\r\n        return $(self.getComponentSelector(component), content);\r\n    },\r\n\r\n    /*\r\n    *   Asks for a full resize\r\n    */\r\n    resizeLayout: function () {\r\n        this.publish(\"resizeLayout\");\r\n    },\r\n\r\n    /*\r\n    * Do stuff when a resize has been triggered\r\n    */\r\n    performResizeLayout: function () { },\r\n\r\n    /*\r\n    *   Disposes the widget\r\n    */\r\n    dispose: function () {\r\n        var self = this;\r\n        \r\n        if (self.subscribers != null) {\r\n            // Remove all subcriptions\r\n            $.each(self.subscribers, function (i, item) {\r\n                self.unsubscribe(item.event);\r\n            });\r\n        }\r\n        \r\n        setTimeout(function () {\r\n            bizagi.util.dispose(self);\r\n            self.disposed = true;\r\n        }, bizagi.override.disposeTime || 50);\r\n    },\r\n\r\n\r\n    /*\r\n    * Loads dinamically a set of templates\r\n    */\r\n    loadTemplates: function (templates) {\r\n        var self = this,\r\n            def = self.templatesDeferred = new $.Deferred(),\r\n            tmplPromises = [];\r\n\r\n        var useNewEngine = (templates.useNewEngine != undefined) ?  templates.useNewEngine : true;\r\n\r\n        for (var name in templates) {\r\n            if (name != \"useNewEngine\") {\r\n                tmplPromises.push(\r\n                    self.loadTemplate({\r\n                        \"name\" : name,\r\n                        \"path\" : templates[name],\r\n                        \"useNewEngine\" :useNewEngine\r\n                   })\r\n                );\r\n            }\r\n        }\r\n\r\n        $.when.apply($, tmplPromises)\r\n            .done(function () {\r\n                def.resolve();\r\n            });\r\n\r\n        return def.promise();\r\n    },\r\n\r\n\r\n    /*\r\n    * Loads template \r\n    */\r\n    loadTemplate: function (data) {\r\n        var self = this;\r\n\r\n        if (self.tmpl[data.name]) {\r\n            return self.tmpl[data.name];\r\n        } else {\r\n            if (data.useNewEngine){\r\n                return bizagi.templateService.getTemplateWidget(data.path)\r\n                    .done(function (tmpl) {\r\n                        self.tmpl[data.name] = tmpl;\r\n                    });\r\n            }\r\n\r\n            return bizagi.templateService.getTemplate(data.path)\r\n                .done(function (tmpl) {\r\n                    self.tmpl[data.name] = tmpl;\r\n                });\r\n\r\n        }\r\n    },\r\n\r\n    /*\r\n    * Gets template \r\n    */\r\n    getTemplate: function (name) {\r\n        if (this.tmpl.hasOwnProperty(name)) {\r\n            return this.tmpl[name];\r\n        }\r\n        return null;\r\n\r\n    },\r\n\r\n    /*\r\n    * Returns a promise, it is resoved when the widget is rendered\r\n    */\r\n    isRendered: function () {\r\n        var self = this;\r\n\r\n        if (!self.renderingDeferred) {\r\n            return false;\r\n        }\r\n        return self.renderingDeferred.promise();\r\n    },\r\n\r\n    /*\r\n    *\r\n    */\r\n    areTemplatedLoaded: function () {\r\n        return this.templatesDeferred;\r\n    }\r\n\r\n});\r\n","/*\r\n*   Name: BizAgi Workportal Main Controller\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will define a base class to handle workportal layouts for any device\r\n*   -   This layout must contain a menu and widget container placeholders\r\n*/\r\n\r\n\r\n// Defines the main controller\r\nbizagi.workportal.controllers.controller.extend(\"bizagi.workportal.controllers.main\", {}, {\r\n\r\n    /*\r\n    *   Constructor\r\n    */\r\n    init: function (workportalFacade, dataService) {\r\n        var self = this;\r\n\r\n        // Define regex to apply to templates\r\n        self.componentRegex = /{{component (\\w+)}}/g;\r\n\r\n        // Call base\r\n        this._super(workportalFacade, dataService);\r\n\r\n        // Subscribe to change widget event\r\n        this.subscribe(\"changeWidget\", function (e, params) {\r\n            \r\n            bizagi[\"currentWidget\"] = params.widgetName;\r\n\r\n            var def = new $.Deferred();\r\n\r\n            self.subscribeOneTime(\"onWidgetIncludedInDOM\", function (e, p) {\r\n                def.resolve();\r\n            });\r\n\r\n            // $.when(bizagi.util.autoSave()).done(function () {\r\n            $.when(bizagi.util.liveSave(params.widgetName),bizagi.util.autoSave()).done(function () {\r\n\r\n                $(document).data('auto-save', '');\r\n                bizagi.util.liveProcessesEvents.saveEvent.saveLivePromise = null;\r\n\r\n                if (params.widgetName == bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INBOX_GRID ||\r\n                   params.widgetName == bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INBOX) {\r\n                    bizagi.cookie(\"bizagiDefaultWidget\", params.widgetName, { expires: 30 });\r\n                }\r\n\r\n                bizagi.util.setContext({\r\n                    widget: params.widgetName\r\n                }); \r\n                self.publish('cleanAllWidgets');\r\n                self.setWidget(params);\r\n\r\n            });\r\n\r\n            return def.promise();\r\n        });\r\n\r\n        // Subscribe to add dialog to stack dialogs\r\n        this.subscribe(\"addDialogToDialogStack\", function (e, params) {\r\n            // Add dialog to stack\r\n            self.addDialogToDialogStack(params);\r\n        });\r\n\r\n        // Subscribe to dialog widget event\r\n        this.subscribe(\"showDialogWidget\", function (e, params) {\r\n            // Shows a dialog a widget                \r\n            self.showDialogWidget(params);\r\n        });\r\n\r\n        // Subscribe to clsoe current dialog\r\n        this.subscribe(\"closeCurrentDialog\", function (e, params) {\r\n            // Close the current dialog widget\r\n            return self.closeCurrentDialog(params);\r\n        });\r\n\r\n        // Subscribe to close all dialogs\r\n        this.subscribe(\"closeAllDialogs\", function (e, params) {\r\n            // Close all dialogs\r\n            self.closeAllDialogs();\r\n        });\r\n\r\n        // Subscribe to popup widget event\r\n        this.subscribe(\"popupWidget\", function (e, params) {\r\n            // Shows a popup a widget\r\n            self.popupWidget(params);\r\n        });\r\n\r\n        // Subscribe to pop widget event\r\n        this.subscribe(\"popWidget\", function (e, params) {\r\n            // Shows a pop a widget\r\n            self.popWidget(params);\r\n        });\r\n\r\n        // Subscribe to push widget event\r\n        this.subscribe(\"pushWidget\", function (e, params) {\r\n            // Shows a push a widget\r\n            self.pushWidget(params);\r\n        });\r\n\r\n\r\n        // Subscribe to execute action event\r\n        this.subscribe(\"executeAction\", function (e, params) {\r\n            // Executes the action\r\n            self.executeAction(params);\r\n        });\r\n\r\n        // Subscribe to resize layout event\r\n        this.subscribe(\"resizeLayout\", function () {\r\n            // Resize all the layout\r\n            self.performResizeLayout();\r\n        });\r\n\r\n        // Subscribe to dispose Widget event\r\n        this.subscribe(\"disposeWidget\", function () {\r\n            // Resize all the layout\r\n            self.disposeWidget();\r\n        });\r\n\r\n        // Subscribe to 'append Widget to' event\r\n        this.subscribe(\"appendWidgetTo\", function (e, params) {\r\n            // attach the widget to a given element\r\n            return (self.appendWidgetTo(params));\r\n        });\r\n\r\n        // Subscribe to Notifications event\r\n\t\t/**\r\n         * @param params {notification, type}\r\n         */\r\n        this.subscribe(\"notification\", function (e, params) {\r\n            NotificationDispatcher.dispatch(params.notification, params.type);\r\n        });\r\n\r\n        // Subscribe to 'refreshQueryFormShortCut' event\r\n        this.subscribe(\"refreshQueryFormShortCut\", function (e, params) {\r\n            // attach the widget to a given element\r\n            return (self.refreshQueryFormShortCut(params));\r\n        });\r\n    },\r\n\r\n    /*\r\n    *   Renders the content for the current controller\r\n    *\r\n    */\r\n    renderContent: function () {\r\n        var self = this;\r\n        var template = self.workportalFacade.getTemplate(\"workportal\");\r\n\r\n        // Render content\r\n        var content = self.content = $.tmpl(template, {});\r\n\r\n        // Add workarea\r\n        self.workarea = self.workportalFacade.getWorkareaController();\r\n\r\n        // Add menu\r\n        var menu = self.menu = self.workportalFacade.getMenuController();\r\n        $.when(menu.render())\r\n        .done(function () {\r\n            // Build menu\r\n            menu.getContent().appendTo(self.getComponentContainer(\"menu\"));\r\n        });\r\n\r\n        // Set resize layout event\r\n        $(window).resize(function () {\r\n            self.resizeLayout();\r\n        });\r\n\r\n        return content;\r\n    },\r\n\r\n    /*\r\n    *   Sets the current working widget\r\n    */\r\n    setWidget: function (params) {\r\n        var self = this;\r\n        self.currentWidget = params.widgetName;\r\n        self.currentWidgetParams = $.extend({}, params, { menu: self.getMenu() });\r\n\r\n        // Set assertion to avoid calls without widget name\r\n        bizagi.assert(!bizagi.util.isEmpty(params.widgetName), \"No widget name defined for changeWidget call\");\r\n\r\n        // Renders the workarea again\r\n        self.renderWorkarea();\r\n    },\r\n\r\n    /*\r\n    *   Executes the desired action\r\n    */\r\n    executeAction: function (params) {\r\n        var self = this;\r\n\r\n        if (params.action == bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING) {\r\n            bizagi.loader.start(\"activity\").then(function () {\r\n                var actionController = self.workportalFacade.getAction(params.action);\r\n\r\n                // Executes the action\r\n                actionController.execute(params);\r\n            });\r\n        }\r\n        else if (params.action == bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_SEARCH) {\r\n            bizagi.loader.start(\"inbox\").then(function () {\r\n                var actionController = self.workportalFacade.getAction(params.action);\r\n\r\n                // Executes the action\r\n                actionController.execute(params);\r\n            });\r\n        }\r\n    },\r\n\r\n    /*\r\n    *   Renders the workarea based on the current widget\r\n    */\r\n    renderWorkarea: function () {\r\n        var self = this;\r\n\r\n        var workarea = self.workarea;\r\n\r\n        if (workarea) {\r\n            var workareaContainer = self.getComponentContainer(\"workarea\");\r\n\r\n            // clean widgets\r\n            self.cleanWidgets();\r\n\r\n            // Clean workarea\r\n            workareaContainer.empty();\r\n\r\n            //Prepare first load. If inboxGrid, first: load module inbox\r\n            if (!bizagi.util.isEmpty(self.currentWidget) && self.currentWidget != \"none\") {\r\n                self.currentWidgetParams = $.extend({}, self.currentWidgetParams, { menu: self.getMenu() });\r\n                if(self.currentWidget === bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INBOX_GRID ||\r\n                   self.currentWidget === bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INBOX){\r\n                    bizagi.loader.start(\"inbox\").then(function () {\r\n                        self.loadWidgetFromFacade(workarea, workareaContainer);\r\n                    });\r\n                }\r\n                else{\r\n                    self.loadWidgetFromFacade(workarea, workareaContainer);\r\n                }\r\n            }\r\n        }\r\n    },\r\n\r\n    /*\r\n     *   Load widget from facade\r\n     */\r\n    loadWidgetFromFacade: function (workarea, workareaContainer){\r\n        var self = this;\r\n        // Load widget from facade\r\n        $.when(\r\n           self.workportalFacade.getWidget(self.currentWidget, self.currentWidgetParams)\r\n        ).pipe(function (widgetController) {\r\n               // Set into workarea\r\n               workarea.setWidget(widgetController);\r\n               return workarea.render();\r\n\r\n           }).done(function () {\r\n\r\n               var renderedContent = workarea.getContent();\r\n               if (renderedContent) {\r\n                   // Replace workarea\r\n                   renderedContent.appendTo(workareaContainer);\r\n\r\n                   //Resize layout on workarea\r\n                   self.resizeLayout();\r\n\r\n                   // Trigger \"widget included in dom\" event\r\n                   self.publish(\"onWidgetIncludedInDOM\");\r\n               }\r\n           });\r\n    },\r\n\r\n    /*\r\n    *   Shows a widget inside a modal dialog\r\n    *   Implement on each device\r\n    */\r\n    showDialogWidget: function (params) { },\r\n\r\n    /*\r\n    *   Close the current modal dialog\r\n    *   Implement on each device\r\n    */\r\n    closeCurrentDialog: function (params) { },\r\n\r\n    /*\r\n    *   Popup a widget\r\n    *   Implement on each device\r\n    */\r\n    popupWidget: function (params) { },\r\n\r\n    /*\r\n     *   Add dialog to dialogStack\r\n     */\r\n    addDialogToDialogStack: function(dialog) {},\r\n\r\n    /**\r\n    *   Close all modal dialogs\r\n    *   Implement on each device\r\n    */\r\n    closeAllDialogs: function() {},\r\n\r\n    /*\r\n    *   push a widget\r\n    *   Implement on each device\r\n    */\r\n    pushWidget: function (params) {\r\n        var self = this;\r\n        self.currentWidget = params.widgetName;\r\n        self.currentWidgetParams = $.extend({}, params, { menu: self.getMenu() });\r\n        // Set assertion to avoid calls without widget name\r\n        bizagi.assert(!bizagi.util.isEmpty(params.widgetName), \"No widget name defined for pushWidget call\");\r\n    },\r\n\r\n    /*\r\n    *   pop a widget\r\n    *   Implement on each device\r\n    */\r\n    popWidget: function (params) {\r\n        var self = this;\r\n        self.currentWidget = params.widgetName;\r\n        self.currentWidgetParams = $.extend({}, params, { menu: self.getMenu() });\r\n        // Set assertion to avoid calls without widget name\r\n        bizagi.assert(!bizagi.util.isEmpty(params.widgetName), \"No widget name defined for popupWidget call\");\r\n\r\n\r\n    },\r\n\r\n    disposeWidget: function (params) {\r\n        var self = this;\r\n        self.currentWidget = params.widgetName;\r\n        self.currentWidgetParams = $.extend({}, params, { menu: self.getMenu() });\r\n        // Set assertion to avoid calls without widget name\r\n        bizagi.assert(!bizagi.util.isEmpty(params.widgetName), \"No widget name defined for disposeWidget call\");\r\n\r\n\r\n    },\r\n\r\n    /*\r\n    *   Shows a widget inside a given element\r\n    *   paramms: widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_***,\r\n    *            appendToElement: \"#elementid\" or \".elementClass\"\r\n    *   Implement on each device\r\n    */\r\n    appendWidgetTo: function (params) { },\r\n\r\n    /*\r\n    *   When the window resizes, runs this method to adjust stuff in each controller or widget\r\n    *   Override when needed  \r\n    */\r\n    performResizeLayout: function () {\r\n        var self = this;\r\n        var content = self.getContent();\r\n\r\n        // Resize content\r\n        self.resizeContainer(content, $(window).height());\r\n\r\n        // Call menu, and workarea resize layout\r\n        if (self.menu) self.menu.performResizeLayout();\r\n        if (self.workarea) self.workarea.performResizeLayout();\r\n    },\r\n\r\n    /*\r\n    *   Resizes a container according its rules\r\n    */\r\n    resizeContainer: function (container, containerHeight) {\r\n        var self = this;\r\n\r\n        // Only perform layout resize if the container has adjustable elements\r\n        var adjustableChildren = container.children(\".ui-bizagi-component-adjustable\");\r\n        var adjustableContainersHeight = containerHeight;\r\n        \r\n        if (adjustableChildren.length > 0) {\r\n            // Sum fixed content\r\n            var fixedContentHeight = 0;\r\n            $.each(container.children(), function (i, element) {\r\n                if (!$(element).hasClass(\"ui-bizagi-component-adjustable\") && $(element).css('display') !== 'none') fixedContentHeight += $(element).height();\r\n            });\r\n\r\n            // Resize adjustable elements\r\n            adjustableContainersHeight = (containerHeight - (fixedContentHeight));\r\n    \r\n            var overflowY = \"\";\r\n            $.each(adjustableChildren, function (i, element) {\r\n\r\n                overflowY = ($(element).css(\"overflow-y\") != \"\") ? $(element).css(\"overflow-y\") : \"hidden\";\r\n                if (overflowY == \"visible\") overflowY = \"hidden\";\r\n                $(element).addClass(\"ui-bizagi-adjustable\");\r\n                var marginTop = ($(element).css(\"margin-top\") === \"auto\") ? 0 : Number($(element).css(\"margin-top\").replace(\"px\", \"\"));\r\n                var finalHeight = adjustableContainersHeight - marginTop;\r\n             \r\n                $(element).css({\r\n                    \"height\": finalHeight,\r\n                    \"overflow-y\": overflowY\r\n                });\r\n\r\n            });\r\n        }\r\n\r\n        // Resize inner containers if it has any adjustable inner containers\r\n        $.each(container.children(), function (i, element) {\r\n            if ($(element).find(\".ui-bizagi-component-adjustable\").length > 0) {\r\n                $(element).addClass(\"ui-bizagi-component-adjustable\");\r\n                self.resizeContainer($(element), adjustableContainersHeight);\r\n            }\r\n        });\r\n    },\r\n\r\n    /*\r\n    *   Return the menu component\r\n    */\r\n    getMenu: function () {\r\n        return this.menu;\r\n    },\r\n\r\n    refreshQueryFormShortCut: function (params) { },\r\n\r\n});\r\n","/*\r\n *   Name: BizAgi Workportal Menu Controller\r\n *   Author: Diego Parra\r\n *   Comments:\r\n *   -   This script will define a base class to handle manu layouts for any device\r\n */\r\n\r\nbizagi.workportal.controllers.controller.extend(\"bizagi.workportal.controllers.menu\", {}, {\r\n    init: function (workportalFacade, dataService) {\r\n        var self = this;\r\n        self._super(workportalFacade, dataService);\r\n\r\n        // Subscribe to change widget event\r\n        this.subscribe(\"showMainMenu\", function (e, params) {\r\n            var def = new $.Deferred();\r\n            $(self.getContent()).closest(\"#ui-bizagi-wp-menu\").show();\r\n            return def.promise();\r\n        });\r\n    },\r\n    /*\r\n    *   Renders the content for the current controller\r\n    *   Returns a deferred because it has to load the current user\r\n    */\r\n    renderContent: function () {\r\n        var self = this;\r\n        var template = self.workportalFacade.getTemplate(\"menu\");\r\n        var defer = new $.Deferred();\r\n        var defaultImg = \"iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAMAAAD04JH5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAAZQTFRF////////VXz1bAAAAAJ0Uk5T/wDltzBKAAAA+0lEQVR42uzaSxLCMAwE0c79L82SFMXHJpKHhJ59at4utmS2cBAgQMCBT3dZDuBJ1gF4mSUA3qYfALUCauvnCZT3Twqo758T0NA/JaCjf0ZwIgC0COjpHxecBgBNAgF09Y8KBAgQIECAAAFnAXgiEiDAq5mA8wEuOCERIMBBpYAfAMTH9QLygPjOSEB+b5gHxFe3I4Lt4oD0+v4HAPEXFAIECBDw70+58oDw7zh7JMteTrPTcr5MDYBDOQqgIAcAFOU7AKWZBlCeKQAtGQXQmAEAzfkAYEHeAWC5gOX1DwQS/XsBkf6dgEz/XSBAgAABAgQIECBAQBxwE2AAjnkjnL/SDJsAAAAASUVORK5CYII=\";\r\n\r\n        // Get Current User\r\n        $.when(self.dataService.getCurrentUser(), self.loadPreferences()).done(function (data, preferencesWP) {\r\n\r\n            // Define Global information to actual user\r\n            bizagi.currentUser = data = data[0];\r\n            self.customPreferencesObj = new bizagi.services.preferences(preferencesWP);\r\n            self.customFormats = new bizagi.services.preferences.customFormats();\r\n            var customPreferencesValues = self.customPreferencesObj.getPreferences();\r\n            \r\n            /** Manage windows maintenance **/ \r\n            var windowMaintenance = new bizagi.workportal.services.windowMaintenance(self.dataService);\r\n\r\n            $.datepicker.setDefaults(bizagi.localization.getResource(\"datePickerRegional\"));\r\n\r\n            //symbol from Rest/Users/CurrentUser, in server : data.symbol =  Business/Localization/Currency Symbol  || {language}.numericFormat.symbol\r\n            var currencyInfo = bizagi.localization.getResource('numericFormat');\r\n            if (currencyInfo) {\r\n                currencyInfo.decimalSymbol = customPreferencesValues.decimalSeparator || data.decimalSeparator || currencyInfo.decimalSymbol;\r\n                currencyInfo.symbol = customPreferencesValues.symbol || data.symbol || currencyInfo.symbol;\r\n                currencyInfo.digitGroupSymbol = customPreferencesValues.thousandSeparator || data.groupSeparator || currencyInfo.digitGroupSymbol;\r\n\r\n                bizagi.localization.setResource('numericFormat', currencyInfo);\r\n                if (BIZAGI_DEFAULT_CURRENCY_INFO) {\r\n                    BIZAGI_DEFAULT_CURRENCY_INFO.decimalDigits = data.decimalDigits;\r\n                    BIZAGI_DEFAULT_CURRENCY_INFO.decimalSeparator = currencyInfo.decimalSymbol;\r\n                    BIZAGI_DEFAULT_CURRENCY_INFO.symbol = currencyInfo.symbol;\r\n                    BIZAGI_DEFAULT_CURRENCY_INFO.groupSeparator = currencyInfo.digitGroupSymbol;\r\n                }\r\n            }\r\n\r\n            if (data.uploadMaxFileSize) {\r\n                BIZAGI_SETTINGS.UploadMaxFileSize = data.uploadMaxFileSize;\r\n                bizagi.util.changeData({ uploadMaxFileSize: BIZAGI_SETTINGS.UploadMaxFileSize });\r\n            }\r\n\r\n            self.overrideUserPreferences();\r\n\r\n            self.security = new bizagi.workportal.command.security(self.dataService);\r\n            $.when(self.security.getSecurity())\r\n                .done(function (security) {\r\n                    // Checking for DisplayOptions into security(response)\r\n                    if (bizagi.override.enableFeatureDisplayOptions === false) {\r\n                        security.DisplayOptions = false;\r\n                    }\r\n                    // Render content\r\n                    var content = self.content = $.tmpl(template, $.extend(data, {\r\n                        environment: bizagi.loader.environment || \"\",\r\n                        build: bizagi.loader.build,\r\n                        base64image: bizagi.themeLogo || \"img/img/barra/logo-bizagi.svg\",\r\n                        photo: \"data:image/png;base64,\" + ((bizagi.currentUser.userPicture) ? bizagi.currentUser.userPicture : defaultImg),\r\n                        hasPicture: bizagi.currentUser.userPicture ? true : false,\r\n                        initials: bizagi.currentUser.userFullName ? bizagi.currentUser.userFullName.getInitials() : \"\",\r\n                        security: security,\r\n                        showQrMobileMenu: bizagi.override.showQrMobileMenu !== false\r\n                    }));\r\n                    defer.resolve(content);\r\n                });\r\n        }).fail(function () {\r\n            self.dataService.logout();\r\n        });\r\n\r\n        return defer.promise();\r\n    },\r\n\r\n    loadPreferences: function () {\r\n        var self = this;\r\n        var defer = new $.Deferred();\r\n        $.when(self.dataService.getPreferencesWorkportalCurrentUser())\r\n            .done(function (resp) {\r\n                defer.resolve(resp);\r\n            })\r\n            .fail(function () {\r\n                defer.resolve();\r\n            })\r\n        return defer.promise();\r\n    },\r\n\r\n    overrideUserPreferences: function () {\r\n        var self = this;\r\n        self.customFormats.overrideLocalization();\r\n    },\r\n\r\n    /**\r\n     *   Helper method to change the current widget in the workportal\r\n     * @param params\r\n     */\r\n    changeWidget: function (params) {\r\n        var self = this;\r\n        self.publish(\"changeWidget\", params);\r\n    },\r\n\r\n    /**\r\n     *   Helper method to show a widget inside a dialog in the wokportal\r\n     * @param params\r\n     */\r\n    showDialogWidget: function (params) {\r\n        var self = this;\r\n        self.publish(\"showDialogWidget\", params);\r\n    },\r\n\r\n    /**\r\n     *\r\n     */\r\n    performResizeLayout: function () {\r\n        var self = this;\r\n        self.adjustMenuWP();\r\n    },\r\n\r\n    adjustMenuWP: function () {\r\n        var buttonMenuContainer = $(\"#ui-bizagi-wp-app-menu-bt-container\"),\r\n            /**\r\n             * add tolerance of an element and after calculate everything restore original size\r\n             */\r\n            toleranceFor =  function(Jelement){\r\n                var changeWidth = function(sign){\r\n                        Jelement.css(\"width\", sign + \"=10\");\r\n                    };\r\n                return {\r\n                    start: changeWidth.bind(null, \"-\"),\r\n                    end: changeWidth.bind(null, \"+\")\r\n                };\r\n            };\r\n        if (buttonMenuContainer.length === 1) {\r\n            // Define width for elements with responsive\r\n            var elementsMargin = 70, //jquery does not get the margin width with outerWidth :(\r\n                searchInputWidth = $(\"#ui-bizagi-wp-widget-searchContainer\").outerWidth() + 10;\r\n            toleranceFor(buttonMenuContainer).start();\r\n            var widthComponentsWithoutResponsive = searchInputWidth + $(\"#user\").outerWidth() +\r\n                $(\"#ui-bizagi-wp-app-menu-logo-container\").outerWidth() + elementsMargin;\r\n\r\n            // Define maximum width of menu\r\n            var limitWidth = $(\"#ui-bizagi-wp-app-menu-container\").width() - widthComponentsWithoutResponsive;\r\n            buttonMenuContainer.width(limitWidth);\r\n\r\n            //restart visible buttons\r\n            $(\"span.text\", selectorMenuButtons).show();\r\n\r\n            // hide button text by button text until all buttons and text is ok.\r\n            var selectorMenuButtons = $(\"#ui-bizagi-wp-app-menu-bt-container li\");\r\n            var indexButtonToHide = indexLastButton = selectorMenuButtons.length - 1;\r\n            var thereIsAButtonOverlaped = true;\r\n\r\n            while (thereIsAButtonOverlaped) {\r\n                if (indexButtonToHide < 0) {\r\n                    break;\r\n                }\r\n                if (buttonMenuContainer.position().top > 0 || selectorMenuButtons.eq(indexLastButton).position().top > 0) {\r\n                    $(\"span.text\", selectorMenuButtons).eq(indexButtonToHide).hide();\r\n                    indexButtonToHide -= 1;\r\n                }\r\n                else {\r\n                    toleranceFor(buttonMenuContainer).end();\r\n                    thereIsAButtonOverlaped = false;\r\n                }\r\n            }\r\n        }\r\n    }\r\n});\r\n","/*\r\n*   Name: BizAgi Workportal Workarea Controller \r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will define a base class to handle all the workarea of the application\r\n*/\r\n\r\nbizagi.workportal.controllers.controller.extend(\"bizagi.workportal.controllers.workarea\", {}, {\r\n\r\n    /*\r\n    *   This method sets the internal widget to be rendered\r\n    */\r\n    setWidget: function (widget) {\r\n        var self = this;\r\n        self.widget = widget;\r\n    },\r\n\r\n    disposeWidget: function () {\r\n        var self = this;\r\n        if (self.widget) {\r\n            self.widget.dispose();\r\n            delete self.widget;\r\n        }\r\n    },\r\n\r\n    cleanWidgets: function () {\r\n        var self = this;\r\n\r\n        if (self.widget) {\r\n            self.widget.clean();\r\n        }\r\n    },\r\n\r\n    /*\r\n    *   Renders the content for the current controller\r\n    *   Returns a deferred because it has to load the current user\r\n    */\r\n    renderContent: function () {\r\n        var self = this;\r\n\r\n        var defer = new $.Deferred();\r\n\r\n        if (self.widget) {\r\n            // Renders the widget\r\n            $.when(self.widget.render())\r\n            .done(function () {\r\n                self.content = self.widget.getContent();\r\n                defer.resolve(self.content);\r\n            });\r\n\r\n        } else {\r\n            self.content = $(\"<div/>\");\r\n            defer.resolve(self.content);\r\n        }\r\n\r\n        return defer.promise();\r\n    },\r\n\r\n    /*\r\n    *   Resizes layout for controller\r\n    */\r\n    performResizeLayout: function () {\r\n        var self = this;\r\n\r\n        // Call internal widget resize\r\n        if (self.widget) self.widget.performResizeLayout();\r\n    }\r\n\r\n});\r\n","/*\r\n *   Name: BizAgi Workportal Webpart helper\r\n *   Author: Diego Parra\r\n *   Comments:\r\n *   -   This script will define helper functions that the webparts could use to reuse some logic\r\n */\r\n\r\n\r\n$.Class.extend(\"bizagi.workportal.webpart.helper\", {}, {\r\n    /* \r\n     *   Constructor\r\n     */\r\n    init: function (webpart) {\r\n        // Set data service\r\n        this.dataService = webpart.dataService;\r\n\r\n        // Set l10n service\r\n        this.resources = webpart.resources;\r\n\r\n        // Set workportal facade\r\n        this.workportalFacade = webpart.workportalFacade;\r\n\r\n        //Load Aditional templates\r\n        this.templates = {};\r\n    },\r\n\r\n    /*\r\n     *   Helper to set visible property to false to the given columns\r\n     */\r\n    hideCasesColumn: function (data, columnName) {\r\n        var self = this;\r\n        for (i = 0; i < data.columns.length; i++) {\r\n            if (data.columns[i].name == columnName) {\r\n                data.columns[i].visible = false;\r\n                break;\r\n            }\r\n        }\r\n        return data;\r\n    },\r\n    /*\r\n     *   Helper to set visible property to false to the given columns\r\n     */\r\n    hideCasesColumn: function (data, columnName) {\r\n        var self = this;\r\n        for (i = 0; i < data.columns.length; i++) {\r\n            if (data.columns[i].name == columnName) {\r\n                data.columns[i].visible = false;\r\n                break;\r\n            }\r\n        }\r\n        return data;\r\n    },\r\n\r\n    /*\r\n     *   Helper to transform cases data into normalized grid data\r\n     */\r\n    transformCasesInfo: function (params) {\r\n        var old = params.data,\r\n            imageColumn = params.imageColumn;\r\n        var newData = {\r\n            transformed: true\r\n        };\r\n\r\n        // If the data is already transformed, don't do anything\r\n        if (old.transformed) return old;\r\n\r\n        var getColumnType = function (column) {\r\n            if (column.fieldName == imageColumn) return \"upload\";\r\n            if (column.fieldName == \"I_idTask\") return \"workitems\";\r\n            return column.type;\r\n        };\r\n\r\n        // Parse columns, and add \"id\" column\r\n        newData.columns = [{\r\n            name: \"id\",\r\n            displayName: \"id\",\r\n            visible: false\r\n        }];\r\n\r\n        for (var i = 0; i < old.cases.columnTitle.length; i++) {\r\n            var oldColumn = old.cases.columnTitle[i];\r\n            newData.columns.push({\r\n                name: oldColumn.fieldName,\r\n                displayName: oldColumn.displayName,\r\n                dataType: getColumnType(oldColumn)\r\n            });\r\n\r\n            if (bizagi.util.parseBoolean(oldColumn.isOrdered) == true) {\r\n                newData.orderBy = oldColumn.fieldName;\r\n                newData.orderType = oldColumn.orderType == 0 ? \"asc\" : \"desc\";\r\n            }\r\n        }\r\n\r\n        // Add \"workitems\" column\r\n        newData.columns.push({\r\n            name: \"workitems\",\r\n            displayName: \"workitems\",\r\n            visible: false,\r\n            dataType: \"workitems\"\r\n        });\r\n\r\n        newData.columns.push({\r\n            name: \"permissions\",\r\n            displayName: \"permissions\",\r\n            visible: false,\r\n            dataType: \"permissions\"\r\n        });\r\n\r\n        // Parse rows\r\n        newData.rows = [];\r\n        for (i = 0; i < old.cases.rows.length; i++) {\r\n            var oldRow = old.cases.rows[i];\r\n            var newRow = [];\r\n            newRow.push(oldRow.id);\r\n\r\n            // Add other fields\r\n            for (var j = 0; j < oldRow.fields.length; j++) {\r\n                newRow.push(oldRow.fields[j]);\r\n            }\r\n            newData.rows.push(newRow);\r\n        }\r\n\r\n        // Add other stuff\r\n        newData.totalPages = old.cases.totalPages;\r\n        newData.page = old.cases.page;\r\n\r\n        return newData;\r\n    },\r\n\r\n    /*\r\n     *   Helper to draw a grid view\r\n     */\r\n    drawGridView: function (params) {\r\n        var templates = params.template;\r\n\r\n        // This is the data that will be used in order to render the template\r\n        var data = params.data;\r\n\r\n        // Complete column information with defaults\r\n        for (i = 0; i < data.columns.length; i++) {\r\n            data.columns[i].visible = typeof (data.columns[i].visible) !== \"undefined\" ? bizagi.util.parseBoolean(data.columns[i].visible) : true;\r\n\r\n            // Hide uploads & workitems\r\n            if (data.columns[i].dataType == \"upload\") data.columns[i].visible = false;\r\n            if (data.columns[i].dataType == \"workitems\") data.columns[i].visible = false;\r\n            if (data.columns[i].dataType == \"permissions\") data.columns[i].visible = false;\r\n        }\r\n\r\n        // Check that required params are defined\r\n        if (data.orderType == 0) data.orderType = \"asc\";\r\n        if (data.orderType == 1) data.orderType = \"desc\";\r\n        data.orderBy = !bizagi.util.isEmpty(data.orderBy) ? data.orderBy : \"\";\r\n        data.orderType = !bizagi.util.isEmpty(data.orderType) ? data.orderType : \"asc\";\r\n        data.totalPages = !bizagi.util.isEmpty(data.totalPages) ? data.totalPages : 0;\r\n\r\n        // Add paging stuff\r\n        var pages = [];\r\n        for (var i = 1; i <= data.totalPages; i++) {\r\n            pages.push({\r\n                number: i,\r\n                active: (i == data.page)\r\n            });\r\n        }\r\n\r\n        // Build the html\r\n        var result = $.tmpl(templates, $.extend(data, {\r\n            pages: pages,\r\n            actions: params.actions,\r\n            filters: params.filters,\r\n            title: params.title,\r\n            getCaseId: function (row) {\r\n                return row[0];\r\n            },\r\n            getEntityId: function (row) {\r\n                return row[0];\r\n            },\r\n            splitHeaderName: function (displayName) {\r\n                var finalDispName = displayName;\r\n                var dispNameParts = displayName.split('_');\r\n                if (dispNameParts.length > 1)\r\n                    finalDispName = dispNameParts[1];\r\n                return finalDispName;\r\n            },\r\n            getWorkItems: function (row) {\r\n                var workitemsData = \"[\";\r\n                var workitems = row[row.length - 2].workitems;\r\n                if (workitems && workitems.length > 0) {\r\n                    for (var wi in workitems) {\r\n                        if (wi > 0) {\r\n                            workitemsData += \",\";\r\n                        }\r\n                        var wiInfo = \"{\\\"idWorkItem\\\":\";\r\n                        wiInfo += workitems[wi].idWorkItem;\r\n                        wiInfo += \",\\\"idTask\\\":\";\r\n                        wiInfo += workitems[wi].idTask;\r\n                        wiInfo += \"}\";\r\n                        workitemsData += wiInfo;\r\n                    }\r\n\r\n                }\r\n                workitemsData += \"]\";\r\n                return workitemsData;\r\n            }\r\n        }));\r\n\r\n        return result;\r\n    },\r\n\r\n    /*\r\n     *   Helper to draw a thumbnails view\r\n     */\r\n    drawThumbnailsView: function (params) {\r\n        var self = this;\r\n        var templates = params.template;\r\n\r\n        // This is the data that will be used in order to render the template\r\n        var data = params.data;\r\n        var imageUrl, label;\r\n\r\n        // Normalize label item\r\n        for (i = 0; i < data.columns.length; i++) {\r\n            // Set default visibility to true\r\n            data.columns[i].visible = typeof (data.columns[i].visible) !== \"undefined\" ? bizagi.util.parseBoolean(data.columns[i].visible) : true;\r\n\r\n            // Check label item\r\n            if (data.columns[i].name == params.imageLabelColumn) {\r\n                data.columns[i].dataType = \"imageLabel\";\r\n            }\r\n\r\n            // Check workitem item\r\n            if (data.columns[i].dataType == \"workitems\") {\r\n                data.columns[i].visible = false;\r\n            }\r\n        }\r\n\r\n        // Check that required params are defined\r\n        data.orderBy = !bizagi.util.isEmpty(data.orderBy) ? data.orderBy : \"\";\r\n        data.orderType = !bizagi.util.isEmpty(data.orderType) ? data.orderType : \"asc\";\r\n        data.totalPages = !bizagi.util.isEmpty(data.totalPages) ? data.totalPages : 0;\r\n\r\n        // Add paging stuff\r\n        var pages = [];\r\n        for (var i = 1; i <= data.totalPages; i++) {\r\n            pages.push({\r\n                number: i,\r\n                active: (i == data.page)\r\n            });\r\n        }\r\n\r\n        // Build the html\r\n        return $.tmpl(templates,\r\n            $.extend(data, {\r\n                pages: pages,\r\n                getImage: function (files) {\r\n                    return self.getFileImage(files);\r\n                },\r\n                actions: params.actions,\r\n                getCaseId: function (row) {\r\n                    return row[0];\r\n                },\r\n                getEntityId: function (row) {\r\n                    return row[0];\r\n                },\r\n                getWorkItems: function (row) {\r\n                    var workitemsData = \"[\";\r\n                    var workitems = row[row.length - 1].workitems;\r\n                    if (workitems && workitems.length > 0) {\r\n                        for (var wi in workitems) {\r\n                            if (wi > 0) {\r\n                                workitemsData += \",\";\r\n                            }\r\n                            var wiInfo = \"{\\\"idWorkItem\\\":\";\r\n                            wiInfo += workitems[wi].idWorkItem;\r\n                            wiInfo += \",\\\"idTask\\\":\";\r\n                            wiInfo += workitems[wi].idTask;\r\n                            wiInfo += \"}\";\r\n                            workitemsData += wiInfo;\r\n                        }\r\n\r\n                    }\r\n                    workitemsData += \"]\";\r\n                    return workitemsData;\r\n                }\r\n            }));\r\n    },\r\n\r\n    getEmptyFile: function () {\r\n        return \"/_layouts/Proxy/jquery/overrides/css/desktop/images/EmptyAsset.png\";\r\n        //return \"\"; //No Picture\r\n    },\r\n    /*  \r\n     *   Returns the file url\r\n     */\r\n    getFileImage: function (files) {\r\n        var self = this;\r\n\r\n        if (!files || files.length == 0) return self.getEmptyFile();\r\n        return files;\r\n    },\r\n    getFile: function (files) {\r\n        var self = this;\r\n\r\n        if (!files || files.length == 0) return self.getEmptyFile();\r\n        return self.dataService.getFile(files[0]);\r\n    },\r\n    removeWaitContainer: function (container) {\r\n        if ($(container)) {\r\n            $(container).addClass(\"ui-bizagi-sharepoint-loading-container-hidden\");\r\n        }\r\n    },\r\n    addWaitContainer: function (container) {\r\n        if ($(container)) {\r\n            $(container).removeClass(\"ui-bizagi-sharepoint-loading-container-hidden\");\r\n        }\r\n    },\r\n\r\n    loadTemplate: function (template, templateDestination) {\r\n        var self = this;\r\n\r\n        // Go fetch the template\r\n        return bizagi.templateService.getTemplate(templateDestination)\r\n            .done(function (resolvedRemplate) {\r\n                self.templates[template] = resolvedRemplate;\r\n            });\r\n    },\r\n\r\n    getFailServerErrorDeferred: function (params, defer) {\r\n        var self = this;\r\n        var errorMessage = params.message;\r\n        var remoteSeverURL = \"\"\r\n        var errorTemplateName;\r\n        if (params.sharepointProxyPrefix.indexOf(\"URL\") != -1) {\r\n            remoteSeverURL = params.sharepointProxyPrefix.substr(params.sharepointProxyPrefix.indexOf(\"URL\") + 4, params.sharepointProxyPrefix.length);\r\n            errorTemplateName = \"bizagi.workportal.desktop.error-message-sharepoint\";\r\n        } else {\r\n            errorTemplateName = \"bizagi.workportal.desktop.error-message-portal\";\r\n        }\r\n        errorMessage = remoteSeverURL + \": \" + errorMessage;\r\n        self.loadTemplate(\"error-message\", bizagi.getTemplate(errorTemplateName))\r\n            .done(function (eTemplate) {\r\n                var content = self.content = $.tmpl(eTemplate, {\r\n                    message: errorMessage,\r\n                    address: params.helpAddress\r\n                });\r\n\r\n                defer.resolve(content);\r\n\r\n            }).fail(function (msg) {\r\n                defer.resolve(\"<div>Unhandled error</div>\");\r\n            });\r\n\r\n    },\r\n    getPaginationTemplate: function () {\r\n        return self.loadTemplate(\"pagination-template\", bizagi.getTemplate(\"inbox-common-pagination-inbox\"))\r\n    },\r\n\r\n    publishShowRenderEvent: function (event, webpart, params) {\r\n        // Check if the current render form can be changed\r\n        if (!!!event) {\r\n            alert(\"Event param cannot be undefined\");\r\n        }\r\n        //The webparts that not visible no receive events  \r\n        var deferRet = webpart.publish(\"ui-bizagi-can-change-activityform\");\r\n        if (deferRet) {\r\n            deferRet.done(function () {\r\n                // When the \"ui-bizagi-can-change-activityform\" event deferred is resolved, it means that we can change the activityform instance\r\n                // otherwise the deferred fails and nothing happens because we don't have fail implementation\r\n\r\n                // Publish the event so any other webpart could react to that\r\n                webpart.publish(event, params);\r\n            });\r\n        } else {\r\n            //Error autosave verification send error\r\n            console.log(\"autosave verification send error\");\r\n            //webpart.publish(event, params);\r\n        }\r\n    },\r\n    isWebpartInIFrame: function () {\r\n        try {\r\n            return window.self !== window.top;\r\n        } catch (e) {\r\n            return true;\r\n        }\r\n    },\r\n    //This method send a message by postMessage to parent, and parent create a popUp,\r\n    displayWebPartPopUpExternalIframe: function (webpartName, params, callback, postMessageSocket) {\r\n        params.message = {};\r\n        var data = $.extend({}, params, {\r\n            workportal: null,\r\n            canvas: null,\r\n            whenInitialized: null,\r\n            event: \"postmessage-bizagi-openParentPopUp\",\r\n            message: {\r\n                webPartToDraw: webpartName,\r\n                iframeidentifier: postMessageSocket.iframeidentifier\r\n            }\r\n        });\r\n\r\n        postMessageSocket.send(data);\r\n    },\r\n    displayWebPartPopUpinIFrame: function (webpartName, params, callback) {\r\n\r\n        var webpartObject;\r\n        // Publish the event so any other webpart could react to that\r\n        var mask = document.createElement(\"div\");\r\n        mask.className = \"containerPopUp\";\r\n        mask.style.height = \"100%\";\r\n\r\n        var popUpParams = params;\r\n\r\n        if (!mask.addEventListener) {\r\n            mask.attachEvent(\"onclick\", preClosePopUp);\r\n        } else {\r\n            mask.addEventListener(\"click\", preClosePopUp, false);\r\n        }\r\n\r\n        function preClosePopUp(ev, params) {\r\n            if (ev.eventPhase === 2) {\r\n                closePopUp(ev, params);\r\n            }\r\n        }\r\n\r\n        var canvas = document.createElement(\"div\");\r\n        canvas.className = \"activitiFormContainer\";\r\n        var closeCanvas = document.createElement(\"div\");\r\n        closeCanvas.className = \"closeCanvas\";\r\n\r\n        if (!closeCanvas.addEventListener) {\r\n            closeCanvas.attachEvent(\"onclick\", function (e, params) {\r\n                closePopUp(e, params);\r\n            });\r\n        } else {\r\n            closeCanvas.addEventListener(\"click\", function (e, params) {\r\n                closePopUp(e, params);\r\n            }, false);\r\n        }\r\n\r\n        canvas.appendChild(closeCanvas);\r\n        mask.appendChild(canvas);\r\n\r\n        var webpartCanvasDiv = document.createElement(\"div\");\r\n        webpartCanvasDiv.className = \"webpartCanvasDiv\";\r\n        webpartCanvasDiv.id = \"webpartCanvasPopUp\";\r\n        canvas.appendChild(webpartCanvasDiv);\r\n\r\n        var pathiFrame = \"\";\r\n        if (params.pathiFrame) {\r\n            pathiFrame = params.pathiFrame;\r\n        } else {\r\n            pathiFrame = window.location.href.substring(0, window.location.href.indexOf(\"jquery\"));\r\n        }\r\n\r\n        var queryStringParams = window.location.toString().split('?')[1];\r\n\r\n\r\n        pathiFrame = pathiFrame + \"jquery/webparts/desktop/portal/pages/webpart.htm\"\r\n        pathiFrame = pathiFrame + \"?type=\" + webpartName;\r\n        if (params.idCase) {\r\n            pathiFrame = pathiFrame + \"&idCase=\" + params.idCase;\r\n        }\r\n        if (params.idWorkitem) {\r\n            pathiFrame = pathiFrame + \"&idWorkitem=\" + params.idWorkitem;\r\n        }\r\n        if (params.idWfClass) {\r\n            pathiFrame = pathiFrame + \"&idWfClass=\" + params.idWfClass;\r\n        }\r\n        if (queryStringParams) {\r\n            pathiFrame = pathiFrame + \"&\" + queryStringParams;\r\n        }\r\n\r\n        pathiFrame = pathiFrame + \"&remoteServer=\" + window.location.toString();\r\n\r\n\r\n        //Aqui se agrega el iframe\r\n        var iframe = document.createElement(\"iframe\");\r\n        iframe.className = \"csswebpartIframePopUp\";\r\n        iframe.id = \"iframePopUp\";\r\n        iframe.src = pathiFrame;\r\n        iframe.resizeInPopUp = function (params) {\r\n            var self = this;\r\n            var heightActivitiFormContainer = $(\".activitiFormContainer\").height() || 0;\r\n            $(iframe).height(heightActivitiFormContainer);\r\n        }\r\n\r\n        webpartCanvasDiv.appendChild(iframe);\r\n        document.body.appendChild(mask);\r\n\r\n        iframe.resizeInPopUp(params);\r\n        $(window).resize(function () {\r\n            iframe.resizeInPopUp(params);\r\n        });\r\n\r\n        function closePopUp(ev, params) {\r\n            //if webpart has canHide event, call event canHide before\r\n\r\n            var postmessageSocket = new bizagi.postmessage({\r\n                remoteServer: pathiFrame,\r\n                destination: iframe.contentWindow,\r\n                origin: window\r\n            });\r\n            postmessageSocket.receive = function (msg) {\r\n                //the canHide process is made in iframe\r\n                var params = msg.data;\r\n                if (params.event == \"postmessage-bizagi-closeIFramePopUp\") {\r\n                    if (mask.parentNode) {\r\n                        iframe.src = undefined;\r\n                        mask.parentNode.removeChild(mask);\r\n                        if (callback) {\r\n                            callback(this, popUpParams);\r\n                        }\r\n                    }\r\n                }\r\n            };\r\n            var iframeclosemsg = {};\r\n            iframeclosemsg.event = \"postmessage-bizagi-canCloseIFramePopUp\";\r\n            postmessageSocket.send(iframeclosemsg);\r\n        }\r\n\r\n    },\r\n    displayWebPartPopUp: function (webpartName, params, callback) {\r\n        var webpartObject;\r\n        // Publish the event so any other webpart could react to that\r\n        var mask = document.createElement(\"div\");\r\n        mask.className = \"containerPopUp\";\r\n        mask.style.height = \"100%\";\r\n\r\n        var popUpParams = params;\r\n\r\n        if (!mask.addEventListener) {\r\n            mask.attachEvent(\"onclick\", preClosePopUp);\r\n        } else {\r\n            mask.addEventListener(\"click\", preClosePopUp, false);\r\n        }\r\n\r\n        function preClosePopUp(ev, params) {\r\n            if (ev.eventPhase === 2) {\r\n                closePopUp(ev, params);\r\n            }\r\n        }\r\n\r\n        function closePopUp(ev, params) {\r\n            //if webpart has canHide event, call event canHide before\r\n            if (webpartObject.canHide) {\r\n                $.when(webpartObject.canHide())\r\n                    .done(function () {\r\n                        var showCasesMSG = {\r\n                            message: {}\r\n                        };\r\n                        showCasesMSG.event = \"ui-bizagi-reload-cases\";\r\n\r\n                        if(webpartObject.postmessageSocket){\r\n                            webpartObject.postmessageSocket.send(showCasesMSG);\r\n                        } else {\r\n                            var postmessageSocket = new bizagi.postmessage({\r\n                                remoteServer: bizagi.readQueryString()[\"remoteServer\"],\r\n                                destination: window.parent,\r\n                                origin: window\r\n                            });\r\n                            postmessageSocket.send(showCasesMSG);\r\n                        }\r\n\r\n                        mask.parentNode.removeChild(mask);\r\n                        if (callback) {\r\n                            callback(this, popUpParams);\r\n                        }\r\n                        webpartObject.destroy();\r\n                    }).fail(function () {\r\n                        mask.parentNode.removeChild(mask);\r\n                        if (callback) {\r\n                            callback(this, popUpParams);\r\n                        }\r\n                        webpartObject.destroy();\r\n                    });\r\n            } else {\r\n                mask.parentNode.removeChild(mask);\r\n                if (callback) {\r\n                    callback(this, popUpParams);\r\n                }\r\n                webpartObject.destroy();\r\n            }\r\n        }\r\n\r\n        var canvas = document.createElement(\"div\");\r\n        canvas.className = \"activitiFormContainer\";\r\n        var closeCanvas = document.createElement(\"div\");\r\n        closeCanvas.className = \"closeCanvas\";\r\n\r\n        if (!closeCanvas.addEventListener) {\r\n            closeCanvas.attachEvent(\"onclick\", function (e, params) {\r\n                closePopUp(e, params);\r\n            });\r\n        } else {\r\n            closeCanvas.addEventListener(\"click\", function (e, params) {\r\n                closePopUp(e, params);\r\n            }, false);\r\n        }\r\n\r\n        canvas.appendChild(closeCanvas);\r\n        mask.appendChild(canvas);\r\n\r\n        var webpartCanvasDiv = document.createElement(\"div\");\r\n        webpartCanvasDiv.className = \"webpartCanvasDiv\";\r\n        webpartCanvasDiv.id = \"webpartCanvasPopUp\";\r\n        canvas.appendChild(webpartCanvasDiv);\r\n\r\n        var webpartParams = $.extend({}, params, {\r\n            webpart: webpartName,\r\n            canvas: $(webpartCanvasDiv),\r\n            namespace: \"PopUp\",\r\n            data: null,\r\n            adjustButtonsToContent: true\r\n        });\r\n\r\n        //add popUp in document\r\n        document.body.appendChild(mask);\r\n        //The element webpartCanvasDiv must be already added to document, for can call  bizagi.starWaiting\r\n        bizagi.startWaiting(webpartCanvasDiv);\r\n\r\n        params.workportal.executeWebpart(webpartParams).done(function (result) {\r\n            webpartObject = result.webpart;\r\n            closeCanvas.onclick = function (e, params) {\r\n                // callback(params);\r\n            }\r\n        });\r\n    },\r\n    displayWebPartDialog: function (webpartName, params, callback) {\r\n        var webpartObject;\r\n        var dialogParams = params.dialogParams;\r\n        var canvas = document.createElement(\"div\");\r\n        canvas.className = \"activitiFormContainer\";\r\n        var webpartCanvasDiv = document.createElement(\"div\");\r\n        webpartCanvasDiv.className = \"webpartCanvasDiv\";\r\n        webpartCanvasDiv.id = \"webpartCanvasPopUp\";\r\n        canvas.appendChild(webpartCanvasDiv);\r\n        var webpartParams = $.extend({}, params, {\r\n            webpart: webpartName,\r\n            canvas: $(webpartCanvasDiv),\r\n            namespace: \"PopUp\",\r\n            data: null,\r\n            adjustButtonsToContent: true\r\n        });\r\n        params.workportal.executeWebpart(webpartParams).done(function (result) {\r\n            webpartObject = result.webpart;\r\n            if (dialogParams.showCloseButton) {\r\n                dialogParams.buttons.push({\r\n                    text: bizagi.localization.getResource(\"workportal-widget-dialog-box-close\"),\r\n                    click: function (p, a) {\r\n                        webpartObject.content.dialog(\"close\");\r\n                    }\r\n                });\r\n            }\r\n            webpartObject.content.dialog(dialogParams);\r\n        });\r\n    }\r\n});\r\n\r\n/*\r\n *   Static Methods to configure webparts\r\n */\r\nbizagi = (typeof (bizagi) !== \"undefined\") ? bizagi : {};\r\nbizagi.webparts = (typeof (bizagi.webparts) !== \"undefined\") ? bizagi.webparts : {};\r\n\r\nbizagi.webparts.addConfigurationMessage = function (webpartParams, messageResourceName) {\r\n    var doc = this.ownerDocument;\r\n    var body = $(\"body\", doc);\r\n    var canvas = webpartParams.canvas || $(\"<div/>\").appendTo(body);\r\n    var errorTemplate = bizagi.getTemplate(\"bizagi.sharepoint.configurationerror\");\r\n    // Load template\r\n    $.when(bizagi.templateService.getTemplate(errorTemplate))\r\n        .then(function (template) {\r\n            $.tmpl(template, {\r\n                message: bizagi.localization.getResource(messageResourceName)\r\n            }).appendTo(canvas);\r\n\r\n        });\r\n};\r\n","/*\r\n *   Name: BizAgi Workportal Webpart Controller\r\n *   Author: Diego Parra\r\n *   Comments:\r\n *   -   This script will define a base class to all widgets\r\n */\r\n\r\n/* Asegura que el namespace este creado*/\r\nbizagi = (typeof (bizagi) !== \"undefined\") ? bizagi : {};\r\nbizagi.webpart = (typeof (bizagi.webpart) !== \"undefined\") ? bizagi.webpart : {};\r\nbizagi.webpart.subscribe = function (eventName, callback) {\r\n    $(document).bind(eventName, callback);\r\n};\r\nbizagi.webpart.publish = function (eventName, params) {\r\n    return $(document).triggerHandler(eventName, params);\r\n};\r\n\r\nbizagi.webpart.whenCreated = function (webpartName, callback) {\r\n    bizagi.webpart.subscribe(\"bizagi-webpart-created\", function (params) {\r\n        if (params.webpart.Class.fullname == \"bizagi.workportal.webparts.\" + webpartName) {\r\n            if (callback) callback(params);\r\n        }\r\n    })\r\n};\r\n\r\nbizagi.webpart.whenExecuted = function (webpartName, callback) {\r\n    bizagi.webpart.subscribe(\"bizagi-webpart-executed\", function (params) {\r\n        if (params.webpart.Class.fullname == \"bizagi.workportal.webparts.\" + webpartName) {\r\n            if (callback) callback(params);\r\n        }\r\n    })\r\n};\r\n\r\n\r\nbizagi.workportal.controllers.controller.extend(\"bizagi.workportal.webparts.webpart\", {\r\n\r\n}, {\r\n    /*\r\n     *   Constructor\r\n     */\r\n    init: function (workportalFacade, dataService, params) {\r\n        var self = this;\r\n\r\n        // Call base\r\n        this._super(workportalFacade, dataService, params);\r\n\r\n        // Set helper\r\n        this.helper = new bizagi.workportal.webpart.helper(this);\r\n\r\n        this.canvas = params.canvas;\r\n\r\n        // Set project\r\n        this.project = params.project;\r\n        this.sharepointProxyPrefix = params.sharepointProxyPrefix;\r\n\r\n        // Set namespace\r\n        this.namespace = params.namespace;\r\n        // visible\r\n        this.isVisible = true;\r\n        this.isWebpartInIFrame = typeof (params.isWebpartInIFrame) != 'undefined' ? params.isWebpartInIFrame : self.helper.isWebpartInIFrame();\r\n        this.adjustButtonsToContent = params.adjustButtonsToContent;\r\n        this.remoteServer = params.remoteServer;\r\n\r\n        if (this.remoteServer) {\r\n\r\n            //postmessage object definition\r\n            self.postmessageSocket = new bizagi.postmessage({\r\n                remoteServer: this.remoteServer,\r\n                destination: window.parent,\r\n                origin: window\r\n            });\r\n            self.postmessageSocket.iframeidentifier = BIZAGI_IFRAME_IDENTIFIER;\r\n            self.postmessageSocket.receive = function (msg) {\r\n                var params = msg.data;\r\n\r\n                // Auto-discard self messages\r\n                if (params.message) {\r\n                    if (params.message.iframeidentifier == BIZAGI_IFRAME_IDENTIFIER) {\r\n                        return;\r\n                    }\r\n                }\r\n\r\n                if (params.event) {\r\n                    switch (params.event) {\r\n                        case \"postmessage-bizagi-canCloseIFramePopUp\":\r\n\r\n                            if (self.canHide && self.Class.shortName == params.message.webPartDestine) {\r\n                                $.when(self.canHide())\r\n                                    .done(function () {\r\n                                        var iframeclosemsg = {};\r\n                                        iframeclosemsg.event = \"postmessage-bizagi-closeIFramePopUp\";\r\n                                        iframeclosemsg.message = {};\r\n                                        iframeclosemsg.message.iframeidentifier = BIZAGI_IFRAME_IDENTIFIER;\r\n                                        self.postmessageSocket.send(iframeclosemsg);\r\n                                        var showCasesMSG = {\r\n                                            message: {}\r\n                                        };\r\n                                        showCasesMSG.event = \"ui-bizagi-reload-cases\";\r\n                                        self.postmessageSocket.send(showCasesMSG);\r\n                                    });\r\n                            }\r\n                            break;\r\n                        case \"postmessage-bizagi-openParentPopUp\":\r\n                            //Do nothing this message is for parent\r\n                            break;\r\n                        default:\r\n                            //re send message to other webparts\r\n                            self.publish(params.event, params.message, true);\r\n                            break;\r\n                    }\r\n                } else {\r\n                    //set iframe height and width\r\n\r\n                }\r\n            };\r\n            self.postmessageSocket.startReceiving();\r\n            self.sendDimensionsiFrame();\r\n        }\r\n    },\r\n    sendDimensionsiFrame: function (mandatorysend) {\r\n        var self = this;\r\n        //If webpart is put in iFrame resize the iframe with content height\r\n        //else if iframe show in popUp FixButtons, is desirable\r\n        //If namespace is defined this is a chil webpart\r\n        //delay wait for finish render\r\n        if (self.remoteServer) {\r\n            if (!!!self.adjustButtonsToContent && (!!!self.namespace || mandatorysend)) {\r\n                if (self.isWebpartInIFrame) {\r\n                    if (self.canvas[0]) {\r\n                        //send dimensions in resize event \r\n                        var canvasobject = self.canvas[0];\r\n                        if (canvasobject.attachEvent) {\r\n                            canvasobject.onresize = function () {\r\n                                self.sendDimensionsiFramePostMessage();\r\n                            };\r\n                        } else {\r\n                            bizagi.addResizeListener(canvasobject, function (e) {\r\n                                self.sendDimensionsiFramePostMessage();\r\n                            });\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    },\r\n\r\n\r\n    sendDimensionsiFramePostMessage: function () {\r\n        var self = this;\r\n        var iframeDimentions = {\r\n            message: {}\r\n        };\r\n        iframeDimentions.message.iframeName = BIZAGI_IFRAME_IDENTIFIER;\r\n        iframeDimentions.message.iframeHeight = $('body').height();\r\n        if (self.Class.shortName == \"newcaselist\") {\r\n        } else {\r\n            iframeDimentions.message.iframeWidth = undefined;\r\n        }\r\n        self.postmessageSocket.send(iframeDimentions);\r\n    },\r\n\r\n    /**\r\n     *   Publish an event so any controller can subscribe to it\r\n     */\r\n    publish: function (eventName, params, notFireToIframe) {\r\n        var self = this;\r\n        eventName = this.namespace ? this.namespace + \".\" + eventName : eventName;\r\n        //publish event to iframe\r\n        if (!!!notFireToIframe && eventName.indexOf(\"bizagi-webpart-created\") == -1 && eventName.indexOf(\"bizagi-webpart-executed\") == -1 && self.postmessageSocket) {\r\n            var msg = {};\r\n            msg.event = eventName;\r\n            //By iFrame messages it can not transmit the canvas object or object workportal\r\n            if (params) {\r\n                params.canvas = null;\r\n                params.workportal = null;\r\n            }\r\n\r\n            msg.message = {};\r\n            msg.message = $.extend(params, {\r\n                project: this.project,\r\n                iframeidentifier: BIZAGI_IFRAME_IDENTIFIER\r\n            });\r\n            msg.message.whenInitialized = null;\r\n            self.postmessageSocket.send(msg);\r\n        }\r\n        //publish event localy in webparts\r\n        return this._super(eventName, $.extend(params, {\r\n            project: this.project\r\n        }));\r\n    },\r\n\r\n    /**\r\n     *   Subscribe to an event that any controller could trigger\r\n     */\r\n    subscribe: function (eventName, callback) {\r\n        var self = this;\r\n        eventName = this.namespace ? this.namespace + \".\" + eventName : eventName;\r\n        this._super(eventName, function (e, params) {\r\n            if (self.project == params.project && self.isVisible)\r\n                return callback(e, params);\r\n        });\r\n    },\r\n\r\n    /**\r\n     *   UnSubscribe to an event that any controller could trigger\r\n     */\r\n    unsubscribe: function (eventName, callback) {\r\n        var self = this;\r\n        eventName = this.namespace ? this.namespace + \".\" + eventName : eventName;\r\n        this._super(eventName, callback);\r\n    },\r\n\r\n    /*\r\n     *   Re-draw the webpart\r\n     */\r\n    refresh: function (params) {\r\n        var self = this;\r\n        var content = this.getContent();\r\n\r\n        // Clear content\r\n        content.empty();\r\n\r\n        // Dispose stuff\r\n        self.prepareForRefresh();\r\n\r\n        // Re-draw content;\r\n        $.when(self.render(params))\r\n            .done(function (newContent) {\r\n                if ($.contains(window.document, content[0])) {\r\n                    bizagi.util.replaceSelector($(\"body\", window.document), content, newContent);\r\n                } else {\r\n                    $(\"#\" + content.attr(\"id\"), window.document).empty();\r\n                    bizagi.util.replaceSelector($(\"body\", window.document), \"#\" + content.attr(\"id\"), newContent);\r\n                }\r\n            });\r\n    },\r\n\r\n    /*\r\n     *   Renders the web part\r\n     *   Also ensures that templates are loaded\r\n     */\r\n    render: function (params) {\r\n        var self = this;\r\n\r\n        // Set params in webpart variable\r\n        self.params = params;\r\n\r\n        if (params.creating) {\r\n            self.content = self.empty();\r\n\r\n            // Trigger webpart created event\r\n            self.publish(\"bizagi-webpart-created\", {\r\n                webpart: self\r\n            });\r\n\r\n            return self.content;\r\n        }\r\n\r\n        // Load templates\r\n        return $.when(self.renderContent(params))\r\n            .pipe(function (content) {\r\n                // Then customize in current device\r\n                // if you use fastTmpl the object string is transformed to object html -jquery\r\n                if (typeof (content) == \"string\") content = $(content);\r\n\r\n                self.content = content;\r\n                self.postRender(params);\r\n\r\n                // Trigger webpart executed event\r\n                self.publish(\"bizagi-webpart-executed\", {\r\n                    webpart: self\r\n                });\r\n                self.sendDimensionsiFrame();\r\n                return self.getContent();\r\n            });\r\n    },\r\n\r\n    /*\r\n     *   Renders the web part, override this method in each webpart\r\n     */\r\n    renderContent: function (params) {},\r\n\r\n    /*\r\n     *   Customize the web part in each device\r\n     */\r\n    postRender: function (params) {},\r\n\r\n    /*\r\n     *   Return the rendered content\r\n     */\r\n    getContent: function () {\r\n        return this.content;\r\n    },\r\n\r\n    /*\r\n     *   Creates an empty content\r\n     */\r\n    empty: function () {\r\n        return $(\"<div/>\");\r\n    },\r\n\r\n    /*  \r\n     *   Return a specified template\r\n     */\r\n    getTemplate: function (template) {\r\n        return this.workportalFacade.getTemplate(template);\r\n    },\r\n\r\n    /*  \r\n     *   Create webpart\r\n     */\r\n    createWebpart: function (params) {\r\n        return this.workportalFacade.workportal.createWebpart(params);\r\n    },\r\n\r\n    /*  \r\n     *   Execute webpart\r\n     */\r\n    executeWebpart: function (params) {\r\n        return this.workportalFacade.workportal.executeWebpart(params);\r\n    },\r\n    /**\r\n     *   Manage the error in base class\r\n     */\r\n    manageError: function (msg, defer, canvasError) {\r\n        var self = this;\r\n        var errorMsg = '';\r\n        if (msg.responseText) {\r\n            errorMsg = msg.responseText;\r\n        } else {\r\n            errorMsg = msg;\r\n        }\r\n        if (errorMsg.indexOf(\"AUTHENTICATION_ERROR\") == -1) {\r\n            self.helper.getFailServerErrorDeferred({\r\n                message: errorMsg,\r\n                sharepointProxyPrefix: self.sharepointProxyPrefix\r\n            }, defer);\r\n            self.endWaiting();\r\n            //en caso de no tener un canvasError el error se despliega en todo el content\r\n            if (canvasError) {\r\n                defer.done(function (value) {\r\n                    canvasError.append(value);\r\n                    self.endWaiting();\r\n                });\r\n            }\r\n            //defer.resolve(msg);\r\n        } else {\r\n            //when it's generate autentication error, cannot load the template\r\n            var content = self.content = \"<div class='ui-bizagi-webpart-error-message'>The current user does not exist as a registered user in the bizagi project</div>\";\r\n            if (canvasError) {\r\n                canvasError.append(content);\r\n            }\r\n            self.endWaiting();\r\n            defer.resolve(content);\r\n        }\r\n    },\r\n    /**\r\n     *   On waiting. En el area del webpart agrega un div del mismo tamanio y de las mismas coordenadas que el content.\r\n     */\r\n    onWaiting: function () {\r\n        var self = this;\r\n        bizagi.startWaiting(document.getElementById(self.canvas[0].id));\r\n    },\r\n    /**\r\n     *   Off waiting. \r\n     */\r\n    endWaiting: function () {\r\n        var self = this;\r\n        self.canvas.children(\".ui-bizagi-sharepoint-loading-container\").remove();\r\n    },\r\n\r\n    /**\r\n     *   Hide WebPart\r\n     */\r\n    hide: function (hideParent) {\r\n        var self = this;\r\n        self.canvas.hide();\r\n        if (hideParent) {\r\n            self.canvas.parent().hide();\r\n        }\r\n        self.isVisible = false;\r\n    },\r\n    /**\r\n     *    Show WebPart\r\n     */\r\n    show: function () {\r\n        var self = this;\r\n        self.canvas.show();\r\n        self.canvas.parent().show();\r\n        self.isVisible = true;\r\n    },\r\n    /**\r\n     *    visible flat\r\n     */\r\n    isVisible: function () {\r\n        var self = this;\r\n        return self.isVisible;\r\n    },\r\n\r\n    destroy: function () {\r\n\r\n    },\r\n\r\n    prepareForRefresh: function () {\r\n\r\n    }\r\n\r\n});","\r\n/*\r\n *   Name: BizAgi Workportal Action\r\n *   Author: Diego Parra\r\n *   Comments:\r\n *   -   This script will define a base class to process workportal actions in order to take decisions\r\n */\r\n\r\nbizagi.workportal.controllers.controller.extend(\"bizagi.workportal.actions.action\", {\r\n\t    BIZAGI_WORKPORTAL_ACTION_ROUTING: \"routing\",\r\n        BIZAGI_WORKPORTAL_ACTION_SEARCH : \"search\"\r\n    }, {\r\n        \r\n        /*\r\n         *   Makes the base processing of the layout (mix templates + data)\r\n         *   after all that processing will call a post-render method to\r\n         *   be implemented in each device to apply custom plugins\r\n         *   Returns a promise because the rendering could be asynchronous\r\n         */\r\n        render: function () {\r\n            bizagi.assert(false, \"An action can't be rendered because it has no view\");\r\n        },\r\n                    \r\n            \r\n        /*\r\n         *   To be overriden in each device to apply layouts\r\n         */\r\n        postRender: function(){ \r\n            bizagi.assert(false, \"An action can't be rendered because it has no view\");\r\n        },\r\n            \r\n        /*\r\n         *   Executes the action\r\n         *   Could return a deferred\r\n         */\r\n        execute: function(){\r\n            // Override in implementations\r\n        }\r\n});\r\n","/*\r\n *   Name: BizAgi Workportal Routing Action\r\n *   Author: Diego Parra && Edward Morales\r\n *   Comments:\r\n *   - This script will execute the routing action to determine what to do in the workportal\r\n *   - This class has been refactored based on jira story DRAGON-4943\r\n */\r\n\r\nbizagi.workportal.actions.action.extend(\"bizagi.workportal.actions.routing\", {}, {\r\n\r\n    /*\r\n    *   Executes the action\r\n    *   Could return a deferred\r\n    */\r\n    execute: function (params) {\r\n        var self = this;\r\n        self.params = params || {};\r\n        /* New implementation of routing*/\r\n\r\n        $.when(self.dataService.routing.getRoute(params)).done(function (route) {\r\n            var deferredDialogOpened =  $.Deferred();\r\n            route = route || {};\r\n\r\n            if (self.params.isOfflineForm != \"undefined\" && self.params.isOfflineForm == true) {\r\n                route.moduleParams = $.extend(route.moduleParams, { formsRenderVersion: self.params.formsRenderVersion, isOfflineForm: self.params.isOfflineForm, idCase: self.params.idCase, idWorkitem: self.params.idWorkitem, guid: self.params.guid }) || {};\r\n            }\r\n            else {\r\n                route.moduleParams = route.moduleParams || {};\r\n            }\r\n\r\n            switch (route.module) {\r\n\r\n                case bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_RENDER:\r\n                case bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_OLDRENDERINTEGRATION:\r\n                case bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ASYNC:\r\n                    self.publish(\"changeWidget\",route.moduleParams);\r\n                    self.publish(\"closeAllDialogs\");\r\n                    break;\r\n                case bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_PROJECT_DASHBOARD:\r\n\r\n                    /**\r\n                     * TODO: To improvement when enable workportal menu from live processes\r\n                     */\r\n                    bizagi.util.enableWorkPortalMenu();\r\n                    \r\n                    if(self.validateIfRouteShouldBeGoToInbox(\r\n                        bizagi.services.preferences().getPreference(\"goToInboxOnActivityExit\"),\r\n                        route.moduleParams.referrer,\r\n                        route.moduleParams.hasWorkItems\r\n                    )){\r\n                        self.goToInbox(route.moduleParams);\r\n                    }else{\r\n                        var data = $.extend(params, route.moduleParams);\r\n                        bizagi.util.setContext(data);\r\n                        self.publish(\"changeWidget\", route.moduleParams);\r\n                    }\r\n\r\n                    self.publish(\"closeAllDialogs\");\r\n                    break;\r\n\r\n                case bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_START_FORM:\r\n                    var parameters = {\r\n                        title: self.getResource(\"workportal-widget-newcase-title\"),\r\n                        width: 850,\r\n                        height: 750,\r\n                        refreshInbox: false,\r\n                        onClose: route.moduleParams.onClose,\r\n                        dialogOpened : deferredDialogOpened\r\n\r\n                    };\r\n                    self.publish(\"showDialogWidget\", {\r\n                        widgetName: route.module,\r\n                        data: route.moduleParams.data,\r\n                        modalParameters: parameters,\r\n                        closeVisible: false,\r\n                        dialogClass : \"ui-bizagi-start-form-dialog\"\r\n                    });\r\n\r\n                    deferredDialogOpened.promise().done(function(response) {\r\n                        self.publish(\"onWidgetIncludedInDOM\");\r\n                        response.widgetReference.postRender();\r\n                    });\r\n                    \r\n                    break;\r\n                case bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ROUTING:\r\n                    var parameters = {\r\n                        title: self.getResource(\"workportal-widget-routing-window-selector\"),\r\n                        width: 670,\r\n                        height: 450,\r\n                        refreshInbox: false,\r\n                        onClose: route.moduleParams.onClose\r\n                    };\r\n\r\n                    if (self.isThereAsync(route.moduleParams.data)) {\r\n                        self.asyncWidget(route.moduleParams);\r\n                    } else {\r\n                        self.publish(\"showDialogWidget\", {\r\n                            widgetName: route.module,\r\n                            data: route.moduleParams.data,\r\n                            modalParameters: parameters,\r\n                            onClose: parameters.onClose\r\n                        });\r\n                    }\r\n              \r\n                    break;\r\n            }\r\n\r\n        });\r\n    },\r\n    /*\r\n    * Go to inbox when an activity ends\r\n    */\r\n    goToInbox: function(routeModuleParams){\r\n        var self = this;\r\n        self.publish(\"changeWidget\", {\r\n            widgetName: self.workportalFacade.workportal.getWidgetByCookie(true)\r\n        });\r\n    \r\n        self.notifier = bizagi.injector.get(\"notifier\");\r\n\r\n        var messageWhenGoToInbox = routeModuleParams.messageForm ? routeModuleParams.messageForm : bizagi.localization.getResource(\"render-without-globalform\");\r\n        \r\n        self.notifier.showSucessMessage(messageWhenGoToInbox, \"\",\"\"); \r\n    },\r\n\r\n    validateIfRouteShouldBeGoToInbox: function(goToInboxPreference, widgetReferrer, hasWorkItems){\r\n        return goToInboxPreference &&\r\n            widgetReferrer === \"bizagi.workportal.widgets.project.activity\" &&\r\n            hasWorkItems === false;\r\n    },\r\n\r\n    /*\r\n    * Search for async workitems\r\n    */\r\n    isThereAsync: function (data) {\r\n        var workitems = data.workItems, wi, index = 0;\r\n        var length = workitems.length, result = false;\r\n        if (length > 0) {\r\n            for (; index < length;) {\r\n                wi = workitems[index++];\r\n                if (wi.isAsynch === \"true\") {\r\n                    result = result || [];\r\n                    result.push(wi);\r\n                }\r\n            }\r\n        }\r\n        return result;\r\n    },\r\n\r\n    asyncWidget: function (params) {\r\n        var self = this;\r\n        params.widgetName = \"async\";\r\n        self.publish(\"changeWidget\", params);\r\n    }\r\n});\r\n\r\n","/*\r\n*   Name: BizAgi Workportal Search Action\r\n*   Author: Edward Morales\r\n*   Comments:\r\n*   -   This script will execute the search action\r\n*/\r\n\r\nbizagi.workportal.actions.action.extend(\"bizagi.workportal.actions.search\", {}, {\r\n\r\n    /*\r\n    *   Executes the action\r\n    *   Could return a deferred\r\n    */\r\n    execute: function (params) {\r\n        var self = this;\r\n        // Set params reference\r\n        self.params = params;\r\n\r\n        // Referer parameters for render actions\r\n        var referrerParams = {\r\n            radNumber: $.trim(params.radNumber),\r\n            idWorkflow: \"\",\r\n            taskState: \"all\",\r\n            // Filter by favorites  only when we are searching all processes and favorites\r\n            onlyFavorites: false,\r\n            // Sort and order parameters\r\n            order: params.order || \"\",\r\n            orderFieldName: params.orderFieldName || \"\",\r\n            orderType: params.orderType || \"0\",\r\n            page: params.page || 1,\r\n\t\t\tgroup: (bizagiConfig.groupByCaseNumber)?\"T_RADNUMBER\":null\r\n        };\r\n\r\n        // Loads case workitems\r\n        $.when(\r\n        //self.dataService.searchCases(referrerParams)\r\n\t\t\tself.dataService.getCustomizedColumnsData(referrerParams)\r\n\t\t\t)\r\n\t\t.done(function (data) {\r\n\t\t    bizagi.lstIdCases = data.cases.lstIdCases;\r\n\t\t    //  Hack json data :(\r\n\t\t    var i = 0;\r\n\t\t    $(data.cases.columnTitle).each(function (key, value) {\r\n\t\t        value[\"radNumber\"] = $.trim(params.radNumber);\r\n\t\t        if (value.order == \"T_idTask\") {\r\n\t\t            $(data.cases.rows).each(function (key2, value2) {\r\n\t\t                if (!self.isArray(value2[\"fields\"][i])) {\r\n\t\t                    data[\"cases\"][\"rows\"][key2][\"fields\"][i] = {\r\n\t\t                        \"workitems\": [{\r\n\t\t                            \"TaskName\": value2[\"fields\"][i],\r\n\t\t                            \"State\": data[\"cases\"][\"rows\"][key2][\"taskState\"]\r\n\t\t                        }]\r\n\t\t                    };\r\n\t\t                }\r\n\t\t            });\r\n\t\t        }\r\n\t\t        i++;\r\n\t\t    });\r\n\t\t    // Define radnumber for render actions bottons \r\n\t\t    bizagi.referrerParams = bizagi.referrerParams || {};\r\n\t\t    bizagi.referrerParams.radNumber = params.radNumber;\r\n\t\t    bizagi.referrerParams.page = params.page || 1;\r\n\t\t    data.IsFavorite = false;\r\n\t\t    data.IsOpen = false;\r\n\t\t    bizagi.referrerParams.referrer = bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_SEARCH;\r\n\t\t    //bizagi.referrerParams.referrer = bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INBOX_GRID;\r\n\t\t    // one result\r\n\t\t    if (data.cases.lstIdCases.length == 0) {\r\n\t\t        //show no results found\r\n\t\t        self.showNoResults(referrerParams);\r\n\t\t    } else if (data.cases.rows.length == 1) {\r\n\r\n\t\t        self.showSearch(data, params);\r\n\r\n\r\n\t\t    } else if (data.cases.rows.length >= 1) {\r\n\t\t        self.showSearch(data, referrerParams);\r\n\t\t    }\r\n\t\t});\r\n    },\r\n\r\n    /*\r\n    *   Shows search results\r\n    */\r\n    showSearch: function (data, parameters) {\r\n        var self = this;\r\n        // Shows a dialog widget\r\n        bizagi.referrerParams.requestGlobalForm = true;\r\n\r\n        // define params to back button\r\n        bizagi.referrerParams.referrerBackButton = bizagi.referrerParams.referrerBackButton || bizagi.context.widget || bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INBOX_GRID;\r\n\r\n        self.publish(\"changeWidget\", {\r\n            widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_SEARCH,\r\n            data: data,\r\n            referrerParams: parameters\r\n        }).done(function(){\r\n            // Hide the container pagination:\r\n            if(bizagi.util.isEmpty($(\"#footer #casesPagination\").html().trim())){\r\n                $(\"#footer #casesPagination\").hide();\r\n            }\r\n            \r\n        });\r\n\r\n        if (bizagi.util.isTabletDevice()) {\r\n            $(\"#menu-items #search\").trigger(\"closePopUp\");\r\n        }\r\n        \r\n        // Simulate a click on the button after a successful search\r\n        //  $('#menu-toggler').trigger('click');\r\n    },\r\n\r\n    showNoResults: function (referrerParams) {\r\n        var self = this;\r\n        var originarlColor = $(\"#menuQuery\").css(\"color\");\r\n\r\n        $(\"#menuQuery\").css(\"color\", \"#f88f88\");\r\n        setTimeout(function () {\r\n            $(\"#menuQuery\").css(\"color\", originarlColor);\r\n        }, 5000);\r\n\r\n        if (bizagi.detectDevice() == \"smartphone_ios\" || bizagi.detectDevice() == \"smartphone_android\") {\r\n            self.showSearch({ \"noresults\": referrerParams.radNumber }, referrerParams);\r\n        }\r\n\r\n    },\r\n\r\n    /*\r\n    *   Show process\r\n    */\r\n    redirectToProcess: function (idCase) {\r\n        var self = this;\r\n        // Executes routing action\r\n        self.publish(\"executeAction\", {\r\n            action: bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING,\r\n            idCase: idCase,\r\n            onlyUserWorkItems: \"false\"\r\n        });\r\n    },\r\n    /*\r\n    *   Misc method to format cell values\r\n    */\r\n    formatRequest: function (value) {\r\n        return value;\r\n    },\r\n    /**\r\n    * Misc method to render categories\r\n    */\r\n    formatCategories: function (value) {\r\n        return value;\r\n    },\r\n    isArray: function (value) {\r\n        if (typeof (value) == 'object') {\r\n            return true;\r\n        } else {\r\n            return false;\r\n        }\r\n    },\r\n    isDate: function (value) {\r\n        value = value || '';\r\n        var state = false;\r\n        var slash = (typeof value == 'string') ? value.split(\"/\") : '';\r\n        try {\r\n            // Check format int/int/int\r\n            if (slash.length == 3) {\r\n                var date = new Date(value);\r\n                if (date.getYear() > 0) {\r\n                    state = true;\r\n                }\r\n            }\r\n        } catch (e) {\r\n            state = false;\r\n        }\r\n\r\n        return state;\r\n    }\r\n});\r\n","\r\n/*\r\n*   Name: BizAgi Workportal Widget Controller\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will define a base class to all widgets\r\n*/\r\n\r\nbizagi.workportal.controllers.controller.extend(\"bizagi.workportal.widgets.widget\", {\r\n    BIZAGI_WORKPORTAL_WIDGET_INTEGRATION: \"widgetIntegration\",\r\n    BIZAGI_WORKPORTAL_WIDGET_WEBPART: \"webpart\",\r\n    BIZAGI_WORKPORTAL_WIDGET_INBOX: \"inbox\",\r\n    BIZAGI_WORKPORTAL_WIDGET_ADVANCE_SEARCH: \"advanceSearch\",\r\n    BIZAGI_WORKPORTAL_WIDGET_HOMEPORTAL: \"homeportal\",\r\n    BIZAGI_WORKPORTAL_WIDGET_ACTIVITY: \"project.activity\",\r\n    BIZAGI_WORKPORTAL_WIDGET_PROJECT_DASHBOARD: \"projectDashboard\",\r\n    BIZAGI_WORKPORTAL_WIDGET_INBOX_GRID: \"inboxGrid\",\r\n    BIZAGI_WORKPORTAL_WIDGET_ROUTING: \"routing\",\r\n    BIZAGI_WORKPORTAL_WIDGET_SEARCH: \"search\",\r\n    BIZAGI_WORKPORTAL_WIDGET_RENDER: \"activityform\",\r\n    BIZAGI_WORKPORTAL_WIDGET_START_FORM: \"startForm\",\r\n    BIZAGI_WORKPORTAL_WIDGET_RENDERFORM: \"renderform\",\r\n    BIZAGI_WORKPORTAL_WIDGET_NEWCASE: \"newCase\",\r\n    BIZAGI_WORKPORTAL_WIDGET_QUERIES: \"queries\",\r\n    BIZAGI_WORKPORTAL_WIDGET_QUERIES_DEFINITION: \"queriesDefinition\",\r\n    BIZAGI_WORKPORTAL_WIDGET_QUERIES_SHORTCUT: \"queriesShortcut\",\r\n    BIZAGI_WORKPORTAL_WIDGET_QUERYFORM: \"queryform\",\r\n    BIZAGI_WORKPORTAL_WIDGET_LISTCASES: \"listCases\",\r\n    BIZAGI_WORKPORTAL_WIDGET_ASYNC: \"async\",\r\n    BIZAGI_WORKPORTAL_WIDGET_GENERICIFRAME: \"genericiframe\",\r\n    BIZAGI_WORKPORTAL_WIDGET_SUBMENU: \"subMenu\",\r\n    BIZAGI_WORKPORTAL_WIDGET_PRINT: \"print\",\r\n    BIZAGI_WORKPORTAL_WIDGET_FONTSIZE: \"fontsize\",\r\n    BIZAGI_WORKPORTAL_WIDGET_OLDRENDERINTEGRATION: \"oldrenderintegration\",\r\n    BIZAGI_WORKPORTAL_WIDGET_PAGE: \"page\",\r\n    BIZAGI_WORKPORTAL_WIDGET_ENTITIES: \"entities\",\r\n    BIZAGI_WORKPORTAL_WIDGET_REPORTS: \"reports\",\r\n    BIZAGI_WORKPORTAL_WIDGET_REPORTS_MENU: \"reportsMenu\",\r\n    BIZAGI_WORKPORTAL_WIDGET_REPORTS_CHART: \"reportsChart\",\r\n    BIZAGI_WORKPORTAL_WIDGET_SMARTFOLDERS: \"smartfolders\",\r\n    BIZAGI_WORKPORTAL_WIDGET_ADMIN_CASES: \"adminReassignCases\",\r\n    BIZAGI_WORKPORTAL_WIDGET_REASSIGN_CASE: \"reassignCase\",\r\n    BIZAGI_WORKPORTAL_WIDGET_ASYNCECM_UPLOAD: \"asyncECMUpload\",\r\n    BIZAGI_WORKPORTAL_WIDGET_PROCESS_TREE: \"processTree\",\r\n    BIZAGI_WORKPORTAL_WIDGET_ENTITIES_TREE: \"entitiesTree\",\r\n    BIZAGI_WORKPORTAL_WIDGET_USERS_TABLE: \"usersTable\",\r\n    BIZAGI_WORKPORTAL_WIDGET_ACTIVITY_LOG: \"activityLog\",\r\n    BIZAGI_WORKPORTAL_WIDGET_AUTHENTICATION_LOG: \"authenticationLog\",\r\n    BIZAGI_WORKPORTAL_WIDGET_ADMIN_ENTITIES: \"entityAdmin\",\r\n    BIZAGI_WORKPORTAL_WIDGET_ADMIN_ENCRYPT_PASSWORDS: \"encryptPasswords\",\r\n    BIZAGI_WORKPORTAL_WIDGET_ADMIN_USERS_REQUESTS: \"userPendingRequests\",\r\n    BIZAGI_WORKPORTAL_WIDGET_ADMIN_CASE_SEARCH: \"adminCaseSearch\",\r\n    BIZAGI_WORKPORTAL_WIDGET_ADMIN_ASYNC_ACTIVITIES: \"asyncActivities\",\r\n    BIZAGI_WORKPORTAL_WIDGET_ADMIN_DEFAULTS_ASSIGNATION_USER: \"defaultsAssignUser\",\r\n    BIZAGI_WORKPORTAL_WIDGET_ADMIN_TRANSFER_CASE_SECURITY_PERMISSIONS: \"transferCaseSecurityPermissions\",\r\n    BIZAGI_WORKPORTAL_WIDGET_ADMIN_USER_PROFILES: \"userProfiles\",\r\n    BIZAGI_WORKPORTAL_WIDGET_ADMIN_ALARMS: \"adminAlarms\",\r\n    BIZAGI_WORKPORTAL_WIDGET_ADMIN_USER_LICENSES: \"userlicenses\",\r\n    BIZAGI_WORKPORTAL_WIDGET_ADMIN_DIMENSIONS: \"dimensions\",\r\n    BIZAGI_WORKPORTAL_WIDGET_ADMIN_DOCUMENT_TEMPLATES: \"documentTemplates\",\r\n    BIZAGI_WORKPORTAL_WIDGET_ADMIN_PROCESSES: \"processes\",\r\n    BIZAGI_WORKPORTAL_WIDGET_START_PROCESS: \"startProcess\",\r\n    BIZAGI_WORKPORTAL_WIDGET_ADMIN_BUSINESS_POLICIES: \"businessPolicies\",\r\n    BIZAGI_WORKPORTAL_WIDGET_ADMIN_LANGUAGE: \"languageAdmin\",\r\n    BIZAGI_WORKPORTAL_WIDGET_ADMIN_BUSINESS_POLICIES_DECISION_TABLE: \"businessPoliciesDecisionTable\",\r\n    BIZAGI_WORKPORTAL_WIDGET_ADMIN_BUSINESS_POLICIES_POLITICS: \"businessPoliciesPolitics\",\r\n    BIZAGI_WORKPORTAL_WIDGET_ADMIN_BUSINESS_POLICIES_RULES: \"businessPoliciesRules\",\r\n    BIZAGI_WORKPORTAL_WIDGET_ADMIN_BUSINESS_POLICIES_TABS: \"businessPoliciesTabs\",\r\n    BIZAGI_WORKPORTAL_WIDGET_ADMIN_BUSINESS_POLICIES_VOCABULARIES: \"businessPoliciesVocabularies\",\r\n    BIZAGI_WORKPORTAL_WIDGET_ADMIN_PREFERENCES: \"adminPreferences\",\r\n    BIZAGI_WORKPORTAL_WIDGET_ADMIN_DISPLAY_OPTIONS: \"adminDisplayOptions\",\r\n    BIZAGI_WORKPORTAL_WIDGET_TREE: \"tree\",\r\n    BIZAGI_WORKPORTAL_WIDGET_GRAPHIC_QUERY: \"graphicquery\",\r\n    BIZAGI_WORKPORTAL_WIDGET_PROCESS_MODELER_VIEW: \"processModeler\",\r\n    BIZAGI_WORKPORTAL_WIDGET_ADMIN_USERS_ADMINISTRATION: \"adminUsers\",\r\n    BIZAGI_WORKPORTAL_WIDGET_ADMIN_USERS_DELEGATION: \"usersDelegation\",\r\n    BIZAGI_WORKPORTAL_WIDGET_ADMIN_USERS_DELEGATION_SEARCH_USER: \"usersDelegationSearchUser\",\r\n    BIZAGI_WORKPORTAL_WIDGET_ADMIN_STAKEHOLDERS: \"adminStakeholders\",\r\n    BIZAGI_WORKPORTAL_WIDGET_BIZAGI_EVENTS: \"events\",\r\n    BIZAGI_WORKPORTAL_WIDGET_BIZAGI_RELEASE: \"release\",\r\n    BIZAGI_WORKPORTAL_WIDGET_PROJECT_PROCESS_DIAGRAM_HELPER: \"processDiagramHelper\",\r\n    BIZAGI_WORKPORTAL_WIDGET_PROJECT_ACTIVITY_MAP_TOOLTIP: \"activityMapTooltip\",\r\n    BIZAGI_WORKPORTAL_WIDGET_PROJECT_USERSUMMARY: \"usersummary\",\r\n    BIZAGI_WORKPORTAL_WIDGET_MYSEARCHLIST: \"mySearchList\",\r\n    BIZAGI_WORKPORTAL_WIDGET_LOADFORM: \"loadForm\",\r\n    BIZAGI_WORKPORTAL_WIDGET_TEMPLATE_ENGINE: \"templates\",\r\n    BIZAGI_WORKPORTAL_WIDGET_DIALOGNAV: \"dialognav\",\r\n    BIZAGI_WORKPORTAL_WIDGET_ADMIN_HOLIDAYS: \"holidays\",\r\n    BIZAGI_WORKPORTAL_WIDGET_ADMIN_PROJECTNAME: \"projectName\",\r\n    BIZAGI_WORKPORTAL_WIDGET_ADMIN_OAUTH2APPLICATIONS: \"oauth2Applications\",\r\n    BIZAGI_WORKPORTAL_WIDGET_ADMIN_ADHOC_PROCESSES: \"adhocProcesses\",\r\n    BIZAGI_WORKPORTAL_WIDGET_TIMELINE: \"timeline\",\r\n    BIZAGI_WORKPORTAL_WIDGET_ADHOC_PROCESS_MODELER: \"adhocProcessModeler\",\r\n    BIZAGI_WORKPORTAL_WIDGET_ADMIN_ADHOC_ENTITIES: \"adhocEntities\",\r\n    BIZAGI_WORKPORTAL_WIDGET_ADMIN_ADHOC_USER_GROUPS: \"adhocUserGroups\",\r\n    BIZAGI_WORKPORTAL_WIDGET_ADMIN_ADHOC_CREATE_PROCESS: \"adhocCreateProcess\",\r\n    BIZAGI_WORKPORTAL_WIDGET_ADMIN_ADHOC_BOOLEAN_EXP: \"adhocBooleanExp\",\r\n    BIZAGI_WORKPORTAL_WIDGET_ADHOC_CREATE_PROCESS: \"adhocCreateProcess\",\r\n    BIZAGI_WORKPORTAL_WIDGET_PROFLY: \"adhocprofly\",\r\n    BIZAGI_WORKPORTAL_WIDGET_SESSION_TIMEOUT: \"sessionTimeOut\",\r\n    BIZAGI_WORKPORTAL_WIDGET_SESSION_TIMEOUT_EXPIRED: \"sessionTimeOutExpired\",\r\n    BIZAGI_WORKPORTAL_WIDGET_USER_PRIVACY: \"userPrivacy\",\r\n    BIZAGI_WORKPORTAL_WIDGET_ACCESS_DENIED: \"accessDenied\",\r\n    BIZAGI_WORKPORTAL_WIDGET_ADMIN_BUSINESS_POLICES: \"adminBusinessPolices\",\r\n    BIZAGI_WORKPORTAL_WIDGET_USERS_MODAL: \"usersModal\",\r\n    BIZAGI_WORKPORTAL_WIDGET_QUERIES_MANAGEMENT: \"queriesManagement\",\r\n    BIZAGI_WORKPORTAL_WIDGET_ADMIN_USER_PERMISSION_REPORT: \"userPermissionReport\"\r\n}, {\r\n\r\n    /*\r\n    *   Constructor\r\n    */\r\n    init: function (workportalFacade, dataService, params) {\r\n        // Call base\r\n        this._super(workportalFacade, dataService);\r\n\r\n        // Set params\r\n        this.params = params;\r\n        if (params && params.menu) {\r\n            this.menu = params.menu;\r\n        }\r\n\r\n        this.observableElement = $({});\r\n\r\n        this.widgetReadyDeferred = new $.Deferred();\r\n\r\n        this.isBlocked = false;\r\n    },\r\n\r\n    /*\r\n    *   Publish an event so any controller can subscribe to it\r\n    */\r\n    publish: function (eventName, params) {\r\n        if (this.disposed) return null;\r\n        // Overrides base method to add referrer\r\n        $(document).triggerHandler(eventName, $.extend(params, {\r\n            referrer: this.getWidgetName()\r\n        }));\r\n    },\r\n\r\n\r\n    /*\r\n    *   Change the current widget\r\n    */\r\n    changeWidget: function (widgetName, params) {\r\n        var self = this;\r\n        params = params || {};\r\n        var widgetParams = $.extend(params, {\r\n            widgetName: widgetName\r\n        });\r\n        self.publish(\"changeWidget\", widgetParams);\r\n    },\r\n\r\n    /*\r\n    *   Executes a workportal action\r\n    */\r\n    executeAction: function (actionName, params) {\r\n        var self = this;\r\n        params = params || {};\r\n        var actionParams = $.extend(params, {\r\n            action: actionName\r\n        });\r\n        self.publish(\"executeAction\", actionParams);\r\n    },\r\n\r\n    /*\r\n    * Show graphic query\r\n    */\r\n    showGraphicQuery: function (data) {\r\n        var self = this;\r\n        /*This method is used for validate if the request is referd to process on the fly */\r\n        var processOnTheFly = data.isAdhoc;\r\n        if(processOnTheFly === true){\r\n            bizagi.loader.start(\"processmodelerview\").then(function () {\r\n                self.publish(\"showDialogWidget\", {\r\n                    widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_PROCESS_MODELER_VIEW,\r\n                    data: data,\r\n                    modalParameters: {\r\n                        title: \"Process viewer\",\r\n                        refreshInbox: false\r\n                    },\r\n                    maximizeOnly: true,\r\n                    onClose: function () {\r\n                        bizagi.workportal.desktop.dialogStack.pop();\r\n                    }\r\n                });\r\n            });\r\n        }\r\n        else{\r\n            bizagi.loader.start(\"processviewer\").then(function () {\r\n                self.publish(\"showDialogWidget\", {\r\n                    widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_GRAPHIC_QUERY,\r\n                    data: data,\r\n                    modalParameters: {\r\n                        title: self.getResource(\"render-graphic-query\"),\r\n                        refreshInbox: false\r\n                    },\r\n                    maximizeOnly: true,\r\n                    onClose: function () {\r\n                        bizagi.workportal.desktop.dialogStack.pop();\r\n                    }\r\n                });\r\n            });\r\n        }\r\n    },\r\n\r\n    isProcessOnTheFlyCase: function () {\r\n        return true;\r\n    },\r\n\r\n    showTimeLine: function (data) {\r\n        var self = this;\r\n        bizagi.loader.startAndThen(\"timeline\").then(function () {\r\n            self.publish(\"showDialogWidget\", {\r\n                widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_TIMELINE,\r\n                data: data,\r\n                modalParameters: {\r\n                    title: self.getResource(\"workportal-project-casedashboard-timeline\"),\r\n                    refreshInbox: false\r\n                },\r\n                maximizeOnly: true,\r\n                onClose: function () {\r\n                    bizagi.workportal.desktop.dialogStack.pop();\r\n                }\r\n            });\r\n        });\r\n    },\r\n\r\n    /**\r\n     * open modal for selec an user\r\n     * @param {Deffered} def \r\n     */\r\n    showSelectUser: function (def) {\r\n        var self = this;\r\n        bizagi.loader.startAndThen(\"admin\").then(function () {\r\n            self.publish(\"showDialogWidget\", {\r\n                widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_USERS_TABLE,\r\n                data: {},\r\n                closeVisible: false,\r\n                maximize: true,\r\n                modalParameters: {\r\n                    title: bizagi.localization.getResource(\"workportal-widget-usertable-search-user\"),\r\n                    width: \"930px\",\r\n                    id: \"SelectUser\"\r\n                },\r\n                userLinkLabel: [bizagi.localization.getResource(\"workportal-widget-admin-defaults-assignation-select-link\")],\r\n                parentDef: def,\r\n                showBackButton: false,\r\n                onClose: function() {\r\n                    def.reject();\r\n                }\r\n            });\r\n    \r\n            $.when(def).done(function (userId, userName, guid) {\r\n                self.publish(\"closeCurrentDialog\");\r\n            });\r\n        });\r\n    },\r\n\r\n    routingExecute: function (element) {\r\n        // Executes routing action\r\n        if (element == undefined) {\r\n            return false;\r\n        }\r\n\r\n        var self = this;\r\n\r\n        var idCase = element.find(\"#idCase\").val() || self.params.idCase;\r\n        var idWorkflow = element.find(\"#idWorkflow\").val() || self.params.idWorkflow;\r\n        var idWorkItem = element.find(\"#idWorkItem\").val() || element.parent().find(\"#idWorkItem\").val();\r\n        var idTask = element.find(\"#idTask\").val();\r\n        var eventAsTasks = element.find(\"#eventAsTasks\").val() || false;\r\n\r\n        self.publish(\"executeAction\", {\r\n            action: bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING,\r\n            idCase: idCase,\r\n            idWorkflow: idWorkflow,\r\n            idWorkItem: idWorkItem,\r\n            idTask: idTask,\r\n            eventAsTasks: eventAsTasks\r\n        });\r\n\r\n        return true;\r\n    },\r\n\r\n\r\n    /*\r\n    * Gets the name of widget, Override on implementations\r\n     */\r\n    getWidgetName: function(){\r\n        return this.Class.fullName;\r\n    },\r\n\r\n\r\n    /*\r\n    *\r\n    */\r\n    sub: function (event) {\r\n        // Gets events registered\r\n        //var events = $._data(this.observableElement[0], \"events\");\r\n        // If the events exist, ignore it\r\n        //if (!events || !events[event]) {\r\n        this.observableElement.off.apply(this.observableElement, arguments);\r\n        this.observableElement.on.apply(this.observableElement, arguments);\r\n        //}\r\n    },\r\n\r\n    /*\r\n    *\r\n    */\r\n    unsub: function () {\r\n        this.observableElement.off.apply(this.observableElement, arguments);\r\n    },\r\n\r\n    /*\r\n    *\r\n    */\r\n    pub: function () {\r\n        return this.observableElement.triggerHandler.apply(this.observableElement, arguments);\r\n    },\r\n\r\n    /**\r\n     * This method must be used when i need to wait to all observers has been resolved\r\n     */\r\n    pubDeadLockDetection: function () {\r\n        var def = new $.Deferred();\r\n        if (!self.isBlocked) {\r\n            self.isBlocked = true;\r\n            var pubDef = this.pub.apply(this, arguments);\r\n            var queueDef = Array.isArray(pubDef) ? pubDef : [pubDef];\r\n            $.when.apply($, queueDef).done(function (data) {\r\n                self.isBlocked = false;\r\n                def.resolve();\r\n            });\r\n        } else {\r\n            def.reject()\r\n        }\r\n        return def.promise();\r\n    },\r\n\r\n    /*\r\n    * Clean the widget, removing events asociated with it.\r\n    */\r\n    clean: function(){\r\n        var self = this;\r\n\r\n        //remove events\r\n        if (this.observableElement) {\r\n            var events = $._data(this.observableElement[0], \"events\");\r\n\r\n            if (events) {\r\n                for (var event in events) {\r\n                    if (event != \"notify\" &&\r\n                         event != 'showDialogWidget' &&\r\n                         event != 'showNotification') {\r\n                        self.unsub(event);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    },\r\n\r\n    isReady: function(){\r\n        return this.widgetReadyDeferred.promise();\r\n    },\r\n\r\n    setWidgetReady: function(){\r\n        this.widgetReadyDeferred.resolve();\r\n    }\r\n\r\n});\r\n","\r\n/*\r\n*   Name: BizAgi Workportal Webpart Widget Controller\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will define a wrapper class to to load custom webparts\r\n*/\r\n\r\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.webpart\", {}, {\r\n    /*\r\n    *   Returns the widget name\r\n    */\r\n    getWidgetName: function () {\r\n        return bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_WEBPART;\r\n    },\r\n\r\n\r\n    /*\r\n    *   Constructor\r\n    */\r\n    init: function (workportalFacade, dataService, params) {\r\n        // Call base\r\n        this._super(workportalFacade, dataService, params);\r\n\r\n        // Set webpart \r\n        this.webpartName = params.webpart;\r\n    },\r\n\r\n    /*\r\n    *   Renders the content for the current controller\r\n    *   Returns a deferred because it has to load the current user\r\n    */\r\n    renderContent: function () {\r\n        var self = this;\r\n        var content = self.content = $(\"<div />\");\r\n        var workportal = self.getWorkportal();\r\n\r\n        // Execute webpart\r\n        workportal.executeWebpart($.extend(self.params,{\r\n            canvas: content,\r\n            webpart: self.webpartName\r\n        }));\r\n\r\n        return content;\r\n    }\r\n});","/*\r\n *   Name: BizAgi Workportal Print Version Widget Controller\r\n *   Author: Edward Morales\r\n *   Comments:\r\n *   -   This script will define a base class to to define the print version widget\r\n *       the rendering module is loaded here\r\n */\r\n\r\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.print\", {}, {\r\n    /*\r\n    *   Returns the widget name\r\n    */\r\n    getWidgetName: function(){  \r\n        return bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_PRINT;\r\n    },\r\n\r\n    /*\r\n    *   Renders the content for the current controller\r\n    *   Returns a deferred because it has to load the current user\r\n    */\r\n    renderContent: function () {\r\n        var self = this;\r\n        var template = self.getTemplate(\"print\");\r\n\r\n        var content = self.content = $.tmpl(template);\r\n\r\n        return content;\r\n    }   \r\n});\r\n","\r\n/*\n*   Name: BizAgi Workportal Search Controller\n*   Author: Jair Cardenas\n*   Comments:\n*   -   Base library for fontsize \n*/\n\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.fontsize\", {}, {\n    /*\n    *   Returns the widget name\n    */\n    getWidgetName: function(){  \n        return bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_FONTSIZE;\n    },\n\n    /*\n    *   Renders the content for the current controller\n    *   Returns a deferred because it has to load the current user\n    */\n    renderContent: function () {\n        var self = this;\n        var template = self.getTemplate(\"fontsize\");\n\n        var content = self.content = $.tmpl(template);\n\n        return content;\n    }\n});\n","/*\r\n*   Name: BizAgi Workportal Routing Widget Controller\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will define a base class to to define the routing widget\r\n*/\r\n\r\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.routing\", {}, {\r\n\r\n    init: function (workportalFacade, dataService, params) {\r\n        var self = this;\r\n\r\n        // Call base\r\n        self._super(workportalFacade, dataService, params);\r\n    },\r\n    /*\r\n    *   Returns the widget name\r\n    */\r\n    getWidgetName: function(){  \r\n        return bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ROUTING;\r\n    },\r\n    \r\n    /*\r\n    *   Renders the content for the current controller\r\n    *   Returns a deferred because it has to load the current user\r\n    */\r\n    renderContent: function () {\r\n        var self = this;\r\n        var template = self.getTemplate(\"routing\");\r\n        var def = new $.Deferred();\r\n        //check subprocess\r\n        if(self.params.data.checkProcess || self.params.data.checkWorkItems){\r\n            $.when(\r\n                self.dataService.getCaseSubprocesses({\r\n                    idCase: self.params.data.idCase\r\n                })            \r\n            ).done(function(process){\r\n                self.params.data.subProcessPersonalized = process[\"subProcesses\"];                        \r\n\r\n                //Validate in workitems have property idtask. Scenario when workitem is activity from plan\r\n                self.params.data.workItems.forEach(function(workitem){\r\n                    if(!workitem.idTask){\r\n                        workitem.idTask = \"\";\r\n                    }\r\n                });\r\n\r\n                // Loads case workitems\r\n                // Solve QA-2197\r\n                var content = self.content = $.tmpl(\r\n                        template,\r\n                        self.params.data,\r\n                        {\r\n                            formatDate: self.formatDate\r\n                        }\r\n                );\r\n                def.resolve(content);\r\n                \r\n            });\r\n        }\r\n        return def.promise();\r\n    },\r\n\r\n    formatDate: function(item){\r\n        return bizagi.util.formatDateFromInvariantStringDate(item.estimatedSolutionDate);\r\n    }\r\n});\r\n","/*\r\n*   Name: BizAgi Workportal Render Widget Controller\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will define a base class to to define the render widget\r\n*       the rendering module is loaded here\r\n*/\r\n\r\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.render\", {}, {\r\n\r\n    /*\r\n    *   Returns the widget name\r\n    */\r\n    getWidgetName: function () {\r\n        return bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_RENDER;\r\n    },\r\n\r\n    /*\r\n    *   Constructor\r\n    */\r\n    init: function(workportalFacade, dataService, params) {\r\n        var self = this;\r\n\r\n        // Check if the required params are filled\r\n        if (bizagi.util.isEmpty(params.idCase)) {\r\n\r\n            if (!bizagi.util.isEmpty(window.location.hash)) {\r\n                // Check in the hash\r\n                var hashParams = bizagi.util.getHashParams();\r\n\r\n                // Set the first hash param as the idCase\r\n                if (hashParams.length > 1) {\r\n                    params.idCase = hashParams[1];\r\n                    self.isConfiguredFromHash = true;\r\n                }\r\n\r\n                // Set the second hash param as the idWorkitem\r\n                if (hashParams.length > 2) {\r\n                    params.idWorkitem = hashParams[2];\r\n                }\r\n            } else if (!bizagi.util.isEmpty(window.location.search)) {\r\n                var queryString = bizagi.util.getQueryString();\r\n\r\n                // Set idCase param from query string\r\n                if (queryString[\"idCase\"]) {\r\n                    params.idCase = queryString[\"idCase\"];\r\n                    self.isConfiguredFromHash = true;\r\n                }\r\n                else\r\n                    // Set guid param from query string\r\n                    if (queryString[\"guid\"]) {\r\n                        params.guid = queryString[\"guid\"];\r\n                        self.isConfiguredFromHash = true;\r\n                    }\r\n                // Set idWorkitem param from query string\r\n                if (queryString[\"idWorkitem\"]) {\r\n                    params.idWorkitem = queryString[\"idWorkitem\"];\r\n                }\r\n            }\r\n        }\r\n\r\n        // Call base\r\n        self._super(workportalFacade, dataService, params);                \r\n    },\r\n\r\n    /*\r\n    *   Renders the content for the current controller\r\n    *   Returns a deferred because it has to load the current user\r\n    */\r\n    renderContent: function () {\r\n        var self = this;\r\n        var template = self.getTemplate(\"render\");\r\n        var summaryDeferred = new $.Deferred();\r\n        var details = {};\r\n        // Check if the required params are filled\r\n        if (bizagi.util.isEmpty(self.params.idCase) && bizagi.util.isEmpty(self.params.guid)) {\r\n            self.changeWidget(bizagi.workportal.currentInboxView);\r\n            return null;\r\n        }\r\n        details = (self.params.idCase) ?\r\n        {\r\n            idCase: self.params.idCase,\r\n            eventAsTasks: self.params.eventAsTasks,\r\n            onlyUserWorkItems: self.params.onlyUserWorkItems,\r\n            idWorkitem: self.params.idWorkitem,\r\n            isOfflineForm: self.params.isOfflineForm || false\r\n        } :\r\n        {\r\n            guid: self.params.guid,\r\n            eventAsTasks: self.params.eventAsTasks,\r\n            onlyUserWorkItems: self.params.onlyUserWorkItems,\r\n            idWorkitem: self.params.idWorkitem,\r\n            isOfflineForm: self.params.isOfflineForm || false\r\n        }\r\n        // Check if the required params are filled\r\n        if (bizagi.util.isEmpty(self.params.idWorkitem) && self.isConfiguredFromHash) {\r\n            if (!bizagi.util.isEmpty(self.params.idCase)) self.executeAction(bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING, { idCase: self.params.idCase });\r\n            else if (!bizagi.util.isEmpty(self.params.guid)) self.executeAction(bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING, { guid: self.params.guid });\r\n            return null;\r\n        }\r\n\r\n        // Render base template\r\n        self.content = $.tmpl(template);\r\n\r\n        // Render Form Tab\r\n        $.when(\r\n                self.dataService.summaryCaseDetails(details)).done(function (data) {\r\n\r\n                    // Define global context into the comments section\r\n                    // they need know global context to eval if stop interval\r\n                    // or keep running, bizagi.util.setInterval\r\n                    bizagi.util.setContext({\r\n                        idCase: data.idCase || null,\r\n                        caseNumber: data.caseNumber || null,\r\n                        widget: self.getWidgetName(),\r\n                        idWorkitem: self.params.idWorkitem || null,\r\n                        idTask: self.params.idTask || null,\r\n                        isOfflineForm: self.params.isOfflineForm || false\r\n                    });\r\n                    data[\"params\"] = self.params;\r\n                    //check if show event tab or not\r\n                    if (data[\"countEvents\"] >= 1) {\r\n                        for (var i = 0; i < data[\"currentState\"].length; i++) {\r\n                            if (data[\"currentState\"][i][\"isEvent\"] == \"true\" && data[\"currentState\"][i][\"idWorkItem\"] == data.params.idWorkitem) {\r\n                                data[\"countEvents\"] = data[\"countEvents\"] - 1;\r\n                            }\r\n                        }\r\n                    }\r\n                    data[\"showEvents\"] = (data[\"countEvents\"] >= 1) ? true : false;\r\n\r\n                    //check if the activity can be released\r\n                    var releaseCurrentActivity = $.grep(data.currentState, function (activity) {\r\n                        return (activity.idWorkItem === data.params.idWorkitem) && (activity.allowReleaseActivity);\r\n                    });\r\n                    data[\"allowReleaseActivity\"] = releaseCurrentActivity.length === 1 ? releaseCurrentActivity[0].allowReleaseActivity : false;\r\n\r\n                    summaryDeferred.resolve(self.renderSummary(data));\r\n                });\r\n\r\n\r\n        // Check if the content is already in dom\r\n        var includedInDom = self.content.parents(\"body\").length > 0;\r\n        if (includedInDom) {\r\n            self.renderForm();\r\n        } else {\r\n            // Wait until the dom is ready to execute the rendering, because some controls need references to full DOM\r\n            // (grids and uploads)\r\n            self.subscribeOneTime(\"onWidgetIncludedInDOM\", function () {\r\n\r\n                // Load render page\r\n                self.renderForm({\r\n                    idCase: self.params.idCase,\r\n                    idWorkitem: self.params.idWorkitem,\r\n                    idTask: self.params.idTask,\r\n                    radNumber: self.params.radNumber,\r\n                    withOutGlobalForm: self.params.withOutGlobalForm || false,\r\n                    isOfflineForm: self.params.isOfflineForm || false,\r\n                    messageForm: self.params.messageForm || \"\"\r\n                });\r\n            });\r\n        }\r\n\r\n        // Synchronize deferreds to resolve method\r\n        return summaryDeferred.promise();\r\n    },\r\n\r\n    /*\r\n    *   Renders the summary component of the widget\r\n    */\r\n    renderSummary: function (data) {\r\n        var self = this;\r\n        var content = self.getContent();\r\n        var cache = {};\r\n        var htmlContent = \"\";\r\n        var security = new bizagi.workportal.command.security(self.dataService);\r\n\r\n        data.showComments = true;\r\n        \r\n        $.when(security.checkSecurityPerm(\"PrintableVersion\"), security.checkSecurityPerm(\"StateLog\"), security.checkSecurityPerm(\"GraphicQuery\")).done(function (PrintableVersion, StateLog, GraphicQuery) {\r\n            data.printableVersion = PrintableVersion;\r\n            data.stateLog = StateLog;\r\n            data.graphicQuery = GraphicQuery;\r\n\r\n            //Hide summary case tabs when idCase = 0\r\n            if (data.idCase == 0) {\r\n                setTimeout(function () {\r\n                    $(\"div.ui-bizagi-wp-app-inbox-description-container \\\r\n                    div.ui-bizagi-loading-message \\\r\n                    div.ui-bizagi-loading-message-center \\\r\n                    div.ui-bizagi-loading-icon\").hide();\r\n                }, 1000);\r\n\r\n                return;\r\n            }\r\n\r\n            var summary = $.tmpl(self.caseSummaryTemplate, $.extend(data, {security: bizagi.menuSecurity})).appendTo(self.getComponentContainer(\"summary\"));\r\n\r\n            // Format invariant dates\r\n            bizagi.util.formatInvariantDate(content, self.getResource(\"dateFormat\") + \" \" + self.getResource(\"timeFormat\"));\r\n\r\n\r\n            // Delegate events for parent process\r\n            $(\"#details\", summary).delegate(\".summaryLink\", \"click\", function () {\r\n                self.routingExecute($(this));\r\n            });\r\n\r\n            // jQuery-ui tabs\r\n            $(\"#ui-bizagi-details-tabs\", content).tabs({\r\n                active: -1,\r\n                create: function (event, ui) {\r\n                    $(this).tabs(\"option\", \"active\", 0);\r\n                },\r\n                activate: function (event, ui) {\r\n                    bizagi.util.setContext({\r\n                        commentsFocus: false\r\n                    });\r\n                    switch (ui.newPanel.prop('id')) {\r\n                        case \"comments\":\r\n                            if (cache[\"comments\"] == undefined) {\r\n                                // Extend render with comments\r\n                                $.extend(self, {}, bizagi.workportal.comments);\r\n\r\n                                // Define canvas\r\n                                data.canvas = $(\"#comments\", self.getComponentContainer(\"summary\"));\r\n                                data.readOnly = ($(ui.tab).data('isclosed')) ? true : false;\r\n\r\n                                $.when(self.renderComments(data))\r\n                                    .done(function (htmlContent) {\r\n                                        cache[\"comments\"] = htmlContent;\r\n                                    });\r\n                            }\r\n                            bizagi.util.setContext({\r\n                                commentsFocus: true\r\n                            });\r\n                            break;\r\n                        case \"subprocess\":\r\n                            if (cache[\"subprocess\"] == undefined) {\r\n                                $.when(\r\n                                        self.dataService.summarySubProcess({\r\n                                            idCase: self.params.idCase\r\n                                        })\r\n                                    ).done(function (subprocess) {\r\n\r\n                                        $.each(subprocess.subProcesses, function (key, value) {\r\n                                            var custData = subprocess.subProcesses[key].custData;\r\n                                            for (var i = 0; i < custData.length; i++) {\r\n                                                if (custData[i] == null) {\r\n                                                    custData[i] = \"\";\r\n                                                }\r\n                                            }\r\n                                        });\r\n\r\n                                        htmlContent = $.tmpl(self.caseSummaryTemplateSubprocess, subprocess);\r\n                                        htmlContent.appendTo($(\"#subprocess\", self.getComponentContainer(\"summary\")));\r\n                                        cache[\"subprocess\"] = htmlContent;\r\n\r\n                                        // Define Events for subprocess tab\r\n                                        htmlContent.delegate(\".summaryLink\", \"click\", function () {\r\n                                            self.routingExecute($(this));\r\n                                        });\r\n                                    });\r\n                            }\r\n                            break;\r\n\r\n                        case \"assignees\":\r\n                            if (cache[\"assignees\"] == undefined) {\r\n                                $.when(\r\n                                        self.dataService.summaryAssigness({\r\n                                            idCase: self.params.idCase\r\n                                        })\r\n                                    ).done(function (assignees) {\r\n                                        // Generates  lists of unique assignees for Events\r\n                                        var eventsUniqueList = [];\r\n                                        $.each(assignees.events.split(\", \"), function (i, el) {\r\n                                            if ($.inArray(el, eventsUniqueList) === -1) eventsUniqueList.push(el);\r\n                                        });\r\n                                        assignees.events = eventsUniqueList.join(\", \");\r\n\r\n                                        // Generates  lists of unique assignees for activities\r\n                                        var activitiesUniqueList = [];\r\n                                        $.each(assignees.activities.split(\", \"), function (i, el) {\r\n                                            if ($.inArray(el, activitiesUniqueList) === -1) activitiesUniqueList.push(el);\r\n                                        });\r\n                                        assignees.activities = activitiesUniqueList.join(\", \");\r\n\r\n                                        htmlContent = $.tmpl(self.caseSummaryTemplateAssigness, assignees);\r\n                                        htmlContent.appendTo($(\"#assignees\", self.getComponentContainer(\"summary\")));\r\n                                        cache[\"assignees\"] = htmlContent;\r\n                                    });\r\n                            }\r\n                            break;\r\n\r\n                        case \"events\":\r\n                            if (cache[\"events\"] == undefined) {\r\n                                $.when(\r\n                                        self.dataService.summaryCaseEvents({\r\n                                            idCase: self.params.idCase\r\n                                        })\r\n                                    ).done(function (events) {\r\n                                        htmlContent = $.tmpl(self.caseSummaryTemplateEvents, events);\r\n                                        htmlContent.appendTo($(\"#events\", self.getComponentContainer(\"summary\")));\r\n                                        cache[\"events\"] = htmlContent;\r\n\r\n                                        htmlContent.delegate(\".summaryLink\", \"click\", function () {\r\n                                            self.routingExecute($(this));\r\n                                        });\r\n                                    });\r\n                            }\r\n                            break;\r\n\r\n                        case \"activities\":\r\n                            if (cache[\"activities\"] == undefined) {\r\n                                $.when(\r\n                                        self.dataService.summaryActivities({\r\n                                            data: data,\r\n                                            idWorkitem: self.params.idWorkitem\r\n                                        })\r\n                                    ).done(function (activities) {\r\n                                        activities[\"idCase\"] = self.params.idCase;\r\n                                        activities[\"idWorkflow\"] = self.params.idWorkflow;\r\n\r\n                                        //To solve QA-2124\r\n                                        var defaultDateFormat = bizagi.localization.getResource(\"dateFormat\");\r\n                                        var defaultTimeFormat = bizagi.localization.getResource(\"timeFormat\");\r\n                                        var fullFormat = defaultDateFormat + ' ' + defaultTimeFormat;\r\n\r\n                                        htmlContent = $.tmpl(self.caseSummaryTemplateActivities, activities);\r\n                                        bizagi.util.formatInvariantDate(htmlContent, fullFormat);\r\n                                        htmlContent.appendTo($(\"#activities\", self.getComponentContainer(\"summary\")));\r\n                                        cache[\"activities\"] = htmlContent;\r\n\r\n                                        htmlContent.delegate(\".summaryLink\", \"click\", function () {\r\n                                            self.routingExecute($(this));\r\n                                        });\r\n                                    });\r\n                            }\r\n                            break;\r\n                    }\r\n                }\r\n            });\r\n        });\r\n    },\r\n\r\n\r\n    /*\r\n    *   Renders the form component of the widget\r\n    */\r\n    renderForm: function (params) {\r\n        var self = this, resultRender;\r\n\r\n        var renderContainer = self.getComponentContainer(\"render\");\r\n        if (!params.withOutGlobalForm) {\r\n            // it has't activities and global form\r\n            var proxyPrefix = (typeof (self.dataService.serviceLocator.proxyPrefix) != undefined) ? self.dataService.serviceLocator.proxyPrefix : \"\";\r\n            var database = (typeof (self.dataService.database) != undefined) ? self.dataService.database : \"\";\r\n\r\n\r\n            // Load render page\r\n            var rendering = self.rendering = new bizagi.rendering.facade({ \"proxyPrefix\": proxyPrefix, \"database\": database });\r\n            // Executes rendering into render container\r\n            resultRender = rendering.execute($.extend(params, {\r\n                canvas: renderContainer,\r\n                menu: self.menu\r\n            }));\r\n\r\n            // Attach handler to render container to subscribe for routing events\r\n            renderContainer.bind(\"routing\", function (context, triggerparams) {\r\n                // Executes routing action\r\n\r\n                var params = {\r\n                    action: bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING,\r\n                    idCase: self.params.idCase,\r\n                    fromTask: self.params.fromTask || self.params.idTask,\r\n                    fromWorkItemId: self.params.fromWorkItemId || self.params.idWorkitem,\r\n                    isOfflineForm: self.params.isOfflineForm,\r\n                    formsRenderVersion: self.params.formsRenderVersion,\r\n                    onClose: function () {\r\n                        // If the user closes the dialog we need to redirect to inbox widget\r\n                        self.publish(\"changeWidget\", {\r\n                            widgetName: bizagi.workportal.currentInboxView\r\n                        });\r\n                    }\r\n                };\r\n                params = $.extend(params, triggerparams);\r\n                self.publish(\"executeAction\", params);\r\n            });\r\n\r\n            //\r\n            renderContainer.bind(\"oldrenderintegration\", function () {\r\n                if (bizagi.oldrenderevent == undefined) {\r\n                    bizagi.oldrenderevent = true; // has been loaded\r\n                    var eventMethod = window.addEventListener ? \"addEventListener\" : \"attachEvent\";\r\n                    var eventer = window[eventMethod];\r\n                    var messageEvent = eventMethod == \"attachEvent\" ? \"onmessage\" : \"message\";\r\n\r\n                    // Listen to message from child window\r\n                    eventer(messageEvent, function (e) {\r\n                        e.stopPropagation();\r\n                        self.publish(\"executeAction\", {\r\n                            action: bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING,\r\n                            idCase: e.data\r\n                        });\r\n                    }, false);\r\n                }\r\n\r\n                self.publish(\"changeWidget\", {\r\n                    widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_OLDRENDERINTEGRATION,\r\n                    idCase: self.params.idCase,\r\n                    idWorkitem: self.params.idWorkitem,\r\n                    idTask: self.params.idTask,\r\n                    onlyUserWorkItems: self.params.onlyUserWorkItems,\r\n                    referrer: self.params.referrer,\r\n                    eventAsTasks: self.params.eventAsTasks\r\n                });\r\n\r\n            });\r\n        } else {\r\n            var errorTemplate = self.workportalFacade.getTemplate(\"info-message\");\r\n            var message = (params.messageForm !== \"\") ? params.messageForm : self.resources.getResource(\"render-without-globalform\");\r\n\r\n            if (typeof self.params != \"undefined\" && typeof self.params.isOfflineForm !== \"undefined\" && self.params.isOfflineForm == true) {\r\n                message = bizagi.util.getMessageFromNetworkState(self.dataService.online);\r\n            }\r\n\r\n            var errorHtml = $.tmpl(errorTemplate, {\r\n                message: message\r\n            });\r\n            // Remove loading icon from summary container\r\n            errorHtml.appendTo(renderContainer);\r\n\r\n            resultRender = $.Deferred();\r\n            resultRender.fail();\r\n        }\r\n\r\n        // Keep reference to rendering facade\r\n        self.renderingFacade = rendering;\r\n\r\n        // Resize layout\r\n        self.resizeLayout();\r\n\r\n        return resultRender;\r\n    },\r\n\r\n\r\n    routingExecute: function (element) {\r\n        // Executes routing action\r\n        if (element == undefined) {\r\n            return false;\r\n        }\r\n\r\n        var self = this;\r\n\r\n        var idCase = element.find(\"#idCase\").val() || self.params.idCase;\r\n        var idWorkflow = element.find(\"#idWorkflow\").val() || self.params.idWorkflow;\r\n        var idWorkItem = element.find(\"#idWorkItem\").val() || element.parent().find(\"#idWorkItem\").val();\r\n        var idTask = element.find(\"#idTask\").val();\r\n        var eventAsTasks = element.find(\"#eventAsTasks\").val() || false;\r\n\r\n        self.publish(\"executeAction\", {\r\n            action: bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING,\r\n            idCase: idCase,\r\n            idWorkflow: idWorkflow,\r\n            idWorkItem: idWorkItem,\r\n            idTask: idTask,\r\n            eventAsTasks: eventAsTasks\r\n        });\r\n\r\n        return true;\r\n    },\r\n\r\n    dispose: function () {\r\n        var self = this;\r\n\r\n        // Dispose the rendering binds\r\n        setTimeout(function () {\r\n            if (self.rendering) {\r\n                var renderContainer = self.rendering.canvas;\r\n                renderContainer.off();\r\n                self.rendering.dispose();\r\n            }\r\n        }, bizagi.override.disposeTime || 50);\r\n\r\n        // Call base\r\n        self._super();\r\n    }\r\n});\r\n","/*\r\n*   Name: Start Form Widget Controller\r\n*   Author: Fabian Moreno (based on Diego Parra version)\r\n*   Comments:\r\n*   -   This script will provide start form widget\r\n*/\r\n\r\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.startForm\", {}, {\r\n\r\n    /*\r\n    *   Returns the widget name\r\n    */\r\n    getWidgetName: function () {\r\n        return bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_START_FORM;\r\n    },\r\n\r\n    /*\r\n    *   Constructor\r\n    */\r\n    init: function (workportalFacade, dataService, params) {\r\n        var self = this;\r\n        self.idProcess = params.data.idProcess;\r\n        // Call base\r\n        self._super(workportalFacade, dataService, params);\r\n\r\n        //Load templates\r\n        self.loadTemplates({\r\n            \"startForm\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.startForm\").concat(\"#ui-bizagi-workportal-widget-start-form\"),\r\n            useNewEngine: false\r\n        });\r\n    },\r\n\r\n    /*\r\n    *   Renders the content for the current controller\r\n    *   Returns a deferred because it has to load the current user\r\n    */\r\n    renderContent: function () {\r\n        var self = this;    \r\n        var template = self.getTemplate(\"startForm\");\r\n\r\n        // Render base template\r\n        self.content = $.tmpl(template);\r\n\r\n        // Check if the content is already in dom\r\n        var includedInDom = self.content.parents(\"body\").length > 0;\r\n        if (includedInDom) {\r\n            self.renderForm();\r\n        } else {\r\n            // Wait until the dom is ready to execute the rendering, because some controls need references to full DOM\r\n            // (grids and uploads)\r\n            self.subscribeOneTime(\"onWidgetIncludedInDOM\", function () {\r\n\r\n                // Load render page\r\n                self.renderForm({\r\n                    idCase: self.params.idCase,\r\n                    idWorkitem: self.params.idWorkitem,\r\n                    idTask: self.params.idTask,\r\n                    withOutGlobalForm: self.params.withOutGlobalForm || false,\r\n                    isOfflineForm: self.params.isOfflineForm || false,\r\n                    messageForm: self.params.messageForm || \"\"\r\n                });\r\n            });\r\n        }\r\n\r\n    },\r\n\r\n\r\n    /*\r\n    *   Renders the form component of the widget\r\n    */\r\n    renderForm: function (params) {\r\n        var self = this, resultRender;\r\n\r\n        var renderContainer = self.getComponentContainer(\"render\");\r\n        if (!params.withOutGlobalForm) {\r\n            // it has't activities and global form\r\n            var proxyPrefix = (typeof self.dataService.serviceLocator.proxyPrefix !== \"undefined\") ? self.dataService.serviceLocator.proxyPrefix : \"\";\r\n            var database = (typeof self.dataService.database !== \"undefined\") ? self.dataService.database : \"\";\r\n\r\n\r\n            // Load render page\r\n            var rendering = self.rendering = new bizagi.rendering.facade({ \"proxyPrefix\": proxyPrefix, \"database\": database });\r\n            // Executes rendering into render container\r\n\r\n            params.action = \"LOADSTARTFORM\";\r\n            params.idProcess = self.idProcess;\r\n\r\n            resultRender = rendering.execute($.extend(params, {\r\n                canvas: renderContainer,\r\n                menu: self.menu\r\n            }));\r\n\r\n            // Attach handler to render container to subscribe for routing events\r\n            renderContainer.bind(\"routing\", function (context, triggerparams) {\r\n                //Close de startForm dialog and executes the routing action\r\n                self.publish(\"closeCurrentDialog\");\r\n\r\n                var params = {\r\n                    action: bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING,\r\n                    idCase: self.params.idCase || triggerparams.idCase,\r\n                    fromTask: self.params.fromTask || self.params.idTask,\r\n                    fromWorkItemId: self.params.fromWorkItemId || self.params.idWorkitem,\r\n                    isOfflineForm: self.params.isOfflineForm,\r\n                    formsRenderVersion: self.params.formsRenderVersion,\r\n                    onClose: function () {\r\n                        // If the user closes the dialog we need to redirect to inbox widget\r\n                        self.publish(\"changeWidget\", {\r\n                            widgetName: bizagi.workportal.currentInboxView\r\n                        });\r\n                    }\r\n                };\r\n                params = $.extend(params, triggerparams);\r\n                self.publish(\"executeAction\", params);\r\n            });\r\n\r\n            //\r\n            renderContainer.bind(\"oldrenderintegration\", function () {\r\n                if (bizagi.oldrenderevent === undefined) {\r\n                    bizagi.oldrenderevent = true; // has been loaded\r\n                    var eventMethod = window.addEventListener ? \"addEventListener\" : \"attachEvent\";\r\n                    var eventer = window[eventMethod];\r\n                    var messageEvent = eventMethod == \"attachEvent\" ? \"onmessage\" : \"message\";\r\n\r\n                    // Listen to message from child window\r\n                    eventer(messageEvent, function (e) {\r\n                        e.stopPropagation();\r\n                        self.publish(\"executeAction\", {\r\n                            action: bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING,\r\n                            idCase: e.data\r\n                        });\r\n                    }, false);\r\n                }\r\n\r\n                self.publish(\"changeWidget\", {\r\n                    widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_OLDRENDERINTEGRATION,\r\n                    idCase: self.params.idCase,\r\n                    idWorkitem: self.params.idWorkitem,\r\n                    idTask: self.params.idTask,\r\n                    onlyUserWorkItems: self.params.onlyUserWorkItems,\r\n                    referrer: self.params.referrer,\r\n                    eventAsTasks: self.params.eventAsTasks\r\n                });\r\n\r\n            });\r\n        } else {\r\n            var errorTemplate = self.workportalFacade.getTemplate(\"info-message\");\r\n            var message = (params.messageForm !== \"\") ? params.messageForm : self.resources.getResource(\"render-without-globalform\");\r\n\r\n            if (typeof self.params !== \"undefined\" && typeof self.params.isOfflineForm !== \"undefined\" && self.params.isOfflineForm === true) {\r\n                message = bizagi.util.getMessageFromNetworkState(self.dataService.online);\r\n            }\r\n\r\n            var errorHtml = $.tmpl(errorTemplate, {\r\n                message: message\r\n            });\r\n            // Remove loading icon from summary container\r\n            errorHtml.appendTo(renderContainer);\r\n\r\n            resultRender = $.Deferred();\r\n            resultRender.fail();\r\n        }\r\n\r\n        // Keep reference to rendering facade\r\n        self.renderingFacade = rendering;\r\n\r\n        // Resize layout\r\n        self.resizeLayout();\r\n\r\n        return resultRender;\r\n    },\r\n\r\n\r\n    routingExecute: function (element) {\r\n        // Executes routing action\r\n        if (element === undefined) {\r\n            return false;\r\n        }\r\n\r\n        var self = this;\r\n\r\n        var idCase = element.find(\"#idCase\").val() || self.params.idCase;\r\n        var idWorkflow = element.find(\"#idWorkflow\").val() || self.params.idWorkflow;\r\n        var idWorkItem = element.find(\"#idWorkItem\").val() || element.parent().find(\"#idWorkItem\").val();\r\n        var idTask = element.find(\"#idTask\").val();\r\n        var eventAsTasks = element.find(\"#eventAsTasks\").val() || false;\r\n\r\n        self.publish(\"executeAction\", {\r\n            action: bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING,\r\n            idCase: idCase,\r\n            idWorkflow: idWorkflow,\r\n            idWorkItem: idWorkItem,\r\n            idTask: idTask,\r\n            eventAsTasks: eventAsTasks\r\n        });\r\n\r\n        return true;\r\n    },\r\n\r\n    dispose: function () {\r\n        var self = this;\r\n\r\n        // Dispose the rendering binds\r\n        if (self.rendering) {\r\n            var renderContainer = self.rendering.canvas;\r\n            renderContainer.off();\r\n\r\n            if(self.rendering.form){\r\n                self.rendering.form.dispose();\r\n            }\r\n\r\n            if (this.IsDisposed)\r\n                return;\r\n        }\r\n\r\n        // Call base\r\n        self._super();\r\n    }\r\n});\r\n","/*\r\n*   Name: BizAgi Workportal my search search lists Widget Controller\r\n*   Author: Andr�s Fernando Mu�oz\r\n*   Comments:\r\n*   -   This script will define a base class to to define the \"my search search lists\" widget\r\n*/\r\n\r\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.mySearchList\", {}, {\r\n    /*\r\n    *   Returns the widget name\r\n    */\r\n    getWidgetName: function () {\r\n        return bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_MYSEARCHLIST;\r\n    },\r\n\r\n    /*\r\n    *   Renders the content for the current controller\r\n    *   Returns a deferred because it has to load the current user\r\n    */\r\n    renderContent: function () {\r\n        var self = this;\r\n        var template = self.getTemplate(\"mySearchListWrapper\");\r\n        var content = self.content = $.tmpl(template);\r\n\r\n        return content;\r\n    }\r\n});","bizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.loadForm\", {}, {\r\n\r\n    init: function (workportalFacade, dataService, params) {\r\n        this.workportalFacade = workportalFacade;\r\n        this.dataService = dataService;\r\n        this.params = params || {};\r\n        this.form;\r\n        this.searchCriteriasApplied = params.searchCriteriasApplied || [];\r\n    },\r\n\r\n    getWidgetName: function () {\r\n        return bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_LOADFORM;\r\n    },\r\n\r\n    preProcessValue: function (value, control) {\r\n        if (control.properties.type == \"combo\" || control.properties.type == \"radio\"){\r\n            value = {\"id\": value[0]};       \r\n        }\r\n\r\n        return value;\r\n    },\r\n\r\n    renderContent: function () {\r\n        var self = this;\r\n        var template = self.workportalFacade.getTemplate(\"loadForm\");\r\n\r\n        self.content = $.tmpl(template);\r\n\r\n        bizagi.loader.start(\"rendering\").then(function () {\r\n            var formClass = bizagi.rendering.desktop.form.extend({\r\n                createRenderElement: function (element) {\r\n                    var self = this;\r\n                    var properties = element.render.properties;\r\n\r\n                    if (properties.rangeQuery && properties.rangeQuery != \"none\") {\r\n                        properties.xpath = properties.xpath + \"@\" + properties.rangeQuery;\r\n                    }\r\n\r\n                    self._super(element);\r\n                }\r\n            });\r\n\r\n            var renderFacade = bizagi.rendering.facade.extend({\r\n                processForm: function (data, renderFactory, params) {\r\n                    var containerParams = $.extend(params, {\r\n                        renderFactory: renderFactory,\r\n                        dataService: params.dataService || this.dataService,\r\n                        data: data\r\n                    });\r\n                    var form =  new formClass(containerParams);\r\n\r\n                    //set default data\r\n                    if (self.searchCriteriasApplied.length > 0){\r\n                        $.each(self.searchCriteriasApplied, function (key, value) {\r\n                            var control = form.getRenderById(value.id);\r\n                            if (control) {\r\n                                control.setValue(self.preProcessValue(value.value, control));\r\n                            }\r\n                        });\r\n                    }\r\n\r\n                    // Render the full form\r\n                    form.render();\r\n\r\n                    return form;\r\n                }\r\n            });\r\n\r\n            var render = new renderFacade();\r\n\r\n            var queryFormParams = {\r\n                h_action: \"QUERYFORM\",\r\n                h_contexttype: \"entity\",\r\n                h_idForm: self.params.guidForm,\r\n                dataType: \"text\"\r\n            };\r\n\r\n\r\n            //request to queryForm definition service\r\n            self.dataService.getQueryForm(queryFormParams).done(function (data) {\r\n                //convert the form json\r\n                var regexTypeString = /\\\"type\\\"\\s*:\\s*\\\"([':.,-\\[\\]\\w\\s]*)\\\"/g;\r\n                var regexIncludedInResultString = /\\\"includedInResult\\\"\\s*:\\s*(true)/g;\r\n\r\n                var processedForm = data.replace(regexTypeString, function (match, g1, offset, string) {\r\n                    return match.replace(g1, g1.replace(/query/i, \"\").toLowerCase());\r\n                });\r\n                processedForm = processedForm.replace(regexIncludedInResultString, '\"includedInResult\":false');\r\n\r\n                var form = JSON.parse(processedForm);\r\n                form.form.buttons = [];\r\n\r\n                // For searches of Rubik the \"metadata\" field is required\r\n                form.form.contextType = form.form.contextType || \"metadata\";\r\n\r\n                var renderingParams = { canvas: $(self.content), data: form };\r\n\r\n                render.execute(renderingParams).done(function (form) {\r\n                    self.form = form;\r\n                });\r\n\r\n                return self.content;\r\n            });\r\n        });\r\n    }\r\n\r\n});","/*\r\n*   Name: BizAgi Workportal New Case Widget Controller\r\n*   Author: Edward Morales\r\n*   Comments:\r\n*   -   This script will define a base class to to define the sub menu widget\r\n*/\r\n\r\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.subMenu\", {}, {\r\n    /*\r\n    *   Returns the widget name\r\n    */\r\n    getWidgetName: function(){  \r\n        return bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_SUBMENU;\r\n    },\r\n    \r\n    /*\r\n    *   Renders the content for the current controller\r\n    *   Returns a deferred because it has to load the current user\r\n    */\r\n    renderContent: function () {\r\n        var self = this;\r\n        var template = self.workportalFacade.getTemplate(\"menu.submenu\");\r\n        var content = self.content = $.tmpl(template);\r\n        \r\n        return content;\r\n    }\r\n});\r\n","/*\r\n *   Name: BizAgi Workportal Search Controller\r\n *   Author: Edward Morales\r\n *   Comments:\r\n *   -   Base library for search cases\r\n */\r\n\r\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.search\", {}, {\r\n    /*\r\n     *   Returns the widget name\r\n     */\r\n    getWidgetName: function() {\r\n        return bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_SEARCH;\r\n    },\r\n    /*\r\n     *   Renders the content for the current controller\r\n     *   Returns a deferred because it has to load the current user\r\n     */\r\n    renderContent: function() {\r\n        var self = this;\r\n        var template = self.workportalFacade.getTemplate(\"search\");\r\n\r\n        var content = self.content = $.tmpl(template);\r\n\r\n        return content;\r\n    },\r\n    routingExecute: function(element) {\r\n        // Executes routing action\r\n        if (element == undefined) {\r\n            return false;\r\n        }\r\n\r\n        var self = this;\r\n\r\n        var idCase = element.find(\"#idCase\").val();\r\n        var idWorkItem = element.find(\"#idWorkItem\").val();\r\n        var idTask = element.find(\"#idTask\").val();\r\n        var eventAsTasks = element.find(\"#eventAsTasks\").val() || false;\r\n\r\n        self.publish(\"executeAction\", {\r\n            action: bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING,\r\n            idCase: idCase,\r\n            idWorkItem: idWorkItem,\r\n            idTask: idTask,\r\n            eventAsTasks: eventAsTasks\r\n        });\r\n    }\r\n});\r\n","/*\r\n*   Name: BizAgi Generic Page Widget Implementation\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*/\r\n\r\n\r\n// Extends itself\r\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.page\", {}, {\r\n    /*\r\n    *   Returns the widget name\r\n    */\r\n    getWidgetName: function () {\r\n        return bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_PAGE;\r\n    },\r\n\r\n    init: function (workportalFacade, dataService, params) {\r\n        var self = this;\r\n\r\n        // Call base\r\n        self._super(workportalFacade, dataService, params);\r\n\r\n        //Load templates\r\n        self.loadTemplates({\r\n            \"page\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.page\").concat(\"#ui-bizagi-workportal-widget-page\"),\r\n            useNewEngine: false\r\n        });\r\n    },\r\n\r\n    /*\r\n    *   Renders the content for the current controller\r\n    *   Returns a deferred because it has to load the current user\r\n    */\r\n    renderContent: function () {\r\n        var self = this;\r\n\r\n        var template = self.getTemplate(\"page\");\r\n        var content = self.content = $.tmpl(template, {});\r\n\r\n        self.renderStaticForm(self.params);\r\n\r\n        // Return content\r\n        return content;\r\n    },\r\n\r\n    renderStaticForm: function (params) {\r\n        var self = this;\r\n        var canvas = self.getComponentContainer(\"render\");\r\n        var rendering = new bizagi.rendering.facade(params.context);\r\n\r\n        // Executes rendering into render container\r\n        params = params || {};\r\n    \t$.extend(params, {\r\n    \t    canvas: canvas \r\n    \t    });\r\n        \r\n        rendering.execute(params);\r\n\r\n        canvas.bind(\"close\", function () {\r\n            self.publish(\"closeCurrentDialog\");            \r\n        });\r\n    }\r\n});\r\n","\r\n/*\r\n *   Name: BizAgi Workportal Render Widget Controller\r\n *   Author: Diego Parra\r\n *   Comments:\r\n *   -   This script will define a base class to to define the render widget\r\n *       the rendering module is loaded here\r\n */\r\n\r\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.renderform\", {}, {\r\n\r\n    /*\r\n     *   Returns the widget name\r\n     */\r\n    getWidgetName: function(){  \r\n        return bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_RENDER_FORM;\r\n    },\r\n\r\n    /*\r\n     *   Constructor\r\n     */\r\n    init: function (workportalFacade, dataService, params) {\r\n        var self = this;\r\n    \t\r\n        // Check if the required params are filled\r\n        if (bizagi.util.isEmpty(params.idForm)) {\r\n        \r\n            if(!bizagi.util.isEmpty(window.location.hash)){\r\n                // Check in the hash\r\n                var hashParams = bizagi.util.getHashParams();\r\n        \t\t\r\n                // Set the first hash param as the idCase\r\n                if (hashParams.length > 1) {\r\n                    params.idCase = hashParams[1];\r\n                    self.isConfiguredFromHash = true;\r\n                }\r\n        \t\t\r\n                // Set the second hash param as the idWorkitem\r\n                if (hashParams.length > 2) {\r\n                    params.idWorkitem = hashParams[2];\r\n                }\r\n            } else if(!bizagi.util.isEmpty(window.location.search)){\r\n                var queryString = bizagi.util.getQueryString();\r\n                \r\n                // Set idCase param from query string\r\n                if (queryString[\"idEntity\"]){\r\n                    params.idEntity = queryString[\"idEntity\"];\r\n                    self.isConfiguredFromHash = true;\r\n                }\r\n                \r\n                // Set idWorkitem param from query string\r\n                if (queryString[\"surrogateKey\"]){\r\n                    params.surrogateKey = queryString[\"surrogateKey\"];\r\n                }\r\n            }\r\n        }\r\n\r\n        // Call base\r\n        self._super(workportalFacade, dataService, params);\r\n    },\r\n\r\n    /*\r\n     *   Renders the content for the current controller\r\n     *   Returns a deferred because it has to load the current user\r\n     */\r\n    renderContent: function () {\r\n        var self = this;\r\n        var template = self.getTemplate(\"renderform\");\r\n        var summaryDeferred = new $.Deferred(); \r\n    \t\r\n        // Check if the required params are filled\r\n        if (bizagi.util.isEmpty(self.params.idForm)) {\r\n            self.changeWidget(bizagi.workportal.currentInboxView);\r\n            return null;\r\n        }\r\n    \t\r\n        // Render base template\r\n        self.content = $.tmpl(template);\r\n    \r\n        // Check if the content is already in dom\r\n        var includedInDom = self.content.parents(\"body\").length > 0;\r\n        if (includedInDom) {\r\n            self.renderForm();\r\n        } else {\r\n            // Wait until the dom is ready to execute the rendering, because some controls need references to full DOM\r\n            // (grids and uploads)\r\n            self.subscribeOneTime(\"onWidgetIncludedInDOM\", function() {\r\n            \t\r\n                // Load render page\r\n                self.renderForm({\r\n                    idEntity: self.params.idEntity,\r\n                    surrogateKey: self.params.surrogateKey\r\n                });\r\n            });\r\n        }\r\n    },\r\n    \r\n    /*\r\n     *   Renders the form component of the widget\r\n     */\r\n    renderForm: function(params){\r\n        var self = this;\r\n        \r\n        \r\n        var proxyPrefix = (typeof (self.dataService.serviceLocator.proxyPrefix) != undefined) ? self.dataService.serviceLocator.proxyPrefix : \"\";\r\n        // Load render page\r\n        var rendering = new bizagi.rendering.facade({ \"proxyPrefix\": proxyPrefix });\r\n        var renderContainer = self.getComponentContainer(\"render\");\r\n    \r\n        // Executes rendering into render container\r\n        rendering.execute($.extend(params, {\r\n            canvas: renderContainer\t\r\n        }));\r\n    \r\n        // Attach handler to render container to subscribe for routing events\r\n        renderContainer.bind(\"routing\", function(){\r\n            // Executes routing action\r\n            self.publish(\"executeAction\", {\r\n                action: bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING,\r\n                idCase: self.params.idCase,\r\n                onClose: function () {\r\n                    // If the user closes the dialog we need to redirect to inbox widget\r\n                    self.publish(\"changeWidget\", {\r\n                        widgetName : bizagi.workportal.currentInboxView\r\n                    }); \r\n                }\r\n            });\r\n        });\r\n    \t\r\n        // Keep reference to rendering facade\r\n        self.renderingFacade = rendering;\r\n    \r\n        // Resize layout\r\n        self.resizeLayout();\r\n    }  \r\n});\r\n","/*\r\n*   Name: BizAgi Desktop Queries Dialog implementation\r\n*   Author: Juan Pablo Crossley\r\n*   Comments:\r\n*   -   ???\r\n*/\r\n\r\n\r\n// Extends itself\r\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.genericiframe\", {}, {\r\n    /*\r\n    *   Returns the widget name\r\n    */\r\n    getWidgetName: function(){  \r\n        return bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_GENERICIFRAME;\r\n    },\r\n\r\n    init: function (workportalFacade, dataService, params) {\r\n        var self = this;\r\n\r\n        // Call base\r\n        self._super(workportalFacade, dataService, params);\r\n\r\n        //Load templates\r\n        self.loadTemplates({\r\n            \"genericiframe\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.genericiframe\"),\r\n            useNewEngine: false\r\n        });\r\n    },\r\n\r\n    /*\r\n    *   Renders the content for the current controller\r\n    *   Returns a deferred because it has to load the current user\r\n    */\r\n    renderContent: function () {\r\n        var self = this;\r\n        \r\n        var template = self.getTemplate(\"genericiframe\");\r\n        var data = {\r\n            widgetURL: self.params.widgetURL\r\n        };\r\n        var content = self.content = $.tmpl(template, data);\r\n        \r\n        // Return content\r\n        return content;\r\n    }\r\n});\r\n","/*\r\n*   Name: BizAgi Workportal Integration old render within new look and feel\r\n*   Author: Edward Morales\r\n*   Comments:\r\n*   -   This script define base controller to integrate old render within new workportal\r\n*/\r\n\r\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.oldrenderintegration\", {}, {\r\n\r\n    /*\r\n    *   Returns the widget name\r\n    */\r\n    getWidgetName: function(){\r\n\treturn bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_OLDRENDERINTEGRATION;\r\n    },\r\n\r\n    /*\r\n    *   Renders the content for the current controller\r\n    *   Returns a deferred because it has to load the current user\r\n    */\r\n    renderContent: function () {\r\n\tvar self = this;\r\n\tvar template = self.getTemplate(\"integration-old-render\");\r\n\r\n\tvar data = {};\r\n\tdata.url = self.params.url || \"App/ListaDetalle/Detalle.aspx?PostBack=1&idCase=\"+ self.params.idCase +\"&idWorkitem=\"+ self.params.idWorkitem +\"&idTask=\"+self.params.idTask;\r\n\r\n\t// Render content\r\n\tvar content = self.content = $.tmpl(template,data);\r\n\r\n\t// Set inbox view variable\r\n\tbizagi.workportal.currentInboxView = self.getWidgetName();\r\n\r\n\treturn content;\r\n    }\r\n});\r\n","\r\n/*\r\n *   Name: BizAgi Workportal Fontsize Controller\r\n *   Author: Jair Cardenas\r\n *   Comments:\r\n *   -\tThis script will provide base library for fontsize\r\n */\r\n\r\n// Auto extend\r\nbizagi.workportal.widgets.fontsize.extend(\"bizagi.workportal.widgets.fontsize\", {}, {\r\n\r\n\t/*\r\n\t *\t Constructor\r\n\t */\r\n\tinit: function(workportalFacade, dataService, params) {\r\n\t\tvar self = this;\r\n\r\n\t\t// Call base\r\n\t\tthis._super(workportalFacade, dataService, params);\r\n\r\n\t    //Load templates\r\n\t\tself.loadTemplates({\r\n\t\t    \"fontsize\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.fontsize\"),\r\n\t\t    useNewEngine: false\r\n\t\t});\r\n\t},\r\n\t/*\r\n\t *\t To be overriden in each device to apply layouts\r\n\t */\r\n\tpostRender: function() {\r\n\t\tvar self = this;\r\n\t\tvar content = self.getContent();\r\n\t\tvar sizeSelected = $('body').data('sizeselected') || 'font-large';\r\n\r\n\t    // Set templates\r\n\t\tself.fontsizeTemplate = self.getTemplate(\"fontsize\");\r\n\r\n\t\t// Set focus\r\n\t\t$('.ui-bizagi-wp-font-content a', content).removeClass('active');\r\n\t\t$('.ui-bizagi-wp-font-content .' + sizeSelected + ' a', content).addClass('active');\r\n\r\n\t\tvar fontButton = $('.font-switcher', content);\r\n\t\t$(fontButton).click(function() {\r\n\t\t\tvar textSize = $(this).parent().attr('class');\r\n\t\t\t$('body').data('sizeselected', textSize);\r\n\t\t\t$('.ui-bizagi-wp-font-content a', content).removeClass('active');\r\n\t\t\t$('.ui-bizagi-wp-font-content .' + textSize + ' a', content).addClass('active');\r\n\r\n\t\t\t$('html, body').removeClass('font-medium font-large font-x-large').addClass(textSize);\r\n\t\t\treturn true;\r\n\t\t});\r\n\r\n\t}\r\n});\r\n","/*\r\n*   Name: BizAgi Workportal Desktop Main Controller\r\n*   Author: Diego Parra (based on  Edward Morales version)\r\n*   Comments:\r\n*   -   This script will override main controller class to apply custom stuff just for desktop device\r\n*/\r\n\r\n// Auto extend\r\nbizagi.workportal.controllers.main.extend(\"bizagi.workportal.controllers.main\", {}, {\r\n\r\n\t/*\r\n    *   Constructor\r\n    */\r\n    init: function (workportalFacade, dataService) {\r\n    \tvar self = this;\r\n\r\n    \t// Call base\r\n    \tself._super(workportalFacade, dataService);\r\n\r\n    \t// Subscribe to show old window event\r\n        this.subscribe(\"showOldWindow\", function(e, params){\r\n            self.showOldWindow(params);\r\n        });\r\n\r\n        // Instantiate the sessionTimeOut Service\r\n        bizagi.injector.get('sessionTimeOutService');\r\n        self.loadTemplates({\r\n            \"session-timeout\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.sessionTimeout\").concat(\"#session-timeout\")\r\n        });\r\n        self.loadTemplates({\r\n            \"session-timeout-expired\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.sessionTimeoutExpired\").concat(\"#session-timeout-expired\")\r\n        });\r\n        $().dialog();\r\n    },\r\n\r\n\t /*\r\n    *   Renders the content for the current controller\r\n    *\r\n    */\r\n    renderContent: function () {\r\n    \tvar self = this;\r\n\r\n        // Check navigator compatibility\r\n    \tif (bizagi.util.isIE()) {\r\n    \t    var version = bizagi.util.getIEVersion();\r\n    \t\tif (version < 9) {\r\n    \t\t\treturn self.renderIENotCompatibleTemplate();\r\n    \t\t}\r\n    \t}\r\n\r\n        return self._super();\r\n    },\r\n\r\n\t/*\r\n\t*   Render not compatible template\r\n\t*/\r\n\trenderIENotCompatibleTemplate: function () {\r\n\t    var self = this;\r\n        var template = self.workportalFacade.getTemplate(\"workportal.notCompatibleIE\");\r\n\r\n        // Render content\r\n        var content = self.content = $.tmpl(template, { url : BIZAGI_PATH_TO_BASE + \"defaulthtml.aspx\"});\r\n\r\n\t\t// Set resize layout event\r\n        $(window).resize(function() {\r\n            self.resizeLayout();\r\n        });\r\n\r\n\t\treturn content;\r\n\t},\r\n\r\n    /*\r\n    *   To be overriden in each device to apply layouts\r\n    */\r\n    postRender: function(){\r\n        // TODO: Apply logic here\r\n    },\r\n\r\n    /*\r\n     *   Add dialog to dialogStack\r\n     */\r\n    addDialogToDialogStack: function(dialog){\r\n        var self = this;\r\n        // Add to stack\r\n        bizagi.workportal.desktop.dialogStack = bizagi.workportal.desktop.dialogStack || [];\r\n        bizagi.workportal.desktop.dialogStack.push(dialog);\r\n    },\r\n\r\n    /*\r\n    *   Shows a widget inside a modal dialog\r\n    *   Implement on each device\r\n    */\r\n    showDialogWidget: function(data){\r\n        var self = this;\r\n        var dialog = new bizagi.workportal.desktop.widgets.dialog(self.dataService, self.workportalFacade);\r\n        dialog.renderWidget(data);\r\n\r\n        self.addDialogToDialogStack(dialog);\r\n\r\n        return dialog;\r\n    },\r\n\r\n    /*\r\n    *   Close the current modal dialog\r\n    *   Implement on each device\r\n    */\r\n    closeCurrentDialog: function(params){\r\n        // Remove from\r\n        bizagi.workportal.desktop.dialogStack = bizagi.workportal.desktop.dialogStack || [];\r\n        if (bizagi.workportal.desktop.dialogStack.length > 0){\r\n            var dialog = bizagi.workportal.desktop.dialogStack.pop();\r\n            try {\r\n                dialog.close();\r\n            } catch(e) {\r\n                //\r\n            }\r\n        }\r\n\r\n    \t// Close a quirks mode popup if opened\r\n    \tbizagi.closeQuirksModePopup();\r\n    },\r\n\r\n    /**\r\n     *   Close all modal dialogs\r\n     *   Implement on each device\r\n     */\r\n    closeAllDialogs: function(){\r\n        bizagi.workportal.desktop.dialogStack = bizagi.workportal.desktop.dialogStack || [];\r\n        if (bizagi.workportal.desktop.dialogStack.length > 0){\r\n            for(iDialog = 0, iTotalDialog = bizagi.workportal.desktop.dialogStack.length; iDialog < iTotalDialog; iDialog++){\r\n                var dialog = bizagi.workportal.desktop.dialogStack.pop();\r\n                try {\r\n                    dialog.close();\r\n                } catch(e) {\r\n                    //\r\n                }\r\n            }\r\n        } \r\n        $(\".ui-dialog-content\").dialog(\"close\"); //Close the dialogs that were created with jquery UI and couldn't be closed with dialog.close()\r\n    },\r\n\r\n    /*\r\n    *   Popup a widget\r\n    *   Implement on each device\r\n    */\r\n    popupWidget: function(params){\r\n        var self = this;\r\n        var popup = new bizagi.workportal.desktop.widgets.popup(self.dataService, self.workportalFacade, params.options);\r\n        popup.renderWidget(params);\r\n\r\n        // Attach closed handler if present\r\n        if (params.options && params.options.closed){\r\n            $.when(popup.closed())\r\n            .done(function(){\r\n                // Executes callback\r\n                params.options.closed();\r\n            });\r\n        }\r\n    },\r\n\r\n\t/*\r\n\t*   Shows an url inside a window popup\r\n\t*/\r\n\tshowOldWindow: function (params) {\r\n\t\t// Call bizagi internal function\r\n\t\tvar url = bizagi.util.extendQueryString(params.url, {referrer : \"workportal\" });\r\n\t\tbizagi.showQuirksModePopup(url, params.windowParameters);\r\n    },\r\n\r\n\tcleanWidgets: function () {\r\n\r\n\t    this.workarea.cleanWidgets();\r\n\r\n\t    if (bizagi.workportal.desktop.popup) {\r\n            if(bizagi.workportal.desktop.popup.instance) {\r\n                if(bizagi.workportal.desktop.popup.instance.dontClose !== undefined) {\r\n                    bizagi.workportal.desktop.popup.instance.dontClose = false;\r\n                    bizagi.workportal.desktop.popup.instance.close();\r\n                }\r\n            } else {\r\n                var innerDialog = $(\".modal .complex-frame\");\r\n                if(innerDialog.length > 0) {\r\n                    innerDialog.closest(\".modal\").remove();\r\n                }\r\n            }\r\n        }\r\n    },\r\n\r\n    refreshQueryFormShortCut : function(){\r\n        if(bizagi.workportal.widgets.queries.shortcut.instance)\r\n            bizagi.workportal.widgets.queries.shortcut.instance.renderStoredQueries();\r\n    }\r\n\r\n});\r\n","/*\r\n *   Name: BizAgi Workportal Desktop Menu Controller\r\n *   Author: Diego Parra (based on  Edward Morales version)\r\n *   Comments:\r\n *   -   This script will override menu controller class to apply custom stuff just for desktop device\r\n */\r\n\r\n\r\nbizagi.workportal.controllers.menu.extend(\"bizagi.workportal.controllers.menu\", {}, {\r\n\r\n\t/**\r\n\t *\r\n\t * @return {*}\r\n\t */\r\n\tpostRender: function() {\r\n\t\tvar self = this;\r\n\t\tvar defer = new $.Deferred();\r\n\t\tvar content = self.getContent();\r\n\t\tvar searchContent = $(\"#ui-bizagi-wp-widget-searchContainer\", content);\r\n\t\tvar iconsTemplate = self.workportalFacade.getTemplate(\"menu.security\");\r\n\t\tvar menuContent = $(\"#main_menu\", content); \r\n\r\n\r\n\t\t/**\r\n\t\t * Define security fo actual stakeholder\r\n\t\t * @type {bizagi.workportal.controllers.menu.security}\r\n\t\t */\r\n\r\n\t\tvar sec = bizagi.menuSecurity;\r\n\r\n\t\t\t/**\r\n\t\t\t * Draw menu with allowed sections\r\n\t\t\t */\r\n\t\t\t$.tmpl(iconsTemplate, sec,{\r\n\t\t\t\t\treportsSecurity: function() {\r\n\t\t\t\t\t\treturn (sec.AnalysisReports);\r\n\t\t\t\t\t}\r\n\t\t\t\t}).appendTo(menuContent);\r\n\r\n\t\t\t/**\r\n\t\t\t * Set highlight item menu\r\n\t\t\t */\r\n\t\t\tswitch(self.workportalFacade.workportal.getWidgetByDataUser()){\r\n\t\t\t\tcase bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_HOMEPORTAL:\r\n\t\t\t\t\t$(\"#menuListHome\", menuContent).addClass(\"activeMenu\").siblings().removeClass(\"activeMenu\");\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INBOX_GRID:\r\n\t\t\t\tcase bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INBOX:\r\n\t\t\t\t\t$('#menuListInbox', menuContent).addClass(\"activeMenu\").siblings().removeClass(\"activeMenu\");\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\r\n\t\t\t// Fix logout button\r\n\t\t\tif(!sec.LogOut) {\r\n\t\t\t\t//Hide it\r\n\t\t\t\t$(\"#logout\", content).hide();\r\n\t\t\t}\r\n\t\t\t//Prevent event beforeunload to be trigger by clicking the menu\r\n\t\t\t$(\"#main_menu a\", content).click(function(event) {\r\n\t\t\t\tevent.preventDefault();\r\n\t\t\t});\r\n\r\n\t\t\t// Fix search field\r\n\t\t\tif(!sec.Search) {\r\n\t\t\t\t$(\"#ui-bizagi-wp-widget-searchContainer\", content).remove();\r\n\t\t\t}\r\n\r\n\t\t\t$(\"#main_menu li\", content).on(\"click\", self.setActiveSection);\r\n\r\n\t\t\t//To add the style to know the item is selected after go to inbox from decontextualized plan\r\n\t\t\tself.subscribe(\"changeWidget\", function(){\r\n\t\t\t\tif(arguments[1].widgetName === self.workportalFacade.workportal.getWidgetByCookie(true)){\r\n\t\t\t\t\tself.setActiveSection.apply($(\"#main_menu li#menuListInbox\")[0]);\r\n\t\t\t\t}\t\r\n\t\t\t});\r\n\r\n\t\t\tif (!sec.Inbox) {\r\n\t\t\t    $(\"#menuListInbox\", content).hide();\r\n\t\t\t}\r\n\r\n\t\t\t// Bind Widgets button\r\n\t\t\t$(\"#main_menu li#menuListWidget\", content).click(function() {\r\n\t\t\t\tself.showWidgetsPopup();\r\n\t\t\t});\r\n\r\n\t\t\t// Bind New Case button\r\n\t\t\t$(\"#main_menu li#menuListNew\", content).click(function () {\r\n\t\t\t    bizagi.loader.start(\"newcase\").then(function () {\r\n\t\t\t        self.showNewCasePopup();\r\n\t\t\t    });\r\n\t\t\t});\r\n\r\n            // Bind my Search\r\n            if (bizagi.util.parseBoolean(bizagi.override.enableMySearch) &&\r\n\t\t\t\tbizagi.currentUser.associatedStakeholders && bizagi.currentUser.associatedStakeholders.length > 0){\r\n                $(\"#ui-bizagi-wp-widget-searchContainer\", content).click(function () {\r\n                    self.showMySearchPopup();\r\n                });\r\n            }\r\n\r\n\t\t\t$(\"#main_menu li#menuListHome\", content).click(function() {\r\n\t\t\t    var home = bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_HOMEPORTAL;\r\n                \r\n\t\t\t\tself.publish(\"changeWidget\", {\r\n\t\t\t\t\twidgetName: home\r\n\t\t\t\t});\r\n\t\t\t});\r\n\r\n\t\t\t//  Bind inbox button\r\n\t\t\t$(\"#main_menu li#menuListInbox\", content).click(function() {\r\n                var inbox = bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INBOX;\r\n                var grid = bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INBOX_GRID;\r\n                var homeportal = bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_HOMEPORTAL;\r\n\t\t\t\tvar actualWidget;\r\n                var storeWidget;\r\n\t\t\t\tif($.isFunction(bizagi.cookie) && (bizagi.cookie(\"bizagiDefaultWidget\") !== homeportal)){\r\n\t\t\t\t\tstoreWidget = bizagi.cookie(\"bizagiDefaultWidget\");\r\n\t\t\t\t}\r\n\t\t\t\telse{\r\n\t\t\t\t\tstoreWidget = grid;\r\n\t\t\t\t}\r\n\r\n                bizagi.loader.start(\"inbox\").then(function () {\r\n                    switch (storeWidget) {\r\n                        case inbox:\r\n                            actualWidget = inbox;\r\n                            break;\r\n                        case grid:\r\n                            actualWidget = grid;\r\n\t\t\t\t\t\t    break;\r\n                        case homeportal:\r\n                            actualWidget = homeportal;\r\n                            break;\r\n\t\t\t\t\t    default:\r\n                            actualWidget = grid;\r\n\t\t\t\t\t\t    break;\r\n\t\t\t\t    }\r\n\r\n\t\t\t\t\t/*Coment code by QAF-2108*/\r\n\t\t\t\t\t/* THEMES ANGULAR\r\n                    var templateService = new bizagi.workportal.services.loadtemplates();\r\n                    $.when(templateService.loadTemplates({\r\n                        \"homeportal\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.homeportal\").concat(\"#homeportal-frame\"),\r\n                        useNewEngine: true\r\n                    })).done(function () {\r\n                        var template = templateService.getTemplate(\"homeportal\");\r\n                        var content = template.render({});\r\n                        $(content).attr(\"data-bizagi-component\", \"workarea\")\r\n                        $workarea = $(\"#ui-bizagi-wp-workarea\");\r\n                        $workarea.remove(\"#ui-bizagi-wp-project-homeportal-main\");\r\n                        $workarea.append(content);\r\n                        $workarea.find(\"#ui-bizagi-wp-project-homeportal-main\").show();\r\n                        self.publish(\"changeWidget\", {\r\n                            widgetName: actualWidget\r\n                        });\r\n                    });\r\n                    */\r\n\t\t\t\t\tself.publish(\"changeWidget\", {\r\n\t\t\t\t\t\twidgetName: actualWidget\r\n\t\t\t\t\t});\r\n\r\n                });\r\n\t\t\t\tself.resetNavigatorInfo();\r\n\t\t\t});\r\n\r\n\t\t\t// Bind New Case button\r\n\t\t\t$(\"#main_menu li#menuListQueries\", content).click(function() {\r\n\t\t\t\tself.showQueriesPopup();\r\n\t\t\t});\r\n\r\n\t\t\t$(\"#tempEntities\", content).click(function() {\r\n\t\t\t\tself.publish(\"showDialogWidget\", {\r\n\t\t\t\t\twidgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ENTITIES,\r\n\t\t\t\t\tmodalParameters: {\r\n\t\t\t\t\t\ttitle: self.getResource(\"workportal-menu-preferences\"),\r\n\t\t\t\t\t\twidth: \"1020px\",\r\n\t\t\t\t\t\tshowCloseButton: false\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t});\r\n\r\n\t\t\t// Bind admin menu\r\n\t\t\t$(\"#menuListAdmin\", content).click(function() {\r\n\t\t\t\tself.renderAdminMenu();\r\n\t\t\t});\r\n\r\n            $(\"#menuListQuickProcess\", content).click(function() {\r\n                self.renderQuickProcessMenu();\r\n            });\r\n\r\n\t\t\t$(\"#menuListReports\", content).click(function() {\r\n\r\n\t\t\t\tself.renderReportsMenu();\r\n\t\t\t});\r\n\r\n\t\t\t$(\"#menuUserPrivacy\", content).click(function() {\r\n\t\t\t\tself.publish(\"showDialogWidget\", {\r\n\t\t\t\t\twidgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_USER_PRIVACY,\r\n\t\t\t\t\tcloseVisible: false,\r\n\t\t\t\t\tmaximize: false,\r\n\t\t\t\t\tmodalParameters: {\r\n\t\t\t\t\t\ttitle: self.getResource(\"workportal-project-discussion-privacy\"), \r\n\t\t\t\t\t\twidth: 600,\r\n\t\t\t\t\t\theight: \"auto\"\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t});\r\n\r\n\t\t\t$(\"#menuListPreferences\", content).click(function() {\r\n\t\t\t\tvar url = self.dataService.getUrl({\r\n\t\t\t\t\t\"endPoint\": \"ListPreferences\"\r\n\t\t\t\t});\r\n\r\n\t\t\t\tvar widgetName = bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_PREFERENCES;\r\n\t\t\t\tbizagi.loader.start(\"admin\").then(function () {\r\n\t\t\t\t    self.publish(\"showDialogWidget\", {\r\n\t\t\t\t\t    widgetName: widgetName,\r\n\t\t\t\t\t    widgetURL: url,\r\n\t\t\t\t\t    closeVisible: false,\r\n\t\t\t\t\t    maximize: true,\r\n\t\t\t\t\t    modalParameters: {\r\n\t\t\t\t\t\t    title: self.getResource(\"workportal-menu-preferences\"),\r\n                            width: 600,\r\n\t\t\t\t\t\t    height: 710\r\n\t\t\t\t\t    }\r\n\t\t\t\t    });\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t\t$(\"#displayOptions\",content).click(function(){\r\n\r\n\t\t\t\tvar widgetName = bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_DISPLAY_OPTIONS;\r\n\t\t\t\tbizagi.loader.start(\"admin\").then(function () {\r\n\t\t\t\t\tself.publish(\"showDialogWidget\", {\r\n\t\t\t\t\t\twidgetName: widgetName,\r\n\t\t\t\t\t\tcloseVisible: false,\r\n\t\t\t\t\t\tmaximize: false,\r\n\t\t\t\t\t\tmodalParameters: {\r\n\t\t\t\t\t\t\ttitle: self.getResource(\"workportal-menu-display-options\"),\r\n\t\t\t\t\t\t\twidth: 600,\r\n\t\t\t\t\t\t\theight: 280\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t})\r\n\t\t\t$(\"#user\", content).click(function() {\r\n\t\t\t\tself.showUserProfileMenu();\r\n\t\t\t});\r\n\t\t\t$(\"#qr\", content).click(function () {\r\n\t\t\t    self.showQRCodePopup();\r\n\t\t\t});\r\n\t\t\tdefer.resolve(content);\r\n\r\n\r\n\t\t// Bind Search field\r\n\t\tvar inputSearchField = $(\"#menuQuery\", searchContent);\r\n\r\n\t\t// Bind Font Size\r\n\t\t$(\".ui-bizagi-wp-bt-font\", content).click(function() {\r\n\t\t\tself.renderFontMenu();\r\n\t\t});\r\n\r\n        //TODO: Remove this variable, It is used for mocking the service\r\n\t\twindow.CURRENT_THEME_REMOVE_IT = \"theme1\";\r\n\t\t$(\".ui-bizagi-wp-bt-classic-theme,.ui-bizagi-wp-bt-modern-theme,.ui-bizagi-wp-bt-booking-theme\", content).hide();\r\n\r\n\t\t$(\".ui-bizagi-wp-bt-classic-theme\", content).click(function () {\r\n\t\t    $(\"body\").append(\"<div id='workportal-theme-layer' ></div>\");\r\n\t\t    $(\"#workportal-theme-layer\").addClass(\"workportal-theme-layer-visible\");\r\n\r\n\t\t    //change to classic theme\r\n\t\t    window.CURRENT_THEME_REMOVE_IT = \"theme1\";\r\n\r\n\t\t    var home = bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_HOMEPORTAL;\r\n\r\n\t\t    self.publish(\"changeWidget\", {\r\n\t\t        widgetName: home\r\n\t\t    });\r\n\r\n\t\t    $(\".ui-bizagi-wp-bt-modern-theme\").show();\r\n\t\t    $(\".ui-bizagi-wp-bt-booking-theme\").show();\r\n\t\t    $(\".ui-bizagi-wp-bt-classic-theme\").hide();\r\n\t\t    $(\"#user-profile\").hide(\"fast\");\r\n\t\t});\r\n\r\n\t\t$(\".ui-bizagi-wp-bt-modern-theme\", content).click(function () {\r\n\t\t    $(\"body\").append(\"<div id='workportal-theme-layer' ></div>\");\r\n\t\t    $(\"#workportal-theme-layer\").addClass(\"workportal-theme-layer-visible\");\r\n\r\n\t\t    //change to modern theme\r\n\t\t    window.CURRENT_THEME_REMOVE_IT = \"theme2\";\r\n\r\n\t\t    var home = bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_HOMEPORTAL;\r\n\r\n\t\t    self.publish(\"changeWidget\", {\r\n\t\t        widgetName: home\r\n\t\t    });\r\n\r\n\t\t    $(\".ui-bizagi-wp-bt-modern-theme\").hide();\r\n\t\t    $(\".ui-bizagi-wp-bt-classic-theme\").show();\r\n\t\t    $(\".ui-bizagi-wp-bt-booking-theme\").show();\r\n\t\t    $(\"#user-profile\").hide(\"fast\");\r\n\t\t});\r\n\r\n\t\t$(\".ui-bizagi-wp-bt-booking-theme\", content).click(function () {\r\n\t\t    $(\"body\").append(\"<div id='workportal-theme-layer' ></div>\");\r\n\t\t    $(\"#workportal-theme-layer\").addClass(\"workportal-theme-layer-visible\");\r\n\r\n\t\t    //change to booking theme\r\n\t\t    window.CURRENT_THEME_REMOVE_IT = \"theme3\";\r\n\r\n\t\t    var home = bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_HOMEPORTAL;\r\n\r\n\t\t    self.publish(\"changeWidget\", {\r\n\t\t        widgetName: home\r\n\t\t    });\r\n\r\n\t\t    $(\".ui-bizagi-wp-bt-booking-theme\").hide();\r\n\t\t    $(\".ui-bizagi-wp-bt-classic-theme\").show();\r\n\t\t    $(\".ui-bizagi-wp-bt-modern-theme\").show();\r\n\t\t    $(\"#user-profile\").hide(\"fast\");\r\n\t\t});\r\n\r\n\t\t$(\"#logout\", content).click(function() {\r\n\r\n\t\t\t$.when(bizagi.util.autoSave()).done(function() {\r\n\t\t\t\t$(document).data('auto-save', '');\r\n\t\t\t\tself.dataService.logout();\r\n\t\t\t});\r\n        });\r\n\r\n\t\t$(\"#about\", content).click(function() {\r\n\t\t\tself.showAboutPopup();\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t * Binding for search field\r\n\t\t */\r\n\t\t$(inputSearchField).bind('keypress', function(e) {\r\n\t\t\tif(e.keyCode == 13) {\r\n\t\t\t\tvar searchValue = inputSearchField.val();\r\n\t\t\t\tif( searchValue != \"\" && searchValue != self.getResource(\"workportal-menu-search\")) {\r\n\t\t\t\t\tself.publish(\"executeAction\", {\r\n\t\t\t\t\t\taction: bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_SEARCH,\r\n\t\t\t\t\t\tradNumber: inputSearchField.val(),\r\n\t\t\t\t\t\tonlyUserWorkItems: false\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\tself.resetNavigatorInfo();\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t$(window).trigger(\"resize\");\r\n\r\n\t\treturn defer.promise();\r\n\t},\r\n\r\n\tresetNavigatorInfo: function () {\r\n\t\tbizagi.util.emptyNavigatorInfo();\r\n\t},\r\n\r\n\t/**\r\n\t *\tHighligth for active menu\r\n\t */\r\n\tsetActiveSection: function() {\r\n\t\tvar self = this;\r\n\r\n\t\t$(self).parent().find('li').removeClass('activeMenu');\r\n\t\t$(self).addClass('activeMenu');\r\n\t},\r\n\r\n\t/**\r\n\t * Show User profile menu\r\n\t */\r\n\tshowUserProfileMenu: function() {\r\n\t\tvar self = this;\r\n\t\tvar content = self.getContent();\r\n\t\tvar $userProfile = $(\"div#user-profile\", content);\r\n\r\n\t\t$userProfile.show(\"fast\", function() {\r\n\t\t\t$userProfile.click(function(e) {\r\n\t\t\t\te.stopPropagation();\r\n\t\t\t});\r\n\r\n\t\t});\r\n\r\n\t\t$(document).on(\"click\", function (e) {\r\n\r\n\t\t    if (!$(e.target).is(\"#user-profile\") && $(e.target).closest(\"#user\").length === 0) {\r\n\t\t        $userProfile.hide(\"fast\");\r\n\t\t    }\r\n\r\n\t\t    e.stopPropagation();\r\n\t\t});\r\n\t},\r\n    /*\r\n    * Show QR mobile authentication popup\r\n    */\r\n\tshowQRCodePopup: function () {\r\n\t    var self = this;\r\n\t    var url = this.dataService.serviceLocator.getUrl(\"login-qr-image64\");\r\n\r\n\t    $.ajax({\r\n\t        url: url,\r\n\t        success: function (data) {\r\n\t            var template = self.workportalFacade.getTemplate(\"menu.modal.qr\");\r\n\t            var popupContent = $.tmpl(template, {\r\n\t            });\r\n\t            $(popupContent).find(\"#QRCode\").attr(\"src\", \"data:image/png;base64,\" + data);\r\n\t            $(popupContent).dialog({\r\n\t                width: 590,\r\n\t                modal: true,\r\n\t                title: null,\r\n\t                dialogClass: \"qr-dialog\",\r\n\t                allowmaximize: false,\r\n\t                maximized: false,\r\n\t                resizable: false,\r\n\t                draggable: false\r\n\t            });\r\n\t        }\r\n\t    });\r\n\t},\r\n\t/**\r\n\t * Creates a generic menu popup\r\n\t * @param options\r\n\t */\r\n\tshowMenuPopup: function(options) {\r\n\t\tvar self = this;\r\n\t\tvar content = self.getContent();\r\n\t\tvar popup = new bizagi.workportal.desktop.popup(self.dataService, self.workportalFacade, {\r\n\t\t\tsourceElement: options.buttonSelector,\r\n\t\t\tmy: options.my || \"center top\",\r\n\t\t\tat: options.at || \"center bottom\",\r\n\t\t\toffset: options.offset,\r\n\t\t\theight: options.height,\r\n\t\t\twidth: options.width\r\n\t\t});\r\n\r\n\t\t// If the same popup is opened close it\r\n\t\tif(self.currentPopup == options.buttonSelector) {\r\n\t\t\tbizagi.workportal.desktop.popup.closePopupInstance();\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// Shows the popup\r\n\t\tself.currentPopup = options.buttonSelector;\r\n\t\tvar popupContent = self.workportalFacade.getTemplate(options.template);\r\n\t\tpopup.render(popupContent);\r\n\r\n\t\t// Adds the active class for buttons\r\n\t\t$(options.buttonSelector, content).addClass(\"active\");\r\n\r\n\t\t// Checks for close signal to change the class again\r\n\t\t$.when(popup.closed())\r\n\t\t\t.done(function() {\r\n\t\t\t\tself.currentPopup = null;\r\n\t\t\t\t$(options.buttonSelector, content).removeClass(\"active\");\r\n\t\t\t});\r\n\t},\r\n\r\n\t/**\r\n\t * Shows the user popup to access more options\r\n\t */\r\n\tshowUserPopup: function() {\r\n\t\tvar self = this;\r\n\t\tself.showMenuPopup({\r\n\t\t\tbuttonSelector: \"#ui-bizagi-wp-menu-username\",\r\n\t\t\ttemplate: \"menu.modal.user\",\r\n\t\t\toffset: \"0 0\",\r\n\t\t\theight: 80,\r\n\t\t\twidth: 90\r\n\t\t});\r\n\t},\r\n\r\n\t/**\r\n\t *  Shows the widgets popup to access all dynamic content\r\n\t * @param options\r\n\t */\r\n\tshowWidgetsPopup: function(options) {\r\n\t\toptions = options || {};\r\n\t\tvar self = this;\r\n\t\tself.showMenuPopup({\r\n\t\t\tbuttonSelector: options[\"buttonSelector\"] || \"#main_menu li#menuListWidget\",\r\n\t\t\ttemplate: options[\"template\"] || \"menu.modal.widgets\",\r\n\t\t\toffset: options[\"offset\"] || \"18 -34\",\r\n\t\t\theight: options[\"height\"] || 160,\r\n\t\t\twidth: options[\"width\"] || 175\r\n\t\t});\r\n\t},\r\n\r\n\t/**\r\n\t * Show new case popup to create a case\r\n\t */\r\n\tshowNewCasePopup: function() {\r\n\t\tvar self = this;\r\n\t\tvar content = self.getContent();\r\n\r\n\t\t// Switch buttonstyle\r\n\t\t$(\"#main_menu li#menuListNew\", content).addClass(\"active\");\r\n\r\n\t\t// If the same popup is opened close it\r\n\t\tif(self.currentPopup == \"newCase\") {\r\n\t\t\tbizagi.workportal.desktop.popup.closePopupInstance();\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// Shows a popup widget\r\n\t\tself.currentPopup = \"newCase\";\r\n\t\tself.publish(\"popupWidget\", {\r\n\t\t\twidgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_NEWCASE,\r\n\t\t\toptions: {\r\n\t\t\t\tsourceElement: \"#main_menu li#menuListNew\",\r\n\t\t\t\t'max-height': '746',\r\n\t\t\t\theight: 'auto',\r\n\t\t\t\twidth: '339',\r\n\t\t\t\toffset: \"18 -4\", //x y\r\n\t\t\t\tactiveScroll: false,\r\n\t\t\t\tclosed: function() {\r\n\t\t\t\t\tself.currentPopup = null;\r\n\t\t\t\t\t$(\"#main_menu li#menuListNew\", content).removeClass(\"active\");\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t},\r\n\r\n\t/**\r\n    *   Show new case popup to create a case\r\n    */\r\n    showMySearchPopup: function () {\r\n        var self = this;\r\n        var content = self.getContent();\r\n\r\n        // Switch buttonstyle\r\n        $(\"#ui-bizagi-wp-widget-searchContainer\", content).addClass(\"active\");\r\n\r\n        // If the same popup is opened close it\r\n        if (self.currentPopup == \"mySearch\") {\r\n            bizagi.workportal.desktop.popup.closePopupInstance();\r\n            return;\r\n        }\r\n\r\n        // Shows a popup widget\r\n        self.currentPopup = \"mySearch\";\r\n        self.publish(\"popupWidget\", {\r\n            widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_MYSEARCHLIST,\r\n            options: {\r\n                sourceElement: \"#ui-bizagi-wp-widget-searchContainer\",\r\n                'max-height': '346',\r\n                height: 'auto',\r\n                width: '339',\r\n                top: '52',\r\n                offset: \"18 10\",\r\n                activeScroll: true,\r\n                closed: function () {\r\n                    self.currentPopup = null;\r\n                    $(\"#ui-bizagi-wp-widget-searchContainer\", content).removeClass(\"active\");\r\n                }\r\n            }\r\n        });\r\n    },\r\n\r\n\t/**\r\n\t * Show new case popup to create a case\r\n\t */\r\n\tshowQueriesPopup: function() {\r\n\t\tvar self = this;\r\n\t\tvar content = self.getContent();\r\n\r\n\t\t// Switch buttonstyle\r\n\t\t$(\"#main_menu li#menuListQueries\", content).addClass(\"active\");\r\n\r\n\t\t// If the same popup is opened close it\r\n\t\tif(self.currentPopup == \"queries\") {\r\n\t\t\tbizagi.workportal.desktop.popup.closePopupInstance();\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tvar widgetName = bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_QUERIES;\r\n\t\tif(bizagi.util.parseBoolean(bizagi.override.disableFrankensteinQueryForms) == true) {\r\n\t\t\twidgetName = bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_QUERIES_DEFINITION;\r\n\t\t}\r\n\r\n\t\tbizagi.loader.start(\"queries\").then(function () {\r\n\t\t    // Shows a popup widget\r\n\t\t    self.currentPopup = \"queries\";\r\n\t\t    self.publish(\"popupWidget\", {\r\n\t\t\t    widgetName: widgetName,\r\n\t\t\t    options: {\r\n\t\t\t\t    sourceElement: \"#main_menu li#menuListQueries\",\r\n\t\t\t\t    'max-height': '346',\r\n\t\t\t\t    height: 'auto',\r\n\t\t\t\t    width: '339',\r\n\t\t\t\t    offset: \"18 -4\",\r\n\t\t\t\t    activeScroll: true,\r\n\t\t\t\t    closed: function() {\r\n\t\t\t\t\t    self.currentPopup = null;\r\n\t\t\t\t\t    $(\"#main_menu li#menuListQueries\", content).removeClass(\"active\");\r\n\t\t\t\t    }\r\n\t\t\t    }\r\n\t\t    });\r\n\t\t});\r\n\t},\r\n\r\n\t/**\r\n\t * Show popup with information about the product\r\n\t */\r\n\tshowAboutPopup: function() {\r\n\t\tvar self = this;\r\n\t\tvar template = self.workportalFacade.getTemplate(\"menu.modal.about\");\r\n\r\n        var argsTemplate = {\r\n            build: bizagi.loader.productBuildToAbout,\r\n            currentYear: bizagi.loader.currentYearVersion,\r\n            hostName: bizagiConfig.hostName || \"\"\r\n        };\r\n\r\n\t\tvar popupContent = $.tmpl(template, argsTemplate);\r\n\t\t$(popupContent).dialog({\r\n\t\t\twidth: 430,\r\n\t\t\theight: 200,\r\n\t\t\tmodal: true,\r\n\t\t\ttitle: bizagi.localization.getResource('workportal-menu-about'),\r\n            allowmaximize: false,\r\n\t\t\tmaximized: false,\r\n\t\t\tresizable: false,\r\n            draggable: false\r\n\t\t});\r\n\t},\r\n\r\n\t/**\r\n\t * Check permisions for category\r\n\t * @param data\r\n\t * @param key\r\n\t * @return {boolean}\r\n\t */\r\n\tcheckRootCategory: function(data, key) {\r\n\t\tif(data[\"permissions\"] != undefined) {\r\n\t\t\tfor(var i = 0; i < data[\"permissions\"].length; i++) {\r\n\t\t\t\tif(data[\"permissions\"][i][key] != undefined) {\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn false;\r\n\t},\r\n\r\n\t/**\r\n\t *\tGet root category\r\n\t * @param data\r\n\t * @param key\r\n\t * @return {*}\r\n\t */\r\n\tgetsRootCategory: function(data, key) {\r\n\t\tfor(var i = 0; i < data[\"permissions\"].length; i++) {\r\n\t\t\tif(data[\"permissions\"][i][key] != undefined) {\r\n\t\t\t\treturn data[\"permissions\"][i][key];\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn {};\r\n\t},\r\n\r\n\t/**\r\n\t * Get data for a category menu\r\n\t * @param data\r\n\t * @param category\r\n\t * @return {Array}\r\n\t */\r\n\tgetSubMenuData: function(data, category) {\r\n\t\tvar self = this;\r\n\t\tvar result = [];\r\n\t\tvar prefix = \"workportal-menu-submenu-\";\r\n\t\tdata = data || self.security.getRawData() || {};\r\n\t\t\r\n\t\tif(self.checkRootCategory(data, category)) {\r\n\t\t\t$.each(self.getsRootCategory(data, category), function(k, v) {\r\n\t\t\t\tif(v !== \"MultilanguageEntities\"){ //To avoid add in the menu an option that not exists\r\n\t\t\t\t\tresult.push(\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\"categoryKey\": v,\r\n\t\t\t\t\t\t\t\"categoryName\": self.getResource(prefix + v),\r\n\t\t\t\t\t\t\t\"categoryUrl\": self.dataService.getUrl({\r\n\t\t\t\t\t\t\t\t\"endPoint\": v\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t});\r\n\t\t}\r\n\t\t\r\n\t\treturn result;\r\n\t},\r\n\t/**\r\n\t * Render a submenu trough  BIZAGI_WORKPORTAL_WIDGET_SUBMENU\r\n\t */\r\n\trenderAdminMenu: function() {\r\n\t\tvar self = this;\r\n\t\tvar content = self.getContent();\r\n\t\tvar menuData = self.getSubMenuData(self.jsonSecurityList, \"Admin\");\r\n\r\n\t\t// Switch buttonstyle\r\n\t\t$(\"#main_menu li#menuListAdmin\", content).addClass(\"active\");\r\n\t\t// If the same popup is opened close it\r\n\t\tif(self.currentPopup == \"subMenu\") {\r\n\t\t    bizagi.workportal.desktop.popup.closePopupInstance();\r\n\t\t    self.currentPopup = null;\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t// Shows a popup widget\r\n\t\tself.currentPopup = \"subMenu\";\r\n        self.publish(\"popupWidget\", {\r\n\t\t\twidgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_SUBMENU,\r\n\t\t\toptions: {\r\n\t\t\t\tsourceElement: \"#main_menu li#menuListAdmin\",\r\n\t\t\t\t'max-height': '346',\r\n\t\t\t\theight: 'auto',\r\n\t\t\t\twidth: '339',\r\n\t\t\t\toffset: \"18 -4\",\r\n\t\t\t\tactiveScroll: true,\r\n\t\t\t\tclosed: function() {\r\n\t\t\t\t\tself.currentPopup = null;\r\n\t\t\t\t\t$(\"#main_menu li#menuListAdmin\", content).removeClass(\"active\");\r\n\t\t\t\t},\r\n\t\t\t\tmenuData: menuData\r\n\t\t\t}\r\n\t\t});\r\n\t},\r\n\r\n    /**\r\n     * Render Quick Process Menu\r\n     */\r\n\r\n    renderQuickProcessMenu: function(){\r\n        var self = this;\r\n\t\tvar content = self.getContent();\r\n\t\t\r\n\t\tvar menuData = self.getSubMenuData(self.jsonSecurityList, \"AdhocProcess\");\r\n\t\tvar menuValidator = {\r\n\t\t\tAdhocProcessAdmin: -1,\r\n\t\t\tAdhocUserGroupAdmin: -1\r\n\t\t};\r\n        for(var i = 0; i < menuData.length; i+=1){\r\n\t\t\t// Verify which permissions exist\r\n\t\t\tmenuValidator[menuData[i].categoryKey] = i;\r\n\t\t}\r\n\t\tif(menuValidator.AdhocProcessAdmin > -1){\r\n\t\t\t// Add the Create Process control\r\n\t\t\tmenuData.push({\r\n\t\t\t\t\"categoryKey\": \"AdhocCreateProcess\",\r\n\t\t\t\t\"categoryName\": self.getResource(\"workportal-menu-submenu-AdhocCreateProcess\"),\r\n\t\t\t\t\"categoryUrl\": undefined\r\n\t\t\t});\r\n\t\t}\r\n\r\n        // Switch buttonstyle\r\n        $(\"#main_menu li#menuListQuickProcess\", content).addClass(\"active\");\r\n        // If the same popup is opened close it\r\n        if(self.currentPopup == \"subMenu\") {\r\n            bizagi.workportal.desktop.popup.closePopupInstance();\r\n            self.currentPopup = null;\r\n            return;\r\n        }\r\n        // Shows a popup widget\r\n\t\tself.currentPopup = \"subMenu\";\r\n\t\t\r\n        self.publish(\"popupWidget\", {\r\n            widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_SUBMENU,\r\n            options: {\r\n                sourceElement: \"#main_menu li#menuListQuickProcess\",\r\n                'max-height': '346',\r\n                height: 'auto',\r\n                width: '339',\r\n                offset: \"18 -4\",\r\n                activeScroll: true,\r\n                closed: function() {\r\n                    self.currentPopup = null;\r\n                    $(\"#main_menu li#menuListQuickProcess\", content).removeClass(\"active\");\r\n                },\r\n                menuData: menuData\r\n            }\r\n        });\r\n    },\r\n\r\n\t/**\r\n\t * Render BAM Reports\r\n\t */\r\n\trenderReportsMenu: function() {\r\n\t\tvar self = this;\r\n\t\tvar content = self.getContent();\r\n\r\n\t\tbizagi.loader.start(\"reports\").then(function () {\r\n\t\t    var widget = (!bizagi.util.isIE8()) ? bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_REPORTS_MENU : bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_REPORTS;\r\n\t\t    // Switch buttonstyle\r\n\t\t    $(\"#main_menu li#menuListReports\", content).addClass(\"active\");\r\n\r\n\t\t    // If the same popup is opened close it\r\n\t\t    if(self.currentPopup == \"subMenu\") {\r\n\t\t\t    bizagi.workportal.desktop.popup.closePopupInstance();\r\n\t\t\t    return;\r\n\t\t    }\r\n\r\n\t\t    // Shows a popup widget\r\n\t\t    self.currentPopup = \"subMenu\";\r\n\t\t    self.publish(\"popupWidget\", {\r\n\t\t\t    widgetName: widget,\r\n\t\t\t    options: {\r\n\t\t\t\t    sourceElement: \"#main_menu li#menuListReports\",\r\n\t\t\t\t    'max-height': '346',\r\n\t\t\t\t    height: 'auto',\r\n\t\t\t\t    width: '339',\r\n\t\t\t\t    offset: \"18 -4\",\r\n\t\t\t\t    activeScroll: true,\r\n\t\t\t\t    closed: function() {\r\n\t\t\t\t\t    self.currentPopup = null;\r\n\t\t\t\t\t    $(\"#main_menu li#menuListReports\", content).removeClass(\"active\");\r\n\t\t\t\t    }\r\n\t\t\t\t    ,\r\n\t\t\t\t    menuData: self.getSubMenuData(self.jsonSecurityList, \"AnalysisReports\")\r\n\t\t\t    }\r\n\t\t    });\r\n\t\t});\r\n\t},\r\n\r\n\t/**\r\n\t * Shows the options for font size\r\n\t */\r\n\trenderFontMenu: function() {\r\n\t\tvar self = this;\r\n\t\tvar content = self.getContent();\r\n\r\n\t\t// Switch buttonstyle\r\n\t\t$(\".ui-bizagi-wp-bt-font\", content).addClass(\"active\");\r\n\r\n\t\t// If the same popup is opened close it\r\n\t\tif(self.currentPopup == \"fontsize\") {\r\n\t\t\tbizagi.workportal.desktop.popup.closePopupInstance();\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// Shows a popup widget\r\n\t\tself.currentPopup = \"fontsize\";\r\n\t\tself.publish(\"popupWidget\", {\r\n\t\t\twidgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_FONTSIZE,\r\n\t\t\toptions: {\r\n\t\t\t\tsourceElement: \".ui-bizagi-wp-bt-font\",\r\n\t\t\t\toffset: \"0 16\",\r\n\t\t\t\tclosed: function() {\r\n\t\t\t\t\tself.currentPopup = null;\r\n\t\t\t\t\t$(\".ui-bizagi-wp-bt-font\", content).removeClass(\"active\");\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\t\t});\r\n\t},\r\n\r\n\t/**\r\n\t * Renders a custom sub-menu\r\n\t * @param menuButton\r\n\t * @param submenu\r\n\t * @param callback\r\n\t */\r\n\trenderSubMenu: function(menuButton, submenu, callback) {\r\n\t\tvar self = this;\r\n\t\tvar content = self.getContent();\r\n\t\tvar menuData = [];\r\n\r\n\t\t// Transform menu data\r\n\t\tfor (i in submenu) {\r\n\t\t    if (submenu.hasOwnProperty(i)) {\r\n\t\t        menuData.push({\r\n\t\t            categoryKey: submenu[i].id,\r\n\t\t            categoryName: submenu[i].text,\r\n\t\t            categoryClassName: submenu[i].className\r\n\t\t        });\r\n\t\t    }\r\n\t\t}\r\n\r\n\t\t// Switch buttonstyle\r\n\t\tmenuButton.addClass(\"active\");\r\n\r\n\t\t// If the same popup is opened close it\r\n\t\tif(self.currentPopup == \"subMenu\") {\r\n\t\t\tbizagi.workportal.desktop.popup.closePopupInstance();\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// Shows a popup widget\r\n\t\tself.currentPopup = \"subMenu\";\r\n\t\tself.publish(\"popupWidget\", {\r\n\t\t\twidgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_SUBMENU,\r\n\t\t\toptions: {\r\n\t\t\t\tsourceElement: menuButton,\r\n\t\t\t\t'max-height': '346',\r\n\t\t\t\theight: 'auto',\r\n\t\t\t\twidth: '339',\r\n\t\t\t\toffset: \"18 -4\",\r\n\t\t\t\tactiveScroll: true,\r\n\t\t\t\tclosed: function() {\r\n\t\t\t\t\tself.currentPopup = null;\r\n\t\t\t\t\tmenuButton.removeClass(\"active\");\r\n\t\t\t\t},\r\n\t\t\t\tmenuData: menuData,\r\n\t\t\t\tcustomClickHandler: function(id) {\r\n\t\t\t\t\tif(callback)\r\n\t\t\t\t\t\tcallback(self, id);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t},\r\n\r\n\t/**\r\n\t * Show popup for entities\r\n\t * @param url\r\n\t * @todo Check if this method has any active dependency\r\n\t */\r\n\tshowEntitiesPopup: function(url) {\r\n\t\tvar self = this;\r\n\t\tvar content = self.getContent();\r\n\r\n\r\n\t\t// Switch buttonstyle\r\n\t\t$(\"#main_menu li#temp\", content).addClass(\"active\");\r\n\r\n\t\t// If the same popup is opened close it\r\n\t\tif(self.currentPopup == \"genericiframe\") {\r\n\t\t\tbizagi.workportal.desktop.popup.closePopupInstance();\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// Shows a popup widget\r\n\t\tself.currentPopup = \"genericiframe\";\r\n\t\tself.publish(\"showDialogWidget\", {\r\n\t\t\twidgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_GENERICIFRAME,\r\n\t\t\twidgetURL: url\r\n\t\t});\r\n\t}\r\n});\r\n","/*\r\n*   Name: BizAgi Workportal Desktop Workarea Controller\r\n*   Author: Diego Parra \r\n*   Comments:\r\n*   -   This script will override workarea controller class to apply custom stuff just for desktop device\r\n*/\r\n\r\n// Auto extend\r\nbizagi.workportal.controllers.main.extend(\"bizagi.workportal.controllers.main\", {}, {\r\n    \r\n});\r\n","/*\r\n*   Name: BizAgi Desktop Popup Implementation\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will shows a widget inside a popup box\r\n*/\r\n\r\n// Bind resize window\r\n$(window).bind(\"resize\",function(){                             \r\n        bizagi.workportal.desktop.popup.closePopupInstance();          \r\n});\r\n\r\n// Extends itself\r\n$.Class.extend(\"bizagi.workportal.desktop.popup\", {\r\n\r\n    /*\r\n    *   Static method that will return the current popup instance\r\n    */\r\n    closePopupInstance: function () {\r\n        if (bizagi.workportal.desktop.popup.instance) {\r\n            bizagi.workportal.desktop.popup.instance.close();\r\n        }\r\n    }\r\n}, {\r\n\r\n    /* \r\n    *   Constructor\r\n    */\r\n    init: function (dataService, workportalFacade, options) {\r\n        this.dataService = dataService;\r\n        this.workportalFacade = workportalFacade;\r\n\r\n        // Set display options\r\n        options = options || {};\r\n        this.sourceElement = options.sourceElement;\r\n        this.my = options.my || \"center top\";\r\n        this.at = options.at || \"center bottom\";\r\n        this.offset = options.offset || \"18 -20\";\r\n        this.activeScroll = options.activeScroll || false;\r\n        this.arrowPosition = options.arrowPosition || false;\r\n        if(options.position) {\r\n            this.position = options.position;\r\n        }\r\n        if(options.insertAfter) {\r\n            this.insertAfter = options.insertAfter;\r\n        }\r\n\r\n        // This option is only to help graphics designers on dummy pages\r\n        this.dontClose = options.dontClose || false;\r\n\r\n        // TODO: implement scroll for personalised container\r\n        this.scrollElement = options.scrollElement || \".content\";\r\n    },\r\n\r\n    /*\r\n    *   Renders some content inside a popup\r\n    *   Return a deferred to check when the popup closes\r\n    */\r\n    render: function (content, params) {\r\n        var self = this;\r\n        var doc = window.document;\r\n        var template = self.workportalFacade.getTemplate(\"popup\");\r\n\r\n        params = params || {};\r\n\r\n        // Creates an instance deferred to be resolved when the popup closes\r\n        self.closeDeferred = new $.Deferred();\r\n\r\n        // Check if there are any popup open so we close first those instances\r\n        self.Class.closePopupInstance();\r\n\r\n        // Add to popup instances\r\n        bizagi.workportal.desktop.popup.instance = this;\r\n\r\n        // Extend Parameters\r\n        $.extend(params, params, { activeScroll: self.activeScroll });\r\n\r\n        // Append content into a div\r\n        self.popup = $.tmpl(template, params);\r\n        $(\".content\", self.popup).append(content);\r\n        \r\n        if(self.insertAfter) {\r\n            $(self.insertAfter).after(self.popup);\r\n        } else {\r\n            self.popup.appendTo(\"body\", doc);\r\n        }\r\n\r\n        // Create popup box\r\n        self.showPopup(self.popup);\r\n    },\r\n\r\n    /*\r\n    *   Shows the popup box in the browser\r\n    */\r\n    showPopup: function (popup) {\r\n        var doc = window.document;\r\n        var self = this;\r\n\r\n        // Set width and height\r\n        if (self.popupWidth) popup.width(self.popupWidth);\r\n        if (self.popupHeight) popup.height(self.popupHeight);\r\n\r\n        // Locate over element\r\n        if (self.sourceElement) {\r\n            if(self.insertAfter) {\r\n                popup.find(\".selectarrow\").hide();\r\n                popup.css({\r\n                    display: \"inline-block\",\r\n                    \"float\": \"left\",\r\n                    position: \"relative\",\r\n                    left: \"37%\",\r\n                    top: \"20px\",\r\n                    \"z-index\" : 1\r\n                });\r\n            } else {\r\n                popup.position({\r\n                    my: self.my,\r\n                    at: self.at,\r\n                    of: $(self.sourceElement),\r\n                    collision: \"none\",\r\n                    offset: self.offset\r\n                });\r\n                if(self.position) {\r\n                    popup.css(\"position\", self.position);\r\n                }\r\n            }\r\n        } else {\r\n            popup.css(\"left\", ($(window).width() - popup.width()) / 2);\r\n            popup.css(\"top\", ($(window).height() - popup.height()) / 2);\r\n        }\r\n\r\n\t\t// Move arrow\r\n\t\tif(self.arrowPosition){\r\n\t\t\tvar arrow = $(\".selectarrow\",popup);\r\n\t\t\tarrow.css(self.arrowPosition);\r\n\t\t}\r\n\r\n        // Define handler to close the item\r\n        setTimeout(function () {\r\n            // Capture all click elements inside the popup\r\n            popup.click(function (e) {\r\n                if(!bizagi.workportal.desktop.popup.instance){\r\n                    self.close();\r\n                }\r\n                e.stopPropagation();\r\n            });\r\n\r\n            // Make a document click, if the event bubbles up to here then the click was made outside popup boundaries\r\n            $(doc).one(\"click\", function() {\r\n                self.close();\r\n            });\r\n        }, 100);\r\n    },\r\n\r\n    /*\r\n    *   Returns the instance deferred to hold executions until \r\n    *   the popup is closed\r\n    */\r\n    closed: function () {\r\n        var self = this;\r\n        return self.closeDeferred;\r\n    },\r\n\r\n    /*\r\n    *   Forces to close the popup\r\n    */\r\n    close: function () {\r\n        var doc = window.document;\r\n        var self = this;\r\n\r\n        // Just for testing purposes - used in complexgateway\r\n        if (this.dontClose) return;\r\n        \r\n        //$(doc).unbind(\"click\"); Comment for prevent disable others click event\r\n\r\n        // Removes element\r\n        self.popup.remove();\r\n        bizagi.workportal.desktop.popup.instance = null;\r\n\r\n        // Resolve deferred\r\n        self.closeDeferred.resolve();\r\n    },\r\n\r\n    /*\r\n    *   Returns the popup content\r\n    */\r\n    getContent: function () {\r\n        var self = this;\r\n        return self.popup;\r\n    }\r\n\r\n});\r\n","/*\r\n*   Name: BizAgi Workportal Desktop Print Version Widget Controller\r\n*   Author: Edward Morales\r\n*   Comments:\r\n*   -   This script will provide desktop overrides to implement the print version\r\n*/\r\n\r\n// Auto extend\r\nbizagi.workportal.widgets.print.extend(\"bizagi.workportal.widgets.print\", {}, {\r\n\r\n    init: function (workportalFacade, dataService, params) {\r\n        var self = this;\r\n\r\n        // Call base\r\n        self._super(workportalFacade, dataService, params);\r\n\r\n        //Load templates\r\n        self.loadTemplates({\r\n            \"print\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.print\").concat(\"#bz-wp-widget-print\"),\r\n            useNewEngine: false\r\n        });\r\n    },\r\n\r\n    /**\r\n    *   To be overriden in each device to apply layouts\r\n    */\r\n    postRender: function () {\r\n        var self = this;\r\n        var content = self.getContent();\r\n\r\n\r\n        var proxyPrefix = (typeof (self.dataService.serviceLocator.proxyPrefix) != undefined) ? self.dataService.serviceLocator.proxyPrefix : \"\";\r\n        // Load render page\r\n        var facade = new bizagi.rendering.facade({ \"proxyPrefix\": proxyPrefix });\r\n\r\n        //Print all grid rows\r\n        var configParams = { p_all_rows: 1000000 };\r\n\r\n        $.when(facade.execute($.extend({\r\n                    canvas: content,\r\n                    printversion: true\r\n                }, $.extend(self.params.params, configParams)))).done(function () {\r\n\r\n                    // Remove Tabs elements\r\n                    self.formatTabs();\r\n\r\n                    // Remove Group elements\r\n                    self.formatGroups();\r\n\r\n                    self.appendCaseDetails();\r\n\r\n                    // Remove events to ECM control\r\n                    self.formatECM();\r\n\r\n                    // Remove events to button control\r\n                    self.formatButton();\r\n\r\n                    // format grid\r\n                    self.formatGrid();\r\n\r\n                    // format renders\r\n                    self.formatRenderContainer();\r\n\r\n                    // Remove bottons save and next\r\n                    $(\".ui-bizagi-button-container\", content).remove();\r\n\r\n                });\r\n    },\r\n\r\n    formatTabs: function () {\r\n        var self = this,\r\n\t    formatContent = $(\"<div>\"),\r\n\t    i = 0,\r\n\t    control = self.getContent(),\r\n\t    tabElement = $('.ui-tabs', control);\r\n\r\n        // Destroy tabs\r\n        $.each(tabElement, function () {\r\n\r\n            // Reorder tabs content\r\n            var ul = $('ul', $(this)); // header elements\r\n            var labels = $('>div', $(this)); // page elements\r\n\r\n            $.each($('li', ul), function () {\r\n                // Select all tabs element to force the content loading\r\n                tabElement.tabs(\"option\", \"active\", i);\r\n\r\n                // add header to final content\r\n                $(formatContent).append('<h3>' + $(this).text() + '</h3>');\r\n\r\n                // Add content to final content\r\n                $(formatContent).append(labels[i++]);\r\n            });\r\n\r\n            // Empty old content and append formated\r\n            $('.ui-tabs', control).empty();\r\n            $('.ui-tabs', control).append(formatContent);\r\n            tabElement.tabs(\"destroy\");\r\n        });\r\n    },\r\n\r\n    /* APPEND CASE DETAILS\r\n    =====================================================*/\r\n    appendCaseDetails: function () {\r\n        var self = this;\r\n        var control = self.getContent();\r\n\r\n        self.dataService.summaryCaseDetails({\r\n            idCase: self.params.params.idCase\r\n        }).done(function (data) {\r\n\r\n            var getState = function (idWorkItem, currentState) {\r\n                var state = \"\";\r\n                $.each(currentState, function (key, value) {\r\n                    if (value.idWorkItem == idWorkItem) {\r\n                        state = value.state || value.displayName;\r\n                    }\r\n                });\r\n                return state;\r\n            }\r\n            // Process Metadata\r\n            var $caseDetails = $('<ul></ul>').addClass('ui-bz-print-case-details');\r\n\r\n            // Case Number\r\n            $('<li></li>').text(self.resources.getResource('workportal-widget-inboxcommon-case-number') + ' ' + data.caseNumber).appendTo($caseDetails);\r\n\r\n            // task\r\n            if (self.params && self.params.params && self.params.params.idWorkitem != 0) {\r\n                $('<li></li>').text(self.resources.getResource('workportal-widget-inboxcommon-activities-name') + ' ' + getState(self.params.params.idWorkitem, data.currentState)).appendTo($caseDetails);\r\n            }\r\n            // Created by\r\n            $('<li></li>').text(self.resources.getResource('workportal-widget-inboxcommon-created-by') + ' ' + data.createdBy.Name).appendTo($caseDetails);\r\n\r\n            // Creation date\r\n            $('<li></li>').html(self.resources.getResource('workportal-widget-inboxcommon-creation-date') + '<span class=\\\"formatDate\\\">' + data.creationDate + \"</span>\").appendTo($caseDetails);\r\n\r\n            // State expires on\r\n            if (typeof data.estimatedSolutionDate != \"undefined\") {\r\n                $('<li></li>').html(self.resources.getResource('workportal-widget-inboxcommon-state-expires-on') + '<span class=\\\"formatDate\\\">' + data.estimatedSolutionDate + \"</span>\").appendTo($caseDetails);\r\n            }\r\n\r\n            function setProcess(process){\r\n                $('<li></li>').text(self.resources.getResource('workportal-widget-inboxcommon-process') + ' ' + process).appendTo($caseDetails);\r\n            }\r\n            // Process\r\n            if(data.idPlan){\r\n                $.when(self.dataService.getPlan({ idPlan: data.idPlan })).done(function (responsePlan) {\r\n                    setProcess(responsePlan.name);\r\n                });\r\n            }\r\n            else{\r\n                setProcess(data.process)\r\n            }\r\n\r\n            // Process path\r\n            if(data.processPath && data.processPath !== \"undefined\"){\r\n                $('<li></li>').text(self.resources.getResource('workportal-widget-inboxcommon-process-path') + ' ' + data.processPath).appendTo($caseDetails);\r\n            }\r\n\r\n            // Append data\r\n            $('.ui-bizagi-container:first', control).prepend($caseDetails);\r\n\r\n            //Format dates\r\n            bizagi.util.formatInvariantDate(control, self.getResource(\"dateFormat\") + \" \" + self.getResource(\"timeFormat\"));\r\n        });\r\n    },\r\n\r\n    formatGroups: function () {\r\n        var self = this,\r\n\t       control = self.getContent(),\r\n\t       container = $('h3.ui-bizagi-container-group-header', control);\r\n\r\n        $.each(container, function () {\r\n            var containerText = $(this).text();\r\n\r\n            // Get html to container and convert to plain text\r\n            $(this).empty();\r\n            $(this).append(containerText)\r\n        });\r\n    },\r\n\r\n\r\n    /**\r\n    * Format ECM control\r\n    */\r\n    formatECM: function () {\r\n        var self = this,\r\n\t       control = self.getContent(),\r\n\t       container = $('.ui-bizagi-render-upload', control);\r\n\r\n        $(container).bind('ecmLoaded', function (cont) {\r\n            var image = $('img', cont.container);\r\n            var file = $(\".filename a:last\", cont.container);\r\n            var value = $(file).parent('li').text().replace(/^\\s+|\\s+$/g, \"\");\r\n\r\n            // Remove click event to image\r\n            image.unbind('click');\r\n\r\n            // Remove click event to link an parse value\r\n            file.unbind('click');\r\n            $(file).parent('li').text(value);\r\n\r\n        });\r\n    },\r\n\r\n    /**\r\n    * Format Button Control\r\n    */\r\n    formatButton: function () {\r\n        var self = this,\r\n\t    control = self.getContent(),\r\n\t    buttons = $('.ui-bizagi-render-button', control);\r\n\r\n        $.each(buttons, function (k, button) {\r\n            var value = $(button).val();\r\n\t        var parentContainer = $(button).parent();\r\n            $(parentContainer).empty();\r\n            $(parentContainer).append(\"<div class='ui-bizagi-render-button'>\" + value + \"</div>\");\r\n        });\r\n    },\r\n\r\n    /**\r\n    *  Format Grid Control\r\n    */\r\n    formatGrid: function () {\r\n        var self = this,\r\n\t    control = self.getContent(),\r\n        tableControl = $('.ui-bizagi-grid-table', control);\r\n        pageContent = $('.ui-pg-table', control),\r\n\t    closeButton = $('.ui-jqgrid-titlebar-close', control);\r\n\r\n        // Clean paginator\r\n        /*$.each(pageContent, function () {\r\n        $(\"td:not[align='left'],td:not[align='center']\", $(this)).remove();\r\n        });*/\r\n\r\n        $(\"th.ui-bizagi-column-hidden, th.ui-bizagi-grid-key, td.ui-bizagi-grid-key, .bz-rn-grid-container-foother\", control).remove();\r\n\r\n        //Remove click event\r\n        $(\"[data-action], ul li, .ui-bizagi-grid-column, tr, th\", tableControl).unbind(\"click\");\r\n        // Remove close button\r\n        $(closeButton).remove();\r\n    },\r\n\r\n    /**\r\n    *   Format Render Style\r\n    */\r\n\r\n    formatRenderContainer: function () {\r\n        var self = this,\r\n        control = self.getContent();\r\n        $('.ui-bizagi-notifications-container', control).remove();\r\n    }\r\n});\r\n","/*\r\n*   Name: BizAgi Desktop Popup Widget Implementation\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will shows a widget inside a popup box\r\n*/\r\n\r\n// Extends itself\r\nbizagi.workportal.desktop.popup.extend(\"bizagi.workportal.desktop.widgets.popup\", { }, {\r\n\r\n    /*\r\n    *   Render the Widget\r\n    *   Returns a deferred\r\n    */\r\n    renderWidget: function (params) {\r\n        var self = this;\r\n        var widget;\r\n        // Creates widget\r\n        $.when(\r\n            self.workportalFacade.getWidget(params.widgetName, params)\r\n\r\n        ).pipe(function (result) {\r\n            // Renders widget\r\n            widget = result;\r\n            // register\r\n            self.register(widget);\r\n            return widget.render();\r\n\r\n        }).done(function () {\r\n            var content = widget.getContent();\r\n\r\n            // Renders content\r\n            self.render(content, params.options);\r\n        });\r\n    },\r\n    \r\n    register : function(widget) {\r\n        var self = this;\r\n        if(widget.registerCallback) {\r\n            widget.registerCallback(self);\r\n        }\r\n    }\r\n\r\n});\r\n","    /**\r\n *   Name: Bizagi Workportal Desktop HomePortal Controller\r\n *   Author: Manuel Mejia\r\n */\r\n\r\n/**\r\n *  CD: Case Dashboard, example: toLeftSidebarCD: To left sidebar Case dashboard\r\n */\r\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.homeportal\", {\r\n    contexts: {\r\n        \"HOME\": {\r\n            widgets: {\r\n                \"dashboard\": {\r\n                    \"layout\": \"content\",\r\n                    \"name\": \"bizagi.workportal.widgets.dashboard\"\r\n                },\r\n                \"stuff\": {\r\n                    \"layout\": \"dashboard\",\r\n                    \"name\": \"bizagi.workportal.widgets.stuff\",\r\n                    \"canvas\": \"stuff\"\r\n                },\r\n                \"plans\": {\r\n                    \"layout\": \"dashboard\",\r\n                    \"name\": \"bizagi.workportal.widgets.decontextualized.plans\",\r\n                    \"canvas\": \"plans\"\r\n                },\r\n                \"navigator\": {\r\n                    \"layout\": \"navigator\",\r\n                    \"name\": \"bizagi.workportal.widgets.navigator\",\r\n                    \"refresh\": false\r\n                },\r\n                \"sidebar\": {\r\n                    \"layout\": \"leftsidebar\",\r\n                    \"name\": \"bizagi.workportal.widgets.sidebarhome\"\r\n                },\r\n                \"usersummary\": {\r\n                    \"layout\": \"sidebar\",\r\n                    \"name\": \"bizagi.workportal.widgets.usersummary\",\r\n                    \"canvas\": \"content1\"\r\n                },\r\n                \"myshortcuts\": {\r\n                    \"layout\": \"sidebar\",\r\n                    \"name\": \"bizagi.workportal.widgets.shortcuts\",\r\n                    \"canvas\": \"content2\"\r\n                },\r\n                \"rightSidebar\": {\r\n                    \"layout\": \"contentrightsidebar\",\r\n                    \"name\": \"bizagi.workportal.widgets.right.sidebar\"\r\n                },\r\n                \"empty1\": { layout: \"rightSidebar\", name: \"bizagi.workportal.widgets.dummy\", canvas: \"sidebarcontent1\" },\r\n                \"empty2\": { layout: \"rightSidebar\", name: \"bizagi.workportal.widgets.dummy\", canvas: \"sidebarcontentextra\" }\r\n\r\n            },\r\n            nav: { level: 0 },\r\n            belongs: { \"toLeftSidebarCD\": false, \"toRightSidebarCD\": false, \"toTaskSidebarCD\": false }\r\n        },\r\n\r\n        \"TEMPLATEENGINE-VIEW\": {\r\n            widgets: {\r\n                \"templates\": {\r\n                    \"layout\": \"content\",\r\n                    \"name\": \"bizagi.workportal.widgets.templates\"\r\n                },\r\n                \"navigator\": {\r\n                    \"layout\": \"navigator\",\r\n                    \"name\": \"bizagi.workportal.widgets.navigator\",\r\n                    \"refresh\": false\r\n                },\r\n                \"paginator\": {\r\n                    \"layout\": \"templates\",\r\n                    \"name\": \"bizagi.workportal.widgets.paginator\",\r\n                    \"canvas\": \"paginator\"\r\n                },\r\n                \"sortbar\": {\r\n                    \"layout\": \"templates\",\r\n                    \"name\": \"bizagi.workportal.widgets.sortbar\",\r\n                    \"canvas\": \"sortbar\"\r\n                },\r\n                \"mysearchfilter\": {\r\n                    \"layout\": \"templates\",\r\n                    \"name\": \"bizagi.workportal.widgets.mysearchfilter\",\r\n                    \"canvas\": \"mysearchfilter\"\r\n                },\r\n                \"sidebar\": {\r\n                    \"layout\": \"leftsidebar\",\r\n                    \"name\": \"bizagi.workportal.widgets.sidebar\"\r\n                },\r\n                \"stuff\": {\r\n                    \"layout\": \"sidebar\",\r\n                    \"name\": \"bizagi.workportal.widgets.stuff\",\r\n                    \"canvas\": \"content1\"\r\n                },\r\n                \"rightSidebar\": {\r\n                    \"layout\": \"contentrightsidebar\",\r\n                    \"name\": \"bizagi.workportal.widgets.right.sidebar\"\r\n                },\r\n                \"empty1\": { layout: \"rightSidebar\", name: \"bizagi.workportal.widgets.dummy\", canvas: \"sidebarcontent1\" },\r\n                \"empty2\": { layout: \"rightSidebar\", name: \"bizagi.workportal.widgets.dummy\", canvas: \"sidebarcontentextra\" }\r\n            },\r\n            nav: { level: 1 },\r\n            belongs: { \"toLeftSidebarCD\": false, \"toRightSidebarCD\": false, \"toTaskSidebarCD\": false }\r\n        },\r\n\r\n        \"ENTITY-ENGINE-VIEW\": {\r\n            widgets: {\r\n                \"templates\": {\r\n                    \"layout\": \"content\",\r\n                    \"name\": \"bizagi.workportal.widgets.templates\"\r\n                },\r\n                \"navigator\": {\r\n                    \"layout\": \"navigator\",\r\n                    \"name\": \"bizagi.workportal.widgets.navigator\",\r\n                    \"refresh\": false\r\n                },\r\n                \"sidebar\": {\r\n                    \"layout\": \"leftsidebar\",\r\n                    \"name\": \"bizagi.workportal.widgets.sidebar\"\r\n                },\r\n                \"stuff\": {\r\n                    \"layout\": \"sidebar\",\r\n                    \"name\": \"bizagi.workportal.widgets.stuff\",\r\n                    \"canvas\": \"content1\"\r\n                },\r\n                \"rightSidebar\": {\r\n                    \"layout\": \"contentrightsidebar\",\r\n                    \"name\": \"bizagi.workportal.widgets.right.sidebar\"\r\n                },\r\n                \"empty1\": { layout: \"rightSidebar\", name: \"bizagi.workportal.widgets.dummy\", canvas: \"sidebarcontent1\" },\r\n                \"empty2\": { layout: \"rightSidebar\", name: \"bizagi.workportal.widgets.dummy\", canvas: \"sidebarcontentextra\" }\r\n            },\r\n            nav: { level: 1 },\r\n            belongs: { \"toLeftSidebarCD\": false, \"toRightSidebarCD\": false, \"toTaskSidebarCD\": false }\r\n        },\r\n\r\n        \"SEARCH-ENGINE-VIEW\": {\r\n            widgets: {\r\n                \"templates\": {\r\n                    \"layout\": \"content\",\r\n                    \"name\": \"bizagi.workportal.widgets.templates\"\r\n                },\r\n                \"paginator\": {\r\n                    \"layout\": \"templates\",\r\n                    \"name\": \"bizagi.workportal.widgets.paginator\",\r\n                    \"canvas\": \"paginator\"\r\n                },\r\n                \"sortbar\": {\r\n                    \"layout\": \"templates\",\r\n                    \"name\": \"bizagi.workportal.widgets.sortbar\",\r\n                    \"canvas\": \"sortbar\"\r\n                },\r\n                \"mysearchfilter\": {\r\n                    \"layout\": \"templates\",\r\n                    \"name\": \"bizagi.workportal.widgets.mysearchfilter\",\r\n                    \"canvas\": \"mysearchfilter\"\r\n                },\r\n                \"sidebar\": {\r\n                    \"layout\": \"leftsidebar\",\r\n                    \"name\": \"bizagi.workportal.widgets.sidebar\"\r\n                },\r\n                \"mysearchcriteria\": {\r\n                    \"layout\": \"sidebar\",\r\n                    \"name\": \"bizagi.workportal.widgets.mysearchcriteria\",\r\n                    \"canvas\": \"content1\"\r\n                },\r\n                \"rightSidebar\": {\r\n                    \"layout\": \"contentrightsidebar\",\r\n                    \"name\": \"bizagi.workportal.widgets.right.sidebar\"\r\n                },\r\n                \"empty1\": { layout: \"rightSidebar\", name: \"bizagi.workportal.widgets.dummy\", canvas: \"sidebarcontent1\" },\r\n                \"empty2\": { layout: \"rightSidebar\", name: \"bizagi.workportal.widgets.dummy\", canvas: \"sidebarcontentextra\" }\r\n            },\r\n            nav: { level: 1 },\r\n            belongs: { \"toLeftSidebarCD\": false, \"toRightSidebarCD\": false, \"toTaskSidebarCD\": false }\r\n        },\r\n\r\n        \"CASES-TEMPLATE-VIEW\": {\r\n            widgets: {\r\n                \"templates\": {\r\n                    \"layout\": \"content\",\r\n                    \"name\": \"bizagi.workportal.widgets.casestemplate\"\r\n                },\r\n                \"navigator\": {\r\n                    \"layout\": \"navigator\",\r\n                    \"name\": \"bizagi.workportal.widgets.navigator\",\r\n                    \"refresh\": false\r\n                },\r\n                \"paginator\": {\r\n                    \"layout\": \"templates\",\r\n                    \"name\": \"bizagi.workportal.widgets.paginator\",\r\n                    \"canvas\": \"paginator\"\r\n                },\r\n                \"sortbar\": {\r\n                    \"layout\": \"templates\",\r\n                    \"name\": \"bizagi.workportal.widgets.sortbar\",\r\n                    \"canvas\": \"sortbar\"\r\n                },\r\n                \"sidebar\": {\r\n                    \"layout\": \"leftsidebar\",\r\n                    \"name\": \"bizagi.workportal.widgets.sidebar\"\r\n                },\r\n                \"proccesseslist\": {\r\n                    \"layout\": \"sidebar\",\r\n                    \"name\": \"bizagi.workportal.widgets.processeslist\",\r\n                    \"canvas\": \"content1\"\r\n                },\r\n                \"filtercases\": {\r\n                    \"layout\": \"sidebar\",\r\n                    \"name\": \"bizagi.workportal.widgets.filtercases\",\r\n                    \"canvas\": \"sidebarfooter\"\r\n                },\r\n                \"rightSidebar\": {\r\n                    \"layout\": \"contentrightsidebar\",\r\n                    \"name\": \"bizagi.workportal.widgets.right.sidebar\"\r\n                },\r\n                \"empty1\": { layout: \"rightSidebar\", name: \"bizagi.workportal.widgets.dummy\", canvas: \"sidebarcontent1\" },\r\n                \"empty2\": { layout: \"rightSidebar\", name: \"bizagi.workportal.widgets.dummy\", canvas: \"sidebarcontentextra\" }\r\n            },\r\n            nav: { level: 1 },\r\n            belongs: { \"toLeftSidebarCD\": false, \"toRightSidebarCD\": false, \"toTaskSidebarCD\": false }\r\n        },\r\n        \"PLANS-VIEW\": {\r\n            widgets: {\r\n                \"topmenu\": {\r\n                    \"layout\": \"content\",\r\n                    \"name\": \"bizagi.workportal.widgets.plans.topmenu\"\r\n                },\r\n                \"navigator\": {\r\n                    \"layout\": \"navigator\",\r\n                    \"name\": \"bizagi.workportal.widgets.navigator\",\r\n                    \"refresh\": false\r\n                },\r\n                \"manager\": {\r\n                    \"layout\": \"topmenu\",\r\n                    \"name\": \"bizagi.workportal.widgets.plans.manager\",\r\n                    \"canvas\": \"plansList\"\r\n                },\r\n                \"sidebar\": {\r\n                    \"layout\": \"leftsidebar\",\r\n                    \"name\": \"bizagi.workportal.widgets.sidebar\"\r\n                },\r\n                \"filters\": {\r\n                    \"layout\": \"sidebar\",\r\n                    \"name\": \"bizagi.workportal.widgets.plans.filters\",\r\n                    \"canvas\": \"content1\"\r\n                },\r\n                \"rightSidebar\": {\r\n                    \"layout\": \"contentrightsidebar\",\r\n                    \"name\": \"bizagi.workportal.widgets.right.sidebar\"\r\n                },\r\n                \"empty1\": { layout: \"rightSidebar\", name: \"bizagi.workportal.widgets.dummy\", canvas: \"sidebarcontent1\" },\r\n                \"empty2\": { layout: \"rightSidebar\", name: \"bizagi.workportal.widgets.dummy\", canvas: \"sidebarcontentextra\" }\r\n            },\r\n            nav: { level: 1 },\r\n            belongs: { \"toLeftSidebarCD\": false, \"toRightSidebarCD\": false, \"toTaskSidebarCD\": false }\r\n        },\r\n        //CONTEXTS CASE DASHBOARD\r\n        \"ACTIVITY\": {\r\n            widgets: {\r\n                activity: {\r\n                    layout: \"contentDashboard\",\r\n                    name: \"bizagi.workportal.widgets.project.activity\",\r\n                    canvas: \"contentprincipal\"\r\n                },\r\n                \"leftSidebar\": {\r\n                    layout: \"leftsidebar\",\r\n                    name: \"bizagi.workportal.widgets.left.sidebar\"\r\n                },\r\n                \"menu\": {\r\n                    layout: \"leftSidebar\",\r\n                    name: \"bizagi.workportal.widgets.project.dashboard.menu.activity\",\r\n                    canvas: \"contentsidebar\"\r\n                },\r\n                \"navigator\": {\r\n                    \"layout\": \"navigator\",\r\n                    \"name\": \"bizagi.workportal.widgets.navigator\",\r\n                    \"refresh\": false\r\n                },\r\n                \"contentDashboard\": {\r\n                    \"layout\": \"content\",\r\n                    \"name\": \"bizagi.workportal.widgets.project.content.dashboard\"\r\n                },\r\n                \"rightSidebar\": {\r\n                    \"layout\": \"contentrightsidebar\",\r\n                    \"name\": \"bizagi.workportal.widgets.right.sidebar\"\r\n                },\r\n                caseState: {\r\n                    layout: \"rightSidebar\",\r\n                    name: \"bizagi.workportal.widgets.project.caseState\",\r\n                    canvas: \"sidebarcontent1\"\r\n                },\r\n                activityDescription: {\r\n                    layout: \"rightSidebar\",\r\n                    name: \"bizagi.workportal.widgets.project.activity.description\",\r\n                    canvas: \"sidebarcontent2\"\r\n                },\r\n                activityState: {\r\n                    layout: \"rightSidebar\",\r\n                    name: \"bizagi.workportal.widgets.project.activityState\",\r\n                    canvas: \"sidebarcontent3\"\r\n                },\r\n                processState: {\r\n                    layout: \"rightSidebar\",\r\n                    name: \"bizagi.workportal.widgets.project.processState\",\r\n                    canvas: \"sidebarcontent4\"\r\n                },\r\n                users: {\r\n                    layout: \"rightSidebar\",\r\n                    name: \"bizagi.workportal.widgets.project.users\",\r\n                    canvas: \"sidebarcontent5\"\r\n                },\r\n                events: {\r\n                    layout: \"rightSidebar\",\r\n                    name: \"bizagi.workportal.widgets.project.events\",\r\n                    canvas: \"sidebarcontent6\"\r\n                },\r\n                subprocesses: {\r\n                    layout: \"rightSidebar\",\r\n                    name: \"bizagi.workportal.widgets.project.subprocesses\",\r\n                    canvas: \"sidebarcontent7\"\r\n                },\r\n                relatedPlan: {\r\n                    layout: \"rightSidebar\",\r\n                    name: \"bizagi.workportal.widgets.project.activity.plan.sidebar\",\r\n                    canvas: \"sidebarcontentextra\"\r\n                }\r\n            },\r\n            nav: { level: 0 },\r\n            belongs: { \"toLeftSidebarCD\": true, \"toRightSidebarCD\": true, \"toTaskSidebarCD\": true }\r\n        },\r\n        \"OVERVIEW\": {\r\n            widgets: {\r\n                \"leftSidebar\": {\r\n                    layout: \"leftsidebar\",\r\n                    name: \"bizagi.workportal.widgets.left.sidebar\"\r\n                },\r\n                \"menu\": {\r\n                    layout: \"leftSidebar\",\r\n                    name: \"bizagi.workportal.widgets.project.dashboard.menu.activity\",\r\n                    canvas: \"contentsidebar\"\r\n                },\r\n                \"navigator\": {\r\n                    \"layout\": \"navigator\",\r\n                    \"name\": \"bizagi.workportal.widgets.navigator\",\r\n                    \"refresh\": false\r\n                },\r\n                \"contentDashboard\": {\r\n                    \"layout\": \"content\",\r\n                    \"name\": \"bizagi.workportal.widgets.project.content.dashboard\"\r\n                },\r\n                overview: {\r\n                    layout: \"contentDashboard\",\r\n                    name: \"bizagi.workportal.widgets.project.overview\",\r\n                    canvas: \"contentprincipal\"\r\n                },\r\n                \"rightSidebar\": {\r\n                    \"layout\": \"contentrightsidebar\",\r\n                    \"name\": \"bizagi.workportal.widgets.right.sidebar\"\r\n                },\r\n                caseState: {\r\n                    layout: \"rightSidebar\",\r\n                    name: \"bizagi.workportal.widgets.project.caseState\",\r\n                    canvas: \"sidebarcontent1\"\r\n                },\r\n                activityDescription: {\r\n                    layout: \"rightSidebar\",\r\n                    name: \"bizagi.workportal.widgets.project.activity.description\",\r\n                    canvas: \"sidebarcontent2\"\r\n                },\r\n                activityState: {\r\n                    layout: \"rightSidebar\",\r\n                    name: \"bizagi.workportal.widgets.project.activityState\",\r\n                    canvas: \"sidebarcontent3\"\r\n                },\r\n                processState: {\r\n                    layout: \"rightSidebar\",\r\n                    name: \"bizagi.workportal.widgets.project.processState\",\r\n                    canvas: \"sidebarcontent4\"\r\n                },\r\n                users: {\r\n                    layout: \"rightSidebar\",\r\n                    name: \"bizagi.workportal.widgets.project.users\",\r\n                    canvas: \"sidebarcontent5\"\r\n                },\r\n                events: {\r\n                    layout: \"rightSidebar\",\r\n                    name: \"bizagi.workportal.widgets.project.events\",\r\n                    canvas: \"sidebarcontent6\"\r\n                },\r\n                subprocesses: {\r\n                    layout: \"rightSidebar\",\r\n                    name: \"bizagi.workportal.widgets.project.subprocesses\",\r\n                    canvas: \"sidebarcontent7\"\r\n                },\r\n                \"empty1\": { layout: \"rightSidebar\", name: \"bizagi.workportal.widgets.dummy\", canvas: \"sidebarcontentextra\" }\r\n            },\r\n            nav: { level: 0, refreshLastItemBreadcrumb: false },\r\n            belongs: { \"toLeftSidebarCD\": true, \"toRightSidebarCD\": true, \"toTaskSidebarCD\": true }\r\n        },\r\n        \"COMMENTS\": {\r\n            widgets: {\r\n                \"leftSidebar\": {\r\n                    layout: \"leftsidebar\",\r\n                    name: \"bizagi.workportal.widgets.left.sidebar\"\r\n                },\r\n                \"navigator\": {\r\n                    \"layout\": \"navigator\",\r\n                    \"name\": \"bizagi.workportal.widgets.navigator\",\r\n                    \"refresh\": false\r\n                },\r\n                \"menu\": {\r\n                    layout: \"leftSidebar\",\r\n                    name: \"bizagi.workportal.widgets.project.dashboard.menu.activity\",\r\n                    canvas: \"contentsidebar\"\r\n                },\r\n                \"contentDashboard\": {\r\n                    \"layout\": \"content\",\r\n                    \"name\": \"bizagi.workportal.widgets.project.content.dashboard\"\r\n                },\r\n                discussions: {\r\n                    layout: \"contentDashboard\",\r\n                    name: \"bizagi.workportal.widgets.project.discussions\",\r\n                    canvas: \"contentprincipal\"\r\n                },\r\n                \"rightSidebar\": {\r\n                    \"layout\": \"contentrightsidebar\",\r\n                    \"name\": \"bizagi.workportal.widgets.right.sidebar\"\r\n                },\r\n                discussionSidebar: {\r\n                    layout: \"rightSidebar\",\r\n                    name: \"bizagi.workportal.widgets.project.discussion.sidebar\",\r\n                    canvas: \"sidebarcontent1\"\r\n                },\r\n                caseState: {\r\n                    layout: \"rightSidebar\",\r\n                    name: \"bizagi.workportal.widgets.project.caseState\",\r\n                    canvas: \"sidebarcontent2\"\r\n                },\r\n                activityDescription: {\r\n                    layout: \"rightSidebar\",\r\n                    name: \"bizagi.workportal.widgets.project.activity.description\",\r\n                    canvas: \"sidebarcontent3\"\r\n                },\r\n                activityState: {\r\n                    layout: \"rightSidebar\",\r\n                    name: \"bizagi.workportal.widgets.project.activityState\",\r\n                    canvas: \"sidebarcontent4\"\r\n                },\r\n                processState: {\r\n                    layout: \"rightSidebar\",\r\n                    name: \"bizagi.workportal.widgets.project.processState\",\r\n                    canvas: \"sidebarcontent5\"\r\n                },\r\n                users: {\r\n                    layout: \"rightSidebar\",\r\n                    name: \"bizagi.workportal.widgets.project.users\",\r\n                    canvas: \"sidebarcontent6\"\r\n                },\r\n                events: {\r\n                    layout: \"rightSidebar\",\r\n                    name: \"bizagi.workportal.widgets.project.events\",\r\n                    canvas: \"sidebarcontent7\"\r\n                },\r\n                subprocesses: {\r\n                    layout: \"rightSidebar\",\r\n                    name: \"bizagi.workportal.widgets.project.subprocesses\",\r\n                    canvas: \"sidebarcontentextra\"\r\n                }\r\n            },\r\n            nav: { level: 0, refreshLastItemBreadcrumb: false },\r\n            belongs: { \"toLeftSidebarCD\": true, \"toRightSidebarCD\": true, \"toTaskSidebarCD\": true }\r\n        },\r\n        \"FILES\": {\r\n            widgets: {\r\n                \"leftSidebar\": {\r\n                    layout: \"leftsidebar\",\r\n                    name: \"bizagi.workportal.widgets.left.sidebar\"\r\n                },\r\n                \"navigator\": {\r\n                    \"layout\": \"navigator\",\r\n                    \"name\": \"bizagi.workportal.widgets.navigator\",\r\n                    \"refresh\": false\r\n                },\r\n                \"menu\": {\r\n                    layout: \"leftSidebar\",\r\n                    name: \"bizagi.workportal.widgets.project.dashboard.menu.activity\",\r\n                    canvas: \"contentsidebar\"\r\n                },\r\n                \"contentDashboard\": {\r\n                    \"layout\": \"content\",\r\n                    \"name\": \"bizagi.workportal.widgets.project.content.dashboard\"\r\n                },\r\n                files: {\r\n                    layout: \"contentDashboard\",\r\n                    name: \"bizagi.workportal.widgets.project.files\",\r\n                    canvas: \"contentprincipal\"\r\n                },\r\n                \"rightSidebar\": {\r\n                    \"layout\": \"contentrightsidebar\",\r\n                    \"name\": \"bizagi.workportal.widgets.right.sidebar\"\r\n                },\r\n                filesPreview: {\r\n                    layout: \"rightSidebar\",\r\n                    name: \"bizagi.workportal.widgets.project.filesPreview\",\r\n                    canvas: \"sidebarcontent1\"\r\n                },\r\n                caseState: {\r\n                    layout: \"rightSidebar\",\r\n                    name: \"bizagi.workportal.widgets.project.caseState\",\r\n                    canvas: \"sidebarcontent2\"\r\n                },\r\n                activityDescription: {\r\n                    layout: \"rightSidebar\",\r\n                    name: \"bizagi.workportal.widgets.project.activity.description\",\r\n                    canvas: \"sidebarcontent3\"\r\n                },\r\n                activityState: {\r\n                    layout: \"rightSidebar\",\r\n                    name: \"bizagi.workportal.widgets.project.activityState\",\r\n                    canvas: \"sidebarcontent4\"\r\n                },\r\n                processState: {\r\n                    layout: \"rightSidebar\",\r\n                    name: \"bizagi.workportal.widgets.project.processState\",\r\n                    canvas: \"sidebarcontent5\"\r\n                },\r\n                users: {\r\n                    layout: \"rightSidebar\",\r\n                    name: \"bizagi.workportal.widgets.project.users\",\r\n                    canvas: \"sidebarcontent6\"\r\n                },\r\n                events: {\r\n                    layout: \"rightSidebar\",\r\n                    name: \"bizagi.workportal.widgets.project.events\",\r\n                    canvas: \"sidebarcontent7\"\r\n                },\r\n                subprocesses: {\r\n                    layout: \"rightSidebar\",\r\n                    name: \"bizagi.workportal.widgets.project.subprocesses\",\r\n                    canvas: \"sidebarcontentextra\"\r\n                }\r\n            },\r\n            nav: { level: 0, refreshLastItemBreadcrumb: false },\r\n            belongs: { \"toLeftSidebarCD\": true, \"toRightSidebarCD\": true, \"toTaskSidebarCD\": true }\r\n        },\r\n        \"PROCESSMAP\": {\r\n            widgets: {\r\n                \"leftSidebar\": {\r\n                    layout: \"leftsidebar\",\r\n                    name: \"bizagi.workportal.widgets.left.sidebar\"\r\n                },\r\n                \"menu\": {\r\n                    layout: \"leftSidebar\",\r\n                    name: \"bizagi.workportal.widgets.project.dashboard.menu.activity\",\r\n                    canvas: \"contentsidebar\"\r\n                },\r\n                \"contentDashboard\": {\r\n                    \"layout\": \"content\",\r\n                    \"name\": \"bizagi.workportal.widgets.project.content.dashboard\"\r\n                },\r\n                processMap: {\r\n                    layout: \"contentDashboard\",\r\n                    name: \"bizagi.workportal.widgets.project.processMap\",\r\n                    canvas: \"contentprincipal\"\r\n                },\r\n                \"rightSidebar\": {\r\n                    \"layout\": \"contentrightsidebar\",\r\n                    \"name\": \"bizagi.workportal.widgets.right.sidebar\"\r\n                },\r\n                caseState: {\r\n                    layout: \"rightSidebar\",\r\n                    name: \"bizagi.workportal.widgets.project.caseState\",\r\n                    canvas: \"sidebarcontent1\"\r\n                },\r\n                activityDescription: {\r\n                    layout: \"rightSidebar\",\r\n                    name: \"bizagi.workportal.widgets.project.activity.description\",\r\n                    canvas: \"sidebarcontent2\"\r\n                },\r\n                activityState: {\r\n                    layout: \"rightSidebar\",\r\n                    name: \"bizagi.workportal.widgets.project.activityState\",\r\n                    canvas: \"sidebarcontent3\"\r\n                },\r\n                processState: {\r\n                    layout: \"rightSidebar\",\r\n                    name: \"bizagi.workportal.widgets.project.processState\",\r\n                    canvas: \"sidebarcontent4\"\r\n                },\r\n                users: {\r\n                    layout: \"rightSidebar\",\r\n                    name: \"bizagi.workportal.widgets.project.users\",\r\n                    canvas: \"sidebarcontent5\"\r\n                },\r\n                events: {\r\n                    layout: \"rightSidebar\",\r\n                    name: \"bizagi.workportal.widgets.project.events\",\r\n                    canvas: \"sidebarcontent6\"\r\n                },\r\n                subprocesses: {\r\n                    layout: \"rightSidebar\",\r\n                    name: \"bizagi.workportal.widgets.project.subprocesses\",\r\n                    canvas: \"sidebarcontent7\"\r\n                },\r\n                \"empty1\": { layout: \"rightSidebar\", name: \"bizagi.workportal.widgets.dummy\", canvas: \"sidebarcontentextra\" }\r\n            },\r\n            nav: { level: 0, refreshLastItemBreadcrumb: false },\r\n            belongs: { \"toLeftSidebarCD\": true, \"toRightSidebarCD\": true, \"toTaskSidebarCD\": true }\r\n        },\r\n        \"LOG\": {\r\n            widgets: {\r\n                \"leftSidebar\": {\r\n                    layout: \"leftsidebar\",\r\n                    name: \"bizagi.workportal.widgets.left.sidebar\"\r\n                },\r\n                \"menu\": {\r\n                    layout: \"leftSidebar\",\r\n                    name: \"bizagi.workportal.widgets.project.dashboard.menu.activity\",\r\n                    canvas: \"contentsidebar\"\r\n                },\r\n                \"contentDashboard\": {\r\n                    \"layout\": \"content\",\r\n                    \"name\": \"bizagi.workportal.widgets.project.content.dashboard\"\r\n                },\r\n                log: {\r\n                    layout: \"contentDashboard\",\r\n                    name: \"bizagi.workportal.widgets.activity.log\",\r\n                    canvas: \"contentprincipal\"\r\n                },\r\n                \"rightSidebar\": {\r\n                    \"layout\": \"contentrightsidebar\",\r\n                    \"name\": \"bizagi.workportal.widgets.right.sidebar\"\r\n                },\r\n                \"empty1\": { layout: \"rightSidebar\", name: \"bizagi.workportal.widgets.dummy\", canvas: \"sidebarcontentextra\" }\r\n            },\r\n            nav: { level: 0, refreshLastItemBreadcrumb: false },\r\n            belongs: { \"toLeftSidebarCD\": true, \"toRightSidebarCD\": true, \"toTaskSidebarCD\": true }\r\n        },\r\n        \"TIMELINE\": {\r\n            widgets: {\r\n                \"leftSidebar\": {\r\n                    layout: \"leftsidebar\",\r\n                    name: \"bizagi.workportal.widgets.left.sidebar\"\r\n                },\r\n                \"menu\": {\r\n                    layout: \"leftSidebar\",\r\n                    name: \"bizagi.workportal.widgets.project.dashboard.menu.activity\",\r\n                    canvas: \"contentsidebar\"\r\n                },\r\n                \"contentDashboard\": {\r\n                    \"layout\": \"content\",\r\n                    \"name\": \"bizagi.workportal.widgets.project.content.dashboard\"\r\n                },\r\n                \"timeline\": {\r\n                    layout: \"contentDashboard\",\r\n                    name: \"bizagi.workportal.widgets.project.timeline\",\r\n                    canvas: \"contentprincipal\"\r\n                },\r\n                \"rightSidebar\": {\r\n                    \"layout\": \"contentrightsidebar\",\r\n                    \"name\": \"bizagi.workportal.widgets.right.sidebar\"\r\n                },\r\n                \"timelineSidebar\": {\r\n                    layout: \"rightSidebar\",\r\n                    name: \"bizagi.workportal.widgets.project.timeline.sidebar\",\r\n                    canvas: \"sidebarcontent1\"\r\n                },\r\n                caseState: {\r\n                    layout: \"rightSidebar\",\r\n                    name: \"bizagi.workportal.widgets.project.caseState\",\r\n                    canvas: \"sidebarcontent2\"\r\n                },\r\n                activityDescription: {\r\n                    layout: \"rightSidebar\",\r\n                    name: \"bizagi.workportal.widgets.project.activity.description\",\r\n                    canvas: \"sidebarcontent3\"\r\n                },\r\n                activityState: {\r\n                    layout: \"rightSidebar\",\r\n                    name: \"bizagi.workportal.widgets.project.activityState\",\r\n                    canvas: \"sidebarcontent4\"\r\n                },\r\n                processState: {\r\n                    layout: \"rightSidebar\",\r\n                    name: \"bizagi.workportal.widgets.project.processState\",\r\n                    canvas: \"sidebarcontent5\"\r\n                },\r\n                users: {\r\n                    layout: \"rightSidebar\",\r\n                    name: \"bizagi.workportal.widgets.project.users\",\r\n                    canvas: \"sidebarcontent6\"\r\n                },\r\n                events: {\r\n                    layout: \"rightSidebar\",\r\n                    name: \"bizagi.workportal.widgets.project.events\",\r\n                    canvas: \"sidebarcontent7\"\r\n                },\r\n                subprocesses: {\r\n                    layout: \"rightSidebar\",\r\n                    name: \"bizagi.workportal.widgets.project.subprocesses\",\r\n                    canvas: \"sidebarcontentextra\"\r\n                }\r\n            },\r\n            nav: { level: 0, refreshLastItemBreadcrumb: false },\r\n            belongs: { \"toLeftSidebarCD\": true, \"toRightSidebarCD\": true, \"toTaskSidebarCD\": true }\r\n        },\r\n        //CONTEXTS FOR PLAN\r\n        \"PLANCREATE\": {\r\n            widgets: {\r\n                \"leftSidebar\": {\r\n                    layout: \"leftsidebar\",\r\n                    name: \"bizagi.workportal.widgets.left.sidebar\"\r\n                },\r\n                \"menu\": {\r\n                    layout: \"leftSidebar\",\r\n                    name: \"bizagi.workportal.widgets.project.dashboard.menu.activity\",\r\n                    canvas: \"contentsidebar\"\r\n                },\r\n                \"contentDashboard\": {\r\n                    \"layout\": \"content\",\r\n                    \"name\": \"bizagi.workportal.widgets.project.content.dashboard\"\r\n                },\r\n                plan: {\r\n                    layout: \"contentDashboard\",\r\n                    name: \"bizagi.workportal.widgets.project.plan\",\r\n                    canvas: \"contentprincipal\"\r\n                },\r\n                \"rightSidebar\": {\r\n                    \"layout\": \"contentrightsidebar\",\r\n                    \"name\": \"bizagi.workportal.widgets.right.sidebar\"\r\n                },\r\n                caseState: {\r\n                    layout: \"rightSidebar\",\r\n                    name: \"bizagi.workportal.widgets.project.caseState\",\r\n                    canvas: \"sidebarcontent1\"\r\n                },\r\n                activityDescription: {\r\n                    layout: \"rightSidebar\",\r\n                    name: \"bizagi.workportal.widgets.project.activity.description\",\r\n                    canvas: \"sidebarcontent2\"\r\n                },\r\n                activityState: {\r\n                    layout: \"rightSidebar\",\r\n                    name: \"bizagi.workportal.widgets.project.activityState\",\r\n                    canvas: \"sidebarcontent3\"\r\n                },\r\n                processState: {\r\n                    layout: \"rightSidebar\",\r\n                    name: \"bizagi.workportal.widgets.project.processState\",\r\n                    canvas: \"sidebarcontent4\"\r\n                },\r\n                users: {\r\n                    layout: \"rightSidebar\",\r\n                    name: \"bizagi.workportal.widgets.project.users\",\r\n                    canvas: \"sidebarcontent5\"\r\n                },\r\n                events: {\r\n                    layout: \"rightSidebar\",\r\n                    name: \"bizagi.workportal.widgets.project.events\",\r\n                    canvas: \"sidebarcontent6\"\r\n                },\r\n                subprocesses: {\r\n                    layout: \"rightSidebar\",\r\n                    name: \"bizagi.workportal.widgets.project.subprocesses\",\r\n                    canvas: \"sidebarcontent7\"\r\n                },\r\n                \"empty1\": { layout: \"rightSidebar\", name: \"bizagi.workportal.widgets.dummy\", canvas: \"sidebarcontentextra\" }\r\n            },\r\n            nav: { level: 0, refreshLastItemBreadcrumb: false },\r\n            belongs: { \"toLeftSidebarCD\": true, \"toRightSidebarCD\": true, \"toTaskSidebarCD\": true }\r\n        },\r\n        \"PLANOVERVIEW\": {\r\n            widgets: {\r\n                \"leftSidebar\": {\r\n                    layout: \"leftsidebar\",\r\n                    name: \"bizagi.workportal.widgets.left.sidebar\"\r\n                },\r\n                \"menu\": {\r\n                    layout: \"leftSidebar\",\r\n                    name: \"bizagi.workportal.widgets.project.dashboard.menu.plan\",\r\n                    canvas: \"contentsidebar\"\r\n                },\r\n                \"contentDashboard\": {\r\n                    \"layout\": \"content\",\r\n                    \"name\": \"bizagi.workportal.widgets.project.content.dashboard\"\r\n                },\r\n                planActivities: {\r\n                    layout: \"contentDashboard\",\r\n                    name: \"bizagi.workportal.widgets.project.plan.activities\",\r\n                    canvas: \"contentprincipal\"\r\n                },\r\n                \"rightSidebar\": {\r\n                    \"layout\": \"contentrightsidebar\",\r\n                    \"name\": \"bizagi.workportal.widgets.right.sidebar\"\r\n                },\r\n                planSidebar: {\r\n                    layout: \"rightSidebar\",\r\n                    name: \"bizagi.workportal.widgets.project.plan.sidebar\",\r\n                    canvas: \"sidebarcontentextra\"\r\n                },\r\n                planAction: {\r\n                    layout: \"rightSidebar\",\r\n                    name: \"bizagi.workportal.widgets.project.plan.action\",\r\n                    canvas: \"sidebarcontent1\"\r\n                },\r\n                planState: {\r\n                    layout: \"rightSidebar\",\r\n                    name: \"bizagi.workportal.widgets.project.plan.state\",\r\n                    canvas: \"sidebarcontent3\"\r\n                },\r\n                planProgress: {\r\n                    layout: \"rightSidebar\",\r\n                    name: \"bizagi.workportal.widgets.project.plan.progress\",\r\n                    canvas: \"sidebarcontent4\"\r\n                },\r\n                planTime: {\r\n                    layout: \"rightSidebar\",\r\n                    name: \"bizagi.workportal.widgets.project.plan.time\",\r\n                    canvas: \"sidebarcontent5\"\r\n                },\r\n                planParent: {\r\n                    layout: \"rightSidebar\",\r\n                    name: \"bizagi.workportal.widgets.project.plan.parent\",\r\n                    canvas: \"sidebarcontent6\"\r\n                },\r\n                planUsers: {\r\n                    layout: \"rightSidebar\",\r\n                    name: \"bizagi.workportal.widgets.project.plan.users\",\r\n                    canvas: \"sidebarcontent7\"\r\n                }\r\n            },\r\n            nav: { level: 0, refreshLastItemBreadcrumb: false },\r\n            belongs: { \"toLeftSidebarCD\": true, \"toRightSidebarCD\": true, \"toTaskSidebarCD\": false }\r\n        },\r\n        \"PLANACTIVITIES\": {\r\n            widgets: {\r\n                \"leftSidebar\": {\r\n                    layout: \"leftsidebar\",\r\n                    name: \"bizagi.workportal.widgets.left.sidebar\"\r\n                },\r\n                \"navigator\": {\r\n                    \"layout\": \"navigator\",\r\n                    \"name\": \"bizagi.workportal.widgets.navigator\",\r\n                    \"refresh\": false\r\n                },\r\n                \"menu\": {\r\n                    layout: \"leftSidebar\",\r\n                    name: \"bizagi.workportal.widgets.project.dashboard.menu.plan\",\r\n                    canvas: \"contentsidebar\"\r\n                },\r\n                \"contentDashboard\": {\r\n                    \"layout\": \"content\",\r\n                    \"name\": \"bizagi.workportal.widgets.project.content.dashboard\"\r\n                },\r\n                planActivities: {\r\n                    layout: \"contentDashboard\",\r\n                    name: \"bizagi.workportal.widgets.project.plan.activities\",\r\n                    canvas: \"contentprincipal\"\r\n                },\r\n                \"rightSidebar\": {\r\n                    \"layout\": \"contentrightsidebar\",\r\n                    \"name\": \"bizagi.workportal.widgets.right.sidebar\"\r\n                },\r\n                planSidebar: {\r\n                    layout: \"rightSidebar\",\r\n                    name: \"bizagi.workportal.widgets.project.plan.sidebar\",\r\n                    canvas: \"sidebarcontentextra\"\r\n                },\r\n                planAction: {\r\n                    layout: \"rightSidebar\",\r\n                    name: \"bizagi.workportal.widgets.project.plan.action\",\r\n                    canvas: \"sidebarcontent1\"\r\n                },\r\n                planState: {\r\n                    layout: \"rightSidebar\",\r\n                    name: \"bizagi.workportal.widgets.project.plan.state\",\r\n                    canvas: \"sidebarcontent3\"\r\n                },\r\n                planProgress: {\r\n                    layout: \"rightSidebar\",\r\n                    name: \"bizagi.workportal.widgets.project.plan.progress\",\r\n                    canvas: \"sidebarcontent4\"\r\n                },\r\n                planTime: {\r\n                    layout: \"rightSidebar\",\r\n                    name: \"bizagi.workportal.widgets.project.plan.time\",\r\n                    canvas: \"sidebarcontent5\"\r\n                },\r\n                planParent: {\r\n                    layout: \"rightSidebar\",\r\n                    name: \"bizagi.workportal.widgets.project.plan.parent\",\r\n                    canvas: \"sidebarcontent6\"\r\n                },\r\n                planUsers: {\r\n                    layout: \"rightSidebar\",\r\n                    name: \"bizagi.workportal.widgets.project.plan.users\",\r\n                    canvas: \"sidebarcontent7\"\r\n                }\r\n            },\r\n            nav: { level: 1 },\r\n            belongs: { \"toLeftSidebarCD\": true, \"toRightSidebarCD\": true, \"toTaskSidebarCD\": false }\r\n        },\r\n        \"PLANFILES\": {\r\n            widgets: {\r\n                \"leftSidebar\": {\r\n                    layout: \"leftsidebar\",\r\n                    name: \"bizagi.workportal.widgets.left.sidebar\"\r\n                },\r\n                \"menu\": {\r\n                    layout: \"leftSidebar\",\r\n                    name: \"bizagi.workportal.widgets.project.dashboard.menu.plan\",\r\n                    canvas: \"contentsidebar\"\r\n                },\r\n                \"contentDashboard\": {\r\n                    \"layout\": \"content\",\r\n                    \"name\": \"bizagi.workportal.widgets.project.content.dashboard\"\r\n                },\r\n                files: {\r\n                    layout: \"contentDashboard\",\r\n                    name: \"bizagi.workportal.widgets.project.files\",\r\n                    canvas: \"contentprincipal\"\r\n                },\r\n                \"rightSidebar\": {\r\n                    \"layout\": \"contentrightsidebar\",\r\n                    \"name\": \"bizagi.workportal.widgets.right.sidebar\"\r\n                },\r\n                filesPreview: {\r\n                    layout: \"rightSidebar\",\r\n                    name: \"bizagi.workportal.widgets.project.filesPreview\",\r\n                    canvas: \"sidebarcontent1\"\r\n                },\r\n                empty2: { layout: \"rightSidebar\", name: \"bizagi.workportal.widgets.dummy\", canvas: \"sidebarcontent3\" },\r\n                empty3: { layout: \"rightSidebar\", name: \"bizagi.workportal.widgets.dummy\", canvas: \"sidebarcontent4\" },\r\n                empty4: { layout: \"rightSidebar\", name: \"bizagi.workportal.widgets.dummy\", canvas: \"sidebarcontent5\" },\r\n                empty5: { layout: \"rightSidebar\", name: \"bizagi.workportal.widgets.dummy\", canvas: \"sidebarcontent6\" },\r\n                empty6: { layout: \"rightSidebar\", name: \"bizagi.workportal.widgets.dummy\", canvas: \"sidebarcontent7\" },\r\n                empty7: { layout: \"rightSidebar\", name: \"bizagi.workportal.widgets.dummy\", canvas: \"sidebarcontentextra\" }\r\n            },\r\n            nav: { level: 0, refreshLastItemBreadcrumb: false },\r\n            belongs: { \"toLeftSidebarCD\": true, \"toRightSidebarCD\": true, \"toTaskSidebarCD\": false }\r\n        },\r\n        \"PLANCOMMENTS\": {\r\n            widgets: {\r\n                \"leftSidebar\": {\r\n                    layout: \"leftsidebar\",\r\n                    name: \"bizagi.workportal.widgets.left.sidebar\"\r\n                },\r\n                \"menu\": {\r\n                    layout: \"leftSidebar\",\r\n                    name: \"bizagi.workportal.widgets.project.dashboard.menu.plan\",\r\n                    canvas: \"contentsidebar\"\r\n                },\r\n                \"contentDashboard\": {\r\n                    \"layout\": \"content\",\r\n                    \"name\": \"bizagi.workportal.widgets.project.content.dashboard\"\r\n                },\r\n                discussions: {\r\n                    layout: \"contentDashboard\",\r\n                    name: \"bizagi.workportal.widgets.project.discussions\",\r\n                    canvas: \"contentprincipal\"\r\n                },\r\n                \"rightSidebar\": {\r\n                    \"layout\": \"contentrightsidebar\",\r\n                    \"name\": \"bizagi.workportal.widgets.right.sidebar\"\r\n                },\r\n                planSidebar: {\r\n                    layout: \"rightSidebar\",\r\n                    name: \"bizagi.workportal.widgets.project.plan.sidebar\",\r\n                    canvas: \"sidebarcontentextra\"\r\n                },\r\n                discussionSidebar: {\r\n                    layout: \"rightSidebar\",\r\n                    name: \"bizagi.workportal.widgets.project.discussion.sidebar\",\r\n                    canvas: \"sidebarcontent1\"\r\n                },\r\n                planAction: {\r\n                    layout: \"rightSidebar\",\r\n                    name: \"bizagi.workportal.widgets.project.plan.action\",\r\n                    canvas: \"sidebarcontent3\"\r\n                },\r\n                planState: {\r\n                    layout: \"rightSidebar\",\r\n                    name: \"bizagi.workportal.widgets.project.plan.state\",\r\n                    canvas: \"sidebarcontent4\"\r\n                },\r\n                planProgress: {\r\n                    layout: \"rightSidebar\",\r\n                    name: \"bizagi.workportal.widgets.project.plan.progress\",\r\n                    canvas: \"sidebarcontent5\"\r\n                },\r\n                planTime: {\r\n                    layout: \"rightSidebar\",\r\n                    name: \"bizagi.workportal.widgets.project.plan.time\",\r\n                    canvas: \"sidebarcontent6\"\r\n                },\r\n                planUsers: {\r\n                    layout: \"rightSidebar\",\r\n                    name: \"bizagi.workportal.widgets.project.plan.users\",\r\n                    canvas: \"sidebarcontent7\"\r\n                }\r\n            },\r\n            nav: { level: 0, refreshLastItemBreadcrumb: false },\r\n            belongs: { \"toLeftSidebarCD\": true, \"toRightSidebarCD\": true, \"toTaskSidebarCD\": false }\r\n        },\r\n        \"PLANTIMELINE\": {\r\n            widgets: {\r\n                \"leftSidebar\": {\r\n                    layout: \"leftsidebar\",\r\n                    name: \"bizagi.workportal.widgets.left.sidebar\"\r\n                },\r\n                \"navigator\": {\r\n                    \"layout\": \"navigator\",\r\n                    \"name\": \"bizagi.workportal.widgets.navigator\",\r\n                    \"refresh\": false\r\n                },\r\n                \"menu\": {\r\n                    layout: \"leftSidebar\",\r\n                    name: \"bizagi.workportal.widgets.project.dashboard.menu.plan\",\r\n                    canvas: \"contentsidebar\"\r\n                },\r\n                \"contentDashboard\": {\r\n                    \"layout\": \"content\",\r\n                    \"name\": \"bizagi.workportal.widgets.project.content.dashboard\"\r\n                },\r\n                \"timeline\": {\r\n                    layout: \"contentDashboard\",\r\n                    name: \"bizagi.workportal.widgets.project.timeline\",\r\n                    canvas: \"contentprincipal\"\r\n                },\r\n                \"rightSidebar\": {\r\n                    \"layout\": \"contentrightsidebar\",\r\n                    \"name\": \"bizagi.workportal.widgets.right.sidebar\"\r\n                },\r\n                empty1: { layout: \"rightSidebar\", name: \"bizagi.workportal.widgets.dummy\", canvas: \"sidebarcontent1\" },\r\n                empty2: { layout: \"rightSidebar\", name: \"bizagi.workportal.widgets.dummy\", canvas: \"sidebarcontent3\" },\r\n                empty3: { layout: \"rightSidebar\", name: \"bizagi.workportal.widgets.dummy\", canvas: \"sidebarcontent4\" },\r\n                empty4: { layout: \"rightSidebar\", name: \"bizagi.workportal.widgets.dummy\", canvas: \"sidebarcontent5\" },\r\n                empty5: { layout: \"rightSidebar\", name: \"bizagi.workportal.widgets.dummy\", canvas: \"sidebarcontent6\" },\r\n                empty6: { layout: \"rightSidebar\", name: \"bizagi.workportal.widgets.dummy\", canvas: \"sidebarcontent7\" },\r\n                empty7: { layout: \"rightSidebar\", name: \"bizagi.workportal.widgets.dummy\", canvas: \"sidebarcontentextra\" }\r\n            },\r\n            nav: { level: 1 },\r\n            belongs: { \"toLeftSidebarCD\": true, \"toRightSidebarCD\": true, \"toTaskSidebarCD\": false }\r\n        },\r\n        \"PLANSIDEBAR\": {\r\n            widgets: {\r\n                \"leftSidebar\": {\r\n                    layout: \"leftsidebar\",\r\n                    name: \"bizagi.workportal.widgets.left.sidebar\"\r\n                },\r\n                \"menu\": {\r\n                    layout: \"leftSidebar\",\r\n                    name: \"bizagi.workportal.widgets.project.dashboard.menu.plan\",\r\n                    canvas: \"contentsidebar\"\r\n                },\r\n                \"rightSidebar\": {\r\n                    \"layout\": \"contentrightsidebar\",\r\n                    \"name\": \"bizagi.workportal.widgets.right.sidebar\"\r\n                },\r\n                planSidebar: {\r\n                    layout: \"rightSidebar\",\r\n                    name: \"bizagi.workportal.widgets.project.plan.sidebar\",\r\n                    canvas: \"sidebarcontentextra\"\r\n                },\r\n                planAction: {\r\n                    layout: \"rightSidebar\",\r\n                    name: \"bizagi.workportal.widgets.project.plan.action\",\r\n                    canvas: \"sidebarcontent1\"\r\n                },\r\n                planState: {\r\n                    layout: \"rightSidebar\",\r\n                    name: \"bizagi.workportal.widgets.project.plan.state\",\r\n                    canvas: \"sidebarcontent3\"\r\n                },\r\n                planProgress: {\r\n                    layout: \"rightSidebar\",\r\n                    name: \"bizagi.workportal.widgets.project.plan.progress\",\r\n                    canvas: \"sidebarcontent4\"\r\n                },\r\n                planTime: {\r\n                    layout: \"rightSidebar\",\r\n                    name: \"bizagi.workportal.widgets.project.plan.time\",\r\n                    canvas: \"sidebarcontent5\"\r\n                },\r\n                planParent: {\r\n                    layout: \"rightSidebar\",\r\n                    name: \"bizagi.workportal.widgets.project.plan.parent\",\r\n                    canvas: \"sidebarcontent6\"\r\n                },\r\n                planUsers: {\r\n                    layout: \"rightSidebar\",\r\n                    name: \"bizagi.workportal.widgets.project.plan.users\",\r\n                    canvas: \"sidebarcontent7\"\r\n                }\r\n            },\r\n            nav: { level: 0, refreshLastItemBreadcrumb: false },\r\n            belongs: { \"toLeftSidebarCD\": true, \"toRightSidebarCD\": true, \"toTaskSidebarCD\": false }\r\n        },\r\n        \"EDITACTIVITY\": {\r\n            widgets: {\r\n                \"rightSidebar\": {\r\n                    \"layout\": \"contentrightsidebar\",\r\n                    \"name\": \"bizagi.workportal.widgets.right.sidebar\"\r\n                },\r\n                activitiesForm: {\r\n                    layout: \"rightSidebar\",\r\n                    name: \"bizagi.workportal.desktop.widgets.project.plan.activities.form\",\r\n                    canvas: \"sidebarcontent1\"\r\n                },\r\n                empty1: { layout: \"rightSidebar\", name: \"bizagi.workportal.widgets.dummy\", canvas: \"sidebarcontentextra\" },\r\n                empty2: { layout: \"rightSidebar\", name: \"bizagi.workportal.widgets.dummy\", canvas: \"sidebarcontent3\" },\r\n                empty3: { layout: \"rightSidebar\", name: \"bizagi.workportal.widgets.dummy\", canvas: \"sidebarcontent4\" },\r\n                empty4: { layout: \"rightSidebar\", name: \"bizagi.workportal.widgets.dummy\", canvas: \"sidebarcontent5\" },\r\n                empty5: { layout: \"rightSidebar\", name: \"bizagi.workportal.widgets.dummy\", canvas: \"sidebarcontent6\" },\r\n                empty6: { layout: \"rightSidebar\", name: \"bizagi.workportal.widgets.dummy\", canvas: \"sidebarcontent7\" }\r\n            },\r\n            nav: { level: 0, refreshLastItemBreadcrumb: false },\r\n            belongs: { \"toLeftSidebarCD\": true, \"toRightSidebarCD\": true, \"toTaskSidebarCD\": false }\r\n        },\r\n        //CONTEXTS FOR ACTIVITY PLAN\r\n        \"ACTIVITYPLAN\": {\r\n            widgets: {\r\n                \"leftSidebar\": {\r\n                    layout: \"leftsidebar\",\r\n                    name: \"bizagi.workportal.widgets.left.sidebar\"\r\n                },\r\n                \"navigator\": {\r\n                    \"layout\": \"navigator\",\r\n                    \"name\": \"bizagi.workportal.widgets.navigator\",\r\n                    \"refresh\": false\r\n                },\r\n                \"menu\": {\r\n                    layout: \"leftSidebar\",\r\n                    name: \"bizagi.workportal.widgets.project.dashboard.menu.activity.plan\",\r\n                    canvas: \"contentsidebar\"\r\n                },\r\n                \"contentDashboard\": {\r\n                    \"layout\": \"content\",\r\n                    \"name\": \"bizagi.workportal.widgets.project.content.dashboard\"\r\n                },\r\n                activity: {\r\n                    layout: \"contentDashboard\",\r\n                    name: \"bizagi.workportal.widgets.project.activity\",\r\n                    canvas: \"contentprincipal\"\r\n                },\r\n                \"rightSidebar\": {\r\n                    \"layout\": \"contentrightsidebar\",\r\n                    \"name\": \"bizagi.workportal.widgets.right.sidebar\"\r\n                },\r\n                activitySidebar: {\r\n                    layout: \"rightSidebar\",\r\n                    name: \"bizagi.workportal.widgets.project.plan.activity.sidebar\",\r\n                    canvas: \"sidebarcontentextra\"\r\n                },\r\n                activityAction: {\r\n                    layout: \"rightSidebar\",\r\n                    name: \"bizagi.workportal.widgets.project.plan.activity.action\",\r\n                    canvas: \"sidebarcontent1\"\r\n                },\r\n                activityTime: {\r\n                    layout: \"rightSidebar\",\r\n                    name: \"bizagi.workportal.widgets.project.plan.activity.time\",\r\n                    canvas: \"sidebarcontent3\"\r\n                },\r\n                activityProgress: {\r\n                    layout: \"rightSidebar\",\r\n                    name: \"bizagi.workportal.widgets.project.plan.activity.progress\",\r\n                    canvas: \"sidebarcontent4\"\r\n                },\r\n                activityParent: {\r\n                    layout: \"rightSidebar\",\r\n                    name: \"bizagi.workportal.widgets.project.plan.activity.parent\",\r\n                    canvas: \"sidebarcontent5\"\r\n                },\r\n                activityUsers: {\r\n                    layout: \"rightSidebar\",\r\n                    name: \"bizagi.workportal.widgets.project.plan.activity.users\",\r\n                    canvas: \"sidebarcontent6\"\r\n                },\r\n                relatedPlan: {\r\n                    layout: \"rightSidebar\",\r\n                    name: \"bizagi.workportal.widgets.project.activity.plan.sidebar\",\r\n                    canvas: \"sidebarcontent7\"\r\n                }\r\n            },\r\n            nav: { level: 0 },\r\n            belongs: { \"toLeftSidebarCD\": true, \"toRightSidebarCD\": true, \"toTaskSidebarCD\": false }\r\n        },\r\n        \"ACTIVITYPLANCREATE\": {\r\n            widgets: {\r\n                \"leftSidebar\": {\r\n                    layout: \"leftsidebar\",\r\n                    name: \"bizagi.workportal.widgets.left.sidebar\"\r\n                },\r\n                \"menu\": {\r\n                    layout: \"leftSidebar\",\r\n                    name: \"bizagi.workportal.widgets.project.dashboard.menu.activity.plan\",\r\n                    canvas: \"contentsidebar\"\r\n                },\r\n                \"navigator\": {\r\n                    \"layout\": \"navigator\",\r\n                    \"name\": \"bizagi.workportal.widgets.navigator\",\r\n                    \"refresh\": false\r\n                },\r\n                \"contentDashboard\": {\r\n                    \"layout\": \"content\",\r\n                    \"name\": \"bizagi.workportal.widgets.project.content.dashboard\"\r\n                },\r\n                plan: {\r\n                    layout: \"contentDashboard\",\r\n                    name: \"bizagi.workportal.widgets.project.plan\",\r\n                    canvas: \"contentprincipal\"\r\n                },\r\n                \"rightSidebar\": {\r\n                    \"layout\": \"contentrightsidebar\",\r\n                    \"name\": \"bizagi.workportal.widgets.right.sidebar\"\r\n                },\r\n                activitySidebar: {\r\n                    layout: \"rightSidebar\",\r\n                    name: \"bizagi.workportal.widgets.project.plan.activity.sidebar\",\r\n                    canvas: \"sidebarcontentextra\"\r\n                },\r\n                activityAction: {\r\n                    layout: \"rightSidebar\",\r\n                    name: \"bizagi.workportal.widgets.project.plan.activity.action\",\r\n                    canvas: \"sidebarcontent1\"\r\n                },\r\n                activityTime: {\r\n                    layout: \"rightSidebar\",\r\n                    name: \"bizagi.workportal.widgets.project.plan.activity.time\",\r\n                    canvas: \"sidebarcontent3\"\r\n                },\r\n                activityProgress: {\r\n                    layout: \"rightSidebar\",\r\n                    name: \"bizagi.workportal.widgets.project.plan.activity.progress\",\r\n                    canvas: \"sidebarcontent4\"\r\n                },\r\n                activityParent: {\r\n                    layout: \"rightSidebar\",\r\n                    name: \"bizagi.workportal.widgets.project.plan.activity.parent\",\r\n                    canvas: \"sidebarcontent5\"\r\n                },\r\n                activityUsers: {\r\n                    layout: \"rightSidebar\",\r\n                    name: \"bizagi.workportal.widgets.project.plan.activity.users\",\r\n                    canvas: \"sidebarcontent6\"\r\n                },\r\n                empty6: { layout: \"rightSidebar\", name: \"bizagi.workportal.widgets.dummy\", canvas: \"sidebarcontent7\" }\r\n            },\r\n            nav: { level: 0 },\r\n            belongs: { \"toLeftSidebarCD\": true, \"toRightSidebarCD\": true, \"toTaskSidebarCD\": false }\r\n        },\r\n        \"ACTIVITYPLANOVERVIEW\": {\r\n            widgets: {\r\n                \"leftSidebar\": {\r\n                    layout: \"leftsidebar\",\r\n                    name: \"bizagi.workportal.widgets.left.sidebar\"\r\n                },\r\n                \"menu\": {\r\n                    layout: \"leftSidebar\",\r\n                    name: \"bizagi.workportal.widgets.project.dashboard.menu.activity.plan\",\r\n                    canvas: \"contentsidebar\"\r\n                },\r\n                \"navigator\": {\r\n                    \"layout\": \"navigator\",\r\n                    \"name\": \"bizagi.workportal.widgets.navigator\",\r\n                    \"refresh\": false\r\n                },\r\n                \"contentDashboard\": {\r\n                    \"layout\": \"content\",\r\n                    \"name\": \"bizagi.workportal.widgets.project.content.dashboard\"\r\n                },\r\n                overview: {\r\n                    layout: \"contentDashboard\",\r\n                    name: \"bizagi.workportal.widgets.project.plan.activities\",\r\n                    canvas: \"contentprincipal\"\r\n                },\r\n                \"rightSidebar\": {\r\n                    \"layout\": \"contentrightsidebar\",\r\n                    \"name\": \"bizagi.workportal.widgets.right.sidebar\"\r\n                },\r\n                planSidebar: {\r\n                    layout: \"rightSidebar\",\r\n                    name: \"bizagi.workportal.widgets.project.plan.sidebar\",\r\n                    canvas: \"sidebarcontentextra\"\r\n                },\r\n                planAction: {\r\n                    layout: \"rightSidebar\",\r\n                    name: \"bizagi.workportal.widgets.project.plan.action\",\r\n                    canvas: \"sidebarcontent1\"\r\n                },\r\n                planState: {\r\n                    layout: \"rightSidebar\",\r\n                    name: \"bizagi.workportal.widgets.project.plan.state\",\r\n                    canvas: \"sidebarcontent3\"\r\n                },\r\n                planProgress: {\r\n                    layout: \"rightSidebar\",\r\n                    name: \"bizagi.workportal.widgets.project.plan.progress\",\r\n                    canvas: \"sidebarcontent4\"\r\n                },\r\n                planTime: {\r\n                    layout: \"rightSidebar\",\r\n                    name: \"bizagi.workportal.widgets.project.plan.time\",\r\n                    canvas: \"sidebarcontent5\"\r\n                },\r\n                planParent: {\r\n                    layout: \"rightSidebar\",\r\n                    name: \"bizagi.workportal.widgets.project.plan.parent\",\r\n                    canvas: \"sidebarcontent6\"\r\n                },\r\n                planUsers: {\r\n                    layout: \"rightSidebar\",\r\n                    name: \"bizagi.workportal.widgets.project.plan.users\",\r\n                    canvas: \"sidebarcontent7\"\r\n                }\r\n            },\r\n            nav: { level: 0 },\r\n            belongs: { \"toLeftSidebarCD\": true, \"toRightSidebarCD\": true, \"toTaskSidebarCD\": false }\r\n        },\r\n        \"ACTIVITYPLANCOMMENTS\": {\r\n            widgets: {\r\n                \"leftSidebar\": {\r\n                    layout: \"leftsidebar\",\r\n                    name: \"bizagi.workportal.widgets.left.sidebar\"\r\n                },\r\n                \"menu\": {\r\n                    layout: \"leftSidebar\",\r\n                    name: \"bizagi.workportal.widgets.project.dashboard.menu.activity.plan\",\r\n                    canvas: \"contentsidebar\"\r\n                },\r\n                \"contentDashboard\": {\r\n                    \"layout\": \"content\",\r\n                    \"name\": \"bizagi.workportal.widgets.project.content.dashboard\"\r\n                },\r\n                discussions: {\r\n                    layout: \"contentDashboard\",\r\n                    name: \"bizagi.workportal.widgets.project.discussions\",\r\n                    canvas: \"contentprincipal\"\r\n                },\r\n                \"rightSidebar\": {\r\n                    \"layout\": \"contentrightsidebar\",\r\n                    \"name\": \"bizagi.workportal.widgets.right.sidebar\"\r\n                },\r\n                discussionSidebar: {\r\n                    layout: \"rightSidebar\",\r\n                    name: \"bizagi.workportal.widgets.project.discussion.sidebar\",\r\n                    canvas: \"sidebarcontent1\"\r\n                },\r\n                activitySidebar: {\r\n                    layout: \"rightSidebar\",\r\n                    name: \"bizagi.workportal.widgets.project.plan.activity.sidebar\",\r\n                    canvas: \"sidebarcontentextra\"\r\n                },\r\n                activityAction: {\r\n                    layout: \"rightSidebar\",\r\n                    name: \"bizagi.workportal.widgets.project.plan.activity.action\",\r\n                    canvas: \"sidebarcontent3\"\r\n                },\r\n                activityTime: {\r\n                    layout: \"rightSidebar\",\r\n                    name: \"bizagi.workportal.widgets.project.plan.activity.time\",\r\n                    canvas: \"sidebarcontent4\"\r\n                },\r\n                activityProgress: {\r\n                    layout: \"rightSidebar\",\r\n                    name: \"bizagi.workportal.widgets.project.plan.activity.progress\",\r\n                    canvas: \"sidebarcontent5\"\r\n                },\r\n                activityParent: {\r\n                    layout: \"rightSidebar\",\r\n                    name: \"bizagi.workportal.widgets.project.plan.activity.parent\",\r\n                    canvas: \"sidebarcontent6\"\r\n                },\r\n                activityUsers: {\r\n                    layout: \"rightSidebar\",\r\n                    name: \"bizagi.workportal.widgets.project.plan.activity.users\",\r\n                    canvas: \"sidebarcontent7\"\r\n                }\r\n            },\r\n            nav: { level: 0 },\r\n            belongs: { \"toLeftSidebarCD\": true, \"toRightSidebarCD\": true, \"toTaskSidebarCD\": false }\r\n        },\r\n        \"ACTIVITYPLANFILES\": {\r\n            widgets: {\r\n                \"leftSidebar\": {\r\n                    layout: \"leftsidebar\",\r\n                    name: \"bizagi.workportal.widgets.left.sidebar\"\r\n                },\r\n                \"menu\": {\r\n                    layout: \"leftSidebar\",\r\n                    name: \"bizagi.workportal.widgets.project.dashboard.menu.activity.plan\",\r\n                    canvas: \"contentsidebar\"\r\n                },\r\n                \"contentDashboard\": {\r\n                    \"layout\": \"content\",\r\n                    \"name\": \"bizagi.workportal.widgets.project.content.dashboard\"\r\n                },\r\n                files: {\r\n                    layout: \"contentDashboard\",\r\n                    name: \"bizagi.workportal.widgets.project.files\",\r\n                    canvas: \"contentprincipal\"\r\n                },\r\n                \"rightSidebar\": {\r\n                    \"layout\": \"contentrightsidebar\",\r\n                    \"name\": \"bizagi.workportal.widgets.right.sidebar\"\r\n                },\r\n                filesPreview: {\r\n                    layout: \"rightSidebar\",\r\n                    name: \"bizagi.workportal.widgets.project.filesPreview\",\r\n                    canvas: \"sidebarcontent1\"\r\n                },\r\n                activitySidebar: {\r\n                    layout: \"rightSidebar\",\r\n                    name: \"bizagi.workportal.widgets.project.plan.activity.sidebar\",\r\n                    canvas: \"sidebarcontentextra\"\r\n                },\r\n                activityAction: {\r\n                    layout: \"rightSidebar\",\r\n                    name: \"bizagi.workportal.widgets.project.plan.activity.action\",\r\n                    canvas: \"sidebarcontent3\"\r\n                },\r\n                activityTime: {\r\n                    layout: \"rightSidebar\",\r\n                    name: \"bizagi.workportal.widgets.project.plan.activity.time\",\r\n                    canvas: \"sidebarcontent4\"\r\n                },\r\n                activityProgress: {\r\n                    layout: \"rightSidebar\",\r\n                    name: \"bizagi.workportal.widgets.project.plan.activity.progress\",\r\n                    canvas: \"sidebarcontent5\"\r\n                },\r\n                activityParent: {\r\n                    layout: \"rightSidebar\",\r\n                    name: \"bizagi.workportal.widgets.project.plan.activity.parent\",\r\n                    canvas: \"sidebarcontent6\"\r\n                },\r\n                activityUsers: {\r\n                    layout: \"rightSidebar\",\r\n                    name: \"bizagi.workportal.widgets.project.plan.activity.users\",\r\n                    canvas: \"sidebarcontent7\"\r\n                }\r\n            },\r\n            nav: { level: 0 },\r\n            belongs: { \"toLeftSidebarCD\": true, \"toRightSidebarCD\": true, \"toTaskSidebarCD\": false }\r\n        },\r\n        \"ACTIVITYPLANPROCESSMAP\": {\r\n            widgets: {\r\n                \"leftSidebar\": {\r\n                    layout: \"leftsidebar\",\r\n                    name: \"bizagi.workportal.widgets.left.sidebar\"\r\n                },\r\n                \"menu\": {\r\n                    layout: \"leftSidebar\",\r\n                    name: \"bizagi.workportal.widgets.project.dashboard.menu.activity.plan\",\r\n                    canvas: \"contentsidebar\"\r\n                },\r\n                \"contentDashboard\": {\r\n                    \"layout\": \"content\",\r\n                    \"name\": \"bizagi.workportal.widgets.project.content.dashboard\"\r\n                },\r\n                processMap: {\r\n                    layout: \"contentDashboard\",\r\n                    name: \"bizagi.workportal.widgets.project.processMap\",\r\n                    canvas: \"contentprincipal\"\r\n                },\r\n                \"rightSidebar\": {\r\n                    \"layout\": \"contentrightsidebar\",\r\n                    \"name\": \"bizagi.workportal.widgets.right.sidebar\"\r\n                },\r\n                activitySidebar: {\r\n                    layout: \"rightSidebar\",\r\n                    name: \"bizagi.workportal.widgets.project.plan.activity.sidebar\",\r\n                    canvas: \"sidebarcontentextra\"\r\n                },\r\n                activityAction: {\r\n                    layout: \"rightSidebar\",\r\n                    name: \"bizagi.workportal.widgets.project.plan.activity.action\",\r\n                    canvas: \"sidebarcontent1\"\r\n                },\r\n                activityTime: {\r\n                    layout: \"rightSidebar\",\r\n                    name: \"bizagi.workportal.widgets.project.plan.activity.time\",\r\n                    canvas: \"sidebarcontent3\"\r\n                },\r\n                activityProgress: {\r\n                    layout: \"rightSidebar\",\r\n                    name: \"bizagi.workportal.widgets.project.plan.activity.progress\",\r\n                    canvas: \"sidebarcontent4\"\r\n                },\r\n                activityParent: {\r\n                    layout: \"rightSidebar\",\r\n                    name: \"bizagi.workportal.widgets.project.plan.activity.parent\",\r\n                    canvas: \"sidebarcontent5\"\r\n                },\r\n                activityUsers: {\r\n                    layout: \"rightSidebar\",\r\n                    name: \"bizagi.workportal.widgets.project.plan.activity.users\",\r\n                    canvas: \"sidebarcontent6\"\r\n                },\r\n                empty6: { layout: \"rightSidebar\", name: \"bizagi.workportal.widgets.dummy\", canvas: \"sidebarcontent7\" }\r\n            },\r\n            nav: { level: 0 },\r\n            belongs: { \"toLeftSidebarCD\": true, \"toRightSidebarCD\": true, \"toTaskSidebarCD\": false }\r\n        },\r\n        \"ACTIVITYPLANLOG\": {\r\n            widgets: {\r\n                \"leftSidebar\": {\r\n                    layout: \"leftsidebar\",\r\n                    name: \"bizagi.workportal.widgets.left.sidebar\"\r\n                },\r\n                \"menu\": {\r\n                    layout: \"leftSidebar\",\r\n                    name: \"bizagi.workportal.widgets.project.dashboard.menu.activity.plan\",\r\n                    canvas: \"contentsidebar\"\r\n                },\r\n                \"contentDashboard\": {\r\n                    \"layout\": \"content\",\r\n                    \"name\": \"bizagi.workportal.widgets.project.content.dashboard\"\r\n                },\r\n                log: {\r\n                    layout: \"contentDashboard\",\r\n                    name: \"bizagi.workportal.widgets.activity.log\",\r\n                    canvas: \"contentprincipal\"\r\n                },\r\n                \"rightSidebar\": {\r\n                    \"layout\": \"contentrightsidebar\",\r\n                    \"name\": \"bizagi.workportal.widgets.right.sidebar\"\r\n                },\r\n                activitySidebar: {\r\n                    layout: \"rightSidebar\",\r\n                    name: \"bizagi.workportal.widgets.project.plan.activity.sidebar\",\r\n                    canvas: \"sidebarcontentextra\"\r\n                },\r\n                activityAction: {\r\n                    layout: \"rightSidebar\",\r\n                    name: \"bizagi.workportal.widgets.project.plan.activity.action\",\r\n                    canvas: \"sidebarcontent1\"\r\n                },\r\n                activityTime: {\r\n                    layout: \"rightSidebar\",\r\n                    name: \"bizagi.workportal.widgets.project.plan.activity.time\",\r\n                    canvas: \"sidebarcontent3\"\r\n                },\r\n                activityProgress: {\r\n                    layout: \"rightSidebar\",\r\n                    name: \"bizagi.workportal.widgets.project.plan.activity.progress\",\r\n                    canvas: \"sidebarcontent4\"\r\n                },\r\n                activityParent: {\r\n                    layout: \"rightSidebar\",\r\n                    name: \"bizagi.workportal.widgets.project.plan.activity.parent\",\r\n                    canvas: \"sidebarcontent5\"\r\n                },\r\n                activityUsers: {\r\n                    layout: \"rightSidebar\",\r\n                    name: \"bizagi.workportal.widgets.project.plan.activity.users\",\r\n                    canvas: \"sidebarcontent6\"\r\n                },\r\n                empty6: { layout: \"rightSidebar\", name: \"bizagi.workportal.widgets.dummy\", canvas: \"sidebarcontent7\" }\r\n            },\r\n            nav: { level: 0 },\r\n            belongs: { \"toLeftSidebarCD\": true, \"toRightSidebarCD\": true, \"toTaskSidebarCD\": false }\r\n        },\r\n        \"ACTIVITYPLANTIMELINE\": {\r\n            widgets: {\r\n                \"leftSidebar\": {\r\n                    layout: \"leftsidebar\",\r\n                    name: \"bizagi.workportal.widgets.left.sidebar\"\r\n                },\r\n                \"menu\": {\r\n                    layout: \"leftSidebar\",\r\n                    name: \"bizagi.workportal.widgets.project.dashboard.menu.activity.plan\",\r\n                    canvas: \"contentsidebar\"\r\n                },\r\n                \"contentDashboard\": {\r\n                    \"layout\": \"content\",\r\n                    \"name\": \"bizagi.workportal.widgets.project.content.dashboard\"\r\n                },\r\n                \"timeline\": {\r\n                    layout: \"contentDashboard\",\r\n                    name: \"bizagi.workportal.widgets.project.timeline\",\r\n                    canvas: \"contentprincipal\"\r\n                },\r\n                \"rightSidebar\": {\r\n                    \"layout\": \"contentrightsidebar\",\r\n                    \"name\": \"bizagi.workportal.widgets.right.sidebar\"\r\n                },\r\n                activitySidebar: {\r\n                    layout: \"rightSidebar\",\r\n                    name: \"bizagi.workportal.widgets.project.plan.activity.sidebar\",\r\n                    canvas: \"sidebarcontentextra\"\r\n                },\r\n                activityAction: {\r\n                    layout: \"rightSidebar\",\r\n                    name: \"bizagi.workportal.widgets.project.plan.activity.action\",\r\n                    canvas: \"sidebarcontent1\"\r\n                },\r\n                activityTime: {\r\n                    layout: \"rightSidebar\",\r\n                    name: \"bizagi.workportal.widgets.project.plan.activity.time\",\r\n                    canvas: \"sidebarcontent3\"\r\n                },\r\n                activityProgress: {\r\n                    layout: \"rightSidebar\",\r\n                    name: \"bizagi.workportal.widgets.project.plan.activity.progress\",\r\n                    canvas: \"sidebarcontent4\"\r\n                },\r\n                activityParent: {\r\n                    layout: \"rightSidebar\",\r\n                    name: \"bizagi.workportal.widgets.project.plan.activity.parent\",\r\n                    canvas: \"sidebarcontent5\"\r\n                },\r\n                activityUsers: {\r\n                    layout: \"rightSidebar\",\r\n                    name: \"bizagi.workportal.widgets.project.plan.activity.users\",\r\n                    canvas: \"sidebarcontent6\"\r\n                },\r\n                empty6: { layout: \"rightSidebar\", name: \"bizagi.workportal.widgets.dummy\", canvas: \"sidebarcontent7\" }\r\n            },\r\n            nav: { level: 0 },\r\n            belongs: { \"toLeftSidebarCD\": true, \"toRightSidebarCD\": true, \"toTaskSidebarCD\": false }\r\n        },\r\n        \"REFRESHALL\": {\r\n            widgets: {\r\n                \"leftSidebar\": {\r\n                    layout: \"leftsidebar\",\r\n                    name: \"bizagi.workportal.widgets.dummy\"\r\n                },\r\n                \"contentDashboard\": { layout: \"content\", name: \"bizagi.workportal.widgets.dummy\" },\r\n                \"rightSidebar\": {\r\n                    \"layout\": \"contentrightsidebar\",\r\n                    \"name\": \"bizagi.workportal.widgets.dummy\"\r\n                }\r\n            },\r\n            nav: { level: 0 }\r\n        }\r\n    }\r\n}, {\r\n\r\n    /*\r\n     *   Constructor\r\n     */\r\n    init: function (workportalFacade, dataService, params) {\r\n        var self = this;\r\n\r\n        // Call base\r\n        self._super(workportalFacade, dataService, params);\r\n\r\n        self.CONTEXT_HOME = \"HOME\";\r\n\r\n        params = params || {};\r\n        params.supportNav = true;\r\n\r\n        self.setContextsByNotifyEvents();\r\n        //Load templates\r\n        self.loadTemplates({\r\n            \"homeportal\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.homeportal\").concat(\"#homeportal-frame\")\r\n        });\r\n\r\n        if (params.widgetName == \"homeportal\") {\r\n            if (!bizagi.referrerParams) bizagi.referrerParams = {};\r\n\r\n            bizagi.referrerParams.referrer = self.getWidgetName();\r\n        }\r\n\r\n        self.manager = bizagi.injector.get(\"widgetManager\", params);\r\n        self.manager.sub(\"notifyChange\", $.proxy(self.onNotifyChange, self));\r\n        self.sub(\"notify\", $.proxy(self.onNotifyChange, self));\r\n\r\n        bizagi.injector.registerInstance(\"homeportal\", self);\r\n    },\r\n    /**\r\n     * Set context by behaviors sidebars\r\n     */\r\n    setContextsByNotifyEvents: function () {\r\n        var self = this;\r\n        self.params = self.params || {};\r\n        self.params.contextsSidebarActivity = [];\r\n        self.params.contextsWithoutLeftSidebarCaseDashboard = [];\r\n        self.params.contextsLeftSidebarCaseDashboard = [];\r\n        self.params.contextsWithoutRightSidebarCaseDashboard = [];\r\n        self.params.contextsRightSidebarCaseDashboard = [];\r\n\r\n\r\n        for (var context in this.Class.contexts) {\r\n            if (this.Class.contexts.hasOwnProperty(context)) {\r\n                if (this.Class.contexts[context].belongs && this.Class.contexts[context].belongs.toTaskSidebarCD) {\r\n                    self.params.contextsSidebarActivity.push(context);\r\n                }\r\n\r\n                if (this.Class.contexts[context].belongs && this.Class.contexts[context].belongs.toLeftSidebarCD) {\r\n                    self.params.contextsLeftSidebarCaseDashboard.push(context);\r\n                }\r\n                else {\r\n                    self.params.contextsWithoutLeftSidebarCaseDashboard.push(context);\r\n                }\r\n\r\n                if (this.Class.contexts[context].belongs && this.Class.contexts[context].belongs.toRightSidebarCD) {\r\n                    self.params.contextsRightSidebarCaseDashboard.push(context);\r\n                }\r\n                else {\r\n                    self.params.contextsWithoutRightSidebarCaseDashboard.push(context);\r\n                }\r\n            }\r\n        }\r\n    },\r\n\r\n    /*\r\n     *   Returns the widget name\r\n     */\r\n    getWidgetName: function () {\r\n        return bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_HOMEPORTAL;\r\n    },\r\n\r\n    /*\r\n     * Renders the template defined in the widget\r\n     */\r\n    renderContent: function () {\r\n        var self = this;\r\n        var d = $.Deferred();\r\n\r\n        var template = self.getTemplate(\"homeportal\");\r\n        self.content = template.render({});\r\n\r\n        d.resolve(self.content);\r\n\r\n        return d.promise();\r\n    },\r\n\r\n    /*\r\n     * links events with handlers\r\n     */\r\n    postRender: function () {\r\n        var self = this;\r\n        self.manager.necesaryClean();\r\n        self.manager.setLayout(self.getContent());\r\n        var servicesPD = new bizagi.workportal.services.behaviors.projectDashboard(self.dataService);\r\n        $.when(servicesPD.getContextToShow(self.params)).done(function (dataPD) {\r\n\r\n            // User doesn't have permision to access this case\r\n            if (dataPD.responseGetCaseSummaryDetails && dataPD.responseGetCaseSummaryDetails.hasAccessToCase === false) {\r\n                self.publish(\"changeWidget\", {\r\n                    widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ACCESS_DENIED\r\n                });\r\n                return;\r\n            }\r\n\r\n            var currentContext = dataPD.contextToShow.toLowerCase();\r\n\r\n            if (currentContext === \"home\") {\r\n                if (!bizagiConfig.themesEnabled) {\r\n                    self.loadContext(currentContext, self, dataPD);\r\n                }\r\n                else{\r\n                    servicesPD.getCurrentTheme().done(function (theme) {\r\n                        if (theme.name == \"classic\") {\r\n                            self.loadContext(currentContext, self, dataPD);\r\n                        }\r\n                        else {\r\n                            servicesPD.setCurrentTheme(theme);\r\n                            self.setWidgetReady();\r\n                        }\r\n                    });\r\n                }\r\n            }\r\n            else {\r\n                self.loadContext(currentContext, self, dataPD);\r\n            }\r\n\r\n            \r\n        });\r\n\r\n        self.subscribe(\"openCloseSidebar\", function () {\r\n            $(\".content-scroll\", self.getContent()).trigger(\"resize\");\r\n        });\r\n    },\r\n\r\n    loadContext: function (currentContext, self, dataPD) {\r\n        var contexts = self.Class.contexts;\r\n        var histName;\r\n        var level;\r\n\r\n        bizagi.loader.startAndThen(currentContext).then( function () {\r\n            if (dataPD.contextToShow !== self.CONTEXT_HOME) {\r\n                //Summary case return differnet result to get workitems.\r\n                dataPD.responseGetCaseSummaryDetails.hasGlobalForm = undefined;\r\n                $.extend(self.params, dataPD.responseGetCaseSummaryDetails, dataPD.params);\r\n                //histName = dataPD.nameWorkItem;\r\n            }\r\n            else {\r\n                level=0;\r\n                histName = bizagi.localization.getResource(\"workportal-widget-home-title\");\r\n            }\r\n\r\n            $(\"#ui-bizagi-wp-project-homeportal-main\").show();\r\n\r\n            $.when(self.manager.updateView({\r\n                context: dataPD.contextToShow,\r\n                data: contexts[dataPD.contextToShow],\r\n                args: $.extend(self.params, {\r\n                    histName: histName,\r\n                    level: level,\r\n                    showContextByMenuDashboard: dataPD.contextToShow\r\n                })\r\n            })).done(function () {\r\n                self.publish(\"showMainMenu\");\r\n                self.setWidgetReady();\r\n                self.manager.pub(\"homeportalReady\");\r\n            });\r\n        });\r\n    },\r\n\r\n    /**\r\n     * Notifies when an event is raised\r\n     */\r\n    onNotifyChange: function (ev, params) {\r\n        var self = this,\r\n           context = params.type;\r\n\r\n        if (self.isValidContext(context)) {\r\n            //load the module\r\n            return bizagi.loader.startAndThen(context.toLowerCase()).then(function () {\r\n                var servicesPD = new bizagi.workportal.services.behaviors.projectDashboard(self.dataService);\r\n                servicesPD.removeCurrentTheme();\r\n\r\n                $.when(self.manager.updateView($.extend({\r\n                        context: context,\r\n                        data: self.Class.contexts[context]\r\n                }, params))).done(function () {\r\n                    $(\"#ui-bizagi-wp-project-homeportal-main\").show();\r\n                    self.publish(\"showMainMenu\");\r\n                });\r\n            });\r\n        }\r\n\r\n        return self.manager.emit($.extend(params, { context: context }));\r\n    },\r\n\r\n    /**\r\n     * Returns true if the context is valid\r\n     */\r\n    isValidContext: function (context) {\r\n        return (this.Class.contexts[context] !== null &&\r\n        typeof this.Class.contexts[context] == \"object\");\r\n    },\r\n\r\n    /**\r\n     * Override base dispose method\r\n     */\r\n    dispose: function () {\r\n        var self = this;\r\n\r\n        self.manager.dispose();\r\n        self._super();\r\n    }\r\n});","/**\r\n *   Name: Bizagi Workportal Desktop HomePortal Controller\r\n *   Author: Danny González\r\n */\r\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.dialognav\", {\r\n    contexts: {\r\n        \"TEMPLATEENGINE-VIEW\": {\r\n            widgets: {\r\n                \"navigator\": {\r\n                    \"layout\": \"navigator\",\r\n                    \"name\": \"bizagi.workportal.widgets.navigator\",\r\n                    \"refresh\": false,\r\n                    \"newInstance\": true\r\n                },\r\n                \"template\": {\r\n                    \"layout\": \"template\",\r\n                    \"name\": \"bizagi.workportal.widgets.templates\",\r\n                    \"newInstance\": true\r\n                },\r\n                \"paginator\": {\r\n                    \"layout\": \"paginator\",\r\n                    \"name\": \"bizagi.workportal.widgets.paginator\",\r\n                    \"newInstance\": true\r\n                }\r\n            },\r\n            nav: { level: 1 }\r\n        }\r\n    }\r\n}, {\r\n\r\n    /**\r\n     * Constructor\r\n     */\r\n    init: function (workportalFacade, dataService, params) {\r\n        var self = this;\r\n        params = params || {};\r\n        params.supportNav = true;\r\n\r\n        // Call base\r\n        self._super(workportalFacade, dataService, params);\r\n\r\n        //Load templates\r\n        self.loadTemplates({\r\n            \"dialognavdata\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.dialognav\").concat(\"#dialognavdata-frame\")\r\n        });\r\n\r\n        self.manager = new bizagi.workportal.widgets.manager(self.workportalFacade, self.dataService, '', params);\r\n        self.manager.sub(\"notifyChange\", $.proxy(self.onNotifyChange, self));\r\n\r\n        self.sub(\"notify\", $.proxy(self.onNotifyChange, self));\r\n    },\r\n\r\n    /**\r\n     *   Returns the widget name\r\n     */\r\n    getWidgetName: function () {\r\n        return bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_DIALOGNAV;\r\n    },\r\n\r\n    /**\r\n     * Renders the template defined in the widget\r\n     */\r\n    renderContent: function () {\r\n        var self = this;\r\n        var template = self.getTemplate(\"dialognavdata\");\r\n        self.content = template.render({});\r\n\r\n        return self.content;\r\n    },\r\n\r\n    /**\r\n     * links events with handlers\r\n     */\r\n    postRender: function () {\r\n        var self = this;\r\n        var paramsData = self.params.data.data || {};\r\n        var eventType = self.params.data.eventType || \"\";\r\n        var args = {\r\n            fromActionLauncher: true,\r\n            guidEntityCurrent: paramsData.guidEntityCurrent,\r\n            histName: paramsData.displayName,\r\n            level: 1,\r\n            page: 1,\r\n            reference: paramsData.reference,\r\n            referenceType: paramsData.referenceType,\r\n            showDateNavigator: false,\r\n            surrogateKey: paramsData.surrogateKey,\r\n            xpath: paramsData.xpath,\r\n            eventType: eventType\r\n        };\r\n\r\n        self.manager.setLayout(self.getContent());\r\n        self.manager.updateView({\r\n            context: \"TEMPLATEENGINE-VIEW\",\r\n            data: self.Class.contexts[\"TEMPLATEENGINE-VIEW\"],\r\n            args: args\r\n        });\r\n    },\r\n\r\n    /**\r\n     * Notifies when an event is raised\r\n     */\r\n    onNotifyChange: function (ev, params) {\r\n        var self = this;\r\n        var context = params.type;\r\n\r\n        if (self.isValidContext(context)) {\r\n            return self.manager.updateView($.extend({\r\n                context: context,\r\n                data: self.Class.contexts[context]\r\n            }, params));\r\n        }\r\n\r\n        return self.manager.emit($.extend(params, { context: context }));\r\n    },\r\n\r\n    /**\r\n     * Returns true if the context is valid\r\n     */\r\n    isValidContext: function (context) {\r\n        var self = this;\r\n        var classContext = self.Class.contexts;\r\n\r\n        return (classContext[context] !== null && typeof classContext[context] == \"object\");\r\n    },\r\n\r\n    /**\r\n     * Override base dispose method\r\n     */\r\n    dispose: function () {\r\n        var self = this;\r\n\r\n        self.manager.dispose();\r\n        self._super();\r\n    }\r\n});","/*\r\n *   Name: BizAgi Workportal Desktop Render Widget Controller\r\n *   Author: Diego Parra (based on Edward Morales version)\r\n *   Comments:\r\n *   -   This script will provide desktop overrides to implement the render widget\r\n */\r\n\r\n// Auto extend\r\nbizagi.workportal.widgets.routing.extend(\"bizagi.workportal.widgets.routing\", {}, {\r\n    init: function(workportalFacade, dataService, params) {\r\n        var self = this;\r\n\r\n        // Call base\r\n        self._super(workportalFacade, dataService, params);\r\n\r\n        //Load templates\r\n        self.loadTemplates({\r\n            \"routing\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.routing\"),\r\n            useNewEngine: false\r\n        });\r\n    },\r\n\r\n    /*\r\n     *   To be overriden in each device to apply layouts\r\n     */\r\n    postRender: function() {\r\n        var self = this;\r\n        var content = self.getContent();\r\n\r\n        var workOnITActivitySelector = $(\"#ui-bizagi-wp-app-routing-activity-wf tbody tr\", content);\r\n        var workOnITProcessSelector = $(\"#ui-bizagi-wp-app-routing-process-wf tbody tr\", content);\r\n\r\n        var onlyUserWorkItems = (self.params.data.fromSearchWidget) ? \"false\" : \"true\";\r\n        var eventAsTasks = (self.params.data.fromSearchWidget) ? \"true\" : \"false\";\r\n\r\n        // Assing even style\r\n        $(\"tr:nth-child(even)\", content).addClass(\"event\");\r\n\r\n        $(\".workonitRow\", content).button();\r\n\r\n        $(workOnITActivitySelector).click(function() {\r\n            self.showWorkitem({\r\n                idCase: $(this).children(\":first\").children(\"#idCase\").val(),\r\n                idWorkitem: $(this).children(\":first\").children(\"#idWorkItem\").val(),\r\n                idTask: $(this).children(\":first\").children(\"#idTask\").val(),\r\n                idWorkflow: $(this).children(\":first\").children(\"#idWorkflow\").val(),\r\n                onlyUserWorkItems: onlyUserWorkItems,\r\n                eventAsTasks: eventAsTasks\r\n            });\r\n        });\r\n\r\n\r\n        $(workOnITProcessSelector).click(function() {\r\n            self.publish(\"executeAction\", {\r\n                action: bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING,\r\n                idCase: $(this).children(\":first\").children(\"#idCase\").val(),\r\n                onlyUserWorkItems: onlyUserWorkItems,\r\n                eventAsTasks: eventAsTasks\r\n            });\r\n\r\n            // close dialog\r\n            self.publish(\"closeCurrentDialog\");\r\n        });\r\n    },\r\n    /*\r\n     *   Shows the rendering widget\r\n     */\r\n    showWorkitem: function(params) {\r\n        var self = this;\r\n        var referrer = self.params.referrer;\r\n        // Shows render widget\r\n        $.when(bizagi.util.autoSave()).done(function () {\r\n            $(document).data('auto-save', '');\r\n            self.publish(\"executeAction\", {\r\n                action: bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING,\r\n                idCase: params.idCase,\r\n                idWorkItem: params.idWorkitem,\r\n                idWorkflow: params.idWorkflow,\r\n                idTask: params.idTask,\r\n                referrer: referrer\r\n            });\r\n            // close dialog\r\n            self.publish(\"closeCurrentDialog\");\r\n        })\r\n    },\r\n    /**\r\n     * Show Async widget\r\n     */\r\n    showAsyncWidget: function(params) {\r\n        var self = this;\r\n\r\n        // Shows dialog widget with async template           \r\n        self.publish(\"showDialogWidget\", {\r\n            widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ASYNC,\r\n            data: data,\r\n            modalParameters: parameters\r\n        });\r\n    }\r\n});\r\n","/*\r\n *   Name: BizAgi Workportal Desktop Routing Widget Controller\r\n *   Author: Diego Parra (based on Edward Morales version)\r\n *   Comments:\r\n *   -   This script will provide desktop overrides to implement the routing widget\r\n */\r\n\r\n// Auto extend\r\nbizagi.workportal.widgets.render.extend(\"bizagi.workportal.widgets.render\", {}, {\r\n\r\n    /*\r\n    *   Constructor\r\n    */\r\n    init: function (workportalFacade, dataService, params) {\r\n        var self = this;\r\n\r\n        // Call base\r\n        self._super(workportalFacade, dataService, params);\r\n\r\n        //Load templates\r\n        self.loadTemplates({\r\n            \"inbox-common-case-summary-subprocess\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.inbox.common\").concat(\"#ui-bizagi-workportal-widget-inbox-common-case-description-subprocess\"),\r\n            \"inbox-common-case-summary-assignees\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.inbox.common\").concat(\"#ui-bizagi-workportal-widget-inbox-common-case-description-assignees\"),\r\n            \"inbox-common-case-summary-events\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.inbox.common\").concat(\"#ui-bizagi-workportal-widget-inbox-common-case-description-events\"),\r\n            \"inbox-common-case-summary-activities\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.inbox.common\").concat(\"#ui-bizagi-workportal-widget-inbox-common-case-description-activities\"),\r\n            \"render-case-summary\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.render\").concat(\"#ui-bizagi-workportal-widget-render-case-description\"),\r\n            useNewEngine: false\r\n        });\r\n    },\r\n\r\n    /*\r\n    *   Renders the content for the current controller\r\n    *   Returns a deferred because it has to load the current user\r\n    */\r\n    renderContent: function() {\r\n        var self = this;\r\n\r\n        // Set sub-templates\t\t\r\n        self.caseSummaryTemplate = self.getTemplate(\"render-case-summary\");\r\n        self.caseSummaryTemplateSubprocess = self.getTemplate(\"inbox-common-case-summary-subprocess\");\r\n        self.caseSummaryTemplateAssigness = self.getTemplate(\"inbox-common-case-summary-assignees\");\r\n        self.caseSummaryTemplateActivities = self.getTemplate(\"inbox-common-case-summary-activities\");\r\n        self.caseSummaryTemplateEvents = self.getTemplate(\"inbox-common-case-summary-events\");\r\n        self.paginationTemplate = self.workportalFacade.getTemplate(\"inbox-common-pagination-inbox\");\r\n\r\n        var result = self._super();\r\n        return result;\r\n    },\r\n\r\n    /*\r\n    *   To be overriden in each device to apply layouts\r\n    */\r\n    postRender: function () {\r\n        var self = this;\r\n        var content = self.getContent();\r\n\r\n        self.params.referrerParams = self.params.referrerParams || {};\r\n\r\n        // Set instance variables\r\n        self.summaryDisplayed = true;\r\n\r\n        // Set scrollbars\r\n        $(\"#ui-bizagi-wp-app-render-desc-panel\", content).bizagiScrollbar();\r\n        $(\".scrollRender\", content).bizagiScrollbar({\r\n            autohide: false\r\n        });\r\n\r\n        // Attach panel slide event\r\n        self.configureSlider();\r\n\r\n        // Configure header buttons\r\n        self.configureHeader();\r\n\r\n        // Resize layout\r\n        self.resizeLayout();\r\n\r\n\r\n        //self.renderSummaryTab.scrollabletab();\r\n        // jQuery-ui tabs\r\n        window.setTimeout(function() {\r\n            if (!bizagi.util.identicalObjects($(\"#ui-bizagi-details-tabs\", content).find('.ui-tabs-nav').offset(), { top: 0, left: 0 })) {\r\n                $(\"#ui-bizagi-details-tabs\", content).tabs().scrollabletab({\r\n                    tooltipNext: self.getResource(\"workportal-scrollabletab-nex\"),\r\n                    tooltipPrevious: self.getResource(\"workportal-scrollabletab-prev\")\r\n                });\r\n            }\r\n\r\n        }, 500);\r\n\r\n        // Add click to view workflow\r\n        $(\".ui-bizagi-wp-app-inbox-cases-ico-view\", content).click(function () {\r\n            self.showGraphicQuery({ idCase: self.params.idCase, idWorkflow: self.params.idWorkflow })\r\n        });\r\n\r\n        // Bind navigation bar\r\n        // Set idcase data\r\n        $(\".back\", content).data(\"idCase\", self.getBackCase());\r\n        $(\".next\", content).data(\"idCase\", self.getNextCase());\r\n\r\n        // Bind for click event on back and next botton\r\n        $(\".back, .next\", content).click(function () {\r\n            var idCase = $(this).data(\"idCase\");\r\n            if (idCase > 0) {\r\n                self.publish(\"executeAction\", {\r\n                    action: bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING,\r\n                    idCase: idCase\r\n                });\r\n            }\r\n        });\r\n\r\n        // Bind for click event on refresh botton\r\n        $(\".refresh\", content).click(function () {\r\n            var options = {\r\n                action: bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING,\r\n                idCase: self.params.idCase,\r\n                idTask: self.params.idTask,\r\n                idWorkflow: self.params.idWorkflow,\r\n                idWorkItem: self.params.idWorkitem,\r\n                referrer: self.params.referrer || \"inboxGrid\"\r\n            };\r\n\r\n            self.publish(\"executeAction\", options);\r\n        });\r\n\r\n        // Bind for click event on return botton\r\n        $(\".ui-bizagi-wp-app-inbox-bt-back, #innerContentInbox h2\", content).click(function () {\r\n            if (bizagi)\r\n                if (bizagi.referrerParams)\r\n                    var widget = bizagi.referrerParams.referrer || bizagi.cookie('bizagiDefaultWidget');\r\n            if (widget == \"queryform\") widget = bizagi.workportal.currentInboxView || \"inboxGrid\";\r\n\r\n            // switch referer widget \r\n            switch (widget) {\r\n                case \"inbox\":\r\n                    self.publish(\"changeWidget\", {\r\n                        widgetName: widget,\r\n                        restoreStatus: true\r\n                    });\r\n                    break;\r\n                case \"inboxGrid\":\r\n\r\n                    self.publish(\"changeWidget\", {\r\n                        widgetName: widget,\r\n                        restoreStatus: true\r\n                    });\r\n                    break;\r\n                case \"search\":\r\n                    self.publish(\"executeAction\", {\r\n                        action: bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_SEARCH,\r\n                        radNumber: bizagi.referrerParams.radNumber || \"\",\r\n                        page: bizagi.referrerParams.page || 1,\r\n                        onlyUserWorkItems: false\r\n                    });\r\n                    break;\r\n                case \"queryform\":\r\n                    self.publish(\"showDialogWidget\", {\r\n                        widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_QUERYFORM,\r\n                        queryFormAction: \"loadPrevious\"\r\n                    });\r\n                    break;\r\n                case \"folders\":\r\n                    var url = bizagi.referrerParams.urlParameters + \"&page=\" + bizagi.referrerParams.page;\r\n                    $.when(self.dataService.getCasesByFolder(url))\r\n                        .done(function (data) {\r\n                            data.customized = true;\r\n                            data.urlParameters = bizagi.referrerParams.urlParameters;\r\n\r\n                            // Define title of widget\r\n                            data.title = bizagi.referrerParams.name;\r\n\r\n                            // Set a flag here to tell the search widget that must show the ungroup case from folder (icon).\r\n                            data.casesGroupedByFolder = true;\r\n                            data.idFolder = bizagi.referrerParams.id;\r\n\r\n                            self.publish(\"changeWidget\", {\r\n                                widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_SEARCH,\r\n                                data: data,\r\n                                referrerParams: {}\r\n                            });\r\n                        });\r\n                    break;\r\n                default:\r\n                    self.publish(\"changeWidget\", {\r\n                        widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INBOX_GRID,\r\n                        restoreStatus: true\r\n                    });\r\n                    break;\r\n            }\r\n        });\r\n\r\n        // Bind for hover event on refresh and return botton\r\n        $(\".refresh,.return\", content).hover(function () {\r\n            $(this).addClass(\"active\");\r\n        }, function () {\r\n            $(this).removeClass(\"active\");\r\n        });\r\n\r\n        // Bind for hover event on next and back botton\r\n        $(\".next,.back\", content).hover(\r\n            function () {\r\n                if ($(this).data(\"idCase\") > 0) {\r\n                    $(this).addClass(\"active\");\r\n                }\r\n            },\r\n            function () {\r\n                $(this).removeClass(\"active\");\r\n            });\r\n\r\n        if (self.dataService.lastQueryFullKey != null) {\r\n            $(\"#bt-case-action-showquery\", content).click(function () {\r\n                self.publish(\"showDialogWidget\", {\r\n                    widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_QUERYFORM,\r\n                    queryFormAction: \"loadPrevious\"\r\n                });\r\n\r\n            });\r\n        }\r\n\r\n        // Bind botton summary actions\r\n        $(\"#bt-case-action-log\", content).click(function () {\r\n\r\n            self.publish(\"showDialogWidget\", {\r\n                widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ACTIVITY_LOG,\r\n                data: { \"idCase\": self.params.idCase, \"idWorkflow\": self.params.idWorkflow },\r\n                modalParameters: {\r\n                    title: bizagi.localization.getResource(\"render-actions-log\")\r\n                }\r\n            });\r\n\r\n        });\r\n\r\n        $(\"#bt-case-action-reassing\", content).click(function () {\r\n            var idCase = self.params.idCase;\r\n            var idWorkItem = self.params.idWorkitem;\r\n            var idtask = self.params.idtask;\r\n           $.when(self.publish(\"showDialogWidget\", {\r\n                widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_REASSIGN_CASE,\r\n                data: { \"idCase\": idCase,\r\n                    \"idWorkItem\": idWorkItem\r\n                },\r\n                closeVisible: false,\r\n                maximize: true,\r\n                modalParameters: {\r\n                    title: bizagi.localization.getResource(\"render-actions-reassign\"),\r\n                    width: \"910px\",\r\n                    id: \"CaseAdmin\"\r\n                }\r\n            }));\r\n\r\n\r\n\r\n        });\r\n\r\n        self.printFormCommand = new bizagi.workportal.command.printform(self.workportalFacade);\r\n\r\n        $(\"#bt-case-action-print\", content).click(function () {\r\n\r\n            var printParams = { idCase: self.params.idCase,\r\n                idWorkitem: self.params.idWorkitem,\r\n                idTask: self.params.idTask\r\n            };\r\n\r\n            self.printFormCommand.print(printParams);\r\n\r\n        });\r\n\r\n        $(\"#bt-case-action-help\", content).click(function () {\r\n            var url = $(this).find(\"#helpUrl\").val();\r\n\r\n            self.publish(\"showDialogWidget\", {\r\n                widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_GENERICIFRAME,\r\n                widgetURL: url,\r\n                modalParameters: {\r\n                    title: bizagi.localization.getResource(\"render-actions-help\")\r\n                }\r\n            });\r\n        });\r\n    },\r\n    /*\r\n    *   configures the slide event\r\n    */\r\n    configureSlider: function () {\r\n        var self = this;\r\n        var content = self.getContent();\r\n        if (!content) {\r\n            return;\r\n        }\r\n\r\n        var summaryContainer = self.getComponentContainer(\"summary\");\r\n        var sliderPanel = $(\"#panelArrowContainer\", content);\r\n\r\n        sliderPanel.click(function () {\r\n            if (summaryContainer.is(\":visible\")) {\r\n                // Hide left panel\r\n                self.hideSummary();\r\n\r\n            } else {\r\n                // Show left panel\r\n                self.showSummary();\r\n            }\r\n        });\r\n    },\r\n    /*\r\n    *   Hides the summary component\r\n    */\r\n    hideSummary: function (animate) {\r\n        var self = this;\r\n        var content = self.getContent();\r\n        if (!content) {\r\n            return;\r\n        }\r\n\r\n        var summaryContainer = self.getComponentContainer(\"summary\");\r\n        var renderPanel = $(\"#ui-bizagi-wp-app-render-form\", content);\r\n        var sliderPanel = $(\"#panelArrowContainer\", content);\r\n        var panelArrow = $(\"#panelArrow\", content);\r\n        animate = typeof (animate) !== \"undefined\" ? animate : false;\r\n\r\n        if (!self.summaryDisplayed) {\r\n            return;\r\n        }\r\n\r\n        if (animate) {\r\n            // Hide description panel\r\n            summaryContainer.parent().hide('drop', {}, 300);\r\n\r\n            // Run animation\r\n            $.when(sliderPanel.animate({\r\n                left: \"0px\"\r\n            }, 300))\r\n                .done(function () {\r\n                    renderPanel.addClass(\"ui-bizagi-state-extended\");\r\n                    $(\"#ui-bizagi-wp-app-render-form-content\", content).css(\"padding-left\", \"0px\");\r\n                });\r\n\r\n        } else {\r\n            // Hide description panel\r\n            summaryContainer.parent().hide();\r\n            sliderPanel.css(\"left\", \"0px\");\r\n            renderPanel.addClass(\"ui-bizagi-state-extended\");\r\n            $(\"#ui-bizagi-wp-app-render-form-content\", content).css(\"padding-left\", \"0px\");\r\n        }\r\n\r\n        // Change arrows\r\n        panelArrow.removeClass(\"panelArrowLeft\");\r\n        panelArrow.addClass(\"panelArrowRight\");\r\n\r\n        // Turn off flag\r\n        self.summaryDisplayed = false;\r\n\r\n        // Trigger render resize\r\n        if (self.renderingFacade) {\r\n            self.renderingFacade.resize({\r\n                forceResize: true\r\n            });\r\n        }\r\n    },\r\n    /*\r\n    *   Show the summary component\r\n    */\r\n    showSummary: function (animate) {\r\n        var self = this;\r\n        var content = self.getContent();\r\n        if (!content) {\r\n            return;\r\n        }\r\n\r\n        var summaryContainer = self.getComponentContainer(\"summary\");\r\n        var renderPanel = $(\"#ui-bizagi-wp-app-render-form\", content);\r\n        var sliderPanel = $(\"#panelArrowContainer\", content);\r\n        var panelArrow = $(\"#panelArrow\", content);\r\n        animate = typeof (animate) !== \"undefined\" ? animate : false;\r\n\r\n        if (self.summaryDisplayed) {\r\n            return;\r\n        }\r\n\r\n        // Show description panel\r\n        summaryContainer.parent().show();\r\n        $(\"#ui-bizagi-wp-app-render-form-content\", content).css(\"padding-left\", \"380px\");\r\n        sliderPanel.css(\"left\", \"380px\");\r\n        renderPanel.removeClass(\"ui-bizagi-state-extended\");\r\n\r\n        // Change arrows\r\n        panelArrow.removeClass(\"panelArrowRight\");\r\n        panelArrow.addClass(\"panelArrowLeft\");\r\n\r\n        // Turn on flag\r\n        self.summaryDisplayed = true;\r\n\r\n\r\n        // jQuery-ui tabs scrollable\r\n        if (!($(\"#ui-bizagi-details-tabs\", content).closest(\"#stTabswrapper\").length > 0)) {\r\n            $(\"#ui-bizagi-details-tabs\", content).tabs().scrollabletab({\r\n                tooltipNext: self.getResource(\"workportal-scrollabletab-nex\"),\r\n                tooltipPrevious: self.getResource(\"workportal-scrollabletab-prev\")\r\n            });\r\n        }\r\n\r\n        // Trigger render resize\r\n        if (self.renderingFacade) {\r\n            self.renderingFacade.resize({\r\n                forceResize: true\r\n            });\r\n        }\r\n\r\n    },\r\n    /*\r\n    *   Configure header for the widget\r\n    */\r\n    configureHeader: function () {\r\n        var self = this;\r\n        var content = self.getContent();\r\n\r\n        // Configure back button\r\n        //        $(\"#ui-bizagi-wp-app-inbox-bt-back\", content).click(function() {\r\n        //            self.publish(\"changeWidget\", {\r\n        //                widgetName: bizagi.workportal.currentInboxView\r\n        //            });\r\n        //        });\r\n    },\r\n    /*\r\n    *   When the window resizes, runs this method to adjust stuff in each controller or widget\r\n    *   Override when needed\r\n    */\r\n    performResizeLayout: function () {\r\n        var self = this;\r\n        var windowWidth = $(window).width();\r\n\r\n        // Call base\r\n        this._super();\r\n\r\n        // If window width is less or equals 1366 hide the summary\r\n        if (windowWidth <= 1366) {\r\n            if (self.summaryDisplayed) {\r\n                self.hideSummary(false);\r\n            } else {\r\n                // Trigger render resize\r\n                if (self.renderingFacade) {\r\n                    self.renderingFacade.resize({\r\n                        forceResize: true\r\n                    });\r\n                }\r\n            }\r\n\r\n        } else {\r\n            if (!self.summaryDisplayed) {\r\n                self.showSummary(false);\r\n            }\r\n            else {\r\n                // Trigger render resize\r\n                if (self.renderingFacade) {\r\n                    self.renderingFacade.resize({\r\n                        forceResize: true\r\n                    });\r\n                }\r\n            }\r\n        }\r\n    },\r\n    /*\r\n    *   Opens the workportal old form in a window\r\n    */\r\n    openOldWorkportalForm: function () {\r\n        var self = this;\r\n        //var url = BIZAGI_PATH_TO_BASE + \"defaulthtml.aspx?FrameURL=App/ListaDetalle/Detalle.aspx?idCase=\" + self.params.idCase;\r\n        var url = BIZAGI_PATH_TO_BASE + \"App/ListaDetalle/Detalle.aspx?PostBack=1&idCase=\" + self.params.idCase;\r\n        if (typeof (self.params.idWorkitem) != 'undefined') {\r\n            url = url + \"&idWorkitem=\" + self.params.idWorkitem;\r\n        }\r\n        if (typeof (self.params.idTask) != 'undefined') {\r\n            url = url + \"&idTask=\" + self.params.idTask;\r\n        }\r\n        if (false) {\r\n            url = url + \"&isSummary=1\";\r\n\r\n        }\r\n\r\n        alert(url);\r\n        window.open(url, \"oldStyleBizAgi\", \"width=1024,height=768, Menubar=NO, Location=NO, Status=NO\");\r\n    },\r\n    /*\r\n    *  Navigation options\r\n    */\r\n    getListKey: function () {\r\n        var self = this;\r\n        bizagi.lstIdCases = bizagi.lstIdCases || {};\r\n        if (bizagi.lstIdCases.length > 1) {\r\n            for (var i = 0; i < bizagi.lstIdCases.length; i++) {\r\n                if (self.params.idCase == bizagi.lstIdCases[i]) {\r\n                    return i;\r\n                }\r\n            }\r\n        }\r\n        return -1;\r\n    },\r\n    getNextCase: function () {\r\n        var self = this;\r\n        var nextIdCase = 0;\r\n        var key = self.getListKey();\r\n\r\n        // Check if last element\r\n        if (bizagi.lstIdCases.length == (key + 1) || bizagi.lstIdCases.length == 1) {\r\n            nextIdCase = -1;\r\n        } else {\r\n            nextIdCase = bizagi.lstIdCases[key + 1];\r\n        }\r\n\r\n        return nextIdCase;\r\n    },\r\n    getBackCase: function () {\r\n        var self = this;\r\n        var prevIdCase = 0;\r\n        var key = self.getListKey();\r\n\r\n        // Check if first element\r\n        if (key == 0) {\r\n            prevIdCase = -1;\r\n        } else {\r\n            prevIdCase = bizagi.lstIdCases[key - 1] || -1;\r\n        }\r\n\r\n        return prevIdCase;\r\n    }\r\n});\r\n\r\n","/*\r\n *   Name: Start Form Widget Controller\r\n *   Author: Fabian Moreno (based on Diego Parra version)\r\n *   Comments:\r\n *   -   This script will provide start form widget\r\n */\r\n\r\n// Auto extend\r\nbizagi.workportal.widgets.startForm.extend(\"bizagi.workportal.widgets.startForm\", {}, {\r\n    /*\r\n    *   To be overriden in each device to apply layouts\r\n    */\r\n\r\n    postRender: function () {\r\n        var self = this;\r\n        var content = self.getContent();\r\n\r\n        self.params.referrerParams = self.params.referrerParams || {};\r\n\r\n        $(\"#ui-bizagi-wp-app-render-form-content\", content).css(\"padding-left\", \"0px\");\r\n        $('.renderNavigation .back,.renderNavigation .next', content).hide();\r\n    },\r\n});\r\n\r\n","/*\r\n *   Name: BizAgi Workportal Desktop Routing Widget Controller\r\n *   Author: Diego Parra (based on Edward Morales version)\r\n *   Comments:\r\n *   -   This script will provide desktop overrides to implement the routing widget\r\n */\r\n\r\n// Auto extend\r\nbizagi.workportal.widgets.renderform.extend(\"bizagi.workportal.widgets.renderform\", {}, {\r\n\r\n    /*\r\n     *   Constructor\r\n     */\r\n    init: function(workportalFacade, dataService, params) {\r\n        var self = this;\r\n\r\n        // Call base\r\n        self._super(workportalFacade, dataService, params);\r\n\r\n        //Load templates\r\n        self.loadTemplates({\r\n            \"renderform\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.renderform\").concat(\"#ui-bizagi-workportal-widget-renderform\"),\r\n            useNewEngine: false\r\n        });\r\n    },\r\n    /*\r\n     *   To be overriden in each device to apply layouts\r\n     */\r\n    postRender: function(){ \r\n        var self = this;\r\n        var content = self.getContent();\r\n        \r\n        self.params.referrerParams = self.params.referrerParams || {};\r\n    \t\r\n        // Set instance variables\r\n        self.summaryDisplayed = true;-\r\n    \t\r\n        // Set scrollbars\r\n        $(\"#ui-bizagi-wp-app-render-desc-panel\", content).bizagiScrollbar();\r\n        $(\".scrollRender\", content).bizagiScrollbar({\r\n            autohide:false\r\n        });\r\n    \r\n        // Attach panel slide event\r\n        self.configureSlider();\r\n    \r\n        // Configure header buttons\r\n        self.configureHeader();\r\n        \r\n        // Resize layout\r\n        self.resizeLayout();\r\n    \t\r\n            \r\n        //self.renderSummaryTab.scrollabletab();\r\n        // jQuery-ui tabs\r\n        $( \"#ui-bizagi-details-tabs\",content).tabs().scrollabletab({\r\n            tooltipNext: self.getResource(\"workportal-scrollabletab-nex\"),\r\n            tooltipPrevious:self.getResource(\"workportal-scrollabletab-prev\")\r\n        });\r\n                                \r\n            \r\n        // Add click to view workflow\r\n        $(\".ui-bizagi-wp-app-inbox-cases-ico-view\",content).click(function(){\r\n            var baseUrl = \"App/Cockpit/graphicquery.aspx?analysisType=2&CaseId=\";\r\n            window.open(baseUrl+self.params.idCase);\r\n        });\r\n        \r\n        // Bind navigation bar\r\n        // Set idcase data\r\n        $(\".back\",content).data(\"idCase\",self.getBackCase());\r\n        $(\".next\",content).data(\"idCase\",self.getNextCase());\r\n        \r\n        // Bind for click event on back and bext botton\r\n        $(\".back, .next\",content).click(function(){\r\n            var idCase = $(this).data(\"idCase\");\r\n            if( idCase > 0){\r\n                self.publish(\"executeAction\", {\r\n                    action: bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING,\r\n                    idCase: idCase\r\n                });\r\n            }\r\n        });          \r\n        \r\n        // Bind for click event on refresh botton\r\n        $(\".refresh\",content).click(function(){\r\n            self.publish(\"changeWidget\", {\r\n                widgetName : bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_RENDER,\r\n                idCase: self.params.idCase,\r\n                idWorkitem: self.params.idWorkitem,\r\n                idTask: self.params.idTask,\r\n                referrer: bizagi.referrerParams.referrer\r\n            }); \r\n        });\r\n        \r\n        // Bind for click event on return botton\r\n        $(\".ui-bizagi-wp-app-inbox-bt-back, #innerContentInbox h2\",content).click(function(){\r\n\t\t\tvar widget = bizagi.referrerParams.referrer || bizagi.cookie('bizagiDefaultWidget');\r\n            // switch referer widget\r\n            switch(widget){\r\n                case \"inbox\":\r\n                    self.publish(\"changeWidget\", { \r\n                        widgetName : widget,\r\n                        restoreStatus: true\r\n                    });\r\n                    break;\r\n                case \"inboxGrid\":\r\n                    self.publish(\"changeWidget\", { \r\n                        widgetName : widget,\r\n                        restoreStatus: true\r\n                    });\r\n                    break;\r\n                case \"search\":\r\n                    self.publish(\"executeAction\", {\r\n                        action: bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_SEARCH,\r\n                        radNumber:bizagi.referrerParams.radNumber || \"\" ,\r\n                        page:bizagi.referrerParams.page || 1 ,\r\n                        onlyUserWorkItems:false\r\n                    });\r\n                    break;\r\n                case \"queryform\":\r\n                    self.publish(\"showDialogWidget\", {\r\n                        widgetName : bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_QUERYFORM,\r\n                        queryFormAction: \"loadPrevious\"\r\n                    });                    \r\n                    break;\r\n                case \"folders\":\r\n                    var url = bizagi.referrerParams.urlParameters+\"&page=\"+bizagi.referrerParams.page;\r\n                    $.when(self.dataService.getCasesByFolder(url))\r\n                    .done(function(data){\r\n                        data.customized = true; \r\n                        data.urlParameters = bizagi.referrerParams.urlParameters\r\n                        \r\n                        // Define title of widget\r\n                        data.title = bizagi.referrerParams.name;\r\n\r\n                        // Set a flag here to tell the search widget that must show the ungroup case from folder (icon).\r\n                        data.casesGroupedByFolder = true;\r\n                        data.idFolder = bizagi.referrerParams.id;\r\n\r\n                        self.publish(\"changeWidget\", {\r\n                            widgetName : bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_SEARCH,\r\n                            data: data,\r\n                            referrerParams: {}\r\n                        });    \r\n                    });\r\n                    break;\r\n                default:\r\n                    self.publish(\"changeWidget\", { \r\n                        widgetName : bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INBOX,\r\n                        restoreStatus: true\r\n                    });\r\n                    break;\r\n            }\r\n        });\r\n        \r\n        // Bind for hover event on refresh and return botton\r\n        $(\".refresh,.return\",content).hover(function(){\r\n            $(this).addClass(\"active\");                    \r\n        },function(){            \r\n            $(this).removeClass(\"active\");                    \r\n        });\r\n        \r\n        // Bind for hover event on next and back botton\r\n        $(\".next,.back\",content).hover(\r\n        function(){\r\n            if($(this).data(\"idCase\") > 0){\r\n                $(this).addClass(\"active\");                    \r\n            }\r\n        },\r\n        function(){\r\n            $(this).removeClass(\"active\");\r\n        });\r\n        \r\n        if (self.dataService.lastQueryFullKey != null) {\r\n            $(\"#bt-case-action-showquery\", content).click(function() {\r\n                self.publish(\"showDialogWidget\", {\r\n                    widgetName : bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_QUERYFORM,\r\n                    queryFormAction: \"loadPrevious\"\r\n                });                    \r\n            \r\n            });\r\n        }\r\n        \r\n        // Bind botton summary actions\r\n        $(\"#bt-case-action-log\",content).click(function(){\r\n            var url =\"App/Log/log.aspx?idCase=\"+self.params.idCase+\"&logtype=s\";\r\n               \r\n            self.publish(\"showDialogWidget\", {\r\n                widgetName : bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_GENERICIFRAME,\r\n                widgetURL: url,\r\n                modalParameters: {\r\n                    title: bizagi.localization.getResource(\"render-actions-log\")\r\n                },\r\n                afterLoad: function (params) {\r\n                    // This script will execute inside the iframe context\r\n            \t\t\r\n                    // Hack this method because it will try to change iframe location\r\n                    // instead of this we will for to close the current dialog\r\n                    this.backURL = function() {\r\n                        // Close current dialog\r\n                        params.controller.publish(\"closeCurrentDialog\");\r\n                    };\r\n                }\r\n            });                    \r\n        });\r\n            \r\n        $(\"#bt-case-action-reassing\",content).click(function(){                    \r\n            var url =\"App/Admin/ListUsers.aspx?WorkItemAdmin=\"+self.params.idCase+\"|\"+self.params.idWorkitem+\"|&UserAdminAction=2\";\r\n               \r\n            self.publish(\"showDialogWidget\", {\r\n                widgetName : bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_GENERICIFRAME,\r\n                widgetURL: url,\r\n                modalParameters: {\r\n                    title: bizagi.localization.getResource(\"render-actions-reassign\")\r\n                },\r\n                onClose: function () {\r\n                    self.executeAction(bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING, {\r\n                        idCase: self.params.idCase,\t\r\n                        idWorkitem: self.params.idWorkitem,\t\r\n                        idTask: self.params.idTask\r\n                    });\r\n                }\r\n            });                    \r\n        });\r\n            \r\n//        $(\"#bt-case-action-print\",content).click(function(){\r\n//            var url =\"App/ListaDetalle/PrintVersion.aspx?PostBack=1&idCase=\"+self.params.idCase+\"&idWorkitem=\"+self.params.idWorkitem+\"&idTask=\"+self.params.idTask;\r\n//\r\n//\r\n//\r\n//            self.publish(\"showDialogWidget\", {\r\n//                widgetName : bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_GENERICIFRAME,\r\n//                widgetURL: url,\r\n//                modalParameters: {\r\n//                    title: bizagi.localization.getResource(\"render-actions-print\")\r\n//                },\r\n//                buttons: [\r\n//                    {\r\n//                        text: bizagi.localization.getResource(\"workportal-widget-dialog-box-print\"),\r\n//                        click: function() {\r\n//                            $(window.frames[\"iframe\"]).focus();\r\n//                            window.frames[\"iframe\"].print();\r\n//                        }\r\n//                    }\r\n//                ]\r\n//            });\r\n//        });\r\n        $(\"#bt-case-action-print\",content).click(function(){\r\n            var url =\"App/Admin/ListUsers.aspx?WorkItemAdmin=\"+self.params.idCase+\"|\"+self.params.idWorkitem+\"|&UserAdminAction=2\";\r\n\r\n            self.publish(\"showDialogWidget\", {\r\n                widgetName : bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_GENERICIFRAME,\r\n                widgetURL: url,\r\n                modalParameters: {\r\n                    title: bizagi.localization.getResource(\"render-actions-reassign\")\r\n                },\r\n                onClose: function () {\r\n                    self.executeAction(bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING, {\r\n                        idCase: self.params.idCase,\r\n                        idWorkitem: self.params.idWorkitem,\r\n                        idTask: self.params.idTask\r\n                    });\r\n                }\r\n            });\r\n        });\r\n        \r\n        \r\n        \r\n        \r\n        \r\n        $(\"#bt-case-action-help\",content).click(function(){\r\n            var url =$(this).find(\"#helpUrl\").val();\r\n               \r\n            self.publish(\"showDialogWidget\", {\r\n                widgetName : bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_GENERICIFRAME,\r\n                widgetURL: url,\r\n                modalParameters: {\r\n                    title: bizagi.localization.getResource(\"render-actions-help\")\r\n                }\r\n            });                    \r\n        });\r\n    },\r\n\r\n    /*\r\n     *   configures the slide event\r\n     */\r\n    configureSlider: function(){\r\n        var self = this;\r\n        var content = self.getContent();\r\n        if (!content) return;\r\n        \r\n        var summaryContainer = self.getComponentContainer(\"summary\");\r\n        var sliderPanel = $(\"#panelArrowContainer\", content);\r\n    \t\r\n        sliderPanel.click(function(){\r\n            if(summaryContainer.is(\":visible\")){\r\n                // Hide left panel\r\n                self.hideSummary();\r\n            \r\n            } else {\r\n                // Show left panel\r\n                self.showSummary();\r\n            }\r\n        });\r\n    },\r\n\t\r\n    /*\r\n     *   Hides the summary component\r\n     */\r\n    hideSummary: function(animate) {\r\n        var self = this;\r\n        var content = self.getContent();\r\n        if (!content) return;\r\n    \t\r\n        var summaryContainer = self.getComponentContainer(\"summary\");\r\n        var renderPanel = $(\"#ui-bizagi-wp-app-render-form\", content);\r\n        var sliderPanel = $(\"#panelArrowContainer\", content);\r\n        var panelArrow = $(\"#panelArrow\", content);\r\n        \r\n        if (!self.summaryDisplayed) return;\r\n\t\t\r\n        // Hide description panel\r\n        summaryContainer.parent().hide();\r\n        sliderPanel.css(\"left\", \"0px\");\r\n        renderPanel.addClass(\"ui-bizagi-state-extended\");\r\n        $(\"#ui-bizagi-wp-app-render-form-content\", content).css(\"padding-left\", \"0px\");\r\n        \r\n        // Change arrows\r\n        panelArrow.removeClass(\"panelArrowLeft\");\r\n        panelArrow.addClass(\"panelArrowRight\");\r\n\t\t\r\n        // Turn off flag\r\n        self.summaryDisplayed = false;\r\n        \r\n        // Trigger render resize\r\n        if (self.renderingFacade) self.renderingFacade.resize({\r\n            forceResize:  true\r\n        });\r\n    },\r\n\t\r\n    /*\r\n     *   Show the summary component\r\n     */\r\n    showSummary: function(animate) {\r\n        var self = this;\r\n        var content = self.getContent();\r\n        if (!content) return;\r\n    \t\r\n        var summaryContainer = self.getComponentContainer(\"summary\");\r\n        var renderPanel = $(\"#ui-bizagi-wp-app-render-form\", content);\r\n        var sliderPanel = $(\"#panelArrowContainer\", content);\r\n        var panelArrow = $(\"#panelArrow\", content);\r\n        animate = typeof(animate) !== \"undefined\" ? animate: false;\r\n\t\t\r\n        if (self.summaryDisplayed) return;\r\n\t\t\r\n        if (animate) {\r\n            // Show description panel\r\n            summaryContainer.parent().show('drop', { }, 500);\r\n\r\n            // Resize render layout to set padding 400px\r\n            $(\"#ui-bizagi-wp-app-render-form-content\", content).css(\"padding-left\", \"380px\");\r\n\r\n            // Run animation\r\n            $.when(sliderPanel.animate({\r\n                left: \"380px\"\r\n            }, 300))\r\n            .done(function() {\r\n                renderPanel.removeClass(\"ui-bizagi-state-extended\");\r\n            });\r\n\t\t\r\n        } else {\r\n            // Show description panel\r\n            summaryContainer.parent().show();\r\n            $(\"#ui-bizagi-wp-app-render-form-content\", content).css(\"padding-left\", \"380px\");\r\n            sliderPanel.css(\"left\", \"380px\");\r\n            renderPanel.removeClass(\"ui-bizagi-state-extended\");\r\n        }\r\n\r\n        // Change arrows\r\n        panelArrow.removeClass(\"panelArrowRight\");\r\n        panelArrow.addClass(\"panelArrowLeft\");\r\n\t\t\r\n        // Turn on flag\r\n        self.summaryDisplayed = true;\r\n    \t\r\n        // Trigger render resize\r\n        if (self.renderingFacade) self.renderingFacade.resize({\r\n            forceResize:  true\r\n        });\r\n    },\r\n\r\n    /*\r\n     *   Configure header for the widget\r\n     */\r\n    configureHeader: function(){\r\n        var self = this;\r\n        var content = self.getContent();\r\n    \r\n        // Configure back button\r\n        //        $(\"#ui-bizagi-wp-app-inbox-bt-back\", content).click(function() {\r\n        //            self.publish(\"changeWidget\", {\r\n        //                widgetName: bizagi.workportal.currentInboxView\r\n        //            });\r\n        //        });\r\n    },\r\n    \t\r\n    \t  \r\n    /*\r\n     *   When the window resizes, runs this method to adjust stuff in each controller or widget\r\n     *   Override when needed  \r\n     */\r\n    performResizeLayout: function() {\r\n        var self = this;\r\n        var windowWidth = $(window).width();\r\n    \r\n        // Call base\r\n        this._super();\r\n    \t\r\n        // If window width is less or equals 1024 hide the summary\r\n        if (windowWidth <= 1024) {\r\n            if (self.summaryDisplayed) {\r\n                self.hideSummary(false);\r\n            } else {\r\n                // Trigger render resize\r\n                if (self.renderingFacade) self.renderingFacade.resize({\r\n                    forceResize:  true\r\n                });\r\n            }\r\n        \r\n        } else {\r\n            if (!self.summaryDisplayed) {\r\n                self.showSummary(false);\r\n            }\r\n            else {\r\n                // Trigger render resize\r\n                if (self.renderingFacade) self.renderingFacade.resize({\r\n                    forceResize:  true\r\n                });\r\n            }\r\n        }\r\n    },\r\n\t\r\n    /*\r\n     *   Opens the workportal old form in a window\r\n     */\r\n    openOldWorkportalForm: function () {\r\n        var self = this;\r\n        var url = BIZAGI_PATH_TO_BASE + \"defaulthtml.aspx?FrameURL=App/ListaDetalle/Detalle.aspx?idCase=\" + self.params.idCase;\r\n        window.open(url, \"oldStyleBizAgi\", \"width=1024,height=768, Menubar=NO, Location=NO, Status=NO\");\r\n    },\r\n    \r\n    /*\r\n     *  Navigation options\r\n     */\r\n    getListKey: function(){\r\n        var self =  this;\r\n        bizagi.lstIdCases = bizagi.lstIdCases || {};\r\n        if(bizagi.lstIdCases.length > 1){\r\n            for(var i=0; i < bizagi.lstIdCases.length; i++){\r\n                if( self.params.idCase == bizagi.lstIdCases[i] ){\r\n                    return i;\r\n                }\r\n            }\r\n        }\r\n        return -1;\r\n    },\r\n    \r\n    getNextCase: function(){\r\n        var self = this;\r\n        var nextIdCase = 0;\r\n        var key = self.getListKey();\r\n        \r\n        // Check if last element \r\n        if(bizagi.lstIdCases.length == (key+1) || bizagi.lstIdCases.length == 1){\r\n            nextIdCase = -1;\r\n        }else{\r\n            nextIdCase = bizagi.lstIdCases[key+1];            \r\n        }        \r\n        \r\n        return nextIdCase;\r\n    },\r\n    \r\n    getBackCase: function(){\r\n        var self = this;\r\n        var prevIdCase = 0;\r\n        var key = self.getListKey();\r\n        \r\n        // Check if first element \r\n        if(key == 0){\r\n            prevIdCase = -1;\r\n        }else{\r\n            prevIdCase = bizagi.lstIdCases[key-1];            \r\n        }        \r\n        \r\n        return prevIdCase;\r\n    }\r\n    \r\n});\r\n\r\n","/*\r\n *   Name: BizAgi Workportal Desktop my search search lists Widget Controller\r\n *   Author: Andres Fernando Munoz\r\n *   Comments:\r\n *   -   This script will provide desktop overrides to implement the my search search lists widget\r\n */\r\n\r\n// Auto extend\r\nbizagi.workportal.widgets.mySearchList.extend(\"bizagi.workportal.widgets.mySearchList\", {}, {\r\n\r\n    init: function (workportalFacade, dataService, params) {\r\n        var self = this;\r\n\r\n        // Call base\r\n        self._super(workportalFacade, dataService, params);\r\n\r\n        //Load templates\r\n        self.loadTemplates({\r\n            \"mySearchListWrapper\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.mySearchList\").concat(\"#ui-bizagi-workportal-widget-mysearchlist-searchlists-wrapper\"),\r\n            \"mySearchList\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.mySearchList\").concat(\"#ui-bizagi-workportal-widget-mysearchlist-searchlists\"),\r\n            useNewEngine: false\r\n        });\r\n    },\r\n\r\n    /**\r\n     *   To be overriden in each device to apply layouts\r\n     */\r\n    postRender: function () {\r\n        var self = this;\r\n\r\n        self.loadtemplates();\r\n        self.renderSearchLists();\r\n    },\r\n\r\n    loadtemplates: function () {\r\n        var self = this;\r\n\r\n        self.mySearchListTmpl = self.getTemplate(\"mySearchList\");\r\n    },\r\n\r\n    renderSearchLists: function(){\r\n        var self = this;\r\n        var content = self.getContent();\r\n\r\n        $.when(self.dataService.getSearchLists()).done(function (data) {\r\n            var searchLists = data;\r\n            var $searchLists = $.tmpl(self.mySearchListTmpl, {searchLists: searchLists});\r\n\r\n            content.append($searchLists);\r\n            self.configureHandlers();\r\n        });\r\n    },\r\n\r\n    closeModal: function () {\r\n        var self = this;\r\n        var modal = $(self.content).closest('.modal');\r\n\r\n        modal.hide();\r\n    },\r\n\r\n    configureHandlers: function(){\r\n        var self = this;\r\n        var content = self.getContent();\r\n\r\n        $(\".ui-bizagi-wp-widget-my-search-list-item\", content).on('click', $.proxy(self.onListItemClick, self));\r\n        $(\"#menuQuery\").keypress(function () { //Hides the widget when the user types something\r\n            self.closeModal();\r\n        });\r\n    },\r\n\r\n    onListItemClick: function (ev) {\r\n        var self = this;\r\n        self.closeModal();//Hides the widget when the user selects any item on the list\r\n        var $target = $(ev.currentTarget);\r\n        var guidform = $target.data(\"guidform\");\r\n        var id = $target.data(\"id\");\r\n        var displayname = $target.data(\"displayname\");\r\n        var guidEntity = $target.data(\"guidentity\");\r\n\r\n        var publishParams = {\r\n            widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_LOADFORM,\r\n            summaryDecorator:false,\r\n            guidForm: guidform,\r\n            displayname: displayname,\r\n            guidEntity: guidEntity,\r\n            closeVisible: false,\r\n            buttons: [\r\n                {\r\n                    text: bizagi.localization.getResource('workportal-menu-search'),\r\n                    click: function(e) {\r\n                        var that = this;\r\n                        var widget = $(this).dialog(\"option\",\"widget\");\r\n                        var form = widget.form || {};\r\n\r\n                        if (Object.keys(form).length !== 0) {\r\n\r\n                            if(form && form.validateForm()) {\r\n                                var renderValues = [];\r\n                                $.forceCollectData = true;\r\n                                form.collectRenderValuesQueryForm(renderValues);\r\n                                $.forceCollectData = false;\r\n\r\n                                var filterObject = [];\r\n                                var metadataFilters = [];\r\n\r\n                                $.each(renderValues, function (i, item) {\r\n                                    if (typeof item.value !== 'function') {\r\n                                        var controls = form.getRenders(item.xpath);\r\n                                        var control = self.getFilterControl(controls, item);\r\n\r\n                                        self.dataService.defineFilterObject({ properties: control.properties, value: control.value }, filterObject, function (filter) {\r\n                                            metadataFilters.push($.extend(filter, { id: control.properties.id, rangeQuery: control.properties.rangeQuery, displayValue: control.getDisplayValue(), displayName: control.properties.displayName, editable: !!control.properties.editable }));\r\n                                        });\r\n                                    }\r\n                                });\r\n\r\n                                self.performQuery({ guidSearch: id, guidForm: guidform, guidEntity: guidEntity, displayname: displayname, metadataFilters: metadataFilters, filters: filterObject, page: 1, pageSize: 10, calculateFilters: true, histName: displayname, onlyLocalResults: true });\r\n                                self.cleanContext();\r\n                                $(that).dialog('close');\r\n                            }\r\n                           \r\n                        }\r\n                    }\r\n                },\r\n                {\r\n                    text: bizagi.localization.getResource(\"workportal-widget-dialog-box-close\"),\r\n                    click: function () {\r\n                        $(this).dialog('close');\r\n                    }\r\n                }\r\n            ],\r\n            modalParameters: {\r\n                title: displayname\r\n            }\r\n        }\r\n\r\n        self.publish(\"showDialogWidget\", publishParams);\r\n        self.publish(\"onWidgetIncludedInDOM\");\r\n    },\r\n\r\n    performQuery: function (params) {\r\n        var self = this;\r\n        var dataParams = {\r\n            \"type\": \"SEARCH-ENGINE-VIEW\",\r\n            \"args\": params\r\n        };\r\n\r\n        $.when(self.publish(\"changeWidget\", {\r\n            widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_HOMEPORTAL\r\n        })).done(function () {\r\n            var homeportalInstance = bizagi.injector.get('homeportal');\r\n            var widgetManager = bizagi.injector.get('widgetManager');\r\n            widgetManager._context = \"home\";\r\n\r\n            $.when(homeportalInstance.isReady()).done(function(){\r\n                homeportalInstance.pub(\"notify\", dataParams);\r\n            })\r\n        });\r\n    },\r\n\r\n    getFilterControl: function(controls, itemFilter) {\r\n        if (controls.length === 1) {\r\n            return controls[0];\r\n        } else {\r\n            var searchTypeFilter = itemFilter.searchType.toUpperCase();\r\n\r\n            for (i = 0; i < controls.length; i++) {\r\n                var properties = controls[i].properties\r\n                var searchType = properties.typeSearch || properties.rangeQuery || \"NONE\";\r\n                searchType = searchType.toUpperCase();\r\n\r\n                if (searchType === searchTypeFilter && !bizagi.util.isEmpty(controls[i].value)) {\r\n                    return controls[i];\r\n                }\r\n            }\r\n\r\n        }\r\n    },\r\n    /**\r\n     * Initialize the context each time a search is done\r\n     */\r\n    cleanContext: function(){\r\n        var context = bizagi.injector.get(\"accumulatedcontext\");\r\n        context.clean();\r\n    }\r\n\r\n});\r\n","/**\r\n *\r\n */\r\nbizagi.workportal.widgets.loadForm.extend(\"bizagi.workportal.widgets.loadForm\", {\r\n    postRender: function () {\r\n        var self = this;\r\n    }\r\n});","/*\r\n *   Name: BizAgi Workportal Desktop New Case Widget Controller\r\n *   Author: Edward Morales\r\n *   Comments:\r\n *   -   This script will provide sub menu widget\r\n */\r\n\r\n// Auto extend\r\nbizagi.workportal.widgets.subMenu.extend(\"bizagi.workportal.widgets.subMenu\", {}, {\r\n    /**\r\n     *   To be overriden in each device to apply layouts\r\n     */\r\n    postRender: function() {\r\n        var self = this;\r\n        self.notifier = bizagi.injector.get(\"notifier\");\r\n\r\n        // render sub menu content\r\n        self.renderSubMenuContent();\r\n\r\n        self.scrollVertical({\r\n            \"autohide\": false\r\n        });\r\n    },\r\n    scrollVertical: function() {\r\n        var self = this;\r\n        var content = self.getContent();\r\n\r\n        $(\"#categories\", content).bizagiScrollbar({\r\n            \"autohide\": false\r\n        });\r\n    },\r\n    /*\r\n     *   Show content for sub menu item\r\n     */\r\n\r\n\trenderSubMenuContent: function() {\r\n\t\tvar self = this;\r\n\t\tvar content = self.getContent();\r\n        var listTemplate = self.workportalFacade.getTemplate(self.isAdminMenu()?\"menu.submenu.cathegories.list\":\"menu.submenu.list\");\r\n\t\tvar listContainer = $(\"#categories\", content);\r\n        var data = {};\r\n        var callBack = {\r\n            \"ThemeBuilder\": function(args) {\r\n                args = args || {};\r\n                if(args.url) {\r\n                    args.windowOpenBlank.location; //Prevent security message browsers open popups. Reason: window.open after callbacks.\r\n                }\r\n            },\r\n            \"asyncECMUpload\": function(args) {\r\n                args = args || {};\r\n                self.showWidgetPopup(args.url, args.title, args.id);\r\n            }\r\n        };\r\n\r\n        // TODO: SNAKE-1296 remove these lines\r\n        try {\r\n            if(bizagi.override.enableMultipleCasesReassigment) {\r\n                self.params.options.menuData.push({\r\n                    categoryKey: \"CaseAdmin\",\r\n                    categoryName: self.getResource(\"workportal-menu-submenu-adminReassignCases\"),\r\n                    categoryUrl: \"adminReassignCases\"\r\n                });\r\n\r\n                callBack.CaseAdmin = function(args) {\r\n                    args = args || {};\r\n                    self.showWidgetPopup(args.url, args.title, args.id);\r\n                };\r\n            }\r\n        } catch(e) {\r\n            // Nothing todo, just skip this option in menu\r\n        }\r\n\r\n        //DRAGON-152 Adidas - Async ECM\r\n        try {\r\n            if(bizagi.override.enableAsyncECMUploadJobs) {\r\n                self.params.options.menuData.push({\r\n                    categoryKey: \"asyncECMUpload\",\r\n                    categoryName: self.getResource(\"workportal-menu-submenu-asyncECMUpload\"),\r\n                    categoryUrl: \"asyncECMUpload\"\r\n                });\r\n            }\r\n        } catch(e) {\r\n            // Nothing todo, just skip this option in menu\r\n        }\r\n\r\n\r\n        try {\r\n\r\n            //delete frankenstein implementations\r\n            // revisar el contenido de self.params.options.menuData para tener en cuenta los sub menus   autorizados\r\n            var authorized = self.getSubItemsAuthorized();\r\n\r\n            self.deleteMenuOption(\"UserAdmin\");\r\n            self.deleteMenuOption(\"Stakeholder\");\r\n            self.deleteMenuOption(\"AuthenticationLogQuery\");\r\n            self.deleteMenuOption(\"EncryptionAdmin\");\r\n            self.deleteMenuOption(\"UserPendingRequests\");\r\n            self.deleteMenuOption(\"CaseAdmin\");\r\n            self.deleteMenuOption(\"AsynchronousWorkitemRetries\");\r\n            self.deleteMenuOption(\"UserDefaultAssignation\");\r\n            self.deleteMenuOption(\"Profiles\");\r\n            self.deleteMenuOption(\"AlarmAdmin\");\r\n            self.deleteMenuOption(\"Licenses\");\r\n            self.deleteMenuOption(\"UnlockFormsAdmin\");\r\n            self.deleteMenuOption(\"GRDimensionAdmin\");\r\n            self.deleteMenuOption(\"DocumentTemplates\");\r\n            self.deleteMenuOption(\"ProcessAdmin\");\r\n            self.deleteMenuOption(\"Multilanguage\");\r\n            self.deleteMenuOption(\"EntityAdmin\");\r\n            self.deleteMenuOption(\"Holidays\");\r\n            self.deleteMenuOption(\"ProjectName\");\r\n            self.deleteMenuOption(\"OAuthApplications\");\r\n            self.deleteMenuOption(\"AdhocProcessAdmin\");\r\n            self.deleteMenuOption(\"AdhocEntityAdmin\");\r\n            self.deleteMenuOption(\"AdhocUserGroupAdmin\");\r\n            self.deleteMenuOption(\"AdhocCreateProcess\");\r\n            self.deleteMenuOption(\"UserDelegates\");\r\n            self.deleteMenuOption(\"AdhocUserGroupReport\");\r\n            self.deleteMenuOption(\"UserPermissionReport\");\r\n\r\n            $.each(self.params.options.menuData, function (key, value) {\r\n\r\n                if(value.categoryKey == \"BusinessPolicies\") {\r\n                    self.params.options.menuData[key].categoryClassName = \"bz-icon-policy-outline\";\r\n                }\r\n\r\n                if (value.categoryKey == \"ThemeBuilder\") {\r\n                    self.params.options.menuData[key].categoryClassName = \"bz-icon-paint-outline\";\r\n                }\r\n            });\r\n            if ($.inArray(\"BusinessPolicies\", authorized) == -1 || !bizagi.features.enableOldBusinessPoliciesAdministration) {\r\n                self.deleteMenuOption(\"BusinessPolicies\");\r\n            }\r\n\r\n            if ($.inArray(\"BusinessPolicies\", authorized) !== -1 && bizagi.features.enableNewBusinessPoliciesAdministration) {\r\n                self.params.options.menuData.unshift({\r\n                    categoryKey: \"Vocabularies\",\r\n                    categoryClassName: \"icon-vocabulary\",\r\n                    categoryName: self.getResource(\"workportal-widget-admin-business-policies-vocabulary\"),\r\n                    categoryUrl: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_BUSINESS_POLICES,\r\n                    typeIcon: \"svg\"\r\n                });\r\n            }\r\n\r\n            if (bizagi.util.isEnableFeature(\"enableUserPermissionsReportDownload\") && $.inArray(\"Userpermissionsreport\", authorized) !== -1) {\r\n                self.params.options.menuData.unshift({\r\n                    categoryKey: \"UserPermissionReport\",\r\n                    categoryClassName: \"icon-user-report\",\r\n                    categoryName: self.getResource(\"workportal-menu-submenu-UserPermissionReport\"),\r\n                    categoryUrl: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_USER_PERMISSION_REPORT,\r\n                    typeIcon: \"svg\"\r\n                });\r\n            }\r\n\r\n            if ($.inArray(\"UserAdmin\", authorized) !== -1) {\r\n                self.params.options.menuData.unshift({\r\n                    categoryKey: \"UserAdmin\",\r\n                    categoryClassName: \"bz-icon-users-outline\",\r\n                    categoryName: self.getResource(\"workportal-menu-submenu-UserAdmin\"),\r\n                    categoryUrl: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_USERS_ADMINISTRATION\r\n                });\r\n            }\r\n\r\n            if($.inArray(\"Stakeholder\", authorized) != -1) {\r\n                self.params.options.menuData.push({\r\n                    categoryKey: \"StakeholderAdmin\",\r\n                    categoryClassName: \"bz-icon-stakeholders-outline\",\r\n                    categoryName: self.getResource(\"workportal-menu-submenu-StakeholderAdmin\"),\r\n                    categoryUrl: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_STAKEHOLDERS\r\n                });\r\n            }\r\n\r\n            if($.inArray(\"EntityAdmin\", authorized) != -1) {\r\n                self.params.options.menuData.unshift({\r\n                    categoryKey: \"EntityAdmin\",\r\n                    categoryClassName: \"bz-icon-database-outline\",\r\n                    categoryName: self.getResource(\"workportal-menu-submenu-EntityAdmin\"),\r\n                    categoryUrl: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_ENTITIES\r\n                });\r\n            }\r\n\r\n            //create the new menu option using the old categoryKey\r\n            if($.inArray(\"AuthenticationLogQuery\", authorized) != -1) {\r\n                self.params.options.menuData.push({\r\n                    categoryKey: \"AuthenticationLogQuery\",\r\n                    categoryClassName: \"bz-icon-authentication-outline\",\r\n                    categoryName: self.getResource(\"workportal-menu-submenu-AuthenticationLogQuery\"),\r\n                    categoryUrl: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_AUTHENTICATION_LOG\r\n                });\r\n            }\r\n\r\n            if($.inArray(\"EncryptionAdmin\", authorized) != -1) {\r\n                self.params.options.menuData.push({\r\n                    categoryKey: \"EncryptionAdmin\",\r\n                    categoryClassName: \"bz-icon-lock-outline\",\r\n                    categoryName: self.getResource(\"workportal-menu-submenu-EncryptionAdmin\"),\r\n                    categoryUrl: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_ENCRYPT_PASSWORDS\r\n                });\r\n            }\r\n\r\n            if($.inArray(\"UserPendingRequests\", authorized) != -1) {\r\n                self.params.options.menuData.push({\r\n                    categoryKey: \"UserPendingRequests\",\r\n                    categoryClassName: \"bz-icon-unlock-outline\",\r\n                    categoryName: self.getResource(\"workportal-menu-submenu-UserPendingRequests\"),\r\n                    categoryUrl: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_USERS_REQUESTS\r\n                });\r\n            }\r\n\r\n            if($.inArray(\"CaseAdmin\", authorized) != -1) {\r\n                self.params.options.menuData.push({\r\n                    categoryKey: \"CaseAdmin\",\r\n                    categoryClassName: \"bz-icon-case-outline\",\r\n                    categoryName: self.getResource(\"workportal-menu-submenu-CaseAdmin\"),\r\n                    categoryUrl: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_CASE_SEARCH\r\n                });\r\n            }\r\n\r\n            if($.inArray(\"UnlockFormsAdmin\", authorized) != -1) {\r\n                self.params.options.menuData.push({\r\n                    categoryKey: \"UnlockFormsAdmin\",\r\n                    categoryName: self.getResource(\"workportal-menu-submenu-UnlockFormsAdmin\"),\r\n                    categoryUrl: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_UNLOCK_FORMS\r\n                });\r\n            }\r\n\r\n            if($.inArray(\"AsynchronousWorkitemRetries\", authorized) != -1) {\r\n                self.params.options.menuData.push({\r\n                    categoryKey: \"AsynchronousWorkitemRetries\",\r\n                    categoryClassName: \"bz-icon-asynchronous-outline\",\r\n                    categoryName: self.getResource(\"workportal-menu-submenu-AsynchronousWorkitemRetries\"),\r\n                    categoryUrl: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_ASYNC_ACTIVITIES\r\n                });\r\n            }\r\n\r\n            if($.inArray(\"UserDefaultAssignation\", authorized) != -1) {\r\n                self.params.options.menuData.push({\r\n                    categoryKey: \"UserDefaultAssignation\",\r\n                    categoryClassName: \"bz-icon-user-manage-outline\",\r\n                    categoryName: self.getResource(\"workportal-menu-submenu-UserDefaultAssignation\"),\r\n                    categoryUrl: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_DEFAULTS_ASSIGNATION_USER\r\n\r\n                });\r\n            }\r\n\r\n            if($.inArray(\"Profiles\", authorized) != -1) {\r\n                self.params.options.menuData.push({\r\n                    categoryKey: \"Profiles\",\r\n                    categoryClassName: \"bz-icon-user-outline\",\r\n                    categoryName: self.getResource(\"workportal-menu-submenu-Profiles\"),\r\n                    categoryUrl: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_USER_PROFILES\r\n\r\n                });\r\n            }\r\n\r\n            if($.inArray(\"AlarmAdmin\", authorized) != -1) {\r\n                self.params.options.menuData.push({\r\n                    categoryKey: \"AlarmAdmin\",\r\n                    categoryClassName: \"bz-icon-alarm-outline\",\r\n                    categoryName: self.getResource(\"workportal-menu-submenu-AlarmAdmin\"),\r\n                    categoryUrl: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_ALARMS\r\n                });\r\n            }\r\n\r\n            if($.inArray(\"Licenses\", authorized) != -1) {\r\n                self.params.options.menuData.push({\r\n                    categoryKey: \"Licenses\",\r\n                    categoryClassName: \"bz-icon-license-outline\",\r\n                    categoryName: self.getResource(\"workportal-menu-submenu-Licenses\"),\r\n                    categoryUrl: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_USER_LICENSES\r\n                });\r\n            }\r\n\r\n            if($.inArray(\"GRDimensionAdmin\", authorized) != -1) {\r\n                self.params.options.menuData.push({\r\n                    categoryKey: \"GRDimensionAdmin\",\r\n                    categoryClassName: \"bz-icon-dimension-outline\",\r\n                    categoryName: self.getResource(\"workportal-menu-submenu-GRDimensionAdmin\"),\r\n                    categoryUrl: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_DIMENSIONS\r\n                });\r\n            }\r\n\r\n            if($.inArray(\"DocumentTemplates\", authorized) != -1) {\r\n                self.params.options.menuData.push({\r\n                    categoryKey: \"DocumentTemplates\",\r\n                    categoryClassName: \"bz-icon-admin-template-outline\",\r\n                    categoryName: self.getResource(\"workportal-menu-submenu-DocumentTemplates\"),\r\n                    categoryUrl: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_DOCUMENT_TEMPLATES\r\n                });\r\n            }\r\n\r\n            if($.inArray(\"ProcessAdmin\", authorized) != -1) {\r\n                self.params.options.menuData.push({\r\n                    categoryKey: \"ProcessAdmin\",\r\n                    categoryClassName: \"bz-icon-case-time-outline\",\r\n                    categoryName: self.getResource(\"workportal-menu-submenu-ProcessAdmin\"),\r\n                    categoryUrl: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_PROCESSES\r\n                });\r\n            }\r\n\r\n            if($.inArray(\"Holidays\", authorized) != -1) {\r\n                self.params.options.menuData.push({\r\n                    categoryKey: \"Holidays\",\r\n                    categoryName: self.getResource(\"workportal-menu-submenu-holidays\"),//\"Holidays Calendar\",\r\n                    categoryClassName: \"bz-icon-holidays-outline\",\r\n                    categoryUrl: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_HOLIDAYS\r\n                });\r\n            }\r\n\r\n            if($.inArray(\"ProjectName\", authorized) != -1) {\r\n                self.params.options.menuData.push({\r\n                    categoryKey: \"ProjectName\",\r\n                    categoryName: self.getResource(\"workportal-menu-submenu-ProjectName\"),\r\n                    categoryClassName: \"bz-icon-project-name-outline\",\r\n                    categoryUrl: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_PROJECTNAME\r\n                });\r\n            }\r\n\r\n            if($.inArray(\"OAuthApplications\", authorized) != -1) {\r\n                self.params.options.menuData.push({\r\n                    categoryKey: \"OAuthApplications\",\r\n                    categoryName: self.getResource(\"workportal-menu-submenu-OAuth2Applications\"),\r\n                    categoryClassName: \"bz-icon-admin-template-outline\",\r\n                    categoryUrl: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_OAUTH2APPLICATIONS\r\n                });\r\n            }\r\n\r\n            if($.inArray(\"Multilanguage\", authorized) != -1) {\r\n                self.params.options.menuData.push({\r\n                    categoryKey: \"LanguageAdmin\",\r\n                    categoryClassName: \"bz-icon-world-outline\",\r\n                    categoryName: self.getResource(\"workportal-menu-submenu-LanguageAdmin\"),\r\n                    categoryUrl: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_LANGUAGE\r\n                });\r\n            }\r\n\r\n            if ($.inArray(\"AdhocProcessAdmin\", authorized) != -1) {\r\n                self.params.options.menuData.push({\r\n                    categoryKey: \"AdhocProcessAdmin\",\r\n                    categoryClassName: \"bz-icon-bz-light-box\",\r\n                    categoryName: self.getResource(\"workportal-menu-submenu-AdhocProcessAdmin\"),\r\n                    categoryUrl: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_ADHOC_PROCESSES\r\n                });\r\n            }\r\n\r\n            if ($.inArray(\"AdhocEntityAdmin\", authorized) != -1) {\r\n                self.params.options.menuData.push({\r\n                    categoryKey: \"AdhocEntityAdmin\",\r\n                    categoryClassName: \"bz-icon-bz-edit-entity\",\r\n                    categoryName: self.getResource(\"workportal-menu-submenu-AdhocEntityAdmin\"),                    \r\n                    categoryUrl: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_ADHOC_ENTITIES\r\n                });\r\n            }\r\n            \r\n            if ($.inArray(\"AdhocCreateProcess\", authorized) != -1) {\r\n                self.params.options.menuData.push({\r\n                    categoryKey: \"AdhocCreateProcess\",\r\n                    categoryClassName: \"bz-icon bz-icon-reload\",\r\n                    categoryName: self.getResource(\"workportal-menu-submenu-AdhocCreateProcess\"),\r\n                    categoryUrl: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_ADHOC_CREATE_PROCESS\r\n                });\r\n            }\r\n\r\n            if ($.inArray(\"AdhocUserGroupAdmin\", authorized) != -1) {\r\n                self.params.options.menuData.push({\r\n                    categoryKey: \"AdhocUserGroupAdmin\",\r\n                    categoryClassName: \"bz-icon-bz-user-jobs\",\r\n                    categoryName: self.getResource(\"workportal-menu-submenu-AdhocUserGroupAdmin\"),\r\n                    categoryUrl: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_ADHOC_USER_GROUPS\r\n                });\r\n            }\r\n\r\n            if ($.inArray(\"UserDelegates\", authorized) != -1) {\r\n                self.params.options.menuData.push({\r\n                    categoryKey: \"UsersDelegation\",\r\n                    categoryClassName: \"bz-icon bz-icon-group\",\r\n                    categoryName: self.getResource(\"workportal-menu-submenu-UserDelegation\"),\r\n                    categoryUrl: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_USERS_DELEGATION\r\n                });\r\n            }\r\n\r\n            //add the callback for each new widget\r\n            callBack.UserAdmin =\r\n            callBack.StakeholderAdmin =\r\n            callBack.AuthenticationLogQuery =\r\n            callBack.EncryptionAdmin =\r\n            callBack.UserPendingRequests =\r\n            callBack.UnlockFormsAdmin =\r\n            callBack.AsynchronousWorkitemRetries =\r\n            callBack.UserDefaultAssignation =\r\n            callBack.Profiles =\r\n            callBack.AlarmAdmin =\r\n            callBack.Licenses =\r\n            callBack.GRDimensionAdmin =\r\n            callBack.DocumentTemplates =\r\n            callBack.ProcessAdmin =\r\n            callBack.LanguageAdmin =\r\n            callBack.EntityAdmin =\r\n            callBack.AdhocProcessAdmin =\r\n            callBack.AdhocEntityAdmin =\r\n            callBack.AdhocUserGroupAdmin =\r\n            callBack.AdhocCreateProcess =\r\n            function(args) {\r\n                args = args || {};\r\n\r\n                $.extend(args, {\r\n                    showCloseButton: false\r\n                });\r\n\r\n                if (args.id === \"Licenses\" ||  args.id === \"AdhocProcessAdmin\") {\r\n                    $.extend(args, {\r\n                        maximize: false\r\n                    });\r\n                }\r\n\r\n                self.showCustomWidgetPopup(args);\r\n            };\r\n            callBack.CaseAdmin = function(args){\r\n                args = args || {};\r\n                args = $.extend(true,args, {\r\n                        showCloseButton: false,\r\n                        title: self.getResource(\"workportal-menu-submenu-CaseAdmin\"),\r\n                        height: 780,\r\n                        showCloseButton: false,\r\n                        id: \"CaseAdmin\"\r\n                });\r\n\r\n                self.showCustomWidgetPopup(args);\r\n            };\r\n            callBack.UserPermissionReport = function(args){\r\n                args = args || {};\r\n                args = $.extend(true, args, {\r\n                        showCloseButton: false,\r\n                        title: self.getResource(\"workportal-menu-submenu-UserPermissionReport\"),\r\n                        height: 410,\r\n                        width: \"650px\",\r\n                        maximize: false,\r\n                        id: \"UserPermissionReport\"\r\n                });\r\n\r\n                self.showCustomWidgetPopup(args);\r\n            };\r\n            callBack.Holidays = function(args){\r\n                args = args || {};\r\n                args = $.extend(true,args, {\r\n                        showCloseButton: false,\r\n                        title: self.getResource(\"workportal-menu-submenu-holidays\"),\r\n                        width: \"1080px\",\r\n                        height: 910,\r\n                        showCloseButton: false,\r\n                        id: \"Holidays\"\r\n                });\r\n\r\n                self.showCustomWidgetPopup(args);\r\n            };\r\n\r\n            callBack.OAuthApplications = function (args) {\r\n                args = args || {};\r\n                args = $.extend(true, args, {\r\n                    showCloseButton: false,\r\n                    title: self.getResource(\"workportal-menu-submenu-OAuth2Applications\"),\r\n                    width: \"980px\",\r\n                    height: 700,\r\n                    showCloseButton: false,\r\n                    id: \"OAuthApplications\"\r\n                });\r\n\r\n                self.showCustomWidgetPopup(args);\r\n            };\r\n\r\n            callBack.ProjectName = function(args){\r\n                args = args || {};\r\n                args = $.extend(true,args, {\r\n                        showCloseButton: false,\r\n                        title: self.getResource(\"workportal-menu-submenu-ProjectName\"),\r\n                        width: \"600px\",\r\n                        height: 400,\r\n                        showCloseButton: false,\r\n                        id: \"ProjectName\"\r\n                });\r\n\r\n                self.showCustomWidgetPopup(args);\r\n            };\r\n\r\n\r\n            callBack.UsersDelegation = function (args) {\r\n                args = args || {};\r\n                args = $.extend(true, args, {\r\n                    showCloseButton: false,\r\n                    title: self.getResource(\"workportal-menu-submenu-UserDelegation\"),\r\n                    width: \"740px\",\r\n                    height: 910,\r\n                    showCloseButton: false,\r\n                    id: \"UsersDelegation\"\r\n                });\r\n\r\n                self.showCustomWidgetPopup(args);\r\n            };\r\n            \r\n            callBack.BusinessPolicies = function(args){\r\n                self.showContentPopup(args.url, args.title, args.id, true);\r\n                \r\n            }\r\n            callBack.Vocabularies = function(args){\r\n                self.loadBusinessPolicesWidget();\r\n            }\r\n\r\n        } catch(e) {\r\n            // Nothing todo, just skip this option in menu\r\n        }\r\n\r\n\t\t//Get List with categories\r\n\t\tdata[\"listmenu\"] = self.getCathegoriesMenuList();\r\n\r\n\t\tvar render = $.tmpl(listTemplate, data);\r\n\r\n\t\tlistContainer.append(render);\r\n\t\tself.showBreadCrumb(listContainer);\r\n\t\tself.eventHandlerGoBackBreadCrumb(listContainer.parent().parent());\r\n\r\n\t\t// Bind sub menu\r\n\t\tif(!self.params.options.customClickHandler) {\r\n\t\t\t$(\"li\", listContainer).click(function(event) {\r\n\t\t\t\t//---- Click on the items of the list of parents of category groups\r\n\t\t\t\tif($(this).hasClass(\"ui-bizagi-workportal-widget-menu-parent-item-li\")){\r\n\t\t\t\t\tevent.preventDefault();\r\n            \t\tevent.stopPropagation();\r\n\t\t\t\t\tself.eventHandlerCategoryGroupsParent($(this));\r\n\r\n\t\t\t\t}else{ //---- Click on the items of the list of childs of category groups\r\n\r\n\t\t\t\tvar url = $(this).find(\"#categoryUrl\").val();\r\n\t\t\t\tvar title = $(this).find(\".title\").text();\r\n\t\t\t\tvar id = $(this).data('id') || '';\r\n\t\t\t\tself.eventHandlerCategoryGroupsChildrenWithoutCustomClick(url, title, id, callBack);\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//-----\r\n\t\t\t});\r\n\r\n\t\t} else {\r\n\t\t\t\r\n\t\t\tself.checkIsAlive();\r\n\t\t\t$(\"li\", listContainer).click(function() {\r\n\t\t\t\t//---- Click on the items of the list of parents of category groups\r\n\t\t\t\tif($(this).hasClass(\"ui-bizagi-workportal-widget-menu-parent-item-li\")){\r\n\t\t\t\t\tself.eventHandlerCategoryGroupsParent($(this));\r\n\r\n\t\t\t\t}else{ //---- Click on the items of the list of childs of category groups\r\n\t\t\t\t\tvar id = $(this).data(\"id\");\r\n\t\t\t\t\tbizagi.loader.start(\"admin\").then(function() {\r\n\t\t\t\t\t\tbizagi.workportal.desktop.popup.closePopupInstance();\r\n\t\t\t\t\t\tself.params.options.customClickHandler(id);\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\t\r\n\t\t}\r\n\r\n\t},\r\n\t/**\r\n\t * show the child breadCrumb and show the display name of the parent\r\n\t * @param {Jquery Element} Jparent \r\n\t */\r\n\teventHandlerCategoryGroupsParent: function(Jparent){\r\n\t\tvar categoryName = Jparent.data(\"id\");\r\n\t\tvar categoryDisplayName = Jparent.find(\".title\").text();\r\n\t\tvar container = Jparent.parent().parent();\r\n\t\t$(\".ui-bizagi-workportal-widget-menu-child-item.child_of_\"+categoryName, container).show();\r\n\t\t$(\".modalMenuBt .breadCrumb .breadCrumb_child\").css(\"display\", \"inline-block\").text(\"> \"+categoryDisplayName);\r\n\t\t$(\".ui-bizagi-workportal-widget-menu-parent-item\").hide();\r\n\t},\r\n\r\n\t/**\r\n\t * return the List with categories or not\r\n\t */\r\n\tgetCathegoriesMenuList: function(){\r\n\t\tvar self=this;\r\n\t\tvar menuList=self.params.options.menuData;\r\n\t\t//menuListAdmin has cathegories\r\n\t\tif ($(self.params.options.sourceElement).attr(\"id\")==\"menuListAdmin\") {\r\n\t\t\tvar categoriesGroupsChildrenList = self.getCategoriesGroupsChildren(self.params.options.menuData);\r\n\t\t\tmenuList=self.getMenuList(categoriesGroupsChildrenList);\r\n\t\t}\r\n\t\treturn menuList;\r\n\t},\r\n\r\n\t/**\r\n\t * if the menu has breadCrumb shows it\r\n\t */\r\n\tshowBreadCrumb: function(){\r\n\t\tvar self=this;\r\n\t\tif (self.isAdminMenu())\r\n\t\t\t$(\"#categoryTree.categoryTree.breadCrumb\", self.content).show();\r\n\t},\r\n\r\n\t/**\r\n\t * return true if the menu to show is admin\r\n\t */\r\n\tisAdminMenu: function(){\r\n\t\tvar self=this;\r\n\t\treturn $(self.params.options.sourceElement).attr(\"id\")==\"menuListAdmin\";\r\n\t},\r\n\r\n\teventHandlerGoBackBreadCrumb: function(container){\r\n\t\t$(\".breadCrumb .breadCrumb_admin_parent\", container).click(function(){\r\n\t\t\t$(\".ui-bizagi-workportal-widget-menu-child-item\", container).hide();\r\n\t\t\t$(\".breadCrumb .breadCrumb_child\", container).hide();\r\n\t\t\t$(\".ui-bizagi-workportal-widget-menu-parent-item\", container).show();\r\n\t\t});\r\n\t},\r\n\teventHandlerCategoryGroupsChildrenWithoutCustomClick: function(url, title, id, callBack){\r\n        var self = this;\r\n\t\tself.checkIsAlive();\r\n\r\n\t\tif(bizagi.util.isIE11() || bizagi.util.isEdge()){\r\n\t\t\tlocalStorage.setItem('auxBizagiAuthentication', window.sessionStorage.bizagiAuthentication);\r\n\t\t}\r\n\t\t//prevent message open popup on browser\r\n\t\tvar windowOpenBlank;\r\n\t\tif(url.indexOf('ThemeBuilder') !== -1){\r\n            windowOpenBlank = window.open(url, '_blank');\r\n            return;\r\n\t\t}\r\n\r\n\t\tif(url.toLowerCase().indexOf('adhoc') !== -1){\r\n\t\t\tself.loadDashboardQuickProcess(url);\r\n\t\t\treturn;\r\n\t\t}\r\n        bizagi.util.startLoading();\r\n\t\tbizagi.loader.start(\"admin\").then(function() {\r\n            // Find call back\r\n\t\t\tif(callBack[id]) {\r\n                callBack[id]({\r\n                    windowOpenBlank: windowOpenBlank,\r\n\t\t\t\t\turl: url,\r\n\t\t\t\t\ttitle: title,\r\n                    id: id\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tself.showContentPopup(url, title, id, true);\r\n\t\t\t}\r\n\t\t\tbizagi.workportal.desktop.popup.closePopupInstance();\r\n\t\t});\r\n\t},\r\n\t\r\n\tgetCategoriesGroupsChildren: function(menuList){\r\n\t\tvar self = this;\r\n\t\tvar childrenList = []\r\n\t\tvar groupCategoryChildren1 = [];\r\n\t\tvar groupCategoryChildren2 = [];\r\n\t\tvar groupCategoryChildren3 = [];\r\n\t\tvar groupCategoryChildren4 = [];\r\n\r\n\t\tfor(var i=0; i < menuList.length; i++){\r\n\t\t\tif(menuList[i].categoryKey === \"AlarmAdmin\" || \r\n\t\t\tmenuList[i].categoryKey === \"AsynchronousWorkitemRetries\" ||\r\n\t\t\tmenuList[i].categoryKey === \"CaseAdmin\" ||\r\n\t\t\tmenuList[i].categoryKey === \"GRDimensionAdmin\" ||\r\n\t\t\tmenuList[i].categoryKey === \"EntityAdmin\" ||\r\n\t\t\tmenuList[i].categoryKey === \"BusinessPolicies\" ||\r\n\t\t\tmenuList[i].categoryKey === \"Vocabularies\" ||\r\n\t\t\tmenuList[i].categoryKey === \"ProcessAdmin\" ){\r\n\t\t\t\tgroupCategoryChildren1.push(menuList[i]);\r\n\t\t\t}\r\n\r\n\t\t\tif(menuList[i].categoryKey === \"AuthenticationLogQuery\" ||\r\n\t\t\tmenuList[i].categoryKey === \"Holidays\" ||\r\n\t\t\tmenuList[i].categoryKey === \"UserPendingRequests\" ||  \r\n\t\t\tmenuList[i].categoryKey === \"Licenses\" ||\r\n\t\t\tmenuList[i].categoryKey === \"UserDefaultAssignation\" ||\r\n\t\t\tmenuList[i].categoryKey === \"Profiles\" || \r\n\t\t\tmenuList[i].categoryKey === \"StakeholderAdmin\" || \r\n\t\t\tmenuList[i].categoryKey === \"UserAdmin\"){\r\n\t\t\t\tgroupCategoryChildren2.push(menuList[i]);\r\n\t\t\t}\r\n\r\n\t\t\tif(menuList[i].categoryKey === \"LanguageAdmin\" ||\r\n\t\t\tmenuList[i].categoryKey === \"ProjectName\" ||\r\n\t\t\tmenuList[i].categoryKey === \"ThemeBuilder\"){\r\n\t\t\t\tgroupCategoryChildren3.push(menuList[i]);\r\n\t\t\t}\r\n\r\n\t\t\tif(menuList[i].categoryKey === \"OAuthApplications\" ||\r\n\t\t\tmenuList[i].categoryKey === \"EncryptionAdmin\" ||\r\n\t\t\tmenuList[i].categoryKey === \"UserPermissionReport\"){\r\n\t\t\t\tgroupCategoryChildren4.push(menuList[i]);\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tchildrenList.push(self.sortChildList(groupCategoryChildren1));\r\n\t\tchildrenList.push(self.sortChildList(groupCategoryChildren2));\r\n\t\tchildrenList.push(self.sortChildList(groupCategoryChildren3));\r\n\t\tchildrenList.push(self.sortChildList(groupCategoryChildren4));\r\n\r\n\t\treturn childrenList;\r\n\t},\r\n\tsortChildList: function(list){\r\n\t\tvar sortList = list.sort(function(a, b){ \r\n\t\t\treturn (a.categoryName > b.categoryName) ? 1 : -1\r\n\t\t});\r\n\r\n\t\treturn sortList;\r\n\t},\r\n\tsortParentList: function(list){\r\n\t\tvar sortList = list.sort(function(a, b){ \r\n\t\t\treturn (a.displayName > b.displayName) ? 1 : -1\r\n\t\t});\r\n\t\t\r\n\t\treturn sortList;\r\n\t},\r\n\tgetMenuList: function(childrenList){\r\n\t\tvar self = this;\r\n\t\tvar menulist = [];\r\n\t\t\r\n\t\tif(childrenList[0].length > 0){\r\n\t\t\tvar groupCategory1 = self.getItemMenuList(bizagi.localization.getResource(\"workportal-menu-submenu-ProcessManagement\"), \r\n\t\t\t\"groupCategory1\", false, \"icon-process-management\", true, childrenList[0]);\r\n\t\t\tmenulist.push(groupCategory1);\r\n\t\t}\r\n\r\n\t\tif(childrenList[1].length > 0){\r\n\t\t\tvar groupCategory2 = self.getItemMenuList(bizagi.localization.getResource(\"workportal-menu-submenu-UserManagement\"), \r\n\t\t\t\"groupCategory2\", false, \"icon-user-configuration\", true, childrenList[1]);\r\n\t\t\tmenulist.push(groupCategory2);\r\n\t\t}\r\n\r\n\t\tif(childrenList[2].length > 0){\r\n\t\t\tvar groupCategory3 = self.getItemMenuList(bizagi.localization.getResource(\"workportal-menu-submenu-Customization\"), \r\n\t\t\t\"groupCategory3\", false, \"icon-customization\", true, childrenList[2]);\r\n\t\t\tmenulist.push(groupCategory3);\r\n\t\t}\r\n\r\n\t\tif(childrenList[3].length > 0){\r\n\t\t\tvar groupCategory4 = self.getItemMenuList(bizagi.localization.getResource(\"workportal-menu-submenu-Security\"), \r\n\t\t\t\"groupCategory4\", false, \"icon-security\", true, childrenList[3]);\r\n\t\t\tmenulist.push(groupCategory4);\r\n\t\t}\r\n\t\t\r\n\t\treturn self.sortParentList(menulist);\r\n\t},\r\n\r\n\tgetItemMenuList: function(displayName, name, typeIcon, className, categoryClassName, listmenu_children){\r\n\t\tvar groupCategory = [];\r\n\t\tgroupCategory.displayName = displayName;\r\n\t\tgroupCategory.name = name;\r\n\t\tgroupCategory.typeIcon = typeIcon;\r\n\t\tgroupCategory.className = className;\r\n\t\tgroupCategory.categoryClassName = categoryClassName;\r\n\t\tgroupCategory.listmenu_children = listmenu_children;\r\n\t\treturn groupCategory;\r\n\t},\r\n\r\n    loadDashboardQuickProcess: function(url){\r\n        var self = this;\r\n        bizagi.workportal.desktop.popup.closePopupInstance();\r\n            if (url === \"adhocUserGroups\") {            \r\n                if ($(document).find('iframe').length > 0 && $(document).find('iframe')[0].contentWindow.location.href.indexOf('quickprocess') !== -1) {\r\n                    bizagi.util.liveProcessesEvents.routeEvents.route = '/manage-groups';\r\n                    document.dispatchEvent(bizagi.util.liveProcessesEvents.routeEvents);\r\n                }else{\r\n                    self.publish(\"changeWidget\", {\r\n                        widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_PROFLY,\r\n                        data: {\r\n                            route: \"manage-groups\",\r\n                            params: { module: \"none\" }\r\n                        }\r\n                    });\r\n                }\r\n            } else if (url === \"adhocProcesses\"){\r\n                self.publish(\"changeWidget\", {\r\n                    widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_PROFLY\r\n                });\r\n            } else if (url === \"adhocCreateProcess\"){\r\n                if ($(document).find('iframe').length > 0 && ($(document).find('iframe')[0].contentWindow.location.href.indexOf('quickprocess') !== -1 || $(document).find('iframe')[0].contentWindow.location.href.indexOf('quick-process') !== -1)) {\r\n                    document.dispatchEvent(bizagi.util.liveProcessesEvents.newLiveProcess);\r\n                    bizagi.workportal.desktop.popup.closePopupInstance();\r\n                }else{\r\n                    var widgetParameters = {\r\n                        widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADHOC_CREATE_PROCESS,\r\n                        closeVisible: false,\r\n                        maximize: false,\r\n                        modalParameters: {\r\n                            height: 310,\r\n                            title: bizagi.localization.getResource(\"workportal-quickprocess-create-qp\"),\r\n                            width: 400\r\n                        }\r\n                    };\r\n                    self.publish(\"showDialogWidget\", widgetParameters);\r\n                }\r\n            }\r\n    },\r\n    \r\n    /**\r\n     * Load Business Polices Widget\r\n     */\r\n    loadBusinessPolicesWidget: function(){\r\n        var self = this;\r\n        self.publish(\"changeWidget\", {\r\n            widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_BUSINESS_POLICES\r\n        });\r\n    },\r\n    /*\r\n     *   Determines if a window must be show always in quirks mode for IE\r\n     */\r\n    needsQuicksMode: function(url) {\r\n\r\n        // If an old url is not working ok, put the url in the following filters\r\n        if(url.toLowerCase().indexOf(\"businesspoliciesselector.aspx\") >= 0)\r\n            return true;\r\n        if(url.toLowerCase().indexOf(\"bamprocess.aspx\") >= 0)\r\n            return true;\r\n        if(url.toLowerCase().indexOf(\"bamtask.aspx\") >= 0)\r\n            return true;\r\n        if(url.toLowerCase().indexOf(\"analyticsprocess.aspx\") >= 0)\r\n            return true;\r\n        if(url.toLowerCase().indexOf(\"analyticssensor.aspx\") >= 0)\r\n            return true;\r\n\r\n        return false;\r\n    },\r\n    /*\r\n     *   Get the page hacks in order to work properly in each case\r\n     */\r\n    getPageHacks: function(url, title) {\r\n        var self = this;\r\n        var callback;\r\n        var hackParams = {\r\n            title: title\r\n        };\r\n\r\n        //if (url.toLowerCase().indexOf(\"casesearch.aspx\") > 0 || url.toLowerCase().indexOf(\"AsynchDisabledWorkitems.aspx\") > 0) {\r\n        // Hack for  Admin / Processes\r\n        callback = function(params) {\r\n            // This script will execute inside the iframe context\r\n            this.openBACase = function(idCase, sHref) {\r\n                var workitem = null;\r\n                if(sHref.indexOf(\"idWorkitem=\") > -1) {\r\n                    workitem = sHref.substring(sHref.indexOf(\"idWorkitem=\") + 11);\r\n                    workitem = workitem.substring(0, workitem.indexOf(\"&\"));\r\n                }\r\n                // Executes the act on\r\n                params.controller.publish(\"executeAction\", {\r\n                    action: params.routingAction,\r\n                    idCase: idCase,\r\n                    idWorkItem: workitem\r\n                });\r\n\r\n                // close dialog\r\n                params.controller.publish(\"closeCurrentDialog\");\r\n            };\r\n\r\n            this.changeToWidget = function(widget) {\r\n                params.controller.publish(\"changeWidget\", {\r\n                    widgetName: widget || params.bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INBOX_GRID\r\n                });\r\n\r\n                // close dialog\r\n                params.controller.publish(\"closeCurrentDialog\");\r\n            };\r\n        };\r\n\r\n        // Set hack params\r\n        hackParams = $.extend(hackParams, {\r\n            routingAction: bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING,\r\n            bizagi: bizagi\r\n        });\r\n        // }\r\n\r\n        return {\r\n            callback: callback,\r\n            params: hackParams\r\n        };\r\n    },\r\n    /*\r\n     *  Show modal window with static url\r\n     **/\r\n    showContentPopup: function(url, title, id, maximized) {\r\n        var self = this;\r\n        id = id || \"\";\r\n        var defer = $.Deferred();\r\n        defer.done(function () {\r\n            bizagi.util.stopLoading();\r\n        });\r\n        // Define hacks for each page\r\n        var hack = self.getPageHacks(url, title);\r\n\r\n        if(bizagi.util.isIE() && bizagi.util.getInternetExplorerVersion() < 10 && self.needsQuicksMode(url)) {\r\n            // Shows a popup window\r\n            self.publish(\"showOldWindow\", {\r\n                url: url,\r\n                windowParameters: $.extend(hack.params, {\r\n                    controller: self,\r\n                    afterLoad: hack.callback\r\n                })\r\n            });\r\n            bizagi.util.stopLoading();\r\n        } else {\r\n            // Show a normal popup\r\n\r\n            // If the same popup is opened close it\r\n            if(self.currentPopup == \"genericiframe\") {\r\n                bizagi.workportal.desktop.popup.closePopupInstance();\r\n                return;\r\n            }\r\n\r\n            // Shows a popup widget\r\n            self.currentPopup = \"genericiframe\";\r\n            self.publish(\"showDialogWidget\", {\r\n                widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_GENERICIFRAME,\r\n                widgetURL: url,\r\n                injectCss: [\".ui-bizagi-old-render*\", \".\" + title, \"@font-face\"],\r\n                modalParameters: {\r\n                    refreshInbox: false,\r\n                    id: id,\r\n                    title: title,\r\n                    dialogOpened: defer\r\n                },\r\n                maximized: maximized,\r\n                afterLoad: hack.callback,\r\n                afterLoadParams: hack.params\r\n            });\r\n        }\r\n    },\r\n    showWidgetPopup: function(widget, title, id) {\r\n        var self = this;\r\n        var defer = $.Deferred();\r\n        defer.done(function () {\r\n            bizagi.util.stopLoading();\r\n        });\r\n        self.publish(\"showDialogWidget\", {\r\n            widgetName: widget,\r\n            modalParameters: {\r\n                title: title,\r\n                width: \"1080px\",\r\n                showCloseButton: false,\r\n                dialogOpened: defer\r\n            }\r\n        });\r\n    },\r\n    showCustomWidgetPopup: function(params) {\r\n        var self = this;\r\n        var defer = $.Deferred();\r\n        defer.done(function () {\r\n            bizagi.util.stopLoading();\r\n        });\r\n        var defaultWidth = ($(window).width() - (($(window).width() * 15)/100)) + \"px\";\r\n        var widgetParameters = {\r\n            widgetName: params.url,\r\n            data: {\"idCase\": params.id},\r\n            closeVisible: params.showCloseButton,\r\n            maximize: (typeof params.maximize !== \"undefined\") ? params.maximize : true,\r\n            modalParameters: {\r\n                title: params.title,\r\n                width: params.width || defaultWidth,\r\n                height: params.height,\r\n                id: params.id,\r\n                dialogOpened: defer\r\n            }\r\n        };\r\n\r\n        if(params.buttons) {\r\n            widgetParameters.buttons = params.buttons;\r\n        }\r\n\r\n        self.publish(\"showDialogWidget\", widgetParameters);\r\n    },\r\n    deleteMenuOption: function(categoryKey) {\r\n        var self = this;\r\n        var menuData = self.params.options.menuData;\r\n\r\n        for(var i = 0; i < menuData.length; i++) {\r\n            if(menuData[i].categoryKey == categoryKey) {\r\n                self.params.options.menuData.splice(i, 1);\r\n            }\r\n        }\r\n    },\r\n\r\n    /*\r\n     * Regresa un arreglo con los submenu autorizados\r\n     */\r\n    getSubItemsAuthorized: function() {\r\n        var self = this;\r\n        var result = [];\r\n        $.each(self.params.options.menuData, function(k, v) {\r\n            result.push(v.categoryKey);\r\n        });\r\n        return result;\r\n    },\r\n\r\n    checkIsAlive: function () {\r\n        var self = this;\r\n        var params = {\r\n            idUser: bizagi.currentUser.idUser,\r\n            fromDate: Date.now(),\r\n            toDate: Date.now()\r\n        };\r\n        self.dataService.getEffectiveDuration(params);\r\n    }\r\n\r\n});\r\n","/*\r\n *   Name: BizAgi Desktop Queries Dialog implementation\r\n *   Author: Juan Pablo Crossley\r\n *   Comments:\r\n *   -   ???\r\n */\r\n\r\n// Extends itself\r\nbizagi.workportal.widgets.genericiframe.extend(\"bizagi.workportal.widgets.genericiframe\", {}, {\r\n\r\n    /*\r\n    *   To be overriden in each device to apply layouts\r\n    */\r\n    postRender: function () {\r\n        var self = this;\r\n        var content = self.getContent();\r\n        var iframe = $(\"iframe\", content);\r\n        var injectCss = (self.params.injectCss) ? self.params.injectCss : [\".ui-bizagi-old-render*\", \"@font-face\"];\r\n\r\n        iframe.parent().addClass('loading-iframe');\r\n        iframe.hide();\r\n\r\n\r\n        iframe.load(function () {\r\n            iframe.parent().removeClass('loading-iframe');\r\n            iframe.fadeIn();\r\n        });\r\n\r\n        if (self.params.afterLoad && self.params.afterLoad != null) {\r\n            iframe.load(function () {\r\n                iframe.callInside(\r\n                    self.params.afterLoad,\r\n                    $.extend(self.params.afterLoadParams, {\r\n                        controller: self\r\n                    })\r\n                    );\r\n            });\r\n        }\r\n\r\n        if (injectCss != undefined) {\r\n            var css = \"\";\r\n            var cssList = \"\";\r\n\r\n            if (typeof injectCss == \"object\") {\r\n                $.each(injectCss, function (key, value) {\r\n                    css += bizagi.getStyle(value);\r\n                    cssList += value.replace(\".\", \"\") + \" \";\r\n                });\r\n            } else {\r\n                css += bizagi.getStyle(injectCss);\r\n                cssList += injectCss.replace(\".\", \"\");\r\n            }\r\n\r\n            // Inject css within iframe\r\n            iframe.load(function () {\r\n                // inject css\r\n                var iframeContent = $(this).contents();\r\n                \r\n                // Append css\r\n                $('head', iframeContent).append(\"<style type='text/css'>\" + css + \"</style>\");\r\n                $('body', iframeContent).addClass(cssList.replace(\"*\", \"\"));\r\n                                \r\n                // Hack position fixed for IE8 in quirks mode\r\n                /*if ($.browser.msie && parseInt($.browser.version, 10) <= 8) {\r\n                    var fixWizard = '<!--[if lte IE 8]> <style type=\"text/css\"> #floater1Div { position: absolute; bottom: auto; right: auto; top: expression( ( -10 - floater1Div.offsetHeight + ( document.documentElement.clientHeight ? document.documentElement.clientHeight : document.body.clientHeight ) + ( ignoreMe = document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop ) ) + \"px\" ); left: expression( ( -20 - floater1Div.offsetWidth + ( document.documentElement.clientWidth ? document.documentElement.clientWidth : document.body.clientWidth ) + ( ignoreMe2 = document.documentElement.scrollLeft ? document.documentElement.scrollLeft : document.body.scrollLeft ) ) + \"px\" ); } #divClose { bottom: -3px; left: 0; } </style> <![endif]--><!--[if lte IE 7]> <link href=\"../../css/estilos.css\" type=\"text/css\" rel=\"stylesheet\" /> <![endif]-->';\r\n                    $('head', iframeContent).append(fixWizard);\r\n                }*/\r\n\r\n                // Add classes for IE8 in quirks mode\r\n                $('body input', iframeContent).each(function () {\r\n                    var $self = $(this),\r\n                        inputType = $self.attr('type') ? 'ui-' + $self.attr('type') : '',\r\n                        inputName = $self.attr('name') ? 'ui-' + $self.attr('name').replace(/_\\d+$/, '') : '',\r\n                        inputClasses = inputType + ' ' + inputName;\r\n\r\n                    $self.addClass(inputClasses);\r\n                })\r\n\r\n                // Remove borders for buttons\r\n                $('body img[src$=\"Button.gif\"]', iframeContent).parent().remove();\r\n            }).attr('frameborder', '0');\r\n        }\r\n    }\r\n});\r\n\r\n","/*\r\n *   Name: BizAgi Workportal Search Controller\r\n *   Author: Diego Parra (based on Edward Morales version)\r\n *   Comments:\r\n *   -\tThis script will provide base library for search cases\r\n */\r\n\r\n// Auto extend\r\nbizagi.workportal.widgets.search.extend(\"bizagi.workportal.widgets.search\", {}, {\r\n    /*\r\n     *\t Constructor\r\n     */\r\n    init: function(workportalFacade, dataService, params) {\r\n        var self = this;\r\n\r\n        // Call base\r\n        self._super(workportalFacade, dataService, params);\r\n\r\n        // Define variables\r\n        self.radNumber = params.referrerParams.radNumber || params.radNumber || \"\";\r\n        self.isAdhocProcess = true;\r\n        self.adhocIds = [];\r\n        //Load templates\r\n        self.loadTemplates({\r\n            \"inbox-grid-cases\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.inbox.grid\").concat(\"#ui-bizagi-workportal-widget-inbox-grid-cases\"),\r\n            \"inbox-common-case-summary\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.inbox.common\").concat(\"#ui-bizagi-workportal-widget-inbox-common-case-description\"),\r\n            \"inbox-common-case-summary-subprocess\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.inbox.common\").concat(\"#ui-bizagi-workportal-widget-inbox-common-case-description-subprocess\"),\r\n            \"inbox-common-case-summary-assignees\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.inbox.common\").concat(\"#ui-bizagi-workportal-widget-inbox-common-case-description-assignees\"),\r\n            \"inbox-common-case-summary-events\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.inbox.common\").concat(\"#ui-bizagi-workportal-widget-inbox-common-case-description-events\"),\r\n            \"inbox-common-case-summary-oldrender\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.inbox.common\").concat(\"#ui-bizagi-workportal-widget-inbox-common-oldrender\"),\r\n            \"search-details\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.search\").concat(\"#ui-bizagi-workportal-widget-search-details\"),\r\n            useNewEngine: false\r\n        });\r\n\r\n    },\r\n    /*\r\n     *\t To be overriden in each device to apply layouts\r\n     */\r\n    postRender: function() {\r\n        var self = this;\r\n        var content = self.getContent();\r\n        var contentDetails = $(\"#searchDetails\", content);\r\n        var pdata = {};\r\n        var pageSelector = $(\"#casesPagination\", content);\r\n        var nElemToShow = 14;\r\n        var totalPages = self.params.data.cases.totalPages;\r\n        var actualPage = self.params.data.cases.page;\r\n        var AdhocProcessId = null;\r\n\r\n\r\n        $(self.params.data.cases.rows).each(function(key, value) {\r\n            if (!value.isAdhocProcess) value.isAdhocProcess = false;\r\n            if (value.isAdhocProcess) {\r\n                self.adhocIds.push({ 'caseId': value.id, 'processId': value.idAdhocProcess });\r\n            }\r\n            value.enableTimelineByProcessType = self.isAvailableTimelineByProcessType(value.isAdhocProcess);\r\n        });\r\n        // Set templates\r\n        self.searchTemplate = self.workportalFacade.getTemplate(\"search\");\r\n        //self.searchTemplate = self.getTemplate(\"inbox-grid-cases\");\r\n        self.searchDetailsTemplate = self.getTemplate(\"search-details\");\r\n        self.searchPagination = self.workportalFacade.getTemplate(\"inbox-common-pagination-grid\");\r\n        self.caseSummaryTemplate = self.getTemplate(\"inbox-common-case-summary\");\r\n        self.caseSummaryTemplateSubprocess = self.getTemplate(\"inbox-common-case-summary-subprocess\");\r\n        self.caseSummaryTemplateAssigness = self.getTemplate(\"inbox-common-case-summary-assignees\");\r\n        self.caseSummaryTemplateEvents = self.getTemplate(\"inbox-common-case-summary-events\");\r\n        self.paginationTemplate = self.workportalFacade.getTemplate(\"inbox-common-pagination-inbox\");\r\n\r\n        contentDetails.empty();\r\n\r\n        // Define title of module\r\n        self.params.data.title = self.params.data.title || bizagi.localization.getResource(\"workportal-widget-search\");\r\n\r\n        // Set title\r\n        $(\".title\", content).html(self.params.data.title);\r\n\r\n        /* // Previous Version\r\n        $.when(\r\n        $.tmpl(self.searchDetailsTemplate,self.params.data).appendTo(contentDetails)\r\n        ).done(function(){\r\n        */\r\n\r\n        // Convert null to empty \"\" fields\r\n        for (i = 0; i < self.params.data.cases.rows.length; i++) {\r\n            for (j = 0; j < self.params.data.cases.rows[i].fields.length; j++) {\r\n                self.params.data.cases.rows[i].fields[j] = (self.params.data.cases.rows[i].fields[j] == null) ? \"\" : self.params.data.cases.rows[i].fields[j];\r\n            }\r\n            // when user search a case\r\n            self.params.data.cases.rows[i].graphicQuery = bizagi.menuSecurity.GraphicQuery;\r\n            self.params.data.cases.rows[i].timeLine = bizagi.menuSecurity.TimeLine && bizagi.override.enableFeatureShowTimelineButton;\r\n        }\r\n        \r\n        self.params.data.cases.groupByCaseNumber = bizagiConfig.groupByCaseNumber;\r\n\r\n        $.when(\r\n            $.tmpl(self.searchDetailsTemplate, self.params.data.cases, {\r\n                setFormat: self.formatValue,\r\n                isArray: self.isArray,\r\n                formatCategories: self.formatCategories,\r\n                isDate: bizagi.util.isDate,\r\n                getRadNumberColumnIndex: function() {\r\n                    var data = this.data;\r\n                    var index = -1;\r\n                    for (var i = 0, l = data.columnTitle.length; i < l; i++) {\r\n                        if (data.columnTitle[i].fieldName == \"I_RadNumber\") {\r\n                            index = i;\r\n                        }\r\n                    }\r\n                    return index;\r\n                },\r\n                showColumn: function(columnIndex) {\r\n                    var index = this.getRadNumberColumnIndex();\r\n                    return (this.data.groupByCaseNumber && index == columnIndex) ? \" style=display:none; \" : \"\";\r\n                },\r\n                createGroupedHeader: function(rowIndex) {\r\n                    var data = this.data;\r\n                    var result = false;\r\n                    var radNumber = this.getRadNumber(data.rows[rowIndex]);\r\n                    if (data.groupByCaseNumber) {\r\n                        if (rowIndex == 0) {\r\n                            result = true;\r\n                        } else {\r\n                            var previousRadNumber = this.getRadNumber(data.rows[rowIndex - 1]);\r\n                            if (radNumber != previousRadNumber) {\r\n                                result = true;\r\n                            }\r\n                        }\r\n                    }\r\n                    return result;\r\n                },\r\n                getRadNumber: function(row) {\r\n                    var index = this.getRadNumberColumnIndex();\r\n                    return (index >= 0) ? row.fields[index] : \"\";\r\n                }\r\n            }).appendTo(contentDetails)).done(function() {\r\n\r\n            // Format invariant dates\r\n            bizagi.util.formatInvariantDate(content, self.getResource(\"dateFormat\") + \" \" + self.getResource(\"timeFormat\"));\r\n\r\n            // bind activities and process\r\n            $(\".ui-bizagi-wp-app-inbox-activity-name\", contentDetails).click(function() {\r\n                var idCase = $(this).find(\"#idCase\").val() || \"\";\r\n                var idWorkItem = $(this).find(\"#idWorkItem\").val() || \"\";\r\n                var idTask = $(this).find(\"#idTask\").val() || \"\";\r\n                var idWorkflow = $(this).closest('tr').data(\"idworkflow\");\r\n\r\n                if (idWorkItem === \"0\" || idTask === \"0\") {\r\n                    return;\r\n                }\r\n\r\n                // fix for SUITE-8792\r\n                if (idWorkItem != \"\" && idTask != \"\") {\r\n                    if (bizagi.cache === undefined) {\r\n                        bizagi.cache = {};\r\n                    } else {\r\n                        if (bizagi.cache[idCase] !== undefined) {\r\n                            if (bizagi.cache[idCase].idWorkitem == parseInt(idWorkItem) && bizagi.cache[idCase].idTask == parseInt(idTask) && bizagi.cache[idCase].isComplex !== undefined) {\r\n                                idWorkItem = \"\";\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n\r\n                // Executes routing action\r\n                self.publish(\"executeAction\", {\r\n                    action: bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING,\r\n                    idCase: idCase,\r\n                    idWorkItem: idWorkItem,\r\n                    idTask: idTask,\r\n                    idWorkflow: idWorkflow,\r\n                    eventAsTasks: true,\r\n                    onlyUserWorkItems: \"true\"\r\n                });\r\n            });\r\n\r\n\r\n            $(\".ui-bizagi-wp-app-inbox-grouped\", contentDetails).bind(\"click\", function() {\r\n                var radNumber = $(this).data(\"radnumber\");\r\n                var referrerParams = {\r\n                    taskState: self.params.taskState,\r\n                    idWorkItem: $(this).find(\"#idWorkItem\").val(),\r\n                    idCase: $(this).find(\"#idCase\").val(),\r\n                    idTask: $(this).find(\"#idTask\").val(),\r\n                    onlyFavorites: self.onlyFavorites,\r\n                    idWorkflow: self.idWorkflow,\r\n                    referrer: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INBOX_GRID\r\n                };\r\n\r\n                $.extend(bizagi.referrerParams, bizagi.referrerParams, referrerParams);\r\n\r\n                var idCase = $(this).find(\"#idCase\").val();\r\n\r\n                self.publish(\"executeAction\", {\r\n                    action: bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING,\r\n                    idCase: idCase\r\n                });\r\n            });\r\n\r\n\r\n            // Add click to timeline icon\r\n            $(\".js-show-timeline\", contentDetails).click(function (event){\r\n                var idCase = $(this).parent().find(\"#idCase\").val();\r\n                var caseNumber = $.trim($(this).closest(\"tr\").find(\".I_RadNumber\").text());\r\n                self.showTimeLine({ radNumber: caseNumber, idCase: idCase });\r\n            });\r\n\r\n            // Add click to view workflow\r\n            $(\".ui-bizagi-wp-app-inbox-cases-ico-view\", contentDetails).click(function() {\r\n                var idCase = $(this).parent().find(\"#idCase\").val();\r\n                var idWorkflow = $(this).closest(\"tr\").data(\"idworkflow\");\r\n                var isAdhoc = $(this).closest(\"tr\").data(\"isadhoc\");\r\n                if (isAdhoc) {\r\n                    for (var i = 0; i < self.adhocIds.length; i++) {\r\n                        if (parseInt(idCase) == self.adhocIds[i].caseId) {\r\n                            processId = self.adhocIds[i].processId;\r\n                            self.showGraphicQuery({ idCase: idCase, idWorkflow: idWorkflow, isAdhoc: true, idProcess: processId });\r\n                            break;\r\n                        }\r\n                    }\r\n                } else {\r\n                    self.showGraphicQuery({ idCase: idCase, idWorkflow: idWorkflow });\r\n                }\r\n                return false;\r\n            });\r\n            $(\".inbox-grid-tooltip-button\", content).tooltip();\r\n            // show case summary\r\n            $(\".workonitRow\", content).click(function() {\r\n                // Call routing action\r\n                var idCase = $(this).parents(\"td\").first().find(\"#idCase\").val();\r\n                var idWorkflow = $(this).closest(\"tr\").data(\"idworkflow\");\r\n                $(\".inbox-grid-tooltip-button\", content).tooltip(\"close\");\r\n                self.showCase(idCase, idWorkflow);\r\n            });\r\n            /* End lines by CAAA */\r\n\r\n            // Bind favorites start\r\n            $(contentDetails).delegate(\".ui-bizagi-wp-app-inbox-cases-start\", \"click\", function(e) {\r\n                e.stopPropagation();\r\n                var options = {};\r\n                var elmnt = this;\r\n                $(elmnt).removeClass(\"ui-bizagi-wp-app-inbox-cases-start\").addClass(\"ui-bizagi-wp-app-inbox-cases-start-wait\");\r\n\r\n                // check if its favorite\r\n                if ($(elmnt).parent().find(\"#isFavorite\").val() == \"false\") {\r\n                    options = {\r\n                        idObject: $(elmnt).parent().find(\"#idCase\").val(),\r\n                        favoriteType: \"CASES\"\r\n                    };\r\n                    $.when(\r\n                        self.dataService.addFavorite(options)\r\n                    ).done(function(data) {\r\n                        $(elmnt).parent().find(\"#guidFavorite\").val(data[\"idFavorites\"]);\r\n                        $(elmnt).removeClass(\"bz-icon-star-outline\").addClass(\"bz-icon-star\");\r\n                        $(elmnt).parent().find(\"#isFavorite\").val(\"true\");\r\n                        $(elmnt).removeClass(\"ui-bizagi-wp-app-inbox-cases-start-wait\").addClass(\"ui-bizagi-wp-app-inbox-cases-start\");\r\n                    })\r\n                } else {\r\n                    options = {\r\n                        idObject: $(elmnt).parent().find(\"#guidFavorite\").val(),\r\n                        favoriteType: \"CASES\"\r\n                    };\r\n                    $.when(\r\n                        self.dataService.delFavorite(options)\r\n                    ).done(function(data) {\r\n                        if (data[\"deleted\"] == \"true\" || data[\"deleted\"] == true) {\r\n                            $(elmnt).parent().find(\"#guidFavorite\").val(\"\");\r\n                            $(elmnt).removeClass(\"bz-icon-star\").addClass(\"bz-icon-star-outline\");\r\n                            $(elmnt).parent().find(\"#isFavorite\").val(\"false\");\r\n                            $(elmnt).removeClass(\"ui-bizagi-wp-app-inbox-cases-start-wait\").addClass(\"ui-bizagi-wp-app-inbox-cases-start\");\r\n                        }\r\n                    })\r\n                }\r\n            });\r\n\r\n            // Bind action to ungroup cases from folders\r\n            $('.folders-case-ungroup', contentDetails).click(function() {\r\n\r\n                // Used to remove the row later on\r\n                var itemSelector = this;\r\n\r\n                var options = {\r\n                    idFolder: $(this).data('folder-id'),\r\n                    idCase: $(this).data('case-id')\r\n                }\r\n\r\n                var confirmationMsg = bizagi.localization.getResource('workportal-search-desasociate-case');\r\n\r\n                $.when(bizagi.showConfirmationBox(confirmationMsg, null, false))\r\n                    .done(function() {\r\n                        // This is supposed to be the \"trutsy\" part of the confirmation however the concept is\r\n                        // not properly used, anyways is done like this because Diego likes deferreds\r\n                        // for a lot of things - Andres Valencia\r\n\r\n                        // Call service to ungroup case from folders\r\n                        $.when(\r\n                            self.dataService.dissasociateCaseFromFolder(options)\r\n                        ).done(function(data) {\r\n\r\n                            // Whilst this is not the most elegant solution to remove the desasociated case from the current folder\r\n                            // it can act as a temporary \"hack\" to avoid the search widget to refresh and lose context as it is happening so far\r\n\r\n                            $(itemSelector).closest('tr').remove();\r\n\r\n                            // Confirm that case has been removed from folder\r\n                        });\r\n                    })\r\n                    .fail(function() {\r\n                        // And this is supposed to be the \"falsy\" part of the confirmation dialog\r\n                        // also a misused true/false concept - Andres Valencia\r\n                    });\r\n            });\r\n\r\n            $(\".ui-bizagi-wp-app-inbox-bt-back\", content).click(function() {\r\n                var widget = bizagi.referrerParams.referrerBackButton || bizagi.cookie('bizagiDefaultWidget');\r\n                // switch referer widget \r\n                switch (widget) {\r\n                    case \"inbox\":\r\n                        self.publish(\"changeWidget\", {\r\n                            widgetName: widget,\r\n                            restoreStatus: true\r\n                        });\r\n                        break;\r\n                    case \"inboxGrid\":\r\n\r\n                        self.publish(\"changeWidget\", {\r\n                            widgetName: widget,\r\n                            restoreStatus: true\r\n                        });\r\n                        break;\r\n                    case \"search\":\r\n                        self.publish(\"executeAction\", {\r\n                            action: bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_SEARCH,\r\n                            radNumber: bizagi.referrerParams.radNumber || \"\",\r\n                            page: bizagi.referrerParams.page || 1,\r\n                            onlyUserWorkItems: false\r\n                        });\r\n                        break;\r\n                    case \"queryform\":\r\n                        self.publish(\"showDialogWidget\", {\r\n                            widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_QUERYFORM,\r\n                            queryFormAction: \"loadPrevious\"\r\n                        });\r\n                        break;\r\n                    case \"folders\":\r\n                        var url = bizagi.referrerParams.urlParameters + \"&page=\" + bizagi.referrerParams.page;\r\n                        $.when(self.dataService.getCasesByFolder(url))\r\n                            .done(function(data) {\r\n                                data.customized = true;\r\n                                data.urlParameters = bizagi.referrerParams.urlParameters\r\n\r\n                                // Define title of widget\r\n                                data.title = bizagi.referrerParams.name;\r\n\r\n                                // Set a flag here to tell the search widget that must show the ungroup case from folder (icon).\r\n                                data.casesGroupedByFolder = true;\r\n                                data.idFolder = bizagi.referrerParams.id;\r\n\r\n                                self.publish(\"changeWidget\", {\r\n                                    widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_SEARCH,\r\n                                    data: data,\r\n                                    referrerParams: {}\r\n                                });\r\n                            });\r\n                        break;\r\n                    case \"activityform\":\r\n                        self.publish(\"executeAction\", {\r\n                            action: bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING,\r\n                            idCase: bizagi.referrerParams.idCase || undefined,\r\n                            idWorkItem: bizagi.referrerParams.idWorkItem || undefined,\r\n                            idTask: bizagi.referrerParams.idTask || undefined,\r\n                            eventAsTasks: true,\r\n                            onlyUserWorkItems: \"true\"\r\n                        });\r\n                        break;\r\n                    default:\r\n                        self.publish(\"changeWidget\", {\r\n                            widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INBOX,\r\n                            restoreStatus: true\r\n                        });\r\n                        break;\r\n                }\r\n            });\r\n\r\n            // sort columns\r\n            $(\".sortColumnsData\", contentDetails).click(function() {\r\n                var params = {\r\n                    action: bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_SEARCH,\r\n                    radNumber: $(this).find(\"#radNumber\").val(),\r\n                    orderFieldName: $(this).find(\"#orderFieldName\").val(),\r\n                    orderType: (($(this).find(\"#orderType\").val() == 0) ? 1 : 0),\r\n                    order: $(this).find(\"#order\").val(),\r\n                    onlyUserWorkItems: false\r\n                };\r\n                self.publish(\"executeAction\", params);\r\n            });\r\n\r\n            // Define Pagination\r\n\r\n\r\n            // Show/hide pagination\r\n            pdata.pagination = (totalPages > 1) ? true : false;\r\n            pdata.page = self.params.referrerParams.page || actualPage;\r\n\r\n            // set total pages\r\n            pdata.pages = {};\r\n            var pageToshow = (nElemToShow > totalPages) ? totalPages : nElemToShow;\r\n            for (var i = 1; i <= pageToshow; i++) {\r\n                pdata.pages[i] = {\r\n                    \"pageNumber\": i\r\n                };\r\n            }\r\n\r\n            // Set style pagination\r\n            pdata[\"gridPagination\"] = \"gridCasePagination\";\r\n            pdata.previousPage = (actualPage > 1) ? actualPage - 1 : 1;\r\n            pdata.nextPage = (actualPage < totalPages) ? actualPage + 1 : totalPages;\r\n            pdata.totalPages = totalPages;\r\n\r\n            var paginationHtml = $.tmpl(self.searchPagination, pdata).html();\r\n\r\n            // Get template\r\n            $(pageSelector).append(paginationHtml);\r\n\r\n            // Crate pagination control\r\n            $(\"ul\").bizagiPagination({\r\n                maxElemShow: 50,\r\n                totalPages: pdata.totalPages,\r\n                actualPage: pdata.page,\r\n                listElement: $(\"ul\", pageSelector),\r\n                clickCallBack: function(options) {\r\n                    // Check if action from search or folders\r\n                    if (self.params.data.customized != undefined && self.params.data.customized) {\r\n                        var url = self.params.data.urlParameters + \"&page=\" + options.page;\r\n                        $.when(self.dataService.getCustomizedColumnsData({\r\n                                smartfoldersParameters: url\r\n                            }))\r\n                            .done(function(data) {\r\n                                // Define widget customized for pagination purposes\r\n                                data.customized = true;\r\n                                data.urlParameters = self.params.data.urlParameters;\r\n\r\n                                // Define title of widget\r\n                                data.title = self.params.data.title;\r\n\r\n                                bizagi.referrerParams.page = options.page;\r\n\r\n                                // Set a flag here to tell the search widget that must show the ungroup case from folder (icon).\r\n                                data.casesGroupedByFolder = true;\r\n                                data.idFolder = self.params.data.id;\r\n                                self.publish(\"changeWidget\", {\r\n                                    widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_SEARCH,\r\n                                    data: data,\r\n                                    referrerParams: {}\r\n                                });\r\n                            });\r\n                    } else {\r\n                        self.publish(\"executeAction\", {\r\n                            action: bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_SEARCH,\r\n                            radNumber: self.params.referrerParams.radNumber,\r\n                            page: options.page,\r\n                            onlyUserWorkItems: false\r\n                        });\r\n                    }\r\n                }\r\n            });\r\n\r\n            contentDetails.bizagiScrollbar({\r\n                autohide: false\r\n            });\r\n        });\r\n    },\r\n\r\n    /**\r\n      * Validate if the timeline icon should be shown or not, depending on features endpoint\r\n      */\r\n    isAvailableTimelineByProcessType: function (isAdhocProcess) {\r\n        return (!isAdhocProcess ||\r\n            (isAdhocProcess && bizagi.util.isEnableFeature(\"enableTimelineOnLiveProcesses\")));\r\n    },\r\n\r\n    /*\r\n     *   Shows a popup with the case information\r\n     */\r\n    showCase: function(idCase, idWorkflow) {\r\n        var self = this;\r\n        var content = self.getContent();\r\n        var caseSummaryContainer = $(\"#contentDesc\", content);\r\n        var cache = {};\r\n        var htmlContent = \"\";\r\n        // Update internal variable\r\n        self.idCase = idCase;\r\n        caseSummaryContainer.empty();\r\n        // Don't search data when there is no case\r\n        if (self.idCase == 0) {\r\n            return;\r\n        }\r\n        // Render Form Tab\r\n        $.when(\r\n            self.dataService.summaryCaseDetails({\r\n                idCase: self.idCase\r\n            })\r\n        ).done(function(data) {\r\n            data.hasComments = (data.hasComments == 'true') ? true : false;\r\n\r\n            // Get security\r\n            var security = new bizagi.workportal.command.security(self.dataService);\r\n            data.graphicQuery = security.checkSecurityPerm(\"GraphicQuery\");\r\n\r\n            data.enableFeatureShowTimelineButton = bizagi.override.enableFeatureShowTimelineButton;\r\n            data.enableTimelineByProcessType = self.isAvailableTimelineByProcessType(data.isAdhocProcess);\r\n\r\n            if (data.currentState && data.currentState.length > 0) {\r\n                data.currentState.forEach(function(currentState) {\r\n                    if (!currentState.idTask) {\r\n                        currentState.idTask = 0;\r\n                    }\r\n                    if (!currentState.state) {\r\n                        currentState.state = currentState.displayName || \" \";\r\n                    }\r\n                });\r\n            }\r\n\r\n            if (data.process === \"undefined\" || data.process === \"\" || typeof data.process === \"undefined\") {\r\n                data.process = false;\r\n            }\r\n\r\n            if (data.processPath === \"undefined\" || data.processPath === \"\" || typeof data.processPath === \"undefined\") {\r\n                data.processPath = false;\r\n            }\r\n\r\n            var renderedTemplate = $.tmpl(self.caseSummaryTemplate, $.extend(data, { security: bizagi.menuSecurity })).appendTo(caseSummaryContainer);\r\n            // Format invariant dates\r\n            bizagi.util.formatInvariantDate(content, self.getResource(\"dateFormat\") + \" \" + self.getResource(\"timeFormat\"));\r\n\r\n            // Delegate events for parent process\r\n            $(\"#details\", renderedTemplate).delegate(\".summaryLink\", \"click\", function() {\r\n                self.routingExecute($(this));\r\n                caseSummaryDialog.dialog('close');\r\n            });\r\n            var caseSummaryDialog = renderedTemplate;\r\n            // Fix for tab height\r\n            $('.scrollSummary', caseSummaryDialog).css({ 'height': '', 'overflow-y': 'visible' });\r\n\r\n            // jQuery-ui tabs\r\n            $(\"#ui-bizagi-details-tabs\", content).tabs({\r\n                active: -1,\r\n                create: function(event, ui) {\r\n                    $(this).tabs(\"option\", \"active\", 0);\r\n                },\r\n                \"activate\": function(event, ui) {\r\n\r\n                    var panel = (ui == undefined) ? \"formSummary\" : ui.newPanel.attr('id');\r\n                    switch (panel) {\r\n                        /* 0 = details\r\n                         * 1 = formSummary\r\n                         * 2 = subprocess\r\n                         * 3 = assigness\r\n                         * 4 = events\r\n                         * 5 = activities\r\n                         **/\r\n                        case \"comments\":\r\n                            if (cache[\"comments\"] == undefined) {\r\n                                // Extend render with comments\r\n                                $.extend(self, {}, bizagi.workportal.comments);\r\n\r\n                                // Define canvas\r\n                                data.canvas = $(\"#comments\");\r\n                                data.readOnly = true;\r\n\r\n                                $.when(self.renderComments(data))\r\n                                    .done(function(htmlContent) {\r\n                                        cache[\"comments\"] = htmlContent;\r\n                                    });\r\n                            }\r\n                            bizagi.util.setContext({\r\n                                commentsFocus: true\r\n                            });\r\n                            break;\r\n                        case \"formSummary\":\r\n                            if (cache[\"formSummary\"] == undefined) {\r\n                                var canvas = $(\"#formSummary\", caseSummaryContainer);\r\n\r\n                                // Define action when render form has not been migrated\r\n                                canvas.bind(\"oldrenderintegration\", function(e) {\r\n                                    if (e.isPropagationStopped()) {\r\n                                        return;\r\n                                    }\r\n                                    e.stopPropagation();\r\n\r\n                                    var template = self.getTemplate(\"inbox-common-case-summary-oldrender\");\r\n                                    var data = {};\r\n\r\n                                    bizagi.oldrenderevent = true; // has been loaded\r\n                                    var eventMethod = window.addEventListener ? \"addEventListener\" : \"attachEvent\";\r\n                                    var eventer = window[eventMethod];\r\n                                    var messageEvent = eventMethod == \"attachEvent\" ? \"onmessage\" : \"message\";\r\n\r\n                                    // Listen to message from child window\r\n                                    eventer(messageEvent, function(e) {\r\n                                        e.stopPropagation();\r\n                                        self.publish(\"executeAction\", {\r\n                                            action: bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING,\r\n                                            idCase: e.data\r\n                                        });\r\n                                    }, false);\r\n\r\n                                    // Define workitem and idtask\r\n                                    $.when(self.dataService.getWorkitems({\r\n                                        idCase: self.idCase,\r\n                                        onlyUserWorkItems: true,\r\n                                        eventAsTasks: true\r\n                                    })).done(function(getWorkitems) {\r\n                                        // verify workitem, in some cases these variables are not available\r\n                                        if (typeof getWorkitems.workItems == \"object\" && getWorkitems.workItems.length >= 1) {\r\n                                            // Case Open\r\n                                            var idWorkitem = getWorkitems.workItems[0]['idWorkItem'];\r\n                                            var idTask = getWorkitems.workItems[0]['idTask'];\r\n                                            var idCase = getWorkitems.workItems[0]['idCase'];\r\n                                            data.url = self.dataService.serviceLocator.getUrl(\"old-render\") + \"?PostBack=1&idCase=\" + idCase + \"&idWorkitem=\" + idWorkitem + \"&idTask=\" + idTask + \"&isSummary=1\";\r\n                                        } else {\r\n                                            // Case closed\r\n                                            data.url = self.dataService.serviceLocator.getUrl(\"old-render\") + \"?PostBack=1&idCase=\" + self.idCase + \"&isSummary=1\";\r\n                                        }\r\n\r\n                                        // Render content\r\n                                        canvas.empty();\r\n                                        $.tmpl(template, data).appendTo(canvas);\r\n                                        //Set styles\r\n                                        self.iframeOldRender($(\"iframe\", canvas));\r\n                                    });\r\n                                });\r\n\r\n                                var params = {\r\n                                    idCase: self.idCase\r\n                                };\r\n\r\n                                $.when(self.dataService.getCaseFormsRenderVersion(params))\r\n                                    .done(function(formsVersion) {\r\n                                        if (formsVersion.formsRenderVersion == 1) {\r\n                                            canvas.trigger(\"oldrenderintegration\");\r\n                                        } else {\r\n                                            $.when(\r\n                                                self.renderSummaryForm($(\"#formSummary\", renderedTemplate))\r\n                                            ).done(function() {\r\n                                                htmlContent = $(\"#formSummary\", renderedTemplate).html();\r\n                                                cache[\"formSummary\"] = htmlContent;\r\n                                            });\r\n                                        }\r\n                                    });\r\n                            }\r\n                            break;\r\n                        case \"subprocess\":\r\n                            if (cache[\"subprocess\"] == undefined) {\r\n                                $.when(\r\n                                    self.dataService.summarySubProcess({\r\n                                        idCase: self.idCase\r\n                                    })\r\n                                ).done(function(subprocess) {\r\n                                    htmlContent = $.tmpl(self.caseSummaryTemplateSubprocess, subprocess);\r\n                                    htmlContent.appendTo($(\"#subprocess\", renderedTemplate));\r\n                                    cache[\"subprocess\"] = htmlContent;\r\n                                    // Define Events for subprocess tab\r\n                                    htmlContent.delegate(\".summaryLink\", \"click\", function() {\r\n                                        self.routingExecute($(this));\r\n                                        caseSummaryDialog.dialog('close');\r\n                                    });\r\n                                });\r\n                            }\r\n                            break;\r\n                        case \"assignees\":\r\n\r\n                            if (cache[\"assignees\"] == undefined) {\r\n                                $.when(\r\n                                    self.dataService.summaryAssigness({\r\n                                        idCase: self.idCase,\r\n                                        preview:true\r\n                                    })\r\n                                ).done(function(assignees) {\r\n                                    // Generates  lists of unique assignees for Events\r\n                                    var eventsUniqueList = [];\r\n                                    $.each(assignees.events.split(\", \"), function(i, el) {\r\n                                        if ($.inArray(el, eventsUniqueList) === -1) eventsUniqueList.push(el);\r\n                                    });\r\n                                    assignees.events = eventsUniqueList.join(\", \");\r\n\r\n                                    // Generates  lists of unique assignees for activities\r\n                                    var activitiesUniqueList = [];\r\n                                    $.each(assignees.activities.split(\", \"), function(i, el) {\r\n                                        if ($.inArray(el, activitiesUniqueList) === -1) activitiesUniqueList.push(el);\r\n                                    });\r\n                                    assignees.activities = activitiesUniqueList.join(\", \");\r\n                                    htmlContent = $.tmpl(self.caseSummaryTemplateAssigness, assignees);\r\n                                    htmlContent.appendTo($(\"#assignees\", renderedTemplate));\r\n                                    cache[\"assignees\"] = htmlContent;\r\n                                });\r\n                            }\r\n                            break;\r\n                        case \"events\":\r\n                            if (cache[\"events\"] == undefined) {\r\n                                $.when(\r\n                                    self.dataService.summaryCaseEvents({\r\n                                        idCase: self.idCase\r\n                                    })\r\n                                ).done(function(events) {\r\n                                    htmlContent = $.tmpl(self.caseSummaryTemplateEvents, events);\r\n                                    htmlContent.appendTo($(\"#events\", renderedTemplate));\r\n                                    cache[\"events\"] = htmlContent;\r\n                                    htmlContent.delegate(\".summaryLink\", \"click\", function() {\r\n                                        self.routingExecute($(this));\r\n                                        caseSummaryDialog.dialog('close');\r\n                                    });\r\n                                });\r\n                            }\r\n                            break;\r\n                    }\r\n                }\r\n            });\r\n\r\n            $(\".inbox-grid-tooltip-button\", content).tooltip();\r\n            // Add click to view workflow\r\n            $(\"#ui-bizagi-wp-app-inbox-description-container .ui-bizagi-wp-app-inbox-cases-ico-view\", content).click(function() {\r\n                if (self.adhocIds.length > 0) {\r\n                    for (var i = 0; i < self.adhocIds.length; i++) {\r\n                        if (idCase == self.adhocIds[i].caseId) {\r\n                            self.showGraphicQuery({\r\n                                idCase: idCase,\r\n                                idWorkflow: idWorkflow,\r\n                                isAdhoc: true,\r\n                                idProcess: self.adhocIds[i].processId\r\n                            });\r\n                        } else {\r\n                            self.showGraphicQuery({ idCase: idCase, idWorkflow: idWorkflow });\r\n                        }\r\n                    }\r\n                } else {\r\n                    self.showGraphicQuery({ idCase: idCase, idWorkflow: idWorkflow });\r\n                }\r\n\r\n            });\r\n            // Bind events for events and process on summary case\r\n            $(\".workonitRow\", renderedTemplate).click(function() {\r\n\t\t\t\tvar currentWorkitemId = $(this).parent().find(\"#idWorkItem\").val();\r\n\t\t\t\t\r\n                var referrerParams = {\r\n                    taskState: self.params.taskState,\r\n                    idWorkItem: currentWorkitemId,\r\n                    idCase: data.idCase,\r\n                    onlyFavorites: self.onlyFavorites,\r\n                    idWorkflow: self.idWorkflow,\r\n                    referrer: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INBOX_GRID\r\n                }\r\n                $.extend(bizagi.referrerParams, bizagi.referrerParams, referrerParams);\r\n                // Executes routing action\r\n                caseSummaryDialog.dialog('close');\r\n\t\t\t\t\r\n\t\t\t\tvar workitem = $.grep(data.currentState, function (item, i) {\r\n\t\t\t\t\t\t\treturn item.idWorkItem == currentWorkitemId;\r\n\t\t\t\t\t\t})[0];\r\n\r\n\t\t\t\tvar workitemCaseId;\r\n\t\t\t\tif (workitem && workitem.idCase)\r\n\t\t\t\t\tworkitemCaseId = workitem.idCase;//Only to access a Subprocess from parent.\r\n\t\t\t\telse\r\n\t\t\t\t\tworkitemCaseId = data.idCase;\r\n\t\t\t\t\r\n                self.publish(\"executeAction\", {\r\n                    action: bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING,\r\n                    idCase: workitemCaseId,\r\n                    idWorkflow: idWorkflow,\r\n                    idWorkItem: currentWorkitemId\r\n                });\r\n            });\r\n\r\n            // Add click to timeline icon\r\n            $(\".js-show-timeline\", renderedTemplate).click(function (event){\r\n                var caseNumber = $.trim($(this).closest(\"div.ui-bizagi-wp-app-inbox-processes-title\").find(\"span.js-case-number\").text());\r\n                self.showTimeLine({ radNumber: caseNumber, idCase: idCase });\r\n            });\r\n\r\n            // Set buttons\r\n            var buttons = {};\r\n            buttons[bizagi.localization.getResource(\"workportal-case-dialog-box-close\")] = function() {\r\n                caseSummaryContainer.empty();\r\n                renderedTemplate.remove();\r\n                $(\"#ui-bizagi-wp-app-inbox-description-container\").remove();\r\n            };\r\n            // Show dialog\r\n            caseSummaryDialog.dialog({\r\n                modal: true,\r\n                title: data.process,\r\n                width: 1000,\r\n                height: 600,\r\n                draggable: true,\r\n                resizable: true,\r\n                buttons: buttons,\r\n                close: function() {\r\n                    caseSummaryContainer.empty();\r\n                    renderedTemplate.remove();\r\n                    $(\"#ui-bizagi-wp-app-inbox-description-container\").remove();\r\n                }\r\n            });\r\n            //$(\"\").add(\"workonitRow\")\r\n        });\r\n    },\r\n    /*\r\n     *   Misc method to format cell values\r\n     */\r\n    formatRequest: function(value) {\r\n        return value;\r\n    },\r\n    /**\r\n     * Misc method to render categories\r\n     */\r\n    formatCategories: function(value) {\r\n        return value;\r\n    },\r\n    isArray: function(value) {\r\n        if (typeof(value) == 'object') {\r\n            return true;\r\n        } else {\r\n            return false;\r\n        }\r\n    },\r\n    /*\r\n     *   Renders the summary form inside a given container\r\n     */\r\n    renderSummaryForm: function(container) {\r\n        var self = this;\r\n\r\n        var proxyPrefix = (typeof(self.dataService.serviceLocator.proxyPrefix) != undefined) ? self.dataService.serviceLocator.proxyPrefix : \"\";\r\n\r\n        bizagi.loader.start(\"rendering\").then(function () {\r\n            // Load render page\r\n            var rendering = new bizagi.rendering.facade({ \"proxyPrefix\": proxyPrefix });\r\n\r\n            // Executes rendering into render container\r\n            rendering.execute({\r\n                canvas: container,\r\n                summaryForm: true,\r\n                idCase: self.idCase\r\n            });\r\n\r\n            // Keep reference to rendering facade\r\n            self.renderingFacade = rendering;\r\n\r\n            // Resize layout\r\n            setTimeout(function() {\r\n                self.resizeLayout();\r\n            }, 1000);\r\n        });\r\n    },\r\n    /**\r\n     * Inject styles and js into the iframe\r\n     */\r\n    iframeOldRender: function(canvas) {\r\n        var self = this;\r\n        var iframe;\r\n        var content = self.getContent();\r\n        var theme = \"bizagiDefault\";\r\n        var queryString = bizagi.readQueryString();\r\n\r\n        $.each(canvas, function() {\r\n            if ($(this).is(\"iframe\")) {\r\n                iframe = $(this);\r\n            }\r\n        });\r\n\r\n        iframe.load(function() {\r\n            // inject css\r\n            var content = $(this).contents();\r\n\r\n            // Fixed problem with relative path across the different browsers\r\n            var cssLocation = ($.browser.mozilla || $.browser.webkit) ? \"../../css/render_%theme%.css\" : \"css/render_%theme%.css\";\r\n\r\n            // Define theme\r\n            cssLocation = cssLocation.replace(\"%theme%\", (queryString[\"theme\"] || theme));\r\n\r\n            // Append css\r\n            $('body', content).append(\"<link type='text/css' rel='stylesheet' href='\" + cssLocation + \"'>\");\r\n\r\n            // Append javascript\r\n            //\t$('head',content).append(\"<script type='text/javascript' src='../../js/renderintegration.js'></script>\");\t\r\n        });\r\n    }\r\n});","/*\r\n *   Name: BizAgi Workportal Desktop Integration old render within new look and feel\r\n *   Author: Edward Morales\r\n *   Comments:\r\n *   -   This script define base controller to integrate old render within new workportal\r\n */\r\n\r\n// Extends itself\r\nbizagi.workportal.widgets.oldrenderintegration.extend(\"bizagi.workportal.widgets.oldrenderintegration\", {}, {\r\n    /*\r\n    *   Constructor\r\n    */\r\n    init: function (workportalFacade, dataService, params) {\r\n        var self = this;\r\n        // Call base\r\n        this._super(workportalFacade, dataService, params);\r\n\r\n        // Declare widget variables\r\n        self.taskState = \"all\"; // general taskState from tabs\r\n        self.icoTaskState = \"\"; // real staskState from list cases\r\n        self.idWorkflow = 0;\r\n        self.idCase = 0;\r\n\r\n        //Load templates\r\n        self.loadTemplates({\r\n            \"integration-old-render\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.oldrenderintegration\").concat(\"#ui-bizagi-workportal-widget-oldrender\"),\r\n            useNewEngine: false\r\n        });\r\n    },\r\n    /*\r\n    *   To be overriden in each device to apply layouts\r\n    */\r\n    postRender: function () {\r\n        var self = this,\r\n                content = self.getContent();\r\n\r\n        if (self.params.restoreStatus) {\r\n            bizagi.referrerParams = bizagi.referrerParams || {};\r\n        } else {\r\n            bizagi.referrerParams = bizagi.referrerParams ? { page: bizagi.referrerParams.page } : {};\r\n        }\r\n\r\n        self.params.taskState = self.params.taskState || bizagi.referrerParams.taskState || \"all\";\r\n\r\n\r\n        // Bind navigation bar\r\n        // Set idcase data\r\n        $(\".back\", content).data(\"idCase\", self.getBackCase());\r\n        $(\".next\", content).data(\"idCase\", self.getNextCase());\r\n\r\n        // Bind for click event on back and bext botton\r\n        $(\".back, .next\", content).click(function () {\r\n            var idCase = $(this).data(\"idCase\");\r\n            if (idCase > 0) {\r\n                self.publish(\"executeAction\", {\r\n                    action: bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING,\r\n                    idCase: idCase\r\n                });\r\n            }\r\n        });\r\n\r\n        // Bind for click event on refresh botton\r\n        $(\".refresh\", content).click(function () {\r\n            self.publish(\"executeAction\", {\r\n                action: bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING,\r\n                idCase: self.params.idCase,\r\n                idTask: self.params.idTask,\r\n                idWorkItem: self.params.idWorkitem,\r\n                referrer: self.params.referrer || \"inboxGrid\"\r\n            });\r\n        });\r\n\r\n        // Bind for click event on return botton\r\n        $(\".ui-bizagi-wp-app-inbox-bt-back, #innerContentInbox > h2\", content).click(function () {\r\n            var widget = bizagi.referrerParams.referrer || bizagi.cookie('bizagiDefaultWidget');\r\n            // switch referer widget\r\n            switch (widget) {\r\n                case \"inbox\":\r\n                    self.publish(\"changeWidget\", {\r\n                        widgetName: widget,\r\n                        restoreStatus: true\r\n                    });\r\n                    break;\r\n                case \"inboxGrid\":\r\n                    self.publish(\"changeWidget\", {\r\n                        widgetName: widget,\r\n                        restoreStatus: true\r\n                    });\r\n                    break;\r\n                case \"search\":\r\n                    self.publish(\"executeAction\", {\r\n                        action: bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_SEARCH,\r\n                        radNumber: bizagi.referrerParams.radNumber || \"\",\r\n                        page: bizagi.referrerParams.page || 1,\r\n                        onlyUserWorkItems: false\r\n                    });\r\n                    break;\r\n                case \"queryform\":\r\n                    self.publish(\"showDialogWidget\", {\r\n                        widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_QUERYFORM,\r\n                        queryFormAction: \"loadPrevious\"\r\n                    });\r\n                    break;\r\n                case \"folders\":\r\n                    var url = bizagi.referrerParams.urlParameters + \"&page=\" + bizagi.referrerParams.page;\r\n                    $.when(self.dataService.getCasesByFolder(url))\r\n                            .done(function (data) {\r\n                                data.customized = true;\r\n                                data.urlParameters = bizagi.referrerParams.urlParameters\r\n\r\n                                // Define title of widget\r\n                                data.title = bizagi.referrerParams.name;\r\n\r\n                                // Set a flag here to tell the search widget that must show the ungroup case from folder (icon).\r\n                                data.casesGroupedByFolder = true;\r\n                                data.idFolder = bizagi.referrerParams.id;\r\n\r\n                                self.publish(\"changeWidget\", {\r\n                                    widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_SEARCH,\r\n                                    data: data,\r\n                                    referrerParams: {}\r\n                                });\r\n                            });\r\n                    break;\r\n                default:\r\n                    self.publish(\"changeWidget\", {\r\n                        widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INBOX,\r\n                        restoreStatus: true\r\n                    });\r\n                    break;\r\n            }\r\n        });\r\n\r\n        // Bind for hover event on refresh and return botton\r\n        $(\".refresh,.return\", content).hover(function () {\r\n            $(this).addClass(\"active\");\r\n        }, function () {\r\n            $(this).removeClass(\"active\");\r\n        });\r\n\r\n        // Bind for hover event on next and back botton\r\n        $(\".next,.back\", content).hover(\r\n                function () {\r\n                    if ($(this).data(\"idCase\") > 0) {\r\n                        $(this).addClass(\"active\");\r\n                    }\r\n                },\r\n                function () {\r\n                    $(this).removeClass(\"active\");\r\n                });\r\n\r\n\r\n        // Insert iframe with old render\r\n        self.insertIframeOldRender();\r\n    },\r\n    getInjectJavaScript: function (params) {\r\n\r\n        var args = {};\r\n        var callback = function (args) {\r\n            this.changeToWidget = function (widget) {\r\n                args.controller.publish(\"changeWidget\", {\r\n                    widgetName: args.bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INBOX_GRID\r\n                });\r\n            };\r\n\r\n            this.openBACase = function (idCase, sHref) {\r\n                var workitem = null;\r\n                if (sHref.indexOf(\"idWorkitem=\") > -1) {\r\n                    workitem = sHref.substring(sHref.indexOf(\"idWorkitem=\") + 11);\r\n                    workitem = workitem.substring(0, workitem.indexOf(\"&\"));\r\n                }\r\n                // Executes the act on\r\n                args.controller.publish(\"executeAction\", {\r\n                    action: args.routingAction,\r\n                    idCase: idCase,\r\n                    idWorkItem: workitem\r\n                });\r\n\r\n                // close dialog\r\n                params.controller.publish(\"closeCurrentDialog\");\r\n            };\r\n        }\r\n\r\n\r\n        return {\r\n            callback: callback,\r\n            args: {\r\n                routingAction: bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING,\r\n                bizagi: bizagi\r\n            }\r\n        }\r\n\r\n    },\r\n    insertIframeOldRender: function () {\r\n        var self = this;\r\n        var content = self.getContent();\r\n        var iframe;\r\n        var theme = \"bizagiDefault\";\r\n        var queryString = bizagi.readQueryString();\r\n\r\n        $.each(content, function () {\r\n            if ($(this).is(\"iframe\")) {\r\n                iframe = $(this);\r\n            }\r\n        });\r\n\r\n        iframe.load(function () {\r\n            // inject css\r\n            var content = $(this).contents();\r\n            var getInjectJS = self.getInjectJavaScript();\r\n\r\n            // Fixed problem with relative path across the different browsers\r\n            var cssLocation = ($.browser.mozilla || $.browser.webkit) ? \"../../css/render_%theme%.css\" : \"css/render_%theme%.css\";\r\n\r\n            // Define theme\r\n            cssLocation = cssLocation.replace(\"%theme%\", (queryString[\"theme\"] || theme));\r\n\r\n            // Append css\r\n            $('head', content).append(\"<link type='text/css' rel='stylesheet' href='\" + cssLocation + \"'>\");\r\n\r\n            iframe.callInside(\r\n                    getInjectJS.callback,\r\n                    $.extend(getInjectJS.args, {\r\n                        controller: self\r\n                    })\r\n                    );\r\n\r\n            content.bind('click', function () {\r\n                bizagi.workportal.desktop.popup.closePopupInstance();\r\n            });\r\n\r\n            // Append javascript\r\n            $('head', content).append(\"<script type='text/javascript' src='../../js/renderintegration.js'></script>\");\r\n\r\n            // Hack position fixed for IE8 in quirks mode\r\n            /*if ($.browser.msie && parseInt($.browser.version, 10) <= 8) {\r\n                var fixWizard = '<!--[if lte IE 8]> <style type=\"text/css\"> #floater1Div { position: absolute; bottom: auto; right: auto; top: expression( ( -10 - floater1Div.offsetHeight + ( document.documentElement.clientHeight ? document.documentElement.clientHeight : document.body.clientHeight ) + ( ignoreMe = document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop ) ) + \"px\" ); left: expression( ( -20 - floater1Div.offsetWidth + ( document.documentElement.clientWidth ? document.documentElement.clientWidth : document.body.clientWidth ) + ( ignoreMe2 = document.documentElement.scrollLeft ? document.documentElement.scrollLeft : document.body.scrollLeft ) ) + \"px\" ); } #divClose { bottom: -3px; left: 0; } </style> <![endif]--><!--[if lte IE 7]> <link href=\"../../css/estilos.css\" type=\"text/css\" rel=\"stylesheet\" /> <![endif]-->';\r\n                $('head', content).append(fixWizard);\r\n            }*/\r\n\r\n            // Remove all the old elements than doesn't look well\r\n            var $oldElements = $('body img[src*=\"Button.gif\"], body td[style*=\"CellShadow.gif\"], body img[src*=\"tab_active\"], body img[src*=\"tab_inactive\"]', content);\r\n                \r\n            // Remove elements\r\n            $oldElements.parent().remove();\r\n\r\n            // Fix scroll bug in FF\r\n            iframe.css('overflow-y', 'auto');\r\n\r\n        });\r\n    },\r\n    /*\r\n    *  Navigation options\r\n    */\r\n    getListKey: function () {\r\n        var self = this;\r\n        bizagi.lstIdCases = bizagi.lstIdCases || {};\r\n        if (bizagi.lstIdCases.length > 1) {\r\n            for (var i = 0; i < bizagi.lstIdCases.length; i++) {\r\n                if (self.params.idCase == bizagi.lstIdCases[i]) {\r\n                    return i;\r\n                }\r\n            }\r\n        }\r\n        return -1;\r\n    },\r\n    getNextCase: function () {\r\n        var self = this;\r\n        var nextIdCase = 0;\r\n        var key = self.getListKey();\r\n\r\n        // Check if last element\r\n        if (bizagi.lstIdCases.length == (key + 1) || bizagi.lstIdCases.length == 1) {\r\n            nextIdCase = -1;\r\n        } else {\r\n            nextIdCase = bizagi.lstIdCases[key + 1];\r\n        }\r\n\r\n        return nextIdCase;\r\n    },\r\n    getBackCase: function () {\r\n        var self = this;\r\n        var prevIdCase = 0;\r\n        var key = self.getListKey();\r\n\r\n        // Check if first element\r\n        if (key == 0) {\r\n            prevIdCase = -1;\r\n        } else {\r\n            prevIdCase = bizagi.lstIdCases[key - 1];\r\n        }\r\n\r\n        return prevIdCase;\r\n    }\r\n});\r\n","/**\r\n *   Name: Bizagi Workportal Desktop Create Case Controller\r\n *   Author: Alexander Mejia\r\n */\r\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.createcase\", {}, {\r\n    /**\r\n     *   Constructor\r\n     */\r\n    init: function (workportalFacade, dataService, params) {\r\n        var self = this;\r\n\r\n        // Call base\r\n        self._super(workportalFacade, dataService, params);\r\n\r\n        // Private fields\r\n        self._processId = params.idObject;\r\n        self._mapping = params.mapping || [];\r\n        self._idParentCase = params.idParentCase;\r\n        self._mappingstakeholders = params.mappingstakeholders;\r\n        self._guidprocess = params.guidprocess;\r\n\r\n        //Load templates\r\n        self.loadTemplates({\r\n            \"createcase\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.createcase\").concat(\"#createcase-wrapper\")\r\n        });\r\n    },\r\n\r\n    /**\r\n     * Renders the template defined in the widget\r\n     */\r\n    renderContent: function () {\r\n        var self = this,\r\n            template = self.getTemplate(\"createcase\");\r\n        self.content = template.render();\r\n\r\n        return self.content;\r\n    },\r\n\r\n    /**\r\n     * Process widget\r\n     */\r\n    postRender: function () {\r\n        var self = this,\r\n            defer = new $.Deferred(),\r\n            $content = self.getContent();\r\n\r\n        bizagi.loader.start(\"rendering\").then(function () {\r\n            $.when(self.dataService.getStartForm(self._getServiceParams())).then(function (data) {\r\n                return self._getRenderingFacade().execute({ canvas: self._getCanvasForm(), data: data, type: \"\" });\r\n            }).done(function (form) {\r\n                self.startForm = form;\r\n                $content.find('#createcase-content').append(form.container);\r\n                defer.resolve($content);\r\n            });\r\n        });\r\n\r\n        return defer.promise();\r\n    },\r\n\r\n    /**\r\n     * Returns an instance of rendering facade\r\n     */\r\n    _getRenderingFacade: function () {\r\n        var self = this;\r\n\r\n        if (!self._rendering) {\r\n            self._rendering = new bizagi.rendering.facade({\"proxyPrefix\": bizagi.RPproxyPrefix, \"database\": \"\"});\r\n        }\r\n\r\n        return self._rendering;\r\n    },\r\n\r\n    /**\r\n     * Returns an object with the parameters available to gets the start form\r\n     */\r\n    _getServiceParams: function () {\r\n        var self = this,\r\n            params = self.getMapping();\r\n\r\n        params[\"h_action\"] = \"LOADSTARTFORM\";\r\n\r\n        if (self._idParentCase) {\r\n            params[\"h_idParentCase\"] = self._idParentCase\r\n        }\r\n        if (self._mappingstakeholders) {\r\n            params[\"h_mappingstakeholders\"] = self._mappingstakeholders;\r\n        }\r\n        if (self._guidprocess) {\r\n            params[\"h_guidprocess\"] = self._guidprocess;\r\n        }\r\n        else {\r\n            params[\"h_idProcess\"] = self._processId;\r\n        }\r\n        return params;\r\n    },\r\n\r\n    /**\r\n     * Builds the mapping to send at LOADSTARTFORM action\r\n     */\r\n    getMapping: function () {\r\n        var self = this,\r\n            params = {};\r\n\r\n        for (var i = 0, l = self._mapping.length; i < l; i++) {\r\n            var map = self._mapping[i];\r\n            if (map.surrogateKey) {\r\n                params[map.xpath] = JSON.stringify(map.surrogateKey);\r\n            }\r\n        }\r\n\r\n        return params;\r\n    },\r\n\r\n    /**\r\n     * returns the canvas used renderize the start form, also the\r\n     * routing event is attach al canvas.\r\n     * after the case is created succesfully, the form trigger the routing event\r\n     */\r\n    _getCanvasForm: function () {\r\n        var self = this,\r\n            $content = self.getContent();\r\n        var $canvas = $content.find('#createcase-content');\r\n\r\n        // When the case is created, rendering module trigger the routing event\r\n        $canvas.on('routing', $.proxy(self.onCaseCreated, self));\r\n        return $canvas;\r\n    },\r\n\r\n    /**\r\n     * This handler is called when the create button is clicked in\r\n     * the start form\r\n     */\r\n    onCaseCreated: function (ev, params) {\r\n        var self = this;\r\n        self.pub('closeDialog', params);\r\n    },\r\n\r\n    /**\r\n     * Dispose widget\r\n     */\r\n    dispose: function (){\r\n        var self = this;\r\n        if(self.startForm){\r\n            self.pub('createCaseDisposed');\r\n            self.startForm.dispose();\r\n        }\r\n        // Call base\r\n        self._super();\r\n    }\r\n});\r\n\r\nbizagi.injector.register('bizagi.workportal.widgets.createcase', ['workportalFacade', 'dataService', bizagi.workportal.widgets.createcase], true);","/**\r\n * Name: Bizagi Workportal Desktop Update Form Controller\r\n * Author: Alexander Mejia\r\n */\r\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.updateform\", {}, {\r\n    /**\r\n     *   Constructor\r\n     */\r\n    init: function (workportalFacade, dataService, params) {\r\n        var self = this;\r\n\r\n        // Call base\r\n        self._super(workportalFacade, dataService, params);\r\n        // Private fields\r\n        self._guidForm = params.guidForm;\r\n        self._entityGuid = params.entityGuid;\r\n        self._surrogateKey = params.surrogateKey;\r\n        self._mapping = params.mapping;\r\n        self._readonlyform = params.readonlyform;\r\n        //Load templates\r\n        self.loadTemplates({\r\n            \"updateform\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.updateform\").concat(\"#updateform-wrapper\"),\r\n            \"content\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.updateform\").concat(\"#form-content\")\r\n        });\r\n    },\r\n\r\n    /**\r\n     * Renders the template defined in the widget\r\n     */\r\n    renderContent: function () {\r\n        var self = this,\r\n            template = self.getTemplate(\"updateform\");\r\n        self.content = template.render();\r\n\r\n        return self.content;\r\n    },\r\n\r\n    /**\r\n     * Process widget\r\n     */\r\n    postRender: function () {\r\n        var self = this,\r\n            defer = new $.Deferred(),\r\n            $content = self.getContent();\r\n\r\n        self.dataService.getEntityForm(self._getServiceParams()).then(function (data) {\r\n            return self._getRenderingFacade().execute({ canvas: $content.find('#updateform-content'), data: data, type: \"\" });\r\n        }).done(function (form) {\r\n            $content.find('#updateform-content').append(form.container);\r\n            defer.resolve($content);\r\n        });\r\n\r\n        return defer.promise();\r\n    },\r\n\r\n    /**\r\n     * Returns an instance of rendering facade\r\n     * */\r\n    _getRenderingFacade: function () {\r\n        var self = this;\r\n\r\n        if (!self._rendering) {\r\n            self._rendering = new bizagi.rendering.facade({ \"proxyPrefix\": bizagi.RPproxyPrefix, \"database\": \"\" });\r\n        }\r\n        self._rendering.subscribe('rendering-formRendered', $.proxy(self._overrideHandlers, self));\r\n\r\n        return self._rendering;\r\n    },\r\n\r\n    /**\r\n     * Returns an object with the parameters available to gets the start form\r\n     * */\r\n    _getServiceParams: function () {\r\n        var self = this,\r\n            params = {};\r\n\r\n        params[\"h_action\"] = \"LOADENTITYFORM\";\r\n        params[\"h_contexttype\"] = \"entity\";\r\n        params[\"h_guidForm\"] = self._guidForm;\r\n        params[\"h_showDisabled\"] = false;\r\n        params[\"h_guidEntity\"] = self._entityGuid;\r\n        params[\"h_readonlyform\"] = self._readonlyform;\r\n\r\n        if (self._mapping) {\r\n            params[\"h_mapping\"] = JSON.stringify(self._mapping);\r\n        }\r\n\r\n        if (self._surrogateKey) {\r\n            params[\"h_surrogateKey\"] = self._surrogateKey;\r\n        }\r\n\r\n        return params;\r\n    },\r\n\r\n    /**\r\n     * returns the canvas used renderize the start form, also the\r\n     * routing event is attach al canvas.\r\n     * after the case is created succesfully, the form trigger the routing event\r\n     */\r\n    _getCanvasForm: function () {\r\n        var self = this;\r\n        var formTemplate = self.getTemplate('content');\r\n\r\n        return formTemplate.render();\r\n    },\r\n\r\n    /**\r\n     *\r\n     * @private\r\n     */\r\n    _overrideHandlers: function () {\r\n        var self = this,\r\n            form = typeof self._rendering === \"undefined\" ? null : self._rendering.form;\r\n\r\n        if (form) {\r\n            self.idPageCache = self.idPageCache || form.idPageCache;\r\n            var properties = form.properties;\r\n            var originalProcessButton = form.processButton;\r\n\r\n            form.processButton = function (buttonProperties) {\r\n                var action = buttonProperties.action;\r\n\r\n                if (action == \"cancel\") {\r\n                    form.endLoading();\r\n                    self.pub('closeDialog', { refresh : false });\r\n                    form.dispose();\r\n                }\r\n                else {\r\n                    properties.surrogateKey = self._surrogateKey;\r\n                    properties.contextType = \"entity\";\r\n\r\n                    form.bind('refresh', function () {\r\n                        form.endLoading();\r\n                        self.pub('closeDialog', { refresh: true });\r\n                        form.dispose();\r\n                    });\r\n\r\n                    return originalProcessButton.apply(form, arguments);\r\n                }\r\n            };\r\n\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Dispose\r\n     */\r\n    dispose: function() {\r\n        var self = this;\r\n        if(self._rendering && self._rendering.form) {\r\n            self._rendering.form.dispose();\r\n        }\r\n        bizagi.util.dispose(self);\r\n    },\r\n});\r\nbizagi.injector.register('bizagi.workportal.widgets.updateform', ['workportalFacade', 'dataService', bizagi.workportal.widgets.updateform], true);","/**\r\n * This widget show information of entities using Template engine\r\n */\r\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.templates\", {}, {\r\n    /**\r\n     * Constructor\r\n     * @param workportalFacade\r\n     * @param dataService\r\n     * @param actionService\r\n     * @param accumulatedcontext\r\n     * @param processActionService\r\n     * @param params\r\n     * @param casetoolbar\r\n     * @param usersCasesService\r\n     * @param actionsEventsService\r\n     */\r\n\tinit: function(workportalFacade, dataService, actionService, casetoolbar, usersCasesService, actionsEventsService, accumulatedcontext, processActionService, params) {\r\n\t\tvar self = this;\r\n\r\n\t\t// Call base\r\n\t\tself._super(workportalFacade, dataService, params);\r\n\r\n\t\t//Load templates\r\n\t\tself.loadTemplates({\r\n\t\t\t\"templateEngine\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.templateEngine\").concat(\"#templateengine-wrapper\"),\r\n\t\t\t\"templateEngineElement\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.templateEngine\").concat(\"#templateengine-wrapper-element\"),\r\n\t\t\t\"templateEngineTooltip\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.templateEngine\").concat(\"#templateengine-wrapper-tooltip\"),\r\n\t\t\t\"templateEmptyData\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.templateEngine\").concat(\"#templateengine-empty-message\")\r\n\t\t});\r\n\r\n\t\t//Private fields\r\n        self.selectorCheckboxItems = \".template-box-header input:checkbox\";\r\n\t\tself.actionService = actionService;\r\n\t\tself.casetoolbar = casetoolbar;\r\n\t\tself.usersCasesService = usersCasesService;\r\n\t\tself.actionsEventsService = actionsEventsService;\r\n\t\tself.processActionService = processActionService;\r\n\t\tself.accumulatedcontext = accumulatedcontext;\r\n\t\tself._currentPage = 1;\r\n\t\tself.entitiesSelected = {};\r\n\t},\r\n\r\n\t/**\r\n\t * Renders the template defined in the widget\r\n\t * @return {*}\r\n\t */\r\n\trenderContent: function() {\r\n\t\tvar self = this;\r\n\t\tvar template = self.getTemplate(\"templateEngine\");\r\n\t\tself.content = template.render({});\r\n\r\n\t\treturn self.content;\r\n\t},\r\n\r\n\t/**\r\n\t * links events with handlers\r\n\t */\r\n\tpostRender: function() {\r\n\t\tvar self = this;\r\n        self.configureHandlers();\r\n\t},\r\n\r\n    /**\r\n     * configure Handlers\r\n     */\r\n    configureHandlers: function () {\r\n        var self = this;\r\n        var $content = self.getContent();\r\n\r\n        $content.find(\"#template-dataviewer-list\").on(\"click\", self.selectorCheckboxItems, $.proxy(self.onEntityChecked, self));\r\n\r\n        self.sub(\"GET-COMMON-ACTIONS\", $.proxy(self.getCommonActions, self));\r\n\r\n        self.sub(\"TEMPLATEENGINE-VIEW\", function(ev, params) {\r\n            self.params.event = \"TEMPLATEENGINE-VIEW\";\r\n            return self.updateData(params);\r\n        });\r\n\r\n        self.sub(\"SEARCH-ENGINE-VIEW\", function(ev, params) {\r\n            self.params.event = \"SEARCH-ENGINE-VIEW\";\r\n            return self.updateData(params);\r\n        });\r\n\r\n        self.sub(\"UPDATE-DATATEMPLATE-VIEW\", function(ev, params) {\r\n            return self.updateData(params);\r\n        });\r\n\r\n        self.sub(\"SET-VALUES\", function(ev, params) {\r\n            return self.setValues(params);\r\n        });\r\n\r\n        self.actionService.subscribe(\"onFormActionExecuted\", $.proxy(self.onFormActionExecuted, self));\r\n        self.processActionService.subscribe(\"onFormRuleExecuted\", $.proxy(self.onFormRuleExecuted, self));\r\n        self.processActionService.subscribe(\"onFormExecuted\", $.proxy(self.onFormExecuted, self));\r\n    },\r\n\r\n    /**\r\n     * Gets entity data and inject it in the defined template\r\n     * @param params\r\n     * @return {*}\r\n     */\r\n    updateData: function(params) {\r\n        var self = this;\r\n        var args = params.args || {};\r\n        var defer = new $.Deferred();\r\n\r\n        // Clean the displayed data before getting the new one\r\n        var $dataViewList = $(\"#template-dataviewer-list\", self.getContent());\r\n        $dataViewList.empty();\r\n\r\n        self.actionService.init();\r\n        self.entitiesSelected = {};\r\n\r\n        self._referrer = args.guidSearch ? \"search\" : args.referenceType ? \"dataNavigation\" : self._referrer;\r\n        self._page = args.page || self._page;\r\n        self._totalRecords = args.totalRecords;\r\n        self._filters = args.filters || self._filters;\r\n        self._defaultFilterApplied = typeof args.defaultFilterApplied !== \"undefined\" ? args.defaultFilterApplied : (typeof self._defaultFilterApplied !== \"undefined\" ? self._defaultFilterApplied : true);\r\n        self._guidSearch = args.guidSearch || self._guidSearch;\r\n        self._fromActionLauncher = (typeof args.fromActionLauncher !== \"undefined\") ? args.fromActionLauncher : self._fromActionLauncher;\r\n        self._reference = args.reference || self._reference || \"\";\r\n        self._surrogateKey = args.surrogateKey || self._surrogateKey;\r\n        self._referenceType = args.referenceType || self._referenceType;\r\n        self._xpath = args.xpath || self._xpath;\r\n        self._guidEntityCurrent = args.guidEntityCurrent || self._guidEntityCurrent;\r\n        self._pageSize = args.pageSize || self._pageSize;\r\n        self._onlyLocalResults = args.onlyLocalResults || self._onlyLocalResults;\r\n\r\n        // Get entity data\r\n        var entityDataParams = {\r\n            guidSearch: self._guidSearch,\r\n            fromActionLauncher: self._fromActionLauncher,\r\n            reference: self._reference,\r\n            surrogateKey: self._surrogateKey,\r\n            referenceType: self._referenceType,\r\n            page: self._page,\r\n            filters: self._filters,\r\n            filtersAppliedCounter: args.filtersAppliedCounter,\r\n            totalRecords: self._totalRecords,\r\n            calculateFilters: typeof args.calculateFilters === \"undefined\" ?  true : args.calculateFilters,\r\n            defaultFilterApplied: self._defaultFilterApplied,\r\n            xpath: self._xpath,\r\n            guidEntityCurrent: self._guidEntityCurrent,\r\n            pageSize: self._pageSize,\r\n            onlyLocalResults: self._onlyLocalResults\r\n        };\r\n\r\n        $.when(self.getEntityData(entityDataParams)).then(function(data) {\r\n            var deferProcessEntities = $.Deferred();\r\n            if(data && data.reference === self._reference){\r\n                //clone args, because bizagi.navigator.info is referenced to args\r\n                self.pub(\"notify\", {type: \"PAGINATOR-UPDATE\", args: $.extend(bizagi.clone(args), data, {event: params.type})});\r\n                $.when(self.processEntities($.extend(data, { referenceType: self._referenceType }))).done(function(response){\r\n                    deferProcessEntities.resolve(response, data.reference);\r\n                });\r\n            }\r\n            else{\r\n                deferProcessEntities.reject();\r\n            }\r\n            return deferProcessEntities.promise();\r\n\r\n        }).done(function(entitiesData, reference) {\r\n            if(reference === self._reference) {\r\n                self.checkAll = false; //When updateData always uncheck all\r\n                $.when(self.renderEntities(entitiesData, args)).done(function () {\r\n                    self.pub(\"notify\", {\r\n                        type: \"ENABLE-BATCHS-ACTIONS\",\r\n                        args: {commonActions: self.setValues({args: {value: self.checkAll}})}\r\n                    });\r\n                    defer.resolve(entitiesData);\r\n                });\r\n            }\r\n        });\r\n\r\n        return defer.promise();\r\n    },\r\n\r\n    /**\r\n     * returns an instance of  the template engine\r\n     * @return {*}\r\n     */\r\n    getTemplateEngine: function() {\r\n        var self = this;\r\n\r\n        if (self.templateEngine) {\r\n            return self.templateEngine;\r\n        }\r\n\r\n        var renderDataService = new bizagi.render.services.service({proxyPrefix: bizagi.RPproxyPrefix});\r\n        var renderFactory = new bizagi.rendering.desktop.factory(renderDataService);\r\n        var defer = new $.Deferred();\r\n\r\n        $.when(renderFactory.initAsyncStuff()).done( function() {\r\n            self.templateEngine = new bizagi.templateEngine({\r\n                renderFactory: renderFactory,\r\n                cache: true,\r\n                router: self.router\r\n            });\r\n\r\n            self.templateEngine.subscribe(\"onLoadDataNavigation\", function(ev, params) {\r\n                var data = params.data || {};\r\n                var args = {\r\n                    reference: data.reference,\r\n                    surrogateKey: data.surrogateKey,\r\n                    referenceType: data.referenceType,\r\n                    histName: data.displayName,\r\n                    guidEntityCurrent: data.guidEntityCurrent,\r\n                    filters: [],\r\n                    page: 1,\r\n                    calculateFilters: true\r\n                };\r\n\r\n                if (typeof data.xpath !== \"undefined\" && data.xpath) {\r\n                    args.xpath = data.xpath;\r\n                }\r\n\r\n                self.accumulatedcontext.addContext({ \"entityGuid\": params.data.guidEntityCurrent, \"surrogateKey\": [params.data.surrogateKey] });\r\n\r\n                var getLevelNavigator = self.pub(\"notify\", {type: \"NAVIGATOR_GETLEVEL\"});\r\n                var currentLevelNavigator = getLevelNavigator && getLevelNavigator.length > 0 ? parseInt(getLevelNavigator[0]) : 1;\r\n\r\n                self.pub(\"notify\", {\r\n                    type: data.contextEvent,\r\n                    args: $.extend(args, {level: currentLevelNavigator + 1})\r\n                });\r\n            });\r\n            defer.resolve(self.templateEngine);\r\n        });\r\n        return defer.promise();\r\n    },\r\n\r\n    /**\r\n     * Gets the data related to entity\r\n     * @param params\r\n     * @return {*}\r\n     */\r\n    getEntityData: function (params) {\r\n        var self = this;\r\n        var appliedFilters =  params.filters;\r\n        var filtersAppliedCounter = params.filtersAppliedCounter;\r\n        var calculateFilters = params.calculateFilters;\r\n\r\n        if (self._referrer === \"search\") {\r\n            return self.dataService.getSearchData(params).then(function (data) {\r\n                self.setFiltersData(data.filters, appliedFilters, filtersAppliedCounter, data.totalRecords, calculateFilters, null);\r\n                return $.extend(data, {reference: params.reference});\r\n            });\r\n        }\r\n        else {\r\n            return self.dataService.getCollectionEntityData(params).then(function (data) {\r\n                if(self._reference === data.reference){\r\n                    var totalRecords = data.totalRecords;\r\n\r\n                    if (totalRecords > 0) {\r\n                        var referenceType = params.referenceType;\r\n                        if (referenceType === \"FACT\") {\r\n                            self.dataService.getFiltersEntityData(params).then(function (filtersData) {\r\n                                if(self._reference === filtersData.reference){\r\n                                    self.processFiltersData(filtersData, appliedFilters, filtersAppliedCounter, totalRecords, calculateFilters, params.defaultFilterApplied);\r\n                                    self.updateCounterFiltersApplied(appliedFilters);\r\n                                }\r\n                            }).fail( function () {\r\n                                self.hideSortBar();\r\n                            });\r\n                        }\r\n                        else {\r\n                            self.hideSortBar();\r\n                        }\r\n                    }\r\n                    // There is no data but there is an applied filter\r\n                    else if (filtersAppliedCounter > 0) {\r\n                        self.setFiltersData([], appliedFilters, filtersAppliedCounter, totalRecords, false, null);\r\n                        self.updateCounterFiltersApplied(appliedFilters);\r\n                    }\r\n                    else {\r\n                        self.hideSortBar();\r\n                    }\r\n                    return $.extend(data, {reference: params.reference});\r\n                }\r\n            });\r\n        }\r\n    },\r\n\r\n    /**\r\n     *\r\n     */\r\n    hideSortBar: function () {\r\n        var self = this;\r\n\r\n        self.pub(\"notify\", { type: \"HIDE-SORT-BUTTONS\", args: {}});\r\n        self.pub(\"notify\", { type: \"HIDE-FILTER-BUTTONANDBAR\", args: {}});\r\n    },\r\n\r\n    /**\r\n     *\r\n     * @param filtersData\r\n     * @param appliedFilters\r\n     * @param filtersAppliedCounter\r\n     * @param totalRecords\r\n     * @param calculateFilters\r\n     * @param defaultFilterApplied\r\n     */\r\n    processFiltersData: function (filtersData, appliedFilters, filtersAppliedCounter, totalRecords, calculateFilters, defaultFilterApplied) {\r\n        var self = this;\r\n\r\n        if (defaultFilterApplied) {\r\n            var appliedFilter = {\r\n                properties: {xpath: \"\", type: \"entity\", typeSearch: \"exact\"},\r\n                value: []\r\n            };\r\n            var a, i = -1, count = 0;\r\n            while (a = filtersData[++i]) {\r\n                var data = a.data;\r\n                if (a.type === \"Entity\") {\r\n                    var b, j = -1;\r\n                    while (b = data.defaultValues[++j]) {\r\n                        if (b.applied) {\r\n                            appliedFilter.properties.xpath = a.attribute;\r\n                            appliedFilter.value.push({\"id\": b.id});\r\n                            count++;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            if (count > 0) {\r\n                appliedFilters.push(appliedFilter);\r\n            }\r\n            filtersAppliedCounter = (typeof filtersAppliedCounter !== \"undefined\") ? filtersAppliedCounter + count : count;\r\n            self.setFiltersData(filtersData, appliedFilters, filtersAppliedCounter, totalRecords, calculateFilters, defaultFilterApplied);\r\n        }\r\n        else {\r\n            self.setFiltersData(filtersData, [], filtersAppliedCounter, totalRecords, calculateFilters, null);\r\n        }\r\n    },\r\n\r\n    /**\r\n     *\r\n     * @param filters\r\n     * @param filtersApplied\r\n     * @param filtersAppliedCounter\r\n     * @param totalRecords\r\n     * @param calculateFilters\r\n     * @param defaultFilterApplied\r\n     */\r\n    setFiltersData: function (filters, filtersApplied, filtersAppliedCounter, totalRecords, calculateFilters, defaultFilterApplied) {\r\n        var self = this;\r\n        var args = {\r\n            filters: filters || [],\r\n            filtersApplied: filtersApplied,\r\n            filtersAppliedCounter: filtersAppliedCounter || 0,\r\n            totalRecords: totalRecords || 0,\r\n            calculateFilters: calculateFilters || false\r\n        };\r\n\r\n        if (defaultFilterApplied) {\r\n            args.defaultFilterApplied = defaultFilterApplied;\r\n        }\r\n\r\n        self.pub(\"notify\", {\r\n            type: \"SET-FILTERS-DATA\",\r\n            args: args\r\n        });\r\n    },\r\n\r\n    /**\r\n     * Renders each entity and return a promise, it will be resolved when all entities has been procesed\r\n     * @param data\r\n     * @return {*}\r\n     */\r\n    processEntities: function(data) {\r\n        var self = this;\r\n        var result = [];\r\n        var processEntities = [];\r\n        var defer = new $.Deferred();\r\n        var templateType = (data.referenceType === \"ENTITY\") ? \"Content\" : \"List\";\r\n\r\n        if(data.reference === self._reference){\r\n            bizagi.loader.start(\"rendering\").then( function () {\r\n                $.when(self.getTemplateEngine()).then(\r\n                    $.proxy(function(engine){\r\n                        return $.when.apply($, $.map(data.entities, $.proxy(function(entity) {\r\n                            processEntities.push({ surrogateKey: entity.surrogateKey, entityId: entity.guid });\r\n\r\n                            var entityData = $.extend(entity, { isDefaultTemplate: entity.guidTemplate === null, templateType: templateType });\r\n                            var paramsRender = {contextEvent: this.params.event};\r\n                            return engine.render(entityData, paramsRender);\r\n                        }, this)));\r\n                    }, self)\r\n                ).done( function() {\r\n                    var templates = $.makeArray(arguments);\r\n                    var tmpl;\r\n\r\n                    for (var i = 0, l = data.entities.length; i < l; i++) {\r\n                        tmpl = (l === 1) ? templates[i] : templates[i][0];\r\n                        result.push({tmpl: tmpl, data: data.entities[i]});\r\n                    }\r\n\r\n                    //dont repeat request with the same params\r\n                    var requestRepeat = false;\r\n                    if(typeof self.idCasesOfProcessEntitiesPromise !== \"undefined\" &&\r\n                        self.idCasesOfProcessEntitiesPromise.state() === \"pending\" &&\r\n                        self.lastParamsSendit &&\r\n                        JSON.stringify(processEntities) === self.lastParamsSendit\r\n                    ){\r\n                        defer.reject();\r\n                        requestRepeat = true;\r\n                    }\r\n\r\n                    if(!requestRepeat){\r\n                        // Promesa que retorna id de casos (cuando la entidad es una entidad de proceso) y sera utilizada después\r\n                        // al renderizar el TMPL - ver renderEntities\r\n                        self.lastParamsSendit = JSON.stringify(processEntities);\r\n                        self.idCasesOfProcessEntitiesPromise = self.dataService.getIdCasesOfProcessEntities(processEntities);\r\n                        $.when(self.idCasesOfProcessEntitiesPromise).done(function(){\r\n                            defer.resolve(result);\r\n                        });\r\n                    }\r\n                });\r\n            });\r\n        }\r\n        else{\r\n            defer.reject();\r\n        }\r\n\r\n        return defer.promise();\r\n    },\r\n\r\n    /**\r\n     * Gets entity data and inject it in the defined template\r\n     * @param entitiesData\r\n     * @param args\r\n     */\r\n    renderEntities: function (entitiesData, args) {\r\n        var self = this;\r\n        var generalDefer = $.Deferred();\r\n        var collectionDeferreds = [];\r\n        var $dataViewList = $(\"#template-dataviewer-list\", self.getContent());\r\n        var entitiesLength = self.entitiesLength = entitiesData.length;\r\n        var $elementsTmpl = $();\r\n\r\n        for (var i = 0; i < entitiesLength; i++) {\r\n            var $template = self.renderTemplate(entitiesData[i], false, args);\r\n            $elementsTmpl.push.apply($elementsTmpl, $template);\r\n        }\r\n\r\n        if ($elementsTmpl.length > 0) {\r\n            $dataViewList.append($elementsTmpl);\r\n            // Dado que la respuesta de este servicio se puede demorar, primero se renderiza todas las entidades\r\n            // y despues se busca cuales de ellas son entidades de proceso\r\n            collectionDeferreds.push(self.getIdCasesOfProcessEntities(entitiesData, args.fromActionLauncher, $dataViewList));\r\n            $.when.apply($, collectionDeferreds).done(function(){\r\n                generalDefer.resolve();\r\n            });\r\n        }\r\n        else {\r\n            $dataViewList.append(self.getEmptyDataMessage());\r\n            generalDefer.resolve();\r\n        }\r\n\r\n        return generalDefer.promise();\r\n    },\r\n\r\n    /**\r\n     * returns the template for the current entity\r\n     * @param entity\r\n     * @param isRefresh\r\n     * @param params\r\n     * @return {*}\r\n     */\r\n    renderTemplate: function(entity, isRefresh, params) {\r\n        var self = this;\r\n        var entityData = entity.data || {};\r\n        var surrogateKey = entityData.surrogateKey;\r\n        var guidEntity = entityData.guid;\r\n        var fromActionLauncher = params.fromActionLauncher;\r\n\r\n        //Render card tmpl with data\r\n        var $templateData = self.getTemplate(\"templateEngineElement\").render({\r\n            fromActionLauncher: fromActionLauncher,\r\n            guidEntity: guidEntity,\r\n            isChecked: self.checkAll,\r\n            surrogateKey: surrogateKey\r\n        });\r\n        //Render entity tmpl in card tmpl\r\n        $templateData.find(\"#template\").append(entity.tmpl);\r\n\r\n        return $templateData;\r\n    },\r\n\r\n    /**\r\n     * Get IdCases Of Process Entities and get actions and events\r\n     */\r\n    getIdCasesOfProcessEntities: function (entitiesData, fromActionLauncher, content) {\r\n        var self = this;\r\n        var generalDefer = $.Deferred();\r\n\r\n        if(typeof self.collectionGetActionsDeferred === \"undefined\"){\r\n            self.collectionGetActionsDeferred = [];\r\n        }\r\n\r\n        self.idCasesOfProcessEntitiesPromise.then( function (response) {\r\n            var idCases = [];\r\n            var a, i = -1;\r\n            while (a = response[++i]) {\r\n                var idCase = a.caseId;\r\n                if (typeof idCase !== \"undefined\" && idCase > 0) {\r\n                    var entity = entitiesData.find( function (el) {\r\n                        return el.data.surrogateKey === a.surrogateKey;\r\n                    });\r\n\r\n                    if (typeof entity !== \"undefined\" && typeof idCase !== \"undefined\") {\r\n\r\n                        var data = entity.data || {};\r\n                        var $cardWrapper = $(\"#template-box-wrapper-\" + data.surrogateKey, content);\r\n                        var $casetoolbar = self.casetoolbar.getCaseToolbar({ casetoolbarData: { idcase: idCase, referrer: \"RenderTemplate\"}});\r\n\r\n                        $(\".template-box-header .casetoolbar\", $cardWrapper).append($casetoolbar);\r\n                        $(self.selectorCheckboxItems, $cardWrapper).data(\"caseid\", idCase);\r\n                        idCases.push(idCase);\r\n                        $.extend(data, {idCase: idCase});\r\n                        \r\n                    }\r\n                }\r\n            }\r\n            self.actionsEventsService.render(idCases);\r\n        }).always( function () {\r\n            var i = -1, e;\r\n            var countRequest = Object.keys(entitiesData).length;\r\n            if(self.collectionGetActionsDeferred.length > 0){\r\n                self.collectionGetActionsDeferred = [];\r\n            }\r\n            while (e = entitiesData[++i]) {\r\n                var data = e.data || {};\r\n                self.collectionGetActionsDeferred.push(self.getEntityActionsAndEvents(fromActionLauncher, false, data.guidEntity, data.surrogateKey, data.idCase));\r\n            }\r\n            $.when.apply($, self.collectionGetActionsDeferred).done(function () {\r\n                generalDefer.resolve();\r\n                self.collectionGetActionsDeferred = [];\r\n            });\r\n\r\n\r\n        });\r\n        return generalDefer.promise();\r\n    },\r\n\r\n    /**\r\n     * Get Entity Actions and Events\r\n     * @param fromActionLauncher\r\n     * @param guidEntity\r\n     * @param surrogateKey\r\n     * @param idCase\r\n     * @param isRefresh\r\n     */\r\n    getEntityActionsAndEvents: function (fromActionLauncher, isRefresh, guidEntity, surrogateKey, idCase) {\r\n        var self = this;\r\n        var defer = $.Deferred();\r\n        var content = self.getContent();\r\n\r\n        // Get Actions and Events only if it does not come from actionlauncher\r\n        if(!fromActionLauncher) {\r\n            setTimeout( function() {\r\n                var $footer = content.find(\"#template-box-wrapper-\" + surrogateKey + \" .template-box-footer\");\r\n                var params = {\r\n                    actionData: {\r\n                        guidEntity: guidEntity,\r\n                        surrogateKey: surrogateKey\r\n                    },\r\n                    loadEvents: false,\r\n                    isRefresh: isRefresh\r\n                };\r\n\r\n                // If there is idCase then loadEvents\r\n                if (typeof idCase !== \"undefined\" && idCase > 0) {\r\n                    params.actionData.idCase = idCase;\r\n                    params.loadEvents = true;\r\n                }\r\n                // Render loading\r\n                $footer.startLoading({delay: 0, overlay: true});\r\n                // Get actions and events\r\n                $.when(self.actionService.getActionsView(params)).done($.proxy(function (reference, responseActions) {\r\n                    var $actionsView = responseActions.actionsView;\r\n                    var actionsData = responseActions.actionsData;\r\n\r\n                    if(reference === self._reference){\r\n                        var $item = content.find(\"#template-box-wrapper-\" + surrogateKey + \" .template-box-element .template-box-footer\");\r\n                        if ($actionsView) {\r\n                            $item.empty().append($actionsView);\r\n\r\n                            if(actionsData.length > 0 && self.getCheckBox($item).data(\"surrogatekey\") != -1){\r\n                                self.showCheckItem($item);\r\n                                self.pub(\"notify\", {\r\n                                    type: \"SOME-ITEM-ALLOW-SELECT\",\r\n                                    args: {}\r\n                                });\r\n                            }\r\n                            else{\r\n                                self.removeCheckItem($item);\r\n                            }\r\n                        }\r\n                        else{\r\n                            self.removeCheckItem($item);\r\n                        }\r\n                        $footer.endLoading();\r\n                        defer.resolve();\r\n                    }\r\n                }, self, bizagi.clone(self._reference)));\r\n            }, 0);\r\n        }\r\n        return defer.promise();\r\n    },\r\n\r\n    /**\r\n     * Get check item by case\r\n     * @param $item\r\n     */\r\n    getCheckBox: function($item){\r\n        var self = this;\r\n        return $item.closest(\".template-box-element\").find(self.selectorCheckboxItems);\r\n    },\r\n\r\n    /**\r\n     * Hide check item\r\n     * @param $item\r\n     */\r\n    removeCheckItem: function($item){\r\n        var self = this;\r\n        self.getCheckBox($item).after(\"<div></div>\").remove();//Add div because CSS with flex\r\n    },\r\n\r\n    /**\r\n     * Show checkbox\r\n     * @param $item\r\n     */\r\n    showCheckItem: function($item){\r\n        var self = this;\r\n        self.getCheckBox($item).show();\r\n    },\r\n\r\n\t/**\r\n\t * Returns the model\r\n\t * @return {{}}\r\n\t */\r\n\tgetCommonActions: function() {\r\n\t\tvar self = this;\r\n\t\tvar model = {};\r\n\r\n\t\tmodel.actions = self.actionService.getCommonActions(self.entitiesSelected);\r\n\t\tmodel.surrogateKeys = [];\r\n\t\tmodel.checkAll = undefined;\r\n\r\n\t\tfor (var surrogateKey in self.entitiesSelected) {\r\n\t\t\tmodel.surrogateKeys.push((typeof surrogateKey === \"string\") ? parseInt(surrogateKey) : surrogateKey);\r\n\t\t}\r\n\t\tmodel.guidEntity = (surrogateKey !== undefined) ? self.entitiesSelected[surrogateKey].guidEntity : \"\";\r\n\r\n\t\tif (model.surrogateKeys.length === 0) {\r\n\t\t\tself.checkAll = false;\r\n\t\t\tmodel.checkAll = false;\r\n\t\t}\r\n        else if (model.surrogateKeys.length == self.entitiesLength) {\r\n\t\t\tself.checkAll = true;\r\n\t\t\tmodel.checkAll = true;\r\n\t\t}\r\n        else if(model.surrogateKeys.length !== self.entitiesLength){\r\n            self.checkAll = false;\r\n            model.checkAll = false;\r\n        }\r\n\r\n        model.itemsSelected = self.entitiesSelected;\r\n\r\n\t\treturn model;\r\n\t},\r\n\r\n\t/**\r\n\t * Handler to hold the entities selected\r\n\t * @param ev\r\n\t */\r\n\tonEntityChecked: function(ev) {\r\n\t\tvar self = this;\r\n\t\tvar $target = $(ev.target);\r\n\t\tvar surrogateKey = $target.data(\"surrogatekey\");\r\n\t\tvar guidentity = $target.data(\"guidentity\");\r\n\t\tvar isChecked = $target.is(\":checked\");\r\n        var caseId = $target.data(\"caseid\");\r\n        var params = {\r\n            surrogateKey: surrogateKey,\r\n            guidEntity: guidentity\r\n        };\r\n\r\n        if (typeof caseId !== \"undefined\" && caseId > 0) {\r\n            params.idCase = caseId;\r\n        }\r\n\r\n\t\tself.entitiesSelected[surrogateKey] = params;\r\n\r\n\t\tif(!isChecked) {\r\n\t\t\tdelete self.entitiesSelected[surrogateKey];\r\n\t\t}\r\n\r\n\t\tself.pub(\"notify\", {type: \"ENABLE-BATCHS-ACTIONS\", args: {commonActions: self.getCommonActions()}});\r\n\t},\r\n\r\n\t/**\r\n\t * Set current value\r\n\t * @param params\r\n\t * @return {*}\r\n\t */\r\n\tsetValues: function(params) {\r\n\t\tvar self = this;\r\n\t\tvar $content = self.getContent();\r\n\t\tvar args = params.args || {};\r\n\t\tvar isChecked = args.value;\r\n\r\n\t\tif($content) {\r\n\t\t\tself.entitiesSelected = {};\r\n\t\t\tvar $inputs = $content.find(self.selectorCheckboxItems);\r\n\r\n\t\t\t$.map($inputs, function(input) {\r\n\t\t\t\t$(input).prop(\"checked\", isChecked);\r\n\r\n\t\t\t\tif(isChecked) {\r\n\t\t\t\t\tvar surrogateKey = $(input).data(\"surrogatekey\"),\r\n\t\t\t\t\t\tguidentity = $(input).data(\"guidentity\"),\r\n                        idCase = $(input).data(\"caseid\");\r\n\r\n\t\t\t\t\tself.entitiesSelected[surrogateKey] = {\r\n\t\t\t\t\t\tsurrogateKey: surrogateKey,\r\n\t\t\t\t\t\tguidEntity: guidentity,\r\n                        idCase: idCase\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tself.checkAll = isChecked;\r\n\r\n\t\t\treturn self.getCommonActions();\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t *\r\n\t * @param ev\r\n\t * @param params\r\n\t */\r\n\tonFormActionExecuted: function(ev, params) {\r\n\t\tvar self = this;\r\n\r\n\t\tif(params.refresh) {\r\n\t\t\tself.refreshRegister(params);\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t *\r\n\t * @param ev\r\n\t * @param params\r\n\t */\r\n\tonFormRuleExecuted: function(ev, params) {\r\n\t\tvar self = this;\r\n\r\n\t\tif(params.refresh) {\r\n\t\t\tself.refreshRegister(params.action);\r\n\t\t}\r\n\t},\r\n\r\n\tonFormExecuted: function (ev, params) {\r\n\t    var self = this;\r\n\r\n\t    if (params.refresh) {\r\n\t        self.refreshRegister(params.action);\r\n\t    }\r\n\t},\r\n\r\n\t/**\r\n\t * Gets data of current register and update it\r\n\t * @param params\r\n\t */\r\n\trefreshRegister: function(params) {\r\n\t\tvar self = this;\r\n\t\tif (self._referrer == \"search\") {\r\n\t\t\tself.updateData({args: {calculateFilters: false}});\r\n\t\t}\r\n\t\telse if (self._referrer == \"dataNavigation\") {\r\n            // It is necessary to send calculateFilters = true so when the data is modified the min and max of\r\n            // each filter is recalculated\r\n            self.updateData({args: {\r\n                calculateFilters: true\r\n            }});\r\n\t\t}\r\n        else {\r\n\t\t\t// Get element to refresh\r\n\t\t\tvar idBox = \"#template-box-wrapper-\" + params.surrogateKey;\r\n\t\t\tvar $templateBox = $(idBox);\r\n\t\t\tvar isChecked = $templateBox.find(\".template-box-header > input:checkbox\").is(\":checked\");\r\n\r\n\t\t\tvar filters = {\r\n\t\t\t\toperator: \"\",\r\n\t\t\t\tfilters: [{\r\n\t\t\t\t\tkey: \"id\",\r\n\t\t\t\t\tvalue: params.surrogateKey\r\n\t\t\t\t}]\r\n\t\t\t};\r\n\r\n\t\t\t$templateBox.startLoading({delay: 250, overlay: true});\r\n\r\n\t\t\t$.when(self.getEntityData({\r\n\t\t\t    reference: params.reference,\r\n\t\t\t    surrogateKey: params.surrogateKey,\r\n\t\t\t    referenceType: params.referenceType,\r\n\t\t\t    xpath: params.xpath,\r\n\t\t\t    guidEntityCurrent: params.guidEntityCurrent,\r\n\t\t\t\tpage: self._page,\r\n\t\t\t\tfilters: filters\r\n\t\t\t})).then( function (data) {\r\n                return self.processEntities(data);\r\n            }).done( function (result) {\r\n                var renderedTemplate = self.renderTemplate(result[0], true, params);\r\n                $templateBox.replaceWith(renderedTemplate);\r\n                $templateBox.endLoading();\r\n                // Restore checked value\r\n                if (isChecked) {\r\n                    $templateBox = $(idBox);\r\n                    $templateBox.find(\".template-box-header > input\").prop(\"checked\", true);\r\n                }\r\n            }).always( function() {\r\n                $templateBox.endLoading();\r\n            });\r\n\t\t}\r\n\t},\r\n\r\n    /**\r\n     *\r\n     */\r\n    router: function() {\r\n    },\r\n\r\n    /**\r\n     * Gets Message when there aren't data\r\n     * @return {*}\r\n     */\r\n    getEmptyDataMessage: function() {\r\n        var self = this;\r\n        var emptyTemplate = self.getTemplate(\"templateEmptyData\");\r\n\r\n        return emptyTemplate.render()[0].outerHTML;\r\n    },\r\n\r\n    /**\r\n     *\r\n     * @param filtersApplied\r\n     */\r\n    updateCounterFiltersApplied: function(filtersApplied){\r\n        var self = this;\r\n        var counterFilterParams = {\r\n            type: \"UPDATE-COUNTER-FILTERS-APPLIED\",\r\n            args: {\r\n                filtersApplied: filtersApplied\r\n            }\r\n        };\r\n        self.pub(\"notify\", counterFilterParams);\r\n    },\r\n\r\n    /**\r\n     * Detach events\r\n     */\r\n    clean: function() {\r\n        var self = this;\r\n        var $content = self.getContent();\r\n\r\n        self._currentPage = 1;\r\n        self.checkAll = false;\r\n\r\n        if($content) {\r\n            $content.find(\"#template-dataviewer-list\").off(\"click\", self.selectorCheckboxItems);\r\n            self.unsub(\"TEMPLATEENGINE-VIEW\");\r\n            self.unsub(\"SEARCH-ENGINE-VIEW\");\r\n            self.unsub(\"UPDATE-DATATEMPLATE-VIEW\");\r\n            self.unsub(\"GET-COMMON-ACTIONS\");\r\n            self.unsub(\"SET-VALUES\");\r\n            self.actionService.unsubscribe(\"onFormActionExecuted\");\r\n            self.processActionService.unsubscribe(\"onFormRuleExecuted\");\r\n            self.processActionService.unsubscribe(\"onFormExecuted\");\r\n        }\r\n    }\r\n});\r\n\r\nbizagi.injector.register(\"bizagi.workportal.widgets.templates\", [\"workportalFacade\", \"dataService\", \"actionService\", \"casetoolbar\", \"usersCasesService\", \"actionsEventsService\",\"accumulatedcontext\", \"processActionService\", bizagi.workportal.widgets.templates]);","/*\r\n*   Name: BizAgi Workportal\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will define helper functions so the projects can customize via javascript some aspects for the UI appearance and some behaviours\r\n*/\r\nbizagi = (typeof (bizagi) !== \"undefined\") ? bizagi : {};\r\nbizagi.override = (typeof (bizagi.override) !== \"undefined\") ? bizagi.override : {};\r\n\r\n/*\r\n*   Allow to customize an url in the workportal\r\n*/\r\nbizagi.override.customWorkportalHandlers = {};\r\nbizagi.override.customizeWorkportalHandler = function(handler, newUrl) {\r\n\r\n\t// Redefine a handler to allow customization\r\n\tbizagi.override.customWorkportalHandlers[handler] = newUrl;\r\n};\r\n\r\nif (bizagi.workportal.services.context) {\r\n    bizagi.workportal.services.context.original = $.extend(true, {}, bizagi.workportal.services.context.prototype);\r\n\t$.extend(bizagi.workportal.services.context.prototype, {\r\n        getUrl: function (service) {\r\n            if (this.context == \"workportal\" && bizagi.override.customWorkportalHandlers[service]) {\r\n            \treturn bizagi.override.customWorkportalHandlers[service];\r\n            }\r\n        \treturn bizagi.workportal.services.context.original.getUrl.apply(this, arguments);\r\n        }\r\n    });\r\n}\r\n\r\n/*\r\n*   Allows to extend widget features by extending the postRender method and calling a custom calllback\r\n*/\r\nbizagi.override.customizeWorkportalWidget = function(widget, extensionMethod) {\r\n\tvar widgetImplementation = bizagi.workportal.desktop.facade.getWidgetImplementation(widget);\r\n\t\r\n    if (widgetImplementation) {\r\n\r\n    \t// Prototype modification\r\n    \teval(widgetImplementation).extend(widgetImplementation, { }, {\r\n    \t\t/*\r\n            *   Override postRender\r\n            */\r\n    \t\tpostRender: function() {\r\n    \t\t\tvar self = this;\r\n\r\n    \t\t\t// Call bizagi implementation\r\n    \t\t\tself._super();\r\n\r\n    \t\t\t// Call custom implementation\r\n    \t\t\tvar content = self.getContent();\r\n    \t\t\tif (extensionMethod) extensionMethod(this, content);\r\n    \t\t}\r\n    \t});\r\n    }\r\n};\r\n\r\n/*\r\n*   Allows to add custom menus to the main menu bar\r\n*/\r\nbizagi.override.customButtons = [];\r\nbizagi.override.addCustomMenuButton = function (button) {\r\n    bizagi.override.customButtons.push(button);\r\n};\r\n// Set an override to menu\r\nif (bizagi.workportal.controllers.menu) {\r\n    bizagi.workportal.controllers.menu.original = $.extend(true, {}, bizagi.workportal.controllers.menu.prototype);\r\n    $.extend(bizagi.workportal.controllers.menu.prototype, {\r\n        postRender: function () {\r\n            var self = this;\r\n            var customButtonTemplate = self.workportalFacade.getTemplate(\"menu.custom-button\");\r\n\r\n            // Render the menu\r\n            return $.when(bizagi.workportal.controllers.menu.original.postRender.apply(this, arguments))\r\n                .pipe(function (result) {\r\n                    var menuButtonContainer = $(\"[data-bizagi-component=menuItems]\", result);\r\n\r\n                    $.each(bizagi.override.customButtons, function (i, button) {\r\n                        \r\n                        if (typeof button.isAvailable == \"function\") {\r\n                            if (!button.isAvailable()) return;\r\n                        }\r\n                        var customButton = $.tmpl(customButtonTemplate, button);\r\n\r\n                        // Bind click handler\r\n                        if (button.submenu == null) {\r\n                            customButton.click(function () {\r\n                                if (button.click) button.click(self);\r\n                            });\r\n                        } else {\r\n                            customButton.click(function () {\r\n                                // Pops up the submenu\r\n                                self.renderSubMenu(customButton, button.submenu, button.click);\r\n                            });\r\n                        }\r\n\r\n                        menuButtonContainer.append(customButton);\r\n                    });\r\n\r\n                    return result;\r\n                });\r\n        }\r\n    });\r\n}\r\n\r\n/*\r\n*   Allows to add custom services\r\n*/\r\nbizagi.override.addDataService = function (functionName, fn) {\r\n    if (bizagi.workportal.services.service) {\r\n        bizagi.workportal.services.service.original = $.extend(true, {}, bizagi.workportal.services.service.prototype);\r\n        \r\n        // Create an extension object\r\n        var extensionObject = { };\r\n        extensionObject[functionName] = fn;\r\n\r\n        // Extend data service\r\n        $.extend(bizagi.workportal.services.service.prototype, extensionObject);\r\n    }\r\n};\r\n\r\n//TODO: How to customize project aspx or ashx without compilation","$.Class.extend(\"bizagi.ui.controls.tmplloader\", {}, {\r\n\r\n    init: function () {\r\n        this.templates = [];\r\n    },\r\n\r\n    loadTemplates: function (tmpls) {\r\n\r\n        var self = this;\r\n        var templatesMap = tmpls || {};\r\n\r\n        var defer = new $.Deferred();\r\n        var arrPromises = [];\r\n\r\n        $.each(templatesMap, function (key, template) {\r\n            var promise = self.loadTemplate(key, template);\r\n            arrPromises.push(promise);\r\n        });\r\n\r\n        $.when.apply($, arrPromises)\r\n                .done(function () {\r\n                    defer.resolve();\r\n                });\r\n\r\n        return defer.promise();\r\n    },\r\n\r\n    loadTemplate: function (name, path) {\r\n\r\n        var self = this;\r\n        var templates = self.templates;\r\n        var defer = new $.Deferred();\r\n\r\n        if (templates[name]) {\r\n            defer.resolve();\r\n        } else {\r\n            return bizagi.templateService.getTemplate(path)\r\n                    .done(function (tmpl) {\r\n                        templates[name] = tmpl;\r\n                    });\r\n        }\r\n        return defer.promise();\r\n    },\r\n\r\n    getTemplate: function (name) {\r\n\r\n        var self = this;\r\n        var templates = self.templates;\r\n\r\n        if (templates[name]) {\r\n            return templates[name];\r\n        } else {\r\n            return null;\r\n        }\r\n    }\r\n});\r\n","/**\r\n * Zoom plugin creates a drag and scroll control\r\n *\r\n * @author Andrés Fernando Muñoz\r\n */\r\n(function($) {\r\n\r\n\t$.widget(\"diagram.dragScroll\", {\r\n\t\toptions: {\r\n\t\t},\r\n\r\n\t\t_create: function() {\r\n\t\t\tvar self = this;\r\n\t\t\tvar options = this.options;\r\n\t\t\tvar clicked = false;\r\n\t\t\tself.curYPos = 0;\r\n\t\t\tself.curXPos = 0;\r\n\r\n\t\t\t$(self.element).css({\r\n\t\t\t\t'cursor': 'move'\r\n\t\t\t});\r\n\r\n\t\t\t$(self.element).bind(\"mousedown\",function(e){\r\n\t\t\t\tclicked = true;\r\n\r\n\t\t\t\tself.options.$scrollable.data({\r\n\t\t\t\t\t\"clicked\": clicked\r\n\t\t\t\t});\r\n\r\n\t\t\t\tself.curYPos = e.pageY;\r\n\t\t\t\tself.curXPos = e.pageX;\r\n\t\t\t\tself.scrollLeft = self.options.$scrollable.scrollLeft();\r\n\t\t\t\tself.scrollTop = self.options.$scrollable.scrollTop();\r\n\t\t\t\toptions.$scrollable.bind(\"mousemove\",function(e){\r\n\t\t\t\t\tif(clicked){\r\n\t\t\t\t\t\tself._move(e.pageX,e.pageY);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t});\r\n\r\n\t\t\t$(self.element).bind(\"mouseup\",function(e){\r\n\t\t\t\tclicked = false;\r\n\t\t\t\tself.options.$scrollable.data({\r\n\t\t\t\t\t\"clicked\": clicked\r\n\t\t\t\t});\r\n\t\t\t\toptions.$scrollable.unbind(\"mousemove\");\r\n\t\t\t});\r\n\r\n\r\n\t\t},\r\n\t\t/**\r\n\t\t * Moves the element\r\n\t\t * @param x, x axis differential\r\n\t\t * @param y, y axis differential\r\n\t\t * @private\r\n\t\t */\r\n\t\t_move: function(x,y){\r\n\t\t\tvar self = this;\r\n\t\t\tvar moveX = self.scrollLeft + self.curXPos - x;\r\n\t\t\tvar moveY = self.scrollTop + self.curYPos - y;\r\n\t\t\tif (moveX != 0 && moveY != 0){\r\n\t\t\t\tself.options.$scrollable.scrollTop(moveY);\r\n\t\t\t\tself.options.$scrollable.scrollLeft(moveX);\r\n\t\t\t}\r\n\r\n\t\t},\r\n\r\n\r\n\t\tdestroy: function() {\r\n\t\t\t// Call the base destroy function.\r\n\t\t\t$.Widget.prototype.destroy.call(this);\r\n\t\t}\r\n\t});\r\n})(jQuery);\r\n\r\n","/**\r\n * This file contains all keys that can be change the default functionality\r\n * of Bizagi, please use it carefully.\r\n *\r\n * @author Edward J Morales\r\n */\r\n\r\n\r\n// TODO: Please make a documentation for each override\r\n\r\n/**\r\n * Active folders functionality that is used in workportal inbox to create\r\n * categories of process\r\n *\r\n * @type {boolean}\r\n */\r\nbizagi.override.enableFolder = false;\r\n\r\n/**\r\n * Smart Folders are case repositories that meet certain filters.\r\n * Each smart folder can be associated with a filter, for example,\r\n * all files that have been registered as of a determined date.\r\n *\r\n * @type {boolean}\r\n */\r\nbizagi.override.enableSmartFolders = false;\r\n\r\n/**\r\n * This functionality allow a new tap within modal window of new case,\r\n * that create a shortcut to most used process\r\n *\r\n * @type {boolean}\r\n */\r\nbizagi.override.enableListOfRecentProcesses = false;\r\n\r\n\r\n/**\r\n * Unused key. The Author must be define what can do\r\n *\r\n * @type {boolean}\r\n */\r\nbizagi.override.enableCustomizeReports = false;\r\n\r\n/**\r\n * This key enable within admin menu a new item that will\r\n * open \"Multiple case reassigment\" module\r\n *\r\n * SNAKE-1296\r\n * @type {boolean}\r\n */\r\nbizagi.override.enableMultipleCasesReassigment = false;\r\n\r\n/**\r\n * This key enable within admin menu a new item thah will\r\n * open \"Async ECM Upload\" module\r\n *\r\n * DRAGON-152 Adidas\r\n * @type {boolean}\r\n */\r\nbizagi.override.enableAsyncECMUploadJobs = false;\r\n\r\n/**\r\n * This key enable the capability to print an edit form of a grid\r\n * @type {boolean}\r\n */\r\nbizagi.override.enablePrintFromEditForm = false;\r\n\r\n/**\r\n * This key can be allow debug window in release environments\r\n * @type {boolean}\r\n */\r\nbizagi.enableDebug = false;\r\n\r\n/**\r\n * This key disable old windows and enable new REST development\r\n * @type {boolean}\r\n */\r\n//bizagi.override.disableFrankenstein = (typeof BIZAGI_SERVICE_ACTIVATION !== \"undefined\" && BIZAGI_SERVICE_ACTIVATION) ? true : false;\r\n\r\n\r\n/**\r\n * Disable old query forms and enable new tier using REST services\r\n * @type {boolean}\r\n */\r\nbizagi.override.disableFrankensteinQueryForms = true;\r\n\r\n/**\r\n * Change default behavior of grid column sort\r\n * @type String\r\n * @example desc || asc\r\n */\r\n//bizagi.override.gridDefaultSortBy= \"desc\";\r\n\r\n/**\r\n * Expose interface to access to DOM elements\r\n * @type {boolean}\r\n */\r\nbizagi.override.enableE2EInterface = true;\r\n\r\n/**\r\n * Disable old inbox\r\n * @type {boolean}\r\n */\r\nbizagi.override.disableOldInbox = true;\r\n\r\n/**\r\n * Time out to remove elements that not will be used anymore\r\n * @type {number} Milliseconds\r\n */\r\nbizagi.override.disposeTime = 50;\r\n\r\n/**\r\n * Enable REST batch request functionality\r\n * @type {boolean}\r\n */\r\nbizagi.override.enableBatchRequest = true;\r\n\r\n/**\r\n * force all request that consume a REST through Web API will be sending in a batch request\r\n * @type {boolean}\r\n */\r\nbizagi.override.forceBatchRequest = false;\r\n\r\n/**\r\n * Security option to enable visualization of current assignee\r\n * @type {boolean}\r\n */\r\nbizagi.override.showAssignees = true;\r\n\r\n/**\r\n *\r\n * @type {boolean}\r\n */\r\nbizagi.override.enableMySearch = true;\r\n\r\n/**\r\n *\r\n * @type {boolean}\r\n */\r\nbizagi.override.enableSecurityCaseDashBoard = false;\r\n\r\n/**\r\n * Show classic view(Sub levels of application and entities)\r\n * @type {boolean}\r\n */\r\nbizagi.override.enableQueriesClassicMenu = false;\r\n\r\n/**\r\n * disable cancel cases functionality in manage cases and hide the Cancel cases tab in Admin cases\r\n * @type {boolean}\r\n */\r\nbizagi.override.disableAbortCases = false;\r\n\r\n\r\n\r\n/**\r\n * Enable \"plus icon\" on inbox, and load Adhoc Process module\r\n * @type {boolean}\r\n */\r\nbizagi.override.enableAdhocProcess = false;\r\n\r\n/**\r\n * Enable \"BCC/CC\" feature for Notification Task on Live Processes\r\n * @type {boolean}\r\n */\r\nbizagi.override.enableCCBCCFeatureOnLiveProcesses = true;\r\n\r\n/**\r\n * Enable \"Review Mode\" feature on Live Processes\r\n * @type {boolean}\r\n */\r\nbizagi.override.enableReviewModeFeatureOnLiveProcesses = true;\r\n\r\n/**\r\n * Enable \"Filter by process grouo\" feature on Live Processes\r\n * @type {boolean}\r\n */\r\nbizagi.override.enableFilterByProcessGroupOnLiveProcesses = false;\r\n\r\n/**\r\n * Enable \"Support localization in the process modeler\" feature on Live Processes\r\n * @type {boolean}\r\n */\r\nbizagi.override.enableLocalizationInModelerOnLiveProcesses = true;\r\n\r\n/**\r\n * Enable \"Support predefined performers in the process modeler\" feature on Live Processes\r\n * @type {boolean}\r\n */\r\nbizagi.override.enablePredefinedPerformersOnLiveProcesses = true;\r\n\r\n\r\n/**\r\n * Enable \"Show timeline icon in inbox\" feature on Workportal\r\n * @type {boolean}\r\n */\r\nbizagi.override.enableFeatureShowTimelineButton = true;\r\n\r\n/**\r\n * Enable \"Display Options\" feature on Workportal\r\n * @type {boolean}\r\n */\r\nbizagi.override.enableFeatureDisplayOptions = false;\r\n\r\n/**\r\n * Enable \"Mazimize Modals\" option inside  \"Display Options\" feature on Workportal\r\n * @type {boolean}\r\n */\r\nbizagi.override.enableMaximizeModalsOption = false;\r\n\r\n/**\r\n * Enable \"Start Page\" option inside  \"Display Options\" feature on Workportal\r\n * @type {boolean}\r\n */\r\nbizagi.override.enableStartPageDisplayOption = false;\r\n\r\n/**\r\n * Enable \"Ping to Server\" feature on Workportal\r\n * @type {boolean}\r\n */\r\nbizagi.override.enablePing = false;\r\n\r\n/**\r\n* Use multiaction implementation for get ECM metadata\r\n* @type {boolean}\r\n*/\r\nbizagi.override.enableECMMetadataMultiaction = true;\r\n\r\n /* Validate the form before than buttons' actions\r\n */\r\nbizagi.override.validateGridsOnButtonClick = false;\r\n\r\n/* Enable custom formats form\r\n */\r\nbizagi.override.enableCustomFormats = false;\r\n\r\n/* Enable share activity\r\n */\r\nbizagi.override.enableShareActivity = true;\r\n\r\n/* \r\n * Enable format in Money type column in the queries results\r\n */\r\nbizagi.override.enableFormatMoneyColumnQueryResult = true;\r\n\r\n/*\r\n * Refresh grid parent of cell when there are expressions on visible property\r\n */\r\nbizagi.override.enableGridRefreshAfterCellRefresh = false;\r\n\r\n/**\r\n * Show the QR mobile in user menu\r\n */\r\nbizagi.override.showQrMobileMenu = true;\r\n\r\n/**\r\n * Allow execution action before to refresh (DFAS Feature)\r\n */\r\nbizagi.override.enableExecuteRefreshAction = true;\r\n","\r\n/**\r\n *   Name: Bizagi Workportal Desktop Dashboard Controller\r\n *   Author: Mauricio Sánchez - Alexander Mejia\r\n */\r\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.dashboard\", {\r\n\r\n    data: {\r\n        \"home\": [{\r\n            type: \"cases\",\r\n            title: \"workportal-widget-dashboard-cases\",\r\n            items: [{\r\n                \"title\": \"workportal-widget-dashboard-pendings-title\",\r\n                \"iconclass\": \"pendings-ico\",\r\n                \"icon\": \"watch-pending-outline\",\r\n                \"data\": \"pendings\"\r\n            }, {\r\n                \"title\": \"workportal-widget-dashboard-favorites-title\",\r\n                \"iconclass\": \"star-ico\",\r\n                \"icon\": \"star\",\r\n                \"data\": \"following\"\r\n            }]\r\n        }]\r\n    }\r\n\r\n}, {\r\n    /**\r\n     *   Constructor\r\n     */\r\n    init: function(workportalFacade, dataService, params) {\r\n        var self = this;\r\n\r\n        // Call base\r\n        self._super(workportalFacade, dataService, params);\r\n\r\n        //Load templates\r\n        self.loadTemplates({\r\n            \"dashboard\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.dashboard\").concat(\"#dashboard-wrapper\")\r\n        });\r\n    },\r\n\r\n    /**\r\n     * Renders the template defined in the widget\r\n     */\r\n    renderContent: function() {\r\n        var self = this,\r\n            template;\r\n\r\n        template = self.getTemplate(\"dashboard\");\r\n        self.content = template.render(self.getData());\r\n\r\n        return self.content;\r\n\r\n    },\r\n\r\n    /**\r\n     * returns data\r\n     */\r\n    getData: function() {\r\n        var self = this,\r\n            result = {},\r\n            data = self.Class.data;\r\n\r\n\r\n        var content = data.home.slice(0);\r\n\r\n        result.home = $.map(content, function(item) {\r\n            item.title = bizagi.localization.getResource(item.title);\r\n            for (var i = 0, l = item.items.length; i < l; i++) {\r\n                item.items[i].title = bizagi.localization.getResource(item.items[i].title);\r\n            }\r\n            return item;\r\n        });\r\n\r\n        return result;\r\n\r\n    },\r\n\r\n    /**\r\n     * links events with handlers\r\n     */\r\n    postRender: function() {\r\n        var self = this,\r\n            $content = self.getContent();\r\n\r\n        $content.closest(\".wdg-dash-board\").on(\"click\", \".wdg-db-card\", $.proxy(self.onShowCases, self));\r\n        $(window).trigger(\"resize\");\r\n    },\r\n\r\n    /**\r\n     *\r\n     */\r\n    clean: function() {\r\n        var self = this,\r\n            $content = self.getContent();\r\n\r\n        if ($content) {\r\n            $content.closest(\".wdg-dash-board\").off(\"click\", \".wdg-db-card\");\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Shows the cases related to action clicked\r\n     */\r\n    onShowCases: function(ev) {\r\n        var self = this,\r\n            $target = $(ev.target),\r\n            $route = $target.closest(\".wdg-db-card\").data(\"route\");\r\n\r\n        var $title = $target.closest(\".wdg-db-card\").find(\".wdg-db-title\");\r\n\r\n        self.pub(\"notify\", {\r\n            type: \"CASES-TEMPLATE-VIEW\",\r\n            args: {\r\n                histName: $.trim($title.text()),\r\n                page: 1,\r\n                level: 2,\r\n                route: $route,\r\n                idworkflow: \"\"\r\n            }\r\n        });\r\n    }\r\n});\r\nbizagi.injector.register(\"bizagi.workportal.widgets.dashboard\", [\"workportalFacade\", \"dataService\", bizagi.workportal.widgets.dashboard]);\r\n","/**\r\n * Bizagi Workportal Desktop Stuff Controller\r\n * @author Alexander Mejia\r\n */\r\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.stuff\", {}, {\r\n\t/**\r\n\t * Constructor\r\n\t * @param workportalFacade\r\n\t * @param dataService\r\n\t * @param accumulatedcontext\r\n\t * @param params\r\n\t */\r\n\tinit: function(workportalFacade, dataService, accumulatedcontext, params) {\r\n\t\tvar self = this;\r\n        self.accumulatedcontext = accumulatedcontext;\r\n\r\n\t\t// Call base\r\n\t\tself._super(workportalFacade, dataService, params);\r\n\t\t//Load templates\r\n\t\tself.loadTemplates({\r\n\t\t\t\"stuff\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.stuff\").concat(\"#stuff-wrapper\")\r\n\t\t});\r\n\t},\r\n\t/**\r\n\t * Renders the template defined in the widget\r\n\t * @return {*}\r\n\t */\r\n\trenderContent: function() {\r\n\t\tvar self = this;\r\n\t\tvar template = self.getTemplate(\"stuff\");\r\n\r\n        return $.when(self.getData()).done(function(data) {\r\n            self.content = data.collections.length > 0 ? template.render(data) : \"\";\r\n            return self.content;\r\n        });\r\n\t},\r\n\t/**\r\n\t * links events with handlers\r\n\t */\r\n\tpostRender: function() {\r\n\t\tvar self = this;\r\n\t\tvar $content = self.getContent();\r\n\r\n\t\t$('.wdg-stf-card', $content).on(\"click\", $.proxy(self.onClickEntity, self));\r\n\t\tself.sub('TEMPLATEENGINE-VIEW', $.proxy(self.selectItem, self));\r\n\t},\r\n    /**\r\n     *\r\n     * @returns {*}\r\n     */\r\n    getData: function() {\r\n        var self = this;\r\n\r\n        return $.when(self.dataService.getUserStuff({icon:true})).then(function(data) {\r\n            data = self.buildModel(data) || {};\r\n            return {\r\n                title: bizagi.localization.getResource(\"workportal-widget-dashboard-stuff\"),\r\n                collections: data\r\n            };\r\n        });\r\n    },\r\n    /**\r\n     * Add style to the selected item\r\n     */\r\n\tselectItem: function () {\r\n\t    var self = this;\r\n\t\t$('.wdg-stf-card', self.content).removeClass('wdg-stf-selected');\r\n\t    $(\"#\" + arguments[1].args.reference, self.content).addClass('wdg-stf-selected');\r\n\t},\r\n\t/**\r\n\t * Holds a refence to each collection\r\n\t * @param data\r\n\t * @return {Array}\r\n\t */\r\n\tbuildModel: function(data) {\r\n        var self = this;\r\n\t\tvar collections = {};\r\n        var items = [];\r\n        data = data || {};\r\n\t\tself.model = {};\r\n\r\n\t\tfor (var i = 0, lf = data.length; i < lf; i++) {\r\n\t\t\tvar item = data[i];\r\n\t\t\titem.guid = Math.guid();\r\n\t\t\tcollections[item.guid] = item;\r\n\t\t\titems.push(item);\r\n\t\t}\r\n\r\n\t\tself.model.collections = collections;\r\n\r\n\t\treturn items;\r\n\t},\r\n\t/**\r\n\t * Raises the execution of templates for the entity selected\r\n\t * @param ev\r\n\t */\r\n\tonClickEntity: function(ev) {\r\n\t\tvar self = this;\r\n\t\tvar target = $(ev.target).closest('.wdg-stf-card');\r\n\t\tvar item = self.model.collections[target.data('guid')];\r\n\t\tvar args = {\r\n            calculateFilters: true,\r\n            filters: [],\r\n            fromActionLauncher: false,\r\n            histName: target.data('title') || item.displayName,\r\n            level: 1,\r\n            page: 1,\r\n            reference: item.reference,\r\n            referenceType: item.referenceType,\r\n            surrogateKey: item.surrogateKey\r\n\t\t};\r\n\r\n        if (typeof item.entityId !== \"undefined\" && item.entityId) {\r\n            args.guidEntityCurrent = item.entityId;\r\n        }\r\n        if (typeof item.xpath !== \"undefined\" && item.xpath) {\r\n            args.xpath = item.xpath;\r\n        }\r\n\r\n\t\tself.accumulatedcontext.clean();\r\n\r\n\t\tself.pubDeadLockDetection(\"notify\", {type: \"TEMPLATEENGINE-VIEW\", args: args});\r\n\t},\r\n\t/**\r\n\t *  Detach events linked\r\n\t */\r\n\tclean: function() {\r\n\t\tvar self = this;\r\n\t\tvar $content = self.getContent();\r\n\r\n\t\tif($content) {\r\n\t\t\t$('.wdg-stf-card', $content).off('click');\r\n\t\t\tself.unsub('TEMPLATEENGINE-VIEW');\r\n\t\t}\r\n\t}\r\n});\r\n\r\nbizagi.injector.register('bizagi.workportal.widgets.stuff', ['workportalFacade', 'dataService', 'accumulatedcontext', bizagi.workportal.widgets.stuff]);","/*\r\n *   Name: Bizagi Workportal Desktop Project Base\r\n *   Author: David Romero Estrada\r\n */\r\n\r\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.project.base\", {}, {\r\n\r\n    /*\r\n    * Initilize\r\n    */\r\n    init: function (workportalFacade, dataService, params) {\r\n\r\n        var self = this;\r\n        params = params || {};\r\n        self.differenceMillisecondsServer = params.differenceMillisecondsServer;\r\n        self.uploadMaxFilesSize = bizagi.currentUser.uploadMaxFileSize;\r\n        self.supportFileExt = [\r\n            \".jpg\",\r\n            \".pdf\",\r\n            \".txt\",\r\n            \".png\",\r\n            \".pptx\",\r\n            \".docx\",\r\n            \".gif\",\r\n            \".rtfx\",\r\n            \".xlsx\",\r\n            \".zip\",\r\n            \".rar\"\r\n        ];\r\n\r\n        // Set radNumber\r\n        self.radNumber = params.radNumber;\r\n\r\n        // Call base\r\n        self._super(workportalFacade, dataService, params);\r\n    },\r\n\r\n    renderContent: function () {\r\n        var self = this;\r\n        \r\n        if (!self.differenceMillisecondsServer) {\r\n            return $.when(self.dataService.getDateServer()).done(function (response) {\r\n                self.differenceMillisecondsServer = bizagi.util.dateFormatter.getDifferenceBetweenDates(new Date(), new Date(response.date), \"milliseconds\");\r\n            });\r\n        }\r\n    },\r\n    /*\r\n    * Calculate Server Date\r\n    */\r\n    getDateServer: function () {\r\n\r\n        var dateLocal = new Date();\r\n        \r\n        return dateLocal.getTime() + this.differenceMillisecondsServer;\r\n    },\r\n\r\n    mergePropertiesActivitiesWithWorkitems: function(activities, workItems){\r\n        activities.forEach(function(activity){\r\n            var workItemFilter = workItems.filter(function(workItem){\r\n                return workItem.guidActivity === activity.id;\r\n            });\r\n            if(workItemFilter.length > 0){\r\n                $.extend(activity, {\r\n                    startDate: workItemFilter[0].wiEntryDate || null,\r\n                    finishDate: workItemFilter[0].wiSolutionDate || null,\r\n                    idWorkItem: workItemFilter[0].idWorkItem,\r\n                    workItemState: workItemFilter[0].workItemState,\r\n                    idCase: workItemFilter[0].idCase,\r\n                    estimatedFinishDate: workItemFilter[0].wiEstimatedSolutionDate || activity.estimatedFinishDate\r\n                });\r\n            }\r\n        });\r\n    }\r\n\r\n\r\n});\r\n\r\nbizagi.injector.register(\"bizagi.workportal.widgets.project.base\", [\"workportalFacade\", \"dataService\", bizagi.workportal.widgets.project.base], true);","/*\r\n *   Name: Bizagi Workportal Desktop descontextualized plans Controller\r\n *   Author: Iván Ricardo Taimal Narváez\r\n */\r\n\r\nbizagi.workportal.widgets.widget.extend('bizagi.workportal.widgets.decontextualized.plans', {\r\n    data: {\r\n        title: 'workportal-widget-dashboard-decontextualized-plans-title',\r\n        items: [\r\n            {\r\n                'title': 'workportal-widget-dashboard-decontextualized-plans-pendings-title',\r\n                'description': 'workportal-widget-dashboard-decontextualized-plans-pendings-description',\r\n                'iconclass': 'star-ico',\r\n                'icon': 'pending',\r\n                'data': 'PENDING'\r\n            },\r\n            {\r\n                'title': 'workportal-widget-dashboard-decontextualized-plans-running-title',\r\n                'description': 'workportal-widget-dashboard-decontextualized-plans-running-description',\r\n                'iconclass': 'star-ico',\r\n                'icon': 'executing',\r\n                'data': 'EXECUTING'\r\n            },\r\n            {\r\n                'title': 'workportal-widget-dashboard-decontextualized-plans-completed-title',\r\n                'description': 'workportal-widget-dashboard-decontextualized-plans-completed-description',\r\n                'iconclass': 'star-ico',\r\n                'icon': 'closed',\r\n                'data': 'CLOSED'\r\n            }\r\n        ]\r\n    }\r\n}, {\r\n    /**\r\n     *   Constructor\r\n     * @param workportalFacade\r\n     * @param dataService\r\n     * @param params\r\n     */\r\n    init: function (workportalFacade, dataService, params) {\r\n        var self = this;\r\n\r\n        // Call base\r\n        self._super(workportalFacade, dataService, params);\r\n\r\n        //Load templates\r\n        self.loadTemplates({\r\n            'decontextualized.plans': bizagi.getTemplate('bizagi.workportal.desktop.widget.decontextualized.plans').concat('#plans-wrapper')\r\n        });\r\n    },\r\n\r\n    /**\r\n     * Renders the template defined in the widget\r\n     * @return {*}\r\n     */\r\n    renderContent: function () {\r\n        var self = this,\r\n            template,\r\n            data,\r\n            filteredData = {};\r\n        template = self.getTemplate(\"decontextualized.plans\");\r\n\r\n        if(bizagi.menuSecurity.Plans){\r\n            data = self.getData();\r\n            filteredData.title = data.title;\r\n            self.content = template.render(data);\r\n        }\r\n        else{\r\n            self.content = $(\"<div></div>\")\r\n        }\r\n\r\n        return self.content;\r\n    },\r\n\r\n    /**\r\n     * links events with handlers\r\n     */\r\n    postRender: function () {\r\n        var self = this,\r\n            $content = self.getContent();\r\n        $.when(self.getServerDateDifference()).then(function (resolveGetDateServer) {});\r\n        $('.wdg-plans-card', $content).on('click', $.proxy(self.onClickCard, self));\r\n    },\r\n\r\n    /**\r\n     * Gets data, Fact entities related with stakeholders\r\n     * @return {{}}\r\n     */\r\n    getData: function () {\r\n        var self = this,\r\n            result = {},\r\n            data = self.Class.data;\r\n        result.items = $.map(data.items, function (item) {\r\n            item.title = bizagi.localization.getResource(item.title);\r\n            item.description = bizagi.localization.getResource(item.description);\r\n            return item;\r\n        });\r\n        result.title = bizagi.localization.getResource(data.title);\r\n        return result;\r\n    },\r\n\r\n\r\n    /**\r\n     * Raises the execution of templates for the entity selected\r\n     * @param ev\r\n     */\r\n    onClickCard: function (ev) {\r\n        var self = this,\r\n            target = $(ev.target).closest('.wdg-plans-card'),\r\n            title = target.data('title'),\r\n            data = target.data('data');\r\n        var args = {\r\n            histName: title,\r\n            planState: data,\r\n            flowContext: 'FLOW-DECONTEXTUALIZED-PLANS',\r\n            isOpen: true,//TODO  fix state for decontextualized plans,\r\n            level:1\r\n        };\r\n        self.pub('notify', {\r\n            type: 'PLANS-VIEW',\r\n            args: $.extend(self.params,args)\r\n        });\r\n    },\r\n\r\n    /**\r\n     *\r\n     * @returns {*}\r\n     */\r\n    getServerDateDifference: function () {\r\n        var self = this;\r\n        return self.dataService.getDateServer().done(function (response) {\r\n            self.params.differenceMillisecondsServer = bizagi.util.dateFormatter.getDifferenceBetweenDates(new Date(), new Date(response.date), 'milliseconds');\r\n        });\r\n    },\r\n\r\n    /**\r\n     * Detach events linked\r\n     */\r\n    clean: function () {\r\n        var self = this,\r\n           $content = self.getContent();\r\n\r\n        if ($content) {\r\n            $('.wdg-plans-card', $content).off('click');\r\n        }\r\n    }\r\n});\r\n\r\nbizagi.injector.register('bizagi.workportal.widgets.decontextualized.plans', ['workportalFacade', 'dataService', bizagi.workportal.widgets.decontextualized.plans]);\r\n","/**\r\n *   Name: Bizagi Workportal Desktop Navigator Controller\r\n *   Author: Mauricio Sánchez - Alexander Mejia\r\n */\r\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.navigator\", {}, {\r\n    /**\r\n     *   Constructor\r\n     */\r\n    init: function (workportalFacade, dataService, accumulatedcontext, params) {\r\n        var self = this;\r\n        // Call base\r\n        self._super(workportalFacade, dataService, params);\r\n        self.flagDisplayDate = true;\r\n        self.printFormCommand = new bizagi.workportal.command.printform(self.workportalFacade);\r\n        self.fromClickBreadCrumb = false;\r\n        self.showReleaseButton = false;\r\n        self.caseLink = params.caseLink;\r\n        self.taskOptionsWidget = new bizagi.workportal.widgets.task.options(workportalFacade, dataService, params);\r\n        //Load templates\r\n        self.loadTemplates({\r\n            \"navigator\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.navigator\").concat(\"#navigator-wrapper\"),\r\n            \"child\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.navigator\").concat(\"#navigator-child\"),\r\n            \"popup-release\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.navigator\").concat(\"#navigator-popup-release\")\r\n        });\r\n        self.accumulatedcontext = accumulatedcontext;\r\n\r\n        self.releaseDialogBox = {}\r\n    },\r\n\r\n    /**\r\n     * Renders the template defined in the widget\r\n     */\r\n    renderContent: function () {       \r\n        var self = this;\r\n        var template = self.getTemplate(\"navigator\");\r\n        self.content = template.render($.extend(self.getDataObj(), {security: bizagi.menuSecurity}));\r\n        bizagi.navigator = bizagi.navigator || { info: {} };\r\n        self.info = bizagi.navigator.info;\r\n        self._level = Object.keys(self.info).length - 1;\r\n        $(\".navbar-print\", self.content).on(\"click\", $.proxy(self.printCase, self));\r\n        $(\".navbar-back\", self.content).on(\"click\", $.proxy(self.goToBack, self));\r\n        $(\".navbar-assignation-everyone > .ae-action\", self.content).on(\"click\", $.proxy(self.actionButtonEvent, self));\r\n        self.releaseDialogBox.formContent = self.getTemplate(\"popup-release\").render({});\r\n\r\n        return self.content;\r\n    },\r\n    /**\r\n     * links events with handlers\r\n     */\r\n    postRender: function () {\r\n        var self = this;\r\n        var content = self.getContent();\r\n        var $container = content.find(\"ul\");\r\n        self.sub(\"NAVIGATE\", $.proxy(self.refresh, self));\r\n        self.sub(\"UPDATE_LASTCRUMBPARAMS_INFO\", $.proxy(self.updateLastCrumbParamsInfo, self));\r\n        self.sub(\"NAVIGATOR_GETLEVEL\", function(){\r\n            return self.getLevel();\r\n        });\r\n        self.sub(\"NAVIGATOR_BACK\", $.proxy(self.goToPreviousCrumb, self));\r\n        $container.on(\"click\", \"li\", $.proxy(self.crumbEvent, self));\r\n\r\n        self.plugins = {};\r\n        self.plugins.popupRelease = {\r\n            form: {\r\n                buttonAccept: $(\"#button-accept-release\", self.releaseDialogBox.formContent),\r\n                buttonCancel: $(\"#button-cancel-release\", self.releaseDialogBox.formContent)\r\n            }\r\n        };\r\n\r\n        self.plugins.popupRelease.form.buttonAccept.on(\"click\", $.proxy(self.onClickAcceptRelease, self));\r\n        self.plugins.popupRelease.form.buttonCancel.on(\"click\", $.proxy(self.onClickCancelRelease, self));\r\n        //Notification service\r\n        self.notifier = bizagi.injector.get('notifier');\r\n    },\r\n\r\n    getBreadCrumbInfo: function () {\r\n        return bizagi.navigator.info;\r\n    },\r\n\r\n    setBreadCrumbInfo: function (info) {\r\n        bizagi.navigator.info = info\r\n    },\r\n\r\n    drawBreadCrumb: function (breadCrumbInfo, showSteps) {\r\n        var self = this;\r\n        var template = self.getTemplate(\"navigator\");\r\n        $(self.content).find(\"ul\").html('');\r\n        if (showSteps) {\r\n            for (var i = -1; i < Object.keys(breadCrumbInfo).length - 1; i += 1) {\r\n                var crumbItem = breadCrumbInfo[i];\r\n                crumbItem.surrogateKey = i;\r\n                var crumbContent = self.drawCrumb(crumbItem);\r\n                $(self.content).find(\"ul\").append(crumbContent);\r\n            }\r\n        }\r\n    },\r\n\r\n    drawCrumb: function (itemCrumb) {\r\n        var self = this;\r\n        var name = itemCrumb.args.histName;\r\n        var isPrincipalHome = false;\r\n        var template = self.getTemplate(\"child\");\r\n        var child = template.render({\r\n            surrogateKey: itemCrumb.surrogateKey,\r\n            name: name,\r\n            isPrincipalHome: isPrincipalHome\r\n        });\r\n        return child;\r\n    },\r\n    crumbEvent: function (event) {\r\n        var self = this;\r\n        var itemCrumb = self.info[$(event.target).data(\"surrogatekey\")];\r\n        self.goToCrumb(itemCrumb, event);\r\n    },\r\n\r\n    goToCrumb: function (crumb, event) {\r\n        var self = this;\r\n        if (crumb) {\r\n            var args = crumb.args;\r\n            var skipRefresh = false;\r\n            var contextActivity = this.getParentContext(crumb.context);\r\n            if (contextActivity == \"TEMPLATEENGINE-VIEW\" || contextActivity == \"SEARCH-ENGINE-VIEW\") {\r\n                skipRefresh = true;\r\n                if(event && event.target){\r\n                    var index = parseInt($(event.target).data(\"surrogatekey\"), 10) + 1;\r\n                    self.accumulatedcontext.cutContext(index);\r\n                }\r\n            }\r\n            this.deleteRemainingCrumbs(crumb);\r\n            self.pub(\"notify\", {\r\n                skipRefresh: skipRefresh,\r\n                type: contextActivity,\r\n                args: $.extend(args, { showContextByMenuDashboard: contextActivity })\r\n            });\r\n        }\r\n    },\r\n\r\n    goToPreviousCrumb: function () {\r\n        var self = this;\r\n        var pathSize = Object.keys(self.info).length;\r\n        var crumbBack = self.info[pathSize - 3];\r\n        if (!crumbBack) {\r\n            crumbBack = self.info[pathSize - 2];\r\n        }\r\n        self.goToCrumb(crumbBack);\r\n    },\r\n\r\n    deleteRemainingCrumbs: function (itemCrumb) {\r\n        var self = this;\r\n        $.each(self.info, function (key, crumbItem) {\r\n            if (itemCrumb.surrogateKey < parseInt(key, 10)) {\r\n                delete self.info[key];\r\n            }\r\n        });\r\n    },\r\n\r\n    getParentContext: function (context) {        \r\n        if (context === \"OVERVIEW\" || context === \"COMMENTS\" || context === \"FILES\" || context === \"TIMELINE\") {\r\n            return \"ACTIVITY\";\r\n        }\r\n        else if (context === \"ACTIVITYPLANOVERVIEW\" || context === \"ACTIVITYPLANCOMMENTS\" || context === \"ACTIVITYPLANFILES\" || context === \"ACTIVITYPLANTIMELINE\") {\r\n            return \"ACTIVITYPLAN\";\r\n        }\r\n        else if (context === \"PLANSIDEBAR\" || context === \"EDITACTIVITY\" || context === \"PLANACTIVITIES\" || context === \"PLANCOMMENTS\" || context === \"PLANFILES\" || context === \"PLANTIMELINE\") {\r\n            return \"PLANACTIVITIES\";\r\n        }\r\n        return context;\r\n    },\r\n\r\n    resetBreadCrumb: function (params) {\r\n        var self = this;\r\n        self.info = {};\r\n        self.info[-1] = self.copyDataObjectWithoutReference(params);\r\n    },\r\n\r\n    updateInfo: function (params) {\r\n        var self = this;\r\n        var pathSize = Object.keys(self.info).length;\r\n        if(params.args.level && params.args.level < pathSize && params.args.level > 0){\r\n            for(var j = params.args.level - 1; j < pathSize - 1; j += 1){\r\n                delete self.info[j];\r\n            }\r\n            pathSize = params.args.level;\r\n        }\r\n\r\n        var lastCrumb = self.info[pathSize - 2];\r\n        var secondLastCrumb = self.info[pathSize - 3];\r\n        if (params.context == \"HOME\" || (params.context === \"SEARCH-ENGINE-VIEW\" && typeof params.args.reference === \"undefined\")) {//reset breadCrumb\r\n            this.resetBreadCrumb(params);//clean breadcrumb and add new item with entity name\r\n        }\r\n        else if (params.context == \"ACTIVITY\" || params.context == \"ACTIVITYPLAN\") {\r\n            if (secondLastCrumb && self.getParentContext(params.context) == self.getParentContext(secondLastCrumb.context)) {\r\n                self.cleanBreadCumb(secondLastCrumb, params, 3);\r\n            } else if (lastCrumb && self.getParentContext(params.context) == self.getParentContext(lastCrumb.context)) {\r\n                self.cleanBreadCumb(lastCrumb, params, 2);\r\n            } else {\r\n                self.info[pathSize - 1] = self.copyDataObjectWithoutReference(params);\r\n            }\r\n        }\r\n        else if (params.context == \"TEMPLATEENGINE-VIEW\" || params.context === \"SEARCH-ENGINE-VIEW\") {\r\n            var firstCrumb = self.info[-1];\r\n            if (firstCrumb && firstCrumb.context != \"TEMPLATEENGINE-VIEW\" &&\r\n                firstCrumb.context != \"SEARCH-ENGINE-VIEW\" &&\r\n                firstCrumb.context != \"HOME\") {\r\n                self.info = {};\r\n                pathSize = Object.keys(self.info).length;\r\n                lastCrumb = null;\r\n            }\r\n            if (params.args.referenceType == \"FACT\" || params.args.referenceType == \"VIRTUAL\") {\r\n                var factCrumbItem = self.hasGuidEntityInBreadCrumb(params.args.guidEntityCurrent);\r\n                var newFactCrumbItem = self.copyDataObjectWithoutReference(params);\r\n                if (params.args.level == 1) {\r\n                    self.info = {};\r\n                    self.info[-1] = newFactCrumbItem;\r\n                }\r\n                else if (lastCrumb && lastCrumb.args && lastCrumb.args.level == params.args.level) {\r\n                    self.cleanBreadCumb(lastCrumb, params, 2);\r\n                }else if (!factCrumbItem){\r\n                    self.info[pathSize - 1] = newFactCrumbItem;\r\n                }else{\r\n                    newFactCrumbItem.surrogateKey = factCrumbItem.surrogateKey;\r\n                    self.info[newFactCrumbItem.surrogateKey] = newFactCrumbItem;\r\n                    self.deleteRemainingCrumbs(newFactCrumbItem);\r\n                }\r\n            } else  if(params.args.referenceType == \"ENTITY\"){\r\n                if(params.args.eventType != \"DATA-NAVIGATION\" && !self.hasXpathInBreadCrumb(params.args.xpath) ){\r\n                    self.info[pathSize - 1] = self.copyDataObjectWithoutReference(params);\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            if (lastCrumb && self.getParentContext(params.context) == self.getParentContext(lastCrumb.context)) {\r\n                self.cleanBreadCumb(lastCrumb, params, 2);\r\n            } else {\r\n                self.info[pathSize - 1] = self.copyDataObjectWithoutReference(params);\r\n            }\r\n        }\r\n        self.setBreadCrumbInfo(self.info);\r\n    },\r\n\r\n    updateLastCrumbParamsInfo: function (event, params){\r\n        var self = this;\r\n        var pathSize = Object.keys(self.info).length;\r\n        if(pathSize > 0){\r\n            $.extend(self.info[pathSize - 2].args, self.copyDataObjectWithoutReference(params.args));\r\n        }\r\n    },\r\n\r\n    hasXpathInBreadCrumb: function (xpath) {\r\n        var self = this;\r\n        for (var i = -1; i < Object.keys(bizagi.navigator.info).length - 1; i += 1) {\r\n            var crumbItem = bizagi.navigator.info[i];\r\n            if (crumbItem.args.xpath == xpath) {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    },\r\n\r\n   hasGuidEntityInBreadCrumb: function (guidEntity){\r\n       var self = this;\r\n       for (var i = -1; i < Object.keys(bizagi.navigator.info).length - 1; i += 1) {\r\n           var crumbItem = bizagi.navigator.info[i];\r\n           if (crumbItem.args.guidEntityCurrent == guidEntity) {\r\n               return crumbItem;\r\n           }\r\n       }\r\n       return false;\r\n   },\r\n\r\n    cleanBreadCumb: function (crumb, params, steps) {\r\n        var self = this;\r\n        var pathSize = Object.keys(self.info).length;\r\n        crumb = self.copyDataObjectWithoutReference(params);\r\n        self.info[pathSize - steps] = crumb;\r\n        this.deleteRemainingCrumbs(crumb);\r\n    },\r\n\r\n    drawDateNavigator: function (params) {\r\n        var self = this;\r\n        var currentLevel = Object.keys(self.info).length;\r\n        var showDateNavigator = (currentLevel == 1);\r\n        if (params.args.showDateNavigator === false) {\r\n            showDateNavigator = false;\r\n        }\r\n        self.onDisplayDate(showDateNavigator);\r\n    },\r\n\r\n    //Events for recalculate width of home-navbar (back, print, etc.)\r\n    recalculateHomeNavbar: function (params) {\r\n        var self = this;\r\n        if (params.context != \"TEMPLATEENGINE-VIEW\" || params.context != \"SEARCH-ENGINE-VIEW\") {\r\n            self.setWidthToNavigationPanel();\r\n            $(window).resize(function () {\r\n                self.setWidthToNavigationPanel();\r\n            });\r\n            self.subscribe(\"openCloseSidebar\", function () {\r\n                self.setWidthToNavigationPanel();\r\n            });\r\n            if(params.context == \"HOME\"){\r\n                $(\"#ui-bizagi-wp-project-homeportal-main\").addClass(\"disabled-right-sidebar\");\r\n                $(\"#ui-bizagi-wp-project-homeportal-main\").removeClass(\"enabled-right-sidebar\");\r\n            }\r\n        }\r\n    },\r\n\r\n    setWidthToNavigationPanel: function(){\r\n        var self = this;\r\n        var navigationPanel = self.content.parent();\r\n        var isFromModal= navigationPanel.parents(\"#dialognavdata-frame\").length > 0;\r\n        var panelWidth =  $(navigationPanel).width() + (isFromModal ? 0:60);\r\n        $(self.content, navigationPanel).width(panelWidth);\r\n    },\r\n\r\n    setEnabledLeftSidebar: function (params) {\r\n        var self = this;\r\n        if (params.data && params.data.belongs) {\r\n            if (params.data.belongs.toLeftSidebarCD) {\r\n                $(\"#ui-bizagi-wp-project-homeportal-main\").addClass(\"enabledLeftSidebar\");\r\n            }\r\n            else {\r\n                $(\"#ui-bizagi-wp-project-homeportal-main\").removeClass(\"enabledLeftSidebar\");\r\n            }\r\n        }\r\n    },\r\n\r\n    setEnabledRightSidebar: function (params) {\r\n        var self = this;\r\n        if (params.data && params.data.belongs) {\r\n            if (params.data.belongs.toRightSidebarCD) {\r\n                $(\"#ui-bizagi-wp-project-homeportal-main\").removeClass(\"disabled-right-sidebar\");\r\n                $(\"#ui-bizagi-wp-project-homeportal-main\").addClass(\"enabled-right-sidebar\");\r\n            }\r\n            else {\r\n                $(\"#ui-bizagi-wp-project-homeportal-main\").removeClass(\"enabled-right-sidebar\");\r\n                $(\"#ui-bizagi-wp-project-homeportal-main\").addClass(\"disabled-right-sidebar\");\r\n            }\r\n        }\r\n    },\r\n\r\n    //Show back button only in activity or plan context\r\n    setEnabledBreadCrumb: function (params) {\r\n        var self = this;\r\n        if (params.context == \"ACTIVITY\" || params.context == \"ACTIVITYPLAN\") {\r\n            self.setEnabledBackButton();\r\n            $(\".nav-items-ctn\", self.content).hide();\r\n            $(\".nav-items-ctn\", self.content).removeClass(\"toLeft\");\r\n            $(\".nav-items-ctn\", self.content).addClass(\"clearfix\");\r\n        }\r\n        else {\r\n            $(\".navbar-back\", self.content).hide();\r\n            $(\".nav-items-ctn\", self.content).show();\r\n            $(\".nav-items-ctn\", self.content).addClass(\"toLeft\");\r\n            $(\".nav-items-ctn\", self.content).removeClass(\"clearfix\");\r\n        }\r\n    },\r\n\r\n    /**\r\n     * add properties to DOM if the context is TEMPLATEENGINE-VIEW\r\n     * @param {JSON} params \r\n     */\r\n    setPropertiesForEngineTemplate: function (params) {\r\n        var self=this;\r\n        if (params.context == \"TEMPLATEENGINE-VIEW\" || params.context ==  \"CASES-TEMPLATE-VIEW\") {\r\n            self.getContent().closest(\"#content-wrapper\").addClass(\"ui-bizagi-wp-project-grid-container\");\r\n        } else {\r\n            self.getContent().closest(\"#content-wrapper\").removeClass(\"ui-bizagi-wp-project-grid-container\");\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Hide back button if from caseLink, only one time.\r\n     */\r\n    setEnabledBackButton: function(){\r\n        var self = this;\r\n        if(self.caseLink === true){\r\n            self.caseLink = false;\r\n            $(\".navbar-back\", self.content).hide();\r\n        }\r\n        else{\r\n            $(\".navbar-back\", self.content).show();\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Return actual level.\r\n     */\r\n    getLevel: function () {\r\n        var self = this;\r\n        return Object.keys(self.info).length;\r\n    },\r\n\r\n    refresh: function (ev, params) {\r\n        var self = this;\r\n        var args = params.args || {};\r\n        var data = params.data;\r\n        self.params = params.args;\r\n        this.recalculateHomeNavbar(params);\r\n        this.setEnabledLeftSidebar(params);\r\n        this.setEnabledRightSidebar(params);\r\n        this.setEnabledBreadCrumb(params);\r\n        this.setPropertiesForEngineTemplate(params);\r\n        if (params.context == \"ACTIVITY\" || params.context == \"ACTIVITYPLAN\") {\r\n            params.args.histName = self.getActivityName(params);\r\n        }\r\n\r\n        self.setStateBarNavigator(params.context);\r\n\r\n        if(!params.skipRefresh){\r\n            if (params.args.histName && params.args.histName != \"\") {\r\n                self.updateInfo(params);\r\n            }\r\n        }\r\n        var showSteps = params.args.eventType != \"DATA-NAVIGATION\";\r\n        self.drawBreadCrumb(self.info, showSteps);\r\n        self.drawDateNavigator(params);      \r\n    },\r\n\r\n    goToBack: function () {\r\n        var self = this;\r\n        if (bizagi && bizagi.referrerParams) {\r\n            var widget = bizagi.referrerParams.referrer || bizagi.cookie('bizagiDefaultWidget');\r\n        \r\n            // switch referer widget\r\n            switch (widget) {\r\n                case \"inbox\":\r\n                    self.publish(\"changeWidget\", {\r\n                        widgetName: widget,\r\n                        restoreStatus: true\r\n                    });\r\n                    break;\r\n                case \"inboxGrid\":\r\n                    self.publish(\"changeWidget\", {\r\n                        widgetName: widget,\r\n                        restoreStatus: true\r\n                    });\r\n                    break;\r\n                case \"homeportal\":\r\n                    self.goToPreviousCrumb();\r\n                    break;\r\n                case \"search\":\r\n                    self.publish(\"executeAction\", {\r\n                        action: bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_SEARCH,\r\n                        radNumber: bizagi.referrerParams.radNumber || \"\",\r\n                        page: bizagi.referrerParams.page || 1,\r\n                        onlyUserWorkItems: false\r\n                    });\r\n                    break;\r\n                case \"queryform\":                \r\n                    var params = {\r\n                        widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_QUERYFORM,\r\n                        queryFormAction: bizagi.referrerParams.queryForm.actionForm,\r\n                        notMigratedUrl: \"\",\r\n                        queryParams: bizagi.referrerParams.queryForm.queryParams,\r\n                        pageToShow: bizagi.referrerParams.queryForm.pageToShow,\r\n                        queryForm: bizagi.referrerParams.queryForm.queryForm,\r\n                        recalculateQueryForm: true\r\n                    };\r\n\r\n                    $.extend(params, params, bizagi.referrerParams.queryForm.data),\r\n                    self.publish(\"showDialogWidget\", params);\r\n                    break;\r\n                case \"reports\":                \r\n                    var params = {\r\n                        widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_REPORTS_CHART,\r\n                        endPoint: bizagi.referrerParams.reports.endPoint,\r\n                        filters: {},\r\n                        tab: bizagi.referrerParams.reports.tab\r\n                    };\r\n                    bizagi.referrerParams.reports.fromBackButton=true;\r\n                    self.publish(\"changeWidget\", params);\r\n                    break;\r\n                case \"folders\":\r\n                    var url = bizagi.referrerParams.urlParameters + \"&page=\" + bizagi.referrerParams.page;\r\n                    $.when(self.dataService.getCasesByFolder(url))\r\n                        .done(function (data) {\r\n                            data.customized = true;\r\n                            data.urlParameters = bizagi.referrerParams.urlParameters;\r\n                            // Define title of widget\r\n                            data.title = bizagi.referrerParams.name;\r\n                            // Set a flag here to tell the search widget that must show the ungroup case from folder (icon).\r\n                            data.casesGroupedByFolder = true;\r\n                            data.idFolder = bizagi.referrerParams.id;\r\n                            self.publish(\"changeWidget\", {\r\n                                widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_SEARCH,\r\n                                data: data,\r\n                                referrerParams: {}\r\n                            });\r\n                        });\r\n                    break;\r\n                case \"LPQueries\":\r\n                    bizagi.referrerParams.sidebarData.isFromQueriesBackButton = true;\r\n                    self.publish(\"changeWidget\", {\r\n                        widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_PROFLY,\r\n                        data: {\r\n                            route: \"reports\",\r\n                            params: { module: 'none' }\r\n                        }\r\n                    });\r\n                    break;\r\n                default:\r\n                    self.publish(\"changeWidget\", {\r\n                        widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INBOX,\r\n                        restoreStatus: true\r\n                    });\r\n                    break;\r\n            }\r\n        }\r\n    },\r\n\r\n    getActivityName: function (params) {\r\n        var activityName;\r\n        var idWorkItem = params.args.idWorkitem;\r\n        for (var i = 0; i < params.args.currentState.length; i++) {\r\n            var state = params.args.currentState[i];\r\n            if (state && state.idWorkItem == idWorkItem) {\r\n                if (state.displayName) {\r\n                    activityName = state.displayName;\r\n                }\r\n                else if (state.state) {\r\n                    activityName = state.state;\r\n                }\r\n                break;\r\n            }\r\n        }\r\n        return activityName;//+ '-' + params.args.radNumber;\r\n    },\r\n\r\n    /**\r\n     *\r\n     * @param event\r\n     * @param params\r\n     */\r\n    setStateBarNavigator: function(context){\r\n        var self = this;\r\n        if (context == \"ACTIVITY\") {\r\n            self.taskOptions();\r\n        }else {\r\n            self.getButtonForActivityAction().hide();\r\n        }\r\n        if (context == \"ACTIVITY\" || context == \"ACTIVITYPLAN\") {\r\n            self.showButtonPrintForm(true);\r\n            self.showUrlHelp(true);\r\n            self.flagDisplayDate = false;\r\n            self.onDisplayDate(false);\r\n        }\r\n        else {\r\n            self.showButtonPrintForm(false);\r\n            self.showUrlHelp(false);\r\n            self.flagDisplayDate = true;\r\n            self.onDisplayDate(true);\r\n        }\r\n    },\r\n\r\n    getDataObj: function () {\r\n        var self = this,\r\n            regional = self.getResource(\"datePickerRegional\"),\r\n            currentDate = new Date(),\r\n            currentDay = regional.dayNames[currentDate.getDay()],\r\n            currentMonth = regional.monthNames[currentDate.getMonth()];\r\n\r\n        return {\r\n            \"date\": currentDay + \", \" + currentMonth + \" \" + currentDate.getDate() + \", \" + currentDate.getFullYear()\r\n        };\r\n    },\r\n\r\n    /**\r\n     * Copy object by value, not reference\r\n     */\r\n    copyDataObjectWithoutReference: function(params){\r\n        return $.extend(true, {}, params);\r\n    },\r\n    /**\r\n     *\r\n     * @param show\r\n     */\r\n    showButtonPrintForm: function(show){\r\n        var self = this;\r\n        var $content = self.getContent();\r\n        var $wrapperButtonPrint = $content.find(\".navbar-print\");\r\n\r\n        if(show === true){\r\n            $wrapperButtonPrint.show();\r\n        }\r\n        else{\r\n            $wrapperButtonPrint.hide();\r\n        }\r\n    },\r\n    showUrlHelp: function(show){\r\n        var self = this;\r\n        var $content = self.getContent();\r\n        var $wrapperUrlHelp = $content.find(\".navbar-help\");\r\n        if(show === true){\r\n            var helpUrl = \"\";\r\n            for(var i=0; i< self.params.currentState.length; i++){\r\n                if(self.params.currentState[i].idTask === self.params.idTask){\r\n                    helpUrl = bizagi.util.validateUrlWellFormed(self.params.currentState[i].helpUrl);\r\n                }\r\n            }\r\n            if(!bizagi.util.isEmpty(helpUrl)){\r\n                $wrapperUrlHelp.show();\r\n        \r\n                $(\".navbar-help a\").attr(\"href\", helpUrl); \r\n            } \r\n        }\r\n        else{\r\n            $wrapperUrlHelp.hide();\r\n        }\r\n    },\r\n    /**\r\n     *\r\n     */\r\n    printCase: function(){\r\n        var self = this;\r\n        var printParams = { idCase: self.params.idCase,\r\n            idWorkitem: self.params.idWorkitem,\r\n            idTask: self.params.idTask\r\n        };\r\n\r\n        self.printFormCommand.print(printParams);\r\n    },\r\n\r\n    /**\r\n     * validate if is necessary to show release or take ownership buttons\r\n     */\r\n    taskOptions: function(){\r\n        var self = this,\r\n            buttonOption=self.getButtonForActivityAction(),\r\n            buttonContainer= buttonOption.parent(),\r\n            textForButton;\r\n        $.when(self.taskOptionsWidget.getTaskOptions(self.params.idWorkitem)).done(function(data) {\r\n            buttonContainer.removeClass('nae--loading');\r\n            textForButton = (data.showRelease)?self.getResource('render-actions-release'):self.getResource('render-actions-take-ownership');\r\n            buttonOption.text(textForButton);\r\n            self.showReleaseButton = data.showRelease;\r\n            if(data.showRelease === true || data.showTakeOwnership === true){\r\n                buttonOption.show();\r\n                buttonContainer.show();\r\n            }else buttonOption.hide();\r\n        });\r\n    },\r\n\r\n    /**\r\n     * return the action button for release or takeOwnership\r\n     */\r\n    getButtonForActivityAction: function(){\r\n        var self = this,\r\n            content = self.getContent(),\r\n            buttonContainer=$(\".navbar-assignation-everyone\", content);\r\n        return buttonContainer.find(\".ae-action\");\r\n    },\r\n    \r\n    /**\r\n     * trigger release or takeOwnership action\r\n     */\r\n    actionButtonEvent: function(){\r\n        var self = this,\r\n            onCloseReleaseDialogBox = function() {\r\n                self.destroyReleaseDialogBox();\r\n            };\r\n        \r\n        $(\".navbar-assignation-everyone\", self.getContent()).addClass('nae--loading');\r\n        if(self.showReleaseButton){\r\n            self.releaseDialogBox.formContent.dialog({\r\n                resizable: false,\r\n                draggable: false,\r\n                height: \"auto\",\r\n                width: \"660px\",\r\n                modal: true,\r\n                title: self.getResource(\"workportal-widget-dialog-box-release-ok\"),\r\n                maximize: true,\r\n                close: onCloseReleaseDialogBox \r\n            });\r\n        }else{\r\n            self.actionTakeOwnership();\r\n        }\r\n    },\r\n    \r\n    /**\r\n     * destroy correctly the release confirmation modal\r\n     */\r\n    destroyReleaseDialogBox: function () {\r\n        var self = this,\r\n            modal = self.releaseDialogBox.formContent;\r\n        $(\".navbar-assignation-everyone\", self.getContent()).removeClass('nae--loading');\r\n        modal.dialog(\"destroy\");\r\n        modal.detach();\r\n    },\r\n    \r\n    /**\r\n     * Triggered when user click over accept button and validate autoSave\r\n     */\r\n    onClickAcceptRelease: function () {\r\n        var self = this,\r\n            done = function () {\r\n                $(document).data('auto-save', '');\r\n                self.launchReleaseActivity();\r\n            },\r\n            fail = function() {\r\n                self.destroyReleaseDialogBox();\r\n            };\r\n        $.when(bizagi.util.autoSave()).done(done).fail(fail);\r\n    },\r\n    \r\n    /**\r\n     * method called after autoSave is done\r\n     */\r\n    launchReleaseActivity: function () {\r\n        var self = this;\r\n        var params = {\r\n            idCase: self.params.idCase,\r\n            idWorkItem: self.params.idWorkitem\r\n        };\r\n        $.when(self.dataService.releaseActivity(params)).done(function (data) {\r\n            var status = data.status ? data.status : \"\";\r\n            var message;\r\n            switch (status) {\r\n                case \"Success\":\r\n                    self.taskReleased();\r\n                    break;\r\n\r\n                case \"ConfigurationError\":\r\n                    message = self.getResource(\"workportal-widget-dialog-box-release-configuration-error-message\").replace(\"{0}\", params.idWorkItem);\r\n                    bizagi.showMessageBox(message, self.getResource(\"workportal-widget-dialog-box-release-error\"), \"error\", false);\r\n                    break;\r\n\r\n                default:\r\n                    message = self.getResource(\"workportal-widget-dialog-box-release-error-message\").replace(\"{0}\", params.idWorkItem);\r\n                    bizagi.showMessageBox(message, self.getResource(\"workportal-widget-dialog-box-release-error\"), \"error\", false);\r\n                    break;\r\n            }\r\n            self.waitForLoadCompletely();\r\n        }).fail(function () {\r\n            var message = self.getResource(\"workportal-widget-dialog-box-release-error-message\").replace(\"{0}\", params.idWorkItem);\r\n            bizagi.showMessageBox(message, self.getResource(\"workportal-widget-dialog-box-release-error\"), \"error\", false);\r\n            self.waitForLoadCompletely();\r\n        });\r\n        self.releaseDialogBox.formContent.dialog(\"destroy\");\r\n        self.releaseDialogBox.formContent.detach();\r\n    },\r\n\r\n    /**\r\n     * Triggered when user click over accept button\r\n     */\r\n    actionTakeOwnership: function () {\r\n        var self = this;\r\n        var params = {\r\n            idCase: self.params.idCase,\r\n            idWorkItem: self.params.idWorkitem\r\n        };\r\n        $.when(self.dataService.takeOwnershipActivity(params)).done(function (data) {    \r\n        \r\n            var status = data.status ? data.status : \"\";\r\n            var message;\r\n            switch (status) {\r\n                case \"Success\":\r\n                    // Refresh case\r\n                    self.pub(\"notify\", {\r\n                        type: self.params.showContextByMenuDashboard,\r\n                        args: $.extend(self.params, { refreshAllWidgets: true })\r\n                    });\r\n\r\n                    break;\r\n \r\n                default:\r\n                    message = self.getResource(\"workportal-widget-dialog-box-takeownership-error-message\").replace(\"{0}\", params.idWorkItem);\r\n                    bizagi.showMessageBox(message, self.getResource(\"workportal-general-error-page-title\"), \"error\", false);\r\n                    break;\r\n            }\r\n            self.waitForLoadCompletely();\r\n            \r\n        }).fail(function () { self.waitForLoadCompletely(); });\r\n    },\r\n\r\n    /**\r\n     * on task released send to inbox with toast notification\r\n     */\r\n    taskReleased: function () {\r\n        var self = this;\r\n        //go to inbox\r\n        self.publish(\"changeWidget\", {\r\n            widgetName: bizagi.workportal.currentInboxView\r\n        });\r\n        var options = {\r\n            closeButton: true,\r\n            onclick: function() {\r\n                self.publish(\"executeAction\", {\r\n                    action: bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING,\r\n                    idCase: self.params.idCase,\r\n                    idWorkItem: self.params.idWorkitem,\r\n                    idWorkflow: self.params.idWorkflow,\r\n                    idTask: self.params.idTask,\r\n                    referrer: undefined\r\n                });\r\n            },\r\n            timeOut: 10000\r\n        };\r\n        self.notifier.showSucessMessage(bizagi.localization.getResource(\"workportal-widget-dialog-box-release-configuration-success-message\"), self.params.histName, options);\r\n    },\r\n\r\n    waitForLoadCompletely: function(){\r\n        var self = this;\r\n        var content = self.content;\r\n        var fn = function () {\r\n            var ol = $('body #loadModuleStatus > *');\r\n            var il = $(content).closest('.content-portal').find('#home-content').find('.ui-bizagi-loading-message');\r\n            if (ol.length === 0 && il.length === 0){\r\n                $(\".navbar-assignation-everyone\", content).removeClass('nae--loading');\r\n            }else setTimeout(function () {\r\n                $(\".navbar-assignation-everyone\", content).addClass('nae--loading');\r\n                fn();\r\n            }, 100);\r\n        };\r\n        fn();\r\n    },\r\n\r\n    /**\r\n        * Close dialog release case\r\n        */\r\n    onClickCancelRelease: function () {\r\n        var self = this;\r\n        $(\".navbar-assignation-everyone\", self.getContent()).removeClass('nae--loading');\r\n        self.releaseDialogBox.formContent.dialog(\"destroy\");\r\n        self.releaseDialogBox.formContent.detach();\r\n    },\r\n    /**\r\n     * Hides the date displayed in the widget\r\n     */\r\n    onDisplayDate: function (show) {\r\n        var self = this,\r\n            $content = self.getContent(),\r\n            $date = $content.find(\".navbar-date\");\r\n\r\n        if (show && self.flagDisplayDate) {\r\n            $date.show();\r\n        }\r\n        else {\r\n            $date.hide();\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Clean widget\r\n     */\r\n    clean : function() {\r\n        var self = this;\r\n        var $content = self.getContent();\r\n        if ($content){\r\n            var $container = $content.find(\"ul\");\r\n\r\n            self.unsub(\"UPDATE_LASTCRUMBPARAMS_INFO\");\r\n            self.unsub(\"NAVIGATE\");\r\n            self.unsub(\"NAVIGATOR_GETLEVEL\");\r\n            self.unsub(\"NAVIGATOR_BACK\");\r\n            $container.off(\"click\", \"li\");\r\n\r\n            $(\".navbar-print\", self.content).off(\"click\", $.proxy(self.printCase, self));\r\n        }\r\n    }\r\n});\r\n\r\nbizagi.injector.register(\"bizagi.workportal.widgets.navigator\", [\"workportalFacade\", \"dataService\", \"accumulatedcontext\", bizagi.workportal.widgets.navigator]);\r\n","/**\r\n * Name: Bizagi Workportal Desktop Sidebar Controller\r\n * Author: Mauricio Sánchez  -  Danny Gonzalez\r\n */\r\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.sidebarhome\", {}, {\r\n    /**\r\n     * Constructor\r\n     */\r\n    init: function (workportalFacade, dataService, params) {\r\n        var self = this;\r\n\r\n        // Call base\r\n        self._super(workportalFacade, dataService, params);\r\n        //Load templates\r\n        self.loadTemplates({\r\n            \"sidebarhome\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.sidebarhome\").concat(\"#sidebarhome-wrapper\")\r\n        });\r\n    },\r\n\r\n    /**\r\n     * Renders the template defined in the widget\r\n     */\r\n    renderContent: function () {\r\n        var self = this;\r\n        var template = self.getTemplate(\"sidebarhome\");\r\n        self.content = $(template.render({}));\r\n\r\n        return self.content;\r\n    },\r\n\r\n    /**\r\n     * links events with handlers\r\n     */\r\n    postRender: function () {\r\n    }\r\n});\r\n\r\nbizagi.injector.register('bizagi.workportal.widgets.sidebarhome', ['workportalFacade', 'dataService', bizagi.workportal.widgets.sidebarhome], true);","/**\r\n * Name: Bizagi Workportal Desktop Dashboard Controller\r\n * Author: Mauricio Sánchez\r\n */\r\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.usersummary\", {}, {\r\n    /**\r\n     * Constructor\r\n     */\r\n    init: function (workportalFacade, dataService, params) {\r\n        var self = this;\r\n        self.workportalFacade = workportalFacade;\r\n        self.dataService = dataService;\r\n        self.params = params;\r\n\r\n        // Call base\r\n        self._super(workportalFacade, dataService, params);\r\n        //Load templates\r\n        self.loadTemplates({\r\n            \"usersummary\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.usersummary\").concat(\"#usersummary-wrapper\")\r\n        });\r\n    },\r\n\r\n    /**\r\n     * Renders the template defined in the widget\r\n     */\r\n    renderContent: function () {\r\n        var self = this,\r\n            template = self.getTemplate(\"usersummary\");\r\n\r\n        return $.when(self.getData()).done(function(data){\r\n            self.content = template.render(data);\r\n        });\r\n    },\r\n\r\n    /**\r\n     * links events with handlers\r\n     */\r\n    postRender: function () {\r\n        var self = this,\r\n            $container = $(\".wdg-usmry-stk-container\", self.getContent());\r\n\r\n        $container.on(\"click\", \"div.wdg-usmry-see-more\", $.proxy(self.showStakeholders, self));\r\n    },\r\n\r\n    /**\r\n     * Show the tooltip if the user have more of 3 stakeholder related\r\n     */\r\n    showStakeholders: function () {\r\n        var self = this,\r\n            $tooltip = $(\".wdg-usmry-stk-overlay\", self.getContent());\r\n\r\n        $tooltip.show( \"fast\", function(){\r\n            $tooltip.click(function (e) {\r\n                e.stopPropagation();\r\n            });\r\n            $(document).one(\"click\", function () {\r\n                $tooltip.hide( \"fast\" );\r\n            });\r\n        });\r\n    },\r\n\r\n    /**\r\n     * End point service to get User Info\r\n     */\r\n    getData: function () {\r\n        var self = this;\r\n\r\n        if(!bizagi.currentUser) {\r\n            return self.dataService.getCurrentUser().then(function (data) {\r\n                bizagi.currentUser = data;\r\n                return self.getInfoToUser(data);\r\n            });\r\n        }\r\n\r\n        return this.getInfoToUser(bizagi.currentUser);\r\n    },\r\n\r\n    /**\r\n     * Organize the user info to return the necessary format\r\n     */\r\n    getInfoToUser : function (currentUser) {\r\n        var stakeholders = [];\r\n        var totalStakeholders = currentUser.associatedStakeholders.length;\r\n        var stakeholdersToShow = currentUser.associatedStakeholders.slice(0, 2);\r\n        var stakeholdersHidden = currentUser.associatedStakeholders.slice(2, totalStakeholders);\r\n        var showMore = (totalStakeholders > 2);\r\n\r\n        $.each(stakeholdersToShow, function (index, item) {\r\n            stakeholders.push(item.displayName);\r\n        });\r\n\r\n        var data = {\r\n            user: currentUser.userName,\r\n            stakeholders: (stakeholders.length > 0) ? stakeholders.join(', ') : '--',\r\n            stakeholdersHidden: (stakeholdersHidden.length > 0) ? stakeholdersHidden : '',\r\n            showMore: showMore,\r\n            orgArray: stakeholders,\r\n            initials: currentUser.initials\r\n        };\r\n\r\n        if (currentUser.userPicture) {\r\n            data.photo = 'data:image/png;base64,' + currentUser.userPicture;\r\n        }\r\n\r\n        return data;\r\n    }\r\n});\r\n\r\nbizagi.injector.register('bizagi.workportal.widgets.usersummary', ['workportalFacade', 'dataService', bizagi.workportal.widgets.usersummary]);","/**\r\n * Bizagi Workportal Desktop My Shortcuts list controller\r\n * @author Danny Gonzalez\r\n */\r\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.shortcuts\", {}, {\r\n\t/**\r\n\t * Constructor\r\n\t * @param workportalFacade instance of facade, mandatory\r\n\t * @param dataService instance of service tier, mandatory\r\n\t * @param params extra params, its not mandatory\r\n\t * @param processActionService\r\n\t * @param accumulatedcontext\r\n\t * @param notifier\r\n\t */\r\n\tinit: function(workportalFacade, dataService, processActionService, accumulatedcontext, notifier, params) {\r\n\t\tvar self = this;\r\n        self.requestsInProgressProcessGuid = {};\r\n\t\tself.params = params;\r\n\t\tself.processActionService = processActionService;\r\n\t\tself.accumulatedcontext = accumulatedcontext;\r\n\t\tself.notifier = notifier;\r\n\r\n\t\t// Call base\r\n\t\tself._super(workportalFacade, dataService, params);\r\n\t\t//Load templates\r\n\t\tself.loadTemplates({\r\n\t\t\t\"myshortcuts\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.shortcuts\").concat(\"#shortcuts-wrapper\")\r\n\t\t});\r\n\t},\r\n\t/**\r\n\t * Renders the template defined in the widget\r\n\t * @return {string} html\r\n\t */\r\n\trenderContent: function() {\r\n\t\tvar self = this;\r\n\t\tvar template = self.getTemplate(\"myshortcuts\");\r\n\r\n        return $.when(self.getData()).done(function(data) {\r\n            self.content = data.length > 0 ? template.render({shortcuts: data}) : '';\r\n            return self.content;\r\n        });\r\n\t},\r\n    /**\r\n     * links events with handlers\r\n     */\r\n    postRender: function() {\r\n        var self = this;\r\n        var $content = self.getContent();\r\n        $('.wdg-srcts-container', $content).on(\"click\", $.proxy(self.onClickShortcut, self));\r\n    },\r\n    /**\r\n     *\r\n     * @returns {*}\r\n     */\r\n    getData: function() {\r\n        var self = this;\r\n\r\n        return self.dataService.getMyShortcutsByCategory({icon:true}).then( function(data) {\r\n            self.model = {};\r\n            var category, i = -1;\r\n\r\n            while (category = data[++i]) {\r\n                var shortcut, j = -1;\r\n\r\n                while (shortcut = category.items[++j]) {\r\n                    var id = Math.guid();\r\n                    shortcut.id = id;\r\n                    self.model[id] = shortcut;\r\n                }\r\n            }\r\n            return data;\r\n        });\r\n    },\r\n\t/**\r\n\t * event listener for each action in the shrotcuts list\r\n\t * @param ev\r\n\t */\r\n\tonClickShortcut: function(ev) {\r\n\t\tvar self = this;\r\n\t\tvar $target = $(ev.target).closest('.wdg-srcts-container');\r\n\t\tvar shortcut = self.model[$target.data('id')];\r\n        self.target = $target;\r\n\r\n        if(self.requestsInProgressProcessGuid[shortcut.idProcess])\r\n            return;\r\n\r\n        self.startLoading(self.target,shortcut.idProcess);\r\n\r\n        if (shortcut) {\r\n\t\t    self.dataService.actionsHasStartForm({ processId: shortcut.idProcess }).done(function (data, $target) {\r\n\t\t        if (!data.startForm) {\r\n\t\t            self.dataService.actionCreateCase(shortcut).done(function (data) {\r\n                        $.when(self.processActionService.launchActionsAfterCreateCase({\r\n                            idCase: data.caseId,\r\n                            caseNumber: data.caseNumber,\r\n                            includeRadicationPhase: data.includeRadicationPhase,\r\n                            action: shortcut\r\n                        })).done(function(){\r\n                            self.stopLoading(self.target,shortcut.idProcess);\r\n                        }) ;\r\n\r\n                    });\r\n\t\t        }\r\n\t\t\t\telse {\r\n\t\t            var action = {\r\n\t\t                displayName: shortcut.displayName,\r\n\t\t                hasStartForm: data.startForm,\r\n                        showConfirmation: shortcut.showConfirmation\r\n\t\t            };\r\n\r\n                    $.when(self.processActionService.executeProcessAction({\r\n\t\t                action: action,\r\n\t\t                mappingstakeholders: true,\r\n\t\t                guidprocess: shortcut.idProcess\r\n\t\t            })).done(function(){\r\n                        self.stopLoading(self.target,shortcut.idProcess);\r\n                    });\r\n\t\t        }\r\n\t\t    }).fail(function () {\r\n                self.notifier.showErrorMessage(\r\n                    printf(\r\n                        bizagi.localization.getResource('workportal-widget-sortbar-execute-error-message'),\r\n                        shortcut.displayName\r\n                    )\r\n                );\r\n                self.stopLoading(self.target,shortcut.idProcess);\r\n            });\r\n\t\t}\r\n\t},\r\n    /**\r\n     * Detach handlers\r\n     */\r\n    clean: function() {\r\n        var self = this;\r\n        var $content = self.getContent();\r\n\r\n        if($content) {\r\n            $('.wdg-srcts-container', $content).off('click');\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Start loading shortcut\r\n     * */\r\n    startLoading: function($target, idProcess){\r\n        var self = this;\r\n        $target.prepend(\"<div class=\\\"bz-wp-ls-list-item-loading\\\"><div class=\\\"ui-bizagi-loading-icon\\\"></div></div>\");\r\n        self.requestsInProgressProcessGuid[idProcess] = true;\r\n    },\r\n\r\n    /**\r\n     * Stop loading shortcut\r\n     * */\r\n    stopLoading: function($target, idProcess){\r\n        var self = this;\r\n        $target.find(\".bz-wp-ls-list-item-loading\").remove();\r\n        delete self.requestsInProgressProcessGuid[idProcess];\r\n    }\r\n});\r\n\r\nbizagi.injector.register('bizagi.workportal.widgets.shortcuts', ['workportalFacade', 'dataService', 'processActionService', 'accumulatedcontext', 'notifier', bizagi.workportal.widgets.shortcuts]);","/**\r\n *   Name: Bizagi Workportal Right Sidebar\r\n *   Author: Elkin Fernando Siabato Cruz\r\n */\r\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.right.sidebar\", {}, {\r\n\r\n    /**\r\n     *   Constructor\r\n     */\r\n    init: function (workportalFacade, dataService, behaviorCollapsiblePanels, params) {\r\n        var self = this;\r\n        self.behaviorCollapsiblePanels = behaviorCollapsiblePanels;\r\n\r\n        // Call base\r\n        self._super(workportalFacade, dataService, params);\r\n        //Load templates\r\n        self.loadTemplates({\r\n            \"right-sidebar\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.right.sidebar\").concat(\"#rightsidebar-wrapper\")\r\n        });\r\n\r\n        if(bizagi.services.preferences().getPreference(\"activityCollapseSidebars\")){\r\n            $(\"#ui-bizagi-wp-project-homeportal-main\").addClass(\"ui-bizagi-wp-project-collapse-rightpanel\");\r\n            $(\"#right-sidebar-wrapper\").addClass(\"always-collpase\");\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Renders the template defined in the widget\r\n     */\r\n    renderContent: function () {\r\n        var self = this;\r\n        var template = self.getTemplate(\"right-sidebar\");\r\n        self.content = template.render({});\r\n\r\n        return self.content;\r\n    },\r\n\r\n    /**\r\n     *\r\n     */\r\n    postRender: function () {\r\n        var self = this;\r\n\r\n        if (self.params && self.params.contextsRightSidebarCaseDashboard) {\r\n            self.params.contextsRightSidebarCaseDashboard.forEach(function (context) {\r\n                self.sub(context, $.proxy(self.updateView, self));\r\n            });\r\n        }\r\n    },\r\n\r\n    /**\r\n     *\r\n     * @param event\r\n     * @param params\r\n     */\r\n    updateView: function (event, params) {\r\n        var self = this;\r\n\r\n        self.enableOrDisableRightSidebar(params.context);\r\n        self.eventsHandler();\r\n\r\n        if(params.context === \"ACTIVITY\" || params.context === \"ACTIVITYPLAN\"){\r\n            self.addBottomPadding();\r\n        }\r\n       \r\n    },\r\n    addBottomPadding: function (){\r\n        $('.content-dashboard-right-sidebar .content-right-sidebar').css('padding-bottom', '30px')\r\n    },\r\n\r\n    /**\r\n     *\r\n     * @param event\r\n     */\r\n    onCollapsePanel: function(event) {\r\n\r\n        var self = this;\r\n        var $target = (event) ? $(event.currentTarget) : $(\"#project-collapse-rightpanel\");\r\n        var classSuffix = \"-rightpanel\";\r\n        \r\n        self.behaviorCollapsiblePanels.addClassesCollapseSideBar(self.content, classSuffix, false);\r\n        \r\n        if($target.closest(\".ui-bizagi-wp-project-open-rightpanel\").length > 0){\r\n            self.pub(\"notify\", {\r\n                type: \"EXPANDED_RIGHT_SIDEBAR\"\r\n            });\r\n        }\r\n        $(\"#right-sidebar-wrapper\").removeClass(\"always-collpase\");\r\n\r\n        self.publish(\"openCloseSidebar\");\r\n    },\r\n\r\n    /**\r\n     *\r\n     */\r\n    disableSidebar: function(){\r\n        $(\"#ui-bizagi-wp-project-homeportal-main\").addClass(\"disabled-right-sidebar\");\r\n        $(\"#ui-bizagi-wp-project-homeportal-main\").removeClass(\"enabled-right-sidebar\");\r\n    },\r\n\r\n    /**\r\n     *\r\n     */\r\n    enableSidebar: function(){\r\n        $(\"#ui-bizagi-wp-project-homeportal-main\").removeClass(\"disabled-right-sidebar\");\r\n        $(\"#ui-bizagi-wp-project-homeportal-main\").addClass(\"enabled-right-sidebar\");\r\n    },\r\n\r\n    /**\r\n     *\r\n     */\r\n    openRightSidebar: function(){\r\n        var self = this;\r\n        $(\"#right-sidebar-wrapper\").removeClass(\"always-collpase\");\r\n        self.behaviorCollapsiblePanels.addClassesCollapseSideBar(self.content, \"-rightpanel\", true);\r\n    },\r\n\r\n    closeRightSidebar: function(){\r\n        var self = this;\r\n        self.behaviorCollapsiblePanels.collapseSideBar(\"-rightpanel\");\r\n    },\r\n\r\n    \r\n    /**\r\n     *\r\n     * @param currentContext\r\n     */\r\n    enableOrDisableRightSidebar: function(currentContext){\r\n        var self = this;\r\n\r\n        var setDisabledSidebar = false;\r\n        self.params.contextsWithoutRightSidebarCaseDashboard.forEach(function(context){\r\n            if(context === currentContext){\r\n                self.disableSidebar();\r\n                setDisabledSidebar = true;\r\n            }\r\n        });\r\n        if(setDisabledSidebar === false){\r\n            self.enableSidebar();\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Configure event handlers\r\n     */\r\n    eventsHandler: function(){\r\n        var self = this;\r\n        $(\".ui-bizagi-wp-project-panel-collapse\", self.content).off(\"click\", $.proxy(self.onCollapsePanel, self));\r\n        $(\".ui-bizagi-wp-project-panel-collapse\", self.content).on(\"click\", $.proxy(self.onCollapsePanel, self));\r\n\r\n        self.sub(\"OPEN_RIGHT_SIDEBAR\", $.proxy(self.openRightSidebar, self));\r\n        self.sub(\"CLOSE_RIGHT_SIDEBAR\", $.proxy(self.closeRightSidebar, self));\r\n        self.sub(\"DISABLED_RIGHT_SIDEBAR\", $.proxy(self.disableSidebar, self));\r\n        self.sub(\"ENABLED_RIGHT_SIDEBAR\", $.proxy(self.enableSidebar, self));\r\n    },\r\n\r\n    /**\r\n     *\r\n     */\r\n    clean: function(){\r\n        var self = this;\r\n        if(self.params && self.params.contextsRightSidebarCaseDashboard){\r\n            self.params.contextsRightSidebarCaseDashboard.forEach(function(context){\r\n                self.unsub(context, $.proxy(self.updateView, self));\r\n            });\r\n        }\r\n        $(\".ui-bizagi-wp-project-panel-collapse\", self.content).off(\"click\", $.proxy(self.onCollapsePanel, self));\r\n\r\n        self.unsub(\"OPEN_RIGHT_SIDEBAR\", $.proxy(self.openRightSidebar, self));\r\n        self.unsub(\"CLOSE_RIGHT_SIDEBAR\", $.proxy(self.closeRightSidebar, self));\r\n        self.unsub(\"DISABLED_RIGHT_SIDEBAR\", $.proxy(self.disableSidebar, self));\r\n        self.unsub(\"ENABLED_RIGHT_SIDEBAR\", $.proxy(self.enableSidebar, self));\r\n    }\r\n\r\n});\r\n\r\nbizagi.injector.register(\"bizagi.workportal.widgets.right.sidebar\", [\"workportalFacade\", \"dataService\", \"behaviorCollapsiblePanels\", bizagi.workportal.widgets.right.sidebar], true);","/**\r\n *   Name: Bizagi Workportal Left Sidebar\r\n *   Author: Elkin Fernando Siabato Cruz\r\n */\r\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.left.sidebar\", {}, {\r\n\r\n    /**\r\n     *   Constructor\r\n     */\r\n    init: function (workportalFacade, dataService, behaviorCollapsiblePanels, params) {\r\n        var self = this;\r\n\r\n        // Call base\r\n        self._super(workportalFacade, dataService, params);\r\n        self.behaviorCollapsiblePanels = behaviorCollapsiblePanels;\r\n        //Load templates\r\n        self.loadTemplates({\r\n            \"left-sidebar\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.left.sidebar\").concat(\"#leftsidebar-wrapper\")\r\n        });\r\n\r\n        if(bizagi.services.preferences().getPreference(\"activityCollapseSidebars\")){\r\n            $(\"#ui-bizagi-wp-project-homeportal-main\").addClass(\"ui-bizagi-wp-project-collapse-leftpanel\");\r\n            $(\"#left-sidebar-wrapper\").addClass(\"always-collpase\");\r\n        }\r\n\r\n    },\r\n\r\n    /**\r\n     * Renders the template defined in the widget\r\n     */\r\n    renderContent: function () {\r\n        var self = this;\r\n        var template = self.getTemplate(\"left-sidebar\");\r\n        self.content = template.render({});\r\n\r\n        return self.content;\r\n    },\r\n\r\n    /**\r\n     *\r\n     */\r\n    postRender: function () {\r\n        var self = this;\r\n        self.eventsHandler();\r\n    },\r\n\r\n    /**\r\n     * Configure event handlers\r\n     */\r\n    eventsHandler: function(){\r\n        var self = this;\r\n        $(\".ui-bizagi-wp-project-panel-collapse\", self.content).on(\"click\", $.proxy(self.onCollapsePanel, self));\r\n\r\n        self.showTooltip($( \".bz-icon-right-outline\", self.content), bizagi.localization.getResource(\"workportal-sidebar-show-more-tooltip\"));\r\n        self.showTooltip($( \".bz-icon-left-outline\", self.content), bizagi.localization.getResource(\"workportal-sidebar-show-less-tooltip\"));\r\n        \r\n    },\r\n    showTooltip: function(classArrow, textTooltip){\r\n        classArrow.tooltip({\r\n            content: textTooltip, \r\n            tooltipClass: \"custom-tooltip-styling-bottom-bar\", \r\n            position: { \r\n                my: \"left+15 center\", \r\n                at: \"right top+8\",\r\n                of: classArrow\r\n            }\r\n          });   \r\n    },\r\n\r\n    /**\r\n     *\r\n     * @param event\r\n     */\r\n    onCollapsePanel: function(event) {\r\n        $('.ui-tooltip.custom-tooltip-styling-bottom-bar').hide();\r\n        var self = this;\r\n        var $target = (event) ? $(event.currentTarget) : $(\"#project-collapse-leftpanel\");\r\n        var classSuffix = ($target.prop(\"id\") === \"project-collapse-rightpanel\") ? \"-rightpanel\" : \"-leftpanel\";\r\n\r\n        self.behaviorCollapsiblePanels.addClassesCollapseSideBar(self.content, classSuffix, false);\r\n        $(\"#left-sidebar-wrapper\").removeClass(\"always-collpase\");\r\n        self.publish(\"openCloseSidebar\");\r\n    },\r\n\r\n    /**\r\n     *\r\n     */\r\n    clean: function(){\r\n        var self = this;\r\n        $(\".ui-bizagi-wp-project-panel-collapse\", self.content).off(\"click\", $.proxy(self.onCollapsePanel, self));\r\n    }\r\n\r\n});\r\n\r\nbizagi.injector.register(\"bizagi.workportal.widgets.left.sidebar\", [\"workportalFacade\", \"dataService\", \"behaviorCollapsiblePanels\", bizagi.workportal.widgets.left.sidebar], true);","/**\r\n *   Name: Bizagi Workportal Desktop Widget Dummy\r\n *   Author: Elkin Fernando Siabato Cruz\r\n */\r\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.dummy\", {}, {\r\n   /**\r\n    *   Constructor\r\n    */\r\n   init: function (workportalFacade, dataService, params) {\r\n      var self = this;\r\n      // Call base\r\n      self._super(workportalFacade, dataService, params);\r\n   },\r\n\r\n   /**\r\n    * Renders the template defined in the widget\r\n    */\r\n   renderContent: function () {\r\n      var self = this;\r\n      self.content = $(\"<div></div>\");\r\n      return self.content;\r\n   }\r\n});\r\n\r\nbizagi.injector.register(\"bizagi.workportal.widgets.dummy\", [\"workportalFacade\", \"dataService\", bizagi.workportal.widgets.dummy]);","/**\r\n *   Name: Bizagi Workportal Desktop Sidebar Controller\r\n *   Author: Mauricio Sánchez  -  Danny Gonzalez\r\n */\r\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.sidebar\", {}, {\r\n    /**\r\n     * Constructor\r\n     */\r\n    init: function (workportalFacade, dataService, params) {\r\n        var self = this;\r\n\r\n        // Call base\r\n        self._super(workportalFacade, dataService, params);\r\n        //Load templates\r\n        self.loadTemplates({\r\n            \"sidebar\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.sidebar\").concat(\"#sidebar-wrapper\")\r\n        });\r\n    },\r\n\r\n    /**\r\n     * Renders the template defined in the widget\r\n     */\r\n    renderContent: function () {\r\n        var self = this;\r\n        var template = self.getTemplate(\"sidebar\");\r\n        self.content = $(template.render({}));\r\n\r\n        return self.content;\r\n    },\r\n\r\n    /**\r\n     * links events with handlers\r\n     */\r\n    postRender: function () {\r\n    }\r\n});\r\n\r\nbizagi.injector.register('bizagi.workportal.widgets.sidebar', ['workportalFacade', 'dataService', bizagi.workportal.widgets.sidebar], true);","/**\r\n * Admin module to case massively reassign\r\n * \r\n * @author Edward J Morales\r\n */\r\n\r\n\r\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.admin.cases\", {}, {\r\n    /*\r\n     *   Returns the widget name\r\n     */\r\n    getWidgetName: function() {\r\n        return bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ASYNC;\r\n    },\r\n    /*\r\n     *   Renders the content for the current controller\r\n     */\r\n    renderContent: function() {\r\n        var self = this;\r\n        var template = self.getTemplate(\"admin.cases\");\r\n        var content = self.content = $.tmpl(template);\r\n\r\n        return content;\r\n    }\r\n});","/**\r\n * Admin / Cases Search\r\n * \r\n * @author Christian Collazos\r\n */\r\n\r\n\r\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.admin.caseSearch\", {}, {\r\n    /*\r\n    *   Returns the widget name\r\n    */\r\n    getWidgetName: function () {\r\n        return bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_CASE_SEARCH;\r\n    },\r\n\r\n    /*\r\n    *   Renders the content for the current controller\r\n    */\r\n    renderContent: function () {\r\n        var self = this;\r\n        var template = self.getTemplate(\"admin.case.search\");\r\n        var content;\r\n\r\n        content = self.content = $.tmpl(template, {});\r\n        self.loadtemplates();\r\n        return content;\r\n    },\r\n\r\n    /*\r\n    * this will be implemented on each device\r\n    */\r\n    loadtemplates: function () { }\r\n\r\n\r\n});","bizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.adhoc.create.process\", {}, {\r\n\r\n    init: function (workportalFacade, dataService, params) {\r\n\r\n        var self = this;\r\n\r\n        self.notifier = bizagi.injector.get(\"notifier\");\r\n\r\n        // Call base\r\n        self._super(workportalFacade, dataService, params);\r\n\r\n        // Load Templates\r\n        self.loadTemplates({\r\n            \"adhoc.create.process\": bizagi.getTemplate(\"bizagi.workportal.desktop.widgets.adhoc.create.process\").concat(\"#adhoc-create-process\")\r\n        });\r\n    },\r\n\r\n    /**\r\n     * Renders the template defined in the widget\r\n     * @return {*}\r\n     */\r\n    renderContent: function () {\r\n        var self = this,\r\n            template = self.getTemplate(\"adhoc.create.process\");\r\n        self.content = template.render();\r\n        return self.content;\r\n    },\r\n\r\n    /**\r\n     * Method called after render widget\r\n     */\r\n    postRender: function () {\r\n        var self = this;\r\n        self.addEventHandlers();\r\n    },\r\n\r\n    /**\r\n     * Called when change input and validate form\r\n     * @returns {boolean}\r\n     */\r\n    validateForm: function(){\r\n        var self = this;\r\n        var isValidForm = false;\r\n        var name = $(\".js-input-name\", self.content);\r\n        if (name.val() && name.val() !== \"\") {\r\n            name.next().find(\"span\").html(\"\");\r\n            isValidForm = true;\r\n        } else {\r\n            var nameValidation = bizagi.localization.getResource(\"workportal-general-error-field-required\");\r\n            nameValidation = nameValidation.replace(\"{0}\", bizagi.localization.getResource(\"workportal-widget-admin-adhoc-processes-name\"));\r\n            name.next().find(\"span\").html(nameValidation);\r\n            isValidForm = false;\r\n        }\r\n        return isValidForm;\r\n    },\r\n\r\n    /**\r\n     * Trigger when click cancel button\r\n     */\r\n    onClickCancel: function () {\r\n        var self = this;\r\n        self.publish(\"closeCurrentDialog\");\r\n    },\r\n\r\n    /**\r\n     * Trigger when submit form\r\n     * @param event\r\n     */\r\n    onSubmitFormCreateProcess: function(event){\r\n        event.preventDefault();\r\n        var self = this;\r\n        if (self.validateForm()) {\r\n            var paramsNewProcess = {\r\n                displayName: $(\"input\", self.content).val()\r\n            };\r\n            bizagi.showErrorAlertDialog = false;\r\n            $.when(self.dataService.createNewAdhocProcess(paramsNewProcess)).done(function (data) {\r\n                self.notifier.showSucessMessage(bizagi.localization.getResource(\"workportal-adhoc-process-created\"),\r\n                    bizagi.localization.getResource(\"workportal-quickprocess-notification-process-title\"), \"\");\r\n                self.publish(\"closeCurrentDialog\");\r\n                if(bizagi.util.isIE10OrLower()){ // redirect to dashboard, IE10 doesn't support routing in angular app\r\n                    self.publish(\"changeWidget\", {\r\n                        widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_PROFLY\r\n                    });\r\n\r\n                } else {\r\n                    self.publish(\"changeWidget\", {\r\n                        widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_PROFLY,\r\n                        data: {\r\n                            route: 'process-modeler',\r\n                            params: data\r\n                        }\r\n                    });\r\n                }\r\n            }).fail(function (error) {\r\n                error = JSON.parse(error.responseText);\r\n                self.notifier.showErrorMessage(error.message, bizagi.localization.getResource(\"workportal-quickprocess-notification-generic-error-title\"), \"\");\r\n            });\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Add event handlers to elements\r\n     */\r\n    addEventHandlers: function () {\r\n        var self = this;\r\n        $(\".js-input-name\", self.content).on(\"input\", $.proxy(self.validateForm, self));\r\n        $(\"#button-cancel-create-adhoc-process\", self.content).on(\"click\", $.proxy(self.onClickCancel, self));\r\n        $(\"form\", self.content).on(\"submit\", $.proxy(self.onSubmitFormCreateProcess, self));\r\n    },\r\n\r\n    /**\r\n     * Remove event handlers to elements. Dispose widget\r\n     */\r\n    dispose: function () {\r\n        var self = this;\r\n        $(\".js-input-name\", self.content).off(\"input\", $.proxy(self.validateForm, self));\r\n        $(\"#button-cancel-create-adhoc-process\", self.content).off(\"click\", $.proxy(self.onClickCancel, self));\r\n        $(\"form\", self.content).off(\"submit\", $.proxy(self.onSubmitFormCreateProcess, self));\r\n    }\r\n});","/*\r\n *   Name: Bizagi Workportal Desktop Project File Preview\r\n *   Author: David Romero Estrada\r\n */\r\n\r\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.profly\", {}, {\r\n    /*\r\n    *   Constructor\r\n    */\r\n    init: function (workportalFacade, dataService, params) {\r\n        var self = this;\r\n\r\n        // Call base\r\n        self._super(workportalFacade, dataService, params);\r\n\r\n        //Load templates\r\n        self.loadTemplates({\r\n            \"project-filespreview-wrapper\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.profly\").concat(\"#project-filespreview-wrapper\")\r\n        });\r\n    },\r\n\r\n    /**\r\n    * Renders the template defined in the widget\r\n    */\r\n    renderContent: function () {\r\n        var self = this;\r\n        // Define parameters to route angular app\r\n        var argumentsTemplate = {\r\n            paramsURL: ''\r\n        }\r\n        if(self.params.data && self.params.data.route && self.params.data.params.id){\r\n            argumentsTemplate.paramsURL =\r\n                encodeURI('?route=' + self.params.data.route + '&id=' + self.params.data.params.id + '&displayName=' + self.params.data.params.displayName);\r\n\r\n        }\r\n\r\n        if(self.params.data && self.params.data.route && self.params.data.params.module){\r\n            argumentsTemplate.paramsURL =\r\n                encodeURI('?route=' + self.params.data.route + '&module=' + self.params.data.params.module);\r\n        }\r\n\r\n        var generalTmpl = self.getTemplate(\"project-filespreview-wrapper\");\r\n        self.content = generalTmpl.render(argumentsTemplate);\r\n        \r\n        $(self.content).on(\"load\", function (event) {\r\n            var path = event.currentTarget.contentWindow.location.href;\r\n            if(path.indexOf('quickprocess') === -1 ){\r\n                location.reload(); // QAF-5934\r\n            }\r\n        });\r\n        return self.content;\r\n    },\r\n\r\n\r\n    /**\r\n    * links events with handlers\r\n    */\r\n    postRender: function () {\r\n        var self = this;\r\n    },\r\n\r\n    clean: function () {\r\n        var self = this;\r\n        $('#iframe-liveprocesses', self.content).off();\r\n        self.plugins = {};\r\n        self.form = {};\r\n        self.currentFile = {};\r\n        self.filesNumber = 0;\r\n    }\r\n});\r\n\r\nbizagi.injector.register(\"bizagi.workportal.widgets.profly\", [\"workportalFacade\", \"dataService\", bizagi.workportal.widgets.profly]);","bizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.sessionTimeout\", {}, {\r\n    /**\r\n     * Constructor\r\n     */\r\n    init: function (workportalFacade, dataService, notifier, params) {\r\n        var self = this;\r\n\r\n        // Call base\r\n        self._super(workportalFacade, dataService, params);\r\n\r\n        //Load template\r\n        self.loadTemplates({\r\n            \"session-timeout\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.sessionTimeout\").concat(\"#session-timeout\")\r\n        });\r\n\r\n        // Have an instance of the session timeout\r\n        self.sessionTimeoutService = bizagi.injector.get('sessionTimeOutService');\r\n    },\r\n\r\n    renderContent: function () {\r\n        var self = this;\r\n        var template = self.getTemplate('session-timeout');\r\n        self.content = template.render({});\r\n        return self.content;\r\n    },\r\n\r\n    postRender: function () {\r\n        var self = this;\r\n        self._onClickMinValue\r\n\r\n        // When the user clicks on the modal button reset the countDown\r\n        $('button', self.content).click(\r\n            $.proxy(function () {\r\n                // Keep the session opened\r\n                self.sessionTimeoutService.keepSessionOpen();\r\n                $(this.content).closest('.ui-dialog').find('.ui-dialog-titlebar-close').trigger('click');\r\n            },\r\n            self\r\n        ));\r\n\r\n        // Remove the x of the modal\r\n        self.renderingDeferred.then($.proxy(self.removeXClose, self));\r\n    },\r\n\r\n    /**\r\n     * Remove the x of the modal, whe don't need it here\r\n     * We don't want the possibility to close the modal\r\n     */\r\n    removeXClose: function () {\r\n        var self = this;\r\n        setTimeout(function () {\r\n            $(self.content).closest('.ui-dialog').find('.ui-dialog-titlebar-close').hide();\r\n        }, 0);\r\n    },\r\n\r\n    clean: function () {\r\n        var self = this;\r\n    }\r\n});\r\n\r\nbizagi.injector.register('bizagi.workportal.widgets.sessionTimeout', ['workportalFacade', 'dataService', 'notifier', bizagi.workportal.widgets.sessionTimeout]);\r\n","bizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.sessionTimeoutExpired\", {}, {\r\n    /**\r\n     * Constructor\r\n     */\r\n    init: function (workportalFacade, dataService, notifier, params) {\r\n        var self = this;\r\n\r\n        // Call base\r\n        self._super(workportalFacade, dataService, params);\r\n\r\n        //Load template\r\n        self.loadTemplates({\r\n            \"session-timeout-expired\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.sessionTimeoutExpired\").concat(\"#session-timeout-expired\")\r\n        });\r\n    },\r\n\r\n    renderContent: function () {\r\n        var self = this;\r\n        var template = self.getTemplate('session-timeout-expired');\r\n        self.content = template.render({});\r\n        return self.content;\r\n    },\r\n\r\n    postRender: function () {\r\n        var self = this;\r\n        self._onClickMinValue\r\n\r\n        // When the user clicks on the modal button reset the countDown\r\n        $('button', self.content).click(\r\n            function () {\r\n                bizagi.services.redirectToLogoutPage();\r\n            }\r\n        );\r\n\r\n        // Remove the x of the modal\r\n        self.renderingDeferred.then($.proxy(self.removeXClose, self));\r\n    },\r\n\r\n    /**\r\n     * Remove the x of the modal, whe don't need it here\r\n     * We don't want the possibility to close the modal\r\n     */\r\n    removeXClose: function () {\r\n        var self = this;\r\n        setTimeout(function () {\r\n            $(self.content).closest('.ui-dialog').find('.ui-dialog-titlebar-close').hide();\r\n        }, 0);\r\n    },\r\n\r\n    clean: function () {\r\n        var self = this;\r\n    }\r\n});\r\n\r\nbizagi.injector.register('bizagi.workportal.widgets.sessionTimeoutExpired', ['workportalFacade', 'dataService', 'notifier', bizagi.workportal.widgets.sessionTimeoutExpired]);\r\n","/**\r\n * Name: Bizagi Workportal Desktop Create plan\r\n */\r\n\r\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.user.privacy\", {}, {\r\n    /**\r\n     * Constructor\r\n     */\r\n    init: function (workportalFacade, dataService, notifier, params) {\r\n        var self = this;\r\n \r\n        // Call base\r\n        self._super(workportalFacade, dataService, params);\r\n        self.notifier = notifier;\r\n\r\n        //Load template\r\n        self.loadTemplates({\r\n            \"user-privacy\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.user.privacy\").concat(\"#user-privacy\")\r\n        });\r\n\r\n    },\r\n \r\n    renderContent: function(){\r\n        var self = this;\r\n        var template = self.getTemplate('user-privacy');\r\n        self.content = template.render({});\r\n        return self.content;\r\n    },\r\n \r\n    postRender: function () {\r\n        var self = this;\r\n        $('#js-btn-downloadReport', self.content).on('click', $.proxy(self.onDownloadReport, self));\r\n    },\r\n\r\n    onDownloadReport: function () {\r\n        var self = this;\r\n        self.dataService.downloadReportUser(bizagi.currentUser.idUser);\r\n    },\r\n\r\n    clean: function () {\r\n        var self = this;\r\n        $('#js-btn-downloadReport', self.content).off();\r\n    }\r\n  \r\n });\r\n \r\n bizagi.injector.register('bizagi.workportal.widgets.user.privacy', ['workportalFacade', 'dataService', 'notifier', bizagi.workportal.widgets.user.privacy]);\r\n ","/**\r\n * Name: Bizagi Workportal Users Modal\r\n */\r\n\r\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.users.modal\", {}, {\r\n    /**\r\n     * Constructor\r\n     */\r\n    init: function (workportalFacade, dataService, params) {\r\n        var self = this;\r\n        self.usuarios = params.data;\r\n        self.showActivityInfo = params.data.users !== undefined;\r\n        if (self.showActivityInfo) {\r\n            self.usuarios = params.data.users;\r\n            self.isActivity = params.data.isActivity;\r\n            self.activityName = params.data.activityName;\r\n        }\r\n        \r\n        // Call base\r\n        self._super(workportalFacade, dataService, params);\r\n\r\n        //Load template\r\n        self.loadTemplates({\r\n            \"users-modal\": bizagi.getTemplate(\"bizagi.workportal.desktop.widgets.users.modal\").concat(\"#users-modal\")\r\n        });\r\n\r\n    },\r\n \r\n    renderContent: function(){\r\n        var self = this;\r\n        var template = self.getTemplate('users-modal');\r\n        self.content = template.render({\r\n            usuarios: self.usuarios,\r\n            isActivity: self.isActivity,\r\n            activityName: self.activityName,\r\n            showActivityInfo: self.showActivityInfo\r\n        });\r\n        self.clickArrow(self.content);\r\n        return self.content;\r\n    },\r\n \r\n    postRender: function () {\r\n        var self = this;\r\n       \r\n    },\r\n\r\n    clean: function () {\r\n        var self = this;\r\n    },\r\n    clickArrow: function(context){\r\n        $(\".expand__arrow\", context).click(function(event){\r\n            var contentItemSelected = $(this).parent().parent();\r\n            if ($(\".users_collapse\", contentItemSelected).css('display') == 'none'){\r\n                $(this).addClass(\"expand__arrow--active\");\r\n                $(\".users_collapse\", contentItemSelected).show();\r\n            } else {\r\n                $(this).removeClass(\"expand__arrow--active\");\r\n                $(\".users_collapse\", contentItemSelected).hide();\r\n            }\r\n    \r\n        });\r\n    },\r\n  \r\n });\r\n \r\n bizagi.injector.register('bizagi.workportal.widgets.users.modal', ['workportalFacade', 'dataService', bizagi.workportal.widgets.users.modal]);\r\n ","bizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.accessDenied\", {}, {\r\n    /**\r\n     * Constructor\r\n     */\r\n    init: function (workportalFacade, dataService, params) {\r\n        var self = this;\r\n\r\n        // Call base\r\n        self._super(workportalFacade, dataService, params);\r\n\r\n        //Load template\r\n        self.loadTemplates({\r\n            \"access-denied\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.accessDenied\").concat(\"#access-denied\")\r\n        });\r\n    },\r\n\r\n    renderContent: function () {\r\n        var self = this;\r\n        var template = self.getTemplate('access-denied');\r\n        self.content = template.render({});\r\n        return self.content;\r\n    }\r\n});\r\n\r\nbizagi.injector.register('bizagi.workportal.widgets.accessDenied', ['workportalFacade', 'dataService', bizagi.workportal.widgets.accessDenied]);\r\n","/*\n * jsGrid v1.5.1 (http://js-grid.com)\n * (c) 2016 Artem Tabalin\n * Licensed under MIT (https://github.com/tabalinas/jsgrid/blob/master/LICENSE)\n */\n\n(function(window, $, undefined) {\n\n    var JSGRID = \"JSGrid\",\n        JSGRID_DATA_KEY = JSGRID,\n        JSGRID_ROW_DATA_KEY = \"JSGridItem\",\n        JSGRID_EDIT_ROW_DATA_KEY = \"JSGridEditRow\",\n\n        SORT_ORDER_ASC = \"asc\",\n        SORT_ORDER_DESC = \"desc\",\n\n        FIRST_PAGE_PLACEHOLDER = \"{first}\",\n        PAGES_PLACEHOLDER = \"{pages}\",\n        PREV_PAGE_PLACEHOLDER = \"{prev}\",\n        NEXT_PAGE_PLACEHOLDER = \"{next}\",\n        LAST_PAGE_PLACEHOLDER = \"{last}\",\n        PAGE_INDEX_PLACEHOLDER = \"{pageIndex}\",\n        PAGE_COUNT_PLACEHOLDER = \"{pageCount}\",\n        ITEM_COUNT_PLACEHOLDER = \"{itemCount}\",\n\n        EMPTY_HREF = \"javascript:void(0);\";\n\n    var getOrApply = function(value, context) {\n        if($.isFunction(value)) {\n            return value.apply(context, $.makeArray(arguments).slice(2));\n        }\n        return value;\n    };\n\n    var normalizePromise = function(promise) {\n        var d = $.Deferred();\n\n        if(promise && promise.then) {\n            promise.then(function() {\n                d.resolve.apply(d, arguments);\n            }, function() {\n                d.reject.apply(d, arguments);\n            });\n        } else {\n            d.resolve(promise);\n        }\n\n        return d.promise();\n    };\n\n    var defaultController = {\n        loadData: $.noop,\n        insertItem: $.noop,\n        updateItem: $.noop,\n        deleteItem: $.noop\n    };\n\n\n    function Grid(element, config) {\n        var $element = $(element);\n\n        $element.data(JSGRID_DATA_KEY, this);\n\n        this._container = $element;\n\n        this.data = [];\n        this.fields = [];\n\n        this._editingRow = null;\n        this._sortField = null;\n        this._sortOrder = SORT_ORDER_ASC;\n        this._firstDisplayingPage = 1;\n\n        this._init(config);\n        this.render();\n    }\n\n    Grid.prototype = {\n        width: \"auto\",\n        height: \"auto\",\n        updateOnResize: true,\n\n        rowClass: $.noop,\n        rowRenderer: null,\n\n        rowClick: function(args) {\n            if(this.editing) {\n                this.editItem($(args.event.target).closest(\"tr\"));\n            }\n        },\n        rowDoubleClick: $.noop,\n\n        noDataContent: \"Not found\",\n        noDataRowClass: \"jsgrid-nodata-row\",\n\n        heading: true,\n        headerRowRenderer: null,\n        headerRowClass: \"jsgrid-header-row\",\n        headerCellClass: \"jsgrid-header-cell\",\n\n        filtering: false,\n        filterRowRenderer: null,\n        filterRowClass: \"jsgrid-filter-row\",\n\n        inserting: false,\n        insertRowRenderer: null,\n        insertRowClass: \"jsgrid-insert-row\",\n\n        editing: false,\n        editRowRenderer: null,\n        editRowClass: \"jsgrid-edit-row\",\n\n        confirmDeleting: true,\n        deleteConfirm: \"Are you sure?\",\n\n        selecting: true,\n        selectedRowClass: \"jsgrid-selected-row\",\n        oddRowClass: \"jsgrid-row\",\n        evenRowClass: \"jsgrid-alt-row\",\n        cellClass: \"jsgrid-cell\",\n\n        sorting: false,\n        sortableClass: \"jsgrid-header-sortable\",\n        sortAscClass: \"jsgrid-header-sort jsgrid-header-sort-asc\",\n        sortDescClass: \"jsgrid-header-sort jsgrid-header-sort-desc\",\n\n        paging: false,\n        pagerContainer: null,\n        pageIndex: 1,\n        pageSize: 20,\n        pageButtonCount: 15,\n        pagerFormat: \"Pages: {first} {prev} {pages} {next} {last} &nbsp;&nbsp; {pageIndex} of {pageCount}\",\n        pagePrevText: \"Prev\",\n        pageNextText: \"Next\",\n        pageFirstText: \"First\",\n        pageLastText: \"Last\",\n        pageNavigatorNextText: \"...\",\n        pageNavigatorPrevText: \"...\",\n        pagerContainerClass: \"jsgrid-pager-container\",\n        pagerClass: \"jsgrid-pager\",\n        pagerNavButtonClass: \"jsgrid-pager-nav-button\",\n        pagerNavButtonInactiveClass: \"jsgrid-pager-nav-inactive-button\",\n        pageClass: \"jsgrid-pager-page\",\n        currentPageClass: \"jsgrid-pager-current-page\",\n\n        customLoading: false,\n        pageLoading: false,\n\n        autoload: false,\n        controller: defaultController,\n\n        loadIndication: true,\n        loadIndicationDelay: 500,\n        loadMessage: \"Please, wait...\",\n        loadShading: true,\n\n        invalidMessage: \"Invalid data entered!\",\n\n        invalidNotify: function(args) {\n            var messages = $.map(args.errors, function(error) {\n                return error.message || null;\n            });\n\n            window.alert([this.invalidMessage].concat(messages).join(\"\\n\"));\n        },\n\n        onInit: $.noop,\n        onRefreshing: $.noop,\n        onRefreshed: $.noop,\n        onPageChanged: $.noop,\n        onItemDeleting: $.noop,\n        onItemDeleted: $.noop,\n        onItemInserting: $.noop,\n        onItemInserted: $.noop,\n        onItemEditing: $.noop,\n        onItemUpdating: $.noop,\n        onItemUpdated: $.noop,\n        onItemInvalid: $.noop,\n        onDataLoading: $.noop,\n        onDataLoaded: $.noop,\n        onOptionChanging: $.noop,\n        onOptionChanged: $.noop,\n        onError: $.noop,\n\n        invalidClass: \"jsgrid-invalid\",\n\n        containerClass: \"jsgrid\",\n        tableClass: \"jsgrid-table\",\n        gridHeaderClass: \"jsgrid-grid-header\",\n        gridBodyClass: \"jsgrid-grid-body\",\n\n        _init: function(config) {\n            $.extend(this, config);\n            this._initLoadStrategy();\n            this._initController();\n            this._initFields();\n            this._attachWindowLoadResize();\n            this._attachWindowResizeCallback();\n            this._callEventHandler(this.onInit)\n        },\n\n        loadStrategy: function() {\n            return this.pageLoading\n                ? new jsGrid.loadStrategies.PageLoadingStrategy(this)\n                : new jsGrid.loadStrategies.DirectLoadingStrategy(this);\n        },\n\n        _initLoadStrategy: function() {\n            this._loadStrategy = getOrApply(this.loadStrategy, this);\n        },\n\n        _initController: function() {\n            this._controller = $.extend({}, defaultController, getOrApply(this.controller, this));\n        },\n\n        renderTemplate: function(source, context, config) {\n            args = [];\n            for(var key in config) {\n                args.push(config[key]);\n            }\n\n            args.unshift(source, context);\n\n            source = getOrApply.apply(null, args);\n            return (source === undefined || source === null) ? \"\" : source;\n        },\n\n        loadIndicator: function(config) {\n            return new jsGrid.LoadIndicator(config);\n        },\n\n        validation: function(config) {\n            return jsGrid.Validation && new jsGrid.Validation(config);\n        },\n\n        _initFields: function() {\n            var self = this;\n            self.fields = $.map(self.fields, function(field) {\n                if($.isPlainObject(field)) {\n                    var fieldConstructor = (field.type && jsGrid.fields[field.type]) || jsGrid.Field;\n                    field = new fieldConstructor(field);\n                }\n                field._grid = self;\n                return field;\n            });\n        },\n\n        _attachWindowLoadResize: function() {\n            $(window).on(\"load\", $.proxy(this._refreshSize, this));\n        },\n\n        _attachWindowResizeCallback: function() {\n            if(this.updateOnResize) {\n                $(window).on(\"resize\", $.proxy(this._refreshSize, this));\n            }\n        },\n\n        _detachWindowResizeCallback: function() {\n            $(window).off(\"resize\", this._refreshSize);\n        },\n\n        option: function(key, value) {\n            var optionChangingEventArgs,\n                optionChangedEventArgs;\n\n            if(arguments.length === 1)\n                return this[key];\n\n            optionChangingEventArgs = {\n                option: key,\n                oldValue: this[key],\n                newValue: value\n            };\n            this._callEventHandler(this.onOptionChanging, optionChangingEventArgs);\n\n            this._handleOptionChange(optionChangingEventArgs.option, optionChangingEventArgs.newValue);\n\n            optionChangedEventArgs = {\n                option: optionChangingEventArgs.option,\n                value: optionChangingEventArgs.newValue\n            };\n            this._callEventHandler(this.onOptionChanged, optionChangedEventArgs);\n        },\n\n        fieldOption: function(field, key, value) {\n            field = this._normalizeField(field);\n\n            if(arguments.length === 2)\n                return field[key];\n\n            field[key] = value;\n            this._renderGrid();\n        },\n\n        _handleOptionChange: function(name, value) {\n            this[name] = value;\n\n            switch(name) {\n                case \"width\":\n                case \"height\":\n                    this._refreshSize();\n                    break;\n                case \"rowClass\":\n                case \"rowRenderer\":\n                case \"rowClick\":\n                case \"rowDoubleClick\":\n                case \"noDataRowClass\":\n                case \"noDataContent\":\n                case \"selecting\":\n                case \"selectedRowClass\":\n                case \"oddRowClass\":\n                case \"evenRowClass\":\n                    this._refreshContent();\n                    break;\n                case \"pageButtonCount\":\n                case \"pagerFormat\":\n                case \"pagePrevText\":\n                case \"pageNextText\":\n                case \"pageFirstText\":\n                case \"pageLastText\":\n                case \"pageNavigatorNextText\":\n                case \"pageNavigatorPrevText\":\n                case \"pagerClass\":\n                case \"pagerNavButtonClass\":\n                case \"pageClass\":\n                case \"currentPageClass\":\n                case \"pagerRenderer\":\n                    this._refreshPager();\n                    break;\n                case \"fields\":\n                    this._initFields();\n                    this.render();\n                    break;\n                case \"data\":\n                case \"editing\":\n                case \"heading\":\n                case \"filtering\":\n                case \"inserting\":\n                case \"paging\":\n                    this.refresh();\n                    break;\n                case \"loadStrategy\":\n                case \"pageLoading\":\n                    this._initLoadStrategy();\n                    this.search();\n                    break;\n                case \"pageIndex\":\n                    this.openPage(value);\n                    break;\n                case \"pageSize\":\n                    this.refresh();\n                    this.search();\n                    break;\n                case \"editRowRenderer\":\n                case \"editRowClass\":\n                    this.cancelEdit();\n                    break;\n                case \"updateOnResize\":\n                    this._detachWindowResizeCallback();\n                    this._attachWindowResizeCallback();\n                    break;\n                case \"invalidNotify\":\n                case \"invalidMessage\":\n                    break;\n                default:\n                    this.render();\n                    break;\n            }\n        },\n\n        destroy: function() {\n            this._detachWindowResizeCallback();\n            this._clear();\n            this._container.removeData(JSGRID_DATA_KEY);\n        },\n\n        render: function() {\n            this._renderGrid();\n            return this.autoload ? this.loadData() : $.Deferred().resolve().promise();\n        },\n\n        _renderGrid: function() {\n            this._clear();\n\n            this._container.addClass(this.containerClass)\n                .css(\"position\", \"relative\")\n                .append(this._createHeader())\n                .append(this._createBody());\n\n            this._pagerContainer = this._createPagerContainer();\n            this._loadIndicator = this._createLoadIndicator();\n            this._validation = this._createValidation();\n\n            this.refresh();\n        },\n\n        _createLoadIndicator: function() {\n            return getOrApply(this.loadIndicator, this, {\n                message: this.loadMessage,\n                shading: this.loadShading,\n                container: this._container\n            });\n        },\n\n        _createValidation: function() {\n            return getOrApply(this.validation, this);\n        },\n\n        _clear: function() {\n            this.cancelEdit();\n\n            clearTimeout(this._loadingTimer);\n\n            this._pagerContainer && this._pagerContainer.empty();\n\n            this._container.empty()\n                .css({ position: \"\", width: \"\", height: \"\" });\n        },\n\n        _createHeader: function() {\n            var $headerRow = this._headerRow = this._createHeaderRow(),\n                $filterRow = this._filterRow = this._createFilterRow(),\n                $insertRow = this._insertRow = this._createInsertRow();\n\n            var $headerGrid = this._headerGrid = $(\"<table>\").addClass(this.tableClass)\n                .append($headerRow)\n                .append($filterRow)\n                .append($insertRow);\n\n            var $header = this._header = $(\"<div>\").addClass(this.gridHeaderClass)\n                .addClass(this._scrollBarWidth() ? \"jsgrid-header-scrollbar\" : \"\")\n                .append($headerGrid);\n\n            return $header;\n        },\n\n        _createBody: function() {\n            var $content = this._content = $(\"<tbody>\");\n\n            var $bodyGrid = this._bodyGrid = $(\"<table>\").addClass(this.tableClass)\n                .append($content);\n\n            var $body = this._body = $(\"<div>\").addClass(this.gridBodyClass)\n                .append($bodyGrid)\n                .on(\"scroll\", $.proxy(function(e) {\n                    this._header.scrollLeft(e.target.scrollLeft);\n                }, this));\n\n            return $body;\n        },\n\n        _createPagerContainer: function() {\n            var pagerContainer = this.pagerContainer || $(\"<div>\").appendTo(this._container);\n            return $(pagerContainer).addClass(this.pagerContainerClass);\n        },\n\n        _eachField: function(callBack) {\n            var self = this;\n            $.each(this.fields, function(index, field) {\n                if(field.visible) {\n                    callBack.call(self, field, index);\n                }\n            });\n        },\n\n        _createHeaderRow: function() {\n            if($.isFunction(this.headerRowRenderer))\n                return $(this.renderTemplate(this.headerRowRenderer, this));\n\n            var $result = $(\"<tr>\").addClass(this.headerRowClass);\n\n            this._eachField(function(field, index) {\n                var $th = this._prepareCell(\"<th>\", field, \"headercss\", this.headerCellClass)\n                    .append(this.renderTemplate(field.headerTemplate, field))\n                    .appendTo($result);\n\n                if(this.sorting && field.sorting) {\n                    $th.addClass(this.sortableClass)\n                        .on(\"click\", $.proxy(function() {\n                            this.sort(index);\n                        }, this));\n                }\n            });\n\n            return $result;\n        },\n\n        _prepareCell: function(cell, field, cssprop, cellClass) {\n            return $(cell).css(\"width\", field.width)\n                .addClass(cellClass || this.cellClass)\n                .addClass((cssprop && field[cssprop]) || field.css)\n                .addClass(field.align ? (\"jsgrid-align-\" + field.align) : \"\");\n        },\n\n        _createFilterRow: function() {\n            if($.isFunction(this.filterRowRenderer))\n                return $(this.renderTemplate(this.filterRowRenderer, this));\n\n            var $result = $(\"<tr>\").addClass(this.filterRowClass);\n\n            this._eachField(function(field) {\n                this._prepareCell(\"<td>\", field, \"filtercss\")\n                    .append(this.renderTemplate(field.filterTemplate, field))\n                    .appendTo($result);\n            });\n\n            return $result;\n        },\n\n        _createInsertRow: function() {\n            if($.isFunction(this.insertRowRenderer))\n                return $(this.renderTemplate(this.insertRowRenderer, this));\n\n            var $result = $(\"<tr>\").addClass(this.insertRowClass);\n\n            this._eachField(function(field) {\n                this._prepareCell(\"<td>\", field, \"insertcss\")\n                    .append(this.renderTemplate(field.insertTemplate, field))\n                    .appendTo($result);\n            });\n\n            return $result;\n        },\n\n        _callEventHandler: function(handler, eventParams) {\n            handler.call(this, $.extend(eventParams, {\n                grid: this\n            }));\n\n            return eventParams;\n        },\n\n        reset: function() {\n            this._resetSorting();\n            this._resetPager();\n            return this._loadStrategy.reset();\n        },\n\n        _resetPager: function() {\n            this._firstDisplayingPage = 1;\n            this._setPage(1);\n        },\n\n        _resetSorting: function() {\n            this._sortField = null;\n            this._sortOrder = SORT_ORDER_ASC;\n            this._clearSortingCss();\n        },\n\n        refresh: function() {\n            this._callEventHandler(this.onRefreshing);\n\n            this.cancelEdit();\n\n            this._refreshHeading();\n            this._refreshFiltering();\n            this._refreshInserting();\n            this._refreshContent();\n            this._refreshPager();\n            this._refreshSize();\n\n            this._callEventHandler(this.onRefreshed);\n        },\n\n        _refreshHeading: function() {\n            this._headerRow.toggle(this.heading);\n        },\n\n        _refreshFiltering: function() {\n            this._filterRow.toggle(this.filtering);\n        },\n\n        _refreshInserting: function() {\n            this._insertRow.toggle(this.inserting);\n        },\n\n        _refreshContent: function() {\n            var $content = this._content;\n            $content.empty();\n\n            if(!this.data.length) {\n                $content.append(this._createNoDataRow());\n                return this;\n            }\n\n            var indexFrom = this._loadStrategy.firstDisplayIndex();\n            var indexTo = this._loadStrategy.lastDisplayIndex();\n\n            for(var itemIndex = indexFrom; itemIndex < indexTo; itemIndex++) {\n                var item = this.data[itemIndex];\n                $content.append(this._createRow(item, itemIndex));\n            }\n        },\n\n        _createNoDataRow: function() {\n            var amountOfFields = 0;\n            this._eachField(function() {\n                amountOfFields++;\n            });\n\n            return $(\"<tr>\").addClass(this.noDataRowClass)\n                .append($(\"<td>\").attr(\"colspan\", amountOfFields)\n                    .append(this.renderTemplate(this.noDataContent, this)));\n        },\n\n        _createRow: function(item, itemIndex) {\n            var $result;\n\n            if($.isFunction(this.rowRenderer)) {\n                $result = this.renderTemplate(this.rowRenderer, this, { item: item, itemIndex: itemIndex });\n            } else {\n                $result = $(\"<tr>\");\n                this._renderCells($result, item);\n            }\n\n            $result.addClass(this._getRowClasses(item, itemIndex))\n                .data(JSGRID_ROW_DATA_KEY, item)\n                .on(\"click\", $.proxy(function(e) {\n                    this.rowClick({\n                        item: item,\n                        itemIndex: itemIndex,\n                        event: e\n                    });\n                }, this))\n                .on(\"dblclick\", $.proxy(function(e) {\n                    this.rowDoubleClick({\n                        item: item,\n                        itemIndex: itemIndex,\n                        event: e\n                    });\n                }, this));\n\n            if(this.selecting) {\n                this._attachRowHover($result);\n            }\n\n            return $result;\n        },\n\n        _getRowClasses: function(item, itemIndex) {\n            var classes = [];\n            classes.push(((itemIndex + 1) % 2) ? this.oddRowClass : this.evenRowClass);\n            classes.push(getOrApply(this.rowClass, this, item, itemIndex));\n            return classes.join(\" \");\n        },\n\n        _attachRowHover: function($row) {\n            var selectedRowClass = this.selectedRowClass;\n            $row.hover(function() {\n                    $(this).addClass(selectedRowClass);\n                },\n                function() {\n                    $(this).removeClass(selectedRowClass);\n                }\n            );\n        },\n\n        _renderCells: function($row, item) {\n            this._eachField(function(field) {\n                $row.append(this._createCell(item, field));\n            });\n            return this;\n        },\n\n        _createCell: function(item, field) {\n            var $result;\n            var fieldValue = this._getItemFieldValue(item, field);\n\n            var args = { value: fieldValue, item : item };\n            if($.isFunction(field.cellRenderer)) {\n                $result = this.renderTemplate(field.cellRenderer, field, args);\n            } else {\n                $result = $(\"<td>\").append(this.renderTemplate(field.itemTemplate || fieldValue, field, args));\n            }\n\n            return this._prepareCell($result, field);\n        },\n\n        _getItemFieldValue: function(item, field) {\n            var props = field.name.split('.');\n            var result = item[props.shift()];\n\n            while(result && props.length) {\n                result = result[props.shift()];\n            }\n\n            return result;\n        },\n\n        _setItemFieldValue: function(item, field, value) {\n            var props = field.name.split('.');\n            var current = item;\n            var prop = props[0];\n\n            while(current && props.length) {\n                item = current;\n                prop = props.shift();\n                current = item[prop];\n            }\n\n            if(!current) {\n                while(props.length) {\n                    item = item[prop] = {};\n                    prop = props.shift();\n                }\n            }\n\n            item[prop] = value;\n        },\n\n        sort: function(field, order) {\n            if($.isPlainObject(field)) {\n                order = field.order;\n                field = field.field;\n            }\n\n            this._clearSortingCss();\n            this._setSortingParams(field, order);\n            this._setSortingCss();\n            return this._loadStrategy.sort();\n        },\n\n        _clearSortingCss: function() {\n            this._headerRow.find(\"th\")\n                .removeClass(this.sortAscClass)\n                .removeClass(this.sortDescClass);\n        },\n\n        _setSortingParams: function(field, order) {\n            field = this._normalizeField(field);\n            order = order || ((this._sortField === field) ? this._reversedSortOrder(this._sortOrder) : SORT_ORDER_ASC);\n\n            this._sortField = field;\n            this._sortOrder = order;\n        },\n\n        _normalizeField: function(field) {\n            if($.isNumeric(field)) {\n                return this.fields[field];\n            }\n\n            if(typeof field === \"string\") {\n                return $.grep(this.fields, function(f) {\n                    return f.name === field;\n                })[0];\n            }\n\n            return field;\n        },\n\n        _reversedSortOrder: function(order) {\n            return (order === SORT_ORDER_ASC ? SORT_ORDER_DESC : SORT_ORDER_ASC);\n        },\n\n        _setSortingCss: function() {\n            var fieldIndex = this._visibleFieldIndex(this._sortField);\n\n            this._headerRow.find(\"th\").eq(fieldIndex)\n                .addClass(this._sortOrder === SORT_ORDER_ASC ? this.sortAscClass : this.sortDescClass);\n        },\n\n        _visibleFieldIndex: function(field) {\n            return $.inArray(field, $.grep(this.fields, function(f) { return f.visible; }));\n        },\n\n        _sortData: function() {\n            var sortFactor = this._sortFactor(),\n                sortField = this._sortField;\n\n            if(sortField) {\n                this.data.sort(function(item1, item2) {\n                    return sortFactor * sortField.sortingFunc(item1[sortField.name], item2[sortField.name]);\n                });\n            }\n        },\n\n        _sortFactor: function() {\n            return this._sortOrder === SORT_ORDER_ASC ? 1 : -1;\n        },\n\n        _itemsCount: function() {\n            return this._loadStrategy.itemsCount();\n        },\n\n        _pagesCount: function() {\n            var itemsCount = this._itemsCount(),\n                pageSize = this.pageSize;\n            return Math.floor(itemsCount / pageSize) + (itemsCount % pageSize ? 1 : 0);\n        },\n\n        _refreshPager: function() {\n            var $pagerContainer = this._pagerContainer;\n            $pagerContainer.empty();\n\n            if(this.paging) {\n                $pagerContainer.append(this._createPager());\n            }\n\n            var showPager = this.paging && this._pagesCount() > 1;\n            $pagerContainer.toggle(showPager);\n        },\n\n        _createPager: function() {\n            var $result;\n\n            if($.isFunction(this.pagerRenderer)) {\n                $result = $(this.pagerRenderer({\n                    pageIndex: this.pageIndex,\n                    pageCount: this._pagesCount()\n                }));\n            } else {\n                $result = $(\"<div>\").append(this._createPagerByFormat());\n            }\n\n            $result.addClass(this.pagerClass);\n\n            return $result;\n        },\n\n        _createPagerByFormat: function() {\n            var pageIndex = this.pageIndex,\n                pageCount = this._pagesCount(),\n                itemCount = this._itemsCount(),\n                pagerParts = this.pagerFormat.split(\" \");\n\n            return $.map(pagerParts, $.proxy(function(pagerPart) {\n                var result = pagerPart;\n\n                if(pagerPart === PAGES_PLACEHOLDER) {\n                    result = this._createPages();\n                } else if(pagerPart === FIRST_PAGE_PLACEHOLDER) {\n                    result = this._createPagerNavButton(this.pageFirstText, 1, pageIndex > 1);\n                } else if(pagerPart === PREV_PAGE_PLACEHOLDER) {\n                    result = this._createPagerNavButton(this.pagePrevText, pageIndex - 1, pageIndex > 1);\n                } else if(pagerPart === NEXT_PAGE_PLACEHOLDER) {\n                    result = this._createPagerNavButton(this.pageNextText, pageIndex + 1, pageIndex < pageCount);\n                } else if(pagerPart === LAST_PAGE_PLACEHOLDER) {\n                    result = this._createPagerNavButton(this.pageLastText, pageCount, pageIndex < pageCount);\n                } else if(pagerPart === PAGE_INDEX_PLACEHOLDER) {\n                    result = pageIndex;\n                } else if(pagerPart === PAGE_COUNT_PLACEHOLDER) {\n                    result = pageCount;\n                } else if(pagerPart === ITEM_COUNT_PLACEHOLDER) {\n                    result = itemCount;\n                }\n\n                return $.isArray(result) ? result.concat([\" \"]) : [result, \" \"];\n            }, this));\n        },\n\n        _createPages: function() {\n            var pageCount = this._pagesCount(),\n                pageButtonCount = this.pageButtonCount,\n                firstDisplayingPage = this._firstDisplayingPage,\n                pages = [];\n\n            if(firstDisplayingPage > 1) {\n                pages.push(this._createPagerPageNavButton(this.pageNavigatorPrevText, this.showPrevPages));\n            }\n\n            for(var i = 0, pageNumber = firstDisplayingPage; i < pageButtonCount && pageNumber <= pageCount; i++, pageNumber++) {\n                pages.push(pageNumber === this.pageIndex\n                    ? this._createPagerCurrentPage()\n                    : this._createPagerPage(pageNumber));\n            }\n\n            if((firstDisplayingPage + pageButtonCount - 1) < pageCount) {\n                pages.push(this._createPagerPageNavButton(this.pageNavigatorNextText, this.showNextPages));\n            }\n\n            return pages;\n        },\n\n        _createPagerNavButton: function(text, pageIndex, isActive) {\n            return this._createPagerButton(text, this.pagerNavButtonClass + (isActive ? \"\" : \" \" + this.pagerNavButtonInactiveClass),\n                isActive ? function() { this.openPage(pageIndex); } : $.noop);\n        },\n\n        _createPagerPageNavButton: function(text, handler) {\n            return this._createPagerButton(text, this.pagerNavButtonClass, handler);\n        },\n\n        _createPagerPage: function(pageIndex) {\n            return this._createPagerButton(pageIndex, this.pageClass, function() {\n                this.openPage(pageIndex);\n            });\n        },\n\n        _createPagerButton: function(text, css, handler) {\n            var $link = $(\"<a>\").attr(\"href\", EMPTY_HREF)\n                .html(text)\n                .on(\"click\", $.proxy(handler, this));\n\n            return $(\"<span>\").addClass(css).append($link);\n        },\n\n        _createPagerCurrentPage: function() {\n            return $(\"<span>\")\n                .addClass(this.pageClass)\n                .addClass(this.currentPageClass)\n                .text(this.pageIndex);\n        },\n\n        _refreshSize: function() {\n            this._refreshHeight();\n            this._refreshWidth();\n        },\n\n        _refreshWidth: function() {\n            var $headerGrid = this._headerGrid,\n                $bodyGrid = this._bodyGrid,\n                width = this.width;\n\n            if(width === \"auto\") {\n                $headerGrid.width(\"auto\");\n                width = $headerGrid.outerWidth();\n            }\n\n            $headerGrid.width(\"\");\n            $bodyGrid.width(\"\");\n            this._container.width(width);\n            width = $headerGrid.outerWidth();\n            $bodyGrid.width(width);\n        },\n\n        _scrollBarWidth: (function() {\n            var result;\n\n            return function() {\n                if(result === undefined) {\n                    var $ghostContainer = $(\"<div style='width:50px;height:50px;overflow:hidden;position:absolute;top:-10000px;left:-10000px;'></div>\");\n                    var $ghostContent = $(\"<div style='height:100px;'></div>\");\n                    $ghostContainer.append($ghostContent).appendTo(\"body\");\n                    var width = $ghostContent.innerWidth();\n                    $ghostContainer.css(\"overflow-y\", \"auto\");\n                    var widthExcludingScrollBar = $ghostContent.innerWidth();\n                    $ghostContainer.remove();\n                    result = width - widthExcludingScrollBar;\n                }\n                return result;\n            };\n        })(),\n\n        _refreshHeight: function() {\n            var container = this._container,\n                pagerContainer = this._pagerContainer,\n                height = this.height,\n                nonBodyHeight;\n\n            container.height(height);\n\n            if(height !== \"auto\") {\n                height = container.height();                \n\n                nonBodyHeight = this._header.outerHeight(true);                               \n                if(pagerContainer.parents(container).length) {\n                    nonBodyHeight += pagerContainer.outerHeight(true);\n                }\n                if (nonBodyHeight === 0) {\r\n                    nonBodyHeight = 41; //Bug: Subtract header height the first time.\r\n                    if (pagerContainer.style(\"display\") !== \"none\") {\r\n                        nonBodyHeight += 29; //Bug: Subtract pageContainer height the first time.\r\n                    }                      \r\n                }\n                \n                this._body.outerHeight(height - nonBodyHeight);\n            }\n        },\n\n        showPrevPages: function() {\n            var firstDisplayingPage = this._firstDisplayingPage,\n                pageButtonCount = this.pageButtonCount;\n\n            this._firstDisplayingPage = (firstDisplayingPage > pageButtonCount) ? firstDisplayingPage - pageButtonCount : 1;\n\n            this._refreshPager();\n        },\n\n        showNextPages: function() {\n            var firstDisplayingPage = this._firstDisplayingPage,\n                pageButtonCount = this.pageButtonCount,\n                pageCount = this._pagesCount();\n\n            this._firstDisplayingPage = (firstDisplayingPage + 2 * pageButtonCount > pageCount)\n                ? pageCount - pageButtonCount + 1\n                : firstDisplayingPage + pageButtonCount;\n\n            this._refreshPager();\n        },\n\n        openPage: function(pageIndex) {\n            if(pageIndex < 1 || pageIndex > this._pagesCount())\n                return;\n\n            this._setPage(pageIndex);\n            this._loadStrategy.openPage(pageIndex);\n        },\n\n        _setPage: function(pageIndex) {\n            var firstDisplayingPage = this._firstDisplayingPage,\n                pageButtonCount = this.pageButtonCount;\n\n            this.pageIndex = pageIndex;\n\n            if(pageIndex < firstDisplayingPage) {\n                this._firstDisplayingPage = pageIndex;\n            }\n\n            if(pageIndex > firstDisplayingPage + pageButtonCount - 1) {\n                this._firstDisplayingPage = pageIndex - pageButtonCount + 1;\n            }\n\n            this._callEventHandler(this.onPageChanged, {\n                pageIndex: pageIndex\n            });\n        },\n\n        _controllerCall: function(method, param, isCanceled, doneCallback) {\n            if(isCanceled)\n                return $.Deferred().reject().promise();\n\n            this._showLoading();\n\n            var controller = this._controller;\n            if(!controller || !controller[method]) {\n                throw Error(\"controller has no method '\" + method + \"'\");\n            }\n\n            return normalizePromise(controller[method](param))\n                .done($.proxy(doneCallback, this))\n                .fail($.proxy(this._errorHandler, this))\n                .always($.proxy(this._hideLoading, this));\n        },\n\n        _errorHandler: function() {\n            this._callEventHandler(this.onError, {\n                args: $.makeArray(arguments)\n            });\n        },\n\n        _showLoading: function() {\n            if(!this.loadIndication)\n                return;\n\n            clearTimeout(this._loadingTimer);\n\n            this._loadingTimer = setTimeout($.proxy(function() {\n                this._loadIndicator.show();\n            }, this), this.loadIndicationDelay);\n        },\n\n        _hideLoading: function() {\n            if(!this.loadIndication)\n                return;\n\n            clearTimeout(this._loadingTimer);\n            this._loadIndicator.hide();\n        },\n\n        search: function(filter) {\n            this._resetSorting();\n            this._resetPager();\n            return this.loadData(filter);\n        },\n\n        loadData: function(filter) {\n            filter = filter || (this.filtering ? this.getFilter() : {});\n\n            $.extend(filter, this._loadStrategy.loadParams(), this._sortingParams());\n\n            var args = this._callEventHandler(this.onDataLoading, {\n                filter: filter\n            });\n\n            return this._controllerCall(\"loadData\", filter, args.cancel, function(loadedData) {\n                if(!loadedData)\n                    return;\n\n                this._loadStrategy.finishLoad(loadedData);\n\n                this._callEventHandler(this.onDataLoaded, {\n                    data: loadedData\n                });\n            });\n        },\n\n        getFilter: function() {\n            var result = {};\n            this._eachField(function(field) {\n                if(field.filtering) {\n                    this._setItemFieldValue(result, field, field.filterValue());\n                }\n            });\n            return result;\n        },\n\n        _sortingParams: function() {\n            if(this.sorting && this._sortField) {\n                return {\n                    sortField: this._sortField.name,\n                    sortOrder: this._sortOrder\n                };\n            }\n            return {};\n        },\n\n        getSorting: function() {\n            var sortingParams = this._sortingParams();\n            return {\n                field: sortingParams.sortField,\n                order: sortingParams.sortOrder\n            };\n        },\n\n        clearFilter: function() {\n            var $filterRow = this._createFilterRow();\n            this._filterRow.replaceWith($filterRow);\n            this._filterRow = $filterRow;\n            return this.search();\n        },\n\n        insertItem: function(item) {\n            var insertingItem = item || this._getValidatedInsertItem();\n\n            if(!insertingItem)\n                return $.Deferred().reject().promise();\n\n            var args = this._callEventHandler(this.onItemInserting, {\n                item: insertingItem\n            });\n\n            return this._controllerCall(\"insertItem\", insertingItem, args.cancel, function(insertedItem) {\n                insertedItem = insertedItem || insertingItem;\n                this._loadStrategy.finishInsert(insertedItem);\n\n                this._callEventHandler(this.onItemInserted, {\n                    item: insertedItem\n                });\n            });\n        },\n\n        _getValidatedInsertItem: function() {\n            var item = this._getInsertItem();\n            return this._validateItem(item, this._insertRow) ? item : null;\n        },\n\n        _getInsertItem: function() {\n            var result = {};\n            this._eachField(function(field) {\n                if(field.inserting) {\n                    this._setItemFieldValue(result, field, field.insertValue());\n                }\n            });\n            return result;\n        },\n\n        _validateItem: function(item, $row) {\n            var validationErrors = [];\n\n            var args = {\n                item: item,\n                itemIndex: this._rowIndex($row),\n                row: $row\n            };\n\n            this._eachField(function(field) {\n                if(!field.validate)\n                    return;\n\n                var fieldValue = this._getItemFieldValue(item, field);\n\n                if(fieldValue === undefined)\n                    return;\n\n                var errors = this._validation.validate($.extend({\n                    value: fieldValue,\n                    rules: field.validate\n                }, args));\n\n                this._setCellValidity($row.children().eq(this._visibleFieldIndex(field)), errors);\n\n                if(!errors.length)\n                    return;\n\n                validationErrors.push.apply(validationErrors,\n                    $.map(errors, function(message) {\n                        return { field: field, message: message };\n                    }));\n            });\n\n            if(!validationErrors.length)\n                return true;\n\n            var invalidArgs = $.extend({\n                errors: validationErrors\n            }, args);\n            this._callEventHandler(this.onItemInvalid, invalidArgs);\n            this.invalidNotify(invalidArgs);\n\n            return false;\n        },\n\n        _setCellValidity: function($cell, errors) {\n            $cell\n                .toggleClass(this.invalidClass, !!errors.length)\n                .attr(\"title\", errors.join(\"\\n\"));\n        },\n\n        clearInsert: function() {\n            var insertRow = this._createInsertRow();\n            this._insertRow.replaceWith(insertRow);\n            this._insertRow = insertRow;\n            this.refresh();\n        },\n\n        editItem: function(item) {\n            var $row = this.rowByItem(item);\n            if($row.length) {\n                this._editRow($row);\n            }\n        },\n\n        rowByItem: function(item) {\n            if(item.jquery || item.nodeType)\n                return $(item);\n\n            return this._content.find(\"tr\").filter(function() {\n                return $.data(this, JSGRID_ROW_DATA_KEY) === item;\n            });\n        },\n\n        _editRow: function($row) {\n            if(!this.editing)\n                return;\n\n            var item = $row.data(JSGRID_ROW_DATA_KEY);\n\n            var args = this._callEventHandler(this.onItemEditing, {\n                row: $row,\n                item: item,\n                itemIndex: this._itemIndex(item)\n            });\n\n            if(args.cancel)\n                return;\n\n            if(this._editingRow) {\n                this.cancelEdit();\n            }\n\n            var $editRow = this._createEditRow(item);\n\n            this._editingRow = $row;\n            $row.hide();\n            $editRow.insertBefore($row);\n            $row.data(JSGRID_EDIT_ROW_DATA_KEY, $editRow);\n        },\n\n        _createEditRow: function(item) {\n            if($.isFunction(this.editRowRenderer)) {\n                return $(this.renderTemplate(field.editRowRenderer, field, { item: item, itemIndex: this._itemIndex(item) }));\n            }\n\n            var $result = $(\"<tr>\").addClass(this.editRowClass);\n\n            this._eachField(function(field) {\n                var fieldValue = this._getItemFieldValue(item, field);\n\n                this._prepareCell(\"<td>\", field, \"editcss\")\n                    .append(this.renderTemplate(field.editTemplate || \"\", field, { value: fieldValue, item: item }))\n                    .appendTo($result);\n            });\n\n            return $result;\n        },\n\n        updateItem: function(item, editedItem) {\n            if(arguments.length === 1) {\n                editedItem = item;\n            }\n\n            var $row = item ? this.rowByItem(item) : this._editingRow;\n            editedItem = editedItem || this._getValidatedEditedItem();\n\n            if(!editedItem)\n                return;\n\n            return this._updateRow($row, editedItem);\n        },\n\n        _getValidatedEditedItem: function() {\n            var item = this._getEditedItem();\n            return this._validateItem(item, this._getEditRow()) ? item : null;\n        },\n\n        _updateRow: function($updatingRow, editedItem) {\n            var updatingItem = $updatingRow.data(JSGRID_ROW_DATA_KEY),\n                updatingItemIndex = this._itemIndex(updatingItem),\n                previousItem = $.extend(true, {}, updatingItem);\n\n            $.extend(true, updatingItem, editedItem);\n\n            var args = this._callEventHandler(this.onItemUpdating, {\n                row: $updatingRow,\n                item: updatingItem,\n                itemIndex: updatingItemIndex,\n                previousItem: previousItem\n            });\n\n            return this._controllerCall(\"updateItem\", updatingItem, args.cancel, function(updatedItem) {\n                updatedItem = updatedItem || updatingItem;\n                var $updatedRow = this._finishUpdate($updatingRow, updatedItem, updatingItemIndex);\n\n                this._callEventHandler(this.onItemUpdated, {\n                    row: $updatedRow,\n                    item: updatedItem,\n                    itemIndex: updatingItemIndex,\n                    previousItem: previousItem\n                });\n            });\n        },\n\n        _rowIndex: function(row) {\n            return this._content.children().index($(row));\n        },\n\n        _itemIndex: function(item) {\n            return $.inArray(item, this.data);\n        },\n\n        _finishUpdate: function($updatingRow, updatedItem, updatedItemIndex) {\n            this.cancelEdit();\n            this.data[updatedItemIndex] = updatedItem;\n\n            var $updatedRow = this._createRow(updatedItem, updatedItemIndex);\n            $updatingRow.replaceWith($updatedRow);\n            return $updatedRow;\n        },\n\n        _getEditedItem: function() {\n            var result = {};\n            this._eachField(function(field) {\n                if(field.editing) {\n                    this._setItemFieldValue(result, field, field.editValue());\n                }\n            });\n            return result;\n        },\n\n        cancelEdit: function() {\n            if(!this._editingRow)\n                return;\n\n            this._getEditRow().remove();\n            this._editingRow.show();\n            this._editingRow = null;\n        },\n\n        _getEditRow: function() {\n            return this._editingRow.data(JSGRID_EDIT_ROW_DATA_KEY);\n        },\n\n        deleteItem: function(item) {\n            var $row = this.rowByItem(item);\n\n            if(!$row.length)\n                return;\n\n            if(this.confirmDeleting && !window.confirm(getOrApply(this.deleteConfirm, this, $row.data(JSGRID_ROW_DATA_KEY))))\n                return;\n\n            return this._deleteRow($row);\n        },\n\n        _deleteRow: function($row) {\n            var deletingItem = $row.data(JSGRID_ROW_DATA_KEY),\n                deletingItemIndex = this._itemIndex(deletingItem);\n\n            var args = this._callEventHandler(this.onItemDeleting, {\n                row: $row,\n                item: deletingItem,\n                itemIndex: deletingItemIndex\n            });\n\n            return this._controllerCall(\"deleteItem\", deletingItem, args.cancel, function() {\n                this._loadStrategy.finishDelete(deletingItem, deletingItemIndex);\n\n                this._callEventHandler(this.onItemDeleted, {\n                    row: $row,\n                    item: deletingItem,\n                    itemIndex: deletingItemIndex\n                });\n            });\n        }\n    };\n\n    $.fn.jsGrid = function(config) {\n        var args = $.makeArray(arguments),\n            methodArgs = args.slice(1),\n            result = this;\n\n        this.each(function() {\n            var $element = $(this),\n                instance = $element.data(JSGRID_DATA_KEY),\n                methodResult;\n\n            if(instance) {\n                if(typeof config === \"string\") {\n                    methodResult = instance[config].apply(instance, methodArgs);\n                    if(methodResult !== undefined && methodResult !== instance) {\n                        result = methodResult;\n                        return false;\n                    }\n                } else {\n                    instance._detachWindowResizeCallback();\n                    instance._init(config);\n                    instance.render();\n                }\n            } else {\n                new Grid($element, config);\n            }\n        });\n\n        return result;\n    };\n\n    var fields = {};\n\n    var setDefaults = function(config) {\n        var componentPrototype;\n\n        if($.isPlainObject(config)) {\n            componentPrototype = Grid.prototype;\n        } else {\n            componentPrototype = fields[config].prototype;\n            config = arguments[1] || {};\n        }\n\n        $.extend(componentPrototype, config);\n    };\n\n    var locales = {};\n\n    var locale = function(lang) {\n        var localeConfig = $.isPlainObject(lang) ? lang : locales[lang];\n\n        if(!localeConfig)\n            throw Error(\"unknown locale \" + lang);\n\n        setLocale(jsGrid, localeConfig);\n    };\n\n    var setLocale = function(obj, localeConfig) {\n        $.each(localeConfig, function(field, value) {\n            if($.isPlainObject(value)) {\n                setLocale(obj[field] || obj[field[0].toUpperCase() + field.slice(1)], value);\n                return;\n            }\n\n            if(obj.hasOwnProperty(field)) {\n                obj[field] = value;\n            } else {\n                obj.prototype[field] = value;\n            }\n        });\n    };\n\n    window.jsGrid = {\n        Grid: Grid,\n        fields: fields,\n        setDefaults: setDefaults,\n        locales: locales,\n        locale: locale,\n        version: '1.5.1'\n    };\n\n}(window, jQuery));\n\n(function(jsGrid, $, undefined) {\n\n    function LoadIndicator(config) {\n        this._init(config);\n    }\n\n    LoadIndicator.prototype = {\n\n        container: \"body\",\n        message: \"Loading...\",\n        shading: true,\n\n        zIndex: 1000,\n        shaderClass: \"jsgrid-load-shader\",\n        loadPanelClass: \"jsgrid-load-panel\",\n\n        _init: function(config) {\n            $.extend(true, this, config);\n\n            this._initContainer();\n            this._initShader();\n            this._initLoadPanel();\n        },\n\n        _initContainer: function() {\n            this._container = $(this.container);\n        },\n\n        _initShader: function() {\n            if(!this.shading)\n                return;\n\n            this._shader = $(\"<div>\").addClass(this.shaderClass)\n                .hide()\n                .css({\n                    position: \"absolute\",\n                    top: 0,\n                    right: 0,\n                    bottom: 0,\n                    left: 0,\n                    zIndex: this.zIndex\n                })\n                .appendTo(this._container);\n        },\n\n        _initLoadPanel: function() {\n            this._loadPanel = $(\"<div>\").addClass(this.loadPanelClass)\n                .text(this.message)\n                .hide()\n                .css({\n                    position: \"absolute\",\n                    top: \"50%\",\n                    left: \"50%\",\n                    zIndex: this.zIndex\n                })\n                .appendTo(this._container);\n        },\n\n        show: function() {\n            var $loadPanel = this._loadPanel.show();\n\n            var actualWidth = $loadPanel.outerWidth();\n            var actualHeight = $loadPanel.outerHeight();\n\n            $loadPanel.css({\n                marginTop: -actualHeight / 2,\n                marginLeft: -actualWidth / 2\n            });\n\n            this._shader.show();\n        },\n\n        hide: function() {\n            this._loadPanel.hide();\n            this._shader.hide();\n        }\n\n    };\n\n    jsGrid.LoadIndicator = LoadIndicator;\n\n}(jsGrid, jQuery));\n\n(function(jsGrid, $, undefined) {\n\n    function DirectLoadingStrategy(grid) {\n        this._grid = grid;\n    }\n\n    DirectLoadingStrategy.prototype = {\n\n        firstDisplayIndex: function() {\n            var grid = this._grid;\n            return grid.option(\"paging\") ? (grid.option(\"pageIndex\") - 1) * grid.option(\"pageSize\") : 0;\n        },\n\n        lastDisplayIndex: function() {\n            var grid = this._grid;\n            var itemsCount = grid.option(\"data\").length;\n\n            return grid.option(\"paging\")\n                ? Math.min(grid.option(\"pageIndex\") * grid.option(\"pageSize\"), itemsCount)\n                : itemsCount;\n        },\n\n        itemsCount: function() {\n            return this._grid.option(\"data\").length;\n        },\n\n        openPage: function(index) {\n            this._grid.refresh();\n        },\n\n        loadParams: function() {\n            return {};\n        },\n\n        sort: function() {\n            this._grid._sortData();\n            this._grid.refresh();\n            return $.Deferred().resolve().promise();\n        },\n\n        reset: function() {\n            this._grid.refresh();\n            return $.Deferred().resolve().promise();\n        },\n\n        finishLoad: function(loadedData) {\n            this._grid.option(\"data\", loadedData);\n        },\n\n        finishInsert: function(insertedItem) {\n            var grid = this._grid;\n            grid.option(\"data\").push(insertedItem);\n            grid.refresh();\n        },\n\n        finishDelete: function(deletedItem, deletedItemIndex) {\n            var grid = this._grid;\n            grid.option(\"data\").splice(deletedItemIndex, 1);\n            grid.reset();\n        }\n    };\n\n\n    function PageLoadingStrategy(grid) {\n        this._grid = grid;\n        this._itemsCount = 0;\n    }\n\n    PageLoadingStrategy.prototype = {\n\n        firstDisplayIndex: function() {\n            return 0;\n        },\n\n        lastDisplayIndex: function() {\n            return this._grid.option(\"data\").length;\n        },\n\n        itemsCount: function() {\n            return this._itemsCount;\n        },\n\n        openPage: function(index) {\n            this._grid.loadData();\n        },\n\n        loadParams: function() {\n            var grid = this._grid;\n            return {\n                pageIndex: grid.option(\"pageIndex\"),\n                pageSize: grid.option(\"pageSize\")\n            };\n        },\n\n        reset: function() {\n            return this._grid.loadData();\n        },\n\n        sort: function() {\n            return this._grid.loadData();\n        },\n\n        finishLoad: function(loadedData) {\n            this._itemsCount = loadedData.itemsCount;\n            this._grid.option(\"data\", loadedData.data);\n        },\n\n        finishInsert: function(insertedItem) {\n            this._grid.search();\n        },\n\n        finishDelete: function(deletedItem, deletedItemIndex) {\n            this._grid.search();\n        }\n    };\n\n    jsGrid.loadStrategies = {\n        DirectLoadingStrategy: DirectLoadingStrategy,\n        PageLoadingStrategy: PageLoadingStrategy\n    };\n\n}(jsGrid, jQuery));\n\n(function(jsGrid, $, undefined) {\n\n    var isDefined = function(val) {\n        return typeof(val) !== \"undefined\" && val !== null;\n    };\n\n    var sortStrategies = {\n        string: function(str1, str2) {\n            if(!isDefined(str1) && !isDefined(str2))\n                return 0;\n\n            if(!isDefined(str1))\n                return -1;\n\n            if(!isDefined(str2))\n                return 1;\n\n            return (\"\" + str1).localeCompare(\"\" + str2);\n        },\n\n        number: function(n1, n2) {\n            return n1 - n2;\n        },\n\n        date: function(dt1, dt2) {\n            return dt1 - dt2;\n        },\n\n        numberAsString: function(n1, n2) {\n            return parseFloat(n1) - parseFloat(n2);\n        }\n    };\n\n    jsGrid.sortStrategies = sortStrategies;\n\n}(jsGrid, jQuery));\n\n(function(jsGrid, $, undefined) {\n\n    function Validation(config) {\n        this._init(config);\n    }\n\n    Validation.prototype = {\n\n        _init: function(config) {\n            $.extend(true, this, config);\n        },\n\n        validate: function(args) {\n            var errors = [];\n\n            $.each(this._normalizeRules(args.rules), function(_, rule) {\n                if(rule.validator(args.value, args.item, rule.param))\n                    return;\n\n                var errorMessage = $.isFunction(rule.message) ? rule.message(args.value, args.item) : rule.message;\n                errors.push(errorMessage);\n            });\n\n            return errors;\n        },\n\n        _normalizeRules: function(rules) {\n            if(!$.isArray(rules))\n                rules = [rules];\n\n            return $.map(rules, $.proxy(function(rule) {\n                return this._normalizeRule(rule);\n            }, this));\n        },\n\n        _normalizeRule: function(rule) {\n            if(typeof rule === \"string\")\n                rule = { validator: rule };\n\n            if($.isFunction(rule))\n                rule = { validator: rule };\n\n            if($.isPlainObject(rule))\n                rule = $.extend({}, rule);\n            else\n                throw Error(\"wrong validation config specified\");\n\n            if($.isFunction(rule.validator))\n                return rule;\n\n            return this._applyNamedValidator(rule, rule.validator);\n        },\n\n        _applyNamedValidator: function(rule, validatorName) {\n            delete rule.validator;\n\n            var validator = validators[validatorName];\n            if(!validator)\n                throw Error(\"unknown validator \\\"\" + validatorName + \"\\\"\");\n\n            if($.isFunction(validator)) {\n                validator = { validator: validator };\n            }\n\n            return $.extend({}, validator, rule);\n        }\n    };\n\n    jsGrid.Validation = Validation;\n\n\n    var validators = {\n        required: {\n            message: \"Field is required\",\n            validator: function(value) {\n                return value !== undefined && value !== null && value !== \"\";\n            }\n        },\n\n        rangeLength: {\n            message: \"Field value length is out of the defined range\",\n            validator: function(value, _, param) {\n                return value.length >= param[0] && value.length <= param[1];\n            }\n        },\n\n        minLength: {\n            message: \"Field value is too short\",\n            validator: function(value, _, param) {\n                return value.length >= param;\n            }\n        },\n\n        maxLength: {\n            message: \"Field value is too long\",\n            validator: function(value, _, param) {\n                return value.length <= param;\n            }\n        },\n\n        pattern: {\n            message: \"Field value is not matching the defined pattern\",\n            validator: function(value, _, param) {\n                if(typeof param === \"string\") {\n                    param = new RegExp(\"^(?:\" + param + \")$\");\n                }\n                return param.test(value);\n            }\n        },\n\n        range: {\n            message: \"Field value is out of the defined range\",\n            validator: function(value, _, param) {\n                return value >= param[0] && value <= param[1];\n            }\n        },\n\n        min: {\n            message: \"Field value is too small\",\n            validator: function(value, _, param) {\n                return value >= param;\n            }\n        },\n\n        max: {\n            message: \"Field value is too large\",\n            validator: function(value, _, param) {\n                return value <= param;\n            }\n        }\n    };\n\n    jsGrid.validators = validators;\n\n}(jsGrid, jQuery));\n\n(function(jsGrid, $, undefined) {\n\n    function Field(config) {\n        $.extend(true, this, config);\n        this.sortingFunc = this._getSortingFunc();\n    }\n\n    Field.prototype = {\n        name: \"\",\n        title: null,\n        css: \"\",\n        align: \"\",\n        width: 100,\n\n        visible: true,\n        filtering: true,\n        inserting: true,\n        editing: true,\n        sorting: true,\n        sorter: \"string\", // name of SortStrategy or function to compare elements\n\n        headerTemplate: function() {\n            return (this.title === undefined || this.title === null) ? this.name : this.title;\n        },\n\n        itemTemplate: function(value, item) {\n            return value;\n        },\n\n        filterTemplate: function() {\n            return \"\";\n        },\n\n        insertTemplate: function() {\n            return \"\";\n        },\n\n        editTemplate: function(value, item) {\n            this._value = value;\n            return this.itemTemplate(value, item);\n        },\n\n        filterValue: function() {\n            return \"\";\n        },\n\n        insertValue: function() {\n            return \"\";\n        },\n\n        editValue: function() {\n            return this._value;\n        },\n\n        _getSortingFunc: function() {\n            var sorter = this.sorter;\n\n            if($.isFunction(sorter)) {\n                return sorter;\n            }\n\n            if(typeof sorter === \"string\") {\n                return jsGrid.sortStrategies[sorter];\n            }\n\n            throw Error(\"wrong sorter for the field \\\"\" + this.name + \"\\\"!\");\n        }\n    };\n\n    jsGrid.Field = Field;\n\n}(jsGrid, jQuery));\n\n(function(jsGrid, $, undefined) {\n\n    var Field = jsGrid.Field;\n\n    function TextField(config) {\n        Field.call(this, config);\n    }\n\n    TextField.prototype = new Field({\n\n        autosearch: true,\n\t\treadOnly: false,\n\n        filterTemplate: function() {\n            if(!this.filtering)\n                return \"\";\n\n            var grid = this._grid,\n                $result = this.filterControl = this._createTextBox();\n\n            if(this.autosearch) {\n                $result.on(\"keypress\", function(e) {\n                    if(e.which === 13) {\n                        grid.search();\n                        e.preventDefault();\n                    }\n                });\n            }\n\n            return $result;\n        },\n\n        insertTemplate: function() {\n            if(!this.inserting)\n                return \"\";\n\n            return this.insertControl = this._createTextBox();\n        },\n\n        editTemplate: function(value) {\n            if(!this.editing)\n                return this.itemTemplate(value);\n\n            var $result = this.editControl = this._createTextBox();\n            $result.val(value);\n            return $result;\n        },\n\n        filterValue: function() {\n            return this.filterControl.val();\n        },\n\n        insertValue: function() {\n            return this.insertControl.val();\n        },\n\n        editValue: function() {\n            return this.editControl.val();\n        },\n\n        _createTextBox: function() {\n            return $(\"<input>\").attr(\"type\", \"text\")\n                .prop(\"readonly\", !!this.readOnly);\n        }\n    });\n\n    jsGrid.fields.text = jsGrid.TextField = TextField;\n\n}(jsGrid, jQuery));\n\n(function(jsGrid, $, undefined) {\n\n    var TextField = jsGrid.TextField;\n\n    function NumberField(config) {\n        TextField.call(this, config);\n    }\n\n    NumberField.prototype = new TextField({\n\n        sorter: \"number\",\n        align: \"right\",\n\t\treadOnly: false,\n\n        filterValue: function() {\n            return parseInt(this.filterControl.val() || 0, 10);\n        },\n\n        insertValue: function() {\n            return parseInt(this.insertControl.val() || 0, 10);\n        },\n\n        editValue: function() {\n            return parseInt(this.editControl.val() || 0, 10);\n        },\n\n        _createTextBox: function() {\n\t\t\treturn $(\"<input>\").attr(\"type\", \"number\")\n                .prop(\"readonly\", !!this.readOnly);\n        }\n    });\n\n    jsGrid.fields.number = jsGrid.NumberField = NumberField;\n\n}(jsGrid, jQuery));\n\n(function(jsGrid, $, undefined) {\n\n    var TextField = jsGrid.TextField;\n\n    function TextAreaField(config) {\n        TextField.call(this, config);\n    }\n\n    TextAreaField.prototype = new TextField({\n\n        insertTemplate: function() {\n            if(!this.inserting)\n                return \"\";\n\n            return this.insertControl = this._createTextArea();\n        },\n\n        editTemplate: function(value) {\n            if(!this.editing)\n                return this.itemTemplate(value);\n\n            var $result = this.editControl = this._createTextArea();\n            $result.val(value);\n            return $result;\n        },\n\n        _createTextArea: function() {\n            return $(\"<textarea>\").prop(\"readonly\", !!this.readOnly);\n        }\n    });\n\n    jsGrid.fields.textarea = jsGrid.TextAreaField = TextAreaField;\n\n}(jsGrid, jQuery));\n\n(function(jsGrid, $, undefined) {\n\n    var NumberField = jsGrid.NumberField;\n    var numberValueType = \"number\";\n    var stringValueType = \"string\";\n\n    function SelectField(config) {\n        this.items = [];\n        this.selectedIndex = -1;\n        this.valueField = \"\";\n        this.textField = \"\";\n\n        if(config.valueField && config.items.length) {\n            var firstItemValue = config.items[0][config.valueField];\n            this.valueType = (typeof firstItemValue) === numberValueType ? numberValueType : stringValueType;\n        }\n\n        this.sorter = this.valueType;\n\n        NumberField.call(this, config);\n    }\n\n    SelectField.prototype = new NumberField({\n\n        align: \"center\",\n        valueType: numberValueType,\n\n        itemTemplate: function(value) {\n            var items = this.items,\n                valueField = this.valueField,\n                textField = this.textField,\n                resultItem;\n\n            if(valueField) {\n                resultItem = $.grep(items, function(item, index) {\n                    return item[valueField] === value;\n                })[0] || {};\n            }\n            else {\n                resultItem = items[value];\n            }\n\n            var result = (textField ? resultItem[textField] : resultItem);\n\n            return (result === undefined || result === null) ? \"\" : result;\n        },\n\n        filterTemplate: function() {\n            if(!this.filtering)\n                return \"\";\n\n            var grid = this._grid,\n                $result = this.filterControl = this._createSelect();\n\n            if(this.autosearch) {\n                $result.on(\"change\", function(e) {\n                    grid.search();\n                });\n            }\n\n            return $result;\n        },\n\n        insertTemplate: function() {\n            if(!this.inserting)\n                return \"\";\n\n            return this.insertControl = this._createSelect();\n        },\n\n        editTemplate: function(value) {\n            if(!this.editing)\n                return this.itemTemplate(value);\n\n            var $result = this.editControl = this._createSelect();\n            (value !== undefined) && $result.val(value);\n            return $result;\n        },\n\n        filterValue: function() {\n            var val = this.filterControl.val();\n            return this.valueType === numberValueType ? parseInt(val || 0, 10) : val;\n        },\n\n        insertValue: function() {\n            var val = this.insertControl.val();\n            return this.valueType === numberValueType ? parseInt(val || 0, 10) : val;\n        },\n\n        editValue: function() {\n            var val = this.editControl.val();\n            return this.valueType === numberValueType ? parseInt(val || 0, 10) : val;\n        },\n\n        _createSelect: function() {\n            var $result = $(\"<select>\"),\n                valueField = this.valueField,\n                textField = this.textField,\n                selectedIndex = this.selectedIndex;\n\n            $.each(this.items, function(index, item) {\n                var value = valueField ? item[valueField] : index,\n                    text = textField ? item[textField] : item;\n\n                var $option = $(\"<option>\")\n                    .attr(\"value\", value)\n                    .text(text)\n                    .appendTo($result);\n\n                $option.prop(\"selected\", (selectedIndex === index));\n            });\n\n            $result.prop(\"disabled\", !!this.readOnly);\n\n            return $result;\n        }\n    });\n\n    jsGrid.fields.select = jsGrid.SelectField = SelectField;\n\n}(jsGrid, jQuery));\n\n(function(jsGrid, $, undefined) {\n\n    var Field = jsGrid.Field;\n\n    function CheckboxField(config) {\n        Field.call(this, config);\n    }\n\n    CheckboxField.prototype = new Field({\n\n        sorter: \"number\",\n        align: \"center\",\n        autosearch: true,\n\n        itemTemplate: function(value) {\n            return this._createCheckbox().prop({\n                checked: value,\n                disabled: true\n            });\n        },\n\n        filterTemplate: function() {\n            if(!this.filtering)\n                return \"\";\n\n            var grid = this._grid,\n                $result = this.filterControl = this._createCheckbox();\n\n            $result.prop({\n                readOnly: true,\n                indeterminate: true\n            });\n\n            $result.on(\"click\", function() {\n                var $cb = $(this);\n\n                if($cb.prop(\"readOnly\")) {\n                    $cb.prop({\n                        checked: false,\n                        readOnly: false\n                    });\n                }\n                else if(!$cb.prop(\"checked\")) {\n                    $cb.prop({\n                        readOnly: true,\n                        indeterminate: true\n                    });\n                }\n            });\n\n            if(this.autosearch) {\n                $result.on(\"click\", function() {\n                    grid.search();\n                });\n            }\n\n            return $result;\n        },\n\n        insertTemplate: function() {\n            if(!this.inserting)\n                return \"\";\n\n            return this.insertControl = this._createCheckbox();\n        },\n\n        editTemplate: function(value) {\n            if(!this.editing)\n                return this.itemTemplate(value);\n\n            var $result = this.editControl = this._createCheckbox();\n            $result.prop(\"checked\", value);\n            return $result;\n        },\n\n        filterValue: function() {\n            return this.filterControl.get(0).indeterminate\n                ? undefined\n                : this.filterControl.is(\":checked\");\n        },\n\n        insertValue: function() {\n            return this.insertControl.is(\":checked\");\n        },\n\n        editValue: function() {\n            return this.editControl.is(\":checked\");\n        },\n\n        _createCheckbox: function() {\n            return $(\"<input>\").attr(\"type\", \"checkbox\");\n        }\n    });\n\n    jsGrid.fields.checkbox = jsGrid.CheckboxField = CheckboxField;\n\n}(jsGrid, jQuery));\n\n(function(jsGrid, $, undefined) {\n\n    var Field = jsGrid.Field;\n\n    function ControlField(config) {\n        Field.call(this, config);\n        this._configInitialized = false;\n    }\n\n    ControlField.prototype = new Field({\n        css: \"jsgrid-control-field\",\n        align: \"center\",\n        width: 50,\n        filtering: false,\n        inserting: false,\n        editing: false,\n        sorting: false,\n\n        buttonClass: \"jsgrid-button\",\n        modeButtonClass: \"jsgrid-mode-button\",\n\n        modeOnButtonClass: \"jsgrid-mode-on-button\",\n        searchModeButtonClass: \"jsgrid-search-mode-button\",\n        insertModeButtonClass: \"jsgrid-insert-mode-button\",\n        editButtonClass: \"jsgrid-edit-button\",\n        deleteButtonClass: \"jsgrid-delete-button\",\n        searchButtonClass: \"jsgrid-search-button\",\n        clearFilterButtonClass: \"jsgrid-clear-filter-button\",\n        insertButtonClass: \"jsgrid-insert-button\",\n        updateButtonClass: \"jsgrid-update-button\",\n        cancelEditButtonClass: \"jsgrid-cancel-edit-button\",\n\n        searchModeButtonTooltip: \"Switch to searching\",\n        insertModeButtonTooltip: \"Switch to inserting\",\n        editButtonTooltip: \"Edit\",\n        deleteButtonTooltip: \"Delete\",\n        searchButtonTooltip: \"Search\",\n        clearFilterButtonTooltip: \"Clear filter\",\n        insertButtonTooltip: \"Insert\",\n        updateButtonTooltip: \"Update\",\n        cancelEditButtonTooltip: \"Cancel edit\",\n\n        editButton: true,\n        deleteButton: true,\n        clearFilterButton: true,\n        modeSwitchButton: true,\n\n        _initConfig: function() {\n            this._hasFiltering = this._grid.filtering;\n            this._hasInserting = this._grid.inserting;\n\n            if(this._hasInserting && this.modeSwitchButton) {\n                this._grid.inserting = false;\n            }\n\n            this._configInitialized = true;\n        },\n\n        headerTemplate: function() {\n            if(!this._configInitialized) {\n                this._initConfig();\n            }\n\n            var hasFiltering = this._hasFiltering;\n            var hasInserting = this._hasInserting;\n\n            if(!this.modeSwitchButton || (!hasFiltering && !hasInserting))\n                return \"\";\n\n            if(hasFiltering && !hasInserting)\n                return this._createFilterSwitchButton();\n\n            if(hasInserting && !hasFiltering)\n                return this._createInsertSwitchButton();\n\n            return this._createModeSwitchButton();\n        },\n\n        itemTemplate: function(value, item) {\n            var $result = $([]);\n\n            if(this.editButton) {\n                $result = $result.add(this._createEditButton(item));\n            }\n\n            if(this.deleteButton) {\n                $result = $result.add(this._createDeleteButton(item));\n            }\n\n            return $result;\n        },\n\n        filterTemplate: function() {\n            var $result = this._createSearchButton();\n            return this.clearFilterButton ? $result.add(this._createClearFilterButton()) : $result;\n        },\n\n        insertTemplate: function() {\n            return this._createInsertButton();\n        },\n\n        editTemplate: function() {\n            return this._createUpdateButton().add(this._createCancelEditButton());\n        },\n\n        _createFilterSwitchButton: function() {\n            return this._createOnOffSwitchButton(\"filtering\", this.searchModeButtonClass, true);\n        },\n\n        _createInsertSwitchButton: function() {\n            return this._createOnOffSwitchButton(\"inserting\", this.insertModeButtonClass, false);\n        },\n\n        _createOnOffSwitchButton: function(option, cssClass, isOnInitially) {\n            var isOn = isOnInitially;\n\n            var updateButtonState = $.proxy(function() {\n                $button.toggleClass(this.modeOnButtonClass, isOn);\n            }, this);\n\n            var $button = this._createGridButton(this.modeButtonClass + \" \" + cssClass, \"\", function(grid) {\n                isOn = !isOn;\n                grid.option(option, isOn);\n                updateButtonState();\n            });\n\n            updateButtonState();\n\n            return $button;\n        },\n\n        _createModeSwitchButton: function() {\n            var isInserting = false;\n\n            var updateButtonState = $.proxy(function() {\n                $button.attr(\"title\", isInserting ? this.searchModeButtonTooltip : this.insertModeButtonTooltip)\n                    .toggleClass(this.insertModeButtonClass, !isInserting)\n                    .toggleClass(this.searchModeButtonClass, isInserting);\n            }, this);\n\n            var $button = this._createGridButton(this.modeButtonClass, \"\", function(grid) {\n                isInserting = !isInserting;\n                grid.option(\"inserting\", isInserting);\n                grid.option(\"filtering\", !isInserting);\n                updateButtonState();\n            });\n\n            updateButtonState();\n\n            return $button;\n        },\n\n        _createEditButton: function(item) {\n            return this._createGridButton(this.editButtonClass, this.editButtonTooltip, function(grid, e) {\n                grid.editItem(item);\n                e.stopPropagation();\n            });\n        },\n\n        _createDeleteButton: function(item) {\n            return this._createGridButton(this.deleteButtonClass, this.deleteButtonTooltip, function(grid, e) {\n                grid.deleteItem(item);\n                e.stopPropagation();\n            });\n        },\n\n        _createSearchButton: function() {\n            return this._createGridButton(this.searchButtonClass, this.searchButtonTooltip, function(grid) {\n                grid.search();\n            });\n        },\n\n        _createClearFilterButton: function() {\n            return this._createGridButton(this.clearFilterButtonClass, this.clearFilterButtonTooltip, function(grid) {\n                grid.clearFilter();\n            });\n        },\n\n        _createInsertButton: function() {\n            return this._createGridButton(this.insertButtonClass, this.insertButtonTooltip, function(grid) {\n                grid.insertItem().done(function() {\n                    grid.clearInsert();\n                });\n            });\n        },\n\n        _createUpdateButton: function() {\n            return this._createGridButton(this.updateButtonClass, this.updateButtonTooltip, function(grid, e) {\n                grid.updateItem();\n                e.stopPropagation();\n            });\n        },\n\n        _createCancelEditButton: function() {\n            return this._createGridButton(this.cancelEditButtonClass, this.cancelEditButtonTooltip, function(grid, e) {\n                grid.cancelEdit();\n                e.stopPropagation();\n            });\n        },\n\n        _createGridButton: function(cls, tooltip, clickHandler) {\n            var grid = this._grid;\n\n            return $(\"<input>\").addClass(this.buttonClass)\n                .addClass(cls)\n                .attr({\n                    type: \"button\",\n                    title: tooltip\n                })\n                .on(\"click\", function(e) {\n                    clickHandler(grid, e);\n                });\n        },\n\n        editValue: function() {\n            return \"\";\n        }\n\n    });\n\n    jsGrid.fields.control = jsGrid.ControlField = ControlField;\n\n}(jsGrid, jQuery));\n","var usersAdapter=(function() {\r\n\r\n    /**\r\n     * Private methods\r\n     */\r\n\r\n    function matchExtendedInfo(list, usersWithExtendedInfo) {\r\n        list.map(function(uuser) {\r\n            var u = usersWithExtendedInfo.find(function (e) {\r\n                return uuser.idUser == e.idUser;\r\n            });\r\n            uuser.extendedInfo=u.extendedInfo;\r\n        });\r\n    }\r\n\r\n    \r\n    /**\r\n     * Public methods\r\n     */\r\n\r\n    /**\r\n     * create a json standard for user information\r\n     * (this is used in modals and usertooltip)\r\n     * if the isAssignee and owner are false the user is participant\r\n     * if the isAssignee and owner are null the user is not in (isAssignee, owner and participant)\r\n     * @param {string} userAssigned guid del usuario\r\n     * @param {string} name \r\n     * @param {string} username \r\n     * @param {string} picture \r\n     * @param {string} email \r\n     * @param {string} initials \r\n     * @param {boolean} isAssignee if is true the user shows like assignee\r\n     * @param {boolean} owner if is true the user shows like creator\r\n     * @param {Array} activities \r\n     * @param {Array} events \r\n     */\r\n    var createJsonUserInfo = function (userAssigned, name, username, picture, email, initials, isAssignee, owner, activities, events) {\r\n        var participant=owner===false && isAssignee===false;\r\n        if (owner===null && isAssignee===null)\r\n            owner=participant=false;\r\n        if(picture!==undefined)\r\n            picture=picture.replace(\"data:image/png;base64,data:image/png;base64,\", \"data:image/png;base64,\");\r\n        return {\r\n            userAssigned: userAssigned,\r\n            name: name,\r\n            username: username,\r\n            picture: picture,\r\n            email: email,\r\n            initials: initials,\r\n            isAssignee: isAssignee,\r\n            isParticipant: participant,\r\n            owner: owner,\r\n            activities: activities,\r\n            events: events,\r\n            isAnonymized: userAssigned === bizagi.util.anonymizedUserInformation.id\r\n        };\r\n    };\r\n\r\n    /**\r\n     * let to add extendedInfo to each users,assigned,createdBy\r\n     * @param {*} cases \r\n     * @param {*} usersWithExtendedInfo \r\n     */\r\n    var matchUsersForExtendedInfoCase=function(cases,usersWithExtendedInfo){\r\n        cases.map(function(casee) {\r\n            if(casee.assignees)\r\n                matchExtendedInfo(casee.assignees,usersWithExtendedInfo);\r\n            if(casee.users)\r\n                matchExtendedInfo(casee.users,usersWithExtendedInfo);\r\n            if(casee.createdBy){\r\n                var u = usersWithExtendedInfo.find(function (e) {\r\n                    return casee.createdBy.idUser == e.idUser;\r\n                });\r\n                casee.createdBy.extendedInfo=u.extendedInfo;\r\n            }\r\n        });\r\n    };\r\n\r\n    /**\r\n     * return just the assigned users if exists a only creator user this is ommited\r\n     * @param {Array} users \r\n     */\r\n    var justAssignees=function(users){\r\n        return users.filter(function(user) {\r\n            return user.isAssignee===true;\r\n        });\r\n    };\r\n    \r\n    return {\r\n        createJsonUserInfo: createJsonUserInfo,\r\n        matchUsersForExtendedInfoCase: matchUsersForExtendedInfoCase,\r\n        justAssignees: justAssignees\r\n    };\r\n}());","/**\r\n * Name: Bizagi Workportal Task Options\r\n* \r\n* @author Kvn Alvarado\r\n */\r\n\r\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.task.options\", {}, {\r\n    /**\r\n     * Constructor\r\n     */\r\n    init: function (workportalFacade, dataService, params) {\r\n        var self = this;\r\n        \r\n        // Call base\r\n        self._super(workportalFacade, dataService, params);\r\n    },\r\n\r\n    /**\r\n     * return a jquery promise for widgets needs taskOptions call\r\n     * if the idWorkitem is 0 request is not necessary\r\n     * @param {Int} idWorkitem \r\n     */\r\n    getTaskOptions: function (idWorkitem) {\r\n        var self = this,\r\n            defer;\r\n        if (idWorkitem === 0) {\r\n            defer = $.Deferred();\r\n            defer.resolve(self.pipeResponse({}));\r\n        } else {\r\n            defer = self.request(idWorkitem);\r\n        }\r\n         return defer;\r\n    },\r\n\r\n    /**\r\n     * make request for get taskOptions\r\n     * @param {Int} idWorkitem \r\n     */\r\n    request: function (idWorkitem) {\r\n        var self = this,\r\n            params = {\r\n                idWorkitem: idWorkitem\r\n            };\r\n        return $.when(self.dataService.getTaskOptions(params)).pipe(function (data) {\r\n            if (data.allowTakeOwnership === true && data.allowRelease === true){\r\n                throw \"can't get both allowTakeOwnership and allowTakeOwnership properties equal true\";\r\n            }\r\n            return self.pipeResponse(data);\r\n        });\r\n    },\r\n\r\n    /**\r\n     * return the correct params or the default\r\n     * @param {JSON} params taskOptions response\r\n     */\r\n    pipeResponse: function (params) {\r\n        return {\r\n            showTakeOwnership: params.allowTakeOwnership || false,\r\n            showRelease: params.allowRelease || false\r\n        };\r\n    },\r\n\r\n    clean: function () {\r\n        var self = this;\r\n    }\r\n  \r\n });\r\n \r\n bizagi.injector.register('bizagi.workportal.widgets.task.options', ['workportalFacade', 'dataService', bizagi.workportal.widgets.task.options]);\r\n "]}