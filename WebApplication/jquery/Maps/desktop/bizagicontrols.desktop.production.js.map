{"version":3,"sources":["jquery/common/bizagi.ui.controls/jquery.ui.controls.definition.js","jquery/workportal/js/bizagi.workportal.facade.js","jquery/workportal/js/base/bizagi.workportal.controllers.controller.js","jquery/workportal/js/base/widget/bizagi.workportal.widgets.widget.js","jquery/common/base/js/lib/jquery.imageZoom.js","jquery/common/jquery.ui/js/desktop/jquery.ui.check.js","jquery/common/jquery.ui/js/desktop/jquery.ui.selectmenu.js","jquery/rendering/js/plugins/desktop/jquery.timeEntry.js","jquery/common/jquery.ui/js/desktop/jquery.ui.selectable2.js","jquery/common/jquery.ui/js/desktop/jquery.ui.option.js","jquery/common/bizagi.pagination/js/jquery.bizagi.pagination.js","jquery/common/bizagi.pagination/js/jquery.bizagi.gridPagination.js","jquery/common/bizagi.grid/js/bizagi.grid.js","jquery/common/bizagi.grid/js/desktop/bizagi.grid.desktop.js","jquery/common/bizagi.grid/js/desktop/bizagi.grid.grouped.desktop.js","jquery/common/bizagi.timepicker/js/jquery.bizagi.timepicker.js","jquery/common/bizagi.upload/js/jquery.bizagi.upload.js","jquery/common/bizagi.upload/js/jquery.bizagi.fileupload.js","jquery/common/bizagi.filters/js/bizagi.filters.js","jquery/common/bizagi.overflowMenu/js/desktop/bizagi.menuOverflow.js","jquery/rendering/js/plugins/desktop/nicEdit.js","jquery/common/jquery.ui/js/desktop/jquery.ui.searchList.js","jquery/common/bizagi.ui.controls/table/js/jquery.ui.table.js","jquery/common/bizagi.ui.controls/combo/js/jquery.ui.combo.js","jquery/common/bizagi.ui.controls/checkbox/js/jquery.ui.checkbox.js","jquery/common/bizagi.ui.controls/radio/js/jquery.ui.radio.js","jquery/common/bizagi.ui.controls/treeview/js/jquery.ui.treeview.js","jquery/common/bizagi.ui.controls/multiselect/js/jquery.ui.multiselect.js","jquery/workportal/js/base/widget/bizagi.workportal.widgets.async.js","jquery/workportal/js/base/widget/bizagi.workportal.widgets.asyncecm.upload.js","jquery/workportal/js/desktop/widget/bizagi.workportal.desktop.widgets.asyncecm.upload.js","jquery/workportal/js/base/widget/bizagi.workportal.widgets.processtree.js","jquery/workportal/js/base/widget/bizagi.workportal.widgets.entitiestree.js","jquery/workportal/js/base/widget/bizagi.workportal.widgets.userstable.js","jquery/workportal/js/base/widget/bizagi.workportal.widgets.tree.js","jquery/workportal/js/desktop/widget/bizagi.workportal.desktop.widgets.processtree.js","jquery/workportal/js/desktop/widget/bizagi.workportal.desktop.widgets.entitiestree.js","jquery/workportal/js/desktop/widget/bizagi.workportal.desktop.widgets.userstable.js","jquery/workportal/js/desktop/widget/bizagi.workportal.desktop.widgets.tree.js","jquery/workportal/js/base/widget/bizagi.workportal.widgets.entities.js","jquery/common/bizagi.filterMoney/js/bizagi.filterMoney.js","jquery/common/bizagi.filterNumber/js/bizagi.filterNumber.js","jquery/common/bizagi.filterDate/js/bizagi.filterDate.js","jquery/common/bizagi.filterText/js/bizagi.filterText.js","jquery/common/bizagi.filterMultiple/js/bizagi.filterMultiple.js","jquery/common/bizagi.filterBoolean/js/bizagi.filterBoolean.js","jquery/workportal/js/desktop/widget/bizagi.workportal.desktop.widgets.async.js"],"names":["$","bizagi","ui","controls","uitable","namespace","availableComponents","css","tmpl","tmpl2","tmpl3","uicombo","uicheckbox","uiradio","uitreeview","uimultiselect","workportal","currentInboxView","state","Class","extend","init","params","this","deviceFactory","device","factory","dataService","services","service","routing","defaultParams","timeoutID","loadDefaultWidget","defaultWidget","util","isEmpty","window","location","hash","hashParams","getHashParams","search","queryString","getQueryString","widget","isMobileDevice","caseLink","BIZAGI_DEFAULT_WIDGET","cookie","detectDevice","widgets","BIZAGI_WORKPORTAL_WIDGET_INBOX","BIZAGI_WORKPORTAL_WIDGET_INBOX_GRID","expires","online","isTabletDevice","execute","canvas","self","doc","ownerDocument","body","appendTo","executionDeferred","Deferred","process","done","content","replaceSelector","resolve","createWebpart","executeWebpart","creating","testWebpartConfiguration","webpartConfiguration","url","webparts","addConfigurationMessage","processWebpart","result","append","ready","promise","defer","facade","getWorkportalFacade","processOfflineData","when","pipe","workportalFacade","processWorkportal","fetchOfflineData","pushOfflineData","always","webpartController","detectRealDevice","deferTemplates","loadWebpart","getWebpart","webpart","render","controller","mainController","getMainController","then","menu","isRendered","widgetNameToLoad","getWidgetByDataUser","actionObject","action","actions","BIZAGI_WORKPORTAL_ACTION_ROUTING","idCase","guid","idWorkItem","idWorkitem","publish","setWidget","widgetName","performResizeLayout","bizagiDefaultWidget","propertyLandingPage","userDisplayOptions","JSON","parse","startPage","key","value","currentUser","sUserProperties","i","j","length","BIZAGI_WORKPORTAL_WIDGET_HOMEPORTAL","getWidgetByCookieAndStakeholders","currentUserHaveStakeholderAssociated","getWidgetByCookie","associatedStakeholders","forceInboxOrGrid","resources","localization","componentContainers","subscribers","disposed","templatesDeferred","getWorkportal","eventName","document","triggerHandler","subscribe","callback","bind","push","event","subscribeOneTime","one","unsubscribe","unbind","renderingDeferred","areTemplatedLoaded","renderContent","postRender","getContent","getResource","getComponentSelector","component","getComponentContainer","resizeLayout","dispose","each","item","setTimeout","override","disposeTime","loadTemplates","templates","def","tmplPromises","useNewEngine","undefined","name","loadTemplate","path","apply","data","templateService","getTemplateWidget","getTemplate","hasOwnProperty","controllers","BIZAGI_WORKPORTAL_WIDGET_INTEGRATION","BIZAGI_WORKPORTAL_WIDGET_WEBPART","BIZAGI_WORKPORTAL_WIDGET_ADVANCE_SEARCH","BIZAGI_WORKPORTAL_WIDGET_ACTIVITY","BIZAGI_WORKPORTAL_WIDGET_PROJECT_DASHBOARD","BIZAGI_WORKPORTAL_WIDGET_ROUTING","BIZAGI_WORKPORTAL_WIDGET_SEARCH","BIZAGI_WORKPORTAL_WIDGET_RENDER","BIZAGI_WORKPORTAL_WIDGET_START_FORM","BIZAGI_WORKPORTAL_WIDGET_RENDERFORM","BIZAGI_WORKPORTAL_WIDGET_NEWCASE","BIZAGI_WORKPORTAL_WIDGET_QUERIES","BIZAGI_WORKPORTAL_WIDGET_QUERIES_DEFINITION","BIZAGI_WORKPORTAL_WIDGET_QUERIES_SHORTCUT","BIZAGI_WORKPORTAL_WIDGET_QUERYFORM","BIZAGI_WORKPORTAL_WIDGET_LISTCASES","BIZAGI_WORKPORTAL_WIDGET_ASYNC","BIZAGI_WORKPORTAL_WIDGET_GENERICIFRAME","BIZAGI_WORKPORTAL_WIDGET_SUBMENU","BIZAGI_WORKPORTAL_WIDGET_PRINT","BIZAGI_WORKPORTAL_WIDGET_FONTSIZE","BIZAGI_WORKPORTAL_WIDGET_OLDRENDERINTEGRATION","BIZAGI_WORKPORTAL_WIDGET_PAGE","BIZAGI_WORKPORTAL_WIDGET_ENTITIES","BIZAGI_WORKPORTAL_WIDGET_REPORTS","BIZAGI_WORKPORTAL_WIDGET_REPORTS_MENU","BIZAGI_WORKPORTAL_WIDGET_REPORTS_CHART","BIZAGI_WORKPORTAL_WIDGET_SMARTFOLDERS","BIZAGI_WORKPORTAL_WIDGET_ADMIN_CASES","BIZAGI_WORKPORTAL_WIDGET_REASSIGN_CASE","BIZAGI_WORKPORTAL_WIDGET_ASYNCECM_UPLOAD","BIZAGI_WORKPORTAL_WIDGET_PROCESS_TREE","BIZAGI_WORKPORTAL_WIDGET_ENTITIES_TREE","BIZAGI_WORKPORTAL_WIDGET_USERS_TABLE","BIZAGI_WORKPORTAL_WIDGET_ACTIVITY_LOG","BIZAGI_WORKPORTAL_WIDGET_AUTHENTICATION_LOG","BIZAGI_WORKPORTAL_WIDGET_ADMIN_ENTITIES","BIZAGI_WORKPORTAL_WIDGET_ADMIN_ENCRYPT_PASSWORDS","BIZAGI_WORKPORTAL_WIDGET_ADMIN_USERS_REQUESTS","BIZAGI_WORKPORTAL_WIDGET_ADMIN_CASE_SEARCH","BIZAGI_WORKPORTAL_WIDGET_ADMIN_ASYNC_ACTIVITIES","BIZAGI_WORKPORTAL_WIDGET_ADMIN_DEFAULTS_ASSIGNATION_USER","BIZAGI_WORKPORTAL_WIDGET_ADMIN_TRANSFER_CASE_SECURITY_PERMISSIONS","BIZAGI_WORKPORTAL_WIDGET_ADMIN_USER_PROFILES","BIZAGI_WORKPORTAL_WIDGET_ADMIN_ALARMS","BIZAGI_WORKPORTAL_WIDGET_ADMIN_USER_LICENSES","BIZAGI_WORKPORTAL_WIDGET_ADMIN_DIMENSIONS","BIZAGI_WORKPORTAL_WIDGET_ADMIN_DOCUMENT_TEMPLATES","BIZAGI_WORKPORTAL_WIDGET_ADMIN_PROCESSES","BIZAGI_WORKPORTAL_WIDGET_START_PROCESS","BIZAGI_WORKPORTAL_WIDGET_ADMIN_BUSINESS_POLICIES","BIZAGI_WORKPORTAL_WIDGET_ADMIN_LANGUAGE","BIZAGI_WORKPORTAL_WIDGET_ADMIN_BUSINESS_POLICIES_DECISION_TABLE","BIZAGI_WORKPORTAL_WIDGET_ADMIN_BUSINESS_POLICIES_POLITICS","BIZAGI_WORKPORTAL_WIDGET_ADMIN_BUSINESS_POLICIES_RULES","BIZAGI_WORKPORTAL_WIDGET_ADMIN_BUSINESS_POLICIES_TABS","BIZAGI_WORKPORTAL_WIDGET_ADMIN_BUSINESS_POLICIES_VOCABULARIES","BIZAGI_WORKPORTAL_WIDGET_ADMIN_PREFERENCES","BIZAGI_WORKPORTAL_WIDGET_ADMIN_DISPLAY_OPTIONS","BIZAGI_WORKPORTAL_WIDGET_TREE","BIZAGI_WORKPORTAL_WIDGET_GRAPHIC_QUERY","BIZAGI_WORKPORTAL_WIDGET_PROCESS_MODELER_VIEW","BIZAGI_WORKPORTAL_WIDGET_ADMIN_USERS_ADMINISTRATION","BIZAGI_WORKPORTAL_WIDGET_ADMIN_USERS_DELEGATION","BIZAGI_WORKPORTAL_WIDGET_ADMIN_USERS_DELEGATION_SEARCH_USER","BIZAGI_WORKPORTAL_WIDGET_ADMIN_STAKEHOLDERS","BIZAGI_WORKPORTAL_WIDGET_BIZAGI_EVENTS","BIZAGI_WORKPORTAL_WIDGET_BIZAGI_RELEASE","BIZAGI_WORKPORTAL_WIDGET_PROJECT_PROCESS_DIAGRAM_HELPER","BIZAGI_WORKPORTAL_WIDGET_PROJECT_ACTIVITY_MAP_TOOLTIP","BIZAGI_WORKPORTAL_WIDGET_PROJECT_USERSUMMARY","BIZAGI_WORKPORTAL_WIDGET_MYSEARCHLIST","BIZAGI_WORKPORTAL_WIDGET_LOADFORM","BIZAGI_WORKPORTAL_WIDGET_TEMPLATE_ENGINE","BIZAGI_WORKPORTAL_WIDGET_DIALOGNAV","BIZAGI_WORKPORTAL_WIDGET_ADMIN_HOLIDAYS","BIZAGI_WORKPORTAL_WIDGET_ADMIN_PROJECTNAME","BIZAGI_WORKPORTAL_WIDGET_ADMIN_OAUTH2APPLICATIONS","BIZAGI_WORKPORTAL_WIDGET_ADMIN_ADHOC_PROCESSES","BIZAGI_WORKPORTAL_WIDGET_TIMELINE","BIZAGI_WORKPORTAL_WIDGET_ADHOC_PROCESS_MODELER","BIZAGI_WORKPORTAL_WIDGET_ADMIN_ADHOC_ENTITIES","BIZAGI_WORKPORTAL_WIDGET_ADMIN_ADHOC_USER_GROUPS","BIZAGI_WORKPORTAL_WIDGET_ADMIN_ADHOC_CREATE_PROCESS","BIZAGI_WORKPORTAL_WIDGET_ADMIN_ADHOC_BOOLEAN_EXP","BIZAGI_WORKPORTAL_WIDGET_ADHOC_CREATE_PROCESS","BIZAGI_WORKPORTAL_WIDGET_PROFLY","BIZAGI_WORKPORTAL_WIDGET_SESSION_TIMEOUT","BIZAGI_WORKPORTAL_WIDGET_SESSION_TIMEOUT_EXPIRED","BIZAGI_WORKPORTAL_WIDGET_USER_PRIVACY","BIZAGI_WORKPORTAL_WIDGET_ACCESS_DENIED","BIZAGI_WORKPORTAL_WIDGET_ADMIN_BUSINESS_POLICES","BIZAGI_WORKPORTAL_WIDGET_USERS_MODAL","BIZAGI_WORKPORTAL_WIDGET_QUERIES_MANAGEMENT","BIZAGI_WORKPORTAL_WIDGET_ADMIN_USER_PERMISSION_REPORT","_super","observableElement","widgetReadyDeferred","isBlocked","referrer","getWidgetName","changeWidget","widgetParams","executeAction","actionName","actionParams","showGraphicQuery","isAdhoc","loader","start","modalParameters","title","refreshInbox","maximizeOnly","onClose","desktop","dialogStack","pop","isProcessOnTheFlyCase","showTimeLine","startAndThen","showSelectUser","closeVisible","maximize","width","id","userLinkLabel","parentDef","showBackButton","reject","userId","userName","routingExecute","element","find","val","idWorkflow","parent","idTask","eventAsTasks","fullName","sub","off","arguments","on","unsub","pub","pubDeadLockDetection","pubDef","queueDef","Array","isArray","clean","events","_data","isReady","setWidgetReady","jQuery","fn","imageZoom","conf","config","speed","dontFadeIn","hideClicked","imageMargin","className","loading","doubleSpeed","click","e","clickedElement","target","clickedLink","is","parents","clickedImg","oldText","text","setLoadingImg","opacity","setNotLoadingImg","displayImgSrc","attr","preloadOnload","pload","dimElement","offset","imgzoomBefore","outerWidth","height","outerHeight","left","top","imgzoom","imgzoomAfter","windowDim","nWidth","nHeight","scrollLeft","scrollTop","closeButton","hide","addClass","animate","fadeIn","zIndex","hideImgzoom","fadeOut","remove","preload","Image","src","complete","onload","keydown","keyCode","_create","label","options","input","detach","wrap","insertBefore","hover","removeClass","ev","args","triggerChange","_trigger","trigger","focus","blur","alert","checkItem","prop","uncheckItem","check","version","eventPrefix","getter","transferClasses","style","menuWidth","handleWidth","maxHeight","icons","format","o","ids","_safemouseup","newelement","widgetFullName","insertAfter","tabindex","selectmenuIcon","prependTo","_toggle","ret","ENTER","SPACE","UP","LEFT","list","_moveSelection","open","DOWN","RIGHT","TAB","_typeAhead","mousedown","close","_refreshValue","cornerClass","selectOptionData","_formatText","selected","classes","parentOptGroup","activeClass","thisLi","mouseup","changed","_selectedIndex","index","select","change","_selectedOptionLi","_focusedOptionLi","browser","msie","optGroupName","replace","size","iconClass","icon","prepend","add","clonedSelect","clone","selectWidth","position","visibility","display","_optionLis","HOME","_moveFocus","PAGE_UP","_scrollPage","PAGE_DOWN","END","ESCAPE","disable","_refreshPosition","resize","destroy","removeData","removeAttr","show","code","eventType","_prevChar","C","String","fromCharCode","c","toLowerCase","focusFound","focusOpt","elem","ind","thisText","indexOf","_uiHash","option","get","_closeOthers","activeID","Math","round","random","eq","retainFocus","not","selectmenu","selectedIndex","amt","newIndex","parseInt","isNaN","filter","direction","numPerPage","floor","_setData","_scrollPageInternal","newValue","currentOptionClasses","newOptionClasses","html","menuTop","scrolledAmt","TimeEntry","_disabledInputs","regional","show24Hours","separator","ampmPrefix","ampmNames","spinnerTexts","_defaults","appendText","showSeconds","showZeroInHour","timeSteps","initialField","useMouseWheel","defaultTime","minTime","maxTime","spinnerImage","spinnerSize","spinnerBigImage","spinnerBigSize","spinnerIncDecOnly","spinnerRepeat","beforeShow","beforeSetTime","PROP_NAME","extendRemove","props","prototype","markerClassName","setDefaults","_connectTimeEntry","hasClass","inst","_selectedHour","_selectedMinute","_selectedSecond","_field","_get","spinner","mozilla","after","_doFocus","_doBlur","_doClick","_doKeyDown","_doKeyPress","timeEntry","_parseTime","mousewheel","_doMouseWheel","_handleSpinner","_endSpinner","mouseover","_expandSpinner","mouseout","mousemove","_describeSpinner","_enableTimeEntry","_enableDisable","_disableTimeEntry","disabled","nextSibling","nodeName","_changeSpinner","map","_isDisabledTimeEntry","inArray","_changeTimeEntry","currentTime","_extractTime","_setTime","Date","_destroyTimeEntry","$input","unmousewheel","replaceWith","_setTimeTimeEntry","time","getTime","_getTimeTimeEntry","_getOffsetTimeEntry","_lastInput","_focussed","_blurredInput","_showField","fieldSize","selectionStart","field","max","_secondField","_ampmField","end","createTextRange","srcElement","range","offsetX","clientX","documentElement","thin","medium","thick","offsetLeft","collapse","moveEnd","boundingWidth","shiftKey","_changeField","ctrlKey","_setValue","_adjustField","chr","charCode","_handleKeyPress","delta","opera","abs","safari","preventDefault","_getSpinnerTarget","_getInput","_expanded","relative","_endExpand","siblings","_getSpinnerRegion","region","_actionSpinner","_timer","_handlingSpinner","_repeatSpinner","_releaseSpinner","clearTimeout","pos","_findPos","scrolled","_findScroll","clientY","right","bottom","min","obj","curLeft","curTop","offsetParent","offsetTop","origCurLeft","isFixed","parentNode","now","_constrainTime","_lastChr","_showTime","split","substring","isAM","isPM","hour","minute","second","fields","_determineTime","getHours","getMinutes","getSeconds","reset","isNow","_formatNumber","setSelectionRange","moveStart","moveOut","atFirstLast","_normaliseTime","setFullYear","setMonth","setDate","setting","pattern","matches","exec","test","getDate","offsetString","setTime","saveField","getters","otherArgs","slice","call","concat","inlineSettings","metadata","single","mouse","closest","keyboard","multiple","lasso","cancel","delay","distance","tolerance","_init","items","currentFocus","refresh","disableSelection","_mouseInit","_targetIsItem","_selection","_listenForMouseUp","_mouseSelect","selectClosest","next","previous","metaKey","_toggleSelection","helper","createElement","current","overlap","selfOffset","$this","x","offsetWidth","y","offsetHeight","currentIndex","_selectAdjacent","_mouseDestroy","_previousSelection","_mouseCapture","clickedOnItem","_mouseStart","opos","pageX","pageY","startSelected","_removeFromSelection","_mouseDrag","x1","y1","x2","y2","tmp","hit","_addToSelection","_mouseStop","newlySelected","newlyDeselected","wasAlreadyPartOfPreviousSelection","uiHash","added","removed","_select","found","addBack","_endSelection","_triggerDeselection","triggerItems","_clearSelection","triggerEvent","latestSelection","splice","_updateSelectionMouse","updateEvents","latestWithoutModifier","previousFocus","_updateSelection","index2","fromInside","deselect","specialKey","selection","allInputs","orientation","checked","isIE","prev","setValue","optionGroup","bizagiPagination","opt","limInf","totalPages","actualPage","listElement","first","firstClass","prevClass","nextClass","last","lastClass","liClass","arrowClass","selectedFocus","clickCallBack","pagination","previousPage","nextPage","displaceElements","firstElementValue","increment","pageData","disableFirst","disableLast","totalElements","page","trim","halfDisplace","bizagiGridPagination","scrolledHover","pageScroll","displace","firstPageValue","lastPageValue","setInterval","clearInterval","back","columns","sortBy","sortType","showSummary","collapseState","indexedData","maxColumns","buttonsPst","tableCssClass","headerStyles","floatingHeader","hasExclusiveCheck","template","grid","waiting","table","emptyTable","column","specialColumn","row","rowButtons","cell","specialCell","pager","buttons","dynamicPager","summary","summaryCell","edit","details","allowMore","enableXlsExport","enablePdfExport","mode","changes","totalRows","selectedRow","components","asyncCells","scrollableArea","columnByIndex","columnByName","columnKeyIndex","tooltip","calculateKeyIndex","startLoading","bUseTimeout","waitingFn","waitingTimeout","fasttmpl","endLoading","empty","setData","getData","rows","getChanges","_cleanComponents","_cleanButtons","draw","refreshSummary","columnIndex","_getComponent","drawing","refreshSummaryCell","drawSummary","postRenderSummary","getCell","cells","children","drawSummaryCell","onCellReady","changeCellValue","deleteCellExclusiveValues","gridRtl","isDesign","drawTable","attachPaginator","attachHandlers","$tableContainer","$table","stickyTableHeaders","fixedOffset","cacheHeaderHeight","_getButton","_replaceElement","drawHeader","drawBody","drawPager","drawButtons","drawGridExportOptions","drawRowButtons","drawDynamicPager","isExactMatch","exactMatch","drawColumn","_canShowButtons","drawSpecialColumn","columnProperties","bizAgiProperties","cssClass","cssclass","header","columntitlealign","isKey","sortActive","sortOrder","columnCssClass","headerLabelStyles","drawRow","rowData","isNewRow","newRow","rnd","businessKey","drawCell","_canShowRowButtons","drawSpecialCell","cellAlign","columnAlign","hidden","summarizeBy","onDrawCell","calculateSummary","resolveResult","messageValidation","drawGroupHeader","drawFooter","pages","total","number","active","records","tooltips","parameters","buttonsRtl","exportOptions","rtl","postRenderRow","_triggerHandler","asyncResult","selectDynamicPager","onDynamicPager","changePage","currentPage","Number","newPage","onPageRequested","isValid","type","sortAttribute","sortColumn","onSortRequested","selectRow","onRowUnselected","selectedBusinessKey","onRowSelected","unselectRow","operation","defaultvalue","columnValues","columnValue","processAction","onEditRow","onDeleteRow","onShowMore","onShowDetails","onAddRow","onShowExportGridOptions","_buildRefreshParameters","onCollapseGrid","onDrawControl","onDrawGroupHeader","replaceFirstWithoutPatterns","sortColumnIndex","foundComponent","button","bizagi_grid","smartPagination","isPropagationStopped","stopPropagation","pageNumber","xpath","context","isOfflineForm","onSaveAddedRows","onCancelEdition","gridExportOptionsContent","mouseleave","disposition","exportType","evt","_deleteDraft","columnComponent","ul","maxElemShow","pdata","pageToshowRtl","pageToshow","addInlineRow","createAddRowData","ceil","inlineAdd","addFormDialog","keys","getNewRowKeys","newRowKeys","getCellHeader","rowHeader","isNewRecord","updateCollapseState","getDraftRow","newRecords","bizagi_grid_desktop","groupByValues","groupByPreviousValues","rowsGroupData","summaryGroup","isNewGroup","isNewSummarygroup","drawSummaryRows","drawGroupingRows","addRowGroupData","groupByColumns","showColumn","drawEmptyCells","conectorV","bSpecialCellAdded","drawTotalizer","levels","getGroupLevels","setGroupByValues","l","level","drawGroupRow","deep","areIdenticalValues","groupByColumn","getColumnValue","groupLevel","getValidColumns","validColumns","grep","emptyCells","groupData","totalizer","realColumnsData","getRowsGroupData","calculateSummaryGroup","getFormatedValue","headerRow","columnTitle","getColumnTitle","colspan","emptyCell","conectorCorner","conectorH","columnName","getColumnName","displayType","displayTypeHeader","properties","allowDecimals","numDecimals","BIZAGI_DEFAULT_CURRENCY_INFO","decimalDigits","positiveFormat","negativeFormat","decimalSymbol","decimalSeparator","digitGroupSymbol","groupSeparator","groupDigits","colorize","roundToDecimalPlace","symbol","formatCurrency","parseBoolean","dataType","percentage","dateObj","defaultDateFormat","defaultTimeFormat","dateFormat","timeFormat","fullFormat","timePickerFormat","dateFormatter","getDateFromInvariant","showTime","INVARIANT_FORMAT","setHours","formatDate","i18n","displayName","getColSpan","valuesGroup","values","getNestedRows","group","drawSummaryRow","drawSummaryGroupCell","summaryKey","dataRowsgroup","postRenderGroupedSummary","nextUntil","groupedLevel","summaryLevel","timepicker","Timepicker","currentText","closeText","amNames","pmNames","timeSuffix","timeOnlyTitle","timeText","hourText","minuteText","secondText","millisecText","microsecText","timezoneText","isRTL","showButtonPanel","timeOnly","showHour","showMinute","showSecond","showMillisec","showMicrosec","showTimezone","stepHour","stepMinute","stepSecond","stepMillisec","stepMicrosec","millisec","microsec","timezone","hourMin","minuteMin","secondMin","millisecMin","microsecMin","hourMax","minuteMax","secondMax","millisecMax","microsecMax","minDateTime","maxDateTime","onSelect","hourGrid","minuteGrid","secondGrid","millisecGrid","microsecGrid","alwaysSetTime","altFieldTimeOnly","altTimeFormat","altSeparator","altTimeSuffix","pickerTimeFormat","pickerTimeSuffix","showTimepicker","timezoneList","addSliderAccess","sliderAccessArgs","controlType","defaultValue","$altInput","$timeObj","hour_slider","minute_slider","second_slider","millisec_slider","microsec_slider","timezone_select","hourMinOriginal","minuteMinOriginal","secondMinOriginal","millisecMinOriginal","microsecMinOriginal","hourMaxOriginal","minuteMaxOriginal","secondMaxOriginal","millisecMaxOriginal","microsecMaxOriginal","ampm","formattedDate","formattedTime","formattedDateTime","units","support","control","settings","_newInst","opts","tp_inst","fns","overrides","attrName","attrValue","eval","err","dp_inst","isFunction","evnts","onChangeMonthYear","year","month","_updateDateTime","dateText","timeDefined","toUpperCase","detectSupport","_controls","tzl","tzi","tzv","timezoneOffsetString","iso8601","timezoneOffsetNumber","getTimezoneOffset","altField","cursor","minDate","maxDate","_onFocus","_addTimePicker","currDT","_limitMinMaxDateTime","_injectTimePicker","timeString","withDate","datepicker","_getInst","dp_dateFormat","parseRes","parseDateTimeInternal","_getFormatConfig","timeObj","log","parseTime","$dp","dpDiv","litem","uitem","gridSize","noDisplay","substr","h","tmph","formatTime","m","showTz","$tp","create","marginLeft","marginRight","borderCollapse","$t","n","ap","f","_onTimeChange","_onSelectHandler","textAlign","overflow","idx","selectedYear","selectedMonth","selectedDay","selectLocalTimezone","$buttonPanel","before","sliderAccess","sliderAccessWidth","$g","oldWidth","oldMarginLeft","toString","newWidth","newMarginLeft","adjustSliders","dp_date","minDateTimeDate","getFullYear","getMonth","getMilliseconds","getMicroseconds","maxDateTimeDate","minMax","secMax","hasChanged","inputEl","dtTmp","currentYear","currentMonth","currentDay","dt","_daylightSavingAdjust","dateFmt","formatCfg","timeAvailable","lastVa","altFormattedDateTime","altFormat","lastVal","_updateDatepicker","slider","unit","step","slide","stop","sel","tmp_args","datetimepicker","parseDateTime","dateTimeString","dateSettings","timeSettings","t","date","setMicroseconds","strictParse","s","treg","regstr","match","markers","ml","charAt","merge","join","order","finds","orders","z","getFormatPositions","resTime","RegExp","d","err2","looseParse","tmptime","ampmName","convert24to12","_base_selectDate","_selectDate","dateStr","inline","stay_open","_notifyChange","_base_updateDatepicker","_curInst","_datepickerShowing","_base_doKeyPress","tz","dateChars","_possibleChars","datetimeChars","_base_updateAlternate","_updateAlternate","_getDate","_base_doKeyUp","_doKeyUp","_base_gotoToday","_gotoToday","_disableTimepickerDatepicker","_enableTimepickerDatepicker","defaults","_setTimeDatepicker","tp_date","_setDateFromField","_base_setDateDatepicker","_setDateDatepicker","timezoneAdjust","_base_getDateDatepicker","_getDateDatepicker","noDefault","_base_parseDate","parseDate","shortYearCutoff","dayNamesShort","dayNames","monthNamesShort","monthNames","_base_formatDate","_formatDate","day","_base_optionDatepicker","_optionDatepicker","name_clone","onselect","isEmptyObject","tf","isIn","computeEffectiveSetting","property","splitDateTime","timePartsLen","allParts","allPartsLen","dateString","parts","parsedTime","tzMinutes","minutes","hours","iso","tzString","normalized","toTimezone","toTz","setMinutes","timeRange","startTime","endTime","handleRange","datetimeRange","dateRange","method","checkDates","other","startdt","enddt","changeddt","setMilliseconds","minInterval","maxInterval","selectedDateTime","console","_util","_extendRemove","_isEmptyObject","_convert24to12","_detectSupport","_selectLocalTimezone","_computeEffectiveSetting","_splitDateTime","_parseDateTimeInternal","microseconds","bizagiUpload","controlReference","EXTENSIONS_INVALID","renderReference","dialogTemplate","uploadedFiles","maxAllowedFiles","isECM","isUpdatingECM","onUploadFileCompletedCallback","onChangeFile","onCheckMaxSize","dialogBox","fileControl","files","maxSize","showError","onValidate","dialogTitle","onUploadFileProcess","onUploadDialogReady","openUploadDialog","reverseButtons","getFormContainer","isClicked","file","fileName","lastIndexOf","extension","replaceAll","validExtensions","stringToCheck","acceptableExtensionsArray","required","endsWith","validateFilenameExtension","checkFileTypes","maxfiles","dialobBox","isIE11","isIE10","$statusElement","xhr","XMLHttpRequest","FormData","upload","addEventListener","progress","percent","loaded","message","responseText","setRequestHeader","getXSRFToken","send","processUploadFileModernBrowsers","uploadForm","uploadIFrame","netSpeed","networkSpeed","estimatedTime","getEstimatedTimeByNetworkSpeed","$estimatedTime","$statusContainer","interval","timeoutFn","response","contentWindow","windoFrameObj","isIE8","iframeContent","closeUploadDialog","getCurrentUser","responseLogin","submit","fail","processUploadFileOldBrowsers","xPath","idPageCache","filename","idAttrib","idFileUpload","xpathContext","alertAfterUpload","showMessageBox","reverse","dialog","modal","draggable","resizable","contentDialog","timeout","errorContainer","enabled","extensionList","processedFileExtension","formatExtensions","bizagiFileUpload","contentFormUpload","contentForm","formTemplate","onUploadFileFailCallback","onUploadFormReady","extForm","$extForm","formData","ajax","contentType","processData","success","responseJSON","error","delayQuestionFileUpload","processUploadFile","alerFailtAfterUpload","bindSubmitButton","entity","filterWrapper","filterString","filterNumber","filterDate","filterBoolean","operators","equals","appliesTo","operator","like","is-null","isUnary","less-equals-than","greater-equals-than","testPrivateFunction","nameFunction","_on","buildFilter","filterType","getFilterType","$filter","addOperators","configureHandlers","getPosition","$button","buttonType","applyFilter","$operators","operatorsData","getOperators","initialValue","getInitialValue","combo","initValue","itemValue","itemText","onChange","setControlVisibility","update","getOperator","enableButton","$inputTextControl","disableButton","$parent","validateLimitsNumbersByType","maxValue","sign","buildCurrencyFilter","$control","numeric","numericFormat","collectDataValue","regexString","regex","auxInput","validationNumber","asNumber","updateValue","parseFloat","proxy","configureHandlerInputTypeText","buildEntityFilter","overlay","entityData","auxValue","isNumeric","getAdminEntityData","idEntity","idAttribute","attribute","displayAttrib","buildRelatedEntityFilter","buildDateTimeFilter","getDateFormatByDatePickerJqueryUI","dateFormatDisplay","displayDate","changeMonth","changeYear","numberOfMonths","yearRange","buildBooleanFilter","optiongroup","buildIntegerFilter","buildNumberFilter","buildTextFilter","buildTextExtendedFilter","oper","keyup","which","nextId","_elements","_iconTemplate","overflowMenu","setAttribute","forEach","li","innerHTML","textContent","itemId","getAttribute","appendChild","getZIndex","currentTarget","delegateTarget","originalEvent","client","W","xx","H","yy","removeMenu","clientWidth","clientHeight","el","$context","bkExtend","bkClass","construct","classDef","proto","bkElement","elm","$BK","appendBefore","addEvent","bkLib","setContent","curleft","curtop","b","getStyle","border","noSelect","parentTag","cls","setStyle","st","elmStyle","itm","cssRule","defaultView","nodeType","getComputedStyle","getPropertyValue","currentStyle","camelize","removeChild","setAttributes","at","isMSIE","navigator","appVersion","attachEvent","toArray","iterable","results","childNodes","arr","cancelEvent","domLoad","domLoaded","callee","onDomLoaded","fireThis","write","protocol","onreadystatechange","readyState","getElementById","bkEvent","evType","evFunc","eventList","fireEvent","shift","__","Function","closure","__method","closureListener","object","nicEditorConfig","bold","command","tags","font-weight","italic","font-style","underline","text-decoration","noActive","center","justify","ol","subscript","superscript","strikethrough","removeformat","indent","outdent","hr","iconsPath","buttonList","iconList","bgcolor","forecolor","save","image","link","unlink","arrow","smile","print","nicEditors","nicPlugins","editors","registerPlugin","plugin","p","allTextAreas","nicOptions","textareas","getElementsByTagName","nicEditor","panelInstance","findEditor","instanceById","getFirstEditor","nicInstances","loadedPlugins","plugins","selectCheck","checkReplace","panelElm","setPanel","addInstance","r","removeInstance","removePanel","contentEditable","newInstance","nicEditorInstance","nicEditorIFrameInstance","instances","nicPanel","nicEditorPanel","nicCommand","cmd","selectedInstance","getIcon","iconName","iconFiles","backgroundImage","backgroundPosition","lastSelectedInstance","isSelected","ne","newX","newY","initialHeight","isTextarea","hasPanel","ie7s","compatMode","borderTop","overflowY","overflowX","backgroundColor","editorContain","editorElm","margin","minHeight","copyElm","saveContent","instanceDoc","keyDown","getSel","getSelection","getRng","rangeCount","getRangeAt","createRange","selRng","rng","removeAllRanges","addRange","selElm","startContainer","contain","cloneContents","selectNode","compareBoundaryPoints","Range","START_TO_START","END_TO_END","parentElement","saveRng","savedRange","savedSel","restoreRng","selInstance","isFocused","getElm","execCommand","savedStyles","initialContent","elmFrame","frameBorder","allowTransparency","scrolling","initFrame","fd","designMode","externalCSS","frameDoc","frameWin","frameContent","heightUpdate","panelButtons","panelContain","marginTop","zoom","addButton","reorder","buttonName","noOrder","nicEditorButton","hasButton","fullPanel","findButton","bl","float","hoverOn","hoverOff","mouseClick","onmousedown","onclick","enable","updateState","isDisabled","setBg","isHover","isActive","stateStyle","checkNodes","activate","deactivate","ins","toggleActive","commandArgs","nicInstance","nicPlugin","loadPanel","np","nicPaneOptions","nicEditorPane","openButton","pane","fontSize","padding","noClose","removePane","newLeft","toggle","isVisible","nicEditorAdvancedButton","addPane","addForm","form","inputs","txt","fontWeight","clear","for","lineHeight","onsubmit","findElm","tag","nicButtonTips","timer","nicSelectOptions","fontFamily","fontFormat","nicEditorSelect","selOptions","paddingLeft","setDisplay","borderLeft","borderRight","borderBottom","itmContain","over","out","k","v","nicEditorFontSizeSelect","1","2","3","4","5","6","nicEditorFontFamilySelect","arial","comic sans ms","courier new","georgia","helvetica","impact","times new roman","trebuchet ms","verdana","nicEditorFontFormatSelect","pre","h6","h5","h4","h3","h2","h1","nicLinkOptions","nicLinkButton","ln","","href","_blank","nicColorOptions","nicEditorColorButton","colorList","0","colorItems","g","colorCode","colorSquare","colorBorder","colorInner","colorSelect","nicEditorBgColorButton","nicImageOptions","nicImageButton","im","alt","align","none","nicSaveOptions","nicEditorSaveButton","onSave","smileOptions","nicEditorSmileButton","smileList","smileItems","smileClass","smileElement","smileSquare","smileBorder","smileInner","smileSelect","span","insertNode","pasteHTML","nicPrintOptions","nicEditorPrintButton","container","printElement","printMode","cases","SEARCH_MAX_LENGTH","autocomplete","source","_getLabels","minLength","messages","noResults","_prependCases","_eventRemove","lastElement","labels","plg","cssComponent","asTable","nameTemplate","rowTemplate","cellValue","oddClass","onComplete","headerClick","arr2","methods","op","a","nData","recursiveRows","fValue","testValue","addHandlers","createComponents","comps","dataComp","validateComponent","datasource","indexCol","indexRow","jquery","outerHTML","comp","rValue","addRow","nPosition","elPos","nPosRow","tmplRow","countCols","addCols","cols","completeTask","addColumn","internalData","ascombo","isSearchable","isEditable","nameSubTemplate","initializeTemplates","tmpl1","onComboDropDown","IE","appName","userAgent","tmplloader","subTemplateHTML","inputCombo","getControl","findDataByValue","compareValIn","validateValueInDatasource","idDropdown","comboDropDown","dropDownDestroy","keyUpFunction","keyDownFunction","internalComboDropDown","selectTmp","objSelected","containerDropdown","containerControl","containerRender","selectedValue","scrollPosition","repositionInterval","selfControl","dropDown","my","of","collision","recalculateComboOffset","onComboItemSelected","makeArray","dropDownReposition","tg","dropDownValidClose","etarget","activeElement","containerForm","selectedKey","setDisplayValue","altKey","selectPreviousElement","selectNextElement","selectFirstElement","selectLastElement","selectItemByKeyUp","actual","valValue","selectedLabel","controlProperties","clearDisplayValue","getSelectedValue","dropDwn","objParent","getInternetExplorerVersion","selectItem","itemChecked","checkboxGroup","generateNamecheckboxGroup","checkbox","isChecked","radioGroup","generateNameRadioGroup","radio","_dataItems","_config","_template","_cssClass","_namespace","_setDefaults","_initializeTemplates","_renderContent","_eventHandlers","$element","$target","_slideSubItems","$checkbox","toggleClass","slideToggle","dataItems","getDataItems","setList","_refresh","getList","itemsTemplate","_itemValue","_itemText","renderSubItems","_renderSubItems","subitems","subItemsTemplate","_destroy","SEARCH_MIN_LENGTH","_getDataSource","_prependElements","multiselect","ASYNC_CHECK_TIMER","checkAsycnExecutionState","getAsynchExecutionState","errorMessage","asyncecm","async.ecm.upload","async.ecm.pending.jobs","enableUI","renderAsyncECMUpload","asyncECMUploadTypes","NOT_RUNNED","RUNNING","RUN_FINNISHED_OK","RUN_FINNISHED_WITH_ERROR","updateEcmAllScheduledJobs","loadingMessage","getEcmAllScheduledJobs","renderAllScheduledJobs","ecmAsyncTemplate","jobs","failureMessageHoverIn","retryECMPendingScheduledJob","idJob","customMessage","loadtemplates","processtree","showTitle","searchKeyResource","svgIconsMode","processesTreeNew","newDesign","processTree.links","processTree.wrapper","processTree","processTree.selected","setupData","applicationTreeWrapperTmpl","applicationTreeTmpl","applicationTreeSelectedTmpl","treeRouteSelected","treeRouteText","setupInitialData","setupLinks","treeWrapper","processSelected","showSelectedProcessLabelWhenAllApplicationsSelected","selectAllApplications","hideSelectedProcessLabelWhenAllApplicationsNotSelected","selectOneAplication","changeRadioIcon","param","idSelected","getTreeRouteSelected","selector","expandOrCollapseArrows","expand","itemSelected","byUser","getApplicationCategoriesList","applicationList","appTree","svg","setTreeEvents","idApp","parentType","selectedRoute","selectedRouteText","idItem","idParent","idCategory","filterStartEvent","authorizationContext","filterCaseSecurity","categoriesList","processes","down","getTreeRouteText","setParamCanvas","entitiestree","EntitiesTree.wrapper","EntitiesTree.tree","entitiesTreeTmpl","pathNodeType","idNode","nodeDisplayPath","nodePath","idWfClass","entityPathChildNodesAction","entitiesTree","nodes","hasParent","paramsChilds","userstable","filterData","maxRows","maxPages","$canvas","users","orderType","orderField","tableHeaders","fieldValue","usersTable.wrapper","usersTable.form","usersTable.table","usersTable.message","usersTableFormTmpl","usersTableTmpl","usersTableMessage","getOrganizationsList","rps","orgList","resultTemplate","unshift","setupOrgCombo","setupEventsHandler","$content","$userForm","domain","elements","organization","pag","pagSize","getUsersTableData","cleanForm","excecuteQuery","fillUserInformation","showUsersTable","$wrapperList","pagesArray","getPagesArray","links","Object","headers","setUpPagination","setUpSortColumnLinks","msg","pagesToShow","aux","$pager","assignEventReassign","that","autoSave","attributes","resultStatus","closeDialogWidget","sortUsersTableByColumn","sortJSON","tree","tree.wrapper","tree.content","decisionTableContent","entities","deferred","getAllAdministrableEntities","idForm","renderEntityData","renderStaticForm","rendering","customHandlers","onGridAdd","showCloseButton","afterFormButtonClick","onGridEdit","surrogateKey","getEntitiesList","showButtonClearFilter","onApply","onClear","xpaths","_addButtonClearFilter","_setReturnObject","_bindContextMenuButtons","_bindContextMenu","_bindTooltip","_bindHandlers","btnRemoveFilter","returnObject","typeSearch","rangeQuery","contextMenu","types","contextMenuButtons","root","$menuContext","$menu","htmlButtons","_addFilterToDisplayName","$opener","_removeFilter","paramsContextMenu","notification","_getFormatOptions","_enableNotification","$minValue","$maxValue","_onClickMinValue","_onClickMaxValue","removeHandlersValuesMinMax","filterValue","_setDisplayValue","_setFormatValue","_getObjectValueByString","stringValue","asFloatType","minVal","maxVal","$displayNameControl","_setDisplayNameToDefault","_resetValue","$minControl","$maxControl","isLowerLimitInvalid","isUpperLimitInvalid","isRangeInvalid","_checkNotification","_disableNotification","showLabel","formatOptions","eventOnDecimalsEntered","getOwnPropertyNames","Widget","_setValuesOfReturnObject","_setDisplayTitle","from","to","_disableApply","_setDisplayLabels","_getFromControl","_getToControl","$minDate","$maxDate","_getDateFromInvariant","defaultDate","selectedDate","_enableApply","_resetValues","formatInvariant","toDefault","$displayTitleControl","displayTitle","minDateObj","maxDateObj","$applyControl","_setFilterToDisplayName","_getTextControl","textValue","isDefaultFilter","_bindDefaultFilter","filtersText","defaultValues","applied","displayText","_buildContextMenuItems","div","$container","stopImmediatePropagation","cont","valueToLocalize","formatBoolean","async"],"mappings":"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","sourcesContent":["if(!$.bizagi){\r\n\t$.bizagi = {ui:{}};\r\n}\r\n\r\n$.bizagi.ui = {\r\n\tcontrols:{\r\n\t\t\tuitable:{\r\n\t\t\t\tnamespace : 'bizagi.ui.controls.uitable',\r\n\t\t\t\tavailableComponents:['uicombo','uiradio', 'uicheckbox'],\r\n\t\t\t\tcss:'biz-ui-controls-table',\r\n\t\t\t\ttmpl: 'bizagi.ui.controls.table.template',\r\n\t\t\t\ttmpl2: 'bizagi.ui.controls.table.tr.template',\r\n\t\t\t\ttmpl3: 'bizagi.ui.controls.table.list.template'\r\n\t\t\t},\r\n\t\t\tuicombo:{\r\n\t\t\t\tnamespace: 'bizagi.ui.controls.uicombo',\r\n\t\t\t\tcss: 'biz-ui-controls-combo',\r\n\t\t\t\ttmpl: 'bizagi.ui.controls.combo.template',\r\n\t\t\t\ttmpl2: 'bizagi.ui.controls.combo.list.template'\r\n\t\t\t},\r\n\t\t\tuicheckbox:{\r\n\t\t\t\tnamespace: 'bizagi.ui.controls.uicheckbox',\r\n\t\t\t\tcss: 'biz-ui-controls-checkbox',\r\n\t\t\t\ttmpl: 'bizagi.ui.controls.checkbox.template'\r\n\t\t\t},\r\n\t\t\tuiradio:{\r\n\t\t\t\tnamespace: 'bizagi.ui.controls.uiradio',\r\n\t\t\t\tcss: 'biz-ui-controls-radio',\r\n\t\t\t\ttmpl: 'bizagi.ui.controls.radio.template'\r\n\t\t\t},\r\n\t\t\tuitreeview: {\r\n\t\t\t\tnamespace: 'bizagi.ui.controls.uitreeview',\r\n\t\t\t\tcss: 'biz-ui-controls-treeview',\r\n\t\t\t\ttmpl: 'bizagi.ui.controls.treeview.template'\r\n\t\t\t},\r\n\t\t\tuimultiselect: {\r\n\t\t\t\tnamespace: 'bizagi.ui.controls.multiselect',\r\n\t\t\t\tcss: 'biz-ui-controls-multiselect',\r\n\t\t\t\ttmpl: 'bizagi.ui.controls.multiselect.template'\r\n\t\t\t}\r\n\t\t}\r\n};","/*\r\n *   Name: BizAgi Workportal\r\n *   Author: Diego Parra\r\n *   Comments:\r\n *   -   This script will process a workportal page using a device factory to use the adequate rendering\r\n *       to create the layout\r\n */\r\n\r\n// Define BizAgi Workportal namespace\r\nbizagi.workportal = bizagi.workportal || {};\r\n\r\n// Define global variables\r\nif (!bizagi.workportal.currentInboxView)\r\n    bizagi.workportal.currentInboxView = \"inbox\";\r\n\r\n// Define state variables\r\nbizagi.workportal.state = bizagi.workportal.state || {};\r\n\r\n\r\n/*\r\n *   Renders the workportal\r\n */\r\n$.Class.extend(\"bizagi.workportal.facade\", {}, {\r\n\r\n    /*\r\n     *   Constructor\r\n     */\r\n    init: function (params) {\r\n\r\n        // Defines a device factory for all rendering\r\n        this.deviceFactory = new bizagi.workportal.device.factory(this);\r\n\r\n        // Creates a data service instance\r\n        this.dataService = new bizagi.workportal.services.service(params);\r\n\r\n        // Create instance of routing service\r\n        this.dataService.routing = new bizagi.workportal.services.routing({dataService: this.dataService});\r\n\r\n        // Set default params\r\n        this.defaultParams = params || {};\r\n\r\n        // Set default params\r\n        this.timeoutID;\r\n\r\n    },\r\n\r\n    /*\r\n     *   Loads the default widget when executing the workportal\r\n     */\r\n    loadDefaultWidget: function () {\r\n        if (!this.defaultWidget && !bizagi.util.isEmpty(window.location.hash)) {\r\n            // Check in the hash\r\n            var hashParams = bizagi.util.getHashParams();\r\n            if (hashParams[0] != \"/\")\r\n                this.defaultWidget = hashParams[0];\r\n        }\r\n        if (!this.defaultWidget && !bizagi.util.isEmpty(window.location.search)) {\r\n            // Check in the query string\r\n            var queryString = bizagi.util.getQueryString();\r\n            if ((queryString[\"widget\"] === \"activityform\" || this.defaultParams.widget === \"activityform\")\r\n                && !bizagi.util.isMobileDevice()) {\r\n                this.defaultWidget = \"projectDashboard\";\r\n                this.defaultParams.caseLink = true;\r\n            } else {\r\n                this.defaultWidget = queryString[\"widget\"];\r\n            }\r\n        }\r\n        if (!this.defaultWidget && !bizagi.util.isEmpty(this.defaultParams.widget)) {\r\n            // Check in the default params\r\n            this.defaultWidget = this.defaultParams.widget;\r\n        }\r\n        if (!this.defaultWidget && typeof (BIZAGI_DEFAULT_WIDGET) != \"undefined\"\r\n            && !bizagi.util.isEmpty(BIZAGI_DEFAULT_WIDGET)) {\r\n            // Check with overriding variable in html\r\n            this.defaultWidget = BIZAGI_DEFAULT_WIDGET;\r\n        }\r\n        if (!this.defaultWidget && bizagi.cookie(\"bizagiDefaultWidget\")) {\r\n            // Check with cookie\r\n            this.defaultWidget = bizagi.cookie(\"bizagiDefaultWidget\");\r\n        }\r\n        if (!this.defaultWidget) {\r\n            // Set a default widget based on the current device\r\n            this.defaultWidget = (bizagi.util.detectDevice() == \"smartphone_ios\"\r\n            || bizagi.util.detectDevice() == \"smartphone_android\")\r\n                ? bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INBOX\r\n                : bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INBOX_GRID;\r\n        }\r\n\r\n        // Save in cookie for next executions\r\n        if (this.defaultWidget !== \"projectDashboard\" && this.defaultWidget !== \"homeportal\") {\r\n            bizagi.cookie(\"bizagiDefaultWidget\", this.defaultWidget, {expires: 30});\r\n        }\r\n\r\n        if (this.defaultWidget === \"homeportal\") {\r\n            bizagi.cookie(\"bizagiDefaultWidget\", bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INBOX_GRID,\r\n                {expires: 30});\r\n        }\r\n\r\n        if ((this.dataService && !this.dataService.online) && bizagi.util.isTabletDevice()) {\r\n            bizagi.cookie(\"bizagiDefaultWidget\", bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INBOX,\r\n                {expires: 30});\r\n        }\r\n    },\r\n\r\n    /*\r\n     *   Start point method to use in the main javascript pages\r\n     *   This method will process everything and attach the html directly to the dom\r\n     */\r\n    execute: function (canvas) {\r\n        var self = this;\r\n        var doc = this.ownerDocument;\r\n        var body = $(\"body\", doc);\r\n        canvas = canvas || $(\"<div/>\").appendTo(body);\r\n\r\n        // Loads the default Widget\r\n        self.loadDefaultWidget();\r\n\r\n\r\n        // Creates ready deferred\r\n        self.executionDeferred = new $.Deferred();\r\n        return self.process().done(function (content) {\r\n\r\n            // Replace canvas with content\r\n            bizagi.util.replaceSelector(body, canvas, content);\r\n            self.executionDeferred.resolve();            \r\n        });\r\n    },\r\n\r\n    /*\r\n     *   Creates a webpart inside a canvas but don't execute it\r\n     */\r\n    createWebpart: function (params) {\r\n        return this.executeWebpart($.extend(params, {\r\n            creating: true\r\n        }));\r\n    },\r\n    /*\r\n     * Verifies that the webpart configuration parameters are ok, before processing the webpart\r\n     */\r\n    testWebpartConfiguration: function (params) {\r\n\r\n        var self = this;\r\n        var webpartConfiguration = params.webpartConfiguration;\r\n        var doc = this.ownerDocument;\r\n        var body = $(\"body\", doc);\r\n        var canvas = params.canvas || $(\"<div/>\").appendTo(body);\r\n        if (!webpartConfiguration.url || webpartConfiguration.url == \"\") {\r\n            bizagi.webparts.addConfigurationMessage(params, \"bizagi-sharepoint-configuration-error\");\r\n            return false;\r\n        }\r\n        return true;\r\n    },\r\n    /*\r\n     *   Executes a webpart inside a canvas\r\n     */\r\n    executeWebpart: function (params) {\r\n        var self = this;\r\n        var doc = this.ownerDocument;\r\n        var body = $(\"body\", doc);\r\n\r\n        // Creates ready deferred\r\n        var canvas = params.canvas || $(\"<div/>\").appendTo(body);\r\n        var processWebpart = true;\r\n        if (params.webpartConfiguration) {\r\n            processWebpart = self.testWebpartConfiguration(params);\r\n        }\r\n        if (processWebpart) {\r\n            // Process the webpart asynchonous\r\n            return self.processWebpart(params).done(function (result) {\r\n\r\n                // Append content to canvas\r\n                canvas.append(result.content);\r\n            });\r\n        }\r\n    },\r\n\r\n\r\n    /*\r\n     *   Returns the execution deferred to determine if the component is ready or not\r\n     */\r\n    ready: function () {\r\n\r\n        return this.executionDeferred.promise();\r\n    },\r\n\r\n    /*\r\n     *   Loads a workportal facade to delegate rendering based on device detection\r\n     *   Returns a deferred to set callbacks when the process is done\r\n     */\r\n    process: function () {\r\n        var self = this;\r\n        var defer = new $.Deferred();\r\n\r\n        // Create a workportal facade\r\n        var facade = this.deviceFactory.getWorkportalFacade(self.dataService);\r\n        //process offline data\r\n        self.processOfflineData();\r\n\r\n        // Set callback when requests have been done\r\n        $.when(facade)\r\n            .pipe(function (workportalFacade) {\r\n                // Creates workportal component\r\n                return self.processWorkportal(workportalFacade);\r\n\r\n            }).done(function (content) {\r\n            // Resolve deferred\r\n            defer.resolve(content);\r\n\r\n        });\r\n\r\n        return defer.promise();\r\n    },\r\n\r\n    processOfflineData: function () {\r\n        var self = this;\r\n\r\n        if (typeof self.dataService.fetchOfflineData != \"undefined\" && self.dataService.online == true) {\r\n            $.when(self.dataService.pushOfflineData()).always(function () {\r\n                self.dataService.fetchOfflineData();\r\n            });\r\n        }\r\n\r\n    },\r\n\r\n    /*\r\n     *   Process a webpart\r\n     */\r\n    processWebpart: function (params) {\r\n        var self = this;\r\n        var facade;\r\n        var defer = new $.Deferred();\r\n        var webpartController;\r\n        var realDevice = bizagi.detectRealDevice();\r\n\r\n     \r\n            facade = this.deviceFactory.getWorkportalFacade(self.dataService, false);\r\n\r\n        // Combine workportal params with call params\r\n        $.extend(params, this.defaultParams);\r\n\r\n        // Set callback when requests have been done\r\n        $.when(facade)\r\n            .pipe(function (workportalFacade) {\r\n\r\n                var deferTemplates = new $.Deferred();\r\n\r\n                // Load webpart templates\r\n                $.when(workportalFacade.loadWebpart(params))\r\n                    .done(function () {\r\n                        deferTemplates.resolve(workportalFacade);\r\n                    });\r\n\r\n                return deferTemplates.promise();\r\n            })\r\n            .pipe(function (workportalFacade) {\r\n                webpartController = workportalFacade.getWebpart(params.webpart, params);\r\n\r\n                // Render the full content\r\n                return webpartController.render(params);\r\n            }).done(function (content) {\r\n\r\n            // Resolve deferred \r\n            defer.resolve({webpart: webpartController, content: content});\r\n      \r\n        });\r\n        return defer.promise();\r\n    },\r\n\r\n    /**\r\n     * Process the workportal layout\r\n     */\r\n    processWorkportal: function (workportalFacade) {\r\n        var self = this;\r\n        var controller = this.mainController = workportalFacade.getMainController();\r\n        var defer = new $.Deferred();\r\n        // Render the full content\r\n        return controller.render().then(function (result) {\r\n            $.when(controller.menu.isRendered()).then(function () {\r\n                var widgetNameToLoad = self.getWidgetByDataUser(self.defaultParams);\r\n                if (widgetNameToLoad === \"projectDashboard\" && self.defaultParams.caseLink) {\r\n                    var actionObject = {\r\n                        action: bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING,\r\n                        idCase: bizagi.util.getQueryString().idCase,\r\n                        guid: bizagi.util.getQueryString().guid,\r\n                        caseLink: true\r\n                    };\r\n                    if (typeof (bizagi.util.getQueryString().idWorkitem) != \"undefined\") actionObject.idWorkItem = bizagi.util.getQueryString().idWorkitem;\r\n                    controller.publish(\"executeAction\", actionObject);\r\n                }\r\n                else {\r\n                    controller.setWidget($.extend(self.defaultParams, {\r\n                        widgetName: widgetNameToLoad\r\n                    }, bizagi.util.getQueryString()));\r\n                }\r\n\r\n                // Perform resize\r\n                if (controller.menu) {\r\n                    controller.menu.performResizeLayout();\r\n                    if (widgetNameToLoad === bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INBOX ||\r\n                        widgetNameToLoad === bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INBOX_GRID) {\r\n                        self.mainController.publish(\"showMainMenu\");\r\n                    }\r\n                }\r\n            });\r\n            return result;\r\n        });\r\n    },\r\n\r\n    /**\r\n     * Get widget to load\r\n     * @returns {bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INBOX_GRID|*}\r\n     */\r\n    getWidgetByDataUser: function () {\r\n        var self = this;\r\n        var widget = bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INBOX_GRID;\r\n        var bizagiDefaultWidget = self.defaultWidget !== \"projectDashboard\" ? bizagi.cookie(\"bizagiDefaultWidget\") : \"projectDashboard\";\r\n\r\n        var propertyLandingPage = \"\";\r\n        var userDisplayOptions = JSON.parse(bizagi.cookie(\"bizagiUserDisplayOptions\"));\r\n        if(userDisplayOptions && userDisplayOptions.startPage){\r\n            propertyLandingPage = {key: \"userstartpage\", value: userDisplayOptions.startPage};\r\n        }else if (bizagi.currentUser.sUserProperties) {\r\n            for (var i = 0, j = bizagi.currentUser.sUserProperties.length; i < j; i++) {\r\n                if (bizagi.currentUser.sUserProperties[i].key === \"userstartpage\") {\r\n                    propertyLandingPage = bizagi.currentUser.sUserProperties[i];\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n\r\n\r\n        if (bizagiDefaultWidget != bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INBOX && bizagiDefaultWidget != bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INBOX_GRID && bizagiDefaultWidget != bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_HOMEPORTAL) {\r\n            widget = bizagiDefaultWidget;\r\n        }\r\n        else {\r\n            /*\r\n             Values userstartpage property\r\n             1.  -> El usuario no ha configurado esta opcin(usuario viejo).\r\n             2. 1 -> Automatic\r\n             3. 2 -> Me\r\n             4. 3 -> Inbox\r\n             */\r\n            if (typeof propertyLandingPage === \"undefined\" || propertyLandingPage === \"\" || propertyLandingPage.value === \"\" || propertyLandingPage.value === \"1\") {\r\n                widget = self.getWidgetByCookieAndStakeholders();\r\n            }\r\n            else if (propertyLandingPage.value === \"2\" && self.currentUserHaveStakeholderAssociated()) {\r\n                widget = bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_HOMEPORTAL;\r\n            }\r\n            else if (propertyLandingPage.value === \"2\" && !self.currentUserHaveStakeholderAssociated()) {\r\n                widget = self.getWidgetByCookie(true);\r\n            }\r\n            else if (propertyLandingPage.value === \"3\") {\r\n                widget = self.getWidgetByCookie(true);\r\n            }\r\n        }\r\n        return widget;\r\n    },\r\n\r\n    /**\r\n     * Get widget considering stakeholders\r\n     * @returns {*}\r\n     */\r\n    getWidgetByCookieAndStakeholders: function () {\r\n        var self = this;\r\n        return self.getWidgetByCookie(false);\r\n    },\r\n\r\n    /**\r\n     * Validate if current user have stakeholder associated\r\n     * @returns {bizagi.currentUser.associatedStakeholders|*|boolean}\r\n     */\r\n    currentUserHaveStakeholderAssociated: function () {\r\n        return (bizagi.currentUser.associatedStakeholders && bizagi.currentUser.associatedStakeholders.length > 0);\r\n    },\r\n\r\n    /**\r\n     * Get widget by cookie\r\n     * @param forceInboxOrGrid\r\n     * @returns {*}\r\n     */\r\n    getWidgetByCookie: function (forceInboxOrGrid) {\r\n        var self = this;\r\n        var bizagiDefaultWidget = bizagi.cookie(\"bizagiDefaultWidget\");\r\n        var response;\r\n        if (forceInboxOrGrid) {\r\n            if (bizagiDefaultWidget === bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INBOX ||\r\n                bizagiDefaultWidget === bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INBOX_GRID) {\r\n\r\n                response = bizagiDefaultWidget;\r\n\r\n            } else {\r\n                response = bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INBOX_GRID;\r\n            }\r\n        }\r\n        else {\r\n            if (self.currentUserHaveStakeholderAssociated()) {\r\n                response = bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_HOMEPORTAL;\r\n            }\r\n            else {\r\n                if (bizagiDefaultWidget &&\r\n                    bizagiDefaultWidget === bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INBOX ||\r\n                    bizagiDefaultWidget === bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INBOX_GRID) {\r\n                    response = bizagiDefaultWidget;\r\n                }\r\n                else {\r\n                    response = bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INBOX_GRID;\r\n                }\r\n            }\r\n        }\r\n        return response;\r\n    },\r\n\r\n    /**\r\n     * Returns the main controller\r\n     */\r\n    getMainController: function () {\r\n        return this.mainController;\r\n    },\r\n\r\n\r\n    \r\n});\r\n","/*\r\n*   Name: BizAgi Workportal Main Controller\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will define a base class to handle workportal layouts for any device\r\n*/\r\n\r\n$.Class.extend(\"bizagi.workportal.controllers.controller\", {}, {\r\n\r\n    /**\r\n    *   Constructor\r\n    */\r\n    init: function (workportalFacade, dataService) {\r\n        // Set workportal facade\r\n        this.workportalFacade = workportalFacade;\r\n\r\n        // Set data service\r\n        this.dataService = dataService;\r\n\r\n        // Set l10n service\r\n        this.resources = bizagi.localization;\r\n\r\n        // Set a component container hash to use with templates\r\n        this.componentContainers = {};\r\n\r\n        // Define an object to hold the subscribe collection\r\n        this.subscribers = [];\r\n\r\n        // Flag to check if the element is disposed\r\n        this.disposed = false;\r\n\r\n        // Define an object to hold the templates used in the widget\r\n        this.tmpl = {};\r\n\r\n        //Define deferred to know if the templates were loaded\r\n        this.templatesDeferred = null;\r\n    },\r\n\r\n    /*\r\n    *   Returns the current workportal\r\n    */\r\n    getWorkportal: function () {\r\n        return this.workportalFacade.workportal;\r\n    },\r\n\r\n    /**\r\n    *   Publish an event so any controller can subscribe to it\r\n    */\r\n    publish: function (eventName, params) {\r\n        if (this.disposed) return null;\r\n        return $(document).triggerHandler(eventName, params);\r\n    },\r\n\r\n    /**\r\n    *   Subscribe to an event that any controller could trigger\r\n    */\r\n    subscribe: function (eventName, callback) {\r\n        if (this.disposed) return null;\r\n        $(document).bind(eventName, callback);\r\n        this.subscribers.push({ event: eventName });\r\n    },\r\n\r\n    /**\r\n    *   Subscribe to one time event that any controller could trigger\r\n    */\r\n    subscribeOneTime: function (eventName, callback) {\r\n        if (this.disposed) return null;\r\n        $(document).one(eventName, callback);\r\n        this.subscribers.push({ event: eventName });\r\n    },\r\n\r\n    /**\r\n    *   Un Subscribe to an event that any controller could trigger in this document\r\n    */\r\n    unsubscribe: function (eventName, callback) {\r\n        if (this.disposed) return null;\r\n        if (callback) {\r\n            $(document).unbind(eventName, callback);\r\n        }\r\n        else { $(document).unbind(eventName); }\r\n    },\r\n\r\n    /**\r\n    *   Makes the base processing of the layout (mix templates + data)\r\n    *   after all that processing will call a post-render method to\r\n    *   be implemented in each device to apply custom plugins\r\n    *   Returns a promise because the rendering could be asynchronous\r\n    */\r\n    render: function () {\r\n        var self = this;\r\n        var defer = new $.Deferred();\r\n        self.renderingDeferred = new $.Deferred();\r\n\r\n        // Render content\r\n        $.when(self.areTemplatedLoaded())\r\n        .pipe(function () {\r\n            return self.renderContent();\r\n        })\r\n        .done(function () {\r\n\r\n            // Call post-render method\r\n            self.postRender();\r\n\r\n            // Resolve deferred\r\n            defer.resolve(self.getContent());\r\n            self.renderingDeferred.resolve();\r\n        });\r\n\r\n        return defer.promise();\r\n    },\r\n\r\n    /*\r\n    *   Returs the rendered content\r\n    */\r\n    getContent: function () {\r\n        return this.content;\r\n    },\r\n\r\n    /*\r\n    *   Returns the mapped resource\r\n    */\r\n    getResource: function (key) {\r\n        return this.resources.getResource(key);\r\n    },\r\n\r\n    /*\r\n    *   Renders the content for the current controller\r\n    *\r\n    */\r\n    renderContent: function () {\r\n        // Override on implementations\r\n        return \"\";\r\n    },\r\n\r\n\r\n    /*\r\n    *   To be overriden in each device to apply layouts\r\n    */\r\n    postRender: function () { },\r\n\r\n    /*\r\n    *   Returns the component replaced tag selector\r\n    */\r\n    getComponentSelector: function (component) {\r\n        return \"[data-bizagi-component=\" + component + \"]\";\r\n    },\r\n\r\n    /*\r\n    *   Returns the component replaced tag selector\r\n    */\r\n    getComponentContainer: function (component) {\r\n        var self = this;\r\n        var content = self.getContent();\r\n        if (!content || content.length == 0) return null;\r\n\r\n        // Find component parent and cache it\r\n        //var componentElement = self.componentContainers[component];\r\n        //if (componentElement == null) {\r\n            // Find the component inside the main content\r\n            //componentElement = $(self.getComponentSelector(component), content);\r\n\r\n            // If still not found, try to check if content element is the component\r\n          //  if (componentElement.length == 0 && content.is(self.getComponentSelector(component))) {\r\n          //      componentElement = content;\r\n          //  }\r\n\r\n            // Cache the component\r\n           // self.componentContainers[component] = componentElement;\r\n        //}\r\n        //return self.componentContainers[component];\r\n        return $(self.getComponentSelector(component), content);\r\n    },\r\n\r\n    /*\r\n    *   Asks for a full resize\r\n    */\r\n    resizeLayout: function () {\r\n        this.publish(\"resizeLayout\");\r\n    },\r\n\r\n    /*\r\n    * Do stuff when a resize has been triggered\r\n    */\r\n    performResizeLayout: function () { },\r\n\r\n    /*\r\n    *   Disposes the widget\r\n    */\r\n    dispose: function () {\r\n        var self = this;\r\n        \r\n        if (self.subscribers != null) {\r\n            // Remove all subcriptions\r\n            $.each(self.subscribers, function (i, item) {\r\n                self.unsubscribe(item.event);\r\n            });\r\n        }\r\n        \r\n        setTimeout(function () {\r\n            bizagi.util.dispose(self);\r\n            self.disposed = true;\r\n        }, bizagi.override.disposeTime || 50);\r\n    },\r\n\r\n\r\n    /*\r\n    * Loads dinamically a set of templates\r\n    */\r\n    loadTemplates: function (templates) {\r\n        var self = this,\r\n            def = self.templatesDeferred = new $.Deferred(),\r\n            tmplPromises = [];\r\n\r\n        var useNewEngine = (templates.useNewEngine != undefined) ?  templates.useNewEngine : true;\r\n\r\n        for (var name in templates) {\r\n            if (name != \"useNewEngine\") {\r\n                tmplPromises.push(\r\n                    self.loadTemplate({\r\n                        \"name\" : name,\r\n                        \"path\" : templates[name],\r\n                        \"useNewEngine\" :useNewEngine\r\n                   })\r\n                );\r\n            }\r\n        }\r\n\r\n        $.when.apply($, tmplPromises)\r\n            .done(function () {\r\n                def.resolve();\r\n            });\r\n\r\n        return def.promise();\r\n    },\r\n\r\n\r\n    /*\r\n    * Loads template \r\n    */\r\n    loadTemplate: function (data) {\r\n        var self = this;\r\n\r\n        if (self.tmpl[data.name]) {\r\n            return self.tmpl[data.name];\r\n        } else {\r\n            if (data.useNewEngine){\r\n                return bizagi.templateService.getTemplateWidget(data.path)\r\n                    .done(function (tmpl) {\r\n                        self.tmpl[data.name] = tmpl;\r\n                    });\r\n            }\r\n\r\n            return bizagi.templateService.getTemplate(data.path)\r\n                .done(function (tmpl) {\r\n                    self.tmpl[data.name] = tmpl;\r\n                });\r\n\r\n        }\r\n    },\r\n\r\n    /*\r\n    * Gets template \r\n    */\r\n    getTemplate: function (name) {\r\n        if (this.tmpl.hasOwnProperty(name)) {\r\n            return this.tmpl[name];\r\n        }\r\n        return null;\r\n\r\n    },\r\n\r\n    /*\r\n    * Returns a promise, it is resoved when the widget is rendered\r\n    */\r\n    isRendered: function () {\r\n        var self = this;\r\n\r\n        if (!self.renderingDeferred) {\r\n            return false;\r\n        }\r\n        return self.renderingDeferred.promise();\r\n    },\r\n\r\n    /*\r\n    *\r\n    */\r\n    areTemplatedLoaded: function () {\r\n        return this.templatesDeferred;\r\n    }\r\n\r\n});\r\n","\r\n/*\r\n*   Name: BizAgi Workportal Widget Controller\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This script will define a base class to all widgets\r\n*/\r\n\r\nbizagi.workportal.controllers.controller.extend(\"bizagi.workportal.widgets.widget\", {\r\n    BIZAGI_WORKPORTAL_WIDGET_INTEGRATION: \"widgetIntegration\",\r\n    BIZAGI_WORKPORTAL_WIDGET_WEBPART: \"webpart\",\r\n    BIZAGI_WORKPORTAL_WIDGET_INBOX: \"inbox\",\r\n    BIZAGI_WORKPORTAL_WIDGET_ADVANCE_SEARCH: \"advanceSearch\",\r\n    BIZAGI_WORKPORTAL_WIDGET_HOMEPORTAL: \"homeportal\",\r\n    BIZAGI_WORKPORTAL_WIDGET_ACTIVITY: \"project.activity\",\r\n    BIZAGI_WORKPORTAL_WIDGET_PROJECT_DASHBOARD: \"projectDashboard\",\r\n    BIZAGI_WORKPORTAL_WIDGET_INBOX_GRID: \"inboxGrid\",\r\n    BIZAGI_WORKPORTAL_WIDGET_ROUTING: \"routing\",\r\n    BIZAGI_WORKPORTAL_WIDGET_SEARCH: \"search\",\r\n    BIZAGI_WORKPORTAL_WIDGET_RENDER: \"activityform\",\r\n    BIZAGI_WORKPORTAL_WIDGET_START_FORM: \"startForm\",\r\n    BIZAGI_WORKPORTAL_WIDGET_RENDERFORM: \"renderform\",\r\n    BIZAGI_WORKPORTAL_WIDGET_NEWCASE: \"newCase\",\r\n    BIZAGI_WORKPORTAL_WIDGET_QUERIES: \"queries\",\r\n    BIZAGI_WORKPORTAL_WIDGET_QUERIES_DEFINITION: \"queriesDefinition\",\r\n    BIZAGI_WORKPORTAL_WIDGET_QUERIES_SHORTCUT: \"queriesShortcut\",\r\n    BIZAGI_WORKPORTAL_WIDGET_QUERYFORM: \"queryform\",\r\n    BIZAGI_WORKPORTAL_WIDGET_LISTCASES: \"listCases\",\r\n    BIZAGI_WORKPORTAL_WIDGET_ASYNC: \"async\",\r\n    BIZAGI_WORKPORTAL_WIDGET_GENERICIFRAME: \"genericiframe\",\r\n    BIZAGI_WORKPORTAL_WIDGET_SUBMENU: \"subMenu\",\r\n    BIZAGI_WORKPORTAL_WIDGET_PRINT: \"print\",\r\n    BIZAGI_WORKPORTAL_WIDGET_FONTSIZE: \"fontsize\",\r\n    BIZAGI_WORKPORTAL_WIDGET_OLDRENDERINTEGRATION: \"oldrenderintegration\",\r\n    BIZAGI_WORKPORTAL_WIDGET_PAGE: \"page\",\r\n    BIZAGI_WORKPORTAL_WIDGET_ENTITIES: \"entities\",\r\n    BIZAGI_WORKPORTAL_WIDGET_REPORTS: \"reports\",\r\n    BIZAGI_WORKPORTAL_WIDGET_REPORTS_MENU: \"reportsMenu\",\r\n    BIZAGI_WORKPORTAL_WIDGET_REPORTS_CHART: \"reportsChart\",\r\n    BIZAGI_WORKPORTAL_WIDGET_SMARTFOLDERS: \"smartfolders\",\r\n    BIZAGI_WORKPORTAL_WIDGET_ADMIN_CASES: \"adminReassignCases\",\r\n    BIZAGI_WORKPORTAL_WIDGET_REASSIGN_CASE: \"reassignCase\",\r\n    BIZAGI_WORKPORTAL_WIDGET_ASYNCECM_UPLOAD: \"asyncECMUpload\",\r\n    BIZAGI_WORKPORTAL_WIDGET_PROCESS_TREE: \"processTree\",\r\n    BIZAGI_WORKPORTAL_WIDGET_ENTITIES_TREE: \"entitiesTree\",\r\n    BIZAGI_WORKPORTAL_WIDGET_USERS_TABLE: \"usersTable\",\r\n    BIZAGI_WORKPORTAL_WIDGET_ACTIVITY_LOG: \"activityLog\",\r\n    BIZAGI_WORKPORTAL_WIDGET_AUTHENTICATION_LOG: \"authenticationLog\",\r\n    BIZAGI_WORKPORTAL_WIDGET_ADMIN_ENTITIES: \"entityAdmin\",\r\n    BIZAGI_WORKPORTAL_WIDGET_ADMIN_ENCRYPT_PASSWORDS: \"encryptPasswords\",\r\n    BIZAGI_WORKPORTAL_WIDGET_ADMIN_USERS_REQUESTS: \"userPendingRequests\",\r\n    BIZAGI_WORKPORTAL_WIDGET_ADMIN_CASE_SEARCH: \"adminCaseSearch\",\r\n    BIZAGI_WORKPORTAL_WIDGET_ADMIN_ASYNC_ACTIVITIES: \"asyncActivities\",\r\n    BIZAGI_WORKPORTAL_WIDGET_ADMIN_DEFAULTS_ASSIGNATION_USER: \"defaultsAssignUser\",\r\n    BIZAGI_WORKPORTAL_WIDGET_ADMIN_TRANSFER_CASE_SECURITY_PERMISSIONS: \"transferCaseSecurityPermissions\",\r\n    BIZAGI_WORKPORTAL_WIDGET_ADMIN_USER_PROFILES: \"userProfiles\",\r\n    BIZAGI_WORKPORTAL_WIDGET_ADMIN_ALARMS: \"adminAlarms\",\r\n    BIZAGI_WORKPORTAL_WIDGET_ADMIN_USER_LICENSES: \"userlicenses\",\r\n    BIZAGI_WORKPORTAL_WIDGET_ADMIN_DIMENSIONS: \"dimensions\",\r\n    BIZAGI_WORKPORTAL_WIDGET_ADMIN_DOCUMENT_TEMPLATES: \"documentTemplates\",\r\n    BIZAGI_WORKPORTAL_WIDGET_ADMIN_PROCESSES: \"processes\",\r\n    BIZAGI_WORKPORTAL_WIDGET_START_PROCESS: \"startProcess\",\r\n    BIZAGI_WORKPORTAL_WIDGET_ADMIN_BUSINESS_POLICIES: \"businessPolicies\",\r\n    BIZAGI_WORKPORTAL_WIDGET_ADMIN_LANGUAGE: \"languageAdmin\",\r\n    BIZAGI_WORKPORTAL_WIDGET_ADMIN_BUSINESS_POLICIES_DECISION_TABLE: \"businessPoliciesDecisionTable\",\r\n    BIZAGI_WORKPORTAL_WIDGET_ADMIN_BUSINESS_POLICIES_POLITICS: \"businessPoliciesPolitics\",\r\n    BIZAGI_WORKPORTAL_WIDGET_ADMIN_BUSINESS_POLICIES_RULES: \"businessPoliciesRules\",\r\n    BIZAGI_WORKPORTAL_WIDGET_ADMIN_BUSINESS_POLICIES_TABS: \"businessPoliciesTabs\",\r\n    BIZAGI_WORKPORTAL_WIDGET_ADMIN_BUSINESS_POLICIES_VOCABULARIES: \"businessPoliciesVocabularies\",\r\n    BIZAGI_WORKPORTAL_WIDGET_ADMIN_PREFERENCES: \"adminPreferences\",\r\n    BIZAGI_WORKPORTAL_WIDGET_ADMIN_DISPLAY_OPTIONS: \"adminDisplayOptions\",\r\n    BIZAGI_WORKPORTAL_WIDGET_TREE: \"tree\",\r\n    BIZAGI_WORKPORTAL_WIDGET_GRAPHIC_QUERY: \"graphicquery\",\r\n    BIZAGI_WORKPORTAL_WIDGET_PROCESS_MODELER_VIEW: \"processModeler\",\r\n    BIZAGI_WORKPORTAL_WIDGET_ADMIN_USERS_ADMINISTRATION: \"adminUsers\",\r\n    BIZAGI_WORKPORTAL_WIDGET_ADMIN_USERS_DELEGATION: \"usersDelegation\",\r\n    BIZAGI_WORKPORTAL_WIDGET_ADMIN_USERS_DELEGATION_SEARCH_USER: \"usersDelegationSearchUser\",\r\n    BIZAGI_WORKPORTAL_WIDGET_ADMIN_STAKEHOLDERS: \"adminStakeholders\",\r\n    BIZAGI_WORKPORTAL_WIDGET_BIZAGI_EVENTS: \"events\",\r\n    BIZAGI_WORKPORTAL_WIDGET_BIZAGI_RELEASE: \"release\",\r\n    BIZAGI_WORKPORTAL_WIDGET_PROJECT_PROCESS_DIAGRAM_HELPER: \"processDiagramHelper\",\r\n    BIZAGI_WORKPORTAL_WIDGET_PROJECT_ACTIVITY_MAP_TOOLTIP: \"activityMapTooltip\",\r\n    BIZAGI_WORKPORTAL_WIDGET_PROJECT_USERSUMMARY: \"usersummary\",\r\n    BIZAGI_WORKPORTAL_WIDGET_MYSEARCHLIST: \"mySearchList\",\r\n    BIZAGI_WORKPORTAL_WIDGET_LOADFORM: \"loadForm\",\r\n    BIZAGI_WORKPORTAL_WIDGET_TEMPLATE_ENGINE: \"templates\",\r\n    BIZAGI_WORKPORTAL_WIDGET_DIALOGNAV: \"dialognav\",\r\n    BIZAGI_WORKPORTAL_WIDGET_ADMIN_HOLIDAYS: \"holidays\",\r\n    BIZAGI_WORKPORTAL_WIDGET_ADMIN_PROJECTNAME: \"projectName\",\r\n    BIZAGI_WORKPORTAL_WIDGET_ADMIN_OAUTH2APPLICATIONS: \"oauth2Applications\",\r\n    BIZAGI_WORKPORTAL_WIDGET_ADMIN_ADHOC_PROCESSES: \"adhocProcesses\",\r\n    BIZAGI_WORKPORTAL_WIDGET_TIMELINE: \"timeline\",\r\n    BIZAGI_WORKPORTAL_WIDGET_ADHOC_PROCESS_MODELER: \"adhocProcessModeler\",\r\n    BIZAGI_WORKPORTAL_WIDGET_ADMIN_ADHOC_ENTITIES: \"adhocEntities\",\r\n    BIZAGI_WORKPORTAL_WIDGET_ADMIN_ADHOC_USER_GROUPS: \"adhocUserGroups\",\r\n    BIZAGI_WORKPORTAL_WIDGET_ADMIN_ADHOC_CREATE_PROCESS: \"adhocCreateProcess\",\r\n    BIZAGI_WORKPORTAL_WIDGET_ADMIN_ADHOC_BOOLEAN_EXP: \"adhocBooleanExp\",\r\n    BIZAGI_WORKPORTAL_WIDGET_ADHOC_CREATE_PROCESS: \"adhocCreateProcess\",\r\n    BIZAGI_WORKPORTAL_WIDGET_PROFLY: \"adhocprofly\",\r\n    BIZAGI_WORKPORTAL_WIDGET_SESSION_TIMEOUT: \"sessionTimeOut\",\r\n    BIZAGI_WORKPORTAL_WIDGET_SESSION_TIMEOUT_EXPIRED: \"sessionTimeOutExpired\",\r\n    BIZAGI_WORKPORTAL_WIDGET_USER_PRIVACY: \"userPrivacy\",\r\n    BIZAGI_WORKPORTAL_WIDGET_ACCESS_DENIED: \"accessDenied\",\r\n    BIZAGI_WORKPORTAL_WIDGET_ADMIN_BUSINESS_POLICES: \"adminBusinessPolices\",\r\n    BIZAGI_WORKPORTAL_WIDGET_USERS_MODAL: \"usersModal\",\r\n    BIZAGI_WORKPORTAL_WIDGET_QUERIES_MANAGEMENT: \"queriesManagement\",\r\n    BIZAGI_WORKPORTAL_WIDGET_ADMIN_USER_PERMISSION_REPORT: \"userPermissionReport\"\r\n}, {\r\n\r\n    /*\r\n    *   Constructor\r\n    */\r\n    init: function (workportalFacade, dataService, params) {\r\n        // Call base\r\n        this._super(workportalFacade, dataService);\r\n\r\n        // Set params\r\n        this.params = params;\r\n        if (params && params.menu) {\r\n            this.menu = params.menu;\r\n        }\r\n\r\n        this.observableElement = $({});\r\n\r\n        this.widgetReadyDeferred = new $.Deferred();\r\n\r\n        this.isBlocked = false;\r\n    },\r\n\r\n    /*\r\n    *   Publish an event so any controller can subscribe to it\r\n    */\r\n    publish: function (eventName, params) {\r\n        if (this.disposed) return null;\r\n        // Overrides base method to add referrer\r\n        $(document).triggerHandler(eventName, $.extend(params, {\r\n            referrer: this.getWidgetName()\r\n        }));\r\n    },\r\n\r\n\r\n    /*\r\n    *   Change the current widget\r\n    */\r\n    changeWidget: function (widgetName, params) {\r\n        var self = this;\r\n        params = params || {};\r\n        var widgetParams = $.extend(params, {\r\n            widgetName: widgetName\r\n        });\r\n        self.publish(\"changeWidget\", widgetParams);\r\n    },\r\n\r\n    /*\r\n    *   Executes a workportal action\r\n    */\r\n    executeAction: function (actionName, params) {\r\n        var self = this;\r\n        params = params || {};\r\n        var actionParams = $.extend(params, {\r\n            action: actionName\r\n        });\r\n        self.publish(\"executeAction\", actionParams);\r\n    },\r\n\r\n    /*\r\n    * Show graphic query\r\n    */\r\n    showGraphicQuery: function (data) {\r\n        var self = this;\r\n        /*This method is used for validate if the request is referd to process on the fly */\r\n        var processOnTheFly = data.isAdhoc;\r\n        if(processOnTheFly === true){\r\n            bizagi.loader.start(\"processmodelerview\").then(function () {\r\n                self.publish(\"showDialogWidget\", {\r\n                    widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_PROCESS_MODELER_VIEW,\r\n                    data: data,\r\n                    modalParameters: {\r\n                        title: \"Process viewer\",\r\n                        refreshInbox: false\r\n                    },\r\n                    maximizeOnly: true,\r\n                    onClose: function () {\r\n                        bizagi.workportal.desktop.dialogStack.pop();\r\n                    }\r\n                });\r\n            });\r\n        }\r\n        else{\r\n            bizagi.loader.start(\"processviewer\").then(function () {\r\n                self.publish(\"showDialogWidget\", {\r\n                    widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_GRAPHIC_QUERY,\r\n                    data: data,\r\n                    modalParameters: {\r\n                        title: self.getResource(\"render-graphic-query\"),\r\n                        refreshInbox: false\r\n                    },\r\n                    maximizeOnly: true,\r\n                    onClose: function () {\r\n                        bizagi.workportal.desktop.dialogStack.pop();\r\n                    }\r\n                });\r\n            });\r\n        }\r\n    },\r\n\r\n    isProcessOnTheFlyCase: function () {\r\n        return true;\r\n    },\r\n\r\n    showTimeLine: function (data) {\r\n        var self = this;\r\n        bizagi.loader.startAndThen(\"timeline\").then(function () {\r\n            self.publish(\"showDialogWidget\", {\r\n                widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_TIMELINE,\r\n                data: data,\r\n                modalParameters: {\r\n                    title: self.getResource(\"workportal-project-casedashboard-timeline\"),\r\n                    refreshInbox: false\r\n                },\r\n                maximizeOnly: true,\r\n                onClose: function () {\r\n                    bizagi.workportal.desktop.dialogStack.pop();\r\n                }\r\n            });\r\n        });\r\n    },\r\n\r\n    /**\r\n     * open modal for selec an user\r\n     * @param {Deffered} def \r\n     */\r\n    showSelectUser: function (def) {\r\n        var self = this;\r\n        bizagi.loader.startAndThen(\"admin\").then(function () {\r\n            self.publish(\"showDialogWidget\", {\r\n                widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_USERS_TABLE,\r\n                data: {},\r\n                closeVisible: false,\r\n                maximize: true,\r\n                modalParameters: {\r\n                    title: bizagi.localization.getResource(\"workportal-widget-usertable-search-user\"),\r\n                    width: \"930px\",\r\n                    id: \"SelectUser\"\r\n                },\r\n                userLinkLabel: [bizagi.localization.getResource(\"workportal-widget-admin-defaults-assignation-select-link\")],\r\n                parentDef: def,\r\n                showBackButton: false,\r\n                onClose: function() {\r\n                    def.reject();\r\n                }\r\n            });\r\n    \r\n            $.when(def).done(function (userId, userName, guid) {\r\n                self.publish(\"closeCurrentDialog\");\r\n            });\r\n        });\r\n    },\r\n\r\n    routingExecute: function (element) {\r\n        // Executes routing action\r\n        if (element == undefined) {\r\n            return false;\r\n        }\r\n\r\n        var self = this;\r\n\r\n        var idCase = element.find(\"#idCase\").val() || self.params.idCase;\r\n        var idWorkflow = element.find(\"#idWorkflow\").val() || self.params.idWorkflow;\r\n        var idWorkItem = element.find(\"#idWorkItem\").val() || element.parent().find(\"#idWorkItem\").val();\r\n        var idTask = element.find(\"#idTask\").val();\r\n        var eventAsTasks = element.find(\"#eventAsTasks\").val() || false;\r\n\r\n        self.publish(\"executeAction\", {\r\n            action: bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING,\r\n            idCase: idCase,\r\n            idWorkflow: idWorkflow,\r\n            idWorkItem: idWorkItem,\r\n            idTask: idTask,\r\n            eventAsTasks: eventAsTasks\r\n        });\r\n\r\n        return true;\r\n    },\r\n\r\n\r\n    /*\r\n    * Gets the name of widget, Override on implementations\r\n     */\r\n    getWidgetName: function(){\r\n        return this.Class.fullName;\r\n    },\r\n\r\n\r\n    /*\r\n    *\r\n    */\r\n    sub: function (event) {\r\n        // Gets events registered\r\n        //var events = $._data(this.observableElement[0], \"events\");\r\n        // If the events exist, ignore it\r\n        //if (!events || !events[event]) {\r\n        this.observableElement.off.apply(this.observableElement, arguments);\r\n        this.observableElement.on.apply(this.observableElement, arguments);\r\n        //}\r\n    },\r\n\r\n    /*\r\n    *\r\n    */\r\n    unsub: function () {\r\n        this.observableElement.off.apply(this.observableElement, arguments);\r\n    },\r\n\r\n    /*\r\n    *\r\n    */\r\n    pub: function () {\r\n        return this.observableElement.triggerHandler.apply(this.observableElement, arguments);\r\n    },\r\n\r\n    /**\r\n     * This method must be used when i need to wait to all observers has been resolved\r\n     */\r\n    pubDeadLockDetection: function () {\r\n        var def = new $.Deferred();\r\n        if (!self.isBlocked) {\r\n            self.isBlocked = true;\r\n            var pubDef = this.pub.apply(this, arguments);\r\n            var queueDef = Array.isArray(pubDef) ? pubDef : [pubDef];\r\n            $.when.apply($, queueDef).done(function (data) {\r\n                self.isBlocked = false;\r\n                def.resolve();\r\n            });\r\n        } else {\r\n            def.reject()\r\n        }\r\n        return def.promise();\r\n    },\r\n\r\n    /*\r\n    * Clean the widget, removing events asociated with it.\r\n    */\r\n    clean: function(){\r\n        var self = this;\r\n\r\n        //remove events\r\n        if (this.observableElement) {\r\n            var events = $._data(this.observableElement[0], \"events\");\r\n\r\n            if (events) {\r\n                for (var event in events) {\r\n                    if (event != \"notify\" &&\r\n                         event != 'showDialogWidget' &&\r\n                         event != 'showNotification') {\r\n                        self.unsub(event);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    },\r\n\r\n    isReady: function(){\r\n        return this.widgetReadyDeferred.promise();\r\n    },\r\n\r\n    setWidgetReady: function(){\r\n        this.widgetReadyDeferred.resolve();\r\n    }\r\n\r\n});\r\n","/***\r\n@title:\r\nImage Zoom\r\n\r\n@version:\r\n2.0\r\n\r\n@author:\r\nAndreas Lagerkvist\r\n\r\n@date:\r\n2008-08-31\r\n\r\n@url:\r\nhttp://andreaslagerkvist.com/jquery/image-zoom/\r\n\r\n@license:\r\nhttp://creativecommons.org/licenses/by/3.0/\r\n\r\n@copyright:\r\n2008 Andreas Lagerkvist (andreaslagerkvist.com)\r\n\r\n@requires:\r\njquery, jquery.imageZoom.css, jquery.imageZoom.png\r\n\r\n@does:\r\nThis plug-in makes links pointing to images open in the \"Image Zoom\". Clicking a link will zoom out the clicked image to its target-image. Click anywhere on the image or the close-button to zoom the image back in. Only ~3k minified.\r\n\r\n@howto:\r\njQuery(document.body).imageZoom(); Would make every link pointing to an image in the document open in the zoom.\r\n\r\n@exampleHTML:\r\n<ul>\r\n\t<li><a href=\"http://exscale.se/__files/3d/bloodcells.jpg\">Bloodcells</a></li>\r\n\t<li><a href=\"http://exscale.se/__files/3d/x-wing.jpg\">X-Wing</a></li>\r\n\t<li><a href=\"http://exscale.se/__files/3d/weve-moved.jpg\">We've moved</a></li>\r\n</ul>\r\n\r\n<ul>\r\n\t<li><a href=\"http://exscale.se/__files/3d/lamp-and-mates/lamp-and-mates-01.jpg\"><img src=\"http://exscale.se/__files/3d/lamp-and-mates/lamp-and-mates-01_small.jpg\" alt=\"Lamp and Mates\" /></a></li>\r\n\t<li><a href=\"http://exscale.se/__files/3d/stugan-winter.jpg\"><img src=\"http://exscale.se/__files/3d/stugan-winter_small.jpg\" alt=\"The Cottage - Winter time\" /></a></li>\r\n\t<li><a href=\"http://exscale.se/__files/3d/ps2.jpg\"><img src=\"http://exscale.se/__files/3d/ps2_small.jpg\" alt=\"PS2\" /></a></li>\r\n</ul>\r\n\r\n@exampleJS:\r\n// I don't run it because my site already uses imgZoom\r\n// jQuery(document.body).imageZoom();\r\n***/\r\njQuery.fn.imageZoom = function (conf) {\r\n    // Some config. If you set dontFadeIn: 0 and hideClicked: 0 imgzoom will act exactly like fancyzoom\r\n    var config = jQuery.extend({\r\n        speed:\t\t\t200,\t// Animation-speed of zoom\r\n        dontFadeIn:\t\t1,\t\t// 1 = Do not fade in, 0 = Do fade in\r\n        hideClicked:\t1,\t\t// Whether to hide the image that was clicked to bring up the imgzoom\r\n        imageMargin:\t30,\t\t// Margin from image-edge to window-edge if image is larger than screen\r\n        className:\t\t'jquery-image-zoom', \r\n        loading:\t\t'Loading...'\r\n    }, conf);\r\n    config.doubleSpeed = config.speed / 4; // Used for fading in the close-button\r\n\r\n    return this.click(function(e) {\r\n        // Make sure the target-element is a link (or an element inside a link)\r\n        var clickedElement\t= jQuery(e.target); // The element that was actually clicked\r\n        var clickedLink\t\t= clickedElement.is('a') ? clickedElement : clickedElement.parents('a'); // If it's not an a, check if any of its parents is\r\n        clickedLink\t\t= (clickedLink && clickedLink.is('a')) ? clickedLink : false; // If it was an a or child of an a, make sure it points to an image\r\n        \r\n        if(!clickedLink){\r\n            // Check if its image with src\r\n            clickedLink = clickedElement || false;\r\n        }\r\n        var clickedImg\t\t= clickedElement;// || (clickedLink && clickedLink.find('img').length) ? clickedLink.find('img') : false; // See if the clicked link contains and image\r\n\r\n        // Only continue if a link pointing to an image was clicked\r\n        if (clickedLink) {\r\n            // These functions are used when the imaeg starts and stops loading (displays either 'loading..' or fades out the clicked img slightly)\r\n            clickedLink.oldText\t= clickedLink.text();\r\n\r\n            clickedLink.setLoadingImg = function () {\r\n                if (clickedImg) {\r\n                    clickedImg.css({\r\n                        opacity: '0.5'\r\n                    });\r\n                }\r\n                else {\r\n                    clickedLink.text(config.loading);\r\n                }\r\n            };\r\n\r\n            clickedLink.setNotLoadingImg = function () {\r\n                if (clickedImg) {\r\n                    clickedImg.css({\r\n                        opacity: '1'\r\n                    });\r\n                }\r\n                else {\r\n                    clickedLink.text(clickedLink.oldText);\r\n                }\r\n            };\r\n\r\n            // The URI to the image we are going to display\r\n            var displayImgSrc = clickedLink.attr('href') || clickedLink.attr('src');\r\n\r\n            // If an imgzoom wiv this image is already open dont do nathin\r\n            if (jQuery('div.' + config.className + ' img[src=\"' + displayImgSrc + '\"]').length) {\r\n                return false;\r\n            }\r\n\r\n            // This function is run once the displayImgSrc-img has loaded (below)\r\n            var preloadOnload = function (pload) {\r\n                // The clicked-link is faded out during loading, fade it back in\r\n                clickedLink.setNotLoadingImg();\r\n\r\n                // Now set some vars we need\r\n                var dimElement\t\t= clickedImg ? clickedImg : clickedLink; // The element used to retrieve dimensions of imgzoom before zoom (either clicked link or img inside)\r\n                var hideClicked\t\t= clickedImg ? config.hideClicked : 0; // Whether to hide clicked link (set in config but always true for non-image-links)\r\n                var offset\t\t\t= dimElement.offset(); // Offset of clicked link (or image inside)\r\n                var imgzoomBefore\t= { // The dimensions of the imgzoom _before_ it is zoomed out\r\n                    width:\t\tdimElement.outerWidth(), \r\n                    height:\t\tdimElement.outerHeight(), \r\n                    left:\t\toffset.left, \r\n                    top:\t\toffset.top/*, \r\n\t\t\t\t\topacity:\tconfig.dontFadeIn*/\r\n                };\r\n                var imgzoom\t\t\t= jQuery('<div><img src=\"' + displayImgSrc + '\" alt=\"\"/></div>').css('position', 'absolute').appendTo(document.body); // We don't want any class-name or any other contents part from the image when we calculate the new dimensions of the imgzoom\r\n                var imgzoomAfter\t= { // The dimensions of the imgzoom _after_ it is zoomed out\r\n                    width:\t\tpload.width, \r\n                    height:\t\tpload.height/*, \r\n\t\t\t\t\topacity:\t1*/\r\n                };\r\n                var windowDim = {\r\n                    width:\tjQuery(window).width(), \r\n                    height:\tjQuery(window).height()\r\n                };\r\n                // Make sure imgzoom isn't wider than screen\r\n                if (imgzoomAfter.width > (windowDim.width - config.imageMargin * 2)) {\r\n                    var nWidth\t\t\t= windowDim.width - config.imageMargin * 2;\r\n                    imgzoomAfter.height\t= (nWidth / imgzoomAfter.width) * imgzoomAfter.height;\r\n                    imgzoomAfter.width\t= nWidth;\r\n                }\r\n                // Now make sure it isn't taller\r\n                if (imgzoomAfter.height > (windowDim.height - config.imageMargin * 2)) {\r\n                    var nHeight\t\t\t= windowDim.height - config.imageMargin * 2;\r\n                    imgzoomAfter.width\t= (nHeight / imgzoomAfter.height) * imgzoomAfter.width;\r\n                    imgzoomAfter.height\t= nHeight;\r\n                }\r\n                // Center imgzoom\r\n                imgzoomAfter.left\t= (windowDim.width - imgzoomAfter.width) / 2 + jQuery(window).scrollLeft();\r\n                imgzoomAfter.top\t= (windowDim.height - imgzoomAfter.height) / 2 + jQuery(window).scrollTop();\r\n                var closeButton\t\t= jQuery('<a href=\"#\">Close</a>').appendTo(imgzoom).hide(); // The button that closes the imgzoom (we're adding this after the calculation of the dimensions)\r\n\r\n                // Hide the clicked link if set so in config\r\n                if (hideClicked) {\r\n                    clickedLink.css('visibility', 'hidden');\r\n                }\r\n\r\n                // Now animate the imgzoom from its small size to its large size, and then fade in the close-button\r\n                imgzoom.addClass(config.className).css(imgzoomBefore).animate(imgzoomAfter, config.speed, function () {\r\n                    closeButton.fadeIn(config.doubleSpeed);\r\n                });\r\n\r\n                if (typeof(config.zIndex) === \"number\"){\r\n                    $(imgzoom).css(\"z-index\",config.zIndex);\r\n                }\r\n\r\n                // This function closes the imgzoom\r\n                var hideImgzoom = function() {\r\n                    closeButton.fadeOut(config.doubleSpeed, function() {\r\n                        imgzoom.animate(imgzoomBefore, config.speed, function() {                            \r\n                            $(\"body\", window.document).off(\"click\");                           \r\n\r\n                            clickedLink.css('visibility', 'visible');\r\n                            imgzoom.remove();\r\n                        });\r\n                    });\r\n\r\n                    return false;\r\n                };\r\n\r\n                // Close imgzoom when you click the closeButton or the imgzoom                \r\n                imgzoom.click(hideImgzoom);\r\n                closeButton.click(hideImgzoom);\r\n                $(\"body\", window.document).on(\"click\", hideImgzoom);\r\n\r\n            };\r\n\r\n            // Preload image\r\n            var preload = new Image();\r\n\r\n            preload.src = displayImgSrc;\r\n\r\n            if (preload.complete) {\r\n                preloadOnload(preload);\r\n            } else {\r\n                clickedLink.setLoadingImg();\r\n\r\n                preload.onload = function() {\r\n                    preloadOnload(preload);\r\n                };\r\n            }\r\n\r\n            // Finally return false from the click so the browser doesn't actually follow the link...\r\n            return false;\r\n        }\r\n    });\r\n};\r\n\r\n// Close image zooms when user hits esc\r\n$(document).keydown(function (e) {\r\n    if (e.keyCode == 27) {\r\n        $(\"div.jquery-image-zoom a\").click();\r\n    }\r\n});\r\n","/*\r\n* jQuery UI Check @VERSION\r\n* Author: Diego Parra\r\n* Based on http://www.filamentgroup.com/lab/accessible_custom_designed_checkbox_radio_button_inputs_styled_css_jquery/ plugin\r\n* Copyright (c) 2010 (http://www.bizagi.com)\r\n*\r\n* Depends:\r\n*  ui.core.js\r\n*/\r\n(function ($) {\r\n\r\n    $.widget('ui.check', {\r\n        _create: function () {\r\n            var self = this,\r\n                    element = this.element,\r\n                    options = self.options;\r\n\r\n            // Get the associated label using the input's id\r\n            var label = this.element;\r\n            var input = self.input = $(\"input[type=checkbox]\", label);\r\n\r\n            if (label.attr(\"for\") != input.attr(\"id\")) {\r\n                alert(\"label and input element are not related in label:\" + label.attr(\"id\"));\r\n                return;\r\n            }\r\n\r\n            // Wrap the input + label in a div \r\n            input.detach();\r\n            label.wrap('<div class=\"ui-checkbox\"></div>');\r\n            input.insertBefore(label);\r\n\r\n            // Necessary for browsers that don't support the :hover pseudo class on labels\r\n            label.hover(\r\n\t\t\t        function () {\r\n\t\t\t            $(this).addClass('ui-checkbox-state-hover');\r\n\t\t\t            if (input.is(':checked')) {\r\n\t\t\t                $(this).addClass('ui-checkbox-state-checked');\r\n\t\t\t            }\r\n\t\t\t        },\r\n\t\t\t        function () {\r\n\t\t\t            $(this).removeClass('ui-checkbox-state-hover');\r\n\t\t\t        }\r\n\t\t        );\r\n\r\n            // Bind custom event, trigger it, bind click,focus,blur events\t\t\t\t\t\r\n            input.bind('update', function (ev, args) {\r\n                var triggerChange = args && args.triggerChange !== undefined ? args.triggerChange : true;\r\n\r\n                if (input.is(':checked')) {\r\n                    label.addClass('ui-checkbox-state-checked');\r\n                } else {\r\n                    label.removeClass('ui-checkbox-state-highlight ui-checkbox-state-checked ui-checkbox-state-hover');\r\n                }\r\n\r\n                // Trigger change event\r\n                if (triggerChange) self._trigger(\"change\", window.event, { value: input.is(':checked') });\r\n            })\r\n\t\t    .trigger('update')\r\n\t\t    .click(function () {\r\n\t\t        $(this).trigger('update');\r\n\t\t    })\r\n\t\t    .focus(function () {\r\n\t\t        if (input.is(':checked')) {\r\n\t\t            label.addClass('ui-checkbox-state-highlight');\r\n\t\t        }\r\n\t\t    })\r\n\t\t    .blur(function () {\r\n\t\t        label.removeClass('ui-checkbox-state-highlight');\r\n\t\t    });\r\n        },\r\n\r\n        checkItem: function (triggerChange) {\r\n            var self = this;\r\n            self.input.attr(\"checked\", true);\r\n            self.input.prop(\"checked\", true);\r\n            self.input.trigger('update', { triggerChange: triggerChange });\r\n        },\r\n\r\n        uncheckItem: function (triggerChange) {\r\n            var self = this;\r\n            self.input.attr(\"checked\", false);\r\n            self.input.prop(\"checked\", false);\r\n            self.input.trigger('update', { triggerChange: triggerChange });\r\n        }\r\n    });\r\n\r\n    $.extend($.ui.check, {\r\n        version: \"@VERSION\",\r\n        eventPrefix: \"check\"\r\n    });\r\n\r\n})(jQuery);","/*\r\n* jQuery UI selectmenu\r\n*\r\n* Copyright (c) 2009 AUTHORS.txt (http://jqueryui.com/about)\r\n* Dual licensed under the MIT (MIT-LICENSE.txt)\r\n* and GPL (GPL-LICENSE.txt) licenses.\r\n*\r\n* http://docs.jquery.com/UI\r\n*/\r\n\r\n\r\n\r\n\r\n\r\n(function ($) {\r\n    $.widget(\"ui.selectmenu\", {\r\n        getter: \"value\",\r\n        version: \"1.8\",\r\n        eventPrefix: \"selectmenu\",\r\n        options: {\r\n            transferClasses: true,\r\n            style: 'popup',\r\n            width: null,\r\n            menuWidth: null,\r\n            handleWidth: 26,\r\n            maxHeight: null,\r\n            icons: null,\r\n            format: null\r\n        },\r\n\r\n        _create: function () {\r\n            var self = this, o = this.options;\r\n\r\n            //quick array of button and menu id's\r\n            this.ids = [this.element.attr('id') + '-' + 'button', this.element.attr('id') + '-' + 'menu'];\r\n\r\n            //define safe mouseup for future toggling\r\n            this._safemouseup = true;\r\n\r\n            //create menu button wrapper\r\n            this.newelement = $('<a class=\"' + this.widgetFullName + ' ui-widget ui-state-default ui-corner-all\" id=\"' + this.ids[0] + '\" role=\"button\" href=\"#\" aria-haspopup=\"true\" aria-owns=\"' + this.ids[1] + '\"></a>')\r\n\t\t\t.insertAfter(this.element);\r\n\r\n            //transfer tabindex\r\n            var tabindex = this.element.attr('tabindex');\r\n            if (tabindex) { this.newelement.attr('tabindex', tabindex); }\r\n\r\n            //save reference to select in data for ease in calling methods\r\n            this.newelement.data('selectelement', this.element);\r\n\r\n            //menu icon\r\n            this.selectmenuIcon = $('<span class=\"' + this.widgetFullName + '-icon ui-icon\"></span>')\r\n\t\t\t.prependTo(this.newelement)\r\n\t\t\t.addClass((o.style == \"popup\") ? 'ui-icon-triangle-2-n-s' : 'ui-icon-triangle-1-s');\r\n\r\n\r\n            //make associated form label trigger focus\r\n                \r\n            $('label[for=' + this.element.attr('id') + ']')\r\n\t\t\t.attr('for', this.ids[0])\r\n\t\t\t.bind('click', function () {\r\n\t\t\t    try {\r\n\t\t\t        self.newelement[0].focus();\r\n\t\t\t    } catch (e) { }\r\n\t\t\t    return false;\r\n\t\t\t});\r\n\r\n            //click toggle for menu visibility\r\n            this.newelement\r\n\t\t\t.bind('mousedown', function (event) {\r\n\t\t\t    self._toggle(event);\r\n\t\t\t    //make sure a click won't open/close instantly\r\n\t\t\t    if (o.style == \"popup\") {\r\n\t\t\t        self._safemouseup = false;\r\n\t\t\t        setTimeout(function () { self._safemouseup = true; }, 300);\r\n\t\t\t    }\r\n\t\t\t    return false;\r\n\t\t\t})\r\n\t\t\t.bind('click', function () {\r\n\t\t\t    return false;\r\n\t\t\t})\r\n\t\t\t.keydown(function (event) {\r\n\t\t\t    var ret = true;\r\n\t\t\t      switch (event.keyCode) {\r\n\t\t\t        case $.ui.keyCode.ENTER:\r\n\t\t\t            ret = true;\r\n\t\t\t            break;\r\n\t\t\t        case $.ui.keyCode.SPACE:\r\n\t\t\t            ret = false;\r\n\t\t\t            self._toggle(event);\r\n\t\t\t            break;\r\n\t\t\t        case $.ui.keyCode.UP:\r\n\t\t\t        case $.ui.keyCode.LEFT:\r\n\t\t\t            ret = false;\r\n\t\t\t            // Next conditional prevents to close the combo\r\n\t\t\t            if (self.list.is('.ui-selectmenu-open'))  {\r\n\t\t\t                self._moveSelection(-1);\r\n\t\t\t                self.open();\r\n\t\t\t            } else self._moveSelection(-1);\r\n\t\t\t            break;\r\n\t\t\t        case $.ui.keyCode.DOWN:\r\n\t\t\t        case $.ui.keyCode.RIGHT:\r\n\t\t\t            ret = false;\r\n\t\t\t            // Next conditional prevents to close the combo\r\n\t\t\t            if (self.list.is('.ui-selectmenu-open'))  {\r\n\t\t\t                self._moveSelection(1);\r\n\t\t\t                self.open();\r\n\t\t\t            } else self._moveSelection(1);\r\n\t\t\t            break;\r\n\t\t\t        case $.ui.keyCode.TAB:\r\n\t\t\t            ret = true;\r\n\t\t\t            break;\r\n\t\t\t        default:\r\n\t\t\t            ret = false;\r\n\t\t\t            //self._typeAhead(event.keyCode, 'mouseup');\r\n\t\t\t            // Mouseup creates a problem on the first selectmenuOpen\r\n\t\t\t             self._typeAhead(event.keyCode, 'focus');\r\n\t\t\t            break;\r\n\t\t\t    }\r\n\t\t\t    return ret;\r\n\t\t\t})\r\n\t\t\t.bind('mouseover focus', function () {\r\n\t\t\t    $(this).addClass(self.widgetFullName + '-focus ui-state-hover');\r\n\t\t\t})\r\n\t\t\t.bind('mouseout blur', function () {\r\n\t\t\t    $(this).removeClass(self.widgetFullName + '-focus ui-state-hover');\r\n\t\t\t});\r\n\r\n            //document click closes menu\r\n            $(document)\r\n\t\t\t.mousedown(function (event) {\r\n\t\t\t    self.close(event);\r\n\t\t\t});\r\n\r\n            //change event on original selectmenu\r\n            this.element\r\n\t\t\t.click(function () { this._refreshValue(); })\r\n            // newelement can be null under unclear circumstances in IE8 \r\n\t\t\t.focus(function () { if (this.newelement) { this.newelement[0].focus(); } });\r\n            \r\n            //create menu portion, append to body\r\n            var cornerClass = (o.style == \"dropdown\") ? \" ui-corner-bottom\" : \" ui-corner-all\"\r\n            this.list = $('<ul class=\"' + self.widgetFullName + '-menu ui-widget ui-widget-content' + cornerClass + '\" aria-hidden=\"true\" role=\"listbox\" aria-labelledby=\"' + this.ids[0] + '\" id=\"' + this.ids[1] + '\"></ul>').appendTo('body');\r\n            //serialize selectmenu element options\t\r\n            var selectOptionData = [];\r\n            this.element\r\n\t\t\t.find('option')\r\n\t\t\t.each(function () {\r\n\t\t\t    selectOptionData.push({\r\n\t\t\t        value: $(this).attr('value'),\r\n\t\t\t        text: self._formatText(jQuery(this).text()),\r\n\t\t\t        selected: $(this).attr('selected'),\r\n\t\t\t        classes: $(this).attr('class'),\r\n\t\t\t        parentOptGroup: $(this).parent('optgroup').attr('label')\r\n\t\t\t    });\r\n\t\t\t});\r\n\r\n            //active state class is only used in popup style\r\n            var activeClass = (self.options.style == \"popup\") ? \" ui-state-active\" : \"\";\r\n\r\n            //write li's\r\n            for (var i = 0; i < selectOptionData.length; i++) {\r\n                var thisLi = $('<li role=\"presentation\"><a href=\"#\" tabindex=\"-1\" role=\"option\" aria-selected=\"false\">' + selectOptionData[i].text + '</a></li>')\r\n\t\t\t\t.data('index', i)\r\n\t\t\t\t.addClass(selectOptionData[i].classes)\r\n\t\t\t\t.data('optionClasses', selectOptionData[i].classes || '')\r\n\t\t\t\t.mouseup(function (event) {\r\n\t\t\t\t    if (self._safemouseup) {\r\n\t\t\t\t        var changed = $(this).data('index') != self._selectedIndex();\r\n\t\t\t\t        self.index($(this).data('index'));\r\n\t\t\t\t        self.select(event);\r\n\t\t\t\t        if (changed) { self.change(event); }\r\n\t\t\t\t        self.close(event, true);\r\n\t\t\t\t    }\r\n\t\t\t\t    return false;\r\n\t\t\t\t})\r\n\t\t\t\t.click(function () {\r\n\t\t\t\t    return false;\r\n\t\t\t\t})\r\n\t\t\t\t.bind('mouseover focus', function () {\r\n\t\t\t\t    self._selectedOptionLi().addClass(activeClass);\r\n\t\t\t\t    self._focusedOptionLi().removeClass(self.widgetFullName + '-item-focus ui-state-hover');\r\n                    $(this).removeClass('ui-state-active').addClass(self.widgetFullName + '-item-focus ui-state-hover');\r\n\t\t\t\t})\r\n\t\t\t\t.bind('mouseout blur', function () {\r\n\t\t\t\t    if ($(this).is(self._selectedOptionLi())) { $(this).addClass(activeClass); }\r\n\t\t\t\t    if (!$.browser.msie) $(this).removeClass(self.widgetFullName + '-item-focus ui-state-hover');\r\n\t\t\t\t});\r\n\r\n                //optgroup or not...\r\n                if (selectOptionData[i].parentOptGroup) {\r\n                    // whitespace in the optgroupname must be replaced, otherwise the li of existing optgroups are never found\r\n                    var optGroupName = self.widgetFullName + '-group-' + selectOptionData[i].parentOptGroup.replace(/[^a-zA-Z0-9]/g, \"\");\r\n                    if (this.list.find('li.' + optGroupName).size()) {\r\n                        this.list.find('li.' + optGroupName + ':last ul').append(thisLi);\r\n                    }\r\n                    else {\r\n                        $('<li role=\"presentation\" class=\"' + self.widgetFullName + '-group ' + optGroupName + '\"><span class=\"' + self.widgetFullName + '-group-label\">' + selectOptionData[i].parentOptGroup + '</span><ul></ul></li>')\r\n\t\t\t\t\t\t.appendTo(this.list)\r\n\t\t\t\t\t\t.find('ul')\r\n\t\t\t\t\t\t.append(thisLi);\r\n                    }\r\n                }\r\n                else {\r\n                    thisLi.appendTo(this.list);\r\n                }\r\n\r\n                //this allows for using the scrollbar in an overflowed list\r\n                this.list.bind('mousedown mouseup', function () { return false; });\r\n\r\n                //append icon if option is specified\r\n                if (o.icons) {\r\n                    for (var j in o.icons) {\r\n                        if (thisLi.is(o.icons[j].find)) {\r\n                            thisLi\r\n\t\t\t\t\t\t\t.data('optionClasses', selectOptionData[i].classes + ' ' + self.widgetFullName + '-hasIcon')\r\n\t\t\t\t\t\t\t.addClass(self.widgetFullName + '-hasIcon');\r\n                            var iconClass = o.icons[j].icon || \"\";\r\n\r\n                            thisLi\r\n\t\t\t\t\t\t\t.find('a:eq(0)')\r\n\t\t\t\t\t\t\t.prepend('<span class=\"' + self.widgetFullName + '-item-icon ui-icon ' + iconClass + '\"></span>');\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n\r\n            //add corners to top and bottom menu items\r\n            this.list.find('li:last').addClass(\"ui-corner-bottom\");\r\n            if (o.style == 'popup') { this.list.find('li:first').addClass(\"ui-corner-top\"); }\r\n\r\n            //transfer classes to selectmenu and list\r\n            if (o.transferClasses) {\r\n                var transferClasses = this.element.attr('class') || '';\r\n                this.newelement.add(this.list).addClass(transferClasses);\r\n            }\r\n\r\n            //original selectmenu width\r\n            var clonedSelect = this.element.clone().appendTo(\"body\");\r\n            var selectWidth = clonedSelect.css({ position: \"absolute\", visibility: \"hidden\", display: \"block\" }).width();\r\n            clonedSelect.remove();\r\n\r\n            //set menu button width\r\n            this.newelement.width((o.width) ? o.width : selectWidth);\r\n\r\n            //set menu width to either menuWidth option value, width option value, or select width \r\n            if (o.style == 'dropdown') { this.list.width((o.menuWidth) ? o.menuWidth : ((o.width) ? o.width : selectWidth)); }\r\n            else { this.list.width((o.menuWidth) ? o.menuWidth : ((o.width) ? o.width - o.handleWidth : selectWidth - o.handleWidth)); }\r\n\r\n            //set max height from option \r\n            if (o.maxHeight && o.maxHeight < this.list.height()) { this.list.height(o.maxHeight); }\r\n\r\n            //save reference to actionable li's (not group label li's)\r\n            this._optionLis = this.list.find('li:not(.' + self.widgetFullName + '-group)');\r\n\r\n            //transfer menu click to menu button\r\n            this.list\r\n\t\t\t.keydown(function (event) {\r\n\t\t\t    var ret = true;\r\n\t\t\t    switch (event.keyCode) {\r\n\t\t\t        case $.ui.keyCode.UP:\r\n\t\t\t        case $.ui.keyCode.LEFT:\r\n\t\t\t            ret = false;\r\n\t\t\t            //self._moveFocus(-1);\r\n\t\t\t            self._moveSelection(-1);\r\n\t\t\t            self.open();\r\n\t\t\t            break;\r\n\t\t\t        case $.ui.keyCode.DOWN:\r\n\t\t\t        case $.ui.keyCode.RIGHT:\r\n\t\t\t            ret = false;\r\n\t\t\t            //self._moveFocus(1);\r\n\t\t\t            self._moveSelection(1);\r\n\t\t\t            self.open();\r\n\t\t\t            break;\r\n\t\t\t        case $.ui.keyCode.HOME:\r\n\t\t\t            ret = false;\r\n\t\t\t            self._moveFocus(':first');\r\n\t\t\t            break;\r\n\t\t\t        case $.ui.keyCode.PAGE_UP:\r\n\t\t\t            ret = false;\r\n\t\t\t            self._scrollPage('up');\r\n\t\t\t            break;\r\n\t\t\t        case $.ui.keyCode.PAGE_DOWN:\r\n\t\t\t            ret = false;\r\n\t\t\t            self._scrollPage('down');\r\n\t\t\t            break;\r\n\t\t\t        case $.ui.keyCode.END:\r\n\t\t\t            ret = false;\r\n\t\t\t            self._moveFocus(':last');\r\n\t\t\t            break;\r\n\t\t\t        case $.ui.keyCode.ENTER:\r\n\t\t\t        case $.ui.keyCode.SPACE:\r\n\t\t\t            ret = false;\r\n\t\t\t            self.close(event, true);\r\n\t\t\t            $(event.target).parents('li:eq(0)').trigger('mouseup');\r\n\t\t\t            break;\r\n\t\t\t        case $.ui.keyCode.TAB:\r\n\t\t\t            ret = true;\r\n\t\t\t            self.close(event, true);\r\n\t\t\t            break;\r\n\t\t\t        case $.ui.keyCode.ESCAPE:\r\n\t\t\t            ret = false;\r\n\t\t\t            self.close(event, true);\r\n\t\t\t            break;\r\n\t\t\t        default:\r\n\t\t\t            ret = false;\r\n\t\t\t            self._typeAhead(event.keyCode, 'focus');\r\n\t\t\t            break;\r\n\t\t\t    }\r\n\t\t\t    return ret;\r\n\t\t\t});\r\n\r\n            //selectmenu style\r\n            if (o.style == 'dropdown') {\r\n                this.newelement\r\n\t\t\t\t.addClass(self.widgetFullName + \"-dropdown\");\r\n                this.list\r\n\t\t\t\t.addClass(self.widgetFullName + \"-menu-dropdown\");\r\n            }\r\n            else {\r\n                this.newelement\r\n\t\t\t\t.addClass(self.widgetFullName + \"-popup\");\r\n                this.list\r\n\t\t\t\t.addClass(self.widgetFullName + \"-menu-popup\");\r\n            }\r\n\r\n            //append status span to button\r\n            if (this._selectedIndex() && this._selectedIndex() != -1) {\r\n                this.newelement.prepend('<span class=\"' + self.widgetFullName + '-status\">' + selectOptionData[this._selectedIndex()].text + '</span>');\r\n            } else {\r\n                this.newelement.prepend('<span class=\"' + self.widgetFullName + '-status\"></span>');\r\n            }\r\n\r\n            //hide original selectmenu element\r\n            this.element.hide();\r\n\r\n            //transfer disabled state\r\n            if (this.element.attr('disabled') == true) { this.disable(); }\r\n\r\n            //update value\r\n            this.index(this._selectedIndex());\r\n\r\n            // needed to make menu work when placed at the very bottom of a site\r\n            setTimeout(function () { self._refreshPosition(); }, 200);\r\n\r\n            // needed when window is resized\r\n            $(window).resize(function () {\r\n                self._refreshPosition();\r\n            });\r\n        },\r\n        destroy: function () {\r\n            this.element.removeData(this.widgetName)\r\n\t\t\t.removeClass(this.widgetFullName + '-disabled' + ' ' + this.namespace + '-state-disabled')\r\n\t\t\t.removeAttr('aria-disabled');\r\n\r\n            //unbind click on label, reset its for attr\r\n            var label = $('label[for=' + this.newelement.attr('id') + ']')\r\n\t\t\t             .attr('for', this.element.attr('id'));\r\n\t\t\tif (label) label.unbind('click');\r\n            this.newelement.remove();\r\n            this.list.remove();\r\n            this.element.show();\r\n        },\r\n        _typeAhead: function (code, eventType) {\r\n            var self = this;\r\n            //define self._prevChar if needed\r\n            if (!self._prevChar) { self._prevChar = ['', 0]; }\r\n            var C = String.fromCharCode(code);\r\n            c = C.toLowerCase();\r\n            var focusFound = false;\r\n            function focusOpt(elem, ind) {\r\n                focusFound = true;\r\n                $(elem).trigger(eventType);\r\n                self._prevChar[1] = ind;\r\n            };\r\n            this.list.find('li a').each(function (i) {\r\n                if (!focusFound) {\r\n                    var thisText = $(this).text();\r\n                    if (thisText.indexOf(C) == 0 || thisText.indexOf(c) == 0) {\r\n                        if (self._prevChar[0] == C) {\r\n                            if (self._prevChar[1] < i) { focusOpt(this, i); }\r\n                        }\r\n                        else { focusOpt(this, i); }\r\n                    }\r\n                }\r\n            });\r\n            this._prevChar[0] = C;\r\n        },\r\n        \r\n        _uiHash: function () {\r\n            var index = this.index();\r\n            return {\r\n                index: index,\r\n                option: $(\"option\", this.element).get(index),\r\n                value: this.element[0].value\r\n            };\r\n        },\r\n        \r\n        open: function (event) {\r\n            var self = this;\r\n            var disabledStatus = this.newelement.attr(\"aria-disabled\");\r\n            if (disabledStatus != 'true') {\r\n                this._refreshPosition();\r\n                this._closeOthers(event);\r\n                this.newelement\r\n\t\t\t\t.addClass('ui-state-active');\r\n            \tthis.list\r\n\t\t\t\t.appendTo('body')\r\n\t\t\t\t.addClass(self.widgetFullName + '-open')\r\n\t\t\t\t.attr('aria-hidden', false);\r\n            \tif (this._selectedIndex() > 0) {\r\n                    this.list.find('li:not(.' + self.widgetFullName + '-group):eq(' + this._selectedIndex() + ') a')[0].focus();\r\n                }\r\n                if (this.options.style == \"dropdown\") { this.newelement.removeClass('ui-corner-all').addClass('ui-corner-top'); }\r\n                this._refreshPosition();\r\n                this._trigger(\"open\", event, this._uiHash());\r\n                // Added to focus the chosen element always you open\r\n                var activeID = this.widgetFullName + '-item-' + Math.round(Math.random() * 1000);\r\n\t\t\t    self._optionLis.eq(self._selectedIndex()).find('a:eq(0)').attr('id', activeID).focus();\r\n            }\r\n        },\r\n        close: function (event, retainFocus) {\r\n            if (this.newelement.is('.ui-state-active')) {\r\n                this.newelement\r\n\t\t\t\t.removeClass('ui-state-active');\r\n                this.list\r\n\t\t\t\t.attr('aria-hidden', true)\r\n\t\t\t\t.removeClass(this.widgetFullName + '-open');\r\n                if (this.options.style == \"dropdown\") { this.newelement.removeClass('ui-corner-top').addClass('ui-corner-all'); }\r\n                if (retainFocus) { this.newelement[0].focus(); }\r\n                this._trigger(\"close\", event, this._uiHash());\r\n            }\r\n        },\r\n        change: function (event) {\r\n            this.element.trigger('changeSelection');\r\n            this._trigger(\"changeSelection\", event, this._uiHash());\r\n        },\r\n        select: function (event) {\r\n            this._trigger(\"select\", event, this._uiHash());\r\n        },\r\n        _closeOthers: function (event) {\r\n            $('.' + this.widgetFullName + '.ui-state-active').not(this.newelement).each(function () {\r\n                $(this).data('selectelement').selectmenu('close', event);\r\n            });\r\n            $('.' + this.widgetFullName + '.ui-state-hover').trigger('mouseout');\r\n        },\r\n        _toggle: function (event, retainFocus) {\r\n            if (this.list.is('.' + this.widgetFullName + '-open')) { this.close(event, retainFocus); }\r\n            else { this.open(event); }\r\n        },\r\n        _formatText: function (text) {\r\n            return this.options.format ? this.options.format(text) : text;\r\n        },\r\n        _selectedIndex: function () {\r\n            return this.element[0].selectedIndex;\r\n        },\r\n        _selectedOptionLi: function () {\r\n            // negative indexes are not supported\r\n            if (this._selectedIndex() < 0)\r\n                return $();\r\n\r\n            return this._optionLis.eq(this._selectedIndex());\r\n        },\r\n        _focusedOptionLi: function () {\r\n            return this.list.find('.' + this.widgetFullName + '-item-focus');\r\n        },\r\n        _moveSelection: function (amt) {\r\n            var currIndex = parseInt(this._selectedOptionLi().data('index'), 10);\r\n            var newIndex = currIndex + amt;\r\n            return this._optionLis.eq(newIndex).trigger('mouseup');\r\n        },\r\n        _moveFocus: function (amt) {\r\n            if (!isNaN(amt)) {\r\n                var currIndex = parseInt(this._focusedOptionLi().data('index'), 10);\r\n                var newIndex = currIndex + amt;\r\n            }\r\n            else { var newIndex = parseInt(this._optionLis.filter(amt).data('index'), 10); }\r\n\r\n            if (newIndex < 0) { newIndex = 0; }\r\n            if (newIndex > this._optionLis.size() - 1) {\r\n                newIndex = this._optionLis.size() - 1;\r\n            }\r\n            var activeID = this.widgetFullName + '-item-' + Math.round(Math.random() * 1000);\r\n    \r\n            this._focusedOptionLi().find('a:eq(0)').attr('id', '');\r\n            this._optionLis.eq(newIndex).find('a:eq(0)').attr('id', activeID)[0].focus();\r\n            this.list.attr('aria-activedescendant', activeID);\r\n        },\r\n        \r\n        \r\n        _scrollPage: function (direction) {\r\n        \r\n            var numPerPage = Math.floor(this.list.outerHeight() / this.list.find('li:first').outerHeight());\r\n            numPerPage = (direction == 'up') ? -numPerPage : numPerPage;\r\n            this._moveFocus(numPerPage);\r\n        },\r\n        _setData: function (key, value) {\r\n            this.options[key] = value;\r\n            if (key == 'disabled') {\r\n                this.close();\r\n                this.element\r\n\t\t\t\t.add(this.newelement)\r\n\t\t\t\t.add(this.list)\r\n\t\t\t\t\t[value ? 'addClass' : 'removeClass'](\r\n\t\t\t\t\t\tthis.widgetFullName + '-disabled' + ' ' +\r\n\t\t\t\t\t\tthis.namespace + '-state-disabled')\r\n\t\t\t\t\t.attr(\"aria-disabled\", value);\r\n            }\r\n        },\r\n        _scrollPageInternal: function ()\r\n        {  \r\n        },\r\n        index: function (newValue) {\r\n            if (arguments.length) {\r\n                this.element[0].selectedIndex = newValue;\r\n                this._refreshValue();\r\n            } else {\r\n                return this._selectedIndex();\r\n            }\r\n        },\r\n\r\n        value: function (newValue) {\r\n            if (arguments.length) {\r\n                this.element[0].value = newValue;\r\n                this._refreshValue();\r\n                this.select();\r\n            } else {\r\n                return this.element[0].value;\r\n            }\r\n        },\r\n\r\n        _refreshValue: function () {\r\n            var activeClass = (this.options.style == \"popup\") ? \" ui-state-active\" : \"\";\r\n            var activeID = this.widgetFullName + '-item-' + Math.round(Math.random() * 1000);\r\n            //deselect previous\r\n            this.list\r\n\t\t\t.find('.' + this.widgetFullName + '-item-selected')\r\n\t\t\t.removeClass(this.widgetFullName + \"-item-selected\" + activeClass)\r\n\t\t\t.find('a')\r\n\t\t\t.attr('aria-selected', 'false')\r\n\t\t\t.attr('id', '');\r\n            //select new\r\n            this._selectedOptionLi()\r\n\t\t\t.addClass(this.widgetFullName + \"-item-selected\" + activeClass)\r\n\t\t\t.find('a')\r\n\t\t\t.attr('aria-selected', 'true')\r\n\t\t\t.attr('id', activeID);\r\n\r\n            //toggle any class brought in from option\r\n            var currentOptionClasses = this.newelement.data('optionClasses') ? this.newelement.data('optionClasses') : \"\";\r\n            var newOptionClasses = this._selectedOptionLi().data('optionClasses') ? this._selectedOptionLi().data('optionClasses') : \"\";\r\n            this.newelement\r\n\t\t\t.removeClass(currentOptionClasses)\r\n\t\t\t.data('optionClasses', newOptionClasses)\r\n\t\t\t.addClass(newOptionClasses)\r\n\t\t\t.find('.' + this.widgetFullName + '-status')\r\n\t\t\t.html(\r\n\t\t\t\tthis._selectedOptionLi()\r\n\t\t\t\t\t.find('a:eq(0)')\r\n\t\t\t\t\t.html()\r\n\t\t\t);\r\n\r\n            this.list.attr('aria-activedescendant', activeID)\r\n        },\r\n        _refreshPosition: function () {\r\n            //set left value\r\n            this.list.css('left', this.newelement.offset().left);\r\n\r\n            //set top value\r\n            var menuTop = this.newelement.offset().top;\r\n            var scrolledAmt = this.list[0].scrollTop;\r\n            this.list.find('li:lt(' + this._selectedIndex() + ')').each(function () {\r\n                scrolledAmt -= $(this).outerHeight();\r\n            });\r\n\r\n            if (this.newelement.is('.' + this.widgetFullName + '-popup')) {\r\n                menuTop += scrolledAmt;\r\n                this.list.css('top', menuTop);\r\n            }\r\n            else {\r\n                menuTop += this.newelement.height();\r\n                this.list.css('top', menuTop);\r\n            }\r\n        }\r\n    });\r\n})(jQuery);","/* http://keith-wood.name/timeEntry.html\r\nTime entry for jQuery v1.4.8.\r\nWritten by Keith Wood (kbwood{at}iinet.com.au) June 2007.\r\nDual licensed under the GPL (http://dev.jquery.com/browser/trunk/jquery/GPL-LICENSE.txt) and \r\nMIT (http://dev.jquery.com/browser/trunk/jquery/MIT-LICENSE.txt) licenses. \r\nPlease attribute the author if you use it. */\r\n\r\n/* Turn an input field into an entry point for a time value.\r\nThe time can be entered via directly typing the value,\r\nvia the arrow keys, or via spinner buttons.\r\nIt is configurable to show 12 or 24-hour time, to show or hide seconds,\r\nto enforce a minimum and/or maximum time, to change the spinner image,\r\nand to constrain the time to steps, e.g. only on the quarter hours.\r\nAttach it with $('input selector').timeEntry(); for default settings,\r\nor configure it with options like:\r\n$('input selector').timeEntry(\r\n{spinnerImage: 'spinnerSquare.png', spinnerSize: [20, 20, 0]}); */\r\n\r\n(function ($) { // Hide scope, no $ conflict\r\n\r\n    /* TimeEntry manager.\r\n    Use the singleton instance of this class, $.timeEntry, to interact with the time entry\r\n    functionality. Settings for (groups of) fields are maintained in an instance object\r\n    (TimeEntryInstance), allowing multiple different settings on the same page. */\r\n    function TimeEntry() {\r\n        this._disabledInputs = []; // List of time entry inputs that have been disabled\r\n        this.regional = []; // Available regional settings, indexed by language code\r\n        this.regional[''] = { // Default regional settings\r\n            show24Hours: false, // True to use 24 hour time, false for 12 hour (AM/PM)\r\n            separator: ':', // The separator between time fields\r\n            ampmPrefix: '', // The separator before the AM/PM text\r\n            ampmNames: ['AM', 'PM'], // Names of morning/evening markers\r\n            spinnerTexts: ['Now', 'Previous field', 'Next field', 'Increment', 'Decrement']\r\n            // The popup texts for the spinner image areas\r\n        };\r\n        this._defaults = {\r\n            appendText: '', // Display text following the input box, e.g. showing the format\r\n            showSeconds: false, // True to show seconds as well, false for hours/minutes only\r\n            showZeroInHour: true, //True to show 0 when hour < 10\r\n            timeSteps: [1, 1, 1], // Steps for each of hours/minutes/seconds when incrementing/decrementing\r\n            initialField: 0, // The field to highlight initially, 0 = hours, 1 = minutes, ...\r\n            useMouseWheel: true, // True to use mouse wheel for increment/decrement if possible,\r\n            // false to never use it\r\n            defaultTime: null, // The time to use if none has been set, leave at null for now\r\n            minTime: null, // The earliest selectable time, or null for no limit\r\n            maxTime: null, // The latest selectable time, or null for no limit\r\n            spinnerImage: 'spinnerDefault.png', // The URL of the images to use for the time spinner\r\n            // Seven images packed horizontally for normal, each button pressed, and disabled\r\n            spinnerSize: [20, 20, 8], // The width and height of the spinner image,\r\n            // and size of centre button for current time\r\n            spinnerBigImage: '', // The URL of the images to use for the expanded time spinner\r\n            // Seven images packed horizontally for normal, each button pressed, and disabled\r\n            spinnerBigSize: [40, 40, 16], // The width and height of the expanded spinner image,\r\n            // and size of centre button for current time\r\n            spinnerIncDecOnly: false, // True for increment/decrement buttons only, false for all\r\n            spinnerRepeat: [500, 250], // Initial and subsequent waits in milliseconds\r\n            // for repeats on the spinner buttons\r\n            beforeShow: null, // Function that takes an input field and\r\n            // returns a set of custom settings for the time entry\r\n            beforeSetTime: null // Function that runs before updating the time,\r\n            // takes the old and new times, and minimum and maximum times as parameters,\r\n            // and returns an adjusted time if necessary\r\n        };\r\n        $.extend(this._defaults, this.regional['']);\r\n    }\r\n\r\n    var PROP_NAME = 'timeEntry';\r\n\r\n    $.extend(TimeEntry.prototype, {\r\n        /* Class name added to elements to indicate already configured with time entry. */\r\n        markerClassName: 'hasTimeEntry',\r\n\r\n        /* Override the default settings for all instances of the time entry.\r\n        @param  options  (object) the new settings to use as defaults (anonymous object)\r\n        @return  (DateEntry) this object */\r\n        setDefaults: function (options) {\r\n            extendRemove(this._defaults, options || {});\r\n            return this;\r\n        },\r\n\r\n        /* Attach the time entry handler to an input field.\r\n        @param  target   (element) the field to attach to\r\n        @param  options  (object) custom settings for this instance */\r\n        _connectTimeEntry: function (target, options) {\r\n            var input = $(target);\r\n            if (input.hasClass(this.markerClassName)) {\r\n                return;\r\n            }\r\n            var inst = {};\r\n            inst.options = $.extend({}, options);\r\n            inst._selectedHour = 0; // The currently selected hour\r\n            inst._selectedMinute = 0; // The currently selected minute\r\n            inst._selectedSecond = 0; // The currently selected second\r\n            inst._field = 0; // The selected subfield\r\n            inst.input = $(target); // The attached input field\r\n            $.data(target, PROP_NAME, inst);\r\n            var spinnerImage = this._get(inst, 'spinnerImage');\r\n            var spinnerText = this._get(inst, 'spinnerText');\r\n            var spinnerSize = this._get(inst, 'spinnerSize');\r\n            var appendText = this._get(inst, 'appendText');\r\n            var spinner = (!spinnerImage ? null :\r\n\t\t\t$('<span class=\"timeEntry_control\" style=\"display: table-cell; bottom: 25%;' +\r\n\t\t\t'width: ' + spinnerSize[0] + 'px; height: ' + spinnerSize[1] + 'px;' +\r\n\t\t\t($.browser.mozilla && $.browser.version < '1.9' ? // FF 2- (Win)\r\n\t\t\t' padding-left: ' + spinnerSize[0] + 'px; padding-bottom: ' +\r\n\t\t\t(spinnerSize[1] - 18) + 'px;' : '') + '\"></span>'));\r\n            input.wrap('<span class=\"timeEntry_wrap\" style=\"display: table; position: relative\"></span>').\r\n\t\t\tafter(appendText ? '<span class=\"timeEntry_append\">' + appendText + '</span>' : '').\r\n\t\t\tafter(spinner || '');\r\n            input.addClass(this.markerClassName).bind('focus.timeEntry', this._doFocus).\r\n\t\t\tbind('blur.timeEntry', this._doBlur).bind('click.timeEntry', this._doClick).\r\n\t\t\tbind('keydown.timeEntry', this._doKeyDown).bind('keypress.timeEntry', this._doKeyPress);\r\n            // Check pastes\r\n            if ($.browser.mozilla) {\r\n                input.bind('input.timeEntry', function (event) { $.timeEntry._parseTime(inst); });\r\n            }\r\n            if ($.browser.msie) {\r\n                input.bind('paste.timeEntry',\r\n\t\t\t\tfunction (event) { setTimeout(function () { $.timeEntry._parseTime(inst); }, 1); });\r\n            }\r\n            // Allow mouse wheel usage\r\n            if (this._get(inst, 'useMouseWheel') && $.fn.mousewheel) {\r\n                input.mousewheel(this._doMouseWheel);\r\n            }\r\n            if (spinner) {\r\n                spinner.mousedown(this._handleSpinner).mouseup(this._endSpinner).\r\n\t\t\t\tmouseover(this._expandSpinner).mouseout(this._endSpinner).\r\n\t\t\t\tmousemove(this._describeSpinner);\r\n            }\r\n        },\r\n\r\n        /* Enable a time entry input and any associated spinner.\r\n        @param  input  (element) single input field */\r\n        _enableTimeEntry: function (input) {\r\n            this._enableDisable(input, false);\r\n        },\r\n\r\n        /* Disable a time entry input and any associated spinner.\r\n        @param  input  (element) single input field */\r\n        _disableTimeEntry: function (input) {\r\n            this._enableDisable(input, true);\r\n        },\r\n\r\n        /* Enable or disable a time entry input and any associated spinner.\r\n        @param  input    (element) single input field\r\n        @param  disable  (boolean) true to disable, false to enable */\r\n        _enableDisable: function (input, disable) {\r\n            var inst = $.data(input, PROP_NAME);\r\n            if (!inst) {\r\n                return;\r\n            }\r\n            input.disabled = disable;\r\n            if (input.nextSibling && input.nextSibling.nodeName.toLowerCase() == 'span') {\r\n                $.timeEntry._changeSpinner(inst, input.nextSibling, (disable ? 5 : -1));\r\n            }\r\n            $.timeEntry._disabledInputs = $.map($.timeEntry._disabledInputs,\r\n\t\t\tfunction (value) { return (value == input ? null : value); }); // Delete entry\r\n            if (disable) {\r\n                $.timeEntry._disabledInputs.push(input);\r\n            }\r\n        },\r\n\r\n        /* Check whether an input field has been disabled.\r\n        @param  input  (element) input field to check\r\n        @return  (boolean) true if this field has been disabled, false if it is enabled */\r\n        _isDisabledTimeEntry: function (input) {\r\n            return $.inArray(input, this._disabledInputs) > -1;\r\n        },\r\n\r\n        /* Reconfigure the settings for a time entry field.\r\n        @param  input    (element) input field to change\r\n        @param  options  (object) new settings to add or\r\n        (string) an individual setting name\r\n        @param  value    (any) the individual setting's value */\r\n        _changeTimeEntry: function (input, options, value) {\r\n            var inst = $.data(input, PROP_NAME);\r\n            if (inst) {\r\n                if (typeof options == 'string') {\r\n                    var name = options;\r\n                    options = {};\r\n                    options[name] = value;\r\n                }\r\n                var currentTime = this._extractTime(inst);\r\n                extendRemove(inst.options, options || {});\r\n                if (currentTime) {\r\n                    this._setTime(inst, new Date(0, 0, 0,\r\n\t\t\t\t\tcurrentTime[0], currentTime[1], currentTime[2]));\r\n                }\r\n            }\r\n            $.data(input, PROP_NAME, inst);\r\n        },\r\n\r\n        /* Remove the time entry functionality from an input.\r\n        @param  input  (element) input field to affect */\r\n        _destroyTimeEntry: function (input) {\r\n            $input = $(input);\r\n            if (!$input.hasClass(this.markerClassName)) {\r\n                return;\r\n            }\r\n            $input.removeClass(this.markerClassName).unbind('.timeEntry');\r\n            if ($.fn.mousewheel) {\r\n                $input.unmousewheel();\r\n            }\r\n            this._disabledInputs = $.map(this._disabledInputs,\r\n\t\t\tfunction (value) { return (value == input ? null : value); }); // Delete entry\r\n            $input.parent().replaceWith($input);\r\n            $.removeData(input, PROP_NAME);\r\n        },\r\n\r\n        /* Initialise the current time for a time entry input field.\r\n        @param  input  (element) input field to update\r\n        @param  time   (Date) the new time (year/month/day ignored) or null for now */\r\n        _setTimeTimeEntry: function (input, time) {\r\n            var inst = $.data(input, PROP_NAME);\r\n            if (inst) {\r\n                this._setTime(inst, time ? (typeof time == 'object' ?\r\n\t\t\t\tnew Date(time.getTime()) : time) : null);\r\n            }\r\n        },\r\n\r\n        /* Retrieve the current time for a time entry input field.\r\n        @param  input  (element) input field to examine\r\n        @return  (Date) current time (year/month/day zero) or null if none */\r\n        _getTimeTimeEntry: function (input) {\r\n            var inst = $.data(input, PROP_NAME);\r\n            var currentTime = (inst ? this._extractTime(inst) : null);\r\n            return (!currentTime ? null :\r\n\t\t\tnew Date(0, 0, 0, currentTime[0], currentTime[1], currentTime[2]));\r\n        },\r\n\r\n        /* Retrieve the millisecond offset for the current time.\r\n        @param  input  (element) input field to examine\r\n        @return  (number) the time as milliseconds offset or zero if none */\r\n        _getOffsetTimeEntry: function (input) {\r\n            var inst = $.data(input, PROP_NAME);\r\n            var currentTime = (inst ? this._extractTime(inst) : null);\r\n            return (!currentTime ? 0 :\r\n\t\t\t(currentTime[0] * 3600 + currentTime[1] * 60 + currentTime[2]) * 1000);\r\n        },\r\n\r\n        /* Initialise time entry.\r\n        @param  target  (element) the input field or\r\n        (event) the focus event */\r\n        _doFocus: function (target) {\r\n            var input = (target.nodeName && target.nodeName.toLowerCase() == 'input' ? target : this);\r\n            if ($.timeEntry._lastInput == input || $.timeEntry._isDisabledTimeEntry(input)) {\r\n                $.timeEntry._focussed = false;\r\n                return;\r\n            }\r\n            var inst = $.data(input, PROP_NAME);\r\n            $.timeEntry._focussed = true;\r\n            $.timeEntry._lastInput = input;\r\n            $.timeEntry._blurredInput = null;\r\n            var beforeShow = $.timeEntry._get(inst, 'beforeShow');\r\n            extendRemove(inst.options, (beforeShow ? beforeShow.apply(input, [input]) : {}));\r\n            $.data(input, PROP_NAME, inst);\r\n            $.timeEntry._parseTime(inst);\r\n            setTimeout(function () { $.timeEntry._showField(inst); }, 10);\r\n        },\r\n\r\n        /* Note that the field has been exited.\r\n        @param  event  (event) the blur event */\r\n        _doBlur: function (event) {\r\n            $.timeEntry._blurredInput = $.timeEntry._lastInput;\r\n            $.timeEntry._lastInput = null;\r\n        },\r\n\r\n        /* Select appropriate field portion on click, if already in the field.\r\n        @param  event  (event) the click event */\r\n        _doClick: function (event) {\r\n            var input = event.target;\r\n            var inst = $.data(input, PROP_NAME);\r\n            if (!$.timeEntry._focussed) {\r\n                var fieldSize = $.timeEntry._get(inst, 'separator').length + 2;\r\n                inst._field = 0;\r\n                if (input.selectionStart != null) { // Use input select range\r\n                    for (var field = 0; field <= Math.max(1, inst._secondField, inst._ampmField); field++) {\r\n                        var end = (field != inst._ampmField ? (field * fieldSize) + 2 :\r\n\t\t\t\t\t\t(inst._ampmField * fieldSize) + $.timeEntry._get(inst, 'ampmPrefix').length +\r\n\t\t\t\t\t\t$.timeEntry._get(inst, 'ampmNames')[0].length);\r\n                        inst._field = field;\r\n                        if (input.selectionStart < end) {\r\n                            break;\r\n                        }\r\n                    }\r\n                }\r\n                else if (input.createTextRange) { // Check against bounding boxes\r\n                    var src = $(event.srcElement);\r\n                    var range = input.createTextRange();\r\n                    var convert = function (value) {\r\n                        return { thin: 2, medium: 4, thick: 6}[value] || value;\r\n                    };\r\n                    var offsetX = event.clientX + document.documentElement.scrollLeft -\r\n\t\t\t\t\t(src.offset().left + parseInt(convert(src.css('border-left-width')), 10)) -\r\n\t\t\t\t\trange.offsetLeft; // Position - left edge - alignment\r\n                    for (var field = 0; field <= Math.max(1, inst._secondField, inst._ampmField); field++) {\r\n                        var end = (field != inst._ampmField ? (field * fieldSize) + 2 :\r\n\t\t\t\t\t\t(inst._ampmField * fieldSize) + $.timeEntry._get(inst, 'ampmPrefix').length +\r\n\t\t\t\t\t\t$.timeEntry._get(inst, 'ampmNames')[0].length);\r\n                        range.collapse();\r\n                        range.moveEnd('character', end);\r\n                        inst._field = field;\r\n                        if (offsetX < range.boundingWidth) { // And compare\r\n                            break;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            $.data(input, PROP_NAME, inst);\r\n            $.timeEntry._showField(inst);\r\n            $.timeEntry._focussed = false;\r\n        },\r\n\r\n        /* Handle keystrokes in the field.\r\n        @param  event  (event) the keydown event\r\n        @return  (boolean) true to continue, false to stop processing */\r\n        _doKeyDown: function (event) {\r\n            if (event.keyCode >= 48) { // >= '0'\r\n                return true;\r\n            }\r\n            var inst = $.data(event.target, PROP_NAME);\r\n            switch (event.keyCode) {\r\n                case 9: return (event.shiftKey ?\r\n                    // Move to previous time field, or out if at the beginning\r\n\t\t\t\t\t\t$.timeEntry._changeField(inst, -1, true) :\r\n                    // Move to next time field, or out if at the end\r\n\t\t\t\t\t\t$.timeEntry._changeField(inst, +1, true));\r\n                case 35: if (event.ctrlKey) { // Clear time on ctrl+end\r\n                        $.timeEntry._setValue(inst, '');\r\n                    }\r\n                    else { // Last field on end\r\n                        inst._field = Math.max(1, inst._secondField, inst._ampmField);\r\n                        $.timeEntry._adjustField(inst, 0);\r\n                    }\r\n                    break;\r\n                case 36: if (event.ctrlKey) { // Current time on ctrl+home\r\n                        $.timeEntry._setTime(inst);\r\n                    }\r\n                    else { // First field on home\r\n                        inst._field = 0;\r\n                        $.timeEntry._adjustField(inst, 0);\r\n                    }\r\n                    break;\r\n                case 37: $.timeEntry._changeField(inst, -1, false); break; // Previous field on left\r\n                case 38: $.timeEntry._adjustField(inst, +1); break; // Increment time field on up\r\n                case 39: $.timeEntry._changeField(inst, +1, false); break; // Next field on right\r\n                case 40: $.timeEntry._adjustField(inst, -1); break; // Decrement time field on down\r\n                case 46: $.timeEntry._setValue(inst, ''); break; // Clear time on delete\r\n            }\r\n            return false;\r\n        },\r\n\r\n        /* Disallow unwanted characters.\r\n        @param  event  (event) the keypress event\r\n        @return  (boolean) true to continue, false to stop processing */\r\n        _doKeyPress: function (event) {\r\n            var chr = String.fromCharCode(event.charCode == undefined ? event.keyCode : event.charCode);\r\n            if (chr < ' ') {\r\n                return true;\r\n            }\r\n            var inst = $.data(event.target, PROP_NAME);\r\n            $.timeEntry._handleKeyPress(inst, chr);\r\n            return false;\r\n        },\r\n\r\n        /* Increment/decrement on mouse wheel activity.\r\n        @param  event  (event) the mouse wheel event\r\n        @param  delta  (number) the amount of change */\r\n        _doMouseWheel: function (event, delta) {\r\n            if ($.timeEntry._isDisabledTimeEntry(event.target)) {\r\n                return;\r\n            }\r\n            delta = ($.browser.opera ? -delta / Math.abs(delta) :\r\n\t\t\t($.browser.safari ? delta / Math.abs(delta) : delta));\r\n            var inst = $.data(event.target, PROP_NAME);\r\n            inst.input.focus();\r\n            if (!inst.input.val()) {\r\n                $.timeEntry._parseTime(inst);\r\n            }\r\n            $.timeEntry._adjustField(inst, delta);\r\n            event.preventDefault();\r\n        },\r\n\r\n        /* Expand the spinner, if possible, to make it easier to use.\r\n        @param  event  (event) the mouse over event */\r\n        _expandSpinner: function (event) {\r\n            var spinner = $.timeEntry._getSpinnerTarget(event);\r\n            var inst = $.data($.timeEntry._getInput(spinner), PROP_NAME);\r\n            var spinnerBigImage = $.timeEntry._get(inst, 'spinnerBigImage');\r\n            if (spinnerBigImage) {\r\n                inst._expanded = true;\r\n                var offset = $(spinner).offset();\r\n                var relative = null;\r\n                $(spinner).parents().each(function () {\r\n                    var parent = $(this);\r\n                    if (parent.css('position') == 'relative' ||\r\n\t\t\t\t\t\tparent.css('position') == 'absolute') {\r\n                        relative = parent.offset();\r\n                    }\r\n                    return !relative;\r\n                });\r\n                var spinnerSize = $.timeEntry._get(inst, 'spinnerSize');\r\n                var spinnerBigSize = $.timeEntry._get(inst, 'spinnerBigSize');\r\n                $('<div class=\"timeEntry_expand\" style=\"position: absolute; left: ' +\r\n\t\t\t\t(offset.left - (spinnerBigSize[0] - spinnerSize[0]) / 2 -\r\n\t\t\t\t(relative ? relative.left : 0)) + 'px; top: ' + (offset.top -\r\n\t\t\t\t(spinnerBigSize[1] - spinnerSize[1]) / 2 - (relative ? relative.top : 0)) +\r\n\t\t\t\t'px; width: ' + spinnerBigSize[0] + 'px; height: ' +\r\n\t\t\t\tspinnerBigSize[1] + 'px; background: transparent url(' +\r\n\t\t\t\tspinnerBigImage + ') no-repeat 0px 0px; z-index: 10;\"></div>').\r\n\t\t\t\tmousedown($.timeEntry._handleSpinner).mouseup($.timeEntry._endSpinner).\r\n\t\t\t\tmouseout($.timeEntry._endExpand).mousemove($.timeEntry._describeSpinner).\r\n\t\t\t\tinsertAfter(spinner);\r\n            }\r\n        },\r\n\r\n        /* Locate the actual input field from the spinner.\r\n        @param  spinner  (element) the current spinner\r\n        @return  (element) the corresponding input */\r\n        _getInput: function (spinner) {\r\n            return $(spinner).siblings('.' + $.timeEntry.markerClassName)[0];\r\n        },\r\n\r\n        /* Change the title based on position within the spinner.\r\n        @param  event  (event) the mouse move event */\r\n        _describeSpinner: function (event) {\r\n            var spinner = $.timeEntry._getSpinnerTarget(event);\r\n            var inst = $.data($.timeEntry._getInput(spinner), PROP_NAME);\r\n            spinner.title = $.timeEntry._get(inst, 'spinnerTexts')\r\n\t\t\t[$.timeEntry._getSpinnerRegion(inst, event)];\r\n        },\r\n\r\n        /* Handle a click on the spinner.\r\n        @param  event  (event) the mouse click event */\r\n        _handleSpinner: function (event) {\r\n            var spinner = $.timeEntry._getSpinnerTarget(event);\r\n            var input = $.timeEntry._getInput(spinner);\r\n            if ($.timeEntry._isDisabledTimeEntry(input)) {\r\n                return;\r\n            }\r\n            if (input == $.timeEntry._blurredInput) {\r\n                $.timeEntry._lastInput = input;\r\n                $.timeEntry._blurredInput = null;\r\n            }\r\n            var inst = $.data(input, PROP_NAME);\r\n            $.timeEntry._doFocus(input);\r\n            var region = $.timeEntry._getSpinnerRegion(inst, event);\r\n            $.timeEntry._changeSpinner(inst, spinner, region);\r\n            $.timeEntry._actionSpinner(inst, region);\r\n            $.timeEntry._timer = null;\r\n            $.timeEntry._handlingSpinner = true;\r\n            var spinnerRepeat = $.timeEntry._get(inst, 'spinnerRepeat');\r\n            if (region >= 3 && spinnerRepeat[0]) { // Repeat increment/decrement\r\n                $.timeEntry._timer = setTimeout(\r\n\t\t\t\tfunction () { $.timeEntry._repeatSpinner(inst, region); },\r\n\t\t\t\tspinnerRepeat[0]);\r\n                $(spinner).one('mouseout', $.timeEntry._releaseSpinner).\r\n\t\t\t\tone('mouseup', $.timeEntry._releaseSpinner);\r\n            }\r\n        },\r\n\r\n        /* Action a click on the spinner.\r\n        @param  inst    (object) the instance settings\r\n        @param  region  (number) the spinner \"button\" */\r\n        _actionSpinner: function (inst, region) {\r\n            if (!inst.input.val()) {\r\n                $.timeEntry._parseTime(inst);\r\n            }\r\n            switch (region) {\r\n                case 0: this._setTime(inst, undefined, true); break;\r\n                case 1: this._changeField(inst, -1, false); break;\r\n                case 2: this._changeField(inst, +1, false); break;\r\n                case 3: this._adjustField(inst, +1); break;\r\n                case 4: this._adjustField(inst, -1); break;\r\n            }\r\n        },\r\n\r\n        /* Repeat a click on the spinner.\r\n        @param  inst    (object) the instance settings\r\n        @param  region  (number) the spinner \"button\" */\r\n        _repeatSpinner: function (inst, region) {\r\n            if (!$.timeEntry._timer) {\r\n                return;\r\n            }\r\n            $.timeEntry._lastInput = $.timeEntry._blurredInput;\r\n            this._actionSpinner(inst, region);\r\n            this._timer = setTimeout(\r\n\t\t\tfunction () { $.timeEntry._repeatSpinner(inst, region); },\r\n\t\t\tthis._get(inst, 'spinnerRepeat')[1]);\r\n        },\r\n\r\n        /* Stop a spinner repeat.\r\n        @param  event  (event) the mouse event */\r\n        _releaseSpinner: function (event) {\r\n            clearTimeout($.timeEntry._timer);\r\n            $.timeEntry._timer = null;\r\n        },\r\n\r\n        /* Tidy up after an expanded spinner.\r\n        @param  event  (event) the mouse event */\r\n        _endExpand: function (event) {\r\n            $.timeEntry._timer = null;\r\n            var spinner = $.timeEntry._getSpinnerTarget(event);\r\n            var input = $.timeEntry._getInput(spinner);\r\n            var inst = $.data(input, PROP_NAME);\r\n            $(spinner).remove();\r\n            inst._expanded = false;\r\n        },\r\n\r\n        /* Tidy up after a spinner click.\r\n        @param  event  (event) the mouse event */\r\n        _endSpinner: function (event) {\r\n            $.timeEntry._timer = null;\r\n            var spinner = $.timeEntry._getSpinnerTarget(event);\r\n            var input = $.timeEntry._getInput(spinner);\r\n            var inst = $.data(input, PROP_NAME);\r\n            if (!$.timeEntry._isDisabledTimeEntry(input)) {\r\n                $.timeEntry._changeSpinner(inst, spinner, -1);\r\n            }\r\n            if ($.timeEntry._handlingSpinner) {\r\n                $.timeEntry._lastInput = $.timeEntry._blurredInput;\r\n            }\r\n            if ($.timeEntry._lastInput && $.timeEntry._handlingSpinner) {\r\n                $.timeEntry._showField(inst);\r\n            }\r\n            $.timeEntry._handlingSpinner = false;\r\n        },\r\n\r\n        /* Retrieve the spinner from the event.\r\n        @param  event  (event) the mouse click event\r\n        @return  (element) the target field */\r\n        _getSpinnerTarget: function (event) {\r\n            return event.target || event.srcElement;\r\n        },\r\n\r\n        /* Determine which \"button\" within the spinner was clicked.\r\n        @param  inst   (object) the instance settings\r\n        @param  event  (event) the mouse event\r\n        @return  (number) the spinner \"button\" number */\r\n        _getSpinnerRegion: function (inst, event) {\r\n            var spinner = this._getSpinnerTarget(event);\r\n            var pos = ($.browser.opera || $.browser.safari ?\r\n\t\t\t$.timeEntry._findPos(spinner) : $(spinner).offset());\r\n            var scrolled = ($.browser.safari ? $.timeEntry._findScroll(spinner) :\r\n\t\t\t[document.documentElement.scrollLeft || document.body.scrollLeft,\r\n\t\t\tdocument.documentElement.scrollTop || document.body.scrollTop]);\r\n            var spinnerIncDecOnly = this._get(inst, 'spinnerIncDecOnly');\r\n            var left = (spinnerIncDecOnly ? 99 : event.clientX + scrolled[0] -\r\n\t\t\tpos.left - ($.browser.msie ? 2 : 0));\r\n            var top = event.clientY + scrolled[1] - pos.top - ($.browser.msie ? 2 : 0);\r\n            var spinnerSize = this._get(inst, (inst._expanded ? 'spinnerBigSize' : 'spinnerSize'));\r\n            var right = (spinnerIncDecOnly ? 99 : spinnerSize[0] - 1 - left);\r\n            var bottom = spinnerSize[1] - 1 - top;\r\n            if (spinnerSize[2] > 0 && Math.abs(left - right) <= spinnerSize[2] &&\r\n\t\t\t\tMath.abs(top - bottom) <= spinnerSize[2]) {\r\n                return 0; // Centre button\r\n            }\r\n            var min = Math.min(left, top, right, bottom);\r\n            return (min == left ? 1 : (min == right ? 2 : (min == top ? 3 : 4))); // Nearest edge\r\n        },\r\n\r\n        /* Change the spinner image depending on button clicked.\r\n        @param  inst     (object) the instance settings\r\n        @param  spinner  (element) the spinner control\r\n        @param  region   (number) the spinner \"button\" */\r\n        _changeSpinner: function (inst, spinner, region) {\r\n            $(spinner).css('background-position', '-' + ((region + 1) *\r\n\t\t\tthis._get(inst, (inst._expanded ? 'spinnerBigSize' : 'spinnerSize'))[0]) + 'px 0px');\r\n        },\r\n\r\n        /* Find an object's position on the screen.\r\n        @param  obj  (element) the control\r\n        @return  (object) position as .left and .top */\r\n        _findPos: function (obj) {\r\n            var curLeft = curTop = 0;\r\n            if (obj.offsetParent) {\r\n                curLeft = obj.offsetLeft;\r\n                curTop = obj.offsetTop;\r\n                while (obj = obj.offsetParent) {\r\n                    var origCurLeft = curLeft;\r\n                    curLeft += obj.offsetLeft;\r\n                    if (curLeft < 0) {\r\n                        curLeft = origCurLeft;\r\n                    }\r\n                    curTop += obj.offsetTop;\r\n                }\r\n            }\r\n            return { left: curLeft, top: curTop };\r\n        },\r\n\r\n        /* Find an object's scroll offset on the screen.\r\n        @param  obj  (element) the control\r\n        @return  (number[]) offset as [left, top] */\r\n        _findScroll: function (obj) {\r\n            var isFixed = false;\r\n            $(obj).parents().each(function () {\r\n                isFixed |= $(this).css('position') == 'fixed';\r\n            });\r\n            if (isFixed) {\r\n                return [0, 0];\r\n            }\r\n            var scrollLeft = obj.scrollLeft;\r\n            var scrollTop = obj.scrollTop;\r\n            while (obj = obj.parentNode) {\r\n                scrollLeft += obj.scrollLeft || 0;\r\n                scrollTop += obj.scrollTop || 0;\r\n            }\r\n            return [scrollLeft, scrollTop];\r\n        },\r\n\r\n        /* Get a setting value, defaulting if necessary.\r\n        @param  inst  (object) the instance settings\r\n        @param  name  (string) the setting name\r\n        @return  (any) the setting value */\r\n        _get: function (inst, name) {\r\n            return (inst.options[name] != null ?\r\n\t\t\tinst.options[name] : $.timeEntry._defaults[name]);\r\n        },\r\n\r\n        /* Extract the time value from the input field, or default to now.\r\n        @param  inst  (object) the instance settings */\r\n        _parseTime: function (inst) {\r\n            var currentTime = this._extractTime(inst);\r\n            var showSeconds = this._get(inst, 'showSeconds');\r\n            if (currentTime) {\r\n                inst._selectedHour = currentTime[0];\r\n                inst._selectedMinute = currentTime[1];\r\n                inst._selectedSecond = currentTime[2];\r\n            }\r\n            else {\r\n                var now = this._constrainTime(inst);\r\n                inst._selectedHour = now[0];\r\n                inst._selectedMinute = now[1];\r\n                inst._selectedSecond = (showSeconds ? now[2] : 0);\r\n            }\r\n            inst._secondField = (showSeconds ? 2 : -1);\r\n            inst._ampmField = (this._get(inst, 'show24Hours') ? -1 : (showSeconds ? 3 : 2));\r\n            inst._lastChr = '';\r\n            inst._field = Math.max(0, Math.min(\r\n\t\t\tMath.max(1, inst._secondField, inst._ampmField), this._get(inst, 'initialField')));\r\n            if (inst.input.val() != '') {\r\n                this._showTime(inst);\r\n            }\r\n        },\r\n\r\n        /* Extract the time value from a string as an array of values, or default to null.\r\n        @param  inst   (object) the instance settings\r\n        @param  value  (string) the time value to parse\r\n        @return  (number[3]) the time components (hours, minutes, seconds)\r\n        or null if no value */\r\n        _extractTime: function (inst, value) {\r\n            value = value || inst.input.val();\r\n            var separator = this._get(inst, 'separator');\r\n            var currentTime = value.split(separator);\r\n            if (separator == '' && value != '') {\r\n                currentTime[0] = value.substring(0, 2);\r\n                currentTime[1] = value.substring(2, 4);\r\n                currentTime[2] = value.substring(4, 6);\r\n            }\r\n            var ampmNames = this._get(inst, 'ampmNames');\r\n            var show24Hours = this._get(inst, 'show24Hours');\r\n            if (currentTime.length >= 2) {\r\n                var isAM = !show24Hours && (value.indexOf(ampmNames[0]) > -1);\r\n                var isPM = !show24Hours && (value.indexOf(ampmNames[1]) > -1);\r\n                var hour = parseInt(currentTime[0], 10);\r\n                hour = (isNaN(hour) ? 0 : hour);\r\n                hour = ((isAM || isPM) && hour == 12 ? 0 : hour) + (isPM ? 12 : 0);\r\n                var minute = parseInt(currentTime[1], 10);\r\n                minute = (isNaN(minute) ? 0 : minute);\r\n                var second = (currentTime.length >= 3 ?\r\n\t\t\t\tparseInt(currentTime[2], 10) : 0);\r\n                second = (isNaN(second) || !this._get(inst, 'showSeconds') ? 0 : second);\r\n                return this._constrainTime(inst, [hour, minute, second]);\r\n            }\r\n            return null;\r\n        },\r\n\r\n        /* Constrain the given/current time to the time steps.\r\n        @param  inst    (object) the instance settings\r\n        @param  fields  (number[3]) the current time components (hours, minutes, seconds)\r\n        @return  (number[3]) the constrained time components (hours, minutes, seconds) */\r\n        _constrainTime: function (inst, fields) {\r\n            var specified = (fields != null);\r\n            if (!specified) {\r\n                var now = this._determineTime(inst, this._get(inst, 'defaultTime')) || new Date();\r\n                fields = [now.getHours(), now.getMinutes(), now.getSeconds()];\r\n            }\r\n            var reset = false;\r\n            var timeSteps = this._get(inst, 'timeSteps');\r\n            for (var i = 0; i < timeSteps.length; i++) {\r\n                if (reset) {\r\n                    fields[i] = 0;\r\n                }\r\n                else if (timeSteps[i] > 1) {\r\n                    fields[i] = Math.round(fields[i] / timeSteps[i]) * timeSteps[i];\r\n                    reset = true;\r\n                }\r\n            }\r\n            return fields;\r\n        },\r\n\r\n        /* Set the selected time into the input field.\r\n        @param  inst  (object) the instance settings */\r\n        _showTime: function (inst, isNow) {\r\n            var isNow = isNow || false;\r\n            var show24Hours = this._get(inst, 'show24Hours');\r\n            var separator = this._get(inst, 'separator');\r\n            var currentTime = (this._formatNumber(inst, show24Hours ? inst._selectedHour :\r\n\t\t\t((inst._selectedHour + 11) % 12) + 1) + separator +\r\n\t\t\tthis._formatNumber(inst, inst._selectedMinute) +\r\n\t\t\t(this._get(inst, 'showSeconds') ? separator +\r\n\t\t\tthis._formatNumber(inst, inst._selectedSecond) : '') +\r\n\t\t\t(show24Hours ? '' : this._get(inst, 'ampmPrefix') +\r\n\t\t\tthis._get(inst, 'ampmNames')[(inst._selectedHour < 12 ? 0 : 1)]));\r\n            this._setValue(inst, currentTime, isNow);\r\n            this._showField(inst);\r\n        },\r\n\r\n        /* Highlight the current time field.\r\n        @param  inst  (object) the instance settings */\r\n        _showField: function (inst) {\r\n            var input = inst.input[0];\r\n            if (inst.input.is(':hidden') || $.timeEntry._lastInput != input) {\r\n                return;\r\n            }\r\n            var separator = this._get(inst, 'separator');\r\n            var fieldSize = separator.length + 2;\r\n            var start = (inst._field != inst._ampmField ? (inst._field * fieldSize) :\r\n\t\t\t(inst._ampmField * fieldSize) - separator.length + this._get(inst, 'ampmPrefix').length);\r\n            var end = start + (inst._field != inst._ampmField ? 2 : this._get(inst, 'ampmNames')[0].length);\r\n            if (input.setSelectionRange) { // Mozilla\r\n                input.setSelectionRange(start, end);\r\n            }\r\n            else if (input.createTextRange) { // IE\r\n                var range = input.createTextRange();\r\n                range.moveStart('character', start);\r\n                range.moveEnd('character', end - inst.input.val().length);\r\n                range.select();\r\n            }\r\n            if (!input.disabled) {\r\n                input.focus();\r\n            }\r\n        },\r\n\r\n        /* Ensure displayed single number has a leading zero.\r\n        @param  value  (number) current value\r\n        @return  (string) number with at least two digits */\r\n        _formatNumber: function (inst, value) {\r\n            return ((value < 10 && this._get(inst, 'showZeroInHour')) ? '0' : '') + value;\r\n        },\r\n\r\n        /* Update the input field and notify listeners.\r\n        @param  inst   (object) the instance settings\r\n        @param  value  (string) the new value */\r\n        _setValue: function (inst, value, isNow) {\r\n            var isNow = isNow || false;\r\n            if (value != inst.input.val() || isNow) {\r\n                inst.input.val(value).trigger('change',isNow);\r\n            }\r\n        },\r\n\r\n        /* Move to previous/next field, or out of field altogether if appropriate.\r\n        @param  inst     (object) the instance settings\r\n        @param  offset   (number) the direction of change (-1, +1)\r\n        @param  moveOut  (boolean) true if can move out of the field\r\n        @return  (boolean) true if exitting the field, false if not */\r\n        _changeField: function (inst, offset, moveOut) {\r\n            var atFirstLast = (inst.input.val() == '' || inst._field ==\r\n\t\t\t(offset == -1 ? 0 : Math.max(1, inst._secondField, inst._ampmField)));\r\n            if (!atFirstLast) {\r\n                inst._field += offset;\r\n            }\r\n            this._showField(inst);\r\n            inst._lastChr = '';\r\n            $.data(inst.input[0], PROP_NAME, inst);\r\n            return (atFirstLast && moveOut);\r\n        },\r\n\r\n        /* Update the current field in the direction indicated.\r\n        @param  inst    (object) the instance settings\r\n        @param  offset  (number) the amount to change by */\r\n        _adjustField: function (inst, offset) {\r\n            if (inst.input.val() == '') {\r\n                offset = 0;\r\n            }\r\n            var timeSteps = this._get(inst, 'timeSteps');\r\n            this._setTime(inst, new Date(0, 0, 0,\r\n\t\t\tinst._selectedHour + (inst._field == 0 ? offset * timeSteps[0] : 0) +\r\n\t\t\t(inst._field == inst._ampmField ? offset * 12 : 0),\r\n\t\t\tinst._selectedMinute + (inst._field == 1 ? offset * timeSteps[1] : 0),\r\n\t\t\tinst._selectedSecond + (inst._field == inst._secondField ? offset * timeSteps[2] : 0)));\r\n        },\r\n\r\n        /* Check against minimum/maximum and display time.\r\n        @param  inst  (object) the instance settings\r\n        @param  time  (Date) an actual time or\r\n        (number) offset in seconds from now or\r\n        (string) units and periods of offsets from now */\r\n        _setTime: function (inst, time, isNow) {\r\n            var isNow = isNow || false;\r\n            time = this._determineTime(inst, time);\r\n            var fields = this._constrainTime(inst, time ?\r\n\t\t\t[time.getHours(), time.getMinutes(), time.getSeconds()] : null);\r\n            time = new Date(0, 0, 0, fields[0], fields[1], fields[2]);\r\n            // Normalise to base date\r\n            var time = this._normaliseTime(time);\r\n            var minTime = this._normaliseTime(this._determineTime(inst, this._get(inst, 'minTime')));\r\n            var maxTime = this._normaliseTime(this._determineTime(inst, this._get(inst, 'maxTime')));\r\n            // Ensure it is within the bounds set\r\n            time = (minTime && time < minTime ? minTime :\r\n\t\t\t(maxTime && time > maxTime ? maxTime : time));\r\n            var beforeSetTime = this._get(inst, 'beforeSetTime');\r\n            // Perform further restrictions if required\r\n            if (beforeSetTime) {\r\n                time = beforeSetTime.apply(inst.input[0],\r\n\t\t\t\t[this._getTimeTimeEntry(inst.input[0]), time, minTime, maxTime]);\r\n            }\r\n            inst._selectedHour = time.getHours();\r\n            inst._selectedMinute = time.getMinutes();\r\n            inst._selectedSecond = time.getSeconds();\r\n            this._showTime(inst, isNow);\r\n            $.data(inst.input[0], PROP_NAME, inst);\r\n        },\r\n\r\n        /* Normalise time object to a common date.\r\n        @param  time  (Date) the original time\r\n        @return  (Date) the normalised time */\r\n        _normaliseTime: function (time) {\r\n            if (!time) {\r\n                return null;\r\n            }\r\n            time.setFullYear(1900);\r\n            time.setMonth(0);\r\n            time.setDate(0);\r\n            return time;\r\n        },\r\n\r\n        /* A time may be specified as an exact value or a relative one.\r\n        @param  inst     (object) the instance settings\r\n        @param  setting  (Date) an actual time or\r\n        (number) offset in seconds from now or\r\n        (string) units and periods of offsets from now\r\n        @return  (Date) the calculated time */\r\n        _determineTime: function (inst, setting) {\r\n            var offsetNumeric = function (offset) { // E.g. +300, -2\r\n                var time = new Date();\r\n                time.setTime(time.getTime() + offset * 1000);\r\n                return time;\r\n            };\r\n            var offsetString = function (offset) { // E.g. '+2m', '-4h', '+3h +30m' or '12:34:56PM'\r\n                var fields = $.timeEntry._extractTime(inst, offset); // Actual time?\r\n                var time = new Date();\r\n                var hour = (fields ? fields[0] : time.getHours());\r\n                var minute = (fields ? fields[1] : time.getMinutes());\r\n                var second = (fields ? fields[2] : time.getSeconds());\r\n                if (!fields) {\r\n                    var pattern = /([+-]?[0-9]+)\\s*(s|S|m|M|h|H)?/g;\r\n                    var matches = pattern.exec(offset);\r\n                    while (matches) {\r\n                        switch (matches[2] || 's') {\r\n                            case 's': case 'S':\r\n                                second += parseInt(matches[1], 10); break;\r\n                            case 'm': case 'M':\r\n                                minute += parseInt(matches[1], 10); break;\r\n                            case 'h': case 'H':\r\n                                hour += parseInt(matches[1], 10); break;\r\n                        }\r\n                        matches = pattern.exec(offset);\r\n                    }\r\n                }\r\n                time = new Date(0, 0, 10, hour, minute, second, 0);\r\n                if (/^!/.test(offset)) { // No wrapping\r\n                    if (time.getDate() > 10) {\r\n                        time = new Date(0, 0, 10, 23, 59, 59);\r\n                    }\r\n                    else if (time.getDate() < 10) {\r\n                        time = new Date(0, 0, 10, 0, 0, 0);\r\n                    }\r\n                }\r\n                return time;\r\n            };\r\n            return (setting ? (typeof setting == 'string' ? offsetString(setting) :\r\n\t\t\t(typeof setting == 'number' ? offsetNumeric(setting) : setting)) : null);\r\n        },\r\n\r\n        /* Update time based on keystroke entered.\r\n        @param  inst  (object) the instance settings\r\n        @param  chr   (ch) the new character */\r\n        _handleKeyPress: function (inst, chr) {\r\n            if (chr == this._get(inst, 'separator')) {\r\n                this._changeField(inst, +1, false);\r\n            }\r\n            else if (chr >= '0' && chr <= '9') { // Allow direct entry of time\r\n                var key = parseInt(chr, 10);\r\n                var value = parseInt(inst._lastChr + chr, 10);\r\n                var show24Hours = this._get(inst, 'show24Hours');\r\n                var hour = (inst._field != 0 ? inst._selectedHour :\r\n\t\t\t\t(show24Hours ? (value < 24 ? value : key) :\r\n\t\t\t\t(value >= 1 && value <= 12 ? value :\r\n\t\t\t\t(key > 0 ? key : inst._selectedHour)) % 12 +\r\n\t\t\t\t(inst._selectedHour >= 12 ? 12 : 0)));\r\n                var minute = (inst._field != 1 ? inst._selectedMinute :\r\n\t\t\t\t(value < 60 ? value : key));\r\n                var second = (inst._field != inst._secondField ? inst._selectedSecond :\r\n\t\t\t\t(value < 60 ? value : key));\r\n                var fields = this._constrainTime(inst, [hour, minute, second]);\r\n                this._setTime(inst, new Date(0, 0, 0, fields[0], fields[1], fields[2]));\r\n                inst._lastChr = chr;\r\n            }\r\n            else if (!this._get(inst, 'show24Hours')) { // Set am/pm based on first char of names\r\n                chr = chr.toLowerCase();\r\n                var ampmNames = this._get(inst, 'ampmNames');\r\n                if ((chr == ampmNames[0].substring(0, 1).toLowerCase() &&\r\n\t\t\t\t\tinst._selectedHour >= 12) ||\r\n\t\t\t\t\t(chr == ampmNames[1].substring(0, 1).toLowerCase() &&\r\n\t\t\t\t\tinst._selectedHour < 12)) {\r\n                    var saveField = inst._field;\r\n                    inst._field = inst._ampmField;\r\n                    this._adjustField(inst, +1);\r\n                    inst._field = saveField;\r\n                    this._showField(inst);\r\n                }\r\n            }\r\n        }\r\n    });\r\n\r\n    /* jQuery extend now ignores nulls!\r\n    @param  target  (object) the object to update\r\n    @param  props   (object) the new settings \r\n    @return  (object) the updated object */\r\n    function extendRemove(target, props) {\r\n        $.extend(target, props);\r\n        for (var name in props) {\r\n            if (props[name] == null) {\r\n                target[name] = null;\r\n            }\r\n        }\r\n        return target;\r\n    }\r\n\r\n    // Commands that don't return a jQuery object\r\n    var getters = ['getOffset', 'getTime', 'isDisabled'];\r\n\r\n    /* Attach the time entry functionality to a jQuery selection.\r\n    @param  command  (string) the command to run (optional, default 'attach')\r\n    @param  options  (object) the new settings to use for these countdown instances (optional)\r\n    @return  (jQuery) for chaining further calls */\r\n    $.fn.timeEntry = function (options) {\r\n        var otherArgs = Array.prototype.slice.call(arguments, 1);\r\n        if (typeof options == 'string' && $.inArray(options, getters) > -1) {\r\n            return $.timeEntry['_' + options + 'TimeEntry'].apply($.timeEntry, [this[0]].concat(otherArgs));\r\n        }\r\n        return this.each(function () {\r\n            var nodeName = this.nodeName.toLowerCase();\r\n            if (nodeName == 'input') {\r\n                if (typeof options == 'string') {\r\n                    $.timeEntry['_' + options + 'TimeEntry'].apply($.timeEntry, [this].concat(otherArgs));\r\n                }\r\n                else {\r\n                    // Check for settings on the control itself\r\n                    // DiegoP\": Remove conflict with other plugins using metadata plugin\r\n                    //var inlineSettings = ($.fn.metadata ? $(this).metadata() : {});\r\n                    var inlineSettings = ($.fn.metadata ? $(this).metadata({ single: 'timePicker' }) : {});\r\n\r\n                    $.timeEntry._connectTimeEntry(this, $.extend(inlineSettings, options));\r\n                }\r\n            }\r\n        });\r\n    };\r\n\r\n    /* Initialise the time entry functionality. */\r\n    $.timeEntry = new TimeEntry(); // Singleton instance\r\n\r\n})(jQuery);\r\n","/*\r\n* jQuery UI Selectable @VERSION\r\n*\r\n* Copyright (c) 2009 AUTHORS.txt (http://ui.jquery.com/about)\r\n* Dual licensed under the MIT (MIT-LICENSE.txt)\r\n* and GPL (GPL-LICENSE.txt) licenses.\r\n*\r\n* http://docs.jquery.com/UI/Selectables\r\n*\r\n* Depends:\r\n*\tjquery.ui.core.js\r\n*\tjquery.ui.mouse.js\r\n*\tjquery.ui.widget.js\r\n*/\r\n(function ($) {\r\n\r\n    $.widget('ui.selectable2', $.ui.mouse, {\r\n\r\n        options: {\r\n            closest: true,\r\n            filter: '> *',            \r\n            keyboard: true,\r\n            multiple: true,            \r\n            lasso: {\r\n                cancel: \":input,option\",\r\n                delay: 0,\r\n                distance: 1,\r\n                tolerance: 'touch',\r\n                appendTo: 'body'\r\n            }\r\n        },\r\n\r\n        _init: function () {\r\n\r\n            var self = this;\r\n            this.items = $(this.options.filter, this.element);\r\n\r\n            this.element.addClass(\"ui-selectable ui-widget\");\r\n\r\n            //Set the currentFocus to the first item\r\n            this.currentFocus = this.items.eq(0).attr('tabindex', 0);\r\n\r\n            //Refresh item positions\r\n            this.refresh(1);\r\n\r\n            //Disable text selection\r\n            this.element.disableSelection();\r\n\r\n            //Prepare caret selection\r\n            if (this.options.lasso) {\r\n\r\n                // we need to move the lasso options onto the root options for the mouse class\r\n                if (this.options.lasso !== true) {\r\n                    $.extend(this.options, this.options.lasso);\r\n                }\r\n\r\n                this._mouseInit();\r\n            }\r\n\r\n            this.element\r\n\t\t\t\t.bind('mousedown.selectable', function (event) {\r\n\r\n\t\t\t\t    if (self.options.disabled)\r\n\t\t\t\t        return;\r\n\r\n\t\t\t\t    var item = self._targetIsItem(event.target);\r\n\t\t\t\t    if (!item) return;\r\n\r\n\t\t\t\t    // If item is part of current selection and current\r\n\t\t\t\t    // selection is multiple, return and allow mouseup\r\n\t\t\t\t    // to fire (Windows gets this right too, OSX doesn't)\r\n\t\t\t\t    if (self._selection.length > 1 && $(item).hasClass('ui-selected')) {\r\n\t\t\t\t        return (self._listenForMouseUp = 1);\r\n\t\t\t\t    }\r\n\r\n                    // Select the current item\r\n                    if (self._mouseSelect(event, item) === true)\r\n                        return true;\r\n\r\n\t\t\t\t})\r\n\t\t\t\t.bind('mouseup.selectable', function (event) {\r\n\r\n\t\t\t\t    if (self._listenForMouseUp) {\r\n\t\t\t\t        self._listenForMouseUp = 0;\r\n\t\t\t\t        var item = self._targetIsItem(event.target);\r\n\t\t\t\t        if (item && self._mouseSelect(event, item) === true)\r\n\t\t\t\t            return true;\r\n\t\t\t\t    }\r\n\r\n\t\t\t\t})\r\n\t\t\t\t.bind('focus.selectable', function () {\r\n\r\n\t\t\t\t    if (!self.options.disabled) self.currentFocus.addClass('ui-state-focus');\r\n\r\n\t\t\t\t})\r\n\t\t\t\t.bind('blur.selectable', function () {\r\n\r\n\t\t\t\t    if (!self.options.disabled) self.currentFocus.removeClass('ui-state-focus');\r\n\r\n\t\t\t\t})\r\n\t\t\t\t.bind('keydown.selectable', function (event) {\r\n\r\n\t\t\t\t    if (!self.options.keyboard || self.options.disabled || self._trigger('beforeselect', event) === false)\r\n\t\t\t\t        return true;\r\n\r\n\t\t\t\t    if (event.keyCode == $.ui.keyCode.DOWN) {\r\n\t\t\t\t        self.options.closest ? self.selectClosest('down', event) : self.next(event);\r\n\t\t\t\t        event.preventDefault();\r\n\t\t\t\t    }\r\n\r\n\t\t\t\t    if (event.keyCode == $.ui.keyCode.RIGHT) {\r\n\t\t\t\t        self.options.closest ? self.selectClosest('right', event) : self.next(event);\r\n\t\t\t\t        event.preventDefault();\r\n\t\t\t\t    }\r\n\r\n\t\t\t\t    if (event.keyCode == $.ui.keyCode.UP) {\r\n\t\t\t\t        self.options.closest ? self.selectClosest('up', event) : self.previous(event);\r\n\t\t\t\t        event.preventDefault();\r\n\t\t\t\t    }\r\n\r\n\t\t\t\t    if (event.keyCode == $.ui.keyCode.LEFT) {\r\n\t\t\t\t        self.options.closest ? self.selectClosest('left', event) : self.previous(event);\r\n\t\t\t\t        event.preventDefault();\r\n\t\t\t\t    }\r\n\r\n\t\t\t\t    if (event.ctrlKey || event.metaKey) {\r\n\r\n\t\t\t\t        if (event.keyCode == $.ui.keyCode.SPACE) {\r\n\t\t\t\t            self._toggleSelection(self.currentFocus, event);\r\n\t\t\t\t            event.preventDefault();\r\n\t\t\t\t        }\r\n\r\n\t\t\t\t        if (event.keyCode == 65) { // A is pressed, for select all\r\n\t\t\t\t            self.select('*');\r\n\t\t\t\t            event.preventDefault();\r\n\t\t\t\t        }\r\n\r\n\r\n\t\t\t\t    }\r\n\r\n\t\t\t\t});\r\n\r\n            this.helper = $(document.createElement('div'))\r\n\t\t\t\t.addClass(\"ui-selectable-lasso\");\r\n\r\n        },\r\n\r\n        selectClosest: function (direction, event) {\r\n\r\n            var current = [/(down|right)/.test(direction) ? 10000 : -10000, null],\r\n\t\t\t\toverlap = 10000,\r\n\t\t\t\tselfOffset = this.currentFocus.data('selectable-item');\r\n\r\n            this.items.not(this.currentFocus).filter(':visible').each(function () {\r\n\r\n                var $this = $(this),\r\n\t\t\t\t\toffset = $this.data('selectable-item'),\r\n\t\t\t\t\tdistance = {\r\n\t\t\t\t\t    x: Math.abs(selfOffset.left - offset.left) + Math.abs((offset.left + this.offsetWidth) - (selfOffset.left + this.offsetWidth)),\r\n\t\t\t\t\t    y: Math.abs(selfOffset.top - offset.top) + Math.abs((offset.top + this.offsetHeight) - (selfOffset.top + this.offsetHeight))\r\n\t\t\t\t\t};\r\n\r\n                switch (direction) {\r\n\r\n                    case 'up':\r\n                        if ((selfOffset.top > offset.top && offset.top >= current[0]) && (offset.top != current[0] || distance.x < overlap)) {\r\n                            current = [offset.top, $this];\r\n                            overlap = distance.x;\r\n                        }\r\n                        break;\r\n\r\n                    case 'down':\r\n                        if ((selfOffset.top < offset.top && offset.top <= current[0]) && (offset.top != current[0] || distance.x < overlap)) {\r\n                            current = [offset.top, $this];\r\n                            overlap = distance.x;\r\n                        }\r\n                        break;\r\n\r\n                    case 'left':\r\n                        if ((selfOffset.left > offset.left && offset.left >= current[0]) && (offset.left != current[0] || distance.y < overlap)) {\r\n                            current = [offset.left, $this];\r\n                            overlap = distance.y;\r\n                        }\r\n                        break;\r\n\r\n                    case 'right':\r\n                        if ((selfOffset.left < offset.left && offset.left <= current[0]) && (offset.left != current[0] || distance.y < overlap)) {\r\n                            current = [offset.left, $this];\r\n                            overlap = distance.y;\r\n                        }\r\n                        break;\r\n\r\n                }\r\n\r\n            });\r\n\r\n            // if nothing close is found, bail\r\n            if (!current[1])\r\n                return false;\r\n\r\n            //We need to find the index of the current, and the index of the new one to call selectAdjacent\r\n            // - calling _select doesn't work, since it's only for mouse interaction (no ctrl focus move!)\r\n            var currentIndex = this.items.index(this.currentFocus[0]);\r\n            var newIndex = this.items.index(current[1]);\r\n\r\n            return this._selectAdjacent(event, newIndex - currentIndex);\r\n\r\n        },\r\n\r\n        destroy: function () {\r\n            this.items.removeClass(\"ui-selectable-item ui-selected ui-state-active\");\r\n            this.element\r\n\t\t\t\t.removeClass(\"ui-selectable ui-selectable-disabled ui-widget\")\r\n\t\t\t\t.removeData(\"selectable\")\r\n\t\t\t\t.unbind(\".selectable\");\r\n            this._mouseDestroy();\r\n            this._selection = [];\r\n            this._previousSelection = [];\r\n        },\r\n\r\n        _mouseCapture: function (event) {\r\n            //If the item we start dragging on is a selectable, we bail (if keyboard is used)\r\n            this.clickedOnItem = this._targetIsItem(event.target);\r\n            return true; // TODO: this starts the lasso on items as well - we might want to introduce an option to disable this\r\n        },\r\n\r\n        _mouseStart: function(event) {\r\n\r\n            var self = this, o = this.options;\r\n            this.opos = [event.pageX, event.pageY];\r\n\r\n            if (o.disabled)\r\n                return;\r\n\r\n            // cache positions\r\n            this.refresh(1);\r\n\r\n            // trigger start event\r\n            this._trigger(\"start\", event, this._uiHash());\r\n\r\n            // save the current selection as previous\r\n            this._previousSelection = this._selection.slice();\r\n\r\n            // append and position helper (lasso)\r\n            this.helper.appendTo('body').css({\r\n                zIndex: 100,\r\n                position: \"absolute\",\r\n                left: event.clientX,\r\n                top: event.clientY,\r\n                width: 0,\r\n                height: 0\r\n            });\r\n\r\n            // tell the intersection that some start selected\r\n            for (var i = this._selection.length - 1; i >= 0; i--) {\r\n                if (event.metaKey || event.ctrlKey) {\r\n                    if (this != self.clickedOnItem) $(this._selection[i]).data(\"selectable-item\").startSelected = true;\r\n                } else if (o.multiple) {\r\n                    self._removeFromSelection($(this._selection[i]), event);\r\n                }\r\n            };\r\n\r\n        },\r\n\r\n        _mouseDrag: function (event) {\r\n\r\n            var self = this, o = this.options;\r\n\r\n            if (o.disabled || !o.multiple)\r\n                return;\r\n\r\n            // do the lasso magic\r\n            var x1 = this.opos[0], y1 = this.opos[1], x2 = event.pageX, y2 = event.pageY;\r\n            if (x1 > x2) { var tmp = x2; x2 = x1; x1 = tmp; }\r\n            if (y1 > y2) { var tmp = y2; y2 = y1; y1 = tmp; }\r\n            this.helper.css({ left: x1, top: y1, width: x2 - x1, height: y2 - y1 });\r\n\r\n            // loop through all items and check overlaps\r\n            this.items.each(function () {\r\n\r\n                var item = $.data(this, \"selectable-item\");\r\n\r\n                //prevent helper from being selected if appendTo: selectable\r\n                if (!item || item.element == self.element[0])\r\n                    return;\r\n\r\n                var hit = false;\r\n                if (o.lasso && o.lasso.tolerance == 'touch') {\r\n                    hit = (!(item.left > x2 || item.right < x1 || item.top > y2 || item.bottom < y1));\r\n                } else if (o.lasso && o.lasso.tolerance == 'fit') {\r\n                    hit = (item.left > x1 && item.right < x2 && item.top > y1 && item.bottom < y2);\r\n                }\r\n\r\n\r\n                hit ?\r\n\t\t\t\t\titem.startSelected ? self._removeFromSelection($(this), event) : self._addToSelection($(this), event)\r\n\t\t\t\t: !item.startSelected ? self._removeFromSelection($(this), event) : self._addToSelection($(this), event);\r\n\r\n            });\r\n\r\n            return false;\r\n\r\n        },\r\n\r\n        _mouseStop: function (event) {\r\n\r\n            var newlySelected = [];\r\n            var newlyDeselected = [];\r\n\r\n            // Find out the delta of the newly selected items\r\n            for (var i = 0; i < this._selection.length; i++) {\r\n                var wasAlreadyPartOfPreviousSelection = false;\r\n                for (var j = 0; j < this._previousSelection.length; j++) {\r\n                    if (this._selection[i][0] == this._previousSelection[j][0])\r\n                        wasAlreadyPartOfPreviousSelection = true;\r\n                };\r\n                if (!wasAlreadyPartOfPreviousSelection) newlySelected.push(this._selection[i]);\r\n            };\r\n\r\n            // Find out the delta of the newly unselected items\r\n            for (var i = this._previousSelection.length - 1; i >= 0; i--) {\r\n                if (!this._previousSelection[i].data('selectable-item').selected) newlyDeselected.push(this._previousSelection[i]);\r\n            };\r\n\r\n\r\n            // Transform both deltas into jQuery objects\r\n            newlySelected = $($.map(newlySelected, function (i) { return i[0]; }));\r\n            newlyDeselected = $($.map(newlyDeselected, function (i) { return i[0]; }));\r\n\r\n            var uiHash = $.extend(this._uiHash(), {\r\n                added: newlySelected || [],\r\n                removed: newlyDeselected || []\r\n            });\r\n            this._trigger(\"stop\", event, uiHash);\r\n\r\n            // Trigger change event if anything has changed\r\n            if ((newlySelected && newlySelected.length) || (newlyDeselected && newlyDeselected.length)) {\r\n                this._trigger('change', event, uiHash);\r\n            }\r\n\r\n            this.helper.remove();\r\n            return false;\r\n        },\r\n\r\n        _mouseSelect: function (event, item) {\r\n\r\n            if (this._trigger('beforeselect', event) === false)\r\n                return true;\r\n\r\n            this._select(event, item);\r\n            this.element[0].focus();\r\n            event.preventDefault();\r\n\r\n        },\r\n\r\n        _targetIsItem: function (item) {\r\n            var found = $(item).parents().addBack().filter(':data(selectable-item)');\r\n            return found.length && found;\r\n        },\r\n\r\n        _selection: [],\r\n\r\n        _endSelection: function (event, newlySelected) {\r\n\r\n            //Only trigger the 'deselect' event if items have been removed from the selection\r\n            var newlyDeselected = this._triggerDeselection(event);\r\n\r\n            //Only trigger 'select' event if items have been added to the selection\r\n            if (newlySelected && newlySelected.length)\r\n                this._trigger('select', event, this._uiHash(newlySelected, 'added'));\r\n\r\n            // Trigger change event if anything has changed\r\n            if ((newlySelected && newlySelected.length) || (newlyDeselected && newlyDeselected.length)) {\r\n                var uiHash = $.extend(this._uiHash(), {\r\n                    added: newlySelected || [],\r\n                    removed: newlyDeselected || []\r\n                });\r\n                this._trigger('change', event, uiHash);\r\n            }\r\n\r\n        },\r\n\r\n        _triggerDeselection: function (event) {\r\n\r\n            var triggerItems = [];\r\n\r\n            for (var i = this._previousSelection.length - 1; i >= 0; i--) {\r\n                var data = this._previousSelection[i].data('selectable-item');\r\n                if (!data || !data.selected) triggerItems.push(this._previousSelection[i]);\r\n            };\r\n\r\n            this._previousSelection = [];\r\n            triggerItems = $($.map(triggerItems, function (i) { return i[0]; }));\r\n            if (triggerItems.length) this._trigger('deselect', event, this._uiHash(triggerItems, 'removed'));\r\n\r\n            return triggerItems;\r\n\r\n        },\r\n\r\n        _clearSelection: function (triggerEvent) {\r\n\r\n            var triggerItems = [];\r\n\r\n            for (var i = this._selection.length - 1; i >= 0; i--) {\r\n                if (triggerEvent && this._selection[i].data('selectable-item').selected) triggerItems.push(this._selection[i]);\r\n                this._selection[i].removeClass('ui-selected ui-state-active');\r\n                this._selection[i].data('selectable-item').selected = false;\r\n            };\r\n\r\n            this._previousSelection = this._selection.slice();\r\n            this._selection = [];\r\n            if (triggerEvent && triggerItems.length) this._trigger('deselect', triggerEvent, this._uiHash($($.map(triggerItems, function (i) { return i[0]; })), 'removed'));\r\n\r\n        },\r\n\r\n        _toggleSelection: function (item, event) {\r\n            var selected = item.data('selectable-item').selected;\r\n            selected ? this._removeFromSelection(item, event) : this._addToSelection(item);\r\n            return !selected;\r\n        },\r\n\r\n        _addToSelection: function (item, triggerEvent) {\r\n\r\n            if (!item.data('selectable-item') || item.data('selectable-item').selected)\r\n                return null;\r\n\r\n            this._selection.push(item);\r\n            this.latestSelection = item;\r\n            item.addClass('ui-selected ui-state-active');\r\n            item.data('selectable-item').selected = true;\r\n\r\n            if (triggerEvent) {\r\n                this._trigger('select', triggerEvent, $.extend({ lasso: true }, this._uiHash(item)));\r\n            }\r\n\r\n            return item;\r\n\r\n        },\r\n\r\n        _removeFromSelection: function (item, triggerEvent) {\r\n\r\n            for (var i = 0; i < this._selection.length; i++) {\r\n                if (this._selection[i][0] == item[0]) {\r\n                    this._selection[i].removeClass('ui-selected ui-state-active');\r\n                    this._selection[i].data('selectable-item').selected = false;\r\n                    this._selection.splice(i, 1);\r\n                    if (triggerEvent) this._trigger('deselect', triggerEvent, this._uiHash($(item), 'removed'));\r\n                    break;\r\n                }\r\n            };\r\n\r\n        },\r\n\r\n        _updateSelectionMouse: function (event) {            \r\n            var newlySelected = [];\r\n\r\n            this.updateEvents(event);\r\n\r\n            if (event && event.shiftKey) {\r\n\r\n                //Clear the previous selection to make room for a shift selection\r\n                this._clearSelection();\r\n\r\n                var index = this.items.index(this.latestWithoutModifier[0]) > this.items.index(this.currentFocus[0]) ? -1 : 1;\r\n                var i = this.latestWithoutModifier.data('selectable-item').selected ? this.items.eq(this.items.index(this.latestWithoutModifier[0]) + index) : this.latestWithoutModifier;\r\n                while (i.length && i[0] != this.currentFocus[0]) {\r\n                    i[0] == this.previousFocus[0] ? this._addToSelection(i) : newlySelected.push(this._addToSelection(i));\r\n                    i = this.items.eq(this.items.index(i[0]) + index);\r\n                }\r\n\r\n                //Readd the item with the current focus\r\n                newlySelected.push(this._addToSelection(this.currentFocus));\r\n\r\n            } else {\r\n\r\n                if (event && (event.metaKey || event.ctrlKey)) {\r\n                    var withMetaIsNewlySelected = this._toggleSelection(this.currentFocus, event);\r\n                    if (withMetaIsNewlySelected) newlySelected.push(this.currentFocus);\r\n                } else {\r\n                    this._clearSelection();\r\n                    newlySelected.push(this._addToSelection(this.currentFocus));\r\n                    this.latestWithoutModifier = this.currentFocus;\r\n                }\r\n\r\n            }\r\n\r\n            return $($.map(newlySelected, function (i) { return i[0]; }));\r\n\r\n        },\r\n\r\n        _updateSelection: function (event, index) {\r\n            var newlySelected = [];\r\n\r\n            this.updateEvents(event);            \r\n\r\n            if (event && event.shiftKey) {\r\n\r\n                if (this.currentFocus.data('selectable-item').selected) {\r\n                    this._removeFromSelection(this.previousFocus, event);\r\n                } else {\r\n\r\n                    var index2 = this.items.index(this.latestSelection[0]) > this.items.index(this.currentFocus[0]) ? 1 : -1;\r\n                    if (!this.previousFocus.data('selectable-item').selected) {\r\n                        var i = index == index2 ? this.items.eq(this.items.index(this.previousFocus[0]) + index2) : this.previousFocus;\r\n                        while (i.length && !i.data('selectable-item').selected) {\r\n                            newlySelected.push(this._addToSelection(i));\r\n                            i = this.items.eq(this.items.index(i[0]) + index2);\r\n                        }\r\n                    }\r\n\r\n                    newlySelected.push(this._addToSelection(this.currentFocus));\r\n\r\n                }\r\n\r\n            } else {\r\n\r\n                //If the CTRL or Apple/Win key is pressed, only set focus\r\n                if (event && (event.metaKey || event.ctrlKey))\r\n                    return;\r\n\r\n                this._clearSelection(event);\r\n                newlySelected.push(this._addToSelection(this.currentFocus));\r\n                this.latestWithoutModifier = this.currentFocus;\r\n\r\n            }\r\n\r\n            return $($.map(newlySelected, function (i) { if (i) return i[0]; }));\r\n\r\n        },\r\n\r\n        _select: function (event, item) {\r\n\r\n            //Set the current selection to the previous/next item\r\n            this.previousFocus = this.currentFocus.attr('tabindex', -1);\r\n            this.currentFocus = $(item).attr('tabindex', 0);\r\n\r\n            this.previousFocus.removeClass('ui-state-focus');\r\n            this.currentFocus.addClass('ui-state-focus');\r\n\r\n            //Set and update the selection\r\n            var newlySelected = this._updateSelectionMouse(event);\r\n\r\n            // Ending the selection does a diff and then triggers appropriate events\r\n            this._endSelection(event, newlySelected);\r\n\r\n        },\r\n\r\n        _selectAdjacent: function (event, index) {\r\n\r\n            var item = this.items.eq(this.items.index(this.currentFocus[0]) + index);\r\n\r\n            //Bail if there's no previous/next item\r\n            if (!item.length) return;\r\n\r\n            //Set the current selection to the previous/next item\r\n            this.previousFocus = this.currentFocus.attr('tabindex', -1);\r\n            this.currentFocus = item.attr('tabindex', 0);\r\n\r\n            this.previousFocus.removeClass('ui-state-focus');\r\n            this.currentFocus.addClass('ui-state-focus');\r\n\r\n            //Set and update the selection\r\n            this._previousSelection = this._selection.slice();\r\n            var newlySelected = this._updateSelection(event, index);\r\n\r\n            // Ending the selection does a diff and then triggers appropriate events\r\n            this._endSelection(event, newlySelected);\r\n\r\n        },\r\n\r\n        previous: function (event) {\r\n            this._selectAdjacent(event, -1);\r\n        },\r\n\r\n        next: function (event) {\r\n            this._selectAdjacent(event, 1);\r\n        },\r\n\r\n        refresh: function (fromInside) {\r\n\r\n            var o = this.options, self = this;\r\n            this.items = $(o.filter, this.element);\r\n            this.items.addClass('ui-selectable-item');\r\n            this.items.each(function () {\r\n\r\n                var $this = $(this);\r\n                var pos = $this.offset();\r\n\r\n                if (self.currentFocus && self.currentFocus[0] != this)\r\n                    $this.attr('tabindex', -1);\r\n\r\n                $.data(this, \"selectable-item\", {\r\n                    left: pos.left,\r\n                    top: pos.top,\r\n                    right: pos.left + $this.width(),\r\n                    bottom: pos.top + $this.height(),\r\n                    startSelected: false,\r\n                    selected: $this.hasClass('ui-selected')\r\n                });\r\n            });\r\n\r\n\r\n            if (!fromInside) {\r\n                this._previousSelection = this._selection.slice();\r\n                this._selection = [];\r\n                for (var i = 0; i < this._previousSelection.length; i++) {\r\n                    if (this._previousSelection[i][0].parentNode) this._selection.push(this._previousSelection[i]);\r\n                };\r\n\r\n                this._endSelection();\r\n            }\r\n\r\n        },\r\n\r\n        select: function (item) {\r\n\r\n            item = !isNaN(parseInt(item)) ? this.items.eq(item) : $(item, this.element);\r\n            if (!item.length) return;\r\n\r\n            // clear the current selection\r\n            this._clearSelection();\r\n\r\n            // select all found\r\n            var newlySelected = [], self = this;\r\n            item.each(function (i) {\r\n                if (i == 0) { //Setting the focus on the first item in the list\r\n                    self.previousFocus = self.currentFocus.attr('tabindex', -1);\r\n                    self.currentFocus = $(this).attr('tabindex', 0);\r\n                    self.previousFocus.removeClass('ui-state-focus');\r\n                    self.currentFocus.addClass('ui-state-focus');\r\n                }\r\n                newlySelected.push(self._addToSelection($(this)));\r\n            });\r\n\r\n            // Ending the selection does a diff and then triggers appropriate events\r\n            this._endSelection(window.event, $($.map(newlySelected, function (i) { return i ? i[0] : false; })));\r\n\r\n        },\r\n\r\n        deselect: function (item) {\r\n\r\n            // if no item was specified, deselect all\r\n            if (!item)\r\n                this._clearSelection(true);\r\n\r\n            item = !isNaN(parseInt(item)) ? this.items.eq(item) : $(item, this.element);\r\n            if (!item.length) return;\r\n\r\n            //store the current selection\r\n            this._previousSelection = this._selection.slice();\r\n\r\n            // deselect all found\r\n            var self = this;\r\n            item.each(function () {\r\n                self._removeFromSelection($(this));\r\n            });\r\n\r\n            // Ending the selection does a diff and then triggers appropriate events\r\n            this._endSelection(event);\r\n\r\n        },\r\n\r\n        _uiHash: function (items, specialKey) {\r\n            var uiHash = {\r\n                previousFocus: this.previousFocus,\r\n                currentFocus: this.currentFocus,\r\n                selection: $($.map(this._selection, function (i) { return i[0]; }))\r\n            };\r\n            if (specialKey) uiHash[specialKey] = items;\r\n            return uiHash;\r\n        },\r\n\r\n        updateEvents: function(event) {\r\n            var o = this.options;\r\n\r\n            event.shiftKey = o.multiple ? event.shiftKey : false;\r\n            event.metaKey = o.multiple ? event.metaKey : false;\r\n            event.ctrlKey = o.multiple ? event.ctrlKey : false;\r\n        }\r\n\r\n    });\r\n\r\n})(jQuery);\r\n","/*\r\n* jQuery UI Option @VERSION\r\n* Author: Diego Parra\r\n* Based on http://www.filamentgroup.com/lab/accessible_custom_designed_checkbox_radio_button_inputs_styled_css_jquery/ plugin\r\n* Copyright (c) 2010 (http://www.bizagi.com)\r\n*\r\n* Depends:\r\n*  ui.core.js\r\n*/\r\n(function ($) {\r\n\r\n    $.widget('ui.optiongroup', {\r\n        _create: function () {\r\n            var self = this,\r\n                    element = this.element,\r\n                    options = self.options;\r\n\r\n            // Find all inputs in this set \r\n            var allInputs = $('input[type=radio]', element);\r\n\r\n            // Skin each element\r\n            $(\"label\", element).each(function (i) {\r\n                // Get the associated label using the input's id\r\n                var label = $(this);\r\n                var text = label.text();\r\n                var input = $(\"input[type=radio]\", label);\r\n\r\n                if (label.attr(\"for\") != input.attr(\"id\")) {\r\n                    alert(\"label and input element are not related in label:\" + label.attr(\"id\"));\r\n                    return;\r\n                }\r\n\r\n                // Wrap the input + label in a div \r\n                input.detach();\r\n                (self.options.orientation == \"rtl\") ? label.wrap('<div class=\"ui-radio ui-bizagi-rtl\"></div>') : label.wrap('<div class=\"ui-radio\"></div>');\r\n                // Wrap the input + label in a div \r\n                (self.options.orientation == \"rtl\") ? input.insertAfter(label) : input.insertBefore(label);\r\n                label.text(text);\r\n\r\n                // Necessary for browsers that don't support the :hover pseudo class on labels\r\n                label.hover(\r\n\t\t\t        function () {\r\n\t\t\t            $(this).addClass('ui-radio-state-hover');\r\n\t\t\t        },\r\n\t\t\t        function () {\r\n\t\t\t            $(this).removeClass('ui-radio-state-hover');\r\n\t\t\t        }\r\n\t\t        ).click(function(){\r\n\t\t            var checked = input.prop(\"checked\");\r\n\t\t            input.prop(\"checked\", !checked);\r\n\t\t            !checked ? input.attr(\"checked\", \"checked\") : input.removeAttr(\"checked\");\r\n\t\t            // Alignment fix on Click\r\n\t\t            if (bizagi.util.isIE()) window.setTimeout(function () {\r\n\t\t                label.css(\"display\", \"inline-block\");\r\n\t\t                $(\".ui-bizagi-rtl table .ui-bizagi-render-boolean-yesno .ui-radio input\").css(\"height\", \"1px\");\r\n\t\t            }, 0);\r\n\t\t        });\r\n\r\n                // Bind custom event, trigger it, bind click,focus,blur events\t\t\t\t\t\r\n                input.bind('update', function () {\r\n                    if ($(this).is(':checked')) {\r\n                        allInputs.each(function () {\r\n                            // Remove class from each label\r\n                            var next = (self.options.orientation == \"rtl\") ? $(this).prev() : $(this).next();\r\n                            next.removeClass('ui-radio-state-checked');\r\n                        });\r\n\r\n                        label.addClass('ui-radio-state-checked');\r\n\r\n                    } else {\r\n                        label.removeClass('ui-radio-state-checked ui-radio-state-hover ui-radio-state-highlight');\r\n                    }\r\n\r\n                    if ($(this).is(':checked')) {\r\n                        // Trigger change event\r\n                        self._trigger(\"change\", window.event, { value: $(this).val(), text: label.text() });\r\n                    }\r\n                })\r\n\t\t        .trigger('update')\r\n\t\t        .click(function () {\r\n\t\t            $(this).trigger('update');\r\n\t\t            // Alignment fix on Click\r\n\t\t            if (bizagi.util.isIE()) window.setTimeout(function () {\r\n\t\t                label.css(\"display\", \"inline-block\");\r\n\t\t                $(\".ui-bizagi-rtl table .ui-bizagi-render-boolean-yesno .ui-radio input\").css(\"height\", \"1px\");\r\n\t\t            }, 0);\r\n\t\t        })\r\n\t\t        .focus(function () {\r\n\t\t            //label.addClass('ui-radio-state-highlight');TODO: revisar una mejor manera de marcar el foco en el control\r\n\t\t        })\r\n\t\t        .blur(function () {\r\n\t\t            //label.removeClass('ui-radio-state-highlight');TODO: revisar una mejor manera de marcar el foco en el control\r\n\t\t        });\r\n            });\r\n        },\r\n\r\n        setValue: function (value) {\r\n            var self = this,\r\n                    element = this.element,\r\n                    options = self.options;\r\n\r\n            // Find all inputs in this set \r\n            var allInputs = $('input[type=radio]', element);\r\n\r\n            $.each(allInputs, function (i) {\r\n                var option = $(this);\r\n                if (option.val() == value) {\r\n                    option.prop(\"checked\", true);\r\n                    option.attr(\"checked\", \"checked\");\r\n                    option.trigger(\"update\");\r\n                }\r\n            });\r\n        }\r\n    });\r\n\r\n    $.extend($.ui.optionGroup, {\r\n        version: \"@VERSION\",\r\n        eventPrefix: \"optiongroup\"\r\n    });\r\n\r\n})(jQuery);","/*\r\n* Simple Pagination Control for Bizagi Workportal\r\n* @author: Edward J Morales\r\n*/\r\n\r\n(function ($) {\r\n    $.fn.bizagiPagination = function (options) {\r\n        // define options\r\n        options = options || {};\r\n\r\n        var opt = {\r\n            limInf: 0,\r\n            totalPages: 1,\r\n            actualPage: 1,\r\n\r\n            // Controllers elements\r\n            listElement: $(\"ul\"),\r\n            first: '&lt;&lt;',\r\n            firstClass: \"first\",\r\n            prev: '&lt;',\r\n            prevClass: 'prev',\r\n            next: \"&gt;\",\r\n            nextClass: \"next\",\r\n            last: \"&gt;&gt;\",\r\n            lastClass: \"last\",\r\n\r\n            // Default class of pagination template, ui-bizagi-workportal-widget-inbox-common-pagination\r\n            // <li {{if page==pageNumber}} class=\"page active\" {{else}} class=\"page\" {{/if}} data-page=\"${pageNumber}\">\r\n            // <span class=\"number\">${pageNumber}</span>\r\n            // </li>\r\n            liClass: \"bz-page\",\r\n            arrowClass: \"bz-pageArrow\",\r\n\r\n            // Auto focus on selected element\r\n            selectedFocus: true,\r\n\r\n            // Call back methods\r\n            clickCallBack: function () { }\r\n\r\n        };\r\n\r\n\r\n        if (options.actualPage > options.totalPages) {\r\n            options.actualPage = options.totalPages;\r\n        }\r\n\r\n\r\n        // Extend options\r\n        $.extend(opt, opt, options);\r\n\r\n        var pagination = {\r\n            previousPage: Math.max(1,parseInt(opt.actualPage) - 1),\r\n            nextPage: parseInt(opt.actualPage) + 1\r\n        }\r\n\r\n        function init() {\r\n            // Count total elements\r\n            opt.totalElements = $(\"li.\" + opt.liClass, opt.listElement[0]).length;\r\n\r\n\r\n            // Add control elements\r\n            if (opt.totalPages > opt.totalElements && opt.totalElements > 1) {\r\n                appendControlsArrows();\r\n            }\r\n\r\n            // Add events\r\n            bindElements();\r\n\r\n            // Set focus\r\n            if (opt.selectedFocus && opt.actualPage >= opt.totalElements && opt.totalPages > opt.totalElements) {\r\n                var firstElementValue;\r\n                var halfDisplace = (opt.actualPage - Math.round(opt.totalElements / 2));\r\n\r\n                if (halfDisplace < 1) {\r\n                    firstElementValue = 1;\r\n                } else if ((halfDisplace + opt.totalElements) > opt.totalPages) {\r\n                    firstElementValue = (opt.totalPages - opt.totalElements);\r\n                    firstElementValue = (firstElementValue < 1) ? 1 : firstElementValue;\r\n                } else {\r\n                    firstElementValue = halfDisplace;\r\n                }\r\n\r\n                if (opt.listElement.find(\"li.active\").length == 0) {\r\n                    displaceElements(firstElementValue, 1);\r\n                }\r\n            }\r\n        }\r\n\r\n        // Append control arrow to list\r\n        function appendControlsArrows() {\r\n\r\n            var disableFirst=pagination.previousPage==opt.actualPage;\r\n            var disableLast=opt.actualPage==opt.totalPages;\r\n\r\n            // add prev arrow\r\n            opt.listElement.prepend(\"<li/>\").find(\"li:first\").addClass(opt.prevClass).addClass(disableFirst?\"pagination-disabled\":\"\").data(\"page\", pagination.previousPage).html(opt.prev);\r\n\r\n            // add first arrow\r\n            opt.listElement.prepend(\"<li/>\").find(\"li:first\").addClass(opt.arrowClass + \" \" + opt.firstClass).addClass(disableFirst?\"pagination-disabled\":\"\").data(\"page\", \"1\").html(opt.first);\r\n\r\n            // add next arrow\r\n            opt.listElement.append(\"<li/>\").find(\"li:last\").addClass(opt.nextClass).addClass(disableLast?\"pagination-disabled\":\"\").data(\"page\", pagination.nextPage).html(opt.next);\r\n\r\n            // add last arrow\r\n            opt.listElement.append(\"<li/>\").find(\"li:last\").addClass(opt.arrowClass + \" \" + opt.lastClass).addClass(disableLast?\"pagination-disabled\":\"\").data(\"page\", opt.totalPages).html(opt.last);\r\n        }\r\n\r\n\r\n        // Add events\r\n        function bindElements() {\r\n            // Click event for list element\r\n            var options = {};\r\n            $(\"li:not(.pagination-disabled)\", opt.listElement).click(function () {\r\n                // Next line now includes a ternary operator in order to confirm last arrow (>>) if going indeed to the last page\r\n                options.page = ($(this).hasClass(opt.lastClass)) ? opt.totalPages : $.trim($(this).data(\"page\") + \" \");\r\n                options.parent = $(this).parent();\r\n                options.self = $(this);\r\n                opt.clickCallBack(options);\r\n            });\r\n        }\r\n\r\n        // Change values of elements\r\n        function pageScroll(increment) {\r\n            // if increment its positive, execute right scroll\r\n            // if increment its negative, execute left scroll\r\n            increment = increment || 1;\r\n            var displace = false;\r\n\r\n            // Define first element value\r\n            var firstPageValue = $(\"li.\" + opt.liClass + \":first\", opt.listElement).data(\"page\");\r\n            var lastPageValue = $(\"li.\" + opt.liClass + \":last\", opt.listElement).data(\"page\");\r\n\r\n\r\n            // Check left scroll - decrement\r\n            if (increment < 0 && firstPageValue > 1) {\r\n                displace = true;\r\n            } else if (increment > 0 && lastPageValue < opt.totalPages) {\r\n                displace = true;\r\n            }\r\n\r\n            if (displace) {\r\n                displaceElements(firstPageValue, increment);\r\n            }\r\n        }\r\n\r\n        // Displace elements\r\n        function displaceElements(firstElementValue, increment) {\r\n            firstElementValue = firstElementValue || 1;\r\n            increment = increment || 0;\r\n            var pageData;\r\n\r\n            if (increment > 0) {\r\n                // Increment\r\n                pageData = firstElementValue;\r\n            } else if (increment < 0) {\r\n                // Decrement\r\n                pageData = firstElementValue - 2;\r\n            } else {\r\n                return;\r\n            }\r\n\r\n            $.each($(\"li.\" + opt.liClass, opt.listElement), function (key, value) {\r\n                pageData++;\r\n                $(this).data(\"page\", pageData);\r\n                $(this).find(\"span\").html(pageData);\r\n                // Changes the attribute content of data-page with the current number pageData\r\n                $(this).attr(\"data-page\", pageData);\r\n                // Check if selected style\r\n                if (opt.actualPage == pageData && !$(this).hasClass(\"active\")) {\r\n                    $(this).addClass(\"active\");\r\n                } else {\r\n                    $(this).removeClass(\"active\");\r\n                }\r\n            });\r\n\r\n            // Show or hide tooltip pagination\r\n            if ($(opt.listElement).find(\".active\").length == 1) {\r\n                $(opt.listElement).parent().find(\"#tooltipPagination\").css(\"visibility\", \"hidden\");\r\n            } else {\r\n                $(opt.listElement).parent().find(\"#tooltipPagination\").css(\"visibility\", \"visible\");\r\n            }\r\n        }\r\n\r\n        // Init plugin\r\n        init();\r\n    };\r\n})(jQuery);\r\n\r\n\r\n\r\n","/**\r\n * Simple Pagination Control for Bizagi\r\n * @author: UI Forms Team\r\n */\r\n\r\n(function ($) {\r\n    $.fn.bizagiGridPagination = function (options) {\r\n        // define options\r\n        options = options || {};\r\n\r\n        var opt = {\r\n            limInf: 0,\r\n            totalPages: 1,\r\n            actualPage: 1,\r\n\r\n            // Controllers elements\r\n            listElement: $(\"ul\"),\r\n            first: '&lt;&lt;',\r\n            firstClass: \"first\",\r\n            prev: '&lt;',\r\n            prevClass: 'prev',\r\n            next: \"&gt;\",\r\n            nextClass: \"next\",\r\n            last: \"&gt;&gt;\",\r\n            lastClass: \"last\",\r\n\r\n            // Default class of pagination template\r\n            // <li {{if page==pageNumber}} class=\"page active\" {{else}} class=\"page\" {{/if}} data-page=\"${pageNumber}\">\r\n            // <span class=\"number\">${pageNumber}</span>\r\n            // </li>\r\n            liClass: \"bz-page\",\r\n            arrowClass: \"bz-pageArrow\",\r\n\r\n            // Auto focus on selected element\r\n            selectedFocus: true,\r\n\r\n            // Auto scroll on hover\r\n            scrolledHover: false,\r\n\r\n            // Call back methods\r\n            clickCallBack: function () {\r\n            }\r\n\r\n        };\r\n\r\n        if (options.actualPage > options.totalPages) {\r\n            options.actualPage = options.totalPages;\r\n        }\r\n\r\n        // Extend options\r\n        $.extend(opt, opt, options);\r\n\r\n        var pagination = {\r\n            previousPage: Math.max(1, parseInt(opt.actualPage) - 1),\r\n            nextPage: parseInt(opt.actualPage) + 1\r\n        };\r\n\r\n        function init() {\r\n            // Count total elements\r\n            opt.totalElements = $(\"li.\" + opt.liClass, opt.listElement[0]).length;\r\n\r\n            // Add control elements\r\n            if (opt.totalPages > opt.totalElements && opt.totalElements > 1) {\r\n                appendControlsArrows();\r\n            }\r\n\r\n            // Add events\r\n            bindElements();\r\n\r\n            // Set focus\r\n            if (opt.selectedFocus && opt.actualPage >= opt.totalElements && opt.totalPages > opt.totalElements) {\r\n                var firstElementValue;\r\n                var halfDisplace = (opt.actualPage - Math.round(opt.totalElements / 2));\r\n\r\n                if (halfDisplace < 1) {\r\n                    firstElementValue = 1;\r\n                } else if ((halfDisplace + opt.totalElements) > opt.totalPages) {\r\n                    firstElementValue = (opt.totalPages - opt.totalElements);\r\n                    firstElementValue = (firstElementValue < 1) ? 1 : firstElementValue;\r\n                } else {\r\n                    firstElementValue = halfDisplace;\r\n                }\r\n\r\n                if (opt.listElement.find(\"li.active\").length == 0) {\r\n                    displaceElements(firstElementValue, 1);\r\n                }\r\n            }\r\n        }\r\n\r\n        // Append control arrow to list\r\n        function appendControlsArrows() {\r\n            var disableFirst = pagination.previousPage == opt.actualPage;\r\n            var disableLast = opt.actualPage == opt.totalPages;\r\n            // add prev arrow\r\n            opt.listElement.prepend(\"<li/>\").find(\"li:first\")\r\n                .addClass(opt.prevClass)\r\n                .addClass(disableFirst ? \"pagination-disabled\" : \"\")\r\n                .data(\"page\", pagination.previousPage)\r\n                .html(opt.prev);\r\n\r\n            // add first arrow\r\n            opt.listElement.prepend(\"<li/>\").find(\"li:first\")\r\n                .addClass(opt.arrowClass + \" \" + opt.firstClass)\r\n                .addClass(disableFirst ? \"pagination-disabled\" : \"\")\r\n                .data(\"page\", \"1\")\r\n                .html(opt.first);\r\n\r\n            // add next arrow\r\n            opt.listElement.append(\"<li/>\").find(\"li:last\")\r\n                .addClass(opt.nextClass)\r\n                .addClass(disableLast ? \"pagination-disabled\" : \"\")\r\n                .data(\"page\", pagination.nextPage).html(opt.next);\r\n\r\n            // add last arrow\r\n            opt.listElement.append(\"<li/>\").find(\"li:last\")\r\n                .addClass(opt.arrowClass + \" \" + opt.lastClass)\r\n                .addClass(disableLast ? \"pagination-disabled\" : \"\")\r\n                .data(\"page\", opt.totalPages)\r\n                .html(opt.last);\r\n        }\r\n\r\n\r\n        // Add events\r\n        function bindElements() {\r\n            // Click event for list element\r\n            var options = {};\r\n\r\n            $(\"li:not(.pagination-disabled)\", opt.listElement).click(function () {\r\n                // Next line now includes a ternary operator in order to confirm last arrow (>>) if going indeed to the last page\r\n                options.page = ($(this).hasClass(opt.lastClass)) ? opt.totalPages : $.trim($(this).data(\"page\") + \" \");\r\n                options.parent = $(this).parent();\r\n                options.self = $(this);\r\n                opt.clickCallBack(options);\r\n            });\r\n\r\n            if (opt.scrolledHover) {\r\n                bindNextArrow();\r\n                bindPrevArrow();\r\n            }\r\n        }\r\n\r\n\r\n        // Bind for back scroll\r\n        function bindPrevArrow() {\r\n            $(\"li.\" + opt.prevClass, opt.listElement).hover(function () {\r\n                back = setInterval(function () {\r\n                    pageScroll(-1);\r\n                }, 300);\r\n            }, function () {\r\n                clearInterval(back);\r\n            });\r\n        }\r\n\r\n        // Bind for next scroll\r\n        function bindNextArrow() {\r\n            $(\"li.\" + opt.nextClass, opt.listElement).hover(function () {\r\n                next = setInterval(function () {\r\n                    pageScroll(1);\r\n                }, 300);\r\n            }, function () {\r\n                clearInterval(next);\r\n            });\r\n        }\r\n\r\n        // Change values of elements\r\n        function pageScroll(increment) {\r\n            // if increment its positive, execute right scroll\r\n            // if increment its negative, execute left scroll\r\n            increment = increment || 1;\r\n            var displace = false;\r\n\r\n            // Define first element value\r\n            var firstPageValue = $(\"li.\" + opt.liClass + \":first\", opt.listElement).data(\"page\");\r\n            var lastPageValue = $(\"li.\" + opt.liClass + \":last\", opt.listElement).data(\"page\");\r\n\r\n\r\n            // Check left scroll - decrement\r\n            if (increment < 0 && firstPageValue > 1) {\r\n                displace = true;\r\n            } else if (increment > 0 && lastPageValue < opt.totalPages) {\r\n                displace = true;\r\n            }\r\n\r\n            if (displace) {\r\n                displaceElements(firstPageValue, increment);\r\n            }\r\n        }\r\n\r\n        // Displace elements\r\n        function displaceElements(firstElementValue, increment) {\r\n            firstElementValue = firstElementValue || 1;\r\n            increment = increment || 0;\r\n            var pageData;\r\n\r\n            if (increment > 0) {\r\n                // Increment                \r\n                pageData = firstElementValue;\r\n            } else if (increment < 0) {\r\n                // Decrement  \r\n                pageData = firstElementValue - 2;\r\n            } else {\r\n                return;\r\n            }\r\n\r\n            $.each($(\"li.\" + opt.liClass, opt.listElement), function (key, value) {\r\n                pageData++;\r\n                $(this).data(\"page\", pageData);\r\n                $(this).find(\"span\").html(pageData);\r\n                // Changes the attribute content of data-page with the current number pageData\r\n                $(this).attr(\"data-page\", pageData);\r\n                // Check if selected style\r\n                if (opt.actualPage == pageData && !$(this).hasClass(\"active\")) {\r\n                    $(this).addClass(\"active\");\r\n                } else {\r\n                    $(this).removeClass(\"active\");\r\n                }\r\n            });\r\n\r\n            // Show or hide tooltip pagination\r\n            if ($(opt.listElement).find(\".active\").length == 1) {\r\n                $(opt.listElement).parent()\r\n                    .find(\"#tooltipPagination\")\r\n                    .css(\"visibility\", \"hidden\");\r\n            } else {\r\n                $(opt.listElement).parent()\r\n                    .find(\"#tooltipPagination\")\r\n                    .css(\"visibility\", \"visible\");\r\n            }\r\n        }\r\n\r\n        // Init plugin\r\n        init();\r\n    };\r\n})(jQuery);\r\n\r\n\r\n\r\n","/*\r\n *   Name: \r\n *   Author: Diego Parra\r\n *   Comments:\r\n *   -   This widget will implement a custom grid for bizagi rendering module\r\n *\r\n *   Markup: <div></div>\r\n *\r\n *   Styles:\r\n *   - Desktop: css/bizagi/desktop/controls/bizagi.grid.css\r\n *   - Tablet: css/bizagi/tablet/controls/bizagi.grid.css\r\n */\r\n\r\n// TODO: Create templates\r\n\r\n(function ($) {\r\n    $.widget(\"ui.bizagi_grid\", {\r\n        options: {\r\n            id: \"no-id\",\r\n            columns: [],\r\n            sortBy: \"\",\r\n            sortType: \"asc\",\r\n            showSummary: false,\r\n            collapse: false,\r\n            collapseState: false,\r\n            data: {},\r\n            indexedData: {},\r\n            maxColumns: 0,\r\n            buttonsPst: false,\r\n            title: '',\r\n            tableCssClass: '', // Style for entire table              \r\n            headerStyles: '',\r\n            floatingHeader: false,\r\n            hasExclusiveCheck: false,\r\n            template: {\r\n                grid: \"\",\r\n                waiting: \"\",\r\n                table: \"\",\r\n                emptyTable: \"\",\r\n                column: \"\",\r\n                specialColumn: \"\",\r\n                row: \"\",\r\n                rowButtons: \"\",\r\n                cell: \"\",\r\n                specialCell: \"\",\r\n                pager: \"\",\r\n                buttons: \"\",\r\n                dynamicPager: \"\",\r\n                summary: \"\",\r\n                summaryCell: \"\"\r\n            },\r\n            actions: {\r\n                add: true,\r\n                edit: true,\r\n                remove: true,\r\n                details: true,\r\n                allowMore: false,\r\n                enableXlsExport: false,\r\n                enablePdfExport: false\r\n            },\r\n            mode: \"execution\"\r\n        },\r\n        /*\r\n        *   Constructor\r\n        */\r\n        _init: function () {\r\n            var self = this;\r\n            var options = self.options;\r\n            var element = self.element;\r\n\r\n            // Set object variables\r\n            self.page = 1;\r\n            self.changes = {};\r\n            self.totalRows = 0;\r\n            self.totalPages = 0;\r\n            self.data = options.data;\r\n            self.selectedRow = 0;\r\n            self.components = {};\r\n            self.buttons = {};\r\n            self.asyncCells = {};\r\n            self.scrollableArea = options.scrollableArea || self;\r\n\r\n            // Build column indexes\r\n            self.columnByIndex = {};\r\n            self.columnByName = {};\r\n            self.columnKeyIndex = 0;\r\n            $.each(options.columns, function (i, column) {\r\n                // Fix non-present properties\r\n                column.key = typeof (column.key) !== \"undefined\" ? column.key : false;\r\n                column.label = typeof (column.label) !== \"undefined\" ? column.label : column.name;\r\n                column.sortType = \"asc\";\r\n                column.tooltip = typeof (column.tooltip) !== \"undefined\" ? column.tooltip : \"\";\r\n\r\n                // Index the column\r\n                self.columnByIndex[column.index] = column;\r\n                self.columnByName[column.name] = column;\r\n                if (column.key) {\r\n                    self.columnKeyIndex = column.index;\r\n                }\r\n            });\r\n\r\n            // Set sort options\r\n            options.sortBy = options.sortBy || self.columnByIndex[0].name;\r\n            if (self.columnByName[options.sortBy]) {\r\n                self.columnByName[options.sortBy].sortType = options.sortType;\r\n            } else {\r\n                if (self.columnByName[options.sortBy.split(\".\")[0]]) {\r\n                    self.columnByName[options.sortBy.split(\".\")[0]].sortType = options.sortType;\r\n                }\r\n            }\r\n\r\n            // Add base classes\r\n            element.addClass(\"ui-bizagi-grid-wrapper\");\r\n            element.attr(\"data-bizagi-id\", options.id);\r\n\r\n            // Calculate\r\n            self.calculateKeyIndex();\r\n\r\n            //collapse state\r\n            self.collapseState = options.collapseState;\r\n\r\n            // Start waiting signal \r\n            self.startLoading(false);\r\n        },\r\n        /*\r\n        *   Method to start loading for ajax data and update the ui\r\n        */\r\n        startLoading: function (bUseTimeout) {\r\n            var self = this;\r\n            bUseTimeout = typeof (bUseTimeout) !== \"undefined\" ? bUseTimeout : true;\r\n\r\n            if (self.options.mode !== \"execution\" || typeof self.options.sortBy === \"undefined\") {\r\n                return;\r\n            }\r\n\r\n            // Draw the waiting template when the endLoading delays more than 250ms\r\n            var waitingFn = function () {\r\n                var element = self.element;\r\n                var options = self.options;\r\n\r\n                // Set null to timeout\r\n                self.waitingTimeout = null;\r\n\r\n                element.append($.fasttmpl(options.template.waiting));\r\n            };\r\n\r\n            if (bUseTimeout) {\r\n                self.waitingTimeout = setTimeout(waitingFn, 250);\r\n            } else {\r\n                waitingFn();\r\n            }\r\n        },\r\n\r\n        /*\r\n        *   Method to remove the loading message\r\n        */\r\n        endLoading: function () {\r\n            var self = this;\r\n            var element = self.element;\r\n\r\n            // Remove waiting timeout\r\n            if (self.waitingTimeout) {\r\n                clearTimeout(self.waitingTimeout);\r\n                self.waitingTimeout = null;\r\n            }\r\n\r\n            // Remove everything\r\n            element.empty();\r\n        },\r\n\r\n        /*\r\n        *   This method updates the data and refreshes the grid\r\n        */\r\n        setData: function (data) {\r\n            var self = this;\r\n\r\n            // Set internal data\r\n            self.data = data;\r\n            self.calculateKeyIndex();\r\n\r\n            // Call refresh\r\n            self.refresh();\r\n        },\r\n        /*\r\n        *   This method retrieves the actual data from the grid\r\n        */\r\n        getData: function () {\r\n            var self = this;\r\n\r\n            // Return internal data\r\n            return self.data;\r\n        },\r\n\r\n        /*\r\n        *   Calculate key index\r\n        */\r\n        calculateKeyIndex: function () {\r\n            var self = this;\r\n            var columns = self.options.columns;\r\n            var data = self.data;\r\n\r\n            indexedData = {};\r\n\r\n            if (data.rows) {\r\n                $.each(data.rows, function (i, row) {\r\n                    var key;\r\n                    var row\r\n                    $.each(columns, function (j, column) {\r\n                        if (column.key) key = row[j];\r\n                    });\r\n                    indexedData[key] = row;\r\n                });\r\n            }\r\n            self.indexedData = indexedData;\r\n        },\r\n\r\n        /*\r\n        *   This method retrieves the changes made by the user\r\n        */\r\n        getChanges: function () {\r\n        },\r\n\r\n        /*\r\n        *   This method refreshes the grid\r\n        */\r\n        refresh: function () {\r\n            var self = this;\r\n\r\n            // Cleans components\r\n            self._cleanComponents();\r\n            self._cleanButtons();\r\n\r\n            // Call the draw method\r\n            self.components = {};\r\n            self.draw();\r\n        },\r\n\r\n        /*\r\n        *   This method refreshes only the summary\r\n        */\r\n        refreshSummary: function (columnIndex) {\r\n            var self = this;\r\n            var options = self.options;\r\n            var summary = self._getComponent(\"summary\");\r\n\r\n            // Do nothing if the component is drawing or there is no summary\r\n            if (self.drawing) return;\r\n            if (!summary) return;\r\n\r\n            // Resolve summary\r\n            if (options.showSummary) {\r\n\r\n                if (columnIndex) {\r\n                    // Refresh an specific summary\r\n                    self.refreshSummaryCell(columnIndex);\r\n\r\n                } else {\r\n                    // Clean and re-draw summary\r\n                    summary.empty();\r\n                    summary.append(self.drawSummary());\r\n\r\n                    // Execute post-render\r\n                    self.postRenderSummary(summary);\r\n                }\r\n            }\r\n        },\r\n\r\n        /*\r\n        *   Refresh a single summary cell\r\n        */\r\n        refreshSummaryCell: function (columnIndex) {\r\n            var self = this;\r\n            var options = self.options;\r\n            var summary = self._getComponent(\"summary\");\r\n            var getCell = function (summary, columnIndex) {\r\n                var cells = summary.is(\"[data-bizagi-component=summary-cells]\") ? summary.children() : summary.find(\"[data-bizagi-component=summary-cells]\").children();\r\n                return $(cells[columnIndex]);\r\n            };\r\n            var cell = getCell(summary, columnIndex);\r\n\r\n            // Omit index key\r\n            var column = self.columnByIndex[columnIndex];\r\n            if (column.key) return; // Omit key column\r\n\r\n            // Clean and Execute render\r\n            var html = self.drawSummaryCell(column);\r\n            cell.replaceWith(html);\r\n\r\n            // Recalculate cell\r\n            cell = getCell(summary, columnIndex);\r\n\r\n            // Execute post-render\r\n            self.onCellReady(column, \"summary\", cell, false);\r\n        },\r\n\r\n        /*\r\n        *   This method changes a cell value in the grid\r\n        */\r\n        changeCellValue: function (key, columnIndex, value) {\r\n            var self = this;\r\n            if (self.indexedData[key]) {\r\n                self.indexedData[key][columnIndex] = value;\r\n            }\r\n        },\r\n\r\n        deleteCellExclusiveValues: function(columnIndex) {\r\n            var self = this;\r\n            if (self.indexedData) {\r\n                $.each(self.indexedData, function (key) {\r\n                    self.indexedData[key][columnIndex] = false;\r\n                });\r\n            }\r\n        },\r\n\r\n        /*\r\n        *   This method draws the full grid associated with the data\r\n        */\r\n        draw: function () {\r\n            var self = this;\r\n            var options = self.options;\r\n            var element = self.element;\r\n\r\n            // Start global drawing flag\r\n            self.drawing = true;\r\n\r\n            // Ends waiting signal\r\n            self.endLoading();\r\n\r\n            if (options.orientation === \"rtl\") {\r\n\r\n                // Resolve grid template\r\n                var html = $.fasttmpl(options.template.gridRtl, {\r\n                    label: options.title,\r\n                    buttonsPst: options.buttonsPst,\r\n                    collapse: options.collapse,\r\n                    collapseState: self.collapseState,\r\n                    isDesign: (options.mode === \"design\")\r\n                });\r\n\r\n            } else {\r\n                // Resolve grid template\r\n                var html = $.fasttmpl(options.template.grid, {\r\n                    label: options.title,\r\n                    buttonsPst: options.buttonsPst,\r\n                    collapse: options.collapse,\r\n                    collapseState: self.collapseState,\r\n                    isDesign: (options.mode === \"design\")\r\n                });\r\n            }\r\n\r\n            // Call sub-drawers\r\n            html = self.drawTable(html);\r\n            self.grid = $(html).appendTo(element);\r\n\r\n            // Post render the grid\r\n            self.postRender(self.grid);\r\n\r\n            if (options.mode !== \"design\") {\r\n                // Attach paginator desktop\r\n                self.attachPaginator();\r\n\r\n                // Attach handlers\r\n                self.attachHandlers();\r\n            }\r\n\r\n            if (options.mode === \"execution\" && options.floatingHeader) {\r\n                var $tableContainer = self._getComponent(\"table\");\r\n                var $table = $(\"table\", $tableContainer);\r\n                var offset = parseInt($(self.scrollableArea).css(\"padding-top\").replace(/[^\\d.]/g, '')) || 0;\r\n\r\n                $table.stickyTableHeaders({\r\n                    fixedOffset: offset > 0 ? offset - 1 : offset,\r\n                    scrollableArea: self.scrollableArea,\r\n                    zIndex: 1000,\r\n                    cacheHeaderHeight: true\r\n                });\r\n                $tableContainer.bind(\"scroll\", function () {\r\n                    $table.trigger(\"resize.stickyTableHeaders\");\r\n                });\r\n            }\r\n\r\n            // Toggle visibility depending from row count\r\n            if (self.data.rows.length === 0) {\r\n                self._getComponent(\"table\").hide();\r\n                self._getComponent(\"pager\").hide();\r\n                self._getButton(\"remove\").hide();\r\n                self._getButton(\"edit\").hide();\r\n                self._getComponent(\"dynamicPager\").hide();\r\n                self._getComponent(\"emptyTable\").show();\r\n\r\n            } else {\r\n                self._getComponent(\"table\").show();\r\n                self._getButton(\"remove\").show();\r\n                self._getButton(\"edit\").show();\r\n                self._getComponent(\"emptyTable\").hide();\r\n\r\n                if (options.actions.allowMore) {\r\n                    self._getComponent(\"dynamicPager\").show();\r\n                    self._getComponent(\"pager\").hide();\r\n                } else {\r\n                    self._getComponent(\"pager\").show();\r\n                    self._getComponent(\"dynamicPager\").hide();\r\n                }\r\n\r\n                if (options.actions.edit) {\r\n                    self._getButton(\"edit\").show();\r\n                }\r\n\r\n                if (options.actions.enableXlsExport || options.actions.enablePdfExport) {\r\n                    self._getButton('show-grid-export-options').show();\r\n                } else {\r\n                    self._getButton('show-grid-export-options').css('display', 'none');\r\n                }\r\n\r\n            }          \r\n\r\n            // End global drawing flag\r\n            self.drawing = false;\r\n        },\r\n\r\n        attachPaginator: function () {\r\n        },\r\n\r\n        /*\r\n        *   This method draws the table associated with the data\r\n        */\r\n        drawTable: function (html) {\r\n            var self = this;\r\n            var options = self.options;\r\n\r\n            // Resolve table template\r\n            var table = $.fasttmpl(options.template.table, {\r\n                showSummary: options.showSummary,\r\n                tableCssClass: options.tableCssClass,\r\n                orientation: options.orientation\r\n            });\r\n            var emptyTable = $.fasttmpl(options.template.emptyTable);\r\n\r\n            // Resolve header\r\n            table = self._replaceElement(table, \"columns\", self.drawHeader());\r\n\r\n            // Resolve body\r\n            table = self._replaceElement(table, \"rows\", self.drawBody());\r\n\r\n            // Resolve summary\r\n            if (options.showSummary) {\r\n                table = self._replaceElement(table, \"summary\", self.drawSummary());\r\n            }\r\n\r\n            // Resolve pager\r\n            html = self._replaceElement(html, \"pager\", self.drawPager());\r\n\r\n            // Resolve buttons\r\n            html = self._replaceElement(html, \"buttons\", self.drawButtons());\r\n\r\n            //Resolve export options menu\r\n            html = self._replaceElement(html, \"gridExportOptions\", self.drawGridExportOptions());\r\n\r\n            // Resolve row buttons\r\n            html = self._replaceElement(html, \"rowButtons\", self.drawRowButtons());\r\n\r\n            // Resolve dynamic Pager\r\n            html = self._replaceElement(html, \"dynamicPager\", self.drawDynamicPager());\r\n\r\n            // Perform grid replaces\r\n            html = self._replaceElement(html, \"table\", table);\r\n            html = self._replaceElement(html, \"emptyTable\", emptyTable);\r\n            return html;\r\n        },\r\n        /*\r\n        * Find if a column has a exact match for sort it\r\n        */\r\n        isExactMatch: function () {\r\n            var self = this;\r\n            var columns = self.options.columns;\r\n            var sortBy = self.options.sortBy;\r\n            var i = 0, length = columns.length;\r\n            for (; i < length;) {\r\n                if (sortBy == columns[i++].name) {\r\n                    return true;\r\n                }\r\n            }\r\n            return false;\r\n        },\r\n\r\n        /*\r\n        *   This method draws the grid header\r\n        */\r\n        drawHeader: function () {\r\n            var self = this;\r\n            var options = self.options;\r\n\r\n            // Resolve columns\r\n            var columns = \"\";\r\n\r\n            self.exactMatch = self.isExactMatch();\r\n\r\n            $.each(options.columns, function (i, column) {\r\n                if (self.options.maxColumns > 0) {\r\n                    if (i <= self.options.maxColumns) {\r\n                        // Draw normal column\r\n                        columns += self.drawColumn(column);\r\n                    }\r\n                } else {\r\n                    // Draw normal column\r\n                    columns += self.drawColumn(column);\r\n                }\r\n            });\r\n\r\n            if (self.options.maxColumns > 0 && self._canShowButtons()){\r\n                // Draw special column\r\n                columns += self.drawSpecialColumn();\r\n            }\r\n\r\n            return columns;\r\n        },\r\n\r\n        /*\r\n        *   This method draws a column header\r\n        */\r\n        drawColumn: function (column) {\r\n            var self = this;\r\n            var options = self.options;\r\n\r\n            var columnProperties = column.bizAgiProperties || {}\r\n            var cssClass = columnProperties.cssclass ? columnProperties.cssclass : \"\";\r\n            var headerStyles = (options.headerStyles ? options.headerStyles.header : \"\");\r\n            headerStyles += (headerStyles !== \"\" ? \"; text-align:\" : \"text-align:\") + (columnProperties.columntitlealign ? columnProperties.columntitlealign : \"center\");\r\n\r\n            // Resolve column template\r\n            return $.fasttmpl(options.template.column, $.extend({}, column, {\r\n                isKey: column.key,\r\n                sortActive: column.name === options.sortBy ? column.name === options.sortBy : column.name === options.sortBy.split(\".\")[0] && !self.exactMatch ? column.name === options.sortBy.split(\".\")[0] : false,\r\n                sortType: options.sortOrder,\r\n                tooltip: column.tooltip || \"\",\r\n                columnCssClass: cssClass,\r\n                headerLabelStyles: options.headerStyles ? options.headerStyles.label : \"\",\r\n                headerStyles: headerStyles\r\n            }));\r\n        },\r\n        /*\r\n        *   This method draws a special column header that will be drawn when the grid can't show more columns\r\n        */\r\n        drawSpecialColumn: function () {\r\n            var self = this;\r\n            var options = self.options;\r\n\r\n            // Resolve column template\r\n            return $.fasttmpl(options.template.specialColumn);\r\n        },\r\n\r\n        drawDynamicPager: function () {\r\n            var self = this;\r\n            var options = self.options;\r\n\r\n            // Resolve column template\r\n            return $.fasttmpl(options.template.dynamicPager);\r\n        },\r\n\r\n        /*\r\n        *   This method draws the table body\r\n        */\r\n        drawBody: function () {\r\n            var self = this;\r\n\r\n            // Resolve rows\r\n            var rows = \"\";\r\n            $.each(self.data.rows, function (i, row) {\r\n                rows += self.drawRow(row);\r\n            });\r\n\r\n            return rows;\r\n        },\r\n\r\n        /*\r\n        *   This method draws a grid row\r\n        */\r\n        drawRow: function (rowData, isNewRow) {\r\n            var self = this;\r\n            var options = self.options;\r\n            var key = rowData[self.columnKeyIndex];\r\n            var newRow = isNewRow || false;\r\n            var rnd = Math.floor(Math.random() * 10000);\r\n            var row = $.fasttmpl(options.template.row, {\r\n                key: rnd,\r\n                isNewRow: isNewRow,\r\n                businessKey: key\r\n            });\r\n\r\n            // Resolve cells\r\n            var cells = \"\";\r\n            $.each(rowData, function (i, cell) {\r\n                if (self.options.maxColumns > 0) {\r\n                    if (i < self.options.maxColumns + 1) {\r\n                        // Draw normal cell\r\n                        cells += self.drawCell(i, key, cell, newRow);\r\n                    } \r\n                } else {\r\n                    // Draw normal cell\r\n                    cells += self.drawCell(i, key, cell, newRow);\r\n                }\r\n            });\r\n\r\n            if (self.options.maxColumns > 0 && self._canShowRowButtons()){\r\n                // Draw special column\r\n                cells += self.drawSpecialCell(self.options.maxColumns + 1);\r\n            }\r\n\r\n            // Resolve cells template\r\n            row = self._replaceElement(row, \"cells\", cells);\r\n            return row;\r\n        },\r\n\r\n        /*\r\n        *   This method draws the cells for summary\r\n        */\r\n        drawSummary: function () {\r\n            var self = this;\r\n            var options = self.options;\r\n            var row = $.fasttmpl(options.template.summary);\r\n            var cells = \"\";\r\n\r\n            // Resolve summary cells\r\n            $.each(options.columns, function (i, column) {\r\n                if (self.options.maxColumns > 0) {\r\n                    if (i <= self.options.maxColumns) {\r\n                        // Draw summary column\r\n                        cells += self.drawSummaryCell(column);\r\n                    }\r\n                } else {\r\n                    // Draw summary column\r\n                    cells += self.drawSummaryCell(column);\r\n                }\r\n            });\r\n\r\n            // Resolve cells template\r\n            row = self._replaceElement(row, \"summary-cells\", cells);\r\n            return row;\r\n        },\r\n\r\n        /*\r\n        *   This method draws a single summary cell\r\n        */\r\n        drawSummaryCell: function (column) {\r\n            var self = this;\r\n            var options = self.options;\r\n\r\n            var columnProperties = column.bizAgiProperties || {};\r\n            var cellAlign = columnProperties.columnAlign ? columnProperties.columnAlign : \"center\";\r\n\r\n            // Resolve cell template\r\n            var cell = $.fasttmpl(options.template.summaryCell, {\r\n                hidden: column.hidden || false,\r\n                summarizeBy: column.summarizeBy,\r\n                cellAlign: cellAlign\r\n            });\r\n\r\n            var result = self.onDrawCell(column, \"summary\", self.calculateSummary(column), false);\r\n            result = (result != undefined && typeof (result) != \"number\") ? result.replace(\"summaryValue\", self.calculateSummary(column)) : result;\r\n\r\n            if (!result) {\r\n                result = \"\";\r\n            }\r\n\r\n            var async = typeof (result) === \"object\" && result.done;\r\n            if (async) {\r\n                if (result.state() === \"resolved\") {\r\n                    // Fetch resolved result\r\n                    cell = self._replaceElement(cell, \"cellContent\", self.resolveResult(result));\r\n                } else {\r\n                    // Wait for result\r\n                    cell = self._replaceElement(cell, \"cellContent\", \"\");\r\n                    self.asyncCells[key + \"-\" + columnIndex] = result;\r\n                }\r\n\r\n            } else {\r\n                // Resolve cell content\r\n                cell = self._replaceElement(cell, \"cellContent\", result);\r\n            }\r\n\r\n            return cell;\r\n        },\r\n\r\n        /*\r\n        *   This method draws the grid cell\r\n        */\r\n        drawCell: function (columnIndex, key, value, isNewRow) {\r\n            var self = this;\r\n            var options = self.options;\r\n            isNewRow = isNewRow || false;\r\n            var messageValidation = \"\";\r\n\r\n            // Ensure that data is mapped into a column\r\n            if (!self.columnByIndex[columnIndex]) {\r\n                return \"\";\r\n            }\r\n\r\n            // Get message\r\n            if (columnIndex > 0) {\r\n                messageValidation = self.columnByIndex[columnIndex].bizAgiProperties && self.columnByIndex[columnIndex].bizAgiProperties.messageValidation;\r\n            }\r\n\r\n            var columnProperties = self.columnByIndex[columnIndex].bizAgiProperties || {};\r\n            var cssClass = (columnProperties.cssclass) ? columnProperties.cssclass : \"\";\r\n            var cellAlign = columnProperties.columnAlign ? columnProperties.columnAlign : \"center\";\r\n\r\n            // Resolve cell template\r\n            var cell = $.fasttmpl(options.template.cell, {\r\n                isKey: self.columnByIndex[columnIndex].key,\r\n                hidden: options.columns[columnIndex].hidden || false,\r\n                isDesign: (options.mode === \"design\"),\r\n                messageValidation: messageValidation,\r\n                columnCssClass: cssClass,\r\n                id: options.columns[columnIndex].bizAgiProperties ? options.columns[columnIndex].bizAgiProperties.id : undefined,\r\n                cellAlign: cellAlign\r\n            });\r\n\r\n            var result = self.onDrawCell(self.columnByIndex[columnIndex], key, value, isNewRow);\r\n            if (!result) {\r\n                result = \"\";\r\n            }\r\n            var async = typeof (result) === \"object\" && result.done;\r\n            if (async) {\r\n                if (result.state() === \"resolved\") {\r\n                    // Fetch resolved result\r\n                    cell = self._replaceElement(cell, \"cellContent\", self.resolveResult(result));\r\n                } else {\r\n                    // Wait for result\r\n                    cell = self._replaceElement(cell, \"cellContent\", \"\");\r\n                    self.asyncCells[key + \"-\" + columnIndex] = result;\r\n                }\r\n\r\n            } else {\r\n                // Resolve cell content\r\n                cell = self._replaceElement(cell, \"cellContent\", result);\r\n            }\r\n\r\n            self.columnByIndex[columnIndex]['cell'] = $(cell);\r\n            return cell;\r\n        },\r\n        /*\r\n        *   Returns the resolved result from a promise when the promise has been executed already\r\n        */\r\n        resolveResult: function (promise) {\r\n            var result;\r\n\r\n            promise.done(function (data) {\r\n                result = data;\r\n            });\r\n\r\n            return result;\r\n        },\r\n        /*\r\n        *   This method draws a special cell that will be drawn when the grid can't show more columns\r\n        */\r\n        drawSpecialCell: function (columnIndex) {\r\n            var self = this;\r\n            var options = self.options;\r\n\r\n            /* // Ensure that data is mapped into a column\r\n            if (!self.columnByIndex[columnIndex]) {\r\n                return \"\";\r\n            } */\r\n\r\n            // Resolve cell template\r\n            var cell = $.fasttmpl(options.template.specialCell);\r\n\r\n            return cell;\r\n        },\r\n        /*\r\n        *   This method draws a group header\r\n        */\r\n        drawGroupHeader: function () {\r\n            // TODO: Implement for PC version\r\n        },\r\n        /*\r\n        *   This method draws a footer\r\n        */\r\n        drawFooter: function () {\r\n            // TODO: Implement for PC version\r\n        },\r\n        /*\r\n        *   This method draws a grid pager\r\n        */\r\n        drawPager: function () {\r\n            var self = this;\r\n            var options = self.options;\r\n\r\n            // Calculate pages\r\n            var pages = [];\r\n            for (var i = 1; i <= self.data.total; i++) {\r\n                pages.push({\r\n                    number: i,\r\n                    active: (i == self.data.page)\r\n                });\r\n            }\r\n\r\n            // Resolve pager template\r\n            return $.fasttmpl(options.template.pager, {\r\n                page: self.data.page,\r\n                pages: pages,\r\n                records: self.data.records\r\n            });\r\n        },\r\n        /*\r\n        *   This method draws a grid button actions\r\n        */\r\n        drawButtons: function () {\r\n            var self = this;\r\n            var options = self.options;\r\n            var tooltips = options.tooltips || {};\r\n\r\n            var parameters = $.extend(options.actions, tooltips);\r\n\r\n            if (self._canShowButtons()) {\r\n                // Resolve buttons template\r\n                if (options.orientation === \"rtl\") {\r\n                    return $.fasttmpl(options.template.buttonsRtl, parameters);\r\n                } else {\r\n                    return $.fasttmpl(options.template.buttons, parameters);\r\n                }\r\n            } else {\r\n                return \"\";\r\n            }\r\n        },\r\n\r\n        /*\r\n        * This method draws the export options menu\r\n        */\r\n        drawGridExportOptions: function () {\r\n            var self = this;\r\n            var options = self.options;\r\n            var actions = options.actions;\r\n\r\n            tooltips = options.tooltips || {};\r\n\r\n            var parameters = $.extend({ \r\n                enableXlsExport: actions.enableXlsExport,\r\n                enablePdfExport: actions.enablePdfExport \r\n            }, tooltips);\r\n\r\n            return $.fasttmpl(options.template.exportOptions, parameters);\r\n        },\r\n\r\n        /*\r\n        *   This method draws a row buttons,\r\n        *   those buttons will be invisible, and will be activated when the user selects a row\r\n        */\r\n        drawRowButtons: function () {\r\n            var self = this;\r\n            var options = self.options;\r\n\r\n            if (self._canShowRowButtons()) {\r\n                // Resolve row buttons template\r\n                if (options.orientation === \"rtl\") {\r\n                    return $.fasttmpl(options.template.rowButtons.rtl, options.actions);\r\n                } else {\r\n                    return $.fasttmpl(options.template.rowButtons, options.actions);\r\n                }\r\n            } else {\r\n                return \"\";\r\n            }\r\n        },\r\n        /*\r\n        *   Execute post-renders in all the grid\r\n        */\r\n        postRender: function () {\r\n            var self = this;\r\n            var options = self.options;\r\n\r\n            // Get grid rows\r\n            var rows = self._getComponent(\"cells\");\r\n            if (rows) {\r\n                $.each(rows, function (i, row) {\r\n                    row = $(row);\r\n                    self.postRenderRow(row);\r\n                });\r\n            }\r\n\r\n            // Get summary row\r\n            if (options.showSummary) {\r\n                var summary = self._getComponent(\"summary\");\r\n                self.postRenderSummary(summary);\r\n            }\r\n\r\n            self._triggerHandler(\"gridControlReady\");\r\n        },\r\n\r\n        /*\r\n        *   Execute post-renders in each cell after the element has been created\r\n        */\r\n        postRenderRow: function (row) {\r\n            var self = this;\r\n            var key = row.attr(\"data-business-key\");\r\n            var isNewRow = row.attr(\"data-new-row\");\r\n            var cells = row.is(\"[data-bizagi-component=cells]\") ? row.children() : row.find(\"[data-bizagi-component=cells]\").children();\r\n\r\n            $.each(cells, function (i, cell) {\r\n                var column = self.columnByIndex[i];\r\n                if (typeof column == \"undefined\" || column.key) return; // Omit key column\r\n\r\n                // Check if the cell has an async result\r\n                var asyncResult = self.asyncCells[key + \"-\" + column.index];\r\n                if (asyncResult) {\r\n                    $.when(asyncResult)\r\n                        .done(function (html) {\r\n                            // Append async result\r\n                            cell = $(cell);\r\n                            cell.append(html);\r\n                            self.onCellReady(column, key, cell, isNewRow);\r\n                        });\r\n                } else {\r\n                    self.onCellReady(column, key, $(cell), isNewRow);\r\n                }\r\n            });\r\n        },\r\n\r\n        /*\r\n        *   Execute post-renders in each summary cell after the element has been created\r\n        */\r\n        postRenderSummary: function (summary) {\r\n            var self = this;\r\n            var cells = summary.is(\"[data-bizagi-component=summary-cells]\") ? summary.children() : summary.find(\"[data-bizagi-component=summary-cells]\").children();\r\n\r\n            $.each(cells, function (i, cell) {\r\n                var column = self.columnByIndex[i];\r\n                if (column.key) return; // Omit key column\r\n\r\n                // Check if the cell has an async result\r\n                var asyncResult = self.asyncCells[key + \"-\" + column.index];\r\n                if (asyncResult) {\r\n                    $.when(asyncResult)\r\n                        .done(function (html) {\r\n                            // Append async result\r\n                            cell = $(cell);\r\n                            cell.append(html);\r\n                            self.onCellReady(column, \"summary\", cell, false);\r\n                        });\r\n                } else {\r\n                    self.onCellReady(column, \"summary\", $(cell), false);\r\n                }\r\n            });\r\n        },\r\n\r\n        /*\r\n        *   Method to attach any handler to the grid\r\n        */\r\n        attachHandlers: function () { },\r\n\r\n        //TODO IMPLEMENTANDO\r\n        selectDynamicPager: function () {\r\n            this.onDynamicPager();\r\n        },\r\n\r\n        /*\r\n        *   Changes the current page in the grid\r\n        */\r\n        changePage: function (page) {\r\n            var self = this;\r\n            var currentPage = Number(self.data.page);\r\n            var total = self.data.total;\r\n            var newPage = page;\r\n\r\n            // Process previous page\r\n            if (page === \"previous\") {\r\n                if (currentPage > 1) {\r\n                    newPage = currentPage - 1;\r\n                } else {\r\n                    return;\r\n                }\r\n            }\r\n\r\n            // Process next page\r\n            if (page === \"next\") {\r\n                if (currentPage < total) {\r\n                    newPage = currentPage + 1;\r\n                } else {\r\n                    return;\r\n                }\r\n            }\r\n\r\n            //refresh components cells and rows\r\n            self._cleanComponents();\r\n\r\n            // Update internal options\r\n            self.page = Number(newPage);\r\n\r\n            // Execute handler\r\n            self.onPageRequested();\r\n        },\r\n\r\n        /*\r\n        *  Verify cells before sumitonchange\r\n        */\r\n        isValid: function () {\r\n            // Trigger handler\r\n            return this._triggerHandler(\"isValid\");\r\n        },\r\n\r\n        /*\r\n        *   Sort the grid by a column\r\n        */\r\n        sortBy: function (columnIndex, sortType) {\r\n            var self = this;\r\n            var options = self.options;\r\n            var column = self.columnByIndex[columnIndex];\r\n\r\n            if (typeof options.sortBy === \"undefined\") {\r\n                return true;\r\n            }\r\n\r\n            // Set new sort type reversed to current, if the sort column has not changed\r\n            if (typeof (column.name) === \"undefined\") column.name = column.label;\r\n            if (column.name == options.sortBy) {\r\n                sortType = sortType || (options.sortOrder == \"asc\" ? \"desc\" : \"asc\");\r\n            } else {\r\n                if (column.name == options.sortBy.split(\".\")[0]) {\r\n                    sortType = sortType || (options.sortType == \"asc\" ? \"desc\" : \"asc\");\r\n                } else {\r\n                    sortType = sortType || options.sortType;\r\n                }\r\n            }\r\n\r\n            // Update internal options\r\n            if (options.sortBy.split(\".\").length > 1) {\r\n                if (options.sortBy.split(\".\")[0] != column.name) {\r\n                    options.sortBy = column.name;\r\n                } else {\r\n                    options.sortBy = column.name;\r\n                }\r\n            } else {\r\n                options.sortBy = column.name;\r\n            }\r\n\r\n            if (typeof (column.bizAgiProperties.sortAttribute) !== \"undefined\" && column.bizAgiProperties.type.indexOf(\"column\") !== -1) {\r\n                options.sortBy = column.name + \".\" + column.bizAgiProperties.sortAttribute;\r\n            }\r\n\r\n            options.sortColumn = column;\r\n            options.sortType = sortType;\r\n            options.sortOrder = sortType;\r\n\r\n            //refresh components cells and rows\r\n            self._cleanComponents();\r\n\r\n            // Execute handler\r\n            self.onSortRequested();\r\n        },\r\n\r\n        /*\r\n        *   Selects a row in the grid\r\n        */\r\n        selectRow: function (key, businessKey) {\r\n            var self = this;\r\n\r\n            if (self.selectedRow == key) {\r\n                // Invoke un-select handler\r\n                self.onRowUnselected();\r\n\r\n                // Update internal options\r\n                self.selectedRow = 0;\r\n                self.selectedBusinessKey = 0;\r\n            } else {\r\n                if (self.selectedRow != 0) {\r\n                    // Invoke un-select handler\r\n                    self.onRowUnselected();\r\n                }\r\n\r\n                // Update internal options\r\n                self.selectedRow = key;\r\n                self.selectedBusinessKey = businessKey;\r\n\r\n                // Invoke select handler\r\n                self.onRowSelected();\r\n            }\r\n        },\r\n\r\n        /*\r\n        *   Unselects a row in the grid\r\n        */\r\n        unselectRow: function () {\r\n            var self = this;\r\n\r\n            if (self.selectedRow != 0) {\r\n                // Invoke un-select handler\r\n                self.onRowUnselected();\r\n                self.selectedRow = 0;\r\n                self.selectedBusinessKey = 0;\r\n            }\r\n        },\r\n\r\n        /*\r\n        *   Calculates the summary for a column given the data\r\n        */\r\n        calculateSummary: function (column) {\r\n            var self = this;\r\n            var operation = column.summarizeBy;\r\n\r\n            //Consider the default values in the operations\r\n            $.each(self.data.rows, function (i, value) {\r\n                if (typeof self.data.rows[i][column.index] !== \"undefined\" && self.data.rows[i][column.index] == null && column.bizAgiProperties.defaultvalue != null) {\r\n                    self.data.rows[i][column.index] = column.bizAgiProperties.defaultvalue;\r\n                }\r\n            });\r\n            var columnValues = $.map(self.data.rows, function (row, i) { return row[column.index]; });\r\n            var result;\r\n\r\n            // Don't calculate anything if there are no rows\r\n            if (columnValues.length == 0) return 0;\r\n\r\n            // Resolve operations\r\n            if (operation === \"sum\") {\r\n                result = 0;\r\n                $.each(columnValues, function (i, value) { if (value != null) result += Number(value); });\r\n\r\n            } else if (operation === \"min\") {\r\n                result = columnValues[0] || 0;\r\n                $.each(columnValues, function (i, value) { if (typeof (value) === \"number\" && value != null && (value < result)) result = Number(value); });\r\n                if (result === Math.max()) result = null;\r\n\r\n            } else if (operation === \"max\") {\r\n                result = columnValues[0] || 0;\r\n                $.each(columnValues, function (i, value) { if (typeof (value) === \"number\" && value != null && (value > result)) result = Number(value); });\r\n                if (result === Math.min()) result = null;\r\n\r\n            } else if (operation === \"avg\") {\r\n                result = 0;\r\n                $.each(columnValues, function (i, value) { if (value != null) result += Number(value); });\r\n                result = result / columnValues.length;\r\n\r\n            } else if (operation === \"count\") {\r\n                result = 0;\r\n                columnValues = self.data.rows;\r\n\r\n                for (i = 0; i < columnValues.length; i++) {\r\n                    var columnValue = columnValues[i][column.index];\r\n\r\n                    if (columnValue instanceof Array && columnValue.length > 0) {\r\n                        result += 1;\r\n                    }\r\n                    else if (!(columnValue instanceof Array) && columnValue !== null && columnValue !== \"\") {\r\n                        result += 1;\r\n                    }\r\n                }\r\n            }\r\n            return result;\r\n        },\r\n\r\n        /*\r\n        *   Process an action in order to do something with the grid\r\n        */\r\n        processAction: function (action, params) {\r\n            var self = this;\r\n\r\n            var key = params && params.key ? params.key : self.selectedBusinessKey;\r\n            if (action === \"edit\") {\r\n                self.onEditRow(key);\r\n            }\r\n            if (action === \"remove\") {\r\n                self.onDeleteRow(key);\r\n            }\r\n            if (action === \"more\") {\r\n                self.onShowMore(key);\r\n            }\r\n            if (action === \"details\") {\r\n                self.onShowDetails(key);\r\n            }\r\n            if (action === \"add\") {\r\n                self.onAddRow();\r\n            }\r\n\r\n            if (action === \"show-grid-export-options\") {\r\n                self.onShowExportGridOptions();\r\n            }\r\n        },\r\n        /*\r\n        *   Executes the page requested handler\r\n        */\r\n        onPageRequested: function () {\r\n            var self = this;\r\n\r\n            // Start loading signal \r\n            self.startLoading();\r\n\r\n            // Trigger handler\r\n            return self._triggerHandler(\"pageRequested\", self._buildRefreshParameters());\r\n        },\r\n        /*\r\n        *   Executes the sort requested handler\r\n        */\r\n        onSortRequested: function () {\r\n            var self = this;\r\n\r\n            // Start loading signal \r\n            self.startLoading();\r\n\r\n            // Trigger handler\r\n            return self._triggerHandler(\"sortRequested\", self._buildRefreshParameters());\r\n        },\r\n        /*\r\n        *   Executes the row selected handler\r\n        */\r\n        onRowSelected: function () {\r\n            var self = this;\r\n\r\n            return self._triggerHandler(\"rowSelected\", { key: self.selectedBusinessKey });\r\n        },\r\n        /*\r\n        *   Executes the row un-selected handler\r\n        */\r\n        onRowUnselected: function () {\r\n            var self = this;\r\n            return self._triggerHandler(\"rowUnselected\", { key: self.selectedBusinessKey });\r\n        },\r\n\r\n        /*\r\n        * Executes collapse grid\r\n        */\r\n        onCollapseGrid: function () {\r\n            var self = this;\r\n            return self._triggerHandler(\"performCollapseGrid\");\r\n        },\r\n\r\n        //TODO:llamar\r\n        onDynamicPager: function () {\r\n            var self = this;\r\n            return self._triggerHandler(\"moreRows\", { key: self.selectedBusinessKey });\r\n        },\r\n\r\n        /*\r\n        *   Executes the on draw cell handler\r\n        */\r\n        onDrawCell: function (column, key, value, isNewRow) {\r\n            var self = this;\r\n            return self._triggerHandler(\"drawCell\", { \r\n                column: column,\r\n                key: key,\r\n                value: value,\r\n                isNewRow: isNewRow \r\n            });\r\n        },\r\n        /*\r\n        *   Executes on cell ready handler\r\n        */\r\n        onCellReady: function (column, key, cell, isNewRow) {\r\n            var self = this;\r\n            return self._triggerHandler(\"cellReady\", { \r\n                column: column,\r\n                key: key,\r\n                cell: cell,\r\n                isNewRow: isNewRow \r\n            });\r\n        },\r\n\r\n        /*\r\n        *   Executes the on draw control handler\r\n        */\r\n        onDrawControl: function () {\r\n            //TODO: Implement this\r\n        },\r\n        /*\r\n        *   Executes the on draw group header handler\r\n        */\r\n        onDrawGroupHeader: function () {\r\n            //TODO: Implement this\r\n        },\r\n        /*\r\n        *   Executes the on add row handler\r\n        */\r\n        onAddRow: function () {\r\n            var self = this;\r\n            return self._triggerHandler(\"addRow\");\r\n        },\r\n        /*\r\n        *   Executes the on edit row handler\r\n        */\r\n        onEditRow: function (key) {\r\n            var self = this;\r\n            return self._triggerHandler(\"editRow\", { key: key });\r\n        },\r\n        /*\r\n        *   Executes the on delete row handler\r\n        */\r\n        onDeleteRow: function (key) {\r\n            var self = this;\r\n            return self._triggerHandler(\"deleteRow\", { key: key });\r\n        },\r\n        /*\r\n        *   Executes the on show more handler\r\n        */\r\n        onShowMore: function (key) {\r\n            var self = this;\r\n            return self._triggerHandler(\"showMore\", { key: key });\r\n        },\r\n        /*\r\n        *   Executes the on show details handler\r\n        */\r\n        onShowDetails: function (key) {\r\n            var self = this;\r\n            return self._triggerHandler(\"showFormDetails\", { key: key });\r\n        },\r\n        /*\r\n        * Executes the on show export grid options \r\n        */\r\n        onShowExportGridOptions: function () {\r\n            var self = this;\r\n            return self._triggerHandler(\"showGridExportOptions\");\r\n        },\r\n\r\n        /*\r\n        *   Replaces a matched element in the container for the specified \"replace\" element\r\n        */\r\n        _replaceElement: function (html, element, replace) {\r\n            return html.replaceFirstWithoutPatterns(\"{{element \" + element + \"}}\", replace);\r\n        },\r\n\r\n        /*\r\n        *   Return the event handler parameters object\r\n        */\r\n        _buildRefreshParameters: function () {\r\n            var self = this;\r\n            var options = self.options;\r\n            var sortColumn = (options.sortColumn != undefined) ? options.sortColumn.index : 1;\r\n            return { \r\n                page: self.page,\r\n                sortBy: options.sortBy,\r\n                sortType: options.sortOrder,\r\n                sortColumnIndex: sortColumn\r\n            };\r\n        },\r\n        /*\r\n        *   Calls directly to handler callback\r\n        */\r\n        _triggerHandler: function (type, data) {\r\n            var callback = this.options[type];\r\n            if (!callback) {\r\n                return null;\r\n            }\r\n            return callback.call(this.element[0], data);\r\n        },\r\n        /*\r\n        *   Gets the component\r\n        */\r\n        _getComponent: function (component) {\r\n            var self = this;\r\n            var element = self.element;\r\n            if (!self.components[component]) {\r\n                var foundComponent = $(\"[data-bizagi-component=\" + component + \"]\", element);\r\n                if (foundComponent != null && foundComponent.length > 0) {\r\n                    self.components[component] = foundComponent;\r\n                }\r\n            }\r\n            return self.components[component];\r\n        },\r\n        /*\r\n        *   Gets the specific Button\r\n        */\r\n        _getButton: function (button) {\r\n            var self = this;\r\n            var element = self.element;\r\n            if (!self.buttons[button])\r\n                self.buttons[button] = $(\"[data-action=\" + button + \"]\", element);\r\n            return self.buttons[button];\r\n        },\r\n        /*\r\n        * Cleans the components \r\n        */\r\n        _cleanComponents: function () {\r\n            var self = this;\r\n            self.components = {};\r\n        },\r\n        /*\r\n        * Cleans the buttons \r\n        */\r\n        _cleanButtons: function () {\r\n            var self = this;\r\n            self.buttons = {};\r\n        },\r\n        /*\r\n        *  Template method to check if buttons component must be rendered\r\n        */\r\n        _canShowButtons: function () {\r\n            return true;\r\n        },\r\n        /*\r\n        *  Template method to check if row buttons must be displayed when the row is selected\r\n        */\r\n        _canShowRowButtons: function(){\r\n            return true;\r\n        }\r\n\r\n    });\r\n})(jQuery);\r\n","/**\r\n *   Name:\r\n *   Author: Diego Parra\r\n *   Comments:\r\n *   -   This widget will extend the bizagi grid widget to specialize into a desktop view\r\n *\r\n *   Markup: <div></div>\r\n *\r\n *   Styles:\r\n *   - css/bizagi/desktop/controls/bizagi.grid.css\r\n */\r\n\r\n(function ($) {\r\n    $.widget('ui.bizagi_grid_desktop', $.ui.bizagi_grid, {\r\n        options: $.extend($.ui.bizagi_grid.prototype.options, {\r\n            smartPagination: false\r\n        }),\r\n\r\n        /**\r\n         * Add event handlers\r\n         * @returns {}\r\n         */\r\n        attachHandlers: function () {\r\n            var self = this;\r\n\r\n            // Add paging events\r\n            self._getComponent(\"pager\").find(\"ul li:not(.prev):not(.next)\").bind(\"click\", function (e) {\r\n\r\n                if (e.isPropagationStopped()) {\r\n                    return;\r\n                }\r\n\r\n                e.stopPropagation();\r\n\r\n                var pageNumber = $(this).data(\"page\");\r\n                if (self.isValid()) {\r\n                    self.changePage(pageNumber);\r\n                }\r\n\r\n            });\r\n\r\n            // DynamicPager behavior\r\n            self._getComponent(\"dynamicPager\").find(\"input\").bind(\"click\", function () {\r\n                self.selectDynamicPager();\r\n            });\r\n\r\n            self._getComponent(\"header\").on(\"click\", function () {\r\n\r\n                if ($(this).hasClass(\"bz-rn-grid-header-collapse\") && self.options.mode === \"execution\") {\r\n                    self.onCollapseGrid();\r\n                }\r\n\r\n            });\r\n\r\n            // Add sort events if doent have exclusive check\r\n            \r\n            self._getComponent(\"columns\").find(\".ui-bizagi-grid-column\").bind(\"click\", function () {\r\n                \r\n                var columnIndex = $(this).attr(\"data-column-index\");\r\n                var xpath;\r\n\r\n                try {\r\n                    xpath = (columnIndex >= 0 && self.columnByIndex[columnIndex].bizAgiProperties.xpath) ? self.columnByIndex[columnIndex].bizAgiProperties.xpath : false;\r\n                } catch (e) {\r\n                    return;\r\n                }\r\n\r\n                if (typeof bizagi.context.isOfflineForm === \"undefined\" || !bizagi.context.isOfflineForm && xpath) {\r\n                    self.onSaveAddedRows();\r\n                    self.sortBy(columnIndex);\r\n\r\n                    $(this).unbind(\"click\");\r\n\r\n                    //Execute cancel edition\r\n                    self.onCancelEdition();\r\n                }\r\n            });\r\n            \r\n\r\n            // Add selection events\r\n            self._getComponent(\"rows\").find(\"tr\").bind(\"click\", function () {\r\n                var key = $(this).attr(\"data-key\");\r\n                var businessKey = $(this).attr(\"data-business-key\");\r\n\r\n                self.selectRow(key, businessKey);\r\n            }).bind(\"dblclick\",  function () {\r\n                var key = $(this).attr(\"data-key\");\r\n                var businessKey = $(this).attr(\"data-business-key\");\r\n\r\n                self._triggerHandler(\"rowdblclick\", {key: key, businessKey: businessKey});\r\n            });            \r\n\r\n            // Bind button actions\r\n            self._getComponent(\"buttons\").find(\"[data-action]\").bind(\"click\", function () {\r\n                self.processAction($(this).attr(\"data-action\"));\r\n                self.unselectRow();\r\n            });\r\n\r\n            //Grid Export Events\r\n            if (self.options.actions.enableXlsExport || self.options.actions.enablePdfExport) {              \r\n                var className = self.options.orientation == \"rtl\" ? \".ui-bizagi-grid-export-options-content-rtl\" : \".ui-bizagi-grid-export-options-content\";\r\n\r\n                var gridExportOptionsContent = (self._getComponent(\"gridExportOptions\").find(className));\r\n\r\n                self._getComponent(\"gridExportOptions\").find(\"[data-action]\").bind(\"click\", function () {\r\n                    self.processAction($(this).attr(\"data-action\"));\r\n                    self.unselectRow();\r\n                });\r\n\r\n                //bind mouseleave event just in desktop app\r\n                self._getComponent(\"gridExportOptions\").mouseleave(function () {\r\n                    gridExportOptionsContent.addClass('hidden');\r\n                });\r\n\r\n                if (self.options.actions.enableXlsExport) {\r\n\r\n                    self._getComponent(\"gridExportOptions\").find('#print-grid-xls').click(function (e) {\r\n                        self._triggerHandler(\"performExportGrid\", {disposition: \"attachment\", exportType: \"xlsExport\"});\r\n\r\n                        gridExportOptionsContent.hide();\r\n                    });\r\n\r\n                }\r\n\r\n                if (self.options.actions.enablePdfExport) {\r\n                    self._getComponent(\"gridExportOptions\").find('#print-grid-pdf').click(function (e) {\r\n                        self._triggerHandler(\"performExportGrid\", {disposition: \"inline\", exportType: \"pdfExport\"});\r\n\r\n                        gridExportOptionsContent.hide();\r\n                    });\r\n                }\r\n            }\r\n\r\n            // Add selection events for thw draft rows\r\n            self._getComponent(\"rows\").on(\"delete-row\", \"tr[data-new-row='true']\", function (evt) {\r\n                var key = $(this).attr(\"data-key\");\r\n                var businessKey = $(this).attr(\"data-business-key\");\r\n\r\n                self._deleteDraft(key, businessKey);\r\n            });\r\n\r\n            // Add tooltips to header\r\n            var columnComponent = self._getComponent(\"columns\").find(\"th > div[title!='']\");\r\n            if (columnComponent && columnComponent.length) {\r\n                columnComponent.tooltip();\r\n            }\r\n\r\n        },\r\n\r\n        /**\r\n         * Template method to check if buttons component must be rendered\r\n         * @returns {}\r\n         */\r\n        _canShowButtons: function () {\r\n            var actions = this.options.actions;\r\n\r\n            return actions[\"add\"] || actions[\"remove\"] || actions[\"edit\"] || actions[\"inlineAdd\"] || actions[\"details\"] || actions[\"enablePdfExport\"] || actions[\"enableXlsExport\"];\r\n        },\r\n        /**\r\n         * Process an action in order to do something with the grid\r\n         * @param {} action\r\n         * @returns {}\r\n         */\r\n        processAction: function (action) {\r\n            // Call base\r\n            $.ui.bizagi_grid.prototype.processAction.apply(this, arguments);\r\n\r\n            if (action == \"save\") {\r\n                this.onSaveAddedRows();\r\n            }\r\n            if (action == \"cancel\") {\r\n                this.onCancelEdition();\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Events to paginator\r\n         * @returns {}\r\n         */\r\n        attachPaginator: function () {\r\n            var self = this;\r\n\r\n            //Append navigation buttons for the pager\r\n            if (self.options.smartPagination) {\r\n\r\n                if (self.data.total > 1) {\r\n\r\n                    var ul = self._getComponent(\"pager\").find(\"ul\");\r\n\r\n                    // Create pagination control \r\n                    ul.bizagiGridPagination({\r\n                        maxElemShow: 50,\r\n                        totalPages: self.data.total,\r\n                        actualPage: self.data.page,\r\n                        listElement: ul,\r\n                        scrolledHover: true\r\n                    });\r\n                } else {\r\n                    //Makes room to other elements in the grid footer\r\n                    self._getComponent(\"pager\").parent().hide();\r\n                }\r\n            } else {\r\n                if (self.data.total <= 1) {\r\n                    //Makes room to other elements in the grid footer\r\n                    self._getComponent(\"pager\").parent().hide();\r\n                }\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Draw Pagination Grid\r\n         * @returns {}\r\n         */\r\n        drawPager: function () {\r\n            var self = this;\r\n            var options = self.options;\r\n            var pdata = {};\r\n            \r\n            if (self.options.smartPagination) {\r\n                var nElemToShow = 10;\r\n\r\n                pdata.pagination = (self.data.total > 1) ? true : false;\r\n                pdata.page = self.data.page;\r\n\r\n                if (self.options.orientation == \"rtl\" && self.data.rows.length > 0) {\r\n                    // set total pages\r\n                    pdata.pages = {};\r\n\r\n                    var pageToshow = (nElemToShow > self.data.total) ? self.data.total : nElemToShow;\r\n                    var pageToshowRtl = pageToshow;\r\n\r\n                    for (var i = 1; i <= pageToshow; i++) {\r\n                        pdata.pages[i] = {\"pageNumber\": pageToshowRtl};\r\n                        pageToshowRtl--;\r\n                    }\r\n\r\n                } else {\r\n                    // set total pages\r\n                    pdata.pages = {};\r\n                    var pageToshow = (nElemToShow > self.data.total) ? self.data.total : nElemToShow;\r\n\r\n                    for (var i = 1; i <= pageToshow; i++) {\r\n                        pdata.pages[i] = {\"pageNumber\": i};\r\n                    }\r\n                }\r\n\r\n                // Set style pagination\r\n                pdata[\"gridPagination\"] = \"gridCasePagination\";\r\n                pdata.previousPage = (self.data.page > 1) ? self.data.page - 1 : 1;\r\n                pdata.nextPage = (self.data.page < self.data.total) ? self.data.page + 1 : self.data.total;\r\n                pdata.totalPages = self.data.total;\r\n\r\n                return $.fasttmpl(options.template.pager, pdata);\r\n            } else {\r\n                // Call base\r\n                return $.ui.bizagi_grid.prototype.drawPager.apply(self, arguments);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Add inline row\r\n         * @returns {}\r\n         */\r\n        addInlineRow: function () {\r\n            var self = this;\r\n\r\n            // Draw the new row\r\n            self._triggerHandler(\"beforeInlineAdd\");\r\n            var html = self.drawRow(self.createAddRowData(), true);\r\n            var newRow = $(html);\r\n\r\n            // Execute the postrender\r\n            self.postRenderRow(newRow);\r\n\r\n            // Append to rows component\r\n            self._getComponent(\"rows\").append(newRow);\r\n\r\n            // Show save and cancel buttons\r\n            var buttons = self._getComponent(\"buttons\");\r\n            buttons.find(\"[data-action=save]\").css(\"display\", \"inline-block\");\r\n            buttons.find(\"[data-action=cancel]\").css(\"display\", \"inline-block\");\r\n            buttons.find(\"[data-action=remove]\").css(\"display\", \"none\");\r\n\r\n            // Show table component if there are no rows\r\n            if (self.data.rows.length == 0) {\r\n                self._getComponent(\"table\").show();\r\n                self._getComponent(\"emptyTable\").hide();\r\n            }\r\n\r\n            self._triggerHandler(\"afterInlineAdd\");\r\n        },\r\n\r\n        /**\r\n         * Creates a dummy data for the new row\r\n         * @returns {}\r\n         */\r\n        createAddRowData: function () {\r\n            var self = this;\r\n            var options = self.options;\r\n            var row = [];\r\n\r\n            $.each(options.columns, function (i) {\r\n\r\n                if (i == self.columnKeyIndex) {\r\n                    // Add random key so we can identify them later\r\n                    var key = Math.ceil(Math.random() * 100000);\r\n                    row.push(key);\r\n                } else {\r\n                    // Add null value\r\n                    row.push(null);\r\n                }\r\n\r\n            });\r\n\r\n            return row;\r\n        },\r\n\r\n        /**\r\n         * Executes the on add row handler\r\n         * @returns {}\r\n         */\r\n        onAddRow: function () {\r\n            var self = this;\r\n\r\n            // Allow add\r\n            if (self.options.actions.add) {\r\n                if (self.options.actions.inlineAdd) {\r\n                    return self.addInlineRow();\r\n                } else {\r\n                    // Open dialog with addform\r\n                    self.options.addFormDialog = self.options.addFormDialog || {};\r\n                    return self._triggerHandler(\"addRow\", self.options.addFormDialog);\r\n                }\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Executes when the user presses the cancel button, after inline add edition\r\n         * @returns {}\r\n         */\r\n        onCancelEdition: function () {\r\n            var self = this;\r\n\r\n            // Remove zero key rows\r\n            var rows = self._getComponent(\"rows\").find(\"[data-new-row]\");\r\n            rows.detach();\r\n\r\n            // Hide buttons\r\n            var buttons = self._getComponent(\"buttons\");\r\n            buttons.find(\"[data-action=save]\").hide();\r\n            buttons.find(\"[data-action=cancel]\").hide();\r\n\r\n            // Show table component if there are no rows\r\n            if (self.data.rows.length == 0) {\r\n                self._getComponent(\"table\").hide();\r\n                self._getComponent(\"emptyTable\").show();\r\n            } else {\r\n                buttons.find(\"[data-action=remove]\").css(\"display\", \"inline-block\");\r\n            }\r\n\r\n            return self._triggerHandler(\"cancelEdition\", {keys: self.getNewRowKeys(rows)});\r\n        },\r\n        /**\r\n         * Executes when the user presses the save button, after inline add edition\r\n         * @returns {}\r\n         */\r\n        onSaveAddedRows: function () {\r\n            var self = this;\r\n\r\n            // Retrieve key of added rows\r\n            var newRowKeys = self.getNewRowKeys();\r\n            var buttons = self._getComponent(\"buttons\");\r\n\r\n            // Hide buttons         \r\n            if (newRowKeys.length >= 1 && self.isValid()) {\r\n                buttons.find(\"[data-action=save]\").hide();\r\n                buttons.find(\"[data-action=cancel]\").hide();\r\n                buttons.find(\"[data-action=remove]\").css(\"display\", \"inline-block\");\r\n\r\n                if (typeof bizagi.context.isOfflineForm === \"undefined\" || !bizagi.context.isOfflineForm) {\r\n                    self._triggerHandler(\"saveAddedRows\", {keys: newRowKeys});\r\n                    return self._triggerHandler(\"removeNewRecords\", {keys: newRowKeys});\r\n                } else {\r\n                    return true;\r\n                }\r\n            } else {\r\n                return;\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Select row\r\n         * @returns {}\r\n         */\r\n        onRowSelected: function () {\r\n            // Call base\r\n            $.ui.bizagi_grid.prototype.onRowSelected.apply(this, arguments);\r\n\r\n            // Add selected style to row\r\n            var tr = this.element.find(\"[data-bizagi-component=rows] tr[data-key=\" + this.selectedRow + \"]\");\r\n            tr.addClass(\"ui-bizagi-state-selected\");\r\n        },\r\n\r\n        /**\r\n         * Unselect row\r\n         * @returns {}\r\n         */\r\n        onRowUnselected: function () {\r\n            // Call base\r\n            $.ui.bizagi_grid.prototype.onRowUnselected.apply(this, arguments);\r\n\r\n            // Hide row buttons\r\n            var tr = this._getComponent(\"rows\").find(\"tr[data-key=\" + this.selectedRow + \"]\");\r\n            tr.removeClass(\"ui-bizagi-state-selected\");\r\n        },\r\n\r\n        /**\r\n         * Return the new created ids\r\n         * @param {} rows\r\n         * @returns {}\r\n         */\r\n        getNewRowKeys: function (rows) {\r\n            rows = rows || this._getComponent(\"rows\").find(\"[data-new-row=true]\");\r\n\r\n            return $.map(rows, function (row, i) {\r\n                return $(row).data(\"business-key\");\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Collapse Grid\r\n         * @returns {}\r\n         */\r\n        onCollapseGrid: function () {\r\n            $.ui.bizagi_grid.prototype.onCollapseGrid.apply(this, arguments);\r\n        },\r\n\r\n        /**\r\n         * Return cell object\r\n         * @param {} key\r\n         * @param {} xpath\r\n         * @param {} index\r\n         * @returns {}\r\n         */\r\n        getCell: function (key, xpath, index) {\r\n            var row = this._getComponent(\"rows\").find(\"[data-business-key=\" + key + \"]\");\r\n            var allVisibleTd = $(\"td:visible\", $(row));\r\n            var cell = allVisibleTd[index];\r\n\r\n            return $(cell);\r\n        },\r\n\r\n        /**\r\n         * Return cell header object\r\n         * @param {} index\r\n         * @returns {}\r\n         */\r\n        getCellHeader: function (index) {\r\n            var rowHeader = this._getComponent(\"columns\");\r\n            var allVisibleTd = $(\"td:visible\", $(rowHeader));\r\n            var cell = allVisibleTd[index];\r\n\r\n            return $(cell);\r\n        },\r\n\r\n        /**\r\n         * Check if row its new\r\n         * @param {} businessKey\r\n         * @returns {}\r\n         */\r\n        isNewRecord: function (businessKey) {\r\n            var row = this._getComponent(\"rows\");\r\n\r\n            if (row) {\r\n                var businessKey = row.find(\"[data-business-key='\" + businessKey + \"']\");\r\n\r\n                if ($(businessKey).data('new-row')) {\r\n                    return true;\r\n                }\r\n            }\r\n\r\n            return false;\r\n        },\r\n\r\n        /**\r\n         * This method allows update the collapse state\r\n         * @param {} collapseState\r\n         * @returns {}\r\n         */\r\n        updateCollapseState: function (collapseState) {\r\n            this.collapseState = collapseState;\r\n        },\r\n\r\n        /**\r\n         * Delete the draft row selected\r\n         * @param {} item\r\n         * @returns {}\r\n         */\r\n        _deleteDraft: function (key, businessKey) {\r\n            var self = this;\r\n\r\n            // Retrieve key of added rows\r\n            var newRowKeys = self.getNewRowKeys();\r\n\r\n            // Hide buttons         \r\n            if (newRowKeys.length > 1) {\r\n                var draftRow = self.getDraftRow(businessKey);\r\n                draftRow.detach();\r\n\r\n                // Remove pending changes of draft rows\r\n                if (self.changes && self.changes[key]) {\r\n                    delete self.changes[key];\r\n                }\r\n\r\n                // Remove draft rows\r\n                if (self.newRecords && self.newRecords[key]) {\r\n                    delete self.newRecords[key];\r\n                }\r\n\r\n                self._triggerHandler(\"removeNewRecords\", { keys: [businessKey] });\r\n\r\n            } else {\r\n                self.onCancelEdition();\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Get current draft row\r\n         * @param {} key\r\n         * @returns {}\r\n         */\r\n        getDraftRow: function (businessKey) {\r\n            var row = this._getComponent(\"rows\").find(\"[data-business-key=\" + businessKey + \"]\");\r\n\r\n            return $(row);\r\n        }\r\n\r\n    });\r\n\r\n})(jQuery);","/*\r\n*   Name:\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*   -   This widget will extend the bizagi grid widget to specialize into a desktop view\r\n*\r\n*   Markup: <div></div>\r\n*\r\n*   Styles:\r\n*   - css/bizagi/desktop/controls/bizagi.grid.css\r\n*/\r\n\r\n(function ($) {\r\n    $.widget('ui.bizagi_grid_grouped_desktop', $.ui.bizagi_grid_desktop, {\r\n        options: $.extend($.ui.bizagi_grid.prototype.options, {\r\n            smartPagination: false\r\n        }),\r\n\r\n        /*\r\n        *   This method draws the table body\r\n        */\r\n        drawBody: function () {\r\n            var self = this;\r\n            self.groupByValues = {};\r\n            self.groupByPreviousValues = {};\r\n            self.rowsGroupData = {};\r\n            self.summaryGroup = 0;\r\n\r\n            // Resolve rows\r\n            self.rows = \"\";\r\n            $.each(self.data.rows, function (i, row) {\r\n                if (self.isNewGroup(row)) {\r\n                    // Resolve summary\r\n                    if (self.isNewSummarygroup()) {\r\n                        self.drawSummaryRows(row);\r\n                    }\r\n\r\n                    self.rows += self.drawGroupingRows(row, false);\r\n                }\r\n\r\n                self.addRowGroupData(row);\r\n                self.rows += self.drawRow(row);\r\n            });\r\n\r\n            //Replace totalizer value\r\n            self.groupByValues = {};\r\n            $.each(self.data.rows, function (i, row) {\r\n                 self.drawGroupingRows(row, true);\r\n            });\r\n\r\n            return self.rows;\r\n        },\r\n\r\n        /*\r\n        *   This method draws the table associated with the data\r\n        */\r\n        drawTable: function (html) {\r\n            var self = this;\r\n            var options = self.options;\r\n\r\n            // Resolve table template\r\n            var table = $.fasttmpl(options.template.table, {\r\n                showSummary: options.showSummary,\r\n                tableCssClass: options.tableCssClass,\r\n                groupByColumns: options.groupByColumns || []\r\n            });\r\n            var emptyTable = $.fasttmpl(options.template.emptyTable);\r\n\r\n            // Resolve header\r\n            table = self._replaceElement(table, \"columns\", self.drawHeader());\r\n\r\n            // Resolve body\r\n            table = self._replaceElement(table, \"rows\", self.drawBody());\r\n\r\n            // Resolve summary\r\n            if (options.showSummary) {\r\n                table = self._replaceElement(table, \"summary\", self.drawSummary());\r\n            }\r\n\r\n            // Resolve pager\r\n            html = self._replaceElement(html, \"pager\", self.drawPager());\r\n\r\n            // Resolve buttons\r\n            html = self._replaceElement(html, \"buttons\", self.drawButtons());\r\n\r\n            //Resolve export options menu\r\n            html = self._replaceElement(html, \"gridExportOptions\", self.drawGridExportOptions());\r\n\r\n            // Resolve row buttons\r\n            html = self._replaceElement(html, \"rowButtons\", self.drawRowButtons());\r\n\r\n            // Resolve dynamic Pager\r\n            html = self._replaceElement(html, \"dynamicPager\", self.drawDynamicPager());\r\n\r\n            // Perform grid replaces\r\n            html = self._replaceElement(html, \"table\", table);\r\n            html = self._replaceElement(html, \"emptyTable\", emptyTable);\r\n            return html;\r\n        },\r\n\r\n        /*\r\n        *   This method draws a column header\r\n        */\r\n        drawColumn: function (column) {\r\n            var self = this;\r\n            var options = self.options;\r\n\r\n            var columnProperties = column.bizAgiProperties || {}\r\n            var cssClass = columnProperties.cssclass ? columnProperties.cssclass : \"\";\r\n            var headerStyles = options.headerStyles ? options.headerStyles.header : \"\";\r\n            headerStyles += (headerStyles !== \"\" ? \"; text-align:\" : \"text-align:\") + (columnProperties.columntitlealign ? columnProperties.columntitlealign : \"center\");\r\n\r\n            if (self.showColumn(column)) {\r\n                // Resolve column template\r\n                return $.fasttmpl(options.template.column, $.extend({}, column, {\r\n                    sortActive: column.name == options.sortBy ? column.name == options.sortBy : column.name == options.sortBy.split(\".\")[0] && !self.exactMatch ? column.name == options.sortBy.split(\".\")[0] : false,\r\n                    sortType: options.sortOrder,\r\n                    columnCssClass: cssClass,\r\n                    headerLabelStyles: options.headerStyles ? options.headerStyles.label : '',\r\n                    headerStyles: headerStyles\r\n                }));\r\n            } else {\r\n                return \"\";\r\n            }\r\n        },\r\n\r\n        /*\r\n        *   This method draws a grid row\r\n        */\r\n        drawRow: function (rowData, isNewRow) {\r\n            var self = this;\r\n            var options = self.options;\r\n            var key = rowData[self.columnKeyIndex];\r\n            var groupByColumns = options.groupByColumns ? options.groupByColumns.length : 0;\r\n            var newRow = isNewRow || false;\r\n            var rnd = Math.floor(Math.random() * 10000);\r\n            var row = $.fasttmpl(options.template.row, {\r\n                key: rnd,\r\n                isNewRow: isNewRow,\r\n                businessKey: key\r\n            });\r\n\r\n            row = self._replaceElement(row, \"empty-cells\", self.drawEmptyCells({ cells: groupByColumns, conectorV: true }));\r\n\r\n            // Resolve cells\r\n            var cells = \"\";\r\n            var bSpecialCellAdded = false;\r\n            $.each(rowData, function (i, cell) {\r\n                if (bSpecialCellAdded) {\r\n                    return;\r\n                }\r\n\r\n                if (self.options.maxColumns > 0) {\r\n                    if (i < self.options.maxColumns + 1) {\r\n                        // Draw normal cell\r\n                        cells += self.drawCell(i, key, cell, newRow);\r\n                    } else {\r\n                        // Draw special cell\r\n                        cells += self.drawSpecialCell(i, key, cell);\r\n                        bSpecialCellAdded = true;\r\n                    }\r\n                } else {\r\n                    // Draw normal cell\r\n                    cells += self.drawCell(i, key, cell, newRow);\r\n                }\r\n            });\r\n\r\n            // Resolve cells template\r\n            row = self._replaceElement(row, \"cells\", cells);\r\n            return row;\r\n        },\r\n\r\n\r\n        /*\r\n        *   This method draws the grid cell\r\n        */\r\n        drawCell: function (columnIndex, key, value, isNewRow) {\r\n            var self = this;\r\n\r\n            if (self.showColumn(self.columnByIndex[columnIndex])) {\r\n                return self._super(columnIndex, key, value, isNewRow);\r\n            }\r\n\r\n            return \"\";\r\n        },\r\n        /*\r\n        * This method draws the rows of grouping\r\n        */\r\n        drawGroupingRows: function (row, drawTotalizer) {\r\n            var self = this;\r\n            var levels = self.getGroupLevels(row);\r\n            var rows = \"\";\r\n\r\n            if(drawTotalizer)self.setGroupByValues(row);\r\n\r\n            for (var i = 0, l = levels.length; i < l; i++) {\r\n                var level = levels[i];\r\n                rows += self.drawGroupRow(level.deep, l - i, level.position, row, drawTotalizer);\r\n            }\r\n\r\n            if(!drawTotalizer)self.setGroupByValues(row);\r\n            return rows;\r\n        },\r\n\r\n        /*\r\n        * This method returns true if the current row, begins a new row grouped\r\n        */\r\n        isNewGroup: function (row) {\r\n            var self = this;\r\n            var options = self.options;\r\n            var groupByColumns = options.groupByColumns;\r\n\r\n            if (groupByColumns.length == 0) {\r\n                return false;\r\n            }\r\n\r\n            if (self.areIdenticalValues(row)) {\r\n                return false;\r\n            }\r\n\r\n            return true;\r\n        },\r\n\r\n\r\n        /*\r\n        * This method returns true if the current row, begins a new summary row grouped\r\n        */\r\n        isNewSummarygroup: function () {\r\n            var self = this,\r\n                options = self.options;\r\n\r\n            if (!options.showSummary) {\r\n                return false;\r\n            }\r\n\r\n            if (!self.areIdenticalValues(self.groupByPreviousValues)) {\r\n                return true;\r\n            }\r\n            return false;\r\n        },\r\n\r\n        /*\r\n        * This method sets the values for row grouped\r\n        */\r\n        setGroupByValues: function (row) {\r\n            var self = this;\r\n            var options = self.options;\r\n            var groupByColumns = options.groupByColumns;\r\n\r\n            self.groupByPreviousValues = bizagi.clone(self.groupByValues);\r\n\r\n            for (var i = 0, l = groupByColumns.length; i < l; i++) {\r\n                var groupByColumn = groupByColumns[i];\r\n                self.groupByValues[groupByColumn] = self.getColumnValue(row[groupByColumn]);\r\n            }\r\n        },\r\n\r\n        /*\r\n        * This method returns true if the values of current row are identical to values group\r\n        * otherwise it returns false\r\n        */\r\n        areIdenticalValues: function (row) {\r\n            var self = this;\r\n            var options = self.options;\r\n            var result = true;\r\n            var groupByColumns = options.groupByColumns;\r\n\r\n            for (var i = 0, l = groupByColumns.length; i < l; i++) {\r\n                var groupByColumn = groupByColumns[i];\r\n                result &= (self.groupByValues[groupByColumn] === self.getColumnValue(row[groupByColumn]));\r\n            }\r\n\r\n            return result;\r\n        },\r\n\r\n        /*\r\n        * This method returns an array with the level of grouping\r\n        */\r\n        getGroupLevels: function (row) {\r\n            var self = this,\r\n                options = self.options,\r\n                groupLevel = [],\r\n                reset = false,\r\n                groupByColumns = options.groupByColumns;\r\n\r\n            for (var i = 0, l = groupByColumns.length; i < l; i++) {\r\n                var groupByColumn = groupByColumns[i];\r\n\r\n                if (reset || (self.groupByValues[groupByColumn] != self.getColumnValue(row[groupByColumn]))) {\r\n                    groupLevel.push({ deep: i, position: groupByColumn });\r\n                    reset = true;\r\n                }\r\n            }\r\n\r\n            return groupLevel;\r\n        },\r\n\r\n        /*\r\n        * This method returns true id the current columns should be displayed\r\n        */\r\n        showColumn: function (column) {\r\n\r\n            if (typeof column.bizAgiProperties == \"undefined\") {\r\n                return true;\r\n            }\r\n\r\n            return column.bizAgiProperties.showColumn;\r\n\r\n        },\r\n\r\n        /*\r\n        *   This method gets the columns enabled to dispay\r\n        */\r\n        getValidColumns: function () {\r\n            var self = this,\r\n                options = self.options;\r\n\r\n            self.validColumns = self.validColumns || [];\r\n\r\n            if (self.validColumns.length == 0) {\r\n                self.validColumns = $.grep(options.columns, function (column) {\r\n                    return self.showColumn(column);\r\n                });\r\n            }\r\n\r\n            return self.validColumns;\r\n        },\r\n\r\n        /*\r\n        *   This method draws a grid grouped row\r\n        */\r\n        drawGroupRow: function (emptyCells, level, position, row, drawTotalizer) {\r\n            var self = this,\r\n                options = self.options,\r\n                result, groupData, totalizer=\"\";\r\n\r\n            realColumnsData = self.options.columns.filter(function (obj) {\r\n                var showColumn = obj.bizAgiProperties ? obj.bizAgiProperties.showColumn : false;\r\n                return (obj.index !== 0 && showColumn);\r\n            });\r\n\r\n            if (drawTotalizer) {\r\n\r\n                groupData = self.getRowsGroupData(emptyCells);\r\n\r\n                $.each(realColumnsData, function (i, column) {\r\n                    if (column.summarizeBy) {\r\n                        totalizer = self.calculateSummaryGroup(column, groupData);\r\n                        if (column.summarizeBy !== \"count\") {\r\n                            totalizer = self.getFormatedValue(column, totalizer);\r\n                        }\r\n                        self.rows = self._replaceElement(self.rows, \"cellContent\", totalizer);\r\n                    }\r\n                });\r\n            }\r\n            else{\r\n                    var headerRow = $.fasttmpl(options.template.headerRow, {\r\n                        columnTitle: self.getColumnTitle(row, position),\r\n                        colspan: level + 1,\r\n                        columns:realColumnsData,\r\n                        level: emptyCells\r\n                    });\r\n\r\n                    result = self._replaceElement(headerRow, \"empty-cells\", self.drawEmptyCells({ cells: emptyCells, conectorV: true }));\r\n            }\r\n\r\n\r\n            return result;\r\n        },\r\n\r\n        /*\r\n        * This Method draws empty cells for grouping\r\n        */\r\n        drawEmptyCells: function (params) {\r\n            var self = this,\r\n                options = self.options;\r\n\r\n            params = params || {};\r\n            params.cells = params.cells || 0;\r\n\r\n            var cells = \"\";\r\n\r\n            for (var i = 0; i < params.cells; i++) {\r\n                cells += $.fasttmpl(options.template.emptyCell, {\r\n                    conectorV: options.showSummary && params.conectorV,\r\n                    conectorCorner: options.showSummary && params.conectorCorner,\r\n                    conectorH: options.showSummary && params.conectorH\r\n                });\r\n            }\r\n\r\n            return cells;\r\n        },\r\n\r\n        /*\r\n        * This method gets a title of column grouped\r\n        */\r\n        getColumnTitle: function (row, position) {\r\n            var self = this,\r\n                options = self.options;\r\n\r\n            var value = self.getFormatedValue(options.columns[position], self.getColumnValue(row[position]));\r\n            var columnName = self.getColumnName(position);\r\n            var displayType = options.columns[position] && options.columns[position].bizAgiProperties.displayTypeHeader;\r\n\r\n\r\n            if (displayType == \"label\") {\r\n                return columnName;\r\n            }\r\n\r\n            if (displayType == \"value\") {\r\n                return value;\r\n            }\r\n\r\n            if (displayType == \"reversed\") {\r\n                return value + \": \" + columnName;\r\n            }\r\n\r\n            return columnName + \": \" + value;\r\n\r\n        },\r\n\r\n        getFormatedValue: function (column, value) {\r\n            var properties, type, options = {};\r\n            if (column) {\r\n                properties = column.bizAgiProperties;\r\n                type = properties.type;\r\n                switch (type) {\r\n                    case \"columnMoney\":\r\n                        var format = bizagi.localization.getResource(\"numericFormat\");\r\n                        properties.allowDecimals = properties.allowDecimals ? (properties.numDecimals ? properties.numDecimals : (typeof (BIZAGI_DEFAULT_CURRENCY_INFO) !== \"undefined\" ? BIZAGI_DEFAULT_CURRENCY_INFO.decimalDigits : 2)) : 0;\r\n                        properties.numDecimals = properties.allowDecimals ? (properties.numDecimals ? properties.numDecimals : (typeof (BIZAGI_DEFAULT_CURRENCY_INFO) !== \"undefined\" ? BIZAGI_DEFAULT_CURRENCY_INFO.decimalDigits : 2)) : 0;\r\n                        options.positiveFormat = format.positiveFormat;\r\n                        options.negativeFormat = format.negativeFormat;\r\n                        options.decimalSymbol = typeof (BIZAGI_DEFAULT_CURRENCY_INFO) !== \"undefined\" ? BIZAGI_DEFAULT_CURRENCY_INFO.decimalSeparator : format.decimalSymbol;\r\n                        options.digitGroupSymbol = typeof (BIZAGI_DEFAULT_CURRENCY_INFO) !== \"undefined\" ? BIZAGI_DEFAULT_CURRENCY_INFO.groupSeparator : format.digitGroupSymbol;\r\n                        options.groupDigits = true;\r\n                        options.colorize = false;\r\n                        options.roundToDecimalPlace = properties.numDecimals\r\n                        options.symbol = typeof (BIZAGI_DEFAULT_CURRENCY_INFO) !== \"undefined\" ? BIZAGI_DEFAULT_CURRENCY_INFO.symbol : format.symbol;\r\n                        var label = $('<label/>').html(value);\r\n                        label.formatCurrency(options);\r\n                        value = label.text();\r\n                        break;\r\n                    case \"columnBoolean\":\r\n                        if (bizagi.util.parseBoolean(value) == true) {\r\n                            value = bizagi.localization.getResource(\"render-boolean-yes\");\r\n                        } else if (bizagi.util.parseBoolean(value) == false) {\r\n                            value = bizagi.localization.getResource(\"render-boolean-no\");\r\n                        } else {\r\n                            value = \"\";\r\n                        }\r\n                        break;\r\n                    case \"columnSearch\":\r\n                        if (value) {\r\n                            if (value.value) {\r\n                                value = value.value;\r\n                            } else {\r\n                                if (value.label) {\r\n                                    value = value.label;\r\n                                } else {\r\n                                    value = \"\";\r\n                                }\r\n                            }\r\n                        } else {\r\n                            value = \"\";\r\n                        }\r\n                        break;\r\n                    case \"columnNumber\":\r\n                        var format = bizagi.localization.getResource(\"numericFormat\");\r\n                        properties.allowDecimals = properties.allowDecimals ? (properties.numDecimals ? properties.numDecimals : (typeof (BIZAGI_DEFAULT_CURRENCY_INFO) !== \"undefined\" ? BIZAGI_DEFAULT_CURRENCY_INFO.decimalDigits : 2)) : 0;\r\n                        properties.numDecimals = properties.allowDecimals ? (properties.numDecimals ? properties.numDecimals : (typeof (BIZAGI_DEFAULT_CURRENCY_INFO) !== \"undefined\" ? BIZAGI_DEFAULT_CURRENCY_INFO.decimalDigits : 2)) : 0;\r\n                        options.positiveFormat = format.positiveFormat;\r\n                        options.negativeFormat = format.negativeFormat;\r\n                        options.decimalSymbol = typeof (BIZAGI_DEFAULT_CURRENCY_INFO) !== \"undefined\" ? BIZAGI_DEFAULT_CURRENCY_INFO.decimalSeparator : format.decimalSymbol;\r\n                        options.digitGroupSymbol = typeof (BIZAGI_DEFAULT_CURRENCY_INFO) !== \"undefined\" ? BIZAGI_DEFAULT_CURRENCY_INFO.groupSeparator : format.digitGroupSymbol;\r\n                        options.groupDigits = true;\r\n                        options.colorize = false;\r\n                        options.symbol = \"\";\r\n                        options.roundToDecimalPlace = properties.numDecimals\r\n                        var label = $('<label/>').html(value);\r\n                        if (properties.dataType == 6 || properties.dataType == 8 || properties.dataType == 10 || properties.dataType == 11) {\r\n                            label.formatCurrency(options);\r\n                        }\r\n                        value = label.text();\r\n                        if (column.bizAgiProperties.percentage) {\r\n                            value += \"%\";\r\n                        }\r\n                        break;\r\n                    case \"columnDate\":\r\n                        if (value) {\r\n                            var dateObj;\r\n                            var defaultDateFormat = bizagi.localization.getResource(\"dateFormat\");\r\n                            var defaultTimeFormat = bizagi.localization.getResource(\"timeFormat\");\r\n                            properties.dateFormat = properties.dateFormat || defaultDateFormat;\r\n                            properties.timeFormat = properties.timeFormat || defaultTimeFormat;\r\n                            properties.fullFormat = properties.dateFormat;\r\n                            if (properties.timePickerFormat !== undefined) {\r\n                                dateObj = bizagi.util.dateFormatter.getDateFromInvariant(value, true);\r\n                            } else {\r\n                                if (properties.showTime) {\r\n                                    var INVARIANT_FORMAT = \"MM/dd/yyyy H:mm:ss\";\r\n                                    if (properties.fullFormat.search(/[h|H]+/ig) === -1) {\r\n                                        properties.fullFormat = properties.fullFormat + ' ' + properties.timeFormat;\r\n                                    }\r\n                                    if (typeof value == \"string\") {\r\n                                        if (value.length == INVARIANT_FORMAT.length || value.length == (INVARIANT_FORMAT.length + 1)) {\r\n                                            dateObj = bizagi.util.dateFormatter.getDateFromInvariant(value, true);\r\n                                        } else {\r\n                                            dateObj = bizagi.util.dateFormatter.getDateFromInvariant(value);\r\n                                            dateObj.setHours(0, 0, 0, 0);\r\n                                        }\r\n                                    } else {\r\n                                        dateObj = bizagi.util.dateFormatter.getDateFromInvariant(value, true);\r\n                                    }\r\n                                } else {\r\n                                    dateObj = bizagi.util.dateFormatter.getDateFromInvariant(value);\r\n                                }\r\n                            }\r\n                            value = bizagi.util.dateFormatter.formatDate(dateObj, properties.fullFormat, self.i18n);\r\n                        }\r\n                        break;\r\n                }\r\n            }\r\n            return value;\r\n        },\r\n\r\n        /*\r\n        * This method gets displayName of the column grouped\r\n        */\r\n        getColumnName: function (position) {\r\n            var self = this,\r\n                options = self.options;\r\n\r\n            var column = options.columns[position];\r\n\r\n            return column.bizAgiProperties.displayName;\r\n        },\r\n\r\n        /*\r\n        * This method gets the current value of the column grouped\r\n        */\r\n        getColumnValue: function (value) {\r\n            var self = this;\r\n\r\n            if (typeof value == \"object\" && value != null) {\r\n                if (value.length == 0) {\r\n                    return \"\";\r\n                } else if (value.length == 2) {\r\n                    return self.getColumnValue(value[1]);\r\n                } else if (typeof value[0] == \"object\") {\r\n                    return self.getColumnValue(value[0]);\r\n                } else {\r\n                    return value;\r\n                }\r\n            } else {\r\n                return value;\r\n            }\r\n        },\r\n\r\n\r\n\r\n        /*\r\n        * This method return the colspan number, it is necessary to draw the grouped row\r\n        */\r\n        getColSpan: function (level) {\r\n            var self = this,\r\n                options = self.options;\r\n            var length = options.columns.length - 1;\r\n\r\n            for (var i = 0, l = options.columns.length; i < l; i++) {\r\n                var column = options.columns[i];\r\n                if (!self.showColumn(column)) {\r\n                    length = length - 1;\r\n                }\r\n            }\r\n\r\n            return length + level;\r\n        },\r\n\r\n        /*\r\n        * This method builds the tree of data used for totalize in subgroups\r\n        */\r\n        addRowGroupData: function (row) {\r\n            var self = this,\r\n                valuesGroup = self.rowsGroupData,\r\n                values = self.groupByValues;\r\n\r\n            for (var key in values) {\r\n                var value = values[key];\r\n                valuesGroup[value] = valuesGroup[value] || {};\r\n                valuesGroup = valuesGroup[value];\r\n            }\r\n\r\n            valuesGroup.data = valuesGroup.data || [];\r\n            valuesGroup.data.push(row);\r\n        },\r\n\r\n        /*\r\n        * This method builds a tree with the data\r\n        */\r\n        getRowsGroupData: function (deep) {\r\n            var self = this,\r\n                valuesGroup = self.rowsGroupData,\r\n                i = 0,\r\n                values = self.groupByValues;\r\n\r\n            for (var key in values) {\r\n                var value = values[key];\r\n                valuesGroup = valuesGroup[value];\r\n                if (i == deep) {\r\n                    break;\r\n                }\r\n                i++;\r\n            }\r\n\r\n            if (valuesGroup.data) {\r\n                return valuesGroup.data;\r\n            }\r\n\r\n            return self.getNestedRows(valuesGroup);\r\n        },\r\n\r\n        /*\r\n        *This method builds a tree with the data\r\n        */\r\n        getNestedRows: function (group, data) {\r\n            var self = this;\r\n            data = data || [];\r\n\r\n            for (var item in group) {\r\n                if (group[item].data) {\r\n                    data = data.concat(group[item].data);\r\n                } else {\r\n                    data = self.getNestedRows(group[item], data);\r\n                }\r\n            }\r\n\r\n            return data;\r\n        },\r\n\r\n\r\n        /*\r\n        * This method draws a summary grouped row\r\n        */\r\n        drawSummaryRows: function (row) {\r\n            var self = this;\r\n            var levels = self.getGroupLevels(row);\r\n            var rows = \"\";\r\n            for (var i = 0, l = levels.length; l > i; l--) {\r\n                var level = levels[l - 1];\r\n                rows += self.drawSummaryRow(level.deep);\r\n            }\r\n\r\n            return rows;\r\n        },\r\n\r\n        /*\r\n        * This method draws a summary group\r\n        */\r\n        drawSummaryRow: function (deep) {\r\n            var self = this,\r\n                options = self.options,\r\n                groupByColumns = options.groupByColumns ? options.groupByColumns.length : 0;\r\n\r\n            var groupData = self.getRowsGroupData(deep);\r\n            var row = $.fasttmpl(options.template.summary, {\r\n                level: deep\r\n            });\r\n\r\n            var cells = \"\";\r\n            var conectorH = false;\r\n            var conectorCorner;\r\n\r\n            for (var i = 0; i < groupByColumns; i++) {\r\n\r\n                conectorCorner = (i == deep);\r\n                cells += self.drawEmptyCells({\r\n                    cells: 1,\r\n                    conectorCorner: conectorCorner,\r\n                    conectorH: conectorH,\r\n                    conectorV: !conectorH && !conectorCorner\r\n                });\r\n\r\n                if (i == deep) {\r\n                    conectorH = true;\r\n                }\r\n            }\r\n\r\n            row = self._replaceElement(row, \"empty-cells\", cells);\r\n            cells = \"\";\r\n\r\n            // Resolve summary cells\r\n            $.each(options.columns, function (i, column) {\r\n                // Draw summary group column\r\n                cells += self.drawSummaryGroupCell(column, groupData);\r\n\r\n            });\r\n\r\n            // Resolve cells template\r\n            row = self._replaceElement(row, \"summary-cells\", cells);\r\n            return row;\r\n\r\n        },\r\n\r\n        /*\r\n        *   This method draws the cells for summary\r\n        */\r\n        drawSummary: function () {\r\n            var self = this,\r\n                options = self.options,\r\n                groupByColumns = options.groupByColumns ? options.groupByColumns.length : 0;\r\n\r\n            var row = $.fasttmpl(options.template.summary);\r\n\r\n            row = self._replaceElement(row, \"empty-cells\", self.drawEmptyCells({ cells: groupByColumns }));\r\n\r\n            var cells = \"\";\r\n            // Resolve summary cells\r\n            $.each(options.columns, function (i, column) {\r\n                if (self.options.maxColumns > 0) {\r\n                    if (i <= self.options.maxColumns) {\r\n                        // Draw summary column\r\n                        cells += self.drawSummaryCell(column);\r\n                    }\r\n                } else {\r\n                    // Draw summary column\r\n                    cells += self.drawSummaryCell(column);\r\n                }\r\n            });\r\n\r\n            // Resolve cells template\r\n            row = self._replaceElement(row, \"summary-cells\", cells);\r\n            return row;\r\n        },\r\n\r\n        /*\r\n        *   This method draws a single summary cell\r\n        */\r\n        drawSummaryCell: function (column) {\r\n            var self = this;\r\n            var options = self.options;\r\n\r\n            if (!self.showColumn(column)) {\r\n                return \"\";\r\n            }\r\n\r\n            // Resolve cell template\r\n            var cell = $.fasttmpl(options.template.summaryCell, {\r\n                hidden: column.hidden || false,\r\n                summarizeBy: column.summarizeBy\r\n            });\r\n\r\n            var result = self.onDrawCell(column, \"summary\", self.calculateSummary(column), false);\r\n            result = (result != undefined && typeof (result) != \"number\") ? result.replace(\"summaryValue\", self.calculateSummary(column)) : result;\r\n\r\n            if (!result) {\r\n                result = \"\";\r\n            }\r\n\r\n            var async = typeof (result) === \"object\" && result.done;\r\n            if (async) {\r\n                if (result.state() === \"resolved\") {\r\n                    // Fetch resolved result\r\n                    cell = self._replaceElement(cell, \"cellContent\", self.resolveResult(result));\r\n                } else {\r\n                    // Wait for result\r\n                    cell = self._replaceElement(cell, \"cellContent\", \"\");\r\n                    self.asyncCells[key + \"-\" + columnIndex] = result;\r\n                }\r\n\r\n            } else {\r\n                // Resolve cell content\r\n                cell = self._replaceElement(cell, \"cellContent\", result);\r\n            }\r\n\r\n            return cell;\r\n        },\r\n\r\n        /*\r\n        * This method draws a grouped cell\r\n        */\r\n        drawSummaryGroupCell: function (column, groupData) {\r\n            var self = this;\r\n            var options = self.options;\r\n            var summaryKey = \"summary \" + self.summaryGroup++;\r\n\r\n            if (!self.showColumn(column)) {\r\n                return \"\";\r\n            }\r\n\r\n            // Resolve cell template\r\n            var cell = $.fasttmpl(options.template.summaryCell, {\r\n                hidden: column.hidden || false,\r\n                summarizeBy: column.summarizeBy,\r\n                summary: summaryKey\r\n            });\r\n\r\n            var result = self.onDrawCell(column, summaryKey, self.calculateSummaryGroup(column, groupData), false);\r\n            result = (result != undefined && typeof (result) != \"number\") ? result.replace(\"summaryValue\", self.calculateSummaryGroup(column, groupData)) : result;\r\n\r\n            if (!result) {\r\n                result = \"\";\r\n            }\r\n\r\n            var async = typeof (result) === \"object\" && result.done;\r\n            if (async) {\r\n                if (result.state() === \"resolved\") {\r\n                    // Fetch resolved result\r\n                    cell = self._replaceElement(cell, \"cellContent\", self.resolveResult(result));\r\n                } else {\r\n                    // Wait for result\r\n                    cell = self._replaceElement(cell, \"cellContent\", \"\");\r\n                    self.asyncCells[key + \"-\" + columnIndex] = result;\r\n                }\r\n\r\n            } else {\r\n                // Resolve cell content\r\n                cell = self._replaceElement(cell, \"cellContent\", result);\r\n            }\r\n\r\n            return cell;\r\n\r\n        },\r\n\r\n        /*\r\n        *   Calculates the summary for a column given the data\r\n        */\r\n        calculateSummaryGroup: function (column, dataRowsgroup) {\r\n            var self = this;\r\n            var operation = column.summarizeBy;\r\n            dataRowsgroup = dataRowsgroup || [];\r\n\r\n            //Consider the default values in the operations\r\n            $.each(dataRowsgroup, function (i, value) {\r\n                if (typeof dataRowsgroup[i][column.index] != \"undefined\" && dataRowsgroup[i][column.index] == null && column.bizAgiProperties.defaultvalue != null) {\r\n                    dataRowsgroup[i][column.index] = column.bizAgiProperties.defaultvalue;\r\n                }\r\n            });\r\n            var columnValues = $.map(dataRowsgroup, function (row, i) { return row[column.index]; });\r\n            var result;\r\n\r\n            // Don't calculate anything if there are no rows\r\n            if (columnValues.length == 0) return 0;\r\n\r\n            // Resolve operations\r\n            if (operation == \"sum\") {\r\n                result = 0;\r\n                $.each(columnValues, function (i, value) { if (null != value) result += Number(value); });\r\n\r\n            } else if (operation == \"min\") {\r\n                result = columnValues[0] || 0;\r\n                $.each(columnValues, function (i, value) { if (typeof (value) == \"number\" && null != value && (value < result)) result = Number(value); });\r\n                if (result === Math.max()) result = null;\r\n\r\n            } else if (operation == \"max\") {\r\n                result = columnValues[0] || 0;\r\n                $.each(columnValues, function (i, value) { if (typeof (value) == \"number\" && null != value && (value > result)) result = Number(value); });\r\n                if (result === Math.min()) result = null;\r\n\r\n            } else if (operation == \"avg\") {\r\n                result = 0;\r\n                $.each(columnValues, function (i, value) { if (null != value) result += Number(value); });\r\n                result = result / columnValues.length;\r\n\r\n\r\n            } else if (operation == \"count\") {\r\n                result = 0;\r\n                columnValues = dataRowsgroup;\r\n\r\n                for (var i = 0; i < columnValues.length; i++) {\r\n                    var columnValue = columnValues[i][column.index];\r\n\r\n                    if (columnValue instanceof Array && columnValue.length > 0) {\r\n                        result += 1;\r\n                    }\r\n                    else if (!(columnValue instanceof Array) && columnValue != null) {\r\n                        result += 1;\r\n                    }\r\n                }\r\n            }\r\n            return result;\r\n        },\r\n\r\n        /*\r\n        *   Execute post-renders in each cell after the element has been created\r\n        */\r\n        postRenderRow: function (row) {\r\n            var self = this;\r\n            var columns = self.getValidColumns();\r\n            var key = row.attr(\"data-business-key\");\r\n            var isNewRow = row.attr(\"data-new-row\");\r\n            var cells = row.is(\"[data-bizagi-component=cells]\") ? row.children() : row.find(\"[data-bizagi-component=cells]\").children();\r\n            cells = cells.not(\".ui-bizagi-grid-ignore\");\r\n            $.each(cells, function (i, cell) {\r\n                var column = columns[i];\r\n                if (column.key) return; // Omit key column\r\n\r\n                // Check if the cell has an async result\r\n                var asyncResult = self.asyncCells[key + \"-\" + column.index];\r\n                if (asyncResult) {\r\n                    $.when(asyncResult)\r\n                            .done(function (html) {\r\n                                // Append async result\r\n                                cell = $(cell);\r\n                                cell.append(html);\r\n                                self.onCellReady(column, key, cell, isNewRow);\r\n                            });\r\n                } else {\r\n                    self.onCellReady(column, key, $(cell), isNewRow);\r\n                }\r\n            });\r\n        },\r\n\r\n        /*\r\n        *   Execute post-renders in all the grid\r\n        */\r\n        postRender: function () {\r\n            var self = this;\r\n            var options = self.options;\r\n\r\n            self._super();\r\n\r\n            // Get grid grouped rows\r\n            if (options.showSummary) {\r\n                var rows = self._getComponent(\"grouped-summary-cells\");\r\n                if (rows) {\r\n                    $.each(rows, function (i, row) {\r\n                        row = $(row);\r\n                        self.postRenderGroupedSummary(row);\r\n                    });\r\n                }\r\n            }\r\n\r\n        },\r\n\r\n        /*\r\n        *   Execute post-renders in each summary cell after the element has been created\r\n        */\r\n        postRenderGroupedSummary: function (row) {\r\n            var self = this;\r\n            var columns = self.getValidColumns();\r\n            var cells = row.is(\"[data-bizagi-component=grouped-summary-cells]\") ? row.children().not(\".ui-bizagi-grid-ignore\") : [];\r\n            $.each(cells, function (i, cell) {\r\n                var column = columns[i];\r\n                if (column.key) return; // Omit key column\r\n\r\n                var key = $(cell).attr(\"data-grouped-summary-key\");\r\n                if (key) {\r\n                    // Check if the cell has an async result\r\n                    var asyncResult = self.asyncCells[key + \"-\" + column.index];\r\n                    if (asyncResult) {\r\n                        $.when(asyncResult)\r\n                            .done(function (html) {\r\n                                // Append async result\r\n                                cell = $(cell);\r\n                                cell.append(html);\r\n                                self.onCellReady(column, key, cell, false);\r\n                            });\r\n                    } else {\r\n                        self.onCellReady(column, key, $(cell), false);\r\n                    }\r\n                }\r\n            });\r\n        },\r\n\r\n\r\n        /*\r\n        *   Execute post-renders in each summary cell after the element has been created\r\n        */\r\n        postRenderSummary: function (summary) {\r\n            var self = this;\r\n            var columns = self.getValidColumns();\r\n            var cells = summary.is(\"[data-bizagi-component=grouped-summary-cells]\") ? summary.children() : summary.find(\"[data-bizagi-component=grouped-summary-cells]\").children();\r\n            cells = cells.not(\".ui-bizagi-grid-ignore\");\r\n            $.each(cells, function (i, cell) {\r\n                var column = columns[i];\r\n                if (column.key) return; // Omit key column\r\n\r\n                // Check if the cell has an async result\r\n                var asyncResult = self.asyncCells[key + \"-\" + column.index];\r\n                if (asyncResult) {\r\n                    $.when(asyncResult)\r\n                            .done(function (html) {\r\n                                // Append async result\r\n                                cell = $(cell);\r\n                                cell.append(html);\r\n                                self.onCellReady(column, \"summary\", cell, false);\r\n                            });\r\n                } else {\r\n                    self.onCellReady(column, \"summary\", $(cell), false);\r\n                }\r\n            });\r\n        },\r\n\r\n        /*\r\n        * This method binds events\r\n        */\r\n        attachHandlers: function () {\r\n            var self = this;\r\n\r\n            self._super();\r\n\r\n            // Add selection events\r\n            self._getComponent(\"rows\").find(\".ui-bizagi-grid-grouped-header\").bind(\"click\", function () {\r\n                var level = $(this).attr(\"data-grouped-level\");\r\n                var visibility = $(this).data(\"grouped-visibility\");\r\n                var group = $(this)\r\n                            .nextUntil(\"[data-grouped-level = '\" + level + \"']\")\r\n                            .filter(function () {\r\n                                var result = true;\r\n\r\n                                var groupedLevel = $(this).attr(\"data-grouped-level\");\r\n                                var summaryLevel = $(this).attr(\"data-summary-grouped-level\");\r\n\r\n                                if (groupedLevel) {\r\n                                    if (parseInt(groupedLevel) < level) {\r\n                                        result = false;\r\n                                    }\r\n                                }\r\n\r\n                                if (summaryLevel) {\r\n                                    if (parseInt(summaryLevel) < level) {\r\n                                        result = false;\r\n                                    }\r\n                                }\r\n\r\n                                return result;\r\n                                //return !($(this).attr(\"data-grouped-level\") < level);\r\n                            });\r\n\r\n                $(this).data(\"grouped-visibility\", !visibility);\r\n                if (visibility) {\r\n                    $(\".ui-icon\", this).removeClass(\"ui-icon-triangle-1-s\").addClass(\"ui-icon-triangle-1-e\");\r\n                    $(\".ui-icon\", group).removeClass(\"ui-icon-triangle-1-s\").addClass(\"ui-icon-triangle-1-e\");\r\n                    $(group).hide();\r\n                } else {\r\n                    $(\".ui-icon\", this).removeClass(\"ui-icon-triangle-1-e\").addClass(\"ui-icon-triangle-1-s\");\r\n                    $(\".ui-icon\", group).removeClass(\"ui-icon-triangle-1-e\").addClass(\"ui-icon-triangle-1-s\");\r\n                    $(group).show();\r\n                }\r\n\r\n            });\r\n\r\n\r\n        }\r\n\r\n    });\r\n\r\n})(jQuery);","/*! jQuery Timepicker Addon - v1.4 - 2013-08-11\r\n* http://trentrichardson.com/examples/timepicker\r\n* Copyright (c) 2013 Trent Richardson; Licensed MIT */\r\n(function ($) {\r\n\r\n    /*\r\n    * Lets not redefine timepicker, Prevent \"Uncaught RangeError: Maximum call stack size exceeded\"\r\n    */\r\n    $.ui.timepicker = $.ui.timepicker || {};\r\n    if ($.ui.timepicker.version) {\r\n        return;\r\n    }\r\n\r\n    /*\r\n    * Extend jQueryUI, get it started with our version number\r\n    */\r\n    $.extend($.ui, {\r\n        timepicker: {\r\n            version: \"1.4\"\r\n        }\r\n    });\r\n\r\n    /* \r\n    * Timepicker manager.\r\n    * Use the singleton instance of this class, $.timepicker, to interact with the time picker.\r\n    * Settings for (groups of) time pickers are maintained in an instance object,\r\n    * allowing multiple different settings on the same page.\r\n    */\r\n    var Timepicker = function () {\r\n        this.regional = []; // Available regional settings, indexed by language code\r\n        this.regional[''] = { // Default regional settings\r\n            currentText: 'Now',\r\n            closeText: 'Done',\r\n            amNames: ['AM', 'A'],\r\n            pmNames: ['PM', 'P'],\r\n            timeFormat: 'HH:mm',\r\n            timeSuffix: '',\r\n            timeOnlyTitle: 'Choose Time',\r\n            timeText: 'Time',\r\n            hourText: 'Hour',\r\n            minuteText: 'Minute',\r\n            secondText: 'Second',\r\n            millisecText: 'Millisecond',\r\n            microsecText: 'Microsecond',\r\n            timezoneText: 'Time Zone',\r\n            isRTL: false\r\n        };\r\n        this._defaults = { // Global defaults for all the datetime picker instances\r\n            showButtonPanel: true,\r\n            timeOnly: false,\r\n            showHour: null,\r\n            showMinute: null,\r\n            showSecond: null,\r\n            showMillisec: null,\r\n            showMicrosec: null,\r\n            showTimezone: null,\r\n            showTime: true,\r\n            stepHour: 1,\r\n            stepMinute: 1,\r\n            stepSecond: 1,\r\n            stepMillisec: 1,\r\n            stepMicrosec: 1,\r\n            hour: 0,\r\n            minute: 0,\r\n            second: 0,\r\n            millisec: 0,\r\n            microsec: 0,\r\n            timezone: null,\r\n            hourMin: 0,\r\n            minuteMin: 0,\r\n            secondMin: 0,\r\n            millisecMin: 0,\r\n            microsecMin: 0,\r\n            hourMax: 23,\r\n            minuteMax: 59,\r\n            secondMax: 59,\r\n            millisecMax: 999,\r\n            microsecMax: 999,\r\n            minDateTime: null,\r\n            maxDateTime: null,\r\n            onSelect: null,\r\n            hourGrid: 0,\r\n            minuteGrid: 0,\r\n            secondGrid: 0,\r\n            millisecGrid: 0,\r\n            microsecGrid: 0,\r\n            alwaysSetTime: true,\r\n            separator: ' ',\r\n            altFieldTimeOnly: true,\r\n            altTimeFormat: null,\r\n            altSeparator: null,\r\n            altTimeSuffix: null,\r\n            pickerTimeFormat: null,\r\n            pickerTimeSuffix: null,\r\n            showTimepicker: true,\r\n            timezoneList: null,\r\n            addSliderAccess: false,\r\n            sliderAccessArgs: null,\r\n            controlType: 'slider',\r\n            defaultValue: null,\r\n            parse: 'strict'\r\n        };\r\n        $.extend(this._defaults, this.regional['']);\r\n    };\r\n\r\n    $.extend(Timepicker.prototype, {\r\n        $input: null,\r\n        $altInput: null,\r\n        $timeObj: null,\r\n        inst: null,\r\n        hour_slider: null,\r\n        minute_slider: null,\r\n        second_slider: null,\r\n        millisec_slider: null,\r\n        microsec_slider: null,\r\n        timezone_select: null,\r\n        hour: 0,\r\n        minute: 0,\r\n        second: 0,\r\n        millisec: 0,\r\n        microsec: 0,\r\n        timezone: null,\r\n        hourMinOriginal: null,\r\n        minuteMinOriginal: null,\r\n        secondMinOriginal: null,\r\n        millisecMinOriginal: null,\r\n        microsecMinOriginal: null,\r\n        hourMaxOriginal: null,\r\n        minuteMaxOriginal: null,\r\n        secondMaxOriginal: null,\r\n        millisecMaxOriginal: null,\r\n        microsecMaxOriginal: null,\r\n        ampm: '',\r\n        formattedDate: '',\r\n        formattedTime: '',\r\n        formattedDateTime: '',\r\n        timezoneList: null,\r\n        units: ['hour', 'minute', 'second', 'millisec', 'microsec'],\r\n        support: {},\r\n        control: null,\r\n\r\n        /* \r\n        * Override the default settings for all instances of the time picker.\r\n        * @param  {Object} settings  object - the new settings to use as defaults (anonymous object)\r\n        * @return {Object} the manager object\r\n        */\r\n        setDefaults: function (settings) {\r\n            extendRemove(this._defaults, settings || {});\r\n            return this;\r\n        },\r\n\r\n        /*\r\n        * Create a new Timepicker instance\r\n        */\r\n        _newInst: function ($input, opts) {\r\n            var tp_inst = new Timepicker(),\r\n\t\t\t\tinlineSettings = {},\r\n\t\t\t\tfns = {},\r\n\t\t\t\toverrides, i;\r\n\r\n            for (var attrName in this._defaults) {\r\n                if (this._defaults.hasOwnProperty(attrName)) {\r\n                    var attrValue = $input.attr('time:' + attrName);\r\n                    if (attrValue) {\r\n                        try {\r\n                            inlineSettings[attrName] = eval(attrValue);\r\n                        } catch (err) {\r\n                            inlineSettings[attrName] = attrValue;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n\r\n            overrides = {\r\n                beforeShow: function (input, dp_inst) {\r\n                    if ($.isFunction(tp_inst._defaults.evnts.beforeShow)) {\r\n                        return tp_inst._defaults.evnts.beforeShow.call($input[0], input, dp_inst, tp_inst);\r\n                    }\r\n                },\r\n                onChangeMonthYear: function (year, month, dp_inst) {\r\n                    // Update the time as well : this prevents the time from disappearing from the $input field.\r\n                    tp_inst._updateDateTime(dp_inst);\r\n                    if ($.isFunction(tp_inst._defaults.evnts.onChangeMonthYear)) {\r\n                        tp_inst._defaults.evnts.onChangeMonthYear.call($input[0], year, month, dp_inst, tp_inst);\r\n                    }\r\n                },\r\n                onClose: function (dateText, dp_inst) {\r\n                    if (tp_inst.timeDefined === true && $input.val() !== '') {\r\n                        tp_inst._updateDateTime(dp_inst);\r\n                    }\r\n                    if ($.isFunction(tp_inst._defaults.evnts.onClose)) {\r\n                        tp_inst._defaults.evnts.onClose.call($input[0], dateText, dp_inst, tp_inst);\r\n                    }\r\n                }\r\n            };\r\n            for (i in overrides) {\r\n                if (overrides.hasOwnProperty(i)) {\r\n                    fns[i] = opts[i] || null;\r\n                }\r\n            }\r\n\r\n            tp_inst._defaults = $.extend({}, this._defaults, inlineSettings, opts, overrides, {\r\n                evnts: fns,\r\n                timepicker: tp_inst // add timepicker as a property of datepicker: $.datepicker._get(dp_inst, 'timepicker');\r\n            });\r\n            tp_inst.amNames = $.map(tp_inst._defaults.amNames, function (val) {\r\n                return val.toUpperCase();\r\n            });\r\n            tp_inst.pmNames = $.map(tp_inst._defaults.pmNames, function (val) {\r\n                return val.toUpperCase();\r\n            });\r\n\r\n            // detect which units are supported\r\n            tp_inst.support = detectSupport(\r\n\t\t\t\t\ttp_inst._defaults.timeFormat +\r\n\t\t\t\t\t(tp_inst._defaults.pickerTimeFormat ? tp_inst._defaults.pickerTimeFormat : '') +\r\n\t\t\t\t\t(tp_inst._defaults.altTimeFormat ? tp_inst._defaults.altTimeFormat : ''));\r\n\r\n            // controlType is string - key to our this._controls\r\n            if (typeof (tp_inst._defaults.controlType) === 'string') {\r\n                if (tp_inst._defaults.controlType === 'slider' && typeof ($.ui.slider) === 'undefined') {\r\n                    tp_inst._defaults.controlType = 'select';\r\n                }\r\n                tp_inst.control = tp_inst._controls[tp_inst._defaults.controlType];\r\n            }\r\n            // controlType is an object and must implement create, options, value methods\r\n            else {\r\n                tp_inst.control = tp_inst._defaults.controlType;\r\n            }\r\n\r\n            // prep the timezone options\r\n            var timezoneList = [-720, -660, -600, -570, -540, -480, -420, -360, -300, -270, -240, -210, -180, -120, -60,\r\n\t\t\t\t\t0, 60, 120, 180, 210, 240, 270, 300, 330, 345, 360, 390, 420, 480, 525, 540, 570, 600, 630, 660, 690, 720, 765, 780, 840];\r\n            if (tp_inst._defaults.timezoneList !== null) {\r\n                timezoneList = tp_inst._defaults.timezoneList;\r\n            }\r\n            var tzl = timezoneList.length, tzi = 0, tzv = null;\r\n            if (tzl > 0 && typeof timezoneList[0] !== 'object') {\r\n                for (; tzi < tzl; tzi++) {\r\n                    tzv = timezoneList[tzi];\r\n                    timezoneList[tzi] = { value: tzv, label: $.timepicker.timezoneOffsetString(tzv, tp_inst.support.iso8601) };\r\n                }\r\n            }\r\n            tp_inst._defaults.timezoneList = timezoneList;\r\n\r\n            // set the default units\r\n            tp_inst.timezone = tp_inst._defaults.timezone !== null ? $.timepicker.timezoneOffsetNumber(tp_inst._defaults.timezone) :\r\n\t\t\t\t\t\t\t((new Date()).getTimezoneOffset() * -1);\r\n            tp_inst.hour = tp_inst._defaults.hour < tp_inst._defaults.hourMin ? tp_inst._defaults.hourMin :\r\n\t\t\t\t\t\t\ttp_inst._defaults.hour > tp_inst._defaults.hourMax ? tp_inst._defaults.hourMax : tp_inst._defaults.hour;\r\n            tp_inst.minute = tp_inst._defaults.minute < tp_inst._defaults.minuteMin ? tp_inst._defaults.minuteMin :\r\n\t\t\t\t\t\t\ttp_inst._defaults.minute > tp_inst._defaults.minuteMax ? tp_inst._defaults.minuteMax : tp_inst._defaults.minute;\r\n            tp_inst.second = tp_inst._defaults.second < tp_inst._defaults.secondMin ? tp_inst._defaults.secondMin :\r\n\t\t\t\t\t\t\ttp_inst._defaults.second > tp_inst._defaults.secondMax ? tp_inst._defaults.secondMax : tp_inst._defaults.second;\r\n            tp_inst.millisec = tp_inst._defaults.millisec < tp_inst._defaults.millisecMin ? tp_inst._defaults.millisecMin :\r\n\t\t\t\t\t\t\ttp_inst._defaults.millisec > tp_inst._defaults.millisecMax ? tp_inst._defaults.millisecMax : tp_inst._defaults.millisec;\r\n            tp_inst.microsec = tp_inst._defaults.microsec < tp_inst._defaults.microsecMin ? tp_inst._defaults.microsecMin :\r\n\t\t\t\t\t\t\ttp_inst._defaults.microsec > tp_inst._defaults.microsecMax ? tp_inst._defaults.microsecMax : tp_inst._defaults.microsec;\r\n            tp_inst.ampm = '';\r\n            tp_inst.$input = $input;\r\n\r\n            if (tp_inst._defaults.altField) {\r\n                tp_inst.$altInput = $(tp_inst._defaults.altField).css({\r\n                    cursor: 'pointer'\r\n                }).focus(function () {\r\n                    $input.trigger(\"focus\");\r\n                });\r\n            }\r\n\r\n            if (tp_inst._defaults.minDate === 0 || tp_inst._defaults.minDateTime === 0) {\r\n                tp_inst._defaults.minDate = new Date();\r\n            }\r\n            if (tp_inst._defaults.maxDate === 0 || tp_inst._defaults.maxDateTime === 0) {\r\n                tp_inst._defaults.maxDate = new Date();\r\n            }\r\n\r\n            // datepicker needs minDate/maxDate, timepicker needs minDateTime/maxDateTime..\r\n            if (tp_inst._defaults.minDate !== undefined && tp_inst._defaults.minDate instanceof Date) {\r\n                tp_inst._defaults.minDateTime = new Date(tp_inst._defaults.minDate.getTime());\r\n            }\r\n            if (tp_inst._defaults.minDateTime !== undefined && tp_inst._defaults.minDateTime instanceof Date) {\r\n                tp_inst._defaults.minDate = new Date(tp_inst._defaults.minDateTime.getTime());\r\n            }\r\n            if (tp_inst._defaults.maxDate !== undefined && tp_inst._defaults.maxDate instanceof Date) {\r\n                tp_inst._defaults.maxDateTime = new Date(tp_inst._defaults.maxDate.getTime());\r\n            }\r\n            if (tp_inst._defaults.maxDateTime !== undefined && tp_inst._defaults.maxDateTime instanceof Date) {\r\n                tp_inst._defaults.maxDate = new Date(tp_inst._defaults.maxDateTime.getTime());\r\n            }\r\n            tp_inst.$input.bind('focus', function () {\r\n                tp_inst._onFocus();\r\n            });\r\n\r\n            return tp_inst;\r\n        },\r\n\r\n        /*\r\n        * add our sliders to the calendar\r\n        */\r\n        _addTimePicker: function (dp_inst) {\r\n            var currDT = (this.$altInput && this._defaults.altFieldTimeOnly) ? this.$input.val() + ' ' + this.$altInput.val() : this.$input.val();\r\n\r\n            this.timeDefined = this._parseTime(currDT);\r\n            this._limitMinMaxDateTime(dp_inst, false);\r\n            this._injectTimePicker();\r\n        },\r\n\r\n        /*\r\n        * parse the time string from input value or _setTime\r\n        */\r\n        _parseTime: function (timeString, withDate) {\r\n            if (!this.inst) {\r\n                this.inst = $.datepicker._getInst(this.$input[0]);\r\n            }\r\n\r\n            if (withDate || !this._defaults.timeOnly) {\r\n                var dp_dateFormat = $.datepicker._get(this.inst, 'dateFormat');\r\n                try {\r\n                    var parseRes = parseDateTimeInternal(dp_dateFormat, this._defaults.timeFormat, timeString, $.datepicker._getFormatConfig(this.inst), this._defaults);\r\n                    if (!parseRes.timeObj) {\r\n                        return false;\r\n                    }\r\n                    $.extend(this, parseRes.timeObj);\r\n                } catch (err) {\r\n                    $.timepicker.log(\"Error parsing the date/time string: \" + err +\r\n\t\t\t\t\t\t\t\t\t\"\\ndate/time string = \" + timeString +\r\n\t\t\t\t\t\t\t\t\t\"\\ntimeFormat = \" + this._defaults.timeFormat +\r\n\t\t\t\t\t\t\t\t\t\"\\ndateFormat = \" + dp_dateFormat);\r\n                    return false;\r\n                }\r\n                return true;\r\n            } else {\r\n                var timeObj = $.datepicker.parseTime(this._defaults.timeFormat, timeString, this._defaults);\r\n                if (!timeObj) {\r\n                    return false;\r\n                }\r\n                $.extend(this, timeObj);\r\n                return true;\r\n            }\r\n        },\r\n\r\n        /*\r\n        * generate and inject html for timepicker into ui datepicker\r\n        */\r\n        _injectTimePicker: function () {\r\n            var $dp = this.inst.dpDiv,\r\n\t\t\t\to = this.inst.settings,\r\n\t\t\t\ttp_inst = this,\r\n\t\t\t\tlitem = '',\r\n\t\t\t\tuitem = '',\r\n\t\t\t\tshow = null,\r\n\t\t\t\tmax = {},\r\n\t\t\t\tgridSize = {},\r\n\t\t\t\tsize = null,\r\n\t\t\t\ti = 0,\r\n\t\t\t\tl = 0;\r\n\r\n            // Prevent displaying twice\r\n            if ($dp.find(\"div.ui-timepicker-div\").length === 0 && o.showTimepicker) {\r\n                var noDisplay = ' style=\"display:none;\"',\r\n\t\t\t\t\thtml = '<div class=\"ui-timepicker-div' + (o.isRTL ? ' ui-timepicker-rtl' : '') + '\"><dl>' + '<dt class=\"ui_tpicker_time_label\"' + ((o.showTime) ? '' : noDisplay) + '>' + o.timeText + '</dt>' +\r\n\t\t\t\t\t\t\t\t'<dd class=\"ui_tpicker_time\"' + ((o.showTime) ? '' : noDisplay) + '></dd>';\r\n\r\n                // Create the markup\r\n                for (i = 0, l = this.units.length; i < l; i++) {\r\n                    litem = this.units[i];\r\n                    uitem = litem.substr(0, 1).toUpperCase() + litem.substr(1);\r\n                    show = o['show' + uitem] !== null ? o['show' + uitem] : this.support[litem];\r\n\r\n                    // Added by Peter Medeiros:\r\n                    // - Figure out what the hour/minute/second max should be based on the step values.\r\n                    // - Example: if stepMinute is 15, then minMax is 45.\r\n                    max[litem] = parseInt((o[litem + 'Max'] - ((o[litem + 'Max'] - o[litem + 'Min']) % o['step' + uitem])), 10);\r\n                    gridSize[litem] = 0;\r\n\r\n                    html += '<dt class=\"ui_tpicker_' + litem + '_label\"' + (show ? '' : noDisplay) + '>' + o[litem + 'Text'] + '</dt>' +\r\n\t\t\t\t\t\t\t\t'<dd class=\"ui_tpicker_' + litem + '\"><div class=\"ui_tpicker_' + litem + '_slider\"' + (show ? '' : noDisplay) + '></div>';\r\n\r\n                    if (show && o[litem + 'Grid'] > 0) {\r\n                        html += '<div style=\"padding-left: 1px\"><table class=\"ui-tpicker-grid-label\"><tr>';\r\n\r\n                        if (litem === 'hour') {\r\n                            for (var h = o[litem + 'Min']; h <= max[litem]; h += parseInt(o[litem + 'Grid'], 10)) {\r\n                                gridSize[litem]++;\r\n                                var tmph = $.datepicker.formatTime(this.support.ampm ? 'hht' : 'HH', { hour: h }, o);\r\n                                html += '<td data-for=\"' + litem + '\">' + tmph + '</td>';\r\n                            }\r\n                        }\r\n                        else {\r\n                            for (var m = o[litem + 'Min']; m <= max[litem]; m += parseInt(o[litem + 'Grid'], 10)) {\r\n                                gridSize[litem]++;\r\n                                html += '<td data-for=\"' + litem + '\">' + ((m < 10) ? '0' : '') + m + '</td>';\r\n                            }\r\n                        }\r\n\r\n                        html += '</tr></table></div>';\r\n                    }\r\n                    html += '</dd>';\r\n                }\r\n\r\n                // Timezone\r\n                var showTz = o.showTimezone !== null ? o.showTimezone : this.support.timezone;\r\n                html += '<dt class=\"ui_tpicker_timezone_label\"' + (showTz ? '' : noDisplay) + '>' + o.timezoneText + '</dt>';\r\n                html += '<dd class=\"ui_tpicker_timezone\" ' + (showTz ? '' : noDisplay) + '></dd>';\r\n\r\n                // Create the elements from string\r\n                html += '</dl></div>';\r\n                var $tp = $(html);\r\n\r\n                // if we only want time picker...\r\n                if (o.timeOnly === true) {\r\n                    $tp.prepend('<div class=\"ui-widget-header ui-helper-clearfix ui-corner-all\">' + '<div class=\"ui-datepicker-title\">' + o.timeOnlyTitle + '</div>' + '</div>');\r\n                    $dp.find('.ui-datepicker-header, .ui-datepicker-calendar').hide();\r\n                }\r\n\r\n                // add sliders, adjust grids, add events\r\n                for (i = 0, l = tp_inst.units.length; i < l; i++) {\r\n                    litem = tp_inst.units[i];\r\n                    uitem = litem.substr(0, 1).toUpperCase() + litem.substr(1);\r\n                    show = o['show' + uitem] !== null ? o['show' + uitem] : this.support[litem];\r\n\r\n                    // add the slider\r\n                    tp_inst[litem + '_slider'] = tp_inst.control.create(tp_inst, $tp.find('.ui_tpicker_' + litem + '_slider'), litem, tp_inst[litem], o[litem + 'Min'], max[litem], o['step' + uitem]);\r\n\r\n                    // adjust the grid and add click event\r\n                    if (show && o[litem + 'Grid'] > 0) {\r\n                        size = 100 * gridSize[litem] * o[litem + 'Grid'] / (max[litem] - o[litem + 'Min']);\r\n                        $tp.find('.ui_tpicker_' + litem + ' table').css({\r\n                            width: size + \"%\",\r\n                            marginLeft: o.isRTL ? '0' : ((size / (-2 * gridSize[litem])) + \"%\"),\r\n                            marginRight: o.isRTL ? ((size / (-2 * gridSize[litem])) + \"%\") : '0',\r\n                            borderCollapse: 'collapse'\r\n                        }).find(\"td\").click(function (e) {\r\n                            var $t = $(this),\r\n\t\t\t\t\t\t\t\t\th = $t.html(),\r\n\t\t\t\t\t\t\t\t\tn = parseInt(h.replace(/[^0-9]/g), 10),\r\n\t\t\t\t\t\t\t\t\tap = h.replace(/[^apm]/ig),\r\n\t\t\t\t\t\t\t\t\tf = $t.data('for'); // loses scope, so we use data-for\r\n\r\n                            if (f === 'hour') {\r\n                                if (ap.indexOf('p') !== -1 && n < 12) {\r\n                                    n += 12;\r\n                                }\r\n                                else {\r\n                                    if (ap.indexOf('a') !== -1 && n === 12) {\r\n                                        n = 0;\r\n                                    }\r\n                                }\r\n                            }\r\n\r\n                            tp_inst.control.value(tp_inst, tp_inst[f + '_slider'], litem, n);\r\n\r\n                            tp_inst._onTimeChange();\r\n                            tp_inst._onSelectHandler();\r\n                        }).css({\r\n                            cursor: 'pointer',\r\n                            width: (100 / gridSize[litem]) + '%',\r\n                            textAlign: 'center',\r\n                            overflow: 'hidden'\r\n                        });\r\n                    } // end if grid > 0\r\n                } // end for loop\r\n\r\n                // Add timezone options\r\n                this.timezone_select = $tp.find('.ui_tpicker_timezone').append('<select></select>').find(\"select\");\r\n                $.fn.append.apply(this.timezone_select,\r\n\t\t\t\t$.map(o.timezoneList, function (val, idx) {\r\n\t\t\t\t    return $(\"<option />\").val(typeof val === \"object\" ? val.value : val).text(typeof val === \"object\" ? val.label : val);\r\n\t\t\t\t}));\r\n                if (typeof (this.timezone) !== \"undefined\" && this.timezone !== null && this.timezone !== \"\") {\r\n                    var local_timezone = (new Date(this.inst.selectedYear, this.inst.selectedMonth, this.inst.selectedDay, 12)).getTimezoneOffset() * -1;\r\n                    if (local_timezone === this.timezone) {\r\n                        selectLocalTimezone(tp_inst);\r\n                    } else {\r\n                        this.timezone_select.val(this.timezone);\r\n                    }\r\n                } else {\r\n                    if (typeof (this.hour) !== \"undefined\" && this.hour !== null && this.hour !== \"\") {\r\n                        this.timezone_select.val(o.timezone);\r\n                    } else {\r\n                        selectLocalTimezone(tp_inst);\r\n                    }\r\n                }\r\n                this.timezone_select.change(function () {\r\n                    tp_inst._onTimeChange();\r\n                    tp_inst._onSelectHandler();\r\n                });\r\n                // End timezone options\r\n\r\n                // inject timepicker into datepicker\r\n                var $buttonPanel = $dp.find('.ui-datepicker-buttonpane');\r\n                if ($buttonPanel.length) {\r\n                    $buttonPanel.before($tp);\r\n                } else {\r\n                    $dp.append($tp);\r\n                }\r\n\r\n                this.$timeObj = $tp.find('.ui_tpicker_time');\r\n\r\n                if (this.inst !== null) {\r\n                    var timeDefined = this.timeDefined;\r\n                    this._onTimeChange();\r\n                    this.timeDefined = timeDefined;\r\n                }\r\n\r\n                // slideAccess integration: http://trentrichardson.com/2011/11/11/jquery-ui-sliders-and-touch-accessibility/\r\n                if (this._defaults.addSliderAccess) {\r\n                    var sliderAccessArgs = this._defaults.sliderAccessArgs,\r\n\t\t\t\t\t\trtl = this._defaults.isRTL;\r\n                    sliderAccessArgs.isRTL = rtl;\r\n\r\n                    setTimeout(function () { // fix for inline mode\r\n                        if ($tp.find('.ui-slider-access').length === 0) {\r\n                            $tp.find('.ui-slider:visible').sliderAccess(sliderAccessArgs);\r\n\r\n                            // fix any grids since sliders are shorter\r\n                            var sliderAccessWidth = $tp.find('.ui-slider-access:eq(0)').outerWidth(true);\r\n                            if (sliderAccessWidth) {\r\n                                $tp.find('table:visible').each(function () {\r\n                                    var $g = $(this),\r\n\t\t\t\t\t\t\t\t\t\toldWidth = $g.outerWidth(),\r\n\t\t\t\t\t\t\t\t\t\toldMarginLeft = $g.css(rtl ? 'marginRight' : 'marginLeft').toString().replace('%', ''),\r\n\t\t\t\t\t\t\t\t\t\tnewWidth = oldWidth - sliderAccessWidth,\r\n\t\t\t\t\t\t\t\t\t\tnewMarginLeft = ((oldMarginLeft * newWidth) / oldWidth) + '%',\r\n\t\t\t\t\t\t\t\t\t\tcss = { width: newWidth, marginRight: 0, marginLeft: 0 };\r\n                                    css[rtl ? 'marginRight' : 'marginLeft'] = newMarginLeft;\r\n                                    $g.css(css);\r\n                                });\r\n                            }\r\n                        }\r\n                    }, 10);\r\n                }\r\n                // end slideAccess integration\r\n\r\n                tp_inst._limitMinMaxDateTime(this.inst, true);\r\n            }\r\n        },\r\n\r\n        /*\r\n        * This function tries to limit the ability to go outside the\r\n        * min/max date range\r\n        */\r\n        _limitMinMaxDateTime: function (dp_inst, adjustSliders) {\r\n            var o = this._defaults,\r\n\t\t\t\tdp_date = new Date(dp_inst.selectedYear, dp_inst.selectedMonth, dp_inst.selectedDay);\r\n\r\n            if (!this._defaults.showTimepicker) {\r\n                return;\r\n            } // No time so nothing to check here\r\n\r\n            if ($.datepicker._get(dp_inst, 'minDateTime') !== null && $.datepicker._get(dp_inst, 'minDateTime') !== undefined && dp_date) {\r\n                var minDateTime = $.datepicker._get(dp_inst, 'minDateTime'),\r\n\t\t\t\t\tminDateTimeDate = new Date(minDateTime.getFullYear(), minDateTime.getMonth(), minDateTime.getDate(), 0, 0, 0, 0);\r\n\r\n                if (this.hourMinOriginal === null || this.minuteMinOriginal === null || this.secondMinOriginal === null || this.millisecMinOriginal === null || this.microsecMinOriginal === null) {\r\n                    this.hourMinOriginal = o.hourMin;\r\n                    this.minuteMinOriginal = o.minuteMin;\r\n                    this.secondMinOriginal = o.secondMin;\r\n                    this.millisecMinOriginal = o.millisecMin;\r\n                    this.microsecMinOriginal = o.microsecMin;\r\n                }\r\n\r\n                if (dp_inst.settings.timeOnly || minDateTimeDate.getTime() === dp_date.getTime()) {\r\n                    this._defaults.hourMin = minDateTime.getHours();\r\n                    if (this.hour <= this._defaults.hourMin) {\r\n                        this.hour = this._defaults.hourMin;\r\n                        this._defaults.minuteMin = minDateTime.getMinutes();\r\n                        if (this.minute <= this._defaults.minuteMin) {\r\n                            this.minute = this._defaults.minuteMin;\r\n                            this._defaults.secondMin = minDateTime.getSeconds();\r\n                            if (this.second <= this._defaults.secondMin) {\r\n                                this.second = this._defaults.secondMin;\r\n                                this._defaults.millisecMin = minDateTime.getMilliseconds();\r\n                                if (this.millisec <= this._defaults.millisecMin) {\r\n                                    this.millisec = this._defaults.millisecMin;\r\n                                    this._defaults.microsecMin = minDateTime.getMicroseconds();\r\n                                } else {\r\n                                    if (this.microsec < this._defaults.microsecMin) {\r\n                                        this.microsec = this._defaults.microsecMin;\r\n                                    }\r\n                                    this._defaults.microsecMin = this.microsecMinOriginal;\r\n                                }\r\n                            } else {\r\n                                this._defaults.millisecMin = this.millisecMinOriginal;\r\n                                this._defaults.microsecMin = this.microsecMinOriginal;\r\n                            }\r\n                        } else {\r\n                            this._defaults.secondMin = this.secondMinOriginal;\r\n                            this._defaults.millisecMin = this.millisecMinOriginal;\r\n                            this._defaults.microsecMin = this.microsecMinOriginal;\r\n                        }\r\n                    } else {\r\n                        this._defaults.minuteMin = this.minuteMinOriginal;\r\n                        this._defaults.secondMin = this.secondMinOriginal;\r\n                        this._defaults.millisecMin = this.millisecMinOriginal;\r\n                        this._defaults.microsecMin = this.microsecMinOriginal;\r\n                    }\r\n                } else {\r\n                    this._defaults.hourMin = this.hourMinOriginal;\r\n                    this._defaults.minuteMin = this.minuteMinOriginal;\r\n                    this._defaults.secondMin = this.secondMinOriginal;\r\n                    this._defaults.millisecMin = this.millisecMinOriginal;\r\n                    this._defaults.microsecMin = this.microsecMinOriginal;\r\n                }\r\n            }\r\n\r\n            if ($.datepicker._get(dp_inst, 'maxDateTime') !== null && $.datepicker._get(dp_inst, 'maxDateTime') !== undefined && dp_date) {\r\n                var maxDateTime = $.datepicker._get(dp_inst, 'maxDateTime'),\r\n\t\t\t\t\tmaxDateTimeDate = new Date(maxDateTime.getFullYear(), maxDateTime.getMonth(), maxDateTime.getDate(), 0, 0, 0, 0);\r\n\r\n                if (this.hourMaxOriginal === null || this.minuteMaxOriginal === null || this.secondMaxOriginal === null || this.millisecMaxOriginal === null) {\r\n                    this.hourMaxOriginal = o.hourMax;\r\n                    this.minuteMaxOriginal = o.minuteMax;\r\n                    this.secondMaxOriginal = o.secondMax;\r\n                    this.millisecMaxOriginal = o.millisecMax;\r\n                    this.microsecMaxOriginal = o.microsecMax;\r\n                }\r\n\r\n                if (dp_inst.settings.timeOnly || maxDateTimeDate.getTime() === dp_date.getTime()) {\r\n                    this._defaults.hourMax = maxDateTime.getHours();\r\n                    if (this.hour >= this._defaults.hourMax) {\r\n                        this.hour = this._defaults.hourMax;\r\n                        this._defaults.minuteMax = maxDateTime.getMinutes();\r\n                        if (this.minute >= this._defaults.minuteMax) {\r\n                            this.minute = this._defaults.minuteMax;\r\n                            this._defaults.secondMax = maxDateTime.getSeconds();\r\n                            if (this.second >= this._defaults.secondMax) {\r\n                                this.second = this._defaults.secondMax;\r\n                                this._defaults.millisecMax = maxDateTime.getMilliseconds();\r\n                                if (this.millisec >= this._defaults.millisecMax) {\r\n                                    this.millisec = this._defaults.millisecMax;\r\n                                    this._defaults.microsecMax = maxDateTime.getMicroseconds();\r\n                                } else {\r\n                                    if (this.microsec > this._defaults.microsecMax) {\r\n                                        this.microsec = this._defaults.microsecMax;\r\n                                    }\r\n                                    this._defaults.microsecMax = this.microsecMaxOriginal;\r\n                                }\r\n                            } else {\r\n                                this._defaults.millisecMax = this.millisecMaxOriginal;\r\n                                this._defaults.microsecMax = this.microsecMaxOriginal;\r\n                            }\r\n                        } else {\r\n                            this._defaults.secondMax = this.secondMaxOriginal;\r\n                            this._defaults.millisecMax = this.millisecMaxOriginal;\r\n                            this._defaults.microsecMax = this.microsecMaxOriginal;\r\n                        }\r\n                    } else {\r\n                        this._defaults.minuteMax = this.minuteMaxOriginal;\r\n                        this._defaults.secondMax = this.secondMaxOriginal;\r\n                        this._defaults.millisecMax = this.millisecMaxOriginal;\r\n                        this._defaults.microsecMax = this.microsecMaxOriginal;\r\n                    }\r\n                } else {\r\n                    this._defaults.hourMax = this.hourMaxOriginal;\r\n                    this._defaults.minuteMax = this.minuteMaxOriginal;\r\n                    this._defaults.secondMax = this.secondMaxOriginal;\r\n                    this._defaults.millisecMax = this.millisecMaxOriginal;\r\n                    this._defaults.microsecMax = this.microsecMaxOriginal;\r\n                }\r\n            }\r\n\r\n            if (adjustSliders !== undefined && adjustSliders === true) {\r\n                var hourMax = parseInt((this._defaults.hourMax - ((this._defaults.hourMax - this._defaults.hourMin) % this._defaults.stepHour)), 10),\r\n\t\t\t\t\tminMax = parseInt((this._defaults.minuteMax - ((this._defaults.minuteMax - this._defaults.minuteMin) % this._defaults.stepMinute)), 10),\r\n\t\t\t\t\tsecMax = parseInt((this._defaults.secondMax - ((this._defaults.secondMax - this._defaults.secondMin) % this._defaults.stepSecond)), 10),\r\n\t\t\t\t\tmillisecMax = parseInt((this._defaults.millisecMax - ((this._defaults.millisecMax - this._defaults.millisecMin) % this._defaults.stepMillisec)), 10),\r\n\t\t\t\t\tmicrosecMax = parseInt((this._defaults.microsecMax - ((this._defaults.microsecMax - this._defaults.microsecMin) % this._defaults.stepMicrosec)), 10);\r\n\r\n                if (this.hour_slider) {\r\n                    this.control.options(this, this.hour_slider, 'hour', { min: this._defaults.hourMin, max: hourMax });\r\n                    this.control.value(this, this.hour_slider, 'hour', this.hour - (this.hour % this._defaults.stepHour));\r\n                }\r\n                if (this.minute_slider) {\r\n                    this.control.options(this, this.minute_slider, 'minute', { min: this._defaults.minuteMin, max: minMax });\r\n                    this.control.value(this, this.minute_slider, 'minute', this.minute - (this.minute % this._defaults.stepMinute));\r\n                }\r\n                if (this.second_slider) {\r\n                    this.control.options(this, this.second_slider, 'second', { min: this._defaults.secondMin, max: secMax });\r\n                    this.control.value(this, this.second_slider, 'second', this.second - (this.second % this._defaults.stepSecond));\r\n                }\r\n                if (this.millisec_slider) {\r\n                    this.control.options(this, this.millisec_slider, 'millisec', { min: this._defaults.millisecMin, max: millisecMax });\r\n                    this.control.value(this, this.millisec_slider, 'millisec', this.millisec - (this.millisec % this._defaults.stepMillisec));\r\n                }\r\n                if (this.microsec_slider) {\r\n                    this.control.options(this, this.microsec_slider, 'microsec', { min: this._defaults.microsecMin, max: microsecMax });\r\n                    this.control.value(this, this.microsec_slider, 'microsec', this.microsec - (this.microsec % this._defaults.stepMicrosec));\r\n                }\r\n            }\r\n\r\n        },\r\n\r\n        /*\r\n        * when a slider moves, set the internal time...\r\n        * on time change is also called when the time is updated in the text field\r\n        */\r\n        _onTimeChange: function () {\r\n            if (!this._defaults.showTimepicker) {\r\n                return;\r\n            }\r\n            var hour = (this.hour_slider) ? this.control.value(this, this.hour_slider, 'hour') : false,\r\n\t\t\t\tminute = (this.minute_slider) ? this.control.value(this, this.minute_slider, 'minute') : false,\r\n\t\t\t\tsecond = (this.second_slider) ? this.control.value(this, this.second_slider, 'second') : false,\r\n\t\t\t\tmillisec = (this.millisec_slider) ? this.control.value(this, this.millisec_slider, 'millisec') : false,\r\n\t\t\t\tmicrosec = (this.microsec_slider) ? this.control.value(this, this.microsec_slider, 'microsec') : false,\r\n\t\t\t\ttimezone = (this.timezone_select) ? this.timezone_select.val() : false,\r\n\t\t\t\to = this._defaults,\r\n\t\t\t\tpickerTimeFormat = o.pickerTimeFormat || o.timeFormat,\r\n\t\t\t\tpickerTimeSuffix = o.pickerTimeSuffix || o.timeSuffix;\r\n\r\n            if (typeof (hour) === 'object') {\r\n                hour = false;\r\n            }\r\n            if (typeof (minute) === 'object') {\r\n                minute = false;\r\n            }\r\n            if (typeof (second) === 'object') {\r\n                second = false;\r\n            }\r\n            if (typeof (millisec) === 'object') {\r\n                millisec = false;\r\n            }\r\n            if (typeof (microsec) === 'object') {\r\n                microsec = false;\r\n            }\r\n            if (typeof (timezone) === 'object') {\r\n                timezone = false;\r\n            }\r\n\r\n            if (hour !== false) {\r\n                hour = parseInt(hour, 10);\r\n            }\r\n            if (minute !== false) {\r\n                minute = parseInt(minute, 10);\r\n            }\r\n            if (second !== false) {\r\n                second = parseInt(second, 10);\r\n            }\r\n            if (millisec !== false) {\r\n                millisec = parseInt(millisec, 10);\r\n            }\r\n            if (microsec !== false) {\r\n                microsec = parseInt(microsec, 10);\r\n            }\r\n\r\n            var ampm = o[hour < 12 ? 'amNames' : 'pmNames'][0];\r\n\r\n            // If the update was done in the input field, the input field should not be updated.\r\n            // If the update was done using the sliders, update the input field.\r\n            var hasChanged = (hour !== this.hour || minute !== this.minute || second !== this.second || millisec !== this.millisec || microsec !== this.microsec ||\r\n\t\t\t\t\t(this.ampm.length > 0 && (hour < 12) !== ($.inArray(this.ampm.toUpperCase(), this.amNames) !== -1)) || (this.timezone !== null && timezone !== this.timezone));\r\n\r\n            if (hasChanged) {\r\n\r\n                if (hour !== false) {\r\n                    this.hour = hour;\r\n                }\r\n                if (minute !== false) {\r\n                    this.minute = minute;\r\n                }\r\n                if (second !== false) {\r\n                    this.second = second;\r\n                }\r\n                if (millisec !== false) {\r\n                    this.millisec = millisec;\r\n                }\r\n                if (microsec !== false) {\r\n                    this.microsec = microsec;\r\n                }\r\n                if (timezone !== false) {\r\n                    this.timezone = timezone;\r\n                }\r\n\r\n                if (!this.inst) {\r\n                    this.inst = $.datepicker._getInst(this.$input[0]);\r\n                }\r\n\r\n                this._limitMinMaxDateTime(this.inst, true);\r\n            }\r\n            if (this.support.ampm) {\r\n                this.ampm = ampm;\r\n            }\r\n\r\n            // Updates the time within the timepicker\r\n            this.formattedTime = $.datepicker.formatTime(o.timeFormat, this, o);\r\n            if (this.$timeObj) {\r\n                if (pickerTimeFormat === o.timeFormat) {\r\n                    this.$timeObj.text(this.formattedTime + pickerTimeSuffix);\r\n                }\r\n                else {\r\n                    this.$timeObj.text($.datepicker.formatTime(pickerTimeFormat, this, o) + pickerTimeSuffix);\r\n                }\r\n            }\r\n\r\n            this.timeDefined = true;\r\n            if (hasChanged) {\r\n                this._updateDateTime();\r\n            }\r\n        },\r\n\r\n        /*\r\n        * call custom onSelect.\r\n        * bind to sliders slidestop, and grid click.\r\n        */\r\n        _onSelectHandler: function () {\r\n            var onSelect = this._defaults.onSelect || this.inst.settings.onSelect;\r\n            var inputEl = this.$input ? this.$input[0] : null;\r\n            if (onSelect && inputEl) {\r\n                onSelect.apply(inputEl, [this.formattedDateTime, this]);\r\n            }\r\n        },\r\n\r\n        /*\r\n        * update our input with the new date time..\r\n        */\r\n        _updateDateTime: function (dp_inst) {\r\n            dp_inst = this.inst || dp_inst;\r\n            var dtTmp = (dp_inst.currentYear > 0 ?\r\n\t\t\t\t\t\t\tnew Date(dp_inst.currentYear, dp_inst.currentMonth, dp_inst.currentDay) :\r\n\t\t\t\t\t\t\tnew Date(dp_inst.selectedYear, dp_inst.selectedMonth, dp_inst.selectedDay)),\r\n\t\t\t\tdt = $.datepicker._daylightSavingAdjust(dtTmp),\r\n            //dt = $.datepicker._daylightSavingAdjust(new Date(dp_inst.selectedYear, dp_inst.selectedMonth, dp_inst.selectedDay)),\r\n            //dt = $.datepicker._daylightSavingAdjust(new Date(dp_inst.currentYear, dp_inst.currentMonth, dp_inst.currentDay)),\r\n\t\t\t\tdateFmt = $.datepicker._get(dp_inst, 'dateFormat'),\r\n\t\t\t\tformatCfg = $.datepicker._getFormatConfig(dp_inst),\r\n\t\t\t\ttimeAvailable = dt !== null && this.timeDefined;\r\n            this.formattedDate = $.datepicker.formatDate(dateFmt, (dt === null ? new Date() : dt), formatCfg);\r\n            var formattedDateTime = this.formattedDate;\r\n\r\n            // if a slider was changed but datepicker doesn't have a value yet, set it\r\n            if (dp_inst.lastVa === \"\") {\r\n                dp_inst.currentYear = dp_inst.selectedYear;\r\n                dp_inst.currentMonth = dp_inst.selectedMonth;\r\n                dp_inst.currentDay = dp_inst.selectedDay;\r\n            }\r\n\r\n            /*\r\n            * remove following lines to force every changes in date picker to change the input value\r\n            * Bug descriptions: when an input field has a default value, and click on the field to pop up the date picker. \r\n            * If the user manually empty the value in the input field, the date picker will never change selected value.\r\n            */\r\n            //if (dp_inst.lastVal !== undefined && (dp_inst.lastVal.length > 0 && this.$input.val().length === 0)) {\r\n            //\treturn;\r\n            //}\r\n\r\n            if (this._defaults.timeOnly === true) {\r\n                formattedDateTime = this.formattedTime;\r\n            } else if (this._defaults.timeOnly !== true && (this._defaults.alwaysSetTime || timeAvailable)) {\r\n                formattedDateTime += this._defaults.separator + this.formattedTime + this._defaults.timeSuffix;\r\n            }\r\n\r\n            this.formattedDateTime = formattedDateTime;\r\n\r\n            if (!this._defaults.showTimepicker) {\r\n                this.$input.val(this.formattedDate);\r\n            } else if (this.$altInput && this._defaults.timeOnly === false && this._defaults.altFieldTimeOnly === true) {\r\n                this.$altInput.val(this.formattedTime);\r\n                this.$input.val(this.formattedDate);\r\n            } else if (this.$altInput) {\r\n                this.$input.val(formattedDateTime);\r\n                var altFormattedDateTime = '',\r\n\t\t\t\t\taltSeparator = this._defaults.altSeparator ? this._defaults.altSeparator : this._defaults.separator,\r\n\t\t\t\t\taltTimeSuffix = this._defaults.altTimeSuffix ? this._defaults.altTimeSuffix : this._defaults.timeSuffix;\r\n\r\n                if (!this._defaults.timeOnly) {\r\n                    if (this._defaults.altFormat) {\r\n                        altFormattedDateTime = $.datepicker.formatDate(this._defaults.altFormat, (dt === null ? new Date() : dt), formatCfg);\r\n                    }\r\n                    else {\r\n                        altFormattedDateTime = this.formattedDate;\r\n                    }\r\n\r\n                    if (altFormattedDateTime) {\r\n                        altFormattedDateTime += altSeparator;\r\n                    }\r\n                }\r\n\r\n                if (this._defaults.altTimeFormat) {\r\n                    altFormattedDateTime += $.datepicker.formatTime(this._defaults.altTimeFormat, this, this._defaults) + altTimeSuffix;\r\n                }\r\n                else {\r\n                    altFormattedDateTime += this.formattedTime + altTimeSuffix;\r\n                }\r\n                this.$altInput.val(altFormattedDateTime);\r\n            } else {\r\n                this.$input.val(formattedDateTime);\r\n            }\r\n\r\n            this.$input.trigger(\"change\");\r\n        },\r\n\r\n        _onFocus: function () {\r\n            if (!this.$input.val() && this._defaults.defaultValue) {\r\n                this.$input.val(this._defaults.defaultValue);\r\n                var inst = $.datepicker._getInst(this.$input.get(0)),\r\n\t\t\t\t\ttp_inst = $.datepicker._get(inst, 'timepicker');\r\n                if (tp_inst) {\r\n                    if (tp_inst._defaults.timeOnly && (inst.input.val() !== inst.lastVal)) {\r\n                        try {\r\n                            $.datepicker._updateDatepicker(inst);\r\n                        } catch (err) {\r\n                            $.timepicker.log(err);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        },\r\n\r\n        /*\r\n        * Small abstraction to control types\r\n        * We can add more, just be sure to follow the pattern: create, options, value\r\n        */\r\n        _controls: {\r\n            // slider methods\r\n            slider: {\r\n                create: function (tp_inst, obj, unit, val, min, max, step) {\r\n                    var rtl = tp_inst._defaults.isRTL; // if rtl go -60->0 instead of 0->60\r\n                    return obj.prop('slide', null).slider({\r\n                        orientation: \"horizontal\",\r\n                        value: rtl ? val * -1 : val,\r\n                        min: rtl ? max * -1 : min,\r\n                        max: rtl ? min * -1 : max,\r\n                        step: step,\r\n                        slide: function (event, ui) {\r\n                            tp_inst.control.value(tp_inst, $(this), unit, rtl ? ui.value * -1 : ui.value);\r\n                            tp_inst._onTimeChange();\r\n                        },\r\n                        stop: function (event, ui) {\r\n                            tp_inst._onSelectHandler();\r\n                        }\r\n                    });\r\n                },\r\n                options: function (tp_inst, obj, unit, opts, val) {\r\n                    if (tp_inst._defaults.isRTL) {\r\n                        if (typeof (opts) === 'string') {\r\n                            if (opts === 'min' || opts === 'max') {\r\n                                if (val !== undefined) {\r\n                                    return obj.slider(opts, val * -1);\r\n                                }\r\n                                return Math.abs(obj.slider(opts));\r\n                            }\r\n                            return obj.slider(opts);\r\n                        }\r\n                        var min = opts.min,\r\n\t\t\t\t\t\t\tmax = opts.max;\r\n                        opts.min = opts.max = null;\r\n                        if (min !== undefined) {\r\n                            opts.max = min * -1;\r\n                        }\r\n                        if (max !== undefined) {\r\n                            opts.min = max * -1;\r\n                        }\r\n                        return obj.slider(opts);\r\n                    }\r\n                    if (typeof (opts) === 'string' && val !== undefined) {\r\n                        return obj.slider(opts, val);\r\n                    }\r\n                    return obj.slider(opts);\r\n                },\r\n                value: function (tp_inst, obj, unit, val) {\r\n                    if (tp_inst._defaults.isRTL) {\r\n                        if (val !== undefined) {\r\n                            return obj.slider('value', val * -1);\r\n                        }\r\n                        return Math.abs(obj.slider('value'));\r\n                    }\r\n                    if (val !== undefined) {\r\n                        return obj.slider('value', val);\r\n                    }\r\n                    return obj.slider('value');\r\n                }\r\n            },\r\n            // select methods\r\n            select: {\r\n                create: function (tp_inst, obj, unit, val, min, max, step) {\r\n                    var sel = '<select class=\"ui-timepicker-select\" data-unit=\"' + unit + '\" data-min=\"' + min + '\" data-max=\"' + max + '\" data-step=\"' + step + '\">',\r\n\t\t\t\t\t\tformat = tp_inst._defaults.pickerTimeFormat || tp_inst._defaults.timeFormat;\r\n\r\n                    for (var i = min; i <= max; i += step) {\r\n                        sel += '<option value=\"' + i + '\"' + (i === val ? ' selected' : '') + '>';\r\n                        if (unit === 'hour') {\r\n                            sel += $.datepicker.formatTime($.trim(format.replace(/[^ht ]/ig, '')), { hour: i }, tp_inst._defaults);\r\n                        }\r\n                        else if (unit === 'millisec' || unit === 'microsec' || i >= 10) { sel += i; }\r\n                        else { sel += '0' + i.toString(); }\r\n                        sel += '</option>';\r\n                    }\r\n                    sel += '</select>';\r\n\r\n                    obj.children('select').remove();\r\n\r\n                    $(sel).appendTo(obj).change(function (e) {\r\n                        tp_inst._onTimeChange();\r\n                        tp_inst._onSelectHandler();\r\n                    });\r\n\r\n                    return obj;\r\n                },\r\n                options: function (tp_inst, obj, unit, opts, val) {\r\n                    var o = {},\r\n\t\t\t\t\t\t$t = obj.children('select');\r\n                    if (typeof (opts) === 'string') {\r\n                        if (val === undefined) {\r\n                            return $t.data(opts);\r\n                        }\r\n                        o[opts] = val;\r\n                    }\r\n                    else { o = opts; }\r\n                    return tp_inst.control.create(tp_inst, obj, $t.data('unit'), $t.val(), o.min || $t.data('min'), o.max || $t.data('max'), o.step || $t.data('step'));\r\n                },\r\n                value: function (tp_inst, obj, unit, val) {\r\n                    var $t = obj.children('select');\r\n                    if (val !== undefined) {\r\n                        return $t.val(val);\r\n                    }\r\n                    return $t.val();\r\n                }\r\n            }\r\n        } // end _controls\r\n\r\n    });\r\n\r\n    $.fn.extend({\r\n        /*\r\n        * shorthand just to use timepicker.\r\n        */\r\n        timepicker: function (o) {\r\n            o = o || {};\r\n            var tmp_args = Array.prototype.slice.call(arguments);\r\n\r\n            if (typeof o === 'object') {\r\n                tmp_args[0] = $.extend(o, {\r\n                    timeOnly: true\r\n                });\r\n            }\r\n\r\n            return $(this).each(function () {\r\n                $.fn.datetimepicker.apply($(this), tmp_args);\r\n            });\r\n        },\r\n\r\n        /*\r\n        * extend timepicker to datepicker\r\n        */\r\n        datetimepicker: function (o) {\r\n            o = o || {};\r\n            var tmp_args = arguments;\r\n\r\n            if (typeof (o) === 'string') {\r\n                if (o === 'getDate') {\r\n                    return $.fn.datepicker.apply($(this[0]), tmp_args);\r\n                } else {\r\n                    return this.each(function () {\r\n                        var $t = $(this);\r\n                        $t.datepicker.apply($t, tmp_args);\r\n                    });\r\n                }\r\n            } else {\r\n                return this.each(function () {\r\n                    var $t = $(this);\r\n                    $t.datepicker($.timepicker._newInst($t, o)._defaults);\r\n                });\r\n            }\r\n        }\r\n    });\r\n\r\n    /*\r\n    * Public Utility to parse date and time\r\n    */\r\n    $.datepicker.parseDateTime = function (dateFormat, timeFormat, dateTimeString, dateSettings, timeSettings) {\r\n        var parseRes = parseDateTimeInternal(dateFormat, timeFormat, dateTimeString, dateSettings, timeSettings);\r\n        if (parseRes.timeObj) {\r\n            var t = parseRes.timeObj;\r\n            parseRes.date.setHours(t.hour, t.minute, t.second, t.millisec);\r\n            parseRes.date.setMicroseconds(t.microsec);\r\n        }\r\n\r\n        return parseRes.date;\r\n    };\r\n\r\n    /*\r\n    * Public utility to parse time\r\n    */\r\n    $.datepicker.parseTime = function (timeFormat, timeString, options) {\r\n        var o = extendRemove(extendRemove({}, $.timepicker._defaults), options || {}),\r\n\t\t\tiso8601 = (timeFormat.replace(/\\'.*?\\'/g, '').indexOf('Z') !== -1);\r\n\r\n        // Strict parse requires the timeString to match the timeFormat exactly\r\n        var strictParse = function (f, s, o) {\r\n\r\n            // pattern for standard and localized AM/PM markers\r\n            var getPatternAmpm = function (amNames, pmNames) {\r\n                var markers = [];\r\n                if (amNames) {\r\n                    $.merge(markers, amNames);\r\n                }\r\n                if (pmNames) {\r\n                    $.merge(markers, pmNames);\r\n                }\r\n                markers = $.map(markers, function (val) {\r\n                    return val.replace(/[.*+?|()\\[\\]{}\\\\]/g, '\\\\$&');\r\n                });\r\n                return '(' + markers.join('|') + ')?';\r\n            };\r\n\r\n            // figure out position of time elements.. cause js cant do named captures\r\n            var getFormatPositions = function (timeFormat) {\r\n                var finds = timeFormat.toLowerCase().match(/(h{1,2}|m{1,2}|s{1,2}|l{1}|c{1}|t{1,2}|z|'.*?')/g),\r\n\t\t\t\t\torders = {\r\n\t\t\t\t\t    h: -1,\r\n\t\t\t\t\t    m: -1,\r\n\t\t\t\t\t    s: -1,\r\n\t\t\t\t\t    l: -1,\r\n\t\t\t\t\t    c: -1,\r\n\t\t\t\t\t    t: -1,\r\n\t\t\t\t\t    z: -1\r\n\t\t\t\t\t};\r\n\r\n                if (finds) {\r\n                    for (var i = 0; i < finds.length; i++) {\r\n                        if (orders[finds[i].toString().charAt(0)] === -1) {\r\n                            orders[finds[i].toString().charAt(0)] = i + 1;\r\n                        }\r\n                    }\r\n                }\r\n                return orders;\r\n            };\r\n\r\n            var regstr = '^' + f.toString()\r\n\t\t\t\t\t.replace(/([hH]{1,2}|mm?|ss?|[tT]{1,2}|[zZ]|[lc]|'.*?')/g, function (match) {\r\n\t\t\t\t\t    var ml = match.length;\r\n\t\t\t\t\t    switch (match.charAt(0).toLowerCase()) {\r\n\t\t\t\t\t        case 'h':\r\n\t\t\t\t\t            return ml === 1 ? '(\\\\d?\\\\d)' : '(\\\\d{' + ml + '})';\r\n\t\t\t\t\t        case 'm':\r\n\t\t\t\t\t            return ml === 1 ? '(\\\\d?\\\\d)' : '(\\\\d{' + ml + '})';\r\n\t\t\t\t\t        case 's':\r\n\t\t\t\t\t            return ml === 1 ? '(\\\\d?\\\\d)' : '(\\\\d{' + ml + '})';\r\n\t\t\t\t\t        case 'l':\r\n\t\t\t\t\t            return '(\\\\d?\\\\d?\\\\d)';\r\n\t\t\t\t\t        case 'c':\r\n\t\t\t\t\t            return '(\\\\d?\\\\d?\\\\d)';\r\n\t\t\t\t\t        case 'z':\r\n\t\t\t\t\t            return '(z|[-+]\\\\d\\\\d:?\\\\d\\\\d|\\\\S+)?';\r\n\t\t\t\t\t        case 't':\r\n\t\t\t\t\t            return getPatternAmpm(o.amNames, o.pmNames);\r\n\t\t\t\t\t        default:    // literal escaped in quotes\r\n\t\t\t\t\t            return '(' + match.replace(/\\'/g, \"\").replace(/(\\.|\\$|\\^|\\\\|\\/|\\(|\\)|\\[|\\]|\\?|\\+|\\*)/g, function (m) { return \"\\\\\" + m; }) + ')?';\r\n\t\t\t\t\t    }\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.replace(/\\s/g, '\\\\s?') +\r\n\t\t\t\t\to.timeSuffix + '$',\r\n\t\t\t\torder = getFormatPositions(f),\r\n\t\t\t\tampm = '',\r\n\t\t\t\ttreg;\r\n\r\n            treg = s.match(new RegExp(regstr, 'i'));\r\n\r\n            var resTime = {\r\n                hour: 0,\r\n                minute: 0,\r\n                second: 0,\r\n                millisec: 0,\r\n                microsec: 0\r\n            };\r\n\r\n            if (treg) {\r\n                if (order.t !== -1) {\r\n                    if (treg[order.t] === undefined || treg[order.t].length === 0) {\r\n                        ampm = '';\r\n                        resTime.ampm = '';\r\n                    } else {\r\n                        ampm = $.inArray(treg[order.t].toUpperCase(), o.amNames) !== -1 ? 'AM' : 'PM';\r\n                        resTime.ampm = o[ampm === 'AM' ? 'amNames' : 'pmNames'][0];\r\n                    }\r\n                }\r\n\r\n                if (order.h !== -1) {\r\n                    if (ampm === 'AM' && treg[order.h] === '12') {\r\n                        resTime.hour = 0; // 12am = 0 hour\r\n                    } else {\r\n                        if (ampm === 'PM' && treg[order.h] !== '12') {\r\n                            resTime.hour = parseInt(treg[order.h], 10) + 12; // 12pm = 12 hour, any other pm = hour + 12\r\n                        } else {\r\n                            resTime.hour = Number(treg[order.h]);\r\n                        }\r\n                    }\r\n                }\r\n\r\n                if (order.m !== -1) {\r\n                    resTime.minute = Number(treg[order.m]);\r\n                }\r\n                if (order.s !== -1) {\r\n                    resTime.second = Number(treg[order.s]);\r\n                }\r\n                if (order.l !== -1) {\r\n                    resTime.millisec = Number(treg[order.l]);\r\n                }\r\n                if (order.c !== -1) {\r\n                    resTime.microsec = Number(treg[order.c]);\r\n                }\r\n                if (order.z !== -1 && treg[order.z] !== undefined) {\r\n                    resTime.timezone = $.timepicker.timezoneOffsetNumber(treg[order.z]);\r\n                }\r\n\r\n\r\n                return resTime;\r\n            }\r\n            return false;\r\n        }; // end strictParse\r\n\r\n        // First try JS Date, if that fails, use strictParse\r\n        var looseParse = function (f, s, o) {\r\n            try {\r\n                var d = new Date('2012-01-01 ' + s);\r\n                if (isNaN(d.getTime())) {\r\n                    d = new Date('2012-01-01T' + s);\r\n                    if (isNaN(d.getTime())) {\r\n                        d = new Date('01/01/2012 ' + s);\r\n                        if (isNaN(d.getTime())) {\r\n                            throw \"Unable to parse time with native Date: \" + s;\r\n                        }\r\n                    }\r\n                }\r\n\r\n                return {\r\n                    hour: d.getHours(),\r\n                    minute: d.getMinutes(),\r\n                    second: d.getSeconds(),\r\n                    millisec: d.getMilliseconds(),\r\n                    microsec: d.getMicroseconds(),\r\n                    timezone: d.getTimezoneOffset() * -1\r\n                };\r\n            }\r\n            catch (err) {\r\n                try {\r\n                    return strictParse(f, s, o);\r\n                }\r\n                catch (err2) {\r\n                    $.timepicker.log(\"Unable to parse \\ntimeString: \" + s + \"\\ntimeFormat: \" + f);\r\n                }\r\n            }\r\n            return false;\r\n        }; // end looseParse\r\n\r\n        if (typeof o.parse === \"function\") {\r\n            return o.parse(timeFormat, timeString, o);\r\n        }\r\n        if (o.parse === 'loose') {\r\n            return looseParse(timeFormat, timeString, o);\r\n        }\r\n        return strictParse(timeFormat, timeString, o);\r\n    };\r\n\r\n    /**\r\n    * Public utility to format the time\r\n    * @param {string} format format of the time\r\n    * @param {Object} time Object not a Date for timezones\r\n    * @param {Object} [options] essentially the regional[].. amNames, pmNames, ampm\r\n    * @returns {string} the formatted time\r\n    */\r\n    $.datepicker.formatTime = function (format, time, options) {\r\n        options = options || {};\r\n        options = $.extend({}, $.timepicker._defaults, options);\r\n        time = $.extend({\r\n            hour: 0,\r\n            minute: 0,\r\n            second: 0,\r\n            millisec: 0,\r\n            microsec: 0,\r\n            timezone: null\r\n        }, time);\r\n\r\n        var tmptime = format,\r\n\t\t\tampmName = options.amNames[0],\r\n\t\t\thour = parseInt(time.hour, 10);\r\n\r\n        if (hour > 11) {\r\n            ampmName = options.pmNames[0];\r\n        }\r\n\r\n        tmptime = tmptime.replace(/(?:HH?|hh?|mm?|ss?|[tT]{1,2}|[zZ]|[lc]|'.*?')/g, function (match) {\r\n            switch (match) {\r\n                case 'HH':\r\n                    return ('0' + hour).slice(-2);\r\n                case 'H':\r\n                    return hour;\r\n                case 'hh':\r\n                    return ('0' + convert24to12(hour)).slice(-2);\r\n                case 'h':\r\n                    return convert24to12(hour);\r\n                case 'mm':\r\n                    return ('0' + time.minute).slice(-2);\r\n                case 'm':\r\n                    return time.minute;\r\n                case 'ss':\r\n                    return ('0' + time.second).slice(-2);\r\n                case 's':\r\n                    return time.second;\r\n                case 'l':\r\n                    return ('00' + time.millisec).slice(-3);\r\n                case 'c':\r\n                    return ('00' + time.microsec).slice(-3);\r\n                case 'z':\r\n                    return $.timepicker.timezoneOffsetString(time.timezone === null ? options.timezone : time.timezone, false);\r\n                case 'Z':\r\n                    return $.timepicker.timezoneOffsetString(time.timezone === null ? options.timezone : time.timezone, true);\r\n                case 'T':\r\n                    return ampmName.charAt(0).toUpperCase();\r\n                case 'TT':\r\n                    return ampmName.toUpperCase();\r\n                case 't':\r\n                    return ampmName.charAt(0).toLowerCase();\r\n                case 'tt':\r\n                    return ampmName.toLowerCase();\r\n                default:\r\n                    return match.replace(/'/g, \"\");\r\n            }\r\n        });\r\n\r\n        return tmptime;\r\n    };\r\n\r\n    /*\r\n    * the bad hack :/ override datepicker so it doesn't close on select\r\n    // inspired: http://stackoverflow.com/questions/1252512/jquery-datepicker-prevent-closing-picker-when-clicking-a-date/1762378#1762378\r\n    */\r\n    $.datepicker._base_selectDate = $.datepicker._selectDate;\r\n    $.datepicker._selectDate = function (id, dateStr) {\r\n        var inst = this._getInst($(id)[0]),\r\n\t\t\ttp_inst = this._get(inst, 'timepicker');\r\n\r\n        if (tp_inst) {\r\n            tp_inst._limitMinMaxDateTime(inst, true);\r\n            inst.inline = inst.stay_open = true;\r\n            //This way the onSelect handler called from calendarpicker get the full dateTime\r\n            this._base_selectDate(id, dateStr);\r\n            inst.inline = inst.stay_open = false;\r\n            this._notifyChange(inst);\r\n            this._updateDatepicker(inst);\r\n        } else {\r\n            this._base_selectDate(id, dateStr);\r\n        }\r\n    };\r\n\r\n    /*\r\n    * second bad hack :/ override datepicker so it triggers an event when changing the input field\r\n    * and does not redraw the datepicker on every selectDate event\r\n    */\r\n    $.datepicker._base_updateDatepicker = $.datepicker._updateDatepicker;\r\n    $.datepicker._updateDatepicker = function (inst) {\r\n\r\n        // don't popup the datepicker if there is another instance already opened\r\n        var input = inst.input[0];\r\n        if ($.datepicker._curInst && $.datepicker._curInst !== inst && $.datepicker._datepickerShowing && $.datepicker._lastInput !== input) {\r\n            return;\r\n        }\r\n\r\n        if (typeof (inst.stay_open) !== 'boolean' || inst.stay_open === false) {\r\n\r\n            this._base_updateDatepicker(inst);\r\n\r\n            // Reload the time control when changing something in the input text field.\r\n            var tp_inst = this._get(inst, 'timepicker');\r\n            if (tp_inst) {\r\n                tp_inst._addTimePicker(inst);\r\n            }\r\n        }\r\n    };\r\n\r\n    /*\r\n    * third bad hack :/ override datepicker so it allows spaces and colon in the input field\r\n    */\r\n    $.datepicker._base_doKeyPress = $.datepicker._doKeyPress;\r\n    $.datepicker._doKeyPress = function (event) {\r\n        var inst = $.datepicker._getInst(event.target),\r\n\t\t\ttp_inst = $.datepicker._get(inst, 'timepicker');\r\n\r\n        if (tp_inst) {\r\n            if ($.datepicker._get(inst, 'constrainInput')) {\r\n                var ampm = tp_inst.support.ampm,\r\n\t\t\t\t\ttz = tp_inst._defaults.showTimezone !== null ? tp_inst._defaults.showTimezone : tp_inst.support.timezone,\r\n\t\t\t\t\tdateChars = $.datepicker._possibleChars($.datepicker._get(inst, 'dateFormat')),\r\n\t\t\t\t\tdatetimeChars = tp_inst._defaults.timeFormat.toString()\r\n\t\t\t\t\t\t\t\t\t\t\t.replace(/[hms]/g, '')\r\n\t\t\t\t\t\t\t\t\t\t\t.replace(/TT/g, ampm ? 'APM' : '')\r\n\t\t\t\t\t\t\t\t\t\t\t.replace(/Tt/g, ampm ? 'AaPpMm' : '')\r\n\t\t\t\t\t\t\t\t\t\t\t.replace(/tT/g, ampm ? 'AaPpMm' : '')\r\n\t\t\t\t\t\t\t\t\t\t\t.replace(/T/g, ampm ? 'AP' : '')\r\n\t\t\t\t\t\t\t\t\t\t\t.replace(/tt/g, ampm ? 'apm' : '')\r\n\t\t\t\t\t\t\t\t\t\t\t.replace(/t/g, ampm ? 'ap' : '') +\r\n\t\t\t\t\t\t\t\t\t\t\t\" \" + tp_inst._defaults.separator +\r\n\t\t\t\t\t\t\t\t\t\t\ttp_inst._defaults.timeSuffix +\r\n\t\t\t\t\t\t\t\t\t\t\t(tz ? tp_inst._defaults.timezoneList.join('') : '') +\r\n\t\t\t\t\t\t\t\t\t\t\t(tp_inst._defaults.amNames.join('')) + (tp_inst._defaults.pmNames.join('')) +\r\n\t\t\t\t\t\t\t\t\t\t\tdateChars,\r\n\t\t\t\t\tchr = String.fromCharCode(event.charCode === undefined ? event.keyCode : event.charCode);\r\n                return event.ctrlKey || (chr < ' ' || !dateChars || datetimeChars.indexOf(chr) > -1);\r\n            }\r\n        }\r\n\r\n        return $.datepicker._base_doKeyPress(event);\r\n    };\r\n\r\n    /*\r\n    * Fourth bad hack :/ override _updateAlternate function used in inline mode to init altField\r\n    * Update any alternate field to synchronise with the main field.\r\n    */\r\n    $.datepicker._base_updateAlternate = $.datepicker._updateAlternate;\r\n    $.datepicker._updateAlternate = function (inst) {\r\n        var tp_inst = this._get(inst, 'timepicker');\r\n        if (tp_inst) {\r\n            var altField = tp_inst._defaults.altField;\r\n            if (altField) { // update alternate field too\r\n                var altFormat = tp_inst._defaults.altFormat || tp_inst._defaults.dateFormat,\r\n\t\t\t\t\tdate = this._getDate(inst),\r\n\t\t\t\t\tformatCfg = $.datepicker._getFormatConfig(inst),\r\n\t\t\t\t\taltFormattedDateTime = '',\r\n\t\t\t\t\taltSeparator = tp_inst._defaults.altSeparator ? tp_inst._defaults.altSeparator : tp_inst._defaults.separator,\r\n\t\t\t\t\taltTimeSuffix = tp_inst._defaults.altTimeSuffix ? tp_inst._defaults.altTimeSuffix : tp_inst._defaults.timeSuffix,\r\n\t\t\t\t\taltTimeFormat = tp_inst._defaults.altTimeFormat !== null ? tp_inst._defaults.altTimeFormat : tp_inst._defaults.timeFormat;\r\n\r\n                altFormattedDateTime += $.datepicker.formatTime(altTimeFormat, tp_inst, tp_inst._defaults) + altTimeSuffix;\r\n                if (!tp_inst._defaults.timeOnly && !tp_inst._defaults.altFieldTimeOnly && date !== null) {\r\n                    if (tp_inst._defaults.altFormat) {\r\n                        altFormattedDateTime = $.datepicker.formatDate(tp_inst._defaults.altFormat, date, formatCfg) + altSeparator + altFormattedDateTime;\r\n                    }\r\n                    else {\r\n                        altFormattedDateTime = tp_inst.formattedDate + altSeparator + altFormattedDateTime;\r\n                    }\r\n                }\r\n                $(altField).val(altFormattedDateTime);\r\n            }\r\n        }\r\n        else {\r\n            $.datepicker._base_updateAlternate(inst);\r\n        }\r\n    };\r\n\r\n    /*\r\n    * Override key up event to sync manual input changes.\r\n    */\r\n    $.datepicker._base_doKeyUp = $.datepicker._doKeyUp;\r\n    $.datepicker._doKeyUp = function (event) {\r\n        var inst = $.datepicker._getInst(event.target),\r\n\t\t\ttp_inst = $.datepicker._get(inst, 'timepicker');\r\n\r\n        if (tp_inst) {\r\n            if (tp_inst._defaults.timeOnly && (inst.input.val() !== inst.lastVal)) {\r\n                try {\r\n                    $.datepicker._updateDatepicker(inst);\r\n                } catch (err) {\r\n                    $.timepicker.log(err);\r\n                }\r\n            }\r\n        }\r\n\r\n        return $.datepicker._base_doKeyUp(event);\r\n    };\r\n\r\n    /*\r\n    * override \"Today\" button to also grab the time.\r\n    */\r\n    $.datepicker._base_gotoToday = $.datepicker._gotoToday;\r\n    $.datepicker._gotoToday = function (id) {\r\n        var inst = this._getInst($(id)[0]),\r\n\t\t\t$dp = inst.dpDiv;\r\n        this._base_gotoToday(id);\r\n        var tp_inst = this._get(inst, 'timepicker');\r\n        selectLocalTimezone(tp_inst);\r\n        var now = new Date();\r\n        this._setTime(inst, now);\r\n        $('.ui-datepicker-today', $dp).click();\r\n    };\r\n\r\n    /*\r\n    * Disable & enable the Time in the datetimepicker\r\n    */\r\n    $.datepicker._disableTimepickerDatepicker = function (target) {\r\n        var inst = this._getInst(target);\r\n        if (!inst) {\r\n            return;\r\n        }\r\n\r\n        var tp_inst = this._get(inst, 'timepicker');\r\n        $(target).datepicker('getDate'); // Init selected[Year|Month|Day]\r\n        if (tp_inst) {\r\n            inst.settings.showTimepicker = false;\r\n            tp_inst._defaults.showTimepicker = false;\r\n            tp_inst._updateDateTime(inst);\r\n        }\r\n    };\r\n\r\n    $.datepicker._enableTimepickerDatepicker = function (target) {\r\n        var inst = this._getInst(target);\r\n        if (!inst) {\r\n            return;\r\n        }\r\n\r\n        var tp_inst = this._get(inst, 'timepicker');\r\n        $(target).datepicker('getDate'); // Init selected[Year|Month|Day]\r\n        if (tp_inst) {\r\n            inst.settings.showTimepicker = true;\r\n            tp_inst._defaults.showTimepicker = true;\r\n            tp_inst._addTimePicker(inst); // Could be disabled on page load\r\n            tp_inst._updateDateTime(inst);\r\n        }\r\n    };\r\n\r\n    /*\r\n    * Create our own set time function\r\n    */\r\n    $.datepicker._setTime = function (inst, date) {\r\n        var tp_inst = this._get(inst, 'timepicker');\r\n        if (tp_inst) {\r\n            var defaults = tp_inst._defaults;\r\n\r\n            // calling _setTime with no date sets time to defaults\r\n            tp_inst.hour = date ? date.getHours() : defaults.hour;\r\n            tp_inst.minute = date ? date.getMinutes() : defaults.minute;\r\n            tp_inst.second = date ? date.getSeconds() : defaults.second;\r\n            tp_inst.millisec = date ? date.getMilliseconds() : defaults.millisec;\r\n            tp_inst.microsec = date ? date.getMicroseconds() : defaults.microsec;\r\n\r\n            //check if within min/max times.. \r\n            tp_inst._limitMinMaxDateTime(inst, true);\r\n\r\n            tp_inst._onTimeChange();\r\n            tp_inst._updateDateTime(inst);\r\n        }\r\n    };\r\n\r\n    /*\r\n    * Create new public method to set only time, callable as $().datepicker('setTime', date)\r\n    */\r\n    $.datepicker._setTimeDatepicker = function (target, date, withDate) {\r\n        var inst = this._getInst(target);\r\n        if (!inst) {\r\n            return;\r\n        }\r\n\r\n        var tp_inst = this._get(inst, 'timepicker');\r\n\r\n        if (tp_inst) {\r\n            this._setDateFromField(inst);\r\n            var tp_date;\r\n            if (date) {\r\n                if (typeof date === \"string\") {\r\n                    tp_inst._parseTime(date, withDate);\r\n                    tp_date = new Date();\r\n                    tp_date.setHours(tp_inst.hour, tp_inst.minute, tp_inst.second, tp_inst.millisec);\r\n                    tp_date.setMicroseconds(tp_inst.microsec);\r\n                } else {\r\n                    tp_date = new Date(date.getTime());\r\n                    tp_date.setMicroseconds(date.getMicroseconds());\r\n                }\r\n                if (tp_date.toString() === 'Invalid Date') {\r\n                    tp_date = undefined;\r\n                }\r\n                this._setTime(inst, tp_date);\r\n            }\r\n        }\r\n\r\n    };\r\n\r\n    /*\r\n    * override setDate() to allow setting time too within Date object\r\n    */\r\n    $.datepicker._base_setDateDatepicker = $.datepicker._setDateDatepicker;\r\n    $.datepicker._setDateDatepicker = function (target, date) {\r\n        var inst = this._getInst(target);\r\n        if (!inst) {\r\n            return;\r\n        }\r\n\r\n        if (typeof (date) === 'string') {\r\n            date = new Date(date);\r\n            if (!date.getTime()) {\r\n                $.timepicker.log(\"Error creating Date object from string.\");\r\n            }\r\n        }\r\n\r\n        var tp_inst = this._get(inst, 'timepicker');\r\n        var tp_date;\r\n        if (date instanceof Date) {\r\n            tp_date = new Date(date.getTime());\r\n            tp_date.setMicroseconds(date.getMicroseconds());\r\n        } else {\r\n            tp_date = date;\r\n        }\r\n\r\n        // This is important if you are using the timezone option, javascript's Date \r\n        // object will only return the timezone offset for the current locale, so we \r\n        // adjust it accordingly.  If not using timezone option this won't matter..\r\n        // If a timezone is different in tp, keep the timezone as is\r\n        if (tp_inst) {\r\n            // look out for DST if tz wasn't specified\r\n            if (!tp_inst.support.timezone && tp_inst._defaults.timezone === null) {\r\n                tp_inst.timezone = tp_date.getTimezoneOffset() * -1;\r\n            }\r\n            date = $.timepicker.timezoneAdjust(date, tp_inst.timezone);\r\n            tp_date = $.timepicker.timezoneAdjust(tp_date, tp_inst.timezone);\r\n        }\r\n\r\n        this._updateDatepicker(inst);\r\n        this._base_setDateDatepicker.apply(this, arguments);\r\n        this._setTimeDatepicker(target, tp_date, true);\r\n    };\r\n\r\n    /*\r\n    * override getDate() to allow getting time too within Date object\r\n    */\r\n    $.datepicker._base_getDateDatepicker = $.datepicker._getDateDatepicker;\r\n    $.datepicker._getDateDatepicker = function (target, noDefault) {\r\n        var inst = this._getInst(target);\r\n        if (!inst) {\r\n            return;\r\n        }\r\n\r\n        var tp_inst = this._get(inst, 'timepicker');\r\n\r\n        if (tp_inst) {\r\n            // if it hasn't yet been defined, grab from field\r\n            if (inst.lastVal === undefined) {\r\n                this._setDateFromField(inst, noDefault);\r\n            }\r\n\r\n            var date = this._getDate(inst);\r\n            if (date && tp_inst._parseTime($(target).val(), tp_inst.timeOnly)) {\r\n                date.setHours(tp_inst.hour, tp_inst.minute, tp_inst.second, tp_inst.millisec);\r\n                date.setMicroseconds(tp_inst.microsec);\r\n\r\n                // This is important if you are using the timezone option, javascript's Date \r\n                // object will only return the timezone offset for the current locale, so we \r\n                // adjust it accordingly.  If not using timezone option this won't matter..\r\n                if (tp_inst.timezone != null) {\r\n                    // look out for DST if tz wasn't specified\r\n                    if (!tp_inst.support.timezone && tp_inst._defaults.timezone === null) {\r\n                        tp_inst.timezone = date.getTimezoneOffset() * -1;\r\n                    }\r\n                    date = $.timepicker.timezoneAdjust(date, tp_inst.timezone);\r\n                }\r\n            }\r\n            return date;\r\n        }\r\n        return this._base_getDateDatepicker(target, noDefault);\r\n    };\r\n\r\n    /*\r\n    * override parseDate() because UI 1.8.14 throws an error about \"Extra characters\"\r\n    * An option in datapicker to ignore extra format characters would be nicer.\r\n    */\r\n    $.datepicker._base_parseDate = $.datepicker.parseDate;\r\n    $.datepicker.parseDate = function (format, value, settings) {\r\n        var date;\r\n        try {\r\n            date = this._base_parseDate(format, value, settings);\r\n        } catch (err) {\r\n            // Hack!  The error message ends with a colon, a space, and\r\n            // the \"extra\" characters.  We rely on that instead of\r\n            // attempting to perfectly reproduce the parsing algorithm.\r\n            if (err.indexOf(\":\") >= 0) {\r\n                date = this._base_parseDate(format, value.substring(0, value.length - (err.length - err.indexOf(':') - 2)), settings);\r\n                $.timepicker.log(\"Error parsing the date string: \" + err + \"\\ndate string = \" + value + \"\\ndate format = \" + format);\r\n            } else {\r\n                throw err;\r\n            }\r\n        }\r\n        return date;\r\n    };\r\n\r\n    $.datepicker._getFormatConfig = function(inst) {\r\n        var shortYearCutoff = this._get(inst, \"shortYearCutoff\");\r\n        shortYearCutoff = (typeof shortYearCutoff !== \"string\" ? shortYearCutoff :\r\n        new Date().getFullYear() % 100 + parseInt(shortYearCutoff, 10));\r\n        return { shortYearCutoff: shortYearCutoff,\r\n            dayNamesShort: this._get(inst, \"dayNamesShort\"), dayNames: this._get(inst, \"dayNames\"),\r\n            monthNamesShort: this._get(inst, \"monthNamesShort\"), monthNames: this._get(inst, \"monthNames\"),\r\n            date: {\r\n                currentDay: inst.currentDay,\r\n                currentMonth: inst.currentMonth,\r\n                currentYear:inst.currentYear\r\n            }\r\n        };\r\n    };\r\n\r\n    /*\r\n    * override formatDate to set date with time to the input\r\n    */\r\n    $.datepicker._base_formatDate = $.datepicker._formatDate;\r\n    $.datepicker._formatDate = function (inst, day, month, year) {\r\n        var tp_inst = this._get(inst, 'timepicker');\r\n        if (tp_inst) {\r\n            tp_inst._updateDateTime(inst);\r\n            return tp_inst.$input.val();\r\n        }\r\n        return this._base_formatDate(inst);\r\n    };\r\n\r\n    /*\r\n    * override options setter to add time to maxDate(Time) and minDate(Time). MaxDate\r\n    */\r\n    $.datepicker._base_optionDatepicker = $.datepicker._optionDatepicker;\r\n    $.datepicker._optionDatepicker = function (target, name, value) {\r\n        var inst = this._getInst(target),\r\n\t\t\tname_clone;\r\n        if (!inst) {\r\n            return null;\r\n        }\r\n\r\n        var tp_inst = this._get(inst, 'timepicker');\r\n        if (tp_inst) {\r\n            var min = null,\r\n\t\t\t\tmax = null,\r\n\t\t\t\tonselect = null,\r\n\t\t\t\toverrides = tp_inst._defaults.evnts,\r\n\t\t\t\tfns = {},\r\n\t\t\t\tprop;\r\n            if (typeof name === 'string') { // if min/max was set with the string\r\n                if (name === 'minDate' || name === 'minDateTime') {\r\n                    min = value;\r\n                } else if (name === 'maxDate' || name === 'maxDateTime') {\r\n                    max = value;\r\n                } else if (name === 'onSelect') {\r\n                    onselect = value;\r\n                } else if (overrides.hasOwnProperty(name)) {\r\n                    if (typeof (value) === 'undefined') {\r\n                        return overrides[name];\r\n                    }\r\n                    fns[name] = value;\r\n                    name_clone = {}; //empty results in exiting function after overrides updated\r\n                }\r\n            } else if (typeof name === 'object') { //if min/max was set with the JSON\r\n                if (name.minDate) {\r\n                    min = name.minDate;\r\n                } else if (name.minDateTime) {\r\n                    min = name.minDateTime;\r\n                } else if (name.maxDate) {\r\n                    max = name.maxDate;\r\n                } else if (name.maxDateTime) {\r\n                    max = name.maxDateTime;\r\n                }\r\n                for (prop in overrides) {\r\n                    if (overrides.hasOwnProperty(prop) && name[prop]) {\r\n                        fns[prop] = name[prop];\r\n                    }\r\n                }\r\n            }\r\n            for (prop in fns) {\r\n                if (fns.hasOwnProperty(prop)) {\r\n                    overrides[prop] = fns[prop];\r\n                    if (!name_clone) { name_clone = $.extend({}, name); }\r\n                    delete name_clone[prop];\r\n                }\r\n            }\r\n            if (name_clone && isEmptyObject(name_clone)) { return; }\r\n            if (min) { //if min was set\r\n                if (min === 0) {\r\n                    min = new Date();\r\n                } else {\r\n                    min = new Date(min);\r\n                }\r\n                tp_inst._defaults.minDate = min;\r\n                tp_inst._defaults.minDateTime = min;\r\n            } else if (max) { //if max was set\r\n                if (max === 0) {\r\n                    max = new Date();\r\n                } else {\r\n                    max = new Date(max);\r\n                }\r\n                tp_inst._defaults.maxDate = max;\r\n                tp_inst._defaults.maxDateTime = max;\r\n            } else if (onselect) {\r\n                tp_inst._defaults.onSelect = onselect;\r\n            }\r\n        }\r\n        if (value === undefined) {\r\n            return this._base_optionDatepicker.call($.datepicker, target, name);\r\n        }\r\n        return this._base_optionDatepicker.call($.datepicker, target, name_clone || name, value);\r\n    };\r\n\r\n    /*\r\n    * jQuery isEmptyObject does not check hasOwnProperty - if someone has added to the object prototype,\r\n    * it will return false for all objects\r\n    */\r\n    var isEmptyObject = function (obj) {\r\n        var prop;\r\n        for (prop in obj) {\r\n            if (obj.hasOwnProperty(prop)) {\r\n                return false;\r\n            }\r\n        }\r\n        return true;\r\n    };\r\n\r\n    /*\r\n    * jQuery extend now ignores nulls!\r\n    */\r\n    var extendRemove = function (target, props) {\r\n        $.extend(target, props);\r\n        for (var name in props) {\r\n            if (props[name] === null || props[name] === undefined) {\r\n                target[name] = props[name];\r\n            }\r\n        }\r\n        return target;\r\n    };\r\n\r\n    /*\r\n    * Determine by the time format which units are supported\r\n    * Returns an object of booleans for each unit\r\n    */\r\n    var detectSupport = function (timeFormat) {\r\n        var tf = timeFormat.replace(/'.*?'/g, '').toLowerCase(), // removes literals\r\n\t\t\tisIn = function (f, t) { // does the format contain the token?\r\n\t\t\t    return f.indexOf(t) !== -1 ? true : false;\r\n\t\t\t};\r\n        return {\r\n            hour: isIn(tf, 'h'),\r\n            minute: isIn(tf, 'm'),\r\n            second: isIn(tf, 's'),\r\n            millisec: isIn(tf, 'l'),\r\n            microsec: isIn(tf, 'c'),\r\n            timezone: isIn(tf, 'z'),\r\n            ampm: isIn(tf, 't') && isIn(timeFormat, 'h'),\r\n            iso8601: isIn(timeFormat, 'Z')\r\n        };\r\n    };\r\n\r\n    /*\r\n    * Converts 24 hour format into 12 hour\r\n    * Returns 12 hour without leading 0\r\n    */\r\n    var convert24to12 = function (hour) {\r\n        hour %= 12;\r\n\r\n        if (hour === 0) {\r\n            hour = 12;\r\n        }\r\n\r\n        return String(hour);\r\n    };\r\n\r\n    var computeEffectiveSetting = function (settings, property) {\r\n        return settings && settings[property] ? settings[property] : $.timepicker._defaults[property];\r\n    };\r\n\r\n    /*\r\n    * Splits datetime string into date and time substrings.\r\n    * Throws exception when date can't be parsed\r\n    * Returns {dateString: dateString, timeString: timeString}\r\n    */\r\n    var splitDateTime = function (dateTimeString, timeSettings) {\r\n        // The idea is to get the number separator occurrences in datetime and the time format requested (since time has\r\n        // fewer unknowns, mostly numbers and am/pm). We will use the time pattern to split.\r\n        var separator = computeEffectiveSetting(timeSettings, 'separator'),\r\n\t\t\tformat = computeEffectiveSetting(timeSettings, 'timeFormat'),\r\n\t\t\ttimeParts = format.split(separator), // how many occurrences of separator may be in our format?\r\n\t\t\ttimePartsLen = timeParts.length,\r\n\t\t\tallParts = dateTimeString.split(separator),\r\n\t\t\tallPartsLen = allParts.length;\r\n\r\n        if (allPartsLen > 1) {\r\n            return {\r\n                dateString: allParts.splice(0, allPartsLen - timePartsLen).join(separator),\r\n                timeString: allParts.splice(0, timePartsLen).join(separator)\r\n            };\r\n        }\r\n\r\n        return {\r\n            dateString: dateTimeString,\r\n            timeString: ''\r\n        };\r\n    };\r\n\r\n    /*\r\n    * Internal function to parse datetime interval\r\n    * Returns: {date: Date, timeObj: Object}, where\r\n    *   date - parsed date without time (type Date)\r\n    *   timeObj = {hour: , minute: , second: , millisec: , microsec: } - parsed time. Optional\r\n    */\r\n    var parseDateTimeInternal = function (dateFormat, timeFormat, dateTimeString, dateSettings, timeSettings) {\r\n        var date,\r\n\t\t\tparts,\r\n\t\t\tparsedTime;\r\n\r\n        parts = splitDateTime(dateTimeString, timeSettings);\r\n        date = $.datepicker._base_parseDate(dateFormat, parts.dateString, dateSettings);\r\n\r\n        if (parts.timeString === '') {\r\n            return {\r\n                date: date\r\n            };\r\n        }\r\n\r\n        parsedTime = $.datepicker.parseTime(timeFormat, parts.timeString, timeSettings);\r\n\r\n        if (!parsedTime) {\r\n            throw 'Wrong time format';\r\n        }\r\n\r\n        return {\r\n            date: date,\r\n            timeObj: parsedTime\r\n        };\r\n    };\r\n\r\n    /*\r\n    * Internal function to set timezone_select to the local timezone\r\n    */\r\n    var selectLocalTimezone = function (tp_inst, date) {\r\n        if (tp_inst && tp_inst.timezone_select) {\r\n            var now = date || new Date();\r\n            tp_inst.timezone_select.val(-now.getTimezoneOffset());\r\n        }\r\n    };\r\n\r\n    /*\r\n    * Create a Singleton Instance\r\n    */\r\n    $.timepicker = new Timepicker();\r\n\r\n    /**\r\n    * Get the timezone offset as string from a date object (eg '+0530' for UTC+5.5)\r\n    * @param {number} tzMinutes if not a number, less than -720 (-1200), or greater than 840 (+1400) this value is returned\r\n    * @param {boolean} iso8601 if true formats in accordance to iso8601 \"+12:45\"\r\n    * @return {string}\r\n    */\r\n    $.timepicker.timezoneOffsetString = function (tzMinutes, iso8601) {\r\n        if (isNaN(tzMinutes) || tzMinutes > 840 || tzMinutes < -720) {\r\n            return tzMinutes;\r\n        }\r\n\r\n        var off = tzMinutes,\r\n\t\t\tminutes = off % 60,\r\n\t\t\thours = (off - minutes) / 60,\r\n\t\t\tiso = iso8601 ? ':' : '',\r\n\t\t\ttz = (off >= 0 ? '+' : '-') + ('0' + Math.abs(hours)).slice(-2) + iso + ('0' + Math.abs(minutes)).slice(-2);\r\n\r\n        if (tz === '+00:00') {\r\n            return 'Z';\r\n        }\r\n        return tz;\r\n    };\r\n\r\n    /**\r\n    * Get the number in minutes that represents a timezone string\r\n    * @param  {string} tzString formatted like \"+0500\", \"-1245\", \"Z\"\r\n    * @return {number} the offset minutes or the original string if it doesn't match expectations\r\n    */\r\n    $.timepicker.timezoneOffsetNumber = function (tzString) {\r\n        var normalized = tzString.toString().replace(':', ''); // excuse any iso8601, end up with \"+1245\"\r\n\r\n        if (normalized.toUpperCase() === 'Z') { // if iso8601 with Z, its 0 minute offset\r\n            return 0;\r\n        }\r\n\r\n        if (!/^(\\-|\\+)\\d{4}$/.test(normalized)) { // possibly a user defined tz, so just give it back\r\n            return tzString;\r\n        }\r\n\r\n        return ((normalized.substr(0, 1) === '-' ? -1 : 1) * // plus or minus\r\n\t\t\t\t\t((parseInt(normalized.substr(1, 2), 10) * 60) + // hours (converted to minutes)\r\n\t\t\t\t\tparseInt(normalized.substr(3, 2), 10))); // minutes\r\n    };\r\n\r\n    /**\r\n    * No way to set timezone in js Date, so we must adjust the minutes to compensate. (think setDate, getDate)\r\n    * @param  {Date} date\r\n    * @param  {string} toTimezone formatted like \"+0500\", \"-1245\"\r\n    * @return {Date}\r\n    */\r\n    $.timepicker.timezoneAdjust = function (date, toTimezone) {\r\n        var toTz = $.timepicker.timezoneOffsetNumber(toTimezone);\r\n        if (!isNaN(toTz)) {\r\n            date.setMinutes(date.getMinutes() + -date.getTimezoneOffset() - toTz);\r\n        }\r\n        return date;\r\n    };\r\n\r\n    /**\r\n    * Calls `timepicker()` on the `startTime` and `endTime` elements, and configures them to\r\n    * enforce date range limits.\r\n    * n.b. The input value must be correctly formatted (reformatting is not supported)\r\n    * @param  {Element} startTime\r\n    * @param  {Element} endTime\r\n    * @param  {Object} options Options for the timepicker() call\r\n    * @return {jQuery}\r\n    */\r\n    $.timepicker.timeRange = function (startTime, endTime, options) {\r\n        return $.timepicker.handleRange('timepicker', startTime, endTime, options);\r\n    };\r\n\r\n    /**\r\n    * Calls `datetimepicker` on the `startTime` and `endTime` elements, and configures them to\r\n    * enforce date range limits.\r\n    * @param  {Element} startTime\r\n    * @param  {Element} endTime\r\n    * @param  {Object} options Options for the `timepicker()` call. Also supports `reformat`,\r\n    *   a boolean value that can be used to reformat the input values to the `dateFormat`.\r\n    * @param  {string} method Can be used to specify the type of picker to be added\r\n    * @return {jQuery}\r\n    */\r\n    $.timepicker.datetimeRange = function (startTime, endTime, options) {\r\n        $.timepicker.handleRange('datetimepicker', startTime, endTime, options);\r\n    };\r\n\r\n    /**\r\n    * Calls `datepicker` on the `startTime` and `endTime` elements, and configures them to\r\n    * enforce date range limits.\r\n    * @param  {Element} startTime\r\n    * @param  {Element} endTime\r\n    * @param  {Object} options Options for the `timepicker()` call. Also supports `reformat`,\r\n    *   a boolean value that can be used to reformat the input values to the `dateFormat`.\r\n    * @return {jQuery}\r\n    */\r\n    $.timepicker.dateRange = function (startTime, endTime, options) {\r\n        $.timepicker.handleRange('datepicker', startTime, endTime, options);\r\n    };\r\n\r\n    /**\r\n    * Calls `method` on the `startTime` and `endTime` elements, and configures them to\r\n    * enforce date range limits.\r\n    * @param  {string} method Can be used to specify the type of picker to be added\r\n    * @param  {Element} startTime\r\n    * @param  {Element} endTime\r\n    * @param  {Object} options Options for the `timepicker()` call. Also supports `reformat`,\r\n    *   a boolean value that can be used to reformat the input values to the `dateFormat`.\r\n    * @return {jQuery}\r\n    */\r\n    $.timepicker.handleRange = function (method, startTime, endTime, options) {\r\n        options = $.extend({}, {\r\n            minInterval: 0, // min allowed interval in milliseconds\r\n            maxInterval: 0, // max allowed interval in milliseconds\r\n            start: {},      // options for start picker\r\n            end: {}         // options for end picker\r\n        }, options);\r\n\r\n        function checkDates(changed, other) {\r\n            var startdt = startTime[method]('getDate'),\r\n\t\t\t\tenddt = endTime[method]('getDate'),\r\n\t\t\t\tchangeddt = changed[method]('getDate');\r\n\r\n            if (startdt !== null) {\r\n                var minDate = new Date(startdt.getTime()),\r\n\t\t\t\t\tmaxDate = new Date(startdt.getTime());\r\n\r\n                minDate.setMilliseconds(minDate.getMilliseconds() + options.minInterval);\r\n                maxDate.setMilliseconds(maxDate.getMilliseconds() + options.maxInterval);\r\n\r\n                if (options.minInterval > 0 && minDate > enddt) { // minInterval check\r\n                    endTime[method]('setDate', minDate);\r\n                }\r\n                else if (options.maxInterval > 0 && maxDate < enddt) { // max interval check\r\n                    endTime[method]('setDate', maxDate);\r\n                }\r\n                else if (startdt > enddt) {\r\n                    other[method]('setDate', changeddt);\r\n                }\r\n            }\r\n        }\r\n\r\n        function selected(changed, other, option) {\r\n            if (!changed.val()) {\r\n                return;\r\n            }\r\n            var date = changed[method].call(changed, 'getDate');\r\n            if (date !== null && options.minInterval > 0) {\r\n                if (option === 'minDate') {\r\n                    date.setMilliseconds(date.getMilliseconds() + options.minInterval);\r\n                }\r\n                if (option === 'maxDate') {\r\n                    date.setMilliseconds(date.getMilliseconds() - options.minInterval);\r\n                }\r\n            }\r\n            if (date.getTime) {\r\n                other[method].call(other, 'option', option, date);\r\n            }\r\n        }\r\n\r\n        $.fn[method].call(startTime, $.extend({\r\n            onClose: function (dateText, inst) {\r\n                checkDates($(this), endTime);\r\n            },\r\n            onSelect: function (selectedDateTime) {\r\n                selected($(this), endTime, 'minDate');\r\n            }\r\n        }, options, options.start));\r\n        $.fn[method].call(endTime, $.extend({\r\n            onClose: function (dateText, inst) {\r\n                checkDates($(this), startTime);\r\n            },\r\n            onSelect: function (selectedDateTime) {\r\n                selected($(this), startTime, 'maxDate');\r\n            }\r\n        }, options, options.end));\r\n\r\n        checkDates(startTime, endTime);\r\n        selected(startTime, endTime, 'minDate');\r\n        selected(endTime, startTime, 'maxDate');\r\n        return $([startTime.get(0), endTime.get(0)]);\r\n    };\r\n\r\n    /**\r\n    * Log error or data to the console during error or debugging\r\n    * @param  {Object} err pass any type object to log to the console during error or debugging\r\n    * @return {void}\r\n    */\r\n    $.timepicker.log = function (err) {\r\n        if (window.console) {\r\n            window.console.log(err);\r\n        }\r\n    };\r\n\r\n    /*\r\n    * Add util object to allow access to private methods for testability.\r\n    */\r\n    $.timepicker._util = {\r\n        _extendRemove: extendRemove,\r\n        _isEmptyObject: isEmptyObject,\r\n        _convert24to12: convert24to12,\r\n        _detectSupport: detectSupport,\r\n        _selectLocalTimezone: selectLocalTimezone,\r\n        _computeEffectiveSetting: computeEffectiveSetting,\r\n        _splitDateTime: splitDateTime,\r\n        _parseDateTimeInternal: parseDateTimeInternal\r\n    };\r\n\r\n    /*\r\n    * Microsecond support\r\n    */\r\n    if (!Date.prototype.getMicroseconds) {\r\n        Date.prototype.microseconds = 0;\r\n        Date.prototype.getMicroseconds = function () { return this.microseconds; };\r\n        Date.prototype.setMicroseconds = function (m) {\r\n            this.setMilliseconds(this.getMilliseconds() + Math.floor(m / 1000));\r\n            this.microseconds = m % 1000;\r\n            return this;\r\n        };\r\n    }\r\n\r\n    /*\r\n    * Keep up with the version\r\n    */\r\n    $.timepicker.version = \"1.4\";\r\n\r\n})(jQuery);","/*\r\n* Upload control for Bizagi Workportal\r\n* @author: David Andres Nio Villalobos\r\n*/\r\n\r\n(function ($) {\r\n    $.fn.bizagiUpload = function (options) {\r\n\r\n        var self = this;\r\n        var controlReference = this;\r\n        var EXTENSIONS_INVALID = [\"exe\", \"bat\", \"bash\"];\r\n\r\n        // define options\r\n        options = options || {};\r\n\r\n        var opt = {\r\n            renderReference: {},\r\n            dialogTemplate: {},\r\n            properties: {},\r\n            uploadedFiles: -1,\r\n            maxAllowedFiles: -1,\r\n\r\n            isIE: bizagi.util.isIE,\r\n            isECM: false,\r\n            isUpdatingECM: false,\r\n\r\n            onUploadFileCompletedCallback: function () { },\r\n            onChangeFile: function () { },\r\n            onCheckMaxSize: checkMaxSize,\r\n            onValidate: function () {\r\n                return true;\r\n            },\r\n            dialogTitle: \"\",\r\n            height: 350,\r\n            width: 500,\r\n            onUploadFileProcess: function () { },\r\n            onUploadDialogReady: function () { }\r\n        };\r\n\r\n        // Extend options\r\n        $.extend(opt, opt, options);\r\n\r\n        self.opt = opt;\r\n\r\n        function init() {\r\n\r\n            bindElements();\r\n            formatExtensions();\r\n        }\r\n\r\n        // Add events\r\n        function bindElements() {\r\n\r\n            //By default, the control is enabled\r\n            if (opt.renderReference.enabled === undefined)\r\n                opt.renderReference.enabled = true;\r\n\r\n            // Click event\r\n            if (opt.isECM && opt.isUpdatingECM) {\r\n                $(\".modal-ecm .ecm-options-upgrade\", self).click(function () {\r\n                    if (opt.renderReference.enabled) {\r\n                        //Hides the modal control\r\n                        $(\".modal-ecm\", self).hide();\r\n\r\n                        // Open dialog\r\n                        openUploadDialog();\r\n                    }\r\n                });\r\n\r\n            } else {\r\n                self.click(function () {\r\n                    if (opt.renderReference.enabled)\r\n                        openUploadDialog(); // Open dialog\r\n                });\r\n            }\r\n        }\r\n\r\n        /*\r\n\t\t * Adjust the valid extensions, to keep it in a list wich is used inside the upload dialog template\r\n\t\t */\r\n        function formatExtensions() {\r\n\r\n            if (opt.properties.validExtensions != \"\") {\r\n                var extensionList = opt.properties.validExtensions.replaceAll(\"*\", \"\");\r\n                extensionList = extensionList.replaceAll(\";\", \",\");\r\n\r\n                opt.properties.processedFileExtension = extensionList;\r\n            }\r\n        }\r\n\r\n        /*\r\n\t\t * open the upload Dialog\r\n\t\t */\r\n        function openUploadDialog() {\r\n            var self = this;\r\n            var doc = window.document;\r\n            var dialogBox = self.dialogBox = $(\"<div class='ui-bizagi-component-loading'/>\");\r\n            var reverseButtons = false;\r\n\r\n            if (opt.renderReference.getFormContainer) {\r\n                reverseButtons = opt.renderReference.getFormContainer().properties.orientation == \"rtl\" ? true : false;\r\n            }\r\n\r\n            // Reset Flag\r\n            self.isClicked = false;\r\n\r\n            var buttons = [];\r\n\r\n            // Select button\r\n            buttons[0] = {\r\n                text: bizagi.localization.getResource(\"render-upload-dialog-select\"),\r\n                click: function (e) {\r\n\r\n                    var result = false;\r\n\r\n                    if (!self.isClicked) {\r\n                        self.isClicked = true;\r\n\r\n                        if ((opt.onCheckMaxSize(opt.renderReference) && checkFileTypes() && opt.onValidate(opt.renderReference))) {\r\n                            //Check this parameter exclusive for upload control\r\n                            if (opt.uploadedFiles > 0 && opt.maxAllowedFiles > 0) {\r\n                                result = !maxFilesLimit() ? true : false;\r\n                            } else {\r\n                                result = true;\r\n                            }\r\n\r\n                            //Separated Logic for ECM upload dialog\r\n                            if (opt.isECM) {\r\n\r\n                                var fileName = $('input[type=file]', dialogBox).val();\r\n                                fileName = fileName.substring(fileName.lastIndexOf(\"\\\\\") + 1, fileName.length);\r\n                                $('[name=Filename]', self.dialobBox).val(fileName);\r\n\r\n                                if (opt.isUpdatingECM) {\r\n                                    var extension = \"*\" + fileName.substring(fileName.lastIndexOf(\".\"), fileName.length);\r\n                                    $('[name=fileext]', self.dialobBox).val(extension);\r\n                                }\r\n                            }\r\n\r\n\r\n                            if (result) {\r\n                                opt.onUploadFileProcess();\r\n                                $.when(processUploadFile.call(this)).done(function (data) {\r\n                                    if (opt.isECM) {\r\n                                        var response = JSON.parse(data);\r\n\r\n                                        if (opt.isUpdatingECM) {\r\n                                            //Inserts manually the attributes\r\n                                            if (response.xpath)\r\n                                                result.xPath = result.xpath;\r\n\r\n                                            if (!response.idPageCache)\r\n                                                response.idPageCache = opt.properties.idPageCache;\r\n\r\n                                            response.filename = response.fileName;\r\n\r\n                                            var data = {\r\n                                                fileName: response.fileName,\r\n                                                idAttrib: response.idAttrib,\r\n                                                idFileUpload: response.idFileUpload,\r\n                                                idPageCache: response.idPageCache,\r\n                                                xPath: opt.properties.xPath,\r\n                                                xpathContext: opt.properties.xpathContext\r\n                                            };\r\n\r\n                                            opt.onUploadFileCompletedCallback(opt.renderReference, data, controlReference, response);\r\n                                        } else {\r\n                                            opt.onUploadFileCompletedCallback(opt.renderReference, response);\r\n                                        }\r\n                                    } else\r\n                                        opt.onUploadFileCompletedCallback(opt.renderReference, data);\r\n\r\n                                    if (opt.alertAfterUpload) {\r\n                                        bizagi.showMessageBox(bizagi.localization.getResource(opt.alertAfterUpload), \"Bizagi\", \"info\");\r\n                                    }\r\n                                    closeUploadDialog();\r\n                                });\r\n                            }\r\n                        } else {\r\n                            self.isClicked = false;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n\r\n\r\n\r\n            // Cancel button\r\n            buttons[1] = {\r\n                text: bizagi.localization.getResource(\"text-cancel\"),\r\n                click: function () {\r\n                    closeUploadDialog();\r\n                }\r\n            }\r\n\r\n            if (reverseButtons)\r\n                buttons.reverse();\r\n\r\n            // Creates a dialog\r\n            opt.renderReference.dialogBox = dialogBox.dialog({\r\n                width: opt.width,\r\n                height: opt.height,\r\n                title: opt.dialogTitle,\r\n                modal: true,\r\n                draggable: false,\r\n                resizable: false,\r\n                maximize: false,\r\n                buttons: buttons,\r\n                close: function () {\r\n                    closeUploadDialog();\r\n                }\r\n            });\r\n\r\n            //Creates the element with the required parameters\r\n\r\n            var contentDialog = $.tmpl(opt.dialogTemplate, opt.properties, { isIE: opt.isIE, timeout: getEstimatedTimeByNetworkSpeed });\r\n            contentDialog.appendTo(dialogBox);\r\n\r\n            // Fix issue associated to valid file extensions with IE (accept property)\r\n            $(\"input[type=file]\", contentDialog).click(function (event) {\r\n                var self = $(this);\r\n\r\n                if (self.val() !== \"\") {\r\n                    self.val(\"\");\r\n                }\r\n            });\r\n\r\n            $(\"input[type=file]\", contentDialog).change(function (event) {                \r\n                opt.onChangeFile(event.target.files);\r\n            });\r\n\r\n            $('.ui-bizagi-loading-message').remove();\r\n            opt.onUploadDialogReady();\r\n        }\r\n\r\n        /*\r\n\t\t *   Process an upload file into the server\r\n\t\t */\r\n        function processUploadFile() {\r\n            if (bizagi.util.isIE() && !(bizagi.util.isIE11() || bizagi.util.isIE10())) {\r\n                return processUploadFileOldBrowsers();\r\n            } else {\r\n                return processUploadFileModernBrowsers();\r\n            }\r\n        }\r\n\r\n        function processUploadFileOldBrowsers() {\r\n            var self = this;\r\n            var defer = new $.Deferred();\r\n            var dialogBox = opt.renderReference.dialogBox;\r\n            var uploadForm = $(\"form\", dialogBox);\r\n            var uploadIFrame = $(\"iframe\", uploadForm);\r\n\r\n            var fileControl = $(\"input[type=file]\", dialogBox).get(0) || {};\r\n            if (typeof fileControl.files !== \"undefined\") {\r\n                var netSpeed = (typeof opt.properties.networkSpeed != \"undefined\") ? opt.properties.networkSpeed : networkSpeed();\r\n                var estimatedTime = getEstimatedTimeByNetworkSpeed(fileControl.files ? fileControl.files[0].size : 666, netSpeed);\r\n                var $estimatedTime = $(\"#estimatedtime\", dialogBox);\r\n                var $statusContainer = $(\"#file-upload-status\", dialogBox);\r\n                $(\"#file-upload-status .file-upload-latency\").show();\r\n\r\n                clearInterval(self.interval);\r\n                self.interval = window.setInterval(function () {\r\n                    $estimatedTime.html(--estimatedTime + \" s\");\r\n                    if (estimatedTime <= 0) {\r\n                        $statusContainer.html(\"Still working...\");\r\n                        clearInterval(self.interval);\r\n                    }\r\n                }, 1000);\r\n            }\r\n\r\n            // When the iframe loads the user we need to evaluate the response and close the dialog\r\n            var timeoutFn = function () {\r\n                try {\r\n                    var response = \"\";\r\n                    if (uploadIFrame[0].contentWindow || windoFrameObj) {\r\n\r\n                        if (bizagi.util.isIE8()) {\r\n                            iframeContent = $(uploadIFrame[0].contentWindow.document.body);\r\n                            response = iframeContent.text();\r\n                        } else {\r\n                            iframeContent = $(uploadIFrame[0].contentWindow.eval(\"document.body\"));\r\n                            response = iframeContent.text();\r\n                        }\r\n                    }\r\n                    if (response.length > 0) {\r\n                        defer.resolve(response);\r\n                    } else {\r\n                        setTimeout(timeoutFn, 50);\r\n                    }\r\n                } catch (e) {\r\n                    // Nothing to do, just close the window and show error message\r\n                    closeUploadDialog();\r\n                    window.alert(e.toString());\r\n                }\r\n            };\r\n\r\n            ///Due to the server response, is necessary to validate which browser the client is using\r\n            if (bizagi.util.isIE() || bizagi.util.isIE11()) {\r\n                //Creates dataService object to call required services\r\n                if (!self.dataService)\r\n                    self.dataService = new bizagi.workportal.services.service();\r\n\r\n                $.when(self.dataService.getCurrentUser(\"\")).done(function (responseLogin) {\r\n                    // Execute the timed function in order to check when the response has arrived\r\n                    timeoutFn();\r\n\r\n                    // Submit the form\r\n                    uploadForm.submit();\r\n                }).fail(function (event) {\r\n                });\r\n            }\r\n            else {\r\n                // Execute the timed function in order to check when the response has arrived\r\n                timeoutFn();\r\n\r\n                // Submit the form\r\n                uploadForm.submit();\r\n            }\r\n\r\n            return defer.promise();\r\n        }\r\n\r\n        function processUploadFileModernBrowsers() {\r\n            var fileControl = $(\"input[type=file]\", dialogBox).get(0) || {};\r\n            var $form = $(\"form\", dialogBox);\r\n            var def = new $.Deferred();\r\n            var $statusElement = $(\"#file-upload-status .file-upload-statusbar\");\r\n            $statusElement.show();\r\n\r\n\r\n            var xhr = new XMLHttpRequest();\r\n\r\n            var data = new FormData();\r\n            data.append($(\"input[type=file]\", dialogBox).prop(\"name\"), fileControl.files[0]);\r\n\r\n            $(\"input[type='hidden']\", dialogBox).each(function () {\r\n                data.append(this.name, this.value);\r\n            });\r\n\r\n            var uploadProgress = function (progress) {\r\n                var percent = Math.round(progress.loaded * 100 / progress.total);\r\n                var message = (percent >= 99) ? bizagi.localization.getResource(\"render-upload-status-waiting\") : percent + \"%\";\r\n\r\n                $(\".statusbar\", $statusElement).css(\"width\", percent + \"%\");\r\n                $(\".statuspercent\", $statusElement).html(message);\r\n            };\r\n\r\n            var uploadComplete = function (e) {\r\n                def.resolve(e.target.responseText);\r\n            };\r\n\r\n            xhr.upload.addEventListener(\"progress\", uploadProgress, false);\r\n            xhr.addEventListener(\"load\", uploadComplete, false);\r\n\r\n            xhr.open(\"POST\", opt.properties.url);\r\n            xhr.setRequestHeader('X-BZXSRF-TOKEN', bizagi.getXSRFToken());\r\n            xhr.send(data);\r\n\r\n            return def.promise();\r\n        }\r\n\r\n        /*\r\n\t\t *   Verifies the maximun file size\r\n\t\t */\r\n        function checkMaxSize() {\r\n            var self = this;\r\n            var properties = opt.properties;\r\n            var dialogBox = opt.renderReference.dialogBox;\r\n            var fileControl = $(\"input[type=file]\", dialogBox).get(0) || {};\r\n\r\n            // Dont exist any way to know file size in IEx, just skip this validation\r\n            if (fileControl.files != undefined) {\r\n                if (fileControl.files.length > 0) {\r\n                    if (fileControl.files[0].size > properties.maxSize) {\r\n                        showError(bizagi.localization.getResource(\"render-upload-alert-maxsize\").replace(\"{0}\", properties.maxSize));\r\n                        return false;\r\n                    }\r\n                    return true;\r\n                } else {\r\n                    showError(bizagi.localization.getResource(\"render-required-upload\").replace(\"#label#\", \"\"));\r\n                    return false;\r\n                }\r\n            } else {\r\n                if (bizagi.util.isIE()) {\r\n                    if (fileControl.value === \"\" || !fileControl.value) {\r\n                        showError(bizagi.localization.getResource(\"render-required-upload\").replace(\"#label#\", \"\"));\r\n                        return false;\r\n                    } else {\r\n                        return true;\r\n                    }\r\n                } else {\r\n                    return true;\r\n                }\r\n            }\r\n        }\r\n\r\n        /*\r\n\t\t *   Verifies the file extension after selecting it from the \"Browse file\" dialog\r\n\t\t */\r\n        function checkFileTypes() {\r\n            var self = this;\r\n            var properties = opt.properties;\r\n            var dialogBox = self.dialogBox;\r\n            var file = $(\"input[type=file]\", dialogBox).val();\r\n\r\n            // ECM valid extension\r\n            if (opt.isECM) {\r\n\r\n                var fileName = file.substring(file.lastIndexOf(\"\\\\\") + 1, file.length);\r\n                var extension = fileName.substring(fileName.lastIndexOf(\".\"), fileName.length);\r\n\r\n                extension = extension.toLowerCase().replaceAll(\".\", \"\");\r\n\r\n                if (EXTENSIONS_INVALID.indexOf(extension) >= 0) {\r\n                    showError(bizagi.localization.getResource(\"render-upload-error-extensions\"));\r\n                    return false;\r\n                }\r\n            }\r\n\r\n            if (properties.validExtensions && properties.validExtensions.length > 0) {\r\n                var validExtensions = properties.validExtensions.replaceAll(\"*.\", \"\").split(\";\");\r\n                if (!validateFilenameExtension(file, validExtensions, true)) {\r\n                    showError(bizagi.localization.getResource(\"render-upload-allowed-extensions\") + properties.validExtensions);\r\n                    return false;\r\n                }\r\n            }\r\n            return true;\r\n        }\r\n\r\n        /*\r\n\t\t *\r\n\t\t */\r\n        function validateFilenameExtension(stringToCheck, acceptableExtensionsArray, required) {           \r\n            if (required == false && stringToCheck.length == 0) {\r\n                return true;\r\n            }\r\n\r\n            for (var i = 0; i < acceptableExtensionsArray.length; i++) {\r\n                if (acceptableExtensionsArray[i].toLowerCase() == \"*\") {\r\n                    return true\r\n                }\r\n                if (stringToCheck.toLowerCase().endsWith(acceptableExtensionsArray[i].toLowerCase())) {\r\n                    return true;\r\n                }\r\n            }\r\n            return false;\r\n        }\r\n\r\n        /*\r\n\t\t *   Check the maximun file than can be uploaded\r\n\t\t */\r\n        function maxFilesLimit() {\r\n            if (opt.uploadedFiles >= opt.maxfiles) {\r\n                return true;\r\n            } else {\r\n                return false;\r\n            }\r\n        }\r\n\r\n        /*\r\n\t\t *   Display the error inside the control\r\n\t\t */\r\n        function showError(message) {\r\n            var self = this;\r\n            var errorContainer = $(\"#alert-file-upload\", self.dialogBox);\r\n\r\n            // Empty container\r\n            errorContainer.empty();\r\n            errorContainer.show();\r\n\r\n            errorContainer.html(message);\r\n        }\r\n\r\n\r\n        /*\r\n         *   Close the upload dialog\r\n         */\r\n        function closeUploadDialog() {\r\n            var self = this;\r\n            self.dialogBox.dialog('destroy');\r\n            self.dialogBox.detach();\r\n\r\n            self.isClicked = false;\r\n        }\r\n\r\n        // Init plugin\r\n        init();\r\n\r\n        return self;\r\n    };\r\n})(jQuery);\r\n","/* \r\n * Upload control for Bizagi Workportal\r\n *\r\n * This control has the same functionality as jquery.bizagi.upload (bizagiUpload)\r\n * except it is NOT shown in a dialog\r\n * @author: Andrs Fernando Muoz Muoz\r\n */\r\n\r\n(function ($) {\r\n    $.fn.bizagiFileUpload = function (options) {\r\n\r\n        var self = this;\r\n        var contentFormUpload;\r\n\r\n        var controlReference = this;\r\n\r\n        // define options\r\n        options = options || {};\r\n\r\n        var opt = {\r\n            renderReference: {},\r\n            formTemplate: {},\r\n            properties: {},\r\n            uploadedFiles: -1,\r\n            maxAllowedFiles: -1,\r\n\r\n            isIE: bizagi.util.isIE,\r\n            isECM: false,\r\n            isUpdatingECM: false,\r\n\r\n            onUploadFileCompletedCallback: function () { },\r\n            onUploadFileFailCallback: function () { },\r\n            onChangeFile: function () { },\r\n            onCheckMaxSize: checkMaxSize,\r\n            height: 200,\r\n            width: 500,\r\n            onUploadFileProcess: function () { },\r\n            onUploadFormReady: function () { }\r\n        };\r\n\r\n        // Extend options\r\n        $.extend(opt, opt, options);\r\n\r\n        self.opt = opt;\r\n\r\n        function init() {\r\n            formatExtensions();\r\n            initUploadForm();\r\n        }\r\n\r\n\r\n        /*\r\n         * open the upload form\r\n         */\r\n        function initUploadForm() {\r\n            var contentForm = $.tmpl(opt.formTemplate, opt.properties, {isIE: opt.isIE});\r\n\r\n\r\n            self.width(\"100%\");\r\n            self.height(\"40px\");\r\n\r\n            //this.contentForm = contentForm;\r\n            contentFormUpload = contentForm;\r\n            self.html(contentForm);\r\n            $(\"input[type=file]\", contentForm).change(function (event) {\r\n                opt.onChangeFile(event.target.files);\r\n            });\r\n            bindSubmitButton();\r\n            $(\".ui-bizagi-loading-message\").remove();\r\n            opt.onUploadFormReady();\r\n        }\r\n\r\n        /*\r\n         * Adjust the valid extensions, to keep it in a list wich is used inside the upload template\r\n         */\r\n        function formatExtensions() {\r\n\r\n            if (opt.properties.validExtensions !== \"\") {\r\n                var extensionList = opt.properties.validExtensions.replaceAll(\"*\", \"\");\r\n                extensionList = extensionList.replaceAll(\";\", \",\");\r\n\r\n                opt.properties.processedFileExtension = extensionList;\r\n            }\r\n        }\r\n\r\n        function bindSubmitButton(){\r\n            var self = this;\r\n            var doc = window.document;\r\n\r\n            var contentForm = contentFormUpload;\r\n            var buttons = {};\r\n\r\n            // Select button\r\n            $(\"#upload-file\", contentForm).click(function (e) {\r\n\r\n\r\n                var result = false;\r\n\r\n                    if ((opt.onCheckMaxSize(opt.renderReference) && checkFileTypes())) {\r\n                        //start loading mask\r\n                        opt.onUploadFileProcess();\r\n                        //Check this parameter exclusive for upload control\r\n                        if (opt.uploadedFiles > 0 && opt.maxAllowedFiles > 0) {\r\n                            result = !maxFilesLimit() ? true : false;\r\n                        }\r\n                        else {\r\n                            result = true;\r\n                        }\r\n\r\n                        //Separated Logic for ECM upload form\r\n                        if (opt.isECM) {\r\n\r\n                            var fileName = $(\"input[type=file]\",  contentForm).val();\r\n                            fileName = fileName.substring(fileName.lastIndexOf(\"\\\\\") + 1, fileName.length);\r\n                            $(\"[name=Filename]\", contentForm).val(fileName);\r\n\r\n                            if (opt.isUpdatingECM) {\r\n                                var extension = \"*\" + fileName.substring(fileName.lastIndexOf(\".\"), fileName.length);\r\n                                $(\"[name=fileext]\", contentForm).val(extension);\r\n                            }\r\n                        }\r\n\r\n                        if (result) {\r\n\r\n                            $.when(processUploadFile()).done(function (data) {\r\n\r\n                                if (opt.isECM) {\r\n                                    var response = JSON.parse(data);\r\n\r\n                                    if (opt.isUpdatingECM) {\r\n                                        //Inserts manually the attributes\r\n                                        if (response.xpath)\r\n                                            result.xPath = result.xpath;\r\n                                        if (!response.idPageCache)\r\n                                            response.idPageCache = opt.properties.idPageCache;\r\n                                        response.filename = response.fileName;\r\n\r\n                                        var data = { fileName: response.fileName,\r\n                                            idAttrib: response.idAttrib,\r\n                                            idFileUpload: response.idFileUpload,\r\n                                            idPageCache: response.idPageCache,\r\n                                            xPath: opt.properties.xPath,\r\n                                            xpathContext: opt.properties.xpathContext\r\n                                        };\r\n\r\n                                        opt.onUploadFileCompletedCallback(opt.renderReference, data, controlReference, response);\r\n                                    }\r\n                                    else {\r\n                                        opt.onUploadFileCompletedCallback(opt.renderReference, response);\r\n                                    }\r\n                                }\r\n                                else\r\n                                    opt.onUploadFileCompletedCallback(opt.renderReference, data);\r\n\r\n                                if(opt.alertAfterUpload){\r\n                                    bizagi.showMessageBox(bizagi.localization.getResource(opt.alertAfterUpload), \"Bizagi\", \"info\");\r\n                                }\r\n\r\n                            }).fail(function(data) {\r\n                                opt.onUploadFileFailCallback(data);\r\n                                if(opt.alerFailtAfterUpload){\r\n                                    bizagi.showMessageBox(bizagi.localization.getResource(opt.alerFailtAfterUpload), \"Bizagi\", \"warning\");\r\n                                }\r\n                            });\r\n                        }\r\n                    }\r\n\r\n\r\n            });\r\n        }\r\n\r\n\r\n        /*\r\n         *   Process an upload file into the server\r\n         */\r\n        function processUploadFile() {\r\n            var self = this;\r\n            var defer = new $.Deferred();\r\n            var contentForm = contentFormUpload;\r\n            var uploadForm = $(\"form\", contentForm);\r\n\r\n            if (window.FormData) {\r\n                var extForm = uploadForm[0];\r\n                var $extForm = $(extForm);\r\n                var url = $extForm.attr(\"action\");\r\n                var method = $extForm.attr(\"method\");\r\n                var formData = new FormData(extForm);\r\n\r\n                $.ajax({\r\n                    url: url,\r\n                    data: formData,\r\n                    type: method,\r\n                    timeout: 24*60*1000, // 24 minutes\r\n                    contentType: false,\r\n                    processData: false,\r\n                    success: function (response) {\r\n                        if (response.length > 0) {\r\n                            var responseJSON = JSON.parse(response);\r\n                            if (responseJSON.result) {\r\n                                defer.resolve(response);\r\n                            } else {\r\n                                defer.reject(response);\r\n                            }\r\n                        } else {\r\n                            defer.reject(\"{}\");\r\n                        }\r\n                    },\r\n                    error: function (err) {\r\n                        defer.reject(\"{}\");\r\n                    }\r\n                });\r\n            } else {\r\n                var uploadIFrame = $(\"iframe\", uploadForm);\r\n                var delay = bizagi.override.delayQuestionFileUpload || 1000;\r\n                // When the iframe loads the user we need to evaluate the response\r\n                var timeoutFn = function () {\r\n                    try {\r\n                        var response = \"\";\r\n                        if (uploadIFrame[0].contentWindow) {\r\n                            var iframeContent = bizagi.util.isIE() ? $(uploadIFrame[0].contentWindow.document.body) : $(uploadIFrame[0].contentWindow.eval(\"document.body\"));\r\n\r\n                            response = iframeContent.text();\r\n                            //response = $(\"pre\", iframeContent).length == 0 ? iframeContent[0].innerHTML : $(\"pre\", iframeContent)[0].innerHTML;\r\n                        }\r\n                        if (response.length > 0) {\r\n                            var responseJSON = JSON.parse(response);\r\n                            if (responseJSON.result) {\r\n                                defer.resolve(response);\r\n                            } else {\r\n                                defer.reject(response);\r\n                            }\r\n                        } else {\r\n                            setTimeout(timeoutFn, delay);\r\n                        }\r\n                    } catch (e) {\r\n                        // Nothing to do, just show error message\r\n                        window.alert(e.toString());\r\n                    }\r\n                };\r\n\r\n                // Execute the timed function in order to check when the response has arrived\r\n                timeoutFn();\r\n\r\n                // Submit the form\r\n                //console.log(uploadForm);\r\n                uploadForm.submit();\r\n            }\r\n            \r\n\r\n            return defer.promise();\r\n        }\r\n\r\n        /*\r\n         *   Verifies the maximun file size\r\n         */\r\n        function checkMaxSize() {\r\n            var self = this;\r\n            var properties = opt.properties;\r\n            var contentForm = contentFormUpload;\r\n            var fileControl = $(\"input[type=file]\", contentForm).get(0) || {};\r\n\r\n            // Dont exist any way to know file size in IEx, just skip this validation\r\n            if (fileControl.files != undefined) {\r\n                if (fileControl.files.length > 0) {\r\n                    if (fileControl.files[0].size > properties.maxSize) {\r\n                        showError(bizagi.localization.getResource(\"render-upload-alert-maxsize\").replace(\"{0}\", properties.maxSize));\r\n                        return false;\r\n                    }\r\n                    return true;\r\n                }\r\n                else {\r\n                    showError(bizagi.localization.getResource(\"render-required-upload\").replace(\"#label#\", \"\"));\r\n                    return false;\r\n                }\r\n            } else {\r\n                if (bizagi.util.isIE()) {\r\n                    if (fileControl.value === \"\" || !fileControl.value) {\r\n                        showError(bizagi.localization.getResource(\"render-required-upload\").replace(\"#label#\", \"\"));\r\n                        return false;\r\n                    } else {\r\n                        return true;\r\n                    }\r\n                } else {\r\n                    return true;\r\n                }\r\n            }\r\n        }\r\n\r\n        /*\r\n         *   Verifies the file extension after selecting it from the \"Browse file\"\r\n         */\r\n        function checkFileTypes() {\r\n            var self = this;\r\n            var properties = opt.properties;\r\n            var contentForm = contentFormUpload;\r\n            var file = $(\"input[type=file]\", contentForm).val();\r\n            if (properties.validExtensions && properties.validExtensions.length > 0) {\r\n                var validExtensions = properties.validExtensions.replaceAll(\"*.\", \"\").split(\";\");\r\n                if (!validateFilenameExtension(file, validExtensions, true)) {\r\n                    showError(bizagi.localization.getResource(\"render-upload-allowed-extensions\") + properties.validExtensions);\r\n                    return false;\r\n                }\r\n            }\r\n            return true;\r\n        }\r\n\r\n        /*\r\n         *\r\n         */\r\n        function validateFilenameExtension(stringToCheck, acceptableExtensionsArray, required) {\r\n            if (required == false && stringToCheck.length == 0) {\r\n                return true;\r\n            }\r\n            for (var i = 0; i < acceptableExtensionsArray.length; i++) {\r\n                if (acceptableExtensionsArray[i].toLowerCase() == \"*\") {\r\n                    return true\r\n                }\r\n                if (stringToCheck.toLowerCase().endsWith(acceptableExtensionsArray[i].toLowerCase())) {\r\n                    return true;\r\n                }\r\n            }\r\n            return false;\r\n        }\r\n\r\n        /*\r\n         *   Check the maximun file than can be uploaded\r\n         */\r\n        function maxFilesLimit() {\r\n            if (opt.uploadedFiles >= opt.maxfiles) {\r\n                return true;\r\n            } else {\r\n                return false;\r\n            }\r\n        }\r\n\r\n        /*\r\n         *   Display the error inside the control\r\n         */\r\n        function showError(message) {\r\n            var self = this;\r\n            var errorContainer = $(\"#alert-file-upload\", contentFormUpload);\r\n\r\n            // Empty container\r\n            errorContainer.empty();\r\n            errorContainer.show();\r\n\r\n            errorContainer.html(message);\r\n        }\r\n\r\n\r\n\r\n\r\n        // Init plugin\r\n        init();\r\n\r\n        return self;\r\n    };\r\n})(jQuery);","/**\r\n *   Author: Alexander Mejia\r\n *   Comments:\r\n *   -   This widget will implement a custom filter for bizagi workportal module\r\n */\r\n(function ($) {\r\n    $.widget(\"ui.bizagi_filters\", {\r\n        options: {\r\n            type: 1,\r\n            parent: \"\",\r\n            data: {},\r\n            entity: false,\r\n            dataService: null,\r\n            templates: {\r\n                filterWrapper: \"\",\r\n                filterString: \"\",\r\n                filterNumber: \"\",\r\n                filterDate: \"\",\r\n                filterBoolean: \"\"\r\n            },\r\n            // Se comentan los filtros porque queryengine no tiene soporte sobre los mismos. Descomentar a la espera de que se soporten\r\n            operators: {\r\n                \"equals\": { label: \"workportal-widget-filter-operators-equals-to\", appliesTo: [\"Text\", \"Number\", \"Integer\", \"DateTime\", \"Boolean\", \"RelatedEntity\", \"Entity\", \"Currency\"], operator: \"=\" },\r\n                //\"not-equals\": { label: \"workportal-widget-filter-operators-different-to\", appliesTo: [\"Text\", \"Number\", \"Integer\", \"DateTime\", \"Entity\", \"Currency\", \"Boolean\"], operator: \"!=\" },\r\n                \"like\": { label: \"workportal-widget-filter-operators-like\", appliesTo: [\"Text\", \"TextExtended\"], operator: \"LIKE\" },\r\n                \"is-null\": { label: \"workportal-widget-filter-operators-is-null\", appliesTo: [\"Text\", \"TextExtended\", \"Number\", \"Integer\", \"DateTime\", \"Boolean\", \"Entity\", \"Currency\"], isUnary: true, operator: \"IS NULL\" },\r\n                //\"is-not-null\": { label: \"workportal-widget-filter-operators-is-not-null\", appliesTo: [\"Text\", \"Number\", \"Integer\", \"DateTime\", \"Boolean\", \"Entity\", \"Currency\"], isUnary: true, operator: \"IS NOT NULL\" },\r\n                //\"less-than\": { label: \"workportal-widget-filter-operators-less-than\", appliesTo: [\"Number\", \"Integer\", \"DateTime\", \"Currency\"], operator: \"<\" },\r\n                \"less-equals-than\": { label: \"workportal-widget-filter-operators-less-or-equal-than\", appliesTo: [\"Number\", \"Integer\", \"DateTime\", \"Currency\"], operator: \"<=\" },\r\n                //\"greater-than\": { label: \"workportal-widget-filter-operators-greater-than\", appliesTo: [\"Number\", \"Integer\", \"DateTime\", \"Currency\"], operator: \">\" },\r\n                \"greater-equals-than\": { label: \"workportal-widget-filter-operators-greater-or-equal-than\", appliesTo: [\"Number\", \"Integer\", \"DateTime\", \"Currency\"], operator: \">=\" }\r\n            },\r\n            // callbacks\r\n            change: null\r\n        },\r\n\r\n        //Test\r\n        testPrivateFunction: function (nameFunction, params) {\r\n            var self = this;\r\n            self[nameFunction].call(self, params);\r\n        },\r\n\r\n        /**\r\n         * Constructor\r\n         */\r\n        _create: function () {\r\n            var self = this;\r\n\r\n            self._on(self.element, {\r\n                \"click\": function () {\r\n                    self.buildFilter();\r\n                }\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Builds the filter with operators and control to input data\r\n         */\r\n        buildFilter: function () {\r\n            var self = this,\r\n                templates = self.options.templates;\r\n\r\n            self.filterType = self.getFilterType();\r\n\r\n            if ($.isFunction(self[\"build\" + self.filterType + \"Filter\"])) {\r\n\r\n                var $filter = self.$filter = $.tmpl(templates.filterWrapper);\r\n                $filter.appendTo(\"body\", document);\r\n\r\n                // Define handler to close the item\r\n                setTimeout(function () {\r\n                    // Capture all click elements inside the popup\r\n                    $filter.click(function (e) {\r\n                        e.stopPropagation();\r\n                    });\r\n\r\n                    // Make a document click, if the event bubbles up to here then the click was made outside popup boundaries\r\n                    $(document).one(\"click\", function (ev) {\r\n                        // Given that the previous event is to general, it is necessary to specify that the user do the click outside the jquery date picker\r\n                        if ($(ev.target).closest(\"#ui-datepicker-div\").length === 0 && $(ev.target).closest(\".ui-datepicker-header\").length === 0) {\r\n                            $filter.remove();\r\n                            // If it is a datetime filter the date picker must also be removed from the DOM\r\n                            if (self.filterType === 'DateTime') {\r\n                                $(\"#ui-datepicker-div\").remove();\r\n                            }\r\n                        }\r\n                    });\r\n                }, 100);\r\n\r\n                // Add Operators\r\n                self.addOperators($filter);\r\n                self.configureHandlers($filter);\r\n\r\n                // Add Control\r\n                self[\"build\" + self.filterType + \"Filter\"]($filter);\r\n\r\n                // Locate the widget\r\n                $filter.css(self.getPosition());\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Configure handlers for different elements of the component\r\n         */\r\n        configureHandlers: function ($filter) {\r\n            var self = this;\r\n\r\n            $filter.find(\"#biz-column-filter-buttons\").on(\"click\", \".biz-column-filter-button\", function (ev) {\r\n                var $target = $(ev.target),\r\n                    $button = $target.closest(\"button\"),\r\n                    data = self.options.data,\r\n                    buttonType = $button.data(\"button\");\r\n\r\n                if (buttonType == \"apply\") {\r\n                    self.applyFilter(data);\r\n                }\r\n                else if (buttonType == \"clear\") {\r\n                    self.options.data = {};\r\n                    self._trigger(\"change\", \"\", {});\r\n                }\r\n\r\n                $filter.remove();\r\n                // If it is a datetime filter the date picker must also be removed from the DOM\r\n                if (self.filterType === 'DateTime') {\r\n                    $(\"#ui-datepicker-div\").remove();\r\n                }\r\n            });\r\n        },\r\n\r\n        applyFilter: function(data){\r\n            var self = this;\r\n            if(data.key === \"is-null\"){\r\n                data.value = undefined;\r\n            }\r\n            if(data.key === \"is-null\" || (data.key !== \"is-null\" && typeof data.value !== \"undefined\" && data.value !== null ) ){\r\n                self._trigger(\"change\", \"\", data);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Adds operators related with the type of control\r\n         */\r\n        addOperators: function ($filter) {\r\n            var self = this;\r\n            var $operators = $filter.find(\"#biz-column-filter-operators\");\r\n            var operatorsData = self.getOperators();\r\n            var initialValue = self.getInitialValue(operatorsData);\r\n\r\n            $operators.uicombo({\r\n                data: { combo: operatorsData },\r\n                initValue: initialValue,\r\n                itemValue: function (item) {\r\n                    return item.id;\r\n                },\r\n                itemText: function (item) {\r\n                    return item.displayName;\r\n                },\r\n                onChange: function (obj) {\r\n                    self.setControlVisibility(obj.ui.data(\"value\"));\r\n                    self.update({ operator: self.getOperator(obj.ui.data(\"value\")) });\r\n                    self.update({ key: obj.ui.data(\"value\") });\r\n\r\n                    if(obj.ui.data(\"value\") === \"is-null\"){\r\n                        self.enableButton(\"filter\");\r\n                    }\r\n                    else{\r\n                        var $inputTextControl = self.$filter.find(\"#biz-column-filter-control input[type=text]\");\r\n                        if($inputTextControl.length > 0 && $inputTextControl.val().length === 0){\r\n                            self.disableButton(\"filter\");\r\n                        }\r\n                    }\r\n                }\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Returns the initial operator\r\n         */\r\n        getInitialValue: function (operatorsData) {\r\n            var self = this;\r\n            var data = self.options.data;\r\n\r\n            if (data) {\r\n                for (var i = 0, l = operatorsData.length; i < l; i++) {\r\n                    var item = operatorsData[i];\r\n                    if (item.id == data.key) {\r\n                        self.setControlVisibility(item.id);\r\n                        return item;\r\n                    }\r\n                }\r\n            }\r\n\r\n            self.setControlVisibility(operatorsData[0].id);\r\n            self.update({ operator: self.getOperator(operatorsData[0].id) });\r\n            self.update({ key: operatorsData[0].id });\r\n\r\n            return operatorsData[0];\r\n        },\r\n\r\n        /**\r\n         * Returns the properties to locate the filter\r\n         */\r\n        getPosition: function () {\r\n            var self = this;\r\n            var $parent = self.options.parent;\r\n            var offset = $parent.offset();\r\n\r\n            return {\r\n                \"top\": offset.top + $parent.height(),\r\n                \"left\": offset.left\r\n            };\r\n        },\r\n\r\n        /**\r\n         * This method returns the type of filter to build\r\n         */\r\n        getFilterType: function () {\r\n            var self = this;\r\n            var type = self.options.type;\r\n\r\n            if (self.options.entity){\r\n                return \"RelatedEntity\";\r\n            }\r\n\r\n            if (type == 15 || type == 14 || type == 16 || type == 21 || type == 22) {\r\n                return \"Text\";\r\n            }\r\n\r\n            if (type == 23) {\r\n                return \"TextExtended\";\r\n            }\r\n\r\n            if (type == 1 || type == 2 || type == 3 || type == 4) {\r\n                return (self.options.entity)? \"Entity\" : \"Integer\";\r\n            }\r\n\r\n            if (type == 6 || type == 7 || type == 10 || type == 11) {\r\n                return \"Number\";\r\n            }\r\n            if (type == 12 || type == 13) {\r\n                return \"DateTime\";\r\n            }\r\n            if (type == 5 || type == 26) {\r\n                return \"Boolean\";\r\n            }\r\n            if (type == 8) {\r\n                return \"Currency\";\r\n            }\r\n        },\r\n\r\n        validateLimitsNumbersByType: function(type, value){\r\n            var min, max, response = {};\r\n            /**\r\n             * Types Definedin Backend\r\n             * None = 0,BigInt = 1,Int = 2,SmallInt = 3,TinyInt = 4,Boolean = 5,Decimal = 6,Numeric = 7,Money = 8,Float = 10,Real = 11,DateTime = 12,SmallDateTime = 13,\r\n            Char = 14,VarChar = 15,Text = 16,Binary = 17,VarBinary = 18,Image = 19,Guid = 20,NChar = 21,NVarChar = 22,NText = 23,MxMBidirectionalRelationship = 24,\r\n            MxMUnidirectionalRelationship = 25,EntityDisabled = 26,UserAuth = 27,MxMUnidirectionalRelationshipWithoutFilter = 28,OracleNumber = 29,\r\n            Stakeholder = 30,ActivityItems = 31\r\n            */\r\n            switch(type) {\r\n                case 1:\r\n                    min = -9007199254740992;\r\n                    max = min * -1;\r\n                    break;\r\n                case 2:\r\n                case 7:\r\n                case 29:\r\n                    min = -2147483647;\r\n                    max = min * -1;\r\n                    break;\r\n                case 3:\r\n                    min = -32767;\r\n                    max = min * -1;\r\n                    break;\r\n                case 4:\r\n                    min = 0;\r\n                    max = 255;\r\n                    break;\r\n                case 6:\r\n                case 8:\r\n                    min = -922337203685477;\r\n                    max = min * -1;\r\n                    break;\r\n                case 10:\r\n                    min = -999999999999999;\r\n                    max = min * -1;\r\n                    break;\r\n                case 11:\r\n                    min = -9999999;\r\n                    max = min * -1;\r\n                    break;\r\n                default:\r\n                    min = -2147483647;\r\n                    max = min * -1;\r\n                    break;\r\n            }\r\n            if(typeof value !== \"undefined\"){\r\n                response.result = value >= min && value <= max;\r\n                response.maxValue = max;\r\n                response.sign = Math.sign(value);\r\n            }\r\n            response.message = bizagi.localization.getResource(\"workportal-widget-filter-validator-between-values\").\r\n                replace(\"{0}\", min).replace(\"{1}\", max);\r\n            return response;\r\n        },\r\n\r\n        /**\r\n         * Configure the number control\r\n         */\r\n        buildCurrencyFilter: function ($filter) {\r\n            var self = this;\r\n            var data = self.options.data || {};\r\n            var templates = self.options.templates;\r\n\r\n            var $control = $filter.find(\"#biz-column-filter-control\");\r\n            $control.append($.tmpl(templates.filterNumber, {\r\n                value: data.value || 0,\r\n                title: self.validateLimitsNumbersByType(self.options.type).message\r\n            }));\r\n\r\n            var $input = $control.find(\"input\");\r\n\r\n            $input.numeric(bizagi.currentUser.decimalSeparator);\r\n\r\n            var numericFormat = bizagi.clone(bizagi.localization.getResource(\"numericFormat\"));\r\n            if((typeof (bizagi.currentUser.symbol) != \"undefined\")){\r\n                numericFormat.symbol = bizagi.currentUser.symbol;\r\n            }\r\n            $input.formatCurrency(numericFormat);\r\n\r\n            var collectDataValue = function($input){\r\n                var value = $input.val(),\r\n                    regexString = \"/[\" + numericFormat.symbol + numericFormat.digitGroupSymbol + \"]/g\",\r\n                    regex = eval(regexString);\r\n\r\n                value = value.replace(regex, \"\");\r\n\r\n                var auxInput = $(\"<input>\").attr({\r\n                    type: \"text\",\r\n                    value: value\r\n                });\r\n\r\n                //validate number and set max value if it exceeds limits\r\n                var validationNumber = self.validateLimitsNumbersByType(self.options.type, auxInput.asNumber());\r\n                if(!validationNumber.result && value !== 0){\r\n                    value = validationNumber.maxValue * validationNumber.sign;\r\n                    $input.val(value);\r\n                    $input.formatCurrency(numericFormat);\r\n                }\r\n\r\n                if (value.length === 0) {\r\n                    value = null;\r\n                }\r\n                return value;\r\n            }\r\n\r\n            var updateValue = function () {\r\n                var value = collectDataValue($input);\r\n                self.update({ value: parseFloat(value.toString().replace(\",\", \".\")) });\r\n            };\r\n\r\n            updateValue();//Because the format set automatically value\r\n\r\n            $.proxy(self.configureHandlerInputTypeText($input, $filter, data, updateValue), self);\r\n        },\r\n\r\n        /**\r\n         * Configure the Entity control\r\n         */\r\n        buildEntityFilter: function ($filter) {\r\n            var self = this;\r\n            var data = self.options.data;\r\n            var dataService = self.options.dataService;\r\n\r\n            var $control = $filter.find(\"#biz-column-filter-control\");\r\n            $control.startLoading({ delay: 0, overlay: true });\r\n\r\n            var processEntityData = function (entityData) {\r\n\r\n                if (entityData && entityData.length > 0) {\r\n                    var initialValue = getInitialValue(entityData);\r\n                    $control.uicombo({\r\n                        data: { combo: entityData },\r\n                        initValue: initialValue,\r\n                        itemValue: function (item) {\r\n                            return item.id;\r\n                        },\r\n                        itemText: function (item) {\r\n                            return item.displayAttrib;\r\n                        },\r\n                        onChange: function (obj) {\r\n                            var auxValue = obj.ui.data(\"value\");\r\n                            if($.isNumeric(entityData[0].id)){\r\n                                auxValue = parseInt(auxValue);\r\n                            }\r\n                            self.update({ value: auxValue });\r\n                        }\r\n                    });\r\n                }\r\n                else {\r\n                    $control.text(\"No data\");\r\n                    self.disableButton(\"filter\");\r\n                }\r\n            };\r\n\r\n            var getInitialValue = function (entityData) {\r\n                if (data && data.value) {\r\n                    for (var i = 0, l = entityData.length; i < l; i++) {\r\n                        var item = entityData[i];\r\n                        if (item.id == data.value) {\r\n                            self.update({ value: item.id });\r\n                            return item;\r\n                        }\r\n                    }\r\n                }\r\n\r\n                var auxValue = entityData[0].id;\r\n                if($.isNumeric(entityData[0].id)){\r\n                    auxValue = parseInt(auxValue);\r\n                }\r\n                self.update({ value: auxValue });\r\n                return entityData[0];\r\n            };\r\n\r\n            $.when(dataService.getAdminEntityData({ idEntity: self.options.entity, idAttribute: self.options.attribute }))\r\n                .done(processEntityData)\r\n                .always(function () {\r\n                    $control.endLoading();\r\n                });\r\n        },\r\n\r\n        /**\r\n         * Configure the Related Entity\r\n         */\r\n        buildRelatedEntityFilter: function ($filter) {\r\n            //This method is necessary because is necessary a new method for each new type and specific filters type\r\n            var self = this;\r\n            self.buildEntityFilter($filter);\r\n        },\r\n\r\n        /**\r\n         * Configure the datetime control\r\n         */\r\n        buildDateTimeFilter: function ($filter) {\r\n            var self = this;\r\n            var data = self.options.data || {};\r\n            var templates = self.options.templates;\r\n            var dateFormat = bizagi.util.dateFormatter.getDateFormatByDatePickerJqueryUI().toLowerCase();\r\n            var dateFormatDisplay = bizagi.localization.getResource(\"dateFormat\").replace(/\\b(y{2})\\b/g, \"yyyy\"); // Replace yy for yyyy so the date picker can show the selected date\r\n            var $control = $filter.find(\"#biz-column-filter-control\");\r\n            var displayDate = bizagi.util.dateFormatter.formatDate(new Date(data.value), dateFormatDisplay);\r\n            displayDate = displayDate ? displayDate : undefined;\r\n            $control.append($.tmpl(templates.filterDate, { value: displayDate }));\r\n\r\n            // Parse date\r\n            var date = null;\r\n\r\n            if (data.value) {\r\n                try {\r\n                    date = new Date(data.value);\r\n                    self.enableButton(\"filter\");\r\n                }\r\n                catch (e) {\r\n                    date = null;\r\n                    self.disableButton(\"filter\");\r\n                }\r\n            }\r\n            else{\r\n                self.disableButton(\"filter\");\r\n            }\r\n\r\n            var $dateControl = $control.find(\"input\");\r\n            $dateControl.datepicker({\r\n                //defaultDate: date,\r\n                dateFormat: dateFormat,\r\n                changeMonth: true,\r\n                changeYear: true,\r\n                numberOfMonths: 1,\r\n                yearRange: \"-100:+0\",\r\n                onSelect: function (dateText, inst) {\r\n                    if (dateText) {\r\n                        var date = new Date((inst.currentMonth + 1) + \"/\" + (inst.currentDay) + \"/\" + (inst.currentYear) + \" 00:00\");\r\n                        var value = bizagi.util.dateFormatter.formatDate(date, \"MM/dd/yyyy HH:mm\");\r\n                        self.update({ value: value });\r\n                        self.enableButton(\"filter\");\r\n                    }\r\n                }\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Configure the datetime control\r\n         */\r\n        buildBooleanFilter: function ($filter) {\r\n            var self = this;\r\n            var data = self.options.data || {};\r\n            var templates = self.options.templates;\r\n\r\n            var $control = $filter.find(\"#biz-column-filter-control\");\r\n            $control.append($.tmpl(templates.filterBoolean, { value: data.value }));\r\n\r\n            $control.optiongroup();\r\n\r\n            if (data && data.value !== undefined) {\r\n                $control.optiongroup(\"setValue\", data.value.toString());\r\n            }\r\n\r\n            // Bind change event\r\n            $control.on(\"optiongroupchange\", function (evt, ui) {\r\n                var value = bizagi.util.parseBoolean(ui.value);\r\n                self.update({ value: value });\r\n            });\r\n\r\n        },\r\n\r\n        /**\r\n         * Configure the number control\r\n         */\r\n        buildIntegerFilter: function ($filter) {\r\n            var self = this;\r\n            var data = self.options.data || {};\r\n            var templates = self.options.templates;\r\n\r\n            var $control = $filter.find(\"#biz-column-filter-control\");\r\n            $control.append($.tmpl(templates.filterNumber, {\r\n                value: data.value || 0,\r\n                title: self.validateLimitsNumbersByType(self.options.type).message\r\n            }));\r\n\r\n            var $input = $control.find(\"input\");\r\n            $input.numeric();\r\n            var numericFormat = bizagi.clone(bizagi.localization.getResource(\"numericFormat\"));\r\n\r\n            $input.formatCurrency($.extend(numericFormat, { symbol: \"\", decimalDigits: 0, roundToDecimalPlace: -1 }));\r\n\r\n            var updateValue = function () {\r\n                var value = $input.val(),\r\n                    regexString = \"/[\" + numericFormat.digitGroupSymbol + \"]/g\",\r\n                    regex = eval(regexString);\r\n\r\n                value = value.replace(regex, \"\");\r\n\r\n                var auxInput = $(\"<input>\").attr({\r\n                    type: \"text\",\r\n                    value: value\r\n                });\r\n\r\n                //validate number and set max value if it exceeds limits\r\n                var validationNumber = self.validateLimitsNumbersByType(self.options.type, auxInput.asNumber());\r\n                if(!validationNumber.result && value !== 0){\r\n                    value = validationNumber.maxValue * validationNumber.sign;\r\n                    $input.val(value);\r\n                }\r\n\r\n                if (value.length === 0) {\r\n                    value = null;\r\n                }\r\n                self.update({ value: parseInt(value, 10) });\r\n            };\r\n\r\n            $.proxy(self.configureHandlerInputTypeText($input, $filter, data, updateValue), self);\r\n        },\r\n\r\n\r\n        /**\r\n         * Configure the number control\r\n         */\r\n        buildNumberFilter: function ($filter) {\r\n            var self = this;\r\n            var data = self.options.data || {};\r\n            var templates = self.options.templates;\r\n\r\n            var $control = $filter.find(\"#biz-column-filter-control\");\r\n            $control.append($.tmpl(templates.filterNumber, {\r\n                value: data.value || 0,\r\n                title: self.validateLimitsNumbersByType(self.options.type).message\r\n            }));\r\n\r\n            var $input = $control.find(\"input\");\r\n            $input.numeric(bizagi.currentUser.decimalSeparator);\r\n\r\n            var numericFormat = bizagi.clone(bizagi.localization.getResource(\"numericFormat\"));\r\n\r\n            $input.formatCurrency($.extend(numericFormat, { symbol: \"\" }));\r\n\r\n            var updateValue = function () {\r\n                var value = $input.val(),\r\n                    regexString = \"/[\" + numericFormat.digitGroupSymbol + \"]/g\",\r\n                    regex = eval(regexString);\r\n\r\n                value = value.replace(regex, \"\");\r\n\r\n                var auxInput = $(\"<input>\").attr({\r\n                    type: \"text\",\r\n                    value: value.replace(\",\", \".\")\r\n                });\r\n\r\n                //validate number and set max value if it exceeds limits\r\n                var validationNumber = self.validateLimitsNumbersByType(self.options.type, auxInput.asNumber());\r\n                if(!validationNumber.result && value !== 0){\r\n                    value = validationNumber.maxValue * validationNumber.sign;\r\n                    $input.val(value);\r\n                }\r\n\r\n                if (value.length === 0) {\r\n                    value = null;\r\n                }\r\n                self.update({ value: parseFloat(value.toString().replace(\",\", \".\")) });\r\n            };\r\n\r\n            $.proxy(self.configureHandlerInputTypeText($input, $filter, data, updateValue), self);\r\n        },\r\n\r\n        /**\r\n         * Configure the text control\r\n         */\r\n        buildTextFilter: function ($filter) {\r\n            var self = this;\r\n            var data = self.options.data || {};\r\n            var templates = self.options.templates;\r\n\r\n            var $control = $filter.find(\"#biz-column-filter-control\");\r\n            $control.append($.tmpl(templates.filterString, { value: data.value }));\r\n\r\n            var $input = $control.find(\"input\");\r\n\r\n            var updateValue = function () {\r\n                var value = $input.val();\r\n                if (value.length === 0) {\r\n                    value = null;\r\n                }\r\n                self.update({ value: value });\r\n            };\r\n\r\n            self.configureHandlerInputTypeText($input, $filter, data, updateValue);\r\n        },\r\n\r\n        /**\r\n         * Configure the text control extended\r\n         */\r\n        buildTextExtendedFilter: function ($filter) {\r\n            //This method is necessary because is necessary a new method for each new type\r\n            var self = this;\r\n            self.buildTextFilter($filter);\r\n        },\r\n\r\n        /**\r\n         *   trigger a callback/event\r\n         */\r\n        update: function (newValue) {\r\n            var self = this;\r\n            var data = self.options.data;\r\n\r\n            $.extend(data, newValue);\r\n        },\r\n\r\n        /**\r\n         * returns an array of operators availables for the current type\r\n         */\r\n        getOperators: function () {\r\n            var self = this;\r\n            var operators = self.options.operators;\r\n            var filterType = self.filterType;\r\n            var result = [];\r\n\r\n            for (var oper in operators) {\r\n                var operator = operators[oper];\r\n                if ($.inArray(filterType, operator.appliesTo) >= 0) {\r\n                    result.push({\r\n                        displayName: bizagi.localization.getResource(operator.label),\r\n                        id: oper\r\n                    });\r\n                }\r\n            }\r\n\r\n            return result;\r\n        },\r\n\r\n        /**\r\n         * Returns current operator\r\n         */\r\n        getOperator: function (item) {\r\n            var self = this;\r\n            var operators = self.options.operators;\r\n\r\n            return operators[item].operator;\r\n        },\r\n\r\n        /**\r\n         * Configure handlers input type text\r\n         * @param $input\r\n         */\r\n        configureHandlerInputTypeText: function($input, $filter, data, updateValue){\r\n            var self = this;\r\n            $input.focus();\r\n\r\n            $input.keyup(function (ev) {\r\n                if($input.val().trim().length > 0){\r\n                    self.enableButton(\"filter\");\r\n                    if (ev.which == 13) {\r\n                        updateValue();\r\n                        self._trigger(\"change\", \"\", data);\r\n                        $filter.remove();\r\n                    }\r\n                }\r\n                else{\r\n                    self.disableButton(\"filter\");\r\n                }\r\n            });\r\n\r\n            $input.change(function () {\r\n                if($input.val().length > 0) {\r\n                    updateValue();\r\n                }\r\n            });\r\n\r\n            if($input.val().trim().length > 0){\r\n                self.enableButton(\"filter\");\r\n            }\r\n            else{\r\n                self.disableButton(\"filter\");\r\n            }\r\n\r\n        },\r\n\r\n        /**\r\n         * Hide or show the control, according to type of operator\r\n         */\r\n        setControlVisibility: function (operator) {\r\n            var self = this;\r\n            var operators = self.options.operators;\r\n            var $control = self.$filter.find(\"#biz-column-filter-control\");\r\n\r\n            if (operators[operator]) {\r\n                var isUnary = (operators[operator].isUnary === undefined) ? false : operators[operator].isUnary;\r\n                (isUnary) ? $control.hide() : $control.show();\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Disable button\r\n         */\r\n        disableButton: function (which) {\r\n            var self = this;\r\n            var buttons = self.$filter.find(\"#biz-column-filter-buttons  > .ui-bizagi-filter-buttons > button\");\r\n\r\n            if (which == \"filter\") {\r\n                $(buttons[0]).attr(\"disabled\", \"disabled\").addClass(\"ui-state-disabled\");\r\n\r\n            }\r\n            else if (which == \"clear\") {\r\n                $(buttons[1]).attr(\"disabled\", \"disabled\").addClass(\"ui-state-disabled\");\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Enable button\r\n         */\r\n        enableButton: function (which) {\r\n            var self = this;\r\n            var buttons = self.$filter.find(\"#biz-column-filter-buttons  > .ui-bizagi-filter-buttons > button\");\r\n\r\n            if (which == \"filter\") {\r\n                $(buttons[0]).prop(\"disabled\", false).removeClass(\"ui-state-disabled\");\r\n\r\n            }\r\n            else if (which == \"clear\") {\r\n                $(buttons[1]).prop(\"disabled\", false).removeClass(\"ui-state-disabled\");\r\n            }\r\n        }\r\n    });\r\n})(jQuery);","(function ($) {\r\n    var nextId = 0;\r\n    var _elements = [];\r\n    var _iconTemplate = '<div class=\"bz-overflow-menu-icon\">' +\r\n        '   <div class=\"bz-overflow-menu-icon bz-btn-icn bz-btn-icn--24\">' +\r\n        '       <svg class=\"bz-icn\" width=\"16px\" height=\"16px\">' +\r\n        '           <use xlink:href=\"#{{icon}}\"></use>' +\r\n        '       </svg>' +\r\n        '   </div>' +\r\n        '   <span class=\"bz-overflow-menu__item-text\">{{name}}</span>' +\r\n        '</div>';\r\n\r\n    $.fn.overflowMenu = function (options) {\r\n\r\n        return this.each(function () {\r\n            var self = this;\r\n\r\n            self.id = nextId++;\r\n            options = options || {};\r\n\r\n            var items = options.items || [];\r\n            var target = null;\r\n\r\n            self.menu = document.createElement('ul');\r\n            self.menu.setAttribute('style', \"position: fixed;\");\r\n\r\n            self.menu.className = 'bz-overflow-menu';\r\n            self.menu.setAttribute('data-overflowmenu', self.id);\r\n\r\n            // Create <li>'s for each menu item\r\n            items.forEach(function (item, index) {\r\n                var li = document.createElement('li');\r\n\r\n                if (!('name' in item)) {\r\n                    // Insert a divider\r\n                    li.className = 'bz-overflow-menu__divider';\r\n                } else {\r\n                    li.className = 'bz-overflow-menu__item';\r\n\r\n                    if (!item.icon) {\r\n                        li.textContent = item.name;\r\n                    } else {\r\n                        li.innerHTML = _iconTemplate\r\n                            .replace(/{{icon}}/g, item.icon)\r\n                            .replace(/{{name}}/g, item.name);\r\n                    }\r\n\r\n                    li.setAttribute('data-overflowmenuitem', index);\r\n                    li.setAttribute('tabindex', 0);\r\n                    li.addEventListener('click', select.bind(this, li));\r\n                }\r\n\r\n                self.menu.appendChild(li);\r\n            });\r\n\r\n            function show(evt) {\r\n                target = evt.delegateTarget;\r\n\r\n                var x = evt.originalEvent.clientX;\r\n                var y = evt.originalEvent.clientY;\r\n\r\n                // Add root element to the <body>\r\n                setTimeout(function () {\r\n                    document.body.appendChild(self.menu);\r\n\r\n                    if (client.W() - x < self.menu.offsetWidth) {\r\n                        var xx = x - self.menu.offsetWidth;\r\n                    } else {\r\n                        var xx = x;\r\n                    }\r\n                    if (client.H() - y < self.menu.offsetHeight) {\r\n                        var yy = y - self.menu.offsetHeight;\r\n                    } else {\r\n                        var yy = y;\r\n                    }\r\n                    self.menu.style.left = xx + 'px';\r\n                    self.menu.style.top = yy + 'px';\r\n\r\n                    $(self.menu).show();\r\n                    // Give overflow self.menu focus\r\n\r\n                    $(self.menu).focus();\r\n                    _elements.push(self.menu);\r\n\r\n                    // Add binding to global scroll\r\n                    $(\"#content-wrapper\", document).on('scroll.overflow', function (e) {\r\n                        removeMenu();\r\n\r\n                        $(this, document).off('scroll.overflow');\r\n\r\n                    });\r\n\r\n                }, 100);\r\n            }\r\n\r\n            // Hides overflow menu\r\n            function hide() {\r\n                $(self.menu).remove();\r\n            }\r\n\r\n            // Selects the given item and calls its handler\r\n            function select(item, e) {\r\n                var itemId = item.getAttribute('data-overflowmenuitem');\r\n                if (items[itemId]) {\r\n                    // Call item handler with target element as parameter\r\n                    items[itemId].fn(target);\r\n                }\r\n                hide();\r\n                e.preventDefault();\r\n                e.stopPropagation();\r\n            }\r\n\r\n            // Listen click event to show menu\r\n            $(self).bind('click', function (e) {\r\n                var zIndex = getZIndex($(e.currentTarget));\r\n                $(self.menu).css(\"z-index\", zIndex);\r\n\r\n                show(e);\r\n            });\r\n        });\r\n\r\n    };\r\n\r\n    var client = {\r\n        W: function () {\r\n            return document.documentElement.clientWidth\r\n        },\r\n        H: function () {\r\n            return document.documentElement.clientHeight\r\n        }\r\n    };\r\n\r\n    var removeMenu = function () {\r\n\r\n        if (_elements && _elements.length > 0) {\r\n            _elements.forEach(function (el) {\r\n                $(el).remove();\r\n            });\r\n        }\r\n\r\n        _elements = [];\r\n    };\r\n\r\n    // Calculate the highest (top-most) zIndex in the document (minimum value returned: 2).\r\n    var getZIndex = function ($context) {\r\n        if ($context.get(0) === $('body').get(0)) return 2;\r\n\r\n        var parent = $($context).parent();\r\n        var zIndex = parseFloat(parent.css('z-index'), -1);\r\n\r\n        if (zIndex > -1) return zIndex;\r\n\r\n        return getZIndex(parent);\r\n    };\r\n\r\n    // Returns the highest (top-most) zIndex in the document (minimum value returned: 2).\r\n    var topZIndex = function () {\r\n        var $group = $(\"body > *\").has(\"div\");\r\n        var mapper = function (v) {\r\n            if ($(v).css('position') === 'absolute')\r\n                return parseFloat($(v).css(\"z-index\")) || null;\r\n        };\r\n\r\n        return Math.max(2, Math.max.apply(null, $.map($group, mapper)));\r\n    };\r\n\r\n    $(document).on('click.overflow', function (e) {\r\n        removeMenu();\r\n    });\r\n\r\n})(jQuery);","/* NicEdit - Micro Inline WYSIWYG\r\n* Copyright 2007-2008 Brian Kirchoff\r\n*\r\n* NicEdit is distributed under the terms of the MIT license\r\n* For more information visit http://nicedit.com/\r\n* Do not remove this copyright message\r\n*/\r\nvar bkExtend = function () {\r\n\tvar args = arguments;\r\n\tif (args.length == 1) args = [this, args[0]];\r\n\tfor (var prop in args[1]) args[0][prop] = args[1][prop];\r\n\treturn args[0];\r\n};\r\nfunction bkClass() { }\r\nbkClass.prototype.construct = function () { };\r\nbkClass.extend = function (def) {\r\n\tvar classDef = function () {\r\n\t\tif (arguments[0] !== bkClass) {\r\n\t\t\treturn this.construct.apply(this, arguments);\r\n\t\t}\r\n\t};\r\n\tvar proto = new this(bkClass);\r\n\tbkExtend(proto, def);\r\n\tclassDef.prototype = proto;\r\n\tclassDef.extend = this.extend;\r\n\treturn classDef;\r\n};\r\n\r\nvar bkElement = bkClass.extend({\r\n\tconstruct: function (elm, d) {\r\n\t\tif (typeof (elm) == \"string\") {\r\n\t\t\telm = (d || document).createElement(elm);\r\n\t\t}\r\n\t\telm = $BK(elm);\r\n\t\treturn elm;\r\n\t},\r\n\r\n\tappendTo: function (elm) {\r\n\t\telm.appendChild(this);\r\n\t\treturn this;\r\n\t},\r\n\r\n\tappendBefore: function (elm) {\r\n\t\telm.parentNode.insertBefore(this, elm);\r\n\t\treturn this;\r\n\t},\r\n\r\n\taddEvent: function (type, fn) {\r\n\t\tbkLib.addEvent(this, type, fn);\r\n\t\treturn this;\r\n\t},\r\n\r\n\tsetContent: function (c) {\r\n\t\tthis.innerHTML = c;\r\n\t\treturn this;\r\n\t},\r\n\r\n\tpos: function () {\r\n\t\tvar curleft = curtop = 0;\r\n\t\tvar o = obj = this;\r\n\t\tif (obj.offsetParent) {\r\n\t\t\tdo {\r\n\t\t\t\tcurleft += obj.offsetLeft;\r\n\t\t\t\tcurtop += obj.offsetTop;\r\n\t\t\t} while (obj = obj.offsetParent);\r\n\t\t}\r\n\t\tvar b = (!window.opera) ? parseInt(this.getStyle('border-width') || this.style.border) || 0 : 0;\r\n\t\treturn [curleft + b, curtop + b + this.offsetHeight];\r\n\t},\r\n\r\n\tnoSelect: function () {\r\n\t\tbkLib.noSelect(this);\r\n\t\treturn this;\r\n\t},\r\n\r\n\tparentTag: function (t) {\r\n\t\tvar elm = this;\r\n\t\tdo {\r\n\t\t\tif (elm && elm.nodeName && elm.nodeName.toUpperCase() == t) {\r\n\t\t\t\treturn elm;\r\n\t\t\t}\r\n\t\t\telm = elm.parentNode;\r\n\t\t} while (elm);\r\n\t\treturn false;\r\n\t},\r\n\r\n\thasClass: function (cls) {\r\n\t\treturn this.className.match(new RegExp('(\\\\s|^)nicEdit-' + cls + '(\\\\s|$)'));\r\n\t},\r\n\r\n\taddClass: function (cls) {\r\n\t\tif (!this.hasClass(cls)) {\r\n\t\t\tthis.className += \" nicEdit-\" + cls\r\n\t\t};\r\n\t\treturn this;\r\n\t},\r\n\r\n\tremoveClass: function (cls) {\r\n\t\tif (this.hasClass(cls)) {\r\n\t\t\tthis.className = this.className.replace(new RegExp('(\\\\s|^)nicEdit-' + cls + '(\\\\s|$)'), ' ');\r\n\t\t}\r\n\t\treturn this;\r\n\t},\r\n\r\n\tsetStyle: function (st) {\r\n\t\tvar elmStyle = this.style;\r\n\t\tfor (var itm in st) {\r\n\t\t\tswitch (itm) {\r\n\t\t\t\tcase 'float':\r\n\t\t\t\t\telmStyle['cssFloat'] = elmStyle['styleFloat'] = st[itm];\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'opacity':\r\n\t\t\t\t\telmStyle.opacity = st[itm];\r\n\t\t\t\t\telmStyle.filter = \"alpha(opacity=\" + Math.round(st[itm] * 100) + \")\";\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'className':\r\n\t\t\t\t\tthis.className = st[itm];\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\t//if(document.compatMode || itm != \"cursor\") { // Nasty Workaround for IE 5.5\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\telmStyle[itm] = st[itm];\r\n\t\t\t\t\t} catch (e) { }\r\n\t\t\t//}\t\t\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn this;\r\n\t},\r\n\r\n\tgetStyle: function (cssRule, d) {\r\n\t\tvar doc = (!d) ? document.defaultView : d;\r\n\t\tif (this.nodeType == 1)\r\n\t\t\treturn (doc && doc.getComputedStyle) ? doc.getComputedStyle(this, null).getPropertyValue(cssRule) : this.currentStyle[bkLib.camelize(cssRule)];\r\n\t},\r\n\r\n\tremove: function () {\r\n\t\tthis.parentNode.removeChild(this);\r\n\t\treturn this;\r\n\t},\r\n\r\n\tsetAttributes: function (at) {\r\n\t\tfor (var itm in at) {\r\n\t\t\tthis[itm] = at[itm];\r\n\t\t}\r\n\t\treturn this;\r\n\t}\r\n});\r\n\r\nvar bkLib = {\r\n\tisMSIE: (navigator.appVersion.indexOf(\"MSIE\") != -1),\r\n\r\n\taddEvent: function (obj, type, fn) {\r\n\t\t(obj.addEventListener) ? obj.addEventListener(type, fn, false) : obj.attachEvent(\"on\" + type, fn);\r\n\t},\r\n\r\n\ttoArray: function (iterable) {\r\n\t\tvar length = iterable.length, results = new Array(length);\r\n\t\twhile (length--) {\r\n\t\t\tresults[length] = iterable[length]\r\n\t\t};\r\n\t\treturn results;\r\n\t},\r\n\r\n\tnoSelect: function (element) {\r\n\t\tif (element.setAttribute && element.nodeName.toLowerCase() != 'input' && element.nodeName.toLowerCase() != 'textarea') {\r\n\t\t\telement.setAttribute('unselectable', 'on');\r\n\t\t}\r\n\t\tfor (var i = 0; i < element.childNodes.length; i++) {\r\n\t\t\tbkLib.noSelect(element.childNodes[i]);\r\n\t\t}\r\n\t},\r\n\tcamelize: function (s) {\r\n\t\treturn s.replace(/\\-(.)/g, function (m, l) {\r\n\t\t\treturn l.toUpperCase()\r\n\t\t});\r\n\t},\r\n\tinArray: function (arr, item) {\r\n\t\treturn (bkLib.search(arr, item) != null);\r\n\t},\r\n\tsearch: function (arr, itm) {\r\n\t\tfor (var i = 0; i < arr.length; i++) {\r\n\t\t\tif (arr[i] == itm)\r\n\t\t\t\treturn i;\r\n\t\t}\r\n\t\treturn null;\r\n\t},\r\n\tcancelEvent: function (e) {\r\n\t\te = e || window.event;\r\n\t\tif (e.preventDefault && e.stopPropagation) {\r\n\t\t\te.preventDefault();\r\n\t\t\te.stopPropagation();\r\n\t\t}\r\n\t\treturn false;\r\n\t},\r\n\tdomLoad: [],\r\n\tdomLoaded: function () {\r\n\t\tif (arguments.callee.done) return;\r\n\t\targuments.callee.done = true;\r\n\t\tfor (i = 0; i < bkLib.domLoad.length; i++) bkLib.domLoad[i]();\r\n\t},\r\n\tonDomLoaded: function (fireThis) {\r\n\t\tthis.domLoad.push(fireThis);\r\n\t\tif (document.addEventListener) {\r\n\t\t\tdocument.addEventListener(\"DOMContentLoaded\", bkLib.domLoaded, null);\r\n\t\t} else if (bkLib.isMSIE) {\r\n\t\t\tdocument.write(\"<style>.nicEdit-main p { margin: 0; }</style><scr\" + \"ipt id=__ie_onload defer \" + ((location.protocol == \"https:\") ? \"src='javascript:void(0)'\" : \"src=//0\") + \"><\\/scr\" + \"ipt>\");\r\n\t\t\t$BK(\"__ie_onload\").onreadystatechange = function () {\r\n\t\t\t\tif (this.readyState == \"complete\") {\r\n\t\t\t\t\tbkLib.domLoaded();\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t}\r\n\t\twindow.onload = bkLib.domLoaded;\r\n\t}\r\n};\r\n\r\nfunction $BK(elm) {\r\n\tif (typeof (elm) == \"string\") {\r\n\t\telm = document.getElementById(elm);\r\n\t}\r\n\treturn (elm && !elm.appendTo) ? bkExtend(elm, bkElement.prototype) : elm;\r\n}\r\n\r\nvar bkEvent = {\r\n\taddEvent: function (evType, evFunc) {\r\n\t\tif (evFunc) {\r\n\t\t\tthis.eventList = this.eventList || {};\r\n\t\t\tthis.eventList[evType] = this.eventList[evType] || [];\r\n\t\t\tthis.eventList[evType].push(evFunc);\r\n\t\t}\r\n\t\treturn this;\r\n\t},\r\n\tfireEvent: function () {\r\n\t\tvar args = bkLib.toArray(arguments), evType = args.shift();\r\n\t\tif (this.eventList && this.eventList[evType]) {\r\n\t\t\tfor (var i = 0; i < this.eventList[evType].length; i++) {\r\n\t\t\t\tthis.eventList[evType][i].apply(this, args);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n};\r\n\r\nfunction __(s) {\r\n\treturn s;\r\n}\r\n\r\nFunction.prototype.closure = function () {\r\n\tvar __method = this, args = bkLib.toArray(arguments), obj = args.shift();\r\n\treturn function () {\r\n\t\tif (typeof (bkLib) != 'undefined') {\r\n\t\t\treturn __method.apply(obj, args.concat(bkLib.toArray(arguments)));\r\n\t\t}\r\n\t};\r\n}\r\n\r\nFunction.prototype.closureListener = function () {\r\n\tvar __method = this, args = bkLib.toArray(arguments), object = args.shift();\r\n\treturn function (e) {\r\n\t\te = e || window.event;\r\n\t\tif (e.target) {\r\n\t\t\tvar target = e.target;\r\n\t\t} else {\r\n\t\t\tvar target = e.srcElement\r\n\t\t};\r\n\t\treturn __method.apply(object, [e, target].concat(args));\r\n\t};\r\n}\r\n\r\n\r\n/* START CONFIG */\r\n\r\nvar nicEditorConfig = bkClass.extend({\r\n\tbuttons: {\r\n\t\t'bold': {\r\n\t\t\tname: __('Click to Bold'), \r\n\t\t\tcommand: 'Bold', \r\n\t\t\ttags: ['B', 'STRONG'], \r\n\t\t\tcss: {\r\n\t\t\t\t'font-weight': 'bold'\r\n\t\t\t}, \r\n\t\t\tkey: 'b'\r\n\t\t},\r\n\t\t'italic': {\r\n\t\t\tname: __('Click to Italic'), \r\n\t\t\tcommand: 'Italic', \r\n\t\t\ttags: ['EM', 'I'], \r\n\t\t\tcss: {\r\n\t\t\t\t'font-style': 'italic'\r\n\t\t\t}, \r\n\t\t\tkey: 'i'\r\n\t\t},\r\n\t\t'underline': {\r\n\t\t\tname: __('Click to Underline'), \r\n\t\t\tcommand: 'Underline', \r\n\t\t\ttags: ['U'], \r\n\t\t\tcss: {\r\n\t\t\t\t'text-decoration': 'underline'\r\n\t\t\t}, \r\n\t\t\tkey: 'u'\r\n\t\t},\r\n\t\t'left': {\r\n\t\t\tname: __('Left Align'), \r\n\t\t\tcommand: 'justifyleft', \r\n\t\t\tnoActive: true\r\n\t\t},\r\n\t\t'center': {\r\n\t\t\tname: __('Center Align'), \r\n\t\t\tcommand: 'justifycenter', \r\n\t\t\tnoActive: true\r\n\t\t},\r\n\t\t'right': {\r\n\t\t\tname: __('Right Align'), \r\n\t\t\tcommand: 'justifyright', \r\n\t\t\tnoActive: true\r\n\t\t},\r\n\t\t'justify': {\r\n\t\t\tname: __('Justify Align'), \r\n\t\t\tcommand: 'justifyfull', \r\n\t\t\tnoActive: true\r\n\t\t},\r\n\t\t'ol': {\r\n\t\t\tname: __('Insert Ordered List'), \r\n\t\t\tcommand: 'insertorderedlist', \r\n\t\t\ttags: ['OL']\r\n\t\t},\r\n\t\t'ul': {\r\n\t\t\tname: __('Insert Unordered List'), \r\n\t\t\tcommand: 'insertunorderedlist', \r\n\t\t\ttags: ['UL']\r\n\t\t},\r\n\t\t'subscript': {\r\n\t\t\tname: __('Click to Subscript'), \r\n\t\t\tcommand: 'subscript', \r\n\t\t\ttags: ['SUB']\r\n\t\t},\r\n\t\t'superscript': {\r\n\t\t\tname: __('Click to Superscript'), \r\n\t\t\tcommand: 'superscript', \r\n\t\t\ttags: ['SUP']\r\n\t\t},\r\n\t\t'strikethrough': {\r\n\t\t\tname: __('Click to Strike Through'), \r\n\t\t\tcommand: 'strikeThrough', \r\n\t\t\tcss: {\r\n\t\t\t\t'text-decoration': 'line-through'\r\n\t\t\t}\r\n\t\t},\r\n\t\t'removeformat': {\r\n\t\t\tname: __('Remove Formatting'), \r\n\t\t\tcommand: 'removeformat', \r\n\t\t\tnoActive: true\r\n\t\t},\r\n\t\t'indent': {\r\n\t\t\tname: __('Indent Text'), \r\n\t\t\tcommand: 'indent', \r\n\t\t\tnoActive: true\r\n\t\t},\r\n\t\t'outdent': {\r\n\t\t\tname: __('Remove Indent'), \r\n\t\t\tcommand: 'outdent', \r\n\t\t\tnoActive: true\r\n\t\t},\r\n\t\t'hr': {\r\n\t\t\tname: __('Horizontal Rule'), \r\n\t\t\tcommand: 'insertHorizontalRule', \r\n\t\t\tnoActive: true\r\n\t\t}\r\n\t},\r\n\ticonsPath: '../nicEditorIcons.gif',\r\n\tbuttonList: ['save', 'print', 'bold', 'italic', 'underline', 'left', 'center', 'right', 'justify', 'ol', 'ul', 'fontSize', 'fontFamily', 'fontFormat', 'indent', 'outdent', 'image', 'upload', 'link', 'unlink', 'forecolor', 'bgcolor', 'smile'],\r\n\ticonList: {\r\n\t\t\"bgcolor\": 1, \r\n\t\t\"forecolor\": 2, \r\n\t\t\"bold\": 3, \r\n\t\t\"center\": 4, \r\n\t\t\"hr\": 5, \r\n\t\t\"indent\": 6, \r\n\t\t\"italic\": 7, \r\n\t\t\"justify\": 8, \r\n\t\t\"left\": 9, \r\n\t\t\"ol\": 10, \r\n\t\t\"outdent\": 11, \r\n\t\t\"removeformat\": 12, \r\n\t\t\"right\": 13, \r\n\t\t\"save\": 24, \r\n\t\t\"strikethrough\": 15, \r\n\t\t\"subscript\": 16, \r\n\t\t\"superscript\": 17, \r\n\t\t\"ul\": 18, \r\n\t\t\"underline\": 19, \r\n\t\t\"image\": 20, \r\n\t\t\"link\": 21, \r\n\t\t\"unlink\": 22, \r\n\t\t\"close\": 23, \r\n\t\t\"arrow\": 25, \r\n\t\t\"smile\": 26, \r\n\t\t\"print\": 27\r\n\t}\r\n\r\n});\r\n/* END CONFIG */\r\n\r\n\r\nvar nicEditors = {\r\n\tnicPlugins: [],\r\n\teditors: [],\r\n\r\n\tregisterPlugin: function (plugin, options) {\r\n\t\tthis.nicPlugins.push({\r\n\t\t\tp: plugin, \r\n\t\t\to: options\r\n\t\t});\r\n\t},\r\n\r\n\tallTextAreas: function (nicOptions) {\r\n\t\tvar textareas = document.getElementsByTagName(\"textarea\");\r\n\t\tfor (var i = 0; i < textareas.length; i++) {\r\n\t\t\tnicEditors.editors.push(new nicEditor(nicOptions).panelInstance(textareas[i]));\r\n\t\t}\r\n\t\treturn nicEditors.editors;\r\n\t},\r\n\r\n\tfindEditor: function(e){\r\n\t\tvar editors = nicEditors.editors;\r\n\t\tfor (var i = 0; i < editors.length; i++) {\r\n\t\t\tif (editors[i].instanceById(e)) {\r\n\t\t\t\treturn editors[i].instanceById(e);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\t\r\n\tgetFirstEditor: function(){\r\n\t\tvar editors = nicEditors.editors;\r\n\t\tif(editors.length >=1){\r\n\t\t\treturn editors[0].instanceById[0];\t\t\t\r\n\t\t}\r\n\t}\r\n};\r\n\r\n\r\nvar nicEditor = bkClass.extend({\r\n\tconstruct: function (o) {\r\n\t\tthis.options = new nicEditorConfig();\r\n\t\tbkExtend(this.options, o);\r\n\t\tthis.nicInstances = new Array();\r\n\t\tthis.loadedPlugins = new Array();\r\n\r\n\t\tvar plugins = nicEditors.nicPlugins;\r\n\t\tfor (var i = 0; i < plugins.length; i++) {\r\n\t\t\t/* DEPL: EDITED TO AVOID PROBLEM WITH CRUNCHING*/\r\n\t\t\tthis.loadedPlugins.push(new (plugins[i]).p(this, plugins[i].o));\r\n\t\t}\r\n\t\tnicEditors.editors.push(this);\r\n\t\tbkLib.addEvent(document.body, 'mousedown', this.selectCheck.closureListener(this));\r\n\t},\r\n\r\n\tpanelInstance: function (e, o) {\r\n\t\te = this.checkReplace($BK(e));\r\n\t\tvar panelElm = new bkElement('DIV').setStyle({\r\n\t\t\twidth: (parseInt(e.getStyle('width')) || e.clientWidth) + 'px'\r\n\t\t}).appendBefore(e);\r\n\t\tthis.setPanel(panelElm);\r\n\t\treturn this.addInstance(e, o);\r\n\t},\r\n\r\n\tcheckReplace: function (e) {\r\n\t\tvar r = nicEditors.findEditor(e);\r\n\t\tif (r) {\r\n\t\t\tr.removeInstance(e);\r\n\t\t\tr.removePanel();\r\n\t\t}\r\n\t\treturn e;\r\n\t},\r\n\r\n\taddInstance: function (e, o) {\r\n\t\te = this.checkReplace($BK(e));\r\n\t\tif (e.contentEditable || !!window.opera) {\r\n\t\t\tvar newInstance = new nicEditorInstance(e, o, this);\r\n\t\t} else {\r\n\t\t\tvar newInstance = new nicEditorIFrameInstance(e, o, this);\r\n\t\t}\r\n\t\tthis.nicInstances.push(newInstance);\r\n\t\treturn this;\r\n\t},\r\n\r\n\tremoveInstance: function (e) {\r\n\t\te = $BK(e);\r\n\t\tvar instances = this.nicInstances;\r\n\t\tfor (var i = 0; i < instances.length; i++) {\r\n\t\t\tif (instances[i].e == e) {\r\n\t\t\t\tinstances[i].remove();\r\n\t\t\t\tthis.nicInstances.splice(i, 1);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\tremovePanel: function (e) {\r\n\t\tif (this.nicPanel) {\r\n\t\t\tthis.nicPanel.remove();\r\n\t\t\tthis.nicPanel = null;\r\n\t\t}\r\n\t},\r\n\r\n\tinstanceById: function (e) {\r\n\t\te = $BK(e);\r\n\t\tvar instances = this.nicInstances;\r\n\t\tfor (var i = 0; i < instances.length; i++) {\r\n\t\t\tif (instances[i].e == e) {\r\n\t\t\t\treturn instances[i];\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\tsetPanel: function (e) {\r\n\t\tthis.nicPanel = new nicEditorPanel($BK(e), this.options, this);\r\n\t\tthis.fireEvent('panel', this.nicPanel);\r\n\t\treturn this;\r\n\t},\r\n\r\n\tnicCommand: function (cmd, args) {\r\n\t\tif (this.selectedInstance) {\r\n\t\t\tthis.selectedInstance.nicCommand(cmd, args);\r\n\t\t}\r\n\t},\r\n\r\n\tgetIcon: function (iconName, options) {\r\n\t\tvar icon = this.options.iconList[iconName];\r\n\t\tvar file = (options.iconFiles) ? options.iconFiles[iconName] : '';\r\n\t\treturn {\r\n\t\t\tbackgroundImage: \"url('\" + ((icon) ? this.options.iconsPath : file) + \"')\", \r\n\t\t\tbackgroundPosition: ((icon) ? ((icon - 1) * -18) : 0) + 'px 0px'\r\n\t\t};\r\n\t},\r\n\r\n\tselectCheck: function (e, t) {\r\n\t\tvar found = false;\r\n\t\tdo {\r\n\t\t\tif (t.className && t.className.indexOf('nicEdit') != -1) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t} while (t = t.parentNode);\r\n\t\tthis.fireEvent('blur', this.selectedInstance, t);\r\n\t\tthis.lastSelectedInstance = this.selectedInstance;\r\n\t\tthis.selectedInstance = null;\r\n\t\treturn false;\r\n\t}\r\n\r\n});\r\nnicEditor = nicEditor.extend(bkEvent);\r\n\r\n\r\nvar nicEditorInstance = bkClass.extend({\r\n\tisSelected: false,\r\n\r\n\tconstruct: function (e, options, nicEditor) {\r\n\t\tthis.ne = nicEditor;\r\n\t\tthis.elm = this.e = e;\r\n\t\tthis.options = options || {};\r\n\r\n\t\tnewX = parseInt(e.getStyle('width')) || e.clientWidth;\r\n\t\tnewY = parseInt(e.getStyle('height')) || e.clientHeight;\r\n\t\tthis.initialHeight = newY - 8;\r\n\r\n\t\tvar isTextarea = (e.nodeName.toLowerCase() == \"textarea\");\r\n\t\tif (isTextarea || this.options.hasPanel) {\r\n\t\t\tvar ie7s = (bkLib.isMSIE && !((typeof document.body.style.maxHeight != \"undefined\") && document.compatMode == \"CSS1Compat\"))\r\n\t\t\tvar s = {\r\n\t\t\t\twidth: newX + 'px', \r\n\t\t\t\tborder: '1px solid #ccc', \r\n\t\t\t\tborderTop: 0, \r\n\t\t\t\toverflowY: 'auto', \r\n\t\t\t\toverflowX: 'hidden',\r\n\t\t\t\tbackgroundColor: '#ffffff'\r\n\t\t\t};\r\n\t\t\ts[(ie7s) ? 'height' : 'maxHeight'] = (this.ne.options.maxHeight) ? this.ne.options.maxHeight + 'px' : null;\r\n\t\t\tthis.editorContain = new bkElement('DIV').setStyle(s).appendBefore(e);\r\n\t\t\tvar editorElm = new bkElement('DIV').setStyle({\r\n\t\t\t\twidth: (newX - 8) + 'px', \r\n\t\t\t\tmargin: '4px', \r\n\t\t\t\tminHeight: newY + 'px'\t\t\t\t\r\n\t\t\t}).addClass('main').appendTo(this.editorContain);\r\n\r\n\t\t\te.setStyle({\r\n\t\t\t\tdisplay: 'none'\r\n\t\t\t});\r\n\r\n\t\t\teditorElm.innerHTML = e.innerHTML;\r\n\t\t\tif (isTextarea) {\r\n\t\t\t\teditorElm.setContent(e.value);\r\n\t\t\t\tthis.copyElm = e;\r\n\t\t\t\tvar f = e.parentTag('FORM');\r\n\t\t\t\tif (f) {\r\n\t\t\t\t\tbkLib.addEvent(f, 'submit', this.saveContent.closure(this));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\teditorElm.setStyle((ie7s) ? {\r\n\t\t\t\theight: newY + 'px'\r\n\t\t\t} : {\r\n\t\t\t\toverflow: 'hidden'\r\n\t\t\t});\r\n\t\t\tthis.elm = editorElm;\r\n\t\t}\r\n\t\tthis.ne.addEvent('blur', this.blur.closure(this));\r\n\r\n\t\tthis.init();\r\n\t\tthis.blur();\r\n\t},\r\n\r\n\tinit: function () {\r\n\t\tthis.elm.setAttribute('contentEditable', 'true');\r\n\t\tif (this.getContent() == \"\") {\r\n\t\t\tthis.setContent('<br />');\r\n\t\t}\r\n\t\tthis.instanceDoc = document.defaultView;\r\n\t\tthis.elm.addEvent('mousedown', this.selected.closureListener(this)).addEvent('keypress', this.keyDown.closureListener(this)).addEvent('focus', this.selected.closure(this)).addEvent('blur', this.blur.closure(this)).addEvent('keyup', this.selected.closure(this));\r\n\t\tthis.ne.fireEvent('add', this);\r\n\t},\r\n\r\n\tremove: function () {\r\n\t\tthis.saveContent();\r\n\t\tif (this.copyElm || this.options.hasPanel) {\r\n\t\t\tthis.editorContain.remove();\r\n\t\t\tthis.e.setStyle({\r\n\t\t\t\t'display': 'block'\r\n\t\t\t});\r\n\t\t\tthis.ne.removePanel();\r\n\t\t}\r\n\t\tthis.disable();\r\n\t\tthis.ne.fireEvent('remove', this);\r\n\t},\r\n\r\n\tdisable: function () {\r\n\t\tthis.elm.setAttribute('contentEditable', 'false');\r\n\t},\r\n\r\n\tgetSel: function () {\r\n\t\treturn (window.getSelection) ? window.getSelection() : document.selection;\r\n\t},\r\n\r\n\tgetRng: function () {\r\n\t\tvar s = this.getSel();\r\n\t\tif (!s) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\treturn (s.rangeCount > 0) ? s.getRangeAt(0) : s.createRange();\r\n\t},\r\n\r\n\tselRng: function (rng, s) {\r\n\t\tif (window.getSelection) {\r\n\t\t\ts.removeAllRanges();\r\n\t\t\ts.addRange(rng);\r\n\t\t} else {\r\n\t\t\trng.select();\r\n\t\t}\r\n\t},\r\n\r\n\tselElm: function () {\r\n\t\tvar r = this.getRng();\r\n\t\tif (r.startContainer) {\r\n\t\t\tvar contain = r.startContainer;\r\n\t\t\tif (r.cloneContents().childNodes.length == 1) {\r\n\t\t\t\tfor (var i = 0; i < contain.childNodes.length; i++) {\r\n\t\t\t\t\tvar rng = contain.childNodes[i].ownerDocument.createRange();\r\n\t\t\t\t\trng.selectNode(contain.childNodes[i]);\r\n\t\t\t\t\tif (r.compareBoundaryPoints(Range.START_TO_START, rng) != 1 &&\r\n\t\t\t\t\t\tr.compareBoundaryPoints(Range.END_TO_END, rng) != -1) {\r\n\t\t\t\t\t\treturn $BK(contain.childNodes[i]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn $BK(contain);\r\n\t\t} else {\r\n\t\t\treturn $BK((this.getSel().type == \"Control\") ? r.item(0) : r.parentElement());\r\n\t\t}\r\n\t},\r\n\r\n\tsaveRng: function () {\r\n\t\tthis.savedRange = this.getRng();\r\n\t\tthis.savedSel = this.getSel();\r\n\t},\r\n\r\n\trestoreRng: function () {\r\n\t\tif (this.savedRange) {\r\n\t\t\tthis.selRng(this.savedRange, this.savedSel);\r\n\t\t}\r\n\t},\r\n\r\n\tkeyDown: function (e, t) {\r\n\t\tif (e.ctrlKey) {\r\n\t\t\tthis.ne.fireEvent('key', this, e);\r\n\t\t}\r\n\t},\r\n\r\n\tselected: function (e, t) {\r\n\t\tif (!t) {\r\n\t\t\tt = this.selElm()\r\n\t\t}\r\n\t\tif (!e.ctrlKey) {\r\n\t\t\tvar selInstance = this.ne.selectedInstance;\r\n\t\t\tif (selInstance != this) {\r\n\t\t\t\tif (selInstance) {\r\n\t\t\t\t\tthis.ne.fireEvent('blur', selInstance, t);\r\n\t\t\t\t}\r\n\t\t\t\tthis.ne.selectedInstance = this;\r\n\t\t\t\tthis.ne.fireEvent('focus', selInstance, t);\r\n\t\t\t}\r\n\t\t\tthis.ne.fireEvent('selected', selInstance, t);\r\n\t\t\tthis.isFocused = true;\r\n\t\t\tthis.elm.addClass('selected');\r\n\t\t}\r\n\t\treturn false;\r\n\t},\r\n\r\n\tblur: function () {\r\n\t\tthis.isFocused = false;\r\n\t\tthis.elm.removeClass('selected');\r\n\t},\r\n\r\n\tsaveContent: function () {\r\n\t\tif (this.copyElm || this.options.hasPanel) {\r\n\t\t\tthis.ne.fireEvent('save', this);\r\n\t\t\t(this.copyElm) ? this.copyElm.value = this.getContent() : this.e.innerHTML = this.getContent();\r\n\t\t}\r\n\t},\r\n\r\n\tgetElm: function () {\r\n\t\treturn this.elm;\r\n\t},\r\n\r\n\tgetContent: function () {\r\n\t\tthis.content = this.getElm().innerHTML;\r\n\t\tthis.ne.fireEvent('get', this);\r\n\t\treturn this.content;\r\n\t},\r\n\r\n\tsetContent: function (e) {\r\n\t\tthis.content = e;\r\n\t\tthis.ne.fireEvent('set', this);\r\n\t\tthis.elm.innerHTML = this.content;\r\n\t},\r\n\r\n\tnicCommand: function (cmd, args) {\r\n\t\tdocument.execCommand(cmd, false, args);\r\n\t}\r\n});\r\n\r\nvar nicEditorIFrameInstance = nicEditorInstance.extend({\r\n\tsavedStyles: [],\r\n\r\n\tinit: function () {\r\n\t\tvar c = this.elm.innerHTML.replace(/^\\s+|\\s+$/g, '');\r\n\t\tthis.elm.innerHTML = '';\r\n\t\t(!c) ? c = \"<br />\" : c;\r\n\t\tthis.initialContent = c;\r\n\r\n\t\tthis.elmFrame = new bkElement('iframe').setAttributes({\r\n\t\t\t'src': 'javascript:;', \r\n\t\t\t'frameBorder': 0, \r\n\t\t\t'allowTransparency': 'true', \r\n\t\t\t'scrolling': 'no'\r\n\t\t}).setStyle({\r\n\t\t\theight: '100px', \r\n\t\t\twidth: '100%'\r\n\t\t}).addClass('frame').appendTo(this.elm);\r\n\r\n\t\tif (this.copyElm) {\r\n\t\t\tthis.elmFrame.setStyle({\r\n\t\t\t\twidth: (this.elm.offsetWidth - 4) + 'px'\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tvar styleList = ['font-size', 'font-family', 'font-weight', 'color'];\r\n\t\tfor (itm in styleList) {\r\n\t\t\tthis.savedStyles[bkLib.camelize(itm)] = this.elm.getStyle(itm);\r\n\t\t}\r\n\r\n\t\tsetTimeout(this.initFrame.closure(this), 50);\r\n\t},\r\n\r\n\tdisable: function () {\r\n\t\tthis.elm.innerHTML = this.getContent();\r\n\t},\r\n\r\n\tinitFrame: function () {\r\n\t\tvar fd = $BK(this.elmFrame.contentWindow.document);\r\n\t\tfd.designMode = \"on\";\r\n\t\tfd.open();\r\n\t\tvar css = this.ne.options.externalCSS;\r\n\t\tfd.write('<html><head>' + ((css) ? '<link href=\"' + css + '\" rel=\"stylesheet\" type=\"text/css\" />' : '') + '</head><body id=\"nicEditContent\" style=\"margin: 0 !important; background-color: #ffffff !important;\">' + this.initialContent + '</body></html>');\r\n\t\tfd.close();\r\n\t\tthis.frameDoc = fd;\r\n\r\n\t\tthis.frameWin = $BK(this.elmFrame.contentWindow);\r\n\t\tthis.frameContent = $BK(this.frameWin.document.body).setStyle(this.savedStyles);\r\n\t\tthis.instanceDoc = this.frameWin.document.defaultView;\r\n\r\n\t\tthis.heightUpdate();\r\n\t\tthis.frameDoc.addEvent('mousedown', this.selected.closureListener(this)).addEvent('keyup', this.heightUpdate.closureListener(this)).addEvent('keydown', this.keyDown.closureListener(this)).addEvent('keyup', this.selected.closure(this));\r\n\t\tthis.ne.fireEvent('add', this);\r\n\t},\r\n\r\n\tgetElm: function () {\r\n\t\treturn this.frameContent;\r\n\t},\r\n\r\n\tsetContent: function (c) {\r\n\t\tthis.content = c;\r\n\t\tthis.ne.fireEvent('set', this);\r\n\t\tthis.frameContent.innerHTML = this.content;\r\n\t\tthis.heightUpdate();\r\n\t},\r\n\r\n\tgetSel: function () {\r\n\t\treturn (this.frameWin) ? this.frameWin.getSelection() : this.frameDoc.selection;\r\n\t},\r\n\r\n\theightUpdate: function () {\r\n\t\tthis.elmFrame.style.height = Math.max(this.frameContent.offsetHeight, this.initialHeight) + 'px';\r\n\t},\r\n\r\n\tnicCommand: function (cmd, args) {\r\n\t\tthis.frameDoc.execCommand(cmd, false, args);\r\n\t\tsetTimeout(this.heightUpdate.closure(this), 100);\r\n\t}\r\n\r\n\r\n});\r\nvar nicEditorPanel = bkClass.extend({\r\n\tconstruct: function (e, options, nicEditor) {\r\n\t\tthis.elm = e;\r\n\t\tthis.options = options;\r\n\t\tthis.ne = nicEditor;\r\n\t\tthis.panelButtons = new Array();\r\n\t\tthis.buttonList = bkExtend([], this.ne.options.buttonList);\r\n\r\n\t\tthis.panelContain = new bkElement('DIV').setStyle({\r\n\t\t\toverflow: 'hidden', \r\n\t\t\twidth: '100%', \r\n\t\t\tborder: '1px solid #cccccc', \r\n\t\t\tbackgroundColor: '#efefef'\r\n\t\t}).addClass('panelContain');\r\n\t\tthis.panelElm = new bkElement('DIV').setStyle({\r\n\t\t\tmargin: '2px', \r\n\t\t\tmarginTop: '0px', \r\n\t\t\tzoom: 1, \r\n\t\t\toverflow: 'hidden'\r\n\t\t}).addClass('panel').appendTo(this.panelContain);\r\n\t\tthis.panelContain.appendTo(e);\r\n\r\n\t\tvar opt = this.ne.options;\r\n\t\tvar buttons = opt.buttons;\r\n\t\tfor (button in buttons) {\r\n\t\t\tthis.addButton(button, opt, true);\r\n\t\t}\r\n\t\tthis.reorder();\r\n\t\te.noSelect();\r\n\t},\r\n\r\n\taddButton: function (buttonName, options, noOrder) {\r\n\t\tvar button = options.buttons[buttonName];\r\n\t\tvar type = (button['type']) ? eval('(typeof(' + button['type'] + ') == \"undefined\") ? null : ' + button['type'] + ';') : nicEditorButton;\r\n\t\tvar hasButton = bkLib.inArray(this.buttonList, buttonName);\r\n\t\tif (type && (hasButton || this.ne.options.fullPanel)) {\r\n\t\t\tthis.panelButtons.push(new type(this.panelElm, buttonName, options, this.ne));\r\n\t\t\tif (!hasButton) {\r\n\t\t\t\tthis.buttonList.push(buttonName);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\tfindButton: function (itm) {\r\n\t\tfor (var i = 0; i < this.panelButtons.length; i++) {\r\n\t\t\tif (this.panelButtons[i].name == itm)\r\n\t\t\t\treturn this.panelButtons[i];\r\n\t\t}\r\n\t},\r\n\r\n\treorder: function () {\r\n\t\tvar bl = this.buttonList;\r\n\t\tfor (var i = 0; i < bl.length; i++) {\r\n\t\t\tvar button = this.findButton(bl[i]);\r\n\t\t\tif (button) {\r\n\t\t\t\tthis.panelElm.appendChild(button.margin);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\tremove: function () {\r\n\t\tthis.elm.remove();\r\n\t}\r\n});\r\nvar nicEditorButton = bkClass.extend({\r\n\r\n\tconstruct: function (e, buttonName, options, nicEditor) {\r\n\t\tthis.options = options.buttons[buttonName];\r\n\t\tthis.name = buttonName;\r\n\t\tthis.ne = nicEditor;\r\n\t\tthis.elm = e;\r\n\r\n\t\tthis.margin = new bkElement('DIV').setStyle({\r\n\t\t\t'float': 'left', \r\n\t\t\tmarginTop: '2px'\r\n\t\t}).appendTo(e);\r\n\t\tthis.contain = new bkElement('DIV').setStyle({\r\n\t\t\twidth: '20px', \r\n\t\t\theight: '20px'\r\n\t\t}).addClass('buttonContain').appendTo(this.margin);\r\n\t\tthis.border = new bkElement('DIV').setStyle({\r\n\t\t\tbackgroundColor: '#efefef', \r\n\t\t\tborder: '1px solid #efefef'\r\n\t\t}).appendTo(this.contain);\r\n\t\tthis.button = new bkElement('DIV').setStyle({\r\n\t\t\twidth: '18px', \r\n\t\t\theight: '18px', \r\n\t\t\toverflow: 'hidden', \r\n\t\t\tzoom: 1, \r\n\t\t\tcursor: 'pointer'\r\n\t\t}).addClass('button').setStyle(this.ne.getIcon(buttonName, options)).appendTo(this.border);\r\n\t\tthis.button.addEvent('mouseover', this.hoverOn.closure(this)).addEvent('mouseout', this.hoverOff.closure(this)).addEvent('mousedown', this.mouseClick.closure(this)).noSelect();\r\n\r\n\t\tif (!window.opera) {\r\n\t\t\tthis.button.onmousedown = this.button.onclick = bkLib.cancelEvent;\r\n\t\t}\r\n\r\n\t\tnicEditor.addEvent('selected', this.enable.closure(this)).addEvent('blur', this.disable.closure(this)).addEvent('key', this.key.closure(this));\r\n\r\n\t\tthis.disable();\r\n\t\tthis.init();\r\n\t},\r\n\r\n\tinit: function () { },\r\n\r\n\thide: function () {\r\n\t\tthis.contain.setStyle({\r\n\t\t\tdisplay: 'none'\r\n\t\t});\r\n\t},\r\n\r\n\tupdateState: function () {\r\n\t\tif (this.isDisabled) {\r\n\t\t\tthis.setBg();\r\n\t\t}\r\n\t\telse if (this.isHover) {\r\n\t\t\tthis.setBg('hover');\r\n\t\t}\r\n\t\telse if (this.isActive) {\r\n\t\t\tthis.setBg('active');\r\n\t\t}\r\n\t\telse {\r\n\t\t\tthis.setBg();\r\n\t\t}\r\n\t},\r\n\r\n\tsetBg: function (state) {\r\n\t\tswitch (state) {\r\n\t\t\tcase 'hover':\r\n\t\t\t\tvar stateStyle = {\r\n\t\t\t\t\tborder: '1px solid #666', \r\n\t\t\t\t\tbackgroundColor: '#ddd'\r\n\t\t\t\t};\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'active':\r\n\t\t\t\tvar stateStyle = {\r\n\t\t\t\t\tborder: '1px solid #666', \r\n\t\t\t\t\tbackgroundColor: '#ccc'\r\n\t\t\t\t};\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tvar stateStyle = {\r\n\t\t\t\t\tborder: '1px solid #efefef', \r\n\t\t\t\t\tbackgroundColor: '#efefef'\r\n\t\t\t\t};\r\n\t\t}\r\n\t\tthis.border.setStyle(stateStyle).addClass('button-' + state);\r\n\t},\r\n\r\n\tcheckNodes: function (e) {\r\n\t\tvar elm = e;\r\n\t\tdo {\r\n\t\t\tif (this.options.tags && bkLib.inArray(this.options.tags, elm.nodeName)) {\r\n\t\t\t\tthis.activate();\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t} while (elm = elm.parentNode && elm.className != \"nicEdit\");\r\n\t\telm = $BK(e);\r\n\t\twhile (elm.nodeType == 3) {\r\n\t\t\telm = $BK(elm.parentNode);\r\n\t\t}\r\n\t\tif (this.options.css) {\r\n\t\t\tfor (itm in this.options.css) {\r\n\t\t\t\tif (elm.getStyle(itm, this.ne.selectedInstance.instanceDoc) == this.options.css[itm]) {\r\n\t\t\t\t\tthis.activate();\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.deactivate();\r\n\t\treturn false;\r\n\t},\r\n\r\n\tactivate: function () {\r\n\t\tif (!this.isDisabled) {\r\n\t\t\tthis.isActive = true;\r\n\t\t\tthis.updateState();\r\n\t\t\tthis.ne.fireEvent('buttonActivate', this);\r\n\t\t}\r\n\t},\r\n\r\n\tdeactivate: function () {\r\n\t\tthis.isActive = false;\r\n\t\tthis.updateState();\r\n\t\tif (!this.isDisabled) {\r\n\t\t\tthis.ne.fireEvent('buttonDeactivate', this);\r\n\t\t}\r\n\t},\r\n\r\n\tenable: function (ins, t) {\r\n\t\tthis.isDisabled = false;\r\n\t\tthis.contain.setStyle({\r\n\t\t\t'opacity': 1\r\n\t\t}).addClass('buttonEnabled');\r\n\t\tthis.updateState();\r\n\t\tthis.checkNodes(t);\r\n\t},\r\n\r\n\tdisable: function (ins, t) {\r\n\t\tthis.isDisabled = true;\r\n\t\tthis.contain.setStyle({\r\n\t\t\t'opacity': 0.6\r\n\t\t}).removeClass('buttonEnabled');\r\n\t\tthis.updateState();\r\n\t},\r\n\r\n\ttoggleActive: function () {\r\n\t\t(this.isActive) ? this.deactivate() : this.activate();\r\n\t},\r\n\r\n\thoverOn: function () {\r\n\t\tif (!this.isDisabled) {\r\n\t\t\tthis.isHover = true;\r\n\t\t\tthis.updateState();\r\n\t\t\tthis.ne.fireEvent(\"buttonOver\", this);\r\n\t\t}\r\n\t},\r\n\r\n\thoverOff: function () {\r\n\t\tthis.isHover = false;\r\n\t\tthis.updateState();\r\n\t\tthis.ne.fireEvent(\"buttonOut\", this);\r\n\t},\r\n\r\n\tmouseClick: function () {\r\n\t\tif (this.options.command) {\r\n\t\t\tthis.ne.nicCommand(this.options.command, this.options.commandArgs);\r\n\t\t\tif (!this.options.noActive) {\r\n\t\t\t\tthis.toggleActive();\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.ne.fireEvent(\"buttonClick\", this);\r\n\t},\r\n\r\n\tkey: function (nicInstance, e) {\r\n\t\tif (this.options.key && e.ctrlKey && String.fromCharCode(e.keyCode || e.charCode).toLowerCase() == this.options.key) {\r\n\t\t\tthis.mouseClick();\r\n\t\t\tif (e.preventDefault) e.preventDefault();\r\n\t\t}\r\n\t}\r\n\r\n});\r\n\r\n\r\nvar nicPlugin = bkClass.extend({\r\n\r\n\tconstruct: function (nicEditor, options) {\r\n\t\tthis.options = options;\r\n\t\tthis.ne = nicEditor;\r\n\t\tthis.ne.addEvent('panel', this.loadPanel.closure(this));\r\n\r\n\t\tthis.init();\r\n\t},\r\n\r\n\tloadPanel: function (np) {\r\n\t\tvar buttons = this.options.buttons;\r\n\t\tfor (var button in buttons) {\r\n\t\t\tnp.addButton(button, this.options);\r\n\t\t}\r\n\t\tnp.reorder();\r\n\t},\r\n\r\n\tinit: function () { }\r\n});\r\n\r\n\r\n/* START CONFIG */\r\nvar nicPaneOptions = {};\r\n/* END CONFIG */\r\n\r\nvar nicEditorPane = bkClass.extend({\r\n\tconstruct: function (elm, nicEditor, options, openButton) {\r\n\t\tthis.ne = nicEditor;\r\n\t\tthis.elm = elm;\r\n\t\tthis.pos = elm.pos();\r\n\r\n\t\tthis.contain = new bkElement('div').setStyle({\r\n\t\t\tzIndex: '99999', \r\n\t\t\toverflow: 'hidden', \r\n\t\t\tposition: 'absolute', \r\n\t\t\tleft: this.pos[0] + 'px', \r\n\t\t\ttop: this.pos[1] + 'px'\r\n\t\t})\r\n\t\tthis.pane = new bkElement('div').setStyle({\r\n\t\t\tfontSize: '12px', \r\n\t\t\tborder: '1px solid #ccc', \r\n\t\t\t'overflow': 'hidden', \r\n\t\t\tpadding: '4px', \r\n\t\t\ttextAlign: 'left', \r\n\t\t\tbackgroundColor: '#ffffc9'\r\n\t\t}).addClass('pane').setStyle(options).appendTo(this.contain);\r\n\r\n\t\tif (openButton && !openButton.options.noClose) {\r\n\t\t\tthis.close = new bkElement('div').setStyle({\r\n\t\t\t\t'float': 'right', \r\n\t\t\t\theight: '16px', \r\n\t\t\t\twidth: '16px', \r\n\t\t\t\tcursor: 'pointer'\r\n\t\t\t}).setStyle(this.ne.getIcon('close', nicPaneOptions)).addEvent('mousedown', openButton.removePane.closure(this)).appendTo(this.pane);\r\n\t\t}\r\n\r\n\t\tthis.contain.noSelect().appendTo(document.body);\r\n\r\n\t\tthis.position();\r\n\t\tthis.init();\r\n\t},\r\n\r\n\tinit: function () { },\r\n\r\n\tposition: function () {\r\n\t\tif (this.ne.nicPanel) {\r\n\t\t\tvar panelElm = this.ne.nicPanel.elm;\r\n\t\t\tvar panelPos = panelElm.pos();\r\n\t\t\tvar newLeft = panelPos[0] + parseInt(panelElm.getStyle('width')) - (parseInt(this.pane.getStyle('width')) + 8);\r\n\t\t\tif (newLeft < this.pos[0]) {\r\n\t\t\t\tthis.contain.setStyle({\r\n\t\t\t\t\tleft: newLeft + 'px'\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\ttoggle: function () {\r\n\t\tthis.isVisible = !this.isVisible;\r\n\t\tthis.contain.setStyle({\r\n\t\t\tdisplay: ((this.isVisible) ? 'block' : 'none')\r\n\t\t});\r\n\t},\r\n\r\n\tremove: function () {\r\n\t\tif (this.contain) {\r\n\t\t\tthis.contain.remove();\r\n\t\t\tthis.contain = null;\r\n\t\t}\r\n\t},\r\n\r\n\tappend: function (c) {\r\n\t\tc.appendTo(this.pane);\r\n\t},\r\n\r\n\tsetContent: function (c) {\r\n\t\tthis.pane.setContent(c);\r\n\t}\r\n\r\n});\r\n\r\n\r\n\r\nvar nicEditorAdvancedButton = nicEditorButton.extend({\r\n\r\n\tinit: function () {\r\n\t\tthis.ne.addEvent('selected', this.removePane.closure(this)).addEvent('blur', this.removePane.closure(this));\r\n\t},\r\n\r\n\tmouseClick: function () {\r\n\t\tif (!this.isDisabled) {\r\n\t\t\tif (this.pane && this.pane.pane) {\r\n\t\t\t\tthis.removePane();\r\n\t\t\t} else {\r\n\t\t\t\tthis.pane = new nicEditorPane(this.contain, this.ne, {\r\n\t\t\t\t\twidth: (this.width || '270px'), \r\n\t\t\t\t\tbackgroundColor: '#fff'\r\n\t\t\t\t}, this);\r\n\t\t\t\tthis.addPane();\r\n\t\t\t\tthis.ne.selectedInstance.saveRng();\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\taddForm: function (f, elm) {\r\n\t\tthis.form = new bkElement('form').addEvent('submit', this.submit.closureListener(this));\r\n\t\tthis.pane.append(this.form);\r\n\t\tthis.inputs = {};\r\n\r\n\t\tfor (itm in f) {\r\n\t\t\tvar field = f[itm];\r\n\t\t\tvar val = '';\r\n\t\t\tif (elm) {\r\n\t\t\t\tval = elm.getAttribute(itm);\r\n\t\t\t}\r\n\t\t\tif (!val) {\r\n\t\t\t\tval = field['value'] || '';\r\n\t\t\t}\r\n\t\t\tvar type = f[itm].type;\r\n\r\n\t\t\tif (type == 'title') {\r\n\t\t\t\tnew bkElement('div').setContent(field.txt).setStyle({\r\n\t\t\t\t\tfontSize: '14px', \r\n\t\t\t\t\tfontWeight: 'bold', \r\n\t\t\t\t\tpadding: '0px', \r\n\t\t\t\t\tmargin: '2px 0'\r\n\t\t\t\t}).appendTo(this.form);\r\n\t\t\t} else {\r\n\t\t\t\tvar contain = new bkElement('div').setStyle({\r\n\t\t\t\t\toverflow: 'hidden', \r\n\t\t\t\t\tclear: 'both'\r\n\t\t\t\t}).appendTo(this.form);\r\n\t\t\t\tif (field.txt) {\r\n\t\t\t\t\tnew bkElement('label').setAttributes({\r\n\t\t\t\t\t\t'for': itm\r\n\t\t\t\t\t}).setContent(field.txt).setStyle({\r\n\t\t\t\t\t\tmargin: '2px 4px', \r\n\t\t\t\t\t\tfontSize: '13px', \r\n\t\t\t\t\t\twidth: '50px', \r\n\t\t\t\t\t\tlineHeight: '20px', \r\n\t\t\t\t\t\ttextAlign: 'right', \r\n\t\t\t\t\t\t'float': 'left'\r\n\t\t\t\t\t}).appendTo(contain);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tswitch (type) {\r\n\t\t\t\t\tcase 'text':\r\n\t\t\t\t\t\tthis.inputs[itm] = new bkElement('input').setAttributes({\r\n\t\t\t\t\t\t\tid: itm, \r\n\t\t\t\t\t\t\t'value': val, \r\n\t\t\t\t\t\t\t'type': 'text'\r\n\t\t\t\t\t\t}).setStyle({\r\n\t\t\t\t\t\t\tmargin: '2px 0', \r\n\t\t\t\t\t\t\tfontSize: '13px', \r\n\t\t\t\t\t\t\t'float': 'left', \r\n\t\t\t\t\t\t\theight: '20px', \r\n\t\t\t\t\t\t\tborder: '1px solid #ccc', \r\n\t\t\t\t\t\t\toverflow: 'hidden'\r\n\t\t\t\t\t\t}).setStyle(field.style).appendTo(contain);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'select':\r\n\t\t\t\t\t\tthis.inputs[itm] = new bkElement('select').setAttributes({\r\n\t\t\t\t\t\t\tid: itm\r\n\t\t\t\t\t\t}).setStyle({\r\n\t\t\t\t\t\t\tborder: '1px solid #ccc', \r\n\t\t\t\t\t\t\t'float': 'left', \r\n\t\t\t\t\t\t\tmargin: '2px 0'\r\n\t\t\t\t\t\t}).appendTo(contain);\r\n\t\t\t\t\t\tfor (opt in field.options) {\r\n\t\t\t\t\t\t\tvar o = new bkElement('option').setAttributes({\r\n\t\t\t\t\t\t\t\tvalue: opt, \r\n\t\t\t\t\t\t\t\tselected: (opt == val) ? 'selected' : ''\r\n\t\t\t\t\t\t\t}).setContent(field.options[opt]).appendTo(this.inputs[itm]);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'content':\r\n\t\t\t\t\t\tthis.inputs[itm] = new bkElement('textarea').setAttributes({\r\n\t\t\t\t\t\t\tid: itm\r\n\t\t\t\t\t\t}).setStyle({\r\n\t\t\t\t\t\t\tborder: '1px solid #ccc', \r\n\t\t\t\t\t\t\t'float': 'left'\r\n\t\t\t\t\t\t}).setStyle(field.style).appendTo(contain);\r\n\t\t\t\t\t\tthis.inputs[itm].value = val;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tnew bkElement('input').setAttributes({\r\n\t\t\t'type': 'submit'\r\n\t\t}).setStyle({\r\n\t\t\tbackgroundColor: '#efefef', \r\n\t\t\tborder: '1px solid #ccc', \r\n\t\t\tmargin: '3px 0', \r\n\t\t\t'float': 'left', \r\n\t\t\t'clear': 'both'\r\n\t\t}).appendTo(this.form);\r\n\t\tthis.form.onsubmit = bkLib.cancelEvent;\r\n\t},\r\n\r\n\tsubmit: function () { },\r\n\r\n\tfindElm: function (tag, attr, val) {\r\n\t\tvar list = this.ne.selectedInstance.getElm().getElementsByTagName(tag);\r\n\t\tfor (var i = 0; i < list.length; i++) {\r\n\t\t\tif (list[i].getAttribute(attr) == val) {\r\n\t\t\t\treturn $BK(list[i]);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\tremovePane: function () {\r\n\t\tif (this.pane) {\r\n\t\t\tthis.pane.remove();\r\n\t\t\tthis.pane = null;\r\n\t\t\tthis.ne.selectedInstance.restoreRng();\r\n\t\t}\r\n\t}\r\n});\r\n\r\n\r\nvar nicButtonTips = bkClass.extend({\r\n\tconstruct: function (nicEditor) {\r\n\t\tthis.ne = nicEditor;\r\n\t\tnicEditor.addEvent('buttonOver', this.show.closure(this)).addEvent('buttonOut', this.hide.closure(this));\r\n\r\n\t},\r\n\r\n\tshow: function (button) {\r\n\t\tthis.timer = setTimeout(this.create.closure(this, button), 400);\r\n\t},\r\n\r\n\tcreate: function (button) {\r\n\t\tthis.timer = null;\r\n\t\tif (!this.pane) {\r\n\t\t\tthis.pane = new nicEditorPane(button.button, this.ne, {\r\n\t\t\t\tfontSize: '12px', \r\n\t\t\t\tmarginTop: '5px'\r\n\t\t\t});\r\n\t\t\tthis.pane.setContent(button.options.name);\r\n\t\t}\r\n\t},\r\n\r\n\thide: function (button) {\r\n\t\tif (this.timer) {\r\n\t\t\tclearTimeout(this.timer);\r\n\t\t}\r\n\t\tif (this.pane) {\r\n\t\t\tthis.pane = this.pane.remove();\r\n\t\t}\r\n\t}\r\n});\r\nnicEditors.registerPlugin(nicButtonTips);\r\n\r\n/* START CONFIG */\r\nvar nicSelectOptions = {\r\n\tbuttons: {\r\n\t\t'fontSize': {\r\n\t\t\tname: __('Select Font Size'), \r\n\t\t\ttype: 'nicEditorFontSizeSelect', \r\n\t\t\tcommand: 'fontsize'\r\n\t\t},\r\n\t\t'fontFamily': {\r\n\t\t\tname: __('Select Font Family'), \r\n\t\t\ttype: 'nicEditorFontFamilySelect', \r\n\t\t\tcommand: 'fontname'\r\n\t\t},\r\n\t\t'fontFormat': {\r\n\t\t\tname: __('Select Font Format'), \r\n\t\t\ttype: 'nicEditorFontFormatSelect', \r\n\t\t\tcommand: 'formatBlock'\r\n\t\t}\r\n\t}\r\n};\r\n/* END CONFIG */\r\nvar nicEditorSelect = bkClass.extend({\r\n\r\n\tconstruct: function (e, buttonName, options, nicEditor) {\r\n\t\tthis.options = options.buttons[buttonName];\r\n\t\tthis.elm = e;\r\n\t\tthis.ne = nicEditor;\r\n\t\tthis.name = buttonName;\r\n\t\tthis.selOptions = new Array();\r\n\r\n\t\tthis.margin = new bkElement('div').setStyle({\r\n\t\t\t'float': 'left', \r\n\t\t\tmargin: '2px 1px 0 1px'\r\n\t\t}).appendTo(this.elm);\r\n\t\tthis.contain = new bkElement('div').setStyle({\r\n\t\t\twidth: '90px', \r\n\t\t\theight: '20px', \r\n\t\t\tcursor: 'pointer', \r\n\t\t\toverflow: 'hidden'\r\n\t\t}).addClass('selectContain').addEvent('click', this.toggle.closure(this)).appendTo(this.margin);\r\n\t\tthis.items = new bkElement('div').setStyle({\r\n\t\t\toverflow: 'hidden', \r\n\t\t\tzoom: 1, \r\n\t\t\tborder: '1px solid #ccc', \r\n\t\t\tpaddingLeft: '3px', \r\n\t\t\tbackgroundColor: '#fff'\r\n\t\t}).appendTo(this.contain);\r\n\t\tthis.control = new bkElement('div').setStyle({\r\n\t\t\toverflow: 'hidden', \r\n\t\t\t'float': 'right', \r\n\t\t\theight: '18px', \r\n\t\t\twidth: '16px'\r\n\t\t}).addClass('selectControl').setStyle(this.ne.getIcon('arrow', options)).appendTo(this.items);\r\n\t\tthis.txt = new bkElement('div').setStyle({\r\n\t\t\toverflow: 'hidden', \r\n\t\t\t'float': 'left', \r\n\t\t\twidth: '66px', \r\n\t\t\theight: '14px', \r\n\t\t\tmarginTop: '1px', \r\n\t\t\tfontFamily: 'sans-serif', \r\n\t\t\ttextAlign: 'center', \r\n\t\t\tfontSize: '12px'\r\n\t\t}).addClass('selectTxt').appendTo(this.items);\r\n\r\n\t\tif (!window.opera) {\r\n\t\t\tthis.contain.onmousedown = this.control.onmousedown = this.txt.onmousedown = bkLib.cancelEvent;\r\n\t\t}\r\n\r\n\t\tthis.margin.noSelect();\r\n\r\n\t\tthis.ne.addEvent('selected', this.enable.closure(this)).addEvent('blur', this.disable.closure(this));\r\n\r\n\t\tthis.disable();\r\n\t\tthis.init();\r\n\t},\r\n\r\n\tdisable: function () {\r\n\t\tthis.isDisabled = true;\r\n\t\tthis.close();\r\n\t\tthis.contain.setStyle({\r\n\t\t\topacity: 0.6\r\n\t\t});\r\n\t},\r\n\r\n\tenable: function (t) {\r\n\t\tthis.isDisabled = false;\r\n\t\tthis.close();\r\n\t\tthis.contain.setStyle({\r\n\t\t\topacity: 1\r\n\t\t});\r\n\t},\r\n\r\n\tsetDisplay: function (txt) {\r\n\t\tthis.txt.setContent(txt);\r\n\t},\r\n\r\n\ttoggle: function () {\r\n\t\tif (!this.isDisabled) {\r\n\t\t\t(this.pane) ? this.close() : this.open();\r\n\t\t}\r\n\t},\r\n\r\n\topen: function () {\r\n\t\tthis.pane = new nicEditorPane(this.items, this.ne, {\r\n\t\t\twidth: '88px', \r\n\t\t\tpadding: '0px', \r\n\t\t\tborderTop: 0, \r\n\t\t\tborderLeft: '1px solid #ccc', \r\n\t\t\tborderRight: '1px solid #ccc', \r\n\t\t\tborderBottom: '0px', \r\n\t\t\tbackgroundColor: '#fff'\r\n\t\t});\r\n\r\n\t\tfor (var i = 0; i < this.selOptions.length; i++) {\r\n\t\t\tvar opt = this.selOptions[i];\r\n\t\t\tvar itmContain = new bkElement('div').setStyle({\r\n\t\t\t\toverflow: 'hidden', \r\n\t\t\t\tborderBottom: '1px solid #ccc', \r\n\t\t\t\twidth: '88px', \r\n\t\t\t\ttextAlign: 'left', \r\n\t\t\t\toverflow: 'hidden', \r\n\t\t\t\tcursor: 'pointer'\r\n\t\t\t});\r\n\t\t\tvar itm = new bkElement('div').setStyle({\r\n\t\t\t\tpadding: '0px 4px'\r\n\t\t\t}).setContent(opt[1]).appendTo(itmContain).noSelect();\r\n\t\t\titm.addEvent('click', this.update.closure(this, opt[0])).addEvent('mouseover', this.over.closure(this, itm)).addEvent('mouseout', this.out.closure(this, itm)).setAttributes('id', opt[0]);\r\n\t\t\tthis.pane.append(itmContain);\r\n\t\t\tif (!window.opera) {\r\n\t\t\t\titm.onmousedown = bkLib.cancelEvent;\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\tclose: function () {\r\n\t\tif (this.pane) {\r\n\t\t\tthis.pane = this.pane.remove();\r\n\t\t}\r\n\t},\r\n\r\n\tover: function (opt) {\r\n\t\topt.setStyle({\r\n\t\t\tbackgroundColor: '#ccc'\r\n\t\t});\r\n\t},\r\n\r\n\tout: function (opt) {\r\n\t\topt.setStyle({\r\n\t\t\tbackgroundColor: '#fff'\r\n\t\t});\r\n\t},\r\n\r\n\r\n\tadd: function (k, v) {\r\n\t\tthis.selOptions.push(new Array(k, v));\r\n\t},\r\n\r\n\tupdate: function (elm) {\r\n\t\tthis.ne.nicCommand(this.options.command, elm);\r\n\t\tthis.close();\r\n\t}\r\n});\r\n\r\nvar nicEditorFontSizeSelect = nicEditorSelect.extend({\r\n\tsel: {\r\n\t\t1: '1&nbsp;(8pt)', \r\n\t\t2: '2&nbsp;(10pt)', \r\n\t\t3: '3&nbsp;(12pt)', \r\n\t\t4: '4&nbsp;(14pt)', \r\n\t\t5: '5&nbsp;(18pt)', \r\n\t\t6: '6&nbsp;(24pt)'\r\n\t},\r\n\tinit: function () {\r\n\t\tthis.setDisplay('Font&nbsp;Size...');\r\n\t\tfor (itm in this.sel) {\r\n\t\t\tthis.add(itm, '<font size=\"' + itm + '\">' + this.sel[itm] + '</font>');\r\n\t\t}\r\n\t}\r\n});\r\n\r\nvar nicEditorFontFamilySelect = nicEditorSelect.extend({\r\n\tsel: {\r\n\t\t'arial': 'Arial', \r\n\t\t'comic sans ms': 'Comic Sans', \r\n\t\t'courier new': 'Courier New', \r\n\t\t'georgia': 'Georgia', \r\n\t\t'helvetica': 'Helvetica', \r\n\t\t'impact': 'Impact', \r\n\t\t'times new roman': 'Times', \r\n\t\t'trebuchet ms': 'Trebuchet', \r\n\t\t'verdana': 'Verdana'\r\n\t},\r\n\r\n\tinit: function () {\r\n\t\tthis.setDisplay('Font&nbsp;Family...');\r\n\t\tfor (itm in this.sel) {\r\n\t\t\tthis.add(itm, '<font face=\"' + itm + '\">' + this.sel[itm] + '</font>');\r\n\t\t}\r\n\t}\r\n});\r\n\r\nvar nicEditorFontFormatSelect = nicEditorSelect.extend({\r\n\tsel: {\r\n\t\t'p': 'Paragraph', \r\n\t\t'pre': 'Pre', \r\n\t\t'h6': 'Heading&nbsp;6', \r\n\t\t'h5': 'Heading&nbsp;5', \r\n\t\t'h4': 'Heading&nbsp;4', \r\n\t\t'h3': 'Heading&nbsp;3', \r\n\t\t'h2': 'Heading&nbsp;2', \r\n\t\t'h1': 'Heading&nbsp;1'\r\n\t},\r\n\r\n\tinit: function () {\r\n\t\tthis.setDisplay('Font&nbsp;Format...');\r\n\t\tfor (itm in this.sel) {\r\n\t\t\tvar tag = itm.toUpperCase();\r\n\t\t\tthis.add('<' + tag + '>', '<' + itm + ' style=\"padding: 0px; margin: 0px;\">' + this.sel[itm] + '</' + tag + '>');\r\n\t\t}\r\n\t}\r\n});\r\n\r\nnicEditors.registerPlugin(nicPlugin, nicSelectOptions);\r\n\r\n\r\n\r\n/* START CONFIG */\r\nvar nicLinkOptions = {\r\n\tbuttons: {\r\n\t\t'link': {\r\n\t\t\tname: 'Add Link', \r\n\t\t\ttype: 'nicLinkButton', \r\n\t\t\ttags: ['A']\r\n\t\t},\r\n\t\t'unlink': {\r\n\t\t\tname: 'Remove Link', \r\n\t\t\tcommand: 'unlink', \r\n\t\t\tnoActive: true\r\n\t\t}\r\n\t}\r\n};\r\n/* END CONFIG */\r\n\r\nvar nicLinkButton = nicEditorAdvancedButton.extend({\r\n\taddPane: function () {\r\n\t\tthis.ln = this.ne.selectedInstance.selElm().parentTag('A');\r\n\t\tthis.addForm({\r\n\t\t\t'': {\r\n\t\t\t\ttype: 'title', \r\n\t\t\t\ttxt: 'Add/Edit Link'\r\n\t\t\t},\r\n\t\t\t'href': {\r\n\t\t\t\ttype: 'text', \r\n\t\t\t\ttxt: 'URL', \r\n\t\t\t\tvalue: 'http://', \r\n\t\t\t\tstyle: {\r\n\t\t\t\t\twidth: '150px'\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t'title': {\r\n\t\t\t\ttype: 'text', \r\n\t\t\t\ttxt: 'Title'\r\n\t\t\t},\r\n\t\t\t'target': {\r\n\t\t\t\ttype: 'select', \r\n\t\t\t\ttxt: 'Open In', \r\n\t\t\t\toptions: {\r\n\t\t\t\t\t'': 'Current Window', \r\n\t\t\t\t\t'_blank': 'New Window'\r\n\t\t\t\t}, \r\n\t\t\t\tstyle: {\r\n\t\t\t\t\twidth: '100px'\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}, this.ln);\r\n\t},\r\n\r\n\tsubmit: function (e) {\r\n\t\tvar url = this.inputs['href'].value;\r\n\t\tif (url == \"http://\" || url == \"\") {\r\n\t\t\talert(\"You must enter a URL to Create a Link\");\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tthis.removePane();\r\n\r\n\t\tif (!this.ln) {\r\n\t\t\tvar tmp = 'javascript:nicTemp();';\r\n\t\t\tthis.ne.nicCommand(\"createlink\", tmp);\r\n\t\t\tthis.ln = this.findElm('A', 'href', tmp);\r\n\t\t}\r\n\t\tif (this.ln) {\r\n\t\t\tthis.ln.setAttributes({\r\n\t\t\t\thref: this.inputs['href'].value,\r\n\t\t\t\ttitle: this.inputs['title'].value,\r\n\t\t\t\ttarget: this.inputs['target'].options[this.inputs['target'].selectedIndex].value\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n});\r\n\r\nnicEditors.registerPlugin(nicPlugin, nicLinkOptions);\r\n\r\n\r\n\r\n/* START CONFIG */\r\nvar nicColorOptions = {\r\n\tbuttons: {\r\n\t\t'forecolor': {\r\n\t\t\tname: __('Change Text Color'), \r\n\t\t\ttype: 'nicEditorColorButton', \r\n\t\t\tnoClose: true\r\n\t\t},\r\n\t\t'bgcolor': {\r\n\t\t\tname: __('Change Background Color'), \r\n\t\t\ttype: 'nicEditorBgColorButton', \r\n\t\t\tnoClose: true\r\n\t\t}\r\n\t}\r\n};\r\n/* END CONFIG */\r\n\r\nvar nicEditorColorButton = nicEditorAdvancedButton.extend({\r\n\taddPane: function () {\r\n\t\tvar colorList = {\r\n\t\t\t0: '00', \r\n\t\t\t1: '33', \r\n\t\t\t2: '66', \r\n\t\t\t3: '99', \r\n\t\t\t4: 'CC', \r\n\t\t\t5: 'FF'\r\n\t\t};\r\n\t\tvar colorItems = new bkElement('DIV').setStyle({\r\n\t\t\twidth: '270px'\r\n\t\t});\r\n\r\n\t\tfor (var r in colorList) {\r\n\t\t\tfor (var b in colorList) {\r\n\t\t\t\tfor (var g in colorList) {\r\n\t\t\t\t\tvar colorCode = '#' + colorList[r] + colorList[g] + colorList[b];\r\n\r\n\t\t\t\t\tvar colorSquare = new bkElement('DIV').setStyle({\r\n\t\t\t\t\t\t'cursor': 'pointer', \r\n\t\t\t\t\t\t'height': '15px', \r\n\t\t\t\t\t\t'float': 'left'\r\n\t\t\t\t\t}).appendTo(colorItems);\r\n\t\t\t\t\tvar colorBorder = new bkElement('DIV').setStyle({\r\n\t\t\t\t\t\tborder: '2px solid ' + colorCode\r\n\t\t\t\t\t}).appendTo(colorSquare);\r\n\t\t\t\t\tvar colorInner = new bkElement('DIV').setStyle({\r\n\t\t\t\t\t\tbackgroundColor: colorCode, \r\n\t\t\t\t\t\toverflow: 'hidden', \r\n\t\t\t\t\t\twidth: '11px', \r\n\t\t\t\t\t\theight: '11px'\r\n\t\t\t\t\t}).addEvent('click', this.colorSelect.closure(this, colorCode)).addEvent('mouseover', this.on.closure(this, colorBorder)).addEvent('mouseout', this.off.closure(this, colorBorder, colorCode)).appendTo(colorBorder);\r\n\r\n\t\t\t\t\tif (!window.opera) {\r\n\t\t\t\t\t\tcolorSquare.onmousedown = colorInner.onmousedown = bkLib.cancelEvent;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.pane.append(colorItems.noSelect());\r\n\t},\r\n\r\n\tcolorSelect: function (c) {\r\n\t\tthis.ne.nicCommand('foreColor', c);\r\n\t\tthis.removePane();\r\n\t},\r\n\r\n\ton: function (colorBorder) {\r\n\t\tcolorBorder.setStyle({\r\n\t\t\tborder: '2px solid #000'\r\n\t\t});\r\n\t},\r\n\r\n\toff: function (colorBorder, colorCode) {\r\n\t\tcolorBorder.setStyle({\r\n\t\t\tborder: '2px solid ' + colorCode\r\n\t\t});\r\n\t}\r\n});\r\n\r\nvar nicEditorBgColorButton = nicEditorColorButton.extend({\r\n\tcolorSelect: function (c) {\r\n\t\tthis.ne.nicCommand('hiliteColor', c);\r\n\t\tthis.removePane();\r\n\t}\r\n});\r\n\r\nnicEditors.registerPlugin(nicPlugin, nicColorOptions);\r\n\r\n\r\n\r\n/* START CONFIG */\r\nvar nicImageOptions = {\r\n\tbuttons: {\r\n\t\t'image': {\r\n\t\t\tname: 'Add Image', \r\n\t\t\ttype: 'nicImageButton', \r\n\t\t\ttags: ['IMG']\r\n\t\t}\r\n\t}\r\n\r\n};\r\n/* END CONFIG */\r\n\r\nvar nicImageButton = nicEditorAdvancedButton.extend({\r\n\taddPane: function () {\r\n\t\tthis.im = this.ne.selectedInstance.selElm().parentTag('IMG');\r\n\t\tthis.addForm({\r\n\t\t\t'': {\r\n\t\t\t\ttype: 'title', \r\n\t\t\t\ttxt: 'Add/Edit Image'\r\n\t\t\t},\r\n\t\t\t'src': {\r\n\t\t\t\ttype: 'text', \r\n\t\t\t\ttxt: 'URL', \r\n\t\t\t\t'value': 'http://', \r\n\t\t\t\tstyle: {\r\n\t\t\t\t\twidth: '150px'\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t'alt': {\r\n\t\t\t\ttype: 'text', \r\n\t\t\t\ttxt: 'Alt Text', \r\n\t\t\t\tstyle: {\r\n\t\t\t\t\twidth: '100px'\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t'align': {\r\n\t\t\t\ttype: 'select', \r\n\t\t\t\ttxt: 'Align', \r\n\t\t\t\toptions: {\r\n\t\t\t\t\tnone: 'Default', \r\n\t\t\t\t\t'left': 'Left', \r\n\t\t\t\t\t'right': 'Right'\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}, this.im);\r\n\t},\r\n\r\n\tsubmit: function (e) {\r\n\t\tvar src = this.inputs['src'].value;\r\n\t\tif (src == \"\" || src == \"http://\") {\r\n\t\t\talert(\"You must enter a Image URL to insert\");\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tthis.removePane();\r\n\r\n\t\tif (!this.im) {\r\n\t\t\tvar tmp = 'javascript:nicImTemp();';\r\n\t\t\tthis.ne.nicCommand(\"insertImage\", tmp);\r\n\t\t\tthis.im = this.findElm('IMG', 'src', tmp);\r\n\t\t}\r\n\t\tif (this.im) {\r\n\t\t\tthis.im.setAttributes({\r\n\t\t\t\tsrc: this.inputs['src'].value,\r\n\t\t\t\talt: this.inputs['alt'].value,\r\n\t\t\t\talign: this.inputs['align'].value\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n});\r\n\r\nnicEditors.registerPlugin(nicPlugin, nicImageOptions);\r\n\r\n\r\n\r\n\r\n/* START CONFIG */\r\nvar nicSaveOptions = {\r\n\tbuttons: {\r\n\t\t'save': {\r\n\t\t\tname: __('Save this content'), \r\n\t\t\ttype: 'nicEditorSaveButton'\r\n\t\t}\r\n\t}\r\n};\r\n/* END CONFIG */\r\n\r\nvar nicEditorSaveButton = nicEditorButton.extend({\r\n\tinit: function () {\r\n\t\tif (!this.ne.options.onSave) {\r\n\t\t\tthis.margin.setStyle({\r\n\t\t\t\t'display': 'none'\r\n\t\t\t});\r\n\t\t}\r\n\t},\r\n\tmouseClick: function () {\r\n\t\tvar onSave = this.ne.options.onSave;\r\n\t\tvar selectedInstance = this.ne.selectedInstance;\r\n\t\tonSave(selectedInstance.getContent(), selectedInstance.elm.id, selectedInstance);\r\n\t}\r\n});\r\n\r\nnicEditors.registerPlugin(nicPlugin, nicSaveOptions);\r\n\r\n\r\n/**\r\n* NicEdit Smiles Support\r\n*/\r\n\r\n/* SMILES SUPPPORT*/\r\n/* START CONFIG */\r\nvar smileOptions = {\r\n\tbuttons: {\r\n\t\t'smile': {\r\n\t\t\tname: 'Add Smile', \r\n\t\t\ttype: 'nicEditorSmileButton', \r\n\t\t\tnoClose: true, \r\n\t\t\ttags: ['Sm']\r\n\t\t}\r\n\t}\r\n};\r\n/* END CONFIG */\r\n\r\nvar nicEditorSmileButton = nicEditorAdvancedButton.extend({\r\n\taddPane: function () {\r\n\t\tvar smileList = [3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24];\r\n\t\tvar smileItems = new bkElement('DIV').setStyle({\r\n\t\t\twidth: '270px'\r\n\t\t});\r\n\t\tfor (var g in smileList) {\r\n\t\t\tvar smileClass = 'ui-smile ui-smile-' + smileList[g] + '';\r\n\t\t\tvar smileElement = '<span class=\"' + smileClass + '\" ></span>';\r\n\t\t\tvar smileSquare = new bkElement('DIV').setStyle({\r\n\t\t\t\t'cursor': 'pointer', \r\n\t\t\t\t'height': '17px', \r\n\t\t\t\t'width': '17px', \r\n\t\t\t\t'float': 'left'\r\n\t\t\t}).appendTo(smileItems);\r\n\t\t\tvar smileBorder = new bkElement('DIV').appendTo(smileSquare);\r\n\t\t\tvar smileInner = new bkElement('DIV').setStyle({\r\n\t\t\t\toverflow: 'hidden', \r\n\t\t\t\twidth: '17px', \r\n\t\t\t\theight: '17px'\r\n\t\t\t}).addEvent('click', this.smileSelect.closure(this, smileClass)).addEvent('mouseover', this.on.closure(this, smileBorder)).addEvent('mouseout', this.off.closure(this, smileBorder)).appendTo(smileBorder);\r\n\t\t\tsmileInner.innerHTML = smileElement;\r\n\t\t\tif (!window.opera) {\r\n\t\t\t\tsmileSquare.onmousedown = smileInner.onmousedown = bkLib.cancelEvent;\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.pane.append(smileItems.noSelect());\r\n\t},\r\n\r\n\tsmileSelect: function (smileClass) {\r\n\t\tvar sel, range, html; \r\n\t\tif (window.getSelection) { \r\n\t\t\tsel = window.getSelection(); \r\n\t\t\tif (sel.getRangeAt && sel.rangeCount) { \r\n\t\t\t\trange = sel.getRangeAt(0);  \r\n\r\n\t\t\t\tvar span = document.createElement(\"span\");\r\n\t\t\t\tspan.setAttribute(\"class\", smileClass);\r\n\t\t\t\trange.insertNode(span); \r\n\t\t\t} \r\n\t\t} else if (document.selection && document.selection.createRange) { \r\n\t\t\trange = document.selection.createRange();\r\n\t\t\trange.pasteHTML('<span class=\"' + smileClass + '\" />');\r\n\t\t}\r\n\r\n\t\tthis.removePane();\r\n\t},\r\n\r\n\ton: function (smileBorder) {\r\n\t\tsmileBorder.setStyle({\r\n\t\t\tborder: '1px solid #000'\r\n\t\t});\r\n\t},\r\n\r\n\toff: function (smileBorder) {\r\n\t\tsmileBorder.setStyle({\r\n\t\t\tborder: 'none'\r\n\t\t});\r\n\t}\r\n});\r\nnicEditors.registerPlugin(nicPlugin, smileOptions);\r\n\r\n\r\n/* Print plugin  */\r\nvar nicPrintOptions = {\r\n\tbuttons : {\r\n\t\t'print' : {\r\n\t\t\tname : __('Some alt text for the button'), \r\n\t\t\ttype : 'nicEditorPrintButton'\r\n\t\t}\r\n\t}\t\r\n};\r\n\r\nvar nicEditorPrintButton = nicEditorButton.extend({   \r\n\tmouseClick : function(){\r\n\t\tvar container = $(\"<div>\");\r\n\t\tcontainer.append(nicEditors.findEditor('ui-bizagi-rtfeditor').getContent());\r\n\t\tif($.browser.msie){\r\n\t\t\t$(container).printElement({\r\n\t\t\t\tprintMode:'popup'\r\n\t\t\t});\r\n\t\t}else{\r\n\t\t\t$(container).printElement();\r\n\t\t}\r\n\t}\r\n});\r\n \r\nnicEditors.registerPlugin(nicPlugin,nicPrintOptions);\r\n\r\n\r\n\r\n","/*\r\n* jQuery UI SearchList @VERSION\r\n* Author: David Romero\r\n* Copyright (c) 2013 (http://www.bizagi.com)\r\n*\r\n* Depends:\r\n*  ui.core.js\r\n*/\r\n(function ($) {\r\n\r\n    $.widget('ui.searchList', {\r\n\r\n        options: {\r\n            list: [],\r\n            cases: [],\r\n            SEARCH_MAX_LENGTH: 1\r\n        },\r\n        _create: function () {\r\n\r\n            var self = this;\r\n            var element = self.element;\r\n            var cases = self.options.cases;\r\n            var input = element.find('input[type=text]');\r\n\r\n            input.autocomplete(\r\n            {\r\n                source: self._getLabels(),\r\n                minLength: 0,\r\n                messages:\r\n                {\r\n                    noResults: null\r\n                },\r\n                select: function (event, ui) {\r\n                    var value = $.map(self.options.list, function (obj) {\r\n                        if (obj.displayName == ui.item.value) return obj;\r\n                    });\r\n\r\n                    self._prependCases(value[0]);\r\n                    self._eventRemove();\r\n                },\r\n                close: function () {\r\n                    input.val(\"\");\r\n                }\r\n            });\r\n\r\n            element.on(\"click\", function (event) {\r\n                input.focus();\r\n            });\r\n\r\n            input.on(\"keydown\", function (event) {\r\n\r\n                if (event.keyCode == 8 || event.keyCode == 46) {\r\n\r\n                    var lastElement = element.find('li').not(\":last\").last();\r\n\r\n                    if ($(this).val().length == 0 && lastElement.hasClass('selected')) {\r\n\r\n                        var closeButton = lastElement.find('a.closebutton');\r\n                        closeButton.trigger('click');\r\n                        $(this).blur().focus();\r\n                \r\n                    } else if ($(this).val().length == 0) {\r\n\r\n                        $(lastElement).addClass('selected');\r\n                        $(this).blur().focus();\r\n                    }\r\n                }\r\n\r\n                if (event.keyCode == 13) {\r\n\r\n                    event.preventDefault();\r\n                }\r\n\r\n            })\r\n        },\r\n        _getLabels: function () {\r\n\r\n            var self = this;\r\n            var labels = [];\r\n\r\n            $.each(self.options.list, function (key, value) {\r\n                labels.push(value.displayName);\r\n            });\r\n\r\n            return labels;\r\n        },\r\n        _prependCases: function (value) {\r\n\r\n            var self = this;\r\n            var element = self.element;\r\n            var cases = self.options.cases;\r\n            var input = element.find('input[type=text]');\r\n\r\n            if ($.inArray(value.id, cases) < 0) {\r\n                cases.push(value.id);\r\n                input.parent().before('<li class=\"selected-case\" data-case-value=\"' + value.id + '\"><label>' + value.displayName + '</label><a class=\"closebutton\"></a></li>');\r\n            }\r\n\r\n        },\r\n        _eventRemove: function () {\r\n\r\n            var self = this;\r\n            var element = self.element;\r\n            var cases = self.options.cases;\r\n            var elementRemove = element.find('a.closebutton');\r\n\r\n            elementRemove.off('click').on('click', function (e) {\r\n                e.preventDefault();\r\n\r\n                var value = $(this).parent().data('case-value');\r\n                cases.splice($.inArray(value, cases), 1);\r\n                $(this).parent().remove();\r\n            });\r\n\r\n        }\r\n    });\r\n\r\n})(jQuery);","/**\r\nPlugin to create WorkPortal Tables...\r\n\r\n    var options = {\r\n        data: {},\r\n        css:'customCSS'\r\n    };\r\n\r\n    $('selector').uitable(options);\r\n\r\n    $(document).on(\"tableCompleted\", function(obj){\r\n        //console.log(obj.message, obj.ui);\r\n    });\r\n    \r\n    $(document).on(\"headerClicked\", function(obj){\r\n        //console.log(obj.message, obj.ui);\r\n    });\r\n\r\n@class $.fn.uitable \r\n@constructor uitable\r\n**/\r\n(function ( $ ) {\r\n    \"use strict\";\r\n\r\n    $.fn.uitable = function(options, params) {\r\n\r\n        var plg = this;\r\n        plg.config = {\r\n            namespace:$.bizagi.ui.controls.uitable.namespace,\r\n            cssComponent:$.bizagi.ui.controls.uitable.css,\r\n            availableComponents:$.bizagi.ui.controls.uitable.availableComponents\r\n        };\r\n\r\n        plg.settings = {\r\n            /**\r\n            DataSource to create a checkbox Control\r\n\r\n                var data = [\r\n                            {\r\n                                headers:[\r\n                                            {value:'header1'}\r\n                                        ],\r\n                                rows:   [\r\n                                            {value:'header1'},\r\n                                            {value:{component:'uicombo', data:dataforComponent}\r\n                                        ]\r\n                            }\r\n                        ];\r\n\r\n            @property data \r\n            @type Object\r\n            @default \"{}\"\r\n            **/\r\n            data:{},\r\n            asTable: true,\r\n            nameTemplate: $.bizagi.ui.controls.uitable.tmpl,\r\n            rowTemplate: $.bizagi.ui.controls.uitable.tmpl2,\r\n            /**\r\n            Function to modify cell values\r\n\r\n            @property cellValue \r\n            @type Function\r\n            @default \"null\"\r\n            **/\r\n            cellValue: null,\r\n            /**\r\n            Function to add class in odd rows\r\n\r\n            @property oddClass \r\n            @type String\r\n            @default \"null\"\r\n            **/\r\n            oddClass: null,\r\n            /**\r\n            Function to add a custon CSS Class\r\n\r\n            @property css \r\n            @type String\r\n            @default \"\"\r\n            **/\r\n            css:'',\r\n            getTemplate: function(name){\r\n                return bizagi.getTemplate(name);\r\n            },\r\n            /**\r\n            Function exceute when table is ready\r\n\r\n            @property onComplete \r\n            @type Function\r\n            @default \"function(){}\"\r\n            **/\r\n            onComplete: function(){},\r\n            /**\r\n            Function exceute when each header is clicked\r\n\r\n            @property headerClick \r\n            @type Function\r\n            @default \"function(){}\"\r\n            **/\r\n            headerClick: function(){}\r\n        };\r\n\r\n        plg.util = {\r\n            clone:function(arr){\r\n                var arr2  = [];\r\n                for (var i = 0; i < arr.length; i++) {\r\n                    arr2.push(arr[i]);\r\n                }\r\n                return arr2;\r\n            }\r\n        };\r\n\r\n        plg.methods = {\r\n            init:function(op){\r\n                var self = $(this);\r\n                var template = op.getTemplate(op.nameTemplate);\r\n                var rowTemplate = op.getTemplate(op.rowTemplate);\r\n\r\n                self.attr('role', op.namespace);\r\n                self.addClass(op.cssComponent);\r\n                self.addClass(op.css);\r\n\r\n                $.when($.get(template), $.get(rowTemplate)).done(function(a, b){\r\n                    var nData = op.data;\r\n\r\n                    nData = plg.methods.recursiveRows.apply(this, [op]);\r\n\r\n                    var fValue = (op.cellValue) ? op.cellValue : plg.methods.cellValue;\r\n\r\n                    var tmp = $.tmpl(a[0], nData,{\r\n                        testValue: fValue\r\n                    });\r\n\r\n                    op.rowTemplate = b[0];\r\n\r\n\r\n                    self.data('cellValue', fValue);\r\n                    \r\n                    if(op.onComplete){\r\n                        self.data('onComplete', op.onComplete);\r\n                    }\r\n\r\n                    if(plg.settings.oddClass){\r\n                        tmp.find('.biz-wp-table-row:odd').addClass(plg.settings.oddClass);\r\n                    }\r\n\r\n                    self.append(tmp);\r\n                    plg.methods.addHandlers.apply(self, [tmp]);\r\n\r\n                }).fail(function(){\r\n                    $.error('No se pudo cargar el template para generar las tablas');\r\n                });\r\n\r\n            },\r\n            addHandlers: function(tmp){\r\n                var self = $(this);\r\n\r\n                tmp.on('click.table', 'th' ,function(event){\r\n                    plg.settings.headerClick();\r\n\r\n                    /**\r\n                    Fired when header is clicked\r\n\r\n                    @event headerClicked \r\n                    @param {String} type headerClicked\r\n                    @param {String} message\r\n                    @param {Date} time\r\n                    @param {Object} Jquery Object HTML\r\n                    **/\r\n                    $.event.trigger({\r\n                        type: \"headerClicked\",\r\n                        message: \"Header is Clicked\",\r\n                        time: new Date(),\r\n                        ui:$(event.target)\r\n                    });\r\n                });\r\n\r\n                plg.settings.onComplete.apply(self, []);\r\n\r\n\r\n                /**\r\n                Fired when table is ready\r\n\r\n                @event tableCompleted \r\n                @param {String} type tableCompleted\r\n                @param {String} message\r\n                @param {Date} time\r\n                @param {Object} Jquery Object HTML\r\n                **/\r\n                $.event.trigger({\r\n                    type: \"tableCompleted\",\r\n                    message: \"Table is Completed\",\r\n                    time: new Date(),\r\n                    ui:self\r\n                });\r\n\r\n                var components = $('[role^=\"component:\"]');\r\n\r\n                if(components.length > 0){\r\n                    plg.methods.createComponents.apply(self, [components]);\r\n                }\r\n\r\n                self.data('plg', plg);\r\n\r\n            },\r\n            createComponents: function(comps){\r\n                var self = $(this);\r\n\r\n                for(var i=0; i<comps.length; i++){\r\n                    var dataComp, el = $(comps[i]);\r\n                    var type = el.attr('role').toLowerCase().replace('component:', '');\r\n\r\n                    if(plg.methods.validateComponent(type)){\r\n\r\n                        if(plg.settings.data.datasource[el.data('position')]){\r\n                            dataComp = plg.settings.data.datasource[el.data('position')];\r\n                        }else{\r\n                            dataComp = self.data().plg.settings.data.datasource[el.data('position')];\r\n                        }\r\n\r\n\r\n                        el[type]({data:dataComp});\r\n                    }else{\r\n                        $.error('No es un componente valido para tablas');\r\n                    }\r\n                }\r\n\r\n            },\r\n            recursiveRows: function(op){\r\n                var self = this;\r\n                for(var i=0; i<op.data.rows.length; i++){\r\n                   for(var j=0; j<op.data.rows[i].length; j++){\r\n                        op.data.rows[i][j].indexCol = j;\r\n                        op.data.rows[i][j].indexRow = i;\r\n                    }\r\n                }\r\n\r\n                return op.data;\r\n            },\r\n            cellValue : function(obj){\r\n                var val = '';\r\n                if(!this.data.datasource){\r\n                    this.data.datasource = [];\r\n                }\r\n                if(obj.cellValue){\r\n                    val = obj.cellValue(obj);\r\n                    if(typeof val === 'object' && val.jquery){\r\n                        val = val[0].outerHTML;\r\n                    }\r\n                }else{\r\n                    if(typeof obj.value === 'string' || typeof obj.value === 'number'){\r\n                        val = obj.value;\r\n                    } else if(typeof obj.value === 'object' && obj.value.hasOwnProperty('component')){\r\n                        val = '<div role=\"component:'+obj.value.component+'\" data-position=\"'+obj.indexCol+'-'+obj.indexRow+'\"></div>';\r\n                        if(obj.value.data){\r\n                            this.data.datasource[obj.indexCol+'-'+obj.indexRow] = obj.value.data;\r\n                        }else{\r\n                            this.data.datasource[obj.indexCol+'-'+obj.indexRow] = {};\r\n                        }\r\n                    }\r\n                }\r\n\r\n                return val;\r\n            },\r\n            validateComponent: function(comp){\r\n                var self = this;\r\n                var rValue = false;\r\n                for(var i=0; i<plg.config.availableComponents.length; i++){\r\n                    if(comp === plg.config.availableComponents[i]){\r\n                        rValue = true;\r\n                    }\r\n                }\r\n\r\n                return rValue;\r\n\r\n            },\r\n            addRow:function(row, position){\r\n                var self = $(this);\r\n                var plugin = self.data('plg');\r\n\r\n                if(self.attr('role') === plugin.settings.namespace){\r\n                    var nPosition = parseFloat(position) - 1;\r\n                    var elPos = $('.biz-wp-table-body tr:eq( '+nPosition+' )',self);\r\n                    var posLength = $('[data-pos^=\"added-\"]', self).length;\r\n\r\n                    var nPosRow = position + posLength;\r\n                    var tmplRow = self.data('plg').settings.rowTemplate;\r\n                    var countCols = $('td',elPos).length;\r\n\r\n                    if(countCols < row.length){\r\n                        row = row.slice(0, countCols);\r\n\r\n                    }else if(countCols > row.length){\r\n\r\n                        var addCols = countCols - row.length;\r\n                        for(var i=0; i<addCols;i++){\r\n                            row.push({value:''});\r\n                        }\r\n                    }\r\n\r\n                    for(var j=0; j<row.length; j++){\r\n                        row[j].indexCol = j;\r\n                        row[j].indexRow = 'added-' + nPosRow;\r\n                    }\r\n\r\n                    var data = {cols:row, nPosRow:nPosRow};\r\n                    var tmp = $.tmpl(tmplRow, data,{\r\n                            testValue: (self.data('cellValue')) ? self.data('cellValue') : plg.methods.cellValue\r\n                        });\r\n                    var responseTmp = $(tmp);\r\n\r\n\r\n                    responseTmp.insertAfter(elPos);\r\n\r\n                    var completeTask = self.data('onComplete');\r\n                    completeTask.apply(self,[]);\r\n\r\n                                        \r\n                    for(var prop in data.datasource){\r\n                        plugin.settings.data.datasource[prop + ''] =  data.datasource[prop];\r\n                    }\r\n\r\n\r\n                    var components = $('[role^=\"component:\"]', self);\r\n\r\n                    if(components.length > 0){\r\n                        plugin.methods.createComponents.apply(self, [components]);\r\n                    }\r\n                }\r\n\r\n            },\r\n            addColumn:function(){\r\n                var self = this;\r\n            },\r\n            /**\r\n            * Destroy Table\r\n            *\r\n            *   $('selector').uitable('destroy');\r\n            *\r\n            * @method destroy\r\n            * @return {Object} Jquery Empty Object\r\n            */\r\n            destroy:function(op){\r\n                var self = $(this);\r\n                if(self.attr('role') === self.data().plg.settings.namespace){\r\n                    self.attr('role','');\r\n                    self.empty();\r\n\r\n                }else{\r\n                    $.error('No es posible eliminar un control con un namespace diferente: [role: ' + op.namespace+']');\r\n                }\r\n            }\r\n        };\r\n\r\n\r\n        \r\n        if(typeof options != 'object' && options) {\r\n\r\n                var _self = $(this);\r\n                if(_self.attr('role') === $.bizagi.ui.controls.uitable.namespace){\r\n\r\n                    $.extend(plg.settings, params, plg.config);\r\n                    var args = plg.util.clone(arguments);\r\n                    args = args.slice(1,args.length);\r\n                    return plg.methods[arguments[0]].apply(this, args);\r\n\r\n                }else{\r\n                    return false;\r\n                }\r\n\r\n        } else if( typeof options === 'object' || !options || options === undefined) {\r\n\r\n                $.extend(plg.settings, options, plg.config);\r\n                return this.each(function() {\r\n                    plg.methods.init.apply(this, [plg.settings]);\r\n                });\r\n\r\n        } else {\r\n\r\n                $.error('Method ' + options + ' does not exist on jQuery.table');\r\n\r\n        }\r\n\r\n    };\r\n\r\n    $.bizagi.ui.controls.uitable.plugin = $.fn.uitable;\r\n\r\n}( jQuery ));","/**\r\nPlugin to create WorkPortal Combos...\r\n\r\n    var options = {\r\n        data: {},\r\n        css:'customCSS'\r\n    };\r\n\r\n    $('selector').uicombo(options);\r\n\r\n    $(document).on(\"comboChange\", function(obj){\r\n        console.log(obj.message, obj.ui, obj.ui.val());\r\n    });\r\n\r\n@class $.fn.uicombo \r\n@constructor uicombo\r\n**/\r\n(function ($) {\r\n    \"use strict\";\r\n    $.fn.uicombo = function (options, params) {\r\n\r\n        var plg = this;\r\n\r\n        plg.config = {\r\n            namespace: $.bizagi.ui.controls.uicombo.namespace,\r\n            cssComponent: $.bizagi.ui.controls.uicombo.css,\r\n            internalData: {}\r\n        };\r\n\r\n        plg.settings = {\r\n            /**\r\n            DataSource to create a uiRadio Control\r\n\r\n            var data = [\r\n            {   \r\n            value:value,\r\n            text:'combo'\r\n            }\r\n            ];\r\n\r\n            @property data \r\n            @type Object\r\n            @default \"{}\"\r\n            **/\r\n            data: {},\r\n            ascombo: true,\r\n\r\n            /**\r\n            to disabled combo\r\n\r\n            @property disabled \r\n            @type bool\r\n            @default false\r\n            */\r\n            disabled: false,\r\n\r\n            /**\r\n            Make the combo searchable\r\n\r\n            @property isSearchable \r\n            @type Boolean\r\n            @default \"false\"\r\n            **/\r\n            isSearchable: false,\r\n            /**\r\n            Make the combo editable\r\n\r\n            @property isEditable \r\n            @type Boolean\r\n            @default \"false\"\r\n            **/\r\n            isEditable: false,\r\n            nameTemplate: $.bizagi.ui.controls.uicombo.tmpl,\r\n            nameSubTemplate: $.bizagi.ui.controls.uicombo.tmpl2,\r\n            /**\r\n            Function to set a initial value\r\n                \r\n            {value:1}\r\n\r\n            @property initValue \r\n            @type Object\r\n            @default \"null\"\r\n            **/\r\n            initValue: null,\r\n            /**\r\n            Function to modify values\r\n\r\n            @property itemValue \r\n            @type Function\r\n            @param {Object} Object with value\r\n            @default \"null\"\r\n            **/\r\n            itemValue: null,\r\n            /**\r\n            Function to modify output text\r\n\r\n            @property itemText \r\n            @type Function\r\n            @param {Object} Object with text\r\n            @default \"null\"\r\n            **/\r\n            itemText: null,\r\n            css: '',\r\n            orientation: 'biz-o-left',\r\n            getTemplate: function (name) {\r\n                return bizagi.getTemplate(name);\r\n            },\r\n\r\n            /**\r\n            Function to initialize templates\r\n            @type Function\r\n            @return object\r\n            **/\r\n            initializeTemplates: function () {\r\n\r\n                var self = this;\r\n                var deferred = $.Deferred();\r\n                var tmpl1 = self.nameTemplate;\r\n                var tmpl2 = self.nameSubTemplate;\r\n\r\n                return {\r\n                    \"combo\": (bizagi.getTemplate(tmpl1)),\r\n                    \"list\": (bizagi.getTemplate(tmpl2))\r\n                };\r\n            },\r\n\r\n            /**\r\n            Function exceute when combo is ready\r\n\r\n            @property onComplete \r\n            @type Function\r\n            @default \"function(){}\"\r\n            **/\r\n            onComplete: function () { },\r\n            /**\r\n            Function exceute when combo change\r\n\r\n            @property onChange \r\n            @type Function\r\n            @default \"function(){}\"\r\n            **/\r\n            onChange: function () { },\r\n            /**\r\n             Function execute when combo DropDown\r\n\r\n             @property onComboDropDown\r\n             @type Function\r\n             @default \"function(){}\"\r\n             **/\r\n            onComboDropDown: function () { }\r\n        };\r\n\r\n        plg.methods = {\r\n            init: function (op) {\r\n\r\n                var self = $(this),\r\n                    template = op.getTemplate(op.nameTemplate),\r\n                    subTemplate = op.getTemplate(op.nameSubTemplate),\r\n                    nData;\r\n\r\n                //Util functions to detect ie browsers accurately                \r\n                var isIE = function () {\r\n                    return (navigator.appName.indexOf(\"Internet Explorer\") > 0);\r\n                };\r\n\r\n                var isIE11 = function () {\r\n                    return !!navigator.userAgent.match(/Trident\\/7.0/) && !navigator.userAgent.match(/MSIE/i);\r\n                };\r\n\r\n                op.IE = isIE() ? true : (isIE11() ? true : undefined);\r\n\r\n                self.attr('role', op.namespace);\r\n                self.addClass(op.cssComponent);\r\n                self.addClass(op.css);\r\n\r\n                self.loader = new bizagi.ui.controls.tmplloader();\r\n\r\n                $.when(self.loader.loadTemplates(op.initializeTemplates())).done(function () {\r\n\r\n                    var a = self.loader.getTemplate(\"combo\");\r\n                    var b = self.loader.getTemplate(\"list\");\r\n\r\n                    plg.config.internalData = nData = op.data;\r\n\r\n                    nData.isEditable = op.isEditable;\r\n                    nData.disabled = op.disabled;\r\n\r\n                    plg.config.subTemplateHTML = b;\r\n\r\n                    var tmp = $.tmpl(a, op.data, {\r\n                        itemValue: (op.itemValue) ? op.itemValue : plg.methods.itemValue,\r\n                        itemText: (op.itemText) ? op.itemText : plg.methods.itemText\r\n                    });\r\n\r\n                    self.append(tmp);\r\n\r\n                    plg.config.inputCombo = $('.biz-wp-combo-input', self);\r\n\r\n                    tmp.find('.biz-wp-combo-option').each(function (index, value) {\r\n                        if (op.data.combo[index].data) {\r\n                            $.extend($(value).data(), op.data.combo[index].data);\r\n                        }\r\n                    });\r\n\r\n                    plg.settings.onComplete.apply(self, []);\r\n\r\n                    self.methods = plg.methods;\r\n                    self.config = plg.config;\r\n                    self.settings = plg.settings;\r\n\r\n                    self.methods.configureHandlers.apply(self, []);\r\n\r\n\r\n                    /**\r\n                    Fired when a combo is created\r\n\r\n                    @event comboCompleted \r\n                    @param {String} type comboCompleted\r\n                    @param {String} message\r\n                    @param {Date} time\r\n                    @param {Object} Jquery Object HTML \r\n                    **/\r\n                    $.event.trigger({\r\n                        type: \"comboCompleted\",\r\n                        message: \"combo is Completed\",\r\n                        time: new Date(),\r\n                        ui: self\r\n                    });\r\n\r\n                    if (plg.settings.initValue) {\r\n                        var value = '',\r\n                                text = '';\r\n\r\n                        if (plg.settings.itemText) {\r\n                            text = plg.settings.itemText(plg.settings.initValue);\r\n                        } else {\r\n                            text = plg.settings.initValue.text;\r\n                        }\r\n\r\n                        if (plg.settings.itemValue) {\r\n                            value = plg.settings.itemValue(plg.settings.initValue);\r\n                        } else {\r\n                            value = plg.settings.initValue.value;\r\n                        }\r\n\r\n                        if (text === \"\") {\r\n                            self.config.inputCombo.val('');\r\n                        } else {\r\n                            self.config.inputCombo.val(text);\r\n                        }\r\n\r\n                        plg.config.inputCombo.data('value', value);\r\n\r\n                    }\r\n\r\n\r\n                    /*     }).fail(function () {\r\n                    $.error('No se pudo cargar el template para generar las tablas');\r\n                    });*/\r\n                });\r\n            },\r\n\r\n            getControl: function () {\r\n                var self = this,\r\n                    $control = $('.biz-wp-combo', self);\r\n\r\n                return $control;\r\n            },\r\n            getData: function () {\r\n                return plg.config.internalData;\r\n            },\r\n            findDataByValue: function (val) {\r\n                var self = this,\r\n                    result = -1,\r\n                    i = 0;\r\n\r\n                if (val !== undefined && val !== null) {\r\n                    var compareValIn = (typeof val === 'object') ? val.join(\" - \") : (typeof val === 'boolean') ? val.toString() : val,\r\n                        compareVal = $.trim(compareValIn).substring(0, compareValIn.length).toLowerCase(),\r\n                        selfData = self.getData();\r\n                }\r\n\r\n                return result;\r\n            },\r\n            /*\r\n            *   Template method to implement in each device to customize the render's behaviour to add handlers\r\n            */\r\n            configureHandlers: function () {\r\n                var self = this,\r\n                    control = self.methods.getControl.apply(self, []);\r\n\r\n                self.config.inputCombo.focus(function () {\r\n                    //$(this).trigger('click');\r\n                });\r\n\r\n                self.config.inputCombo.blur(function () {\r\n                    if (self.settings.isSearchable) {\r\n                        self.methods.validateValueInDatasource();\r\n                    }\r\n                });\r\n\r\n                self.config.inputCombo.click(function () {\r\n                    var idDropdown = \"dd-\" + self.config.inputCombo.attr(\"id\");\r\n                    if ($(\"#\" + idDropdown, control).length === 0) {\r\n                        self.methods.comboDropDown.apply(self, []);\r\n                    } else {\r\n                        // Close combo if clicked twice \r\n                        self.methods.dropDownDestroy.apply(self, [$(idDropdown)]);\r\n                    }\r\n                    self.config.inputCombo.select();\r\n                });\r\n                // Bind clicks to fake UI in order to simulate select clicks\r\n                $(\".biz-wp-combo-btn\", control).bind(\"click.combo\", function () {\r\n                    self.config.inputCombo.trigger(\"click\").focus();\r\n                });\r\n\r\n                self.config.inputCombo.keyup(function (e) {\r\n                    self.methods.keyUpFunction.apply(self, [e]);\r\n                });\r\n\r\n                self.config.inputCombo.keydown(function (e) {\r\n                    self.methods.keyDownFunction.apply(self, [e]);\r\n                });\r\n            },\r\n            /*\r\n            *   Makes the combo drops down, also fetch the data first if the combo is set to load on demand\r\n            */\r\n            comboDropDown: function () {\r\n                var self = this;\r\n\r\n                $.when(self.methods.getData()).done(function (data) {\r\n                    self.methods.internalComboDropDown.apply(self, [data]);\r\n                    plg.settings.onComboDropDown();\r\n                });\r\n\r\n            },\r\n            /*\r\n            *   Draws the mini-popup\r\n            */\r\n            internalComboDropDown: function (data) {\r\n                $(\".ui-select-dropdown.open\").detach();\r\n                var self = this, selectTmp, objSelected = {};\r\n                /** temp templates **/\r\n                var containerDropdown = $(\"<div class='ui-select-dropdown open'></div>\");\r\n                /* control reference */\r\n                var containerControl = self.config.inputCombo.closest('.biz-wp-combo-data-container');\r\n                var containerRender = containerControl.closest('.biz-wp-combo');\r\n                var idDropdown = \"dd-\" + self.config.inputCombo.attr(\"id\");\r\n                var selectedValue = self.methods.findDataByValue(self.config.inputCombo.val());\r\n                var scrollPosition = 0;\r\n\r\n                data = data || self.properties.data;\r\n\r\n                self.repositionInterval;\r\n\r\n                var height = containerRender.css(\"height\"),\r\n                    selfControl = self.methods.getControl.apply(self, []);\r\n\r\n                containerRender.addClass(\"ac-is-visible\");\r\n\r\n                containerRender.css(\"height\", height);\r\n                containerControl.addClass(\"ac-is-visible ac-clear-floats\");\r\n\r\n                containerDropdown.attr(\"id\", idDropdown);\r\n\r\n                selectTmp = $.tmpl(plg.config.subTemplateHTML, data, {\r\n                    itemValue: (self.settings.itemValue) ? self.settings.itemValue : self.methods.itemValue,\r\n                    itemText: (self.settings.itemText) ? self.settings.itemText : self.methods.itemText\r\n                });\r\n                var dropDown = containerDropdown.append(selectTmp);\r\n                containerControl.append(dropDown);\r\n\r\n\r\n                dropDown.position({\r\n                    my: \"left top\",\r\n                    at: \"left bottom\",\r\n                    of: $(\".biz-wp-combo-input\", selfControl),\r\n                    collision: \"none\"\r\n                }).hide();\r\n\r\n                dropDown.fadeIn();\r\n\r\n                dropDown.width(selfControl.width());\r\n\r\n                self.methods.recalculateComboOffset(dropDown, selfControl);\r\n\r\n                dropDown.data('formWidth', containerControl.width());\r\n                dropDown.data('parentCombo', selfControl);\r\n\r\n                dropDown.addClass(self.settings.orientation);\r\n\r\n                if (selectedValue !== -1) {\r\n                    objSelected = $(\"li[data-value='\" + selectedValue.id + \"']\", dropDown);\r\n                    objSelected.addClass('ui-selected');\r\n                    objSelected.addClass(\"active\");\r\n                    scrollPosition = parseInt(objSelected.position().top);\r\n                    dropDown.scrollTop(scrollPosition);\r\n                }\r\n\r\n                dropDown.on(\"mouseup\", \"li\", function (event) {\r\n\r\n                    event.stopPropagation();\r\n\r\n                    var dataValue = $(this).data('value').toString();\r\n\r\n                    var value = (dataValue) ? $(this).data('value') : '';\r\n                    var val = { value: value, text: $(this).text() };\r\n                    self.methods.onComboItemSelected.apply(self, [val]);\r\n                    self.config.inputCombo.focus();\r\n\r\n                    // Animation effect\r\n                    dropDown.fadeOut('slow', function () {\r\n                        self.methods.dropDownDestroy.apply(self, [dropDown]);\r\n                    });\r\n                    $(document).unbind(\"click.closecombo\");\r\n                });\r\n\r\n                // Stop bubbling outside the dropdown\r\n                $.makeArray(dropDown, self.methods.getControl.apply(self, [])).bind('click', function (e) {\r\n                    e.preventDefault();\r\n                    return false;\r\n                });\r\n\r\n                /*fix for IE*/\r\n                dropDown.bind('mousedown.closecombo', function () {\r\n                    dropDown.attr('md', true);\r\n                });\r\n\r\n                // Handle dialog resizes\r\n                // TODO: Change document handlers to \"closest\" ui-dialog -> ui-resizable-handle  handlers\r\n                $(document).bind(\"mousedown.resizecombo\", function (e) {\r\n                    if ($(e.target).hasClass('ui-resizable-handle')) {\r\n                        if (self.repositionInterval) {\r\n                            clearInterval(self.repositionInterval);\r\n                        }\r\n                        self.repositionInterval = setInterval(function () {\r\n                            self.methods.dropDownReposition.apply(self, [dropDown, containerControl]);\r\n                        }, 10);\r\n                    }\r\n                });\r\n                $(document).bind(\"mouseup.resizecombo\", function (e) {\r\n                    clearInterval(self.repositionInterval);\r\n                    var tg = $(e.target);\r\n                    if (!dropDown.attr('md')) { /* <-- fix for IE*/\r\n                        if (!tg.hasClass('ui-select-dropdown')) {\r\n                            self.methods.dropDownValidClose.apply(self, [tg, dropDown]);\r\n                        }\r\n                    } else {\r\n                        dropDown.removeAttr('md');\r\n                    }\r\n                });\r\n\r\n                $(document).on('mouseup.closecombo', function (e) {\r\n                    var etarget;\r\n                    if (self.settings.IE && e.currentTarget.activeElement) {\r\n                        etarget = e.currentTarget.activeElement\r\n                    } else {\r\n                        etarget = e.target;\r\n                    }\r\n\r\n                    var tg = $(etarget);\r\n                    if (!dropDown.attr('md')) {\r\n                        if (!tg.hasClass('ui-select-dropdown')) {\r\n                            self.methods.dropDownValidClose.apply(self, [tg, dropDown]);\r\n                        }\r\n                    } else {\r\n                        dropDown.removeAttr('md');\r\n                    }\r\n                });\r\n\r\n                $(window).bind('resize.resizecombo', function () {\r\n                    if (self.repositionInterval) {\r\n                        clearInterval(self.repositionInterval);\r\n                    }\r\n\r\n                    self.methods.dropDownReposition.apply(self, [dropDown, containerControl]);\r\n                });\r\n\r\n                $(document).one(\"click.closecombo\", function (e) {\r\n                    var tg = $(e.target);\r\n                    if (!dropDown.attr('md')) {\r\n                        self.methods.dropDownValidClose.apply(self, [tg, dropDown]);\r\n                    } else {\r\n                        dropDown.removeAttr('md');\r\n                    }\r\n                });\r\n\r\n            },\r\n            /*\r\n            * validate when fire event form document and window\r\n            */\r\n            dropDownValidClose: function (target, dropDown) {\r\n                var self = this;\r\n                //   if (target.closest(\".biz-wp-combo\", self.element).length === 0) {\r\n                dropDown.fadeOut('slow', function () {\r\n                    self.methods.dropDownDestroy.apply(self, [dropDown]);\r\n                });\r\n                $(document).unbind(\"click.closecombo\");\r\n                //        }\r\n            },\r\n            /*\r\n            * set a new dropdown position\r\n            */\r\n            dropDownReposition: function (dropDown, containerForm) {\r\n                var self = this,\r\n                    selfControl = self.methods.getControl.apply(self, []);\r\n                if ((containerForm.width() != dropDown.data('formWidth'))) {\r\n\r\n                    dropDown.width((selfControl.width() < 100) ? 100 : selfControl.width());\r\n\r\n                    dropDown.position({\r\n                        my: \"left top\",\r\n                        at: \"left bottom\",\r\n                        of: $(\".biz-wp-combo-input\", selfControl),\r\n                        collision: \"none\"\r\n                    });\r\n                    dropDown.data('formWidth', containerForm.width());\r\n                }\r\n            },\r\n            /*\r\n            * destroy dropdown\r\n            */\r\n            dropDownDestroy: function (dropDown) {\r\n                var self = this;\r\n                var containerControl = self.config.inputCombo.closest('.ui-bizagi-control');\r\n                var containerRender = containerControl.closest('.ui-bizagi-render');\r\n\r\n                if (containerControl.hasClass(\"ac-is-visible\")) {\r\n                    containerControl.removeClass(\"ac-is-visible\");\r\n                }\r\n                if (containerControl.hasClass(\"ac-clear-floats\")) {\r\n                    containerControl.removeClass(\"ac-clear-floats\");\r\n                }\r\n                containerRender.css(\"height\", \"auto\");\r\n                if (containerRender.hasClass(\"ac-is-visible\")) {\r\n                    containerRender.removeClass(\"ac-is-visible\");\r\n                }\r\n\r\n                dropDown.remove();\r\n                $(document).unbind(\"mousedown.closecombo\");\r\n                $(document).unbind(\"mouseup.resizecombo\");\r\n                $(window).unbind('resize.resizecombo');\r\n                $(window).unbind('mouseup.closecombo');\r\n                (self.repositionInterval)\r\n                clearInterval(self.repositionInterval);\r\n            },\r\n            validateValueInDatasource: function () {\r\n                var self = this;\r\n                var selected = plg.config.inputCombo.val();\r\n                var valText = '';\r\n                var selectedKey = self.findDataByValue(selected);\r\n\r\n\r\n                if (!self.value) {\r\n                    self.value = { id: '' };\r\n                }\r\n\r\n                if (selectedKey.id > 0) {\r\n                    self.setValue({ id: selectedKey.id }, false);\r\n                    self.setDisplayValue(selectedKey);\r\n                } else if (selectedKey.id == \"\") {\r\n                    if (self.value.id != selectedKey.id) {\r\n                        self.setValue(selectedKey, false);\r\n                    }\r\n                    self.setDisplayValue(selectedKey);\r\n                } else {\r\n                    self.setDisplayValue(self.selectedValue);\r\n                }\r\n            },\r\n            /*\r\n            *   Keydown listener\r\n            */\r\n            keyDownFunction: function (e) {\r\n                var self = this;\r\n                var idDropdown = \"dd-\" + plg.config.inputCombo.attr(\"id\");\r\n                var dropDown = $(\"#\" + idDropdown);\r\n                var active = $(\"li.active\", dropDown);\r\n\r\n                e = e ? e : window.event;\r\n\r\n                // Need to implement hiding select on \"Escape\" and \"Enter\".\r\n                if (e.altKey || e.ctrlKey || e.metaKey) {\r\n                    return 1;\r\n                }\r\n\r\n\r\n                if (dropDown.length === 0) {\r\n                    self.methods.comboDropDown.apply(self, []);\r\n                    dropDown = $(\"#\" + idDropdown);\r\n                }\r\n\r\n                if (e.shiftKey && e.keyCode) {\r\n                    dropDown.remove();\r\n                    return 0;\r\n                }\r\n\r\n                if (27 == e.keyCode) {\r\n                    self.methods.setDisplayValue.apply(self, [self.selectedValue]);\r\n                    dropDown.remove();\r\n                }\r\n\r\n                if (9 == e.keyCode || 13 == e.keyCode) {\r\n                    if (active.length > 0) {\r\n                        self.config.inputCombo.val(active.text());\r\n                    }\r\n                    if (self.settings.isSearchable) {\r\n                        self.methods.validateValueInDatasource();\r\n                    } else {\r\n                        self.methods.setValue.apply(self, [active.data('value')]);\r\n                    }\r\n                    dropDown.remove();\r\n                    return 1;\r\n                }\r\n\r\n                if (e.keyCode == '38' || e.keyCode == '37') {\r\n                    // up arrow\r\n                    self.methods.selectPreviousElement.apply(self, [dropDown]);\r\n                    return 0;\r\n                }\r\n                else if (e.keyCode == '40' || e.keyCode == '39') {\r\n                    // down arrow\r\n                    self.methods.selectNextElement.apply(self, [dropDown]);\r\n                    return 0;\r\n                }\r\n\r\n                if (e.keyCode == 36) {\r\n                    self.methods.selectFirstElement.apply(self, [dropDown]);\r\n                    return 0;\r\n\r\n                } else if (e.keyCode == 35) {\r\n                    self.methods.selectLastElement.apply(self, [dropDown]);\r\n                    return 0;\r\n\r\n                }\r\n\r\n                return 1;\r\n            },\r\n            /*\r\n            *   KeyUp listener\r\n            */\r\n            keyUpFunction: function (e) {\r\n                var self = this;\r\n                var idDropdown = \"dd-\" + plg.config.inputCombo.attr(\"id\");\r\n                var dropDown = $(\"#\" + idDropdown);\r\n\r\n                e = e ? e : window.event;\r\n\r\n                if (e.altKey || e.ctrlKey || e.metaKey || 50 == e.keyCode || 13 == e.keyCode || 9 == e.keyCode || 27 == e.keyCode || e.keyCode == '38' || e.keyCode == '40' || e.shiftKey && e.keyCode || e.keyCode == 36 || e.keyCode == 35 || e.keyCode == 33 || e.keyCode == 34) {\r\n                    return 0;\r\n                }\r\n\r\n                if (dropDown.length === 0) {\r\n                    self.methods.comboDropDown.apply(self, []);\r\n                    dropDown = $(\"#\" + idDropdown);\r\n                }\r\n\r\n                self.methods.selectItemByKeyUp.apply(self, []);\r\n\r\n                return 1;\r\n            },\r\n            /*\r\n            * Select letter by letter\r\n            */\r\n            selectItemByKeyUp: function () {\r\n                var self = this, objSelected;\r\n\r\n                var idDropdown = \"dd-\" + plg.config.inputCombo.attr(\"id\");\r\n                var dropDown = $(\"#\" + idDropdown);\r\n\r\n\r\n                $('.active', dropDown).removeClass('active');\r\n\r\n                var selectedKey = (self.settings.isSearchable) ? self.methods.findDataByValue(plg.config.inputCombo.val()) : -1;\r\n\r\n                if (selectedKey !== -1) {\r\n                    objSelected = $(\"li[data-value='\" + selectedKey.id + \"']\", dropDown);\r\n                    objSelected.addClass(\"active\");\r\n                } else {\r\n                    objSelected = $('li.ui-selected', dropDown);\r\n                }\r\n\r\n                if (dropDown.length > 0 && objSelected.length > 0) {\r\n                    scrollPosition = parseInt(objSelected.position().top);\r\n                    dropDown.scrollTop(scrollPosition);\r\n                } else {\r\n                    self.methods.setValue.apply(self, [self.selectedValue]);\r\n                }\r\n            },\r\n            selectFirstElement: function (dropDown) {\r\n                var self = this;\r\n                var actual = $(\"li:first\", dropDown);\r\n                $('li', dropDown).removeClass(\"active\");\r\n                actual.addClass(\"active\");\r\n                scrollPosition = actual.position().top;\r\n                dropDown.scrollTop(scrollPosition);\r\n\r\n                plg.config.inputCombo.val($(actual).text());\r\n\r\n\r\n            },\r\n            selectLastElement: function (dropDown) {\r\n                var self = this,\r\n                    actual = $(\"li:last\", dropDown);\r\n                $('li', dropDown).removeClass(\"active\");\r\n                actual.addClass(\"active\");\r\n                scrollPosition = actual.position().top;\r\n                dropDown.scrollTop(scrollPosition);\r\n\r\n                plg.config.inputCombo.val($(actual).text());\r\n\r\n            },\r\n            /*\r\n            * Handler key Up\r\n            */\r\n            selectPreviousElement: function (dropDown) {\r\n                var self = this;\r\n                var scrollPosition = 0;\r\n                var actual = $(\"li.active\", dropDown);\r\n\r\n                if (actual.length === 0) {\r\n                    actual = $(\"li:first\", dropDown);\r\n                }\r\n                var previous = actual.prev();\r\n\r\n                if (previous.length != 0) {\r\n                    actual.removeClass(\"active\");\r\n                    $(previous).addClass(\"active\");\r\n                    scrollPosition = $(previous).position().top;\r\n\r\n                    dropDown.scrollTop(scrollPosition);\r\n                    plg.config.inputCombo.val($(previous).text());\r\n                }\r\n\r\n            },\r\n            /*\r\n            *Handler key Down\r\n            */\r\n            selectNextElement: function (dropDown) {\r\n                var self = this;\r\n                var scrollPosition = 0;\r\n                var actual = $(\"li.active\", dropDown);\r\n\r\n                if (actual.length === 0) {\r\n                    actual = $(\"li:first\", dropDown);\r\n                }\r\n                var next = actual.next();\r\n\r\n                if (next.length != 0) {\r\n                    actual.removeClass(\"active\");\r\n                    $(next).addClass(\"active\");\r\n                    scrollPosition = $(next).position().top;\r\n\r\n                    dropDown.scrollTop(scrollPosition);\r\n                    plg.config.inputCombo.val($(next).text());\r\n                }\r\n\r\n            },\r\n            /*\r\n            *   Handler to react when a combo item is selected\r\n            */\r\n            onComboItemSelected: function (val) {\r\n                var self = this;\r\n                var valValue = val.value.toString();\r\n                var selectedLabel = val.text || \"\";\r\n\r\n                if (valValue === \"\") {\r\n                    self.config.inputCombo.val(selectedLabel);\r\n                } else {\r\n                    self.config.inputCombo.val(selectedLabel);\r\n                }\r\n\r\n                self.methods.setValue.apply(self, [valValue]);\r\n            },\r\n            setValue: function (val) {\r\n                var self = this;\r\n                self.config.inputCombo.data('value', val);\r\n                /**\r\n                Fired when a combo change\r\n\r\n                @event comboChange \r\n                @param {String} type comboChange\r\n                @param {String} message \r\n                @param {Date} time \r\n                @param {Object} Jquery Object HTML \r\n                **/\r\n                var control = self.config.inputCombo,\r\n                        controlProperties = {\r\n                            type: \"comboChange\",\r\n                            message: \"combo change\",\r\n                            time: new Date(),\r\n                            ui: control\r\n                        };\r\n\r\n                plg.settings.onChange(controlProperties);\r\n\r\n                $.event.trigger(controlProperties);\r\n            },\r\n            /*\r\n            *   Sets the value in the rendered control\r\n            */\r\n            setDisplayValue: function (value) {\r\n                var self = this;\r\n                var comboValue = '';\r\n                var comboValueValid = true;\r\n\r\n                value = (plg.settings.itemValue) ? plg.settings.itemValue : plg.methods.itemValue;\r\n\r\n                if (value !== null) {\r\n                    plg.config.inputCombo.val(comboValue);\r\n                } else if (value === null) {\r\n                    plg.config.inputCombo.val(comboValue);\r\n                }\r\n\r\n            },\r\n            /*\r\n            *   Sets the value in the rendered control\r\n            */\r\n            clearDisplayValue: function () {\r\n                var self = this;\r\n                plg.config.inputCombo.val('');\r\n                self.value = self.properties.value = self.selectedValue;\r\n            },\r\n            /*\r\n            *   Returns the selected value in the template\r\n            */\r\n            getSelectedValue: function () {\r\n                var self = this;\r\n                return self.selectedValue;\r\n            },\r\n            recalculateComboOffset: function (dropDwn, objParent) {\r\n                if (bizagi.util.isIE() && (bizagi.util.getInternetExplorerVersion() == 9)) {\r\n                    if (dropDwn.width() !== objParent.width()) {\r\n                        var offset = objParent.width() - dropDwn.width();\r\n                        dropDwn.width(objParent.width() + offset);\r\n                    }\r\n                }\r\n            },\r\n            itemValue: function (obj) {\r\n                var val = '';\r\n                if (obj.itemValue) {\r\n                    val = obj.itemValue(obj);\r\n                } else {\r\n                    if (typeof obj.value === 'string' || typeof obj.value === 'number') {\r\n                        val = obj.value;\r\n                    }\r\n                }\r\n                return val;\r\n            },\r\n            itemText: function (obj) {\r\n                var val = '';\r\n                if (obj.itemValue) {\r\n                    val = obj.itemText(obj);\r\n                } else {\r\n                    if (typeof obj.text === 'string') {\r\n                        val = obj.text;\r\n                    }\r\n                }\r\n                return val;\r\n            },\r\n            /**\r\n            * Destroy ComboBox\r\n            *\r\n            *   $('selector').uicombo('destroy');\r\n            *\r\n            * @method destroy\r\n            * @return {Object} Jquery Empty Object\r\n            */\r\n            destroy: function (op) {\r\n                var self = $(this);\r\n                if (self.attr('role') === op.namespace) {\r\n                    self.empty();\r\n                } else {\r\n                    $.error('No es posible eliminar un control con un namespace diferente: [role: ' + op.namespace + ']');\r\n                }\r\n            },\r\n            /*\r\n            *   Select the related item (syntax = {text:\"item1\", value:1})\r\n            */\r\n            selectItem: function (item) {\r\n                var self = this;\r\n                var control = $('.biz-wp-combo-input', self);                \r\n                control.val(item.text);\r\n                control.data('value', item.value);\r\n            },\r\n        };\r\n\r\n\r\n\r\n        if (typeof options != 'object' && options) {\r\n\r\n            $.extend(plg.settings, params, plg.config);\r\n            return plg.methods[options].apply(this, [plg.settings]);\r\n\r\n        } else if (typeof options === 'object' || !options || options === undefined) {\r\n\r\n            $.extend(plg.settings, options, plg.config);\r\n            return this.each(function () {\r\n                plg.methods.init.apply(this, [plg.settings]);\r\n            });\r\n\r\n        } else {\r\n\r\n            $.error('Method ' + options + ' does not exist on jQuery.combo');\r\n\r\n        }\r\n\r\n    };\r\n\r\n    $.bizagi.ui.controls.uicombo.plugin = $.fn.uicombo;\r\n\r\n} (jQuery));","/**\r\nPlugin to create WorkPortal RadioButtons...\r\n\r\n    var options = {\r\n        data: {},\r\n        css:'customCSS'\r\n    };\r\n\r\n    $('selector').uicheckbox(options);\r\n\r\n    $(document).on(\"checkboxChange\", function(obj){\r\n        console.log(obj.message, obj.ui, obj.ui.val());\r\n    });\r\n\r\n@class $.fn.uicheckbox \r\n@constructor uicheckbox\r\n**/\r\n(function ( $ ) {\r\n    \"use strict\";\r\n\r\n    $.fn.uicheckbox = function(options, params) {\r\n\r\n        var plg = this;\r\n\r\n        plg.config = {\r\n            namespace:$.bizagi.ui.controls.uicheckbox.namespace,\r\n            cssComponent:$.bizagi.ui.controls.uicheckbox.css\r\n        };\r\n\r\n        plg.settings = {\r\n            /**\r\n            DataSource to create a checkbox Control\r\n\r\n                var data = [\r\n                            {   \r\n                                value:value,\r\n                                text:'checkbox'\r\n                            }\r\n                        ];\r\n\r\n            @property data \r\n            @type Object\r\n            @default \"{}\"\r\n            **/\r\n            data:{},\r\n            nameTemplate: $.bizagi.ui.controls.uicheckbox.tmpl,\r\n            /**\r\n            Function to modify values\r\n\r\n            @property itemValue \r\n            @type Function\r\n            @param {Object} Object with value\r\n\r\n                {value:xxx}\r\n\r\n            @default \"null\"\r\n            **/\r\n            itemValue: null,\r\n            /**\r\n            Function to modify output text\r\n\r\n            @property itemText \r\n            @type Function\r\n            @param {Object} Object with text\r\n\r\n                {text:xxx}\r\n            \r\n            @default \"null\"\r\n            **/\r\n            itemText: null,\r\n            /**\r\n            Function to modify output text\r\n\r\n            @property css \r\n            @type String\r\n            @default \"\"\r\n            **/\r\n            css:'',\r\n            itemChecked: 0,\r\n            getTemplate: function(name){\r\n                return bizagi.getTemplate(name);\r\n            },\r\n            /**\r\n            Function exceute when is ready\r\n\r\n            @property onComplete \r\n            @type Function\r\n            @default \"function(){}\"\r\n            **/\r\n            onComplete: function(){},\r\n            /**\r\n            Function execute when controls is change\r\n\r\n            @property onChange \r\n            @type Function\r\n            @default \"function(){}\"\r\n            **/\r\n            onChange: function(){}\r\n        };\r\n\r\n        plg.methods = {\r\n            init:function(op){\r\n\r\n                var self = $(this);\r\n                var template = op.getTemplate(op.nameTemplate);\r\n\r\n                self.attr('role', op.namespace);\r\n                self.addClass(op.cssComponent);\r\n                self.addClass(op.css);\r\n\r\n                $.when($.get(template)).done(function(a){\r\n\r\n                    var nData = op.data;\r\n\r\n                    op.data.checkboxGroup = (op.checkboxGroup) ? op.checkboxGroup : plg.methods.generateNamecheckboxGroup();\r\n\r\n\r\n                    for(var i=0; i<nData.checkbox.length; i++){\r\n                        nData.checkbox[i].isChecked = false;\r\n                    }\r\n\r\n                    nData.checkbox[op.itemChecked].isChecked = true;\r\n\r\n                   var tmp = $.tmpl(a, nData, {\r\n                        itemValue: (op.itemValue) ? op.itemValue : plg.methods.itemValue,\r\n                        itemText: (op.itemText) ? op.itemText : plg.methods.itemText\r\n                    });\r\n\r\n                    self.append(tmp);\r\n\r\n\r\n                    tmp.find('.biz-wp-option-checkbox').each(function(index, value){\r\n                         if(op.data.checkbox[index].data){\r\n                            $.extend($(value).data(), op.data.checkbox[index].data);\r\n                         }\r\n                    });\r\n\r\n                    plg.settings.onComplete.apply(self, []);\r\n\r\n                    /**\r\n                    Fired when a checkbox change\r\n\r\n                    @event checkboxChange \r\n                    @param {String} type checkboxChange\r\n                    @param {String} message \r\n                    @param {Date} time \r\n                    @param {Object} Jquery Object HTML \r\n                    **/\r\n                    $('input[type=\"checkbox\"]',tmp).on('change', function(){\r\n                        var control = $(this);\r\n                        plg.settings.onChange(control);\r\n                        \r\n                        $.event.trigger({\r\n                            type: \"checkboxChange\",\r\n                            message: \"checkbox change\",\r\n                            time: new Date(),\r\n                            ui:control\r\n                        });\r\n                    });\r\n\r\n                    /**\r\n                    Fired when a checkbox is created\r\n\r\n                    @event checkboxCompleted \r\n                    @param {String} type checkboxCompleted\r\n                    @param {String} message\r\n                    @param {Date} time\r\n                    @param {Object} Jquery Object HTML \r\n                    **/\r\n                    $.event.trigger({\r\n                        type: \"checkboxCompleted\",\r\n                        message: \"checkbox is Completed\",\r\n                        time: new Date(),\r\n                        ui:self\r\n                    });\r\n\r\n                }).fail(function(){\r\n                    $.error('No se pudo cargar el template para generar las tablas');\r\n                });\r\n\r\n            },\r\n            generateNamecheckboxGroup:function(){\r\n                var self = this;\r\n\r\n                var d = new Date().getTime();\r\n                var uuid = 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {\r\n                    var r = (d + Math.random()*16)%16 | 0;\r\n                    d = Math.floor(d/16);\r\n                    return (c=='x' ? r : (r&0x7|0x8)).toString(16);\r\n                });\r\n                return uuid;\r\n            },\r\n\r\n\r\n            itemValue : function(obj){\r\n                var val = '';\r\n                if(obj.itemValue){\r\n                    val = obj.itemValue(obj);\r\n                }else{\r\n                    if(typeof obj.value === 'string' || typeof obj.value === 'number'){\r\n                        val = obj.value;\r\n                    }\r\n                }\r\n                return val;\r\n            },\r\n            itemText : function(obj){\r\n                var val = '';\r\n                if(obj.itemValue){\r\n                    val = obj.itemText(obj);\r\n                }else{\r\n                    if(typeof obj.text === 'string'){\r\n                        val = obj.text;\r\n                    }\r\n                }\r\n                return val;\r\n            },\r\n            /**\r\n            * Destroy Checkboxes\r\n            *\r\n            *   $('selector').uicheckbox('destroy');\r\n            *\r\n            * @method destroy\r\n            * @return {Object} Jquery Empty Object\r\n            */\r\n            destroy:function(op){\r\n                var self = $(this);\r\n                if(self.attr('role') === op.namespace){\r\n                    self.empty();\r\n                }else{\r\n                    $.error('No es posible eliminar un control con un namespace diferente: [role: ' + op.namespace+']');\r\n                }\r\n            }\r\n        };\r\n\r\n\r\n        \r\n        if(typeof options != 'object' && options) {\r\n\r\n                $.extend(plg.settings, params, plg.config);\r\n                return plg.methods[options].apply(this, [plg.settings]);\r\n\r\n        } else if( typeof options === 'object' || !options || options === undefined) {\r\n\r\n                $.extend(plg.settings, options, plg.config);\r\n                return this.each(function() {\r\n                    plg.methods.init.apply(this, [plg.settings]);\r\n                });\r\n\r\n        } else {\r\n\r\n                $.error('Method ' + options + ' does not exist on jQuery.checkbox');\r\n\r\n        }\r\n\r\n    };\r\n\r\n    $.bizagi.ui.controls.uicheckbox.plugin = $.fn.uicheckbox;\r\n\r\n}( jQuery ));","/**\r\nPlugin to create WorkPortal RadioButtons...\r\n\r\n    var options = {\r\n        data: {},\r\n        css:'customCSS'\r\n    };\r\n\r\n    $('selector').uiradio(options);\r\n\r\n    $(document).on(\"radioChange\", function(obj){\r\n        console.log(obj.message, obj.ui, obj.ui.val());\r\n    });\r\n\r\n@class $.fn.uiradio \r\n@constructor uiradio\r\n**/\r\n(function ( $ ) {\r\n    \"use strict\";\r\n\r\n    \r\n\r\n    $.fn.uiradio = function(options, params) {\r\n\r\n        var plg = this;\r\n\r\n        plg.config = {\r\n            namespace:$.bizagi.ui.controls.uiradio.namespace,\r\n            cssComponent:$.bizagi.ui.controls.uiradio.css\r\n        };\r\n\r\n        plg.settings = {\r\n            /**\r\n            DataSource to create a uiradio Control\r\n\r\n                var data = [\r\n                            {   \r\n                                value:value,\r\n                                text:'radio'\r\n                            }\r\n                        ];\r\n\r\n            @property data \r\n            @type Object\r\n            @default \"{}\"\r\n            **/\r\n            data:{},\r\n            nameTemplate: $.bizagi.ui.controls.uiradio.tmpl,\r\n            /**\r\n            Function to modify values\r\n\r\n            @property itemValue \r\n            @type Function\r\n            @param {Object} Object with value\r\n\r\n                {value:xxx}\r\n\r\n            @default \"null\"\r\n            **/\r\n            itemValue: null,\r\n            /**\r\n            Function to modify output text\r\n\r\n            @property itemText \r\n            @type Function\r\n            @param {Object} Object with text\r\n\r\n                {text:xxx}\r\n            \r\n            @default \"null\"\r\n            **/\r\n            itemText: null,\r\n            /**\r\n            Function to modify output text\r\n\r\n            @property css \r\n            @type String\r\n            @default \"\"\r\n            **/\r\n            css:'',\r\n            getTemplate: function(name){\r\n                return bizagi.getTemplate(name);\r\n            },\r\n            /**\r\n            Function exceute when is ready\r\n\r\n            @property onComplete \r\n            @type Function\r\n            @default \"function(){}\"\r\n            **/\r\n            onComplete: function(){},\r\n            /**\r\n            Function execute when controls is change\r\n\r\n            @property onChange \r\n            @type Function\r\n            @default \"function(){}\"\r\n            **/\r\n            onChange: function(){}\r\n        };\r\n\r\n        plg.methods = {\r\n            init:function(op){\r\n\r\n                var self = $(this);\r\n                var template = op.getTemplate(op.nameTemplate);\r\n\r\n                self.attr('role', op.namespace);\r\n                self.addClass(op.cssComponent);\r\n                self.addClass(op.css);\r\n\r\n                $.when($.get(template)).done(function(a){\r\n\r\n                    var nData = op.data;\r\n\r\n                    op.data.radioGroup = (op.radioGroup) ? op.radioGroup : plg.methods.generateNameRadioGroup();\r\n\r\n                    var tmp = $.tmpl(a, nData, {\r\n                        itemValue: (op.itemValue) ? op.itemValue : plg.methods.itemValue,\r\n                        itemText: (op.itemText) ? op.itemText : plg.methods.itemText\r\n                    });\r\n\r\n                    self.append(tmp);\r\n\r\n\r\n                    tmp.find('.biz-wp-option-radio').each(function(index, value){\r\n                         if(op.data.radio[index].data){\r\n                            $.extend($(value).data(), op.data.radio[index].data);\r\n                         }\r\n                    });\r\n\r\n                    plg.settings.onComplete.apply(self, []);\r\n\r\n                    $('input[type=\"radio\"]',tmp).on('change', function(){\r\n                        var control = $(this);\r\n                        plg.settings.onChange(control);\r\n                        \r\n\r\n                        /**\r\n                        Fired when a radio change\r\n\r\n                        @event radioChange \r\n                        @param {String} type radioChange ...\r\n                        @param {String} message\r\n                        @param {Date} time\r\n                        @param {Object} Jquery Object HTML\r\n                        **/\r\n                        $.event.trigger({\r\n                            type: \"radioChange\",\r\n                            message: \"radio change\",\r\n                            time: new Date(),\r\n                            ui:control\r\n                        });\r\n                    });\r\n\r\n                    /**\r\n                    Fired when a radio is created\r\n\r\n                    @event radioCompleted \r\n                    @param {String} type radioCompleted\r\n                    @param {String} message\r\n                    @param {Date} time\r\n                    @param {Object} Jquery Object HTML \r\n                    **/\r\n                    $.event.trigger({\r\n                        type: \"radioCompleted\",\r\n                        message: \"radio is Completed\",\r\n                        time: new Date(),\r\n                        ui:self\r\n                    });\r\n\r\n                }).fail(function(){\r\n                    $.error('No se pudo cargar el template para generar las tablas');\r\n                });\r\n\r\n            },\r\n            generateNameRadioGroup:function(){\r\n                var self = this;\r\n\r\n                var d = new Date().getTime();\r\n                var uuid = 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {\r\n                    var r = (d + Math.random()*16)%16 | 0;\r\n                    d = Math.floor(d/16);\r\n                    return (c=='x' ? r : (r&0x7|0x8)).toString(16);\r\n                });\r\n                return uuid;\r\n            },\r\n\r\n\r\n            itemValue : function(obj){\r\n                var val = '';\r\n                if(obj.itemValue){\r\n                    val = obj.itemValue(obj);\r\n                }else{\r\n                    if(typeof obj.value === 'string' || typeof obj.value === 'number'){\r\n                        val = obj.value;\r\n                    }\r\n                }\r\n                return val;\r\n            },\r\n            itemText : function(obj){\r\n                var val = '';\r\n                if(obj.itemValue){\r\n                    val = obj.itemText(obj);\r\n                }else{\r\n                    if(typeof obj.text === 'string'){\r\n                        val = obj.text;\r\n                    }\r\n                }\r\n                return val;\r\n            },\r\n            /**\r\n            * Destroy Radio Buttons\r\n            *\r\n            *   $('selector').uiradio('destroy');\r\n            *\r\n            * @method destroy\r\n            * @return {Object} Jquery Empty Object\r\n            */\r\n            destroy:function(op){\r\n                var self = $(this);\r\n                if(self.attr('role') === op.namespace){\r\n                    self.empty();\r\n                }else{\r\n                    $.error('No es posible eliminar un control con un namespace diferente: [role: ' + op.namespace+']');\r\n                }\r\n            }\r\n        };\r\n\r\n\r\n        \r\n        if(typeof options != 'object' && options) {\r\n\r\n                $.extend(plg.settings, params, plg.config);\r\n                return plg.methods[options].apply(this, [plg.settings]);\r\n\r\n        } else if( typeof options === 'object' || !options || options === undefined) {\r\n\r\n                $.extend(plg.settings, options, plg.config);\r\n                return this.each(function() {\r\n                    plg.methods.init.apply(this, [plg.settings]);\r\n                });\r\n\r\n        } else {\r\n\r\n                $.error('Method ' + options + ' does not exist on jQuery.radio');\r\n\r\n        }\r\n\r\n    };\r\n\r\n    $.bizagi.ui.controls.uiradio.plugin = $.fn.uiradio;\r\n\r\n}( jQuery ));","\r\n/**\r\nPlugin to create WorkPortal treeviews...\r\n\r\nvar options = {\r\ndata: {},\r\n};\r\n\r\n$('selector').uitreeview(options);\r\n\r\n@class $.fn.uitreeview \r\n@constructor uitreeview\r\n**/\r\n\r\n/*\r\n* jQuery UI MultiSelect @VERSION\r\n* Author: David Romero\r\n* Copyright (c) 2013 (http://www.bizagi.com)\r\n*\r\n* Depends:\r\n*  ui.core.js\r\n*/\r\n(function ($) {\r\n\r\n    $.widget('ui.treeview', {\r\n        options: {\r\n            list: [],\r\n            defaults: [],\r\n            _dataItems: [],\r\n            _config: {\r\n                _template: $.bizagi.ui.controls.uitreeview.tmpl,\r\n                _cssClass: $.bizagi.ui.controls.uitreeview.css,\r\n                _namespace: $.bizagi.ui.controls.uitreeview.namespace\r\n            },\r\n            SEARCH_MAX_LENGTH: 1\r\n        },\r\n        _create: function () {\r\n\r\n            var self = this;\r\n            var element = self.element;\r\n            var css = self.options._config._cssClass;\r\n\r\n            self.options._dataItems = [];\r\n\r\n            if (self.options.defaults.length) self._setDefaults();\r\n\r\n            element.addClass(css);\r\n\r\n            self.loader = new bizagi.ui.controls.tmplloader();\r\n\r\n            $.when(self.loader.loadTemplates(self._initializeTemplates())).done(function () {\r\n\r\n                element.append(self._renderContent());\r\n                self._eventHandlers();\r\n\r\n            });\r\n        },\r\n        _eventHandlers: function () {\r\n\r\n            var self = this, $items = $(\".biz-ui-controls-tree-item\", self.element);\r\n\r\n            $items.on('click', \".biz-ui-controls-treeview-row:first-child\", function (event) {\r\n\r\n                var $element = $(this);\r\n                var $target = $(event.target);\r\n\r\n                if ($target.is('i.biz-ui-controls-treeview-subitems')) {\r\n\r\n                    self._slideSubItems($element);\r\n\r\n                } else {\r\n\r\n                    if (!$target.is('input[type=checkbox]')) {\r\n\r\n                        var $checkbox = $target.siblings(\"input[type=checkbox]\");\r\n                        ($checkbox.prop('checked')) ? $checkbox.prop('checked', false) : $checkbox.prop('checked', true);\r\n                    }\r\n\r\n                    $element.toggleClass(\"biz-ui-controls-uitreeview-items-active\");\r\n                    self._setValue($element);\r\n                }\r\n\r\n                event.stopPropagation();\r\n            });\r\n        },\r\n        _slideSubItems: function ($element) {\r\n\r\n            var $subitems = $element.siblings(\"ul\");\r\n            $subitems.slideToggle(300);\r\n        },\r\n        _setValue: function ($element) {\r\n\r\n            var self = this;\r\n            var dataItems = self.options._dataItems;\r\n            var value = $element.data(\"value\");\r\n            var text = $element.data(\"text\");\r\n\r\n            if ($element.hasClass(\"biz-ui-controls-uitreeview-items-active\")) {\r\n\r\n                dataItems.push({ text: text, value: value });\r\n            } else {\r\n\r\n                var position = $.map(dataItems, function (obj, i) {\r\n                    if (obj.value == value) { return i; }\r\n                });\r\n\r\n                dataItems.splice(position[0], 1);\r\n            };\r\n\r\n            self._trigger('checkItem');\r\n        },\r\n        getDataItems: function () {\r\n\r\n            var self = this;\r\n            return self.options._dataItems;\r\n        },\r\n        setList: function (list) {\r\n\r\n            var self = this;\r\n            self.options.list = list;\r\n            self.options._dataItems = [];\r\n\r\n            self._refresh();\r\n        },\r\n        getList: function () {\r\n\r\n            var self = this;\r\n            return self.options.list;\r\n        },\r\n        _refresh: function () {\r\n\r\n            var self = this;\r\n\r\n            self.element.empty().append(self._renderContent());\r\n            self._eventHandlers();\r\n        },\r\n        _renderContent: function () {\r\n\r\n            var self = this;\r\n            var list = self.options.list;\r\n            var itemsTemplate = self.loader.getTemplate(\"items\");\r\n\r\n            return $.tmpl(itemsTemplate, { list: list }, {\r\n                itemValue: $.proxy(self._itemValue, self),\r\n                itemText: $.proxy(self._itemText, self),\r\n                renderSubItems: $.proxy(self._renderSubItems, self),\r\n                setDefaults: $.proxy(self._setDefaults, self)\r\n            });\r\n\r\n        },\r\n        _initializeTemplates: function () {\r\n\r\n            var self = this;\r\n            var tmpl = self.options._config._template;\r\n\r\n            return {\r\n                \"items\": (bizagi.getTemplate(tmpl) + \"#bizagi-ui-controls-uitreeview-items\"),\r\n                \"subitems\": (bizagi.getTemplate(tmpl) + \"#bizagi-ui-controls-uitreeview-subitems\")\r\n            };\r\n        },\r\n        _renderSubItems: function (obj) {\r\n\r\n            var self = this;\r\n\r\n            var subItemsTemplate = self.loader.getTemplate(\"subitems\");\r\n\r\n            var tmp = $.tmpl(subItemsTemplate, obj, {\r\n                itemValue: $.proxy(self._itemValue, self),\r\n                itemText: $.proxy(self._itemText, self),\r\n                renderSubItems: $.proxy(self._renderSubItems, self),\r\n                setDefaults: $.proxy(self._setDefaults, self)\r\n            });\r\n\r\n            return tmp.html();\r\n        },\r\n        _destroy: function () {\r\n\r\n            var self = this;\r\n            self.options._dataItems = [];\r\n        },\r\n        _itemValue: function (obj) {\r\n\r\n            var self = this;\r\n            var val = '';\r\n            if (self.options.itemValue) {\r\n                val = self.options.itemValue(obj);\r\n            } else {\r\n                if (typeof obj.value === 'string' || typeof obj.value === 'number') {\r\n                    val = obj.value;\r\n                }\r\n            }\r\n            return val;\r\n        },\r\n        _itemText: function (obj) {\r\n\r\n            var self = this;\r\n            var val = '';\r\n            if (self.options.itemText) {\r\n                val = self.options.itemText(obj);\r\n            } else {\r\n                if (typeof obj.text === 'string') {\r\n                    val = obj.text;\r\n                }\r\n            }\r\n            return val;\r\n        },\r\n        _setDefaults: function (obj) {\r\n\r\n            var self = this;\r\n            var defaults = self.options.defaults;\r\n            var list = self.options.list;\r\n\r\n            var text = self._itemText(obj);\r\n            var value = self._itemValue(obj);\r\n\r\n            self.options._dataItems.push({ text: text, value: value });\r\n\r\n            return \"\";\r\n        }\r\n\r\n    });\r\n\r\n})(jQuery);","/*\r\n* jQuery UI MultiSelect @VERSION\r\n* Author: David Romero\r\n* Copyright (c) 2013 (http://www.bizagi.com)\r\n*\r\n* Depends:\r\n*  ui.core.js\r\n*/\r\n(function ($) {\r\n\r\n    $.widget('ui.bizagi_multiSelect', {\r\n        options: {\r\n            list: [],\r\n            label: \"MyLabel\",\r\n            _dataItems: [],\r\n            _config: {\r\n                _template: $.bizagi.ui.controls.uimultiselect.tmpl,\r\n                _cssClass: $.bizagi.ui.controls.uimultiselect.css,\r\n                _namespace: $.bizagi.ui.controls.uimultiselect.namespace\r\n            },\r\n            SEARCH_MIN_LENGTH: 3\r\n        },\r\n        _create: function () {\r\n\r\n            var self = this;\r\n            var $element = self.element;\r\n\r\n            self.options._dataItems = [];\r\n\r\n            $.when(self._renderContent()).done(function (content) {\r\n\r\n                $element.append(content);\r\n                var $input = $element.find('input[type=text]');\r\n\r\n                $input.autocomplete(\r\n                    {\r\n                        source: self._getDataSource(),\r\n                        minLength: self.options.SEARCH_MIN_LENGTH,\r\n                        messages:\r\n                            {\r\n                                noResults: null\r\n                            },\r\n                        select: function (event, ui) {\r\n                            var value = $.grep(self.options.list, function (obj) {\r\n                                return self._itemValue(obj) == ui.item.id;\r\n                            });\r\n\r\n                            self._prependElements(value[0]);\r\n                        },\r\n                        close: function () {\r\n                            $input.val(\"\");\r\n                        }\r\n                    });\r\n\r\n                self._eventHandlers();\r\n            });\r\n\r\n        },\r\n        getDataItems: function () {\r\n\r\n            var self = this;\r\n            return self.options._dataItems;\r\n\r\n        },\r\n        setList: function (list) {\r\n\r\n            var self = this;\r\n            self.options.list = list;\r\n\r\n            self._refresh();\r\n        },\r\n        getList: function () {\r\n\r\n            var self = this;\r\n            return self.options.list;\r\n        },\r\n        _initializeTemplates: function () {\r\n\r\n            var self = this;\r\n            var tmpl = self.options._config._template;\r\n\r\n            return {\r\n                \"multiselect\": (bizagi.getTemplate(tmpl))\r\n            };\r\n        },\r\n        _renderContent: function () {\r\n\r\n            var self = this;\r\n            var $element = self.element;\r\n            var tmpl = self.options._config._template;\r\n            var css = self.options._config._cssClass;\r\n            var label = self.options.label;\r\n\r\n            $element.addClass(css);\r\n            self.loader = new bizagi.ui.controls.tmplloader();\r\n\r\n            return $.when(self.loader.loadTemplates(self._initializeTemplates())).pipe(function () {\r\n                var tmpl = self.loader.getTemplate(\"multiselect\");\r\n                return $.tmpl(tmpl, { label: label });\r\n            });\r\n        },\r\n        _refresh: function () {\r\n\r\n            var self = this;\r\n            var $input = self.element.find('input[type=text]');\r\n\r\n            $input.parent('li').siblings('li').remove();\r\n            self.options._dataItems = [];\r\n            $input.autocomplete(\"option\", \"source\", self._getDataSource());\r\n        },\r\n        _getDataSource: function () {\r\n\r\n            var self = this;\r\n            var data = [];\r\n\r\n            $.each(self.options.list, function (key, val) {\r\n                data.push({ label: self._itemText(val), value: self._itemText(val), id: self._itemValue(val) });\r\n            });\r\n\r\n            return data;\r\n        },\r\n        _prependElements: function (value) {\r\n\r\n            var self = this;\r\n            var $element = self.element;\r\n            var dataItems = self.options._dataItems;\r\n            var $input = $element.find('input[type=text]');\r\n\r\n            var n = $.grep(dataItems, function (obj) {\r\n                return obj.value == self._itemValue(value);\r\n            });\r\n\r\n            if (!n.length) {\r\n                dataItems.push({ text: self._itemText(value), value: self._itemValue(value) });\r\n                $input.parent().before('<li class=\"selected-item\" data-value=\"' + self._itemValue(value) + '\"><label>' + self._itemText(value) + '</label><a class=\"closebutton\"></a></li>');\r\n                self._trigger('addItem');\r\n            }\r\n\r\n        },\r\n        _itemValue: function (obj) {\r\n\r\n            var self = this;\r\n            var val = '';\r\n            if (self.options.itemValue) {\r\n                val = self.options.itemValue(obj);\r\n            } else {\r\n                if (typeof obj.value === 'string' || typeof obj.value === 'number') {\r\n                    val = obj.value;\r\n                }\r\n            }\r\n            return val;\r\n        },\r\n        _itemText: function (obj) {\r\n\r\n            var self = this;\r\n            var val = '';\r\n            if (self.options.itemText) {\r\n                val = self.options.itemText(obj);\r\n            } else {\r\n                if (typeof obj.text === 'string') {\r\n                    val = obj.text;\r\n                }\r\n            }\r\n            return val;\r\n        },\r\n        _destroy: function () {\r\n\r\n            var self = this;\r\n            self.options._dataItems = [];\r\n        },\r\n        _eventHandlers: function () {\r\n\r\n            var self = this;\r\n            var $element = self.element;\r\n            var $input = $element.find('input[type=text]');\r\n\r\n            $(\"ul\", $element).on(\"click\", \"a.closebutton\", function (event) {\r\n\r\n                event.preventDefault();\r\n\r\n                var value = $(event.target).closest(\"li\").data('value');\r\n\r\n                var position = $.map(self.options._dataItems, function (obj, i) {\r\n                    if (obj.value == value) { return i; }\r\n                });\r\n\r\n                self.options._dataItems.splice(position[0], 1);\r\n                $(this).parent().remove();\r\n\r\n                self._trigger('removeItem');\r\n            });\r\n\r\n            $element.on(\"click\", function (event) {\r\n                $input.focus();\r\n            });\r\n\r\n            $input.on(\"keydown\", function (event) {\r\n\r\n                if (event.keyCode == 13) {\r\n\r\n                    event.preventDefault();\r\n                }\r\n\r\n            });\r\n\r\n        }\r\n    });\r\n\r\n})(jQuery);","/**\r\n *   Name: BizAgi Workportal Async controller\r\n *   Author: Edward Morales\r\n *   Comments:\r\n *   -   This script will define a base class to Async Controller\r\n */\r\n\r\n\r\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.async\", {\r\n    ASYNC_CHECK_TIMER: 3000\r\n}, {\r\n\r\n    init: function (workportalFacade, dataService, params) {\r\n        var self = this;\r\n\r\n        // Call base\r\n        self._super(workportalFacade, dataService, params);\r\n    },\r\n\r\n    /*\r\n     *   Returns the widget name\r\n     */\r\n    getWidgetName: function() {\r\n        return bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ASYNC;\r\n    },\r\n    /*\r\n     *   Renders the content for the current controller\r\n     *   Returns a deferred because it has to load the current user\r\n     */\r\n    renderContent: function() {\r\n        var self = this;\r\n        var defer = new $.Deferred();\r\n\r\n        // Check the status for the async execution\r\n        self.checkAsycnExecutionState(defer);\r\n\r\n        return defer.promise();\r\n    },\r\n    /**\r\n     *  Check execution state every time is called\r\n     */\r\n    checkAsycnExecutionState: function(defer) {\r\n        var self = this;\r\n\r\n        $.when(self.dataService.getAsynchExecutionState({\r\n            idCase: self.params.idCase\r\n        })).done(function(response) {\r\n            var template = self.getTemplate(\"async\");\r\n            \r\n            // verify errors in response\r\n            if(response.state == \"Error\" && response.errorMessage != undefined){\r\n                // Change default error\r\n                response.errorMessage = bizagi.localization.getResource(\"render-async-error\");\r\n            }\r\n            \r\n            // Render base template\r\n            self.content = $.tmpl(template, response);\r\n\r\n            // Check for finish signal\r\n            if (response.state == \"Processing\") {\r\n                // Check for non-error message\r\n                if (response.errorMessage.length == 0) {\r\n                    setTimeout(function() {\r\n                        // Refresh widget after a timer\r\n                        self.publish(\"changeWidget\", self.params);\r\n\r\n                    }, self.Class.ASYNC_CHECK_TIMER);\r\n                }\r\n\r\n            } else if (response.state == \"Finished\") {\r\n\r\n                // Execute routing\r\n                self.publish(\"executeAction\", {\r\n                    action: bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING,\r\n                    idCase: self.params.idCase\r\n                });\r\n            }\r\n\r\n            // Resolve main deferred\r\n            defer.resolve(self.content);\r\n        });\r\n    }\r\n\r\n});\r\n\r\n","/**\r\n * Admin module to Asynchronous ECM Upload Jobs\r\n * \r\n * @author David Andrs Nio\r\n */\r\n\r\n\r\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.asyncecm.upload\", {}, {\r\n    /*\r\n     *   Returns the widget name\r\n     */\r\n    getWidgetName: function() {\r\n        return bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ASYNCECM_UPLOAD;\r\n    },\r\n    /*\r\n     *   Renders the content for the current controller\r\n     */\r\n    renderContent: function() {\r\n        var self = this;\r\n        var template = self.getTemplate(\"async.ecm.upload\");\r\n        var content = self.content = $.tmpl(template);\r\n\r\n        return content;\r\n    }\r\n});","/**\r\n * Admin module to Asynchronous ECM Upload Jobs\r\n * \r\n * @author David Andrs Nio\r\n */\r\n\r\n\r\nbizagi.workportal.widgets.asyncecm.upload.extend(\"bizagi.workportal.widgets.asyncecm.upload\", {}, {\r\n\r\n    init: function (workportalFacade, dataService, params) {\r\n        var self = this;\r\n\r\n        // Call base\r\n        self._super(workportalFacade, dataService, params);\r\n\r\n        //Load templates\r\n        self.loadTemplates({\r\n            \"async.ecm.upload\": bizagi.getTemplate(\"bizagi.workportal.desktop.widgets.asyncecm.upload\").concat(\"#ui-bizagi-workportal-widget-async-ecm-upload\"),\r\n            \"async.ecm.pending.jobs\": bizagi.getTemplate(\"bizagi.workportal.desktop.widgets.asyncecm.upload\").concat(\"#ui-bizagi-workportal-widget-async-ecm-upload-table-pending-jobs\"),\r\n            useNewEngine: false\r\n        });\r\n    },\r\n\r\n    postRender: function () {\r\n        var self = this;\r\n\r\n        self.enableUI = true;\r\n\r\n        self.renderAsyncECMUpload();\r\n\r\n        self.asyncECMUploadTypes = {\r\n            NOT_RUNNED : 1,\r\n            RUNNING : 2,\r\n            RUN_FINNISHED_OK : 3,\r\n            RUN_FINNISHED_WITH_ERROR : 4\r\n        };\r\n    },\r\n\r\n    updateEcmAllScheduledJobs: function () {\r\n        var self = this,\r\n            content = self.getContent();\r\n\r\n        \r\n        $(\"#async-emc-list-content\", content).empty();\r\n        $(\"#async-emc-list-content\", content).loadingMessage();\r\n\r\n\r\n        $.when(self.dataService.getEcmAllScheduledJobs()).done(function (result) {\r\n            self.renderAllScheduledJobs(result);\r\n        }).fail(function (error) {\r\n            //console.log(\"getEcmPendingScheduledJobs error\", error);\r\n        });\r\n        /**/\r\n    },\r\n\r\n    renderAsyncECMUpload:function () {\r\n        console.log(\"renderAsyncECMUpload ready\");\r\n\r\n        var self = this,\r\n            content = self.getContent();\r\n\r\n        self.updateEcmAllScheduledJobs();\r\n    },\r\n\r\n    renderAllScheduledJobs:function (result) {\r\n\r\n        var self = this,\r\n                content = self.getContent();\r\n\r\n        //Template Vars\r\n        var ecmAsyncTemplate = self.getTemplate(\"async.ecm.pending.jobs\");\r\n\r\n        //Clean the content\r\n        $(\"#async-emc-list-content\", content).empty();\r\n\r\n        //Enable UI\r\n        self.enableUI = true;\r\n\r\n        // Render Form\r\n        $.tmpl(ecmAsyncTemplate, {\r\n            jobs: result\r\n            }).appendTo($(\"#async-emc-list-content\", content));\r\n\r\n        // Add class to each even row\r\n        $('#async-emc-list-content tbody tr', content).each(function () {\r\n            if ($(this).index() % 2 < 1)\r\n                $(this).addClass('biz-ui-even');\r\n        });\r\n\r\n        //Add the hover events to the failure message content\r\n        $(\"#table-content .async-emc-item p\", content).hover(self.failureMessageHoverIn);\r\n\r\n        $(\".async-ecm-refresh\", content).click(function(){\r\n            if(self.enableUI) {\r\n                self.enableUI = false;\r\n                self.updateEcmAllScheduledJobs();\r\n            }\r\n                \r\n        });\r\n\r\n        \r\n\r\n        //Bind the click event for those elements wich his jobs status is \"Not Runned\" or \"Run finished with error\"\r\n        $(\"#table-content .async-emc-item .async-ecm-retry\",content).click(\r\n            function(event){\r\n                event.preventDefault();\r\n                self.retryECMPendingScheduledJob($(this).parent().attr(\"data-idjob\"));\r\n            }\r\n        );\r\n    },\r\n\r\n    retryECMPendingScheduledJob: function(idJob) {\r\n        var self = this,\r\n            content = self.getContent();\r\n\r\n        //Clear the content and sets a loading message\r\n        $(\"#async-emc-list-content\", content).empty();\r\n        $(\"#async-emc-list-content\", content).loadingMessage({\"customMessage\":\"Please wait\"});\r\n        \r\n        /**/\r\n        $.when(self.dataService.retryECMPendingScheduledJob(idJob)).done(function () {\r\n            \r\n            //console.log(\"renderAllScheduledJobs\");\r\n            self.updateEcmAllScheduledJobs();\r\n\r\n        }).fail(function (error) {\r\n            console.log(\"retryECMPendingScheduledJob error\");\r\n        });\r\n        /**/\r\n    },\r\n\r\n    failureMessageHoverIn: function(evt) {\r\n        if($(evt.currentTarget).text().length > 0)\r\n        {\r\n            $(evt.currentTarget).attr(\"title\", $(evt.currentTarget).text());\r\n        }\r\n    }\r\n});","/**\r\n * Application / Categories and Process tree\r\n * \r\n * @author Christian Collazos\r\n */\r\n\r\n\r\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.processtree\", {}, {\r\n    \r\n    /*\r\n    *   Returns the widget name\r\n    */\r\n    getWidgetName: function () {\r\n        return bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_PROCESS_TREE;\r\n    },\r\n    \r\n    /*\r\n    *   Renders the content for the current controller\r\n    */\r\n    renderContent: function () {\r\n        var self = this;\r\n        var template = self.getTemplate(\"processTree.links\");\r\n        var content;\r\n\r\n        content = self.content = $.tmpl(template, {});\r\n\r\n        return content;\r\n    },\r\n\r\n    /*\r\n    * childs will implement this method\r\n    */\r\n    loadtemplates: function () { }\r\n});","/**\r\n * Application / Entities tree\r\n * \r\n * @author Christian Collazos\r\n */\r\n\r\n\r\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.entitiestree\", {}, {\r\n    \r\n    /*\r\n    *   Returns the widget name\r\n    */\r\n    getWidgetName: function () {\r\n        return bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ENTITIES_TREE;\r\n    },\r\n    \r\n    /*\r\n    *   Renders the content for the current controller\r\n    */\r\n    renderContent: function () {\r\n        var self = this;\r\n        var template = self.getTemplate(\"EntitiesTree.wrapper\");\r\n        var content;\r\n\r\n        content = self.content = $.tmpl(template, {});\r\n\r\n        return content;\r\n    },\r\n\r\n    /*\r\n    * childs will implement this method\r\n    */\r\n    loadtemplates: function () { }\r\n});","/**\r\n* get users table\r\n* \r\n* @author Christian Collazos\r\n*/\r\n\r\n\r\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.userstable\", {}, {\r\n\r\n    /*\r\n    *   Returns the widget name\r\n    */\r\n    getWidgetName: function () {\r\n        return bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_USERS_TABLE;\r\n    },\r\n\r\n    /*\r\n    *   Renders the content for the current controller\r\n    */\r\n    renderContent: function () {\r\n        var self = this;\r\n        var template = self.getTemplate(\"usersTable.wrapper\");\r\n        var content;\r\n\r\n        content = self.content = $.tmpl(template, {});\r\n\r\n        return content;\r\n    },\r\n\r\n    /*\r\n    * childs will implement this method\r\n    */\r\n    loadtemplates: function () { }\r\n});","/**\r\n * Admin / Tree widget\r\n * \r\n * @author Christian Collazos\r\n */\r\n\r\n\r\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.tree\", {}, {\r\n    /*\r\n    *   Returns the widget name\r\n    */\r\n    getWidgetName: function () {\r\n        return bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_TREE;\r\n    },\r\n    \r\n    /*\r\n    *   Renders the content for the current controller\r\n    */\r\n    renderContent: function () {\r\n\r\n    },\r\n    \r\n    /*\r\n    * this will be implemented on each device\r\n    */\r\n    loadtemplates: function () { }\r\n\r\n});","/**\r\n * Name: BizAgi Desktop Widget Process Tree\r\n * \r\n * @author Christian Collazos\r\n */\r\n\r\n\r\nbizagi.workportal.widgets.processtree.extend(\"bizagi.workportal.widgets.processtree\", {}, {\r\n    init: function (workportalFacade, dataService, params) {\r\n        var self = this;\r\n        self.showTitle = (params.showTitle != undefined) ? params.showTitle:true;\r\n        self.searchKeyResource=params.searchKeyResource || \"workportal-widget-processTree-search-in\";\r\n        self.searchKeyResource=bizagi.localization.getResource(self.searchKeyResource);\r\n        self.svgIconsMode=params.svgIconsMode || false;\r\n\r\n        self.processesTreeNew = params.newDesign;\r\n        // Call base\r\n        self._super(workportalFacade, dataService, params);\r\n\r\n        //Load templates\r\n        self.loadTemplates({\r\n            \"processTree.links\": bizagi.getTemplate(\"bizagi.workportal.desktop.widgets.processtree\").concat(\"#ui-bizagi-workportal-widget-processTree-links\"),\r\n            \"processTree.wrapper\": bizagi.getTemplate(\"bizagi.workportal.desktop.widgets.processtree\").concat(\"#ui-bizagi-workportal-widget-processTree-wrapper\"),\r\n            \"processTree\": bizagi.getTemplate(\"bizagi.workportal.desktop.widgets.processtree\").concat(\"#ui-bizagi-workportal-widget-processTree\"),\r\n            \"processTree.selected\": bizagi.getTemplate(\"bizagi.workportal.desktop.widgets.processtree\").concat(\"#ui-bizagi-workportal-widget-processTree-selected\"),\r\n            useNewEngine: false\r\n        });\r\n    },\r\n\r\n    renderContent: function () {\r\n        var self = this;\r\n        var template = self.getTemplate(\"processTree.links\");\r\n        var content;\r\n\r\n        content = self.content = $.tmpl(template, { showTitle: self.showTitle });\r\n\r\n        // Override canvas if it has been defined\r\n        if (self.params.canvas) {\r\n            content = self.content = self.params.canvas.html(content);\r\n        }\r\n\r\n        return content;\r\n    },\r\n\r\n    postRender: function () {\r\n        var self = this;\r\n\r\n        //load templates\r\n        self.loadtemplates();\r\n        //load initial data\r\n        self.setupData();\r\n    },\r\n\r\n    /*\r\n    * Load template vars\r\n    */\r\n    loadtemplates: function () {\r\n        var self = this;\r\n        self.applicationTreeWrapperTmpl = self.getTemplate(\"processTree.wrapper\");\r\n        self.applicationTreeTmpl = self.getTemplate(\"processTree\");\r\n        self.applicationTreeSelectedTmpl = self.getTemplate(\"processTree.selected\");\r\n    },\r\n\r\n    /*\r\n    * Setup form data\r\n    */\r\n    setupData: function () {\r\n        var self = this;\r\n        self.treeRouteSelected = [];\r\n        self.treeRouteText = \"\";\r\n\r\n        $.when(self.setupInitialData()).done(function () {\r\n            self.setupLinks();\r\n        });\r\n    },\r\n\r\n    /*\r\n    * Load form data\r\n    */\r\n    setupInitialData: function () {\r\n        var self = this,\r\n            content = self.getContent(),\r\n            def = $.Deferred();\r\n\r\n        self.treeRouteSelected = [];\r\n\r\n        //append tree to wrapper\r\n        $.when($.tmpl(self.applicationTreeWrapperTmpl, {}), $.tmpl(self.applicationTreeSelectedTmpl, { searchKeyResource: self.searchKeyResource })).done(function (treeWrapper, processSelected) {\r\n            content.append(treeWrapper);\r\n            content.append(processSelected);\r\n            def.resolve();\r\n        });\r\n        return def.promise();\r\n    },\r\n    /*\r\n    * Implement links behaviour\r\n    */\r\n    setupLinks: function () {\r\n        var self = this,\r\n            content = self.getContent();\r\n\r\n        var params = { action: \"Applications\" };\r\n\r\n        if(self.params.userId){\r\n            params.userId = self.params.userId\r\n        }\r\n        self.showSelectedProcessLabelWhenAllApplicationsSelected(); //At the beginning 'all applications' option is selected\r\n        $(\"#allAppsLink\", content).click(function () {\r\n            self.showSelectedProcessLabelWhenAllApplicationsSelected();\r\n            self.selectAllApplications(content);\r\n        });\r\n        $(\"#allAppsLinkSelected\", content).click(function () {\r\n            self.showSelectedProcessLabelWhenAllApplicationsSelected();\r\n            self.selectAllApplications(content);\r\n        });\r\n\r\n        $(\"#selectAppLink\", content).click(function () {\r\n             self.hideSelectedProcessLabelWhenAllApplicationsNotSelected();\r\n             self.selectOneAplication(content, params);  \r\n        });\r\n        $(\"#selectAppLinkSelected\", content).click(function () {\r\n             self.hideSelectedProcessLabelWhenAllApplicationsNotSelected();\r\n             self.selectOneAplication(content, params);  \r\n        });\r\n    },\r\n    showSelectedProcessLabelWhenAllApplicationsSelected: function(){\r\n        var self = this,\r\n        content = self.getContent();\r\n        if(self.processesTreeNew === true){\r\n            $(\"#allAppsLinkSelected\", content).data('allAppSelected', true); //To know when all applications radio button option has been selected\r\n            $(\"#searchInLabel\", content).parent().parent().parent().show(); //To show th label that indicates All applications are selected\r\n        } \r\n    },\r\n    hideSelectedProcessLabelWhenAllApplicationsNotSelected: function(){\r\n        var self = this,\r\n        content = self.getContent();\r\n        if(self.processesTreeNew === true){\r\n            $(\"#allAppsLinkSelected\", content).data('allAppSelected', false);\r\n            $(\"#searchInLabel\", content).parent().parent().parent().hide(); //To hide th label that indicates All applications are selected\r\n        }\r\n    },\r\n    changeRadioIcon: function(param, content){\r\n        if(param == \"all\"){\r\n            $(\"#allAppsLinkSelected\", content).addClass(\"biz-wp-tree-selected-option\");\r\n            $(\"#selectAppLinkSelected\", content).removeClass(\"biz-wp-tree-selected-option\");\r\n            $(\"#selectAppLinkSelected\", content).addClass(\"biz-wp-tree-not-selected-option\");\r\n        }\r\n        else if(param == \"one\"){\r\n            $(\"#selectAppLinkSelected\", content).addClass(\"biz-wp-tree-selected-option\");\r\n            $(\"#allAppsLinkSelected\", content).removeClass(\"biz-wp-tree-selected-option\");\r\n            $(\"#allAppsLinkSelected\", content).addClass(\"biz-wp-tree-not-selected-option\");\r\n        }\r\n    },\r\n    selectAllApplications: function(content){\r\n        var self = this;\r\n        self.changeRadioIcon(\"all\", content);\r\n\r\n        $(\"#applicationsTree\", content).removeClass(\"hidden\");\r\n        $(\"#applicationsTree\", content).css(\"display\", \"none\");\r\n        $(\"#searchInLabel\", content).html(bizagi.localization.getResource(\"workportal-widget-processTree-all-applications\"));\r\n        self.treeRouteSelected = [];\r\n    },\r\n    selectOneAplication: function(content, params){\r\n        var self = this;\r\n        if($(\"#applicationsTree.hidden\", content).length){\r\n            var idSelected = self.getTreeRouteSelected()[0]\r\n            self.changeRadioIcon(\"one\", content);\r\n            \r\n            $(\"#applicationsTree\", content).removeClass(\"hidden\");\r\n            var selector = $('a[data-id='+idSelected+']', content).closest(\"#applicationsTree > .case-search-app-ul > li.biz-wp-tree-node\").siblings();\r\n            \r\n            selector.find(\"svg.bz-icon-arrow-down:not([style='display: none;'])\").each(function() {\r\n                self.expandOrCollapseArrows({\r\n                    expand: false,\r\n                    itemSelected: $(this)[0]\r\n                });\r\n            });\r\n            selector.find(\".biz-wp-tree-list\").empty();\r\n            return false;\r\n        }\r\n        if(self.params.byUser == true && (!self.params.userId || self.params.userId == \"\"))\r\n        {\r\n            $(\"#applicationsTree\", content).html(\"\");\r\n            $(\"#applicationsTree\", content).css(\"display\", \"inline-block\");\r\n            $(\"#applicationsTree\", content).append(\"<strong>Debe Seleccionar un usuario</strong>\");\r\n        }else{\r\n            $.when(self.dataService.getApplicationCategoriesList(params)).done(function (applicationList) {\r\n                self.changeRadioIcon(\"one\", content);\r\n                var appTree = $.tmpl(\r\n                    self.applicationTreeTmpl, \r\n                    { \r\n                        type: applicationList.type, \r\n                        items: applicationList.items, \r\n                        svg: self.svgIconsMode \r\n                    }\r\n                );\r\n                $(\"#applicationsTree\", content).html(\"\");\r\n                $(\"#applicationsTree\", content).css(\"display\", \"inline-block\");\r\n                $(\"#applicationsTree\", content).append(appTree);\r\n\r\n                //manage events\r\n                self.setTreeEvents(null, content);\r\n\r\n            }).fail(function (error) {\r\n                bizagi.log(error);\r\n            });\r\n        }\r\n    },\r\n    /*\r\n    * manage tree behaviour\r\n    */\r\n    setTreeEvents: function (idApp, content) {\r\n        var self = this;\r\n\r\n        //when select a process\r\n        $(\".biz-wp-tree-process\", content).click(function () {\r\n\r\n            var parentType = \"\";\r\n            var selectedRoute = [];\r\n            var selectedRouteText = \"\";\r\n            var item = this;\r\n            self.treeRouteSelected = [];\r\n            self.treeRouteSelected.push($(this)[0].getAttribute(\"data-id\"));\r\n\r\n            //get the route (app / category / process) selected            \r\n            while (parentType != \"app\") {\r\n                item = $(item).closest(\".biz-wp-tree-list\").parent().find(\"label\").first();\r\n                parentType = item[0].getAttribute(\"data-name\");\r\n                selectedRoute.push(item.html());\r\n                self.treeRouteSelected.push(item[0].getAttribute(\"data-id\"));\r\n            }\r\n\r\n            for (var i = selectedRoute.length - 1; i >= 0; i--) {\r\n                selectedRouteText += selectedRoute[i] + \" > \";\r\n            }\r\n\r\n            selectedRouteText += $(this).html();\r\n            self.treeRouteText = selectedRouteText;\r\n            //resolve deferred to let parent do something when user select any process\r\n            if (self.params.parentDef) {\r\n                self.params.parentDef.resolve();\r\n            }\r\n            $(self.params.canvas).trigger(\"processSelected\", 1);\r\n            \r\n            //update search in label with the selection\r\n            \r\n            $(\"#searchInLabel\", self.params.canvas).html(selectedRouteText);\r\n            if(self.processesTreeNew === true){\r\n                $(\"#searchInLabel\", self.params.canvas).parent().parent().parent().show(); //Show only when a process is selected\r\n            }\r\n            $(\"#applicationsTree\", self.params.canvas).addClass(\"hidden\");\r\n        });\r\n\r\n        //when select a category\r\n        $(\".biz-wp-tree-expand-icon\", content).click(function () {\r\n            var itemSelected = this;\r\n            var idItem = Number(itemSelected.getAttribute(\"data-id\"));\r\n            var idParent = \"\";\r\n\r\n            //when click a category remove the content to append the new content again and avoid repetition of data\r\n            $(itemSelected).closest(\".biz-wp-tree-node\").find(\".biz-wp-tree-list\").html(\"\");\r\n\r\n            //when tree item is closed and can be expanded\r\n            if ($(\"<b></b>\").addClass($(itemSelected).attr(\"class\")).hasClass(\"biz-wp-tree-expand-icon\")) {\r\n                \r\n                self.expandOrCollapseArrows({ \r\n                        expand: true, \r\n                        itemSelected: itemSelected \r\n                    });\r\n\r\n                if (idApp == null || itemSelected.getAttribute(\"name\") === \"app\") {\r\n                    idApp = idItem;\r\n                } else {\r\n                    idParent = idItem;\r\n                }\r\n\r\n                var params = {\r\n                    action: \"getCategories\",\r\n                    idApp: idApp,\r\n                    idCategory: idParent,\r\n                    filterStartEvent: false,\r\n                    authorizationContext: self.params.authorizationContext\r\n                };\r\n\r\n                if(self.params.userId){\r\n                    params.userId = self.params.userId\r\n                }\r\n                if(self.params.filterCaseSecurity){\r\n                    params.filterCaseSecurity = self.params.filterCaseSecurity\r\n                }\r\n\r\n                $.when(self.dataService.getApplicationCategoriesList(params)).done(function (categoriesList) {\r\n                    //load children and set events to them\r\n                    var appTree = $.tmpl(\r\n                        self.applicationTreeTmpl, \r\n                        { \r\n                            type: categoriesList.type, \r\n                            items: categoriesList.processes, \r\n                            svg: self.svgIconsMode \r\n                        }\r\n                    );\r\n                    $(itemSelected).closest(\".biz-wp-tree-node\").find(\".biz-wp-tree-list\").append(appTree);\r\n                    self.setTreeEvents(idApp, $(itemSelected).closest(\".biz-wp-tree-node\").find(\".biz-wp-tree-list\"));\r\n\r\n                }).fail(function (error) {\r\n                    bizagi.log(error);\r\n                });\r\n            }\r\n            //when tree item is open and can be closed\r\n            else {\r\n                self.expandOrCollapseArrows({ \r\n                    expand: false, \r\n                    itemSelected: itemSelected \r\n                });\r\n            }\r\n        });\r\n    },\r\n\r\n    /**\r\n     * let to expand or collapse arrows dending of the svgIconsMode\r\n     * @param {JSON} params expand and itemSelected\r\n     */\r\n    expandOrCollapseArrows: function(params) {\r\n        var self = this;\r\n        var right, down =\"\";\r\n        if (params.expand) {\r\n            right = $(params.itemSelected);\r\n            right.attr(\"class\", $(\"<b></b>\").addClass(right.attr(\"class\")).removeClass(\"biz-wp-tree-expand-icon\").attr(\"class\"));\r\n            right.attr(\"class\", $(\"<b></b>\").addClass(right.attr(\"class\")).addClass(\"biz-wp-tree-collapse-icon\").attr(\"class\"));\r\n            if (self.svgIconsMode) {\r\n                down = $(params.itemSelected).parent().find(\".bz-icon-arrow-down\");\r\n                down.show();\r\n                down.attr(\"class\", $(\"<b></b>\").addClass(down.attr(\"class\")).removeClass(\"biz-wp-tree-expand-icon\").attr(\"class\"));\r\n                down.attr(\"class\", $(\"<b></b>\").addClass(down.attr(\"class\")).addClass(\"biz-wp-tree-collapse-icon\").attr(\"class\"));\r\n                right.hide();\r\n            }\r\n        } else {\r\n            right = self.svgIconsMode?$(params.itemSelected).parent().find(\".bz-icon-arrow-right\"):$(params.itemSelected);\r\n            right.attr(\"class\", $(\"<b></b>\").addClass(right.attr(\"class\")).removeClass(\"biz-wp-tree-collapse-icon\").attr(\"class\"));\r\n            right.attr(\"class\", $(\"<b></b>\").addClass(right.attr(\"class\")).addClass(\"biz-wp-tree-expand-icon\").attr(\"class\"));\r\n            if (self.svgIconsMode) {\r\n                right.show();\r\n                down = $(params.itemSelected);\r\n                down.hide();\r\n                down.attr(\"class\", $(\"<b></b>\").addClass(down.attr(\"class\")).removeClass(\"biz-wp-tree-collapse-icon\").attr(\"class\"));\r\n                down.attr(\"class\", $(\"<b></b>\").addClass(down.attr(\"class\")).addClass(\"biz-wp-tree-expand-icon\").attr(\"class\"));\r\n            }\r\n        }\r\n    },\r\n\r\n    /*\r\n    * Returns the app, category and process selected\r\n    */\r\n    getTreeRouteSelected: function () {\r\n        var self = this;\r\n        return self.treeRouteSelected;\r\n    },\r\n\r\n    /*\r\n    * Returns the app, category and process text selected\r\n    */\r\n    getTreeRouteText: function () {\r\n        var self = this;\r\n        return self.treeRouteText;\r\n    },\r\n\r\n    /**\r\n     *  Set canvas of tree\r\n     */\r\n    setParamCanvas: function(canvas) {\r\n        var self = this;\r\n        self.params.canvas = canvas;\r\n    }\r\n\r\n});","/**\r\n * Name: BizAgi Desktop Widget Entities Tree\r\n * \r\n * @author Christian Collazos\r\n */\r\n\r\n\r\nbizagi.workportal.widgets.entitiestree.extend(\"bizagi.workportal.widgets.entitiestree\", {}, {\r\n    init: function (workportalFacade, dataService, params) {\r\n        var self = this;\r\n\r\n        // Call base\r\n        self._super(workportalFacade, dataService, params);\r\n\r\n        //Load templates\r\n        self.loadTemplates({\r\n            \"EntitiesTree.wrapper\": bizagi.getTemplate(\"bizagi.workportal.desktop.widgets.entitiestree\").concat(\"#ui-bizagi-workportal-widget-entitiestree-wrapper\"),\r\n            \"EntitiesTree.tree\": bizagi.getTemplate(\"bizagi.workportal.desktop.widgets.entitiestree\").concat(\"#ui-bizagi-workportal-widget-entitiestree\"),\r\n            useNewEngine: false\r\n        });\r\n    },\r\n\r\n    renderContent: function () {\r\n        var self = this;\r\n        var content = \"\";\r\n\r\n        // Override canvas if it has been defined\r\n        if (self.params.canvas) {\r\n            content = self.content = $(self.params.canvas);\r\n        }\r\n\r\n        return content;\r\n    },\r\n\r\n    postRender: function () {\r\n        var self = this;\r\n\r\n        //load templates\r\n        self.loadtemplates();\r\n        //load initial data\r\n        self.setupData();\r\n    },\r\n\r\n    /*\r\n    * Load template vars\r\n    */\r\n    loadtemplates: function () {\r\n        var self = this;\r\n        self.entitiesTreeTmpl = self.getTemplate(\"EntitiesTree.tree\");\r\n    },\r\n\r\n    /*\r\n    * Setup form data\r\n    */\r\n    setupData: function () {\r\n        var self = this;\r\n        self.treeRouteSelected = [];\r\n        self.setupInitialData();\r\n    },\r\n\r\n    /*\r\n    * Load form data\r\n    */\r\n    setupInitialData: function () {\r\n        var self = this,\r\n            content = self.getContent();\r\n        var idWfClass=  $(\"#processTypeList\").val();\r\n\r\n        var pathNodeType = \"\";\r\n        var idNode = \"\";\r\n        var nodeDisplayPath = \"\";\r\n        var nodePath = \"\";\r\n        var params = { pathNodeType: pathNodeType, idNode: idNode, nodeDisplayPath: nodeDisplayPath, nodePath: nodePath, idWfClass:idWfClass };\r\n\r\n        $.when(self.dataService.entityPathChildNodesAction(params)\r\n            ).done(function (result) {\r\n                var entitiesTree = $.tmpl(self.entitiesTreeTmpl, { items: result.nodes });\r\n                content.append(entitiesTree);\r\n                self.setTreeEvents(content);\r\n            });\r\n\r\n    },\r\n\r\n    /*\r\n    * manage tree behaviour\r\n    */\r\n    setTreeEvents: function (content) {\r\n        var self = this;\r\n\r\n        //when select a process\r\n        $(\".selectable\", content).click(function () {\r\n\r\n            var hasParent = true;\r\n            var item = this;\r\n            self.treeRouteSelected = {};\r\n            self.treeRouteSelected.name = ($(item)[0].getAttribute(\"data-name-path\"));\r\n            self.treeRouteSelected.path = ($(item)[0].getAttribute(\"data-path\"));\r\n\r\n            $(\".selectable\").removeClass(\"biz-wp-entities-tree-selected\");\r\n            $(item).addClass(\"biz-wp-entities-tree-selected\");\r\n\r\n\r\n            //get the route selected            \r\n            while (hasParent) {\r\n                item = $(item).closest(\".biz-wp-tree-list\").parent().find(\"a\").first();\r\n\r\n                if (item.length == 0) {\r\n                    hasParent = false;\r\n                } else {\r\n                    if (item[0].getAttribute(\"data-name-path\") != \"\") {\r\n                        self.treeRouteSelected.name = item[0].getAttribute(\"data-name-path\") + \".\" + self.treeRouteSelected.name;\r\n                    }\r\n                    self.treeRouteSelected.path = item[0].getAttribute(\"data-path\") + self.treeRouteSelected.path;\r\n                }\r\n            }\r\n\r\n        });\r\n\r\n        //when select a category\r\n        $(\".biz-wp-tree-expand-icon\", content).click(function (e) {\r\n            var itemSelected = this;\r\n            var idItem = Number(itemSelected.getAttribute(\"data-id\"));\r\n\r\n            //when click a category remove the content to append the new content again and avoid repetition of data\r\n            $(itemSelected).closest(\".biz-wp-tree-node\").find(\".biz-wp-tree-list\").html(\"\");\r\n\r\n            //when tree item is closed and can be expanded\r\n            if ($(itemSelected).hasClass(\"biz-wp-tree-expand-icon\")) {\r\n\r\n                $(itemSelected).removeClass(\"biz-wp-tree-expand-icon\");\r\n                $(itemSelected).addClass(\"biz-wp-tree-collapse-icon\");\r\n               \r\n                var nodeType = \"\";\r\n                var nodeDisplayPath = \"\";\r\n                var nodePath = \"\";\r\n                var idWfClass = $(\"#processTypeList\").val();\r\n                var paramsChilds = { nodeType: nodeType, idNode: idItem, nodeDisplayPath: nodeDisplayPath, nodePath: nodePath, idWfClass: idWfClass };\r\n\r\n                $.when(self.dataService.entityPathChildNodesAction(paramsChilds)\r\n                ).done(function (result) {\r\n                    var entitiesTree = $.tmpl(self.entitiesTreeTmpl, { items: result.nodes });\r\n\r\n                    //load children and set events to them\r\n                    $(itemSelected).closest(\".biz-wp-tree-node\").find(\".biz-wp-tree-list\").append(entitiesTree);\r\n                    self.setTreeEvents($(itemSelected).closest(\".biz-wp-tree-node\").find(\".biz-wp-tree-list\"));\r\n                }).fail(function (error) {\r\n                    bizagi.log(error);\r\n                });\r\n            }\r\n            //when tree item is open and can be closed\r\n            else {\r\n                $(itemSelected).removeClass(\"biz-wp-tree-collapse-icon\");\r\n                $(itemSelected).addClass(\"biz-wp-tree-expand-icon\");\r\n            }\r\n        });\r\n    },\r\n\r\n    /*\r\n    * Returns the app, category and process selected\r\n    */\r\n    getTreeRouteSelected: function () {\r\n        var self = this;\r\n        return self.treeRouteSelected;\r\n    }\r\n\r\n});","/**\r\n* Name: BizAgi Desktop Widget Users Table\r\n* \r\n* @author Christian Collazos\r\n*/\r\n\r\n\r\nbizagi.workportal.widgets.userstable.extend(\"bizagi.workportal.widgets.userstable\", {}, {\r\n\r\n    init: function (workportalFacade, dataService, params) {\r\n        var self = this;\r\n        self._super(workportalFacade, dataService, params);\r\n\r\n        self.filterData = {};\r\n        self.maxRows = 8;\r\n        self.maxPages = 10;\r\n        self.$canvas = params.canvas;\r\n        self.showBackButton = params.showBackButton;\r\n        self.users = [];\r\n        self.totalPages = 0;\r\n        self.currentPage = 1;\r\n        self.orderType = \"ASC\";\r\n        self.orderField = \"\";\r\n        self.tableHeaders = [\r\n            { \"displayName\": self.getResource(\"workportal-widget-usertable-id\"), \"fieldValue\": \"idUser\" },\r\n            { \"displayName\": self.getResource(\"workportal-widget-usertable-user\"), \"fieldValue\": \"userName\" },\r\n            { \"displayName\": self.getResource(\"workportal-widget-usertable-name\"), \"fieldValue\": \"fullName\" },\r\n            { \"displayName\": self.getResource(\"workportal-widget-usertable-domain\"), \"fieldValue\": \"domain\" },\r\n            { \"displayName\": self.getResource(\"workportal-widget-usertable-email\"), \"fieldValue\": \"contactEmail\" },\r\n            { \"displayName\": self.getResource(\"workportal-widget-usertable-active-assign\"), \"fieldValue\": \"enabledForAssignation\" },\r\n            { \"displayName\": self.getResource(\"workportal-widget-usertable-active\"), \"fieldValue\": \"enabled\" }\r\n        ];\r\n\r\n        self.loadTemplates({\r\n            \"usersTable.wrapper\": bizagi.getTemplate(\"bizagi.workportal.desktop.widgets.userstable\").concat(\"#ui-bizagi-workportal-widget-usersTable-wrapper\"),\r\n            \"usersTable.form\": bizagi.getTemplate(\"bizagi.workportal.desktop.widgets.userstable\").concat(\"#ui-bizagi-workportal-widget-usersTable-form\"),\r\n            \"usersTable.table\": bizagi.getTemplate(\"bizagi.workportal.desktop.widgets.userstable\").concat(\"#ui-bizagi-workportal-widget-usersTable-table\"),\r\n            \"usersTable.message\": bizagi.getTemplate(\"bizagi.workportal.desktop.widgets.userstable\").concat(\"#ui-bizagi-workportal-widget-usersTable-message\"),\r\n            useNewEngine: false\r\n        });\r\n\r\n    },\r\n\r\n    renderContent: function () {\r\n        var self = this;\r\n        var template = self.getTemplate(\"usersTable.wrapper\");\r\n        var content;\r\n\r\n        content = self.content = $.tmpl(template, {});\r\n\r\n        // Override canvas if it has been defined\r\n        if (self.params.canvas) {\r\n            content = $(self.params.canvas).append(content);\r\n        }\r\n\r\n        return content;\r\n    },\r\n\r\n    postRender: function () {\r\n        var self = this;\r\n\r\n        //load templates\r\n        self.loadtemplates();\r\n\r\n        //load form data\r\n        self.setupData();\r\n    },\r\n\r\n    /*\r\n    * Load template vars\r\n    */\r\n    loadtemplates: function () {\r\n        var self = this;\r\n\r\n        self.usersTableFormTmpl = self.getTemplate(\"usersTable.form\");\r\n        self.usersTableTmpl = self.getTemplate(\"usersTable.table\");\r\n        self.usersTableMessage = self.getTemplate(\"usersTable.message\");\r\n    },\r\n\r\n    /*\r\n    * Setup form data\r\n    */\r\n    setupData: function () {\r\n\r\n        var self = this;\r\n\r\n        $.when(self.dataService.getOrganizationsList()).done(function (rps) {\r\n\r\n            var orgList = rps.response;\r\n\r\n            var resultTemplate = $.tmpl(self.usersTableFormTmpl, { orgList: orgList.length, showBackButton: self.showBackButton });\r\n            $(\"#biz-wp-userstable-wrapperform\", self.content).html(resultTemplate);\r\n\r\n            $(\"#btn-users-table-back\", self.content).click(function (e) {\r\n                if (self.params.parentDef) {\r\n                    self.params.parentDef.resolve();\r\n                }\r\n            });\r\n\r\n            if (orgList.length) {\r\n                orgList.unshift({ displayName: \"----------------\", id: \"\" });\r\n                self.setupOrgCombo(resultTemplate, orgList);\r\n            }\r\n\r\n            self.setupEventsHandler();\r\n            if (self.$canvas === undefined) {\r\n                self.$canvas=self.content;\r\n            }\r\n            self.$canvas.trigger(\"completeUserForm\");\r\n\r\n        }).fail(function (error) {\r\n            bizagi.log(error);\r\n        });\r\n\r\n    },\r\n\r\n    /*\r\n    * Setup organization combo\r\n    */\r\n    setupOrgCombo: function ($content, data) {\r\n\r\n        var self = this;\r\n        var $combo = $content.find(\"#biz-wp-usertable-org\");\r\n\r\n        $combo.uicombo({\r\n            data: { combo: data },\r\n            initValue: data[0],\r\n            itemValue: function (item) {\r\n                return item.id;\r\n            },\r\n            itemText: function (item) {\r\n                return item.displayName;\r\n            }\r\n        });\r\n\r\n    },\r\n\r\n    /*\r\n    * Implement main buttons behaviour\r\n    */\r\n    setupEventsHandler: function () {\r\n        var self = this,\r\n            content = self.getContent();\r\n        var $userForm = $(\"#biz-wp-userstable-wrapperform form\", content);\r\n\r\n        $userForm.on(\"submit\", function (e) {\r\n\r\n            e.preventDefault();\r\n            if (typeof (self.afterSave) == \"undefined\") self.currentPage = 1;\r\n            else {\r\n                delete (self.afterSave);\r\n                self.currentPage = self.currentPage || 1;\r\n            }\r\n            self.orderType = \"ASC\";\r\n            self.orderField = \"\";\r\n\r\n            self.filterData = {\r\n                domain: this.elements[0].value,\r\n                userName: this.elements[1].value,\r\n                fullName: this.elements[2].value,\r\n                organization: $(this.elements[3]).data('value'),\r\n                pag: self.currentPage,\r\n                pagSize: self.maxRows,\r\n                orderField: self.orderField,\r\n                orderType: self.orderType\r\n            };\r\n\r\n            self.getUsersTableData();\r\n\r\n        });\r\n\r\n        $userForm.on(\"reset\", function (event) {\r\n\r\n            event.preventDefault();\r\n\r\n            $(this.elements[3]).data(\"value\", \"\").val(\"----------------\");\r\n            this.elements[0].value = \"\";\r\n            this.elements[1].value = \"\";\r\n            this.elements[2].value = \"\";\r\n\r\n            $(\"#biz-wp-userstable-wrapperlist\", content).empty();\r\n        });\r\n\r\n    },\r\n\r\n    /*\r\n    * Clean Form\r\n    */\r\n    cleanForm: function () {\r\n\r\n        var self = this,\r\n        content = self.getContent();\r\n        var $userForm = $(\"#biz-wp-userstable-wrapperform form\", content);\r\n\r\n        $userForm.trigger('reset');\r\n    },\r\n\r\n    /*\r\n    * Excecute Query \r\n    */\r\n    excecuteQuery: function () {\r\n\r\n        var self = this;\r\n        content = self.getContent();\r\n        var $userForm = $(\"#biz-wp-userstable-wrapperform form\", content);\r\n\r\n        $userForm.trigger('submit');\r\n    },\r\n\r\n    /*\r\n    * get users table data\r\n    */\r\n    getUsersTableData: function (params) {\r\n        var self = this;\r\n\r\n        var params = params || {};\r\n        self.orderType = params.orderType || self.orderType;\r\n        self.orderField = params.orderField || self.orderField; \r\n        var method = \"getUsersList\";\r\n        if (self.params.widgetName == \"adminCaseSearch\" || self.params.widgetName == \"reassignCase\" || self.params.widgetName == \"userProfiles\"){\r\n            method = \"getUsersForAssignation\";\r\n        }else if(self.params.widgetName == \"defaultsAssignUser\"){\r\n            method = \"getUsersForDefaultAssignation\";\r\n        }\r\n        $.when(self.dataService[method]($.extend(self.filterData, params))).done(function (data) {\r\n            self.fillUserInformation(data);\r\n\r\n        }).fail(function (error) {\r\n            bizagi.log(error);\r\n        });\r\n    },\r\n\r\n    /*\r\n    * if users returned show the table\r\n    */\r\n    showUsersTable: function () {\r\n\r\n        var self = this;\r\n        var $wrapperList = $(\"#biz-wp-userstable-wrapperlist\", self.content);\r\n\r\n        $wrapperList.empty();\r\n\r\n        if (self.users.length > 0) {\r\n\r\n            var pagination = (self.totalPages > 1) ? true : false;\r\n            var pagesArray = self.getPagesArray();\r\n\r\n            var links = self.params.userLinkLabel && Object.prototype.toString.apply(self.params.userLinkLabel) === \"[object Array]\" ? self.params.userLinkLabel : [self.params.userLinkLabel];\r\n\r\n            var usersTableTmpl = $.tmpl(self.usersTableTmpl, { users: self.users, headers: self.tableHeaders, links: links, page: self.currentPage, pagination: pagination, pagesArray: pagesArray, orderField: self.orderField, orderType: self.orderType });\r\n            $wrapperList.html(usersTableTmpl);\r\n\r\n            self.setUpPagination();\r\n            self.setUpSortColumnLinks();\r\n        } else {\r\n\r\n            var msg = bizagi.localization.getResource(\"workportal-widget-usertable-empty\");\r\n            $wrapperList.html($.tmpl(self.usersTableMessage, { message: msg }));\r\n        }\r\n    },\r\n\r\n    /*\r\n    * Get Pages\r\n    */\r\n    getPagesArray: function () {\r\n\r\n        var self = this;\r\n        var pagesToShow = (self.maxPages > self.totalPages) ? self.totalPages : self.maxPages;\r\n        var aux = [];\r\n\r\n        for (var a = 0; a < pagesToShow; a++) {\r\n            aux.push(a + 1);\r\n        }\r\n\r\n        return aux;\r\n    },\r\n\r\n    /*\r\n    * Set pagination\r\n    */\r\n    setUpPagination: function () {\r\n        var self = this;\r\n        var $pager = $(\"#biz-wp-userstable-pager ul\", self.content);\r\n\r\n        $pager.bizagiPagination({\r\n            maxElemShow: self.maxRows,\r\n            totalPages: self.totalPages,\r\n            actualPage: self.currentPage,\r\n            listElement: $pager,\r\n            clickCallBack: function (options) {\r\n                self.filterData.pag = self.currentPage = parseInt(options.page);\r\n                self.getUsersTableData();\r\n            }\r\n        });\r\n\r\n    },\r\n\r\n    /*\r\n    * assign click event to each column to order\r\n    */\r\n    setUpSortColumnLinks: function () {\r\n        var self = this;\r\n\r\n        $(\".biz-wp-table-head th\", self.content).click(function () {\r\n\r\n            var orderField = $(this).data(\"orderfield\");\r\n            var orderType = $(this).data(\"ordertype\");\r\n\r\n            self.getUsersTableData({ \"orderType\": orderType, \"orderField\": orderField });\r\n            self.assignEventReassign();\r\n        });\r\n\r\n    },\r\n\r\n    assignEventReassign: function () {\r\n        var self = this;\r\n\r\n        $(\".bizagi-wp-userstable-userlink\", self.content).click(function (e) {\r\n            var that = this;\r\n            if (self.params.parentDef) {\r\n                var done = function () {\r\n                    $(document).data('auto-save', '');\r\n                    self.params.parentDef.resolve(that.id, that.name, that.attributes.guid.value);\r\n                    if (self.params.widgetName == \"reassignCase\" && bizagi.workportal.desktop.dialogStack.length > 0)\r\n                        bizagi.workportal.desktop.dialogStack[bizagi.workportal.desktop.dialogStack.length - 1].dialogBox.on(\"dialogbeforeclose\", function (event, ui) {\r\n                        // Next variable specifies if is redirecting to inbox when the result status does not have errors.\r\n                        if (self.resultStatus === true){\r\n                            self.publish(\"changeWidget\", {\r\n                                widgetName: bizagi.workportal.currentInboxView\r\n                            });\r\n                        }\r\n                    });\r\n                };\r\n                var fail = function() {\r\n                    self.params.data.closeDialogWidget();\r\n                };\r\n                $.when(bizagi.util.autoSave()).done(done).fail(fail);\r\n            } else {\r\n                // publish executes twice when create a new instance of userstable\r\n                self.$canvas.trigger(\"clickUserLink\", { id: this.id, name: this.name, fullName: this.getAttribute(\"fullname\"), type: $(this).data(\"linkname\") });\r\n            }\r\n        });\r\n    },\r\n\r\n    /*\r\n    * sort table by a given column\r\n    */\r\n    sortUsersTableByColumn: function (data, column, orderType) {\r\n\r\n        return bizagi.util.sortJSON(data, column, orderType);\r\n\r\n    },\r\n    \r\n    fillUserInformation: function(data){\r\n        var self = this;\r\n        self.users = data.users;\r\n        self.totalPages = data.total;\r\n\r\n        self.showUsersTable();\r\n        self.assignEventReassign();\r\n    }\r\n});","/**\r\n* Name: BizAgi Desktop Widget - Tree\r\n* \r\n* @author Christian Collazos\r\n*/\r\n\r\n\r\nbizagi.workportal.widgets.tree.extend(\"bizagi.workportal.widgets.tree\", {}, {\r\n    \r\n    init: function (workportalFacade, dataService, params) {\r\n        var self = this;\r\n\r\n        // Call base\r\n        self._super(workportalFacade, dataService, params);\r\n\r\n        //Load templates\r\n        self.loadTemplates({\r\n            \"tree.wrapper\": bizagi.getTemplate(\"bizagi.workportal.desktop.widgets.tree\").concat(\"#ui-bizagi-workportal-widget-tree-wrapper\"),\r\n            \"tree.content\": bizagi.getTemplate(\"bizagi.workportal.desktop.widgets.tree\").concat(\"#ui-bizagi-workportal-widget-tree-content\"),\r\n            useNewEngine: false\r\n        });\r\n    },\r\n\r\n    renderContent: function () {\r\n        var self = this;\r\n        var template = self.getTemplate(\"tree.wrapper\");\r\n        var content;\r\n\r\n        content = self.content = $.tmpl(template, {});\r\n\r\n        // Override canvas if it has been defined\r\n        if (self.params.canvas) {\r\n            content = $(self.params.canvas).append(content);\r\n        }\r\n\r\n        return content;\r\n    },\r\n\r\n    postRender: function () {\r\n        var self = this;\r\n\r\n        //load templates \r\n        self.loadtemplates();\r\n    },\r\n\r\n    loadtemplates: function () {\r\n        var self = this;\r\n\r\n        //Template vars \r\n        self.decisionTableContent = self.getTemplate(\"tree.content\");\r\n    }\r\n});","/*\r\n*   Name: BizAgi Generic Page Widget Implementation\r\n*   Author: Diego Parra\r\n*   Comments:\r\n*/\r\n\r\n\r\n// Extends itself\r\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.entities\", {}, {\r\n    /*\r\n    *   Returns the widget name\r\n    */\r\n    getWidgetName: function () {\r\n        return bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ENTITIES;\r\n    },\r\n\r\n    init: function (workportalFacade, dataService, params) {\r\n        var self = this;\r\n\r\n        // Call base\r\n        self._super(workportalFacade, dataService, params);\r\n\r\n        //Load templates\r\n        self.loadTemplates({\r\n            \"entities\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.entities\").concat(\"#ui-bizagi-workportal-widget-entities\"),\r\n            useNewEngine: false\r\n        });\r\n    },\r\n\r\n    /*\r\n    *   Renders the content for the current controller\r\n    *   Returns a deferred because it has to load the current user\r\n    */\r\n    renderContent: function () {\r\n        var self = this;\r\n        \r\n        var deferred = new $.Deferred();\r\n\r\n        var template = self.getTemplate(\"entities\");\r\n        /*\r\n        var data = { entitiesURL: self.dataService.getUrl({ \"endPoint\": \"EntityAdmin\" }) };\r\n        \r\n        var content = $.tmpl(template, data);\r\n        \r\n        var iframe = $(\"#entitiesIFrame\", content);\r\n        \r\n        // Wait until the iframe has been loadedpip\r\n        iframe.load(function(){\r\n            iframe.callInside(function(params){\r\n            alert('1');\r\n                // This script will execute inside the iframe context\r\n                this.newentity = function(idEntity){\r\n                    self.publish(\"showDialogWidget\", {\r\n    \t                widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_PAGE,\r\n    \t                context: \"entitymanagement\",\r\n                        idForm: idForm,\r\n                        idEntity: idEntity,\r\n    \t\t\t        modalParameters: {\r\n    \t\t\t            title: self.getResource(\"workportal-menu-preferences\"),\r\n    \t\t\t            width:\"1020px\",\r\n    \t\t\t            showCloseButton: false\r\n    \t\t\t        }\r\n                    });\r\n                \r\n                    params.controller.publish(\"closeCurrentDialog\");\r\n                };\r\n            }, { });\r\n        });\r\n*/\r\n        $.when(self.dataService.getAllAdministrableEntities())\r\n           .done(function(data) { \r\n              var content = self.content = $.tmpl(template, data);\r\n              \r\n              $(\".bz-wp-widget-entities li\", content).click(function() {\r\n                 var idEntity = $(this).data(\"entity-id\");\r\n                 var idForm = $(this).data(\"entity-form\");\r\n                 self.renderEntityData(content, idEntity, idForm);\r\n              });\r\n              deferred.resolve(content);\r\n           });\r\n\r\n        // Return content\r\n        return deferred.promise();;\r\n    },\r\n    \r\n    renderStaticForm: function (params) {\r\n        var self = this;\r\n        var canvas = params.content;\r\n        var rendering = new bizagi.rendering.facade(params.context);\r\n\r\n        // Executes rendering into render container\r\n        params = params || {};\r\n    \t$.extend(params, {\r\n    \t    canvas: canvas,\r\n    \t    customHandlers: {\r\n    \t        onGridAdd: function(){\r\n                    self.publish(\"showDialogWidget\", {\r\n    \t                widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_PAGE,\r\n    \t                context: \"entitymanagement\",\r\n                        idForm: params.idForm,\r\n                        idEntity: params.idEntity,\r\n    \t\t\t        modalParameters: {\r\n    \t\t\t            title: self.getResource(\"workportal-menu-preferences\"),\r\n    \t\t\t            width:\"1020px\",\r\n    \t\t\t            showCloseButton: false\r\n    \t\t\t        },\r\n    \t\t\t        customHandlers: {\r\n    \t                    afterFormButtonClick: function(button){\r\n                                self.publish(\"closeCurrentDialog\");\r\n    \t                    }\r\n    \t\t\t        }\r\n                    });\r\n    \t        },\r\n    \t        onGridEdit: function(surrogateKey){\r\n                    self.publish(\"showDialogWidget\", {\r\n    \t                widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_PAGE,\r\n    \t                context: \"entitymanagement\",\r\n                        idForm: params.idForm,\r\n                        idEntity: params.idEntity,\r\n                        surrogateKey: surrogateKey,\r\n    \t\t\t        modalParameters: {\r\n    \t\t\t            title: self.getResource(\"workportal-menu-preferences\"),\r\n    \t\t\t            width:\"1020px\",\r\n    \t\t\t            showCloseButton: false\r\n    \t\t\t        },\r\n    \t\t\t        customHandlers: {\r\n    \t                    afterFormButtonClick: function(button){\r\n                                self.publish(\"closeCurrentDialog\");\r\n                                self.renderEntityData(params.content, params.idEntity, params.idForm);\r\n    \t                    }\r\n    \t\t\t        }\r\n                    });\r\n    \t        }\r\n    \t    }\r\n        });\r\n        \r\n        rendering.execute(params);\r\n\r\n        canvas.bind(\"close\", function () {\r\n            self.publish(\"closeCurrentDialog\");            \r\n        });\r\n    },\r\n    \r\n    renderEntityData: function(content, idEntity, idForm) {\r\n        var self = this;\r\n        content.empty();\r\n        $.when(self.dataService.getEntitiesList({ idEntity: idEntity, page: 1}))\r\n         .done(function(data) {\r\n                self.renderStaticForm({context: \"entitymanagement\", content: content, idEntity: idEntity, idForm: idForm, data: data});\r\n               });\r\n                \r\n                /*\r\n                var facade = new bizagi.rendering.facade();\r\n                facade.p\r\n                var renderFactory = facade.renderFactory;\r\n                $.when(renderFactory).done(function(factory) {\r\n                        var grid = factory.getRender('grid', data, content);\r\n                    });\r\n               });\r\n               */\r\n\r\n/*\r\n                    self.publish(\"showDialogWidget\", {\r\n    \t                widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_PAGE,\r\n    \t                context: \"entitymanagement\",\r\n                        idForm: idForm,\r\n                        idEntity: idEntity,\r\n    \t\t\t        modalParameters: {\r\n    \t\t\t            title: self.getResource(\"workportal-menu-preferences\"),\r\n    \t\t\t            width:\"1020px\",\r\n    \t\t\t            showCloseButton: false\r\n    \t\t\t        }\r\n                    });\r\n*/        \r\n    }\r\n});\r\n\r\n","/*\r\n Document   : bizagi.filterMoney\r\n Created on : May 21, 2015, 8:24:00 AM\r\n Author     : Andres Felipe Arenas Vargas\r\n Description: This script will define a base class to handle the filter of a money control\r\n */\r\n(function($) {\r\n\r\n    $.widget('filter.bizagi_moneyFilter', {\r\n        options: {\r\n            showButtonClearFilter: false,\r\n            properties: {},\r\n            onApply: function (data) {},\r\n            onClear: function (xpaths) {},\r\n            setData: function (){}\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _create: function() {\r\n            var self = this;\r\n            self.numericFormat = bizagi.clone(bizagi.localization.getResource(\"numericFormat\"));\r\n\r\n            self._addButtonClearFilter();\r\n            self._setReturnObject();\r\n            self._bindContextMenuButtons();\r\n            self._bindContextMenu();\r\n            self._bindTooltip();\r\n            self._bindHandlers();\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _addButtonClearFilter: function () {\r\n            var self = this;\r\n            if(self.options.showButtonClearFilter){\r\n                var btnRemoveFilter = \"<i class='bz-icon bz-icon-10 bz-icon-close-outline bz-wp-btn-icon-hover-effect remove-filter' title='\" +\r\n                    bizagi.localization.getResource(\"workportal-my-search-remove-filter\") + \"' style='display:none;'></i>\";\r\n                $(\".wgd-my-search-filter-pluggin\", self.element).append(btnRemoveFilter);\r\n            }\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _setReturnObject: function () {\r\n            var self = this;\r\n\r\n            self.returnObject = [\r\n                {\r\n                    properties: {\r\n                        xpath: self.options.properties.attribute + \"@from\",\r\n                        type: \"money\",\r\n                        typeSearch: \"range\",\r\n                        rangeQuery: \"from\"\r\n                    }\r\n                },\r\n                {\r\n                    properties: {\r\n                        xpath: self.options.properties.attribute + \"@to\",\r\n                        type: \"money\",\r\n                        typeSearch: \"range\",\r\n                        rangeQuery: \"to\"\r\n                    }\r\n                }\r\n            ];\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _bindContextMenuButtons: function () {\r\n            var self = this;\r\n            var options = self.options;\r\n\r\n            $.contextMenu.types.contextMenuButtons = function(item, opt, root) {\r\n                self.$menuContext = root.$menu;\r\n                var htmlButtons = '<div class=\"ui-bizagi-filter-buttons\">';\r\n                htmlButtons += '<button id=\"ui-bizagi-cancel-filter\" class=\"bz-wp-btn bz-wp-btn-link\" type=\"button\">' + options.getResource('workportal-general-button-label-cancel') + '</button>';\r\n                htmlButtons += '<button id=\"ui-bizagi-apply-filter\" class=\"bz-wp-btn bz-wp-btn-primary\" type=\"button\">' + options.getResource('workportal-general-button-label-apply') + '</button>';\r\n                htmlButtons += '<div>';\r\n\r\n                $(htmlButtons).appendTo(this).on('click', 'button', function() {\r\n                    if ($(this).text() == options.getResource('workportal-general-button-label-apply')) {\r\n                        self._setValue();\r\n                        self._addFilterToDisplayName();\r\n                        options.onApply(self.returnObject, self.element);\r\n                    }\r\n                    root.$menu.trigger('contextmenu:hide');// hide the menu\r\n                });\r\n            };\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _bindContextMenu: function () {\r\n            var self = this;\r\n            var options = self.options;\r\n            var $opener = $(self.element);\r\n            var id = '#' + $('.wgd-my-search-filter-pluggin', $opener).attr('id');\r\n\r\n            $opener.on('click', function(event) {\r\n                if($(event.target).hasClass(\"remove-filter\") && $(\".wgd-my-search-filter-pluggin .remove-filter\", self.element).is(\":visible\")){\r\n                    self._removeFilter();\r\n                }\r\n                else{\r\n                    $(id).contextMenu();\r\n                }\r\n            });\r\n\r\n            var paramsContextMenu = {\r\n                selector: id,\r\n                trigger: 'none',\r\n                items: {\r\n                    key: {\r\n                        name: options.getResource('workportal-my-search-remove-filter'),\r\n                        className: 'ui-bizagi-clear-filters',\r\n                        callback: function() {\r\n                            self._removeFilter();\r\n\r\n                            return true;// False -> To keep the context menu open\r\n                        }\r\n                    },\r\n                    min: {\r\n                        name: options.getResource('bz-rp-components-time-from-label'),\r\n                        type: 'text',\r\n                        className: 'ui-bizagi-money-filter-min'\r\n                    },\r\n                    max: {\r\n                        name: options.getResource('bz-rp-components-time-to-label'),\r\n                        type: 'text',\r\n                        className: 'ui-bizagi-money-filter-max'\r\n                    },\r\n                    notification: {\r\n                        name: options.getResource('workportal-my-search-limit-notification'),\r\n                        className: 'ui-bizagi-money-filter-notification'\r\n                    },\r\n                    buttons: {\r\n                        type: 'contextMenuButtons' // Self structure - see _bindContextMenuButtons\r\n                    }\r\n                },\r\n                events: {\r\n                    show: function() {\r\n                        return $.when(self.options.setData()).done(function (data) {\r\n                            var $input = $('<input type=\"text\">');\r\n                            self.options.data = (typeof data !== 'undefined') ? data : self.options.data;\r\n\r\n                            $input.val(self.options.data.min);\r\n                            $input.formatCurrency(self._getFormatOptions());\r\n                            $(\".ui-bizagi-money-filter-min span\", self.$menuContext).html(options.getResource('bz-rp-components-time-from-label') + \" (<span class='select-value'>\" +  $input.val() + \"</span>):\");\r\n\r\n                            $input.val(self.options.data.max);\r\n                            $input.formatCurrency(self._getFormatOptions());\r\n                            $(\".ui-bizagi-money-filter-max span\", self.$menuContext).html(options.getResource('bz-rp-components-time-to-label') + \" (<span class='select-value'>\" +  $input.val() + \"</span>):\");\r\n\r\n                            self._enableNotification(false);\r\n\r\n                            var $minValue = $('.ui-bizagi-money-filter-min .select-value', self.$menuContext);\r\n                            var $maxValue = $('.ui-bizagi-money-filter-max .select-value', self.$menuContext);\r\n                            $minValue.on('click', $.proxy(self._onClickMinValue, self));\r\n                            $maxValue.on('click', $.proxy(self._onClickMaxValue, self));\r\n\r\n                        });\r\n                    },\r\n                    hide: function() {\r\n                        self.removeHandlersValuesMinMax();\r\n                    }\r\n                }\r\n            };\r\n\r\n            if(self.options.showButtonClearFilter === true){\r\n                paramsContextMenu.items.key = undefined;\r\n            }\r\n\r\n            $opener.contextMenu(paramsContextMenu);\r\n\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _bindTooltip: function (){\r\n            var self = this;\r\n            $(self.element).tooltip({\r\n                items: \"#\" + $(\"div\", self.element).attr(\"id\"),\r\n                content: function () {\r\n                    return self.filterValue;\r\n                }\r\n            });\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _setDisplayValue: function (){\r\n            var self = this;\r\n            var min = (typeof(self.returnObject[0].value) === \"undefined\") ? \"\" : self.returnObject[0].value ;\r\n            var max = (typeof(self.returnObject[1].value) === \"undefined\") ? \"\" : self.returnObject[1].value ;\r\n\r\n            $('.ui-bizagi-money-filter-min input', self.$menuContext).val(min);\r\n            $('.ui-bizagi-money-filter-max input', self.$menuContext).val(max);\r\n            $('.ui-bizagi-money-filter-min input', self.$menuContext).formatCurrency(self._getFormatOptions());\r\n            $('.ui-bizagi-money-filter-max input', self.$menuContext).formatCurrency(self._getFormatOptions());\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _setFormatValue: function($input){\r\n            var self = this;\r\n\r\n            var value = self._getObjectValueByString($input.val());\r\n\r\n            if(value !== 0){\r\n                $input.val(value);\r\n                $input.formatCurrency(self._getFormatOptions());\r\n            }\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         * @param stringValue\r\n         * @return {*}\r\n         * @param asFloatType\r\n         */\r\n        _getObjectValueByString: function(stringValue, asFloatType){\r\n            var self = this;\r\n\r\n            var value = stringValue,\r\n                regexString = \"/[\" + self.numericFormat.symbol + self.numericFormat.digitGroupSymbol + \"]/g\",\r\n                regex = eval(regexString);\r\n\r\n            value = value.replace(regex, \"\");\r\n            if(asFloatType){\r\n                value = value.replace(\",\", \".\");\r\n                value = parseFloat(value);\r\n            }\r\n\r\n            return value;\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _addFilterToDisplayName: function () {\r\n            var self = this;\r\n            var minVal = $('.ui-bizagi-money-filter-min input', self.$menuContext).val();\r\n            var maxVal = $('.ui-bizagi-money-filter-max input', self.$menuContext).val();\r\n            var $displayNameControl = $('.wgd-my-search-filter-pluggin span', self.element);\r\n            var displayName = $displayNameControl.text().split(':');\r\n\r\n            self.filterValue =  minVal + ' ' + self.options.getResource('bz-rp-components-time-to-label') + ' ' + maxVal;\r\n            $displayNameControl.text(displayName[0] + ': ' + self.filterValue);\r\n\r\n            $(\".wgd-my-search-filter-pluggin .remove-filter\", self.element).show();\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _setDisplayNameToDefault: function () {\r\n            var self = this;\r\n            var $displayNameControl = $('.wgd-my-search-filter-pluggin span', self.element);\r\n            var displayName = $displayNameControl.text().split(':');\r\n\r\n            self.filterValue = \"\";\r\n            $displayNameControl.text(displayName[0]);\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _setValue: function () {\r\n            var self = this;\r\n            var minVal = self._getObjectValueByString($(\".ui-bizagi-money-filter-min input\", self.$menuContext).val(), true);\r\n            var maxVal = self._getObjectValueByString($(\".ui-bizagi-money-filter-max input\", self.$menuContext).val(), true);\r\n\r\n            self.returnObject[0].value = (minVal === '') ? maxVal : minVal;\r\n            self.returnObject[1].value = (maxVal === '') ? minVal : maxVal;\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _resetValue: function () {\r\n            var self = this;\r\n\r\n            self._setReturnObject();\r\n            $('.ui-bizagi-money-filter-min input', self.$menuContext).val('');\r\n            $('.ui-bizagi-money-filter-max input', self.$menuContext).val('');\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _bindHandlers: function (){\r\n            var self = this;\r\n            var options = self.options;\r\n            var $minControl = $('.ui-bizagi-money-filter-min input', self.$menuContext);\r\n            var $maxControl = $('.ui-bizagi-money-filter-max input', self.$menuContext);\r\n\r\n            $minControl.keyup( function() {\r\n                if ($(this).val()) {\r\n                    var maxVal = self._getObjectValueByString($(\".ui-bizagi-money-filter-max input\", self.$menuContext).val(), true);\r\n                    var minVal = self._getObjectValueByString($(this).val(), true);\r\n                    var isLowerLimitInvalid = isNaN(minVal) ? true : minVal < parseFloat(options.data.min);\r\n                    var isUpperLimitInvalid = isNaN(maxVal) ? true : maxVal > parseFloat(options.data.max);\r\n                    var isRangeInvalid = minVal > maxVal;\r\n\r\n                    self._checkNotification(isLowerLimitInvalid, isUpperLimitInvalid, isRangeInvalid);\r\n                    self._setFormatValue($(this));\r\n                }\r\n            });\r\n\r\n            $maxControl.keyup(function() {\r\n                if ($(this).val()) {\r\n                    var maxVal = self._getObjectValueByString($(this).val(), true);\r\n                    var minVal = self._getObjectValueByString($(\".ui-bizagi-money-filter-min input\", self.$menuContext).val(), true);\r\n                    var isLowerLimitInvalid = isNaN(minVal) ? true : minVal < parseFloat(options.data.min);\r\n                    var isUpperLimitInvalid = isNaN(maxVal) ? true : maxVal > parseFloat(options.data.max);\r\n                    var isRangeInvalid = minVal > maxVal;\r\n\r\n                    self._checkNotification(isLowerLimitInvalid, isUpperLimitInvalid, isRangeInvalid);\r\n                    self._setFormatValue($(this));\r\n                }\r\n            });\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         * @param event\r\n         */\r\n        _onClickMinValue: function(event){\r\n            var self = this;\r\n            var $minControl = $('.ui-bizagi-money-filter-min input', self.$menuContext);\r\n            $minControl.val($(event.target).text());\r\n            $minControl.keyup();\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @param event\r\n         * @private\r\n         */\r\n        _onClickMaxValue: function(event){\r\n            var self = this;\r\n            var $maxControl = $('.ui-bizagi-money-filter-max input', self.$menuContext);\r\n            $maxControl.val($(event.target).text());\r\n            $maxControl.keyup();\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @param isLowerLimitInvalid\r\n         * @param isUpperLimitInvalid\r\n         * @param isRangeInvalid\r\n         * @private\r\n         */\r\n        _checkNotification: function (isLowerLimitInvalid, isUpperLimitInvalid, isRangeInvalid) {\r\n            var self = this;\r\n            var options = self.options;\r\n\r\n            if ((isRangeInvalid || isLowerLimitInvalid || isUpperLimitInvalid)){\r\n                var notification = options.getResource('workportal-my-search-limit-notification');\r\n                if (isLowerLimitInvalid) {\r\n                    notification = options.getResource('workportal-my-search-lower-limit-notification');\r\n                }\r\n                else if(isUpperLimitInvalid) {\r\n                    notification = options.getResource('workportal-my-search-upper-limit-notification');\r\n                }\r\n                else if (isRangeInvalid) {\r\n                    notification = options.getResource('workportal-my-search-max-min-notification');\r\n                }\r\n                self._enableNotification(true, notification);\r\n            }\r\n            else{\r\n                self._disableNotification();\r\n            }\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @param showLabel\r\n         * @param notification\r\n         * @private\r\n         */\r\n        _enableNotification: function (showLabel, notification) {\r\n            var self = this;\r\n\r\n            if(showLabel){\r\n                $(\".ui-bizagi-money-filter-notification span\", self.$menuContext).text(notification);\r\n                $(\".ui-bizagi-money-filter-notification\", self.$menuContext).show();\r\n            }\r\n            else{\r\n                $(\".ui-bizagi-money-filter-notification\", self.$menuContext).hide();\r\n            }\r\n            $(\"#ui-bizagi-apply-filter\", self.$menuContext).attr(\"disabled\", \"disabled\");\r\n            $(\"#ui-bizagi-apply-filter\", self.$menuContext).addClass(\"ui-state-disabled\");\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _disableNotification: function () {\r\n            var self = this;\r\n\r\n            $(\".ui-bizagi-money-filter-notification\", self.$menuContext).hide();\r\n            $(\"#ui-bizagi-apply-filter\", self.$menuContext).removeAttr(\"disabled\");\r\n            $(\"#ui-bizagi-apply-filter\", self.$menuContext).removeClass(\"ui-state-disabled\");\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @returns {{symbol: string, roundToDecimalPlace: number, eventOnDecimalsEntered: boolean}}\r\n         * @private\r\n         */\r\n        _getFormatOptions: function (){\r\n            var self = this;\r\n            return formatOptions = {\r\n                symbol: \"\",\r\n                roundToDecimalPlace: -1,\r\n                eventOnDecimalsEntered: true,\r\n                digitGroupSymbol: self.numericFormat.digitGroupSymbol,\r\n                decimalSymbol: self.numericFormat.decimalSymbol\r\n            };\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _removeFilter: function (){\r\n            var self = this;\r\n            self._resetValue();\r\n            self._enableNotification(false);\r\n            self._setDisplayNameToDefault();\r\n            self.options.onClear([self.returnObject[0].properties.xpath, self.returnObject[1].properties.xpath]);\r\n\r\n            $(\".wgd-my-search-filter-pluggin .remove-filter\", self.element).hide();\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @param data\r\n         */\r\n        setData: function(data){\r\n            var self = this;\r\n\r\n            self.options.data = (Object.getOwnPropertyNames(data).length === 0) ? self.options.data : data;\r\n        },\r\n\r\n        /**\r\n         *\r\n         */\r\n        removeHandlersValuesMinMax: function(){\r\n            var self = this;\r\n            var $minValue = $('.ui-bizagi-money-filter-min .select-value', self.$menuContext);\r\n            var $maxValue = $('.ui-bizagi-money-filter-max .select-value', self.$menuContext);\r\n            $minValue.off('click', $.proxy(self._onClickMinValue, self));\r\n            $maxValue.off('click', $.proxy(self._onClickMaxValue, self));\r\n        },\r\n\r\n        /**\r\n         *\r\n         */\r\n        destroy: function() {\r\n            var self = this;\r\n            self.removeHandlersValuesMinMax();\r\n            $(this.element).contextMenu(\"destroy\");\r\n            $.Widget.prototype.destroy.call(this);\r\n        }\r\n    });\r\n})(jQuery);","/*\r\n Document   : bizagi.filterNumber\r\n Created on : May 21, 2015, 8:24:00 AM\r\n Author     : Andres Felipe Arenas Vargas\r\n Description: This script will define a base class to handle the filter of a number control\r\n */\r\n(function($) {\r\n\r\n    $.widget('filter.bizagi_numberFilter', {\r\n        options: {\r\n            showButtonClearFilter: false,\r\n            properties: {},\r\n            onApply: function (data) {},\r\n            onClear: function (xpaths) {},\r\n            setData: function (){}\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _create: function() {\r\n            var self = this;\r\n            self.numericFormat = bizagi.clone(bizagi.localization.getResource(\"numericFormat\"));\r\n\r\n            self._addButtonClearFilter();\r\n            self._setReturnObject();\r\n            self._bindContextMenuButtons();\r\n            self._bindContextMenu();\r\n            self._bindTooltip();\r\n            self._bindHandlers();\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _addButtonClearFilter: function () {\r\n            var self = this;\r\n            if(self.options.showButtonClearFilter){\r\n                var btnRemoveFilter = \"<i class='bz-icon bz-icon-10 bz-icon-close-outline bz-wp-btn-icon-hover-effect remove-filter' title='\" +\r\n                    bizagi.localization.getResource(\"workportal-my-search-remove-filter\") + \"' style='display:none;'></i>\";\r\n                $(\".wgd-my-search-filter-pluggin\", self.element).append(btnRemoveFilter);\r\n            }\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _setReturnObject: function () {\r\n            var self = this;\r\n\r\n            self.returnObject = [\r\n                {\r\n                    properties: {\r\n                        xpath: self.options.properties.attribute + \"@from\",\r\n                        type: \"number\",\r\n                        typeSearch: \"range\",\r\n                        rangeQuery: \"from\"\r\n                    }\r\n                },\r\n                {\r\n                    properties: {\r\n                        xpath: self.options.properties.attribute + \"@to\",\r\n                        type: \"number\",\r\n                        typeSearch: \"range\",\r\n                        rangeQuery: \"to\"\r\n                    }\r\n                }\r\n            ];\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _bindContextMenuButtons: function () {\r\n            var self = this;\r\n            var options = self.options;\r\n\r\n            $.contextMenu.types.contextMenuButtons = function(item, opt, root) {\r\n                self.$menuContext = root.$menu;\r\n                var htmlButtons = '<div class=\"ui-bizagi-filter-buttons\">';\r\n                htmlButtons += '<button id=\"ui-bizagi-cancel-filter\" class=\"bz-wp-btn bz-wp-btn-link\" type=\"button\">' + options.getResource('workportal-general-button-label-cancel') + '</button>';\r\n                htmlButtons += '<button id=\"ui-bizagi-apply-filter\" class=\"bz-wp-btn bz-wp-btn-primary\" type=\"button\">' + options.getResource('workportal-general-button-label-apply') + '</button>';\r\n                htmlButtons += '<div>';\r\n\r\n                $(htmlButtons).appendTo(this).on('click', 'button', function() {\r\n                    if ($(this).text() == options.getResource('workportal-general-button-label-apply')) {\r\n                        self._setValue();\r\n                        self._addFilterToDisplayName();\r\n                        options.onApply(self.returnObject);\r\n                    }\r\n                    root.$menu.trigger('contextmenu:hide');// hide the menu\r\n                });\r\n            };\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _bindContextMenu: function () {\r\n            var self = this;\r\n            var options = self.options;\r\n            var $opener = $(self.element);\r\n            var id = '#' + $('.wgd-my-search-filter-pluggin', $opener).attr('id');\r\n\r\n            $opener.on('click', function(event) {\r\n                if($(event.target).hasClass(\"remove-filter\") && $(\".wgd-my-search-filter-pluggin .remove-filter\", self.element).is(\":visible\")){\r\n                    self._removeFilter();\r\n                }\r\n                else{\r\n                    $(id).contextMenu();\r\n                }\r\n            });\r\n\r\n            var paramsContextMenu = {\r\n                selector: id,\r\n                trigger: 'none',\r\n                items: {\r\n                    key: {\r\n                        name: options.getResource('workportal-my-search-remove-filter'),\r\n                        className: 'ui-bizagi-clear-filters',\r\n                        callback: function() {\r\n                            self._removeFilter();\r\n\r\n                            return true;// False -> To keep the context menu open\r\n                        }\r\n                    },\r\n                    min: {\r\n                        name: options.getResource('bz-rp-components-time-from-label'),\r\n                        type: 'text',\r\n                        className: 'ui-bizagi-number-filter-min'\r\n                    },\r\n                    max: {\r\n                        name: options.getResource('bz-rp-components-time-to-label'),\r\n                        type: 'text',\r\n                        className: 'ui-bizagi-number-filter-max'\r\n                    },\r\n                    notification: {\r\n                        name: options.getResource('workportal-my-search-limit-notification'),\r\n                        className: 'ui-bizagi-number-filter-notification'\r\n                    },\r\n                    buttons: {\r\n                        type: 'contextMenuButtons' // Self structure - see _bindContextMenuButtons\r\n                    }\r\n                },\r\n                events: {\r\n                    show: function() {\r\n                        return $.when(self.options.setData()).done(function (data) {\r\n                            var $input = $('<input type=\"text\">');\r\n                            self.options.data = (typeof data !== 'undefined') ? data : self.options.data;\r\n\r\n                            $input.val(self.options.data.min);\r\n                            $input.formatCurrency(self._getFormatOptions());\r\n                            $(\".ui-bizagi-number-filter-min span\", self.$menuContext).html(options.getResource('bz-rp-components-time-from-label') + \" (<span class='select-value'>\" +  $input.val() + \"</span>):\");\r\n\r\n                            $input.val(self.options.data.max);\r\n                            $input.formatCurrency(self._getFormatOptions());\r\n                            $(\".ui-bizagi-number-filter-max span\", self.$menuContext).html(options.getResource('bz-rp-components-time-to-label') + \" (<span class='select-value'>\" +  $input.val() + \"</span>):\");\r\n\r\n                            self._enableNotification(false);\r\n\r\n                            var $minValue = $('.ui-bizagi-number-filter-min .select-value', self.$menuContext);\r\n                            var $maxValue = $('.ui-bizagi-number-filter-max .select-value', self.$menuContext);\r\n                            $minValue.on('click', $.proxy(self._onClickMinValue, self));\r\n                            $maxValue.on('click', $.proxy(self._onClickMaxValue, self));\r\n\r\n                        });\r\n                    },\r\n                    hide: function() {\r\n                        self.removeHandlersValuesMinMax();\r\n                    }\r\n                }\r\n            };\r\n\r\n            if(self.options.showButtonClearFilter === true){\r\n                paramsContextMenu.items.key = undefined;\r\n            }\r\n\r\n            $opener.contextMenu(paramsContextMenu);\r\n\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _bindTooltip: function (){\r\n            var self = this;\r\n            $(self.element).tooltip({\r\n                items: \"#\" + $(\"div\", self.element).attr(\"id\"),\r\n                content: function () {\r\n                    return self.filterValue;\r\n                }\r\n            });\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _setDisplayValue: function (){\r\n            var self = this;\r\n            var min = (typeof(self.returnObject[0].value) === \"undefined\") ? \"\" : self.returnObject[0].value ;\r\n            var max = (typeof(self.returnObject[1].value) === \"undefined\") ? \"\" : self.returnObject[1].value ;\r\n\r\n            $('.ui-bizagi-number-filter-min input', self.$menuContext).val(min);\r\n            $('.ui-bizagi-number-filter-max input', self.$menuContext).val(max);\r\n            $('.ui-bizagi-number-filter-min input', self.$menuContext).formatCurrency(self._getFormatOptions());\r\n            $('.ui-bizagi-number-filter-max input', self.$menuContext).formatCurrency(self._getFormatOptions());\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _setFormatValue: function($input){\r\n            var self = this;\r\n\r\n            var value = self._getObjectValueByString($input.val());\r\n\r\n            if(value !== 0){\r\n                $input.val(value);\r\n                $input.formatCurrency(self._getFormatOptions());\r\n            }\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         * @param stringValue\r\n         * @return {*}\r\n         * @param asFloatType\r\n         */\r\n        _getObjectValueByString: function(stringValue, asFloatType){\r\n            var self = this;\r\n\r\n            var value = stringValue,\r\n                regexString = \"/[\" + self.numericFormat.symbol + self.numericFormat.digitGroupSymbol + \"]/g\",\r\n                regex = eval(regexString);\r\n\r\n            value = value.replace(regex, \"\");\r\n            if(asFloatType){\r\n                value = value.replace(\",\", \".\");\r\n                value = parseFloat(value);\r\n            }\r\n\r\n            return value;\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _addFilterToDisplayName: function () {\r\n            var self = this;\r\n            var minVal = $('.ui-bizagi-number-filter-min input', self.$menuContext).val();\r\n            var maxVal = $('.ui-bizagi-number-filter-max input', self.$menuContext).val();\r\n            var $displayNameControl = $('.wgd-my-search-filter-pluggin span', self.element);\r\n            var displayName = $displayNameControl.text().split(':');\r\n\r\n            self.filterValue =  minVal + ' ' + self.options.getResource('bz-rp-components-time-to-label') + ' ' + maxVal;\r\n            $displayNameControl.text(displayName[0] + ': ' + self.filterValue);\r\n\r\n            $(\".wgd-my-search-filter-pluggin .remove-filter\", self.element).show();\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _setDisplayNameToDefault: function () {\r\n            var self = this;\r\n            var $displayNameControl = $('.wgd-my-search-filter-pluggin span', self.element);\r\n            var displayName = $displayNameControl.text().split(':');\r\n\r\n            self.filterValue = \"\";\r\n            $displayNameControl.text(displayName[0]);\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _setValue: function () {\r\n            var self = this;\r\n            var minVal = self._getObjectValueByString($(\".ui-bizagi-number-filter-min input\", self.$menuContext).val(), true);\r\n            var maxVal = self._getObjectValueByString($(\".ui-bizagi-number-filter-max input\", self.$menuContext).val(), true);\r\n\r\n            self.returnObject[0].value = (minVal === '') ? maxVal : minVal;\r\n            self.returnObject[1].value = (maxVal === '') ? minVal : maxVal;\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _resetValue: function () {\r\n            var self = this;\r\n\r\n            self._setReturnObject();\r\n            $('.ui-bizagi-number-filter-min input', self.$menuContext).val('');\r\n            $('.ui-bizagi-number-filter-max input', self.$menuContext).val('');\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _bindHandlers: function (){\r\n            var self = this;\r\n            var options = self.options;\r\n            var $minControl = $('.ui-bizagi-number-filter-min input', self.$menuContext);\r\n            var $maxControl = $('.ui-bizagi-number-filter-max input', self.$menuContext);\r\n\r\n\r\n            $minControl.keyup(function() {\r\n                if ($(this).val()) {\r\n                    var maxVal = self._getObjectValueByString($(\".ui-bizagi-number-filter-max input\", self.$menuContext).val(), true);\r\n                    var minVal = self._getObjectValueByString($(this).val(), true);\r\n                    var isLowerLimitInvalid = isNaN(minVal) ? true : minVal < parseFloat(options.data.min);\r\n                    var isUpperLimitInvalid = isNaN(maxVal) ? true : maxVal > parseFloat(options.data.max);\r\n                    var isRangeInvalid = minVal > maxVal;\r\n\r\n                    self._checkNotification(isLowerLimitInvalid, isUpperLimitInvalid, isRangeInvalid);\r\n                    self._setFormatValue($(this));\r\n                }\r\n            });\r\n\r\n            $maxControl.keyup(function() {\r\n                if ($(this).val()) {\r\n                    var maxVal = self._getObjectValueByString($(this).val(), true);\r\n                    var minVal = self._getObjectValueByString($(\".ui-bizagi-number-filter-min input\", self.$menuContext).val(), true);\r\n                    var isLowerLimitInvalid = isNaN(minVal) ? true : minVal < parseFloat(options.data.min);\r\n                    var isUpperLimitInvalid = isNaN(maxVal) ? true : maxVal > parseFloat(options.data.max);\r\n                    var isRangeInvalid = minVal > maxVal;\r\n\r\n                    self._checkNotification(isLowerLimitInvalid, isUpperLimitInvalid, isRangeInvalid);\r\n                    self._setFormatValue($(this));\r\n                }\r\n            });\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         * @param event\r\n         */\r\n        _onClickMinValue: function(event){\r\n            var self = this;\r\n            var $minControl = $('.ui-bizagi-number-filter-min input', self.$menuContext);\r\n            $minControl.val($(event.target).text());\r\n            $minControl.keyup();\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @param event\r\n         * @private\r\n         */\r\n        _onClickMaxValue: function(event){\r\n            var self = this;\r\n            var $maxControl = $('.ui-bizagi-number-filter-max input', self.$menuContext);\r\n            $maxControl.val($(event.target).text());\r\n            $maxControl.keyup();\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @param isLowerLimitInvalid\r\n         * @param isUpperLimitInvalid\r\n         * @param isRangeInvalid\r\n         * @private\r\n         */\r\n        _checkNotification: function (isLowerLimitInvalid, isUpperLimitInvalid, isRangeInvalid) {\r\n            var self = this;\r\n            var options = self.options;\r\n\r\n            if ((isRangeInvalid || isLowerLimitInvalid || isUpperLimitInvalid)){\r\n                var notification = options.getResource('workportal-my-search-limit-notification');\r\n                if (isLowerLimitInvalid) {\r\n                    notification = options.getResource('workportal-my-search-lower-limit-notification');\r\n                }\r\n                else if(isUpperLimitInvalid) {\r\n                    notification = options.getResource('workportal-my-search-upper-limit-notification');\r\n                }\r\n                else if (isRangeInvalid) {\r\n                    notification = options.getResource('workportal-my-search-max-min-notification');\r\n                }\r\n                self._enableNotification(true, notification);\r\n            }\r\n            else{\r\n                self._disableNotification();\r\n            }\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @param showLabel\r\n         * @param notification\r\n         * @private\r\n         */\r\n        _enableNotification: function (showLabel, notification) {\r\n            var self = this;\r\n\r\n            if(showLabel){\r\n                $(\".ui-bizagi-number-filter-notification span\", self.$menuContext).text(notification);\r\n                $(\".ui-bizagi-number-filter-notification\", self.$menuContext).show();\r\n            }\r\n            else{\r\n                $(\".ui-bizagi-number-filter-notification\", self.$menuContext).hide();\r\n            }\r\n            $(\"#ui-bizagi-apply-filter\", self.$menuContext).attr(\"disabled\", \"disabled\");\r\n            $(\"#ui-bizagi-apply-filter\", self.$menuContext).addClass(\"ui-state-disabled\");\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _disableNotification: function () {\r\n            var self = this;\r\n\r\n            $(\".ui-bizagi-number-filter-notification\", self.$menuContext).hide();\r\n            $(\"#ui-bizagi-apply-filter\", self.$menuContext).removeAttr(\"disabled\");\r\n            $(\"#ui-bizagi-apply-filter\", self.$menuContext).removeClass(\"ui-state-disabled\");\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @returns {{symbol: string, roundToDecimalPlace: number, eventOnDecimalsEntered: boolean}}\r\n         * @private\r\n         */\r\n        _getFormatOptions: function (){\r\n            var self = this;\r\n            return formatOptions = {\r\n                symbol: '',\r\n                roundToDecimalPlace: -1,\r\n                eventOnDecimalsEntered: true,\r\n                digitGroupSymbol: self.numericFormat.digitGroupSymbol,\r\n                decimalSymbol: self.numericFormat.decimalSymbol\r\n            };\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _removeFilter: function (){\r\n            var self = this;\r\n            self._resetValue();\r\n            self._enableNotification(false);\r\n            self._setDisplayNameToDefault();\r\n            self.options.onClear([self.returnObject[0].properties.xpath, self.returnObject[1].properties.xpath]);\r\n            $(\".wgd-my-search-filter-pluggin .remove-filter\", self.element).hide();\r\n        },\r\n\r\n\r\n        /**\r\n         *\r\n         * @param data\r\n         */\r\n        setData: function(data){\r\n            var self = this;\r\n\r\n            self.options.data = (Object.getOwnPropertyNames(data).length === 0) ? self.options.data : data;\r\n        },\r\n\r\n\r\n        /**\r\n         * Remove min and max handlers\r\n         */\r\n        removeHandlersValuesMinMax: function(){\r\n            var self = this;\r\n            var $minValue = $('.ui-bizagi-number-filter-min .select-value', self.$menuContext);\r\n            var $maxValue = $('.ui-bizagi-number-filter-max .select-value', self.$menuContext);\r\n            $minValue.off('click', $.proxy(self._onClickMinValue, self));\r\n            $maxValue.off('click', $.proxy(self._onClickMaxValue, self));\r\n        },\r\n\r\n        destroy: function() {\r\n            var self = this;\r\n            self.removeHandlersValuesMinMax();\r\n            $(this.element).contextMenu(\"destroy\");\r\n            $.Widget.prototype.destroy.call(this);\r\n        }\r\n    });\r\n})(jQuery);","/*\r\n Document   : bizagi.filterDate\r\n Created on : May 21, 2015, 8:24:00 AM\r\n Author     : Andres Felipe Arenas Vargas\r\n Description: This script will define a base class to handle the filter of a date control\r\n */\r\n(function($) {\r\n\r\n    $.widget('filter.bizagi_dateFilter', {\r\n        options: {\r\n            showButtonClearFilter: false,\r\n            properties: {},\r\n            onApply: function (data) {},\r\n            onClear: function (xpaths) {},\r\n            setData: function (){}\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _create: function() {\r\n            var self = this;\r\n\r\n            self._addButtonClearFilter();\r\n            self._setReturnObject();\r\n            self._bindContextMenuButtons();\r\n            self._bindContextMenu();\r\n            self._bindTooltip();\r\n            self._bindHandlers();\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _addButtonClearFilter: function () {\r\n            var self = this;\r\n            if(self.options.showButtonClearFilter){\r\n                var btnRemoveFilter = \"<i class='bz-icon bz-icon-10 bz-icon-close-outline bz-wp-btn-icon-hover-effect remove-filter' title='\" +\r\n                    bizagi.localization.getResource(\"workportal-my-search-remove-filter\") + \"' style='display:none;'></i>\";\r\n                $(\".wgd-my-search-filter-pluggin\", self.element).append(btnRemoveFilter);\r\n            }\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _setReturnObject: function () {\r\n            var self = this;\r\n            var attribute = self.options.properties.attribute;\r\n\r\n            self.returnObject = [\r\n                {\r\n                    properties: {\r\n                        xpath: attribute + '@from',\r\n                        type: 'date',\r\n                        typeSearch: 'range',\r\n                        rangeQuery: 'from'\r\n                    }\r\n                },\r\n                {\r\n                    properties: {\r\n                        xpath: attribute + '@to',\r\n                        type: 'date',\r\n                        typeSearch: 'range',\r\n                        rangeQuery: 'to'\r\n                    }\r\n                }\r\n            ];\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _bindContextMenuButtons: function () {\r\n            var self = this;\r\n            var options = self.options;\r\n\r\n            $.contextMenu.types.contextMenuButtons = function(item, opt, root) {\r\n                self.$menuContext = root.$menu;\r\n                var htmlButtons = '<div class=\"ui-bizagi-filter-buttons\">';\r\n                htmlButtons += '<button id=\"ui-bizagi-cancel-filter\" class=\"bz-wp-btn bz-wp-btn-link\" type=\"button\">' + options.getResource('workportal-general-button-label-cancel') + '</button>';\r\n                htmlButtons += '<button id=\"ui-bizagi-apply-filter\" class=\"bz-wp-btn bz-wp-btn-primary\" type=\"button\">' + options.getResource('workportal-general-button-label-apply') + '</button>';\r\n                htmlButtons += '<div>';\r\n\r\n                $(htmlButtons).appendTo(this).on('click', 'button', function() {\r\n                    if($(this).text() == options.getResource('workportal-general-button-label-apply')){\r\n                        self._setValuesOfReturnObject();\r\n                        self._setDisplayTitle(false);\r\n                        options.onApply(self.returnObject, self.element);\r\n                    }\r\n                    root.$menu.trigger('contextmenu:hide');// hide the menu\r\n                });\r\n            };\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _bindContextMenu: function () {\r\n            var self = this;\r\n            var options = self.options;\r\n            var $opener = $(self.element);\r\n            var id = '#' + $('.wgd-my-search-filter-pluggin', $opener).attr('id');\r\n\r\n            $opener.on('click', function(event) {\r\n                if($(event.target).hasClass(\"remove-filter\") && $(\".wgd-my-search-filter-pluggin .remove-filter\", self.element).is(\":visible\")){\r\n                    self._removeFilter();\r\n                }\r\n                else{\r\n                    $(id).contextMenu();\r\n                }\r\n            });\r\n\r\n            var paramsContextMenu = {\r\n                selector: id,\r\n                trigger: 'none',\r\n                items: {\r\n                    key: {\r\n                        name: options.getResource('workportal-my-search-remove-filter'),\r\n                        className: 'ui-bizagi-clear-filters',\r\n                        callback: function() {\r\n                            self._removeFilter();\r\n\r\n                            return true;// False -> To keep the context menu open\r\n                        }\r\n                    },\r\n                    from: {\r\n                        name: options.getResource('bz-rp-components-time-from-label'),\r\n                        type: 'text',\r\n                        className: 'ui-bizagi-date-filter-from'\r\n                    },\r\n                    to: {\r\n                        name: options.getResource('bz-rp-components-time-to-label'),\r\n                        type: 'text',\r\n                        className: 'ui-bizagi-date-filter-to'\r\n                    },\r\n                    buttons: {\r\n                        type: 'contextMenuButtons' // Self structure - see _bindContextMenuButtons\r\n                    }\r\n                },\r\n                events: {\r\n                    show: function() {\r\n                        self._disableApply();\r\n                        self._setDisplayLabels();\r\n                    },\r\n                    hide: function() {\r\n                        self._getFromControl().datepicker('hide');\r\n                        self._getToControl().datepicker('hide');\r\n                    }\r\n                }\r\n            };\r\n\r\n            if(self.options.showButtonClearFilter === true){\r\n                paramsContextMenu.items.key = undefined;\r\n            }\r\n\r\n            $opener.contextMenu(paramsContextMenu);\r\n\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _bindTooltip: function (){\r\n            var self = this;\r\n\r\n            $(self.element).tooltip({\r\n                items: \"#\" + $(\"div\", self.element).attr(\"id\"),\r\n                content: function () {\r\n                    return self.filterValue;\r\n                }\r\n            });\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _bindHandlers: function (){\r\n            var self = this;\r\n            var $minDate = self._getFromControl();\r\n            var $maxDate = self._getToControl();\r\n            var minDate = new Date(self._getDateFromInvariant(self.options.properties.data.min));\r\n            var maxDate = new Date(self._getDateFromInvariant(self.options.properties.data.max));\r\n            var dateFormat = bizagi.util.dateFormatter.getDateFormatByDatePickerJqueryUI().toLowerCase();\r\n\r\n            $minDate.datepicker({\r\n                defaultDate: minDate,\r\n                dateFormat: dateFormat,\r\n                changeMonth: true,\r\n                changeYear: true,\r\n                numberOfMonths: 1,\r\n                yearRange: '-100:+0',\r\n                minDate: minDate,\r\n                maxDate: maxDate,\r\n                onClose: function(selectedDate) {\r\n                    if(selectedDate) {\r\n                        $maxDate.datepicker('option', 'minDate', selectedDate);\r\n                        if($maxDate.datepicker(\"getDate\")){\r\n                            self._enableApply();\r\n                        }\r\n                    }\r\n                    else{\r\n                        self._disableApply();\r\n                    }\r\n                }\r\n            });\r\n            $maxDate.datepicker({\r\n                defaultDate: maxDate,\r\n                dateFormat: dateFormat,\r\n                changeMonth: true,\r\n                changeYear: true,\r\n                numberOfMonths: 1,\r\n                yearRange: '-100:+0',\r\n                minDate: minDate,\r\n                maxDate: maxDate,\r\n                onSelect: function(selectedDate) {\r\n                    if(selectedDate) {\r\n                        $minDate.datepicker('option', 'maxDate', selectedDate);\r\n                        if($minDate.datepicker(\"getDate\")){\r\n                            self._enableApply();\r\n                        }\r\n                    }\r\n                    else{\r\n                        self._disableApply();\r\n                    }\r\n                }\r\n            });\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _resetValues: function (){\r\n            var self = this;\r\n\r\n            self._getFromControl().datepicker(\"setDate\", null);\r\n            self._getToControl().datepicker(\"setDate\", null);\r\n            self._setReturnObject();\r\n            self._disableApply();\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _setValuesOfReturnObject: function (){\r\n            var self = this;\r\n            var minDate = self._getFromControl().datepicker(\"getDate\"); //returns null when there is no date\r\n            var maxDate = self._getToControl().datepicker(\"getDate\"); //returns null when there is no date\r\n            var dateFormatter = bizagi.util.dateFormatter;\r\n\r\n            self.returnObject[0].value = (minDate !== null) ? dateFormatter.formatInvariant(minDate, false) : dateFormatter.formatInvariant(maxDate, false);\r\n            self.returnObject[1].value = (maxDate !== null) ? dateFormatter.formatInvariant(maxDate, false) : dateFormatter.formatInvariant(minDate, false);\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @param toDefault\r\n         * @private\r\n         */\r\n        _setDisplayTitle: function (toDefault) {\r\n            var self = this;\r\n            var $displayTitleControl = $('.wgd-my-search-filter-pluggin span', self.element);\r\n            var displayTitle = $displayTitleControl.text().split(':');\r\n\r\n            if (toDefault) {\r\n                self.filterValue = \"\";\r\n                $displayTitleControl.text(displayTitle[0]);\r\n            }\r\n            else {\r\n                var options = self.options;\r\n                var minDateObj = self._getDateFromInvariant(self.returnObject[0].value);\r\n                var maxDateObj = self._getDateFromInvariant(self.returnObject[1].value);\r\n\r\n                self.filterValue =\r\n                    self._formatDate(minDateObj, options.getResource(\"dateFormat\")) + ' ' +\r\n                    options.getResource('bz-rp-components-time-to-label') + ' ' +\r\n                    self._formatDate(maxDateObj, options.getResource(\"dateFormat\"));\r\n                $displayTitleControl.text(displayTitle[0] + ': ' + self.filterValue);\r\n            }\r\n\r\n            $(\".wgd-my-search-filter-pluggin .remove-filter\", self.element).show();\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _setDisplayLabels: function (){\r\n            var self = this;\r\n            var options = self.options;\r\n            var minDateObj = self._getDateFromInvariant(self.options.properties.data.min);\r\n            var maxDateObj = self._getDateFromInvariant(self.options.properties.data.max);\r\n\r\n            $('.ui-bizagi-date-filter-from span', self.$menuContext).text(\r\n                options.getResource('bz-rp-components-time-from-label') + ' (' + self._formatDate(minDateObj, options.getResource(\"dateFormat\")) + '):'\r\n            );\r\n            $('.ui-bizagi-date-filter-to span',  self.$menuContext).text(\r\n                options.getResource('bz-rp-components-time-to-label') + ' (' + self._formatDate(maxDateObj, options.getResource(\"dateFormat\")) + '):'\r\n            );\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _enableApply: function () {\r\n            var self = this;\r\n            var $applyControl = $('#ui-bizagi-apply-filter', self.$menuContext);\r\n\r\n            $applyControl.removeAttr('disabled');\r\n            $applyControl.removeClass('ui-state-disabled');\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _disableApply: function () {\r\n            var self = this;\r\n            var $applyControl = $('#ui-bizagi-apply-filter', self.$menuContext);\r\n\r\n            $applyControl.attr('disabled', 'disabled');\r\n            $applyControl.addClass('ui-state-disabled');\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @param dateObj\r\n         * @param dateFormat\r\n         * @private\r\n         */\r\n        _formatDate: function (dateObj, dateFormat) {\r\n            return bizagi.util.dateFormatter.formatDate(dateObj, dateFormat);\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @returns {*|HTMLElement}\r\n         * @private\r\n         */\r\n        _getFromControl: function () {\r\n            var self = this;\r\n            return $('.ui-bizagi-date-filter-from input', self.$menuContext);\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @returns {*|HTMLElement}\r\n         * @private\r\n         */\r\n        _getToControl: function () {\r\n            var self = this;\r\n            return $('.ui-bizagi-date-filter-to input', self.$menuContext);\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @param date\r\n         * @param date\r\n         * @private\r\n         */\r\n        _getDateFromInvariant: function (date) {\r\n            return bizagi.util.dateFormatter.getDateFromInvariant(date);\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _removeFilter: function (){\r\n            var self = this;\r\n            self.options.onClear([self.returnObject[0].properties.xpath, self.returnObject[1].properties.xpath]);\r\n            self._setDisplayTitle(true);\r\n            self._resetValues();\r\n\r\n            $(\".wgd-my-search-filter-pluggin .remove-filter\", self.element).hide();\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @param data\r\n         */\r\n        setData: function(data){\r\n            var self = this;\r\n            self.options.properties.data = (Object.getOwnPropertyNames(data).length === 0) ? self.options.properties.data : data;\r\n\r\n            var $minDate = self._getFromControl();\r\n            var $maxDate = self._getToControl();\r\n            var minDate = new Date(self._getDateFromInvariant(self.options.properties.data.min));\r\n            var maxDate = new Date(self._getDateFromInvariant(self.options.properties.data.max));\r\n\r\n            $minDate.datepicker('option', 'minDate', minDate);\r\n            $minDate.datepicker('option', 'maxDate', maxDate);\r\n            $maxDate.datepicker('option', 'minDate', minDate);\r\n            $maxDate.datepicker('option', 'maxDate', maxDate);\r\n        },\r\n\r\n        /**\r\n         *\r\n         */\r\n        destroy: function() {\r\n            $(this.element).contextMenu(\"destroy\");\r\n            $.Widget.prototype.destroy.call(this);\r\n        }\r\n    });\r\n})(jQuery);","/*\r\n Document   : bizagi.filterMoney\r\n Created on : May 21, 2015, 8:24:00 AM\r\n Author     : Andrs Felipe Arenas Vargas\r\n Description: This script will define a base class to handle the filter of a money control\r\n */\r\n(function($) {\r\n\r\n    $.widget('filter.bizagi_textFilter', {\r\n        options: {\r\n            showButtonClearFilter: false,\r\n            properties: {},\r\n            onApply: function (data) {},\r\n            onClear: function (xpath) {}\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _create: function() {\r\n            var self = this;\r\n\r\n            self._addButtonClearFilter();\r\n            self._setReturnObject();\r\n            self._bindContextMenuButtons();\r\n            self._bindContextMenu();\r\n            self._bindHandlers();\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _addButtonClearFilter: function () {\r\n            var self = this;\r\n            if(self.options.showButtonClearFilter){\r\n                var btnRemoveFilter = \"<i class='bz-icon bz-icon-10 bz-icon-close-outline bz-wp-btn-icon-hover-effect remove-filter' title='\" +\r\n                    bizagi.localization.getResource(\"workportal-my-search-remove-filter\") + \"' style='display:none;'></i>\";\r\n                $(\".wgd-my-search-filter-pluggin\", self.element).append(btnRemoveFilter);\r\n            }\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _bindContextMenuButtons: function () {\r\n            var self = this;\r\n            var options = self.options;\r\n\r\n            $.contextMenu.types.contextMenuButtons = function(item, opt, root) {\r\n                self.$menuContext = root.$menu;\r\n\r\n                var htmlButtons = '<div class=\"ui-bizagi-filter-buttons\">';\r\n                htmlButtons += '<button id=\"ui-bizagi-cancel-filter\" class=\"bz-wp-btn bz-wp-btn-link\" type=\"button\">' + options.getResource('workportal-general-button-label-cancel') + '</button>';\r\n                htmlButtons += '<button id=\"ui-bizagi-apply-filter\" class=\"bz-wp-btn bz-wp-btn-primary\" type=\"button\">' + options.getResource('workportal-general-button-label-apply') + '</button>';\r\n                htmlButtons += '<div>';\r\n\r\n                $(htmlButtons).appendTo(this).on('click', 'button', function() {\r\n                    if($(this).text() == options.getResource('workportal-general-button-label-apply')){\r\n                        self._setValue();\r\n                        self._setFilterToDisplayName();\r\n                        options.onApply(self.returnObject, self.element);\r\n                    }\r\n                    root.$menu.trigger('contextmenu:hide');// hide the menu\r\n                });\r\n            };\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _bindContextMenu: function () {\r\n            var self = this;\r\n            var options = self.options;\r\n            var $opener = $('.wgd-my-search-filter-pluggin', self.element);\r\n            var id = '#' + $opener.attr('id');\r\n\r\n            $opener.on('click', function(event) {\r\n                if($(event.target).hasClass(\"remove-filter\") && $(\".wgd-my-search-filter-pluggin .remove-filter\", self.element).is(\":visible\")){\r\n                    self._removeFilter();\r\n                }\r\n                else{\r\n                    $(id).contextMenu();\r\n                }\r\n            });\r\n\r\n            var paramsContextMenu = {\r\n                selector: id,\r\n                trigger: 'none',\r\n                items: {\r\n                    key: {name: options.getResource('workportal-my-search-remove-filter'), className: 'ui-bizagi-clear-filters',\r\n                        callback: function() {\r\n                            self._removeFilter();\r\n\r\n                            return true;// False -> To keep the context menu open\r\n                        }\r\n                    },\r\n                    min: {name: options.getResource('workportal-my-search-text'), type: 'text', className: 'ui-bizagi-text-filter'},\r\n                    buttons: {type: 'contextMenuButtons'}\r\n                },\r\n                events: {\r\n                    show: function() {\r\n                        self._disableApply();\r\n                    },\r\n                    hide: function() {\r\n                    }\r\n                }\r\n            };\r\n\r\n            if(self.options.showButtonClearFilter === true){\r\n                paramsContextMenu.items.key = undefined;\r\n            }\r\n\r\n            $(self.element).contextMenu(paramsContextMenu);\r\n\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @returns {*|HTMLElement}\r\n         * @private\r\n         */\r\n        _getTextControl: function () {\r\n            var self = this;\r\n\r\n            return $('.ui-bizagi-text-filter input', self.$menuContext);\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _bindHandlers: function (){\r\n            var self = this;\r\n\r\n            self._getTextControl().keyup( function () {\r\n                if($(this).val() && $(this).val().indexOf(' ') != 0)\r\n                    self._enableApply();\r\n                else\r\n                    self._disableApply();\r\n            });\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _setReturnObject: function () {\r\n            var self = this;\r\n            self.returnObject = {\r\n                'properties': {\r\n                    'xpath': self.options.properties.attribute,\r\n                    'type': 'text',\r\n                    'typeSearch': 'approx'\r\n                }\r\n            };\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _resetValue: function (){\r\n            var self = this;\r\n\r\n            self._setReturnObject();\r\n            self._disableApply();\r\n            self._getTextControl().val('');\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _setValue: function (){\r\n            var self = this;\r\n            var textValue = self._getTextControl().val();\r\n\r\n            if (textValue){\r\n                self.returnObject.value = textValue;\r\n            }\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _enableApply: function () {\r\n            var self = this;\r\n            var $applyControl = $('#ui-bizagi-apply-filter', self.$menuContext);\r\n\r\n            $applyControl.removeAttr('disabled');\r\n            $applyControl.removeClass('ui-state-disabled');\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _disableApply: function () {\r\n            var self = this;\r\n            var $applyControl = $('#ui-bizagi-apply-filter', self.$menuContext);\r\n\r\n            $applyControl.attr('disabled', 'disabled');\r\n            $applyControl.addClass('ui-state-disabled');\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _setFilterToDisplayName: function () {\r\n            var self = this;\r\n            var $displayNameControl = $('.wgd-my-search-filter-pluggin span', self.element);\r\n            var displayName = $displayNameControl.text().split(':');\r\n\r\n            $displayNameControl.text(displayName[0] + ': ' + self.returnObject.value);\r\n\r\n            $(\".wgd-my-search-filter-pluggin .remove-filter\", self.element).show();\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _setDisplayNameToDefault: function () {\r\n            var self = this;\r\n            var $displayNameControl = $('.wgd-my-search-filter-pluggin span', self.element);\r\n            var displayName = $displayNameControl.text().split(':');\r\n\r\n            $displayNameControl.text(displayName[0]);\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _removeFilter: function (){\r\n            var self = this;\r\n            self._resetValue();\r\n            var xpaths = [self.returnObject.properties.xpath];\r\n            self._setDisplayNameToDefault();\r\n            self.options.onClear(xpaths);\r\n            $(\".wgd-my-search-filter-pluggin .remove-filter\", self.element).hide();\r\n        },\r\n\r\n\r\n        /**\r\n         *\r\n         * @param data\r\n         */\r\n        setData: function(data){\r\n            console.log(data);\r\n        },\r\n\r\n        /**\r\n         *\r\n         */\r\n        destroy: function () {\r\n            $(this.element).contextMenu( 'destroy' );\r\n            $.Widget.prototype.destroy.call(this);\r\n        }\r\n    });\r\n})(jQuery);","/**\r\n * Filter multiple plugin creates a tooltip control to show related entity information and select multiple values\r\n *\r\n * @author Andrs Fernando Muoz\r\n */\r\n(function($) {\r\n\r\n    $.widget('filter.bizagi_multipleFilter', {\r\n        options: {\r\n            showButtonClearFilter: false,\r\n            properties: {},\r\n            onApply: function (data) {},\r\n            onClear: function (xpath) {},\r\n            setData: function (){}\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _create: function() {\r\n            var self = this;\r\n            self.isDefaultFilter = false;\r\n\r\n            self._addButtonClearFilter();\r\n            self._setReturnObject();\r\n            self._bindContextMenuButtons();\r\n            self._bindContextMenu();\r\n            self._bindTooltip();\r\n            self._bindDefaultFilter();\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _bindDefaultFilter: function () {\r\n            var self = this;\r\n            var data = self.options.data || [];\r\n            var filtersText = ': ';\r\n            var a, i = -1;\r\n\r\n            while (a = data.defaultValues[++i]) {\r\n                if (a.applied) {\r\n                    self.isDefaultFilter = true;\r\n                    self.returnObject.value.push({\"id\": a.id});\r\n                    filtersText += a.displayName;\r\n                }\r\n            }\r\n\r\n            if (self.isDefaultFilter) {\r\n                var $displayNameControl = $('.wgd-my-search-filter-pluggin span', self.element);\r\n                var displayText = $displayNameControl.text().split(':');\r\n\r\n                $displayNameControl.text(displayText[0] + filtersText);\r\n            }\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _addButtonClearFilter: function () {\r\n            var self = this;\r\n            if(self.options.showButtonClearFilter){\r\n                var btnRemoveFilter = \"<i class='bz-icon bz-icon-10 bz-icon-close-outline bz-wp-btn-icon-hover-effect remove-filter' title='\" +\r\n                    bizagi.localization.getResource(\"workportal-my-search-remove-filter\") + \"' style='display:none;'></i>\";\r\n                $(\".wgd-my-search-filter-pluggin\", self.element).append(btnRemoveFilter);\r\n            }\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _setReturnObject: function () {\r\n            var self = this;\r\n            self.returnObject = {\r\n                properties: {\r\n                    xpath: self.options.properties.attribute,\r\n                    type: \"entity\",\r\n                    typeSearch: \"exact\"\r\n                },\r\n                value: []\r\n            };\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _bindContextMenuButtons: function () {\r\n            var self = this;\r\n            var options = self.options;\r\n\r\n            $.contextMenu.types.container = function (item, opt, root) {\r\n                $('<div id=\"'+item.id+'\" class=\"menu-container\"></div>').appendTo(this);\r\n            };\r\n\r\n            $.contextMenu.types.contextMenuButtons = function(item, opt, root) {\r\n                self.$menuContext = root.$menu;\r\n                var htmlButtons = '<div class=\"ui-bizagi-filter-buttons\">';\r\n                htmlButtons += '<button id=\"ui-bizagi-cancel-filter\" class=\"bz-wp-btn bz-wp-btn-link type=\"button\">' + options.getResource('workportal-general-button-label-cancel') + '</button>';\r\n                htmlButtons += '<button id=\"ui-bizagi-apply-filter\" class=\"bz-wp-btn bz-wp-btn-primary\" type=\"button\" disabled>' + options.getResource('workportal-general-button-label-apply') + '</button>';\r\n                htmlButtons += '<div>';\r\n\r\n                $(htmlButtons).appendTo(this).on('click', 'button', function() {\r\n                    if ($(this).text() == options.getResource('workportal-general-button-label-apply')) {\r\n                        self._addFilterToDisplayName();\r\n                        options.onApply([self.returnObject]);\r\n                    }\r\n                    root.$menu.trigger('contextmenu:hide');// hide the menu\r\n                });\r\n            };\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @returns {{}}\r\n         * @private\r\n         */\r\n        _buildContextMenuItems: function () {\r\n            var self = this;\r\n            var options = self.options;\r\n            var items = {};\r\n\r\n            if(self.options.showButtonClearFilter !== true) {\r\n                items[\"key\"] = {\r\n                    name: options.getResource(\"workportal-my-search-remove-filter\"),\r\n                    className: \"ui-bizagi-clear-filters\",\r\n                    callback: function () {\r\n                        self._removeFilter();\r\n                        return true;// False -> To keep the context menu open\r\n                    }\r\n                };\r\n            }\r\n            items[\"container\"] = {\r\n                id: \"checks_container_\" + options.properties.attribute.replaceAll(\".\", \"_\"),\r\n                type: \"container\"\r\n            };\r\n            items[\"buttons\"] = {\r\n               type: \"contextMenuButtons\"\r\n            };\r\n\r\n            return items;\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _bindContextMenu: function () {\r\n            var self = this;\r\n            var options = self.options;\r\n            var $opener = $(self.element);\r\n            var id = \"#\" + $(\".wgd-my-search-filter-pluggin\", $opener).attr(\"id\");\r\n            var items = self._buildContextMenuItems();\r\n\r\n            $opener.click(function(event) {\r\n                if($(event.target).hasClass(\"remove-filter\") && $(\".wgd-my-search-filter-pluggin .remove-filter\", self.element).is(\":visible\")){\r\n                    self._removeFilter();\r\n                }\r\n                else{\r\n                    $(id).contextMenu();\r\n                }\r\n            });\r\n\r\n            $opener.contextMenu({\r\n                selector: id,\r\n                trigger: \"none\",\r\n                items: items,\r\n                events: {\r\n                    show: function() {\r\n                        var div = $(\"#checks_container_\" + options.properties.attribute.replaceAll(\".\", \"_\"), self.$menuContext);\r\n\r\n                        self._disableApply();\r\n                        div.empty();\r\n\r\n                        return $.when(options.setData()).done(function (data) {\r\n                            var data = typeof data !== 'undefined' ? data.defaultValues : options.data.defaultValues;\r\n                            var i = -1, a;\r\n\r\n                            while (a = data[++i]) {\r\n                                var id = self.returnObject.value.find(function (el) { return el.id == a.id; });\r\n                                var checked = (id || a.applied ? \"checked\" : \"\");\r\n                                if (a.id != '' && a.displayName != '' && (!self.isDefaultFilter || (self.isDefaultFilter && checked === \"checked\"))) {\r\n                                    var checkbox = \"<li>\";\r\n                                    checkbox += \"<input data-displayname='\" + a.displayName + \"' type='checkbox' value='\" + a.id + \"'\" + \" \" + checked + \">\";\r\n                                    checkbox += \"<span class='context-menu-item-label-check'>\" + a.displayName + \"</span>\";\r\n                                    checkbox += \"</li>\";\r\n\r\n                                    div.append(checkbox);\r\n                                }\r\n                            }\r\n                            self._bindHandlers();\r\n                        });\r\n                    },\r\n                    hide: function() {\r\n                    }\r\n                }\r\n            });\r\n\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _bindTooltip: function (){\r\n            var self = this;\r\n            self.filterValue = self.filterValue || [];\r\n\r\n            $(self.element).tooltip({\r\n                items: \"#\" + $(\"div\", self.element).attr(\"id\"),\r\n                content: function () {\r\n                    if(self.filterValue.length !== 0){\r\n                        var $container = $(\"<div>\");\r\n                        $.each(self.filterValue, function( index, value ) {\r\n                            $container.append($(\"<div><label>\" + value + \"</label></div>\"));\r\n                        });\r\n                        return $container;\r\n                    }\r\n                    else {\r\n                        return \"\";\r\n                    }\r\n                }\r\n            });\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _bindHandlers: function () {\r\n            var self = this;\r\n\r\n            $(\"input:checkbox\", self.$menuContext).on(\"click\", function (ev){\r\n                ev.stopImmediatePropagation(); //stopping jquery click event handler to be call twice for a checkbox\r\n                var $target = $(ev.target);\r\n                var id = $target.attr(\"value\");\r\n                var isChecked = $target.is(':checked');\r\n\r\n                if (isChecked) {\r\n                    self.returnObject.value.push({\"id\": id});\r\n                    self._enableApply();\r\n                }\r\n                else {\r\n                    var val = self.returnObject.value.find(function (el) {return el.id == id;});\r\n                    if (val) {\r\n                        self.returnObject.value.splice(self.returnObject.value.indexOf(val), 1);\r\n                    }\r\n                    if (self.returnObject.value.length === 0) {\r\n                        self._disableApply();\r\n                    }\r\n                    else {\r\n                        self._enableApply();\r\n                    }\r\n                }\r\n            });\r\n\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _resetValue: function (){\r\n            var self = this;\r\n            self.returnObject.value = [];\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _addFilterToDisplayName: function () {\r\n            var self = this;\r\n            var $displayNameControl = $(\".wgd-my-search-filter-pluggin span\", self.element);\r\n            var displayText = $displayNameControl.text().split(\":\");\r\n            var filtersText = displayText[0] + \": \";\r\n            var cont = self.returnObject.value.length;\r\n            self.filterValue = [];\r\n\r\n            $(\"input:checked\", self.$menuContext).each(function () {\r\n                cont--;\r\n                self.filterValue.push($(this).data(\"displayname\"));\r\n                filtersText = filtersText + $(this).data(\"displayname\") + (cont == 0 ? '' : \", \");\r\n            });\r\n\r\n            $displayNameControl.text(filtersText);\r\n\r\n            $(\".wgd-my-search-filter-pluggin .remove-filter\", self.element).show();\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _setDisplayNameToDefault: function () {\r\n            var self = this;\r\n            var $displayNameControl = $(\".wgd-my-search-filter-pluggin span\", self.element);\r\n            var displayName = $displayNameControl.text().split(\":\");\r\n\r\n            self.isDefaultFilter = false;\r\n            self.filterValue = [];\r\n            $displayNameControl.text(displayName[0]);\r\n        },\r\n\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _enableApply: function () {\r\n            var self = this;\r\n            var $applyControl = $(\"#ui-bizagi-apply-filter\", self.$menuContext);\r\n\r\n            $applyControl.removeAttr(\"disabled\");\r\n            $applyControl.removeClass(\"ui-state-disabled\");\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _disableApply: function () {\r\n            var self = this;\r\n            var $applyControl = $(\"#ui-bizagi-apply-filter\", self.$menuContext);\r\n\r\n            $applyControl.attr(\"disabled\", \"disabled\");\r\n            $applyControl.addClass(\"ui-state-disabled\");\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _removeFilter: function (){\r\n            var self = this;\r\n            self.options.onClear([self.returnObject.properties.xpath]);\r\n            self._setDisplayNameToDefault();\r\n            self._resetValue();\r\n            $(\".wgd-my-search-filter-pluggin .remove-filter\", self.element).hide();\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @param filterData\r\n         */\r\n        setData: function(data){\r\n            var self = this;\r\n\r\n            self.options.data = (Object.getOwnPropertyNames(data).length === 0) ? self.options.data : data;\r\n        },\r\n\r\n        /**\r\n         *\r\n         */\r\n        destroy: function() {\r\n            $(this.element).contextMenu(\"destroy\");\r\n            $.Widget.prototype.destroy.call(this);\r\n        }\r\n    });\r\n})(jQuery);","/**\r\n * Filter multiple plugin creates a tooltip control to show related entity information and select multiple values\r\n *\r\n * @author Andres Fernando Munoz\r\n */\r\n(function($) {\r\n\r\n    $.widget('filter.bizagi_booleanFilter', {\r\n        options: {\r\n            showButtonClearFilter: false,\r\n            properties: {},\r\n            onApply: function (data) {},\r\n            onClear: function (xpath) {},\r\n            setData: function (){}\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _create: function() {\r\n            var self = this;\r\n\r\n            self._addButtonClearFilter();\r\n            self._setReturnObject();\r\n            self._bindContextMenuButtons();\r\n            self._bindContextMenu();\r\n            self._bindTooltip();\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _addButtonClearFilter: function () {\r\n            var self = this;\r\n            if(self.options.showButtonClearFilter){\r\n                var btnRemoveFilter = \"<i class='bz-icon bz-icon-10 bz-icon-close-outline bz-wp-btn-icon-hover-effect remove-filter' title='\" +\r\n                    bizagi.localization.getResource(\"workportal-my-search-remove-filter\") + \"' style='display:none;'></i>\";\r\n                $(\".wgd-my-search-filter-pluggin\", self.element).append(btnRemoveFilter);\r\n            }\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _setReturnObject: function () {\r\n            var self = this;\r\n            self.returnObject =\r\n            {\r\n                properties: {\r\n                    xpath: self.options.properties.attribute,\r\n                    type: \"boolean\",\r\n                    typeSearch: \"exact\"\r\n                },\r\n                value: []\r\n            };\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _bindContextMenuButtons: function () {\r\n            var self = this;\r\n            var options = self.options;\r\n\r\n            $.contextMenu.types.container = function (item, opt, root) {\r\n                $('<div id=\"'+item.id+'\" class=\"menu-container\"></div>').appendTo(this);\r\n            };\r\n\r\n            $.contextMenu.types.contextMenuButtons = function(item, opt, root) {\r\n                self.$menuContext = root.$menu;\r\n                var htmlButtons = '<div class=\"ui-bizagi-filter-buttons\">';\r\n                htmlButtons += '<button id=\"ui-bizagi-cancel-filter\" class=\"bz-wp-btn bz-wp-btn-link type=\"button\">' + options.getResource('workportal-general-button-label-cancel') + '</button>';\r\n                htmlButtons += '<button id=\"ui-bizagi-apply-filter\" class=\"bz-wp-btn bz-wp-btn-primary\" type=\"button\" disabled>' + options.getResource('workportal-general-button-label-apply') + '</button>';\r\n                htmlButtons += '<div>';\r\n\r\n                $(htmlButtons).appendTo(this).on('click', 'button', function() {\r\n                    if ($(this).text() == options.getResource('workportal-general-button-label-apply')) {\r\n                        self._addFilterToDisplayName();\r\n                        options.onApply([self.returnObject], self.element);\r\n                    }\r\n                    root.$menu.trigger('contextmenu:hide');// hide the menu\r\n                });\r\n            };\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @returns {{}}\r\n         * @private\r\n         */\r\n        _buildContextMenuItems: function () {\r\n            var self = this;\r\n            var options = self.options;\r\n            var items = {};\r\n\r\n            if(self.options.showButtonClearFilter !== true){\r\n                items['key'] = {\r\n                    name: options.getResource('workportal-my-search-remove-filter'),\r\n                    className: 'ui-bizagi-clear-filters',\r\n                    callback: function() {\r\n                        self._removeFilter();\r\n                        return true;// False -> To keep the context menu open\r\n                    }};\r\n            }\r\n            items['container'] = {\r\n                'id': 'checks_container',\r\n                type: 'container'\r\n            };\r\n            items['buttons'] = {\r\n                type: \"contextMenuButtons\"\r\n            };\r\n\r\n            return items;\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _bindContextMenu: function () {\r\n            var self = this;\r\n            var $opener = $(self.element);\r\n            var id = '#' + $('.wgd-my-search-filter-pluggin', $opener).attr('id');\r\n            var items = self._buildContextMenuItems();\r\n\r\n            $opener.on('click', function(event) {\r\n                if($(event.target).hasClass(\"remove-filter\") && $(\".wgd-my-search-filter-pluggin .remove-filter\", self.element).is(\":visible\")){\r\n                    self._removeFilter();\r\n                }\r\n                else{\r\n                    $(id).contextMenu();\r\n                }\r\n            });\r\n\r\n            $opener.contextMenu({\r\n                selector: id,\r\n                trigger: 'none',\r\n                items: items,\r\n                events: {\r\n                    show: function() {\r\n                        self._disableApply();\r\n                        var div = $('#checks_container', self.$menuContext);\r\n                        div.empty();\r\n                        return $.when(self.options.setData()).done(function (data) {\r\n                            var data = typeof data !== 'undefined' ? data.defaultValues : self.options.data.defaultValues;\r\n                            var i = -1, a;\r\n\r\n                            while(a = data[++i]){\r\n                                var id = (self.returnObject.value === a.id);\r\n                                if(a.id != '' && a.displayName != '') {\r\n                                    div.append('<li><input data-displayname=\"' + a.displayName + '\" type=\"radio\" name=\"boolFilter\" value=\"' + a.id + '\" ' + (id ? 'checked' : '') + '><span class=\"context-menu-item-label-check\">' + self.parseBoolean(a.displayName) + '</span></li>');\r\n                                }\r\n                            }\r\n                            self._bindHandlers();\r\n                        });\r\n                    },\r\n                    hide: function() {\r\n                    }\r\n                }\r\n            });\r\n\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _bindTooltip: function (){\r\n            var self = this;\r\n            self.filterValue = self.filterValue || [];\r\n            $(self.element).tooltip({\r\n                items: \"#\" + $(\"div\", self.element).attr(\"id\"),\r\n                content: function () {\r\n                    if(self.filterValue.length !== 0){\r\n                        var $container = $(\"<div>\");\r\n                        $.each(self.filterValue, function( index, value ) {\r\n                            $container.append($('<div><label>' + self.parseBoolean(value) + '</label></div>'));\r\n                        });\r\n                        return $container;\r\n                    }\r\n                    else{\r\n                        return \"\";\r\n                    }\r\n                }\r\n            });\r\n        },\r\n\r\n        parseBoolean: function(value){\r\n            var valueToLocalize = bizagi.clone(value);\r\n\r\n            if(valueToLocalize === 0){\r\n                valueToLocalize = \"0\";\r\n            }\r\n            if(valueToLocalize === 1){\r\n                valueToLocalize = \"1\";\r\n            }\r\n\r\n            if(!valueToLocalize.toLowerCase){\r\n                valueToLocalize = valueToLocalize.toString();\r\n            }\r\n\r\n            switch(valueToLocalize.toLowerCase()){\r\n                case \"not specified\":\r\n                    valueToLocalize = bizagi.localization.getResource(\"workportal-general-value-undefined\");\r\n                    break;\r\n                default:\r\n                    valueToLocalize = bizagi.util.formatBoolean(valueToLocalize);\r\n                    break;\r\n            }\r\n            return valueToLocalize;\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _bindHandlers: function () {\r\n            var self = this;\r\n\r\n            $('input:radio', self.$menuContext).on('click', function (ev){\r\n                ev.stopImmediatePropagation(); //stopping jquery click event handler to be call twice for a checkbox\r\n                var $target = $(ev.target);\r\n\r\n                self.returnObject.value = $target.attr(\"value\");\r\n                self._enableApply();\r\n            });\r\n\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _resetValue: function (){\r\n            var self = this;\r\n            self.returnObject.value = [];\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _addFilterToDisplayName: function () {\r\n            var self = this;\r\n            var $displayNameControl = $('.wgd-my-search-filter-pluggin span', self.element);\r\n            var displayText = $displayNameControl.text().split(':');\r\n            var filtersText = displayText[0] + ': ';\r\n            self.filterValue = [];\r\n\r\n            $(\"input:checked\", self.$menuContext).each(function () {\r\n                self.filterValue.push($(this).data(\"displayname\"));\r\n                filtersText = filtersText + self.parseBoolean($(this).data('displayname'));\r\n            });\r\n\r\n            $displayNameControl.text(filtersText);\r\n\r\n            $(\".wgd-my-search-filter-pluggin .remove-filter\", self.element).show();\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _setDisplayNameToDefault: function () {\r\n            var self = this;\r\n            var $displayNameControl = $('.wgd-my-search-filter-pluggin span', self.element);\r\n            var displayName = $displayNameControl.text().split(':');\r\n\r\n            self.filterValue = [];\r\n            $displayNameControl.text(displayName[0]);\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _enableApply: function () {\r\n            var self = this;\r\n            var $applyControl = $('#ui-bizagi-apply-filter', self.$menuContext);\r\n\r\n            $applyControl.removeAttr('disabled');\r\n            $applyControl.removeClass('ui-state-disabled');\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _disableApply: function () {\r\n            var self = this;\r\n            var $applyControl = $('#ui-bizagi-apply-filter', self.$menuContext);\r\n\r\n            $applyControl.attr('disabled', 'disabled');\r\n            $applyControl.addClass('ui-state-disabled');\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         */\r\n        _removeFilter: function (){\r\n            var self = this;\r\n            var xpath = self.returnObject.properties.xpath;\r\n            self.options.onClear([xpath]);\r\n            self._setDisplayNameToDefault();\r\n            self._resetValue();\r\n\r\n            $(\".wgd-my-search-filter-pluggin .remove-filter\", self.element).hide();\r\n        },\r\n\r\n        /**\r\n         *\r\n         * @param data\r\n         */\r\n        setData: function(data){\r\n            var self = this;\r\n\r\n            self.options.data = (Object.getOwnPropertyNames(data).length === 0) ? self.options.data : data;\r\n        },\r\n\r\n        /**\r\n         *\r\n         */\r\n        destroy: function() {\r\n            $(this.element).contextMenu(\"destroy\");\r\n            $.Widget.prototype.destroy.call(this);\r\n        }\r\n    });\r\n})(jQuery);","/**\r\n*   Name: BizAgi Workportal Desktop Async Widget Controller\r\n*   Author: Edward Morales\r\n*   Comments:\r\n*   -   This script will define a asyncronous activities\r\n*/\r\n\r\n// Auto extend\r\nbizagi.workportal.widgets.async.extend(\"bizagi.workportal.widgets.async\", {}, {\r\n    init: function(workportalFacade, dataService, params) {\r\n        var self = this;\r\n\r\n        // Call base\r\n        self._super(workportalFacade, dataService, params);\r\n\r\n        //Load templates\r\n        self.loadTemplates({\r\n            \"async\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.async\"),\r\n            useNewEngine: false\r\n        });\r\n    },\r\n\r\n    /**\r\n    *   To be overriden in each device to apply layouts\r\n    */\r\n    postRender: function() {\r\n        var self = this;\r\n        var content = self.getContent();\r\n\r\n        // Bind inbox click link\r\n        $(\".ui-bizagi-wp-async-goToInbox a\", content).click(function() {\r\n            self.publish(\"changeWidget\", {\r\n                widgetName: bizagi.workportal.currentInboxView\r\n            });\r\n        });\r\n    }\r\n});\r\n"]}