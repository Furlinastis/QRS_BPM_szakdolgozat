{"version":3,"sources":["jquery/workportal/desktop/widget/project.dashboard.menu.activity/bizagi.workportal.desktop.widgets.project.dashboard.menu.activity.js","jquery/workportal/desktop/widget/project.content.dashboard/bizagi.workportal.desktop.widgets.project.content.dashboard.js","jquery/workportal/desktop/widget/project.plan/bizagi.workportal.desktop.widgets.project.plan.js","jquery/workportal/desktop/widget/project.overview/bizagi.workportal.desktop.widgets.project.overview.js","jquery/workportal/desktop/widget/project.caseState/bizagi.workportal.desktop.widgets.project.caseState.js","jquery/workportal/desktop/widget/project.activityState/bizagi.workportal.desktop.widgets.project.activityState.js","jquery/workportal/desktop/widget/project.processState/bizagi.workportal.desktop.widgets.project.processState.js","jquery/workportal/desktop/widget/project.users/bizagi.workportal.desktop.widgets.project.users.js","jquery/workportal/desktop/widget/project.subprocesses.data/bizagi.workportal.desktop.widgets.project.subprocesses.data.js","jquery/workportal/desktop/widget/project.events/bizagi.workportal.desktop.widgets.project.events.js","jquery/workportal/desktop/widget/project.subprocesses/bizagi.workportal.desktop.widgets.project.subprocesses.js","jquery/workportal/desktop/widget/project.activity.description/bizagi.workportal.project.activity.description.js"],"names":["bizagi","workportal","widgets","widget","extend","init","workportalFacade","dataService","params","self","this","_super","loadTemplates","project-dashboard-menu","getTemplate","concat","renderContent","content","$","postRender","contextsLeftSidebarCaseDashboard","forEach","context","sub","proxy","updateView","event","args","plan","idActivitySelected","undefined","clean","$content","getContent","empty","type","showContextByMenuDashboard","argsTemplate","showFormOverview","menuDashboard","showFormActivity","showCommentsOptionMenu","showFilesOptionMenu","showTimeLineOptionMenu","isAdhocProcess","util","isEnableFeature","showPlanOptionMenu","contextPlanOptionMenu","contextFormActivityOptionMenu","render","appendTo","toUpperCase","addClass","siblings","removeClass","handlerEvents","loadContentById","preventDefault","$item","target","closest","hasClass","data","getLevelNavigator","pub","currentLevelNavigator","parseInt","nameItemNavigator","newLevelNavigator","localization","getResource","refreshLastItemBreadcrumb","histName","level","subMenuHandler","$comments","$files","$timeline","on","toggle","options","action","actions","BIZAGI_WORKPORTAL_ACTION_ROUTING","idCase","idTask","idWorkflow","idWorkItem","idWorkitem","referrer","publish","unsub","off","injector","register","project","dashboard","menu","activity","project-content-dashboard","template","setTimeout","window","trigger","base","planCreate","project-plan","project-plan-popup","templateHomePlan","$contentWidget","form","buttonShowPopupPlanToAdd","onShowPopupPlan","contextualized","showPopupAddPlan","ev","paramsNewPlan","planChild","indexOf","servicesPlan","services","behaviors","planParent","getPlanAsParent","clone","project-overview","project-overview-no-summary-form-found","contentWidget","canvas","bind","e","isPropagationStopped","stopPropagation","oldrenderevent","eventMethod","addEventListener","eventer","when","getWorkitems","onlyUserWorkItems","done","workItems","length","url","serviceLocator","getUrl","tmpl","iframeOldRender","getCaseFormsRenderVersion","formsVersion","formsRenderVersion","renderSummaryForm","container","proxyPrefix","rendering","facade","execute","summaryForm","subscribe","append","renderingFacade","resizeLayout","iframe","queryString","readQueryString","each","is","load","contents","cssLocation","browser","mozilla","webkit","replace","overview","contextsSidebarActivity","datePickerRegional","project-caseState","project-caseState-remaining","isFavoriteCase","isFavorite","JSON","parse","showCaseNumber","creationDate","INVARIANT_FORMAT","creationDateObject","dateFormatter","getDateFromFormat","creationDateFormat","getFormattedDate","solutionDateObject","solutionDate","solutionDateFormat","currentDate","Date","calculateDataForTemplate","showGraphicQuery","idCaseForGraphicQuery","idWorkFlow","isAdhoc","idProcess","idAdhocProcess","showHelpUrl","helpUrl","paramsEffectiveDuration","idUser","currentUser","parseBoolean","isOpen","fromDate","getTime","toDate","differenceCreationToCurrent","relativeTime","getRelativeTime","now","relativeTimeState","colorStateCase","percentCompleteBar","contentTemplate","validateUrlWellFormed","security","menuSecurity","urlHelp","isEmpty","onClickFavorite","goToCase","showBackNextNavigation","dateObj","monthsNames","monthNames","shortMonth","getMonth","bizagiLanguage","BIZAGI_LANGUAGE","substring","datepicker","formatDate","favoriteOptions","idObject","favoriteType","addFavorite","favoritesData","guidFavorite","idFavorites","delFavorite","open","callGetEffectiveDuration","d","Deferred","getEffectiveDuration","resolve","promise","cntxtSidebarActivity","getBackCase","getNextCase","getListKey","lstIdCases","i","key","nextCase","backCase","hide","show","caseState","project-activityState-wrapper","currentState","currentWorkitem","filter","objectWorkItem","activityName","state","activityIsEvent","isEvent","initDateObject","entryDateWorkItem","initDateFormat","estimatedSolutionDateObject","estimatedSolutionDate","estimatedSolutionDateFormat","updateTemplateWidget","initilizeActionMenu","allowsReassign","j","btReassing","btShareActivity","onClickMenuReasign","onClickShareActivity","onCloseSaveDialogBox","loader","startAndThen","then","widgetName","BIZAGI_WORKPORTAL_WIDGET_REASSIGN_CASE","closeDialogWidget","closeVisible","maximize","modalParameters","title","width","id","button","attr","getShareActivity","notifier","parent","get","value","unbind","showSucessMessage","showErrorMessage","always","diffMillisecondsCurrentToEstimated","diffMillisecondsCreationToSolution","paramsEffectiveDurationOpened","currentDateExceededEstimatedDate","paramsEffectiveDurationInitialToEstimated","differenceCreatedToCurrent","differenceCurrentToEstimated","differenceInitialToEstimated","colorState","showEstimatedSolutionDate","percentBar","getPercentBar","percent","canShareActivity","isShared","totalMinutes","sectionMinutes","response","Math","round","override","enableShareActivity","shareActivityTooltip","activityButton","texto","tooltip","tooltipClass","position","my","at","of","collision","activityState","project-process-state","displayName","onClickGoToParentCase","routingExecute","processState","relatedusers","plugins","users","loadedUsers","project-users","onRenderFinish","showCreatorInformation","typesAssignUser","createdBy","userId","typeName","userIds","height","getUsersData","user","userInfo","usersAdapter","createJsonUserInfo","name","username","picture","email","getInitials","find","userinformation","responseSubprocessState","responseSubprocess","newValue","auxArrayListSubprocessesState","auxArrayListSubprocesses","newItem","jQuery","isArray","push","Class","project-subprocesses-tootip-custom-properties","initializeTooltip","selectorTooltip","indexSubprocess","idCustData","text","val","itemsFinded","item","getContentTooltip","ui","$id","not","remove","close","hover","stop","fadeTo","fadeOut","textLI","templateTooltip","rowCustomProperty","nameProperty","valueProperty","arrayCustomsProperties","auxValueProperty","subprocessData","getSubprocessData","custData","custDataTypes","custFields","formatMonetaryCell","formatBoolean","formatDecimalCell","objectTemplate","nameSubprocess","contentTableCustomProperties","html","subProcessData","subProcess","subProcesses","subProcPersonalized","customFields","CustFields","Object","keys","subprocesses","project-events","getArgsTemplate","responseArgsTemplate","onClickGoEvent","def","callSummaryCaseEvents","responseEvents","elementEvent","autoSave","summaryCaseEvents","events","project-subprocesses","summarySubProcess","organizeDataForSubprocesses","showSubProcess","tempSubprocesses","radNumber","renderWidget","onClickGoSubprocess","pluginTooltip","project-activity-description","description","getWorkitemDescription","tskDescription"],"mappings":"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","sourcesContent":["/*\r\n *   Name: Bizagi Workportal project Dashboard Menu Activity\r\n *   Author: Elkin Fernando Siabato Cruz\r\n */\r\n\r\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.project.dashboard.menu.activity\", {}, {\r\n\r\n   /**\r\n    *   Constructor\r\n    */\r\n   init: function (workportalFacade, dataService, params) {\r\n      var self = this;\r\n      self.params = params || {};\r\n\r\n      // Call base\r\n      self._super(workportalFacade, dataService, params);\r\n\r\n      //Load templates\r\n      self.loadTemplates({\r\n         \"project-dashboard-menu\": bizagi.getTemplate(\"bizagi.workportal.desktop.widgets.project.dashboard.menu.activity\").concat(\"#project-dashboard-menu1\")\r\n      });\r\n   },\r\n\r\n   /**\r\n    * Renders the template defined in the widget\r\n    */\r\n   renderContent: function () {\r\n      var self = this;\r\n      self.content = $(\"<div></div>\");\r\n      return self.content;\r\n   },\r\n\r\n   /**\r\n    * links events with handlers\r\n    */\r\n   postRender: function () {\r\n      var self = this;\r\n      //Handlers\r\n      self.params.contextsLeftSidebarCaseDashboard.forEach(function(context){\r\n         self.sub(context, $.proxy(self.updateView, self));\r\n      });\r\n   },\r\n\r\n   /**\r\n    * Update view\r\n    * @param event\r\n    * @param params\r\n    */\r\n   updateView: function (event, params) {\r\n      var self = this;\r\n      self.params = $.extend(self.params, params.args);\r\n      self.params.plan.idActivitySelected = undefined;\r\n      self.clean();\r\n      var $content = self.getContent().empty();\r\n\r\n      if(typeof event.type !== \"undefined\"){\r\n         self.params.showContextByMenuDashboard = event.type;\r\n      }\r\n\r\n      var argsTemplate = {\r\n         showFormOverview: self.params.menuDashboard.showFormOverview,\r\n         showFormActivity: self.params.menuDashboard.showFormActivity,\r\n         showCommentsOptionMenu: self.params.menuDashboard.showCommentsOptionMenu,\r\n         showFilesOptionMenu: self.params.menuDashboard.showFilesOptionMenu,\r\n         showTimeLineOptionMenu: self.params.menuDashboard.showTimeLineOptionMenu &&\r\n            (!self.params.isAdhocProcess ||\r\n            (self.params.isAdhocProcess && bizagi.util.isEnableFeature(\"enableTimelineOnLiveProcesses\"))),\r\n         showPlanOptionMenu: self.params.menuDashboard.showPlanOptionMenu,\r\n         contextPlanOptionMenu: self.params.menuDashboard.contextPlanOptionMenu,\r\n         contextFormActivityOptionMenu: self.params.menuDashboard.contextFormActivityOptionMenu\r\n      };\r\n\r\n      //Update widget\r\n      var template = self.getTemplate(\"project-dashboard-menu\");\r\n      template.render(argsTemplate).appendTo($content);\r\n\r\n      if(self.params.showContextByMenuDashboard){\r\n         $(\"li[data-context='\" + self.params.showContextByMenuDashboard.toUpperCase() + \"']\", self.content).addClass(\"active\").siblings().removeClass(\"active\");\r\n      }\r\n\r\n      self.handlerEvents();\r\n   },\r\n\r\n   /**\r\n    *   Load Content By Id\r\n    */\r\n   loadContentById: function (event) {\r\n      var self = this;\r\n      event.preventDefault();\r\n      var $item = $(event.target).closest(\"li\");\r\n\r\n      if (!$item.hasClass(\"active\")) {\r\n\r\n         var showContextByMenuDashboard = $item.data(\"context\");\r\n\r\n         if (showContextByMenuDashboard) {\r\n            var getLevelNavigator = self.pub(\"notify\", { type: \"NAVIGATOR_GETLEVEL\" });\r\n            var currentLevelNavigator = parseInt(getLevelNavigator[0], 10);\r\n            var nameItemNavigator = \"\";\r\n            var newLevelNavigator = currentLevelNavigator;\r\n\r\n            if(showContextByMenuDashboard == \"PLANACTIVITIES\"){\r\n               newLevelNavigator = currentLevelNavigator + 1;\r\n               nameItemNavigator = bizagi.localization.getResource(\"workportal-project-casedashboard-plan\");\r\n            }\r\n\r\n            self.params.refreshLastItemBreadcrumb = false;\r\n            self.pub(\"notify\", {\r\n               type: showContextByMenuDashboard.toUpperCase(),\r\n               args: $.extend(self.params, { showContextByMenuDashboard: showContextByMenuDashboard,\r\n                  histName: nameItemNavigator,\r\n                  level: newLevelNavigator })\r\n            });\r\n               $(\"li[data-context='\" + self.params.showContextByMenuDashboard.toUpperCase() + \"']\", self.content).addClass(\"active\").siblings().removeClass(\"active\");\r\n         }\r\n      }\r\n   },\r\n\r\n   subMenuHandler: function () {\r\n       var self = this;\r\n       var content = self.getContent();\r\n       var $comments = $(\"[data-context='COMMENTS']\", content);\r\n       var $files = $(\"[data-context='FILES']\", content);\r\n       var $timeline = $(\"[data-context='TIMELINE']\", content);\r\n\r\n       $(\".ui-bizagi-wp-project-tab-submenu a\", content).on(\"click\", function () {\r\n           $comments.toggle();\r\n           $files.toggle();\r\n           $timeline.toggle();\r\n       });\r\n   },\r\n\r\n   /**\r\n    * Handler events\r\n    */\r\n   handlerEvents: function(){\r\n      var self = this;\r\n      var content = self.getContent();\r\n\r\n      self.subMenuHandler();\r\n\r\n      $(\".ui-bizagi-wp-project-tab-links a\", content).on(\"click\", $.proxy(self.loadContentById, self));\r\n\r\n       // Bind for click event on refresh botton\r\n       $(\".ui-bizagi-wp-project-tab-links li .ui-bizagi-refresh-form\", content).on(\"click\", function () {\r\n           var options = {\r\n               action: bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING,\r\n               idCase: self.params.idCase,\r\n               idTask: self.params.idTask,\r\n               idWorkflow: self.params.idWorkflow,\r\n               idWorkItem: self.params.idWorkitem,\r\n               referrer: self.params.referrer || \"inboxGrid\"\r\n           };\r\n           self.publish(\"executeAction\", options);\r\n       });\r\n   },\r\n\r\n   /**\r\n    * Clean widgets and events\r\n    */\r\n   clean: function(){\r\n      var self = this;\r\n      var content = self.getContent();\r\n\r\n      if(self.params && self.params.contextsLeftSidebarCaseDashboard){\r\n         self.params.contextsLeftSidebarCaseDashboard.forEach(function(context){\r\n            self.unsub(context, $.proxy(self.updateView, self));\r\n         });\r\n      }\r\n\r\n      $(\".ui-bizagi-wp-project-tab-links a\", content).off();\r\n      $(\".ui-bizagi-wp-project-tab-links li .ui-bizagi-refresh-form\", content).off();\r\n   }\r\n});\r\n\r\nbizagi.injector.register(\"bizagi.workportal.widgets.project.dashboard.menu.activity\", [\"workportalFacade\", \"dataService\", bizagi.workportal.widgets.project.dashboard.menu.activity], true);","/*\r\n *   Name: Bizagi Workportal Project Content Dashboard\r\n *   Author: Elkin Fernando Siabato Cruz\r\n */\r\n\r\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.project.content.dashboard\", {}, {\r\n\r\n   /*\r\n    *   Constructor\r\n    */\r\n   init: function (workportalFacade, dataService, params) {\r\n      var self = this;\r\n\r\n      // Call base\r\n      self._super(workportalFacade, dataService, params);\r\n\r\n      //Load templates\r\n      self.loadTemplates({\r\n         \"project-content-dashboard\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.project.content.dashboard\").concat(\"#project-plan-content-dashboard\")\r\n      });\r\n\r\n   },\r\n\r\n   /*\r\n    * Renders the template defined in the widget\r\n    */\r\n   renderContent: function () {\r\n      var self = this;\r\n\r\n      var template = self.getTemplate(\"project-content-dashboard\");\r\n      self.content = template.render({});\r\n\r\n      return self.content;\r\n   },\r\n   postRender: function(){\r\n      var self = this;\r\n\r\n      setTimeout(function(){\r\n         $(window).trigger(\"resize\"); //Simulate resize for fix when load first time.\r\n      }, 1000);\r\n\r\n   }\r\n\r\n});\r\n\r\nbizagi.injector.register(\"bizagi.workportal.widgets.project.content.dashboard\", [\"workportalFacade\", \"dataService\", bizagi.workportal.widgets.project.content.dashboard], true);","/*\r\n *   Name: Bizagi Workportal Desktop Project Plan\r\n *   Author: Elkin Fernando Siabato Cruz\r\n */\r\n\r\nbizagi.workportal.widgets.project.base.extend(\"bizagi.workportal.widgets.project.plan\", {}, {\r\n   /*\r\n    *   Constructor\r\n    */\r\n    init: function (workportalFacade, dataService, planCreate, params) {\r\n\r\n      var self = this;\r\n\r\n      //Call base\r\n      self._super(workportalFacade, dataService, params);\r\n      self.params = $.extend(self.params, params);\r\n      self.planCreate = planCreate;\r\n\r\n      //Load templates\r\n      self.loadTemplates({\r\n         \"project-plan\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.project.plan\").concat(\"#project-plan-wrapper\"),\r\n         \"project-plan-popup\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.project.plan\").concat(\"#project-plan-popup-template\")\r\n      });\r\n   },\r\n\r\n   /*\r\n    * Renders the template defined in the widget\r\n    */\r\n   renderContent: function () {\r\n      var self = this;\r\n      var templateHomePlan = self.getTemplate(\"project-plan\");\r\n      self.content = templateHomePlan.render({});\r\n      return self.content;\r\n   },\r\n\r\n   /*\r\n    * Post render and links events with handlers\r\n    */\r\n   postRender: function () {\r\n      var self = this;\r\n      var $contentWidget = self.getContent();\r\n      //reference for html elements\r\n      self.form = {\r\n         buttonShowPopupPlanToAdd: $(\"#buttonShowPopupCreatePlan\", $contentWidget)\r\n      };\r\n      self.form.buttonShowPopupPlanToAdd.on(\"click\", $.proxy(self.onShowPopupPlan, self));\r\n   },\r\n\r\n   onShowPopupPlan: function(){\r\n      var self = this;\r\n      var contextualized = typeof self.params.plan.contextualized === \"undefined\" ? true : self.params.plan.contextualized;\r\n      self.planCreate.showPopupAddPlan(self.params, self.dataService, contextualized);\r\n      self.planCreate.unsub('planCreated');\r\n      self.planCreate.sub('planCreated', function (ev, params) {\r\n         var paramsNewPlan = params.paramsNewPlan;\r\n         self.params.planChild = {};\r\n\r\n         //Set planparent if we are on activity plan\r\n         if(self.params.showContextByMenuDashboard.indexOf(\"ACTIVITYPLAN\") != -1){\r\n            var servicesPlan = new bizagi.workportal.services.behaviors.plan(self.dataService);\r\n            self.params.planParent=servicesPlan.getPlanAsParent(self.params.plan);\r\n         }\r\n         self.params.planChild = bizagi.clone(paramsNewPlan);\r\n\r\n         self.pub(\"notify\", {\r\n              type: \"UPDATE_LASTCRUMBPARAMS_INFO\",\r\n              args: {\r\n                  planChild: self.params.planChild\r\n              }\r\n         });\r\n\r\n         self.params.menuDashboard.contextPlanOptionMenu = \"PLANACTIVITIES\";\r\n\r\n         var getLevelNavigator = self.pub(\"notify\", { type: \"NAVIGATOR_GETLEVEL\"});\r\n         var currentLevelNavigator = parseInt(getLevelNavigator[0], 10);\r\n         var newLevelNavigator = currentLevelNavigator + 1;\r\n         var nameItemNavigator = bizagi.localization.getResource(\"workportal-project-casedashboard-plan\");\r\n\r\n         self.pub(\"notify\", {\r\n            type: \"PLANACTIVITIES\",\r\n            args: $.extend(self.params, {showContextByMenuDashboard: \"PLANACTIVITIES\",\r\n               histName: nameItemNavigator,\r\n               level: newLevelNavigator})\r\n         });\r\n      });\r\n   }\r\n});\r\n\r\nbizagi.injector.register(\"bizagi.workportal.widgets.project.plan\", [\"workportalFacade\", \"dataService\", \"bizagi.workportal.widgets.project.plan.create\", bizagi.workportal.widgets.project.plan], true);","/*\r\n*   Name: Bizagi Workportal Desktop Project Overview Controller\r\n*   Author: David Romero Estrada\r\n*/\r\n\r\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.project.overview\", {}, {\r\n    \r\n    /*\r\n    *   Constructor\r\n    */\r\n    init: function (workportalFacade, dataService, params) {\r\n        var self = this;\r\n\r\n        // Call base\r\n        self._super(workportalFacade, dataService, params);\r\n\r\n        //Load templates\r\n        self.loadTemplates({\r\n            \"project-overview\": bizagi.getTemplate(\"bizagi.workportal.desktop.widgets.project.overview\").concat(\"#project-overview\"),\r\n            \"project-overview-no-summary-form-found\": bizagi.getTemplate(\"bizagi.workportal.desktop.widgets.project.overview\").concat(\"#project-overview-no-summary-form-found\")\r\n        });\r\n    },\r\n\r\n    /*\r\n    * Renders the template defined in the widget\r\n    */\r\n    renderContent: function () {\r\n\r\n        var self = this;\r\n        var template = self.getTemplate(\"project-overview\");\r\n\r\n        self.content = template.render({});\r\n        return self.content;\r\n    },\r\n\r\n    /*\r\n    * Links events with handlers\r\n    */\r\n    postRender: function () {\r\n        var self = this;\r\n        var contentWidget = self.getContent();\r\n\r\n        var canvas = $(\"#ui-bizagi-wp-project-overview-wrapper\", contentWidget);\r\n\r\n        // Define action when render form has not been migrated\r\n        canvas.bind(\"oldrenderintegration\", function (e) {\r\n            if (e.isPropagationStopped()) {\r\n                return;\r\n            }\r\n            e.stopPropagation();\r\n\r\n            var template = self.workportalFacade.getTemplate(\"inbox-common-case-summary-oldrender\");\r\n            var data = {};\r\n\r\n            bizagi.oldrenderevent = true; // has been loaded\r\n            var eventMethod = window.addEventListener ? \"addEventListener\" : \"attachEvent\";\r\n            var eventer = window[eventMethod];\r\n            var messageEvent = eventMethod == \"attachEvent\" ? \"onmessage\" : \"message\";\r\n\r\n            // Listen to message from child window\r\n            eventer(messageEvent, function (e) {\r\n                e.stopPropagation();\r\n                self.publish(\"executeAction\", {\r\n                    action: bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING,\r\n                    idCase: e.data\r\n                });\r\n            }, false);\r\n\r\n            // Define wirkitem and idtask\r\n            $.when(self.dataService.getWorkitems({\r\n                idCase: self.params.idCase,\r\n                onlyUserWorkItems: true\r\n            })).done(function (getWorkitems) {\r\n                // verify workitem, in some cases these variables are not available\r\n                if (typeof getWorkitems.workItems == \"object\" && getWorkitems.workItems.length >= 1) {\r\n                    // Case Open\r\n                    var idWorkitem = getWorkitems.workItems[0]['idWorkItem'];\r\n                    var idTask = getWorkitems.workItems[0]['idTask'];\r\n                    data.url = self.dataService.serviceLocator.getUrl(\"old-render\") + \"?PostBack=1&idCase=\" + self.idCase + \"&idWorkitem=\" + idWorkitem + \"&idTask=\" + idTask + \"&isSummary=1\";\r\n                } else {\r\n                    // Case closed\r\n                    data.url = self.dataService.serviceLocator.getUrl(\"old-render\") + \"?PostBack=1&idCase=\" + self.idCase + \"&isSummary=1\";\r\n                }\r\n\r\n                // Render content\r\n                canvas.empty();\r\n                $.tmpl(template, data).appendTo(canvas);\r\n                //Set styles\r\n                self.iframeOldRender($(\"iframe\", canvas));\r\n            });\r\n        });\r\n\r\n        var params = {\r\n            idCase: self.params.idCase\r\n        };\r\n        $.when(self.dataService.getCaseFormsRenderVersion(params))\r\n           .done(function (formsVersion) {\r\n               if (formsVersion.formsRenderVersion == 1) {\r\n                   canvas.trigger(\"oldrenderintegration\");\r\n               } else {\r\n                   self.renderSummaryForm(self.params.idCase, $(\"#ui-bizagi-wp-project-overview-wrapper\", contentWidget));\r\n               }\r\n           });\r\n    },\r\n\r\n    renderSummaryForm: function(idCase, container){\r\n        var self = this;\r\n\r\n        var proxyPrefix = (typeof (self.dataService.serviceLocator.proxyPrefix) != undefined) ? self.dataService.serviceLocator.proxyPrefix : \"\";\r\n\r\n        // Load render page\r\n        var rendering = new bizagi.rendering.facade({ \"proxyPrefix\": proxyPrefix });\r\n\r\n        // Executes rendering into render container\r\n        rendering.execute({\r\n            canvas: container,\r\n            summaryForm: true,\r\n            idCase: idCase\r\n        });\r\n        rendering.subscribe(\"no-data-found\", function() {\r\n            var template = self.getTemplate(\"project-overview-no-summary-form-found\");\r\n            container.append(template.render());\r\n        });\r\n\r\n        // Keep reference to rendering facade\r\n        self.renderingFacade = rendering;\r\n\r\n        // Resize layout\r\n        setTimeout(function() {\r\n            self.resizeLayout();\r\n        }, 1000);\r\n    },\r\n\r\n    /**\r\n     * Inject styles and js into the iframe\r\n     */\r\n    iframeOldRender: function (canvas) {\r\n        var self = this;\r\n        var iframe;\r\n        var content = self.getContent();\r\n        var theme = \"bizagiDefault\";\r\n        var queryString = bizagi.readQueryString();\r\n\r\n        $.each(canvas, function () {\r\n            if ($(this).is(\"iframe\")) {\r\n                iframe = $(this);\r\n            }\r\n        });\r\n\r\n        iframe.load(function () {\r\n            // inject css\r\n            var content = $(this).contents();\r\n\r\n            // Fixed problem with relative path across the different browsers\r\n            var cssLocation = ($.browser.mozilla || $.browser.webkit) ? \"../../css/render_%theme%.css\" : \"css/render_%theme%.css\";\r\n\r\n            // Define theme\r\n            cssLocation = cssLocation.replace(\"%theme%\", (queryString[\"theme\"] || theme));\r\n\r\n            // Append css\r\n            $('body', content).append(\"<link type='text/css' rel='stylesheet' href='\" + cssLocation + \"'>\");\r\n\r\n            // Append javascript\r\n            //  $('head',content).append(\"<script type='text/javascript' src='../../js/renderintegration.js'></script>\");\r\n        });\r\n    }\r\n\r\n});\r\n\r\nbizagi.injector.register('bizagi.workportal.widgets.project.overview', ['workportalFacade', 'dataService', bizagi.workportal.widgets.project.overview], true);","/*\r\n *   Name: Bizagi Workportal Desktop Project Case State Controller\r\n *   Author: Elkin Fernando Siabato Cruz\r\n */\r\n\r\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.project.caseState\", {}, {\r\n    /*\r\n     *   Constructor\r\n     */\r\n    init: function (workportalFacade, dataService, params) {\r\n        var self = this;\r\n        // Call base\r\n        self._super(workportalFacade, dataService, params);\r\n\r\n        self.contextsSidebarActivity = params.contextsSidebarActivity;\r\n\r\n        //Regional\r\n        self.datePickerRegional = bizagi.localization.getResource(\"datePickerRegional\");\r\n\r\n        //Load templates\r\n        self.loadTemplates({\r\n            \"project-caseState\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.project.caseState\").concat(\"#project-caseState-wrapper\"),\r\n            \"project-caseState-remaining\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.project.caseState\").concat(\"#project-caseState-remaining\")\r\n        });\r\n    },\r\n\r\n    /**\r\n     * Renders the template defined in the widget\r\n     */\r\n    renderContent: function () {\r\n        var self = this;\r\n        self.content = $(\"<div></div>\");\r\n        return self.content;\r\n    },\r\n\r\n    /*\r\n     * links events with handlers\r\n     */\r\n    postRender: function () {\r\n        var self = this;\r\n        var cntxtSidebarActivity = self.contextsSidebarActivity || [];\r\n        //Handlers\r\n        cntxtSidebarActivity.forEach(function (context) {\r\n            self.sub(context, $.proxy(self.updateView, self));\r\n        });\r\n    },\r\n\r\n    /**\r\n     * Update view when load case\r\n     * @param event\r\n     * @param params\r\n     */\r\n    updateView: function (event, params) {\r\n        var self = this;\r\n        $.extend(self.params, params.args);\r\n        var args = params.args;\r\n        self.getContent().empty();\r\n\r\n        var argsTemplate = {};\r\n\r\n        //is Favorite Case\r\n        argsTemplate.isFavoriteCase = \"off\";\r\n        if (args.isFavorite && JSON.parse(args.isFavorite)) {\r\n            argsTemplate.isFavoriteCase = \"bz-icon-star\";\r\n        }\r\n        else {\r\n            argsTemplate.isFavoriteCase = \"bz-icon-star-outline\";\r\n        }\r\n\r\n        self.showCaseNumber(args, argsTemplate);\r\n\r\n        //Begin Calculated Remaining Date\r\n        if (args.creationDate) {\r\n            var INVARIANT_FORMAT = \"MM/dd/yyyy H:mm\";\r\n            var creationDate = args.creationDate;\r\n            var creationDateObject = bizagi.util.dateFormatter.getDateFromFormat(creationDate, INVARIANT_FORMAT);\r\n            argsTemplate.creationDateFormat = self.getFormattedDate(creationDateObject);\r\n\r\n            var solutionDateObject = bizagi.util.dateFormatter.getDateFromFormat(args.solutionDate, INVARIANT_FORMAT);\r\n            argsTemplate.solutionDateFormat = self.getFormattedDate(solutionDateObject);\r\n\r\n            var currentDate = new Date();\r\n            self.calculateDataForTemplate(argsTemplate, creationDateObject, currentDate, solutionDateObject, args);\r\n        }\r\n        $(self.getContent()).on(\"click\", \".show-diagram-case\", function () {\r\n            var isAdhoc = false;\r\n            if (!self.params.isAdhocProcess || typeof self.params.isAdhocProcess === 'undefined') {\r\n                isAdhoc = false;\r\n            } else {\r\n                isAdhoc = true;\r\n            }\r\n            if (isAdhoc) {\r\n                self.showGraphicQuery({ idCase: self.params.idCaseForGraphicQuery || self.params.idCase, idWorkflow: self.params.idWorkFlow, isAdhoc: true, idProcess: self.params.idAdhocProcess });\r\n            } else {\r\n                self.showGraphicQuery({ idCase: self.params.idCaseForGraphicQuery || self.params.idCase, idWorkflow: self.params.idWorkflow });\r\n            }\r\n\r\n        });\r\n\r\n        $(self.getContent()).on(\"click\", \".show-process-help\", function () {\r\n            self.showHelpUrl(self.params.helpUrl);\r\n        });\r\n\r\n    },\r\n\r\n    /**\r\n     * Calculate percent bar\r\n     * @param argsTemplate\r\n     * @param creationDateObject\r\n     * @param currentDate\r\n     * @param solutionDateObject\r\n     * @param args\r\n     */\r\n    calculateDataForTemplate: function (argsTemplate, creationDateObject, currentDate, solutionDateObject, args) {\r\n        var self = this;\r\n        var $content = self.getContent();\r\n\r\n        var paramsEffectiveDuration = {};\r\n        paramsEffectiveDuration.idUser = bizagi.currentUser.idUser;\r\n        if (bizagi.util.parseBoolean(args.isOpen)) {\r\n            paramsEffectiveDuration.fromDate = creationDateObject.getTime();\r\n            paramsEffectiveDuration.toDate = currentDate.getTime();\r\n        }\r\n        else {\r\n            paramsEffectiveDuration.fromDate = solutionDateObject.getTime();\r\n            paramsEffectiveDuration.toDate = currentDate.getTime();\r\n        }\r\n\r\n        var differenceCreationToCurrent = paramsEffectiveDuration.toDate - paramsEffectiveDuration.fromDate;\r\n        var relativeTime = bizagi.util.dateFormatter.getRelativeTime(new Date(Date.now() - differenceCreationToCurrent), null, false);\r\n        if (bizagi.util.parseBoolean(args.isOpen)) {\r\n            argsTemplate.relativeTimeState = bizagi.localization.getResource(\"workportal-project-case-state-opened\").replace(\"%s\", relativeTime);\r\n            argsTemplate.colorStateCase = \"Opened\";\r\n        }\r\n        else {\r\n            argsTemplate.relativeTimeState = bizagi.localization.getResource(\"workportal-project-case-state-closed\").replace(\"%s\", relativeTime);\r\n            argsTemplate.colorStateCase = \"Closed\";\r\n        }\r\n\r\n        argsTemplate.percentCompleteBar = 100;\r\n        argsTemplate.isOpen = bizagi.util.parseBoolean(args.isOpen);\r\n        //Update widget\r\n        var contentTemplate = self.getTemplate(\"project-caseState-remaining\");\r\n        contentTemplate\r\n            .render($.extend(args, argsTemplate))\r\n            .appendTo($(\"#ui-bizagi-remaining\", $content));\r\n    },\r\n\r\n    /**\r\n     * Show case number\r\n     * @param args\r\n     * @param argsTemplate\r\n     */\r\n    showCaseNumber: function (args, argsTemplate) {\r\n        var self = this;\r\n        var $content = self.getContent();\r\n        var contentTemplate = self.getTemplate(\"project-caseState\");\r\n        var isAdhoc = false;\r\n        if (!this.params.isAdhocProcess || typeof this.params.isAdhocProcess === 'undefined') {\r\n            isAdhoc = false;\r\n        }\r\n        else {\r\n            isAdhoc = this.params.isAdhocProcess;\r\n        }\r\n\r\n        self.params.helpUrl = bizagi.util.validateUrlWellFormed(self.params.helpUrl);\r\n\r\n        contentTemplate\r\n            .render(\r\n                $.extend(\r\n                    args,\r\n                    argsTemplate,\r\n                    {\r\n                        security: bizagi.menuSecurity,\r\n                        isAdhocProcess: isAdhoc,\r\n                        urlHelp: !bizagi.util.isEmpty(self.params.helpUrl)\r\n                    }\r\n                )\r\n            )\r\n            .appendTo($content);\r\n        //Handle events\r\n        $(\".case-summary-favorite\", $content).on(\"click\", $.proxy(self.onClickFavorite, self));\r\n        // Set back and next case navigation\r\n        $(\".case-summary-back\", self.content).on(\"click\", $.proxy(self.goToCase, self, 'back'));\r\n        $(\".case-summary-next\", self.content).on(\"click\", $.proxy(self.goToCase, self, 'next'));\r\n\r\n        self.showBackNextNavigation();\r\n    },\r\n\r\n    /**\r\n     * Get Format date\r\n     * @param dateObj\r\n     * @returns {string}\r\n     */\r\n    getFormattedDate: function (dateObj) {\r\n        var self = this;\r\n        var monthsNames = self.datePickerRegional.monthNames;\r\n        var shortMonth = dateObj.getMonth();\r\n        var bizagiLanguage = BIZAGI_LANGUAGE;\r\n        if (bizagiLanguage != null && bizagiLanguage != undefined && bizagiLanguage.length > 0 && bizagiLanguage.substring(0, 2) == \"fr\")\r\n            return $.datepicker.formatDate(\"dd\", dateObj) + \" \" + monthsNames[shortMonth];\r\n        else\r\n            return monthsNames[shortMonth] + \" \" + $.datepicker.formatDate(\"dd\", dateObj);\r\n    },\r\n\r\n    /***\r\n     * Events\r\n     */\r\n    onClickFavorite: function (event) {\r\n        event.preventDefault();\r\n        var self = this;\r\n        var favoriteOptions = {};\r\n        if ($(event.target).hasClass(\"bz-icon-star-outline\")) {\r\n            favoriteOptions = {\r\n                idObject: self.params.idCase,\r\n                favoriteType: \"CASES\"\r\n            };\r\n            $.when(self.dataService.addFavorite(favoriteOptions)).done(function (favoritesData) {\r\n                self.params.guidFavorite = favoritesData.idFavorites;\r\n                $(event.target).removeClass(\"bz-icon-star-outline\");\r\n                $(event.target).addClass(\"bz-icon-star\");\r\n            });\r\n        }\r\n        else {\r\n            favoriteOptions = {\r\n                idObject: self.params.guidFavorite,\r\n                favoriteType: \"CASES\"\r\n            };\r\n            $.when(self.dataService.delFavorite(favoriteOptions)).done(function () {\r\n                $(event.target).addClass(\"bz-icon-star-outline\");\r\n                $(event.target).removeClass(\"bz-icon-star\");\r\n            });\r\n        }\r\n    },\r\n\r\n    showHelpUrl: function (urlHelp) {\r\n        window.open(urlHelp);\r\n    },\r\n\r\n    /**\r\n     * Call service effective duration by schedule work\r\n     * @param params\r\n     * @return {*}\r\n     */\r\n    callGetEffectiveDuration: function (params) {\r\n        var self = this;\r\n        var d = $.Deferred();\r\n\r\n        if (params.fromDate) {\r\n            $.when(\r\n                self.dataService.getEffectiveDuration(params)\r\n            ).done(function (data) {\r\n                d.resolve(data);\r\n            });\r\n        }\r\n        else {\r\n            d.resolve(null);\r\n        }\r\n\r\n        return d.promise();\r\n    },\r\n\r\n    /**\r\n     * Clean plugins and events\r\n     */\r\n    clean: function () {\r\n        var self = this;\r\n        $(\".show-diagram-case\", self.getContent()).off();\r\n        var cntxtSidebarActivity = self.contextsSidebarActivity || [];\r\n        this.params = {};\r\n        cntxtSidebarActivity.forEach(function (context) {\r\n            self.unsub(context, $.proxy(self.updateView, self));\r\n        });\r\n    },\r\n\r\n    goToCase: function (action) {\r\n        var self = this;\r\n        var idCase = (action == 'back' ? self.getBackCase() : self.getNextCase());\r\n        if (idCase > 0) {\r\n            self.publish(\"executeAction\", {\r\n                action: bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING,\r\n                idCase: idCase\r\n            });\r\n        }\r\n    },\r\n\r\n    getListKey: function () {\r\n        var self = this;\r\n        bizagi.lstIdCases = bizagi.lstIdCases || {};\r\n        if (bizagi.lstIdCases.length > 1) {\r\n            for (var i = 0; i < bizagi.lstIdCases.length; i++) {\r\n                if (self.params.idCase == bizagi.lstIdCases[i]) {\r\n                    return i;\r\n                }\r\n            }\r\n        }\r\n        return -1;\r\n    },\r\n\r\n    getNextCase: function () {\r\n        var self = this;\r\n        var nextIdCase = 0;\r\n        var key = self.getListKey();\r\n\r\n        // Check if last element\r\n        if (bizagi.lstIdCases.length == (key + 1) || bizagi.lstIdCases.length == 1) {\r\n            nextIdCase = -1;\r\n        } else {\r\n            nextIdCase = bizagi.lstIdCases[key + 1];\r\n        }\r\n\r\n        return nextIdCase;\r\n    },\r\n\r\n    getBackCase: function () {\r\n        var self = this;\r\n        var prevIdCase = 0;\r\n        var key = self.getListKey();\r\n\r\n        // Check if first element\r\n        if (key == 0) {\r\n            prevIdCase = -1;\r\n        } else {\r\n            prevIdCase = bizagi.lstIdCases[key - 1] || -1;\r\n        }\r\n\r\n        return prevIdCase;\r\n    },\r\n\r\n    showBackNextNavigation: function () {\r\n        var self = this;\r\n        var nextCase = self.getNextCase();\r\n        var backCase = self.getBackCase();\r\n        nextCase <= 0 ? $(\".case-summary-next\", self.content).hide() : $(\".case-summary-next\", self.content).show();\r\n        backCase <= 0 ? $(\".case-summary-back\", self.content).hide() : $(\".case-summary-back\", self.content).show();\r\n\r\n        if (nextCase <= 0 && backCase <= 0) {\r\n            $(\".content-right-sidebar\").removeClass(\"bz-state-number--active-case\");\r\n            $(\".bz-case-navigation\").hide();\r\n        }\r\n        else {\r\n            $(\".content-right-sidebar\").addClass(\"bz-state-number--active-case\");\r\n            $(\".bz-case-navigation\").show();\r\n        }\r\n    }\r\n});\r\n\r\nbizagi.injector.register(\"bizagi.workportal.widgets.project.caseState\", [\"workportalFacade\", \"dataService\", bizagi.workportal.widgets.project.caseState]);\r\n","/*\r\n *   Name: Bizagi Workportal Desktop Project Activity State Controller\r\n *   Author: Elkin Fernando Siabato Cruz\r\n */\r\n\r\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.project.activityState\", {}, {\r\n   /*\r\n    *   Constructor\r\n    */\r\n   init: function (workportalFacade, dataService, params) {\r\n      var self = this;\r\n\r\n      // Call base\r\n      self._super(workportalFacade, dataService, params);\r\n\r\n      self.contextsSidebarActivity = params.contextsSidebarActivity;\r\n\r\n      //Regional\r\n      self.datePickerRegional = bizagi.localization.getResource(\"datePickerRegional\");\r\n\r\n      //Load templates\r\n      self.loadTemplates({\r\n         \"project-activityState-wrapper\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.project.activityState\").concat(\"#project-activityState-wrapper\")\r\n      });\r\n   },\r\n\r\n   /*\r\n    * Renders the template defined in the widget\r\n    */\r\n   renderContent: function () {\r\n      var self = this;\r\n      self.content = $(\"<div></div>\");\r\n      return self.content;\r\n   },\r\n\r\n   /*\r\n    * links events with handlers\r\n    */\r\n   postRender: function () {\r\n      var self = this;\r\n      //Handlers\r\n      self.contextsSidebarActivity.forEach(function (context) {\r\n         self.sub(context, $.proxy(self.updateView, self));\r\n      });\r\n\r\n   },\r\n\r\n   updateView: function (event, params) {\r\n      var self = this,\r\n         args = params.args;\r\n      self.params = args;\r\n      self.getContent();\r\n\r\n      var argsTemplate = {};\r\n      var currentState = args.currentState || [];\r\n\r\n      var currentWorkitem = currentState.filter(function (objectWorkItem) { return objectWorkItem.idWorkItem == args.idWorkitem; })[0];\r\n      \r\n\r\n      if (currentWorkitem) {\r\n         argsTemplate.activityName = currentWorkitem.state;\r\n         argsTemplate.activityIsEvent = bizagi.util.parseBoolean(currentWorkitem.isEvent);\r\n\r\n\r\n         var INVARIANT_FORMAT = \"MM/dd/yyyy H:mm\";\r\n         var initDateObject = bizagi.util.dateFormatter.getDateFromFormat(currentWorkitem.entryDateWorkItem, INVARIANT_FORMAT);\r\n         if (initDateObject.getTime) {\r\n            argsTemplate.initDateFormat = self.getFormattedDate(initDateObject);\r\n         }\r\n\r\n         var currentDate = new Date();\r\n         var estimatedSolutionDateObject = bizagi.util.dateFormatter.getDateFromFormat(currentWorkitem.estimatedSolutionDate, INVARIANT_FORMAT);\r\n         argsTemplate.estimatedSolutionDateFormat = \"\";\r\n\r\n         if (initDateObject.getTime && estimatedSolutionDateObject.getTime && currentWorkitem) {\r\n            self.calculateDataForTemplate(currentWorkitem, argsTemplate, initDateObject, currentDate, estimatedSolutionDateObject,currentState);\r\n         }\r\n         else {\r\n            //Update widget\r\n            self.updateTemplateWidget(argsTemplate,currentState);\r\n         }\r\n      }\r\n   },\r\n\r\n   initilizeActionMenu: function (currentState) {\r\n      var self = this;\r\n      var allowsReassign = false;\r\n\r\n      if (currentState && currentState.length > 0) {\r\n         for (j = 0; j < currentState.length; ++j) {\r\n            if (currentState[j] && self.params && currentState[j].idWorkItem == self.params.idWorkitem) {\r\n               allowsReassign = bizagi.util.parseBoolean(currentState[j].allowsReassign) || false;\r\n            }\r\n         }\r\n      }\r\n      var btReassing = $(\"#bt-case-action-reassing\", self.content);\r\n      var btShareActivity= $(\"#ui-bizagi-wp-project-activity-button:not(.ui-bizagi-wp-project-activity-shared)\", self.content);\r\n\r\n      if (allowsReassign) {\r\n         btReassing.show();\r\n      }\r\n      btReassing.on(\"click\", function(){\r\n         self.onClickMenuReasign();\r\n      });\r\n      btShareActivity.on(\"click\", function(){\r\n         self.onClickShareActivity();\r\n      });\r\n   },\r\n   /**\r\n     * Executed when user reasign case\r\n     */\r\n    onClickMenuReasign: function () {\r\n      var self = this;\r\n      var idCase = self.params.idCase;\r\n      var idWorkItem = self.params.idWorkitem,\r\n      onCloseSaveDialogBox = function() {\r\n            self.publish(\"closeCurrentDialog\");\r\n      };\r\n      bizagi.loader.startAndThen(\"admin\").then(function () {\r\n         $.when(self.publish(\"showDialogWidget\", {\r\n            widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_REASSIGN_CASE,\r\n            data: {\r\n               \"idCase\": idCase,\r\n               \"idWorkItem\": idWorkItem,\r\n               closeDialogWidget: onCloseSaveDialogBox\r\n            },\r\n            closeVisible: false,\r\n            maximize: true,\r\n            modalParameters: {\r\n               title: bizagi.localization.getResource(\"render-actions-reassign\"),\r\n               width: \"910px\",\r\n               id: \"CaseAdmin\"\r\n            }\r\n         }));\r\n      });\r\n  },\r\n\r\n   /**\r\n    * let share the activity\r\n    */\r\n   onClickShareActivity: function () {\r\n         var self = this;\r\n         var params= {\r\n            \"idWorkItem\": self.params.idWorkitem\r\n         };\r\n         var button=$(\"#ui-bizagi-wp-project-activity-button\", self.content);\r\n         button.attr(\"disabled\", true);\r\n         $.when(self.dataService.getShareActivity(params)).done(function (data) {\r\n            var notifier = window.parent.bizagi.injector.get('notifier');\r\n            if (data.value===true) {\r\n               button.addClass(\"ui-bizagi-wp-project-activity-shared\")\r\n                  .unbind(\"click\");\r\n               notifier.showSucessMessage(bizagi.localization.getResource(\"workportal-project-activity-success-message\"), '');\r\n            } else {\r\n               notifier.showErrorMessage(bizagi.localization.getResource(\"workportal-project-activity-error-message\"), '');\r\n            }\r\n         }).always(function () {\r\n            button.attr(\"disabled\", false);\r\n         });\r\n   },\r\n\r\n   calculateDataForTemplate: function (currentWorkitem, argsTemplate, creationDateObject, currentDate, estimatedSolutionDateObject, currentState) {\r\n      var self = this;\r\n\r\n      var diffMillisecondsOpened = new Date(Date.now() - creationDateObject.getTime());\r\n      var diffMillisecondsCurrentToEstimated = (currentDate.getTime() - estimatedSolutionDateObject.getTime());\r\n      var diffMillisecondsCreationToSolution = (creationDateObject.getTime() - estimatedSolutionDateObject.getTime());\r\n\r\n      var paramsEffectiveDurationOpened = {\r\n         idUser: bizagi.currentUser.idUser,\r\n         fromDate: creationDateObject.getTime(),\r\n         toDate: Date.now()\r\n      };\r\n\r\n      var currentDateExceededEstimatedDate = false;\r\n      var paramsEffectiveDuration = {\r\n         idUser: bizagi.currentUser.idUser,\r\n         fromDate: currentDate.getTime(),\r\n         toDate: estimatedSolutionDateObject.getTime()\r\n      };\r\n      var paramsEffectiveDurationInitialToEstimated = {};\r\n      if (diffMillisecondsCurrentToEstimated > 0) {//Exceeded limit estimatedSolution\r\n         paramsEffectiveDuration.fromDate = estimatedSolutionDateObject.getTime();\r\n         paramsEffectiveDuration.toDate = currentDate.getTime();\r\n         currentDateExceededEstimatedDate = true;\r\n      }\r\n      else {\r\n         paramsEffectiveDurationInitialToEstimated.idUser = bizagi.currentUser.idUser;\r\n         paramsEffectiveDurationInitialToEstimated.fromDate = creationDateObject.getTime();\r\n         paramsEffectiveDurationInitialToEstimated.toDate = estimatedSolutionDateObject.getTime();\r\n      }\r\n\r\n      var differenceCreatedToCurrent = paramsEffectiveDurationOpened.toDate - paramsEffectiveDurationOpened.fromDate;\r\n      var differenceCurrentToEstimated = paramsEffectiveDuration.toDate - paramsEffectiveDuration.fromDate;\r\n      var differenceInitialToEstimated = diffMillisecondsCurrentToEstimated > 0 ? 0 : paramsEffectiveDurationInitialToEstimated.toDate - paramsEffectiveDurationInitialToEstimated.fromDate;\r\n\r\n      var relativeTime = bizagi.util.dateFormatter.getRelativeTime(new Date(Date.now() - differenceCreatedToCurrent), null, false);\r\n      argsTemplate.colorState = currentWorkitem.colorState;\r\n      argsTemplate.relativeTimeState = bizagi.localization.getResource(\"workportal-project-activity-state-opened\").replace(\"%s\", relativeTime);\r\n      argsTemplate.percentCompleteBar = 100;\r\n\r\n      if (diffMillisecondsCreationToSolution === 0) {\r\n         argsTemplate.showEstimatedSolutionDate = false;\r\n      }\r\n      else {\r\n         argsTemplate.showEstimatedSolutionDate = true;\r\n         if (currentDateExceededEstimatedDate === false) {\r\n            var percentBar = self.getPercentBar((differenceInitialToEstimated / 1000 / 60), (differenceCurrentToEstimated / 1000 / 60));\r\n            argsTemplate.percentCompleteBar = percentBar.percent;\r\n         }\r\n      }\r\n\r\n      if (currentWorkitem) {\r\n         argsTemplate.isEvent = bizagi.util.parseBoolean(currentWorkitem.isEvent);\r\n         argsTemplate.canShareActivity = currentWorkitem.canShareActivity;\r\n         argsTemplate.isShared = currentWorkitem.isShared;\r\n      }\r\n\r\n      argsTemplate.estimatedSolutionDateFormat = self.getFormattedDate(estimatedSolutionDateObject);\r\n\r\n      //Update widget\r\n      self.updateTemplateWidget(argsTemplate, currentState);\r\n   },\r\n\r\n   getPercentBar: function (totalMinutes, sectionMinutes) {\r\n      var response = {};\r\n      response.percent = Math.round((1 - (sectionMinutes / totalMinutes)) * 100);\r\n      return response;\r\n   },\r\n\r\n\r\n   updateTemplateWidget: function (argsTemplate, currentState) {\r\n      var self = this,\r\n         $content = self.getContent().empty();\r\n      if (bizagi.override.enableShareActivity===false) {\r\n         argsTemplate.canShareActivity=false;\r\n         argsTemplate.isShared=false;\r\n      }\r\n      //Update widget\r\n      var contentTemplate = self.getTemplate(\"project-activityState-wrapper\");\r\n      contentTemplate\r\n         .render(argsTemplate).appendTo($content);\r\n\r\n      if (currentState.length > 0) {\r\n         self.initilizeActionMenu(currentState);\r\n      }\r\n      self.shareActivityTooltip();\r\n   },\r\n\r\n   /**\r\n    * show tooltip when the activity is shared or can be\r\n    */\r\n   shareActivityTooltip: function(){\r\n      var self = this;\r\n      var activityButton=$(\"#ui-bizagi-wp-project-activity-button\", self.content);\r\n      activityButton.on('mouseenter', function () {\r\n         var texto=activityButton.hasClass(\"ui-bizagi-wp-project-activity-shared\")?\"workportal-project-activity-shared\":\"workportal-project-activity-share\";\r\n         activityButton.attr(\"title\", bizagi.localization.getResource(texto));\r\n      });\r\n      activityButton.tooltip({\r\n         tooltipClass: \"custom-tooltip-styling-bottom-bar\", \r\n         position: {\r\n            my: 'right top',\r\n            at: 'left top',\r\n            of: activityButton,\r\n            collision: 'flip'\r\n         }\r\n      });\r\n   },\r\n\r\n   getFormattedDate: function (dateObj) {\r\n      var self = this;\r\n      var monthsNames = self.datePickerRegional.monthNames;\r\n      var shortMonth = dateObj.getMonth();\r\n      var bizagiLanguage = BIZAGI_LANGUAGE;\r\n      if (bizagiLanguage != null && bizagiLanguage != undefined && bizagiLanguage.length > 0 && bizagiLanguage.substring(0, 2) == \"fr\")\r\n         return $.datepicker.formatDate(\"dd\", dateObj) + \" \" + monthsNames[shortMonth];\r\n      else\r\n         return monthsNames[shortMonth] + \" \" + $.datepicker.formatDate(\"dd\", dateObj);\r\n   },\r\n\r\n   clean: function () {\r\n      var self = this;\r\n      var cntxtSidebarActivity = self.contextsSidebarActivity || [];\r\n      this.params = {};\r\n      cntxtSidebarActivity.forEach(function (context) {\r\n         self.unsub(context, $.proxy(self.updateView, self));\r\n      });\r\n   },\r\n\r\n   /**\r\n    * Call services\r\n    */\r\n   callGetEffectiveDuration: function (params) {\r\n      var self = this;\r\n      var d = $.Deferred();\r\n\r\n      //Fix .NET, multiple call service with same data in a few milliseconds\r\n      setTimeout(function () {\r\n         if (params.fromDate) {\r\n            $.when(\r\n               self.dataService.getEffectiveDuration(params)\r\n            ).done(function (data) {\r\n               d.resolve(data);\r\n            });\r\n         }\r\n         else {\r\n            d.resolve(null);\r\n         }\r\n      }, 200);\r\n\r\n\r\n      return d.promise();\r\n   }\r\n});\r\n\r\nbizagi.injector.register(\"bizagi.workportal.widgets.project.activityState\", [\"workportalFacade\", \"dataService\", bizagi.workportal.widgets.project.activityState]);","/*\r\n *   Name: Bizagi Workportal Desktop Project Process State Controller\r\n *   Author: Elkin Fernando Siabato Cruz\r\n */\r\n\r\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.project.processState\", {}, {\r\n      /*\r\n       *   Constructor\r\n       */\r\n      init: function (workportalFacade, dataService, params) {\r\n         var self = this;\r\n\r\n         // Call base\r\n         self._super(workportalFacade, dataService, params);\r\n\r\n         self.contextsSidebarActivity = params.contextsSidebarActivity;\r\n\r\n         //Load templates\r\n         self.loadTemplates({\r\n            \"project-process-state\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.project.processState\").concat(\"#project-process-state\")\r\n         });\r\n      },\r\n\r\n      /*\r\n       * Renders the template defined in the widget\r\n       */\r\n      renderContent: function () {\r\n         var self = this;\r\n         var template = self.getTemplate(\"project-process-state\");\r\n         self.content = template.render({});\r\n         return self.content;\r\n      },\r\n\r\n      /*\r\n       * links events with handlers\r\n       */\r\n      postRender: function () {\r\n         var self = this;\r\n\r\n         //Handlers\r\n         self.contextsSidebarActivity.forEach(function(context){\r\n            self.sub(context, $.proxy(self.updateView, self));\r\n         });\r\n      },\r\n\r\n      updateView: function (event, params) {\r\n         var self = this,\r\n            args = params.args,\r\n            $content = self.getContent().empty();\r\n         self.params = args;\r\n\r\n         var argsTemplate = {};\r\n         argsTemplate[\"showParentProcess\"] = (args[\"idParentCase\"] >= 1) ? true : false;\r\n         argsTemplate[\"parentProcess\"] = {\r\n            \"displayName\": args[\"parentDisplayName\"],\r\n            \"idCase\": args[\"idParentCase\"],\r\n            \"idWorkItem\": args[\"idWorkItem\"],\r\n            \"idTask\": args[\"idTask\"] == \"0\" ? \"\" : args[\"idTask\"],\r\n            \"idWorkflow\": args[\"idWorkflowParentCase\"]\r\n         };\r\n\r\n         //Update widget\r\n         var contentTemplate = self.getTemplate(\"project-process-state\");\r\n         contentTemplate\r\n            .render($.extend(args, argsTemplate))\r\n            .appendTo($content);\r\n\r\n         //handle click\r\n\r\n         $(\"#go-to-parent-case\", $content).on(\"click\", $.proxy(self.onClickGoToParentCase, self));\r\n\r\n      },\r\n\r\n      onClickGoToParentCase: function (event) {\r\n         event.preventDefault();\r\n         var self = this;\r\n\r\n         self.routingExecute($(event.target).closest(\"#go-to-parent-case\"));\r\n      },\r\n\r\n      clean: function () {\r\n         var self = this;\r\n         self.params = {};\r\n         self.contextsSidebarActivity.forEach(function(context){\r\n            self.unsub(context, $.proxy(self.updateView, self));\r\n         });\r\n      }\r\n   }\r\n);\r\n\r\nbizagi.injector.register('bizagi.workportal.widgets.project.processState', ['workportalFacade', 'dataService', bizagi.workportal.widgets.project.processState]);","/*\r\n *   Name: Bizagi Workportal Desktop Project Users Controller\r\n *   Author: Elkin Fernando Siabato Cruz\r\n */\r\n\r\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.project.users\", {}, {\r\n    /*\r\n     *   Constructor\r\n     */\r\n    init: function (workportalFacade, dataService, relatedusers, params) {\r\n        var self = this;\r\n        self.relatedusers = relatedusers;\r\n\r\n        // Call base\r\n        self._super(workportalFacade, dataService, params);\r\n\r\n        self.contextsSidebarActivity = params.contextsSidebarActivity;\r\n\r\n        self.plugins = {};\r\n        self.users = [];\r\n        self.loadedUsers = false;\r\n\r\n        //Load templates\r\n        self.loadTemplates({\r\n            \"project-users\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.project.users\").concat(\"#project-users-main\")\r\n        });\r\n    },\r\n\r\n    /*\r\n     * Renders the template defined in the widget\r\n     */\r\n    renderContent: function () {\r\n        var self = this;\r\n        self.content = $(\"<div></div>\");\r\n        return self.content;\r\n    },\r\n\r\n    /*\r\n     * links events with handlers\r\n     */\r\n    postRender: function () {\r\n        var self = this;\r\n\r\n        //Handlers\r\n        self.contextsSidebarActivity.forEach(function(context){\r\n            self.sub(context, $.proxy(self.updateView, self));\r\n        });\r\n        self.sub('ON_RENDER_FINISH', $.proxy(self.onRenderFinish, self));\r\n    },\r\n\r\n    updateView: function (event, params) {\r\n        var self = this;\r\n        self.params = params;\r\n        setTimeout(function(){\r\n            if(self.loadedUsers === false){\r\n                self.onRenderFinish();\r\n            }\r\n        }, 500);\r\n    },\r\n\r\n    onRenderFinish: function(){\r\n        var self = this;\r\n        var args = self.params.args;\r\n        var $content = self.getContent().empty();\r\n        self.loadedUsers = true;\r\n\r\n        var contentTemplate = self.getTemplate(\"project-users\");\r\n        contentTemplate.render().appendTo($content);\r\n        self.showCreatorInformation($content);\r\n\r\n        var typesAssignUser = [{\r\n            id: args.createdBy.userId,\r\n            typeName: \"owner\"\r\n        }];\r\n\r\n        if (args.idCase > 0) {\r\n            self.relatedusers.render(self.content, \".relatedusers-wrapper\", args.idCase, typesAssignUser);\r\n        }\r\n    },\r\n\r\n    /**\r\n     * show the information of the creator case\r\n     * @param {string} $content html conteiner\r\n     */\r\n    showCreatorInformation: function ($content) {\r\n        var self = this;\r\n        var params = {\r\n           userIds: self.params.args.createdBy.userId,\r\n           width: 50,\r\n           height: 50\r\n        };\r\n  \r\n        self.dataService.getUsersData(params).done(function (user) {\r\n            var userInfo = usersAdapter.createJsonUserInfo(\r\n                user[0].id,\r\n                user[0].name,\r\n                user[0].username,\r\n                user[0].picture?\"data:image/png;base64,\"+user[0].picture:undefined,\r\n                user[0].email,\r\n                user[0].name.getInitials(),\r\n                false,\r\n                true,\r\n                [],\r\n                []\r\n                );\r\n            $content.find(\"#ui-bizagi-wp-project-users-wrapper .ui-bizagi-wp-project-users-creator-info\").userinformation(self, { user: userInfo });\r\n        });\r\n    },\r\n\r\n    clean: function () {\r\n        var self = this;\r\n        self.loadedUsers = false;\r\n        self.contextsSidebarActivity.forEach(function(context){\r\n            self.unsub(context, $.proxy(self.updateView, self));\r\n        });\r\n    }\r\n});\r\n\r\nbizagi.injector.register(\"bizagi.workportal.widgets.project.users\", [\"workportalFacade\", \"dataService\", \"relatedusers\", bizagi.workportal.widgets.project.users]);","/*\r\n *   Name: Bizagi Workportal Desktop Project Subprocesses Data Tooltip\r\n *   Author: Bizagi Latam\r\n */\r\n\r\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.project.subprocesses.data\", {\r\n    \r\n    responseSubprocessState: {},\r\n    responseSubprocess: function(newValue){\r\n        if(newValue){\r\n            responseSubprocessState = newValue;\r\n        }\r\n        return responseSubprocessState;\r\n    },\r\n\r\n    auxArrayListSubprocessesState: [],\r\n    auxArrayListSubprocesses: function(newItem){\r\n        if(newItem){\r\n            if(jQuery.isArray(newItem) && newItem.length === 0){\r\n                this.auxArrayListSubprocessesState.length = 0; //clean array if change reference\r\n            }\r\n            else{\r\n                return this.auxArrayListSubprocessesState.push(newItem);\r\n            }\r\n        }\r\n        else{\r\n            return this.auxArrayListSubprocessesState;\r\n        }\r\n    }\r\n}, {\r\n    /*\r\n     *   Constructor\r\n     */\r\n    init: function (workportalFacade, dataService, params) {\r\n        var self = this;\r\n\r\n        // Call base\r\n        self._super(workportalFacade, dataService, params);\r\n\r\n        // Init static properties\r\n        self.Class.auxArrayListSubprocesses([]);\r\n\r\n        //Load templates\r\n        self.loadTemplates({\r\n            \"project-subprocesses-tootip-custom-properties\": bizagi.getTemplate(\"bizagi.workportal.desktop.widgets.project.subprocesses.data\").concat(\"#project-subprocesses-tooltip-custom-properties-wrapper\")\r\n        });\r\n    },\r\n\r\n\r\n    initializeTooltip: function (selectorTooltip) {\r\n        var self = this;\r\n        var $content = self.getContent();\r\n\r\n        $(selectorTooltip, $content).tooltip({\r\n            position: {\r\n                collision: \"flipfit\",\r\n                my: \"right center\", at: \"left-10 center\"\r\n            },\r\n            show: null, // show immediately\r\n            content: function () {\r\n\r\n                var idCase = $(this).closest(\"li\").find(\"#idCase\").val();\r\n                var itemsFinded = self.Class.auxArrayListSubprocesses().filter(function(item){\r\n                    return item.idCase == idCase;\r\n                });\r\n\r\n                var indexSubprocess, idCustData, text;\r\n                if(itemsFinded.length > 0){\r\n                    indexSubprocess = itemsFinded[0].indexSubprocess;\r\n                    idCustData = itemsFinded[0].idCustData;\r\n                    text = $(this).text();\r\n\r\n                    return self.getContentTooltip(indexSubprocess, idCustData, text,\r\n                        self.getTemplate(\"project-subprocesses-tootip-custom-properties\"));\r\n                }\r\n\r\n                \r\n            },\r\n            open: function (event, ui) {\r\n                if (typeof (event.originalEvent) === 'undefined') {\r\n                    return false;\r\n                }\r\n                var $id = $(ui.tooltip).attr('id');\r\n                // close any lingering tooltips\r\n                $('div.ui-tooltip').not('#' + $id).remove();\r\n            },\r\n            close: function (event, ui) {\r\n                ui.tooltip.hover(function () {\r\n                    $(this).stop(true).fadeTo(400, 1);\r\n                },\r\n                    function () {\r\n                        $(this).fadeOut('400', function () {\r\n                            $(this).remove();\r\n                        });\r\n                    });\r\n            }\r\n        });\r\n    },\r\n\r\n    getContentTooltip: function (indexSubprocess, idCustData, textLI, templateTooltip) {\r\n        var self = this;\r\n\r\n        //when not show custom columns\r\n        if (idCustData == \"-1\") {\r\n            idCustData = \"0\";//So show only basic data subprocess\r\n        }\r\n\r\n        var rowCustomProperty = function (nameProperty, valueProperty) {\r\n            return {\r\n                nameProperty: nameProperty,\r\n                valueProperty: valueProperty\r\n            };\r\n        };\r\n\r\n        var arrayCustomsProperties = [];\r\n        var auxValueProperty = \"\";\r\n        var subprocessData = self.getSubprocessData(indexSubprocess, idCustData);\r\n        var custData = subprocessData.custData;\r\n        var custDataTypes = subprocessData.custDataTypes;\r\n        var custFields = subprocessData.custFields;\r\n        var displayName = subprocessData.displayName;\r\n\r\n        //subproceso\r\n        arrayCustomsProperties.push(new rowCustomProperty(bizagi.localization.getResource(\"workportal-widget-inboxcommon-subprocess\"), displayName));\r\n\r\n        //Others custom properties\r\n        if (custData.length) {\r\n            for (var i = 0; i < custData.length; i += 1) {\r\n                auxValueProperty = custData[i];\r\n                if (custDataTypes) {\r\n                    if (custDataTypes[i] == \"Money\") {\r\n                        auxValueProperty = bizagi.util.formatMonetaryCell(auxValueProperty);\r\n                    } else {\r\n                        if (custDataTypes[i] == \"Boolean\") {\r\n                            auxValueProperty = bizagi.util.formatBoolean(auxValueProperty);\r\n                        } else {\r\n                            if (custDataTypes[i] == \"Float\" || custDataTypes[i] == \"Real\") {\r\n                                auxValueProperty = bizagi.util.formatDecimalCell(auxValueProperty);\r\n                            }\r\n                            else {\r\n                                if (typeof auxValueProperty === \"function\") {\r\n                                    auxValueProperty = \"\";\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n                arrayCustomsProperties.push(new rowCustomProperty(custFields[i], auxValueProperty));\r\n            }\r\n        }\r\n\r\n        //Render properties\r\n        var objectTemplate = {};\r\n        objectTemplate.arrayCustomsProperties = arrayCustomsProperties;\r\n        objectTemplate.nameSubprocess = textLI;\r\n        var contentTemplate = templateTooltip;\r\n        var contentTableCustomProperties = $('<div class=\"bizagi-custom-tooltip-subprocesses\"></div>');\r\n        contentTemplate.render(objectTemplate).appendTo(contentTableCustomProperties);\r\n\r\n        return contentTableCustomProperties.html();\r\n    },\r\n\r\n    getSubprocessData: function (indexSubprocess, idCustData) {\r\n        var self = this;\r\n        var subProcessData = {};\r\n        var subProcess = self.Class.responseSubprocess().subProcesses;\r\n        var subProcPersonalized = self.Class.responseSubprocess().subProcPersonalized;\r\n\r\n        if (subProcess && subProcess.length > 0) {\r\n            subProcessData.custData = subProcess[indexSubprocess].custData;\r\n            subProcessData.custDataTypes = subProcess[indexSubprocess].custDataTypes;\r\n            var customFields = self.Class.responseSubprocess().CustFields[idCustData];\r\n            subProcessData.custFields = customFields[Object.keys(customFields)[0]];\r\n            subProcessData.displayName = subProcess[indexSubprocess].displayName;\r\n        } else if (subProcPersonalized && Object.keys(subProcPersonalized).length > 0) {\r\n            subProcessData.custData = subProcPersonalized[0].subProcesses[indexSubprocess].custData;\r\n            subProcessData.custDataTypes = subProcPersonalized[0].subProcesses[indexSubprocess].custDataTypes;\r\n            subProcessData.custFields = subProcPersonalized[0].CustFields[0];\r\n            subProcessData.displayName = subProcPersonalized[0].subProcesses[indexSubprocess].displayName;\r\n        }\r\n        return subProcessData;\r\n    },\r\n\r\n\r\n    clean: function () {\r\n\r\n    }\r\n});\r\n\r\nbizagi.injector.register(\"bizagi.workportal.widgets.project.subprocesses.data\", [\"workportalFacade\", \"dataService\", bizagi.workportal.widgets.project.subprocesses.data]);","/*\r\n *   Name: Bizagi Workportal Desktop Project Events Controller\r\n *   Author: Elkin Fernando Siabato Cruz\r\n */\r\n\r\nbizagi.workportal.widgets.project.subprocesses.data.extend(\"bizagi.workportal.widgets.project.events\", { }, {\r\n    /*\r\n     *   Constructor\r\n     */\r\n    init: function (workportalFacade, dataService, params) {\r\n      var self = this;\r\n\r\n      // Call base\r\n      self._super(workportalFacade, dataService, params);\r\n\r\n      self.contextsSidebarActivity = params.contextsSidebarActivity;\r\n\r\n      //Load templates\r\n      self.loadTemplates({\r\n        \"project-events\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.project.events\").concat(\"#project-events-wrapper\")\r\n      });\r\n    },\r\n\r\n    /*\r\n     * Renders the template defined in the widget\r\n     */\r\n    renderContent: function () {\r\n      var self = this;\r\n      var template = self.getTemplate(\"project-events\");\r\n      self.content = template.render({});\r\n      return self.content;\r\n    },\r\n\r\n    /*\r\n     * links events with handlers\r\n     */\r\n    postRender: function () {\r\n      var self = this;\r\n\r\n      //Handlers\r\n      self.contextsSidebarActivity.forEach(function (context) {\r\n        self.sub(context, $.proxy(self.updateView, self));\r\n      });\r\n    },\r\n\r\n    updateView: function (event, params) {\r\n      var self = this,\r\n        args = params.args,\r\n        $content = self.getContent().empty();\r\n      self.params = args;\r\n\r\n      $.when(self.getArgsTemplate(args)).done(function (responseArgsTemplate) {\r\n        //Update widget\r\n        var contentTemplate = self.getTemplate(\"project-events\");\r\n        contentTemplate\r\n          .render($.extend(args, responseArgsTemplate))\r\n          .appendTo($content);\r\n\r\n        $(\".list-events li.event a\", $content).on(\"click\", $.proxy(self.onClickGoEvent, self));\r\n\r\n        self.initializeTooltip(\".list-events li\");\r\n      });\r\n    },\r\n\r\n    getArgsTemplate: function (args) {\r\n      var def = $.Deferred(),\r\n        argsTemplate = {},\r\n        self = this;\r\n\r\n      //check if show event tab or not\r\n      if (args[\"countEvents\"] >= 1) {\r\n        for (var i = 0; i < args[\"currentState\"].length; i++) {\r\n          if (args[\"currentState\"][i][\"isEvent\"] == \"true\" && args[\"currentState\"][i][\"idWorkItem\"] == args.idWorkitem) {\r\n            args[\"countEvents\"] = args[\"countEvents\"] - 1;\r\n          }\r\n        }\r\n      }\r\n      argsTemplate[\"showEvents\"] = (args[\"countEvents\"] >= 1) ? true : false;\r\n\r\n      if (argsTemplate[\"showEvents\"]) {\r\n        $.when(self.callSummaryCaseEvents(args.idCase)).done(function (responseEvents) {\r\n          args[\"showEvents\"] = (responseEvents[\"events\"].length >= 1) ? true : false;\r\n\r\n          if (args[\"showEvents\"]) {\r\n            argsTemplate[\"events\"] = [];\r\n            responseEvents[\"events\"].forEach(function (elementEvent) {\r\n              argsTemplate[\"events\"].push($.extend(elementEvent[Object.keys(elementEvent)[0]],\r\n                { idWorkFlow: responseEvents[\"idWorkFlow\"] }));\r\n            });\r\n          }\r\n          def.resolve(argsTemplate);\r\n        });\r\n      }\r\n      else {\r\n        def.resolve(argsTemplate);\r\n      }\r\n      return def.promise();\r\n    },\r\n\r\n    /**\r\n     * Events UI\r\n     */\r\n\r\n    onClickGoEvent: function (event) {\r\n      event.preventDefault();\r\n      var self = this;\r\n      $.when(bizagi.util.autoSave()).done(function () {\r\n        self.routingExecute($(event.target).closest(\"li\"));\r\n      });\r\n    },\r\n\r\n    /**\r\n     * Call services\r\n     */\r\n\r\n    /*\r\n     *  Get data for users\r\n     */\r\n    callSummaryCaseEvents: function (idCase) {\r\n      var self = this,\r\n        def = $.Deferred();\r\n\r\n      $.when(\r\n        self.dataService.summaryCaseEvents({\r\n          idCase: idCase\r\n        })\r\n      ).done(function (events) {\r\n        def.resolve(events);\r\n      });\r\n\r\n      return def.promise();\r\n    },\r\n\r\n    clean: function () {\r\n      var self = this;\r\n      this.params = {};\r\n      self.contextsSidebarActivity.forEach(function (context) {\r\n        self.unsub(context, $.proxy(self.updateView, self));\r\n      });\r\n    }\r\n  }\r\n);\r\n\r\nbizagi.injector.register('bizagi.workportal.widgets.project.events', ['workportalFacade', 'dataService', bizagi.workportal.widgets.project.events], true);","/*\r\n *   Name: Bizagi Workportal Desktop Project Subprocesses Controller\r\n *   Author: Elkin Fernando Siabato Cruz\r\n */\r\n\r\nbizagi.workportal.widgets.project.subprocesses.data.extend(\"bizagi.workportal.widgets.project.subprocesses\", {\r\n\r\n    responseSubprocess: function (newValue) {\r\n        return this._super(newValue);\r\n    },\r\n\r\n    auxArrayListSubprocesses: function (newValue) {\r\n        return this._super(newValue);\r\n    }\r\n\r\n}, {\r\n        /*\r\n         *   Constructor\r\n         */\r\n        init: function (workportalFacade, dataService, params) {\r\n            var self = this;\r\n\r\n            // Call base\r\n            self._super(workportalFacade, dataService, params);\r\n\r\n            self.contextsSidebarActivity = params.contextsSidebarActivity;\r\n\r\n            //Load templates\r\n            self.loadTemplates({\r\n                \"project-subprocesses\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.project.subprocesses\").concat(\"#project-subprocesses-wrapper\")\r\n            });\r\n        },\r\n\r\n        /*\r\n         * Renders the template defined in the widget\r\n         */\r\n        renderContent: function () {\r\n            var self = this;\r\n            self.content = $(\"<div></div>\");\r\n            return self.content;\r\n        },\r\n\r\n        /*\r\n         * links events with handlers\r\n         */\r\n        postRender: function () {\r\n            var self = this;\r\n\r\n            //Handlers\r\n            self.contextsSidebarActivity.forEach(function (context) {\r\n                self.sub(context, $.proxy(self.updateView, self));\r\n            });\r\n        },\r\n\r\n        updateView: function (event, params) {\r\n            var self = this,\r\n                args = params.args,\r\n                $content = self.getContent().empty();\r\n            self.params = args;\r\n\r\n            if (self.params.idCase > 0) {\r\n                $.when(\r\n                    self.dataService.summarySubProcess({\r\n                        idCase: self.params.idCase\r\n                    })\r\n                ).done(function (responseSubprocess) {\r\n                    self.Class.responseSubprocess(responseSubprocess);\r\n\r\n                    self.organizeDataForSubprocesses(self.params);\r\n                });\r\n            }\r\n        },\r\n\r\n        organizeDataForSubprocesses: function (args) {\r\n            var self = this;\r\n            if (self.Class.responseSubprocess().showSubProcess) {\r\n                $.each(self.Class.responseSubprocess().subProcesses, function (key) {\r\n                    var custData = self.Class.responseSubprocess().subProcesses[key].custData;\r\n                    if (custData && custData.length) {\r\n                        for (var i = 0; i < custData.length; i += 1) {\r\n                            if (custData[i] === null) {\r\n                                custData[i] = \"\";\r\n                            }\r\n                        }\r\n                    }\r\n\r\n                });\r\n\r\n                var subProcess = self.Class.responseSubprocess().subProcesses || self.Class.responseSubprocess().subProcPersonalized;\r\n\r\n                //prepare array with subprocess\r\n                self.Class.auxArrayListSubprocesses([]);\r\n                for (var i = 0; i < Object.keys(subProcess).length; i += 1) {\r\n                    var tempSubprocesses = subProcess[i];\r\n\r\n                    self.Class.auxArrayListSubprocesses({\r\n                        isOpen: tempSubprocesses.isOpen,\r\n                        radNumber: tempSubprocesses.radNumber,\r\n                        displayName: tempSubprocesses.displayName,\r\n                        idCase: tempSubprocesses.idCase,\r\n                        indexSubprocess: i,\r\n                        idCustData: tempSubprocesses.idCustData\r\n                    });\r\n                    if (tempSubprocesses.subProcesses) {\r\n                        Object.keys(tempSubprocesses).forEach(function (key) {//only one iteration\r\n                            self.Class.auxArrayListSubprocesses({\r\n                                isOpen: tempSubprocesses[key].isOpen,\r\n                                radNumber: tempSubprocesses[key].radNumber,\r\n                                displayName: tempSubprocesses[key].displayName,\r\n                                idCase: tempSubprocesses[key].idCase,\r\n                                indexSubprocess: i,\r\n                                idCustData: tempSubprocesses[key].idCustData\r\n                            });\r\n                        });\r\n                    }\r\n                }\r\n\r\n                self.renderWidget();\r\n            }\r\n        },\r\n\r\n        renderWidget: function () {\r\n            var self = this;\r\n            var $content = self.getContent();\r\n\r\n            //Update widget\r\n            var contentTemplate = self.getTemplate(\"project-subprocesses\");\r\n            contentTemplate\r\n                .render({ auxArrayListSubprocesses: self.Class.auxArrayListSubprocesses() })\r\n                .appendTo($content);\r\n\r\n            $(\".list-subprocesses a\", $content).on(\"click\", $.proxy(self.onClickGoSubprocess, self));\r\n\r\n            self.initializeTooltip(\".list-subprocesses li\");\r\n        },\r\n\r\n\r\n        /**\r\n         * Events UI\r\n         */\r\n\r\n        onClickGoSubprocess: function (event) {\r\n            event.preventDefault();\r\n            var self = this;\r\n\r\n            self.routingExecute($(event.target).closest(\"li\"));\r\n        },\r\n\r\n        clean: function () {\r\n            var self = this;\r\n\r\n            self.params = {};\r\n            self.pluginTooltip = null;\r\n\r\n            self.contextsSidebarActivity.forEach(function (context) {\r\n                self.unsub(context, $.proxy(self.updateView, self));\r\n            });\r\n        }\r\n    }\r\n);\r\n\r\nbizagi.injector.register(\"bizagi.workportal.widgets.project.subprocesses\", [\"workportalFacade\", \"dataService\", bizagi.workportal.widgets.project.subprocesses]);","/*\r\n    Name   : Bizagi Workportal Project Activity Description\r\n    Created on : Jun 27, 2017\r\n    Author     : Diana Mogollon\r\n*/\r\n\r\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.project.activity.description\", {}, {\r\n\r\n    /*\r\n     *   Constructor\r\n     */\r\n    init: function (workportalFacade, dataService, params) {\r\n        var self = this;\r\n\r\n        // Call base\r\n        self._super(workportalFacade, dataService, params);\r\n\r\n        params = params || {};\r\n\r\n        //Load templates\r\n        self.loadTemplates({\r\n            \"project-activity-description\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.project.activity.description\").concat(\"#project-activity-description\")\r\n        });\r\n    },\r\n\r\n    /**\r\n     * Renders the template defined in the widget\r\n     */\r\n    renderContent: function () {\r\n        var self = this;\r\n        var template = self.getTemplate(\"project-activity-description\");\r\n        var description = self.getWorkitemDescription();\r\n\r\n        if (description) {\r\n            self.content = template.render({ description: description });\r\n        } else {\r\n            self.content = $('<div />');\r\n        }\r\n\r\n        return self.content;\r\n    },\r\n\r\n    /**\r\n     * links events with handlers\r\n     */\r\n    postRender: function () {\r\n        \r\n    },\r\n\r\n    getWorkitemDescription: function () {\r\n        var self = this;\r\n        var params = self.params || {};\r\n        var idWorkitem = params.idWorkitem || 0;\r\n        var currentState = params.currentState || [];\r\n        var description = \"\";\r\n\r\n        for (var i = 0; i < currentState.length; i++) {\r\n            if (idWorkitem == currentState[i].idWorkItem) {\r\n                description = currentState[i].tskDescription;\r\n                break;\r\n            }\r\n        }\r\n\r\n        return description;\r\n    },\r\n    \r\n    /**\r\n     * Clean widget\r\n     */\r\n    clean: function () {\r\n        \r\n    }\r\n});\r\n\r\nbizagi.injector.register('bizagi.workportal.widgets.project.activity.description', ['workportalFacade', 'dataService', bizagi.workportal.widgets.project.activity.description], true);\r\n"]}