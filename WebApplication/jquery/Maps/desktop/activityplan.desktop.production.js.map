{"version":3,"sources":["jquery/workportal/desktop/widget/project.dashboard.menu.activity.plan/bizagi.workportal.desktop.widgets.project.dashboard.menu.activity.plan.js","jquery/workportal/desktop/widget/project.content.dashboard/bizagi.workportal.desktop.widgets.project.content.dashboard.js","jquery/workportal/desktop/widget/project.activity/bizagi.workportal.desktop.widgets.project.activity.js","jquery/workportal/desktop/widget/project.plan.activity.sidebar/bizagi.workportal.desktop.widgets.project.plan.activity.sidebar.js","jquery/workportal/desktop/widget/project.plan.activity.action/bizagi.workportal.desktop.widgets.project.plan.activity.action.js","jquery/workportal/desktop/widget/project.plan.activity.time/bizagi.workportal.desktop.widgets.project.plan.activity.time.js","jquery/workportal/desktop/widget/project.plan.activity.progress/bizagi.workportal.desktop.widgets.project.plan.activity.progress.js","jquery/workportal/desktop/widget/project.plan.activity.subprocesses/bizagi.workportal.desktop.widgets.project.plan.activity.subprocesses.js","jquery/workportal/desktop/widget/project.plan.activity.parent/bizagi.workportal.desktop.widgets.project.plan.activity.parent.js","jquery/workportal/desktop/widget/project.plan.activity.users/bizagi.workportal.desktop.widgets.project.plan.activity.users.js"],"names":["bizagi","workportal","widgets","widget","extend","init","workportalFacade","dataService","params","self","this","_super","loadTemplates","project-dashboard-menu","getTemplate","concat","renderContent","content","$","postRender","contextsLeftSidebarCaseDashboard","forEach","context","sub","proxy","updateView","event","args","clean","$content","getContent","empty","argsTemplate","showFormOverview","menuDashboard","showFormActivity","showCommentsOptionMenu","showFilesOptionMenu","showTimeLineOptionMenu","showPlanOptionMenu","contextPlanOptionMenu","contextFormActivityOptionMenu","contextualized","plan","render","appendTo","showContextByMenuDashboard","type","toUpperCase","addClass","siblings","removeClass","handlerEvents","paramsGetPlan","idPlan","id","when","callGetPlan","then","responsePlan","pub","loadContentById","preventDefault","$item","target","closest","hasClass","util","autoSave","done","document","data","getLevelNavigator","newLevelNavigator","parseInt","refreshLastItemBreadcrumb","histName","level","defer","Deferred","getPlan","always","response","status","undefined","resolve","reject","promise","subMenuHandler","$comments","$files","$timeline","on","toggle","unsub","off","injector","register","project","dashboard","menu","activity","project-content-dashboard","template","setTimeout","window","trigger","base","project-activity","templateHomeActivity","renderForm","idCase","idWorkitem","idTask","radNumber","withOutGlobalForm","isClosed","belongCurrentUser","hasGlobalForm","parseBoolean","showForm","isOfflineForm","messageForm","renderContainer","errorTemplate","message","resources","getResource","getMessageFromNetworkState","online","errorHtml","tmpl","goToInbox","fail","proxyPrefix","serviceLocator","database","rendering","facade","setContext","subscribe","execute","canvas","bind","triggerparams","action","actions","BIZAGI_WORKPORTAL_ACTION_ROUTING","fromTask","fromWorkItemId","formsRenderVersion","onClose","publish","widgetName","cookie","renderingFacade","resizeLayout","click","getWidgetByCookie","serviceloadDataPlan","project-plan-activity-sidebar","onNotifyLoadInfoPlan","parans","idActivitySelected","loadData","getDateServer","loadedWithDataActivities","loadedWithDataFirstParent","unsubscribe","sidebar","notifier","dateFormat","localization","timeFormat","estimatedFinishDateTime","beforeUserAssignedActivity","activity-action-main","activity-action-editionpopup","dialogBox","onNotifyLoadInfoActivityExecution","onNotifyExpandedRightSidebar","currentActivity","activities","filter","idUserCreator","currentUser","idUser","userAssigned","currentActivityName","name","showEditAction","append","initilizeActionMenu","initializeTempleteAndEvents","plugins","activityEdition","initPluginPopupEdition","formEditActivity","assignee","date","duration","buttonCancel","buttonUpdate","onClickPopupButtonCancel","onClickPopupButtonUpdate","onDeleteDate","onTypeDuration","select","onSelectMenu","popupEditActivity","formContent","initializeAutoComplete","element","url","getUrl","autocomplete","minLength","source","request","ajax","domain","userName","fullName","term","organization","pag","pagSize","orderField","success","map","users","item","label","user","value","ui","val","IdAssignee","focus","change","initializeDatePicker","datepicker","onSelect","getTime","dateFormatter","getDateFormatByDatePickerJqueryUI","initializeSpiner","desactivateDateByDuration","newValue","isNumeric","spinner","min","max","placeHolder","spin","keyCode","fieldDurationActive","activateElement","form","currentTarget","find","length","onClickOpenPopupEdition","dialog","resizable","draggable","height","width","modal","title","maximize","open","onOpenPopupEdition","close","onClosePopupEdition","activityDate","isEmpty","estimatedFinishDate","isNaN","formatInvariant","Date","getDateFromInvariant","isMinimumDate","setUserAssignedById","removePopupWidgets","callGetDataUsers","responseUsers","next","html","remove","validateParamsOfFormEditActivity","idUserAssigned","updateActivity","progress","startDate","allowEdition","description","finishDate","items","editActivityPlan","refreshAllWidgets","showSucessMessage","onClickFavorite","favoriteOptions","idObject","favoriteType","addFavorite","favoritesData","guidFavorite","idFavorites","delFavorite","messageValidationField","replace","toLowerCase","csvIdUsers","userIds","getUsersData","EXECUTING_ACTIVITY","FINISHED_ACTIVITY","datePickerRegional","plan-time-main","onNotifyLoadInfoActivitySummary","getStateActivity","time","fromDate","getFormattedDate","getFirstDate","dataProgressWidget","getDataByScenarios","unitTime","auxUnitTime","updateWidget","contentTemplate","relativeTime","getRelativeTime","now","minutes","messageDescripionDifference","keywordResource","messageTime","$barRemainingDate","widthNumberDays","css","toString","percentBar","currentState","colorBar","getColorByCreatedAndEstimatedDate","toDate","callGetEffectiveDuration","getColorBar","getPercentBar","getKeywordResourceDescriptionBar","getUnitTime","getUTCDate","dateObj","monthNames","getMonth","formatDate","d","getEffectiveDuration","plan-progress-main","plan-progress-popup-edit","onNotifyUpdateItemFromRender","activityToShow","valuePercentBarComplete","canEdit","popupEditProgress","initPluginPopupEditProgress","formEditProgress","sliderProgress","slider","orientation","range","from","to","step","slide","onChangesliderProgress","each","vals","i","el","numericTextBoxPlugin","format","onChangeNumericTextBoxProgress","decimals","buttonChangeProgress","onShowPopupEditProgress","onClickCancel","onSubmitFormChangeProgress","updateProgressUI","listItems","activityWork","hide","show","text","newPercentProgress","templatePopupEditProgress","onOpenPopupPlan","detach","previusValueProgress","prop","project-subprocesses","project-subprocesses-tootip-custom-properties","subprocesses","plan-parent-main","getPlanParent","planParent","parent","idParent","nameParent","displayName","idWorkflow","idWorkItem","onClickGoToParentCase","routingExecute","usersMap","usersInformation","globalHandlersService","get","usersAssignees","plan-users-main","activityRunning","cvsGuidUsers","activitiesUsers","ownerUserId","ownerUserGuid","push","guidUser","userType","picture","guid","index","userId","userGuid","userAssignedGuid","inArray","justAssignees","addEventHandlersModal","showCreatorInformation","renderUserProfilesAndImages","allUsers","usersAssignee","isOwner","indexOf","isAssignee","usersAdapter","createJsonUserInfo","userCreator","userInfo","username","email","getInitials","userinformation","obj","$li","console","log","not","ev","userSelected","$target","usersActivities","userParam","getIsAssignee","getIsOwner","usertooltip","usersGuids","join","getUsersAssignees","getUserAssignee","tasks","types","actUser","stopPropagation","BIZAGI_WORKPORTAL_WIDGET_USERS_MODAL","closeVisible","modalParameters","refreshInbox"],"mappings":"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","sourcesContent":["/*\r\n *   Name: Bizagi Workportal project Dashboard Menu Activity Plan\r\n *   Author: Elkin Fernando Siabato Cruz\r\n */\r\n\r\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.project.dashboard.menu.activity.plan\", {}, {\r\n\r\n   /**\r\n    *   Constructor\r\n    */\r\n   init: function (workportalFacade, dataService, params) {\r\n      var self = this;\r\n      self.params = params || {};\r\n\r\n      // Call base\r\n      self._super(workportalFacade, dataService, params);\r\n\r\n      //Load templates\r\n      self.loadTemplates({\r\n         \"project-dashboard-menu\": bizagi.getTemplate(\"bizagi.workportal.desktop.widgets.project.dashboard.menu.activity.plan\").concat(\"#project-dashboard-menu2\")\r\n      });\r\n   },\r\n\r\n   /**\r\n    * Renders the template defined in the widget\r\n    */\r\n   renderContent: function () {\r\n      var self = this;\r\n      self.content = $(\"<div></div>\");\r\n      return self.content;\r\n   },\r\n\r\n   /**\r\n    * links events with handlers\r\n    */\r\n   postRender: function () {\r\n      var self = this;\r\n      //Handlers\r\n      self.params.contextsLeftSidebarCaseDashboard.forEach(function(context){\r\n         self.sub(context, $.proxy(self.updateView, self));\r\n      });\r\n\r\n   },\r\n\r\n   /**\r\n    * Update view\r\n    * @param event\r\n    * @param params\r\n    */\r\n   updateView: function (event, params) {\r\n      var self = this;\r\n      self.params = $.extend(self.params, params.args);\r\n      self.clean();\r\n      var $content = self.getContent().empty();\r\n\r\n      var argsTemplate = {\r\n         showFormOverview: self.params.menuDashboard.showFormOverview,\r\n         showFormActivity: self.params.menuDashboard.showFormActivity,\r\n         showCommentsOptionMenu: self.params.menuDashboard.showCommentsOptionMenu,\r\n         showFilesOptionMenu: self.params.menuDashboard.showFilesOptionMenu,\r\n         showTimeLineOptionMenu: self.params.menuDashboard.showTimeLineOptionMenu,\r\n         showPlanOptionMenu: self.params.menuDashboard.showPlanOptionMenu,\r\n         contextPlanOptionMenu: self.params.menuDashboard.contextPlanOptionMenu,\r\n         contextFormActivityOptionMenu: self.params.menuDashboard.contextFormActivityOptionMenu,\r\n         contextualized: self.params.plan.contextualized\r\n      };\r\n\r\n      //Update widget\r\n      var template = self.getTemplate(\"project-dashboard-menu\");\r\n      template.render(argsTemplate).appendTo($content);\r\n\r\n      if(self.params.showContextByMenuDashboard){\r\n         $(\"li[data-context='\" + event.type.toUpperCase() + \"']\", self.content).addClass(\"active\").siblings().removeClass(\"active\");\r\n      }\r\n\r\n      self.handlerEvents();\r\n\r\n      var paramsGetPlan = {idPlan: self.params.plan.id};\r\n      $.when(self.callGetPlan(paramsGetPlan)).then(function(responsePlan){\r\n         $.extend(self.params.plan, responsePlan);\r\n         self.pub(\"notify\", {\r\n            type: \"LOAD_INFO_PLAN\",\r\n            args: self.params\r\n         });\r\n      });\r\n   },   \r\n\r\n   /**\r\n    *   Load Content By Id\r\n    */\r\n   loadContentById: function (event) {\r\n      var self = this;\r\n      event.preventDefault();\r\n      var $item = $(event.target).closest(\"li\");\r\n\r\n      if (!$item.hasClass(\"active\")) {\r\n         $.when(bizagi.util.autoSave()).done(function () {\r\n            $(document).data('auto-save', '');\r\n\r\n            var showContextByMenuDashboard = $item.data(\"context\");\r\n            if (showContextByMenuDashboard) {\r\n               var getLevelNavigator = self.pub(\"notify\", { type: \"NAVIGATOR_GETLEVEL\"});\r\n               var currentLevelNavigator = parseInt(getLevelNavigator[0]);\r\n               var nameItemNavigator = \"\";\r\n               var newLevelNavigator = currentLevelNavigator;\r\n\r\n               self.params.refreshLastItemBreadcrumb = false;\r\n               self.pub(\"notify\", {\r\n                  type: showContextByMenuDashboard.toUpperCase(),\r\n                  args: $.extend(self.params,{showContextByMenuDashboard: showContextByMenuDashboard,\r\n                     histName: nameItemNavigator,\r\n                     level: newLevelNavigator})\r\n               });\r\n               $(\"li[data-context='\" + self.params.showContextByMenuDashboard.toUpperCase() + \"']\", self.content).addClass(\"active\").siblings().removeClass(\"active\");\r\n            }\r\n         });\r\n      }\r\n   },\r\n\r\n   /**\r\n    * Call services\r\n    */\r\n\r\n   callGetPlan: function(params){\r\n      var self = this;\r\n      var defer = $.Deferred();\r\n      self.dataService.getPlan(params).always(function (response) {\r\n         if (response.status === 200 || response.status === 201 || response.status === undefined) {\r\n            defer.resolve(response);\r\n         }\r\n         else {\r\n            defer.reject();\r\n         }\r\n      });\r\n\r\n      return defer.promise();\r\n   },\r\n\r\n   subMenuHandler: function () {\r\n       var self = this;\r\n       var content = self.getContent();\r\n       var $comments = $(\"[data-context='ACTIVITYPLANCOMMENTS']\", content);\r\n       var $files = $(\"[data-context='ACTIVITYPLANFILES']\", content);\r\n       var $timeline = $(\"[data-context='ACTIVITYPLANTIMELINE']\", content);\r\n\r\n       $(\".ui-bizagi-wp-project-tab-submenu a\", content).on(\"click\", function () {\r\n           $comments.toggle();\r\n           $files.toggle();\r\n           $timeline.toggle();\r\n       });\r\n   },\r\n\r\n   /**\r\n    * Handler events\r\n    */\r\n   handlerEvents: function(){\r\n      var self = this;\r\n      var content = self.getContent();\r\n      self.subMenuHandler();\r\n      $(\".ui-bizagi-wp-project-tab-links a\", content).on(\"click\",  $.proxy(self.loadContentById, self));\r\n   },\r\n\r\n   /**\r\n    * Clean widgets and events\r\n    */\r\n   clean: function(){\r\n      var self = this;\r\n      var content = self.getContent();\r\n\r\n      if(self.params && self.params.contextsLeftSidebarCaseDashboard){\r\n         self.params.contextsLeftSidebarCaseDashboard.forEach(function(context){\r\n            self.unsub(context, $.proxy(self.updateView, self));\r\n         });\r\n      }\r\n\r\n      $(\".ui-bizagi-wp-project-tab-links a\", content).off();\r\n   }\r\n\r\n});\r\n\r\nbizagi.injector.register(\"bizagi.workportal.widgets.project.dashboard.menu.activity.plan\", [\"workportalFacade\", \"dataService\", bizagi.workportal.widgets.project.dashboard.menu.activity.plan], true);","/*\r\n *   Name: Bizagi Workportal Project Content Dashboard\r\n *   Author: Elkin Fernando Siabato Cruz\r\n */\r\n\r\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.project.content.dashboard\", {}, {\r\n\r\n   /*\r\n    *   Constructor\r\n    */\r\n   init: function (workportalFacade, dataService, params) {\r\n      var self = this;\r\n\r\n      // Call base\r\n      self._super(workportalFacade, dataService, params);\r\n\r\n      //Load templates\r\n      self.loadTemplates({\r\n         \"project-content-dashboard\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.project.content.dashboard\").concat(\"#project-plan-content-dashboard\")\r\n      });\r\n\r\n   },\r\n\r\n   /*\r\n    * Renders the template defined in the widget\r\n    */\r\n   renderContent: function () {\r\n      var self = this;\r\n\r\n      var template = self.getTemplate(\"project-content-dashboard\");\r\n      self.content = template.render({});\r\n\r\n      return self.content;\r\n   },\r\n   postRender: function(){\r\n      var self = this;\r\n\r\n      setTimeout(function(){\r\n         $(window).trigger(\"resize\"); //Simulate resize for fix when load first time.\r\n      }, 1000);\r\n\r\n   }\r\n\r\n});\r\n\r\nbizagi.injector.register(\"bizagi.workportal.widgets.project.content.dashboard\", [\"workportalFacade\", \"dataService\", bizagi.workportal.widgets.project.content.dashboard], true);","/*\r\n *   Name: Bizagi Workportal Desktop Project Activity Controller\r\n *   Author: Elkin Fernando Siabato Cruz\r\n */\r\n\r\nbizagi.workportal.widgets.project.base.extend(\"bizagi.workportal.widgets.project.activity\", {}, {\r\n   /*\r\n    *   Constructor\r\n    */\r\n   init: function (workportalFacade, dataService, params) {\r\n\r\n      var self = this;\r\n\r\n      //Call base\r\n      self._super(workportalFacade, dataService, params);\r\n\r\n      //Load templates\r\n      self.loadTemplates({\r\n         \"project-activity\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.project.activity\").concat(\"#project-activity-wrapper\")\r\n      });\r\n\r\n   },\r\n\r\n   /*\r\n    * Renders the template defined in the widget\r\n    */\r\n   renderContent: function () {\r\n      var self = this;\r\n      var templateHomeActivity = self.getTemplate(\"project-activity\");\r\n      self.content = templateHomeActivity.render({});\r\n      return self.content;\r\n   },\r\n\r\n   /*\r\n    * Post render and links events with handlers\r\n    */\r\n   postRender: function () {\r\n\r\n      var self = this;\r\n      self.renderForm({\r\n         idCase: self.params.idCase,\r\n         idWorkitem: self.params.idWorkitem,\r\n         idTask: self.params.idTask,\r\n         radNumber: self.params.radNumber,\r\n         withOutGlobalForm: self.params.withOutGlobalForm || false,\r\n         isClosed: self.params.isClosed,\r\n         belongCurrentUser: self.params.belongCurrentUser,\r\n         hasGlobalForm: bizagi.util.parseBoolean(self.params.hasGlobalForm),\r\n         showForm: bizagi.util.parseBoolean(self.params.showForm),\r\n         isOfflineForm: self.params.isOfflineForm || false,\r\n         messageForm: self.params.messageForm || \"\"\r\n      });\r\n\r\n   },\r\n\r\n   renderForm: function(params){\r\n\r\n      var self = this, resultRender;\r\n      var renderContainer = self.getContent();\r\n\r\n      var runningAndAssignToOtherUser = (!params.isClosed && !params.belongCurrentUser);\r\n\r\n      if (runningAndAssignToOtherUser && !params.hasGlobalForm) {\r\n         params.withOutGlobalForm=true;\r\n      }\r\n\r\n      if (!params.withOutGlobalForm) {\r\n         // it has't activities and global form\r\n         var proxyPrefix = (typeof (self.dataService.serviceLocator.proxyPrefix) != undefined) ? self.dataService.serviceLocator.proxyPrefix : \"\";\r\n         var database = (typeof (self.dataService.database) != undefined) ? self.dataService.database : \"\";\r\n\r\n\r\n         // Load render page\r\n         var rendering = self.rendering = new bizagi.rendering.facade({ \"proxyPrefix\": proxyPrefix, \"database\": database });\r\n         // Executes rendering into render container\r\n         bizagi.util.setContext(params);\r\n\r\n         self.rendering.subscribe(\"onLoadDataItemsFromFormActivityPlan\", function (event, params) {\r\n            self.pub(\"notify\", {\r\n               type: \"UPDATE_ITEMS_FROM_FORMRENDER\",\r\n               args: params\r\n            });\r\n         });\r\n         self.rendering.subscribe(\"rendering-formRendered\", function (event, params) {\r\n            self.pub(\"notify\", {\r\n               type: \"ON_RENDER_FINISH\",\r\n               args: params\r\n            });\r\n         });\r\n\r\n         var resultRender = rendering.execute($.extend(params, {\r\n            canvas: renderContainer,\r\n            menu: self.menu\r\n         }));\r\n\r\n         // Attach handler to render container to subscribe for routing events\r\n         renderContainer.bind(\"routing\", function (context, triggerparams) {\r\n            // Executes routing action\r\n\r\n            var params = {\r\n               action: bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING,\r\n               idCase: self.params.idCase,\r\n               fromTask: self.params.fromTask || self.params.idTask,\r\n               fromWorkItemId: self.params.fromWorkItemId || self.params.idWorkitem,\r\n               isOfflineForm: self.params.isOfflineForm,\r\n               formsRenderVersion: self.params.formsRenderVersion,\r\n               onClose: function () {\r\n                  // If the user closes the dialog we need to redirect to inbox widget\r\n                  self.publish(\"changeWidget\", {\r\n                     widgetName: bizagi.cookie(\"bizagiDefaultWidget\")\r\n                  });\r\n               }\r\n            };\r\n            params = $.extend(params, triggerparams);\r\n            self.publish(\"executeAction\", params);\r\n         });\r\n      }\r\n      else {\r\n         var errorTemplate = self.workportalFacade.getTemplate(\"info-message\");\r\n         var message = (params.messageForm !== \"\") ? params.messageForm : self.resources.getResource(\"render-without-globalform\");\r\n\r\n         if (typeof self.params != \"undefined\" && typeof self.params.isOfflineForm !== \"undefined\" && self.params.isOfflineForm == true) {\r\n            message = bizagi.util.getMessageFromNetworkState(self.dataService.online);\r\n         }\r\n\r\n         var errorHtml = $.tmpl(errorTemplate, {\r\n            message: message\r\n         });\r\n         // Remove loading icon from summary container\r\n         errorHtml.appendTo(renderContainer);\r\n\r\n         self.goToInbox(errorHtml); //Go to inbox when click on the button \"Go to inbox of the errorHtml template\"\r\n\r\n         resultRender = $.Deferred();\r\n         resultRender.fail();\r\n\r\n      }\r\n      // Keep reference to rendering facade\r\n      self.renderingFacade = rendering;\r\n\r\n      // Resize layout\r\n      self.resizeLayout();\r\n   },\r\n   goToInbox: function(content) {\r\n    var self = this;\r\n    $(\"#ui-bizagi-btn-go-to-inbox\", content).click(function(){  \r\n        self.publish(\"changeWidget\", {\r\n            widgetName: self.workportalFacade.workportal.getWidgetByCookie(true)\r\n        });\r\n    });\r\n   },\r\n\r\n   clean: function(){\r\n\r\n   }\r\n});\r\n\r\nbizagi.injector.register('bizagi.workportal.widgets.project.activity', ['workportalFacade', 'dataService', bizagi.workportal.widgets.project.activity], true);","/*\r\n *   Name: Bizagi Workportal Project Activity Sidebar\r\n *   Author: Elkin Fernando Siabato Cruz\r\n */\r\n\r\nbizagi.workportal.widgets.project.base.extend(\"bizagi.workportal.widgets.project.plan.activity.sidebar\", {}, {\r\n\r\n   /*\r\n    *   Constructor\r\n    */\r\n   init: function (workportalFacade, dataService, serviceloadDataPlan, params) {\r\n      var self = this;\r\n\r\n      // Call base\r\n      self._super(workportalFacade, dataService, params);\r\n\r\n      self.serviceloadDataPlan = serviceloadDataPlan;\r\n\r\n      //Load templates\r\n      self.loadTemplates({\r\n         \"project-plan-activity-sidebar\": bizagi.getTemplate(\"bizagi.workportal.desktop.project.plan.activity.sidebar\").concat(\"#project-plan-activity-sidebar\")\r\n      });\r\n   },\r\n\r\n   /*\r\n    * Renders the template defined in the widget\r\n    */\r\n   renderContent: function () {\r\n      var self = this;\r\n\r\n      var template = self.getTemplate(\"project-plan-activity-sidebar\");\r\n      self.content = template.render({});\r\n\r\n      return self.content;\r\n   },\r\n   postRender: function(){\r\n      var self = this;\r\n      self.sub(\"LOAD_INFO_PLAN\", $.proxy(self.onNotifyLoadInfoPlan, self));\r\n   },\r\n\r\n    onNotifyLoadInfoPlan: function (event, parans) {\r\n        var self = this;\r\n        if (self.params.plan.idActivitySelected) {\r\n\r\n            var params = {idPlan: self.params.plan.id};\r\n            self.serviceloadDataPlan.loadData(params, self.getDateServer, self.params);\r\n            self.serviceloadDataPlan.subscribe(\"loadedWithDataActivities\", $.proxy(self.loadedWithDataActivities, self));\r\n            self.serviceloadDataPlan.subscribe(\"loadedWithDataFirstParent\", $.proxy(self.loadedWithDataFirstParent, self));\r\n        }\r\n        else {\r\n            if (self.params.showContextByMenuDashboard === \"ACTIVITYPLANPROCESSMAP\" ||\r\n                    self.params.showContextByMenuDashboard === \"ACTIVITYPLANLOG\") {\r\n                self.pub(\"notify\", {\r\n                    type: \"DISABLED_RIGHT_SIDEBAR\"\r\n                });\r\n            }\r\n        }\r\n    },\r\n\r\n    loadedWithDataActivities: function(){\r\n        var self = this;\r\n        self.pub(\"notify\", {\r\n            type: \"LOADED_ACTIVITIES_PLAN\",\r\n            args: self.params\r\n        });\r\n        self.pub(\"notify\", {\r\n            type: \"LOAD_INFO_SUMMARY_PROGRESS_PLAN\",\r\n            args: self.params\r\n        });\r\n        self.pub(\"notify\", {\r\n            type: \"LOAD_INFO_ACTIVITY_SUMMARY\",\r\n            args: self.params\r\n        });\r\n        self.pub(\"notify\", {\r\n            type: \"LOAD_INFO_ACTIVITIES_PLAN\",\r\n            args: self.params\r\n        });\r\n    },\r\n\r\n    loadedWithDataFirstParent: function(){\r\n        var self = this;\r\n        self.pub(\"notify\", {\r\n            type: \"LOAD_INFO_SUMMARY_PLAN\",\r\n            args: self.params\r\n        });\r\n    },\r\n\r\n    clean: function(){\r\n        var self = this;\r\n        if(self.serviceloadDataPlan){\r\n            self.serviceloadDataPlan.unsubscribe(\"loadedWithDataActivities\", $.proxy(self.loadedWithDataActivities, self));\r\n            self.serviceloadDataPlan.unsubscribe(\"loadedWithDataFirstParent\", $.proxy(self.loadedWithDataFirstParent, self));\r\n        }\r\n    }\r\n\r\n});\r\n\r\nbizagi.injector.register(\"bizagi.workportal.widgets.project.plan.activity.sidebar\", [\"workportalFacade\", \"dataService\", \"bizagi.workportal.services.behaviors.loadDataPlan\", bizagi.workportal.widgets.project.plan.activity.sidebar], true);","/*\r\n *   Name: Bizagi Workportal Desktop Project Plan Activity Action\r\n *   Author: Elkin Fernando Siabato Cruz\r\n */\r\n\r\nbizagi.workportal.widgets.project.base.extend(\"bizagi.workportal.widgets.project.plan.activity.action\", {}, {\r\n\r\n   /**\r\n    *   Constructor\r\n    */\r\n   init: function (workportalFacade, dataService, notifier, params) {\r\n      var self = this;\r\n\r\n      // Call base\r\n      self._super(workportalFacade, dataService, params);\r\n\r\n      self.dateFormat = bizagi.localization.getResource(\"dateFormat\");\r\n      self.timeFormat = bizagi.localization.getResource(\"timeFormat\");\r\n      self.estimatedFinishDateTime; //Save complete date and time, because datepicker dont save time\r\n\r\n      self.beforeUserAssignedActivity = \"\";\r\n       self.notifier = notifier;\r\n\r\n\r\n      //Load templates\r\n      self.loadTemplates({\r\n         \"activity-action-main\": bizagi.getTemplate(\"bizagi.workportal.desktop.project.plan.activity.action\").concat(\"#project-plan-activity-action\"),\r\n         \"activity-action-editionpopup\": bizagi.getTemplate(\"bizagi.workportal.desktop.project.plan.activity.action\").concat(\"#project-plan-activity-action-editionpopup\")\r\n      });\r\n\r\n      self.dialogBox = {};\r\n   },\r\n\r\n   /**\r\n    *\r\n    * @returns {*|jQuery|HTMLElement}\r\n    */\r\n   renderContent: function () {\r\n      var self = this;\r\n      self.content = $(\"<div></div>\");\r\n      return self.content;\r\n   },\r\n\r\n   /**\r\n    *\r\n    */\r\n   postRender: function () {\r\n      var self = this;\r\n      self.sub(\"LOAD_INFO_ACTIVITY_SUMMARY\", $.proxy(self.onNotifyLoadInfoActivityExecution, self));\r\n      self.sub(\"EXPANDED_RIGHT_SIDEBAR\", $.proxy(self.onNotifyExpandedRightSidebar, self));\r\n   },\r\n\r\n   /**\r\n    * Notifies when an event is raised\r\n    */\r\n   onNotifyLoadInfoActivityExecution: function (event, params) {\r\n      var self = this;\r\n      self.params = $.extend(self.params, params.args);\r\n\r\n      var $content = self.getContent().empty();\r\n\r\n      var currentActivity = {};\r\n      if(self.params.plan.idActivitySelected){\r\n         currentActivity = self.params.plan.activities.filter(function(activity){\r\n            return activity.id.toUpperCase() === self.params.plan.idActivitySelected.toUpperCase();\r\n         })[0];\r\n      }\r\n\r\n      if(self.params.plan.idUserCreator === bizagi.currentUser.idUser || currentActivity.userAssigned == bizagi.currentUser.idUser){\r\n\r\n         var argsTemplate = {};\r\n         argsTemplate.currentActivityName = currentActivity.name;\r\n         argsTemplate.showEditAction = true;\r\n         if(self.params.plan.idUserCreator !== bizagi.currentUser.idUser){\r\n             argsTemplate.showEditAction = false;\r\n         }\r\n\r\n         var tmpl = self.getTemplate(\"activity-action-main\");\r\n         $content.append(tmpl.render(argsTemplate));\r\n\r\n         if(argsTemplate.showEditAction){\r\n             self.initilizeActionMenu();\r\n             self.beforeUserAssignedActivity = currentActivity.userAssigned;\r\n             self.content.append($content);\r\n            self.initializeTempleteAndEvents();\r\n         }\r\n      }\r\n   },\r\n\r\n   initializeTempleteAndEvents: function (){\r\n        var self = this;\r\n        self.plugins = {}; \r\n        self.plugins.activityEdition = self.initPluginPopupEdition();\r\n\r\n        self.formEditActivity = {\r\n            assignee: $(\"#activity-form-assignee\", self.plugins.activityEdition),\r\n            date: $(\"#activity-form-date\", self.plugins.activityEdition),\r\n            duration:  $(\"#activity-form-duration\",self.plugins.activityEdition),\r\n            buttonCancel: $(\"#ui-bizagi-wp-project-popupform-action-cancel\", self.plugins.activityEdition),\r\n            buttonUpdate: $(\"#ui-bizagi-wp-project-popupform-action-update\", self.plugins.activityEdition)\r\n        };\r\n\r\n        self.formEditActivity.buttonCancel.on(\"click\", $.proxy(self.onClickPopupButtonCancel, self));\r\n        self.formEditActivity.buttonUpdate.on(\"click\", $.proxy(self.onClickPopupButtonUpdate, self));\r\n\r\n        self.formEditActivity.date.on(\"keydown\", $.proxy(self.onDeleteDate, self));\r\n        self.formEditActivity.duration.on(\"keyup\", $.proxy(self.onTypeDuration, self));\r\n   },\r\n\r\n   /**\r\n    *\r\n    */\r\n   onNotifyExpandedRightSidebar: function(){\r\n      var self = this;\r\n      self.initilizeActionMenu();\r\n   },\r\n\r\n   /**\r\n    *\r\n    */\r\n   initilizeActionMenu: function () {\r\n      var self = this;\r\n      $(\"#ui-bizagi-wp-project-plan-activity-action .menu\", self.content).menu({\r\n         select: $.proxy(self.onSelectMenu, self)\r\n      }).removeClass(\"ui-widget-content\");\r\n   },\r\n\r\n   /**\r\n    *\r\n    * @returns dialogBox.formContent\r\n    */\r\n   initPluginPopupEdition: function () {\r\n      var self = this;\r\n      var popupEditActivity = self.getTemplate(\"activity-action-editionpopup\");\r\n      self.dialogBox.formContent = popupEditActivity.render({});\r\n      return self.dialogBox.formContent;\r\n\r\n   },\r\n\r\n   /**\r\n    *\r\n    * @param element\r\n    */\r\n    initializeAutoComplete: function (element) {\r\n        var self = this;\r\n        var url = self.dataService.serviceLocator.getUrl(\"admin-getUsersList\");\r\n\r\n        element.autocomplete({\r\n            minLength: 2,\r\n            source: function (request, response) {\r\n                $.ajax({\r\n                    url: url,\r\n                    data: {\r\n                        domain: \"\",\r\n                        userName: \"\",\r\n                        fullName: request.term,\r\n                        organization: \"\",\r\n                        pag: 1,\r\n                        pagSize: 100,\r\n                        orderField: \"fullName\"\r\n                    },\r\n                    success: function (data) {\r\n                        response($.map(data.users, function (item) {\r\n                            return {\r\n                                label: item.user,\r\n                                value: item.idUser\r\n                            };\r\n                        }));\r\n                    }\r\n                });\r\n            },\r\n            select: function (event, ui) {\r\n                var name = ui.item.label;\r\n                element.val(name);\r\n                self.formEditActivity.IdAssignee = ui.item.value;\r\n                return false;\r\n            },\r\n            focus: function () {\r\n                return false;\r\n            },\r\n            change: function (event, ui){\r\n                if(ui.item === null){\r\n                    self.formEditActivity.IdAssignee = null;\r\n                    self.formEditActivity.assignee.val(\"\");\r\n                }\r\n                return false;\r\n            }\r\n\r\n        });\r\n\r\n    },\r\n\r\n   /**\r\n    *\r\n    * @param element\r\n    */\r\n    initializeDatePicker: function (element) {\r\n        var self = this;\r\n        element.datepicker({\r\n            onSelect: function () {\r\n                self.formEditActivity.duration.val(\"\");\r\n                self.estimatedFinishDateTime = self.formEditActivity.date.datepicker(\"getDate\") ? self.formEditActivity.date.datepicker(\"getDate\").getTime() : undefined;\r\n            }\r\n        });\r\n        element.datepicker(\"option\", \"dateFormat\", bizagi.util.dateFormatter.getDateFormatByDatePickerJqueryUI());\r\n    },\r\n\r\n   /**\r\n    *\r\n    * @param element\r\n    */\r\n    initializeSpiner: function (element) {\r\n        var self = this;\r\n        function desactivateDateByDuration(event, newValue){\r\n            var value = newValue || $(event.target).val();\r\n            if (bizagi.util.isNumeric(value) && parseInt(value, 10) > 0) {\r\n               self.formEditActivity.date.val(\"\");\r\n               self.estimatedFinishDateTime = undefined;\r\n            } else {\r\n               $(event.target).val(\"\");\r\n            }\r\n        }\r\n\r\n        element.spinner({\r\n            min: 1,\r\n            max: 1000,\r\n            placeHolder: bizagi.localization.getResource(\"workportal-hours\"),\r\n            change: function (event) {\r\n                desactivateDateByDuration(event);\r\n            },\r\n            spin: function( event, ui ) {\r\n                desactivateDateByDuration(event, ui.value);\r\n            }\r\n        });\r\n    },\r\n\r\n   /***\r\n    * Events\r\n    * @param event\r\n    */\r\n\r\n   onDeleteDate: function (event) {\r\n      var self = this;\r\n      if (event.keyCode === 8) {\r\n          $(event.target).val(\"\");\r\n          self.fieldDurationActive(true);\r\n      }\r\n   },\r\n\r\n   /**\r\n    *\r\n    * @param event\r\n    */\r\n   onTypeDuration: function (event) {\r\n      var self = this;\r\n      var $target = $(event.target);\r\n      if ($target.val() !== \"\") {\r\n          self.estimatedFinishDateTime = undefined;\r\n      } else {\r\n          self.activateElement(self.form.date);\r\n      }\r\n   },\r\n\r\n    /**\r\n     * When select menu\r\n     * @param event\r\n     * @param ui\r\n     */\r\n   onSelectMenu: function (event, ui) {\r\n      var self = this;\r\n      if($(event.currentTarget).find(\"i\").length === 0){\r\n         var item = $(ui.item).data(\"item\");\r\n         switch (item) {\r\n            case \"edit\":\r\n               self.onClickOpenPopupEdition();\r\n               break;\r\n         }\r\n      }\r\n   },\r\n\r\n   /**\r\n    *\r\n    */\r\n   onClickOpenPopupEdition: function () {\r\n        var self = this;\r\n        self.initializeTempleteAndEvents();\r\n        self.dialogBox.formContent.dialog({\r\n            resizable: false,\r\n            draggable: false,\r\n            height: \"auto\",\r\n            width: \"600px\",\r\n            modal: true,\r\n            title: bizagi.localization.getResource(\"workportal-project-plan-title-activity-properties\"),\r\n            maximize: true,\r\n            open: $.proxy(self.onOpenPopupEdition, self),\r\n            close: $.proxy(self.onClosePopupEdition, self)\r\n        });\r\n   },\r\n\r\n    /**\r\n    *\r\n    */\r\n    onOpenPopupEdition: function () {\r\n        var self = this;\r\n        var currentActivity = self.params.plan.activities.filter(function(activity){\r\n            return activity.id.toUpperCase() === self.params.plan.idActivitySelected.toUpperCase();\r\n        })[0];\r\n\r\n        var activityDate =  (currentActivity && !bizagi.util.isEmpty(currentActivity.estimatedFinishDate)) ? currentActivity.estimatedFinishDate: \"\";\r\n        if(!isNaN(activityDate)){\r\n            activityDate=bizagi.util.dateFormatter.formatInvariant(new Date(activityDate));\r\n        }\r\n        var estimatedFinishDate = activityDate ? bizagi.util.dateFormatter.getDateFromInvariant(activityDate): \"\";\r\n        var isMinimumDate = estimatedFinishDate instanceof Date ? estimatedFinishDate.getTime() < self.getDateServer() : false;\r\n\r\n        self.initializeAutoComplete(self.formEditActivity.assignee);\r\n        self.initializeDatePicker(self.formEditActivity.date);\r\n        self.initializeSpiner(self.formEditActivity.duration);\r\n\r\n        if (currentActivity.userAssigned) {\r\n            self.setUserAssignedById(currentActivity.userAssigned);\r\n        }\r\n\r\n        self.formEditActivity.date.datepicker(\"option\", \"minDate\", new Date(self.getDateServer()));\r\n\r\n        if (currentActivity.estimatedFinishDate && isMinimumDate) {\r\n            self.formEditActivity.date.datepicker(\"option\", \"minDate\", estimatedFinishDate);//set minimum because, if date is past\r\n        }\r\n\r\n        if (currentActivity.estimatedFinishDate) {\r\n            if (estimatedFinishDate){\r\n                self.formEditActivity.date.datepicker(\"setDate\", estimatedFinishDate);\r\n            }\r\n            self.estimatedFinishDateTime = currentActivity.estimatedFinishDate;\r\n        }\r\n\r\n        if (currentActivity.duration) {\r\n            self.formEditActivity.duration.val(parseInt(currentActivity.duration, 10));\r\n        }\r\n   },\r\n\r\n   /**\r\n    * When close popup edition\r\n    */\r\n   onClosePopupEdition: function(){\r\n      var self = this;\r\n      self.removePopupWidgets();\r\n   },\r\n\r\n   /**\r\n    *\r\n    * @param idUser\r\n    */\r\n    setUserAssignedById: function (idUser) {\r\n        var self = this;\r\n        //Show images users\r\n        self.callGetDataUsers(idUser).then(function (responseUsers) {\r\n            self.formEditActivity.assignee.val(responseUsers[0].name);\r\n        });\r\n        self.formEditActivity.IdAssignee = idUser;\r\n    },\r\n\r\n   /**\r\n    *\r\n    * @param event\r\n    */\r\n    onClickPopupButtonCancel: function(event){\r\n        var self = this;\r\n        event.preventDefault();\r\n        self.removePopupWidgets();\r\n    },\r\n\r\n    /**\r\n    * Remove popup widgets\r\n    */\r\n    removePopupWidgets: function(){\r\n        var self = this;\r\n        self.formEditActivity.assignee.next().find(\"span\").html(\"\");\r\n        self.dialogBox.formContent.remove();\r\n        $(\"#ui-datepicker-div\").remove();\r\n    },\r\n\r\n   /**\r\n    *  Triggered when click update plan activity\r\n    */\r\n    onClickPopupButtonUpdate: function () {\r\n        var self = this;\r\n        if(self.validateParamsOfFormEditActivity()){\r\n            var currentActivity = self.params.plan.activities.filter(function (activity) {\r\n                return activity.id.toUpperCase() === self.params.plan.idActivitySelected.toUpperCase();\r\n            })[0];\r\n            var idUserAssigned =  self.formEditActivity.IdAssignee || bizagi.currentUser.idUser;\r\n            if(self.formEditActivity.duration.val()!=\"\"){\r\n                self.params.plan.activities.filter(function (activity) {\r\n                    return activity.id.toUpperCase() === self.params.plan.idActivitySelected.toUpperCase();\r\n                })[0].estimatedFinishDate=\"\";\r\n            }\r\n            var updateActivity = {\r\n                progress: currentActivity.progress,\r\n                id: currentActivity.id,\r\n                startDate: currentActivity.startDate,\r\n                duration: self.formEditActivity.duration.val(),\r\n                userAssigned: idUserAssigned,\r\n                allowEdition: currentActivity.allowEdition,\r\n                description: currentActivity.description,\r\n                name: currentActivity.name,\r\n                idPlan: currentActivity.idPlan,\r\n                estimatedFinishDate: self.estimatedFinishDateTime,\r\n                finishDate: currentActivity.finishDate,\r\n                items: currentActivity.items\r\n            };\r\n            $.when(self.dataService.editActivityPlan(updateActivity)).done(function () {\r\n                currentActivity = $.extend(currentActivity, updateActivity);\r\n                self.removePopupWidgets();\r\n\r\n                if (self.beforeUserAssignedActivity !== self.formEditActivity.IdAssignee) {\r\n                    self.pub(\"notify\", {\r\n                        type: \"ACTIVITYPLANCOMMENTS\",\r\n                        args: $.extend(self.params, {refreshAllWidgets: true})\r\n                    });\r\n                }\r\n                else {\r\n                    self.pub(\"notify\", {\r\n                        type: self.params.showContextByMenuDashboard,\r\n                        args: self.params\r\n                    });\r\n                }\r\n\r\n                self.removePopupWidgets();\r\n                self.notifier.showSucessMessage(bizagi.localization.getResource(\"workportal-project-plan-activity-update-message\"));\r\n            });\r\n        }\r\n    },\r\n\r\n   /***\r\n    * Events\r\n    */\r\n   onClickFavorite: function (event) {\r\n      event.preventDefault();\r\n      var self = this;\r\n      var favoriteOptions = {};\r\n      if ($(event.target).hasClass(\"bz-icon-star-outline\")) {\r\n         favoriteOptions = {\r\n            idObject: self.params.idCase,\r\n            favoriteType: \"CASES\"\r\n         };\r\n         $.when(self.dataService.addFavorite(favoriteOptions)).done(function (favoritesData) {\r\n            self.params.guidFavorite = favoritesData.idFavorites;\r\n            $(event.target).removeClass(\"bz-icon-star-outline\");\r\n            $(event.target).addClass(\"bz-icon-star\");\r\n         });\r\n      }\r\n      else {\r\n         favoriteOptions = {\r\n            idObject: self.params.guidFavorite,\r\n            favoriteType: \"CASES\"\r\n         };\r\n         $.when(self.dataService.delFavorite(favoriteOptions)).done(function () {\r\n            $(event.target).addClass(\"bz-icon-star-outline\");\r\n            $(event.target).removeClass(\"bz-icon-star\");\r\n         });\r\n      }\r\n   },\r\n\r\n   /**\r\n    * Clean events and plugins\r\n    */\r\n   clean: function(){\r\n      var self = this;\r\n      self.unsub(\"LOAD_INFO_ACTIVITY_SUMMARY\", $.proxy(self.onNotifyLoadInfoActivityExecution, self));\r\n      self.unsub(\"EXPANDED_RIGHT_SIDEBAR\", $.proxy(self.onNotifyExpandedRightSidebar, self));\r\n   },\r\n\r\n   /**\r\n    * Validate form edit plan activity\r\n    * @returns {boolean}\r\n    */\r\n    validateParamsOfFormEditActivity: function(){\r\n        var self = this;\r\n        var userAssigned = self.formEditActivity.assignee;\r\n        if (userAssigned.val() && userAssigned.val() !== \"\" && self.formEditActivity.IdAssignee) {\r\n            return true;\r\n        } else {\r\n            var messageValidationField = bizagi.localization.getResource(\"workportal-general-error-field-required\");\r\n            messageValidationField = messageValidationField.replace(\"{0}\", bizagi.localization.getResource(\"workportal-project-plan-assignee\").toLowerCase());\r\n            userAssigned.next().find(\"span\").html(messageValidationField);\r\n            return false;\r\n        }\r\n    },\r\n\r\n   /**\r\n    * Call services\r\n    */\r\n   callGetDataUsers: function (csvIdUsers) {\r\n      var self = this,\r\n         defer = $.Deferred();\r\n      var params = {\r\n         userIds: csvIdUsers,\r\n         width: 50,\r\n         height: 50\r\n      };\r\n\r\n      self.dataService.getUsersData(params).always(function (response) {\r\n         defer.resolve(response);\r\n      });\r\n      return defer.promise();\r\n   }\r\n});\r\n\r\nbizagi.injector.register(\"bizagi.workportal.widgets.project.plan.activity.action\", [\"workportalFacade\", \"dataService\", \"notifier\", bizagi.workportal.widgets.project.plan.activity.action]);\r\n","/*\r\n *   Name: Bizagi Workportal Desktop Project Plan Activity Time\r\n *   Author: Elkin Fernando Siabato Cruz\r\n */\r\n/***\r\n * TODO IMPORTANT: This widget is development with TDD, test this file when changes\r\n */\r\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.project.plan.activity.time\", {}, {\r\n\r\n   /*\r\n    *   Constructor\r\n    *\r\n    */\r\n   init: function (workportalFacade, dataService, params) {\r\n      var self = this;\r\n\r\n      // Call base\r\n      self._super(workportalFacade, dataService, params);\r\n\r\n      //Constants\r\n      self.EXECUTING_ACTIVITY = \"EXECUTING\";\r\n      self.FINISHED_ACTIVITY = \"FINISHED\";\r\n\r\n      //Regional\r\n      self.datePickerRegional = bizagi.localization.getResource(\"datePickerRegional\");\r\n\r\n      //Load templates\r\n      self.loadTemplates({\r\n         \"plan-time-main\": bizagi.getTemplate(\"bizagi.workportal.desktop.project.plan.activity.time\").concat(\"#project-plan-activity-time\")\r\n      });\r\n   },\r\n\r\n   renderContent: function () {\r\n      var self = this;\r\n      self.content = $(\"<div></div>\");\r\n      return self.content;\r\n   },\r\n\r\n   postRender: function () {\r\n      var self = this;\r\n      self.sub(\"LOAD_INFO_ACTIVITY_SUMMARY\", $.proxy(self.onNotifyLoadInfoActivitySummary, self));\r\n   },\r\n\r\n   /**\r\n    * Notifies when an event is raised\r\n    */\r\n   onNotifyLoadInfoActivitySummary: function(event, params){\r\n      var self = this;\r\n      self.params = $.extend(self.params, params.args);\r\n      self.getContent().empty();\r\n\r\n      var currentActivity = self.params.plan.activities.filter(function (activity) {\r\n         return activity.id === self.params.plan.idActivitySelected;\r\n      })[0];\r\n\r\n      if(currentActivity.startDate){\r\n         self.getStateActivity(currentActivity);\r\n\r\n         var argsTemplate = {\r\n            time: {\r\n               fromDate: self.getFormattedDate(new Date(self.getFirstDate(currentActivity)))\r\n            }\r\n         };\r\n         var dataProgressWidget = self.getDataByScenarios(currentActivity, true);\r\n\r\n         $.when(dataProgressWidget.unitTime).done(function(auxUnitTime){\r\n            dataProgressWidget = $.extend(dataProgressWidget, {\r\n               unitTime: auxUnitTime\r\n            });\r\n            self.updateWidget($.extend(argsTemplate.time, dataProgressWidget));\r\n         });\r\n\r\n      }\r\n   },\r\n   updateWidget: function(argsTemplate){\r\n      var self = this;\r\n      var $content = self.getContent().empty();\r\n      var contentTemplate = self.getTemplate(\"plan-time-main\");\r\n\r\n      var relativeTime = bizagi.util.dateFormatter.getRelativeTime(new Date(Date.now() - (argsTemplate.unitTime.minutes * 60 * 1000)), null, false);\r\n\r\n      var messageDescripionDifference = bizagi.localization.getResource(\"workportal-project-activity-state-\" + argsTemplate.keywordResource);\r\n      argsTemplate.messageTime = messageDescripionDifference.replace(\"%s\", relativeTime);\r\n\r\n      contentTemplate\r\n         .render(argsTemplate)\r\n         .appendTo($content);\r\n\r\n      //Begin Adjust status bar next to the number days\r\n      var $barRemainingDate = $(\".remaining-days .time-remaining\", $content);\r\n      var widthNumberDays = $(\".remaining-days .days\", $content).width();\r\n      $barRemainingDate.css(\"padding-left\", (widthNumberDays + 7).toString() + \"px\");\r\n\r\n      var $barCompletedDate = $(\".remaining-days .bar-completed\", $content);\r\n\r\n      $barCompletedDate.css(\"width\", argsTemplate.percentBar + \"%\");\r\n      //End Adjust status bar next to the number days\r\n\r\n   },\r\n   getStateActivity: function(activity){\r\n      var self = this;\r\n      if(activity.finishDate){\r\n         activity.currentState = self.FINISHED_ACTIVITY;\r\n         return self.FINISHED_ACTIVITY;\r\n      }\r\n      else{\r\n         activity.currentState = self.EXECUTING_ACTIVITY;\r\n         return self.EXECUTING_ACTIVITY;\r\n      }\r\n   },\r\n   getFirstDate: function(activity){\r\n      var self = this;\r\n      if(activity.currentState === self.EXECUTING_ACTIVITY){\r\n         return activity.startDate;\r\n      } else{\r\n         return activity.finishDate;\r\n      }\r\n   },\r\n   getDataByScenarios: function(activity){\r\n      var self = this;\r\n      var response = {\r\n         colorBar: null,\r\n         percentBar: 100,\r\n         keywordResource: null,\r\n         unitTime: null\r\n      };\r\n      var params = {};\r\n      switch(activity.currentState){\r\n         case self.EXECUTING_ACTIVITY:\r\n            response.keywordResource = \"opened\";\r\n            response.colorBar = self.getColorByCreatedAndEstimatedDate(activity);\r\n\r\n            params = {\r\n               idUser: bizagi.currentUser.idUser,\r\n               fromDate: activity.startDate,\r\n               toDate: Date.now()\r\n            };\r\n            response.unitTime = self.callGetEffectiveDuration(params);\r\n\r\n            break;\r\n         case self.FINISHED_ACTIVITY:\r\n            response.colorBar = \"Gray\";\r\n            response.keywordResource = \"closed\";\r\n            params = {\r\n               idUser: bizagi.currentUser.idUser,\r\n               fromDate: activity.finishDate,\r\n               toDate: Date.now()\r\n            };\r\n            response.unitTime = self.callGetEffectiveDuration(params);\r\n            break;\r\n      }\r\n      return response;\r\n   },\r\n\r\n   getColorBar: function(activity){\r\n      var self = this;\r\n      return self.getDataByScenarios(activity).colorBar;\r\n   },\r\n   getPercentBar: function(activity){\r\n      var self = this;\r\n      return self.getDataByScenarios(activity).percentBar;\r\n   },\r\n   getKeywordResourceDescriptionBar: function(activity){\r\n      var self = this;\r\n      return self.getDataByScenarios(activity).keywordResource;\r\n   },\r\n   getUnitTime: function(activity){\r\n      var self = this;\r\n      return self.getDataByScenarios(activity).unitTime;\r\n   },\r\n\r\n   getColorByCreatedAndEstimatedDate: function(activity){\r\n      var self = this;\r\n      var response = \"Red\";\r\n      if(activity.estimatedFinishDate) {\r\n         if (Date.now() < activity.estimatedFinishDate) {\r\n            var theSameDay = (new Date()).getUTCDate() === (new Date(activity.estimatedFinishDate)).getUTCDate();\r\n            if(theSameDay){\r\n               response = \"Yellow\";\r\n            }\r\n            else{\r\n               response = \"Green\";\r\n            }\r\n         }\r\n      }\r\n      return response;\r\n   },\r\n\r\n   getFormattedDate: function (dateObj) {\r\n      var self = this;\r\n      var monthsNames = self.datePickerRegional.monthNames;\r\n      var shortMonth = dateObj.getMonth();\r\n\r\n      return monthsNames[shortMonth] + \" \" + bizagi.util.dateFormatter.formatDate(dateObj, \"dd hh:mm tt\", bizagi.localization.getResource(\"datePickerRegional\"));\r\n   },\r\n\r\n   /**\r\n    * Call services\r\n    */\r\n   callGetEffectiveDuration: function(params){\r\n      var self = this;\r\n      var d = $.Deferred();\r\n      $.when(\r\n         self.dataService.getEffectiveDuration(params)\r\n      ).done(function (data) {\r\n            d.resolve(data);\r\n         });\r\n      return d.promise();\r\n   }\r\n\r\n});\r\n\r\nbizagi.injector.register(\"bizagi.workportal.widgets.project.plan.activity.time\", [\"workportalFacade\", \"dataService\", bizagi.workportal.widgets.project.plan.activity.time], true);","/*\r\n *   Name: Bizagi Workportal Desktop Project Plan Activity Progress\r\n *   Author: Elkin Fernando Siabato Cruz\r\n */\r\n\r\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.project.plan.activity.progress\", {}, {\r\n\r\n   /*\r\n    *   Constructor\r\n    */\r\n   init: function (workportalFacade, dataService, params) {\r\n      var self = this;\r\n\r\n      // Call base\r\n      self._super(workportalFacade, dataService, params);\r\n\r\n      self.plugins = {};\r\n      self.dialogBox = {};\r\n\r\n      //Load templates\r\n      self.loadTemplates({\r\n         \"plan-progress-main\": bizagi.getTemplate(\"bizagi.workportal.desktop.project.plan.activity.progress\").concat(\"#project-plan-activity-progress\"),\r\n         \"plan-progress-popup-edit\": bizagi.getTemplate(\"bizagi.workportal.desktop.project.plan.activity.progress\").concat(\"#project-plan-activity-edit-progress\")\r\n      });\r\n   },\r\n\r\n   renderContent: function () {\r\n      var self = this;\r\n      self.content = $(\"<div></div>\");\r\n      return self.content;\r\n   },\r\n\r\n   postRender: function () {\r\n      var self = this;\r\n      self.sub(\"LOAD_INFO_ACTIVITY_SUMMARY\", $.proxy(self.onNotifyLoadInfoActivityExecution, self));\r\n      self.sub(\"UPDATE_ITEMS_FROM_FORMRENDER\", $.proxy(self.onNotifyUpdateItemFromRender, self));\r\n   },\r\n\r\n   /**\r\n    * Notifies when an event is raised\r\n    */\r\n   onNotifyLoadInfoActivityExecution: function (event, params) {\r\n      var self = this;\r\n      self.params = $.extend(self.params, params.args);\r\n      var $content = self.getContent().empty();\r\n\r\n      var activityToShow = self.params.plan.activities.filter(function(activity){\r\n         return activity.id.toUpperCase() == self.params.plan.idActivitySelected.toUpperCase();\r\n      })[0];\r\n\r\n      var argsTemplate = {};\r\n      argsTemplate.valuePercentBarComplete = 0;\r\n      argsTemplate.progress = {\r\n         progress: activityToShow.progress,\r\n         canEdit: (activityToShow.items.length === 0)\r\n      };\r\n\r\n      if(argsTemplate.progress.progress){\r\n         argsTemplate.valuePercentBarComplete = argsTemplate.progress.progress;\r\n      }\r\n\r\n      //Update widget\r\n      var templateMain = self.getTemplate(\"plan-progress-main\");\r\n      templateMain.render(argsTemplate).appendTo($content);\r\n\r\n      self.plugins.popupEditProgress = self.initPluginPopupEditProgress();\r\n\r\n      var popupEditProgress = self.plugins.popupEditProgress;\r\n\r\n      self.formEditProgress = {\r\n         sliderProgress: $(\"#sliderProgress\", popupEditProgress).slider({\r\n            orientation: \"horizontal\",\r\n            range: \"min\",\r\n            max: 100,\r\n            width: 100,\r\n            from: 5,\r\n            to: 50,\r\n            step: 1,\r\n            value: argsTemplate.valuePercentBarComplete,\r\n            slide: $.proxy(self.onChangesliderProgress, self),\r\n            change: $.proxy(self.onChangesliderProgress, self)\r\n         }).each(function () {\r\n            var vals = $(this).slider(\"option\", \"max\") - $(this).slider(\"option\", \"min\");\r\n            for (var i = 0; i <= vals; i += 10) {\r\n               var el = $(\"<label class='step'>\" + (i) + \"</label>\").css(\"left\", (i / vals * 100) + \"%\");\r\n               $(this).append(el);\r\n            }\r\n         }),\r\n         numericTextBoxPlugin: $(\"#inputProgressNumericTextBox\", popupEditProgress).spinner({\r\n            format: \"n0\",\r\n            min: 0,\r\n            max: 100,\r\n            spin: $.proxy(self.onChangeNumericTextBoxProgress, self),\r\n            change: $.proxy(self.onChangeNumericTextBoxProgress, self),\r\n            value: argsTemplate.valuePercentBarComplete,\r\n            decimals: 0\r\n         }),\r\n         buttonChangeProgress: $(\"#button-accept-change-progress\", popupEditProgress),\r\n         buttonCancel: $(\"#button-cancel-change-progress\", popupEditProgress)\r\n      };\r\n\r\n      //Handlers\r\n      $(\".action-open-popup-edit-progress\", $content).on(\"click\", $.proxy(self.onShowPopupEditProgress, self));\r\n\r\n      self.formEditProgress.buttonCancel.on(\"click\", $.proxy(self.onClickCancel, self));\r\n      self.formEditProgress.buttonChangeProgress.on(\"click\", $.proxy(self.onSubmitFormChangeProgress, self));\r\n\r\n      self.updateProgressUI(argsTemplate.valuePercentBarComplete);\r\n      self.formEditProgress.numericTextBoxPlugin.spinner(\"value\", argsTemplate.valuePercentBarComplete);\r\n\r\n   },\r\n\r\n   onNotifyUpdateItemFromRender: function(event, params){\r\n      var self = this;\r\n      var listItems = params.args.items;\r\n      var activityWork = params.args.activityWork;\r\n\r\n      var progress;      \r\n      if(listItems.length > 0){\r\n         //Hide edit progress\r\n         $(\".action-open-popup-edit-progress\", self.content).hide();\r\n      }else{\r\n         $(\".action-open-popup-edit-progress\", self.content).show();\r\n      }\r\n      //set new progress\r\n      $(\".bz-wp-timestamp span\", self.content).text(activityWork);\r\n      $(\".bz-wp-progress-bar\", self.content).css(\"width\", activityWork + \"%\");\r\n\r\n   },\r\n\r\n   updateProgressUI: function(newPercentProgress){\r\n      var self = this,\r\n         $content = self.getContent();\r\n\r\n      $(\".bz-wp-timestamp span\", $content).text(newPercentProgress);\r\n\r\n      //Begin Adjust status bar next to the number days\r\n      var $barRemainingDate = $(\".remaining-days .time-remaining\", $content);\r\n      var widthNumberDays = $(\".remaining-days .days\", $content).width();\r\n      $barRemainingDate.css(\"padding-left\", (widthNumberDays + 7).toString() + \"px\");\r\n\r\n      var $barCompletedDate = $(\".remaining-days .bar-completed\", $content);\r\n\r\n      $barCompletedDate.css(\"width\", newPercentProgress.toString() + \"%\");\r\n      //End Adjust status bar next to the number days\r\n   },\r\n\r\n   initPluginPopupEditProgress: function () {\r\n      var self = this;\r\n      var templatePopupEditProgress = self.getTemplate(\"plan-progress-popup-edit\");\r\n      self.dialogBox.formContent = templatePopupEditProgress.render();\r\n      return self.dialogBox.formContent;\r\n\r\n   },\r\n   /*\r\n    * UI\r\n    */\r\n\r\n   onShowPopupEditProgress: function(){\r\n      var self = this;\r\n\r\n      self.dialogBox.formContent.dialog({\r\n         resizable: false,\r\n         draggable: false,\r\n         height: \"auto\",\r\n         width: \"600px\",\r\n         modal: true,\r\n         title: bizagi.localization.getResource(\"workportal-project-plan-progress-title\"),\r\n         maximize: true,\r\n         open:  $.proxy(self.onOpenPopupPlan, self),\r\n         close: function () {\r\n            self.dialogBox.formContent.dialog(\"destroy\");\r\n            self.dialogBox.formContent.detach();\r\n         }\r\n      });\r\n\r\n      self.previusValueProgress = self.formEditProgress.sliderProgress.slider(\"value\");\r\n\r\n   },\r\n\r\n   onChangeNumericTextBoxProgress: function (event) {\r\n      var self = this;\r\n      var newValue = self.formEditProgress.numericTextBoxPlugin.spinner(\"value\");\r\n      self.formEditProgress.sliderProgress.slider(\"value\", newValue);\r\n   },\r\n\r\n   onChangesliderProgress: function (event) {\r\n      var self = this;\r\n      var newValue = self.formEditProgress.sliderProgress.slider(\"value\");\r\n      self.formEditProgress.numericTextBoxPlugin.spinner(\"value\", newValue);\r\n   },\r\n\r\n   onClickCancel: function (event) {\r\n      event.preventDefault();\r\n      var self = this;\r\n\r\n      self.dialogBox.formContent.dialog(\"destroy\");\r\n      self.dialogBox.formContent.detach();\r\n      //return before value progress\r\n      self.formEditProgress.sliderProgress.slider(\"value\", self.previusValueProgress);\r\n      self.formEditProgress.numericTextBoxPlugin.spinner(\"value\", self.previusValueProgress);\r\n   },\r\n\r\n   onSubmitFormChangeProgress: function (event) {\r\n      event.preventDefault();\r\n      var self = this;\r\n\r\n      self.formEditProgress.buttonChangeProgress.prop(\"disabled\", true);\r\n\r\n      var activityToShow = self.params.plan.activities.filter(function(activity){\r\n         return activity.id == self.params.plan.idActivitySelected;\r\n      })[0];\r\n       var params = $.extend(activityToShow, {\r\n           progress:  self.formEditProgress.numericTextBoxPlugin.spinner(\"value\"),\r\n           idPlan: self.params.plan.id\r\n       });\r\n      $.when(self.dataService.editActivityPlan(params)).done(function () {\r\n         self.formEditProgress.buttonChangeProgress.prop(\"disabled\", false);\r\n         activityToShow.progress = self.formEditProgress.numericTextBoxPlugin.spinner(\"value\");\r\n         self.updateProgressUI(activityToShow.progress);\r\n          self.dialogBox.formContent.dialog(\"destroy\");\r\n          self.dialogBox.formContent.detach();\r\n      });\r\n   }\r\n\r\n});\r\n\r\nbizagi.injector.register(\"bizagi.workportal.widgets.project.plan.activity.progress\", [\"workportalFacade\", \"dataService\", bizagi.workportal.widgets.project.plan.activity.progress], true);","/*\r\n *   Name: Bizagi Workportal Desktop Project Plan Activity Subprocesses Controller\r\n *   Author: Elkin Fernando Siabato Cruz\r\n */\r\n\r\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.project.plan.activity.subprocesses\", {}, {\r\n      /*\r\n       *   Constructor\r\n       */\r\n      init: function (workportalFacade, dataService, params) {\r\n         var self = this;\r\n\r\n         // Call base\r\n         self._super(workportalFacade, dataService, params);\r\n\r\n         //Load templates\r\n         self.loadTemplates({\r\n            \"project-subprocesses\": bizagi.getTemplate(\"bizagi.workportal.desktop.project.plan.activity.subprocesses\").concat(\"#project-plan-activity-plan-subprocesses-wrapper\"),\r\n            \"project-subprocesses-tootip-custom-properties\": bizagi.getTemplate(\"bizagi.workportal.desktop.project.plan.activity.subprocesses\").concat(\"#project-activity-plan-subprocesses-tooltip-custom-properties-wrapper\")\r\n         });\r\n      },\r\n\r\n      /*\r\n       * Renders the template defined in the widget\r\n       */\r\n      renderContent: function () {\r\n         var self = this;\r\n         self.content = $(\"<div></div>\");\r\n         return self.content;\r\n      },\r\n\r\n      /*\r\n       * links events with handlers\r\n       */\r\n      postRender: function () {\r\n         var self = this;\r\n      }\r\n   }\r\n);\r\n\r\nbizagi.injector.register(\"bizagi.workportal.widgets.project.plan.activity.subprocesses\", [\"workportalFacade\", \"dataService\", bizagi.workportal.widgets.project.plan.activity.subprocesses]);","/*\r\n *   Name: Bizagi Workportal Desktop Project Plan Activity Parent\r\n *   Author: Elkin Fernando Siabato Cruz\r\n */\r\n\r\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.project.plan.activity.parent\", {}, {\r\n\r\n   /*\r\n    *   Constructor\r\n    */\r\n   init: function (workportalFacade, dataService, params) {\r\n      var self = this;\r\n\r\n      // Call base\r\n      self._super(workportalFacade, dataService, params);\r\n\r\n      //Load templates\r\n      self.loadTemplates({\r\n         \"plan-parent-main\": bizagi.getTemplate(\"bizagi.workportal.desktop.project.plan.activity.parent\").concat(\"#project-plan-activity-parent\")\r\n      });\r\n   },\r\n\r\n   renderContent: function () {\r\n      var self = this;\r\n      self.content = $(\"<div></div>\");\r\n      return self.content;\r\n   },\r\n\r\n   postRender: function () {\r\n      var self = this;\r\n      self.sub(\"LOAD_INFO_ACTIVITY_SUMMARY\", $.proxy(self.onNotifyLoadInfoActivityExecution, self));\r\n   },\r\n\r\n   /**\r\n    * Notifies when an event is raised\r\n    */\r\n\r\n   onNotifyLoadInfoActivityExecution: function (event, params) {\r\n      var self = this;\r\n      self.params = $.extend(self.params, params.args);\r\n      var $content = self.getContent().empty();\r\n\r\n         $.when(self.dataService.getPlanParent({idPlan: self.params.plan.id})).done(function (planParent) {\r\n            self.params.plan.parent = planParent;\r\n            if(self.params.plan.parent){\r\n               var argsTemplate = {};\r\n               argsTemplate.parent = {\r\n                  idParent: self.params.plan.parent.radNumber,\r\n                  nameParent: self.params.plan.parent.displayName,\r\n                  idCase: self.params.plan.parent.idCase,\r\n                  idWorkflow: self.params.plan.parent.idWorkflow,\r\n                  idWorkItem: self.params.plan.parent.idWorkItem,\r\n                  idTask: self.params.plan.parent.idTask\r\n               };\r\n\r\n               //Update widget\r\n               var contentTemplate = self.getTemplate(\"plan-parent-main\");\r\n               contentTemplate\r\n                  .render(argsTemplate)\r\n                  .appendTo($content);\r\n\r\n               $(\"#go-to-parent-case\", $content).on(\"click\", $.proxy(self.onClickGoToParentCase, self));\r\n            }\r\n         });\r\n\r\n\r\n   },\r\n\r\n   onClickGoToParentCase: function (event) {\r\n      event.preventDefault();\r\n      var self = this;\r\n      self.routingExecute($(event.target).closest(\"#go-to-parent-case\"));\r\n   }\r\n});\r\n\r\nbizagi.injector.register(\"bizagi.workportal.widgets.project.plan.activity.parent\", [\"workportalFacade\", \"dataService\", bizagi.workportal.widgets.project.plan.activity.parent], true);","/*\r\n *   Name: Bizagi Workportal Desktop Project Plan Activity Users Controller\r\n *   Author: Elkin Fernando Siabato Cruz\r\n */\r\n\r\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.project.plan.activity.users\", {}, {\r\n   /*\r\n    *   Constructor\r\n    */\r\n   init: function (workportalFacade, dataService, params) {\r\n      var self = this;\r\n\r\n      self.usersMap = {};\r\n      self.plugins = {};\r\n      self.usersInformation=[];\r\n      self.globalHandlersService = bizagi.injector.get('globalHandlersService');\r\n      self.usersAssignees = [];\r\n\r\n      // Call base\r\n      self._super(workportalFacade, dataService, params);\r\n\r\n      //Load templates\r\n      //The load template the users plan because they are the same\r\n      self.loadTemplates({\r\n         \"plan-users-main\": bizagi.getTemplate(\"bizagi.workportal.desktop.project.plan.users\").concat(\"#project-plan-users\")\r\n      });\r\n   },\r\n\r\n   /*\r\n    * Renders the template defined in the widget\r\n    */\r\n   renderContent: function () {\r\n      var self = this;\r\n      self.content = $(\"<div></div>\");\r\n      return self.content;\r\n   },\r\n\r\n   /*\r\n    * links events with handlers\r\n    */\r\n   postRender: function () {\r\n      var self = this;\r\n      self.sub(\"LOAD_INFO_ACTIVITY_SUMMARY\", $.proxy(self.onNotifyLoadInfoActivityExecution, self));\r\n   },\r\n\r\n   /*\r\n    * validate if the activity is running\r\n    */\r\n   activityRunning: function (activity) {\r\n      return activity.startDate !== null && activity.finishDate === null;\r\n   },\r\n\r\n   onNotifyLoadInfoActivityExecution: function (event, params) {\r\n      var self = this,\r\n      cvsGuidUsers = [],\r\n         activitiesUsers = [],\r\n         $content = self.getContent().empty();\r\n      self.params = $.extend(self.params, params.args);\r\n\r\n      var ownerUserId = self.params.plan.idUserCreator;\r\n      var ownerUserGuid = self.params.plan.idUserCreator;\r\n\r\n      activitiesUsers.push({ \"idUser\": ownerUserId, \"guidUser\": ownerUserGuid, \"userType\": [\"owner\"] });\r\n      self.usersMap[\"-\" + ownerUserId + \"-\"] = {\r\n         picture: \"\",\r\n         id: ownerUserId,\r\n         guid: ownerUserGuid,\r\n         name: \"\",\r\n         userType: [\"owner\"]\r\n      };\r\n      cvsGuidUsers.push(ownerUserGuid);\r\n      $.each(self.params.plan.activities, function (index, activity) {\r\n         if (self.activityRunning(activity)) {\r\n            var userId = activity.userAssigned;\r\n            var userGuid = activity.userAssignedGuid;\r\n            if (userId === ownerUserId) {\r\n               if($.inArray(\"Assigned\", activitiesUsers[0].userType) === -1){\r\n                  activitiesUsers[0].userType.push(\"Assigned\");\r\n                  self.usersMap[\"-\" + ownerUserId + \"-\"].userType.push(\"Assigned\");\r\n               }\r\n            }\r\n            else {\r\n               self.usersMap[\"-\" + userId + \"-\"] = {\r\n                  picture: \"\",\r\n                  id: userId,\r\n                  name: \"\",\r\n                  userType: [\"Assigned\"]\r\n               };\r\n               if (activitiesUsers.filter(function(user) { return user.idUser == userId; }).length === 0) {\r\n                  var id=userGuid?userGuid:userId;\r\n                  activitiesUsers.push({\"idUser\": id, \"userGuid\": id, \"userType\": [\"Assigned\"]});\r\n                  cvsGuidUsers.push(id);\r\n               }\r\n            }  \r\n         }\r\n      });\r\n      self.activitiesUsers = activitiesUsers;\r\n\r\n      //Update widget\r\n      var contentTemplate = self.getTemplate(\"plan-users-main\");\r\n      contentTemplate\r\n         .render({\r\n            assignee: self.justAssignees(activitiesUsers),\r\n            label: bizagi.localization.getResource(\"workportal-project-plan-assignee\")\r\n         })\r\n         .appendTo($content);\r\n        self.addEventHandlersModal();\r\n      $.when(self.callGetDataUsers(cvsGuidUsers)).then(function () {\r\n         self.showCreatorInformation(ownerUserId);\r\n         self.renderUserProfilesAndImages();\r\n      });\r\n   },\r\n\r\n   /**\r\n    * return standar userAdapter information with only assigned users\r\n    * @param {Array} allUsers \r\n    */\r\n   justAssignees: function (allUsers) {\r\n       var usersAssignee=[];\r\n       allUsers.map(function(user) {\r\n           var isOwner=user.userType.indexOf(\"owner\")!==-1;\r\n           var isAssignee=user.userType.indexOf(\"Assigned\")!==-1;\r\n           usersAssignee.push(usersAdapter.createJsonUserInfo(user.idUser, \"\", \"\", \"\", \"\", \"\", isAssignee, isOwner, [], []));\r\n       });\r\n       return usersAdapter.justAssignees(usersAssignee);\r\n   },\r\n   \r\n   /**\r\n    * show the information of the creator case\r\n    * @param {string} ownerUserId guid user creator\r\n    */\r\n   showCreatorInformation: function (ownerUserId) {\r\n       var self = this;\r\n       var userCreator=self.usersMap[\"-\"+ownerUserId+\"-\"];\r\n       var userInfo = usersAdapter.createJsonUserInfo(\r\n           userCreator.id,\r\n           userCreator.name,\r\n           userCreator.username,\r\n           userCreator.picture?userCreator.picture:undefined,\r\n           userCreator.email,\r\n           userCreator.name.getInitials(),\r\n           false,\r\n           true,\r\n           [],\r\n           []\r\n       );\r\n       self.content.find(\".ui-bizagi-wp-project-plan-users .ui-bizagi-wp-project-users-creator-info\").userinformation(self, { user: userInfo });\r\n   },\r\n\r\n   /**\r\n    * UI\r\n    */\r\n\r\n   renderUserProfilesAndImages: function () {\r\n       var self = this;\r\n       $.each(self.usersMap, function (i, obj) {\r\n           var $li = $(\".ui-bizagi-wp-userlist li[data-iduser=\" + obj.id + \"]\", self.content);\r\n           if (obj.picture !== \"\") {\r\n               $li.find(\"img\").prop(\"src\", obj.picture);\r\n           }\r\n           else {\r\n               $li.find(\"img\").hide();\r\n               if(obj.name!==undefined){\r\n                  $li.find(\"span\").html(obj.name.getInitials());\r\n               }\r\n               else{\r\n                  console.log(\"obj.name is undefined\");\r\n               }\r\n\r\n           }\r\n       });\r\n       $(\".ui-bizagi-wp-userlist li\", self.content).not(\".moreUsers\").on('mouseenter', function (ev) {\r\n         var $target = $(ev.target);  \r\n         var userId = $(this).data(\"iduser\");\r\n         var userSelected;\r\n         $.each(self.usersMap, function (i, obj) {\r\n            if(obj.id === userId)\r\n               userSelected=obj;\r\n        });\r\n         var usersActivities=self.usersAssignees.find(function(assignee) {\r\n            return assignee.userAssigned === userSelected.id;\r\n         });\r\n         var activities=[];\r\n         if(usersActivities)\r\n            usersActivities.activities.map(function(activity) {\r\n               activities.push(activity.name);\r\n            });\r\n         var userParam = usersAdapter.createJsonUserInfo(userSelected.id, userSelected.name, userSelected.username, userSelected.picture, userSelected.email, userSelected.name.getInitials(), self.getIsAssignee(userSelected), self.getIsOwner(userSelected), activities, undefined);\r\n                     \r\n         $target.parent().usertooltip(self,{target:$target,user:userParam});\r\n      });\r\n   },\r\n\r\n   getIsAssignee: function(userSelected){\r\n      if(userSelected.userType.indexOf(\"Assigned\") > -1){\r\n          return true;\r\n      }\r\n      return false;\r\n     },\r\n  \r\n     getIsOwner : function(userSelected){\r\n      if(userSelected.userType.indexOf(\"owner\") > -1){\r\n          return true;\r\n      }\r\n      return false;\r\n     },\r\n   /*\r\n    *  Get data for users\r\n    */\r\n   callGetDataUsers: function (cvsGuidUsers) {\r\n      var self = this,\r\n         params = {},\r\n         defer = $.Deferred();\r\n      params = {\r\n         usersGuids: cvsGuidUsers.join(),\r\n         width: 50,\r\n         height: 50\r\n      };\r\n      $.when(self.dataService.getUsersData(params)).always(function (response) {\r\n        self.usersInformation= response;\r\n         for (var i = 0, length = response.length; i < length; i += 1) {\r\n            if (typeof (response[i].name) === \"undefined\") {\r\n               bizagi.log(response[i] + \" Id Not Found\", response, \"error\");\r\n            } else {\r\n               if(self.usersMap[\"-\" + response[i].id + \"-\"]){\r\n                  self.usersMap[\"-\" + response[i].id + \"-\"].picture += (response[i].picture) ? \"data:image/png;base64,\" + response[i].picture : \"\";\r\n                  self.usersMap[\"-\" + response[i].id + \"-\"].name = response[i].name || \"\";\r\n                  self.usersMap[\"-\" + response[i].id + \"-\"].username = response[i].username || \"\";\r\n                  self.usersMap[\"-\" + response[i].id + \"-\"].email = response[i].email || \"\";\r\n               }\r\n               else{\r\n                  console.log(\"The object is undefined\");\r\n               }\r\n            }\r\n         }\r\n         self.getUsersAssignees();\r\n         defer.resolve();\r\n      });\r\n      return defer.promise();\r\n   },\r\n\r\ngetUsersAssignees: function(){\r\n    var self = this;\r\n    for(var i=0; i<self.usersInformation.length; i++){\r\n        self.usersAssignees.push(self.getUserAssignee(self.usersInformation[i]));\r\n    }\r\n\r\n},\r\n\r\ngetUserAssignee: function(user){\r\n    var self =  this;\r\n    var tasks = [];\r\n    $.each(self.params.plan.activities, function (index, activity) {\r\n        var userId = activity.userAssigned;\r\n        if (userId === user.id && self.activityRunning(activity)) {\r\n            tasks.push({ \"name\": activity.name });\r\n        }\r\n    });\r\n    user.tasks = tasks;\r\n    var types = self.activitiesUsers.find(function(actUser) {\r\n        return actUser.idUser == user.id;\r\n    });\r\n    user.userType = types.userType;\r\n\r\n    var userAssignees = usersAdapter.createJsonUserInfo(\r\n        user.id, \r\n        user.name, \r\n        user.username, \r\n        user.picture ? \"data:image/png;base64,\" + user.picture : undefined, \r\n        user.email, \r\n        user.name.getInitials(),\r\n        self.getIsAssignee(user), \r\n        self.getIsOwner(user), \r\n        user.tasks, \r\n        []);\r\n\r\n        return userAssignees;\r\n   },\r\n\r\n   addEventHandlersModal: function () {\r\n    var self =  this;\r\n    $(\".moreUsers\").click(function(event) {\r\n        event.preventDefault();\r\n        event.stopPropagation();\r\n        var usersAssignees = self.usersAssignees || [];\r\n        self.globalHandlersService.publish(\"showDialogWidget\", {\r\n            widgetName: bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_USERS_MODAL,\r\n            closeVisible: true,\r\n            data: usersAssignees,\r\n            maximize: true,\r\n            modalParameters: {\r\n                title: bizagi.localization.getResource(\"workportal-project-users-title\")+ \" (\"+usersAssignees.length+\")\",\r\n                width: 790,\r\n                height: 526,\r\n                refreshInbox: false\r\n            }\r\n        });\r\n     });\r\n   }\r\n\r\n});\r\n\r\nbizagi.injector.register(\"bizagi.workportal.widgets.project.plan.activity.users\", [\"workportalFacade\", \"dataService\", bizagi.workportal.widgets.project.plan.activity.users], true);"]}