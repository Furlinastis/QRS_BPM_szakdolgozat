{"version":3,"sources":["jquery/workportal/desktop/widget/profly/bizagi.workportal.desktop.widgets.profly.js"],"names":["bizagi","workportal","widgets","widget","extend","init","workportalFacade","dataService","params","this","_super","loadTemplates","project-filespreview-wrapper","getTemplate","concat","renderContent","self","argumentsTemplate","paramsURL","data","route","id","encodeURI","displayName","module","generalTmpl","content","render","$","on","event","currentTarget","contentWindow","location","href","indexOf","reload","postRender","clean","off","plugins","form","currentFile","filesNumber","injector","register","profly"],"mappings":"AAKAA,OAAOC,WAAWC,QAAQC,OAAOC,OAAO,uCAIpCC,KAAM,SAAUC,EAAkBC,EAAaC,GAChCC,KAGNC,OAAOJ,EAAkBC,EAAaC,GAHhCC,KAMNE,eACDC,+BAAgCZ,OAAOa,YAAY,2CAA2CC,OAAO,oCAO7GC,cAAe,WACX,IAAIC,EAAOP,KAEPQ,GACAC,UAAW,IAEZF,EAAKR,OAAOW,MAAQH,EAAKR,OAAOW,KAAKC,OAASJ,EAAKR,OAAOW,KAAKX,OAAOa,KACrEJ,EAAkBC,UACdI,UAAU,UAAYN,EAAKR,OAAOW,KAAKC,MAAQ,OAASJ,EAAKR,OAAOW,KAAKX,OAAOa,GAAK,gBAAkBL,EAAKR,OAAOW,KAAKX,OAAOe,cAIpIP,EAAKR,OAAOW,MAAQH,EAAKR,OAAOW,KAAKC,OAASJ,EAAKR,OAAOW,KAAKX,OAAOgB,SACrEP,EAAkBC,UACdI,UAAU,UAAYN,EAAKR,OAAOW,KAAKC,MAAQ,WAAaJ,EAAKR,OAAOW,KAAKX,OAAOgB,SAG5F,IAAIC,EAAcT,EAAKH,YAAY,gCASnC,OARAG,EAAKU,QAAUD,EAAYE,OAAOV,GAElCW,EAAEZ,EAAKU,SAASG,GAAG,OAAQ,SAAUC,IAEI,IAD1BA,EAAMC,cAAcC,cAAcC,SAASC,KAC9CC,QAAQ,iBACZF,SAASG,WAGVpB,EAAKU,SAOhBW,WAAY,aAIZC,MAAO,WACH,IAAItB,EAAOP,KACXmB,EAAE,wBAAyBZ,EAAKU,SAASa,MACzCvB,EAAKwB,WACLxB,EAAKyB,QACLzB,EAAK0B,eACL1B,EAAK2B,YAAc,KAI3B3C,OAAO4C,SAASC,SAAS,oCAAqC,mBAAoB,cAAe7C,OAAOC,WAAWC,QAAQ4C","sourcesContent":["/*\r\n *   Name: Bizagi Workportal Desktop Project File Preview\r\n *   Author: David Romero Estrada\r\n */\r\n\r\nbizagi.workportal.widgets.widget.extend(\"bizagi.workportal.widgets.profly\", {}, {\r\n    /*\r\n    *   Constructor\r\n    */\r\n    init: function (workportalFacade, dataService, params) {\r\n        var self = this;\r\n\r\n        // Call base\r\n        self._super(workportalFacade, dataService, params);\r\n\r\n        //Load templates\r\n        self.loadTemplates({\r\n            \"project-filespreview-wrapper\": bizagi.getTemplate(\"bizagi.workportal.desktop.widget.profly\").concat(\"#project-filespreview-wrapper\")\r\n        });\r\n    },\r\n\r\n    /**\r\n    * Renders the template defined in the widget\r\n    */\r\n    renderContent: function () {\r\n        var self = this;\r\n        // Define parameters to route angular app\r\n        var argumentsTemplate = {\r\n            paramsURL: ''\r\n        }\r\n        if(self.params.data && self.params.data.route && self.params.data.params.id){\r\n            argumentsTemplate.paramsURL =\r\n                encodeURI('?route=' + self.params.data.route + '&id=' + self.params.data.params.id + '&displayName=' + self.params.data.params.displayName);\r\n\r\n        }\r\n\r\n        if(self.params.data && self.params.data.route && self.params.data.params.module){\r\n            argumentsTemplate.paramsURL =\r\n                encodeURI('?route=' + self.params.data.route + '&module=' + self.params.data.params.module);\r\n        }\r\n\r\n        var generalTmpl = self.getTemplate(\"project-filespreview-wrapper\");\r\n        self.content = generalTmpl.render(argumentsTemplate);\r\n        \r\n        $(self.content).on(\"load\", function (event) {\r\n            var path = event.currentTarget.contentWindow.location.href;\r\n            if(path.indexOf('quickprocess') === -1 ){\r\n                location.reload(); // QAF-5934\r\n            }\r\n        });\r\n        return self.content;\r\n    },\r\n\r\n\r\n    /**\r\n    * links events with handlers\r\n    */\r\n    postRender: function () {\r\n        var self = this;\r\n    },\r\n\r\n    clean: function () {\r\n        var self = this;\r\n        $('#iframe-liveprocesses', self.content).off();\r\n        self.plugins = {};\r\n        self.form = {};\r\n        self.currentFile = {};\r\n        self.filesNumber = 0;\r\n    }\r\n});\r\n\r\nbizagi.injector.register(\"bizagi.workportal.widgets.profly\", [\"workportalFacade\", \"dataService\", bizagi.workportal.widgets.profly]);"]}